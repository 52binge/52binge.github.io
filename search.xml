<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Spark Tutorials 2 - SparkContextã€Stageã€Executorã€RDD]]></title>
      <url>http://shopee.ai/2020/09/19/spark/Spark-Tutorials-Part2/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/Spark-Tutorial-02.jpg" width="500" alt=""></p>
<a id="more"></a>
<h2 id="1-Spark-SparkContext"><a href="#1-Spark-SparkContext" class="headerlink" title="1. Spark - SparkContext"></a>1. Spark - SparkContext</h2><p><img src="/images/spark/apache-spark-SparkContext.jpg" width="600" alt=""></p>
<p>SparkContext allows your Spark Application to access Spark Cluster with the help of Resource Manager. The resource manager can be one of these three- <strong>Spark Standalone,  YARN, Apache Mesos</strong>.</p>
<p>The different contexts in which it can run are local, yarn-client, Mesos URL and Spark URL.</p>
<h3 id="1-1-SparkContext-Functions"><a href="#1-1-SparkContext-Functions" class="headerlink" title="1.1 SparkContext Functions"></a>1.1 SparkContext Functions</h3><p><img src="/images/spark/apache-spark-functions-of-sparkcontext-in.jpg" width="800" alt="Functions of SparkContext"></p>
<h3 id="1-2-SparkContext-Conclusion"><a href="#1-2-SparkContext-Conclusion" class="headerlink" title="1.2 SparkContext Conclusion"></a>1.2 SparkContext Conclusion</h3><p>Hence, SparkContext provides the various functions in Spark like get the current status of Spark Application, set the configuration, cancel a job, Cancel a stage and much more. It is an entry point to the Spark functionality. Thus, it acts a backbone.</p>
<h2 id="2-Spark-Stage"><a href="#2-Spark-Stage" class="headerlink" title="2. Spark - Stage"></a>2. Spark - Stage</h2><p>Spark Stage- An Introduction to Physical Execution plan</p>
<p><img src="/images/spark/apache-Spark-Stage-An-Introduction-to-Physical-Execution-plan.png" width="700" alt="It is basically a physical unit of the execution plan. "></p>
<blockquote>
<ol>
<li><strong>ShuffleMapstage</strong> </li>
<li><strong>ResultStage</strong></li>
</ol>
</blockquote>
<h3 id="2-1-What-are-Stages-in-Spark"><a href="#2-1-What-are-Stages-in-Spark" class="headerlink" title="2.1 What are Stages in Spark?"></a>2.1 What are Stages in Spark?</h3><p><img src="/images/spark/data-flair/Submitting-a-Job-in-Spark.jpg" width="700" alt="one task per partition. In other words,  each job which gets divided into smaller sets of tasks is a stage."></p>
<blockquote>
<p>with the boundary of a stage in spark marked by shuffle dependencies.</p>
<p>Ultimately,  submission of Spark stage triggers the execution of a series of dependent parent stages. Although, there is a first Job Id present at every stage that is the id of the job which submits stage in Spark.</p>
</blockquote>
<p><img src="/images/spark/data-flair/Spark-Stages.jpg" width="700" alt=""></p>
<h3 id="2-2-ShuffleMapStage"><a href="#2-2-ShuffleMapStage" class="headerlink" title="2.2 ShuffleMapStage"></a>2.2 ShuffleMapStage</h3><ol>
<li>ShuffleMapStage in Spark</li>
<li>ResultStage in Spark</li>
</ol>
<p><img src="/images/spark/data-flair/DAG-Scheduler.jpg" width="700" alt=""></p>
<h3 id="2-3-ResultStage"><a href="#2-3-ResultStage" class="headerlink" title="2.3 ResultStage"></a>2.3 ResultStage</h3><p>ResultStage implies as a final stage in a job that applies a function on one or many partitions of the target RDD in Spark. It also helps for computation of the result of an action.</p>
<p><img src="/images/spark/data-flair/Graph-of-Spark-Stages.jpg" width="700" alt="running a function on a spark RDD Stage that executes a Spark action in a user program is a ResultStage."></p>
<h2 id="3-Spark-Executor"><a href="#3-Spark-Executor" class="headerlink" title="3. Spark - Executor"></a>3. Spark - Executor</h2><p><code>Apache Spark Executor for Executing Spark Tasks</code></p>
<p><img src="/images/spark/data-flair/Apache-Spark-Executor-01.jpg" width="750" alt=""></p>
<h3 id="3-1-Spark-Executor"><a href="#3-1-Spark-Executor" class="headerlink" title="3.1 Spark Executor"></a>3.1 Spark Executor</h3><p><img src="/images/spark/data-flair/heartbeat-receivers-heartbeat-message-handler.png" width="700" alt=""></p>
<p>Some conditions in which we create Executor in Spark is:</p>
<ol>
<li>When CoarseGrainedExecutorBackend receives RegisteredExecutor message. Only for Spark Standalone and YARN.</li>
<li>When LocalEndpoint is created for local mode.</li>
</ol>
<p>n. ç«¯ç‚¹ï¼›[åŒ–]æ»´å®šç»ˆç‚¹</p>
<h3 id="3-2-Creating-Executor-Instance"><a href="#3-2-Creating-Executor-Instance" class="headerlink" title="3.2 Creating Executor Instance"></a>3.2 Creating Executor Instance</h3><p>By using the following, we can create the Spark Executor:</p>
<blockquote>
<ol>
<li>From Executor ID.</li>
<li>By using SparkEnv we can access the local MetricsSystem as well as BlockManager. Moreover, we can also access the local serializer by it.</li>
<li>From Executorâ€™s hostname.</li>
<li>To add to tasksâ€™ classpath, a collection of user-defined JARs. By default, it is empty.</li>
<li>By flag whether it runs in local or cluster mode (disabled by default, i.e. cluster is preferred)</li>
</ol>
</blockquote>
<p>Moreover, when creation is successful, the one INFO messages pop up in the logs. That is:</p>
<blockquote>
<p>INFO Executor: Starting executor ID [executorId] on host [executorHostname]</p>
</blockquote>
<h3 id="3-3-Heartbeat-Sender-Thread"><a href="#3-3-Heartbeat-Sender-Thread" class="headerlink" title="3.3 Heartbeat Sender Thread"></a>3.3 Heartbeat Sender Thread</h3><blockquote>
<p>Basically, with a single thread, heartbeater is a daemon ScheduledThreadPoolExecutor.<br>We call this thread pool a driver-heartbeater.</p>
</blockquote>
<h3 id="3-4-Launching-Task-Method"><a href="#3-4-Launching-Task-Method" class="headerlink" title="3.4 Launching Task Method"></a>3.4 Launching Task Method</h3><h3 id="3-5-executor-taskLaunch-worker"><a href="#3-5-executor-taskLaunch-worker" class="headerlink" title="3.5 executor.taskLaunch.worker"></a>3.5 executor.taskLaunch.worker</h3><p><strong>Thread Pool â€” ThreadPool Property</strong></p>
<p><a href="https://data-flair.training/blogs/spark-executor/" target="_blank" rel="external">executor</a></p>
<h3 id="3-6-Conclusion"><a href="#3-6-Conclusion" class="headerlink" title="3.6 Conclusion"></a>3.6 Conclusion</h3><p>we have also learned how Spark Executors are helpful for executing tasks. The major advantage we have learned is, we can have as many executors we want. Therefore, Executors helps to enhance the Spark performance of the system. </p>
<h2 id="4-Spark-RDD"><a href="#4-Spark-RDD" class="headerlink" title="4. Spark - RDD"></a>4. Spark - RDD</h2><p>Spark RDD â€“ Introduction, Features &amp; Operations of RDD</p>
<h3 id="4-1-resilient-distributed-dataset"><a href="#4-1-resilient-distributed-dataset" class="headerlink" title="4.1 resilient distributed dataset"></a>4.1 <a href="https://data-flair.training/blogs/spark-rdd-tutorial/" target="_blank" rel="external">resilient distributed dataset</a></h3><blockquote>
<ul>
<li><strong>Resilient</strong>, i.e. fault-tolerant with the help of RDD lineage graph(DAG) and so able to recompute missing or damaged partitions due to node failures.</li>
<li><strong>Distributed</strong>, since Data resides on multiple nodes.</li>
<li><strong>Dataset</strong> represents records of the data you work with. The user can load the data set externally which can be either JSON file, CSV file, text file or database via JDBC with no specific data structure.</li>
</ul>
</blockquote>
<p><img src="/images/spark/data-flair/Apache-Spark-RDD-01.jpg" width="700" alt=""></p>
<h3 id="4-2-Why-need-RDD-in-Spark"><a href="#4-2-Why-need-RDD-in-Spark" class="headerlink" title="4.2 Why need RDD in Spark?"></a>4.2 Why need RDD in Spark?</h3><p>Apache Spark evaluates RDDs lazily. It is called when needed, which saves lots of time and improves efficiency. The first time they are used in an action so that it can pipeline the transformation. Also, the programmer can call a persist method to state which RDD they want to use in future operations.</p>
<h3 id="4-3-Features-of-Spark-RDD"><a href="#4-3-Features-of-Spark-RDD" class="headerlink" title="4.3 Features of Spark RDD"></a>4.3 Features of Spark RDD</h3><p><img src="/images/spark/data-flair/features-of-RDD-in-spark.jpg" width="750" alt=""></p>
<h2 id="5-Spark-RDD-Operations"><a href="#5-Spark-RDD-Operations" class="headerlink" title="5. Spark RDD Operations"></a>5. Spark RDD Operations</h2><ol>
<li>Transformation</li>
<li>Actions</li>
</ol>
<h3 id="5-1-Transformations"><a href="#5-1-Transformations" class="headerlink" title="5.1 Transformations"></a>5.1 Transformations</h3><p><strong>a. Narrow Transformations </strong></p>
<p><strong>b. Wide Transformations</strong></p>
<h3 id="5-2-Actions"><a href="#5-2-Actions" class="headerlink" title="5.2 Actions"></a>5.2 Actions</h3><h2 id="6-Limitation-of-Spark-RDD"><a href="#6-Limitation-of-Spark-RDD" class="headerlink" title="6. Limitation of Spark RDD"></a>6. Limitation of Spark RDD</h2><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://data-flair.training/blogs/" target="_blank" rel="external">data-flair.training/blogs</a></li>
<li><a href="https://data-flair.training/blogs/spark-rdd-operations-transformations-actions/" target="_blank" rel="external">Spark RDD Operations-Transformation &amp; Action with Example</a></li>
<li><a href="https://blog.csdn.net/u014204541/article/details/81130870" target="_blank" rel="external">Spark RDDå¸¸ç”¨ç®—å­å­¦ä¹ ç¬”è®°è¯¦è§£(pythonç‰ˆ)</a></li>
<li><a href="https://blog.csdn.net/dwb1015/article/details/52200809" target="_blank" rel="external">Sparkå¸¸ç”¨çš„Transformationç®—å­çš„ç®€å•ä¾‹å­</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Tutorials 1 - Introduceã€Ecosysmã€Featuresã€Shell Commands]]></title>
      <url>http://shopee.ai/2020/09/19/spark/Spark-Tutorials-Part1/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-summary-logo.jpg" width="500" alt=""></p>
<a id="more"></a>
<h2 id="1-Spark-Introduction"><a href="#1-Spark-Introduction" class="headerlink" title="1. Spark - Introduction"></a>1. Spark - Introduction</h2><ol>
<li>Objective â€“ Spark Tutorial</li>
<li>Introduction to Spark Programming</li>
<li>Spark Tutorial â€“  History</li>
<li>Why Spark?</li>
<li>Apache Spark Components</li>
</ol>
<blockquote>
<p>a. Spark Core<br>b. Spark SQL<br>c. Spark Streaming</p>
</blockquote>
<p><a href="https://data-flair.training/blogs/spark-tutorial/" target="_blank" rel="external">Spark Tutorial â€“ Learn Spark Programming</a></p>
<h2 id="2-Spark-Ecosystem"><a href="#2-Spark-Ecosystem" class="headerlink" title="2. Spark - Ecosystem"></a>2. Spark - Ecosystem</h2><p><img src="/images/spark/apache-spark-ecosystem-components.jpg" width="700" alt=""></p>
<h2 id="3-Spark-Features"><a href="#3-Spark-Features" class="headerlink" title="3. Spark - Features"></a>3. Spark - Features</h2><p><img src="/images/spark/apache-spark-features.jpg" width="700" alt=""></p>
<h2 id="4-Spark-Shell-Commands"><a href="#4-Spark-Shell-Commands" class="headerlink" title="4. Spark - Shell Commands"></a>4. Spark - Shell Commands</h2><p><img src="/images/spark/apache-SPARK-Shell-Commands-01.jpg" width="600" alt="spark shell"></p>
<h3 id="4-1-Create-a-new-RDD"><a href="#4-1-Create-a-new-RDD" class="headerlink" title="4.1 Create a new RDD"></a>4.1 Create a new RDD</h3><p>a) Read File from local filesystem and create an RDD.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkConf , SparkContext</span><br><span class="line">lines = sc.textFile(<span class="string">"/Users/blair/ghome/github/spark3.0/pyspark/spark-src/word_count.text"</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">lines.take(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>b) Create an RDD through Parallelized Collection</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkConf , SparkContext</span><br><span class="line">no = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">7</span>]</span><br><span class="line">noData = sc.parallelize(no)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ParallelCollectionRDD[45] at readRDDFromFile at PythonRDD.scala:262</span></span><br></pre></td></tr></table></figure>
<p>c) From Existing RDDs</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">words= lines.map(<span class="keyword">lambda</span> x : x + <span class="string">"haha"</span>)</span><br><span class="line"></span><br><span class="line">words.take(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h3 id="4-2-RDD-Number-of-Items"><a href="#4-2-RDD-Number-of-Items" class="headerlink" title="4.2 RDD Number of Items"></a>4.2 RDD Number of Items</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">noData.count()</span><br><span class="line"><span class="comment">#8</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-Filter-Operation"><a href="#4-3-Filter-Operation" class="headerlink" title="4.3 Filter Operation"></a>4.3 Filter Operation</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> <span class="type">DFData</span> = data.filter(line =&gt; line.contains(<span class="string">"DataFlair"</span>))</span><br></pre></td></tr></table></figure>
<h3 id="4-4-Transformation-and-Action"><a href="#4-4-Transformation-and-Action" class="headerlink" title="4.4 Transformation and Action"></a>4.4 Transformation and Action</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; data.filter(line =&gt; line.contains(<span class="string">"DataFlair"</span>)).count()</span><br></pre></td></tr></table></figure>
<h3 id="4-5-Read-RDD-first-5-item"><a href="#4-5-Read-RDD-first-5-item" class="headerlink" title="4.5 Read RDD first 5 item"></a>4.5 Read RDD first 5 item</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; data.first()</span><br><span class="line">scala&gt; data.take(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p>Letâ€™s run some actions</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">noData.count()</span><br><span class="line"></span><br><span class="line">noData.collect()</span><br></pre></td></tr></table></figure>
<h3 id="4-6-Spark-WordCount"><a href="#4-6-Spark-WordCount" class="headerlink" title="4.6 Spark WordCount"></a>4.6 Spark WordCount</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkConf , SparkContext</span><br><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> add</span><br><span class="line">sc.version</span><br><span class="line"></span><br><span class="line">lines = sc.textFile(<span class="string">"/Users/blair/ghome/github/spark3.0/pyspark/spark-src/word_count.text"</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lines = lines.filter(<span class="keyword">lambda</span> x: <span class="string">'New York'</span> <span class="keyword">in</span> x)</span><br><span class="line"><span class="comment">#lines.take(3)</span></span><br><span class="line"></span><br><span class="line">words = lines.flatMap(<span class="keyword">lambda</span> x: x.split(<span class="string">' '</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#print(words.take(5))</span></span><br><span class="line"></span><br><span class="line">wco = words.map(<span class="keyword">lambda</span> x: (x, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#print(wco.take(5))</span></span><br><span class="line"></span><br><span class="line">word_count = wco.reduceByKey(add)</span><br><span class="line"></span><br><span class="line">word_count.collect()</span><br><span class="line"></span><br><span class="line"><span class="comment"># [</span></span><br><span class="line"><span class="comment">#  ('The', 10),</span></span><br><span class="line"><span class="comment">#  ('of', 33),</span></span><br><span class="line"><span class="comment">#  ('New', 20),</span></span><br><span class="line"><span class="comment">#  ('begins', 1),</span></span><br><span class="line"><span class="comment">#  ('around', 4),</span></span><br><span class="line"><span class="comment">#  ...</span></span><br><span class="line"><span class="comment"># ]</span></span><br></pre></td></tr></table></figure>
<h3 id="4-7-Write-to-HDFS"><a href="#4-7-Write-to-HDFS" class="headerlink" title="4.7 Write to HDFS"></a>4.7 Write to HDFS</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">word_count.saveAsTextFile(<span class="string">"hdfs://localhost:9000/out"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://data-flair.training/blogs/" target="_blank" rel="external">data-flair.training/blogs</a></li>
<li><a href="https://data-flair.training/blogs/spark-rdd-operations-transformations-actions/" target="_blank" rel="external">Spark RDD Operations-Transformation &amp; Action with Example</a></li>
<li><a href="https://blog.csdn.net/u014204541/article/details/81130870" target="_blank" rel="external">Spark RDDå¸¸ç”¨ç®—å­å­¦ä¹ ç¬”è®°è¯¦è§£(pythonç‰ˆ)</a></li>
<li><a href="https://blog.csdn.net/dwb1015/article/details/52200809" target="_blank" rel="external">Sparkå¸¸ç”¨çš„Transformationç®—å­çš„ç®€å•ä¾‹å­</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SQL vs NoSQL]]></title>
      <url>http://shopee.ai/2020/09/15/dataware/summary-sql/</url>
      <content type="html"><![CDATA[<p><img src="/images/sql/sql-vs-nosql.png" width="500" alt=""></p>
<a id="more"></a>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/63371253" target="_blank" rel="external">å¹²è´§ | SQL ä¸ NoSQLè¿˜åœ¨å‚»å‚»åˆ†ä¸æ¸…ï¼Ÿ</a></li>
<li><a href="https://blog.csdn.net/kezhong_wxl/article/details/77000947" target="_blank" rel="external">NoSqlå¯¹äºäº‹åŠ¡çš„æ”¯æŒ</a></li>
<li><a href="https://www.geeksforgeeks.org/thread-in-operating-system/" target="_blank" rel="external">Thread in Operating System</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/114453309" target="_blank" rel="external">é¢è¯•å¿…è€ƒ | è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[HDFS æ¼”è¿›ä¹‹è·¯]]></title>
      <url>http://shopee.ai/2020/09/14/hadoop/hdfs-NX-1/</url>
      <content type="html"><![CDATA[<p><img src="/images/hadoop/hadoop-hdfs.webp" width="450" alt="Hadoop HDFS"></p>
<a id="more"></a>
<h2 id="æœ¬èŠ‚ç›®æ ‡ï¼š"><a href="#æœ¬èŠ‚ç›®æ ‡ï¼š" class="headerlink" title="æœ¬èŠ‚ç›®æ ‡ï¼š"></a>æœ¬èŠ‚ç›®æ ‡ï¼š</h2><ul>
<li><strong>HDFS æ˜¯å¦‚ä½•å®ç°æœ‰çŠ¶æ€çš„é«˜å¯ç”¨æ¶æ„</strong></li>
<li><strong>HDFS æ˜¯å¦‚ä½•ä»æ¶æ„ä¸Šè§£å†³å•æœºå†…å­˜å—é™é—®é¢˜çš„</strong></li>
<li><strong>æ­ç§˜ HDFS èƒ½æ”¯æ’‘äº¿çº§æµé‡çš„æ ¸å¿ƒæºç è®¾è®¡</strong></li>
</ul>
<p><img src="/images/hadoop/hdfs-4.jpg" width="" alt="Hadoop HDFS"></p>
<p>HDFS1 æ˜¯ä¸€ä¸ª <code>ä¸»ä»å¼</code> æ¶æ„, ä¸»èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå« <code>NameNode</code>. ä»èŠ‚ç‚¹æœ‰å¤šä¸ªå« <code>DataNode</code></p>
<p><img src="/images/hadoop/hdfs-5_meitu_1.jpg" alt="Hadoop HDFS"></p>
<h2 id="1-HDFS1-æ¶æ„"><a href="#1-HDFS1-æ¶æ„" class="headerlink" title="1. HDFS1 æ¶æ„"></a>1. HDFS1 æ¶æ„</h2><p><img src="/images/hadoop/hdfs-6_meitu_1.jpg" alt="HDFS"></p>
<h3 id="1-1-HDFS1-æ¶æ„ç¼ºé™·"><a href="#1-1-HDFS1-æ¶æ„ç¼ºé™·" class="headerlink" title="1.1 HDFS1 æ¶æ„ç¼ºé™·"></a>1.1 HDFS1 æ¶æ„ç¼ºé™·</h3><ol>
<li>å•ç‚¹æ•…éšœé—®é¢˜</li>
<li>å†…å­˜å—é™é—®é¢˜</li>
</ol>
<h3 id="1-2-å•ç‚¹æ•…éšœ-Solution"><a href="#1-2-å•ç‚¹æ•…éšœ-Solution" class="headerlink" title="1.2 å•ç‚¹æ•…éšœ Solution"></a>1.2 å•ç‚¹æ•…éšœ Solution</h3><p><img src="/images/hadoop/hdfs-7.jpg" width="800" alt="HDFS"></p>
<h3 id="1-3-å†…å­˜å—é™-Solution"><a href="#1-3-å†…å­˜å—é™-Solution" class="headerlink" title="1.3 å†…å­˜å—é™ Solution"></a>1.3 å†…å­˜å—é™ Solution</h3><p><img src="/images/hadoop/hdfs-8.jpg" width="800" alt="HDFS"></p>
<h2 id="2-HDFS2-ç»“æ„"><a href="#2-HDFS2-ç»“æ„" class="headerlink" title="2. HDFS2 ç»“æ„"></a>2. HDFS2 ç»“æ„</h2><table>
<thead>
<tr>
<th style="text-align:center">Solution</th>
<th style="text-align:center">HDFS1 Question</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">HA æ–¹æ¡ˆ (High Avaiable)</td>
<td style="text-align:center">è§£å†³ HDFS1 Namenode å•ç‚¹æ•…éšœé—®é¢˜</td>
</tr>
<tr>
<td style="text-align:center">è”é‚¦æ–¹æ¡ˆ</td>
<td style="text-align:center">è§£å†³äº† HDFS1 å†…å­˜å—é™é—®é¢˜</td>
</tr>
</tbody>
</table>
<h2 id="3-HDFS3"><a href="#3-HDFS3" class="headerlink" title="3. HDFS3"></a>3. HDFS3</h2><ul>
<li>HA æ–¹æ¡ˆæ”¯æŒå¤šä¸ª Namenode</li>
<li>å¼•å…¥çº åˆ ç æŠ€æœ¯</li>
</ul>
<p><strong>æ€è€ƒï¼š</strong></p>
<p>å› ä¸º NameNode ç®¡ç†äº†å…ƒæ•°æ®, ç”¨æˆ·æ‰€æœ‰çš„æ“ä½œè¯·æ±‚éƒ½è¦æ“ä½œ Namenodeï¼Œ å¤§ä¸€ç‚¹çš„å¹³å°ä¸€å¤©éœ€è¦è¿è¡Œå‡ åä¸‡ä¸Šç™¾ä¸‡çš„ä»»åŠ¡ã€‚ä¸€ä¸ªä»»åŠ¡å°±ä¼šæœ‰å¾ˆå¤šä¸ªè¯·æ±‚ï¼Œè¿™äº›æ‰€æœ‰çš„è¯·æ±‚éƒ½æ‰“åˆ° Namenode è¿™å„¿ (æ›´æ–°ç›®å½•æ ‘)ï¼Œ å¯¹äº Namenode æ¥è¯´è¿™å°±æ˜¯äº¿çº§çš„æµé‡. Namenode æ˜¯å¦‚ä½•æ”¯æ’‘äº¿çº§æµé‡çš„å‘¢ï¼Ÿ</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/WYpersist/article/details/80262066" target="_blank" rel="external">50ä¸ªHadoopçš„é¢è¯•é—®é¢˜</a></li>
<li><a href="https://study.163.com/course/courseLearn.htm?courseId=1209979905#/learn/live?lessonId=1281107303&amp;courseId=1209979905" target="_blank" rel="external">å¤§æ•°æ®å¼€å‘ç³»åˆ—ç›´æ’­è¯¾ â‘¢</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Summary SQL - Leetcode]]></title>
      <url>http://shopee.ai/2020/09/06/leetcode/summary.sql/</url>
      <content type="html"><![CDATA[<p><img src="/images/sql/sql-50-logo.jpg" width="500"></p>
<a id="more"></a>
<ol>
<li><a href="https://leetcode-cn.com/problems/combine-two-tables/" target="_blank" rel="external">175. Combine Two Tables</a></li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    FirstName,</span><br><span class="line">    LastName,</span><br><span class="line">    City,</span><br><span class="line">    State</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    Person</span><br><span class="line">    <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> Address <span class="keyword">ON</span> Person.PersonId = Address.PersonId;</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/35707293" target="_blank" rel="external">çŸ¥ä¹ï¼š [Leetcode][åŠ¨æ€è§„åˆ’]ç›¸å…³é¢˜ç›®æ±‡æ€»/åˆ†æ/æ€»ç»“</a></li>
<li><a href="https://www.jianshu.com/p/af880bbba792" target="_blank" rel="external">ç®€ä¹¦ï¼š 2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“åŠ¨æ€è§„åˆ’(Dynamic Programming)</a></li>
<li><a href="https://blog.csdn.net/EbowTang/article/details/50791500" target="_blank" rel="external">CSDN leetcode DP</a></li>
<li><a href="https://blog.csdn.net/fuxuemingzhu/article/details/105183554" target="_blank" rel="external">åˆ·å®Œ700å¤šé¢˜åçš„é¦–æ¬¡æ€»ç»“ï¼šLeetCodeåº”è¯¥æ€ä¹ˆåˆ·ï¼Ÿ</a></li>
<li><a href="https://www.cnblogs.com/kubidemanong/p/10996134.html" target="_blank" rel="external">å°ç™½ä¸€è·¯èµ°æ¥ï¼Œè¿ç»­åˆ·é¢˜ä¸‰å¹´ï¼Œè°ˆè°ˆæˆ‘çš„ç®—æ³•å­¦ä¹ ç»éªŒ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Summary Python]]></title>
      <url>http://shopee.ai/2020/09/03/python/language/py_summary/</url>
      <content type="html"><![CDATA[<p><img src="/images/python/language/ipython.logo.png" width="500" alt=""></p>
<a id="more"></a>
<p><a href="https://www.cnblogs.com/clement-jiao/p/9095699.html" target="_blank" rel="external">ç„¦å›½å³°çš„éšç¬”æ—¥è®° - sortä¸sortedçš„åŒºåˆ«</a><br><a href="https://blog.csdn.net/weixin_42317507/article/details/90342139" target="_blank" rel="external">pythonä¸­mapå’Œæ˜Ÿå·çš„ç®€å•è¿ç”¨</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://github.com/leisurelicht/wtfpython-cn" target="_blank" rel="external">What the f*ck Python! ğŸ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/131347854" target="_blank" rel="external">8ä¸ªè¶…å¥½ç”¨çš„Pythonå†…ç½®å‡½æ•°ï¼Œæå‡æ•ˆç‡å¿…å¤‡</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/54430650" target="_blank" rel="external">110é“Pythoné¢è¯•é¢˜ï¼ˆçœŸé¢˜ï¼‰</a></li>
<li><a href="https://blog.csdn.net/sinat_38682860/article/details/94763641" target="_blank" rel="external">åè¡€æ€»ç»“ï¼50é“Pythoné¢è¯•é¢˜é›†é”¦ï¼ˆé™„ç­”æ¡ˆï¼‰</a></li>
<li><a href="https://github.com/taizilongxu/interview_python" target="_blank" rel="external">taizilongxu/interview_python</a></li>
<li><a href="https://www.cnblogs.com/JetpropelledSnake/p/9396511.html" target="_blank" rel="external">Pythoné¢è¯•é¢˜ä¹‹Pythoné¢è¯•é¢˜æ±‡æ€»</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Summary 20 dynamic programming]]></title>
      <url>http://shopee.ai/2020/08/31/leetcode/summary_dp/</url>
      <content type="html"><![CDATA[<p><img src="/images/leetcode/DP-logo.png" width="500"></p>
<a id="more"></a>
<p>ä½¿ç”¨åŠ¨æ€è§„åˆ’è§£å†³é—®é¢˜ä¸€èˆ¬åˆ†ä¸ºä¸‰æ­¥ï¼š</p>
<ol>
<li>è¡¨ç¤ºçŠ¶æ€</li>
<li>æ‰¾å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹</li>
<li>è¾¹ç•Œå¤„ç†</li>
</ol>
<p><strong>è¡¨ç¤ºçŠ¶æ€</strong></p>
<p>åˆ†æé—®é¢˜çš„çŠ¶æ€æ—¶ï¼Œä¸è¦åˆ†ææ•´ä½“ï¼Œåªåˆ†ææœ€åä¸€ä¸ªé˜¶æ®µå³å¯ï¼å› ä¸ºåŠ¨æ€è§„åˆ’é—®é¢˜éƒ½æ˜¯åˆ’åˆ†ä¸ºå¤šä¸ªé˜¶æ®µçš„ï¼Œå„ä¸ªé˜¶æ®µçš„çŠ¶æ€è¡¨ç¤ºéƒ½æ˜¯ä¸€æ ·ï¼Œè€Œæˆ‘ä»¬çš„æœ€ç»ˆç­”æ¡ˆåœ¨å°±æ˜¯åœ¨æœ€åä¸€ä¸ªé˜¶æ®µã€‚</p>
<blockquote>
<ol>
<li>çˆ¬æ¥¼æ¢¯ climbing-stairs ï¼Œ âœ”ï¸ æ–°å»º{}or[] ,æ»šåŠ¨æ•°ç»„</li>
<li><a href="https://leetcode-cn.com/problems/unique-paths-ii/" target="_blank" rel="external">ä¸åŒè·¯å¾„ II</a> ï¼Œ âœ”ï¸</li>
<li><a href="https://leetcode-cn.com/problems/edit-distance/" target="_blank" rel="external">ç¼–è¾‘è·ç¦»</a> ï¼Œ âœ”ï¸</li>
<li>æ‰”é¸¡è›‹</li>
<li>è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ // dp: F[i] = max(a[i], F[i-1]+a[i]);</li>
<li><a href="https://leetcode-cn.com/problems/longest-palindromic-substring/" target="_blank" rel="external">Longest Palindromic Substring/æœ€é•¿å›æ–‡å­ä¸²</a></li>
<li><a href="https://leetcode-cn.com/problems/edit-distance/submissions/" target="_blank" rel="external">Edit Distance/ç¼–è¾‘è·ç¦»</a></li>
<li>Distinct Subsequences/ä¸åŒå­åºåˆ—</li>
<li><a href="(https://leetcode-cn.com/problems/interleaving-string/solution/">Interleaving String/äº¤é”™å­—ç¬¦ä¸²</a> )</li>
<li><a href="https://leetcode-cn.com/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof/" target="_blank" rel="external">æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²</a></li>
<li><a href="https://leetcode-cn.com/problems/minimum-path-sum/solution/zui-xiao-lu-jing-he-dong-tai-gui-hua-gui-fan-liu-c/" target="_blank" rel="external">Leetcode 64. Minimum Path Sum, æœ€å°è·¯å¾„å’Œ</a></li>
<li><a href="https://leetcode-cn.com/problems/distinct-subsequences/" target="_blank" rel="external">115. Distinct Subsequences I (Hard)</a></li>
<li><a href="https://leetcode-cn.com/problems/distinct-subsequences-ii/" target="_blank" rel="external">940. ä¸åŒçš„å­åºåˆ— II (Hard)</a></li>
</ol>
</blockquote>
<p><strong>ä¸åŒè·¯å¾„ IIï¼š</strong></p>
<p><img src="/images/leetcode/dp_robot_maze.png" width=""></p>
<blockquote>
<p>å¦‚æœå½“å‰æ²¡æœ‰éšœç¢ç‰©ï¼Œdp[m][n] = dp[m - 1][n] + dp[m][n - 1]<br>å¦‚æœæœ‰éšœç¢ç‰©ï¼Œåˆ™dp[m][n] = 0</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">è¾“å…¥:</span><br><span class="line">[</span><br><span class="line">  [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>],</span><br><span class="line">  [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">]</span><br><span class="line">è¾“å‡º: <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">uniquePathsWithObstacles</span><span class="params">(self, obstacleGrid: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">        <span class="comment">#æ–°å»ºçŸ©é˜µç‰ˆ</span></span><br><span class="line">        height, width = len(obstacleGrid),len(obstacleGrid[<span class="number">0</span>])</span><br><span class="line">        store = [[<span class="number">0</span>]*width <span class="keyword">for</span> i <span class="keyword">in</span> range(height)]</span><br><span class="line"></span><br><span class="line">        <span class="comment">#ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³</span></span><br><span class="line">        <span class="keyword">for</span> m <span class="keyword">in</span> range(height):<span class="comment">#æ¯ä¸€è¡Œ</span></span><br><span class="line">            <span class="keyword">for</span> n <span class="keyword">in</span> range(width):<span class="comment">#æ¯ä¸€åˆ—</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> obstacleGrid[m][n]: <span class="comment">#å¦‚æœè¿™ä¸€æ ¼æ²¡æœ‰éšœç¢ç‰©</span></span><br><span class="line">                    <span class="keyword">if</span> m == n == <span class="number">0</span>: <span class="comment">#æˆ–if not(m or n)</span></span><br><span class="line">                        store[m][n] = <span class="number">1</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        a = store[m<span class="number">-1</span>][n] <span class="keyword">if</span> m!=<span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span> <span class="comment">#ä¸Šæ–¹æ ¼å­</span></span><br><span class="line">                        b = store[m][n<span class="number">-1</span>] <span class="keyword">if</span> n!=<span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span> <span class="comment">#å·¦æ–¹æ ¼å­</span></span><br><span class="line">                        store[m][n] = a+b</span><br><span class="line">        <span class="keyword">return</span> store[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<p><strong>ç¼–è¾‘è·ç¦»ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç»™ä½ ä¸¤ä¸ªå•è¯Â word1 å’ŒÂ word2ï¼Œè¯·ä½ è®¡ç®—å‡ºå°†Â word1Â è½¬æ¢æˆÂ word2 æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•°Â ã€‚</span><br><span class="line"></span><br><span class="line">ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š</span><br><span class="line"></span><br><span class="line">æ’å…¥ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">åˆ é™¤ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">æ›¿æ¢ä¸€ä¸ªå­—ç¬¦</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šword1 = &quot;horse&quot;, word2 = &quot;ros&quot;</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">horse -&gt; rorse (å°† &apos;h&apos; æ›¿æ¢ä¸º &apos;r&apos;)</span><br><span class="line">rorse -&gt; rose (åˆ é™¤ &apos;r&apos;)</span><br><span class="line">rose -&gt; ros (åˆ é™¤ &apos;e&apos;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœå•è¯1ç¬¬i+1ä¸ªå­—ç¬¦å’Œå•è¯2ç¬¬j+1ä¸ªå­—ç¬¦ç›¸åŒï¼Œé‚£ä¹ˆå°±ä¸ç”¨æ“ä½œï¼Œåˆ™DP[i + 1][j + 1] = DP[i][j];</p>
<p>å¦‚æœä¸ç›¸åŒ,åˆ™æœ‰ä¸‰ç§å¯èƒ½æ“ä½œï¼Œå³å¢ï¼Œåˆ ï¼Œæ›¿æ¢ã€‚åˆ™å–è¿™ä¸‰ç§æ“ä½œçš„æœ€ä¼˜å€¼ï¼Œå³dp[i + 1][j + 1] = 1 + Math.min(dp[i][j], Math.min(dp[i][j + 1], dp[i + 1][j]));</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minDistance</span><span class="params">(self, word1, word2)</span>:</span></span><br><span class="line">        <span class="string">"""</span><br><span class="line">        :type word1: str</span><br><span class="line">        :type word2: str</span><br><span class="line">        :rtype: int</span><br><span class="line">        """</span></span><br><span class="line">        n = len(word1)</span><br><span class="line">        m = len(word2)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºç©ºä¸²</span></span><br><span class="line">        <span class="keyword">if</span> n * m == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> n + m</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># dp æ•°ç»„</span></span><br><span class="line">        dp = [ [<span class="number">0</span>] * (m + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(n + <span class="number">1</span>)]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è¾¹ç•ŒçŠ¶æ€åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n + <span class="number">1</span>):</span><br><span class="line">            dp[i][<span class="number">0</span>] = i</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(m + <span class="number">1</span>):</span><br><span class="line">            dp[<span class="number">0</span>][j] = j</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è®¡ç®—æ‰€æœ‰ DP å€¼</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, m + <span class="number">1</span>):</span><br><span class="line">                left = dp[i - <span class="number">1</span>][j] + <span class="number">1</span></span><br><span class="line">                right = dp[i][j - <span class="number">1</span>] + <span class="number">1</span></span><br><span class="line">                left_right = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] </span><br><span class="line">                <span class="keyword">if</span> word1[i - <span class="number">1</span>] != word2[j - <span class="number">1</span>]:</span><br><span class="line">                    left_right += <span class="number">1</span></span><br><span class="line">                dp[i][j] = min(left, right, left_right)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> dp[n][m]</span><br></pre></td></tr></table></figure>
<h2 id="äºŒç»´DP"><a href="#äºŒç»´DP" class="headerlink" title="äºŒç»´DP"></a>äºŒç»´DP</h2><p><strong>å¸ƒå°”æ•°ç»„</strong></p>
<p>(1). <a href="https://leetcode-cn.com/problems/longest-palindromic-substring/" target="_blank" rel="external">Longest Palindromic Substring/æœ€é•¿å›æ–‡å­ä¸²</a> ï¼Œ $P(i,j)=P(i+1,jâˆ’1)âˆ§(Si == Sj)$</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestPalindrome</span><span class="params">(self, s: str)</span> -&gt; str:</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        dp = [[<span class="keyword">False</span>] * n <span class="keyword">for</span> _ <span class="keyword">in</span> range(n)]</span><br><span class="line">        ans = <span class="string">""</span></span><br><span class="line">        <span class="comment"># æšä¸¾å­ä¸²çš„é•¿åº¦ l+1</span></span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> range(n):</span><br><span class="line">            sub_len = l+<span class="number">1</span></span><br><span class="line">            <span class="comment"># æšä¸¾å­ä¸²çš„èµ·å§‹ä½ç½® iï¼Œè¿™æ ·å¯ä»¥é€šè¿‡ j=i+l å¾—åˆ°å­ä¸²çš„ç»“æŸä½ç½®</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">                j = i + l</span><br><span class="line">                <span class="keyword">if</span> j &gt;= len(s):</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">if</span> sub_len == <span class="number">1</span>:</span><br><span class="line">                    dp[i][j] = <span class="keyword">True</span></span><br><span class="line">                <span class="keyword">elif</span> sub_len == <span class="number">2</span>:</span><br><span class="line">                    dp[i][j] = (s[i] == s[j])</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    dp[i][j] = (dp[i + <span class="number">1</span>][j - <span class="number">1</span>] <span class="keyword">and</span> s[i] == s[j])</span><br><span class="line">                <span class="keyword">if</span> dp[i][j] <span class="keyword">and</span> sub_len &gt; len(ans):</span><br><span class="line">                    ans = s[i:j+<span class="number">1</span>] <span class="comment"># "abcd"[1:2] = b</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<p>(2). <a href="https://leetcode-cn.com/problems/interleaving-string/solution/" target="_blank" rel="external">Interleaving String/äº¤é”™å­—ç¬¦ä¸²</a> </p>
<p>ç»™å®šä¸‰ä¸ªå­—ç¬¦ä¸² s1, s2, s3, éªŒè¯ s3 æ˜¯å¦æ˜¯ç”± s1 å’Œ s2 äº¤é”™ç»„æˆçš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šs1 = &quot;aabcc&quot;, s2 = &quot;dbbca&quot;, s3 = &quot;aadbbcbcac&quot;</span><br><span class="line">è¾“å‡ºï¼štrue</span><br><span class="line">ç¤ºä¾‹Â 2ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šs1 = &quot;aabcc&quot;, s2 = &quot;dbbca&quot;, s3 = &quot;aadbbbaccc&quot;</span><br><span class="line">è¾“å‡ºï¼šfalse</span><br></pre></td></tr></table></figure>
<p>è§£å†³è¿™ä¸ªé—®é¢˜çš„æ­£ç¡®æ–¹æ³•æ˜¯åŠ¨æ€è§„åˆ’ã€‚ é¦–å…ˆå¦‚æœ $|s_1| + |s_2| \neq |s_3|$, é‚£ $s_3$ å¿…ç„¶ä¸å¯èƒ½ç”± $s_1$ å’Œ $s_2$ äº¤é”™ç»„æˆã€‚åœ¨ $|s_1| + |s_2| = |s_3|$æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åŠ¨æ€è§„åˆ’æ¥æ±‚è§£ã€‚æˆ‘ä»¬å®šä¹‰ $f(i,j)$ è¡¨ç¤º $s_1$ çš„å‰ $i$ ä¸ªå…ƒç´ å’Œ $s_2$ çš„å‰ $j$ ä¸ªå…ƒç´ æ˜¯å¦èƒ½äº¤é”™ç»„æˆ $s_3$ çš„å‰ $i + j$ ä¸ªå…ƒç´ ã€‚å¦‚æœ $s_1$ çš„ç¬¬ $i$ ä¸ªå…ƒç´ å’Œ $s_3$ çš„ç¬¬ $i+j$ ä¸ªå…ƒç´ ç›¸ç­‰ï¼Œé‚£ä¹ˆ $s_1$ çš„å‰ $i$ ä¸ªå…ƒç´ å’Œ $s_2$ çš„å‰ $j$ ä¸ªå…ƒç´ æ˜¯å¦èƒ½äº¤é”™ç»„æˆ $s_3$ çš„å‰ $i+j$ ä¸ªå…ƒç´ å–å†³äº $s_1$ çš„å‰ $iâˆ’1$ ä¸ªå…ƒç´ å’Œ $s_2$ çš„å‰ $j$ ä¸ªå…ƒç´ æ˜¯å¦èƒ½äº¤é”™ç»„æˆ $s_3$ çš„å‰ $i + j - 1$ ä¸ªå…ƒç´ ï¼Œå³æ­¤æ—¶ $f(i, j)$ å–å†³äº $f(i - 1, j)$ï¼Œåœ¨æ­¤æƒ…å†µä¸‹å¦‚æœ $f(i - 1, j)$ ä¸ºçœŸï¼Œåˆ™ $f(i, j)$ ä¹Ÿä¸ºçœŸã€‚åŒæ ·çš„ï¼Œå¦‚æœ $s_2$ çš„ç¬¬ $j$ ä¸ªå…ƒç´ å’Œ $s_3$ çš„ç¬¬ $i + j$ ä¸ªå…ƒç´ ç›¸ç­‰å¹¶ä¸” $f(i, j - 1)$ ä¸ºçœŸï¼Œåˆ™ $f(i, j)$ ä¹Ÿä¸ºçœŸã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡ºè¿™æ ·çš„åŠ¨æ€è§„åˆ’è½¬ç§»æ–¹ç¨‹ï¼š</p>
<p>$$<br>f(i, j) = [f(i - 1, j) \, {\rm and} \, s_1(i - 1) = s_3(p)] \, {\rm or} \, [f(i, j - 1) \, {\rm and} \, s_2(j - 1) = s_3(p)]<br>$$</p>
<p>å…¶ä¸­ $p = i + j - 1$ã€‚è¾¹ç•Œæ¡ä»¶ä¸º $f(0, 0) = {\rm True}$ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å¯ä»¥ç»™å‡ºè¿™æ ·ä¸€ä¸ªå®ç°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isInterleave</span><span class="params">(self, s1: str, s2: str, s3: str)</span> -&gt; bool:</span></span><br><span class="line">        len1=len(s1)</span><br><span class="line">        len2=len(s2)</span><br><span class="line">        len3=len(s3)</span><br><span class="line">        <span class="keyword">if</span>(len1+len2!=len3):</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">        dp=[[<span class="keyword">False</span>]*(len2+<span class="number">1</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(len1+<span class="number">1</span>)]</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>]=<span class="keyword">True</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len1+<span class="number">1</span>):</span><br><span class="line">            dp[i][<span class="number">0</span>]=(dp[i<span class="number">-1</span>][<span class="number">0</span>] <span class="keyword">and</span> s1[i<span class="number">-1</span>]==s3[i<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len2+<span class="number">1</span>):</span><br><span class="line">            dp[<span class="number">0</span>][i]=(dp[<span class="number">0</span>][i<span class="number">-1</span>] <span class="keyword">and</span> s2[i<span class="number">-1</span>]==s3[i<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len1+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,len2+<span class="number">1</span>):</span><br><span class="line">                dp[i][j]=(dp[i][j<span class="number">-1</span>] <span class="keyword">and</span> s2[j<span class="number">-1</span>]==s3[i+j<span class="number">-1</span>]) <span class="keyword">or</span> (dp[i<span class="number">-1</span>][j] <span class="keyword">and</span> s1[i<span class="number">-1</span>]==s3[i+j<span class="number">-1</span>])</span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>][<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<p>(3). <a href="https://leetcode-cn.com/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof/" target="_blank" rel="external">å‰‘æŒ‡ Offer 46. æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²</a></p>
<p>ç»™å®šä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬æŒ‰ç…§å¦‚ä¸‹è§„åˆ™æŠŠå®ƒç¿»è¯‘ä¸ºå­—ç¬¦ä¸²ï¼š0 ç¿»è¯‘æˆ â€œaâ€ ï¼Œ1 ç¿»è¯‘æˆ â€œbâ€ï¼Œâ€¦â€¦ï¼Œ11 ç¿»è¯‘æˆ â€œlâ€ï¼Œâ€¦â€¦ï¼Œ25 ç¿»è¯‘æˆ â€œzâ€ã€‚ä¸€ä¸ªæ•°å­—å¯èƒ½æœ‰å¤šä¸ªç¿»è¯‘ã€‚è¯·ç¼–ç¨‹å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥è®¡ç®—ä¸€ä¸ªæ•°å­—æœ‰å¤šå°‘ç§ä¸åŒçš„ç¿»è¯‘æ–¹æ³•ã€‚</p>
<p>ç¤ºä¾‹ 1:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: 12258</span><br><span class="line">è¾“å‡º: 5</span><br><span class="line">è§£é‡Š: 12258æœ‰5ç§ä¸åŒçš„ç¿»è¯‘ï¼Œåˆ†åˆ«æ˜¯&quot;bccfi&quot;, &quot;bwfi&quot;, &quot;bczi&quot;, &quot;mcfi&quot;å’Œ&quot;mzi&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åˆ†ææ‘˜è¦ï¼š è¦çš„æ˜¯ç§ç±»æ€»æ•°ï¼Œå¹¶ä¸æ˜¯è¦çš„æ˜¯è¯¦ç»†åˆ—è¡¨ï¼Œè¿™ç±»é—®é¢˜ï¼Œå¸¸è§æ–¹æ¡ˆæ˜¯ï¼š åŠ¨æ€è§„åˆ’</p>
<p>åˆ†ç±»è®¡æ•°ï¼š</p>
<p>dp[i] è¡¨ç¤º nums[0â€¦i]</p>
<p>dp[i] = dp[i-1] + dp[i-2]</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">translateNum</span><span class="params">(self, num: int)</span> -&gt; int:</span></span><br><span class="line">        s = str(num)</span><br><span class="line">        a = b = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, len(s) + <span class="number">1</span>):</span><br><span class="line">            tmp = s[i - <span class="number">2</span>:i]</span><br><span class="line">            c = a + b <span class="keyword">if</span> <span class="string">"10"</span> &lt;= tmp &lt;= <span class="string">"25"</span> <span class="keyword">else</span> a</span><br><span class="line">            b = a</span><br><span class="line">            a = c</span><br><span class="line">        <span class="keyword">return</span> a</span><br></pre></td></tr></table></figure>
<p><strong>æ•°å­—æ•°ç»„</strong></p>
<ol>
<li><a href="https://leetcode-cn.com/problems/minimum-path-sum/" target="_blank" rel="external">Leetcode 64. Minimum Path Sum, æœ€å°è·¯å¾„å’Œ</a> çŸ©é˜µå·¦ä¸Šè§’å‡ºå‘åˆ°å³ä¸‹è§’ï¼Œåªèƒ½å‘å³æˆ–å‘ä¸‹èµ°ï¼Œæ‰¾å‡ºå“ªä¸€æ¡è·¯å¾„ä¸Šçš„æ•°å­—ä¹‹å’Œæœ€å°ã€‚</li>
</ol>
<p>ç»™å®šä¸€ä¸ªåŒ…å«éè´Ÿæ•´æ•°çš„ m x n ç½‘æ ¼ï¼Œè¯·æ‰¾å‡ºä¸€æ¡ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ•°å­—æ€»å’Œä¸ºæœ€å°ã€‚</p>
<p>è¯´æ˜ï¼šæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚</p>
<p>ç¤ºä¾‹:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥:</span><br><span class="line">[</span><br><span class="line">Â  [1,3,1],</span><br><span class="line">  [1,5,1],</span><br><span class="line">  [4,2,1]</span><br><span class="line">]</span><br><span class="line">è¾“å‡º: 7</span><br><span class="line">è§£é‡Š: å› ä¸ºè·¯å¾„ 1â†’3â†’1â†’1â†’1 çš„æ€»å’Œæœ€å°ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="12-ä¸åŒçš„å­åºåˆ—"><a href="#12-ä¸åŒçš„å­åºåˆ—" class="headerlink" title="12. ä¸åŒçš„å­åºåˆ—"></a>12. ä¸åŒçš„å­åºåˆ—</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹Â 1ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šS = &quot;rabbbit&quot;, T = &quot;rabbit&quot;</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line"></span><br><span class="line">å¦‚ä¸‹å›¾æ‰€ç¤º, æœ‰ 3 ç§å¯ä»¥ä» S ä¸­å¾—åˆ° &quot;rabbit&quot; çš„æ–¹æ¡ˆã€‚</span><br><span class="line">(ä¸Šç®­å¤´ç¬¦å· ^ è¡¨ç¤ºé€‰å–çš„å­—æ¯)</span><br><span class="line"></span><br><span class="line">rabbbit</span><br><span class="line">^^^^ ^^</span><br><span class="line">rabbbit</span><br><span class="line">^^ ^^^^</span><br><span class="line">rabbbit</span><br><span class="line">^^^ ^^^</span><br></pre></td></tr></table></figure>
<p>dp[i][j] ä»£è¡¨ T å‰ i å­—ç¬¦ä¸²å¯ä»¥ç”± S j å­—ç¬¦ä¸²ç»„æˆæœ€å¤šä¸ªæ•°.</p>
<p><img src="/images/leetcode/dp-summary-12.png" width="600"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[1, 1, 1, 1, 1, 1, 1, 1]</span><br><span class="line">[0, 1, 1, 2, 2, 3, 3, 3]</span><br><span class="line">[0, 0, 1, 1, 1, 1, 4, 4]</span><br><span class="line">[0, 0, 0, 0, 1, 1, 1, 5]</span><br><span class="line">5</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥åŠ¨æ€æ–¹ç¨‹:</p>
<blockquote>
<p>å½“ S[j] == T[i] , dp[i][j] = dp[i-1][j-1] + dp[i][j-1];</p>
<p>å½“ S[j] != T[i] , dp[i][j] = dp[i][j-1]</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­,å¦‚ç¤ºä¾‹çš„</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/35707293" target="_blank" rel="external">çŸ¥ä¹ï¼š [Leetcode][åŠ¨æ€è§„åˆ’]ç›¸å…³é¢˜ç›®æ±‡æ€»/åˆ†æ/æ€»ç»“</a></li>
<li><a href="https://www.jianshu.com/p/af880bbba792" target="_blank" rel="external">ç®€ä¹¦ï¼š 2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“åŠ¨æ€è§„åˆ’(Dynamic Programming)</a></li>
<li><a href="https://blog.csdn.net/EbowTang/article/details/50791500" target="_blank" rel="external">CSDN leetcode DP</a></li>
<li><a href="https://blog.csdn.net/fuxuemingzhu/article/details/105183554" target="_blank" rel="external">åˆ·å®Œ700å¤šé¢˜åçš„é¦–æ¬¡æ€»ç»“ï¼šLeetCodeåº”è¯¥æ€ä¹ˆåˆ·ï¼Ÿ</a></li>
<li><a href="https://www.cnblogs.com/kubidemanong/p/10996134.html" target="_blank" rel="external">å°ç™½ä¸€è·¯èµ°æ¥ï¼Œè¿ç»­åˆ·é¢˜ä¸‰å¹´ï¼Œè°ˆè°ˆæˆ‘çš„ç®—æ³•å­¦ä¹ ç»éªŒ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Summary]]></title>
      <url>http://shopee.ai/2020/08/31/spark/spark-summary/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-summary-logo.jpg" width="500" alt=""></p>
<a id="more"></a>
<p><a href="https://www.cnblogs.com/frankdeng/p/9311438.html" target="_blank" rel="external">Hadoopï¼ˆå…­ï¼‰MapReduceçš„å…¥é—¨ä¸è¿è¡ŒåŸç†</a></p>
<h2 id="1-Spark-åŸºç¡€-3"><a href="#1-Spark-åŸºç¡€-3" class="headerlink" title="1. Spark åŸºç¡€ (3)"></a>1. Spark åŸºç¡€ (3)</h2><ol>
<li>sparkçš„æœ‰å‡ ç§éƒ¨ç½²æ¨¡å¼ï¼Œæ¯ç§æ¨¡å¼ç‰¹ç‚¹ï¼Ÿ <blockquote>
<p>1). local  2). standalone 3). Spark on yarn <a href="Spark:Yarn-clusterå’ŒYarn-clientåŒºåˆ«ä¸è”ç³»" target="_blank" rel="external">(yarn-clusterå’Œyarn-client)</a></p>
</blockquote>
</li>
<li>SparkæŠ€æœ¯æ ˆæœ‰å“ªäº›ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼Œé€‚åˆä»€ä¹ˆåº”ç”¨åœºæ™¯ï¼Ÿ</li>
<li>sparkæœ‰å“ªäº›ç»„ä»¶</li>
</ol>
<blockquote>
<ul>
<li>masterï¼šç®¡ç†é›†ç¾¤å’ŒèŠ‚ç‚¹ï¼Œä¸å‚ä¸è®¡ç®—ã€‚</li>
<li>workerï¼šè®¡ç®—èŠ‚ç‚¹ï¼Œè¿›ç¨‹æœ¬èº«ä¸å‚ä¸è®¡ç®—ï¼Œå’Œmasteræ±‡æŠ¥ã€‚</li>
<li>Driverï¼šè¿è¡Œç¨‹åºçš„mainæ–¹æ³•ï¼Œåˆ›å»ºspark contextå¯¹è±¡ã€‚</li>
<li>sparkContextï¼šæ§åˆ¶æ•´ä¸ªapplicationçš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬dagshedulerå’Œtask schedulerç­‰ç»„ä»¶ã€‚</li>
<li>clientï¼šç”¨æˆ·æäº¤ç¨‹åºçš„å…¥å£ã€‚</li>
</ul>
</blockquote>
<p><img src="/images/spark/spark-aura-4.1.2.jpg" width="700" alt=""></p>
<h2 id="2-Sparkè¿è¡Œç»†èŠ‚-13"><a href="#2-Sparkè¿è¡Œç»†èŠ‚-13" class="headerlink" title="2. Sparkè¿è¡Œç»†èŠ‚ (13)"></a>2. Sparkè¿è¡Œç»†èŠ‚ (13)</h2><ol>
<li>sparkå·¥ä½œæœºåˆ¶</li>
<li>Sparkåº”ç”¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹</li>
<li>driverçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>Sparkä¸­Workçš„ä¸»è¦å·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>taskæœ‰å‡ ç§ç±»å‹ï¼Ÿ2ç§</li>
<li>ä»€ä¹ˆæ˜¯shuffleï¼Œä»¥åŠä¸ºä»€ä¹ˆéœ€è¦shuffleï¼Ÿ</li>
<li>Spark master HA ä¸»ä»åˆ‡æ¢è¿‡ç¨‹ä¸ä¼šå½±å“é›†ç¾¤å·²æœ‰çš„ä½œä¸šè¿è¡Œï¼Œä¸ºä»€ä¹ˆï¼Ÿ</li>
<li>Sparkå¹¶è¡Œåº¦æ€ä¹ˆè®¾ç½®æ¯”è¾ƒåˆé€‚</li>
<li>Spaekç¨‹åºæ‰§è¡Œï¼Œæœ‰æ—¶å€™é»˜è®¤ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿå¾ˆå¤štaskï¼Œæ€ä¹ˆä¿®æ”¹é»˜è®¤taskæ‰§è¡Œä¸ªæ•°ï¼Ÿ</li>
<li>Sparkä¸­æ•°æ®çš„ä½ç½®æ˜¯è¢«è°ç®¡ç†çš„ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆè¦è¿›è¡Œåºåˆ—åŒ–</li>
<li>Sparkå¦‚ä½•å¤„ç†ä¸èƒ½è¢«åºåˆ—åŒ–çš„å¯¹è±¡ï¼Ÿ</li>
</ol>
<h2 id="3-RDD-4"><a href="#3-RDD-4" class="headerlink" title="3. RDD(4)"></a>3. RDD(4)</h2><ol>
<li>RDDæœºåˆ¶</li>
<li>RDDçš„å¼¹æ€§è¡¨ç°åœ¨å“ªå‡ ç‚¹ï¼Ÿ</li>
<li>RDDæœ‰å“ªäº›ç¼ºé™·ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯RDDå®½ä¾èµ–å’Œçª„ä¾èµ–ï¼Ÿ</li>
</ol>
<h3 id="2-1-sparkå·¥ä½œæœºåˆ¶"><a href="#2-1-sparkå·¥ä½œæœºåˆ¶" class="headerlink" title="2.1 sparkå·¥ä½œæœºåˆ¶"></a>2.1 sparkå·¥ä½œæœºåˆ¶</h3><blockquote>
<ul>
<li>ç”¨æˆ·åœ¨clientç«¯æäº¤ä½œä¸šåï¼Œä¼šç”±Driverè¿è¡Œmainæ–¹æ³•å¹¶åˆ›å»º sparkContext</li>
<li>æ‰§è¡Œaddç®—å­ï¼Œå½¢æˆdagå›¾è¾“å…¥<strong>dagscheduler</strong> ï¼Œ (åˆ›å»ºjob,åˆ’åˆ†Stage,æäº¤Stage)</li>
<li>æŒ‰ç…§addä¹‹é—´çš„ä¾èµ–å…³ç³»åˆ’åˆ†stageè¾“å…¥task scheduler</li>
<li>task schedulerä¼šå°†stageåˆ’åˆ†ä¸ºtasksetåˆ†å‘åˆ°å„ä¸ªèŠ‚ç‚¹çš„executorä¸­æ‰§è¡Œ</li>
</ul>
</blockquote>
<h3 id="2-2-Sparkåº”ç”¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹"><a href="#2-2-Sparkåº”ç”¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="2.2 Sparkåº”ç”¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹"></a>2.2 Sparkåº”ç”¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹</h3><blockquote>
<ul>
<li>æ„å»ºSpark Applicationçš„è¿è¡Œç¯å¢ƒï¼ˆå¯åŠ¨SparkContextï¼‰</li>
<li>SparkContextå‘èµ„æºç®¡ç†å™¨ï¼ˆå¯ä»¥æ˜¯Standaloneã€Mesosæˆ–YARNï¼‰æ³¨å†Œå¹¶ç”³è¯·è¿è¡ŒExecutorèµ„æºï¼›</li>
<li>èµ„æºç®¡ç†å™¨åˆ†é…Executorèµ„æºï¼ŒExecutorè¿è¡Œæƒ…å†µå°†éšç€å¿ƒè·³å‘é€åˆ°èµ„æºç®¡ç†å™¨ä¸Šï¼›</li>
<li>SparkContextæ„å»ºæˆDAGå›¾ï¼Œå°†DAGå›¾åˆ†è§£æˆStageï¼Œå¹¶æŠŠTasksetå‘é€ç»™Task Scheduler</li>
<li>Executorå‘SparkContextç”³è¯·Taskï¼ŒTask Schedulerå°†Taskå‘æ”¾ç»™Executorè¿è¡Œï¼ŒSparkContextå°†åº”ç”¨ç¨‹åºä»£ç å‘æ”¾ç»™Executorã€‚</li>
<li>Taskåœ¨Executorä¸Šè¿è¡Œï¼Œè¿è¡Œå®Œæ¯•é‡Šæ”¾æ‰€æœ‰èµ„æº</li>
</ul>
</blockquote>
<h3 id="2-3-driverçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-3-driverçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.3 driverçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2.3 driverçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Sparkä½œä¸šè¿è¡Œæ—¶åŒ…æ‹¬ä¸€ä¸ªDriverè¿›ç¨‹ï¼Œä¹Ÿæ˜¯ä½œä¸šä¸»è¿›ç¨‹ï¼Œæœ‰mainå‡½æ•°ï¼Œä¸”æœ‰SparkContextçš„å®ä¾‹ï¼Œæ˜¯ç¨‹åºå…¥å£ç‚¹ï¼›</p>
<p><strong>åŠŸèƒ½ï¼š</strong></p>
<blockquote>
<ol>
<li>å‘é›†ç¾¤ç”³è¯·èµ„æº</li>
<li>è´Ÿè´£äº†ä½œä¸šçš„è°ƒåº¦å’Œè§£æ</li>
<li>ç”ŸæˆStageå¹¶è°ƒåº¦Taskåˆ°Executorä¸Šï¼ˆåŒ…æ‹¬DAGSchedulerï¼ŒTaskSchedulerï¼‰</li>
</ol>
</blockquote>
<h3 id="2-4-Sparkä¸­Workerå·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-4-Sparkä¸­Workerå·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.4 Sparkä¸­Workerå·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ"></a>2.4 Sparkä¸­Workerå·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ</h3><blockquote>
<ol>
<li>ç®¡ç†å½“å‰èŠ‚ç‚¹å†…å­˜ï¼ŒCPUä½¿ç”¨çŠ¶å†µ,æ¥æ”¶masteråˆ†é…è¿‡æ¥çš„èµ„æºæŒ‡ä»¤,é€šè¿‡ExecutorRunnerå¯åŠ¨ç¨‹åºåˆ†é…ä»»åŠ¡</li>
<li>workerå°±ç±»ä¼¼äºåŒ…å·¥å¤´ï¼Œç®¡ç†åˆ†é…æ–°è¿›ç¨‹ï¼Œåšè®¡ç®—çš„æœåŠ¡ï¼Œç›¸å½“äºprocessæœåŠ¡</li>
<li>workerä¸ä¼šè¿è¡Œä»£ç ï¼Œå…·ä½“è¿è¡Œçš„æ˜¯Executoræ˜¯å¯ä»¥è¿è¡Œå…·ä½“appliactionå†™çš„ä¸šåŠ¡é€»è¾‘ä»£ç </li>
</ol>
<p><strong>Process</strong> è¿›ç¨‹</p>
</blockquote>
<h3 id="2-5-taskæœ‰å‡ ç§ç±»å‹ï¼Ÿ2ç§"><a href="#2-5-taskæœ‰å‡ ç§ç±»å‹ï¼Ÿ2ç§" class="headerlink" title="2.5 taskæœ‰å‡ ç§ç±»å‹ï¼Ÿ2ç§"></a>2.5 taskæœ‰å‡ ç§ç±»å‹ï¼Ÿ2ç§</h3><ul>
<li>resultTaskç±»å‹ï¼Œæœ€åä¸€ä¸ªtask</li>
<li>shuffleMapTaskç±»å‹ï¼Œé™¤äº†æœ€åä¸€ä¸ªtaskéƒ½æ˜¯</li>
</ul>
<h2 id="3-Spark-ä¸-Hadoop-æ¯”è¾ƒ-7"><a href="#3-Spark-ä¸-Hadoop-æ¯”è¾ƒ-7" class="headerlink" title="3. Spark ä¸ Hadoop æ¯”è¾ƒ(7)"></a>3. Spark ä¸ Hadoop æ¯”è¾ƒ(7)</h2><ol>
<li>Mapreduceå’ŒSparkçš„ç›¸åŒå’ŒåŒºåˆ«</li>
<li>ç®€ç­”è¯´ä¸€ä¸‹hadoopçš„mapreduceç¼–ç¨‹æ¨¡å‹</li>
<li>ç®€å•è¯´ä¸€ä¸‹hadoopå’Œsparkçš„shuffleç›¸åŒå’Œå·®å¼‚ï¼Ÿ</li>
<li>ç®€å•è¯´ä¸€ä¸‹hadoopå’Œsparkçš„shuffleè¿‡ç¨‹</li>
<li>partitionå’Œblockçš„å…³è”</li>
<li>Sparkä¸ºä»€ä¹ˆæ¯”mapreduceå¿«ï¼Ÿ</li>
<li>Mapreduceæ“ä½œçš„mapperå’Œreduceré˜¶æ®µç›¸å½“äºsparkä¸­çš„å“ªå‡ ä¸ªç®—å­ï¼Ÿ</li>
</ol>
<blockquote>
<p>ç›¸å½“äºsparkä¸­çš„mapç®—å­å’ŒreduceByKeyç®—å­ï¼ŒåŒºåˆ«ï¼šMRä¼šè‡ªåŠ¨è¿›è¡Œæ’åºçš„ï¼Œsparkè¦çœ‹å…·ä½“partitioner</p>
</blockquote>
<h3 id="3-1-MRå’ŒSparkç›¸åŒå’ŒåŒºåˆ«"><a href="#3-1-MRå’ŒSparkç›¸åŒå’ŒåŒºåˆ«" class="headerlink" title="3.1 MRå’ŒSparkç›¸åŒå’ŒåŒºåˆ«"></a>3.1 MRå’ŒSparkç›¸åŒå’ŒåŒºåˆ«</h3><blockquote>
<p>sparkç”¨æˆ·æäº¤çš„ä»»åŠ¡ï¼šapplication</p>
<p>ä¸€ä¸ªapplicationå¯¹åº”ä¸€ä¸ªSparkContextï¼Œappä¸­å­˜åœ¨å¤šä¸ªjob</p>
<p>1). æ¯è§¦å‘ä¸€æ¬¡actionä¼šäº§ç”Ÿä¸€ä¸ª<strong><code>job</code></strong> -&gt; è¿™äº›jobå¯ä»¥å¹¶è¡Œæˆ–ä¸²è¡Œæ‰§è¡Œ</p>
<p>2). æ¯ä¸ªjobæœ‰å¤šä¸ª<strong><code>stage</code></strong>ï¼Œstageæ˜¯shuffleè¿‡ç¨‹ä¸­DAGSchaduleré€šè¿‡RDDä¹‹é—´çš„ä¾èµ–å…³ç³»åˆ’åˆ†jobè€Œæ¥çš„</p>
<p>3). æ¯ä¸ªstageé‡Œé¢æœ‰å¤šä¸ª<strong><code>task</code></strong>ï¼Œç»„æˆ taskset æœ‰ <code>TaskSchaduler</code> åˆ†å‘åˆ°å„ä¸ªexecutoræ‰§è¡Œ</p>
<p>4). <strong><code>executor</code></strong> ç”Ÿå‘½å‘¨æœŸå’Œappä¸€æ ·çš„ï¼Œå³ä½¿æ²¡æœ‰jobè¿è¡Œä¹Ÿå­˜åœ¨ï¼Œæ‰€ä»¥taskå¯ä»¥å¿«é€Ÿå¯åŠ¨è¯»å–å†…å­˜è¿›è¡Œè®¡ç®—.</p>
</blockquote>
<h3 id="3-2-mapreduce-ç¼–ç¨‹æ¨¡å‹"><a href="#3-2-mapreduce-ç¼–ç¨‹æ¨¡å‹" class="headerlink" title="3.2 mapreduce ç¼–ç¨‹æ¨¡å‹"></a>3.2 mapreduce ç¼–ç¨‹æ¨¡å‹</h3><blockquote>
<ol>
<li>map taskä¼šä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿè¯»å–æ•°æ®ï¼Œè½¬æ¢æˆkey-valueå½¢å¼çš„é”®å€¼å¯¹é›†åˆ</li>
<li>key-value,é›†åˆ,input to mapperè¿›è¡Œä¸šåŠ¡å¤„ç†è¿‡ç¨‹ï¼Œå°†å…¶è½¬æ¢æˆéœ€è¦çš„key-&gt; valueåœ¨è¾“å‡º</li>
<li>ä¹‹åä¼šè¿›è¡Œä¸€ä¸ªpartitionåˆ†åŒºæ“ä½œï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯hashpartitioner</li>
<li>ä¹‹åä¼šå¯¹keyè¿›è¡Œè¿›è¡Œsortæ’åºï¼Œgroupingåˆ†ç»„æ“ä½œå°†ç›¸åŒkeyçš„valueåˆå¹¶åˆ†ç»„è¾“å‡º</li>
<li>ä¹‹åè¿›è¡Œä¸€ä¸ªcombinerå½’çº¦æ“ä½œï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæœ¬åœ°çš„reduceé¢„å¤„ç†ï¼Œä»¥å‡å°åé¢shufleå’Œreducerçš„å·¥ä½œé‡</li>
<li>reduce taskä¼šé€šè¿‡ç½‘ç»œå°†å„ä¸ªæ•°æ®æ”¶é›†è¿›è¡Œreduceå¤„ç†</li>
<li>æœ€åå°†æ•°æ®ä¿å­˜æˆ–è€…æ˜¾ç¤ºï¼Œç»“æŸæ•´ä¸ªjob</li>
</ol>
</blockquote>
<h3 id="3-3-mr-spark-çš„-shuffle-å·®å¼‚"><a href="#3-3-mr-spark-çš„-shuffle-å·®å¼‚" class="headerlink" title="3.3 mr/spark çš„ shuffle å·®å¼‚?"></a>3.3 mr/spark çš„ shuffle å·®å¼‚?</h3><p><strong>high-level è§’åº¦ï¼š</strong></p>
<blockquote>
<ol>
<li>ä¸¤è€…å¹¶æ²¡æœ‰å¤§çš„å·®åˆ« éƒ½æ˜¯å°† mapperï¼ˆSpark: ShuffleMapTaskï¼‰çš„è¾“å‡ºè¿›è¡Œ partitionï¼Œ</li>
<li>ä¸åŒçš„ partition é€åˆ°ä¸åŒçš„ reducerï¼ˆSpark é‡Œ reducer å¯èƒ½æ˜¯ä¸‹ä¸€ä¸ª stage é‡Œçš„ ShuffleMapTaskï¼Œä¹Ÿå¯èƒ½æ˜¯ ResultTaskï¼‰</li>
<li>Reducer ä»¥å†…å­˜ä½œç¼“å†²åŒºï¼Œè¾¹ shuffle è¾¹ aggregate æ•°æ®ï¼Œç­‰åˆ°æ•°æ® aggregate å¥½ä»¥åè¿›è¡Œ reduce().</li>
</ol>
</blockquote>
<p><strong>low-level è§’åº¦ï¼š</strong></p>
<blockquote>
<p><strong>Hadoop MapReduce</strong> æ˜¯ sort-basedï¼Œè¿›å…¥ combine() å’Œ reduce() çš„ records å¿…é¡»å…ˆ sort.</p>
<p>å¥½å¤„ï¼šcombine/reduce() å¯ä»¥å¤„ç†å¤§è§„æ¨¡çš„æ•°æ®, å› ä¸ºå…¶è¾“å…¥æ•°æ®å¯ä»¥é€šè¿‡å¤–æ’å¾—åˆ°</p>
<p>(1) mapper å¯¹æ¯æ®µæ•°æ®å…ˆåšæ’åº<br>(2) reducer çš„ shuffle å¯¹æ’å¥½åºçš„æ¯æ®µæ•°æ®åš å½’å¹¶ merge</p>
<p><strong>Spark</strong> é»˜è®¤é€‰æ‹©çš„æ˜¯ hash-basedï¼Œé€šå¸¸ä½¿ç”¨ HashMap æ¥å¯¹ shuffle æ¥çš„æ•°æ®è¿›è¡Œ aggregateï¼Œä¸æå‰æ’åº<br>å¦‚æœç”¨æˆ·éœ€è¦ç»è¿‡æ’åºçš„æ•°æ®ï¼šsortByKey()</p>
</blockquote>
<p><strong>å®ç°è§’åº¦ï¼š</strong></p>
<blockquote>
<ol>
<li>Hadoop MapReduce å°†å¤„ç†æµç¨‹åˆ’åˆ†å‡ºæ˜æ˜¾çš„å‡ ä¸ªé˜¶æ®µï¼šmap(), spilt, merge, shuffle, sort, reduce()</li>
<li>Spark æ²¡æœ‰è¿™æ ·åŠŸèƒ½æ˜ç¡®çš„é˜¶æ®µï¼Œåªæœ‰ä¸åŒçš„ stage å’Œä¸€ç³»åˆ—çš„ transformation()ï¼Œspill, merge, aggregate ç­‰æ“ä½œéœ€è¦è•´å«åœ¨ transformation() ä¸­</li>
</ol>
</blockquote>
<h3 id="3-4-MR-Spark-çš„-shuffle-è¿‡ç¨‹"><a href="#3-4-MR-Spark-çš„-shuffle-è¿‡ç¨‹" class="headerlink" title="3.4 MR/Spark çš„ shuffle è¿‡ç¨‹"></a>3.4 MR/Spark çš„ shuffle è¿‡ç¨‹</h3><table>
<thead>
<tr>
<th style="text-align:center">Tech</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>hadoop</strong></td>
<td>mapç«¯ä¿å­˜åˆ†ç‰‡æ•°æ®ï¼Œé€šè¿‡ç½‘ç»œæ”¶é›†åˆ°reduceç«¯</td>
</tr>
<tr>
<td style="text-align:center"><strong>spark</strong></td>
<td>sparkçš„shuffleæ˜¯åœ¨DAGSchedularåˆ’åˆ†Stageçš„æ—¶å€™äº§ç”Ÿçš„ï¼ŒTaskScheduleè¦åˆ†å‘Stageåˆ°å„ä¸ªworkerçš„executorï¼Œå‡å°‘shuffleå¯ä»¥æé«˜æ€§èƒ½</td>
</tr>
</tbody>
</table>
<h3 id="3-5-partition-å’Œ-block-çš„å…³è”"><a href="#3-5-partition-å’Œ-block-çš„å…³è”" class="headerlink" title="3.5 partition å’Œ block çš„å…³è”"></a>3.5 partition å’Œ block çš„å…³è”</h3><blockquote>
<ul>
<li><p>hdfs ä¸­çš„ block æ˜¯åˆ†å¸ƒå¼å­˜å‚¨çš„æœ€å°å•å…ƒï¼Œç­‰åˆ†ï¼Œå¯è®¾ç½®å†—ä½™ï¼Œè¿™æ ·è®¾è®¡æœ‰ä¸€éƒ¨åˆ†ç£ç›˜ç©ºé—´çš„æµªè´¹ï¼Œä½†æ˜¯æ•´é½çš„ blockå¤§å°ï¼Œä¾¿äºå¿«é€Ÿæ‰¾åˆ°ã€è¯»å–å¯¹åº”çš„å†…å®¹</p>
</li>
<li><p>Sparkä¸­çš„partitionæ˜¯RDDçš„æœ€å°å•å…ƒï¼ŒRDDæ˜¯ç”±åˆ†å¸ƒåœ¨å„ä¸ªèŠ‚ç‚¹ä¸Šçš„partitionç»„æˆçš„.</p>
</li>
<li><p>partitionæ˜¯æŒ‡çš„sparkåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆçš„æ•°æ®åœ¨è®¡ç®—ç©ºé—´å†…æœ€å°å•å…ƒ.</p>
</li>
</ul>
<p>åŒä¸€ä»½æ•°æ®ï¼ˆRDDï¼‰çš„partionå¤§å°ä¸ä¸€ï¼Œæ•°é‡ä¸å®šï¼Œæ˜¯æ ¹æ®applicationé‡Œçš„ç®—å­å’Œæœ€åˆè¯»å…¥çš„æ•°æ®åˆ†å—æ•°é‡å†³å®š</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">block/partition</th>
<th style="text-align:center">description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">block</td>
<td style="text-align:center">ä½äºå­˜å‚¨ç©ºé—´, blockçš„å¤§å°æ˜¯å›ºå®šçš„</td>
</tr>
<tr>
<td style="text-align:center">partition</td>
<td style="text-align:center">ä½äºè®¡ç®—ç©ºé—´, partionå¤§å°æ˜¯ä¸å›ºå®šçš„</td>
</tr>
</tbody>
</table>
<h2 id="4-Spark-RDD-4"><a href="#4-Spark-RDD-4" class="headerlink" title="4. Spark RDD(4)"></a>4. Spark RDD(4)</h2><h3 id="4-1-RDDæœºåˆ¶"><a href="#4-1-RDDæœºåˆ¶" class="headerlink" title="4.1 RDDæœºåˆ¶"></a>4.1 RDDæœºåˆ¶</h3><ul>
<li>åˆ†å¸ƒå¼å¼¹æ€§æ•°æ®é›†ï¼Œç®€å•çš„ç†è§£æˆä¸€ç§æ•°æ®ç»“æ„ï¼Œæ˜¯sparkæ¡†æ¶ä¸Šçš„é€šç”¨è´§å¸</li>
<li>æ‰€æœ‰ç®—å­éƒ½æ˜¯åŸºäºrddæ¥æ‰§è¡Œçš„</li>
<li>rddæ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šå½¢æˆdagå›¾ï¼Œç„¶åå½¢æˆlineageä¿è¯å®¹é”™æ€§ç­‰</li>
<li>ä»ç‰©ç†çš„è§’åº¦æ¥çœ‹rddå­˜å‚¨çš„æ˜¯blockå’Œnodeä¹‹é—´çš„æ˜ å°„</li>
</ul>
<h3 id="4-2-RDDçš„å¼¹æ€§è¡¨ç°åœ¨å“ªå‡ ç‚¹ï¼Ÿ"><a href="#4-2-RDDçš„å¼¹æ€§è¡¨ç°åœ¨å“ªå‡ ç‚¹ï¼Ÿ" class="headerlink" title="4.2 RDDçš„å¼¹æ€§è¡¨ç°åœ¨å“ªå‡ ç‚¹ï¼Ÿ"></a>4.2 RDDçš„å¼¹æ€§è¡¨ç°åœ¨å“ªå‡ ç‚¹ï¼Ÿ</h3><ul>
<li>è‡ªåŠ¨çš„è¿›è¡Œå†…å­˜å’Œç£ç›˜çš„å­˜å‚¨åˆ‡æ¢ï¼›</li>
<li>åŸºäºLingageçš„é«˜æ•ˆå®¹é”™ï¼›</li>
<li>taskå¦‚æœå¤±è´¥ä¼šè‡ªåŠ¨è¿›è¡Œç‰¹å®šæ¬¡æ•°çš„é‡è¯•ï¼›</li>
<li>stageå¦‚æœå¤±è´¥ä¼šè‡ªåŠ¨è¿›è¡Œç‰¹å®šæ¬¡æ•°çš„é‡è¯•ï¼Œè€Œä¸”åªä¼šè®¡ç®—å¤±è´¥çš„åˆ†ç‰‡ï¼›</li>
<li>checkpointå’Œpersistï¼Œæ•°æ®è®¡ç®—ä¹‹åæŒä¹…åŒ–ç¼“å­˜</li>
<li>æ•°æ®è°ƒåº¦å¼¹æ€§ï¼ŒDAG TASKè°ƒåº¦å’Œèµ„æºæ— å…³</li>
<li>æ•°æ®åˆ†ç‰‡çš„é«˜åº¦å¼¹æ€§ï¼Œa.åˆ†ç‰‡å¾ˆå¤šç¢ç‰‡å¯ä»¥åˆå¹¶æˆå¤§çš„ï¼Œb.par</li>
</ul>
<h3 id="4-3-RDDæœ‰å“ªäº›ç¼ºé™·ï¼Ÿ"><a href="#4-3-RDDæœ‰å“ªäº›ç¼ºé™·ï¼Ÿ" class="headerlink" title="4.3 RDDæœ‰å“ªäº›ç¼ºé™·ï¼Ÿ"></a>4.3 RDDæœ‰å“ªäº›ç¼ºé™·ï¼Ÿ</h3><ul>
<li>ä¸æ”¯æŒç»†ç²’åº¦çš„å†™å’Œæ›´æ–°æ“ä½œï¼ˆå¦‚ç½‘ç»œçˆ¬è™«ï¼‰</li>
<li>sparkå†™æ•°æ®æ˜¯ç²—ç²’åº¦çš„ï¼Œæ‰€è°“ç²—ç²’åº¦ï¼Œå°±æ˜¯æ‰¹é‡å†™å…¥æ•°æ® ï¼ˆæ‰¹é‡å†™ï¼‰</li>
<li>ä½†æ˜¯è¯»æ•°æ®æ˜¯ç»†ç²’åº¦çš„ä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä¸€æ¡æ¡çš„è¯» ï¼ˆä¸€æ¡æ¡è¯»ï¼‰</li>
<li>ä¸æ”¯æŒå¢é‡è¿­ä»£è®¡ç®—ï¼ŒFlinkæ”¯æŒ</li>
</ul>
<h3 id="4-4-ä»€ä¹ˆæ˜¯RDDå®½ä¾èµ–å’Œçª„ä¾èµ–ï¼Ÿ"><a href="#4-4-ä»€ä¹ˆæ˜¯RDDå®½ä¾èµ–å’Œçª„ä¾èµ–ï¼Ÿ" class="headerlink" title="4.4 ä»€ä¹ˆæ˜¯RDDå®½ä¾èµ–å’Œçª„ä¾èµ–ï¼Ÿ"></a>4.4 ä»€ä¹ˆæ˜¯RDDå®½ä¾èµ–å’Œçª„ä¾èµ–ï¼Ÿ</h3><p>RDDå’Œå®ƒä¾èµ–çš„parent RDD(s)çš„å…³ç³»æœ‰ä¸¤ç§ä¸åŒçš„ç±»å‹</p>
<ul>
<li>çª„ä¾èµ–ï¼šæ¯ä¸€ä¸ªparent RDDçš„Partitionæœ€å¤šè¢«å­RDDçš„ä¸€ä¸ªPartitionä½¿ç”¨ ï¼ˆä¸€çˆ¶ä¸€å­ï¼‰</li>
<li>å®½ä¾èµ–ï¼šå¤šä¸ªå­RDDçš„Partitionä¼šä¾èµ–åŒä¸€ä¸ªparent RDDçš„Partition ï¼ˆä¸€çˆ¶å¤šå­ï¼‰</li>
</ul>
<h2 id="5-RDDæ“ä½œ-13"><a href="#5-RDDæ“ä½œ-13" class="headerlink" title="5. RDDæ“ä½œ(13)"></a>5. RDDæ“ä½œ(13)</h2><h3 id="5-1-cacheå’Œpesistçš„åŒºåˆ«"><a href="#5-1-cacheå’Œpesistçš„åŒºåˆ«" class="headerlink" title="5.1 cacheå’Œpesistçš„åŒºåˆ«"></a>5.1 cacheå’Œpesistçš„åŒºåˆ«</h3><h3 id="5-2-cacheåé¢èƒ½ä¸èƒ½æ¥å…¶ä»–ç®—å­-å®ƒæ˜¯ä¸æ˜¯actionæ“ä½œï¼Ÿ"><a href="#5-2-cacheåé¢èƒ½ä¸èƒ½æ¥å…¶ä»–ç®—å­-å®ƒæ˜¯ä¸æ˜¯actionæ“ä½œï¼Ÿ" class="headerlink" title="5.2 cacheåé¢èƒ½ä¸èƒ½æ¥å…¶ä»–ç®—å­,å®ƒæ˜¯ä¸æ˜¯actionæ“ä½œï¼Ÿ"></a>5.2 cacheåé¢èƒ½ä¸èƒ½æ¥å…¶ä»–ç®—å­,å®ƒæ˜¯ä¸æ˜¯actionæ“ä½œï¼Ÿ</h3><p>å¯ä»¥æ¥å…¶ä»–ç®—å­ï¼Œä½†æ˜¯æ¥äº†ç®—å­ä¹‹åï¼Œèµ·ä¸åˆ°ç¼“å­˜åº”æœ‰çš„æ•ˆæœï¼Œå› ä¸ºä¼šé‡æ–°è§¦å‘cache<br>cacheä¸æ˜¯actionæ“ä½œ</p>
<h3 id="5-3-ä»€ä¹ˆåœºæ™¯ä¸‹è¦è¿›è¡Œpersistæ“ä½œï¼Ÿ"><a href="#5-3-ä»€ä¹ˆåœºæ™¯ä¸‹è¦è¿›è¡Œpersistæ“ä½œï¼Ÿ" class="headerlink" title="5.3 ä»€ä¹ˆåœºæ™¯ä¸‹è¦è¿›è¡Œpersistæ“ä½œï¼Ÿ"></a>5.3 ä»€ä¹ˆåœºæ™¯ä¸‹è¦è¿›è¡Œpersistæ“ä½œï¼Ÿ</h3><p>ä»¥ä¸‹åœºæ™¯ä¼šä½¿ç”¨persist</p>
<p>æŸä¸ªæ­¥éª¤è®¡ç®—éå¸¸è€—æ—¶æˆ–è®¡ç®—é“¾æ¡éå¸¸é•¿ï¼Œéœ€è¦è¿›è¡ŒpersistæŒä¹…åŒ–<br>shuffleä¹‹åä¸ºä»€ä¹ˆè¦persistï¼Œshuffleè¦è¿›æ€§ç½‘ç»œä¼ è¾“ï¼Œé£é™©å¾ˆå¤§ï¼Œæ•°æ®ä¸¢å¤±é‡æ¥ï¼Œæ¢å¤ä»£ä»·å¾ˆå¤§<br>shuffleä¹‹å‰è¿›è¡Œpersistï¼Œæ¡†æ¶é»˜è®¤å°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œè¿™ä¸ªæ˜¯æ¡†æ¶è‡ªåŠ¨åšçš„ã€‚</p>
<h3 id="5-4-rddæœ‰å‡ ç§æ“ä½œç±»å‹ï¼Ÿä¸‰ç§ï¼"><a href="#5-4-rddæœ‰å‡ ç§æ“ä½œç±»å‹ï¼Ÿä¸‰ç§ï¼" class="headerlink" title="5.4 rddæœ‰å‡ ç§æ“ä½œç±»å‹ï¼Ÿä¸‰ç§ï¼"></a>5.4 rddæœ‰å‡ ç§æ“ä½œç±»å‹ï¼Ÿä¸‰ç§ï¼</h3><ul>
<li>transformationï¼Œrddç”±ä¸€ç§è½¬ä¸ºå¦ä¸€ç§rdd</li>
<li>action</li>
<li>cronrollerï¼Œæ§åˆ¶ç®—å­(cache/persist) å¯¹æ€§èƒ½å’Œæ•ˆç‡çš„æœ‰å¾ˆå¥½çš„æ”¯æŒ</li>
</ul>
<h3 id="5-5-reduceByKeyæ˜¯ä¸æ˜¯actionï¼Ÿ"><a href="#5-5-reduceByKeyæ˜¯ä¸æ˜¯actionï¼Ÿ" class="headerlink" title="5.5 reduceByKeyæ˜¯ä¸æ˜¯actionï¼Ÿ"></a>5.5 reduceByKeyæ˜¯ä¸æ˜¯actionï¼Ÿ</h3><p>ä¸æ˜¯ï¼Œå¾ˆå¤šäººéƒ½ä¼šä»¥ä¸ºæ˜¯actionï¼Œreduce rddæ˜¯action</p>
<h2 id="5-Spark-å¤§æ•°æ®é—®é¢˜-7"><a href="#5-Spark-å¤§æ•°æ®é—®é¢˜-7" class="headerlink" title="5. Spark å¤§æ•°æ®é—®é¢˜(7)"></a>5. Spark å¤§æ•°æ®é—®é¢˜(7)</h2><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.jianshu.com/p/7a8fca3838a4" target="_blank" rel="external">SparkçŸ¥è¯†ç‚¹æ±‡æ€»</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/49169166" target="_blank" rel="external">Sparkæ€»ç»“(ä¸€) çŸ¥ä¹</a></li>
<li><a href="https://blog.csdn.net/sdujava2011/article/details/46825637" target="_blank" rel="external">Spark:Yarn-clusterå’ŒYarn-clientåŒºåˆ«ä¸è”ç³»</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/68910426" target="_blank" rel="external">Sparkå¸¸ç”¨ç®—å­</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/52213248" target="_blank" rel="external">ã€ŠSparkå¿«é€Ÿå¤§æ•°æ®åˆ†æã€‹RDDæ“ä½œæ€»ç»“</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/164541531" target="_blank" rel="external">Sparkå¸¸è§é¢è¯•é—®é¢˜æœ‰å“ªäº›ï¼Ÿ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/166477801" target="_blank" rel="external">Sparkå­¦ä¹ ç—›ç‚¹å’Œè·¯çº¿å›¾</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/49169166" target="_blank" rel="external">Sparké¢è¯•é¢˜(ä¸€)</a></li>
</ul>
<p>å¸¸è§ç®—å­</p>
<ul>
<li><a href="https://data-flair.training/blogs/spark-rdd-operations-transformations-actions/" target="_blank" rel="external">Spark RDD Operations-Transformation &amp; Action with Example</a></li>
<li><a href="https://blog.csdn.net/u014204541/article/details/81130870" target="_blank" rel="external">Spark RDDå¸¸ç”¨ç®—å­å­¦ä¹ ç¬”è®°è¯¦è§£(pythonç‰ˆ)</a></li>
<li><a href="https://blog.csdn.net/dwb1015/article/details/52200809" target="_blank" rel="external">Sparkå¸¸ç”¨çš„Transformationç®—å­çš„ç®€å•ä¾‹å­</a></li>
<li><a href="https://blog.csdn.net/dream0352/article/details/62229977" target="_blank" rel="external">2.Sparkå¸¸ç”¨ç®—å­è®²è§£</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/53343681" target="_blank" rel="external">PySpark å®æˆ˜ä¹‹å¼¹æ€§åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆRDDï¼‰</a></li>
<li><a href="https://blog.csdn.net/Fortuna_i/article/details/81170565" target="_blank" rel="external">Spark32ä¸ªå¸¸ç”¨ç®—å­æ€»ç»“</a></li>
<li><a href="https://blog.csdn.net/AiBigData/article/details/102824906" target="_blank" rel="external">Sparké«˜é¢‘é¢è¯•é¢˜æ€»ç»“</a></li>
<li><a href="https://blog.csdn.net/zuolixiangfisher/article/details/88973159?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.channel_param" target="_blank" rel="external">Sparkå¸¸è§20ä¸ªé¢è¯•é¢˜ï¼ˆå«å¤§éƒ¨åˆ†ç­”æ¡ˆï¼‰</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SparkSql - ç»“æ„åŒ–æ•°æ®å¤„ç† (ä¸‹)]]></title>
      <url>http://shopee.ai/2020/08/28/spark/spark-aura-9.2-SparkSql/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/SparkSql-logo-2_meitu_1.jpg" width="500" alt=""></p>
<a id="more"></a>
<h2 id="1-spark-æ•´åˆ-yarn"><a href="#1-spark-æ•´åˆ-yarn" class="headerlink" title="1. spark æ•´åˆ yarn"></a>1. spark æ•´åˆ yarn</h2><blockquote>
<p>rdd.aggregateByKey(init_value: U) ((C, U) =&gt; (C,C) =&gt; C)</p>
</blockquote>
<p><a href="https://www.jianshu.com/p/a4ef73428097" target="_blank" rel="external">Spark 2.3 on yarnçš„é…ç½®å®‰è£…</a></p>
<h3 id="1-1-é…ç½®-Spark-æ•´åˆ-YARN"><a href="#1-1-é…ç½®-Spark-æ•´åˆ-YARN" class="headerlink" title="1.1 é…ç½® Spark æ•´åˆ YARN"></a>1.1 é…ç½® Spark æ•´åˆ YARN</h3><ol>
<li>æŠŠ yarn-site.xml å¤åˆ¶åˆ° $SPARK_HOME/conf ç›®å½•ä¸­</li>
<li>åœ¨ä½¿ç”¨ spark-submit æäº¤ä»»åŠ¡æ—¶å€™è¯·è¿™ä¹ˆæ‰§è¡Œèµ„æºè°ƒåº¦ç³»ç»Ÿï¼š</li>
</ol>
<blockquote>
<p>spark-submit â€“master yarn â€“deploy-mode client</p>
</blockquote>
<p>ä½†æ˜¯æœ‰å¯èƒ½å‡ºç°å¼‚å¸¸</p>
<h3 id="1-2-Spark-Shell-æµ‹è¯•"><a href="#1-2-Spark-Shell-æµ‹è¯•" class="headerlink" title="1.2 Spark-Shell æµ‹è¯•"></a>1.2 Spark-Shell æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">åªèƒ½è¿™ä¹ˆå¯åŠ¨</span><br><span class="line">spark-shell --master yarn --deploy-mode client</span><br><span class="line"></span><br><span class="line">ä¸èƒ½è¿™ä¹ˆå¯åŠ¨</span><br><span class="line">spark-shell --master yarn --deploy-mode cluster</span><br><span class="line"></span><br><span class="line">åŸå› ï¼š spark-shell spark-submit driver</span><br></pre></td></tr></table></figure>
<p>åŸæ¥ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">spark-shell</span><br><span class="line">spark-shell --master <span class="built_in">local</span>[*]</span><br></pre></td></tr></table></figure>
<h3 id="1-3-Spark-Submit-æµ‹è¯•"><a href="#1-3-Spark-Submit-æµ‹è¯•" class="headerlink" title="1.3 Spark-Submit æµ‹è¯•"></a>1.3 Spark-Submit æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">åªèƒ½è¿™ä¹ˆå¯åŠ¨</span><br><span class="line">spark-submit --master yarn --deploy-mode client</span><br><span class="line"></span><br><span class="line">ä¹Ÿèƒ½è¿™ä¹ˆå¯åŠ¨</span><br><span class="line">spark-submit --master yarn --deploy-mode cluster</span><br><span class="line"></span><br><span class="line">åŸå› ï¼š spark-shell spark-submit driver</span><br></pre></td></tr></table></figure>
<h2 id="2-spark-æ•´åˆ-hive"><a href="#2-spark-æ•´åˆ-hive" class="headerlink" title="2. spark æ•´åˆ hive"></a>2. spark æ•´åˆ hive</h2><h3 id="2-1-Spark-è‡ªå¸¦å…ƒæ•°æ®åº“-amp"><a href="#2-1-Spark-è‡ªå¸¦å…ƒæ•°æ®åº“-amp" class="headerlink" title="2.1 Spark è‡ªå¸¦å…ƒæ•°æ®åº“ &amp;"></a>2.1 Spark è‡ªå¸¦å…ƒæ•°æ®åº“ &amp;</h3><p>å¦‚æœç”¨æˆ·ç›´æ¥è¿è¡Œbin/spark-sqlå‘½ä»¤ã€‚ä¼šå¯¼è‡´æˆ‘ä»¬çš„å…ƒæ•°æ®æœ‰ä¸¤ç§çŠ¶æ€ï¼š</p>
<p>1ã€in-memoryçŠ¶æ€:</p>
<p>  å¦‚æœSPARK-HOME/confç›®å½•ä¸‹æ²¡æœ‰æ”¾ç½®hive-site.xmlæ–‡ä»¶ï¼Œå…ƒæ•°æ®çš„çŠ¶æ€å°±æ˜¯in-memoryï¼Œ ä¹Ÿå°±æ˜¯ä½¿ç”¨è‡ªå¸¦çš„ derby åœ¨å½“å‰ä¼šè¯ä¸­æœ‰æ•ˆ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(<span class="keyword">id</span> <span class="built_in">int</span>, <span class="keyword">name</span> <span class="keyword">string</span>, sex <span class="keyword">string</span>, age <span class="built_in">int</span>, department <span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">row</span> <span class="keyword">format</span> <span class="keyword">delimited</span> <span class="keyword">fields</span> <span class="keyword">terminated</span> <span class="keyword">by</span> <span class="string">","</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">load</span> <span class="keyword">data</span> <span class="keyword">local</span> inpath <span class="string">"/home/.."</span></span><br></pre></td></tr></table></figure>
<p>spark-sql åœ¨ hadoop02 å’Œ hadoop03 ä¸­å¯åŠ¨çš„æ—¶å€™ï¼Œéƒ½å„è‡ªåˆå§‹åŒ–äº†ä¸€ä¸ªå…ƒæ•°æ®åº“</p>
<p>æ‰€ä»¥åœ¨ hadoop02 ä¸Šåˆ›å»ºçš„å…ƒæ•°æ®åº“ï¼Œåœ¨ hadoop03 ä¸Šå¯åŠ¨çš„ spark-sql ä¸èƒ½å…±ç”¨æ•°æ®.</p>
<p><strong>spark-sql çš„ä½¿ç”¨æœ‰2ç§æ¨¡å¼</strong></p>
<h3 id="2-2-Spark-æ•´åˆhiveé…ç½®"><a href="#2-2-Spark-æ•´åˆhiveé…ç½®" class="headerlink" title="2.2 Spark æ•´åˆhiveé…ç½®"></a>2.2 Spark æ•´åˆhiveé…ç½®</h3><p>2ã€hiveçŠ¶æ€ï¼š</p>
<p> å¦‚æœæˆ‘ä»¬åœ¨SPARK-HOME/confç›®å½•ä¸‹æ”¾ç½®äº†ï¼Œhive-site.xmlæ–‡ä»¶ï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹</p>
<p> spark-sqlçš„å…ƒæ•°æ®çš„çŠ¶æ€å°±æ˜¯hive.</p>
<p><img src="/images/spark/spark-aura-10.3.1.png" width="900" alt=""></p>
<h3 id="2-3-SparkSQL-è„šæœ¬ä½¿ç”¨"><a href="#2-3-SparkSQL-è„šæœ¬ä½¿ç”¨" class="headerlink" title="2.3 SparkSQL è„šæœ¬ä½¿ç”¨"></a>2.3 SparkSQL è„šæœ¬ä½¿ç”¨</h3><h2 id="3-sparksqlå’Œhiveçš„è‡ªå®šä¹‰å‡½æ•°"><a href="#3-sparksqlå’Œhiveçš„è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="3. sparksqlå’Œhiveçš„è‡ªå®šä¹‰å‡½æ•°"></a>3. sparksqlå’Œhiveçš„è‡ªå®šä¹‰å‡½æ•°</h2><h3 id="3-1-SparkSQL-UDF"><a href="#3-1-SparkSQL-UDF" class="headerlink" title="3.1 SparkSQL UDF"></a>3.1 SparkSQL UDF</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> functions;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-SparkSQL-UDAF"><a href="#3-2-SparkSQL-UDAF" class="headerlink" title="3.2 SparkSQL UDAF"></a>3.2 SparkSQL UDAF</h3><h3 id="3-3-ä½¿ç”¨æµ‹è¯•"><a href="#3-3-ä½¿ç”¨æµ‹è¯•" class="headerlink" title="3.3 ä½¿ç”¨æµ‹è¯•"></a>3.3 ä½¿ç”¨æµ‹è¯•</h3><h2 id="4-SparkSQL-å¸¸ç”¨çª—å£åˆ†æå‡½æ•°"><a href="#4-SparkSQL-å¸¸ç”¨çª—å£åˆ†æå‡½æ•°" class="headerlink" title="4. SparkSQL å¸¸ç”¨çª—å£åˆ†æå‡½æ•°"></a>4. SparkSQL å¸¸ç”¨çª—å£åˆ†æå‡½æ•°</h2><h2 id="5-ç»¼åˆç»ƒä¹ "><a href="#5-ç»¼åˆç»ƒä¹ " class="headerlink" title="5. ç»¼åˆç»ƒä¹ "></a>5. ç»¼åˆç»ƒä¹ </h2><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.jianshu.com/p/93bb976c4b0f" target="_blank" rel="external">Sparkå®ä¾‹-è‡ªå®šä¹‰èšåˆå‡½æ•°</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/51501349" target="_blank" rel="external">Spark UDFä½¿ç”¨è¯¦è§£åŠä»£ç ç¤ºä¾‹</a></li>
<li><a href="https://www.jianshu.com/p/65a3476757a5" target="_blank" rel="external">çœ‹äº†ä¹‹åä¸å†è¿·ç³Š-Sparkå¤šç§è¿è¡Œæ¨¡å¼,ä¿ºæ˜¯äº®å“¥</a></li>
<li><a href="https://spark-reference-doc-cn.readthedocs.io/zh_CN/latest/programming-guide/sql-guide.html" target="_blank" rel="external">Spark SQL, DataFrame å’Œ Dataset ç¼–ç¨‹æŒ‡å—</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1010936" target="_blank" rel="external">Spark2.xå­¦ä¹ ç¬”è®°ï¼š14ã€Spark SQLç¨‹åºè®¾è®¡</a></li>
<li><a href="https://blog.csdn.net/qq_41851454/category_7640711.html" target="_blank" rel="external">SparkSQLå­¦ä¹  1 2 3</a></li>
<li><a href="https://tech.youzan.com/sparksql-in-youzan-2/" target="_blank" rel="external">SparkSQLåœ¨æœ‰èµå¤§æ•°æ®çš„å®è·µï¼ˆäºŒï¼‰</a></li>
<li><a href="https://stackoverflow.com/questions/29383578/how-to-convert-rdd-object-to-dataframe-in-spark" target="_blank" rel="external">How to convert rdd object to dataframe in spark</a></li>
<li><a href="https://study.163.com/course/courseLearn.htm?courseId=1208880821#/learn/video?lessonId=1278316678&amp;courseId=1208880821" target="_blank" rel="external">äº‘è¯¾å ‚ SparkSQL çš„æ•°æ®æºæ“ä½œ</a></li>
<li><a href="https://blog.csdn.net/huang66666666/category_9399107.html" target="_blank" rel="external">å¤§æ•°æ®èµ„æ–™ç¬”è®°æ•´ç†</a></li>
<li><a href="https://blog.csdn.net/robbyo/article/details/25242495" target="_blank" rel="external">HDOJ_1711_KMP æ±‚åŒ¹é…ä½ç½®</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SparkSql - ç»“æ„åŒ–æ•°æ®å¤„ç† (ä¸Š)]]></title>
      <url>http://shopee.ai/2020/08/25/spark/spark-aura-9.1-SparkSql/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/SparkSql-logo-2.png" width="500" alt=""></p>
<a id="more"></a>
<h2 id="1-SparkSQL-çš„åŸºç¡€ç†è®º"><a href="#1-SparkSQL-çš„åŸºç¡€ç†è®º" class="headerlink" title="1. SparkSQL çš„åŸºç¡€ç†è®º"></a>1. SparkSQL çš„åŸºç¡€ç†è®º</h2><table>
<thead>
<tr>
<th style="text-align:center">Version</th>
<th style="text-align:left">Title Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1.0ä»¥å‰</td>
<td style="text-align:left">Shark</td>
</tr>
<tr>
<td style="text-align:center">Spark-1.1</td>
<td style="text-align:left">SparkSQL(åªæ˜¯æµ‹è¯•æ€§çš„)  SQL</td>
</tr>
<tr>
<td style="text-align:center">Spark&lt;1.3</td>
<td style="text-align:left">DataFrame ç§°ä¸º SchemaRDD</td>
</tr>
<tr>
<td style="text-align:center">Spark-1.3</td>
<td style="text-align:left">SparkSQL(æ­£å¼ç‰ˆæœ¬)+Dataframe API</td>
</tr>
<tr>
<td style="text-align:center">Spark-1.4</td>
<td style="text-align:left">å¢åŠ çª—å£åˆ†æå‡½æ•°</td>
</tr>
<tr>
<td style="text-align:center">Spark-1.5</td>
<td style="text-align:left">SparkSQL é’¨ä¸è®¡åˆ’ï¼Œ UDF/UDAF</td>
</tr>
<tr>
<td style="text-align:center">Spark-1.6</td>
<td style="text-align:left">SparkSQL æ‰§è¡Œçš„ sql å¯ä»¥å¢åŠ æ³¨é‡Š</td>
</tr>
<tr>
<td style="text-align:center">Spark-2.x</td>
<td style="text-align:left">SparkSQL+DataFrame+DataSet(æ­£å¼ç‰ˆæœ¬), å¼•å…¥ SparkSession ç»Ÿä¸€ç¼–ç¨‹å…¥å£</td>
</tr>
<tr>
<td style="text-align:center">..</td>
<td style="text-align:left">SparkSQL:è¿˜æœ‰å…¶ä»–çš„ä¼˜åŒ–</td>
</tr>
</tbody>
</table>
<p><a href="https://blog.csdn.net/qq_41851454/article/details/80188528" target="_blank" rel="external">SparkSQLå­¦ä¹ ï¼ˆä¸€ï¼‰SparkSQLç®€å•ä½¿ç”¨</a><br><a href="https://blog.csdn.net/qq_41851454/category_7640711.html" target="_blank" rel="external">SparkSQLå­¦ä¹  1 2 3</a></p>
<p>SparkSQLæ˜¯Sparkçš„ä¸€ä¸ªæ¨¡å—ï¼Œä¸»è¦ç”¨äºè¿›è¡Œç»“æ„åŒ–æ•°æ®çš„å¤„ç†ã€‚å®ƒæä¾›çš„æœ€æ ¸å¿ƒçš„ç¼–ç¨‹æŠ½è±¡å°±æ˜¯DataFrame.</p>
<p><strong>åŸç†</strong>ï¼š å°†SparkSQL è½¬åŒ–ä¸º RDD ï¼Œç„¶åæäº¤åˆ°é›†ç¾¤æ‰§è¡Œ</p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">åŸç†</td>
<td style="text-align:left">å°†SparkSQL è½¬åŒ–ä¸º RDD ï¼Œç„¶åæäº¤åˆ°é›†ç¾¤æ‰§è¡Œ</td>
</tr>
<tr>
<td style="text-align:center">ä½œç”¨</td>
<td style="text-align:left">æä¾›ä¸€ä¸ªç¼–ç¨‹æŠ½è±¡ï¼ˆDataFrameï¼‰å¹¶ä¸”ä½œä¸ºåˆ†å¸ƒå¼SQLæŸ¥è¯¢å¼•æ“ã€‚ <br> DataFrame å¯æ®å¾ˆå¤šæºè¿›è¡Œæ„å»ºï¼ŒåŒ…æ‹¬ï¼šç»“æ„åŒ–çš„æ•°æ®æ–‡ä»¶ï¼ŒHiveä¸­çš„è¡¨ï¼Œå¤–éƒ¨çš„å…³ç³»å‹æ•°æ®åº“ï¼Œä»¥åŠRDD </td>
</tr>
<tr>
<td style="text-align:center">ç‰¹ç‚¹</td>
<td style="text-align:left">1. å®¹æ˜“æ•´åˆ <br> 2. ç»Ÿä¸€çš„æ•°æ®è®¿é—®æ–¹å¼ <br> 3. å…¼å®¹Hive <br> 4. æ ‡å‡†çš„æ•°æ®è¿æ¥</td>
</tr>
</tbody>
</table>
<h2 id="2-SparkSQL-çš„ç¼–ç¨‹å…¥å£"><a href="#2-SparkSQL-çš„ç¼–ç¨‹å…¥å£" class="headerlink" title="2. SparkSQL çš„ç¼–ç¨‹å…¥å£"></a>2. SparkSQL çš„ç¼–ç¨‹å…¥å£</h2><p><strong>SparkSession:</strong></p>
<blockquote>
<ol>
<li>ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªç»Ÿä¸€çš„åˆ‡å…¥ç‚¹ä½¿ç”¨Spark å„é¡¹åŠŸèƒ½</li>
<li>å…è®¸ç”¨æˆ·é€šè¿‡å®ƒè°ƒç”¨ DataFrame å’Œ Dataset ç›¸å…³ API æ¥ç¼–å†™ç¨‹åº</li>
<li>å‡å°‘äº†ç”¨æˆ·éœ€è¦äº†è§£çš„ä¸€äº›æ¦‚å¿µï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„ä¸ Spark è¿›è¡Œäº¤äº’</li>
<li>ä¸ Spark äº¤äº’ä¹‹æ—¶ä¸éœ€è¦æ˜¾ç¤ºçš„åˆ›å»º SparkConf, SparkContext ä»¥åŠ SQlContextï¼Œè¿™äº›å¯¹è±¡å·²ç»å°é—­åœ¨ SparkSession ä¸­</li>
<li>SparkSession æä¾›å¯¹Hiveç‰¹å¾çš„å†…éƒ¨æ”¯æŒï¼šç”¨HiveSQLå†™SQLè¯­å¥ï¼Œè®¿é—® Hive UDFsï¼Œä»Hiveè¡¨ä¸­è¯»å–æ•°æ®</li>
</ol>
</blockquote>
<p><img src="/images/spark/spark-aura-9.1.3.png" width="900" alt=""></p>
<h3 id="2-1-SparkSession-çš„åˆ›å»º"><a href="#2-1-SparkSession-çš„åˆ›å»º" class="headerlink" title="2.1 SparkSession çš„åˆ›å»º"></a>2.1 SparkSession çš„åˆ›å»º</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> SparkSession</span><br><span class="line"></span><br><span class="line">spark = SparkSession \</span><br><span class="line">    .builder \</span><br><span class="line">    .appName(<span class="string">"Python Spark SQL basic example"</span>) \</span><br><span class="line">    .config(<span class="string">"spark.some.config.option"</span>, <span class="string">"some-value"</span>) \</span><br><span class="line">    .enableHiveSupport() // åœ¨classpathä¸­,å¿…é¡»åŠ å…¥ä¸€ä¸ªé…ç½®æ–‡ä»¶ hive-site.xml</span><br><span class="line">    .getOrCreate()</span><br><span class="line">    <span class="comment">#   hive url       : æºæ•°æ®åº“åœ¨å“ªé‡Œ</span></span><br><span class="line">    <span class="comment">#   hive warehouse : çœŸæ˜¯æ•°æ®åœ¨å“ªé‡Œ</span></span><br></pre></td></tr></table></figure>
<p>(1). spark-shell</p>
<blockquote>
<p>spark-shell</p>
<p>spark 1.x:</p>
<p>  SparkContext sc<br>  SqlContext sqlContextS</p>
<p>spark 2.x:</p>
<p>  SparkContext sc<br>  SparkSession spark</p>
</blockquote>
<h2 id="3-Spark-çš„æ•°æ®æŠ½è±¡"><a href="#3-Spark-çš„æ•°æ®æŠ½è±¡" class="headerlink" title="3. Spark çš„æ•°æ®æŠ½è±¡"></a>3. Spark çš„æ•°æ®æŠ½è±¡</h2><h3 id="3-1-DataFrames"><a href="#3-1-DataFrames" class="headerlink" title="3.1 DataFrames"></a>3.1 DataFrames</h3><p>åœ¨Sparkä¸­ï¼ŒDataFrameæ˜¯ä¸€ç§ä»¥RDDä¸ºåŸºç¡€çš„åˆ†å¸ƒå¼æ•°æ®é›†ï¼Œç±»ä¼¼äºä¼ ç»Ÿæ•°æ®åº“ä¸­çš„äºŒç»´è¡¨æ ¼ã€‚DataFrameä¸RDDçš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå‰è€…å¸¦æœ‰schemaå…ƒä¿¡æ¯ï¼Œå³DataFrameæ‰€è¡¨ç¤ºçš„äºŒç»´è¡¨æ•°æ®é›†çš„æ¯ä¸€åˆ—éƒ½å¸¦æœ‰åç§°å’Œç±»å‹ã€‚è¿™ä½¿å¾—Spark SQLå¾—ä»¥æ´å¯Ÿæ›´å¤šçš„ç»“æ„ä¿¡æ¯ï¼Œä»è€Œå¯¹è—äºDataFrameèƒŒåçš„æ•°æ®æºä»¥åŠä½œç”¨äºDataFrameä¹‹ä¸Šçš„å˜æ¢è¿›è¡Œäº†é’ˆå¯¹æ€§çš„ä¼˜åŒ–ï¼Œæœ€ç»ˆè¾¾åˆ°å¤§å¹…æå‡è¿è¡Œæ—¶æ•ˆç‡çš„ç›®æ ‡ï¼Œåè§‚RDDï¼Œç”±äºæ— ä»å¾—çŸ¥æ‰€å­˜æ•°æ®å…ƒç´ çš„å…·ä½“å†…éƒ¨ç»“æ„ï¼ŒSpark Coreåªèƒ½åœ¨stageå±‚é¢è¿›è¡Œç®€å•ã€é€šç”¨çš„æµæ°´çº¿ä¼˜åŒ–ã€‚</p>
<p><img src="/images/spark/spark-aura-9.3.1.png" width="700" alt=""></p>
<p><a href="https://study.163.com/course/courseLearn.htm?courseId=1208880821#/learn/video?lessonId=1278323689&amp;courseId=1208880821" target="_blank" rel="external">äº‘è¯¾å ‚</a></p>
<p>RDD/DataDrame/Dataset</p>
<p>æ•°æ®æŠ½è±¡ï¼š</p>
<p>val rdd = RDD[Record]<br>val rdd = RDD[String]</p>
<blockquote>
<p>å¯¹äºRDDä¸­çš„å…ƒç´ çš„æ ·å¼ï¼Œé€šè¿‡è§‚å¯Ÿå°±å¯ä»¥å¾—çŸ¥</p>
<p>HDFS                mr<br>Hive (HDFS + MYSQL) sql</p>
</blockquote>
<p><strong>RDD[Record]  == DataFrame == Table</strong></p>
<p>rdd1:</p>
<table>
<thead>
<tr>
<th style="text-align:center">id</th>
<th style="text-align:center">name</th>
<th style="text-align:center">sex</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">huangbo</td>
<td style="text-align:center">ç”·</td>
</tr>
</tbody>
</table>
<p>åœ¨ Spark1.3 ä¹‹å‰, DataFrame è¢«ç§°ä¸º SchemaRDDã€‚ ä»¥è¡Œä¸ºå•ä½æ„æˆçš„åˆ†å¸ƒå¼æ•°æ®é›†åˆï¼ŒæŒ‰ç…§åˆ—èµ‹äºˆä¸åŒçš„åç§°ã€‚å¯¹äº selectï¼Œfileterï¼Œaggregation å’Œ sort ç­‰æ“ä½œç¬¦çš„æŠ½è±¡.</p>
<table>
<thead>
<tr>
<th style="text-align:left">DataFrame = RDD + Schema = SchemaRDDï¼Œ å†…éƒ¨æ•°æ®æ— ç±»å‹ï¼Œç»Ÿä¸€ä¸º Row</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">DataFrame æ˜¯ä¸€ç§ç‰¹æ®Šå…³ç³»çš„ Dataset, <strong>DataSet[Row] = DataFrame</strong></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">DataFrame è‡ªå¸¦ä¼˜åŒ–å™¨ Catalystï¼Œå¯ä»¥è‡ªåŠ¨ä¼˜åŒ–ç¨‹åº</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">DataFrame æä¾›äº†ä¸€æ•´å¥—çš„ Data Scource API</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p><img src="/images/spark/spark-aura-9.3.2.png" width="800" alt=""></p>
<h3 id="3-2-DataFrame-æè¿°"><a href="#3-2-DataFrame-æè¿°" class="headerlink" title="3.2 DataFrame æè¿°"></a>3.2 DataFrame æè¿°</h3><p><a href="https://www.cnblogs.com/starwater/p/6841807.html" target="_blank" rel="external">è°ˆè°ˆRDDã€DataFrameã€Datasetçš„åŒºåˆ«å’Œå„è‡ªçš„ä¼˜åŠ¿</a></p>
<p><img src="/images/spark/spark-aura-9.3.3.png" width="900" alt=""></p>
<h3 id="3-3-ç°åœ¨çš„-SparkSQL-çš„ç¼–ç¨‹"><a href="#3-3-ç°åœ¨çš„-SparkSQL-çš„ç¼–ç¨‹" class="headerlink" title="3.3 ç°åœ¨çš„ SparkSQL çš„ç¼–ç¨‹"></a>3.3 ç°åœ¨çš„ SparkSQL çš„ç¼–ç¨‹</h3><p><img src="/images/spark/spark-aura-9.3.4.png" width="850" alt=""></p>
<p><img src="/images/spark/spark-aura-9.3.5.png" width="850" alt=""></p>
<h2 id="4-SparkSQLçš„ç¼–ç¨‹åŸºæœ¬å¥—è·¯"><a href="#4-SparkSQLçš„ç¼–ç¨‹åŸºæœ¬å¥—è·¯" class="headerlink" title="4. SparkSQLçš„ç¼–ç¨‹åŸºæœ¬å¥—è·¯"></a>4. SparkSQLçš„ç¼–ç¨‹åŸºæœ¬å¥—è·¯</h2><p><a href="https://cloud.tencent.com/developer/article/1010936" target="_blank" rel="external">Spark2.xå­¦ä¹ ç¬”è®°ï¼š14ã€Spark SQLç¨‹åºè®¾è®¡</a></p>
<table>
<thead>
<tr>
<th>Steps</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1). åˆ›å»ºSparkSessionå¯¹è±¡</td>
<td>SparkSessionå°è£…äº†Spark SQLæ‰§è¡Œç¯å¢ƒä¿¡æ¯ï¼Œæ˜¯æ‰€æœ‰Spark SQLç¨‹åºå”¯ä¸€çš„å…¥å£ã€‚</td>
</tr>
<tr>
<td>2). åˆ›å»ºDataFrameæˆ–Dataset</td>
<td>Spark SQLæ”¯æŒå¤šç§æ•°æ®æº</td>
</tr>
<tr>
<td>3). åœ¨DataFrameæˆ–Datasetä¹‹ä¸Šè¿›è¡Œè½¬æ¢å’ŒAction</td>
<td>Spark SQLæä¾›äº†å¤šé’Ÿè½¬æ¢å’ŒActionå‡½æ•°</td>
</tr>
<tr>
<td>4). è¿”å›ç»“æœ</td>
<td>ä¿å­˜ç»“æœåˆ°HDFSä¸­ï¼Œæˆ–ç›´æ¥æ‰“å°å‡ºæ¥ ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="4-1-åˆ›å»ºSparkSessionå¯¹è±¡"><a href="#4-1-åˆ›å»ºSparkSessionå¯¹è±¡" class="headerlink" title="4.1 åˆ›å»ºSparkSessionå¯¹è±¡"></a>4.1 åˆ›å»ºSparkSessionå¯¹è±¡</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> spark=<span class="type">SparkSessin</span>.builder</span><br><span class="line">        .master(<span class="string">"local"</span>)</span><br><span class="line">        .appName(<span class="string">"spark session example"</span>)</span><br><span class="line">        .getOrCreate()</span><br></pre></td></tr></table></figure>
<h3 id="4-2-åˆ›å»ºDataFrameæˆ–Dataset"><a href="#4-2-åˆ›å»ºDataFrameæˆ–Dataset" class="headerlink" title="4.2 åˆ›å»ºDataFrameæˆ–Dataset"></a>4.2 åˆ›å»ºDataFrameæˆ–Dataset</h3><p> æä¾›äº†è¯»å†™å„ç§æ ¼å¼æ•°æ®çš„APIï¼ŒåŒ…æ‹¬å¸¸è§çš„JSONï¼ŒJDBCï¼ŒParquetï¼ŒHDFS</p>
<h3 id="4-3-åœ¨DataFrameä¸Šè¿›è¡Œå„ç§æ“ä½œ"><a href="#4-3-åœ¨DataFrameä¸Šè¿›è¡Œå„ç§æ“ä½œ" class="headerlink" title="4.3 åœ¨DataFrameä¸Šè¿›è¡Œå„ç§æ“ä½œ"></a>4.3 åœ¨DataFrameä¸Šè¿›è¡Œå„ç§æ“ä½œ</h3><p><img src="https://ask.qcloudimg.com/http-save/yehe-1147621/1z13o8nh6p.png?imageView2/2/w/1620" alt=""></p>
<blockquote>
<p>FileZilla</p>
<p><a href="https://cloud.tencent.com/developer/article/1010936" target="_blank" rel="external">good å®é™…ä¾‹å­æ¼”ç¤ºï¼š Spark2.xå­¦ä¹ ç¬”è®°ï¼š14ã€Spark SQLç¨‹åºè®¾è®¡</a></p>
</blockquote>
<h2 id="5-DataFrameçš„DSLå’ŒSQLæ“ä½œæ–¹å¼"><a href="#5-DataFrameçš„DSLå’ŒSQLæ“ä½œæ–¹å¼" class="headerlink" title="5. DataFrameçš„DSLå’ŒSQLæ“ä½œæ–¹å¼"></a>5. DataFrameçš„DSLå’ŒSQLæ“ä½œæ–¹å¼</h2><ul>
<li><a href="https://blog.csdn.net/toto1297488504/article/details/74907124" target="_blank" rel="external">DataFrameå¸¸ç”¨æ“ä½œï¼ˆDSLé£æ ¼è¯­æ³•ï¼‰ï¼Œsqlé£æ ¼è¯­æ³•</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1448730" target="_blank" rel="external">Spark SQLé‡ç‚¹çŸ¥è¯†æ€»ç»“</a></li>
</ul>
<h2 id="6-SparkSQL-ç¼–å†™ä»£ç å¤šç§æ–¹å¼"><a href="#6-SparkSQL-ç¼–å†™ä»£ç å¤šç§æ–¹å¼" class="headerlink" title="6. SparkSQL ç¼–å†™ä»£ç å¤šç§æ–¹å¼"></a>6. SparkSQL ç¼–å†™ä»£ç å¤šç§æ–¹å¼</h2><p>æ‘˜è¦ï¼š<br>  (1) sparksql è¿™ä¸ªæ¨¡å—çš„åŸºæœ¬ç†è®ºä»‹ç»<br>  (2) sparksession<br>  (3) rdd, dataframe, dataset<br>  (4) spark çš„åŸºæœ¬ç¼–ç¨‹å¥—è·¯</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="comment">// This code works perfectly from Spark 2.x with Scala 2.11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Import necessary classes</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.&#123;<span class="type">Row</span>, <span class="type">SparkSession</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.types.&#123;<span class="type">DoubleType</span>, <span class="type">StringType</span>, <span class="type">StructField</span>, <span class="type">StructType</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create SparkSession Object, and Here it's spark</span></span><br><span class="line"><span class="keyword">val</span> spark: <span class="type">SparkSession</span> = <span class="type">SparkSession</span>.builder.master(<span class="string">"local"</span>).getOrCreate</span><br><span class="line"><span class="keyword">val</span> sc = spark.sparkContext <span class="comment">// Just used to create test RDDs</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Just used to create test RDDs, Let's an RDD to make it DataFrame</span></span><br><span class="line"><span class="keyword">val</span> rdd = sc.parallelize(</span><br><span class="line">  <span class="type">Seq</span>(</span><br><span class="line">    (<span class="string">"first"</span>, <span class="type">Array</span>(<span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">2.1</span>, <span class="number">5.4</span>)),</span><br><span class="line">    (<span class="string">"test"</span>, <span class="type">Array</span>(<span class="number">1.5</span>, <span class="number">0.5</span>, <span class="number">0.9</span>, <span class="number">3.7</span>)),</span><br><span class="line">    (<span class="string">"choose"</span>, <span class="type">Array</span>(<span class="number">8.0</span>, <span class="number">2.9</span>, <span class="number">9.1</span>, <span class="number">2.5</span>))</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>Method 1:</strong> </p>
<p>Using SparkSession.createDataFrame(RDD obj).</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> dfWithoutSchema = spark.createDataFrame(rdd)</span><br><span class="line"></span><br><span class="line">dfWithoutSchema.show()</span><br><span class="line">+------+--------------------+</span><br><span class="line">|    _1|                  _2|</span><br><span class="line">+------+--------------------+</span><br><span class="line">| first|[<span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">2.1</span>, <span class="number">5.4</span>]|</span><br><span class="line">|  test|[<span class="number">1.5</span>, <span class="number">0.5</span>, <span class="number">0.9</span>, <span class="number">3.7</span>]|</span><br><span class="line">|choose|[<span class="number">8.0</span>, <span class="number">2.9</span>, <span class="number">9.1</span>, <span class="number">2.5</span>]|</span><br><span class="line">+------+--------------------+</span><br></pre></td></tr></table></figure>
<p><strong>Method 2:</strong></p>
<p>Using SparkSession.createDataFrame(RDD obj) and specifying column names.</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> dfWithSchema = spark.createDataFrame(rdd).toDF(<span class="string">"id"</span>, <span class="string">"vals"</span>)</span><br><span class="line"></span><br><span class="line">dfWithSchema.show()</span><br><span class="line">+------+--------------------+</span><br><span class="line">|    id|                vals|</span><br><span class="line">+------+--------------------+</span><br><span class="line">| first|[<span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">2.1</span>, <span class="number">5.4</span>]|</span><br><span class="line">|  test|[<span class="number">1.5</span>, <span class="number">0.5</span>, <span class="number">0.9</span>, <span class="number">3.7</span>]|</span><br><span class="line">|choose|[<span class="number">8.0</span>, <span class="number">2.9</span>, <span class="number">9.1</span>, <span class="number">2.5</span>]|</span><br><span class="line">+------+--------------------+</span><br></pre></td></tr></table></figure>
<p><strong>Method 3 (Actual answer to the question)</strong></p>
<p>This way requires the input rdd should be of type RDD[Row].</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> rowsRdd: <span class="type">RDD</span>[<span class="type">Row</span>] = sc.parallelize(</span><br><span class="line">  <span class="type">Seq</span>(</span><br><span class="line">    <span class="type">Row</span>(<span class="string">"first"</span>, <span class="number">2.0</span>, <span class="number">7.0</span>),</span><br><span class="line">    <span class="type">Row</span>(<span class="string">"second"</span>, <span class="number">3.5</span>, <span class="number">2.5</span>),</span><br><span class="line">    <span class="type">Row</span>(<span class="string">"third"</span>, <span class="number">7.0</span>, <span class="number">5.9</span>)</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>create the schema</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> schema = <span class="keyword">new</span> <span class="type">StructType</span>()</span><br><span class="line">  .add(<span class="type">StructField</span>(<span class="string">"id"</span>, <span class="type">StringType</span>, <span class="literal">true</span>))</span><br><span class="line">  .add(<span class="type">StructField</span>(<span class="string">"val1"</span>, <span class="type">DoubleType</span>, <span class="literal">true</span>))</span><br><span class="line">  .add(<span class="type">StructField</span>(<span class="string">"val2"</span>, <span class="type">DoubleType</span>, <span class="literal">true</span>))</span><br></pre></td></tr></table></figure>
<p>Now apply both rowsRdd and schema to createDataFrame()</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> df = spark.createDataFrame(rowsRdd, schema)</span><br><span class="line"></span><br><span class="line">df.show()</span><br><span class="line">+------+----+----+</span><br><span class="line">|    id|val1|val2|</span><br><span class="line">+------+----+----+</span><br><span class="line">| first| <span class="number">2.0</span>| <span class="number">7.0</span>|</span><br><span class="line">|second| <span class="number">3.5</span>| <span class="number">2.5</span>|</span><br><span class="line">| third| <span class="number">7.0</span>| <span class="number">5.9</span>|</span><br><span class="line">+------+----+----+</span><br></pre></td></tr></table></figure>
<p>Assuming your RDD[row] is called rdd, you can use:</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> sqlContext = <span class="keyword">new</span> <span class="type">SQLContext</span>(sc) </span><br><span class="line"><span class="keyword">import</span> sqlContext.implicits._</span><br><span class="line">rdd.toDF()</span><br></pre></td></tr></table></figure>
<p><a href="http://spark.apache.org/docs/latest/submitting-applications.html" target="_blank" rel="external">Submitting Applications</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">spark-submit \</span><br><span class="line">--class com.aura.sparksql.StructTypeDFTest \</span><br><span class="line">--master spark://hadoop02:7077 \</span><br><span class="line">--driver-memory 512M \</span><br><span class="line">--executor-memory 512M \</span><br><span class="line">--total-executor-cores 2 \</span><br><span class="line">/home/hadoop/original-spark232_1805-1.0-SNAPSHOT.jar \</span><br><span class="line">/student_sql_out/</span><br></pre></td></tr></table></figure>
<p>å‹ç¼©æ ¼å¼ï¼š .snappy<br>æ–‡ä»¶æ ¼å¼ï¼š .parquet - ç»“æœä½¿ç”¨ä¸€ç§åˆ—å¼æ–‡ä»¶å­˜å‚¨æ ¼å¼ä¿å­˜</p>
<blockquote>
<p>   parquetï¼Œ rcï¼Œ </p>
</blockquote>
<p><strong>SparkCore ç¼–ç¨‹å¥—è·¯:</strong></p>
<ol>
<li>è·å–ç¼–ç¨‹å…¥å£</li>
<li>é€šè¿‡ç¼–ç¨‹å…¥å£åŠ è½½æ•°æ®è·å¾—æ•°æ®æŠ½è±¡ RDD</li>
<li>å¯¹ RDD è¿›è¡Œå„ç§å¤„ç† (Transformation å’Œ Action)ï¼š è®¡ç®—</li>
<li>å¯¹ç»“æœæ•°æ®è¿›è¡Œå¤„ç†ï¼š saveAsTextFile</li>
<li>å…³é—­ç¨‹åºå…¥å£</li>
</ol>
<p>spark çš„ä»»åŠ¡æ‰§è¡Œæµç¨‹</p>
<p>Hive çš„å¯è§†åŒ–å·¥å…·ï¼š<strong>DBeaver</strong></p>
<h2 id="7-SparkSQL-çš„æ•°æ®æºæ“ä½œ"><a href="#7-SparkSQL-çš„æ•°æ®æºæ“ä½œ" class="headerlink" title="7. SparkSQL çš„æ•°æ®æºæ“ä½œ"></a>7. SparkSQL çš„æ•°æ®æºæ“ä½œ</h2><p>æ‘˜è¦ï¼š</p>
<p>(1). sparksql çš„åŸºç¡€ç†è®º<br>(2). sparksql çš„æ ¸å¿ƒç¼–ç¨‹å…¥å£ sparksession<br>(3). sparksql çš„æ ¸å¿ƒæ•°æ®æŠ½è±¡ dataFrame dataset<br>(4). sparksql çš„ç¼–ç¨‹å¥—è·¯</p>
<p>  spark-shell<br>  spark-submit</p>
<p>sparksqlçš„é‡ç‚¹ï¼š åˆ›å»º dataFrame çš„å‡ ç§æ–¹å¼</p>
<p>  spark1.xï¼š</p>
<pre><code>studentRDD.toDF
sqlContext.createDataFrame(studentRDD)
sqlContext.createDataFrame(rowRDD, schema)
</code></pre><p>  spark2.xï¼š</p>
<pre><code>spark.read.format().load()
</code></pre><p>æ•°æ®æºï¼š</p>
<pre><code>æ”¯æŒçš„æ•°æ®æ ¼å¼ï¼š csv, json, parquet, jdbc
load
save
</code></pre><h3 id="7-1-Spark-SQL-Guide"><a href="#7-1-Spark-SQL-Guide" class="headerlink" title="7.1 Spark SQL Guide"></a>7.1 <a href="http://spark.apache.org/docs/latest/sql-data-sources-load-save-functions.html" target="_blank" rel="external">Spark SQL Guide</a></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = spark.read.load(<span class="string">"examples/src/main/resources/users.parquet"</span>)</span><br><span class="line">df.select(<span class="string">"name"</span>, <span class="string">"favorite_color"</span>).write.save(<span class="string">"namesAndFavColors.parquet"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># parquet file é»˜è®¤æ˜¯è¿™ç§æ–‡ä»¶æ–¹å¼ load</span></span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¸ªğŸŒ°: spark å®‰è£…è·¯å¾„ examples/src/main/resources :</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># /usr/local/xsoft/spark/examples/src/main/resources [23:06:36]</span></span><br><span class="line">âœ ll</span><br><span class="line">total 88</span><br><span class="line">drwxr-xr-x@ 5 blair  staff   160B Jun  6 21:34 dir1</span><br><span class="line">-rw-r--r--@ 1 blair  staff   130B Jun  6 21:34 employees.json</span><br><span class="line">-rw-r--r--@ 1 blair  staff   240B Jun  6 21:34 full_user.avsc</span><br><span class="line">-rw-r--r--@ 1 blair  staff   5.7K Jun  6 21:34 kv1.txt</span><br><span class="line">-rw-r--r--@ 1 blair  staff    49B Jun  6 21:34 people.csv</span><br><span class="line">-rw-r--r--@ 1 blair  staff    73B Jun  6 21:34 people.json</span><br><span class="line">-rw-r--r--@ 1 blair  staff    32B Jun  6 21:34 people.txt</span><br><span class="line">-rw-r--r--@ 1 blair  staff   185B Jun  6 21:34 user.avsc</span><br><span class="line">-rw-r--r--@ 1 blair  staff   334B Jun  6 21:34 users.avro</span><br><span class="line">-rw-r--r--@ 1 blair  staff   547B Jun  6 21:34 users.orc</span><br><span class="line">-rw-r--r--@ 1 blair  staff   615B Jun  6 21:34 users.parquet</span><br></pre></td></tr></table></figure>
<h3 id="7-2-hadoop-cmd"><a href="#7-2-hadoop-cmd" class="headerlink" title="7.2 hadoop cmd"></a>7.2 hadoop cmd</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hadoop fs -mkdir -p /sparksql/input/</span><br><span class="line">hadoop fs -put people.txt people.csv people.json /sparksql/input/</span><br></pre></td></tr></table></figure>
<h3 id="7-3-to-load-a-csv-file"><a href="#7-3-to-load-a-csv-file" class="headerlink" title="7.3 to load a csv file"></a>7.3 to load a csv file</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = spark.read.load(<span class="string">"examples/src/main/resources/people.csv"</span>,</span><br><span class="line">                     format=<span class="string">"csv"</span>, sep=<span class="string">":"</span>, inferSchema=<span class="string">"true"</span>, header=<span class="string">"true"</span>)</span><br></pre></td></tr></table></figure>
<p>To load a parquet / json file ï¼Œ <a href="http://spark.apache.org/docs/latest/sql-data-sources-load-save-functions.html#save-modes" target="_blank" rel="external">write Save Modes</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = spark.read.load(<span class="string">"examples/src/main/resources/people.json"</span>, format=<span class="string">"json"</span>)</span><br><span class="line">df.select(<span class="string">"name"</span>, <span class="string">"age"</span>).write.save(<span class="string">"namesAndAges.parquet"</span>, format=<span class="string">"parquet"</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ä¿å­˜æ•°æ®åˆ° HDFS çš„æ•°æ®æ ¼å¼ï¼š .snappy.parquet</p>
<p>.snappyï¼š ç»“æœä¿å­˜åˆ° HDFS ä¸Šçš„æ—¶å€™è‡ªåŠ¨å‹ç¼©ï¼š å‹ç¼©ç®—æ³•ï¼š snappy</p>
<p>  zip / 7z / lzo / gzip / snappy</p>
<p>.parquetï¼š ç»“æœä½¿ç”¨ä¸€ç§åˆ—å¼æ–‡ä»¶å­˜å‚¨æ ¼å¼ä¿å­˜</p>
<p>  parquet / rc / orc / row column</p>
</blockquote>
<h3 id="7-4-JDBC"><a href="#7-4-JDBC" class="headerlink" title="7.4 JDBC"></a>7.4 JDBC</h3><p><img src="/images/spark/sparkSql-aura-9.1.1.jpg" width="800" alt=""></p>
<p><img src="/images/spark/sparkSql-aura-9.1.2.jpg" width="800" alt="Jdbc mysql scala"></p>
<p><a href="http://spark.apache.org/docs/latest/sql-data-sources-jdbc.html" target="_blank" rel="external">JDBC To Other Databases</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Note: JDBC loading and saving can be achieved via either the load/save or jdbc methods</span></span><br><span class="line"><span class="comment"># Loading data from a JDBC source</span></span><br><span class="line">jdbcDF = spark.read \</span><br><span class="line">    .format(<span class="string">"jdbc"</span>) \</span><br><span class="line">    .option(<span class="string">"url"</span>, <span class="string">"jdbc:postgresql:dbserver"</span>) \</span><br><span class="line">    .option(<span class="string">"dbtable"</span>, <span class="string">"schema.tablename"</span>) \</span><br><span class="line">    .option(<span class="string">"user"</span>, <span class="string">"username"</span>) \</span><br><span class="line">    .option(<span class="string">"password"</span>, <span class="string">"password"</span>) \</span><br><span class="line">    .load()</span><br></pre></td></tr></table></figure>
<p>Run SQL on files directly</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df = spark.sql(<span class="string">"SELECT * FROM parquet.`examples/src/main/resources/users.parquet`"</span>)</span><br></pre></td></tr></table></figure>
<p><strong>åˆ›å»º dataFrame çš„3ç§æ–¹å¼</strong></p>
<p>val studentRDD: RDD[Student]</p>
<blockquote>
<ol>
<li>studentRDD.toDF</li>
<li>sqlContext.createDtaFrame(studentRDD)</li>
<li>é€šè¿‡ StructType æ¥æŒ‡å®š Schema</li>
<li>spark.read.format(â€œjsonâ€).load(â€œpathâ€) ï¼ˆæ ¼å¼åŒ–çš„æ•°æ®ï¼‰</li>
</ol>
</blockquote>
<h3 id="7-5-Spark-SQL-Guide"><a href="#7-5-Spark-SQL-Guide" class="headerlink" title="7.5 Spark SQL Guide"></a><a href="http://spark.apache.org/docs/latest/sql-getting-started.html" target="_blank" rel="external">7.5 Spark SQL Guide</a></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> SparkSession</span><br><span class="line"></span><br><span class="line">spark = SparkSession \</span><br><span class="line">    .builder \</span><br><span class="line">    .appName(<span class="string">"Python Spark SQL basic example"</span>) \</span><br><span class="line">    .config(<span class="string">"spark.some.config.option"</span>, <span class="string">"some-value"</span>) \</span><br><span class="line">    .getOrCreate()</span><br></pre></td></tr></table></figure>
<p><strong>Creating DataFrames</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># spark is an existing SparkSession</span></span><br><span class="line">df = spark.read.json(<span class="string">"examples/src/main/resources/people.json"</span>)</span><br><span class="line"><span class="comment"># Displays the content of the DataFrame to stdout</span></span><br><span class="line">df.show()</span><br><span class="line"><span class="comment"># +----+-------+</span></span><br><span class="line"><span class="comment"># | age|   name|</span></span><br><span class="line"><span class="comment"># +----+-------+</span></span><br><span class="line"><span class="comment"># |null|Michael|</span></span><br><span class="line"><span class="comment"># |  30|   Andy|</span></span><br><span class="line"><span class="comment"># |  19| Justin|</span></span><br><span class="line"><span class="comment"># +----+-------+</span></span><br></pre></td></tr></table></figure>
<h2 id="8-SparkSQL-åŸºç¡€å†…å®¹å¤ä¹ "><a href="#8-SparkSQL-åŸºç¡€å†…å®¹å¤ä¹ " class="headerlink" title="8. SparkSQL åŸºç¡€å†…å®¹å¤ä¹ "></a>8. SparkSQL åŸºç¡€å†…å®¹å¤ä¹ </h2><p><strong>8.1 sparksql åŸºç¡€ç†è®º</strong></p>
<ol>
<li>å‘å±•è¶‹åŠ¿</li>
<li>SQL</li>
<li>Stream</li>
</ol>
<p><strong>8.2 ç¼–ç¨‹å…¥å£ SparkSession</strong></p>
<p><strong>8.3 æ•°æ®æŠ½è±¡DataFrame DataSet</strong></p>
<p><strong>8.4 sparksql ç¼–ç¨‹å¥—è·¯</strong></p>
<p>  spark-shell<br>  spark-submit</p>
<p>  sparksqlçš„é‡ç‚¹ï¼šåˆ›å»º dataFrame çš„å‡ ç§æ–¹å¼<br>  spark1.x:</p>
<pre><code>studentRDD.toDF
sqlContext.createDataFrame(studentRDD)
sqlContext.createDataFrame(rowRDD, schema)

val schema: StructType = StructType(
        StructField(&quot;id&quot;, IntegerType, false)
        ...
)
</code></pre><p>  spark2.x:</p>
<pre><code>spark.read.format().load()
</code></pre><p><strong>8.5 æ•°æ®æº</strong></p>
<p>æ”¯æŒçš„æ•°æ®æ ¼å¼ï¼š csv, json, parquet, jdbc</p>
<blockquote>
<p>load<br>save<br>mode: ignore, append, overwrite, error, â€¦</p>
</blockquote>
<p>studentDF.write.format(â€œjsonâ€).mode().save()</p>
<blockquote>
<p>mapreduce hive<br>sparkcore sparksql</p>
<p>kafka<br>spark</p>
<p>stream + sql + å†…å­˜, æ•´åˆçš„å¹³å°ï¼š å°†æ¥çš„è¶‹åŠ¿</p>
</blockquote>
<p>sparkcore: </p>
<pre><code>æœ€åº•å±‚çš„æ ¸å¿ƒæ‰§è¡Œå¼•æ“
è®¾è®¡æ€è·¯ï¼šåŸºäºæ‰¹å¤„ç†, ç¦»çº¿å¤„ç†
åŸºäºå†…å­˜
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://spark-reference-doc-cn.readthedocs.io/zh_CN/latest/programming-guide/sql-guide.html" target="_blank" rel="external">Spark SQL, DataFrame å’Œ Dataset ç¼–ç¨‹æŒ‡å—</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1010936" target="_blank" rel="external">Spark2.xå­¦ä¹ ç¬”è®°ï¼š14ã€Spark SQLç¨‹åºè®¾è®¡</a></li>
<li><a href="https://blog.csdn.net/qq_41851454/category_7640711.html" target="_blank" rel="external">SparkSQLå­¦ä¹  1 2 3</a></li>
<li><a href="https://tech.youzan.com/sparksql-in-youzan-2/" target="_blank" rel="external">SparkSQLåœ¨æœ‰èµå¤§æ•°æ®çš„å®è·µï¼ˆäºŒï¼‰</a></li>
<li><a href="https://stackoverflow.com/questions/29383578/how-to-convert-rdd-object-to-dataframe-in-spark" target="_blank" rel="external">How to convert rdd object to dataframe in spark</a></li>
<li><a href="https://study.163.com/course/courseLearn.htm?courseId=1208880821#/learn/video?lessonId=1278316678&amp;courseId=1208880821" target="_blank" rel="external">äº‘è¯¾å ‚ SparkSQL çš„æ•°æ®æºæ“ä½œ</a></li>
<li><a href="https://blog.csdn.net/huang66666666/category_9399107.html" target="_blank" rel="external">å¤§æ•°æ®èµ„æ–™ç¬”è®°æ•´ç†</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Summary 20 Array]]></title>
      <url>http://shopee.ai/2020/08/24/leetcode/summary_array/</url>
      <content type="html"><![CDATA[<p><img src="/images/icpc/Array-In-C.png" width="550"></p>
<a id="more"></a>
<p><a href="https://zhuanlan.zhihu.com/p/56801641" target="_blank" rel="external">é¢ˆæ¤ç—…è‡ªæµ‹æ–¹æ³•ï¼Œä½ ç¦»é¢ˆæ¤ç—…å…¶å®ä¸è¿œ</a></p>
<p><strong>1.1 Easy</strong></p>
<blockquote>
<ol>
<li>reverseLeftWordsï¼Œ âœ”ï¸</li>
<li><del>replaceSpace</del>ï¼Œ âœ”ï¸</li>
<li><del>äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</del> ï¼Œ âœ”ï¸</li>
<li><del>printNumbers 1~n ï¼ˆå‰‘æŒ‡ Offer 17.ï¼‰</del> ï¼Œ âœ”ï¸</li>
<li><a href="https://leetcode-cn.com/problems/fan-zhuan-lian-biao-lcof/" target="_blank" rel="external">reverseLinkedList</a></li>
<li><a href="https://leetcode-cn.com/problems/he-bing-liang-ge-pai-xu-de-lian-biao-lcof/" target="_blank" rel="external">mergeTwoLists</a></li>
<li><a href="https://leetcode-cn.com/problems/er-jin-zhi-zhong-1de-ge-shu-lcof/" target="_blank" rel="external">äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°</a></li>
<li><a href="https://leetcode-cn.com/problems/he-wei-sde-lian-xu-zheng-shu-xu-lie-lcof/" target="_blank" rel="external">findContinuousSequence</a> ï¼Œ æ»‘åŠ¨window, åŒæŒ‡é’ˆ âœ”ï¸</li>
<li><del>è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢ while while</del> nums[i], nums[j] = nums[j], nums[i]ï¼Œ âœ”ï¸</li>
<li><strong>åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—</strong> f(n, m) = (m % n + x) % n = (m + x) % n</li>
<li>å‰‘æŒ‡ Offer 50. ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ ï¼Œ py 3.6 æœ‰åº</li>
<li>å‰‘æŒ‡ Offer 61. æ‰‘å…‹ç‰Œä¸­çš„é¡ºå­</li>
</ol>
</blockquote>
<h3 id="batch-2-easy"><a href="#batch-2-easy" class="headerlink" title="batch 2 easy"></a>batch 2 easy</h3><ol>
<li><a href="https://leetcode-cn.com/problems/xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-lcof/" target="_blank" rel="external">å‰‘æŒ‡ Offer 11. æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—</a></li>
</ol>
<blockquote>
<ol>
<li><a href="https://leetcode-cn.com/problems/zai-pai-xu-shu-zu-zhong-cha-zhao-shu-zi-lcof/" target="_blank" rel="external">åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­— Iï¼ˆå‰‘æŒ‡ Offer 53 - Iï¼‰</a>,   æ‰¾åˆ°å³é¢çš„æ’å…¥ä½ç½®ï¼Œ âœ”ï¸</li>
<li><p><code>æ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ </code> while(low &lt; high) { if(a[m] &gt; a[high]) min[m+1,high], else [low,m]} âœ”ï¸ </p>
</li>
<li><p><del>æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ¬¡æ•°</del>  ï¼Œ âœ”ï¸</p>
</li>
<li><del><strong>ä¸‘æ•°</strong>, dp åªåŒ…å«è´¨å› å­2ã€3å’Œ5çš„æ•°ç§°ä½œä¸‘æ•°, 1, 2, 3, 5, 6, â€¦</del> ï¼Œ âœ”ï¸</li>
<li><del>å’Œä¸ºSçš„ä¸¤ä¸ªæ•°å­—(åŒæŒ‡é’ˆæ€æƒ³)</del> ï¼Œ âœ”ï¸</li>
<li><a href="https://leetcode-cn.com/problems/bu-ke-pai-zhong-de-shun-zi-lcof/" target="_blank" rel="external">æ‰‘å…‹ç‰Œé¡ºå­</a> <a href="https://leetcode-cn.com/problems/bu-ke-pai-zhong-de-shun-zi-lcof/solution/mian-shi-ti-61-bu-ke-pai-zhong-de-shun-zi-ji-he-se/" target="_blank" rel="external">Answer: (æ’åºåï¼Œç»Ÿè®¡å¤§å°ç‹æ•°é‡ + é—´éš”)</a>ï¼Œ âœ”ï¸</li>
<li>æ„å»ºä¹˜ç§¯æ•°ç»„ (Aæ•°ç»„ï¼Œä»å‰å‘åï¼Œå†ä»åå‘å‰j-2,æ„é€  B)ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<p><strong>1.2 medium</strong></p>
<blockquote>
<ol>
<li><strong><code>å…«çš‡å</code></strong>ï¼Œ void dfs(int n) for(int i = 0; i &lt; 8; i++) { pos[n] = i; ï¼Œ âœ”ï¸</li>
<li>[å’ŒSè¿ç»­æ­£æ•°åº][S1] (3funï¼Œmid = (1+sum)/2; while(start&lt;mid), Sum(int start, int end), åŒvector)ï¼Œ âœ”ï¸</li>
<li>çº¦ç‘Ÿå¤«ç¯ LinkedList; (index = (index + m) %link.size();link.remove(index--);) link.get(0); ï¼Œ âœ”ï¸</li>
<li><a href="https://www.weiweiblog.cn/printminnumber/" target="_blank" rel="external">æ•°ç»„æ’æˆæœ€å°çš„æ•°</a> Arrays.sort(str, new Comparator<string>(){ public int compare(String s1, String s2)ï¼Œâœ”ï¸</string></li>
<li><del>æ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</del> , åˆ’åˆ†2æ•°ç»„ï¼Œnum &amp; (-num);äºŒè€…ä¸åå¾—åˆ°çš„æ•°ï¼Œå°†numæœ€å³è¾¹çš„1ä¿ç•™ä¸‹æ¥ï¼Œâœ”ï¸</li>
</ol>
</blockquote>
<p><strong>1.3 important</strong></p>
<blockquote>
<ol>
<li>æ•°ç»„ä¸­çš„é€†åºå¯¹(å½’å¹¶æ’åº).  void mergeSort(int a[], int l, int r) ï¼Œ âœ”ï¸</li>
<li>æœ€å°çš„Kä¸ªæ•°(å †æ’åº)ï¼Œ <a href="https://www.weiweiblog.cn/getmedian/" target="_blank" rel="external">æ•°æ®æµä¸­çš„ä¸­ä½æ•° ï¼ˆ2 PriorityQueueï¼‰</a>.   </li>
<li><strong>æœ€å°çš„Kä¸ªæ•°</strong> ï¼ˆ2funï¼‰å¿«æ’æ€æƒ³ part return l, å¤–else return left; void set_k(int* input, n, k) ï¼Œ âœ”ï¸</li>
<li><strong>quickSort</strong>(a[],left,right), while(1) { (åŒwhile, if(l &gt;= r) break; swap) } swap(a[left], a[l]);ï¼Œ âœ”ï¸</li>
<li><a href="https://www.cnblogs.com/biyeymyhjob/archive/2012/07/31/2615833.html" target="_blank" rel="external">æœ€çŸ­è·¯Floyd</a>ï¼Œ âœ”ï¸</li>
</ol>
<p>quickSort (1 while + [2while + break + swap] + swap + 2 quickSort)</p>
<p>mergeSort (2 mergeSort + new *arr + 3 while + 1 for)</p>
</blockquote>
<h2 id="1-Easy-Array"><a href="#1-Easy-Array" class="headerlink" title="1. Easy Array"></a>1. Easy Array</h2><h3 id="1-1-äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾"><a href="#1-1-äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾" class="headerlink" title="1.1 äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾"></a>1.1 äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</h3><p><img src="/images/leetcode/array-1.png" width="500" alt="Array -> Tree"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findNumberIn2DArray</span><span class="params">(self, matrix: List[List[int]], target: int)</span> -&gt; bool:</span></span><br><span class="line">        i, j = len(matrix) - <span class="number">1</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &gt;= <span class="number">0</span> <span class="keyword">and</span> j &lt; len(matrix[<span class="number">0</span>]):</span><br><span class="line">            <span class="keyword">if</span> matrix[i][j] &gt; target: i -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> matrix[i][j] &lt; target: j += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>: <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­—-I"><a href="#1-2-åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­—-I" class="headerlink" title="1.2 åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­— I, //"></a>1.2 åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­— I, //</h3><p>1 2 2 2 2 2 10 100</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(self, nums: [int], target: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(tar)</span>:</span></span><br><span class="line">            i, j = <span class="number">0</span>, len(nums) - <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> i &lt;= j:</span><br><span class="line">                m = (i + j) // <span class="number">2</span></span><br><span class="line">                <span class="keyword">if</span> nums[m] &lt;= tar: i = m + <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>: j = m - <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line">        <span class="keyword">return</span> helper(target) - helper(target - <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ¬è´¨ä¸Šçœ‹ï¼Œ helper() å‡½æ•°æ—¨åœ¨æŸ¥æ‰¾æ•°å­— tar åœ¨æ•°ç»„ nums ä¸­çš„ æ’å…¥ç‚¹ ï¼Œä¸”è‹¥æ•°ç»„ä¸­å­˜åœ¨å€¼ç›¸åŒçš„å…ƒç´ ï¼Œåˆ™æ’å…¥åˆ°è¿™äº›å…ƒç´ çš„å³è¾¹ã€‚</p>
</blockquote>
<h3 id="1-3-æ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ "><a href="#1-3-æ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ " class="headerlink" title="1.3 æ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ "></a>1.3 æ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ </h3><p><a href="https://leetcode-cn.com/problems/xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-lcof/solution/xuan-zhuan-shu-zu-de-zui-xiao-shu-zi-by-leetcode-s/" target="_blank" rel="external">é¢˜è§£</a></p>
<p>è¾“å…¥ï¼š[8,9,10,1,2,3,4,5,6,7]<br>è¾“å‡ºï¼š1</p>
<p><img src="https://assets.leetcode-cn.com/solution-static/jianzhi_11/1.png" width="800"></p>
<p><img src="https://assets.leetcode-cn.com/solution-static/jianzhi_11/2.png" width="800"></p>
<p><img src="https://assets.leetcode-cn.com/solution-static/jianzhi_11/3.png" width="800"></p>
<p><img src="https://assets.leetcode-cn.com/solution-static/jianzhi_11/4.png" width="800"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minArray</span><span class="params">(self, numbers: List[int])</span> -&gt; int:</span></span><br><span class="line">        low, high = <span class="number">0</span>, len(numbers) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> low &lt; high:</span><br><span class="line">            pivot = (low + high) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> numbers[pivot] &lt; numbers[high]:</span><br><span class="line">                high = pivot </span><br><span class="line">            <span class="keyword">elif</span> numbers[pivot] &gt; numbers[high]:</span><br><span class="line">                low = pivot + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                high -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> numbers[low]</span><br></pre></td></tr></table></figure>
<p>è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶æ•°å‰é¢ while while</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">exchange</span><span class="params">(self, nums: List[int])</span> -&gt; List[int]:</span></span><br><span class="line">        i, j = <span class="number">0</span>, len(nums) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; j:</span><br><span class="line">            <span class="keyword">while</span> i &lt; j <span class="keyword">and</span> nums[i] &amp; <span class="number">1</span> == <span class="number">1</span>: i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> i &lt; j <span class="keyword">and</span> nums[j] &amp; <span class="number">1</span> == <span class="number">0</span>: j -= <span class="number">1</span></span><br><span class="line">            nums[i], nums[j] = nums[j], nums[i]</span><br><span class="line">        <span class="keyword">return</span> nums</span><br></pre></td></tr></table></figure>
<h3 id="1-4-ä¸‘æ•°"><a href="#1-4-ä¸‘æ•°" class="headerlink" title="1.4 ä¸‘æ•°"></a>1.4 ä¸‘æ•°</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nthUglyNumber</span><span class="params">(self, n: int)</span> -&gt; int:</span></span><br><span class="line">        dp, a, b, c = [<span class="number">1</span>] * n, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">            n2, n3, n5 = dp[a] * <span class="number">2</span>, dp[b] * <span class="number">3</span>, dp[c] * <span class="number">5</span></span><br><span class="line">            dp[i] = min(n2, n3, n5)</span><br><span class="line">            <span class="keyword">if</span> dp[i] == n2: a += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> dp[i] == n3: b += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> dp[i] == n5: c += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> dp[<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<h3 id="1-5-æ‰‘å…‹ç‰Œçš„é¡ºå­ï¼Œ-æ’åº-éå†"><a href="#1-5-æ‰‘å…‹ç‰Œçš„é¡ºå­ï¼Œ-æ’åº-éå†" class="headerlink" title="1.5 æ‰‘å…‹ç‰Œçš„é¡ºå­ï¼Œ æ’åº+éå†"></a>1.5 æ‰‘å…‹ç‰Œçš„é¡ºå­ï¼Œ æ’åº+éå†</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isStraight</span><span class="params">(self, nums: List[int])</span> -&gt; bool:</span></span><br><span class="line">        joker = <span class="number">0</span></span><br><span class="line">        nums.sort() <span class="comment"># æ•°ç»„æ’åº</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">            <span class="keyword">if</span> nums[i] == <span class="number">0</span>: joker += <span class="number">1</span> <span class="comment"># ç»Ÿè®¡å¤§å°ç‹æ•°é‡</span></span><br><span class="line">            <span class="keyword">elif</span> nums[i] == nums[i + <span class="number">1</span>]: <span class="keyword">return</span> <span class="keyword">False</span> <span class="comment"># è‹¥æœ‰é‡å¤ï¼Œæå‰è¿”å› false</span></span><br><span class="line">        <span class="keyword">return</span> nums[<span class="number">4</span>] - nums[joker] &lt; <span class="number">5</span> <span class="comment"># æœ€å¤§ç‰Œ - æœ€å°ç‰Œ &lt; 5 åˆ™å¯æ„æˆé¡ºå­</span></span><br></pre></td></tr></table></figure>
<h2 id="2-Medium"><a href="#2-Medium" class="headerlink" title="2. Medium"></a>2. Medium</h2><p>1.1 å…«çš‡å</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"><span class="keyword">int</span> pos[N];</span><br><span class="line"><span class="keyword">int</span> num = <span class="number">8</span>, cnt = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ok</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(pos[i] == pos[n]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">abs</span>(pos[n] - pos[i]) == n-i) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == num) &#123;</span><br><span class="line">        cnt++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">        pos[n] = i;</span><br><span class="line">        <span class="keyword">if</span>(ok(n)) &#123;</span><br><span class="line">            dfs(n+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    res = dfs(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.4 æ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(left &lt; right) &#123; <span class="comment">// exit. good idea!</span></span><br><span class="line">        <span class="keyword">int</span> l = left, r = right, x = a[l];</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; a[r] &gt;= x) r--;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; a[l] &lt;= x) l++;</span><br><span class="line">            <span class="keyword">if</span>(l &gt;= r) <span class="keyword">break</span>;</span><br><span class="line">            swap(a[r], a[l]);</span><br><span class="line">        &#125;</span><br><span class="line">        swap(a[left], a[l]);</span><br><span class="line">        quickSort(a, left, l<span class="number">-1</span>);</span><br><span class="line">        quickSort(a, l+<span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.5 è°ƒæ•´æ•°ç»„ä½æ•°ä½¿å¥‡æ•°ä½äºå‰é¢</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reorderOddEven</span><span class="params">(<span class="keyword">int</span>[] arr, len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr == <span class="literal">NULL</span> || len &lt;= <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, r = len - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r &amp;&amp; arr[r] % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            r--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r &amp;&amp; arr[l] % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            l++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (l &lt; r) &#123;</span><br><span class="line">            swap(arr[l], arr[r]);</span><br><span class="line">            l++, r--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.6 å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ¬¡æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">core</span><span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr == <span class="literal">NULL</span> || len &lt;= <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> target = a[<span class="number">0</span>], cnt = <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == target) &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            cnt--;</span><br><span class="line">            <span class="keyword">if</span> (cnt == <span class="number">0</span>) &#123;</span><br><span class="line">                target = a[i];</span><br><span class="line">                cnt = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.7 æœ€å°çš„Kä¸ªæ•°  part å¿«æ’æ€æƒ³</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"><span class="keyword">int</span> a[N] = &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">8</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">part</span> <span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(left &lt; right) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">int</span> x = a[<span class="number">0</span>], l = left, r = right;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; a[r] &gt;= x) r--;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; a[l] &lt;= x) l++;</span><br><span class="line">            <span class="keyword">if</span>(l &gt;= r) <span class="keyword">break</span>;</span><br><span class="line">            swap(a[l], a[r]);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        swap(x, a[l]);</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_k</span><span class="params">(<span class="keyword">int</span> *input, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">if</span>(input == <span class="literal">NULL</span> || k &gt; n || k &lt;= <span class="number">0</span> || n &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> start = <span class="number">0</span>, end = n - <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> index = part(input, start, end);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(index != k<span class="number">-1</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(index &gt; k<span class="number">-1</span>) &#123;</span><br><span class="line">            end = index - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(index &lt; k - <span class="number">1</span>) &#123;</span><br><span class="line">            start = index + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        index = part(input, start, end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.8 æ•°ç»„ä¸­çš„é€†åºå¯¹ &amp; å½’å¹¶æ’åº</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123; <span class="comment">//  8, 5, 4, 9, 2, 3, 6</span></span><br><span class="line">    <span class="keyword">if</span>(l &gt;= r) <span class="keyword">return</span>;   <span class="comment">// exit.</span></span><br><span class="line">    <span class="keyword">int</span> mid = (l+r) / <span class="number">2</span>; <span class="comment">// overflow  &lt;-&gt;  l + (r-l)/2</span></span><br><span class="line">    mergeSort(a, l, mid);</span><br><span class="line">    mergeSort(a, mid+<span class="number">1</span>, r);  </span><br><span class="line">    <span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[r-l+<span class="number">1</span>];  </span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i = l, j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= mid &amp;&amp; j &lt;= r) &#123;  </span><br><span class="line">        <span class="keyword">if</span>(a[i] &lt;= a[j]) &#123;</span><br><span class="line">            arr[k++] = a[i++]; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[k++] = a[j++]; <span class="comment">// ans += (mid-i+1);  </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= mid) arr[k++] = a[i++];</span><br><span class="line">    <span class="keyword">while</span>(j &lt;= r) arr[k++] = a[j++];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        a[i] = arr[i-l];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> []arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.15 çº¦ç‘Ÿå¤«ç¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">LastRemaining_Solution</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n &lt; <span class="number">1</span> || m &lt; <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        LinkedList&lt;Integer&gt; link = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            link.add(i);</span><br><span class="line">        <span class="keyword">int</span> index = -<span class="number">1</span>;   <span class="comment">//èµ·æ­¥æ˜¯ -1 ä¸æ˜¯ 0</span></span><br><span class="line">        <span class="keyword">while</span>(link.size() &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            index = (index + m) % link.size();  <span class="comment">//å¯¹ linkçš„é•¿åº¦æ±‚ä½™ä¸æ˜¯å¯¹ n</span></span><br><span class="line">            link.remove(index);</span><br><span class="line">            index --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> link.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.17 æ’åºæ•°ç»„ä¸­æŸæ•°å­—å‡ºç°çš„æ¬¡æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bina</span><span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> len, <span class="keyword">int</span> data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a == <span class="literal">NULL</span> || len &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, r = len - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l &lt;= r) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(a[mid] == data) <span class="keyword">return</span> mid;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(data &lt; a[mid]) &#123;</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> l = mid+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://leetcode-cn.com/interview" target="_blank" rel="external">leetcode CN</a></li>
<li><a href="https://leetcode.com/problemset/all/" target="_blank" rel="external">leetcode EN</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/qq_24243877" target="_blank" rel="external">æˆé•¿ä¹‹è·¯ 0607offer</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/35707293" target="_blank" rel="external">çŸ¥ä¹ï¼š [Leetcode][åŠ¨æ€è§„åˆ’]ç›¸å…³é¢˜ç›®æ±‡æ€»/åˆ†æ/æ€»ç»“</a></li>
<li><a href="https://www.jianshu.com/p/af880bbba792" target="_blank" rel="external">ç®€ä¹¦ï¼š 2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“åŠ¨æ€è§„åˆ’(Dynamic Programming)</a></li>
<li><a href="https://blog.csdn.net/EbowTang/article/details/50791500" target="_blank" rel="external">CSDN leetcode DP</a></li>
<li><a href="https://blog.csdn.net/fuxuemingzhu/article/details/105183554" target="_blank" rel="external">åˆ·å®Œ700å¤šé¢˜åçš„é¦–æ¬¡æ€»ç»“ï¼šLeetCodeåº”è¯¥æ€ä¹ˆåˆ·ï¼Ÿ</a></li>
<li><a href="https://www.cnblogs.com/kubidemanong/p/10996134.html" target="_blank" rel="external">å°ç™½ä¸€è·¯èµ°æ¥ï¼Œè¿ç»­åˆ·é¢˜ä¸‰å¹´ï¼Œè°ˆè°ˆæˆ‘çš„ç®—æ³•å­¦ä¹ ç»éªŒ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Summary 17 LinkList]]></title>
      <url>http://shopee.ai/2020/08/20/leetcode/summary_linkedlist/</url>
      <content type="html"><![CDATA[<p><img src="/images/leetcode/linked-list-logo.png" width="600" alt=""></p>
<a id="more"></a>
<p>é¢18. åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹ï¼ˆåŒæŒ‡é’ˆï¼Œæ¸…æ™°å›¾è§£ï¼‰</p>
<p><img src="/images/leetcode/linked-list-1.png" width="550" alt="åŒæŒ‡é’ˆ"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.next = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deleteNode</span><span class="params">(self, head: ListNode, val: int)</span> -&gt; ListNode:</span></span><br><span class="line">        <span class="keyword">if</span> head.val == val: <span class="keyword">return</span> head.next</span><br><span class="line">        pre, cur = head, head.next</span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">and</span> cur.val != val:</span><br><span class="line">            pre, cur = cur, cur.next</span><br><span class="line">        <span class="keyword">if</span> cur: pre.next = cur.next</span><br><span class="line">        <span class="keyword">return</span> head</span><br></pre></td></tr></table></figure>
<p>åœ¨ O(1) æ—¶é—´åˆ é™¤é“¾è¡¨èŠ‚ç‚¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.next = <span class="keyword">None</span></span><br><span class="line"><span class="comment"># 1. head or del is null 2. del=head 3. del=tail 4. del=normal</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">del_node</span><span class="params">(head, p_del)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> head <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> p_del <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> p_del == head:</span><br><span class="line">        <span class="keyword">return</span> head.next</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> p_del.next <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        tmp = head</span><br><span class="line">        <span class="keyword">while</span> tmp.next != p_del:</span><br><span class="line">            tmp = tmp.next</span><br><span class="line">        tmp.next = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        p_del.val = p_del.next.val</span><br><span class="line">        p_del.next = p_del.next.next</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> head</span><br></pre></td></tr></table></figure>
<h2 id="1-easy-10é“"><a href="#1-easy-10é“" class="headerlink" title="1. easy 10é“"></a>1. easy 10é“</h2><blockquote>
<ol>
<li>åœ¨ O(1) æ—¶é—´åˆ é™¤é“¾è¡¨èŠ‚ç‚¹ï¼Œ âœ”ï¸ 1. head or del is null 2. del=head 3. del=tail 4. del=normal</li>
<li>åˆ é™¤å•é“¾è¡¨å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹ï¼Œ âœ”ï¸</li>
<li>æ±‚å•é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ï¼Œ âœ”ï¸</li>
<li>åˆ¤æ–­å•é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯ï¼Œ âœ”ï¸ while fast and fast-&gt;next: if fast==slow return True</li>
<li>ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨, é€’å½’ ok.ï¼Œ âœ”ï¸</li>
<li>é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªç»“ç‚¹ ok.ï¼Œ âœ”ï¸</li>
<li>åˆ¤æ–­ä¸¤ä¸ªæ— ç¯å•é“¾è¡¨æ˜¯å¦ç›¸äº¤ï¼Œ âœ”ï¸ åˆ¤æ–­ tail node is equal ?</li>
<li>ä¸¤ä¸ªé“¾è¡¨ç›¸äº¤æ‰©å±•ï¼šæ±‚ä¸¤ä¸ªæ— ç¯å•é“¾è¡¨çš„ç¬¬ä¸€ä¸ªç›¸äº¤ç‚¹ï¼Œ âœ”ï¸<pre><code>ç›¸é‡åï¼Œè®©å…¶ä¸­ä¸€ä¸ªæŒ‡é’ˆå›åˆ°é“¾è¡¨çš„å¤´éƒ¨ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆåœ¨åŸåœ°ï¼ŒåŒæ—¶å¾€å‰æ¯æ¬¡èµ°ä¸€æ­¥ï¼Œå½“å®ƒä»¬å†æ¬¡ç›¸é‡å°±æ˜¯åœ¨ç¯è·¯çš„å…¥å£ç‚¹
</code></pre></li>
<li>ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹  ï¼Œ âœ”ï¸ p1 = (null == p1) ? headB : p1.next;</li>
<li>æ—‹è½¬å•é“¾è¡¨  (F1. ç¯ F2. èµ°n-k%n æ–­å¼€)ï¼Œ âœ”ï¸  </li>
</ol>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªå•é“¾è¡¨ï¼Œè®¾è®¡ä¸€ä¸ªç®—æ³•å®ç°é“¾è¡¨å‘å³æ—‹è½¬ K ä¸ªä½ç½®ã€‚<br>ä¸¾ä¾‹ï¼š ç»™å®š 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;6-&gt;NULL, K=3<br>åˆ™4-&gt;5-&gt;6-&gt;1-&gt;2-&gt;3-&gt;NULL</p>
</blockquote>
<p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p>
<blockquote>
<ul>
<li><strong><code>æ–¹æ³•1</code>ï¼š</strong> åŒæŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆå…ˆèµ°kæ­¥ï¼Œç„¶åä¸¤ä¸ªæŒ‡é’ˆä¸€èµ·èµ°ï¼Œå½“å¿«æŒ‡é’ˆèµ°åˆ°æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆçš„ä¸‹ä¸€ä¸ªä½ç½®æ˜¯æ–°çš„é¡ºåºçš„å¤´ç»“ç‚¹ï¼Œè¿™æ ·å°±å¯ä»¥æ—‹è½¬é“¾è¡¨äº†ã€‚<br><code>m = n - k % n; ... ; newhead = cur.next; cur.next = NULL</code> </li>
<li><strong><code>æ–¹æ³•2</code>ï¼š</strong> å…ˆéå†æ•´ä¸ªé“¾è¡¨è·å¾—é“¾è¡¨é•¿åº¦nï¼Œç„¶åæ­¤æ—¶æŠŠé“¾è¡¨å¤´å’Œå°¾é“¾æ¥èµ·æ¥ï¼Œåœ¨å¾€åèµ°n â€“ k % nä¸ªèŠ‚ç‚¹å°±åˆ°è¾¾æ–°é“¾è¡¨çš„å¤´ç»“ç‚¹å‰ä¸€ä¸ªç‚¹ï¼Œè¿™æ—¶æ–­å¼€é“¾è¡¨å³å¯ã€‚</li>
</ul>
</blockquote>
<p>ç¯è·¯çš„å…¥å£ç‚¹</p>
<blockquote>
<p>åœ¨ç¬¬ 4 é¢˜ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡åï¼Œè®©å…¶ä¸­ä¸€ä¸ªæŒ‡é’ˆå›åˆ°é“¾è¡¨çš„å¤´éƒ¨ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆåœ¨åŸåœ°ï¼ŒåŒæ—¶å¾€å‰æ¯æ¬¡èµ°ä¸€æ­¥ï¼Œå½“å®ƒä»¬å†æ¬¡ç›¸é‡æ—¶ï¼Œå°±æ˜¯åœ¨ç¯è·¯çš„å…¥å£ç‚¹ã€‚</p>
</blockquote>
<h2 id="2-medium-8é“"><a href="#2-medium-8é“" class="headerlink" title="2. medium 8é“"></a>2. medium 8é“</h2><h3 id="2-1-Reverse-Linked-List-I"><a href="#2-1-Reverse-Linked-List-I" class="headerlink" title="2.1 Reverse Linked List I"></a>2.1 Reverse Linked List I</h3><blockquote>
<ol>
<li><p><a href="https://weiweiblog.cn/reverselist/" target="_blank" rel="external">åè½¬é“¾è¡¨</a> next=head-&gt;next, head-&gt;next=pre, pre=head, head=next; 4æ­¥ okï¼Œ âœ”ï¸<br><img src="/images/leetcode/linked-list-2.gif" width="650" alt="3æŒ‡é’ˆ"></p>
</li>
<li><p>ç¿»è½¬éƒ¨åˆ†å•é“¾è¡¨ ä¸¾ä¾‹ï¼š1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;null, from = 2, to = 4 ç»“æœï¼š1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;null</p>
</li>
<li><a href="https://leetcode-cn.com/problems/fu-za-lian-biao-de-fu-zhi-lcof/" target="_blank" rel="external">å¤æ‚é“¾è¡¨çš„å¤åˆ¶</a> okï¼Œ âœ”ï¸</li>
<li>é“¾è¡¨åˆ’åˆ† ï¼ˆæè¿°ï¼š ç»™å®šä¸€ä¸ªå•é“¾è¡¨å’Œæ•°å€¼xï¼Œåˆ’åˆ†é“¾è¡¨ä½¿å¾—å°äºxçš„èŠ‚ç‚¹æ’åœ¨å¤§äºç­‰äºxçš„èŠ‚ç‚¹ä¹‹å‰ï¼‰</li>
<li>å•é“¾è¡¨æ’åºï¼Œ (å½’å¹¶) âœ”ï¸</li>
<li>åˆå¹¶ä¸¤ä¸ªæˆ–kä¸ªæœ‰åºé“¾è¡¨  okï¼Œ (é€’å½’ &amp; è¿­ä»£å¾ªç¯ éƒ½å¯ä»¥å®ç°)ï¼Œ âœ”ï¸ </li>
<li>åˆ é™¤é“¾è¡¨é‡å¤ç»“ç‚¹  é“¾è¡¨1-&gt;2-&gt;3-&gt;3-&gt;4-&gt;4-&gt;5 å¤„ç†åä¸º 1-&gt;2-&gt;5. âœ”ï¸<br>â€”â€”â€”â€” è®¾ç½® first ï¼Œsecond æŒ‡é’ˆ, first == ç¡®å®šä¸é‡å¤çš„, second == work p</li>
<li>é“¾è¡¨ä¸­ç¯çš„å…¥å£ç»“ç‚¹ï¼Œ âœ”ï¸ </li>
</ol>
</blockquote>
<h3 id="2-2-Reverse-Linked-List-II"><a href="#2-2-Reverse-Linked-List-II" class="headerlink" title="2.2 Reverse Linked List II"></a>2.2 Reverse Linked List II</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL, m = 2, n = 4</span><br><span class="line">è¾“å‡º: 1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;NULL</span><br><span class="line"></span><br><span class="line">å¿…è¦å…ˆå¼„æ¸…æ¥šé“¾æ¥åè½¬çš„åŸç†ä»¥åŠéœ€è¦å“ªäº›æŒ‡é’ˆã€‚</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¾‹è€Œè¨€ï¼Œæœ‰ä¸€ä¸ªä¸‰ä¸ªä¸åŒèŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨ <code>A â†’ B â†’ C</code>ï¼Œéœ€è¦åè½¬ç»“ç‚¹ä¸­çš„é“¾æ¥æˆä¸º <code>A â† B â† C</code>ã€‚</p>
<p>å‡è®¾æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘ Aï¼Œä¸€ä¸ªæŒ‡å‘ Bã€‚ è®°ä¸º prev å’Œ curã€‚åˆ™ç”¨è¿™ä¸¤ä¸ªæŒ‡é’ˆå®ç° A å’Œ B ä¹‹é—´çš„é“¾æ¥åè½¬ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cur.next = prev</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·åšå”¯ä¸€çš„é—®é¢˜æ˜¯ï¼Œæ²¡æœ‰åŠæ³•ç»§ç»­ä¸‹å»ï¼Œæ¢è€Œè¨€ä¹‹ï¼Œè¿™æ ·åšä¹‹åå°±æ— æ³•å†è®¿é—®åˆ°ç»“ç‚¹ Cã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">third = cur.next</span><br><span class="line">cur.next = prev</span><br><span class="line">prev = cur</span><br><span class="line">cur = third</span><br></pre></td></tr></table></figure>
<p><img src="/images/leetcode/linked-list-2.2.png" width="660" alt="åŒæŒ‡é’ˆ"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reverseBetween</span><span class="params">(self, head, m, n)</span>:</span></span><br><span class="line">        <span class="string">"""</span><br><span class="line">        :type head: ListNode</span><br><span class="line">        :type m: int</span><br><span class="line">        :type n: int</span><br><span class="line">        :rtype: ListNode</span><br><span class="line">        """</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Empty list</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> head:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Move the two pointers until they reach the proper starting point</span></span><br><span class="line">        <span class="comment"># in the list.</span></span><br><span class="line">        cur, prev = head, <span class="keyword">None</span></span><br><span class="line">        <span class="keyword">while</span> m &gt; <span class="number">1</span>:</span><br><span class="line">            prev = cur</span><br><span class="line">            cur = cur.next</span><br><span class="line">            m, n = m - <span class="number">1</span>, n - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># The two pointers that will fix the final connections.</span></span><br><span class="line">        tail, con = cur, prev</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Iteratively reverse the nodes until n becomes 0.</span></span><br><span class="line">        <span class="keyword">while</span> n:</span><br><span class="line">            third = cur.next</span><br><span class="line">            cur.next = prev</span><br><span class="line">            prev = cur</span><br><span class="line">            cur = third</span><br><span class="line">            n -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Adjust the final connections as explained in the algorithm</span></span><br><span class="line">        <span class="keyword">if</span> con:</span><br><span class="line">            con.next = prev</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            head = prev</span><br><span class="line">        tail.next = cur</span><br><span class="line">        <span class="keyword">return</span> head</span><br></pre></td></tr></table></figure>
<p><a href="https://leetcode-cn.com/problems/reverse-linked-list-ii/solution/fan-zhuan-lian-biao-ii-by-leetcode/" target="_blank" rel="external">åè½¬é“¾è¡¨ II</a></p>
<h3 id="2-3-å¤æ‚é“¾è¡¨çš„å¤åˆ¶"><a href="#2-3-å¤æ‚é“¾è¡¨çš„å¤åˆ¶" class="headerlink" title="2.3 å¤æ‚é“¾è¡¨çš„å¤åˆ¶"></a>2.3 å¤æ‚é“¾è¡¨çš„å¤åˆ¶</h3><p>Solution: è¿­ä»£. <a href="https://leetcode-cn.com/problems/fu-za-lian-biao-de-fu-zhi-lcof/solution/lian-biao-de-shen-kao-bei-by-z1m/" target="_blank" rel="external">å›¾è§£ é“¾è¡¨çš„æ·±æ‹·è´</a> </p>
<p>è¯¥æ–¹æ³•çš„æ€è·¯æ¯”è¾ƒç›´æ¥ï¼Œå¯¹äºä¸€ä¸ªç»“ç‚¹ï¼Œåˆ†åˆ«æ‹·è´æ­¤ç»“ç‚¹ã€next æŒ‡é’ˆæŒ‡å‘çš„ç»“ç‚¹ã€random æŒ‡é’ˆæŒ‡å‘çš„ç»“ç‚¹ï¼Œ ç„¶åè¿›è¡Œä¸‹ä¸€ä¸ªç»“ç‚¹â€¦å¦‚æœé‡åˆ°å·²ç»å‡ºç°çš„ç»“ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ç”¨æ‹·è´è¯¥ç»“ç‚¹ï¼Œåªéœ€å°† next æˆ– random æŒ‡é’ˆæŒ‡å‘è¯¥ç»“ç‚¹å³å¯ã€‚</p>
<p><img src="/images/leetcode/linked-list-2.4.jpeg" width="650" alt=""></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">copyRandomList</span><span class="params">(self, head: <span class="string">'Node'</span>)</span> -&gt; 'Node':</span></span><br><span class="line">        visited = &#123;&#125;</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">getClonedNode</span><span class="params">(node)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> node:</span><br><span class="line">                <span class="keyword">if</span> node <span class="keyword">in</span> visited:</span><br><span class="line">                    <span class="keyword">return</span> visited[node]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    visited[node] = Node(node.val,<span class="keyword">None</span>,<span class="keyword">None</span>)</span><br><span class="line">                    <span class="keyword">return</span> visited[node]</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> head: <span class="keyword">return</span> head</span><br><span class="line">        old_node = head</span><br><span class="line">        new_node = Node(old_node.val,<span class="keyword">None</span>,<span class="keyword">None</span>)</span><br><span class="line">        visited[old_node] = new_node</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> old_node:</span><br><span class="line">            new_node.random = getClonedNode(old_node.random)</span><br><span class="line">            new_node.next = getClonedNode(old_node.next)</span><br><span class="line">            </span><br><span class="line">            old_node = old_node.next</span><br><span class="line">            new_node = new_node.next</span><br><span class="line">        <span class="keyword">return</span> visited[head]</span><br></pre></td></tr></table></figure>
<h3 id="2-4-é“¾è¡¨åˆ’åˆ†"><a href="#2-4-é“¾è¡¨åˆ’åˆ†" class="headerlink" title="2.4 é“¾è¡¨åˆ’åˆ†"></a>2.4 é“¾è¡¨åˆ’åˆ†</h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line">def partition(head: Node, x: int) &#123;</span><br><span class="line">    // write your code here</span><br><span class="line">    if not head return None;</span><br><span class="line">    </span><br><span class="line">    leftDummy = Node(0)</span><br><span class="line">    rightDummy = Node(0)</span><br><span class="line">    </span><br><span class="line">    left = leftDummy, right = rightDummy;</span><br><span class="line"></span><br><span class="line">    while (head != None) &#123;</span><br><span class="line">        if (head.val &lt; x) &#123;</span><br><span class="line">            left.next = head;</span><br><span class="line">            left = head;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            right.next = head;</span><br><span class="line">            right = head;</span><br><span class="line">        &#125;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    right.next = null;</span><br><span class="line">    left.next = rightDummy.next;</span><br><span class="line">    return leftDummy.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-5-å•é“¾è¡¨æ’åº-å½’å¹¶"><a href="#2-5-å•é“¾è¡¨æ’åº-å½’å¹¶" class="headerlink" title="2.5 å•é“¾è¡¨æ’åº (å½’å¹¶)"></a>2.5 å•é“¾è¡¨æ’åº (å½’å¹¶)</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">sortList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//é‡‡ç”¨å½’å¹¶æ’åº</span></span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è·å–ä¸­é—´ç»“ç‚¹</span></span><br><span class="line">    ListNode mid = getMid(head);</span><br><span class="line">    ListNode right = mid.next;</span><br><span class="line">    mid.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//åˆå¹¶</span></span><br><span class="line">    <span class="keyword">return</span> mergeSort(sortList(head), sortList(right));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * è·å–é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹,å¶æ•°æ—¶å–ä¸­é—´ç¬¬ä¸€ä¸ª</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@param</span> head</span><br><span class="line"> * <span class="doctag">@return</span></span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">getMid</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¿«æ…¢æŒ‡é’ˆ</span></span><br><span class="line">    ListNode slow = head, quick = head;</span><br><span class="line">    <span class="comment">//å¿«2æ­¥ï¼Œæ…¢ä¸€æ­¥</span></span><br><span class="line">    <span class="keyword">while</span> (quick.next != <span class="keyword">null</span> &amp;&amp; quick.next.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">        slow = slow.next;</span><br><span class="line">        quick = quick.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> slow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *</span><br><span class="line"> * å½’å¹¶ä¸¤ä¸ªæœ‰åºçš„é“¾è¡¨</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@param</span> head1</span><br><span class="line"> * <span class="doctag">@param</span> head2</span><br><span class="line"> * <span class="doctag">@return</span></span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> ListNode <span class="title">mergeSort</span><span class="params">(ListNode head1, ListNode head2)</span> </span>&#123;</span><br><span class="line">    ListNode p1 = head1, p2 = head2, head;</span><br><span class="line">   <span class="comment">//å¾—åˆ°å¤´èŠ‚ç‚¹çš„æŒ‡å‘</span></span><br><span class="line">    <span class="keyword">if</span> (head1.val &amp;lt; head2.val) &#123;</span><br><span class="line">        head = head1;</span><br><span class="line">        p1 = p1.next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        head = head2;</span><br><span class="line">        p2 = p2.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ListNode p = head;</span><br><span class="line">    <span class="comment">//æ¯”è¾ƒé“¾è¡¨ä¸­çš„å€¼</span></span><br><span class="line">    <span class="keyword">while</span> (p1 != <span class="keyword">null</span> &amp;&amp; p2 != <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (p1.val &amp;lt;= p2.val) &#123;</span><br><span class="line">            p.next = p1;</span><br><span class="line">            p1 = p1.next;</span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            p.next = p2;</span><br><span class="line">            p2 = p2.next;</span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç¬¬äºŒæ¡é“¾è¡¨ç©ºäº†</span></span><br><span class="line">    <span class="keyword">if</span> (p1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        p.next = p1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€æ¡é“¾è¡¨ç©ºäº†</span></span><br><span class="line">    <span class="keyword">if</span> (p2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        p.next = p2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-medium-é“¾è¡¨æ±‚å’Œ"><a href="#3-medium-é“¾è¡¨æ±‚å’Œ" class="headerlink" title="3. medium é“¾è¡¨æ±‚å’Œ"></a>3. medium é“¾è¡¨æ±‚å’Œ</h2><p>é¢˜ç›®æè¿°ï¼šä½ æœ‰ä¸¤ä¸ªç”¨é“¾è¡¨ä»£è¡¨çš„æ•´æ•°ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªæ•°å­—ã€‚æ•°å­—å­˜å‚¨æŒ‰ç…§åœ¨åŸæ¥æ•´æ•°ä¸­ç›¸åçš„é¡ºåºï¼Œä½¿å¾—ç¬¬ä¸€ä¸ªæ•°å­—ä½äºé“¾è¡¨çš„å¼€å¤´ã€‚å†™å‡ºä¸€ä¸ªå‡½æ•°å°†ä¸¤ä¸ªæ•´æ•°ç›¸åŠ ï¼Œç”¨é“¾è¡¨å½¢å¼è¿”å›å’Œã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<blockquote>
<p>è¾“å…¥ï¼š(7 -&gt; 1 -&gt; 6) + (5 -&gt; 9 -&gt; 2)ï¼Œå³617 + 295<br>è¾“å‡ºï¼š2 -&gt; 1 -&gt; 9ï¼Œå³912</p>
</blockquote>
<p>è§£é¢˜æ€è·¯ï¼šåšä¸ªå¤§å¾ªç¯ï¼Œå¯¹æ¯ä¸€ä½è¿›è¡Œæ“ä½œï¼š</p>
<p>å½“å‰ä½ï¼š(A[i]+B[i])%10</p>
<p>è¿›ä½ï¼šï¼ˆA[i]+B[i]ï¼‰/10</p>
<hr>
<p>è¿›é˜¶ï¼šå‡è®¾è¿™äº›æ•°ä½æ˜¯æ­£å‘å­˜æ”¾çš„ï¼Œè¯·å†åšä¸€é. æ€è·¯ï¼š å…ˆè½¬æ•°å­—, ç›¸åŠ , å†è½¬é“¾è¡¨</p>
<blockquote>
<p>è¾“å…¥ï¼š(6 -&gt; 1 -&gt; 7) + (2 -&gt; 9 -&gt; 5)ï¼Œå³617 + 295<br>è¾“å‡ºï¼š9 -&gt; 1 -&gt; 2ï¼Œå³ 912 = 912 % 10 = 9</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.next = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addTwoNumbers</span><span class="params">(self, l1: ListNode, l2: ListNode)</span> -&gt; ListNode:</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">        ListNode c1 = l1;</span><br><span class="line">        ListNode c2 = l2;</span><br><span class="line">        ListNode sentinel = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode d = sentinel;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (c1 != <span class="keyword">null</span> || c2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">            sum /= <span class="number">10</span>;</span><br><span class="line">            <span class="keyword">if</span> (c1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">                sum += c1.val;</span><br><span class="line">                c1 = c1.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (c2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">                sum += c2.val;</span><br><span class="line">                c2 = c2.next;</span><br><span class="line">            &#125;</span><br><span class="line">            d.next = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">            d = d.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sum / <span class="number">10</span> == <span class="number">1</span>)</span><br><span class="line">            d.next = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> sentinel.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/fuxuemingzhu" target="_blank" rel="external">è´Ÿé›ªæ˜çƒ›</a></li>
<li><p><a href="https://blog.csdn.net/fuxuemingzhu/article/details/101900729" target="_blank" rel="external">ã€LeetCodeã€‘ä»£ç æ¨¡æ¿ï¼Œåˆ·é¢˜å¿…ä¼š</a></p>
</li>
<li><p><a href="https://weiweiblog.cn/linkedlist_summary/" target="_blank" rel="external">17 é“ LinkList</a></p>
</li>
<li><a href="https://leetcode-cn.com/circle/article/YGr54o/" target="_blank" rel="external">åŠ›æ‰£åˆ·é¢˜æ€»ç»“ä¹‹é“¾è¡¨</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Chap 7 å†…å­˜æ¨¡å‹å’Œèµ„æºè°ƒä¼˜]]></title>
      <url>http://shopee.ai/2020/08/19/spark/spark-aura-7.1-memory/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-aura-7.1-memory.png" width="500" alt=""></p>
<a id="more"></a>
<p><a href="https://blog.csdn.net/zhongqi2513/article/details/78321664" target="_blank" rel="external">æœ€é‡è¦çš„5å¼ å›¾ - MapReduceç¼–ç¨‹æ¡ˆä¾‹ by é©¬ä¸­å</a></p>
<p>mapreduce çš„ shuffle æ˜¯ä¸€é€šç”¨çš„ shuffle (æ—¢æ¯ä¸€ä¸ªtaskæœ€ç»ˆéƒ½åªä¼šå½¢æˆä¸€ä¸ªç£ç›˜æ–‡ä»¶+ä¸€ä¸ªç´¢å¼•)<br>spark çš„4ç§ shuffle å°±æ˜¯åœ¨ mapreduce çš„ shuffle åŸºç¡€ä¹‹ä¸Š, è¿›è¡Œäº†æŸäº›åŠ¨ä½œçš„åˆ å‡ä¹‹åå½¢æˆçš„</p>
<p>å¤šç§ shuffle æ–¹æ¡ˆé€‰æ‹©:</p>
<p>mapreduce:</p>
<blockquote>
<p>partitioner, combiner, sort</p>
</blockquote>
<p>spark:</p>
<blockquote>
<p>å¯ä»¥åœ¨ 4 ç§æ–¹æ¡ˆä¸­é€‰æ‹©ä½¿ç”¨å…¶ä¸­çš„å“ªä¸€ç§ã€‚ (å°±æ˜¯å¯¹ä¸Šé¢çš„ mapreduce shuffle è¿‡ç¨‹çš„)</p>
</blockquote>
<p>å„ç§å…¨ç†è®ºï¼š</p>
<p><strong>1) spark çš„å†…å­˜æ¨¡å‹</strong></p>
<blockquote>
<ul>
<li>å †å†…å†…å­˜ + å †å¤–å†…å­˜</li>
<li>æ‰§è¡Œå†…å­˜ + å­˜å‚¨å†…å­˜</li>
<li><p>é™æ€å†…å­˜æ¨¡å‹ + ç»Ÿä¸€å†…å­˜æ¨¡å‹</p>
</li>
<li><p>åŠ¨æ€å ç”¨æœºåˆ¶</p>
</li>
</ul>
</blockquote>
<p><strong>2) èµ„æºè°ƒä¼˜</strong></p>
<blockquote>
<ul>
<li>num-executors </li>
<li>executor-memory</li>
<li>total-executor-cores   </li>
</ul>
<ul>
<li>spark.shuffle.memoryFraction</li>
<li>spark.storage.memoryFraction<br>â€¦<br>spark-submit â€¦</li>
</ul>
</blockquote>
<p><strong>3) spark çš„ shuffle</strong></p>
<ul>
<li>HashShuffleManager</li>
</ul>
<blockquote>
<p>æœªä¼˜åŒ–ç‰ˆæœ¬<br>å·²ä¼˜åŒ–ç‰ˆæœ¬</p>
</blockquote>
<ul>
<li>SortShuffleManager</li>
</ul>
<blockquote>
<p>æ™®é€šçš„æœºåˆ¶<br>bypassæœºåˆ¶ </p>
</blockquote>
<h2 id="1-Spark-çš„-shuffle-è°ƒä¼˜"><a href="#1-Spark-çš„-shuffle-è°ƒä¼˜" class="headerlink" title="1. Spark çš„ shuffle è°ƒä¼˜"></a>1. Spark çš„ shuffle è°ƒä¼˜</h2><p><strong>spark.shuffle.io.maxRetries</strong></p>
<blockquote>
<ul>
<li>é»˜è®¤å€¼ï¼š3</li>
<li>å‚æ•°è¯´æ˜ï¼šshuffle read taskä»shuffle write taskæ‰€åœ¨èŠ‚ç‚¹æ‹‰å–å±äºè‡ªå·±çš„æ•°æ®æ—¶ï¼Œå¦‚æœå› ä¸ºç½‘ç»œå¼‚å¸¸å¯¼è‡´æ‹‰å–å¤±è´¥ï¼Œæ˜¯ä¼šè‡ªåŠ¨è¿›è¡Œé‡è¯•çš„ã€‚è¯¥å‚æ•°å°±ä»£è¡¨äº†å¯ä»¥é‡è¯•çš„æœ€å¤§æ¬¡æ•°ã€‚å¦‚æœåœ¨æŒ‡å®šæ¬¡æ•°ä¹‹å†…æ‹‰å–è¿˜æ˜¯æ²¡æœ‰æˆåŠŸï¼Œå°±å¯èƒ½ä¼šå¯¼è‡´ä½œä¸šæ‰§è¡Œå¤±è´¥ã€‚</li>
<li>è°ƒä¼˜å»ºè®®ï¼šå¯¹äºé‚£äº›åŒ…å«äº†ç‰¹åˆ«è€—æ—¶çš„shuffleæ“ä½œçš„ä½œä¸šï¼Œå»ºè®®å¢åŠ é‡è¯•æœ€å¤§æ¬¡æ•°ï¼ˆæ¯”å¦‚60æ¬¡ï¼‰ï¼Œä»¥é¿å…ç”±äºJVMçš„full gcæˆ–è€…ç½‘ç»œä¸ç¨³å®šç­‰å› ç´ å¯¼è‡´çš„æ•°æ®æ‹‰å–å¤±è´¥ã€‚åœ¨å®è·µä¸­å‘ç°ï¼Œå¯¹äºé’ˆå¯¹è¶…å¤§æ•°æ®é‡ï¼ˆæ•°åäº¿~ä¸Šç™¾äº¿ï¼‰çš„shuffleè¿‡ç¨‹ï¼Œè°ƒèŠ‚è¯¥å‚æ•°å¯ä»¥å¤§å¹…åº¦æå‡ç¨³å®šæ€§ã€‚</li>
</ul>
</blockquote>
<p><strong>spark.shuffle.io.retryWait</strong></p>
<blockquote>
<ul>
<li>é»˜è®¤å€¼ï¼š5s</li>
<li>å‚æ•°è¯´æ˜ï¼šå…·ä½“è§£é‡ŠåŒä¸Šï¼Œè¯¥å‚æ•°ä»£è¡¨äº†æ¯æ¬¡é‡è¯•æ‹‰å–æ•°æ®çš„ç­‰å¾…é—´éš”ï¼Œé»˜è®¤æ˜¯5sã€‚</li>
<li>è°ƒä¼˜å»ºè®®ï¼šå»ºè®®åŠ å¤§é—´éš”æ—¶é•¿ï¼ˆæ¯”å¦‚60sï¼‰ï¼Œä»¥å¢åŠ shuffleæ“ä½œçš„ç¨³å®šæ€§ã€‚</li>
</ul>
</blockquote>
<h2 id="2-sparkå¼€å‘è°ƒä¼˜å’ŒDatSkewå¤ä¹ "><a href="#2-sparkå¼€å‘è°ƒä¼˜å’ŒDatSkewå¤ä¹ " class="headerlink" title="2. sparkå¼€å‘è°ƒä¼˜å’ŒDatSkewå¤ä¹ "></a>2. sparkå¼€å‘è°ƒä¼˜å’ŒDatSkewå¤ä¹ </h2><h3 id="2-1-å¼€å‘è°ƒä¼˜"><a href="#2-1-å¼€å‘è°ƒä¼˜" class="headerlink" title="2.1 å¼€å‘è°ƒä¼˜"></a>2.1 å¼€å‘è°ƒä¼˜</h3><table>
<thead>
<tr>
<th style="text-align:left">&nbsp;<strong>å¼€å‘è°ƒä¼˜ 1 ~ 3:</strong> é‡å¤åˆ©ç”¨ä¸€ä¸ªRDD</th>
<th style="text-align:center">é‡å¤åˆ©ç”¨ä¸€ä¸ªRDD</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">(1). é¿å…åˆ›å»ºé‡å¤ RDD</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">(2). å°½å¯èƒ½å¤ç”¨åŒä¸€ä¸ª RDD</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">(3). å¯¹å¤šæ¬¡ä½¿ç”¨çš„ RDD è¿›è¡ŒæŒä¹…åŒ–</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left"><strong>å¼€å‘è°ƒä¼˜ 4 ~ 6:</strong> æé«˜ä»»åŠ¡å¤„ç†çš„æ€§èƒ½</td>
<td style="text-align:center"><strong>æé«˜ä»»åŠ¡å¤„ç†çš„æ€§èƒ½</strong></td>
</tr>
<tr>
<td style="text-align:left">(4). å°½é‡é¿å…ä½¿ç”¨ shuffle ç±»ç®—å­</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">(5). ä½¿ç”¨ map-side é¢„èšåˆçš„ shuffle æ“ä½œ</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">(6). ä½¿ç”¨é«˜æ€§èƒ½ç®—å­</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">(7). å¹¿æ’­å¤§å˜é‡  (å‡è½»ç½‘ç»œè´Ÿæ‹…)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">(8). ä½¿ç”¨ Kryo ä¼˜åŒ–åºåˆ—åŒ–æ€§èƒ½</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:left">(9). ä¼˜åŒ–æ•°æ®ç»“æ„</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<blockquote>
<p>æ€»ç»“ï¼š å¦‚æœè¯´æœ‰æŸä¸€ä¸ª RDD ä¼šåœ¨ä¸€ä¸ªç¨‹åºä¸­è¢«å¤šæ¬¡ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä¸è¦é‡å¤åˆ›å»ºï¼Œè¦å¤šæ¬¡ä½¿ç”¨è¿™ä¸€ä¸ªRDD (ä¸å¯å˜çš„)ï¼Œæ—¢ç„¶è¦é‡å¤åˆ©ç”¨ä¸€ä¸ªRDDï¼Œå°±åº”è¯¥æŠŠè¿™ä¸ª RDD è¿›è¡ŒæŒä¹…åŒ–. ï¼ˆæœ€å¥½åœ¨å†…å­˜ä¸­ï¼‰</p>
<p>cache persist æŒä¹…åŒ–æ•°æ®åˆ°ç£ç›˜æˆ–å†…å­˜ unpersist<br>å¦‚ä½•æŠŠæŒä¹…åŒ–åˆ°ç£ç›˜æˆ–å†…å­˜ä¸­çš„æ•°æ®ç»™åˆ é™¤æ‰å‘¢ï¼Ÿ</p>
<p>rdd.</p>
</blockquote>
<h3 id="2-2-Data-Skew"><a href="#2-2-Data-Skew" class="headerlink" title="2.2 Data Skew"></a>2.2 Data Skew</h3><p><strong>æ•°æ®å¦‚ä½•åˆ†åŒºï¼Ÿ (éšæœºï¼Œhashï¼ŒèŒƒå›´)</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Data Skew</th>
<th style="text-align:left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">(1). DataSkew å‘ç”Ÿçš„ç°è±¡</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><br> (2). DataSkew å‘ç”Ÿçš„åŸç†</td>
<td style="text-align:left">&gt; æ•°æ®åˆ†å¸ƒä¸å‡åŒ€ <br> &gt; è¿½æ±‚çš„ç›®æ ‡ï¼š æ•°æ®åˆ†å¸ƒè¦å‡åŒ€</td>
</tr>
<tr>
<td style="text-align:left"><br> (3). å¦‚ä½•å®šä½å¯¼è‡´ DataSkew çš„ä»£ç </td>
<td style="text-align:left">&gt; æŸä¸ª task æ‰§è¡Œç‰¹åˆ«æ…¢çš„æƒ…å†µ <br> &gt; æŸä¸ª task è«åå…¶å¦™å†…å­˜æº¢å‡ºçš„æƒ…å†µ</td>
</tr>
<tr>
<td style="text-align:left"><br> (4). æŸ¥çœ‹å¯¼è‡´ DataSkew çš„ key çš„æ•°æ®åˆ†å¸ƒæƒ…å†µ</td>
<td style="text-align:left">&gt; æµ‹è¯• <br> &gt; é‡‡æ ·</td>
</tr>
</tbody>
</table>
<p><strong>DataSkew Solutionï¼š</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:left">DataSkew Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æ–¹æ¡ˆ1</td>
<td style="text-align:left">ä½¿ç”¨ Hive ETL é¢„å¤„ç†æ•°æ®</td>
</tr>
<tr>
<td style="text-align:center">æ–¹æ¡ˆ2</td>
<td style="text-align:left">è°ƒæ•´shuffleæ“ä½œçš„å¹¶è¡Œåº¦</td>
</tr>
<tr>
<td style="text-align:center">æ–¹æ¡ˆ3</td>
<td style="text-align:left">å°†reduce joinè½¬ä¸ºmap join</td>
</tr>
<tr>
<td style="text-align:center">æ–¹æ¡ˆ4</td>
<td style="text-align:left">è¿‡æ»¤å°‘æ•°å¯¼è‡´å€¾æ–œçš„key <br><br> &nbsp;&nbsp;&gt; å¯¼è‡´é‚£äº›å€¾æ–œçš„ key æ²¡æœ‰ç”¨ï¼Œè¿‡æ»¤æ‰</td>
</tr>
<tr>
<td style="text-align:center">æ–¹æ¡ˆ5</td>
<td style="text-align:left">é‡‡æ ·å€¾æ–œ key å¹¶åˆ†æ‹† join æ“ä½œ <br><br> &gt; å¯¼è‡´é‚£äº›å€¾æ–œçš„ key æœ‰ç”¨, å¹¶ä¸”ä¸å¤š <br> &nbsp;&nbsp; select â€¦ <br> &nbsp;&nbsp; union <br> &nbsp;&nbsp; select â€¦</td>
</tr>
<tr>
<td style="text-align:center"><br> æ–¹æ¡ˆ6</td>
<td style="text-align:left"><strong>ä¸¤é˜¶æ®µèšåˆ(å±€éƒ¨èšåˆ+å…¨å±€èšåˆ)</strong> <br> <br>sum count max min distinct avg <br> æ³¨æ„ä¸ map-side é¢„èšåˆ åŒºåˆ† ï¼Œä¸¤ç§æ–¹å¼ æ®Šé€”åŒå½’</td>
</tr>
<tr>
<td style="text-align:center">æ–¹æ¡ˆ7</td>
<td style="text-align:left"><strong>ä½¿ç”¨éšæœºå‰ç¼€å’Œæ‰©å®¹ RDD è¿›è¡Œ join</strong>  <br><br> ä¸èƒ½ä½¿ç”¨ mapjoin ä½†æ˜¯ä½¿ç”¨ reducejoin åˆå‡ºç°äº†æ•°æ®å€¾æ–œçš„è§£å†³æ–¹æ¡ˆ <br> ç¬›å¡å°”ç§¯çš„æ–¹æ¡ˆ</td>
</tr>
<tr>
<td style="text-align:center">æ–¹æ¡ˆ8</td>
<td style="text-align:left">ä»»åŠ¡æ¨ªåˆ‡ï¼Œä¸€åˆ†ä¸ºäºŒï¼Œå•ç‹¬å¤„ç†</td>
</tr>
</tbody>
</table>
<h2 id="3-spark-çš„å†…å­˜ç®¡ç†å®è§‚æ¦‚è¿°"><a href="#3-spark-çš„å†…å­˜ç®¡ç†å®è§‚æ¦‚è¿°" class="headerlink" title="3. spark çš„å†…å­˜ç®¡ç†å®è§‚æ¦‚è¿°"></a>3. spark çš„å†…å­˜ç®¡ç†å®è§‚æ¦‚è¿°</h2><p>spark ä½œä¸ºåŸºäºå†…å­˜çš„åˆ†å¸ƒå¼è®¡ç®—å¼•æ“, å…¶å†…å­˜ç®¡ç†æ¨¡å—åœ¨æ•´ä¸ªç³»ç»Ÿä¸­éå¸¸é‡è¦.</p>
<p>ç†è§£ spark å†…å­˜ç®¡ç†çš„åŸºæœ¬åŸç†ï¼Œæœ‰åŠ©äºæ›´å¥½çš„å¼€å‘ spark åº”ç”¨ç¨‹åº å’Œ è¿›è¡Œæ€§èƒ½è°ƒä¼˜.</p>
<ol>
<li>sparkçš„å†…å­˜æ¨¡å‹</li>
<li>sparkçš„shuffle</li>
<li>sparkçš„èµ„æºè°ƒä¼˜</li>
</ol>
<h3 id="3-1-sparkçš„å†…å­˜æ¨¡å‹"><a href="#3-1-sparkçš„å†…å­˜æ¨¡å‹" class="headerlink" title="3.1 sparkçš„å†…å­˜æ¨¡å‹"></a>3.1 sparkçš„å†…å­˜æ¨¡å‹</h3><table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:left"><code>spark çš„äº§ç”ŸèƒŒæ™¯ï¼Œ spark ä¼˜äº mapreduce çš„äº”å¤§åŸå› ï¼š</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"> (1).</td>
<td style="text-align:left">å‡å°‘äº†ç£ç›˜ IO</td>
<td></td>
</tr>
<tr>
<td style="text-align:center"> (2).</td>
<td style="text-align:left">æé«˜å¹¶è¡Œåº¦</td>
<td></td>
</tr>
<tr>
<td style="text-align:center"> (3).</td>
<td style="text-align:left">é¿å…é‡å¤è®¡ç®—</td>
<td></td>
</tr>
<tr>
<td style="text-align:center"> (4).</td>
<td style="text-align:left">å¯é€‰çš„ shuffle å’Œæ’åº</td>
<td></td>
</tr>
<tr>
<td style="text-align:center"> (5).</td>
<td style="text-align:left">æä¾›äº†ä¸€ä¸ªçµæ´»çš„ <strong>å†…å­˜ç®¡ç†ç­–ç•¥</strong></td>
<td></td>
</tr>
</tbody>
</table>
<p><a href="https://www.cnblogs.com/qingyunzong/p/8955141.html" target="_blank" rel="external">good Sparkå­¦ä¹ ä¹‹è·¯ ï¼ˆåä¸€ï¼‰SparkCoreçš„è°ƒä¼˜ä¹‹Sparkå†…å­˜æ¨¡å‹</a></p>
<h3 id="3-2-application-å†…å­˜"><a href="#3-2-application-å†…å­˜" class="headerlink" title="3.2 application å†…å­˜"></a>3.2 application å†…å­˜</h3><table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">åˆ’åˆ†</th>
<th style="text-align:left">application åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šåœ¨å“ªäº›åœ°æ–¹äº§ç”Ÿæ•°æ®ï¼Œéœ€è¦å­˜å‚¨åœ¨å†…å­˜ä¸­å‘¢ï¼Ÿ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1.</td>
<td style="text-align:center"></td>
<td style="text-align:left">åº”ç”¨ç¨‹åº</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">2.</td>
<td style="text-align:center">æ‰§è¡Œå†…å­˜</td>
<td style="text-align:left">å…¨å±€å˜é‡ï¼Œé™æ€å˜é‡</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">3.</td>
<td style="text-align:center">æ‰§è¡Œå†…å­˜</td>
<td style="text-align:left">task åœ¨è®¡ç®—çš„æ—¶å€™, æ•°æ®åœ¨å†…å­˜ä¸­(128M) (æœ‰çš„ ptn_data &gt; 128 æœ‰çš„ &lt; 128)</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">4.</td>
<td style="text-align:center">æ‰§è¡Œå†…å­˜</td>
<td style="text-align:left">mapPartitions (ptn_data =&gt; {}) <br><br> &nbsp;&nbsp;&nbsp;&nbsp; for (element &lt;- partition) <br> &nbsp;&nbsp;&nbsp;&nbsp; code æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨çš„ä¸´æ—¶å®¹å™¨ï¼Œä¸´æ—¶å˜é‡</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">5.</td>
<td style="text-align:center">æ‰§è¡Œå†…å­˜</td>
<td style="text-align:left">stage0 å’Œ stage1 ä¹‹é—´æœ‰ shuffleï¼Œè¿™ä¸ªå°†è¦è¿›è¡Œ shuffle çš„æ•°æ®å­˜å‚¨åœ¨ä½•åœ°ï¼Ÿ</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">..</td>
<td style="text-align:center"></td>
<td style="text-align:left"><code>æ•°æ®çš„åˆ†åŒºæ•°</code> </td>
</tr>
<tr>
<td style="text-align:center">6.</td>
<td style="text-align:center">å­˜å‚¨å†…å­˜</td>
<td style="text-align:left">å†…å­˜å ç”¨çš„å¤§æˆ·ï¼š rdd.cache() å ç”¨æ—¶é—´ <strong>é•¿ + å¤š</strong></td>
<td></td>
</tr>
<tr>
<td style="text-align:center">7.</td>
<td style="text-align:center">å­˜å‚¨å†…å­˜</td>
<td style="text-align:left">å¹¿æ’­å‡ºæ¥çš„å¤§å˜é‡ sc,broadcase(list) list ä¼šå­˜å‚¨åœ¨æ‰€æœ‰ executor å†…å­˜ä¸­</td>
<td></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:center">..</td>
<td style="text-align:center"></td>
<td style="text-align:left">ä¸€ç§åˆé€‚çš„å†…å­˜ç®¡ç†ç­–ç•¥ï¼Œå¯ä»¥æå‡å†…å­˜åˆ©ç”¨ç‡ï¼Œæé«˜Taskæ‰§è¡Œçš„æˆåŠŸç‡</td>
</tr>
</tbody>
</table>
<h3 id="3-3-Spark-å†…å­˜æ¨¡å‹æ¦‚è¿°"><a href="#3-3-Spark-å†…å­˜æ¨¡å‹æ¦‚è¿°" class="headerlink" title="3.3 Spark å†…å­˜æ¨¡å‹æ¦‚è¿°"></a>3.3 Spark å†…å­˜æ¨¡å‹æ¦‚è¿°</h3><p>åœ¨æ‰§è¡Œ Spark çš„åº”ç”¨ç¨‹åºæ—¶ï¼ŒSpark é›†ç¾¤ä¼šå¯åŠ¨ Driver å’Œ Executor ä¸¤ç§ JVM è¿›ç¨‹</p>
<blockquote>
<ol>
<li><p><strong><code>Driver</code></strong> ä¸»æ§è¿›ç¨‹ï¼Œè´Ÿè´£åˆ›å»º SparkContextï¼Œæäº¤ Spark Jobï¼Œå¹¶å°†ä½œä¸šè½¬åŒ–ä¸ºè®¡ç®—ä»»åŠ¡ï¼ˆTaskï¼‰ï¼Œåœ¨å„ä¸ª Executor è¿›ç¨‹é—´åè°ƒä»»åŠ¡çš„è°ƒåº¦</p>
</li>
<li><p><strong><code>Executor</code></strong> è´Ÿè´£åœ¨å·¥ä½œèŠ‚ç‚¹ä¸Šæ‰§è¡Œå…·ä½“çš„ è®¡ç®— Taskï¼Œå¹¶å°†ç»“æœè¿”å›ç»™ Driverï¼ŒåŒæ—¶ä¸ºéœ€è¦æŒä¹…åŒ–çš„ RDD æä¾›å­˜å‚¨åŠŸèƒ½[1]ã€‚</p>
</li>
</ol>
<p>ç”±äº Driver-memory 1G çš„å†…å­˜ç®¡ç†ç›¸å¯¹æ¥è¯´è¾ƒä¸ºç®€å•ï¼Œæœ¬æ–‡ä¸»è¦å¯¹ Executor çš„å†…å­˜ç®¡ç†è¿›è¡Œåˆ†æï¼Œä¸‹æ–‡ä¸­çš„ <code>Spark å†…å­˜å‡ç‰¹æŒ‡ Executor çš„å†…å­˜</code>ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">Spark çš„åº”ç”¨ç¨‹åº2ç§è¿›ç¨‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>driver</strong>ï¼š ä¸»æ§è¿›ç¨‹ï¼Œå¿…é¡»ä¿è¯ä¸èƒ½å‡ºé”™, è€Œä¸”ä¹Ÿåªæœ‰ä¸€ä¸ª</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"><strong>executor</strong>ï¼š task çš„æ‰§è¡Œè½½ä½“ï¼Œæ•°é‡ä¹Ÿå¾ˆå¤š</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">ä¾§é‡ç‚¹ï¼š executor ä¸Šçš„å†…å­˜ç®¡ç†</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">æ‰§è¡Œ task è¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿå“ªäº›æ•°æ®å‘¢ï¼Ÿ 2 3 4 5</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>spark å¸®åŠ©æˆ‘ä»¬æŠŠåº”ç”¨ç¨‹åºæ‰§è¡Œæ„æˆå½“ä¸­æ‰€å ç”¨çš„å†…å­˜åˆ†æˆ 2 ä¸ªæ–¹é¢ï¼š</p>
<blockquote>
<ol>
<li><strong>æ‰§è¡Œå†…å­˜</strong> 2 3 4 5  å¿…é¡»çš„</li>
<li><strong>å­˜å‚¨å†…å­˜</strong> 6 7  å¯æœ‰å¯æ— </li>
</ol>
</blockquote>
<h3 id="3-4-Spark-æŠŠå†…å­˜åšåˆ†ç±»çš„ç›®çš„"><a href="#3-4-Spark-æŠŠå†…å­˜åšåˆ†ç±»çš„ç›®çš„" class="headerlink" title="3.4 Spark æŠŠå†…å­˜åšåˆ†ç±»çš„ç›®çš„"></a>3.4 Spark æŠŠå†…å­˜åšåˆ†ç±»çš„ç›®çš„</h3><p>å‡å¦‚ç»™æ¯ä¸€ä¸ª executor åˆ†é…çš„å†…å­˜æ˜¯</p>
<p>8G: æ‰§è¡Œå†…å­˜ï¼š 1Gï¼Œ å­˜å‚¨å†…å­˜ 7G<br>2G: æ‰§è¡Œå†…å­˜ï¼š 1Gï¼Œ å­˜å‚¨å†…å­˜ 1G </p>
<table>
<thead>
<tr>
<th>å‡å¦‚ç»™æ¯ä¸€ä¸ª executor åˆ†é…çš„å†…å­˜æ˜¯ 8G</th>
</tr>
</thead>
<tbody>
<tr>
<td>(1). å½“è¿™ä¸ª executor å¯åŠ¨ä¸€ä¸ª task æ‰§è¡Œè®¡ç®—çš„æ—¶å€™ï¼Œå¤„ç†çš„æ•°æ®é‡æ˜¯ 2G</td>
<td></td>
</tr>
<tr>
<td>(2). å½“è¿™ä¸ª executor å¯åŠ¨ä¸€ä¸ª task æ‰§è¡Œè®¡ç®—çš„æ—¶å€™ï¼Œå¤„ç†çš„æ•°æ®é‡æ˜¯ 6G</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>ç»“è®ºï¼š åŒä¸€ä¸ªç¨‹åºåœ¨æ‰§è¡Œä¸åŒé‡çº§çš„æ•°æ®çš„è®¡ç®—çš„æ—¶å€™ï¼Œæ¯ä¸ª task æ‰§è¡Œçš„å†…å­˜æ‰€å ç”¨çš„èµ„æºå…¶å®å·®ä¸å¤šä¸€è‡´</p>
<p><code>æ•°æ®åˆ†åŒºçš„å­˜å‚¨</code></p>
</blockquote>
<h3 id="3-5-Sparkå†…å­˜çš„æ•´ä½“åˆ’åˆ†"><a href="#3-5-Sparkå†…å­˜çš„æ•´ä½“åˆ’åˆ†" class="headerlink" title="3.5 Sparkå†…å­˜çš„æ•´ä½“åˆ’åˆ†"></a>3.5 Sparkå†…å­˜çš„æ•´ä½“åˆ’åˆ†</h3><p>åˆåˆ†ä¸º2ç§ä¸åŒç±»å‹çš„å†…å­˜åˆ’åˆ†ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th>spark èƒ½åˆ©ç”¨çš„å†…å­˜æœ‰2ä¸ªåŒºåŸŸ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1.</td>
<td>(executorå†…å­˜) JVM å†…éƒ¨ çš„ On-heap Memory ï¼ˆå¯¹äºJVMæ¥è¯´å«åš å †å†…å­˜ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">2.</td>
<td>(executorå¤–éƒ¨) JVM å¤–éƒ¨/æ“ä½œç³»ç»Ÿ çš„ Off-heap Memory</td>
</tr>
</tbody>
</table>
<p>è¿™2ä¸ªåŒºåŸŸï¼Œåˆéƒ½åˆ†ä¸º2ä¸ªåŒºåŸŸï¼š</p>
<p><img src="/images/spark/spark-aura-7.1-memory.png" width="700" alt=""></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List list;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// visit list</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Test t1 = <span class="keyword">new</span> Test1();</span><br><span class="line">Test t2 = <span class="keyword">new</span> Test1();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ª JVM è¿›ç¨‹ä¸­çš„çº¿ç¨‹æ˜¯æ²¡æ³•ä»æ“ä½œç³»ç»Ÿä¸­ç”³è¯·å†…å­˜çš„<br>åªèƒ½ä» JVM ä¸­ç”³è¯·å†…å­˜<br>ä½†æ˜¯ç°åœ¨<strong>sparkçš„task(ä¸€ä¸ªçº¿ç¨‹)å°±å¯ä»¥ä»æ“ä½œç³»ç»Ÿ</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´JVMä¹‹å¤–ï¼Œç”³è¯·å†…å­˜ä½¿ç”¨ï¼Œè€Œä¸”è¿˜æ˜¯æ‰€æœ‰çš„taskå…¬ç”¨çš„.</p>
</blockquote>
<p><strong>æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</strong></p>
<blockquote>
<p>spark çš„ç¨‹åºä¸­ï¼Œä¸Šé¢ç¼“å­˜çš„RDDï¼Œåœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®</p>
</blockquote>
<h2 id="4-spark-çš„é™æ€å†…å­˜æ¨¡å‹å’Œç»Ÿä¸€å†…å­˜æ¨¡å‹è¯¦è§£-èµ„æºè°ƒä¼˜"><a href="#4-spark-çš„é™æ€å†…å­˜æ¨¡å‹å’Œç»Ÿä¸€å†…å­˜æ¨¡å‹è¯¦è§£-èµ„æºè°ƒä¼˜" class="headerlink" title="4. spark çš„é™æ€å†…å­˜æ¨¡å‹å’Œç»Ÿä¸€å†…å­˜æ¨¡å‹è¯¦è§£ + èµ„æºè°ƒä¼˜"></a>4. spark çš„é™æ€å†…å­˜æ¨¡å‹å’Œç»Ÿä¸€å†…å­˜æ¨¡å‹è¯¦è§£ + èµ„æºè°ƒä¼˜</h2><p><img src="/images/spark/spark-aura-7.1.3.png" width="850" alt="Off-Heap å†…å­˜"></p>
<p>spark çš„2ç§å†…å­˜ç®¡ç†æ–¹å¼ï¼š</p>
<p><strong>1). spark 1.x é™æ€å†…å­˜æ¨¡å‹</strong></p>
<blockquote>
<p>æ‰§è¡Œå†…å­˜å’Œå­˜å‚¨å†…å­˜ ç›¸äº’ä¹‹é—´ <strong><code>ä¸èƒ½</code></strong> å ç”¨</p>
</blockquote>
<p><strong>2). spark 2.x ç»Ÿä¸€å†…å­˜æ¨¡å‹</strong></p>
<blockquote>
<p>æ‰§è¡Œå†…å­˜å’Œå­˜å‚¨å†…å­˜ ç›¸äº’ä¹‹é—´ <strong><code>èƒ½</code></strong> å ç”¨ </p>
</blockquote>
<p>å†…å­˜ç®¡ç†æ¥å£: <code>MemoryManager</code></p>
<blockquote>
<ul>
<li>StaticMemoryManager</li>
<li>UnifiedMemoryManager</li>
</ul>
</blockquote>
<p>æ–¹æ³•ï¼š é‡è¦çš„æ–¹æ³•æœ‰ 6 ä¸ªï¼š</p>
<p>3ä¸ªæ˜¯ç”³è¯·å†…å­˜çš„, 3ä¸ªæ˜¯é‡Šæ”¾å†…å­˜çš„</p>
<p>ä»¥ä¸Šè¿™3ä¸ªç”³è¯·å’Œ3ä¸ªé‡Šæ”¾å†…å­˜çš„æ–¹æ³•ï¼Œå…¶å®å°±æ˜¯å¯¹ç”³è¯·åˆ°çš„æ€»å†…å­˜è¿›è¡Œä¸€ç§é€»è¾‘ä¸Šçš„ç®¡ç†è§„åˆ’</p>
<blockquote>
<p>å †å†…å†…å­˜ å’Œ å †å¤–å†…å­˜ æ˜¯çœŸæ˜¯å­˜åœ¨çš„ä¸€ä¸ªå†…å­˜åŒºåŸŸ</p>
<p><strong>æ‰§è¡Œå†…å­˜å’Œå­˜å‚¨å†…å­˜ï¼Œéƒ½æ˜¯å †å†…å’Œå †å¤–å†…å­˜çš„ä¸€ä¸ªé€»è¾‘åŒºåˆ’çš„æ¦‚å¿µ.</strong> </p>
</blockquote>
<ul>
<li><a href="https://developer.ibm.com/zh/technologies/analytics/articles/ba-cn-apache-spark-memory-management/" target="_blank" rel="external">good Apache Spark å†…å­˜ç®¡ç†è¯¦è§£</a></li>
</ul>
<p><a href="http://spark.apache.org/docs/latest/configuration.html#memory-management" target="_blank" rel="external">Memory Management</a></p>
<p><img src="/images/spark/spark-aura-7.1.2.jpg" width="900" alt=""></p>
<h3 id="4-1-spark-çš„é™æ€å†…å­˜æ¨¡å‹"><a href="#4-1-spark-çš„é™æ€å†…å­˜æ¨¡å‹" class="headerlink" title="4.1 spark çš„é™æ€å†…å­˜æ¨¡å‹"></a>4.1 spark çš„é™æ€å†…å­˜æ¨¡å‹</h3><p>é™æ€å†…å­˜ç®¡ç†å›¾ç¤ºâ€”â€”å †å†…</p>
<p><img src="https://developer.ibm.com/developer/articles/ba-cn-apache-spark-memory-management/nl/zh/images/image002.png" alt=""></p>
<p>é™æ€å†…å­˜ç®¡ç†å›¾ç¤ºâ€”â€”å †å¤–</p>
<p><img src="https://developer.ibm.com/developer/articles/ba-cn-apache-spark-memory-management/nl/zh/images/image003.png" alt=""></p>
<h3 id="4-2-ç»Ÿä¸€å†…å­˜æ¨¡å‹"><a href="#4-2-ç»Ÿä¸€å†…å­˜æ¨¡å‹" class="headerlink" title="4.2 ç»Ÿä¸€å†…å­˜æ¨¡å‹"></a>4.2 ç»Ÿä¸€å†…å­˜æ¨¡å‹</h3><p>ç»Ÿä¸€å†…å­˜ç®¡ç†å›¾ç¤ºâ€”â€”å †å†…</p>
<p><img src="https://developer.ibm.com/developer/articles/ba-cn-apache-spark-memory-management/nl/zh/images/image004.png" alt=""></p>
<p><strong><code>Execution å ç”¨ Storage æ˜¯ä¸ä¼šå½’è¿˜çš„</code></strong>, åä¹‹ è¦å½’è¿˜</p>
<p>ç»Ÿä¸€å†…å­˜ç®¡ç†å›¾ç¤ºâ€”â€”å †å¤–</p>
<p><img src="https://developer.ibm.com/developer/articles/ba-cn-apache-spark-memory-management/nl/zh/images/image005.png" alt=""></p>
<p>application ä¸­çš„ job çš„æ‰§è¡Œï¼š FIFO</p>
<blockquote>
<p>æŠŠ YARN çš„èµ„æºåˆ†æ‹†æˆå¤šä¸ªä¸åŒçš„é˜Ÿåˆ—</p>
<p>æ¯ä¸ªé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡çš„æ‰§è¡Œæ˜¯é¡ºåºçš„ FIFO æ‰§è¡Œ</p>
<p>æ•´ä¸ªç¨‹åºåˆ°åº•æœ‰å¤šå°‘ä¸ª taskï¼Ÿ num-executors</p>
<p>å¦‚æœç°åœ¨ä¸€ä¸ª executor çš„ task æ•°é‡</p>
<p>ä¸€ä¸ª executor åˆ†é… 3~5ä¸ª cpu cores.</p>
</blockquote>
<h2 id="5-èµ„æºè°ƒä¼˜-2"><a href="#5-èµ„æºè°ƒä¼˜-2" class="headerlink" title="5. èµ„æºè°ƒä¼˜ 2"></a>5. èµ„æºè°ƒä¼˜ 2</h2><table>
<thead>
<tr>
<th style="text-align:left">èµ„æºè°ƒä¼˜ params</th>
<th style="text-align:left">description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&nbsp;(1) num-executors</td>
<td style="text-align:left">ä¸€ä¸ª executor å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹</td>
</tr>
<tr>
<td style="text-align:left">&nbsp;(2) executor-memory</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">&nbsp;(3) total-executor-cores</td>
<td style="text-align:left">æ¯ä¸ªè¿›ç¨‹å¯ä»¥ä½¿ç”¨å¤šå°‘ä¸ª cpu coreï¼Œä¸€ä¸ªexecutor å¯åŠ¨ 10 ä¸ªtask</td>
</tr>
<tr>
<td style="text-align:left">&nbsp;â€¦</td>
<td style="text-align:left">â€¦</td>
</tr>
<tr>
<td style="text-align:left">&nbsp;(4) spark.shuffle.memoryFraction</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">&nbsp;(5) spark.storage.memoryFraction</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"> â€¦</td>
<td style="text-align:left">â€¦</td>
</tr>
<tr>
<td style="text-align:left">spark-submit â€¦</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>å¦‚æœ master æ˜¯ local: é»˜è®¤çš„åˆ†åŒºæ•°æ˜¯ 1ä¸ªï¼Œè€Œä¸”æ²¡æœ‰ executore<br>å¦‚æœ master æ˜¯ spark: é»˜è®¤çš„åˆ†åŒºæ•°æ˜¯ 2ä¸ª min(defaultMinPartitions,2)ï¼Œæœ‰ executore</p>
<p>ä¸€ä¸ª spark åº”ç”¨ç¨‹åºï¼š</p>
<blockquote>
<p>500ä¸ªtask<br>50ä¸ªexecutor<br>æ¯ä¸€ä¸ª executor æ‰§è¡Œ 10 ä¸ª task å·¦å³<br>æ¯ä¸€ä¸ª executor åˆ†é… 3~5ä¸ª<br>æ€» cpu core æ•°ï¼š 150 ~ 250<br>æ¯ä¸€ä¸ª executor åˆ†é…çš„å†…å­˜æ˜¯ï¼š 2G<br>driverç¨‹åºåˆ†é…çš„å†…å­˜ï¼š 2G</p>
<p>æ•´ä¸ªåº”ç”¨æ€»æ¶ˆè€—ï¼š50*2 + 2 = 102 å†…å­˜</p>
</blockquote>
<p>æ¯ 1 ä¸ª stage ä¸­çš„åˆ°åº•æœ‰å¤šå°‘ä¸ª task ç”±è°å†³å®šï¼Ÿ</p>
<blockquote>
<p>åˆ’åˆ† stage çš„æ ‡å‡†ï¼š <code>shuffle ç®—å­ï¼Œå®½ä¾èµ–</code></p>
<p>åœ¨ä¸€ä¸ªstageä¸­æ˜¯æœ‰å¯èƒ½æœ‰ <code>å¤šä¸ªRDD</code> çš„</p>
<p>æ¯ä¸€ä¸ª stage ä¸­çš„ task æ€»æ•°, æ˜¯ç”±è¿™ä¸ª stage ä¸­çš„æœ€åä¸€ä¸ª RDD çš„<strong>åˆ†åŒºæ•°</strong>æ¥å†³å®šçš„.</p>
</blockquote>
<p>spark ä» hdfs ä¸­è¯»å–æ•°æ®ï¼Œä½¿ç”¨çš„æ–¹å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¾ç„¶æ˜¯ TextInputFormat</p>
<blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ mapreduce ä¸­æ•°æ®è¯»å–è§„åˆ™æ˜¯ç”±</p>
<ul>
<li><p><strong>TextInputFormat</strong> å’Œ <strong>LineRecordReader</strong> å†³å®š<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œå…¶å®å°±æ˜¯ 1ä¸ªblock 1ä¸ªtask</p>
</li>
<li><p>æ¯ä¸ªå…ƒç´ çš„è¯»å–æ–¹å¼ä¾ç„¶æ˜¯é€è¡Œè¯»å–å½¢æˆä¸ºä¸€ä¸ªå…ƒç´ </p>
<p>mapper: key, value<br>rdd: value</p>
<p>RDD[String]</p>
</li>
</ul>
</blockquote>
<p><strong>spark.storage.memoryFraction</strong></p>
<p><strong>spark.shuffle.memoryFraction</strong></p>
<h3 id="èµ„æºå‚æ•°å‚è€ƒç¤ºä¾‹"><a href="#èµ„æºå‚æ•°å‚è€ƒç¤ºä¾‹" class="headerlink" title="èµ„æºå‚æ•°å‚è€ƒç¤ºä¾‹"></a>èµ„æºå‚æ•°å‚è€ƒç¤ºä¾‹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./bin/spark-submit \</span><br><span class="line">  --master yarn</span><br><span class="line">  --deploy-mode cluster</span><br><span class="line">  --num-executors 100 \</span><br><span class="line">  --executor-memory 6G \</span><br><span class="line">  --executor-cores 4 \</span><br><span class="line">  --driver-memory 1G \</span><br><span class="line">  --conf spark.default.parallelism=1000 \    Taskæ€»æ•°</span><br><span class="line">  --conf spark.storage.memoryFraction=0.5 \  å­˜å‚¨å†…å­˜</span><br><span class="line">  --conf spark.shuffle.memoryFraction=0.3 \  æ‰§è¡Œå†…å­˜</span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æœºå™¨ï¼š 32/64cpu, 64G/128G/256G</p>
<blockquote>
<p>60cpu core, 240G å†…å­˜ã€‚   å¦å¤–16Gå†…å­˜ç»™ç³»ç»Ÿè¿è¡Œç”¨.</p>
<blockquote>
<p>æ¯ä¸€ä¸ª cpu core 4G å†…å­˜</p>
</blockquote>
<p>æ¯ä¸€ä¸ª executor è¦åˆ†é…2~3ä¸ªcpu coreï¼Œ åˆ†é…å†…å­˜ï¼š 8~12G</p>
<p>æ¯ä¸€ä¸ªapplicationå¤§æ¦‚æ˜¯ï¼š 100ä¸ªexecutor</p>
</blockquote>
<h2 id="6-mapreduceçš„shuffleå¤ä¹ "><a href="#6-mapreduceçš„shuffleå¤ä¹ " class="headerlink" title="6. mapreduceçš„shuffleå¤ä¹ "></a>6. mapreduceçš„shuffleå¤ä¹ </h2><p>key, value</p>
<p>kvbuffer:</p>
<p>ptn, key, value</p>
<p>ptn+key</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://developer.ibm.com/zh/technologies/analytics/articles/ba-cn-apache-spark-memory-management/" target="_blank" rel="external">Apache Spark å†…å­˜ç®¡ç†è¯¦è§£</a></li>
<li><a href="https://blog.csdn.net/zhanaolu4821/article/details/102932209" target="_blank" rel="external">Sparkå­¦ä¹ ä¹‹è·¯ ï¼ˆåä¸€ï¼‰SparkCoreçš„è°ƒä¼˜ä¹‹Sparkå†…å­˜æ¨¡å‹</a></li>
<li><a href="https://study.163.com/course/courseLearn.htm?courseId=1208880821#/learn/video?lessonId=1278316678&amp;courseId=1208880821" target="_blank" rel="external">äº‘è¯¾å ‚ SparkSQL çš„æ•°æ®æºæ“ä½œ</a></li>
<li><a href="https://blog.csdn.net/huang66666666/category_9399107.html" target="_blank" rel="external">å¤§æ•°æ®èµ„æ–™ç¬”è®°æ•´ç†</a></li>
<li><a href="https://tech.meituan.com/2016/05/12/spark-tuning-pro.html" target="_blank" rel="external">Sparkæ€§èƒ½ä¼˜åŒ–æŒ‡å—â€”â€”é«˜çº§ç¯‡</a></li>
<li><a href="https://tech.meituan.com/2016/04/29/spark-tuning-basic.html" target="_blank" rel="external">Sparkæ€§èƒ½ä¼˜åŒ–æŒ‡å—â€”â€”åŸºç¡€ç¯‡</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å…¨å®‡å®™æœ€å¼ºçš„25æ¡Hiveæ€§èƒ½è°ƒä¼˜å®æˆ˜]]></title>
      <url>http://shopee.ai/2020/08/18/hadoop/hive-optimization-25-cases/</url>
      <content type="html"><![CDATA[<p><img src="/images/hadoop/Hive-Data-Model-Optimization.jpg" width="550" alt=""></p>
<a id="more"></a>
<p>è°ƒä¼˜:</p>
<ol>
<li>Hiveåº•å±‚æ‰§è¡Œå¼•æ“æ·±åº¦å‰–æ</li>
<li>25æ¡Hiveæ€§èƒ½è°ƒä¼˜å®æˆ˜</li>
</ol>
<center><embed src="/images/hadoop/å¥ˆå­¦å¤§æ•°æ®å…¬å¼€è¯¾-Hiveè°ƒä¼˜-æ­£è¯¾æ–‡æ¡£.pdf" width="930" height="600"></center>

<h1 id="æ·±åº¦å‰–æHiveæ¶æ„è®¾è®¡ä¸å·¥ä½œåŸç†"><a href="#æ·±åº¦å‰–æHiveæ¶æ„è®¾è®¡ä¸å·¥ä½œåŸç†" class="headerlink" title="æ·±åº¦å‰–æHiveæ¶æ„è®¾è®¡ä¸å·¥ä½œåŸç†"></a>æ·±åº¦å‰–æHiveæ¶æ„è®¾è®¡ä¸å·¥ä½œåŸç†</h1><h2 id="4-1-Hive-çš„æ¦‚å¿µ"><a href="#4-1-Hive-çš„æ¦‚å¿µ" class="headerlink" title="4.1 Hive çš„æ¦‚å¿µ"></a>4.1 Hive çš„æ¦‚å¿µ</h2><blockquote>
<p>Hiveä¾èµ–HDFSæ•°æ®ï¼ŒHiveå°†HQLè½¬æˆMapReduceæ‰§è¡Œï¼Œæ‰€ä»¥è¯´Hiveæ˜¯åŸºäºHadoopçš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·</p>
<p>å®è´¨å°±æ˜¯ä¸€æ¬¾åŸºäºHDFSçš„MapReduceè®¡ç®—æ¡†æ¶ï¼Œå¯¹å­˜å‚¨åœ¨HDFSä¸­çš„æ•°æ®è¿›è¡Œåˆ†æå’Œç®¡ç†ã€‚</p>
</blockquote>
<h2 id="4-2-Hive-çš„å·¥ä½œæœºåˆ¶"><a href="#4-2-Hive-çš„å·¥ä½œæœºåˆ¶" class="headerlink" title="4.2 Hive çš„å·¥ä½œæœºåˆ¶"></a>4.2 Hive çš„å·¥ä½œæœºåˆ¶</h2><p>ç®€å•æ€»ç»“:</p>
<blockquote>
<p>1ã€Hiveçš„å†…ç½®å››å¤§ç»„ä»¶(Driver, Compiler, Optimizer, Executor)å®ŒæˆHQLåˆ°MapReduceçš„è½¬æ¢</p>
<p>2ã€åœ¨Hiveæ‰§è¡ŒHQLç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¼šä»å…ƒæ•°æ®åº“è·å–è¡¨ç»“æ„å’Œæ•°æ®å­˜å‚¨ç›®å½•ç­‰ç›¸å…³ä¿¡æ¯ </p>
<p>3ã€Hiveåªæ˜¯å®Œæˆå¯¹å­˜å‚¨åœ¨HDFSä¸Šçš„ç»“æ„åŒ–æ•°æ®çš„ç®¡ç†ï¼Œå¹¶æä¾›ä¸€ç§ç±»SQLçš„æ“ä½œæ–¹å¼æ¥è¿›è¡Œæµ·é‡æ•°æ®è¿è¡Œï¼Œ åº•å±‚æ”¯æŒå¤šç§åˆ†å¸ƒå¼è®¡ç®—å¼•æ“ã€‚</p>
</blockquote>
<h1 id="æœ€å…¨25æ¡é€‰æ€§èƒ½è°ƒä¼˜å…¨è¯¦è§£"><a href="#æœ€å…¨25æ¡é€‰æ€§èƒ½è°ƒä¼˜å…¨è¯¦è§£" class="headerlink" title="æœ€å…¨25æ¡é€‰æ€§èƒ½è°ƒä¼˜å…¨è¯¦è§£"></a>æœ€å…¨25æ¡é€‰æ€§èƒ½è°ƒä¼˜å…¨è¯¦è§£</h1><h2 id="5-1-è°ƒä¼˜æ¦‚è¿°"><a href="#5-1-è°ƒä¼˜æ¦‚è¿°" class="headerlink" title="5.1 è°ƒä¼˜æ¦‚è¿°"></a>5.1 è°ƒä¼˜æ¦‚è¿°</h2><p>Hive ä½œä¸ºå¤§æ•°æ®é¢†åŸŸå¸¸ç”¨çš„æ•°æ®ä»“åº“ç»„ä»¶ï¼Œåœ¨å¹³æ—¶è®¾è®¡å’ŒæŸ¥è¯¢æ—¶è¦ç‰¹åˆ«æ³¨æ„æ•ˆç‡ã€‚<br>å½±å“ Hive æ•ˆç‡çš„å‡ ä¹ä»ä¸æ˜¯æ•°æ®é‡è¿‡å¤§ï¼Œè€Œæ˜¯æ•°æ®å€¾æ–œã€å†—ä½™ã€Jobæˆ–I/Oè¿‡å¤šã€MapReduce åˆ†é…ä¸åˆç†ç­‰ã€‚</p>
<blockquote>
<p>å¯¹ Hive çš„è°ƒä¼˜æ—¢åŒ…å« Hive çš„å»ºè¡¨è®¾è®¡æ–¹é¢ï¼Œå¯¹HiveHQL è¯­å¥æœ¬èº«çš„ä¼˜åŒ–ï¼Œä¹ŸåŒ…å« Hive é…ç½®å‚æ•°å’Œåº•å±‚å¼•æ“ MapReduceæ–¹é¢çš„è°ƒæ•´ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æ­¤æ¬¡è°ƒä¼˜ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å››ä¸ªæ–¹é¢å±•å¼€:</p>
<blockquote>
<p>1ã€Hiveçš„å»ºè¡¨è®¾è®¡å±‚é¢ </p>
<p>2ã€HQLè¯­æ³•å’Œè¿è¡Œå‚æ•°å±‚é¢ </p>
<p>3ã€Hiveæ¶æ„å±‚é¢ </p>
<p>4ã€Hiveæ•°æ®å€¾æ–œ</p>
</blockquote>
<p><strong>æ€»ä¹‹ï¼ŒHiveè°ƒä¼˜çš„ä½œç”¨ï¼š åœ¨ä¿è¯ä¸šåŠ¡ç»“æœä¸å˜çš„å‰æä¸‹ï¼Œé™ä½èµ„æºçš„ä½¿ç”¨é‡ï¼Œå‡å°‘ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´ã€‚</strong></p>
<h2 id="5-2-è°ƒä¼˜é¡»çŸ¥"><a href="#5-2-è°ƒä¼˜é¡»çŸ¥" class="headerlink" title="5.2 è°ƒä¼˜é¡»çŸ¥"></a>5.2 è°ƒä¼˜é¡»çŸ¥</h2><h2 id="5-3-Hiveå»ºè¡¨è®¾è®¡å±‚é¢"><a href="#5-3-Hiveå»ºè¡¨è®¾è®¡å±‚é¢" class="headerlink" title="5.3 Hiveå»ºè¡¨è®¾è®¡å±‚é¢"></a>5.3 Hiveå»ºè¡¨è®¾è®¡å±‚é¢</h2><h3 id="5-3-1-åˆ©ç”¨åˆ†åŒºè¡¨ä¼˜åŒ–"><a href="#5-3-1-åˆ©ç”¨åˆ†åŒºè¡¨ä¼˜åŒ–" class="headerlink" title="5.3.1 åˆ©ç”¨åˆ†åŒºè¡¨ä¼˜åŒ–"></a>5.3.1 åˆ©ç”¨åˆ†åŒºè¡¨ä¼˜åŒ–</h3><h3 id="5-3-2-åˆ©ç”¨åˆ†æ¡¶è¡¨ä¼˜åŒ–"><a href="#5-3-2-åˆ©ç”¨åˆ†æ¡¶è¡¨ä¼˜åŒ–" class="headerlink" title="5.3.2 åˆ©ç”¨åˆ†æ¡¶è¡¨ä¼˜åŒ–"></a>5.3.2 åˆ©ç”¨åˆ†æ¡¶è¡¨ä¼˜åŒ–</h3><p>è·Ÿåˆ†åŒºçš„æ¦‚å¿µå¾ˆç›¸ä¼¼, éƒ½æ˜¯æŠŠæ•°æ®åˆ†æˆå¤šä¸ªä¸åŒç±»åˆ«, åŒºåˆ«å°±æ˜¯è§„åˆ™ä¸ä¸€æ · !</p>
<blockquote>
<p>1ã€åˆ†åŒºï¼š æŒ‰ç…§å­—æ®µå€¼æ¥è¿›è¡Œ: ä¸€ä¸ªåˆ†åŒº, å°±åªæ˜¯åŒ…å«è¿™ä¸ªè¿™ä¸€ä¸ªå€¼çš„æ‰€æœ‰è®°å½•</p>
</blockquote>
<p>Hive Bucket, åˆ†æ¡¶, æ˜¯æŒ‡å°†æ•°æ®ä»¥æŒ‡å®šåˆ—çš„å€¼ä¸ºkeyè¿›è¡Œhash, hash åˆ°æŒ‡å®šæ•°æ®çš„æ¡¶ä¸­.</p>
<h3 id="5-3-3-åˆé€‚çš„æ–‡ä»¶å­˜å‚¨æ ¼å¼"><a href="#5-3-3-åˆé€‚çš„æ–‡ä»¶å­˜å‚¨æ ¼å¼" class="headerlink" title="5.3.3 åˆé€‚çš„æ–‡ä»¶å­˜å‚¨æ ¼å¼"></a>5.3.3 åˆé€‚çš„æ–‡ä»¶å­˜å‚¨æ ¼å¼</h3><h3 id="5-3-4-åˆé€‚çš„å‹ç¼©æ ¼å¼"><a href="#5-3-4-åˆé€‚çš„å‹ç¼©æ ¼å¼" class="headerlink" title="5.3.4 åˆé€‚çš„å‹ç¼©æ ¼å¼"></a>5.3.4 åˆé€‚çš„å‹ç¼©æ ¼å¼</h3><h2 id="5-4-HQL-è¯­æ³•å’Œè¿è¡Œå‚æ•°å±‚é¢"><a href="#5-4-HQL-è¯­æ³•å’Œè¿è¡Œå‚æ•°å±‚é¢" class="headerlink" title="5.4 HQL è¯­æ³•å’Œè¿è¡Œå‚æ•°å±‚é¢"></a>5.4 HQL è¯­æ³•å’Œè¿è¡Œå‚æ•°å±‚é¢</h2><h3 id="5-4-1-æŸ¥çœ‹Hiveæ‰§è¡Œè®¡åˆ’"><a href="#5-4-1-æŸ¥çœ‹Hiveæ‰§è¡Œè®¡åˆ’" class="headerlink" title="5.4.1 æŸ¥çœ‹Hiveæ‰§è¡Œè®¡åˆ’"></a>5.4.1 æŸ¥çœ‹Hiveæ‰§è¡Œè®¡åˆ’</h3><h3 id="5-4-2-åˆ—è£å‰ª"><a href="#5-4-2-åˆ—è£å‰ª" class="headerlink" title="5.4.2 åˆ—è£å‰ª"></a>5.4.2 åˆ—è£å‰ª</h3><h3 id="5-4-3-è°“è¯ä¸‹æ¨"><a href="#5-4-3-è°“è¯ä¸‹æ¨" class="headerlink" title="5.4.3 è°“è¯ä¸‹æ¨"></a>5.4.3 è°“è¯ä¸‹æ¨</h3><h3 id="5-4-4-åˆ†åŒºè£å‰ª"><a href="#5-4-4-åˆ†åŒºè£å‰ª" class="headerlink" title="5.4.4 åˆ†åŒºè£å‰ª"></a>5.4.4 åˆ†åŒºè£å‰ª</h3><h3 id="5-4-5-åˆå¹¶å°æ–‡ä»¶"><a href="#5-4-5-åˆå¹¶å°æ–‡ä»¶" class="headerlink" title="5.4.5 åˆå¹¶å°æ–‡ä»¶"></a>5.4.5 åˆå¹¶å°æ–‡ä»¶</h3><h3 id="5-4-6-åˆç†è®¾ç½®MapTaskå¹¶è¡Œåº¦"><a href="#5-4-6-åˆç†è®¾ç½®MapTaskå¹¶è¡Œåº¦" class="headerlink" title="5.4.6 åˆç†è®¾ç½®MapTaskå¹¶è¡Œåº¦"></a>5.4.6 åˆç†è®¾ç½®MapTaskå¹¶è¡Œåº¦</h3><h3 id="5-4-7-åˆç†è®¾ç½®ReduceTaskå¹¶è¡Œåº¦"><a href="#5-4-7-åˆç†è®¾ç½®ReduceTaskå¹¶è¡Œåº¦" class="headerlink" title="5.4.7 åˆç†è®¾ç½®ReduceTaskå¹¶è¡Œåº¦"></a>5.4.7 åˆç†è®¾ç½®ReduceTaskå¹¶è¡Œåº¦</h3><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://tech.meituan.com/2016/04/29/spark-tuning-basic.html" target="_blank" rel="external">Sparkæ€§èƒ½ä¼˜åŒ–æŒ‡å—â€”â€”åŸºç¡€ç¯‡</a></li>
<li><a href="https://tech.meituan.com/2016/05/12/spark-tuning-pro.html" target="_blank" rel="external">Sparkæ€§èƒ½ä¼˜åŒ–æŒ‡å—â€”â€”é«˜çº§ç¯‡</a></li>
<li><a href="https://blog.csdn.net/huang66666666/category_9399107.html" target="_blank" rel="external">å¤§æ•°æ®èµ„æ–™ç¬”è®°æ•´ç†</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[python çš„ getattr() å‡½æ•°]]></title>
      <url>http://shopee.ai/2020/08/13/python/language/py_getattr/</url>
      <content type="html"><![CDATA[<p>getattr(object, name[,default])</p>
<p>è·å–å¯¹è±¡objectçš„å±æ€§æˆ–è€…æ–¹æ³•ï¼Œå¦‚æœå­˜åœ¨æ‰“å°å‡ºæ¥ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ‰“å°å‡ºé»˜è®¤å€¼ï¼Œé»˜è®¤å€¼å¯é€‰.</p>
<a id="more"></a>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ˜¯è¿”å›çš„å¯¹è±¡çš„æ–¹æ³•ï¼Œè¿”å›çš„æ˜¯æ–¹æ³•çš„å†…å­˜åœ°å€ï¼Œå¦‚æœéœ€è¦è¿è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥åœ¨åé¢æ·»åŠ ä¸€å¯¹æ‹¬å·.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/51370571" target="_blank" rel="external">pythonçš„getattrï¼ˆï¼‰å‡½æ•°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Shuffle è°ƒä¼˜çš„11æ¡ç»éªŒ (é©¬ä¸­å)]]></title>
      <url>http://shopee.ai/2020/08/12/spark/spark-ma-public-shuffle-optimization/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-aura-6.7-shuffle-logo.png" width="550" alt=""></p>
<a id="more"></a>
<p>è°ƒä¼˜:</p>
<blockquote>
<ol>
<li><strong>å¼€å‘è°ƒä¼˜</strong></li>
<li><strong>èµ„æºè°ƒä¼˜</strong></li>
<li><strong>DataSkew</strong></li>
<li><strong>shuffle</strong></li>
</ol>
</blockquote>
<p>ä»Šå¤©çš„å†…å®¹:</p>
<p>ï¼ˆ1ï¼‰<strong>Spark Task</strong> æ‰§è¡Œè¿‡ç¨‹è¯¦ç»†æ¢³ç†</p>
<p>ï¼ˆ2ï¼‰<strong>DataSkew</strong> å‘ç”Ÿæ—¶çš„ç°è±¡å’ŒåŸå› åˆ†æ</p>
<p>ï¼ˆ3ï¼‰DataSkew åŸç†åˆ†æ</p>
<p>ï¼ˆ4ï¼‰DataSkew é€‚ç”¨åœºæ™¯åˆ†æ</p>
<p>ï¼ˆ5ï¼‰DataSkew solution ä¼˜ç¼ºç‚¹åˆ†æ</p>
<p>ï¼ˆ6ï¼‰DataSkew solution å®è·µç»éªŒåˆ†äº«</p>
<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>1). å“ªä¸ªæ˜¯ çª„ä¾èµ– ï¼Ÿ <strong><code>B</code></strong> (è®¡ç®—ä¹‹å‰ä¹‹å 2ä¸ª RDD è®°å½•æ˜¯ 1å¯¹1)</p>
<blockquote>
<p>Aã€join<br>Bã€<strong>filter map foreach</strong><br>Cã€sort<br>Dã€group</p>
</blockquote>
<p>2). å…³äºå¹¿æ’­å˜é‡ ï¼Ÿ <strong><code>BCD</code></strong> (åœ¨Driverå£°æ˜çš„ï¼Œç”¨æ¥åºåˆ—åŒ–åˆ°æ¯ä¸ªExecutorä¸­ä¾›Taskä½¿ç”¨)</p>
<blockquote>
<p>Bã€<strong>read-only</strong><br>Cã€å­˜å‚¨åœ¨å„ä¸ªèŠ‚ç‚¹ ï¼ˆä»èŠ‚ç‚¹ï¼šWorkerè´Ÿè´£å¯åŠ¨å’Œç®¡ç† Executorï¼‰<br>Dã€èƒ½å­˜å‚¨åœ¨ç£ç›˜æˆ–HDFS ï¼ˆé»˜è®¤æ˜¯å­˜å‚¨åœ¨å†…å­˜é‡Œé¢ï¼Œ[å­˜å‚¨å†…å­˜ æ‰§è¡Œå†…å­˜]ï¼‰</p>
</blockquote>
<p>3). Spark ä¸ºä»€ä¹ˆæ¯” MapReducer å¿«? <strong><code>ABC</code></strong></p>
<blockquote>
<p>Aã€åŸºäºå†…å­˜è®¡ç®—ï¼Œå‡å°‘ä½æ•ˆçš„ç£ç›˜äº¤äº’<br>Bã€é«˜æ•ˆçš„è°ƒåº¦ç®—æ³•, åŸºäº DAG<br>Cã€å®¹é”™æœºåˆ¶ Linageï¼Œç²¾åéƒ¨åˆ†å°±æ˜¯ DAG å’Œ Linage</p>
</blockquote>
<p>DAGå¼•æ“ï¼ == mapreduce spark èƒ½å¤ŸæŠŠä¸­é—´ç»“æœæ”¾åˆ°å†…å­˜é‡Œé¢<br>spark å®˜æ–¹å®£ç§°ï¼š SPark hadoop 0.9:100 è¿­ä»£è®¡ç®— åšä¸€æ¬¡ 3ï¼š1</p>
<h2 id="Distributed-Computing"><a href="#Distributed-Computing" class="headerlink" title="Distributed Computing"></a>Distributed Computing</h2><p>åˆ†å¸ƒå¼è®¡ç®—ï¼Œä¸æ€•æ•°æ®é‡å¤§ï¼Œå°±æ€• <strong>DataSkew</strong></p>
<h1 id="Shuffle-è°ƒä¼˜-10ç‚¹-DataSkew-Solution"><a href="#Shuffle-è°ƒä¼˜-10ç‚¹-DataSkew-Solution" class="headerlink" title="Shuffle è°ƒä¼˜ 10ç‚¹ (DataSkew Solution)"></a>Shuffle è°ƒä¼˜ 10ç‚¹ (DataSkew Solution)</h1><center><embed src="/images/spark/Spark-Shuffle-Public/Shuffle-Opt.pdf" width="990" height="600"></center>

<h2 id="1-ä½¿ç”¨Hive-ETLé¢„å¤„ç†æ•°æ®"><a href="#1-ä½¿ç”¨Hive-ETLé¢„å¤„ç†æ•°æ®" class="headerlink" title="1. ä½¿ç”¨Hive ETLé¢„å¤„ç†æ•°æ®"></a>1. ä½¿ç”¨Hive ETLé¢„å¤„ç†æ•°æ®</h2><p>å¯¼è‡´ DataSkew çš„æ˜¯ Hive è¡¨ã€‚å¦‚æœè¯¥ Hive è¡¨ä¸­çš„æ•°æ®æœ¬èº«å¾ˆä¸å‡åŒ€(æ¯”å¦‚æŸä¸ª key å¯¹åº”äº† 100 ä¸‡æ•°æ®ï¼Œå…¶ä»– key æ‰å¯¹åº”äº† 10 æ¡æ•°æ®)ï¼Œè€Œä¸šåŠ¡åœºæ™¯éœ€è¦é¢‘ç¹ç”¨ Spark å¯¹ Hive è¡¨æ‰§è¡ŒæŸä¸ªåˆ†ææ“ä½œï¼Œé‚£ä¹ˆæ¯”è¾ƒé€‚åˆä½¿ç”¨è¿™ç§æŠ€æœ¯æ–¹æ¡ˆ:</p>
<p><img src="/images/spark/Spark-Shuffle-Public/1-Hive-ETL_meitu_1.png" width="950" alt="Hive ETL é¢„å¤„ç†æ•°æ®"></p>
<h2 id="2-è°ƒæ•´shuffleæ“ä½œçš„å¹¶è¡Œåº¦"><a href="#2-è°ƒæ•´shuffleæ“ä½œçš„å¹¶è¡Œåº¦" class="headerlink" title="2. è°ƒæ•´shuffleæ“ä½œçš„å¹¶è¡Œåº¦"></a>2. è°ƒæ•´shuffleæ“ä½œçš„å¹¶è¡Œåº¦</h2><blockquote>
<p>ç¢°è¿æ°”åšæ³•ï¼š åŸæ¥çš„å¹¶è¡Œåº¦å¯¼è‡´äº†å€¾æ–œï¼Œè°ƒæ•´å¹¶è¡Œåº¦ï¼Œ å¦‚æœæ˜¯è‡ªå®šä¹‰çš„åˆ†åŒºè§„åˆ™å†³å®šå¿…é¡»æ˜¯nä¸ªåˆ†åŒºï¼Œnä¸ªTask</p>
<p>   ä¾ç„¶ä½¿ç”¨é»˜è®¤çš„HasPartitoinerï¼Œé‚£ä¹ˆè¿™ç§ç¢°è¿æ°”çš„æ–¹æ¡ˆæ˜¯æœ‰ç”¨çš„</p>
</blockquote>
<p>å¤§é‡ä¸åŒçš„Keyè¢«åˆ†é…åˆ°äº†ç›¸åŒçš„Taské€ æˆè¯¥Taskæ•°æ®é‡è¿‡å¤§ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å¿…é¡»è¦å¯¹æ•°æ®å€¾æ–œè¿éš¾è€Œä¸Šï¼Œé‚£ä¹ˆå»ºè®®ä¼˜å…ˆä½¿ç”¨è¿™ç§æ–¹æ¡ˆï¼Œå› ä¸ºè¿™æ˜¯å¤„ç†æ•°æ®å€¾æ–œæœ€ç®€å•çš„ä¸€ ç§æ–¹æ¡ˆã€‚ä½†æ˜¯ä¹Ÿæ˜¯ä¸€ç§å±äº <strong>ç¢°è¿æ°”çš„æ–¹æ¡ˆ</strong>ã€‚å› ä¸ºè¿™ç§æ–¹æ¡ˆï¼Œå¹¶ä¸èƒ½è®©ä½ ä¸€å®šè§£å†³æ•°æ®å€¾æ–œï¼Œç”šè‡³æœ‰å¯èƒ½ åŠ é‡ã€‚é‚£å½“ç„¶ï¼Œæ€»å½’ï¼Œä½ ä¼šè°ƒæ•´åˆ°ä¸€ä¸ªåˆé€‚çš„å¹¶è¡Œåº¦æ˜¯èƒ½è§£å†³çš„ã€‚å‰ææ˜¯è¿™ç§æ–¹æ¡ˆé€‚ç”¨äº Hashæ•£åˆ—çš„ åˆ†åŒºæ–¹å¼ã€‚å‡‘å·§çš„æ˜¯ï¼Œå„ç§åˆ†å¸ƒå¼è®¡ç®—å¼•æ“ï¼Œæ¯”å¦‚MapReduceï¼ŒSpark ç­‰é»˜è®¤éƒ½æ˜¯ä½¿ç”¨ Hashæ•£åˆ—çš„æ–¹ å¼æ¥è¿›è¡Œæ•°æ®åˆ†åŒºã€‚</p>
<p>Spark åœ¨åš Shuffle æ—¶ï¼Œé»˜è®¤ä½¿ç”¨ HashPartitioner(éHash Shuffle)å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºã€‚å¦‚æœå¹¶è¡Œåº¦è®¾ ç½®çš„ä¸åˆé€‚ï¼Œå¯èƒ½é€ æˆå¤§é‡ä¸ç›¸åŒçš„ Key å¯¹åº”çš„æ•°æ®è¢«åˆ†é…åˆ°äº†åŒä¸€ä¸ª Task ä¸Šï¼Œé€ æˆè¯¥ Task æ‰€å¤„ç†çš„ æ•°æ®è¿œå¤§äºå…¶å®ƒ Taskï¼Œä»è€Œé€ æˆ <code>DataSkew</code>ã€‚</p>
<p>å¦‚æœè°ƒæ•´ Shuffle æ—¶çš„å¹¶è¡Œåº¦ï¼Œä½¿å¾—åŸæœ¬è¢«åˆ†é…åˆ°åŒä¸€ Task çš„ä¸åŒ Key å‘é…åˆ°ä¸åŒ Task ä¸Šå¤„ç†ï¼Œåˆ™å¯ é™ä½åŸ Task æ‰€éœ€å¤„ç†çš„æ•°æ®é‡ï¼Œä»è€Œç¼“è§£ <code>DataSkew</code> é€ æˆçš„çŸ­æ¿æ•ˆåº”ã€‚</p>
<p><img src="/images/spark/Spark-Shuffle-Public/2-Shuffle.png" width="950" alt="å¹¶è¡Œåº¦ä¸º2, å¹¶è¡Œåº¦ä¸º3"></p>
<h3 id="2-5-ä¼ä¸šæœ€ä½³å®è·µ"><a href="#2-5-ä¼ä¸šæœ€ä½³å®è·µ" class="headerlink" title="2.5. ä¼ä¸šæœ€ä½³å®è·µ"></a>2.5. ä¼ä¸šæœ€ä½³å®è·µ</h3><p>è¯¥æ–¹æ¡ˆé€šå¸¸æ— æ³•å½»åº•è§£å†³æ•°æ®å€¾æ–œï¼Œå› ä¸ºå¦‚æœå‡ºç°ä¸€äº›æç«¯æƒ…å†µï¼Œæ¯”å¦‚æŸä¸ªkeyå¯¹åº”çš„æ•°æ®é‡æœ‰100ä¸‡ï¼Œ é‚£ä¹ˆæ— è®ºä½ çš„taskæ•°é‡å¢åŠ åˆ°å¤šå°‘ï¼Œè¿™ä¸ªå¯¹åº”ç€100ä¸‡æ•°æ®çš„keyè‚¯å®šè¿˜æ˜¯ä¼šåˆ†é…åˆ°ä¸€ä¸ªtaskä¸­å»å¤„ç†ï¼Œ å› æ­¤æ³¨å®šè¿˜æ˜¯ä¼šå‘ç”Ÿæ•°æ®å€¾æ–œçš„ã€‚æ‰€ä»¥è¿™ç§æ–¹æ¡ˆåªèƒ½è¯´æ˜¯åœ¨å‘ç°æ•°æ®å€¾æ–œæ—¶å°è¯•ä½¿ç”¨çš„ç¬¬ä¸€ç§æ‰‹æ®µï¼Œå° è¯•å»ç”¨å˜´ç®€å•çš„æ–¹æ³•ç¼“è§£æ•°æ®å€¾æ–œè€Œå·²ï¼Œæˆ–è€…æ˜¯å’Œå…¶ä»–æ–¹æ¡ˆç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p>
<blockquote>
<p>å¦‚æœä¹‹å‰çš„é¢å¹¶è¡Œåº¦æ˜¯12ï¼Œç°åœ¨è°ƒæ•´æˆä¸º 18 æœ‰ç”¨ä¹ˆ?å¹¶æ²¡æœ‰å¤šå¤§çš„æ”¹å–„ 10ä¸ª 11ä¸ª 13</p>
<p>ä¸è¦æ‹¥æœ‰ä¸€æ ·çš„å…¬çº¦æ•°, (ç‰¹åˆ«æ˜¯æœ€å¤§å…¬çº¦æ•°)</p>
</blockquote>
<h2 id="3-è¿‡æ»¤å°‘æ•°å¯¼è‡´å€¾æ–œçš„key"><a href="#3-è¿‡æ»¤å°‘æ•°å¯¼è‡´å€¾æ–œçš„key" class="headerlink" title="3. è¿‡æ»¤å°‘æ•°å¯¼è‡´å€¾æ–œçš„key"></a>3. è¿‡æ»¤å°‘æ•°å¯¼è‡´å€¾æ–œçš„key</h2><p>æ— ç”¨æ•°æ®ç›´æ¥è¿‡æ»¤ã€‚ äº§ç”Ÿæ•°æ®å€¾æ–œæ˜¯ç”±äºéƒ¨åˆ†æ— æ•ˆæ•°æ®å¯¼è‡´çš„ã€‚æŠŠè¿™éƒ¨åˆ†æ— æ•ˆæ•°æ®è¿‡æ»¤æ‰å³å¯ï¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä½ ä»¬çš„å¤§å®½è¡¨ï¼šæœ‰äº›å­—æ®µçš„å€¼ï¼šnull   department</span><br><span class="line">select department, count(*) as total from employee group by deparment;</span><br><span class="line">åº•å±‚çš„åˆ†åŒºè§„åˆ™ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆè§„åˆ™ï¼Œéƒ½ä¼šæŠŠæ‰€æœ‰çš„ null è®°å½•åˆ†å‘åˆ°åŒä¸€ä¸ªTask</span><br><span class="line"></span><br><span class="line">GMè§’è‰²ï¼š </span><br><span class="line">  select department, count(*) as total from employee group by deparment where role != &quot;gm&quot;;</span><br><span class="line">  rdd = sparkContext.xxxx()</span><br><span class="line">  rdd.filter(x =&gt; true | false)  æŠŠæ— æ•ˆæ•°æ®è¿›è¡Œè¿‡æ»¤</span><br></pre></td></tr></table></figure>
<h2 id="4-å°†reduce-joinè½¬ä¸ºmap-join"><a href="#4-å°†reduce-joinè½¬ä¸ºmap-join" class="headerlink" title="4. å°†reduce joinè½¬ä¸ºmap join"></a>4. å°†reduce joinè½¬ä¸ºmap join</h2><blockquote>
<p>å¤§å°è¡¨åšè¿æ¥, mapjoin  </p>
<p>sparkä¸­å¦‚ä½•å®ç° mapjoin çš„é€»è¾‘å‘¢ï¼Ÿ ä½¿ç”¨ sparkçš„å¹¿æ’­æœºåˆ¶ï¼ </p>
<p>å°±æ˜¯å¯ä»¥æŠŠå°è¡¨æ•°æ®å½“åšå¹¿æ’­å˜é‡ï¼Œä½¿ç”¨å¹¿æ’­æœºåˆ¶ï¼ŒæŠŠè¯¥å˜é‡æ•°æ®ï¼Œå¹¿æ’­åˆ°æ‰€æœ‰çš„executoré‡Œé¢å»ã€‚ </p>
</blockquote>
<p>reduceJoin:</p>
<p><img src="/images/spark/Spark-Shuffle-Public/3-reduceJoin_meitu_1.jpg" width="880" alt="reduceJoin"></p>
<p>mapJoin:</p>
<p><img src="/images/spark/Spark-Shuffle-Public/3-MapJoin.png" width="" alt="mapJoin"></p>
<h2 id="5-é‡‡æ ·å€¾æ–œ-key-å¹¶åˆ†æ‹†-join-æ“ä½œ"><a href="#5-é‡‡æ ·å€¾æ–œ-key-å¹¶åˆ†æ‹†-join-æ“ä½œ" class="headerlink" title="5. é‡‡æ ·å€¾æ–œ key å¹¶åˆ†æ‹† join æ“ä½œ"></a>5. é‡‡æ ·å€¾æ–œ key å¹¶åˆ†æ‹† join æ“ä½œ</h2><p>ç°åœ¨å‡è®¾ä¸€ä¸ªæ•°æ®å€¾æ–œåœºæ™¯ä¸­çš„æ•°æ®åˆ†ä¸ºä¸¤ç§ï¼š</p>
<blockquote>
<p>ä¸€ç§æ˜¯å¯¼è‡´å€¾æ–œçš„æ•°æ®é›†åˆï¼š  å•ç‹¬å¤„ç†</p>
<p>ä¸€ç§æ˜¯ä¸å¯¼è‡´å€¾æ–œçš„æ•°æ®é›†åˆï¼š å•ç‹¬å¤„ç†</p>
<p>æœ€åæŠŠç»“æœåˆèµ·æ¥ï¼ </p>
</blockquote>
<p><img src="/images/spark/Spark-Shuffle-Public/5-key-few.png" width="" alt="é‡‡æ ·å€¾æ–œ key å¹¶åˆ†æ‹† join æ“ä½œ"></p>
<h2 id="6-ä¸¤é˜¶æ®µèšåˆ-å±€éƒ¨èšåˆ-å…¨å±€èšåˆ"><a href="#6-ä¸¤é˜¶æ®µèšåˆ-å±€éƒ¨èšåˆ-å…¨å±€èšåˆ" class="headerlink" title="6. ä¸¤é˜¶æ®µèšåˆ(å±€éƒ¨èšåˆ+å…¨å±€èšåˆ)"></a>6. ä¸¤é˜¶æ®µèšåˆ(å±€éƒ¨èšåˆ+å…¨å±€èšåˆ)</h2><p><img src="/images/spark/Spark-Shuffle-Public/6-Join.png" width="" alt="ä¸¤é˜¶æ®µèšåˆ"></p>
<p>æ–¹æ¡ˆå…­ï¼š ä¸¤é˜¶æ®µèšåˆ ï¼ˆèšåˆç±»é€»è¾‘çš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼‰  çºµå‘åˆ‡åˆ†<br>        åŸæ¥ï¼šä¸€æ¬¡hashæ•£åˆ—å¯¼è‡´å€¾æ–œ<br>        ç°åœ¨ï¼šä¸€æ¬¡éšæœºshuffle + ä¸€æ¬¡hashæ•£åˆ—</p>
<h2 id="7-ä½¿ç”¨éšæœºå‰ç¼€å’Œæ‰©å®¹-RDD-è¿›è¡Œ-join"><a href="#7-ä½¿ç”¨éšæœºå‰ç¼€å’Œæ‰©å®¹-RDD-è¿›è¡Œ-join" class="headerlink" title="7. ä½¿ç”¨éšæœºå‰ç¼€å’Œæ‰©å®¹ RDD è¿›è¡Œ join"></a>7. ä½¿ç”¨éšæœºå‰ç¼€å’Œæ‰©å®¹ RDD è¿›è¡Œ join</h2><p>æ–¹æ¡ˆä¸ƒï¼š å¢åŠ éšæœºå­—æ®µ/é“¾æ¥å­—æ®µ +  æ‰©å®¹RDD<br>    è¡¨A  è¡¨B<br>    RDD1   rdd2</p>
<pre><code>ä¸¤ç§åœºæ™¯ï¼š
1ã€å¦‚æœ ä¸¤å¼ è¡¨åšç¬›å¡å°”ç§¯
2ã€å¦‚æœä¸¤å¼ è¡¨åšjoinï¼Œå¹¶ä¸”å¯¼è‡´æ•°æ®å€¾æ–œçš„æŸäº›keyæ¯”è¾ƒå¤šã€‚ 
æ‹†åˆ†å‡ºæ¥å•ç‹¬å¤„ç†ï¼ˆä¾ç„¶å¯èƒ½æœ‰æ•°æ®å€¾æ–œ ==&gt; åŠ éšæœºå‰ç¼€ï¼‰
å¦‚æœæ˜¯å¯¼è‡´å€¾æ–œçš„keyåªæœ‰ä¸€ä¸ªï¼Œè¿™ä¸ªkeyçš„æ•°æ®é‡éå¸¸ã€‚  åŠ éšæœºå‰ç¼€  å¤åˆ¶

1ã€ç¬›å¡å°”ç§¯
2ã€å¯¼è‡´å€¾æ–œçš„keyçš„æ•°æ®ï¼›é‡ç‰¹åˆ«å¤§ã€‚ ä¸èƒ½ä½¿ç”¨å•ä¸ªtaskè§£å†³
</code></pre><h2 id="8-ä»»åŠ¡æ¨ªåˆ‡ï¼Œä¸€åˆ†ä¸ºäºŒï¼Œå•ç‹¬å¤„ç†"><a href="#8-ä»»åŠ¡æ¨ªåˆ‡ï¼Œä¸€åˆ†ä¸ºäºŒï¼Œå•ç‹¬å¤„ç†" class="headerlink" title="8. ä»»åŠ¡æ¨ªåˆ‡ï¼Œä¸€åˆ†ä¸ºäºŒï¼Œå•ç‹¬å¤„ç†"></a>8. ä»»åŠ¡æ¨ªåˆ‡ï¼Œä¸€åˆ†ä¸ºäºŒï¼Œå•ç‹¬å¤„ç†</h2><h2 id="9-å¤šç§æ–¹æ¡ˆç»„åˆä½¿ç”¨"><a href="#9-å¤šç§æ–¹æ¡ˆç»„åˆä½¿ç”¨" class="headerlink" title="9. å¤šç§æ–¹æ¡ˆç»„åˆä½¿ç”¨"></a>9. å¤šç§æ–¹æ¡ˆç»„åˆä½¿ç”¨</h2><h2 id="10-è‡ªå®šä¹‰-Partitioner"><a href="#10-è‡ªå®šä¹‰-Partitioner" class="headerlink" title="10. è‡ªå®šä¹‰ Partitioner"></a>10. è‡ªå®šä¹‰ Partitioner</h2><h2 id="11-bitmap-æ±‚-Join"><a href="#11-bitmap-æ±‚-Join" class="headerlink" title="11. bitmap æ±‚ Join"></a>11. bitmap æ±‚ Join</h2><p><img src="/images/spark/Spark-Shuffle-Public/bitmapä½å›¾æ±‚join.png" width="990" alt="ä¸¤é˜¶æ®µèšåˆ"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://tech.meituan.com/2016/04/29/spark-tuning-basic.html" target="_blank" rel="external">Sparkæ€§èƒ½ä¼˜åŒ–æŒ‡å—â€”â€”åŸºç¡€ç¯‡</a></li>
<li><a href="https://tech.meituan.com/2016/05/12/spark-tuning-pro.html" target="_blank" rel="external">Sparkæ€§èƒ½ä¼˜åŒ–æŒ‡å—â€”â€”é«˜çº§ç¯‡</a></li>
<li><a href="https://blog.csdn.net/huang66666666/category_9399107.html" target="_blank" rel="external">å¤§æ•°æ®èµ„æ–™ç¬”è®°æ•´ç†</a></li>
<li><a href="https://apprz8zztzy8571.h5.xeknow.com/st/1GrHAK3WN" target="_blank" rel="external">å²è¯—çº§æœ€è¯¦ç»†10æ‹›Sparkæ•°æ®å€¾æ–œè°ƒä¼˜</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark å¼€å‘è°ƒä¼˜ 10 æ¡]]></title>
      <url>http://shopee.ai/2020/08/10/spark/spark-aura-6.2-spark-dev-optimization-1-7/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-aura-6.2-logo.png" width="550" alt=""></p>
<a id="more"></a>
<p>è°ƒä¼˜:</p>
<blockquote>
<ol>
<li><strong>å¼€å‘è°ƒä¼˜</strong></li>
<li><strong>èµ„æºè°ƒä¼˜</strong></li>
<li><strong>æ•°æ®å€¾æ–œ</strong></li>
<li><strong>shuffle</strong></li>
</ol>
<p>æ—§çŸ¥è¯†ç‚¹: æ•°æ®å€¾æ–œ, å¼€å‘è°ƒä¼˜çš„ä¸€éƒ¨åˆ†</p>
<p>æ–°çŸ¥è¯†: sparkçš„å†…å­˜æ¨¡å‹, sparkçš„èµ„æºè°ƒä¼˜, sparkçš„shuffle</p>
</blockquote>
<p>ä»Šå¤©çš„å†…å®¹:</p>
<blockquote>
<ol>
<li>å¼€å‘è°ƒä¼˜</li>
<li>æ•°æ®å€¾æ–œ</li>
</ol>
</blockquote>
<h1 id="å¼€å‘è°ƒä¼˜-10ç‚¹"><a href="#å¼€å‘è°ƒä¼˜-10ç‚¹" class="headerlink" title="å¼€å‘è°ƒä¼˜ 10ç‚¹"></a>å¼€å‘è°ƒä¼˜ 10ç‚¹</h1><h2 id="1-é¿å…åˆ›å»ºé‡å¤çš„RDD"><a href="#1-é¿å…åˆ›å»ºé‡å¤çš„RDD" class="headerlink" title="1. é¿å…åˆ›å»ºé‡å¤çš„RDD"></a>1. é¿å…åˆ›å»ºé‡å¤çš„RDD</h2><blockquote>
<p>mapreduce çš„æ‰§è¡Œè¿‡ç¨‹ä¸­, å¦‚æœæœ‰ reducer çš„è¯, é‚£ä¹ˆå°±ä¸€å®šä¼šè¿›è¡Œæ’åº.</p>
<p>è€Œä¸”è¿™ä¸ªæ’åº, å¹¶ä¸æ˜¯å¯¹æˆ‘ä»¬æœ€ç»ˆçš„è®¡ç®—ç»“æœæ’åº. è¿™ä¸ªæ’åºå¯¹æˆ‘ä»¬çš„ç»“æœè²Œä¼¼æ²¡ä»€ä¹ˆç”¨å¤„, ä½†æ˜¯å‘¢ï¼Œåˆä¸€å®šè¦æœ‰.</p>
<p>åŸå› æ˜¯ä»€ä¹ˆå‘¢?</p>
</blockquote>
<p>æœ€ç»ˆçš„ç»“è®ºï¼š</p>
<blockquote>
<p>å¦‚æœæ˜¯éœ€è¦å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå¤šæ¬¡çš„è®¡ç®—, é‚£ä¹ˆæ³¨æ„, æœ€å¥½å°± <strong>only read</strong> one time.</p>
<p>RDD: <strong><code>ä¸å¯å˜</code></strong>, å¯åˆ†åŒºçš„ å¼¹æ€§æ•°æ®é›†</p>
</blockquote>
<h2 id="2-å°½å¯èƒ½å¤ç”¨åŒä¸€ä¸ªRDD"><a href="#2-å°½å¯èƒ½å¤ç”¨åŒä¸€ä¸ªRDD" class="headerlink" title="2. å°½å¯èƒ½å¤ç”¨åŒä¸€ä¸ªRDD"></a>2. å°½å¯èƒ½å¤ç”¨åŒä¸€ä¸ªRDD</h2><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">map(x =&gt; x+<span class="number">1</span>)</span><br><span class="line">map(x =&gt; x*<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">map(x =&gt; <span class="number">2</span> * (x+<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-aura-6.2.1.png" alt=""></p>
<h2 id="3-å¯¹å¤šæ¬¡ä½¿ç”¨çš„RDDè¿›è¡ŒæŒä¹…åŒ–"><a href="#3-å¯¹å¤šæ¬¡ä½¿ç”¨çš„RDDè¿›è¡ŒæŒä¹…åŒ–" class="headerlink" title="3. å¯¹å¤šæ¬¡ä½¿ç”¨çš„RDDè¿›è¡ŒæŒä¹…åŒ–"></a>3. å¯¹å¤šæ¬¡ä½¿ç”¨çš„RDDè¿›è¡ŒæŒä¹…åŒ–</h2><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">cache</span><br><span class="line">persist</span><br><span class="line">  </span><br><span class="line"><span class="keyword">val</span> rdd2 = rdd1.map.reduce</span><br><span class="line">rdd2.cache</span><br><span class="line">  </span><br><span class="line">rdd2.sort.map()</span><br><span class="line">rdd2.groupByKey</span><br><span class="line">  </span><br><span class="line">rdd1.map.reduce.sort.map()</span><br><span class="line">rdd1.map.reduce.groupByKey</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­çš„ data æ”¾ç½®åœ¨ å†…å­˜, å¦‚ç¨‹åºè¿è¡Œ finish. ä¸­é—´çš„æ•°æ®ä¼šåƒåœ¾å›æ”¶.</p>
<p>å¦‚æœåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­, ç”Ÿæˆäº†ä¸€äº›ä¸­é—´ç»“æœæ˜¯å¦å¤–ä¸€ä¸ªç¨‹åºéœ€è¦ä½¿ç”¨çš„æ•°æ®</p>
<p>é‚£ä¹ˆå°±å¯ä»¥æŠŠè¯¥ data persist åˆ°å†…å­˜ä¸­ æˆ– ç£ç›˜ä¸­.</p>
<p>å¦å¤–ä¸€ä¸ªç¨‹åºå°±å¯ä»¥é¿å…é‡å¤è®¡ç®—, ç›´æ¥ä»ç£ç›˜æˆ–å†…å­˜ä¸­è¿›è¡Œè¯»å–.</p>
<p>æ‰€ä»¥ä¸ºäº†å°½å¿«çš„æäº¤ä»»åŠ¡çš„æ‰§è¡Œæ•ˆç‡, å°½é‡æŠŠé‡å¤åˆ©ç”¨çš„æ•°æ®æŒä¹…åŒ–åˆ°å†…å­˜ä¸­.</p>
</blockquote>
<p><img src="/images/spark/spark-aura-6.2.2.png" alt=""></p>
<h2 id="4-å°½é‡é¿å…ä½¿ç”¨-Shuffle-ç±»ç®—å­"><a href="#4-å°½é‡é¿å…ä½¿ç”¨-Shuffle-ç±»ç®—å­" class="headerlink" title="4. å°½é‡é¿å…ä½¿ç”¨ Shuffle ç±»ç®—å­"></a>4. å°½é‡é¿å…ä½¿ç”¨ Shuffle ç±»ç®—å­</h2><p>shuffle åˆ°åº•æœ‰ä»€ä¹ˆåå¤„?</p>
<p>åˆ†å¸ƒå¼è®¡ç®— å†³å®šäº† ä¸€å®šä¼šæœ‰ shuffle</p>
<blockquote>
<p><strong>join</strong>: mapjoin, reducejoin</p>
</blockquote>
<p><strong>shuffle ç±»ç®—å­:</strong></p>
<ol>
<li>reduceByKey</li>
<li>groupBy</li>
<li>sortBy</li>
<li>distinct</li>
</ol>
<blockquote>
<p>èšåˆç±»æ“ä½œåŸºæœ¬éƒ½æœ‰ shuffle. (unionã€join[æŒ‰ç…§hashåˆ†åŒº, åˆ†åŒºæ•°è¿˜æˆå€æ•°, å°±æ²¡shuffle])</p>
</blockquote>
<p>xxxByKey (groupBy + xxxx)</p>
<p>rdd1.join(rdd2) (reducejoin)<br>// å¦‚ä½•é¿å… join ä¸­çš„ shuffle</p>
<p>mapjoin</p>
<blockquote>
<p>åœ¨ mapreduce å½“ä¸­, æˆ‘ä»¬çŸ¥é“å¦‚ä½•å®šä¹‰ mapreduce çš„ join å®ç°ç¨‹åº<br>ä½†æ˜¯åœ¨ sparkä¸­ ä½ çŸ¥é“å¦‚ä½•å®ç°ä¹ˆï¼Ÿ</p>
</blockquote>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">job.addCacheFile() <span class="comment">// é€šè¿‡åº•å±‚çš„ DistributedCache è¿™ä¸ªç»„ä»¶ã€‚ æ¥ç»™æˆ‘ä»¬ () ä¸­çš„æ–‡ä»¶è¿›è¡Œå…¨å±€åˆ†å‘</span></span><br><span class="line">                   <span class="comment">// å…¨å±€åˆ†å‘ï¼š å‘é€æ–‡ä»¶åˆ°æ‰€æœ‰çš„è¦æ‰§è¡Œçš„ mapTask èŠ‚ç‚¹</span></span><br></pre></td></tr></table></figure>
<p>spark å®ç°ä¼ªä»£ç </p>
<p>  BroadCast</p>
<p>  rdd1.join(rdd2)<br>  rdd1.foreachPartition(data =&gt; {</p>
<pre><code>val data2 = bc.value // å°è¡¨æ•°æ®
val data1 = data     // å¤§å°æ•°æ®çš„ä¸€ä¸ª Partition

data1.join(data2)  // è¿™ä¸ªæ— shuffle, å› ä¸ºè¿™ä¸€å¥ä»£ç ,è¿™ä¸ªæ“ä½œæ˜¯åœ¨æ¯ä¸ªé˜¶æ®µç‹¬ç«‹æ‰§è¡Œçš„.
</code></pre><p>  })</p>
<p>  mapper  3åˆ†é’Ÿ<br>  shuffle 2åˆ†é’Ÿ<br>  reduce  2åˆ†é’Ÿ</p>
<h2 id="5-ä½¿ç”¨-map-side-é¢„èšåˆ-combina-çš„-shuffle-æ“ä½œ"><a href="#5-ä½¿ç”¨-map-side-é¢„èšåˆ-combina-çš„-shuffle-æ“ä½œ" class="headerlink" title="5. ä½¿ç”¨ map-side é¢„èšåˆ(combina)çš„ shuffle æ“ä½œ"></a>5. ä½¿ç”¨ map-side é¢„èšåˆ(combina)çš„ shuffle æ“ä½œ</h2><p><img src="/images/spark/spark-aura-6.3.1.png" width="850" alt=""></p>
<p>shuffle ç±»ç®—å­æœ‰ç¬¬3ä¸ªç¼ºç‚¹ï¼š</p>
<p> æ•°æ®å€¾æ–œ</p>
<p>wordcountï¼š File  block1 block1 block2</p>
<p>åœ¨ä½¿ç”¨ shuffle æ“ä½œçš„ç®—å­çš„æ—¶å€™ï¼Œ å¦‚æœå³ map-side é¢„èšåˆæ“ä½œçš„è¯<br>é‚£ä¹ˆ shuffle çš„ä»£ä»·è¿˜æ˜¯ä¼šå°å¾ˆå¤š</p>
<p>é™„å¸¦çš„å¥½æ•ˆæœï¼š <strong>é™ä½æ•°æ®å€¾æ–œçš„ç¨‹åº¦</strong></p>
<p><strong>(1) æ²¡æœ‰ map-side é¢„èšåˆçš„ç®—å­ï¼š</strong></p>
<p>groupByKey  æœ‰ shuffle, æ²¡æœ‰èšåˆ<br>coGroup val rdd: RDD[String, Iterable[Int], Iterable[String]]</p>
<p><strong>(2) æœ‰é¢„èšåˆçš„ shuffle ç®—å­ï¼š</strong></p>
<p>æ‰§è¡Œæµç¨‹ä¸Š, æ‰§è¡Œé˜¶æ®µ<br>reduceByKey = groupByKey + reduce</p>
<p>æœ€ç»ˆæ•ˆç‡ä¸Šï¼š</p>
<p>reduceByKey &gt; groupByKey + reduce</p>
<p>reduceByKey, combineByKey, aggregateByKey</p>
<h2 id="6-ä½¿ç”¨é«˜æ€§èƒ½ç®—å­"><a href="#6-ä½¿ç”¨é«˜æ€§èƒ½ç®—å­" class="headerlink" title="6. ä½¿ç”¨é«˜æ€§èƒ½ç®—å­"></a>6. ä½¿ç”¨é«˜æ€§èƒ½ç®—å­</h2><h3 id="6-1-ä½¿ç”¨reduceByKey-aggregateByKeyæ›¿ä»£groupByKey"><a href="#6-1-ä½¿ç”¨reduceByKey-aggregateByKeyæ›¿ä»£groupByKey" class="headerlink" title="6.1 ä½¿ç”¨reduceByKey/aggregateByKeyæ›¿ä»£groupByKey"></a>6.1 ä½¿ç”¨reduceByKey/aggregateByKeyæ›¿ä»£groupByKey</h3><p>è¯¦æƒ…è§â€œåŸåˆ™äº”ï¼šä½¿ç”¨map-sideé¢„èšåˆçš„shuffleæ“ä½œâ€ã€‚</p>
<h3 id="6-2-ç”¨-foreachPartitions-æ›¿ä»£-foreach"><a href="#6-2-ç”¨-foreachPartitions-æ›¿ä»£-foreach" class="headerlink" title="6.2 ç”¨ foreachPartitions æ›¿ä»£ foreach"></a>6.2 ç”¨ foreachPartitions æ›¿ä»£ foreach</h3><p>éœ€æ±‚ï¼š å¦‚æœ rdd æœ‰ 10000 æ¡æ•°æ®ï¼Œ 10ä¸ªåˆ†åŒºï¼š</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–äº† 10000 ä¸ªè¿æ¥</span></span><br><span class="line">rdd.map(x =&gt; &#123;</span><br><span class="line">    <span class="keyword">val</span> connect = <span class="type">Connect</span>.getConnect() <span class="comment">// æ¨¡æ‹Ÿè·å–æ•°æ®åº“è¿æ¥</span></span><br><span class="line">    connect.insert(x)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–äº†10æ¬¡è¿æ¥</span></span><br><span class="line">rdd.mapPartitions(data =&gt; &#123;</span><br><span class="line">    <span class="keyword">val</span> connect = <span class="type">Connect</span>.getConnect() <span class="comment">// æ¨¡æ‹Ÿè·å–æ•°æ®åº“è¿æ¥</span></span><br><span class="line">    <span class="keyword">for</span>( element &lt;- data) &#123;</span><br><span class="line">        connect.insert(element) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>åŸåˆ™ï¼š å¦‚æœä¸€ä¸ªæ“ä½œèƒ½é’ˆå¯¹ partition å®Œæˆï¼Œå°±ä¸è¦é’ˆå¯¹å•ä¸ªå…ƒç´ </p>
<p><strong>DStream RDD</strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">dstreams.foreachRDD(rdd =&gt; &#123;</span><br><span class="line">    rdd.foreachPartition(ptn =&gt; &#123;</span><br><span class="line">        rdd.foreach(element =&gt; &#123;</span><br><span class="line">        </span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="6-3-ä½¿ç”¨-filter-å-coalesce-æ“ä½œ"><a href="#6-3-ä½¿ç”¨-filter-å-coalesce-æ“ä½œ" class="headerlink" title="6.3 ä½¿ç”¨ filter å coalesce æ“ä½œ"></a>6.3 ä½¿ç”¨ filter å coalesce æ“ä½œ</h3><p>rdd.filter(å¥‡æ•°).coalesce(6).map(å¹³æ–¹)</p>
<p>rdd.map(å¹³æ–¹).filter(å¥‡æ•°)</p>
<h3 id="6-4-ä½¿ç”¨repartitionAndSortWithinPartitionsæ›¿ä»£repartitionä¸sortç±»æ“ä½œ"><a href="#6-4-ä½¿ç”¨repartitionAndSortWithinPartitionsæ›¿ä»£repartitionä¸sortç±»æ“ä½œ" class="headerlink" title="6.4 ä½¿ç”¨repartitionAndSortWithinPartitionsæ›¿ä»£repartitionä¸sortç±»æ“ä½œ"></a>6.4 ä½¿ç”¨repartitionAndSortWithinPartitionsæ›¿ä»£repartitionä¸sortç±»æ“ä½œ</h3><p>repartitionAndSortWithinPartitionsæ˜¯Sparkå®˜ç½‘æ¨èçš„ä¸€ä¸ªç®—å­ï¼Œå®˜æ–¹å»ºè®®ï¼Œå¦‚æœéœ€è¦åœ¨repartitioné‡åˆ†åŒºä¹‹åï¼Œè¿˜è¦è¿›è¡Œæ’åºï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨repartitionAndSortWithinPartitionsç®—å­ã€‚å› ä¸ºè¯¥ç®—å­å¯ä»¥ä¸€è¾¹è¿›è¡Œé‡åˆ†åŒºçš„shuffleæ“ä½œï¼Œä¸€è¾¹è¿›è¡Œæ’åºã€‚shuffleä¸sortä¸¤ä¸ªæ“ä½œåŒæ—¶è¿›è¡Œï¼Œæ¯”å…ˆshuffleå†sortæ¥è¯´ï¼Œæ€§èƒ½å¯èƒ½æ˜¯è¦é«˜çš„ã€‚</p>
<ol>
<li>rdd.repartition.sort</li>
<li>rdd.repartitionAndSortWithinPartitions</li>
</ol>
<p>ç¬¬ä¸€ä¸ªå¼å­æ•ˆç‡å·®</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">rdd.repartition = rdd2   rdd2.sort = rdd3</span><br></pre></td></tr></table></figure>
<h2 id="7-å¹¿æ’­å¤§å˜é‡"><a href="#7-å¹¿æ’­å¤§å˜é‡" class="headerlink" title="7. å¹¿æ’­å¤§å˜é‡"></a>7. å¹¿æ’­å¤§å˜é‡</h2><p>æœ‰æ—¶åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°éœ€è¦åœ¨ç®—å­å‡½æ•°ä¸­ä½¿ç”¨å¤–éƒ¨å˜é‡çš„åœºæ™¯ï¼ˆå°¤å…¶æ˜¯å¤§å˜é‡ï¼Œæ¯”å¦‚100Mä»¥ä¸Šçš„å¤§é›†åˆï¼‰ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±åº”è¯¥ä½¿ç”¨Sparkçš„å¹¿æ’­ï¼ˆBroadcastï¼‰åŠŸèƒ½æ¥æå‡æ€§èƒ½ã€‚</p>
<p>ä¸€å¥è¯ï¼š </p>
<ul>
<li><p><strong>ç›®çš„ï¼š</strong> è®©å¤šä¸ª task éƒ½è¦ä½¿ç”¨çš„åœ¨ driver ä¸­å£°æ˜çš„å˜é‡éƒ½è¦ç»´æŒä¸€ä¸ªç‹¬ç«‹å‰¯æœ¬ï¼Œ ç¼–ç¨‹è®©è¿™ä¸ª executor çš„å†…å­˜å ç”¨é‡å°±å‡å°‘äº†</p>
</li>
<li><p><strong>æ•ˆæœï¼š</strong> executor çš„å†…å­˜å ç”¨é‡å°±å‡å°‘äº†. ç½‘ç»œæ•°æ®ä¼ è¾“é‡ä¹Ÿå‡å°‘äº†</p>
</li>
<li><p><strong>åŸåˆ™ï¼š</strong> è¦å¹¿æ’­çš„æ•°æ®è¶Šå¤§, è¿›è¡Œå¹¿æ’­è¿™ä¸ªæ“ä½œä¹‹åå¾—åˆ°çš„æ”¶ç›Šè¶Šå¥½çš„.</p>
</li>
</ul>
<p>mapreduce: DistributedCache<br>spark: BroadCastManager SparkContext</p>
<h2 id="8-ä½¿ç”¨Kryoä¼˜åŒ–åºåˆ—åŒ–æ€§èƒ½"><a href="#8-ä½¿ç”¨Kryoä¼˜åŒ–åºåˆ—åŒ–æ€§èƒ½" class="headerlink" title="8. ä½¿ç”¨Kryoä¼˜åŒ–åºåˆ—åŒ–æ€§èƒ½"></a>8. ä½¿ç”¨Kryoä¼˜åŒ–åºåˆ—åŒ–æ€§èƒ½</h2><ol>
<li>java: </li>
<li>mapreduce</li>
<li>ä»–ä»¬çš„åŒºåˆ«</li>
</ol>
<p><strong>javaä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹å¼:</strong></p>
<ol>
<li>æ„é€ å™¨</li>
<li>é™æ€å·¥å‚æ–¹æ³• (ç§æœ‰åŒ–äº†æ„é€ å™¨)</li>
<li>åå°„</li>
<li>å…‹éš†</li>
<li>ååºåˆ—åŒ–</li>
</ol>
<p><strong>javaï¼š å®ç°åºåˆ—åŒ–:</strong></p>
<pre><code>è®©å‚ä¸åºåˆ—åŒ–çš„ç±»å‹ implements Serializable

ObjectOutputStream oos = new ...
oos.writeObject(student)
    ç½‘ç»œIOï¼ŒFileIO
Redis: String
    æŠŠä¸€ä¸ªå¯¹è±¡ï¼š toString, åºåˆ—åŒ–, JSON
</code></pre><p>æœ‰ä¸ªç¼ºç‚¹:</p>
<p> é™¤äº†æŠŠå½“å‰è¿™ä¸ªå¯¹è±¡çš„å±æ€§çš„å€¼ç»™å­˜å‚¨/æºå¸¦ä¹‹å¤–, è¿˜ä¼šæŠŠå½“å‰è¿™ä¸ªå¯¹è±¡çš„ç±»å‹çš„ä¿¡æ¯éƒ½æºå¸¦.</p>
<p>åŠ å…¥è¦ä¼ å…¥ 10000 ä¸ªå¯¹è±¡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1  :  ç±»å‹ä¿¡æ¯    å¯¹è±¡ä¿¡æ¯</span><br><span class="line">2  :  ç±»å‹ä¿¡æ¯    å¯¹è±¡ä¿¡æ¯</span><br><span class="line">...</span><br><span class="line">1000  :  ç±»å‹ä¿¡æ¯    å¯¹è±¡ä¿¡æ¯</span><br></pre></td></tr></table></figure>
<p><strong>mapreduce:</strong></p>
<p>åºåˆ—åŒ–ï¼Œè‡ªå®šä¹‰è§„åˆ™</p>
<p>å¯¹äºç±»å‹ä¿¡æ¯ï¼Œåªä¼šæºå¸¦ä¸€æ¬¡</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1  :  å¯¹è±¡ä¿¡æ¯</span><br><span class="line">2  :  å¯¹è±¡ä¿¡æ¯</span><br><span class="line">...</span><br><span class="line">1000  :  å¯¹è±¡ä¿¡æ¯</span><br></pre></td></tr></table></figure>
<p>java åŸç”Ÿåºåˆ—ç»„ä»¶çš„åŸå› </p>
<p>å®ç°æ–¹å¼:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Writable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// åºåˆ—åŒ–</span></span><br><span class="line">    write(out) &#123;</span><br><span class="line">        out.writeInt(id);</span><br><span class="line">        out.writeUTF(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ååºåˆ—åŒ–</span></span><br><span class="line">    readFields(in) &#123;</span><br><span class="line">        <span class="keyword">this</span>.id = in.readInt();</span><br><span class="line">        <span class="keyword">this</span>.name = in.readUTF();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»–ä»¬çš„åŒºåˆ«ï¼š</p>
<p>  mapreduce çš„åºåˆ—åŒ–æœºåˆ¶, åªåºåˆ—åŒ–è¦è¿›è¡Œä¼ è¾“çš„å±æ€§çš„å€¼ï¼Œä¸é‡å¤åºåˆ—åŒ–å¯¹è±¡çš„ç±»å‹ä¿¡æ¯</p>
<p><strong>sparkï¼š</strong></p>
<ol>
<li>é»˜è®¤æƒ…å†µä¸‹, æ˜¯æ”¯æŒ java åŸç”Ÿåºåˆ—åŒ–æœºåˆ¶</li>
<li>ä½¿ç”¨ KryoSerializer </li>
</ol>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">ä½¿ç”¨æ–¹å¼:</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºSparkConfå¯¹è±¡ã€‚</span></span><br><span class="line"><span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(...).setAppName(...)</span><br><span class="line"><span class="comment">// è®¾ç½®åºåˆ—åŒ–å™¨ä¸ºKryoSerializerã€‚</span></span><br><span class="line">conf.set(<span class="string">"spark.serializer"</span>, <span class="string">"org.apache.spark.serializer.KryoSerializer"</span>)</span><br><span class="line"><span class="comment">// æ³¨å†Œè¦åºåˆ—åŒ–çš„è‡ªå®šä¹‰ç±»å‹ã€‚</span></span><br><span class="line">conf.registerKryoClasses(<span class="type">Array</span>(classOf[<span class="type">MyClass1</span>], classOf[<span class="type">MyClass2</span>]))</span><br></pre></td></tr></table></figure>
<h2 id="9-ä¼˜åŒ–æ•°æ®ç»“æ„"><a href="#9-ä¼˜åŒ–æ•°æ®ç»“æ„" class="headerlink" title="9. ä¼˜åŒ–æ•°æ®ç»“æ„"></a>9. ä¼˜åŒ–æ•°æ®ç»“æ„</h2><p>Javaä¸­ï¼Œæœ‰ä¸‰ç§ç±»å‹æ¯”è¾ƒè€—è´¹å†…å­˜ï¼š </p>
<blockquote>
<ul>
<li>å¯¹è±¡ï¼Œæ¯ä¸ªJavaå¯¹è±¡éƒ½æœ‰å¯¹è±¡å¤´ã€å¼•ç”¨ç­‰é¢å¤–çš„ä¿¡æ¯ï¼Œå› æ­¤æ¯”è¾ƒå ç”¨å†…å­˜ç©ºé—´ã€‚ </li>
<li>å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªå­—ç¬¦æ•°ç»„ä»¥åŠé•¿åº¦ç­‰é¢å¤–ä¿¡æ¯ã€‚ </li>
<li>é›†åˆç±»å‹ï¼Œæ¯”å¦‚HashMapã€LinkedListç­‰ï¼Œå› ä¸ºé›†åˆç±»å‹å†…éƒ¨é€šå¸¸ä¼šä½¿ç”¨ä¸€äº›å†…éƒ¨ç±»æ¥å°è£…é›†åˆå…ƒç´ ï¼Œæ¯”å¦‚Map.Entryã€‚</li>
</ul>
</blockquote>
<p>å› æ­¤Sparkå»ºè®®ï¼Œåœ¨Sparkç¼–ç å®ç°ä¸­ï¼Œç‰¹åˆ«æ˜¯å¯¹äºç®—å­å‡½æ•°ä¸­çš„ä»£ç ï¼Œå°½é‡ä¸è¦ä½¿ç”¨ä¸Šè¿°ä¸‰ç§æ•°æ®ç»“æ„ï¼Œå°½é‡ä½¿ç”¨</p>
<blockquote>
<ul>
<li>å­—ç¬¦ä¸²æ›¿ä»£å¯¹è±¡ï¼Œä½¿ç”¨åŸå§‹ç±»å‹ï¼ˆæ¯”å¦‚Intã€Longï¼‰æ›¿ä»£å­—ç¬¦ä¸²ï¼Œ</li>
<li>æ•°ç»„æ›¿ä»£é›†åˆç±»å‹ï¼Œè¿™æ ·å°½å¯èƒ½åœ°å‡å°‘å†…å­˜å ç”¨ï¼Œä»è€Œé™ä½GCé¢‘ç‡ï¼Œæå‡æ€§èƒ½ã€‚</li>
</ul>
<p><strong><code>ä¸è¦åˆ»æ„å»è¿™ä¹ˆåš</code></strong>, ä¹Ÿè¦æ³¨æ„å¯è¯»æ€§.</p>
</blockquote>
<p>ä½†æ˜¯åœ¨ç¬”è€…çš„ç¼–ç å®è·µä¸­å‘ç°ï¼Œè¦åšåˆ°è¯¥åŸåˆ™å…¶å®å¹¶ä¸å®¹æ˜“ã€‚å› ä¸ºæˆ‘ä»¬åŒæ—¶è¦è€ƒè™‘åˆ°ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œå¦‚æœä¸€ä¸ªä»£ç ä¸­ï¼Œå®Œå…¨æ²¡æœ‰ä»»ä½•å¯¹è±¡æŠ½è±¡ï¼Œå…¨éƒ¨æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼ï¼Œé‚£ä¹ˆå¯¹äºåç»­çš„ä»£ç ç»´æŠ¤å’Œä¿®æ”¹ï¼Œæ— ç–‘æ˜¯ä¸€åœºå·¨å¤§çš„ç¾éš¾ã€‚åŒç†ï¼Œå¦‚æœæ‰€æœ‰æ“ä½œéƒ½åŸºäºæ•°ç»„å®ç°ï¼Œè€Œä¸ä½¿ç”¨HashMapã€LinkedListç­‰é›†åˆç±»å‹ï¼Œé‚£ä¹ˆå¯¹äºæˆ‘ä»¬çš„ç¼–ç éš¾åº¦ä»¥åŠä»£ç å¯ç»´æŠ¤æ€§ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæå¤§çš„æŒ‘æˆ˜ã€‚å› æ­¤ç¬”è€…å»ºè®®ï¼Œåœ¨å¯èƒ½ä»¥åŠåˆé€‚çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨å ç”¨å†…å­˜è¾ƒå°‘çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯å‰ææ˜¯è¦ä¿è¯ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<h2 id="10-èä¼šè´¯é€š"><a href="#10-èä¼šè´¯é€š" class="headerlink" title="10. èä¼šè´¯é€š"></a>10. èä¼šè´¯é€š</h2><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://tech.meituan.com/2016/04/29/spark-tuning-basic.html" target="_blank" rel="external">Sparkæ€§èƒ½ä¼˜åŒ–æŒ‡å—â€”â€”åŸºç¡€ç¯‡</a></li>
<li><a href="https://tech.meituan.com/2016/05/12/spark-tuning-pro.html" target="_blank" rel="external">Sparkæ€§èƒ½ä¼˜åŒ–æŒ‡å—â€”â€”é«˜çº§ç¯‡</a></li>
<li><a href="https://blog.csdn.net/huang66666666/category_9399107.html" target="_blank" rel="external">å¤§æ•°æ®èµ„æ–™ç¬”è®°æ•´ç†</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Data Analysis - SQL 50 ç¬¬2ç¯‡ Action]]></title>
      <url>http://shopee.ai/2020/08/08/dataware/dw-sql-50-2/</url>
      <content type="html"><![CDATA[<p><img src="/images/sql/sql-50-logo.jpg" width="550" alt=""></p>
<a id="more"></a>
<blockquote>
<p>å…¶ä¸­é‡ç‚¹ä¸ºï¼š1/2/5/6/7/10/11/12/13/15/17/18/19/22/23/25/31/35/36/40/41/42/45/46 å…±16é¢˜</p>
<p>è¶…çº§é‡ç‚¹ 18å’Œ23ã€ 22å’Œ25 ã€ 41ã€46</p>
</blockquote>
<p><strong>(1). æŸ¥è¯¢è¯¾ç¨‹ç¼–å·ä¸ºâ€œ01â€çš„è¯¾ç¨‹æ¯”â€œ02â€çš„è¯¾ç¨‹æˆç»©é«˜çš„æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·ï¼ˆé‡ç‚¹ï¼‰</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    t1.s_id <span class="keyword">as</span> t1_s_id,</span><br><span class="line">    t2.s_id <span class="keyword">as</span> t2_s_id,</span><br><span class="line">    t3.s_name,</span><br><span class="line">    t1.s_score <span class="keyword">as</span> s_score_01,</span><br><span class="line">    t2.s_score <span class="keyword">as</span> s_score_02</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    (<span class="keyword">select</span> s_id, c_id, s_score <span class="keyword">from</span> Score <span class="keyword">WHERE</span> c_id = <span class="string">'01'</span>) <span class="keyword">as</span> t1</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span></span><br><span class="line">    (<span class="keyword">select</span> s_id, c_id, s_score <span class="keyword">from</span> Score <span class="keyword">WHERE</span> c_id = <span class="string">'02'</span>) <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">ON</span> t1.s_id = t2.s_id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span></span><br><span class="line">    Student <span class="keyword">as</span> t3 </span><br><span class="line"><span class="keyword">ON</span> t1.s_id = t3.s_id</span><br><span class="line"><span class="keyword">where</span> t1.s_score &gt; t2.s_score</span><br></pre></td></tr></table></figure>
<p><strong>(2). æŸ¥è¯¢å¹³å‡æˆç»©å¤§äº60åˆ†çš„å­¦ç”Ÿçš„å­¦å·å’Œå¹³å‡æˆç»©ï¼ˆç®€å•ï¼Œç¬¬äºŒé“é‡ç‚¹ï¼‰</strong></p>
<p><a href="https://www.bilibili.com/video/BV1q4411G7Lw?p=5" target="_blank" rel="external">bilibili analysis</a></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    s_id, <span class="keyword">avg</span>(s_score)</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    score</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s_id <span class="keyword">HAVING</span> <span class="keyword">avg</span>(s_score) &gt; <span class="number">60</span></span><br></pre></td></tr></table></figure>
<p><strong>(9). æŸ¥è¯¢æ‰€æœ‰è¯¾ç¨‹æˆç»©å°äº60åˆ†çš„å­¦ç”Ÿçš„å­¦å·ã€å§“å</strong></p>
<ol>
<li>å¾—å‡ºåŒå­¦è¯¾ç¨‹æˆç»©å°äº 60åˆ† çš„è¯¾ç¨‹æ•°</li>
<li>ç»Ÿè®¡åŒå­¦æ€»å…±å­¦äº†å‡ é—¨è¯¾</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.s_id, t.s_name</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line"></span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span> s_id, <span class="keyword">count</span>(c_id) <span class="keyword">as</span> cnt</span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">WHERE</span> s_score &lt; <span class="number">60</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s_id</span><br><span class="line">) a</span><br><span class="line"></span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span></span><br><span class="line"></span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span> s_id, <span class="keyword">count</span>(c_id) <span class="keyword">as</span> cnt <span class="keyword">FROM</span> Score</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s_id</span><br><span class="line">) b</span><br><span class="line"><span class="keyword">ON</span> a.s_id = b.s_id</span><br><span class="line"></span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span></span><br><span class="line"></span><br><span class="line">Student <span class="keyword">as</span> t <span class="keyword">ON</span> a.s_id=t.s_id</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> a.cnt = b.cnt</span><br></pre></td></tr></table></figure>
<p><strong>(3). æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„å­¦å·ã€å§“åã€é€‰è¯¾æ•°ã€æ€»æˆç»©</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">å­¦å·</th>
<th style="text-align:center">å§“å</th>
<th style="text-align:center">è¯¾ç¨‹ç¼–å·</th>
<th style="text-align:center">è¿™é—¨è¯¾æˆç»©</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">å°å¼ </td>
<td style="text-align:center">1</td>
<td style="text-align:center">60</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">å°å¼ </td>
<td style="text-align:center">3</td>
<td style="text-align:center">70</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	t1.s_id,</span><br><span class="line">	t1.s_name,</span><br><span class="line">	<span class="keyword">COUNT</span>( t2.c_id ),</span><br><span class="line">	<span class="keyword">SUM</span>(<span class="keyword">case</span> <span class="keyword">when</span> t2.s_score <span class="keyword">is</span> <span class="literal">NULL</span> <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span> t2.s_score <span class="keyword">END</span>) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	Student <span class="keyword">AS</span> t1</span><br><span class="line">	<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> Score <span class="keyword">AS</span> t2 <span class="keyword">ON</span> t1.s_id = t2.s_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s_id, t1.s_name</span><br></pre></td></tr></table></figure>
<p><strong>(4). æŸ¥è¯¢å§“â€œçŒ´â€çš„è€å¸ˆçš„ä¸ªæ•°ï¼ˆä¸é‡è¦ï¼‰</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="keyword">count</span>(t_id)</span><br><span class="line"><span class="keyword">FROM</span> teacher</span><br><span class="line"><span class="keyword">WHERE</span> t_name <span class="keyword">LIKE</span> <span class="string">'å¼ %'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="keyword">count</span>(<span class="keyword">distinct</span> t_name)</span><br><span class="line"><span class="keyword">FROM</span> teacher</span><br><span class="line"><span class="keyword">WHERE</span> t_name <span class="keyword">LIKE</span> <span class="string">'å¼ %'</span></span><br></pre></td></tr></table></figure>
<p><strong>(5). æŸ¥è¯¢æ²¡å­¦è¿‡â€œå¼ ä¸‰â€è€å¸ˆè¯¾çš„å­¦ç”Ÿçš„å­¦å·ã€å§“åï¼ˆé‡ç‚¹ï¼‰</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">å­¦å·</th>
<th style="text-align:center">è¯¾ç¨‹å·</th>
<th style="text-align:center">æˆç»©</th>
<th style="text-align:center">æ•™å¸ˆå·</th>
<th style="text-align:center">æ•™å¸ˆå§“å</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">s_1</td>
<td style="text-align:center">c_1</td>
<td style="text-align:center">90</td>
<td style="text-align:center">t_1</td>
<td style="text-align:center">å¼ ä¸‰</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s_id, s_name <span class="keyword">from</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> s_id <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> s_id <span class="keyword">FROM</span> Score s</span><br><span class="line">	<span class="keyword">INNER</span> <span class="keyword">JOIN</span> Course c <span class="keyword">ON</span> s.c_id = c.c_id</span><br><span class="line">	<span class="keyword">INNER</span> <span class="keyword">JOIN</span> Teacher t <span class="keyword">ON</span> c.t_id = t.t_id</span><br><span class="line">	<span class="keyword">WHERE</span> t.t_name=<span class="string">'å¼ ä¸‰'</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>(6). æŸ¥è¯¢å­¦è¿‡â€œå¼ ä¸‰â€è€å¸ˆæ‰€æ•™çš„æ‰€æœ‰è¯¾çš„åŒå­¦çš„å­¦å·ã€å§“åï¼ˆé‡ç‚¹)</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> st.s_id, st.s_name </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">   Student <span class="keyword">as</span> st</span><br><span class="line">   <span class="keyword">INNER</span> <span class="keyword">JOIN</span> Score s <span class="keyword">ON</span> s.s_id = st.s_id</span><br><span class="line">   <span class="keyword">INNER</span> <span class="keyword">JOIN</span> Course c <span class="keyword">ON</span> s.c_id = c.c_id</span><br><span class="line">   <span class="keyword">INNER</span> <span class="keyword">JOIN</span> Teacher t <span class="keyword">ON</span> c.t_id = t.t_id</span><br><span class="line">   <span class="keyword">WHERE</span> t.t_name=<span class="string">'å¼ ä¸‰'</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¹³æ—¶åšçš„æ—¶å€™è¡¨å¤ªå¤§ï¼Œæˆ‘ä»¬ä¼šå…ˆè¿‡æ»¤ç”¨ â€™å¼ ä¸‰â€˜ çš„æ¡ä»¶ï¼Œåšæˆ temp table åœ¨å¼€å§‹åš JOIN.</p>
</blockquote>
<p><strong>(7). æŸ¥è¯¢å­¦è¿‡ç¼–å·ä¸ºâ€œ01â€çš„è¯¾ç¨‹å¹¶ä¸”ä¹Ÿå­¦è¿‡ç¼–å·ä¸ºâ€œ02â€çš„è¯¾ç¨‹çš„å­¦ç”Ÿçš„å­¦å·ã€å§“åï¼ˆé‡ç‚¹ï¼‰</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> STUDENT <span class="keyword">WHERE</span> s_id <span class="keyword">IN</span></span><br><span class="line">(</span><br><span class="line">    <span class="keyword">SELECT</span> a.s_id </span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">        (<span class="keyword">SELECT</span> s_id, c_id <span class="keyword">FROM</span> Score <span class="keyword">WHERE</span> c_id = <span class="string">'01'</span>) a</span><br><span class="line">        <span class="keyword">INNER</span> <span class="keyword">JOIN</span></span><br><span class="line">        (<span class="keyword">SELECT</span> s_id, c_id <span class="keyword">FROM</span> Score <span class="keyword">WHERE</span> c_id = <span class="string">'02'</span>) b</span><br><span class="line">    <span class="keyword">ON</span> a.s_id = b.s_id</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>(8). æŸ¥è¯¢è¯¾ç¨‹ç¼–å·ä¸ºâ€œ02â€çš„æ€»æˆç»©ï¼ˆä¸é‡ç‚¹ï¼‰</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(s_score)</span><br><span class="line"><span class="keyword">FROM</span> Score</span><br><span class="line">wWHERE c_id = <span class="string">'02'</span></span><br></pre></td></tr></table></figure>
<p><strong>(10). æŸ¥è¯¢æ²¡æœ‰å­¦å…¨æ‰€æœ‰è¯¾çš„å­¦ç”Ÿçš„å­¦å·ã€å§“å(é‡ç‚¹)</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> course</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> Score</span><br></pre></td></tr></table></figure>
<p>Error Version: </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s_id, s_name <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> s_id <span class="keyword">IN</span> </span><br><span class="line">(</span><br><span class="line">  <span class="keyword">SELECT</span> s_id <span class="keyword">FROM</span> Score</span><br><span class="line">  <span class="keyword">GROUP</span> <span class="keyword">BY</span> s_id <span class="keyword">HAVING</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> c_id) &lt; (<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">distinct</span> c_id) <span class="keyword">FROM</span> Course)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸€é—¨è¯¾éƒ½æ²¡æœ‰å­¦ï¼Œä¸Šé¢çš„ SQL å°±æ¼æ‰äº†.</span></span><br></pre></td></tr></table></figure>
<p>Right Version:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> st.*, sc.*</span><br><span class="line"><span class="keyword">FROM</span> Student <span class="keyword">as</span> st</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> Score <span class="keyword">as</span> sc <span class="keyword">ON</span> st.s_id=sc.s_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> st.s_id <span class="keyword">HAVING</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> sc.c_id) &lt; (<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">distinct</span> c_id) <span class="keyword">FROM</span> Course)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸€é—¨è¯¾éƒ½æ²¡æœ‰å­¦ï¼Œä¸Šé¢çš„ SQL å°±æ¼æ‰äº†.</span></span><br></pre></td></tr></table></figure>
<p><strong>(11). æŸ¥è¯¢è‡³å°‘æœ‰ä¸€é—¨è¯¾ä¸å­¦å·ä¸ºâ€œ01â€çš„å­¦ç”Ÿæ‰€å­¦è¯¾ç¨‹ç›¸åŒçš„å­¦ç”Ÿçš„å­¦å·å’Œå§“åï¼ˆé‡ç‚¹ï¼‰</strong></p>
<ol>
<li>andåœ¨æ‹¬å·å¤–ç”¨</li>
<li>distinct ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ</li>
</ol>
<p><img src="/images/sql/sql-50-11.jpg" width="850" alt=""></p>
<p><strong>(12). æŸ¥è¯¢å’Œâ€œ01â€å·åŒå­¦æ‰€å­¦è¯¾ç¨‹å®Œå…¨ç›¸åŒçš„å…¶ä»–åŒå­¦çš„å­¦å·(é‡ç‚¹)</strong></p>
<p><img src="/images/sql/sql-50-12.jpg" width="800" alt=""></p>
<p><img src="/images/sql/sql-50-table-logo.jpg" width="800" alt=""></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/38354000" target="_blank" rel="external">å¸¸è§çš„SQLé¢è¯•é¢˜ï¼šç»å…¸50é¢˜ - çŸ¥ä¹</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/43289968" target="_blank" rel="external">SQLé¢è¯•å¿…ä¼š50é¢˜ - çŸ¥ä¹</a><br><br></li>
<li><a href="https://www.bilibili.com/video/BV1q4411G7Lw/?spm_id_from=333.788.videocard.1" target="_blank" rel="external">bilibiliã€æ•°æ®åˆ†æã€‘- SQLé¢è¯•50é¢˜ - è·Ÿæˆ‘ä¸€èµ·æ‰“æ€ªå‡çº§ ä¸€èµ·æˆä¸ºæ•°æ®ç§‘å­¦å®¶</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/103386372" target="_blank" rel="external">æ•°æ®åˆ†æå¸ˆæˆé•¿ä¹‹è·¯</a><br><br></li>
<li><a href="https://zhuanlan.zhihu.com/p/113173133" target="_blank" rel="external">ã€SQLã€‘SQLé¢è¯•50é¢˜ åˆ†ç±»æ¢³ç†ä¸è§£ç­”</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/118633494" target="_blank" rel="external">ã€Pythonã€‘æ•°æ®åˆ†æå‰çš„å…¥é—¨æ•™ç¨‹ Python For Everybody P1ï¼šé›¶åŸºç¡€ç¨‹åºè®¾è®¡</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Data Analysis - SQL 50 ç¬¬1ç¯‡]]></title>
      <url>http://shopee.ai/2020/08/07/dataware/dw-sql-50-1/</url>
      <content type="html"><![CDATA[<p><img src="/images/dataware/sql-50-logo.jpeg" width="550" alt=""></p>
<a id="more"></a>
<p>æœ¬æ–‡æ±‡æ€»äº†ä¸åŒç‰ˆæœ¬çš„SQLé¢è¯•50é¢˜çš„é¢˜ç›®ï¼Œåˆ å»äº†é‡å¤å†…å®¹ï¼Œå¹¶æ ¹æ®æ¶‰åŠçŸ¥è¯†ç‚¹è¿›è¡Œåˆ†ç±»ï¼ŒæŒ‰ç…§ç”±æ˜“åˆ°éš¾ã€ç›¸ä¼¼é¢˜æ”¾åœ¨ä¸€èµ·çš„æ€è·¯è¿›è¡Œæ’åºå¹¶é‡æ–°ç¼–</p>
<p><img src="/images/dataware/sql-50-table-logo.jpg" width="950" alt=""></p>
<p>Table å…³ç³»å›¾ï¼š</p>
<p><img src="/images/dataware/sql-50-2.jpeg" width="750" alt=""></p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/43289968" target="_blank" rel="external">SQLé¢è¯•å¿…ä¼š50é¢˜ - çŸ¥ä¹</a></li>
</ul>
<p><strong>å»ºè¡¨ &amp; å‡†å¤‡æ•°æ®ï¼š</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å»ºè¡¨</span></span><br><span class="line"><span class="comment">-- å­¦ç”Ÿè¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`Student`</span>(</span><br><span class="line"><span class="string">`s_id`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line"><span class="string">`s_name`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line"><span class="string">`s_birth`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line"><span class="string">`s_sex`</span> <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span>(<span class="string">`s_id`</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- è¯¾ç¨‹è¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`Course`</span>(</span><br><span class="line"><span class="string">`c_id`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line"><span class="string">`c_name`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line"><span class="string">`t_id`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span>(<span class="string">`c_id`</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- æ•™å¸ˆè¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`Teacher`</span>(</span><br><span class="line"><span class="string">`t_id`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line"><span class="string">`t_name`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span>(<span class="string">`t_id`</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- æˆç»©è¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`Score`</span>(</span><br><span class="line"><span class="string">`s_id`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line"><span class="string">`c_id`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line"><span class="string">`s_score`</span> <span class="built_in">INT</span>(<span class="number">3</span>),</span><br><span class="line">PRIMARY <span class="keyword">KEY</span>(<span class="string">`s_id`</span>,<span class="string">`c_id`</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ’å…¥å­¦ç”Ÿè¡¨æµ‹è¯•æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'èµµé›·'</span> , <span class="string">'1990-01-01'</span> , <span class="string">'ç”·'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'é’±ç”µ'</span> , <span class="string">'1990-12-21'</span> , <span class="string">'ç”·'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'å­™é£'</span> , <span class="string">'1990-05-20'</span> , <span class="string">'ç”·'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'04'</span> , <span class="string">'æäº‘'</span> , <span class="string">'1990-08-06'</span> , <span class="string">'ç”·'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'05'</span> , <span class="string">'å‘¨æ¢…'</span> , <span class="string">'1991-12-01'</span> , <span class="string">'å¥³'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'06'</span> , <span class="string">'å´å…°'</span> , <span class="string">'1992-03-01'</span> , <span class="string">'å¥³'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'07'</span> , <span class="string">'éƒ‘ç«¹'</span> , <span class="string">'1989-07-01'</span> , <span class="string">'å¥³'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student <span class="keyword">values</span>(<span class="string">'08'</span> , <span class="string">'ç‹èŠ'</span> , <span class="string">'1990-01-20'</span> , <span class="string">'å¥³'</span>);</span><br><span class="line"><span class="comment">-- è¯¾ç¨‹è¡¨æµ‹è¯•æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'è¯­æ–‡'</span> , <span class="string">'02'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'æ•°å­¦'</span> , <span class="string">'01'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Course <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'è‹±è¯­'</span> , <span class="string">'03'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ•™å¸ˆè¡¨æµ‹è¯•æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'å¼ ä¸‰'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'æå››'</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Teacher <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'ç‹äº”'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æˆç»©è¡¨æµ‹è¯•æ•°æ®</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'01'</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'02'</span> , <span class="number">90</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'01'</span> , <span class="string">'03'</span> , <span class="number">99</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'01'</span> , <span class="number">70</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'02'</span> , <span class="number">60</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'02'</span> , <span class="string">'03'</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'01'</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'02'</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'03'</span> , <span class="string">'03'</span> , <span class="number">80</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'04'</span> , <span class="string">'01'</span> , <span class="number">50</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'04'</span> , <span class="string">'02'</span> , <span class="number">30</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'04'</span> , <span class="string">'03'</span> , <span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'05'</span> , <span class="string">'01'</span> , <span class="number">76</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'05'</span> , <span class="string">'02'</span> , <span class="number">87</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'06'</span> , <span class="string">'01'</span> , <span class="number">31</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'06'</span> , <span class="string">'03'</span> , <span class="number">34</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'07'</span> , <span class="string">'02'</span> , <span class="number">89</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Score <span class="keyword">values</span>(<span class="string">'07'</span> , <span class="string">'03'</span> , <span class="number">98</span>);</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/38354000" target="_blank" rel="external">å¸¸è§çš„SQLé¢è¯•é¢˜ï¼šç»å…¸50é¢˜ - çŸ¥ä¹</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/43289968" target="_blank" rel="external">SQLé¢è¯•å¿…ä¼š50é¢˜ - çŸ¥ä¹</a><br><br></li>
<li><a href="https://www.bilibili.com/video/BV1q4411G7Lw/?spm_id_from=333.788.videocard.1" target="_blank" rel="external">bilibiliã€æ•°æ®åˆ†æã€‘- SQLé¢è¯•50é¢˜ - è·Ÿæˆ‘ä¸€èµ·æ‰“æ€ªå‡çº§ ä¸€èµ·æˆä¸ºæ•°æ®ç§‘å­¦å®¶</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/103386372" target="_blank" rel="external">æ•°æ®åˆ†æå¸ˆæˆé•¿ä¹‹è·¯</a><br><br></li>
<li><a href="https://zhuanlan.zhihu.com/p/113173133" target="_blank" rel="external">ã€SQLã€‘SQLé¢è¯•50é¢˜ åˆ†ç±»æ¢³ç†ä¸è§£ç­”</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/118633494" target="_blank" rel="external">ã€Pythonã€‘æ•°æ®åˆ†æå‰çš„å…¥é—¨æ•™ç¨‹ Python For Everybody P1ï¼šé›¶åŸºç¡€ç¨‹åºè®¾è®¡</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Summary 20 Binary Tree]]></title>
      <url>http://shopee.ai/2020/08/03/leetcode/summary_binary_tree/</url>
      <content type="html"><![CDATA[<!--<img src="/images/icpc/BinaryTree-1.png" width="450" alt="" />-->
<p><img src="/images/leetcode/binary_tree-2.png" width="600" alt=""></p>
<a id="more"></a>
<p><strong>easyï¼š</strong></p>
<blockquote>
<ol>
<li>é€’å½’ï¼š [æ±‚äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°] ï¼Œ f(root.lchild)+ f(root.rchild) + 1 ï¼Œ <strong>âœ”ï¸</strong></li>
<li>é€’å½’ï¼š [æ±‚äºŒå‰æ ‘(æœ€å¤§æ·±åº¦)&amp;(æœ€å°æ·±åº¦)] ï¼Œmax(max_depth(root.left), max_depth(root.right))+1</li>
<li>é€’å½’ï¼š <a href="https://leetcode-cn.com/problems/ping-heng-er-cha-shu-lcof/" target="_blank" rel="external">å‰‘æŒ‡ Offer 55 - II. å¹³è¡¡äºŒå‰æ ‘</a></li>
<li><p>é€’å½’ï¼š [æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„èŠ‚ç‚¹ä¸ªæ•°] ï¼Œ f(root.left, k-1) + f(root.right, k-1) ï¼Œ âœ”ï¸</p>
</li>
<li><p>é€’å½’ï¼š [æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°] if(k==1 and root.left and root.right is null) return 1; ï¼Œ âœ”ï¸</p>
</li>
<li>é€’å½’ï¼š [äºŒå‰æ ‘å…ˆåºéå†/å‰åºéå†]  (fIno(Node* root) { while(1) {if else}</li>
<li>é€’å½’ï¼š [åˆ¤æ–­ä¸¤æ£µäºŒå‰æ ‘æ˜¯å¦ç»“æ„ç›¸åŒ] ï¼Œ âœ”ï¸</li>
<li>é€’å½’ï¼š <a href="https://leetcode-cn.com/problems/er-cha-shu-de-jing-xiang-lcof/" target="_blank" rel="external">äºŒå‰æ ‘çš„é•œåƒï¼ˆå‰‘æŒ‡ Offer 27ï¼‰</a> ï¼Œ ï¼ˆå·¦å³é€’å½’äº¤æ¢ï¼‰âœ”ï¸ </li>
<li>é€’å½’ï¼š [å‰‘æŒ‡ Offer 28. å¯¹ç§°çš„äºŒå‰æ ‘] ï¼ˆåŒå‡½æ•°ï¼Œæ‰¿æ¥ä¸Šé¢˜äºŒå‰æ ‘çš„é•œåƒï¼Œ goodï¼‰ ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<p><strong>Medium</strong></p>
<blockquote>
<ol>
<li>é€’å½’ï¼š [æ±‚äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€ä½å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ good] ï¼Œ âœ”ï¸</li>
<li>é€’å½’ï¼š [æ±‚äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ good] ï¼Œ âœ”ï¸</li>
<li>é€’å½’ï¼š æ ¹æ®å‰åºå’Œä¸­åºé‡å»ºäºŒå‰æ ‘ ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lowestCommonAncestor</span><span class="params">(self, root: TreeNode, p: TreeNode, q: TreeNode)</span> -&gt; TreeNode:</span></span><br></pre></td></tr></table></figure>
<p><strong>hard</strong></p>
<blockquote>
<ol>
<li><a href="https://leetcode.com/problems/serialize-and-deserialize-binary-tree/" target="_blank" rel="external">297. Serialize and Deserialize Binary Tree å‰‘æŒ‡offerï¼šåºåˆ—åŒ–äºŒå‰æ ‘</a> ï¼Œ âœ”ï¸</li>
<li><a href="https://leetcode-cn.com/problems/xu-lie-hua-er-cha-shu-lcof/solution/mian-shi-ti-37-xu-lie-hua-er-cha-shu-ceng-xu-bian-/" target="_blank" rel="external">é¢è¯•é¢˜37. åºåˆ—åŒ–äºŒå‰æ ‘ï¼ˆå±‚åºéå† BFS ï¼Œæ¸…æ™°å›¾è§£ï¼‰</a></li>
</ol>
</blockquote>
<p><strong>0. å‡ ä¸ªæ¦‚å¿µ</strong></p>
<blockquote>
<p>å®Œå…¨äºŒå‰æ ‘ï¼šè‹¥äºŒå‰æ ‘çš„é«˜åº¦æ˜¯hï¼Œé™¤ç¬¬hå±‚ä¹‹å¤–ï¼Œå…¶ä»–ï¼ˆ1h-1ï¼‰å±‚çš„èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°äº†æœ€å¤§ä¸ªæ•°ï¼Œå¹¶ä¸”ç¬¬hå±‚çš„èŠ‚ç‚¹éƒ½è¿ç»­çš„é›†ä¸­åœ¨æœ€å·¦è¾¹ã€‚æƒ³åˆ°ç‚¹ä»€ä¹ˆæ²¡ï¼Ÿå®é™…ä¸Šï¼Œå®Œå…¨äºŒå‰æ ‘å’Œå †è”ç³»æ¯”è¾ƒç´§å¯†å“ˆ</p>
<p>æ»¡äºŒå‰æ ‘ï¼šé™¤æœ€åä¸€å±‚å¤–ï¼Œæ¯ä¸€å±‚ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œæœ€åä¸€å±‚éƒ½æ˜¯å¶å­èŠ‚ç‚¹ã€‚</p>
<p>å“ˆå¤«æ›¼æ ‘ï¼šç»™å®šnä¸ªæƒå€¼ä½œä¸ºnçš„å¶å­ç»“ç‚¹ï¼Œæ„é€ ä¸€æ£µäºŒå‰æ ‘ï¼Œè‹¥å¸¦æƒè·¯å¾„é•¿åº¦è¾¾åˆ°æœ€å°ï¼Œç§°è¿™æ ·çš„äºŒå‰æ ‘ä¸ºæœ€ä¼˜äºŒå‰æ ‘ï¼Œä¹Ÿç§°ä¸ºå“ˆå¤«æ›¼æ ‘(Huffman tree)ã€‚</p>
<p>äºŒå‰æ’åºæ ‘ï¼šåˆç§°äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinary Search Treeï¼‰ï¼Œäº¦ç§°äºŒå‰æœç´¢æ ‘ã€‚äºŒå‰æ’åºæ ‘æˆ–è€…æ˜¯ä¸€æ£µç©ºæ ‘ï¼Œ</p>
<p>äºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log(n))ï¼Œæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼ˆç›¸å½“äºé¡ºåºæŸ¥æ‰¾ï¼‰</p>
<p>å¹³è¡¡äºŒå‰æ ‘ï¼šåˆç§° AVL æ ‘ã€‚å¹³è¡¡äºŒå‰æ ‘æ˜¯äºŒå‰æœç´¢æ ‘çš„è¿›åŒ–ç‰ˆï¼Œæ‰€è°“å¹³è¡¡äºŒå‰æ ‘æŒ‡çš„æ˜¯ï¼Œå·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1ã€‚</p>
<p>çº¢é»‘æ ‘ï¼šçº¢é»‘æ ‘æ˜¯æ¯ä¸ªèŠ‚ç‚¹éƒ½å¸¦é¢œè‰²çš„æ ‘ï¼ŒèŠ‚ç‚¹é¢œè‰²æˆ–æ˜¯çº¢è‰²æˆ–æ˜¯é»‘è‰²ï¼Œçº¢é»‘æ ‘æ˜¯ä¸€ç§æŸ¥æ‰¾æ ‘ã€‚çº¢é»‘æ ‘æœ‰ä¸€ä¸ªé‡è¦çš„æ€§è´¨ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æœ€é•¿çš„è·¯å¾„ä¸å¤šäºæœ€çŸ­çš„è·¯å¾„çš„é•¿åº¦çš„ä¸¤å€ã€‚å¯¹äºçº¢é»‘æ ‘ï¼Œæ’å…¥ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯Oï¼ˆlog Nï¼‰ã€‚</p>
</blockquote>
<h2 id="1-æ±‚äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°"><a href="#1-æ±‚äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°" class="headerlink" title="1. æ±‚äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°"></a>1. æ±‚äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°</h2><p>python</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.lchild = <span class="keyword">None</span></span><br><span class="line">        self.rchild = <span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNodeNumRec</span><span class="params">(root)</span>:</span> <span class="comment">#é€’å½’æ±‚å¶å­èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> getNodeNumRec(root.lchild)+ getNodeNumRec(root.rchild) + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getNodeNumRec</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;             </span><br><span class="line">        <span class="keyword">return</span> getNodeNumRec(root.left) + getNodeNumRec(root.right) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-æ±‚äºŒå‰æ ‘çš„æœ€å¤§å±‚æ•°-æœ€å¤§æ·±åº¦"><a href="#2-æ±‚äºŒå‰æ ‘çš„æœ€å¤§å±‚æ•°-æœ€å¤§æ·±åº¦" class="headerlink" title="2. æ±‚äºŒå‰æ ‘çš„æœ€å¤§å±‚æ•°(æœ€å¤§æ·±åº¦)"></a>2. æ±‚äºŒå‰æ ‘çš„æœ€å¤§å±‚æ•°(æœ€å¤§æ·±åº¦)</h2><p>é€’å½’è§£æ³•ï¼š</p>
<blockquote>
<p>ï¼ˆ1ï¼‰å¦‚æœäºŒå‰æ ‘ä¸ºç©ºï¼ŒäºŒå‰æ ‘çš„æ·±åº¦ä¸º0<br>ï¼ˆ2ï¼‰å¦‚æœäºŒå‰æ ‘ä¸ä¸ºç©ºï¼ŒäºŒå‰æ ‘çš„æ·±åº¦ = max(å·¦å­æ ‘æ·±åº¦ï¼Œ å³å­æ ‘æ·±åº¦) + 1</p>
</blockquote>
<p>python</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max_depth</span><span class="params">(root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> max(max_depth(root.left), max_depth(root.right))+<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="2-1-äºŒå‰æ ‘çš„æœ€å°æ·±åº¦"><a href="#2-1-äºŒå‰æ ‘çš„æœ€å°æ·±åº¦" class="headerlink" title="2.1 äºŒå‰æ ‘çš„æœ€å°æ·±åº¦"></a>2.1 äºŒå‰æ ‘çš„æœ€å°æ·±åº¦</h3><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å°æ·±åº¦ã€‚</p>
<p>æœ€å°æ·±åº¦æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿‘å¶å­èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°é‡ã€‚</p>
<p>python</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">min_depth</span><span class="params">(root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    left = min_depth(root.left)</span><br><span class="line">    right = min_depth(root.right)</span><br><span class="line">    <span class="keyword">return</span> left + right + <span class="number">1</span> <span class="keyword">if</span> (left == <span class="number">0</span> <span class="keyword">or</span> right == <span class="number">0</span>) <span class="keyword">else</span> min(left, right) + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="3-å…ˆåºéå†-å‰åºéå†"><a href="#3-å…ˆåºéå†-å‰åºéå†" class="headerlink" title="3. å…ˆåºéå†/å‰åºéå†"></a>3. å…ˆåºéå†/å‰åºéå†</h2><p><a href="https://leetcode.cn/problems/binary-tree-preorder-traversal/" target="_blank" rel="external">LeetCodeï¼šBinary Tree Preorder Traversal</a></p>
<p>Given a binary tree, return the preorder traversal of its nodesâ€™ values.</p>
<p>ç»™å®šäºŒå‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„å‰åºéå†ã€‚ æ ¹ - å·¦ - å³</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Input: [1,null,2,3]</span><br><span class="line">   1</span><br><span class="line">    \</span><br><span class="line">     2</span><br><span class="line">    /</span><br><span class="line">   3</span><br><span class="line"></span><br><span class="line">Output: [1,2,3]</span><br></pre></td></tr></table></figure>
<p>æœ‰ä¸¤ç§é€šç”¨çš„éå†æ ‘çš„ç­–ç•¥ï¼š</p>
<blockquote>
<ol>
<li>æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</li>
<li>å®½åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰</li>
</ol>
</blockquote>
<p><img src="/images/leetcode/binary_tree-2.png" width="600" alt=""></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="string">""" Definition of a binary tree node."""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="keyword">None</span></span><br><span class="line">        self.right = <span class="keyword">None</span></span><br></pre></td></tr></table></figure>
<p>é€’å½’ (Recursive)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pre_order</span><span class="params">(root, output)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    output.add(root.val)</span><br><span class="line">    </span><br><span class="line">    pre_order(root.left, output)</span><br><span class="line">    pre_order(root.right, output)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">in_order</span><span class="params">(root, output)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    in_order(root.left, output)</span><br><span class="line">    output.add(root.val)</span><br><span class="line">    in_order(root.right, output)</span><br></pre></td></tr></table></figure>
<p>éé€’å½’ (non-recursive )</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">preorderTraversal</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        <span class="string">"""</span><br><span class="line">        :type root: TreeNode</span><br><span class="line">        :rtype: List[int]</span><br><span class="line">        """</span></span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        </span><br><span class="line">        stack, output = [root, ], []</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> stack:</span><br><span class="line">            root = stack.pop() <span class="comment"># python stack == list, pop()</span></span><br><span class="line">            <span class="keyword">if</span> root <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">                output.append(root.val)</span><br><span class="line">                <span class="keyword">if</span> root.right <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>: <span class="comment">## first right into, due to stack</span></span><br><span class="line">                    stack.append(root.right)</span><br><span class="line">                <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">                    stack.append(root.left)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure>
<h2 id="4-ä¸­åºéé€’å½’"><a href="#4-ä¸­åºéé€’å½’" class="headerlink" title="4. ä¸­åºéé€’å½’"></a>4. ä¸­åºéé€’å½’</h2><p><a href="https://leetcode.com/problems/binary-tree-inorder-traversal/description/" target="_blank" rel="external">LeetCodeï¼šBinary Tree Inorder Traversal</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inOrder</span><span class="params">(self, root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    myStack = []</span><br><span class="line">    node = root</span><br><span class="line">    <span class="keyword">while</span> node <span class="keyword">or</span> myStack:</span><br><span class="line">        <span class="keyword">while</span> node:</span><br><span class="line">            <span class="comment"># ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¸€ç›´æ‰¾å®ƒçš„å·¦å­æ ‘</span></span><br><span class="line">            myStack.append(node)</span><br><span class="line">            node = node.lchild</span><br><span class="line">        <span class="comment"># whileç»“æŸè¡¨ç¤ºå½“å‰èŠ‚ç‚¹nodeä¸ºç©ºï¼Œå³å‰ä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰å·¦å­æ ‘äº†</span></span><br><span class="line">        node = myStack.pop()</span><br><span class="line">        <span class="keyword">print</span> node.val</span><br><span class="line">        <span class="comment"># å¼€å§‹æŸ¥çœ‹å®ƒçš„å³å­æ ‘</span></span><br><span class="line">        node = node.rchild</span><br></pre></td></tr></table></figure>
<h2 id="5-ååºéé€’å½’"><a href="#5-ååºéé€’å½’" class="headerlink" title="5. ååºéé€’å½’"></a>5. ååºéé€’å½’</h2><p><a href="https://leetcode.com/problems/binary-tree-postorder-traversal/description/" target="_blank" rel="external">LeetCodeï¼šBinary Tree Postorder Traversal</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">later_stack</span><span class="params">(self, root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    myStack1 = []</span><br><span class="line">    myStack2 = []</span><br><span class="line">    node = root</span><br><span class="line">    myStack1.append(node)</span><br><span class="line">    <span class="keyword">while</span> myStack1:</span><br><span class="line">    <span class="comment"># è¿™ä¸ªwhileå¾ªç¯çš„åŠŸèƒ½æ˜¯æ‰¾å‡ºååºéå†çš„é€†åºï¼Œå­˜åœ¨myStack2é‡Œé¢</span></span><br><span class="line">        node = myStack1.pop()</span><br><span class="line">        <span class="keyword">if</span> node.lchild:</span><br><span class="line">            myStack1.append(node.lchild)</span><br><span class="line">        <span class="keyword">if</span> node.rchild:</span><br><span class="line">            myStack1.append(node.rchild)</span><br><span class="line">        myStack2.append(node)</span><br><span class="line">    <span class="keyword">while</span> myStack2:</span><br><span class="line">    <span class="comment"># å°†myStack2ä¸­çš„å…ƒç´ å‡ºæ ˆï¼Œå³ä¸ºååºéå†æ¬¡åº</span></span><br><span class="line">        <span class="keyword">print</span> myStack2.pop().val</span><br></pre></td></tr></table></figure>
<h2 id="6-åˆ†å±‚éå†"><a href="#6-åˆ†å±‚éå†" class="headerlink" title="6. åˆ†å±‚éå†"></a>6. åˆ†å±‚éå†</h2><p><a href="https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-lcof/" target="_blank" rel="external">å‰‘æŒ‡ Offer 32 - I. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘</a><br><a href="https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-ii-lcof/" target="_blank" rel="external">å‰‘æŒ‡ Offer 32 - II. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ II</a><br><a href="https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-iii-lcof/" target="_blank" rel="external">å‰‘æŒ‡ Offer 32 - III. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ III - æŒ‰ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘</a></p>
<p>æœ¬é¢˜æ˜¯è®©æˆ‘ä»¬æŠŠäºŒå‰æ ‘çš„æ¯ä¸€å±‚èŠ‚ç‚¹æ”¾å…¥åˆ°åŒä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œæœ€åè¿”å›å„å±‚çš„åˆ—è¡¨ç»„æˆçš„æ€»çš„åˆ—è¡¨ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ BFS å’Œ DFS è§£å†³ã€‚</p>
<p>å·¦è¾¹æ˜¯BFSï¼ŒæŒ‰ç…§å±‚è¿›è¡Œæœç´¢ï¼›å›¾å³è¾¹æ˜¯DFSï¼Œå…ˆä¸€è·¯èµ°åˆ°åº•ï¼Œç„¶åå†å›å¤´æœç´¢ã€‚</p>
<p><img src="/images/leetcode/binary_tree-3.png" width="700" alt=""></p>
<p>æ¨¡æ¿2</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque </span><br><span class="line">A=deque([]) <span class="comment">#åˆ›å»ºä¸€ä¸ªç©ºçš„åŒé˜Ÿåˆ—</span></span><br><span class="line">A.append(n) <span class="comment">#ä»å³è¾¹åƒé˜Ÿåˆ—ä¸­å¢åŠ å…ƒç´  ï¼Œnè¡¨ç¤ºå¢åŠ çš„å…ƒç´ </span></span><br><span class="line">A.appendleft(n) <span class="comment">#ä»å·¦è¾¹åƒé˜Ÿåˆ—ä¸­å¢åŠ å…ƒç´ ï¼Œnè¡¨ç¤ºå¢åŠ çš„å…ƒç´ </span></span><br><span class="line">A.pop() <span class="comment">#ä»é˜Ÿåˆ—çš„å³è¾¹åˆ é™¤å…ƒç´ ï¼Œå¹¶ä¸”è¿”å›åˆ é™¤å€¼</span></span><br><span class="line">A.popleft() <span class="comment">#ä»é˜Ÿåˆ—çš„å·¦è¾¹åˆ é™¤å…ƒç´ ï¼Œå¹¶ä¸”è¿”å›åˆ é™¤å€¼</span></span><br></pre></td></tr></table></figure>
<p>é¢˜ç›®æè¿°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">äºŒå‰æ ‘ï¼š[3,9,20,null,null,15,7],</span><br><span class="line"></span><br><span class="line">    3</span><br><span class="line">   / \</span><br><span class="line">  9  20</span><br><span class="line">    /  \</span><br><span class="line">   15   7</span><br><span class="line"></span><br><span class="line">è¿”å›å…¶å±‚æ¬¡éå†ç»“æœï¼š</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">  [3],</span><br><span class="line">  [9,20],</span><br><span class="line">  [15,7]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>Answerï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">levelOrder</span><span class="params">(self, root: TreeNode)</span> -&gt; List[List[int]]:</span></span><br><span class="line">        <span class="string">"""</span><br><span class="line">        :type root: TreeNode</span><br><span class="line">        :rtype: List[List[int]]</span><br><span class="line">        """</span></span><br><span class="line">        queue = collections.deque()</span><br><span class="line">        queue.append(root)</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">while</span> queue:</span><br><span class="line">            size = len(queue)</span><br><span class="line">            level = []</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(size):</span><br><span class="line">                cur = queue.popleft()</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> cur:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                level.append(cur.val)</span><br><span class="line">                queue.append(cur.left)</span><br><span class="line">                queue.append(cur.right)</span><br><span class="line">            <span class="keyword">if</span> level:</span><br><span class="line">                res.append(level)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<p><strong>æŒ‰ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘ ï¼ˆä¸é”™codeï¼‰</strong></p>
<p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°æŒ‰ç…§ä¹‹å­—å½¢æ‰“å°äºŒå‰æ ‘ï¼Œå³ç¬¬ä¸€è¡ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œç¬¬äºŒå±‚æŒ‰ç…§ä»å³è‡³å·¦çš„é¡ºåºæ‰“å°ï¼Œç¬¬ä¸‰è¡ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œå…¶ä»–è¡Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p>æ–¹æ³•1ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">levelOrder</span><span class="params">(self, root: TreeNode)</span> -&gt; List[List[int]]:</span></span><br><span class="line">        <span class="string">"""</span><br><span class="line">        :type root: TreeNode</span><br><span class="line">        :rtype: List[List[int]]</span><br><span class="line">        """</span></span><br><span class="line">        queue = collections.deque()</span><br><span class="line">        queue.append(root)</span><br><span class="line">        res = []</span><br><span class="line">        cnt = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> queue:</span><br><span class="line">            size = len(queue)</span><br><span class="line">            level = []</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(size):</span><br><span class="line">                cur = queue.popleft()</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> cur:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                level.append(cur.val)</span><br><span class="line">                queue.append(cur.left)</span><br><span class="line">                queue.append(cur.right)</span><br><span class="line">            <span class="keyword">if</span> level:</span><br><span class="line">                <span class="keyword">if</span> cnt % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">                    res.append(level)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    res.append(level[::<span class="number">-1</span>])</span><br><span class="line">                cnt += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<p>æ–¹æ³•2ï¼š</p>
<blockquote>
<p>1). è®¾ä¸¤ä¸ªæ ˆï¼Œs2å­˜æ”¾å¥‡æ•°å±‚ï¼Œs1å­˜æ”¾å¶æ•°å±‚</p>
<p>2). éå†s2èŠ‚ç‚¹çš„åŒæ—¶æŒ‰ç…§å·¦å­æ ‘ã€å³å­æ ‘çš„é¡ºåºåŠ å…¥s1ï¼Œ</p>
<p>3). éå†s1èŠ‚ç‚¹çš„åŒæ—¶æŒ‰ç…§å³å­æ ‘ã€å·¦å­æ ‘çš„é¡ºåºåŠ å…¥s2</p>
</blockquote>
<h2 id="7-æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„èŠ‚ç‚¹ä¸ªæ•°"><a href="#7-æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„èŠ‚ç‚¹ä¸ªæ•°" class="headerlink" title="7. æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„èŠ‚ç‚¹ä¸ªæ•°"></a>7. æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„èŠ‚ç‚¹ä¸ªæ•°</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_k_level_number</span><span class="params">(root, k)</span>:</span> </span><br><span class="line">    <span class="keyword">if</span> root == <span class="keyword">None</span> <span class="keyword">or</span> k ==<span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> root != <span class="keyword">None</span> <span class="keyword">and</span> k == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> get_k_level_number(root.left, k<span class="number">-1</span>) + get_k_level_number(root.right, k<span class="number">-1</span>)</span><br></pre></td></tr></table></figure>
<h2 id="8-æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°"><a href="#8-æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°" class="headerlink" title="8. æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°"></a>8. æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_k_level_leaf_number</span><span class="params">(root, k)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root == <span class="keyword">None</span> || k == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> root != <span class="keyword">None</span> <span class="keyword">and</span> k == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">if</span> root.left == <span class="keyword">None</span> <span class="keyword">and</span> root.right == <span class="keyword">None</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> get_k_level_number(root.left, k<span class="number">-1</span>) + get_k_level_number(root.right, k<span class="number">-1</span>)</span><br></pre></td></tr></table></figure>
<h2 id="9-åˆ¤æ–­ä¸¤æ£µäºŒå‰æ ‘æ˜¯å¦ç»“æ„ç›¸åŒ"><a href="#9-åˆ¤æ–­ä¸¤æ£µäºŒå‰æ ‘æ˜¯å¦ç»“æ„ç›¸åŒ" class="headerlink" title="9. åˆ¤æ–­ä¸¤æ£µäºŒå‰æ ‘æ˜¯å¦ç»“æ„ç›¸åŒ"></a>9. åˆ¤æ–­ä¸¤æ£µäºŒå‰æ ‘æ˜¯å¦ç»“æ„ç›¸åŒ</h2><p>ç»™å®šä¸¤ä¸ªäºŒå‰æ ‘ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ£€æŸ¥å®ƒä»¬æ˜¯å¦ç›¸åŒã€‚</p>
<p>é€’å½’è§£æ³•ï¼š</p>
<blockquote>
<p>ï¼ˆ1ï¼‰å¦‚æœä¸¤æ£µäºŒå‰æ ‘éƒ½ä¸ºç©ºï¼Œè¿”å›çœŸ</p>
<p>ï¼ˆ2ï¼‰å¦‚æœä¸¤æ£µäºŒå‰æ ‘ä¸€æ£µä¸ºç©ºï¼Œå¦ä¸€æ£µä¸ä¸ºç©ºï¼Œè¿”å›å‡</p>
<p>ï¼ˆ3ï¼‰å¦‚æœä¸¤æ£µäºŒå‰æ ‘éƒ½ä¸ä¸ºç©ºï¼Œå¦‚æœå¯¹åº”çš„å·¦å­æ ‘å’Œå³å­æ ‘éƒ½åŒæ„è¿”å›çœŸï¼Œå…¶ä»–è¿”å›å‡</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isSameTree</span><span class="params">(p: TreeNode, q: TreeNode)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> p == <span class="keyword">None</span> <span class="keyword">and</span> q == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">if</span> p == <span class="keyword">None</span> <span class="keyword">or</span> q == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> p.val == q.val:</span><br><span class="line">        <span class="keyword">return</span> isSameTree(p.left, q.left) <span class="keyword">and</span> isSameTree(p.right, q.right)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h2 id="10-å‰‘æŒ‡-Offer-55-II-å¹³è¡¡äºŒå‰æ ‘"><a href="#10-å‰‘æŒ‡-Offer-55-II-å¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="10. å‰‘æŒ‡ Offer 55 - II. å¹³è¡¡äºŒå‰æ ‘"></a>10. å‰‘æŒ‡ Offer 55 - II. å¹³è¡¡äºŒå‰æ ‘</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">    @file: isBalanceTree.py</span><br><span class="line">    @date: 2020-09-06 4:47 PM</span><br><span class="line">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="keyword">None</span></span><br><span class="line">        self.right = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isBalanced</span><span class="params">(self, root: TreeNode)</span> -&gt; bool:</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">maxHigh</span><span class="params">(root)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            <span class="keyword">return</span> max(maxHigh(root.left), maxHigh(root.right)) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> abs(maxHigh(root.left) - maxHigh(root.right)) &lt;= <span class="number">1</span> <span class="keyword">and</span> self.isBalanced(root.left) <span class="keyword">and</span> self.isBalanced(root.right)</span><br></pre></td></tr></table></figure>
<h2 id="11-æ±‚äºŒå‰æ ‘çš„é•œåƒ"><a href="#11-æ±‚äºŒå‰æ ‘çš„é•œåƒ" class="headerlink" title="11. æ±‚äºŒå‰æ ‘çš„é•œåƒ"></a>11. æ±‚äºŒå‰æ ‘çš„é•œåƒ</h2><p>LeetCodeï¼š<a href="https://leetcode.com/problems/invert-binary-tree/description/" target="_blank" rel="external">Invert Binary Tree</a> ç¿»è½¬ä¸€æ£µäºŒå‰æ ‘</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç¿»è½¬ä¸€æ£µäºŒå‰æ ‘.</span><br><span class="line">è¾“å…¥ï¼š</span><br><span class="line"></span><br><span class="line">     4</span><br><span class="line">   /   \</span><br><span class="line">  2     7</span><br><span class="line"> / \   / \</span><br><span class="line">1   3 6   9</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line"></span><br><span class="line">     4</span><br><span class="line">   /   \</span><br><span class="line">  7     2</span><br><span class="line"> / \   / \</span><br><span class="line">9   6 3   1</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mirrorTree</span><span class="params">(self, root: TreeNode)</span> -&gt; TreeNode:</span></span><br><span class="line">        <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line"></span><br><span class="line">        node = root.left</span><br><span class="line">        root.left = self.mirrorTree(root.right)</span><br><span class="line">        root.right = self.mirrorTree(node)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>
<h3 id="11-1-å¯¹ç§°äºŒå‰æ ‘"><a href="#11-1-å¯¹ç§°äºŒå‰æ ‘" class="headerlink" title="11.1 å¯¹ç§°äºŒå‰æ ‘"></a>11.1 å¯¹ç§°äºŒå‰æ ‘</h3><p>LeetCodeï¼š <a href="https://leetcode-cn.com/problems/symmetric-tree/description/" target="_blank" rel="external">å‰‘æŒ‡ Offer 28. å¯¹ç§°çš„äºŒå‰æ ‘ 101. Symmetric Tree</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä¾‹å¦‚ï¼ŒäºŒå‰æ ‘ [1,2,2,3,4,4,3] æ˜¯å¯¹ç§°çš„ã€‚</span><br><span class="line"></span><br><span class="line">    1</span><br><span class="line">   / \</span><br><span class="line">  2   2</span><br><span class="line"> / \ / \</span><br><span class="line">3  4 4  3</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isSymmetricHelper</span><span class="params">(left: TreeNode, right: TreeNode)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> left == <span class="keyword">None</span> <span class="keyword">and</span> right == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">if</span> left == <span class="keyword">None</span> <span class="keyword">or</span> right == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    <span class="keyword">if</span> left.val != right.val:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    <span class="keyword">return</span> isSymmetricHelper(left.left, right.right) <span class="keyword">and</span> isSymmetricHelper(left.right, right.left)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isSymmetric</span><span class="params">(self, root: TreeNode)</span> -&gt; bool:</span></span><br><span class="line">        <span class="keyword">return</span> root == <span class="keyword">None</span> <span class="keyword">or</span> isSymmetricHelper(root.left, root.right)</span><br></pre></td></tr></table></figure>
<h2 id="12-æ±‚äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€ä½å…¬å…±ç¥–å…ˆèŠ‚ç‚¹"><a href="#12-æ±‚äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€ä½å…¬å…±ç¥–å…ˆèŠ‚ç‚¹" class="headerlink" title="12. æ±‚äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€ä½å…¬å…±ç¥–å…ˆèŠ‚ç‚¹"></a>12. æ±‚äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€ä½å…¬å…±ç¥–å…ˆèŠ‚ç‚¹</h2><p>LeetCodeï¼š<a href="https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/description/" target="_blank" rel="external">Lowest Common Ancestor of a Binary Tree</a></p>
<p><img src="/images/leetcode/binary-tree-5.png" width="600" alt=""></p>
<p>ç»™å®šäºŒå‰æ ‘ï¼Œæ‰¾åˆ°æ ‘ä¸­ä¸¤ä¸ªç»™å®šèŠ‚ç‚¹çš„æœ€ä½å…±åŒç¥–å…ˆï¼ˆLCAï¼‰ã€‚</p>
<p><img src="/images/leetcode/binary-tree-6.png" width="600" alt=""></p>
<p><strong>é€’å½’è§£æ³•</strong>ï¼š</p>
<p>ï¼ˆ1ï¼‰å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹åˆ†åˆ«åœ¨æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œåˆ™è¿”å›æ ¹èŠ‚ç‚¹</p>
<p>ï¼ˆ2ï¼‰å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½åœ¨å·¦å­æ ‘ï¼Œåˆ™é€’å½’å¤„ç†å·¦å­æ ‘ï¼›å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½åœ¨å³å­æ ‘ï¼Œåˆ™é€’å½’å¤„ç†å³å­æ ‘</p>
<p><a href="https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/solution/236-er-cha-shu-de-zui-jin-gong-gong-zu-xian-hou-xu/" target="_blank" rel="external">äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆï¼ˆååºéå† DFS ï¼Œæ¸…æ™°å›¾è§£ï¼‰</a></p>
<p><strong>æ ¹æ®ä»¥ä¸Šå®šä¹‰ï¼Œè‹¥ root æ˜¯ p,q çš„ æœ€è¿‘å…¬å…±ç¥–å…ˆ ï¼Œåˆ™åªå¯èƒ½ä¸ºä»¥ä¸‹æƒ…å†µä¹‹ä¸€</strong>ï¼š</p>
<blockquote>
<p>1). p å’Œ q åœ¨ root çš„å­æ ‘ä¸­ï¼Œä¸”åˆ†åˆ— root çš„ å¼‚ä¾§ï¼ˆå³åˆ†åˆ«åœ¨å·¦ã€å³å­æ ‘ä¸­ï¼‰ï¼›<br>2). p = rootï¼Œä¸” q åœ¨ root çš„å·¦æˆ–å³å­æ ‘ä¸­ï¼›<br>3). q = rootï¼Œä¸” p åœ¨ root çš„å·¦æˆ–å³å­æ ‘ä¸­ï¼›</p>
<p>è€ƒè™‘é€šè¿‡é€’å½’å¯¹äºŒå‰æ ‘è¿›è¡Œååºéå†ï¼Œå½“é‡åˆ°èŠ‚ç‚¹ p æˆ– q æ—¶è¿”å›ã€‚<strong>ä»åº•è‡³é¡¶å›æº¯</strong>ï¼Œå½“èŠ‚ç‚¹ p, q åœ¨èŠ‚ç‚¹ root çš„å¼‚ä¾§æ—¶ï¼ŒèŠ‚ç‚¹ root å³ä¸ºæœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œåˆ™å‘ä¸Šè¿”å› root.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lowestCommonAncestor</span><span class="params">(self, root: TreeNode, p: TreeNode, q: TreeNode)</span> -&gt; TreeNode:</span></span><br><span class="line">        <span class="comment"># å½“è¶Šè¿‡å¶èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥è¿”å› null</span></span><br><span class="line">        <span class="comment"># å½“ rootroot ç­‰äº p, qï¼Œ åˆ™ç›´æ¥è¿”å› root</span></span><br><span class="line">        <span class="keyword">if</span> root == <span class="keyword">None</span> <span class="keyword">or</span> root == p <span class="keyword">or</span> root == q:</span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line">        </span><br><span class="line">        left = self.lowestCommonAncestor(root.left, p, q)</span><br><span class="line">        right = self.lowestCommonAncestor(root.right, p, q)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> left <span class="keyword">and</span> <span class="keyword">not</span> right: <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> left: <span class="keyword">return</span> right</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> right: <span class="keyword">return</span> left</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">        <span class="comment">#if left != None and right != None:</span></span><br><span class="line">        <span class="comment">#    return root</span></span><br></pre></td></tr></table></figure>
<h3 id="12-1-æ±‚äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#12-1-æ±‚äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="12.1 æ±‚äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>12.1 æ±‚äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</h3><p>LeetCodeï¼š<a href="https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-search-tree/description/" target="_blank" rel="external">Lowest Common Ancestor of a Binary Search Tree</a></p>
<p>ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</p>
<p>ç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€</p>
<p><img src="/images/leetcode/binary-tree-7.png" width="550" alt=""></p>
<p>ç¬”è®°ï¼šp å’Œ q å…¶ä¸­çš„ä¸€ä¸ªåœ¨ LCA èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸Šï¼Œå¦ä¸€ä¸ªåœ¨ LCA èŠ‚ç‚¹çš„å³å­æ ‘ä¸Šã€‚</p>
<p>ä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸‹é¢è¿™ç§æƒ…å†µï¼š</p>
<p><img src="/images/leetcode/binary-tree-8.png" width="650" alt=""></p>
<p>ç®—æ³•:</p>
<ol>
<li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ ‘</li>
<li>å¦‚æœèŠ‚ç‚¹ p å’ŒèŠ‚ç‚¹ q éƒ½åœ¨å³å­æ ‘ä¸Šï¼Œé‚£ä¹ˆä»¥å³å­©å­ä¸ºæ ¹èŠ‚ç‚¹ç»§ç»­ 1 çš„æ“ä½œ</li>
<li>å¦‚æœèŠ‚ç‚¹ p å’ŒèŠ‚ç‚¹ q éƒ½åœ¨å·¦å­æ ‘ä¸Šï¼Œé‚£ä¹ˆä»¥å·¦å­©å­ä¸ºæ ¹èŠ‚ç‚¹ç»§ç»­ 1 çš„æ“ä½œ</li>
<li>å¦‚æœæ¡ä»¶ 2 å’Œæ¡ä»¶ 3 éƒ½ä¸æˆç«‹ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬å·²ç»æ‰¾åˆ°èŠ‚ p å’ŒèŠ‚ç‚¹ q çš„ LCA äº†</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lowestCommonAncestor</span><span class="params">(self, root, p, q)</span>:</span></span><br><span class="line">        <span class="string">"""</span><br><span class="line">        :type root: TreeNode</span><br><span class="line">        :type p: TreeNode</span><br><span class="line">        :type q: TreeNode</span><br><span class="line">        :rtype: TreeNode</span><br><span class="line">        """</span></span><br><span class="line">        <span class="comment"># Value of current node or parent node.</span></span><br><span class="line">        parent_val = root.val</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Value of p</span></span><br><span class="line">        p_val = p.val</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Value of q</span></span><br><span class="line">        q_val = q.val</span><br><span class="line"></span><br><span class="line">        <span class="comment"># If both p and q are greater than parent</span></span><br><span class="line">        <span class="keyword">if</span> p_val &gt; parent_val <span class="keyword">and</span> q_val &gt; parent_val:    </span><br><span class="line">            <span class="keyword">return</span> self.lowestCommonAncestor(root.right, p, q)</span><br><span class="line">        <span class="comment"># If both p and q are lesser than parent</span></span><br><span class="line">        <span class="keyword">elif</span> p_val &lt; parent_val <span class="keyword">and</span> q_val &lt; parent_val:    </span><br><span class="line">            <span class="keyword">return</span> self.lowestCommonAncestor(root.left, p, q)</span><br><span class="line">        <span class="comment"># We have found the split point, i.e. the LCA node.</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>
<h2 id="13-æ±‚äºŒå‰æ ‘çš„ç›´å¾„"><a href="#13-æ±‚äºŒå‰æ ‘çš„ç›´å¾„" class="headerlink" title="13. æ±‚äºŒå‰æ ‘çš„ç›´å¾„"></a>13. æ±‚äºŒå‰æ ‘çš„ç›´å¾„</h2><p>LeetCodeï¼š<a href="https://leetcode-cn.com/problems/diameter-of-binary-tree/solution/er-cha-shu-de-zhi-jing-by-leetcode-solution/" target="_blank" rel="external">Diameter of Binary Tree</a></p>
<p>ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œä½ éœ€è¦è®¡ç®—å®ƒçš„ç›´å¾„é•¿åº¦ã€‚ä¸€æ£µäºŒå‰æ ‘çš„ç›´å¾„é•¿åº¦æ˜¯ä»»æ„ä¸¤ä¸ªç»“ç‚¹è·¯å¾„é•¿åº¦ä¸­çš„æœ€å¤§å€¼ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç©¿è¿‡æ ¹ç»“ç‚¹ã€‚</p>
<p>é€’å½’è§£æ³•ï¼šå¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œå®ƒçš„æœ€é•¿è·¯å¾„ç­‰äºå·¦å­æ ‘çš„æœ€é•¿è·¯å¾„+å³å­æ ‘çš„æœ€é•¿è·¯å¾„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">diameterOfBinaryTree</span><span class="params">(root)</span>:</span></span><br><span class="line">    ans = <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">depth</span><span class="params">(node)</span>:</span></span><br><span class="line">        <span class="comment"># è®¿é—®åˆ°ç©ºèŠ‚ç‚¹äº†ï¼Œè¿”å›0</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> node: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># å·¦å„¿å­ä¸ºæ ¹çš„å­æ ‘çš„æ·±åº¦</span></span><br><span class="line">        L = depth(node.left)</span><br><span class="line">        <span class="comment"># å³å„¿å­ä¸ºæ ¹çš„å­æ ‘çš„æ·±åº¦</span></span><br><span class="line">        R = depth(node.right)</span><br><span class="line">        <span class="comment"># è®¡ç®—d_nodeå³L+R+1 å¹¶æ›´æ–°ans</span></span><br><span class="line">        ans = max(ans, L+R+<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># è¿”å›è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘çš„æ·±åº¦</span></span><br><span class="line">        <span class="keyword">return</span> max(L, R) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    depth(root)</span><br><span class="line">    <span class="keyword">return</span> ans - <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="14-ç”±å‰åºéå†åºåˆ—å’Œä¸­åºéå†åºåˆ—é‡å»ºäºŒå‰æ ‘"><a href="#14-ç”±å‰åºéå†åºåˆ—å’Œä¸­åºéå†åºåˆ—é‡å»ºäºŒå‰æ ‘" class="headerlink" title="14. ç”±å‰åºéå†åºåˆ—å’Œä¸­åºéå†åºåˆ—é‡å»ºäºŒå‰æ ‘"></a>14. ç”±å‰åºéå†åºåˆ—å’Œä¸­åºéå†åºåˆ—é‡å»ºäºŒå‰æ ‘</h2><p>å‰‘æŒ‡offerï¼šé‡å»ºäºŒå‰æ ‘</p>
<p>LeetCodeï¼š<a href="https://weiweiblog.cn/20tree/" target="_blank" rel="external">Construct Binary Tree from Preorder and Inorder Traversal</a></p>
<p>å¦‚ä½•éå†æ ‘, éå†æ ‘æœ‰ä¸¤ç§é€šç”¨ç­–ç•¥ï¼š</p>
<ol>
<li>æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰</li>
<li>å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFSï¼‰</li>
</ol>
<p>æŒ‰ç…§é«˜åº¦é¡ºåºï¼Œä»ä¸Šå¾€ä¸‹é€å±‚éå†èŠ‚ç‚¹ã€‚ å…ˆéå†ä¸Šå±‚èŠ‚ç‚¹å†éå†ä¸‹å±‚èŠ‚ç‚¹ã€‚</p>
<p>ä¸‹å›¾ä¸­æŒ‰ç…§ä¸åŒçš„æ–¹æ³•éå†å¯¹åº”å­æ ‘ï¼Œå¾—åˆ°çš„åºåˆ—éƒ½æ˜¯ 1-2-3-4-5ã€‚æ ¹æ®ä¸åŒå­æ ‘ç»“æ„æ¯”è¾ƒä¸åŒéå†æ–¹æ³•çš„ç‰¹ç‚¹ã€‚</p>
<p><img src="/images/leetcode/interview-bfs_dfs.pngg" width="550" alt=""></p>
<p>LeetCodeï¼š<a href="https://leetcode-cn.com/problems/construct-binary-tree-from-inorder-and-postorder-traversal/description/" target="_blank" rel="external">ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">buildTree</span><span class="params">(self, inorder: List[int], postorder: List[int])</span> -&gt; TreeNode:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(in_left, in_right)</span>:</span></span><br><span class="line">            <span class="comment"># if there is no elements to construct subtrees</span></span><br><span class="line">            <span class="keyword">if</span> in_left &gt; in_right:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># pick up the last element as a root</span></span><br><span class="line">            val = postorder.pop()</span><br><span class="line">            root = TreeNode(val)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># root splits inorder list</span></span><br><span class="line">            <span class="comment"># into left and right subtrees</span></span><br><span class="line">            index = idx_map[val]</span><br><span class="line"> </span><br><span class="line">            <span class="comment"># build right subtree</span></span><br><span class="line">            root.right = helper(index + <span class="number">1</span>, in_right)</span><br><span class="line">            <span class="comment"># build left subtree</span></span><br><span class="line">            root.left = helper(in_left, index - <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># build a hashmap value -&gt; its index</span></span><br><span class="line">        idx_map = &#123;val:idx <span class="keyword">for</span> idx, val <span class="keyword">in</span> enumerate(inorder)&#125; </span><br><span class="line">        <span class="keyword">return</span> helper(<span class="number">0</span>, len(inorder) - <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>å‰åºéå† preorder = [3,9,20,15,7]<br>ä¸­åºéå† inorder = [9,3,15,20,7]</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">buildTree</span><span class="params">(self, preorder: List[int], inorder: List[int])</span> -&gt; TreeNode:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> (preorder <span class="keyword">and</span> inorder):</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        <span class="comment"># æ ¹æ®å‰åºæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå°±å¯ä»¥ç¡®å®šæ ¹èŠ‚ç‚¹	</span></span><br><span class="line">        root = TreeNode(preorder[<span class="number">0</span>])</span><br><span class="line">        <span class="comment"># ç”¨preorder[0]å»ä¸­åºæ•°ç»„ä¸­æŸ¥æ‰¾å¯¹åº”çš„å…ƒç´ </span></span><br><span class="line">        mid_idx = inorder.index(preorder[<span class="number">0</span>])</span><br><span class="line">        <span class="comment"># é€’å½’çš„å¤„ç†å‰åºæ•°ç»„çš„å·¦è¾¹éƒ¨åˆ†å’Œä¸­åºæ•°ç»„çš„å·¦è¾¹éƒ¨åˆ†</span></span><br><span class="line">        <span class="comment"># é€’å½’å¤„ç†å‰åºæ•°ç»„å³è¾¹éƒ¨åˆ†å’Œä¸­åºæ•°ç»„å³è¾¹éƒ¨åˆ†</span></span><br><span class="line">        root.left = self.buildTree(preorder[<span class="number">1</span>:mid_idx+<span class="number">1</span>],inorder[:mid_idx])</span><br><span class="line">        root.right = self.buildTree(preorder[mid_idx+<span class="number">1</span>:],inorder[mid_idx+<span class="number">1</span>:])</span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>
<h2 id="15-åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘"><a href="#15-åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘" class="headerlink" title="15. åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘"></a>15. åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘</h2><p>å®Œå…¨äºŒå‰æ ‘æ˜¯æŒ‡æœ€åä¸€å±‚å·¦è¾¹æ˜¯æ»¡çš„ï¼Œå³è¾¹å¯èƒ½æ…¢ä¹Ÿä¸èƒ½ä¸æ»¡ï¼Œç„¶åå…¶ä½™å±‚éƒ½æ˜¯æ»¡çš„ï¼Œæ ¹æ®è¿™ä¸ªç‰¹æ€§ï¼Œåˆ©ç”¨å±‚éå†ã€‚å¦‚æœæˆ‘ä»¬å½“å‰éå†åˆ°äº†NULLç»“ç‚¹ï¼Œå¦‚æœåç»­è¿˜æœ‰éNULLç»“ç‚¹ï¼Œè¯´æ˜æ˜¯éå®Œå…¨äºŒå‰æ ‘</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># from collections import deque</span></span><br><span class="line"><span class="comment"># queue = deque(), queue.pop(), queue.popleft(), queue.append, queue.appendleft</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,val=None)</span>:</span></span><br><span class="line">        self.val = val</span><br><span class="line">        self.left = <span class="keyword">None</span></span><br><span class="line">        self.right = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_tree</span><span class="params">(Node root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">    queue = deque()</span><br><span class="line">    queue.append(root)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">not</span> queue):</span><br><span class="line">        node = queue.popleft()</span><br><span class="line">        <span class="keyword">if</span> node <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            falg = <span class="keyword">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> flag <span class="keyword">is</span> <span class="keyword">True</span>:</span><br><span class="line">                retrun <span class="keyword">False</span></span><br><span class="line">            queue.append(node.left)</span><br><span class="line">            queue.append(node.right)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="16-æ ‘çš„å­ç»“æ„"><a href="#16-æ ‘çš„å­ç»“æ„" class="headerlink" title="16. æ ‘çš„å­ç»“æ„"></a>16. æ ‘çš„å­ç»“æ„</h2><p>å‰‘æŒ‡offerï¼š<a href="https://leetcode-cn.com/problems/shu-de-zi-jie-gou-lcof/" target="_blank" rel="external">æ ‘çš„å­ç»“æ„</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ç»™å®šçš„æ ‘ A:</span><br><span class="line"></span><br><span class="line">Â  Â  Â 3</span><br><span class="line">Â  Â  / \</span><br><span class="line">Â  Â 4 Â  5</span><br><span class="line">Â  / \</span><br><span class="line">Â 1 Â  2</span><br><span class="line">ç»™å®šçš„æ ‘ Bï¼š</span><br><span class="line"></span><br><span class="line">Â  Â 4Â </span><br><span class="line">Â  /</span><br><span class="line">Â 1</span><br><span class="line">è¿”å› trueï¼Œå› ä¸º B ä¸ A çš„ä¸€ä¸ªå­æ ‘æ‹¥æœ‰ç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šA = [3,4,5,1,2], B = [4,1]</span><br><span class="line">è¾“å‡ºï¼štrue</span><br></pre></td></tr></table></figure>
<p><a href="https://leetcode-cn.com/problems/shu-de-zi-jie-gou-lcof/solution/mian-shi-ti-26-shu-de-zi-jie-gou-xian-xu-bian-li-p/" target="_blank" rel="external">æ ‘çš„å­ç»“æ„:</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">recur</span><span class="params">(root1, root2)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root2 <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">if</span> root1 <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> root1.val != root2.val:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    <span class="keyword">return</span> recur(root1.left, root2.left) <span class="keyword">and</span> recur(root1.right, root2.right)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isSubStructure</span><span class="params">(self, root1: TreeNode, root2: TreeNode)</span> -&gt; bool:</span></span><br><span class="line">        <span class="keyword">if</span> root1 <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> root2 <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> recur(root1, root2) <span class="keyword">or</span> \</span><br><span class="line">               self.isSubStructure(root1.left, root2) <span class="keyword">or</span> \</span><br><span class="line">               self.isSubStructure(root1.right, root2)</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥ä¸¤æ£µäºŒå‰æ ‘Aï¼ŒBï¼Œåˆ¤æ–­Bæ˜¯ä¸æ˜¯Açš„å­ç»“æ„ã€‚</p>
<h2 id="17-äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„-é€’å½’dfså…ˆæ ¹éå†"><a href="#17-äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„-é€’å½’dfså…ˆæ ¹éå†" class="headerlink" title="17. äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„ (é€’å½’dfså…ˆæ ¹éå†)"></a>17. äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„ (é€’å½’dfså…ˆæ ¹éå†)</h2><p>å‰‘æŒ‡offerï¼š<a href="https://leetcode-cn.com/problems/er-cha-shu-zhong-he-wei-mou-yi-zhi-de-lu-jing-lcof/solution/mian-shi-ti-34-er-cha-shu-zhong-he-wei-mou-yi-zh-5/" target="_blank" rel="external">äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„</a></p>
<p><img src="/images/leetcode/binary-tree-17.png" width="650" alt=""></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pathSum</span><span class="params">(self, root: TreeNode, sum: int)</span> -&gt; List[List[int]]:</span></span><br><span class="line">        res, path = [], []</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">recur</span><span class="params">(root, tar)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> root: <span class="keyword">return</span></span><br><span class="line">            path.append(root.val)</span><br><span class="line">            tar -= root.val</span><br><span class="line">            <span class="keyword">if</span> tar == <span class="number">0</span> <span class="keyword">and</span> <span class="keyword">not</span> root.left <span class="keyword">and</span> <span class="keyword">not</span> root.right:</span><br><span class="line">                res.append(list(path))</span><br><span class="line">            recur(root.left, tar)</span><br><span class="line">            recur(root.right, tar)</span><br><span class="line">            path.pop()</span><br><span class="line"></span><br><span class="line">        recur(root, sum)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
<h2 id="18-äºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹"><a href="#18-äºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹" class="headerlink" title="18. äºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹"></a>18. äºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</h2><p>å‰‘æŒ‡offerï¼šäºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</p>
<blockquote>
<p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘å’Œå…¶ä¸­çš„ä¸€ä¸ªç»“ç‚¹ï¼Œè¯·æ‰¾å‡ºä¸­åºéå†é¡ºåºçš„ä¸‹ä¸€ä¸ªç»“ç‚¹å¹¶ä¸”è¿”å›ã€‚æ³¨æ„ï¼Œæ ‘ä¸­çš„ç»“ç‚¹ä¸ä»…åŒ…å«å·¦å³å­ç»“ç‚¹ï¼ŒåŒæ—¶åŒ…å«æŒ‡å‘çˆ¶ç»“ç‚¹çš„æŒ‡é’ˆã€‚</p>
</blockquote>
<p><img src="/images/leetcode/binary-tree-18.png" width="550" alt=""></p>
<p><strong>è§£é¢˜æ€è·¯ ï¼š</strong> ä¸­åºéå†ï¼šå·¦ -&gt; æ ¹ -&gt; å³</p>
<p>åˆ†3ç§æƒ…å†µï¼š</p>
<ul>
<li>(1) å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›ç©ºï¼›</li>
<li>(2) å¦‚æœå½“å‰èŠ‚ç‚¹æœ‰å³å­æ ‘ï¼Œåˆ™è¿”å›å³å­æ ‘çš„æœ€å·¦å­æ ‘</li>
<li>(3) å¦‚æœå½“å‰èŠ‚ç‚¹æ²¡æœ‰å³å­æ ‘ï¼Œå†åˆ†ä¸¤ç§æƒ…å†µï¼š</li>
</ul>
<blockquote>
<p>  (3.1) çœ‹çœ‹å½“å‰èŠ‚ç‚¹æ˜¯å®ƒçš„çˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å›å®ƒçš„çˆ¶èŠ‚ç‚¹ï¼›  </p>
<p>  (3.2) <strong>å¦‚æœå½“å‰èŠ‚ç‚¹ä¸æ˜¯å®ƒçš„çˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œåˆ™æŠŠçˆ¶èŠ‚ç‚¹èµ‹ç»™å½“å‰èŠ‚ç‚¹ï¼Œå†åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯ä¸æ˜¯å®ƒçš„çˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œç›´åˆ°å½“å‰èŠ‚ç‚¹æ˜¯å®ƒçš„çˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œè¿”å›å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚</strong> <code>H èŠ‚ç‚¹ï¼Œæ˜¯ä¸€ä¸ªä¾‹å­</code></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># class TreeLinkNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"><span class="comment">#         self.next = None</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">GetNext</span><span class="params">(self, pNode)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> pNode: <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        <span class="keyword">if</span> pNode.right:</span><br><span class="line">            pNode = pNode.right</span><br><span class="line">            <span class="keyword">while</span> pNode.left:</span><br><span class="line">                pNode = pNode.left</span><br><span class="line">            <span class="keyword">return</span> pNode</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">while</span> pNode.next:</span><br><span class="line">                <span class="keyword">if</span> pNode == pNode.next.left:</span><br><span class="line">                    <span class="keyword">return</span> pNode.next</span><br><span class="line">                pNode = pNode.next</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">None</span></span><br></pre></td></tr></table></figure>
<h2 id="19-åºåˆ—åŒ–äºŒå‰æ ‘"><a href="#19-åºåˆ—åŒ–äºŒå‰æ ‘" class="headerlink" title="19. åºåˆ—åŒ–äºŒå‰æ ‘"></a>19. åºåˆ—åŒ–äºŒå‰æ ‘</h2><p>å‰‘æŒ‡offerï¼š<a href="https://leetcode-cn.com/problems/serialize-and-deserialize-binary-tree/solution/ceng-xu-bian-li-by-tinylife/" target="_blank" rel="external">åºåˆ—åŒ–äºŒå‰æ ‘</a></p>
<p>LeetCodeï¼š<a href="https://leetcode.com/problems/serialize-and-deserialize-binary-tree/description/" target="_blank" rel="external">Serialize and Deserialize Binary Tree</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä½ å¯ä»¥å°†ä»¥ä¸‹äºŒå‰æ ‘ï¼š</span><br><span class="line"></span><br><span class="line">    1</span><br><span class="line">   / \</span><br><span class="line">  2   3</span><br><span class="line">     / \</span><br><span class="line">    4   5</span><br><span class="line"></span><br><span class="line">åºåˆ—åŒ–ä¸º &quot;[1,2,3,null,null,4,5]&quot;</span><br><span class="line"></span><br><span class="line">      1</span><br><span class="line">    /    \</span><br><span class="line">   2      3</span><br><span class="line">  / \    / \</span><br><span class="line">nul nul 4  nul</span><br><span class="line">       / \</span><br><span class="line">     nul nul</span><br></pre></td></tr></table></figure>
<p>è¯·å®ç°ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«ç”¨æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æ ‘</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Codec</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">serialize</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        <span class="string">"""Encodes a tree to a single string.</span><br><span class="line">        </span><br><span class="line">        :type root: TreeNode</span><br><span class="line">        :rtype: str</span><br><span class="line">        """</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root: <span class="keyword">return</span> <span class="string">"[]"</span></span><br><span class="line">        queue = collections.deque()</span><br><span class="line">        queue.append(root)</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">while</span> queue:</span><br><span class="line">            node = queue.popleft()</span><br><span class="line">            <span class="keyword">if</span> node:</span><br><span class="line">                res.append(str(node.val))</span><br><span class="line">                queue.append(node.left)</span><br><span class="line">                queue.append(node.right)</span><br><span class="line">            <span class="keyword">else</span>: res.append(<span class="string">"null"</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'['</span> + <span class="string">','</span>.join(res) + <span class="string">']'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deserialize</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        <span class="string">"""Decodes your encoded data to tree.</span><br><span class="line">        </span><br><span class="line">        :type data: str</span><br><span class="line">        :rtype: TreeNode</span><br><span class="line">        """</span></span><br><span class="line">        <span class="keyword">if</span> data==<span class="string">'[]'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        vals, i = data[<span class="number">1</span>:<span class="number">-1</span>].split(<span class="string">','</span>), <span class="number">1</span></span><br><span class="line">        root = TreeNode(int(vals[<span class="number">0</span>]))</span><br><span class="line">        queue = collections.deque()</span><br><span class="line">        queue.append(root)</span><br><span class="line">        <span class="keyword">while</span> queue:</span><br><span class="line">            node = queue.popleft()</span><br><span class="line">            <span class="keyword">if</span> vals[i] != <span class="string">"null"</span>:</span><br><span class="line">                node.left = TreeNode(int(vals[i]))</span><br><span class="line">                queue.append(node.left)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> vals[i] != <span class="string">"null"</span>:</span><br><span class="line">                node.right = TreeNode(int(vals[i]))</span><br><span class="line">                queue.append(node.right)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure>
<h2 id="20-äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹"><a href="#20-äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹" class="headerlink" title="20. äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹"></a>20. äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹</h2><p><a href="https://leetcode-cn.com/problems/er-cha-sou-suo-shu-de-di-kda-jie-dian-lcof/" target="_blank" rel="external">å‰‘æŒ‡ Offer 54. äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹</a></p>
<p>ç»™å®šä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­çš„ç¬¬kå°çš„ç»“ç‚¹ã€‚ä¾‹å¦‚ï¼Œ ï¼ˆ5ï¼Œ3ï¼Œ7ï¼Œ2ï¼Œ4ï¼Œ6ï¼Œ8ï¼‰ä¸­ï¼ŒæŒ‰ç»“ç‚¹æ•°å€¼å¤§å°é¡ºåºç¬¬ä¸‰å°ç»“ç‚¹çš„å€¼ä¸º4ã€‚</p>
<p>ç¤ºä¾‹ 1:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: root = [3,1,4,null,2], k = 1</span><br><span class="line">   3</span><br><span class="line">  / \</span><br><span class="line"> 1   4</span><br><span class="line">  \</span><br><span class="line">   2</span><br><span class="line">è¾“å‡º: 4</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 2:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: root = [5,3,6,2,4,null,null,1], k = 3</span><br><span class="line">       5</span><br><span class="line">      / \</span><br><span class="line">     3   6</span><br><span class="line">    / \</span><br><span class="line">   2   4</span><br><span class="line">  /</span><br><span class="line"> 1</span><br><span class="line">è¾“å‡º: 4</span><br></pre></td></tr></table></figure>
<p>äºŒå‰æœç´¢æ ‘æŒ‰ä¸­åºéå†çš„é¡ºåºæ‰“å°å‡ºæ¥å°±æ˜¯æ’å¥½åºçš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸­åºéå†æ‰¾åˆ°ç¬¬kä¸ªç»“ç‚¹å°±æ˜¯é¢˜ç›®æ‰€æ±‚çš„ç»“ç‚¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.left = <span class="keyword">None</span></span><br><span class="line">        self.right = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">kthLargest</span><span class="params">(self, root: TreeNode, k: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(root)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> root: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            dfs(root.right)</span><br><span class="line">            <span class="keyword">if</span> self.k == <span class="number">0</span>: <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            self.k -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.k == <span class="number">0</span>:</span><br><span class="line">                self.res = root.val</span><br><span class="line"></span><br><span class="line">            dfs(root.left)</span><br><span class="line"></span><br><span class="line">        self.k = k</span><br><span class="line">        dfs(root)</span><br><span class="line">        <span class="keyword">return</span> self.res</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/fuxuemingzhu" target="_blank" rel="external">è´Ÿé›ªæ˜çƒ›</a></li>
<li><p><a href="https://blog.csdn.net/fuxuemingzhu/article/details/101900729" target="_blank" rel="external">ã€LeetCodeã€‘ä»£ç æ¨¡æ¿ï¼Œåˆ·é¢˜å¿…ä¼š</a></p>
</li>
<li><p><a href="https://www.tutorialspoint.com/python_data_structure/python_tree_traversal_algorithms.htm" target="_blank" rel="external">good blog - python_data_structure</a></p>
</li>
<li><a href="https://www.tutorialspoint.com/python_data_structure/python_tree_traversal_algorithms.htm" target="_blank" rel="external">python_tree_traversal_algorithms</a></li>
<li><a href="https://weiweiblog.cn/20tree/" target="_blank" rel="external">[ç®—æ³•æ€»ç»“] 20 é“é¢˜æå®š BAT é¢è¯•â€”â€”äºŒå‰æ ‘</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Data Warehouse - å·¥å…·ç¯‡]]></title>
      <url>http://shopee.ai/2020/08/03/dataware/dw-wy-3-tools/</url>
      <content type="html"><![CDATA[<p><img src="/images/hadoop/hadoop-mr-logo.png" width="450" alt=""></p>
<a id="more"></a>
<h2 id="18-Hadoopæ¡†æ¶"><a href="#18-Hadoopæ¡†æ¶" class="headerlink" title="18. Hadoopæ¡†æ¶"></a>18. Hadoopæ¡†æ¶</h2><center><embed src="/images/dataware/18å·¥å…·ç¯‡-Hadoopæ¡†æ¶.pdf" width="950" height="600"></center>

<h2 id="19-Hiveä»‹ç»"><a href="#19-Hiveä»‹ç»" class="headerlink" title="19. Hiveä»‹ç»"></a>19. Hiveä»‹ç»</h2><center><embed src="/images/dataware/19å·¥å…·ç¯‡-Hiveä»‹ç».pdf" width="950" height="600"></center>

<h2 id="20-Hiveä¹‹DDL"><a href="#20-Hiveä¹‹DDL" class="headerlink" title="20. Hiveä¹‹DDL"></a>20. Hiveä¹‹DDL</h2><center><embed src="/images/dataware/20å·¥å…·ç¯‡-Hiveä¹‹DDL.pdf" width="950" height="600"></center>

<h2 id="21-Hiveä¹‹DML"><a href="#21-Hiveä¹‹DML" class="headerlink" title="21. Hiveä¹‹DML"></a>21. Hiveä¹‹DML</h2><center><embed src="/images/dataware/21å·¥å…·ç¯‡-Hiveä¹‹DML.pdf" width="950" height="600"></center>

<h2 id="22-Hiveä¹‹æŸ¥è¯¢è¯­å¥"><a href="#22-Hiveä¹‹æŸ¥è¯¢è¯­å¥" class="headerlink" title="22. Hiveä¹‹æŸ¥è¯¢è¯­å¥"></a>22. Hiveä¹‹æŸ¥è¯¢è¯­å¥</h2><center><embed src="/images/dataware/22å·¥å…·ç¯‡-Hiveä¹‹æŸ¥è¯¢è¯­å¥.pdf" width="950" height="600"></center>

<h2 id="23-Hiveå‡½æ•°å…¨æ”»ç•¥"><a href="#23-Hiveå‡½æ•°å…¨æ”»ç•¥" class="headerlink" title="23. Hiveå‡½æ•°å…¨æ”»ç•¥"></a>23. Hiveå‡½æ•°å…¨æ”»ç•¥</h2><center><embed src="/images/dataware/23å·¥å…·ç¯‡-Hiveå‡½æ•°å…¨æ”»ç•¥.pdf" width="950" height="600"></center>


<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><p><a href="https://gohom.win/2015/06/07/EmbedHtmlPDF/" target="_blank" rel="external">åœ¨å†™blog/Htmlæ—¶åµŒå…¥Pdfæ˜¾ç¤º</a></p>
</li>
<li><p><a href="https://www.bilibili.com/video/av63753220" target="_blank" rel="external">bilibili ä¼ä¸šçº§æ•°æ®ä»“åº“å®æˆ˜</a></p>
</li>
<li><a href="https://mp.weixin.qq.com/s/qDZTIj5yw2L9aYLuX6AdDA" target="_blank" rel="external">ä¼ä¸šçº§æ•°æ®ä»“åº“PPTåˆ†äº«</a></li>
<li><a href="https://study.163.com/course/courseMain.htm?courseId=1209564814" target="_blank" rel="external">è®²å¸ˆï¼šå—å¤´å±…å£« - æ•°æ®ç§‘å­¦ä¹‹ä¼ä¸šçº§æ•°æ®ä»“åº“</a></li>
<li><p><a href="https://www.bilibili.com/video/BV1q4411G7Lw/?spm_id_from=333.788.videocard.1" target="_blank" rel="external">ã€æ•°æ®åˆ†æã€‘- SQLé¢è¯•50é¢˜ - è·Ÿæˆ‘ä¸€èµ·æ‰“æ€ªå‡çº§ ä¸€èµ·æˆä¸ºæ•°æ®ç§‘å­¦å®¶</a></p>
</li>
<li><p><a href="https://blog.csdn.net/zhaodedong/article/details/54174011" target="_blank" rel="external">æ¼«è°ˆæ•°æ®ä»“åº“ä¹‹ç»´åº¦å»ºæ¨¡</a></p>
</li>
<li><a href="http://vlambda.com/wz_wGdxJOCaCu.html" target="_blank" rel="external">Lambdaåœ¨çº¿ &gt; æœ¨ä¸œå±…å£« &gt; å¦‚ä½•æ·±å…¥æµ…å‡ºçš„ç†è§£æ•°æ®ä»“åº“å»ºæ¨¡ï¼Ÿ</a></li>
<li><p><a href="https://blog.csdn.net/zhaodedong/article/details/104604247" target="_blank" rel="external">æœ¨ä¸œå±…å£«è°ˆæ•°ä»“çš„å­¦ä¹ æ–¹æ³•ï¼</a></p>
</li>
<li><p><a href="https://www.bilibili.com/video/BV1F7411f7uZ" target="_blank" rel="external">ã€ç›´æ’­å›æ”¾ã€‘20200314<em>Bç«™</em>æ•°æ®ä»“åº“åˆ†äº«</a></p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Data Warehouse - ç†è®ºç¯‡ 2]]></title>
      <url>http://shopee.ai/2020/08/03/dataware/dw-wy-2-theory-2/</url>
      <content type="html"><![CDATA[<p><img src="/images/dataware/dw-wy-2-2-logo.png" width="450" alt=""></p>
<a id="more"></a>
<h2 id="9-ç»´åº¦è¡¨åŸºæœ¬æ¦‚å¿µ"><a href="#9-ç»´åº¦è¡¨åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="9. ç»´åº¦è¡¨åŸºæœ¬æ¦‚å¿µ"></a>9. ç»´åº¦è¡¨åŸºæœ¬æ¦‚å¿µ</h2><center><embed src="/images/dataware/09å¦‚ä½•æ„å»ºç»´åº¦è¡¨ä¹‹åŸºæœ¬æ¦‚å¿µ.pdf" width="950" height="600"></center>

<h2 id="10-å¸¸è§çš„ç»´åº¦è¡¨ç±»å‹"><a href="#10-å¸¸è§çš„ç»´åº¦è¡¨ç±»å‹" class="headerlink" title="10. å¸¸è§çš„ç»´åº¦è¡¨ç±»å‹"></a>10. å¸¸è§çš„ç»´åº¦è¡¨ç±»å‹</h2><center><embed src="/images/dataware/10å¦‚ä½•æ„å»ºç»´åº¦è¡¨ä¹‹å¸¸è§çš„ç»´åº¦è¡¨.pdf" width="950" height="600"></center>

<h2 id="11-æ•°æ®åˆ†å±‚çš„æ„ä¹‰"><a href="#11-æ•°æ®åˆ†å±‚çš„æ„ä¹‰" class="headerlink" title="11. æ•°æ®åˆ†å±‚çš„æ„ä¹‰"></a>11. æ•°æ®åˆ†å±‚çš„æ„ä¹‰</h2><center><embed src="/images/dataware/11åˆ†å±‚çš„æ„ä¹‰.pdf" width="950" height="600"></center>

<h2 id="12-ç»å…¸åˆ†å±‚ç†è®ºè¯¦è§£"><a href="#12-ç»å…¸åˆ†å±‚ç†è®ºè¯¦è§£" class="headerlink" title="12. ç»å…¸åˆ†å±‚ç†è®ºè¯¦è§£"></a>12. ç»å…¸åˆ†å±‚ç†è®ºè¯¦è§£</h2><center><embed src="/images/dataware/12ç»å…¸åˆ†å±‚æ¨¡å‹.pdf" width="950" height="600"></center>

<h2 id="13-åˆ†å±‚çš„è¾¹ç•Œ"><a href="#13-åˆ†å±‚çš„è¾¹ç•Œ" class="headerlink" title="13. åˆ†å±‚çš„è¾¹ç•Œ"></a>13. åˆ†å±‚çš„è¾¹ç•Œ</h2><center><embed src="/images/dataware/13åˆ†å±‚çš„è¾¹ç•Œ.pdf" width="950" height="600"></center>

<h2 id="14-æ•°æ®çš„æµå‘"><a href="#14-æ•°æ®çš„æµå‘" class="headerlink" title="14. æ•°æ®çš„æµå‘"></a>14. æ•°æ®çš„æµå‘</h2><center><embed src="/images/dataware/14æ•°æ®çš„æµå‘.pdf" width="950" height="600"></center>

<h2 id="15-æ•°æ®æ¶æ„Lambdaä¸Kappaæ¶æ„"><a href="#15-æ•°æ®æ¶æ„Lambdaä¸Kappaæ¶æ„" class="headerlink" title="15. æ•°æ®æ¶æ„Lambdaä¸Kappaæ¶æ„"></a>15. æ•°æ®æ¶æ„Lambdaä¸Kappaæ¶æ„</h2><center><embed src="/images/dataware/15æ•°æ®æ¶æ„ä¹‹Lambdaæ¶æ„å’ŒKappaæ¶æ„.pdf" width="950" height="600"></center>

<h2 id="16-å…¸å‹çš„æ•°æ®æµè®¾è®¡æ€è·¯"><a href="#16-å…¸å‹çš„æ•°æ®æµè®¾è®¡æ€è·¯" class="headerlink" title="16. å…¸å‹çš„æ•°æ®æµè®¾è®¡æ€è·¯"></a>16. å…¸å‹çš„æ•°æ®æµè®¾è®¡æ€è·¯</h2><center><embed src="/images/dataware/16å…¸å‹æ•°æ®æµçš„è®¾è®¡.pdf" width="950" height="600"></center>

<h2 id="17-æ•°æ®æœåŠ¡ä¸šåŠ¡çš„å‡ ç§æ–¹å¼"><a href="#17-æ•°æ®æœåŠ¡ä¸šåŠ¡çš„å‡ ç§æ–¹å¼" class="headerlink" title="17. æ•°æ®æœåŠ¡ä¸šåŠ¡çš„å‡ ç§æ–¹å¼"></a>17. æ•°æ®æœåŠ¡ä¸šåŠ¡çš„å‡ ç§æ–¹å¼</h2><center><embed src="/images/dataware/17æ•°æ®æœåŠ¡ä¸šåŠ¡çš„å‡ ç§æ–¹å¼.pdf" width="950" height="600"></center>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><p><a href="https://gohom.win/2015/06/07/EmbedHtmlPDF/" target="_blank" rel="external">åœ¨å†™blog/Htmlæ—¶åµŒå…¥Pdfæ˜¾ç¤º</a></p>
</li>
<li><p><a href="https://www.bilibili.com/video/av63753220" target="_blank" rel="external">bilibili ä¼ä¸šçº§æ•°æ®ä»“åº“å®æˆ˜</a></p>
</li>
<li><a href="https://mp.weixin.qq.com/s/qDZTIj5yw2L9aYLuX6AdDA" target="_blank" rel="external">ä¼ä¸šçº§æ•°æ®ä»“åº“PPTåˆ†äº«</a></li>
<li><a href="https://study.163.com/course/courseMain.htm?courseId=1209564814" target="_blank" rel="external">è®²å¸ˆï¼šå—å¤´å±…å£« - æ•°æ®ç§‘å­¦ä¹‹ä¼ä¸šçº§æ•°æ®ä»“åº“</a></li>
<li><p><a href="https://www.bilibili.com/video/BV1q4411G7Lw/?spm_id_from=333.788.videocard.1" target="_blank" rel="external">ã€æ•°æ®åˆ†æã€‘- SQLé¢è¯•50é¢˜ - è·Ÿæˆ‘ä¸€èµ·æ‰“æ€ªå‡çº§ ä¸€èµ·æˆä¸ºæ•°æ®ç§‘å­¦å®¶</a></p>
</li>
<li><p><a href="https://blog.csdn.net/zhaodedong/article/details/54174011" target="_blank" rel="external">æ¼«è°ˆæ•°æ®ä»“åº“ä¹‹ç»´åº¦å»ºæ¨¡</a></p>
</li>
<li><a href="http://vlambda.com/wz_wGdxJOCaCu.html" target="_blank" rel="external">Lambdaåœ¨çº¿ &gt; æœ¨ä¸œå±…å£« &gt; å¦‚ä½•æ·±å…¥æµ…å‡ºçš„ç†è§£æ•°æ®ä»“åº“å»ºæ¨¡ï¼Ÿ</a></li>
<li><p><a href="https://blog.csdn.net/zhaodedong/article/details/104604247" target="_blank" rel="external">æœ¨ä¸œå±…å£«è°ˆæ•°ä»“çš„å­¦ä¹ æ–¹æ³•ï¼</a></p>
</li>
<li><p><a href="https://www.bilibili.com/video/BV1F7411f7uZ" target="_blank" rel="external">ã€ç›´æ’­å›æ”¾ã€‘20200314<em>Bç«™</em>æ•°æ®ä»“åº“åˆ†äº«</a></p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Data Warehouse - ç†è®ºç¯‡ 1]]></title>
      <url>http://shopee.ai/2020/08/01/dataware/dw-wy-2-theory-1/</url>
      <content type="html"><![CDATA[<p><img src="/images/dataware/dw-wy-2-logo.png" width="350" alt=""></p>
<a id="more"></a>
<h2 id="1-èŒƒå¼å»ºæ¨¡"><a href="#1-èŒƒå¼å»ºæ¨¡" class="headerlink" title="1. èŒƒå¼å»ºæ¨¡"></a>1. èŒƒå¼å»ºæ¨¡</h2><h3 id="1-1-èŒƒå¼å»ºæ¨¡"><a href="#1-1-èŒƒå¼å»ºæ¨¡" class="headerlink" title="1.1 èŒƒå¼å»ºæ¨¡"></a>1.1 èŒƒå¼å»ºæ¨¡</h3><p><img src="/images/dataware/dw-wy-2.1.jpg" width="950" alt="1 2 3 NF"></p>
<h3 id="1-2-èŒƒå¼å»ºæ¨¡-ä¼˜ç¼ºç‚¹"><a href="#1-2-èŒƒå¼å»ºæ¨¡-ä¼˜ç¼ºç‚¹" class="headerlink" title="1.2 èŒƒå¼å»ºæ¨¡ ä¼˜ç¼ºç‚¹"></a>1.2 èŒƒå¼å»ºæ¨¡ ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹:</p>
<blockquote>
<ul>
<li>èŠ‚çº¦å­˜å‚¨</li>
<li>ç»“æ„æ¸…æ™°, æ˜“äºç†è§£</li>
<li>é€‚åˆå…³ç³»å‹æ•°æ®åº“</li>
</ul>
</blockquote>
<p>ç¼ºç‚¹ï¼š</p>
<blockquote>
<ul>
<li>æ„å»ºæ¯”è¾ƒç¹ç</li>
<li>æŸ¥è¯¢å¤æ‚</li>
<li>ä¸åˆé€‚æ„å»ºåœ¨å¤§æ•°æ®åˆ†å¸ƒå¼ç¯å¢ƒä¸‹</li>
</ul>
</blockquote>
<h3 id="1-3-èŒƒå¼å»ºæ¨¡ä¼˜ç¼ºç‚¹"><a href="#1-3-èŒƒå¼å»ºæ¨¡ä¼˜ç¼ºç‚¹" class="headerlink" title="1.3 èŒƒå¼å»ºæ¨¡ä¼˜ç¼ºç‚¹"></a>1.3 èŒƒå¼å»ºæ¨¡ä¼˜ç¼ºç‚¹</h3><p>è™½ç„¶æœ‰è¿™äº›ç¼ºç‚¹, ä½†æ˜¯èŒƒå¼å»ºæ¨¡çš„ç†è®º, ä»ç„¶æ˜¯éœ€è¦æˆ‘ä»¬å»ç†Ÿç»ƒæŒæ¡.</p>
<p>åŸå› æœ‰å¦‚ä¸‹å‡ ç‚¹:</p>
<blockquote>
<ul>
<li>æ•°æ®ä»“åº“ çš„ä¸Šæ¸¸æœ‰ç›¸å½“ä¸€éƒ¨åˆ†æ•°æ®æºæ˜¯ä¸šåŠ¡æ•°æ®åº“, è€Œè¿™äº›ä¸šåŠ¡æ•°æ®åº“åŸºäºèŒƒå¼ç†è®º</li>
<li>æ•°æ®æºçš„è§„èŒƒå®šä¹‰éœ€è¦æˆ‘ä»¬äº†è§£èŒƒå¼ç†è®º</li>
<li>æ•°æ®ä»“åº“ä¸‹æ¸¸ç³»ç»Ÿæ¯”å¦‚ æŠ¥è¡¨ ç³»ç»Ÿè®¾è®¡æ—¶, å¯èƒ½ä¼šç”¨åˆ°èŒƒå¼ç†è®º.</li>
</ul>
</blockquote>
<h2 id="2-ç»´åº¦å»ºæ¨¡"><a href="#2-ç»´åº¦å»ºæ¨¡" class="headerlink" title="2. ç»´åº¦å»ºæ¨¡"></a>2. ç»´åº¦å»ºæ¨¡</h2><p><img src="/images/dataware/dw-wy-2.2.jpg" width="870" alt="Kimball"></p>
<h3 id="2-1-ç»´åº¦å»ºæ¨¡ä¼˜ç¼ºç‚¹"><a href="#2-1-ç»´åº¦å»ºæ¨¡ä¼˜ç¼ºç‚¹" class="headerlink" title="2.1 ç»´åº¦å»ºæ¨¡ä¼˜ç¼ºç‚¹"></a>2.1 ç»´åº¦å»ºæ¨¡ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹:</p>
<blockquote>
<ol>
<li><p>æ–¹ä¾¿ä½¿ç”¨</p>
</li>
<li><p>é€‚åˆå¤§æ•°æ®ä¸‹çš„æ•°æ®å¤„ç†</p>
</li>
<li><p>é€‚åˆè¿›è¡Œ OLAP æ“ä½œ</p>
</li>
</ol>
</blockquote>
<p>ç¼ºç‚¹:</p>
<blockquote>
<ol>
<li><p>ç»´åº¦è¡¥å…¨é€ æˆçš„æ•°æ®å­˜å‚¨çš„æµªè´¹</p>
</li>
<li><p>ç»´åº¦å˜åŒ–é€ æˆçš„æ•°æ®æ›´æ–°é‡å¤§</p>
</li>
<li><p>ä¸èŒƒå¼ç†è®ºå·®å¼‚å¾ˆå¤§, æ˜¯å…¸å‹çš„åä¸‰èŒƒå¼</p>
</li>
</ol>
</blockquote>
<p><strong>æ€è€ƒæ‘˜è¦:</strong></p>
<blockquote>
<ol>
<li><p>èŒƒå¼å»ºæ¨¡é‡Œçš„èŒƒå¼, å…·ä½“æŒ‡çš„æ˜¯ä»€ä¹ˆ, å“ªäº›å¸¸è§ä¼šä½¿ç”¨åˆ°èŒƒå¼</p>
</li>
<li><p>ç»´åº¦å»ºæ¨¡ç†è®ºä¸­çš„åèŒƒå¼æ˜¯æŒ‡ä»€ä¹ˆ, ä¸ºä»€ä¹ˆä¼šè¿™æ ·æ“ä½œ</p>
</li>
<li><p>è¯·å™è¿°ç»´åº¦å»ºæ¨¡çš„ 4 ä¸ªæ­¥éª¤</p>
</li>
</ol>
</blockquote>
<h2 id="2-ç»´åº¦å»ºæ¨¡çš„4ä¸ªæ­¥éª¤"><a href="#2-ç»´åº¦å»ºæ¨¡çš„4ä¸ªæ­¥éª¤" class="headerlink" title="2. ç»´åº¦å»ºæ¨¡çš„4ä¸ªæ­¥éª¤"></a>2. ç»´åº¦å»ºæ¨¡çš„4ä¸ªæ­¥éª¤</h2><p><img src="/images/dataware/dw-wy-2.3.png" width="800" alt="Kimball"></p>
<p>è®¢å•è¡¨ï¼š</p>
<p><img src="/images/dataware/dw-wy-2.4.jpg" width="850" alt="Kimball"></p>
<p>å»ºæ¨¡è¿‡ç¨‹:</p>
<p><img src="/images/dataware/dw-wy-2.5.jpg" width="850" alt="Kimball"></p>
<h2 id="3-äº‹å®è¡¨çš„åŸºæœ¬æ¦‚å¿µ"><a href="#3-äº‹å®è¡¨çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="3. äº‹å®è¡¨çš„åŸºæœ¬æ¦‚å¿µ"></a>3. äº‹å®è¡¨çš„åŸºæœ¬æ¦‚å¿µ</h2><h3 id="3-1-åº¦é‡"><a href="#3-1-åº¦é‡" class="headerlink" title="3.1 åº¦é‡"></a>3.1 åº¦é‡</h3><p><img src="/images/dataware/dw-wy-2.6.jpg" width="850" alt="äº‹å®è¡¨çš„åº¦é‡"></p>
<h3 id="3-2-ä¸€è‡´æ€§"><a href="#3-2-ä¸€è‡´æ€§" class="headerlink" title="3.2 ä¸€è‡´æ€§"></a>3.2 ä¸€è‡´æ€§</h3><p><img src="/images/dataware/dw-wy-2.7.jpg" width="850" alt="äº‹å®è¡¨çš„ä¸€è‡´æ€§"></p>
<h2 id="4-ç»´åº¦å»ºæ¨¡-å¸¸è§äº‹å®è¡¨"><a href="#4-ç»´åº¦å»ºæ¨¡-å¸¸è§äº‹å®è¡¨" class="headerlink" title="4. ç»´åº¦å»ºæ¨¡ - å¸¸è§äº‹å®è¡¨"></a>4. ç»´åº¦å»ºæ¨¡ - å¸¸è§äº‹å®è¡¨</h2><ol>
<li><p>äº‹åŠ¡äº‹å®è¡¨</p>
</li>
<li><p>å‘¨æœŸå¿«ç…§äº‹å®è¡¨</p>
</li>
<li><p>ç´¯è®¡å¿«ç…§äº‹å®è¡¨</p>
</li>
<li><p>æ— äº‹å®çš„äº‹å®è¡¨</p>
</li>
<li><p>èšé›†äº‹å®è¡¨</p>
</li>
</ol>
<center><embed src="/images/dataware/08å¦‚ä½•æ„å»ºäº‹å®è¡¨ä¹‹å¸¸è§çš„äº‹å®è¡¨.pdf" width="950" height="700"></center>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.bilibili.com/video/av63753220" target="_blank" rel="external">bilibili ä¼ä¸šçº§æ•°æ®ä»“åº“å®æˆ˜</a></li>
<li><a href="https://mp.weixin.qq.com/s/qDZTIj5yw2L9aYLuX6AdDA" target="_blank" rel="external">ä¼ä¸šçº§æ•°æ®ä»“åº“PPTåˆ†äº«</a></li>
<li><a href="https://study.163.com/course/courseMain.htm?courseId=1209564814" target="_blank" rel="external">è®²å¸ˆï¼šå—å¤´å±…å£« - æ•°æ®ç§‘å­¦ä¹‹ä¼ä¸šçº§æ•°æ®ä»“åº“</a></li>
<li><p><a href="https://www.bilibili.com/video/BV1q4411G7Lw/?spm_id_from=333.788.videocard.1" target="_blank" rel="external">ã€æ•°æ®åˆ†æã€‘- SQLé¢è¯•50é¢˜ - è·Ÿæˆ‘ä¸€èµ·æ‰“æ€ªå‡çº§ ä¸€èµ·æˆä¸ºæ•°æ®ç§‘å­¦å®¶</a></p>
</li>
<li><p><a href="https://blog.csdn.net/zhaodedong/article/details/54174011" target="_blank" rel="external">æ¼«è°ˆæ•°æ®ä»“åº“ä¹‹ç»´åº¦å»ºæ¨¡</a></p>
</li>
<li><a href="http://vlambda.com/wz_wGdxJOCaCu.html" target="_blank" rel="external">Lambdaåœ¨çº¿ &gt; æœ¨ä¸œå±…å£« &gt; å¦‚ä½•æ·±å…¥æµ…å‡ºçš„ç†è§£æ•°æ®ä»“åº“å»ºæ¨¡ï¼Ÿ</a></li>
<li><p><a href="https://blog.csdn.net/zhaodedong/article/details/104604247" target="_blank" rel="external">æœ¨ä¸œå±…å£«è°ˆæ•°ä»“çš„å­¦ä¹ æ–¹æ³•ï¼</a></p>
</li>
<li><p><a href="https://www.bilibili.com/video/BV1F7411f7uZ" target="_blank" rel="external">ã€ç›´æ’­å›æ”¾ã€‘20200314<em>Bç«™</em>æ•°æ®ä»“åº“åˆ†äº«</a></p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Data Warehouse - åŸºç¡€ç¯‡]]></title>
      <url>http://shopee.ai/2020/08/01/dataware/dw-wy-1-basic/</url>
      <content type="html"><![CDATA[<p><img src="/images/dataware/dw-wy-1.1.jpg" width="750" alt=""></p>
<a id="more"></a>
<h2 id="1-whatâ€™s-data-warehouse"><a href="#1-whatâ€™s-data-warehouse" class="headerlink" title="1. whatâ€™s data warehouse?"></a>1. whatâ€™s data warehouse?</h2><p><img src="/images/dataware/dw-wy-1.2.jpg" width="750" alt=""></p>
<h2 id="2-why-build-data-warehouse"><a href="#2-why-build-data-warehouse" class="headerlink" title="2. why build data warehouse?"></a>2. why build data warehouse?</h2><p><img src="/images/dataware/dw-wy-1.3.jpg" width="750" alt=""></p>
<h2 id="3-ä»€ä¹ˆæƒ…å†µåº”å»º-data-warehouse"><a href="#3-ä»€ä¹ˆæƒ…å†µåº”å»º-data-warehouse" class="headerlink" title="3. ä»€ä¹ˆæƒ…å†µåº”å»º data warehouse ?"></a>3. ä»€ä¹ˆæƒ…å†µåº”å»º data warehouse ?</h2><ol>
<li>å½“ä½ éœ€è¦é›†ä¸­åŒ–ç®¡ç†ä½ çš„æ•°æ®</li>
<li>å½“ä½ å¸Œæœ›ä»¥æ›´é«˜æ•ˆçš„æ–¹å¼ä½¿ç”¨æ•°æ®</li>
<li>å½“ä½ çš„æ•°æ®é‡å’Œå¤æ‚åº¦åˆ°äº†éœ€è¦ä¸€ä¸ªå›¢é˜Ÿæ¥ç»´æŠ¤æ—¶</li>
<li>å½“ä½ å¸Œæœ›æƒ³è¦æ•°æ®é©±åŠ¨ä¸šåŠ¡æ—¶</li>
<li>å½“ä½ æƒ³è¦å€ŸåŠ©å¤§æ•°æ®çš„åŠ›é‡æ¥æå‡äº§å“ç«äº‰åŠ›</li>
<li>å½“ä½ æƒ³æ—¶åˆ»çŸ¥é“ä¸šåŠ¡å‘å±•æƒ…å†µæ—¶</li>
</ol>
<p><img src="/images/dataware/dw-wy-1.4.jpg" width="950" alt=""></p>
<h2 id="4-Warehouse-vs-Middle-platform"><a href="#4-Warehouse-vs-Middle-platform" class="headerlink" title="4. Warehouse vs Middle platform"></a>4. Warehouse vs Middle platform</h2><p><img src="/images/dataware/dw-wy-1.5.jpg" width="950" alt=""></p>
<h2 id="5-OLTP-vs-OLAP"><a href="#5-OLTP-vs-OLAP" class="headerlink" title="5. OLTP vs OLAP"></a>5. OLTP vs OLAP</h2><p><img src="/images/dataware/dw-wy-1.6.jpg" width="850" alt=""></p>
<h2 id="6-åº”ç”¨å…³ç³»"><a href="#6-åº”ç”¨å…³ç³»" class="headerlink" title="6. åº”ç”¨å…³ç³»"></a>6. åº”ç”¨å…³ç³»</h2><p><img src="/images/dataware/dw-wy-1.7.jpg" width="850" alt=""></p>
<h2 id="7-æ¨¡å¼è®¾è®¡çš„3ä¸ªé˜¶æ®µ"><a href="#7-æ¨¡å¼è®¾è®¡çš„3ä¸ªé˜¶æ®µ" class="headerlink" title="7. æ¨¡å¼è®¾è®¡çš„3ä¸ªé˜¶æ®µ"></a>7. æ¨¡å¼è®¾è®¡çš„3ä¸ªé˜¶æ®µ</h2><h3 id="7-1-æ¦‚å¿µæ¨¡å‹"><a href="#7-1-æ¦‚å¿µæ¨¡å‹" class="headerlink" title="7.1 æ¦‚å¿µæ¨¡å‹"></a>7.1 æ¦‚å¿µæ¨¡å‹</h3><p><img src="/images/dataware/dw-wy-1.8.jpg" width="850" alt=""></p>
<h3 id="7-2-é€»è¾‘æ¨¡å‹"><a href="#7-2-é€»è¾‘æ¨¡å‹" class="headerlink" title="7.2 é€»è¾‘æ¨¡å‹"></a>7.2 é€»è¾‘æ¨¡å‹</h3><p><img src="/images/dataware/dw-wy-1.9.jpg" width="850" alt=""></p>
<h3 id="7-3-ç‰©ç†æ¨¡å‹"><a href="#7-3-ç‰©ç†æ¨¡å‹" class="headerlink" title="7.3 ç‰©ç†æ¨¡å‹"></a>7.3 ç‰©ç†æ¨¡å‹</h3><p><img src="/images/dataware/dw-wy-1.10.jpg" width="850" alt=""></p>
<blockquote>
<p>èŠèŠä½ ç†è§£çš„ OLAP å’Œ OLTP (ä½¿ç”¨åœºæ™¯ã€æŠ€æœ¯æ ˆç­‰)<br>èŠèŠä½ å¯¹ç»´åº¦å»ºæ¨¡çš„ç†è§£</p>
</blockquote>
<h2 id="8-æŠ€æœ¯ç»„ä»¶"><a href="#8-æŠ€æœ¯ç»„ä»¶" class="headerlink" title="8. æŠ€æœ¯ç»„ä»¶"></a>8. æŠ€æœ¯ç»„ä»¶</h2><p><img src="/images/dataware/dw-wy-1.11.jpg" width="950" alt=""></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.bilibili.com/video/av63753220" target="_blank" rel="external">bilibili ä¼ä¸šçº§æ•°æ®ä»“åº“å®æˆ˜</a></li>
<li><a href="https://mp.weixin.qq.com/s/qDZTIj5yw2L9aYLuX6AdDA" target="_blank" rel="external">ä¼ä¸šçº§æ•°æ®ä»“åº“PPTåˆ†äº«</a></li>
<li><a href="https://study.163.com/course/courseMain.htm?courseId=1209564814" target="_blank" rel="external">è®²å¸ˆï¼šå—å¤´å±…å£« - æ•°æ®ç§‘å­¦ä¹‹ä¼ä¸šçº§æ•°æ®ä»“åº“</a></li>
<li><a href="https://www.bilibili.com/video/BV1q4411G7Lw/?spm_id_from=333.788.videocard.1" target="_blank" rel="external">ã€æ•°æ®åˆ†æã€‘- SQLé¢è¯•50é¢˜ - è·Ÿæˆ‘ä¸€èµ·æ‰“æ€ªå‡çº§ ä¸€èµ·æˆä¸ºæ•°æ®ç§‘å­¦å®¶</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å‘¨å¿—æ¹– Spark ç³»åˆ—]]></title>
      <url>http://shopee.ai/2020/07/31/spark/spark-aura-zhouzhihu/</url>
      <content type="html"><![CDATA[<p>æœ¬äººæœ¬ç€ååˆ†å°Šé‡çš„æ€åº¦æ¥å­¦ä¹ å‘¨è€å¸ˆçš„åšæ–‡ï¼Œç‰¹æ­¤ä¸ºæ–¹ä¾¿å¥½æ‰¾ï¼Œåœ¨æ­¤åšä¸€ä¸ªç›®å½•ã€‚æ–¹ä¾¿å­¦ä¹ ã€‚</p>
<p><a href="https://blog.csdn.net/zhongqi2513/article/details/52904504" target="_blank" rel="external">å‘¨å¿—æ¹–Sparkç³»åˆ—</a></p>
<a id="more"></a>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/qq_39150361/article/details/107380115" target="_blank" rel="external">Sparkä»»åŠ¡çš„æäº¤æµç¨‹</a></li>
<li><a href="https://blog.csdn.net/huang66666666/article/details/102517737" target="_blank" rel="external">ä¸æ€¥åƒå£è¯: sparkä»»åŠ¡æäº¤æµç¨‹å›¾ (é©¬ä¸­åç±»)</a></li>
<li><a href="https://blog.csdn.net/huang66666666/category_9399107.html" target="_blank" rel="external">å¤§æ•°æ®èµ„æ–™ç¬”è®°æ•´ç†</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SparkCore ä¸­çš„å·¥ä½œåŸç† - ä»»åŠ¡æ‰§è¡Œæµç¨‹ 5.1]]></title>
      <url>http://shopee.ai/2020/07/31/spark/spark-aura-5.1-sparkCore/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-aura-5.1.2.jpg" width="950" alt="executor ä¸€å®šå±äºæŸä¸ª Application"></p>
<a id="more"></a>
<table>
<thead>
<tr>
<th style="text-align:center">â€“</th>
<th style="text-align:center">â€“</th>
<th style="text-align:center">â€“</th>
<th style="text-align:center">â€“</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>application</strong></td>
<td style="text-align:center"><strong>job</strong></td>
<td style="text-align:center"><strong>stage</strong></td>
<td style="text-align:center"><strong>task</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>master</strong></td>
<td style="text-align:center"><strong>worker</strong></td>
<td style="text-align:center"><strong>executor</strong></td>
<td style="text-align:center"><strong>driver</strong></td>
</tr>
</tbody>
</table>
<p>æ•´ä¸ª Spark åº”ç”¨ç¨‹åºçš„è¿è¡Œåˆ†æˆä¸‰ä¸ªé˜¶æ®µï¼š</p>
<p><strong>1). ç¼–å†™ä»£ç ï¼Œä½¿ç”¨ spark-submit</strong> å»äº¤ä»»åŠ¡åˆ°é›†ç¾¤è¿è¡Œ,ä¸€ç›´åˆ°æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„mainæ–¹æ³•è¿è¡Œä¸ºæ­¢</p>
<blockquote>
<p>1.1) ç¼–å†™ä»£ç <br>1.2) æ‰“æˆ Jar<br>1.3) ç¼–å†™ spark-submit è„šæœ¬æäº¤ä»»åŠ¡<br>1.4) è„šæœ¬è§£æ å’Œ æ‰§è¡Œ æœ€ç»ˆè½¬åˆ° main æ–¹æ³•æ‰§è¡Œ SparkSubmit</p>
</blockquote>
<p><strong>2). sparkContext çš„åˆå§‹åŒ–</strong> </p>
<blockquote>
<p> new SparkContext(sparkConf)</p>
<p> ä¸¤æ¡çº¿:</p>
<p><strong>(1) åœ¨ driver ç«¯æ‰§è¡Œçš„ä»£ç </strong></p>
<ul>
<li>init TaskScheduler â€”-&gt; TaskSchedulerImpl</li>
<li>init SchedulerBackend â€”-&gt; StandAloneSchedulerBackend</li>
<li>init DAGScheduler â€”-&gt; DAGScheduler</li>
</ul>
<p><strong>(2) åœ¨ worker å’Œ master ç«¯æ‰§è¡Œçš„å„ç§ä»£ç </strong></p>
<p>ä¸šåŠ¡åŠŸèƒ½å®ç°:</p>
<ul>
<li>1ã€ master æ³¨å†Œ</li>
<li>2ã€ worker è´Ÿè´£å¯åŠ¨ executor</li>
</ul>
</blockquote>
<p><strong>3). action ç®—å­</strong></p>
<hr>
<h2 id="1-SparkSubmit"><a href="#1-SparkSubmit" class="headerlink" title="1. SparkSubmit"></a>1. SparkSubmit</h2><table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">Spark ä»»åŠ¡çš„æäº¤æµç¨‹   </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(1)</td>
<td style="text-align:center">é¦–å…ˆå°†ç¨‹åºæ‰“æˆ jar åŒ…</td>
</tr>
<tr>
<td style="text-align:center">(2)</td>
<td style="text-align:center">ä½¿ç”¨ spark-submit è„šæœ¬æäº¤ä»»åŠ¡åˆ°é›†ç¾¤ä¸Šè¿è¡Œ</td>
</tr>
<tr>
<td style="text-align:center">(3)</td>
<td style="text-align:center">è¿è¡Œ sparkSubmit çš„ main æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­é€šè¿‡åå°„çš„æ–¹å¼åˆ›å»ºæˆ‘ä»¬ç¼–å†™çš„ä¸»ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œç„¶åè°ƒç”¨ main æ–¹æ³•ï¼Œå¼€å§‹æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç ï¼ˆæ³¨æ„ï¼Œæˆ‘ä»¬çš„ spark ç¨‹åºä¸­çš„ driverå°±è¿è¡Œåœ¨ sparkSubmit è¿›ç¨‹ä¸­ï¼‰</td>
</tr>
</tbody>
</table>
<h2 id="2-SparkContext-åˆå§‹åŒ–"><a href="#2-SparkContext-åˆå§‹åŒ–" class="headerlink" title="2. SparkContext åˆå§‹åŒ–"></a>2. SparkContext åˆå§‹åŒ–</h2><table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">SparkContext åˆå§‹åŒ–</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(4)</td>
<td style="text-align:center">å½“ä»£ç è¿è¡Œåˆ°åˆ›å»º SparkContext å¯¹è±¡æ—¶ï¼Œé‚£å°±å¼€å§‹åˆå§‹åŒ– SparkContext å¯¹è±¡äº†</td>
</tr>
<tr>
<td style="text-align:center">(5)</td>
<td style="text-align:center">åœ¨åˆå§‹åŒ– SparkContext å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸¤ä¸ªç‰¹åˆ«é‡è¦çš„å¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯ï¼š<br><br> <code>1. DAGScheduler</code> ï¼ˆRDD-&gt;Stage,â€”&gt; taskSetï¼‰ <br> <code>2. TaskScheduler</code> (SchedulerBackEnd-&gt;Actor) <br><br>ã€DAGScheduler çš„ä½œç”¨ã€‘å°† RDD çš„ä¾èµ–åˆ‡åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„ stageï¼Œç„¶åå°† stage ä½œä¸º taskSet æäº¤ç»™ DriverActor</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">åœ¨æ„å»º TaskScheduler çš„åŒæ—¶ï¼Œä¼šåˆ›å»ºä¸¤ä¸ªéå¸¸é‡è¦çš„å¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯: <br><br> <code>1. ClientActor</code>ï¼š å‘ master æ³¨å†Œç”¨æˆ·æäº¤çš„ä»»åŠ¡ â€”â€”â€”â€”â€”â€” <br> <code>2. DriverActor</code>ï¼š æ¥å— executor åå‘æ³¨å†Œ, å°†ä»»åŠ¡æäº¤ç»™ executor</td>
</tr>
<tr>
<td style="text-align:center">(7)</td>
<td style="text-align:center">å½“ ClientActor å¯åŠ¨åï¼Œä¼šå°†ç”¨æˆ·æäº¤çš„ä»»åŠ¡å’Œç›¸å…³çš„å‚æ•°å°è£…åˆ° ApplicationDescriptionå¯¹è±¡ä¸­ï¼Œç„¶åæäº¤ç»™ master è¿›è¡Œä»»åŠ¡çš„æ³¨å†Œ</td>
</tr>
<tr>
<td style="text-align:center">(8)</td>
<td style="text-align:center">å½“ master æ¥å—åˆ° clientActor æäº¤çš„ä»»åŠ¡è¯·æ±‚æ—¶ï¼Œä¼šå°†è¯·æ±‚å‚æ•°è¿›è¡Œè§£æï¼Œå¹¶å°è£…æˆ Applicationï¼Œç„¶åå°†å…¶æŒä¹…åŒ–ï¼Œç„¶åå°†å…¶åŠ å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ— waitingApps ä¸­</td>
</tr>
<tr>
<td style="text-align:center">(9)</td>
<td style="text-align:center">å½“è½®åˆ°æˆ‘ä»¬æäº¤çš„ä»»åŠ¡è¿è¡Œæ—¶ï¼Œå°±å¼€å§‹è°ƒç”¨ schedule()ï¼Œè¿›è¡Œä»»åŠ¡èµ„æºçš„è°ƒåº¦</td>
</tr>
<tr>
<td style="text-align:center">(10)</td>
<td style="text-align:center">master å°†è°ƒåº¦å¥½çš„èµ„æºå°è£…åˆ° launchExecutor ä¸­å‘é€ç»™æŒ‡å®šçš„ worker</td>
</tr>
<tr>
<td style="text-align:center">(11)</td>
<td style="text-align:center">worker æ¥å—åˆ° Master å‘é€æ¥çš„ launchExecutor æ—¶ï¼Œä¼šå°†å…¶è§£å‹å¹¶å°è£…åˆ° ExecutorRunnerä¸­ï¼Œç„¶åè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„ start(), å¯åŠ¨ Executor</td>
</tr>
<tr>
<td style="text-align:center">(12)</td>
<td style="text-align:center">Executor å¯åŠ¨åä¼šå‘ DriverActor è¿›è¡Œåå‘æ³¨å†Œ</td>
</tr>
<tr>
<td style="text-align:center">(13)</td>
<td style="text-align:center">driverActor ä¼šå‘é€æ³¨å†ŒæˆåŠŸçš„æ¶ˆæ¯ç»™ Executor</td>
</tr>
<tr>
<td style="text-align:center">(14)</td>
<td style="text-align:center">Executor æ¥å—åˆ° DriverActor æ³¨å†ŒæˆåŠŸçš„æ¶ˆæ¯åä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œç”¨äºæ‰§è¡Œ DriverActorå‘é€è¿‡æ¥çš„ task ä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center">(15)</td>
<td style="text-align:center">å½“å±äºè¿™ä¸ªä»»åŠ¡çš„æ‰€æœ‰çš„ Executor å¯åŠ¨å¹¶åå‘æ³¨å†ŒæˆåŠŸåï¼Œå°±æ„å‘³ç€è¿è¡Œè¿™ä¸ªä»»åŠ¡çš„ç¯å¢ƒå·²ç»å‡†å¤‡å¥½äº†ï¼Œdriver ä¼šç»“æŸ SparkContext å¯¹è±¡çš„åˆå§‹åŒ–ï¼Œä¹Ÿå°±æ„å‘³ç€ new SparkContextè¿™å¥ä»£ç è¿è¡Œå®Œæˆ</td>
</tr>
</tbody>
</table>
<h2 id="3-action-job-stage-taskSet-DriverActor-launchTask-Executor-Rdd-partition"><a href="#3-action-job-stage-taskSet-DriverActor-launchTask-Executor-Rdd-partition" class="headerlink" title="3. action-job-stage-taskSet-DriverActor-launchTask-Executor-Rdd partition"></a>3. action-job-stage-taskSet-DriverActor-launchTask-Executor-Rdd partition</h2><table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">Spark ä»»åŠ¡çš„æäº¤æµç¨‹ &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">(16)</td>
<td style="text-align:center">å½“åˆå§‹åŒ– sc æˆåŠŸåï¼Œdriver ç«¯å°±ä¼šç»§ç»­è¿è¡Œæˆ‘ä»¬ç¼–å†™çš„ä»£ç ï¼Œç„¶åå¼€å§‹åˆ›å»ºåˆå§‹çš„ RDDï¼Œç„¶åè¿›è¡Œä¸€ç³»åˆ—è½¬æ¢æ“ä½œï¼Œå½“é‡åˆ°ä¸€ä¸ª action ç®—å­æ—¶ï¼Œä¹Ÿå°±æ„å‘³ç€è§¦å‘äº†ä¸€ä¸ª job</td>
</tr>
<tr>
<td style="text-align:center">(17)</td>
<td style="text-align:center">driver ä¼šå°†è¿™ä¸ª job æäº¤ç»™ DAGScheduler</td>
</tr>
<tr>
<td style="text-align:center">(18)</td>
<td style="text-align:center">DAGScheduler å°†æ¥å—åˆ°çš„ jobï¼Œä»æœ€åä¸€ä¸ªç®—å­å‘å‰æ¨å¯¼ï¼Œå°† DAG ä¾æ®å®½ä¾èµ–åˆ’åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„ stageï¼Œç„¶åå°† stage å°è£…æˆ taskSetï¼Œå¹¶å°† taskSet ä¸­çš„ task æäº¤ç»™ DriverActor</td>
</tr>
<tr>
<td style="text-align:center">(19)</td>
<td style="text-align:center">DriverActor æ¥å—åˆ° DAGScheduler å‘é€è¿‡æ¥çš„ taskï¼Œä¼šæ‹¿åˆ°ä¸€ä¸ªåºåˆ—åŒ–å™¨ï¼Œå¯¹ task è¿›è¡Œåºåˆ—åŒ–ï¼Œç„¶åå°†åºåˆ—åŒ–å¥½çš„ task å°è£…åˆ° launchTask ä¸­ï¼Œç„¶åå°† launchTask å‘é€ç»™æŒ‡å®šçš„Executor</td>
</tr>
<tr>
<td style="text-align:center">(20)</td>
<td style="text-align:center">Executor æ¥å—åˆ°äº† DriverActor å‘é€è¿‡æ¥çš„ launchTask æ—¶ï¼Œä¼šæ‹¿åˆ°ä¸€ä¸ªååºåˆ—åŒ–å™¨ï¼Œå¯¹launchTask è¿›è¡Œååºåˆ—åŒ–ï¼Œå°è£…åˆ° TaskRunner ä¸­ï¼Œç„¶åä» Executor è¿™ä¸ªçº¿ç¨‹æ± ä¸­è·å–ä¸€ä¸ªçº¿ç¨‹ï¼Œå°†ååºåˆ—åŒ–å¥½çš„ <code>task</code> ä¸­çš„ç®—å­ä½œç”¨åœ¨ RDD å¯¹åº”çš„åˆ†åŒºä¸Š</td>
</tr>
</tbody>
</table>
<p><img src="/images/spark/spark-aura-5.1.1.jpg" width="950"></p>
<p>spark1.x RPC AKKA<br>spark2.x RPC netty</p>
<h1 id="Sparkçš„ä»»åŠ¡æäº¤å’Œæ‰§è¡Œæµç¨‹è¯¦è§£ï¼š"><a href="#Sparkçš„ä»»åŠ¡æäº¤å’Œæ‰§è¡Œæµç¨‹è¯¦è§£ï¼š" class="headerlink" title="Sparkçš„ä»»åŠ¡æäº¤å’Œæ‰§è¡Œæµç¨‹è¯¦è§£ï¼š"></a>Sparkçš„ä»»åŠ¡æäº¤å’Œæ‰§è¡Œæµç¨‹è¯¦è§£ï¼š</h1><p><a href="https://blog.csdn.net/zhongqi2513/article/details/107051253" target="_blank" rel="external">é©¬ä¸­åï¼šSparkçš„ä»»åŠ¡æäº¤å’Œæ‰§è¡Œæµç¨‹è¯¦è§£</a></p>
<p><img src="https://img-blog.csdnimg.cn/20200630214023905.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pob25ncWkyNTEz,size_16,color_FFFFFF,t_70" alt=""></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/qq_39150361/article/details/107380115" target="_blank" rel="external">Sparkä»»åŠ¡çš„æäº¤æµç¨‹</a></li>
<li><a href="https://blog.csdn.net/huang66666666/article/details/102517737" target="_blank" rel="external">ä¸æ€¥åƒå£è¯: sparkä»»åŠ¡æäº¤æµç¨‹å›¾ (é©¬ä¸­åç±»)</a></li>
<li><a href="https://blog.csdn.net/huang66666666/category_9399107.html" target="_blank" rel="external">å¤§æ•°æ®èµ„æ–™ç¬”è®°æ•´ç†</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark ç®—å­å¤ä¹  4.3]]></title>
      <url>http://shopee.ai/2020/07/31/spark/spark-aura-4.3-Action-Review/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-aura-4.1.2.jpg" width="750"></p>
<a id="more"></a>
<table>
<thead>
<tr>
<th style="text-align:center">â€“</th>
<th style="text-align:center">â€“</th>
<th style="text-align:center">â€“</th>
<th style="text-align:center">â€“</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>application</strong></td>
<td style="text-align:center"><strong>job</strong></td>
<td style="text-align:center"><strong>stage</strong></td>
<td style="text-align:center"><strong>task</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>master</strong></td>
<td style="text-align:center"><strong>worker</strong></td>
<td style="text-align:center"><strong>executor</strong></td>
<td style="text-align:center"><strong>driver</strong></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>å‡½æ•° æ–¹æ³• â€”&gt; æ¥æ”¶ä¸€ä¸ªæ–°çš„å‡½æ•°ä½œä¸ºå‚æ•°   é«˜é˜¶å‡½æ•°</p>
<blockquote>
<p>rdd.map(x =&gt; x+1)</p>
</blockquote>
<h2 id="1-map"><a href="#1-map" class="headerlink" title="1. map"></a>1. map</h2><blockquote>
<p>map foreach mapPartitions mapPartitionsWithIndex foreachPartition</p>
</blockquote>
<h2 id="2-union"><a href="#2-union" class="headerlink" title="2. union"></a>2. union</h2><blockquote>
<p>union intersection subtract distinct coGroup join</p>
</blockquote>
<h2 id="3-reduce"><a href="#3-reduce" class="headerlink" title="3. reduce"></a>3. reduce</h2><blockquote>
<p>reduce fold aggregate</p>
</blockquote>
<h2 id="4-byKey"><a href="#4-byKey" class="headerlink" title="4. byKey"></a>4. byKey</h2><blockquote>
<p>reduceByKey sortByKey combineByKey aggrateByKey â€¦</p>
</blockquote>
<h2 id="5-cache"><a href="#5-cache" class="headerlink" title="5. cache"></a>5. cache</h2><blockquote>
<p>cache persist</p>
</blockquote>
<h2 id="6-coalesce"><a href="#6-coalesce" class="headerlink" title="6. coalesce"></a>6. coalesce</h2><blockquote>
<p>coalesce rePartition repartitionAndSortWithPartitions partitionBy</p>
</blockquote>
<h2 id="7-collect-count"><a href="#7-collect-count" class="headerlink" title="7. collect, count"></a>7. collect, count</h2><blockquote>
<p>count sum max min é’ˆå¯¹æ•°å€¼ç±»å‹çš„RDD</p>
<p>top take takeOrdered first</p>
<p>saveAsTextFile saveAsObjectFile â€¦</p>
</blockquote>
<ul>
<li><a href="https://www.cnblogs.com/kpsmile/p/10434390.html" target="_blank" rel="external">Sparkå¸¸ç”¨ç®—å­è¯¦è§£</a></li>
<li><a href="http://homepage.cs.latrobe.edu.au/zhe/ZhenHeSparkRDDAPIExamples.html" target="_blank" rel="external">Zhen He  RDD API</a></li>
</ul>
<h2 id="8-å…±äº«å˜é‡"><a href="#8-å…±äº«å˜é‡" class="headerlink" title="8. å…±äº«å˜é‡"></a>8. å…±äº«å˜é‡</h2><ul>
<li>å¹¿æ’­å˜é‡</li>
<li>ç´¯åŠ å™¨ (add)</li>
</ul>
<p>æ¶‰åŠåˆ°å…³äºåŸºç¡€ç†è®ºçš„å¤ä¹ </p>
<blockquote>
<p>å®½ä¾èµ–çª„ä¾èµ–<br>stage<br>job<br>å­˜å‚¨çº§åˆ« persist</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Task-Commit æµç¨‹è§£æ 4.2]]></title>
      <url>http://shopee.ai/2020/07/29/spark/spark-aura-4.2-task-commit/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-aura-4.1.2.jpg" width="750"></p>
<a id="more"></a>
<p><strong>sparkcore çš„ä»»åŠ¡æ‰§è¡Œæµç¨‹åˆ†æï¼š</strong></p>
<blockquote>
<ul>
<li>æ„å»ºDAG</li>
<li>DAGScheduler â€”-&gt; DAG â€”&gt; TaskSet (Task set)</li>
</ul>
<p>è¡¥å……:</p>
<ol>
<li>executor  ExecutorBacked     actor</li>
<li>driver    SchedulerBackend   actor</li>
</ol>
</blockquote>
<p><img src="/images/spark/spark-aura-4.2.5.jpg" width="850"></p>
<p><img src="/images/spark/spark-aura-4.2.7.jpg" width="850"></p>
<!--<img src="/images/spark/spark-aura-4.2.6.jpg" width="750" />
-->
<h2 id="Spark-æ ¸å¿ƒæ¦‚å¿µå¤ä¹ "><a href="#Spark-æ ¸å¿ƒæ¦‚å¿µå¤ä¹ " class="headerlink" title="Spark æ ¸å¿ƒæ¦‚å¿µå¤ä¹ "></a>Spark æ ¸å¿ƒæ¦‚å¿µå¤ä¹ </h2><p>2ä¸ªé‡è¦çš„çŸ¥è¯†:</p>
<ol>
<li>new SparkContext (sparkConf) sparkContext</li>
<li>collect().  actionç®—å­çš„æäº¤ä»»åŠ¡æœºåˆ¶ï¼Œå‡ºå‘ä»»åŠ¡æ‰§è¡Œæ ¸å¿ƒ</li>
</ol>
<blockquote>
<p>HDFS - File - block - mapreduce line<br>HDFS - RDD - partition - </p>
</blockquote>
<p><img src="/images/spark/spark-aura-4.4.2.jpg" width="850"></p>
<p><img src="/images/spark/spark-aura-4.4.1.jpg" width="850"></p>
<p><img src="/images/spark/spark-aura-4.4.3.jpg" width="850"></p>
<p><img src="/images/spark/spark-aura-4.4.5.jpg" width="850"></p>
<p><strong>Spark:</strong></p>
<blockquote>
<ol>
<li>Application</li>
<li>Driver Program</li>
<li>ClusterManager</li>
<li>SparkContext æ•´ä¸ªåº”ç”¨ä¸Šä¸‹æ–‡</li>
<li>RDD</li>
<li>DAGScheduler</li>
<li>TaskScheduler</li>
<li>Worker</li>
<li>Executor</li>
<li>Stage</li>
<li>Job</li>
<li>Task</li>
<li>SparkEnv : çº¿ç¨‹çº§åˆ«ä¸Šä¸‹æ–‡, å­˜å‚¨è¿è¡Œæ—¶é‡è¦ç»„ä»¶çš„å¼•ç”¨</li>
</ol>
</blockquote>
<p>SparkEnv:</p>
<blockquote>
<p>MapOutPutTracker<br>..<br>SparkConf</p>
</blockquote>
<p>è¯¾ç¨‹ç»“æŸ:</p>
<ol>
<li>å¤§æ•°æ®å­˜å‚¨</li>
<li>å¤§æ•°æ®è®¡ç®—</li>
<li>å¤§æ•°æ®å®æ—¶å¢åˆ æ”¹æŸ¥</li>
</ol>
<p><strong>MapReduce</strong> åˆ†å¸ƒå¼è®¡ç®—çš„é¼»ç¥– æ¨¡å‹ è§£å†³å¤§æ•°æ®é›†è®¡ç®—çš„é€šç”¨æ€æƒ³</p>
<blockquote>
<ol>
<li>åˆ†è€Œæ²»ä¹‹: 1ä¸ªApplication â€”&gt; å¤šä¸ªtask</li>
<li>ä¸´æ—¶ç»“æœæ±‡æ€»: å¤šä¸ªTaskçš„æ•°æ®è¿›è¡Œæœ€ç»ˆçš„æ±‡æ€»å¤„ç†</li>
</ol>
</blockquote>
<p><strong>zookeeper</strong></p>
<blockquote>
<p>è®®ä¼šåˆ¶ , æŠ•ç¥¨ , å°‘æ•°æœä»å¤šæ•°</p>
<p>è‰ºæœ¯æ¥æºäºç”Ÿæ´»</p>
<p>kylin, spark, flink â€”-&gt; mapreduce</p>
</blockquote>
<hr>
<hr>
<h2 id="Spark-ä»»åŠ¡æ‰§è¡Œæµç¨‹è¯¦è§£"><a href="#Spark-ä»»åŠ¡æ‰§è¡Œæµç¨‹è¯¦è§£" class="headerlink" title="Spark ä»»åŠ¡æ‰§è¡Œæµç¨‹è¯¦è§£"></a>Spark ä»»åŠ¡æ‰§è¡Œæµç¨‹è¯¦è§£</h2><p>ç°åœ¨å¼€å§‹ä»‹ç»SparkContextï¼ŒSparkContextçš„åˆå§‹åŒ–æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p><strong>æœ€é‡è¦çš„ä¸‰ä¸ªå±æ€§</strong>:</p>
<blockquote>
<ol>
<li>_dagScheduler     <code>----&gt;</code>  a </li>
<li>_taskScheduler    <code>----&gt;</code>  TaskSchedulerImpl</li>
<li>_schedulerBackend <code>----&gt;</code>  StandaloneSchedulerBackend</li>
</ol>
</blockquote>
<p><img src="/images/spark/spark-aura-4.2.1.jpg" width="850"></p>
<p>Spark ä»»åŠ¡æäº¤æµç¨‹ï¼š</p>
<p><img src="/images/spark/spark-aura-4.2.2.jpg" width="700" alt="Spark ä»»åŠ¡æäº¤æµç¨‹"></p>
<p>å›¾2ï¼š</p>
<p><img src="/images/spark/spark-aura-4.2.4.jpg" width="700"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://gist.github.com/hustcat/55883ea87bdeb9a8f402f758178ab17e" target="_blank" rel="external">hustcat/spark_internal.md</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1329359" target="_blank" rel="external">Sparkå†…æ ¸åˆ†æä¹‹SparkContextåˆå§‹åŒ–æºç åˆ†æ</a></li>
<li><a href="https://study.163.com/course/courseLearn.htm?courseId=1208880821#/learn/video?lessonId=1278314609&amp;courseId=1208880821" target="_blank" rel="external">sparkæ ¸å¿ƒæ¦‚å¿µ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[spark å¯åŠ¨ä»»åŠ¡æ¥æ”¶å™¨ 4.1]]></title>
      <url>http://shopee.ai/2020/07/28/spark/spark-aura-4.1-SparkContext/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-aura-4.1.4.jpg" width="600"></p>
<a id="more"></a>
<p><img src="/images/spark/spark-aura-4.1.1.jpg" width="700"></p>
<p><img src="/images/spark/spark-aura-4.1.2.jpg" width="800"></p>
<p>ç°åœ¨å¼€å§‹ä»‹ç»SparkContextï¼ŒSparkContextçš„åˆå§‹åŒ–æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p><strong>æœ€é‡è¦çš„ä¸‰ä¸ªå±æ€§</strong>:</p>
<blockquote>
<ol>
<li>_dagScheduler     <code>----&gt;</code>  a </li>
<li>_taskScheduler    <code>----&gt;</code>  TaskSchedulerImpl</li>
<li>_schedulerBackend <code>----&gt;</code>  StandaloneSchedulerBackend</li>
</ol>
</blockquote>
<p>master &amp; app.name æ˜¯ä¸€å®šè¦çš„</p>
<p>spark 2.3.1 version:</p>
<blockquote>
<p>ä» 362 è¡Œå¼€å§‹, å°±æ˜¯é‡ç‚¹äº†<br>ä» 491 è¡Œå¼€å§‹, å°±æ˜¯é‡ç‚¹äº†ï¼Œå…¶å£æ°”åˆå§‹åŒ–äº†3ä¸ªé‡è¦çš„å¯¹è±¡</p>
</blockquote>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="comment">//spark contextåˆå§‹åŒ–</span></span><br><span class="line">    <span class="comment">// Create and start the scheduler</span></span><br><span class="line">    <span class="keyword">val</span> (sched, ts) = <span class="type">SparkContext</span>.createTaskScheduler(<span class="keyword">this</span>, master, deployMode) <span class="comment">///åˆ›å»ºä»»åŠ¡è°ƒåº¦å™¨</span></span><br><span class="line">    _schedulerBackend = sched</span><br><span class="line">    _taskScheduler = ts</span><br><span class="line">    _dagScheduler = <span class="keyword">new</span> <span class="type">DAGScheduler</span>(<span class="keyword">this</span>)</span><br><span class="line">    _heartbeatReceiver.ask[<span class="type">Boolean</span>](<span class="type">TaskSchedulerIsSet</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// start TaskScheduler after taskScheduler sets DAGScheduler reference in DAGScheduler's</span></span><br><span class="line">    <span class="comment">// constructor</span></span><br><span class="line">    _taskScheduler.start() <span class="comment">///start backend</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-aura-4.1.3.jpg" width="800"></p>
<p><img src="/images/spark/spark-aura-4.1.5.jpg" width="800"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://gist.github.com/hustcat/55883ea87bdeb9a8f402f758178ab17e" target="_blank" rel="external">hustcat/spark_internal.md</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1329359" target="_blank" rel="external">Sparkå†…æ ¸åˆ†æä¹‹SparkContextåˆå§‹åŒ–æºç åˆ†æ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[spark åŸºç¡€æ¦‚å¿µå¤ä¹  3.2]]></title>
      <url>http://shopee.ai/2020/07/27/spark/spark-aura-3.2-spark-basic-summary/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-aura-3.2.1.jpg" width="600"></p>
<a id="more"></a>
<h2 id="1-ç¬¬1éƒ¨åˆ†"><a href="#1-ç¬¬1éƒ¨åˆ†" class="headerlink" title="1. ç¬¬1éƒ¨åˆ†"></a>1. ç¬¬1éƒ¨åˆ†</h2><p>ä»»åŠ¡çš„æäº¤ï¼š</p>
<blockquote>
<p>(1). run-example SparkPi 100<br>(2). spark-shell<br>(3). spark-submit</p>
</blockquote>
<p><strong><code>--master</code></strong>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">local</span> <span class="built_in">local</span>[2] <span class="built_in">local</span>[*]</span><br><span class="line">spark://hadoop02:7077, hadoop04:7077</span><br><span class="line">yarn</span><br></pre></td></tr></table></figure>
<p>HDFS å¤„ç† myha01 è¿™ä¸ª nameservice çš„æ–¹å¼éå¸¸çš„æš´åŠ›:</p>
<blockquote>
<p>æ‰€æœ‰çš„è¯·æ±‚ï¼Œå…¶å®éƒ½ä¼šç»™æ¯ä¸ª namenode éƒ½å‘é€, ä½†æ˜¯åªæœ‰ active çš„ namenodeæ‰ä¼šè¿›è¡Œå¤„ç†ï¼Œè¿›è¡Œå›å¤<br>if (namenode.getServiceStage() == â€œstandbyâ€) {} else : â€¦</p>
</blockquote>
<h2 id="2-ç¬¬2éƒ¨åˆ†"><a href="#2-ç¬¬2éƒ¨åˆ†" class="headerlink" title="2. ç¬¬2éƒ¨åˆ†"></a>2. ç¬¬2éƒ¨åˆ†</h2><p> æ ¸å¿ƒåŠŸèƒ½: SparkContext, å­˜å‚¨ä½“ç³», æ‰§è¡Œå¼•æ“ DAGScheduler, éƒ¨ç½²æ¨¡å¼</p>
<p> æ‰©å±•åŠŸèƒ½: SQL, Streaming, GraphX, MLlib, SparkR, Pyspark</p>
<p> <strong>æ ¸å¿ƒæ¦‚å¿µ</strong>:</p>
<blockquote>
<p> Application<br> Job   åˆ‡åˆ†æ ‡å‡†: ä»å‰å¾€åæ‰¾actionçš„ç®—å­<br> Stage åˆ‡åˆ†æ ‡å‡†: ä»åå¾€å‰æ‰¾å®½ä¾èµ–çš„ç®—å­<br> Task</p>
<p>åœ¨sparkä¸­ï¼ŒTaskçš„ç±»å‹åˆ†ä¸º2ç§ï¼šShuffleMapTask å’Œ ResultTaskï¼›ç®€å•æ¥è¯´ï¼ŒDAGçš„æœ€åä¸€ä¸ªé˜¶æ®µä¼šä¸ºæ¯ä¸ªç»“æœçš„ partition ç”Ÿæˆä¸€ä¸ª ResultTask, å³æ¯ä¸ªStageé‡Œé¢çš„Taskçš„æ•°é‡æ˜¯ç”±è¯¥Stageä¸­æœ€åä¸€ä¸ªRDDçš„Partitionçš„æ•°é‡æ‰€å†³å®šçš„ï¼</p>
<p>è€Œå…¶ä½™æ‰€æœ‰é˜¶æ®µéƒ½ä¼šç”ŸæˆShuffleMapTaskï¼›ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºShuffleMapTaskæ˜¯å› ä¸ºå®ƒéœ€è¦å°†è‡ªå·±çš„è®¡ç®—ç»“æœé€šè¿‡shuffleåˆ°ä¸‹ä¸€ä¸ªstageä¸­ã€‚</p>
</blockquote>
<p><img src="/images/spark/spark-aura-3.2.1.jpg" width="700"></p>
<p><strong>Driver Application</strong>: å®¢æˆ·ç«¯é©±åŠ¨ç¨‹åº, ä¹Ÿå¯ä»¥ç†è§£ä¸ºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºï¼Œç”¨äºå°†ä»»ä½•ç¨‹åºè½¬æ¢ä¸º RDD å’Œ DAG, å¹¶ä¸ Cluster Manager è¿›è¡Œé€šä¿¡ä¸è°ƒåº¦.</p>
<blockquote>
<p> ClusterManager<br> Driver<br> Executor<br> Master, Worker, Client</p>
</blockquote>
<p>deploy-mode ä¸»è¦é’ˆå¯¹ yarn: client cluster</p>
<p>åŸºæœ¬æ¶æ„:</p>
<p><strong>ç¼–ç¨‹æ¨¡å‹</strong>:</p>
<blockquote>
<p> 1). è·å–ç¼–ç¨‹å…¥å£ <code>---&gt;</code> SparkContext</p>
<p> 2). é€šè¿‡ç¼–ç¨‹å…¥å£ä½¿ç”¨ä¸åŒçš„æ–¹å¼åŠ è½½æ•°æ®å¾—åˆ°ä¸€ä¸ª<code>æ•°æ®æŠ½è±¡</code> <code>---&gt;</code> RDD </p>
<p> 3). é’ˆå¯¹åŠ è½½å¾—åˆ°çš„æ•°æ®æŠ½è±¡è°ƒç”¨ä¸åŒçš„<code>ç®—å­</code>è¿›è¡Œå¤„ç† <code>---&gt;</code> Transformation + Action</p>
<p> 4). é’ˆå¯¹ç»“æœæ•°æ®è¿›è¡Œå¤„ç† RDD/Scala å¯¹è±¡ æˆ– é›†åˆ <code>---&gt;</code> print / save å­˜å‚¨</p>
<p> 5). å…³é—­ç¼–ç¨‹å…¥å£ <code>---&gt;</code> sparkContext.stop()</p>
<p>sparkSQL<br>sparkStreaming<br>&amp;<br>sparkCore ä¸€æ¨¡ä¸€æ ·<br>å”¯ä¸€ä¸ç›¸åŒçš„åœ°æ–¹å°±æ˜¯: ç¼–ç¨‹å…¥å£, æ•°æ®æŠ½è±¡, ç®—å­      </p>
</blockquote>
<p><strong>RDD æ‘˜è¦1ï¼š</strong></p>
<p>(1) æ¦‚å¿µï¼š å¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›†ï¼Œ ä¸å¯å˜çš„ï¼Œ å¯åˆ†åŒºçš„åˆ†å¸ƒå¼é›†åˆ<br>(2) å±æ€§ï¼š </p>
<blockquote>
<ul>
<li>A list of partitions</li>
<li>A function for computing on other RDDs</li>
<li>A list of dependencies on other RDDs</li>
<li>Optionally, a Partition for key-value RDDs (e.g. to say that the RDD is hash-partitioned)</li>
<li>Optionally, a list of preferred locations to compute each split on (e.g. block locations for an HDFS file)</li>
</ul>
</blockquote>
<p><strong>RDD æ‘˜è¦2ï¼š</strong> </p>
<p>(1). æ¦‚å¿µ</p>
<blockquote>
<p>å¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›†<br>ä¸å¯å˜çš„ï¼Œå¯åˆ†åŒºçš„åˆ†å¸ƒå¼é›†åˆ</p>
</blockquote>
<p>(2). äº”å¤§å±æ€§ </p>
<blockquote>
<p>åˆ†åŒº (A list of partitions)<br>ä½œç”¨åœ¨æ¯ä¸ªåˆ†åŒºä¹‹ä¸Šçš„ä¸€ä¸ªå‡½æ•°<br>ä¾èµ–ï¼š å®½ä¾èµ– &amp; çª„ä¾èµ–<br>KeyValueRDD åˆ†åŒºå™¨<br>RDD ä¼˜å…ˆä½ç½®åˆ—è¡¨ </p>
</blockquote>
<p>(3). å®˜æ–¹ï¼Œ åˆ›å»º RDD çš„2ç§æ–¹å¼</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">parallelize() makeRDD()</span><br><span class="line">parallelizing an existing collextion in your driver program</span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">textFile()  å¼•ç”¨ä¸€ä¸ªå¤–éƒ¨å­˜å‚¨ç³»ç»Ÿ </span><br><span class="line">referencing a dataset in an external storage systemHDFS</span><br></pre></td></tr></table></figure>
<p>ä½œç”¨åœ¨æ¯ä¸ªRDDä¹‹ä¸Šçš„ç®—å­:</p>
<ol>
<li>Transformation. RDD â€”&gt; RDD</li>
<li>Action. RDD â€”&gt; Scala å¯¹è±¡ or é›†åˆ</li>
</ol>
<p><strong>WordCount å„ç§æµç¨‹çš„åˆ’åˆ†</strong>ï¼š</p>
<p><img src="/images/spark/spark-aura-3.2.2.jpg" width="950" alt="WorCount å„ç§æµç¨‹åˆ’åˆ†"></p>
<p><strong>WordCount DAG æœ‰å‘æ— ç¯å›¾</strong>ï¼š</p>
<p><img src="/images/spark/spark-aura-3.2.3.jpg" width="850" alt="WorCount DAGæœ‰å‘æ— ç¯å›¾"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/BigData_Mining/article/details/82148085" target="_blank" rel="external">Sparkå¹¿æ’­å˜é‡å’Œç´¯åŠ å™¨è¯¦è§£</a></li>
<li><a href="https://blog.csdn.net/zhongqi2513/article/details/81513587" target="_blank" rel="external">é©¬è€å¸ˆ-Sparkçš„WordCountåˆ°åº•äº§ç”Ÿäº†å¤šå°‘ä¸ªRDD</a></li>
<li><a href="https://www.cnblogs.com/chenmingjun/p/10777091.html" target="_blank" rel="external">å¤§æ•°æ®æŠ€æœ¯ä¹‹_19_Sparkå­¦ä¹ _02_Spark Core åº”ç”¨è§£æ å®ä¾‹ç»ƒä¹ </a></li>
<li><p><a href="http://www.ysir308.com/archives/2294" target="_blank" rel="external">ç¨‹åºå‘˜è™¾è¯´:Spark Transformationç®—å­è¯¦è§£</a></p>
</li>
<li><p><a href="https://offerbang.io/giftdl/language?wpm=2.3.137.2" target="_blank" rel="external">linsay Offerå¸® è‹±è¯­å­¦ä¹ åŒ…</a></p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Core ä¸­çš„ RDD è¯¦è§£ 3.1]]></title>
      <url>http://shopee.ai/2020/07/23/spark/spark-aura-3.1-RDD-detail/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-aura-3.1.3.jpg" width="950"></p>
<a id="more"></a>
<h2 id="1-å¹¿æ’­å˜é‡"><a href="#1-å¹¿æ’­å˜é‡" class="headerlink" title="1. å¹¿æ’­å˜é‡"></a>1. å¹¿æ’­å˜é‡</h2><p><img src="/images/spark/spark-aura-3.1.1.jpg" width="650"></p>
<blockquote>
<p>çº¿ç¨‹å¯ä»¥å…±äº«å˜é‡çš„æ€è·¯</p>
</blockquote>
<p>å¹¿æ’­å˜é‡ï¼š</p>
<p>(1) åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸€ä¸ªtaskéƒ½ä¼šç»´æŒä¸€ä¸ªå…¨å±€å˜é‡çš„å‰¯æœ¬</p>
<blockquote>
<p>æœ‰ä¸€ä¸ªé›†åˆï¼š100M åœ¨ driver ä¸­ç”Ÿæˆï¼Œ ä½†æ˜¯åœ¨æ‰€æœ‰çš„taskä¸­éƒ½éœ€è¦ä½¿ç”¨</p>
<p>é‚£ä¹ˆï¼Œæ¯ä¸€ä¸ª task éƒ½ä¼šç»´æŒä¸€ä¸ªå½“å‰è¿™ 100M æ•°æ®çš„å‰¯æœ¬</p>
<p>å¦‚æœä¸€ä¸ª executor ä¸­å¯åŠ¨äº† 6 ä¸ª taskï¼Œæœ€ç»ˆæ¶ˆè€— 600M å†…å­˜</p>
</blockquote>
<p>(2). å¦‚æœä½¿ç”¨å¹¿æ’­å˜é‡çš„è¯</p>
<blockquote>
<p>é‚£ä¹ˆå¯ä»¥æŠŠå½“å‰è¿™ä¸ª100Mçš„æ•°æ®ï¼Œå°±ç¼–ç¨‹ä¸€ä¸ªå¹¿æ’­å˜é‡çš„å€¼</p>
<p>ç”¨ driver ä¸­çš„ sparkcontext è¿›è¡Œ å…¨å±€æ‰€æœ‰ executor å¹¿æ’­</p>
<p>æœ€åçš„æ•ˆæœï¼šæ¯ä¸ª executor ä¸­åªå­˜åœ¨ä¸€ä»½è¿™ä¸ªå¹¿æ’­å˜é‡çš„å‰¯æœ¬</p>
<p>è€Œä¸æ˜¯åŸå…ˆçš„æ¯ä¸€ä¸ªtaskéƒ½ä¿æŒä¸€ä¸ªå‰¯æœ¬</p>
<p>æ‰€ä»¥æœ€ç»ˆçš„å†…å­˜æ¶ˆè€—é‡ï¼š 100m</p>
</blockquote>
<p>(3) æœ€åçš„æ•ˆæœï¼š</p>
<blockquote>
<ol>
<li>å‡å°‘äº†ç½‘ç»œæ•°æ®ä¼ è¾“çš„é‡</li>
<li>å‡å°‘äº†executorçš„å†…å­˜ä½¿ç”¨</li>
</ol>
</blockquote>
<p>å¦‚æœä¸€ä¸ªå€¼å¾ˆå°ï¼Œé‚£ä¹ˆå‡ ä¹æ²¡æœ‰å¹¿æ’­çš„å¿…è¦ã€‚</p>
<p>å¹¿æ’­çš„å€¼çš„å¤§å°è¶Šå¤§ï¼Œæ•ˆæœè¶Šæ˜æ˜¾</p>
<h2 id="2-ç´¯åŠ å™¨"><a href="#2-ç´¯åŠ å™¨" class="headerlink" title="2. ç´¯åŠ å™¨"></a>2. ç´¯åŠ å™¨</h2><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> a = sc.accumulator(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>è¿˜åŸä¸€ä¸ªç´¯åŠ å™¨</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> b = a.value</span><br></pre></td></tr></table></figure>
<p>spark çš„ç´¯åŠ å™¨ å’Œ mapreduceç¼–ç¨‹æ¨¡å‹çš„å…¨å±€è®¡æ•°å™¨æ˜¯ä¸€ä¸ªé“ç†ã€‚</p>
<h2 id="3-DAGè§„åˆ’å’ŒåŸºç¡€ç†è®º"><a href="#3-DAGè§„åˆ’å’ŒåŸºç¡€ç†è®º" class="headerlink" title="3. DAGè§„åˆ’å’ŒåŸºç¡€ç†è®º"></a>3. DAGè§„åˆ’å’ŒåŸºç¡€ç†è®º</h2><p>åˆ‡åˆ† Stage æ˜¯ ä»åå¾€å‰æ‰¾ shufferç±»å‹/å®½ä¾èµ–çš„ç®—å­ï¼Œé‡åˆ°ä¸€ä¸ªå°±æ–­å¼€ï¼Œå½¢æˆä¸€ä¸ª stage</p>
<p>æœ€åä¸€ä¸ª stageï¼š ResultStage</p>
<p>é™¤æ­¤ä¹‹å¤–çš„stage</p>
<p><a href="https://www.jianshu.com/p/787706759036" target="_blank" rel="external">sparkä¸­å¦‚ä½•åˆ’åˆ†stage</a></p>
<blockquote>
<p>å› æ­¤sparkåˆ’åˆ†stageçš„æ•´ä½“æ€è·¯æ˜¯ï¼šä»åå¾€å‰æ¨ï¼Œé‡åˆ°å®½ä¾èµ–å°±æ–­å¼€ï¼Œåˆ’åˆ†ä¸ºä¸€ä¸ªstageï¼›é‡åˆ°çª„èµ–å°±å°†è¿™ä¸ªRDDåŠ å…¥è¯¥stageä¸­ã€‚</p>
<p>åœ¨sparkä¸­ï¼ŒTaskçš„ç±»å‹åˆ†ä¸º2ç§ï¼šShuffleMapTaskå’ŒResultTaskï¼›ç®€å•æ¥è¯´ï¼ŒDAGçš„æœ€åä¸€ä¸ªé˜¶æ®µä¼šä¸ºæ¯ä¸ªç»“æœçš„partitionç”Ÿæˆä¸€ä¸ªResultTaskï¼Œå³æ¯ä¸ªStageé‡Œé¢çš„Taskçš„æ•°é‡æ˜¯ç”±è¯¥Stageä¸­æœ€åä¸€ä¸ªRDDçš„Partitionçš„æ•°é‡æ‰€å†³å®šçš„ï¼</p>
<p>è€Œå…¶ä½™æ‰€æœ‰é˜¶æ®µéƒ½ä¼šç”ŸæˆShuffleMapTaskï¼›ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºShuffleMapTaskæ˜¯å› ä¸ºå®ƒéœ€è¦å°†è‡ªå·±çš„è®¡ç®—ç»“æœé€šè¿‡shuffleåˆ°ä¸‹ä¸€ä¸ªstageä¸­ã€‚</p>
</blockquote>
<p><strong>åˆ‡åˆ†stageï¼š</strong></p>
<p>ä»åå¾€å‰æ‰¾ shuffleç±»å‹/å®½ä¾èµ– çš„ç®—å­, é‡åˆ°ä¸€ä¸ªå°±æ–­å¼€, å½¢æˆä¸€ä¸ª stage</p>
<blockquote>
<p>æœ€åä¸€ä¸ªstage: ResultStage   â€”â€”&gt;  ResultTask<br>é™¤æ­¤ä¹‹å¤–çš„stageï¼šShffleMapStage   â€”â€”&gt;  ShffleTask</p>
<p>æ¯ä¸€ä¸ª stage éƒ½ä¼šåˆ‡æˆå¤šä¸ªåŒç§ç±»å‹çš„ Task</p>
<p>æ¯ä¸€ä¸ª Stage ä¸­çš„æœ‰å¯èƒ½åŒ…å«å¤šä¸ªä¸åŒçš„ RDD<br>é‚£ä¹ˆä¸€ä¸ª Stage åˆæœ‰å¯èƒ½ä¼šåˆ’åˆ†å¤šä¸ª task æ‰§è¡Œ<br>æ¯ä¸ª RDD åˆå¯ä»¥æŒ‡å®šä¸åŒçš„åˆ†åŒºæ•°<br>é»˜è®¤æƒ…å†µä¸‹ï¼šæ¯ä¸€ä¸ªåˆ†åŒºï¼Œå°±ä¼šæ˜¯ä¸€ä¸ª Task</p>
<p>é‚£ä¹ˆç°åœ¨ï¼Œå¦‚æœé‡åˆ°äº†ä¸€ä¸ª stage ä¸­æœ‰å¤šä¸ªä¸åŒåˆ†åŒºæ•°çš„RDDï¼Œ<br>é‚£ä¹ˆè¯·é—®ï¼šåˆ°åº•è¿™ä¸ªstageä¸­æœ‰å¤šå°‘ä¸ªTaskæ‰§è¡Œå‘¢ï¼Ÿ</p>
<p>5 4 3 â€”â€“&gt; 3ä¸ªtask</p>
<p>ä»¥æœ€åä¸€ä¸ªRDDçš„åˆ†åŒºæ•°æ¥å†³å®š</p>
</blockquote>
<p><strong>åˆ‡åˆ†jobï¼š</strong></p>
<p>ä»å‰å¾€åæ‰¾actionç®—å­, æ‰¾åˆ°ä¸€ä¸ªå°±å½¢æˆä¸€ä¸ª job.</p>
<p><img src="/images/spark/spark-aura-3.1.2.jpg" width="750"></p>
<p>3 + 2 = 5 tasks</p>
<p>DAG çš„ç”Ÿæˆ</p>
<p>checkpoint linage</p>
<p>æ£€æŸ¥ç‚¹  è¡€è„‰  è¡€ç»Ÿ</p>
<p>å®¹é”™</p>
<p>å¯¹äºSparkä»»åŠ¡ä¸­çš„å®½çª„ä¾èµ–ï¼Œæˆ‘ä»¬åªå–œæ¬¢çª„ä¾èµ–</p>
<p>DAGSchedulerï¼š</p>
<blockquote>
<ol>
<li>spark-submit æäº¤ä»»åŠ¡</li>
<li>åˆå§‹åŒ– DAGScheduler å’Œ TaskScheduler</li>
<li>æ¥æ”¶åˆ° application ä¹‹åï¼ŒDAGScheduler ä¼šé¦–å…ˆæŠŠ application æŠ½è±¡æˆä¸€ä¸ª DAG</li>
<li>DAGScheduler å¯¹è¿™ä¸ª DAG (DAGä¸­çš„ä¸€ä¸ªJob) è¿›è¡Œ stage çš„åˆ‡åˆ†</li>
<li>æŠŠæ¯ä¸€ä¸ª stage æäº¤ç»™ TaskScheduler</li>
</ol>
</blockquote>
<p>rdd1.collect</p>
<p>client æäº¤ä»»åŠ¡çš„ä»»åŠ¡èŠ‚ç‚¹</p>
<blockquote>
<p>å¦‚æœæ˜¯clientæ¨¡å¼ï¼Œé‚£ä¹ˆ driverç¨‹åºå°±åœ¨ client èŠ‚ç‚¹<br>å¦‚æœæ¨¡å¼æ˜¯ cluster, driver ç¨‹åºåœ¨ worker ä¸­.<br>rdd20.countByKey()</p>
<p>countByKey æ˜¯ä½œç”¨åœ¨ key-value ç±»å‹ä¸Šçš„ä¸€ä¸ª action ç®—æ³•<br>countByValue ä¸€èˆ¬æ˜¯ç”¨æ¥ç»Ÿè®¡æ™®é€šç±»å‹çš„RDD<br>map reduce recudeByKey filter, json</p>
<p>éš¾ç‚¹ï¼š</p>
<ol>
<li>aggregate</li>
<li>aggregate</li>
</ol>
</blockquote>
<p>count sum max min distinct avg</p>
<p>100G â€”-&gt; 1G<br>20G â€”â€“&gt; 30G</p>
<p>map mapPartitions<br>join mapjoin reducejoin<br>cogroup</p>
<p>coalesce<br>repartition<br>repartitionAndSortWithinPartitions<br>  é‡æ–°åˆ†åŒº, å¹¶ä¸”åˆ†åŒºå†…æ•°æ®è¿›è¡Œæ’åº</p>
<ul>
<li><a href="http://spark.apache.org/docs/latest/rdd-programming-guide.html#transformations" target="_blank" rel="external">Spark Transformations</a></li>
</ul>
<h2 id="6-RDD-æŒä¹…åŒ–æ“ä½œ-cache-persist"><a href="#6-RDD-æŒä¹…åŒ–æ“ä½œ-cache-persist" class="headerlink" title="6. RDD æŒä¹…åŒ–æ“ä½œ cache, persist"></a>6. RDD æŒä¹…åŒ–æ“ä½œ cache, persist</h2><p>cache:</p>
<p>  æ­£å¸¸æƒ…å†µä¸‹ï¼š ä¸€ä¸ªRDDä¸­æ˜¯ä¸åŒ…å«çœŸå®æ•°æ®çš„ï¼ŒåªåŒ…å«æè¿°è¿™ä¸ªRDDçš„æºæ•°æ®ä¿¡æ¯</p>
<p>  å¦‚æœå¯¹è¿™ä¸ªRDDè°ƒç”¨ cache æ–¹æ³•</p>
<p>  é‚£ä¹ˆè¿™ä¸ªrddä¸­çš„æ•°æ®ï¼Œç°åœ¨ä¾ç„¶è¿˜æ˜¯æ²¡æœ‰çœŸå®æ•°æ®</p>
<p>  ç›´åˆ°ç¬¬ä¸€æ¬¡è°ƒç”¨ä¸€ä¸ªactionçš„ç®—å­å‡ºå‘äº†è¿™ä¸ªRDDçš„æ•°æ®ç”Ÿæˆï¼Œé‚£ä¹ˆcache æ“ä½œ</p>
<p>cache()<br>persist() == persist(StorageLevel.MEMORY_ONLY)<br>persist(StorageLevel.XXXX)</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cache</span></span>(): <span class="keyword">this</span>.<span class="keyword">type</span> = persist()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">persist</span></span>(): <span class="keyword">this</span>.<span class="keyword">type</span> = persist(<span class="type">StorageLevel</span>.<span class="type">MEMORY_ONLY</span>)</span><br><span class="line"></span><br><span class="line">persist() ==== persist(<span class="type">StorageLevel</span>.<span class="type">MEMORY_ONLY</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸€ä¸ªæ™®é€šçš„æ–‡ä»¶ file  ===ã€‹ å†…å­˜</p>
<p>è¯¥ file è¢«åºåˆ—åŒ–äº† ===ã€‹ å†…å­˜</p>
<p>JVM æœ€å¤§çš„åŒºåŸŸæ˜¯ Head å†…å­˜ï¼Œ OffHeap å †å¤–å†…å­˜</p>
</blockquote>
<h2 id="7-union-join-subtract-cartesian"><a href="#7-union-join-subtract-cartesian" class="headerlink" title="7. union, join, subtract, cartesian"></a>7. union, join, subtract, cartesian</h2><h2 id="8-å„ç§-byKey-æ“ä½œ-é‡è¦"><a href="#8-å„ç§-byKey-æ“ä½œ-é‡è¦" class="headerlink" title="8. å„ç§ byKey æ“ä½œ (é‡è¦)"></a>8. å„ç§ byKey æ“ä½œ (é‡è¦)</h2><p>â€”-union, join, coGroup, subtract, cartesianâ€”-</p>
<blockquote>
<ol>
<li>groupByKey</li>
<li>reduceByKey</li>
<li>aggregateByKey</li>
<li>sortByKey</li>
<li>combineByKey</li>
</ol>
</blockquote>
<h3 id="8-1-groupByKey"><a href="#8-1-groupByKey" class="headerlink" title="8.1 groupByKey"></a>8.1 groupByKey</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> data = <span class="type">List</span>((<span class="string">"math"</span>, <span class="number">89</span>), (<span class="string">"hadoop"</span>, <span class="number">100</span>), (<span class="string">"math"</span>, <span class="number">10</span>), (<span class="string">"english"</span>, <span class="number">89</span>), (<span class="string">"math"</span>, <span class="number">1000</span>))</span><br></pre></td></tr></table></figure>
<p>groupByKeyæŠŠç›¸åŒçš„keyçš„æ•°æ®åˆ†ç»„åˆ°ä¸€ä¸ªé›†åˆåºåˆ—å½“ä¸­ï¼š</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">  (<span class="string">"spark"</span>,<span class="number">1</span>), </span><br><span class="line">  (<span class="string">"hive"</span>,<span class="number">1</span>), </span><br><span class="line">  (<span class="string">"spark"</span>,<span class="number">1</span>), </span><br><span class="line">  (<span class="string">"hadoop"</span>,<span class="number">1</span>), </span><br><span class="line">  (<span class="string">"hive"</span>,<span class="number">1</span>)</span><br><span class="line">] </span><br><span class="line">--&gt; </span><br><span class="line">[</span><br><span class="line">  (<span class="string">"spark"</span>,(<span class="number">1</span>,<span class="number">1</span>)),</span><br><span class="line">  (<span class="string">"hive"</span>,(<span class="number">1</span>,<span class="number">1</span>)),</span><br><span class="line">  (<span class="string">"hadoop"</span>,(<span class="number">1</span>))</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://www.iteblog.com/archives/1261.html" target="_blank" rel="external">Sparkå‡½æ•°è®²è§£ï¼šaggregateByKey è¿‡å¾€è®°å¿†</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/61517837" target="_blank" rel="external">Sparkçš„groupByKeyã€reduceByKeyã€sortByKeyç®—å­æ¡ˆä¾‹</a></li>
</ul>
<h2 id="9-RDD-mapPartitions-mapPartitionsWithIndex"><a href="#9-RDD-mapPartitions-mapPartitionsWithIndex" class="headerlink" title="9. RDD mapPartitions, mapPartitionsWithIndex"></a>9. RDD mapPartitions, mapPartitionsWithIndex</h2><p>mapPartitions æ¯æ¬¡éå†ä¸€ä¸ªåˆ†åŒº (æœ€å°å•ä½æ˜¯åˆ†åŒº)</p>
<h2 id="10-map-flatMap-filter"><a href="#10-map-flatMap-filter" class="headerlink" title="10. map, flatMap, filter"></a>10. map, flatMap, filter</h2><h2 id="11-spark-åŸºç¡€æ¦‚å¿µå¤ä¹ "><a href="#11-spark-åŸºç¡€æ¦‚å¿µå¤ä¹ " class="headerlink" title="11. spark åŸºç¡€æ¦‚å¿µå¤ä¹ "></a>11. spark åŸºç¡€æ¦‚å¿µå¤ä¹ </h2><h3 id="11-1-ç¬¬1éƒ¨åˆ†"><a href="#11-1-ç¬¬1éƒ¨åˆ†" class="headerlink" title="11.1 ç¬¬1éƒ¨åˆ†"></a>11.1 ç¬¬1éƒ¨åˆ†</h3><p>  ç¬¬ä¸€å¤©sparkå†…å®¹çš„éƒ¨åˆ†æ®‹ç•™</p>
<pre><code>WordCountJava7
WordCountJava8
</code></pre><p>  ä»»åŠ¡çš„æäº¤ï¼š</p>
<pre><code>(1). run-example SparkPi 100
(2). spark-shell
(3). spark-submit
</code></pre><p>  â€“master:</p>
<pre><code>local local[2] local\[\*\]
spark://hadoop02:7077, hadoop04:7077
yarn
</code></pre><p>  HDFS å¤„ç† myha01 è¿™ä¸ª nameservice çš„æ–¹å¼éå¸¸çš„æš´åŠ›:</p>
<pre><code>æ‰€æœ‰çš„è¯·æ±‚ï¼Œå…¶å®éƒ½ä¼šç»™æ¯ä¸ª namenode éƒ½å‘é€, ä½†æ˜¯åªæœ‰ active çš„ namenodeæ‰ä¼šè¿›è¡Œå¤„ç†ï¼Œè¿›è¡Œå›å¤
if (namenode.getServiceStage() == &quot;standby&quot;) {} else : ...
</code></pre><h3 id="11-1-ç¬¬2éƒ¨åˆ†"><a href="#11-1-ç¬¬2éƒ¨åˆ†" class="headerlink" title="11.1 ç¬¬2éƒ¨åˆ†"></a>11.1 ç¬¬2éƒ¨åˆ†</h3><p> æ ¸å¿ƒåŠŸèƒ½: SparkContext, å­˜å‚¨ä½“ç³»ï¼Œ æ‰§è¡Œå¼•æ“ DAGScheduler, éƒ¨ç½²é­”æœ¯</p>
<p> æ‰©å±•åŠŸèƒ½: SQL, Streaming, GraphX, MLlib, SparkR, Pyspark</p>
<p> <strong>æ ¸å¿ƒæ¦‚å¿µ</strong>:</p>
<blockquote>
<p> Application<br> Job   åˆ‡åˆ†æ ‡å‡†: ä»å‰å¾€åæ‰¾actionçš„ç®—å­<br> Stage åˆ‡åˆ†æ ‡å‡†: ä»åå¾€å‰æ‰¾å®½ä¾èµ–çš„ç®—å­<br> Task</p>
</blockquote>
<p><img src="/images/spark/spark-aura-3.2.1.jpg" width="750"></p>
<p><strong>Driver Application</strong>: å®¢æˆ·ç«¯é©±åŠ¨ç¨‹åº, ä¹Ÿå¯ä»¥ç†è§£ä¸ºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºï¼Œç”¨äºå°†ä»»ä½•ç¨‹åºè½¬æ¢ä¸º RDD å’Œ DAG, å¹¶ä¸ Cluster Manager è¿›è¡Œé€šä¿¡ä¸è°ƒåº¦.</p>
<blockquote>
<p> ClusterManager<br> Driver<br> Executor<br> Master, Worker, Client</p>
</blockquote>
<p>deploy-mode ä¸»è¦é’ˆå¯¹ yarn: client cluster</p>
<p>åŸºæœ¬æ¶æ„:</p>
<p><strong>ç¼–ç¨‹æ¨¡å‹</strong>:</p>
<blockquote>
<p> 1). è·å–ç¼–ç¨‹å…¥å£ <code>---&gt;</code> SparkContext</p>
<p> 2). é€šè¿‡ç¼–ç¨‹å…¥å£ä½¿ç”¨ä¸åŒçš„æ–¹å¼åŠ è½½æ•°æ®å¾—åˆ°ä¸€ä¸ª<code>æ•°æ®æŠ½è±¡</code> <code>---&gt;</code> RDD </p>
<p> 3). é’ˆå¯¹åŠ è½½å¾—åˆ°çš„æ•°æ®æŠ½è±¡è°ƒç”¨ä¸åŒçš„<code>ç®—å­</code>è¿›è¡Œå¤„ç† <code>---&gt;</code> Transformation + Action</p>
<p> 4). é’ˆå¯¹ç»“æœæ•°æ®è¿›è¡Œå¤„ç† RDD/Scala å¯¹è±¡ æˆ– é›†åˆ <code>---&gt;</code> print / save å­˜å‚¨</p>
<p> 5). å…³é—­ç¼–ç¨‹å…¥å£ <code>---&gt;</code> sparkContext.stop()</p>
<p>sparkSQL<br>sparkStreaming<br>&amp;<br>sparkCore ä¸€æ¨¡ä¸€æ ·<br>å”¯ä¸€ä¸ç›¸åŒçš„åœ°æ–¹å°±æ˜¯: ç¼–ç¨‹å…¥å£, æ•°æ®æŠ½è±¡, ç®—å­      </p>
</blockquote>
<p><strong>RDDï¼š</strong></p>
<p>(1) æ¦‚å¿µï¼š å¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›†ï¼Œ ä¸å¯å˜çš„ï¼Œ å¯åˆ†åŒºçš„åˆ†å¸ƒå¼é›†åˆ<br>(2) å±æ€§ï¼š </p>
<blockquote>
<ul>
<li>A list of partitions</li>
<li>A function for computing on other RDDs</li>
<li>A list of dependencies on other RDDs</li>
<li>Optionally, a Partition for key-value RDDs (e.g. to say that the RDD is hash-partitioned)</li>
<li>Optionally, a list of preferred locations to compute each split on (e.g. block locations for an HDFS file)</li>
</ul>
</blockquote>
<h2 id="12-RDD-ç®—å­-sample-takeSample"><a href="#12-RDD-ç®—å­-sample-takeSample" class="headerlink" title="12. RDD ç®—å­ sample, takeSample"></a>12. RDD ç®—å­ sample, takeSample</h2><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/BigData_Mining/article/details/82148085" target="_blank" rel="external">Sparkå¹¿æ’­å˜é‡å’Œç´¯åŠ å™¨è¯¦è§£</a></li>
<li><a href="https://blog.csdn.net/zhongqi2513/article/details/81513587" target="_blank" rel="external">é©¬è€å¸ˆ-Sparkçš„WordCountåˆ°åº•äº§ç”Ÿäº†å¤šå°‘ä¸ªRDD</a></li>
<li><a href="https://www.cnblogs.com/chenmingjun/p/10777091.html" target="_blank" rel="external">å¤§æ•°æ®æŠ€æœ¯ä¹‹_19_Sparkå­¦ä¹ _02_Spark Core åº”ç”¨è§£æ+ RDD æ¦‚å¿µ + RDD ç¼–ç¨‹ + é”®å€¼å¯¹ RDD + æ•°æ®è¯»å–ä¸ä¿å­˜ä¸»è¦æ–¹å¼ + RDD ç¼–ç¨‹è¿›é˜¶ + Spark Core å®ä¾‹ç»ƒä¹ </a></li>
</ul>
<p><a href="https://offerbang.io/giftdl/language?wpm=2.3.137.2" target="_blank" rel="external">Offerå¸® è‹±è¯­å­¦ä¹ åŒ…</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark çš„ WordCountJava 2.4 æ€»ç»“]]></title>
      <url>http://shopee.ai/2020/07/22/spark/spark-aura-2.4-core-summary/</url>
      <content type="html"><![CDATA[<p>Spark å†…å®¹å›é¡¾</p>
<a id="more"></a>
<p><strong>é¿å…é‡å¤è®¡ç®—</strong></p>
<p><strong>å¯é€‰çš„ Shuffle æ’åº</strong></p>
<p><strong>çµæ´»çš„å†…å­˜ç®¡ç†ç­–ç•¥</strong></p>
<p>ä¸‰ç§è¿è¡Œ</p>
<ol>
<li>run-example</li>
<li>spaek-shell</li>
<li>spark-submit</li>
</ol>
<blockquote>
<p> spark â€”-&gt; spark-submit<br> hadoop â€”&gt; hadoop jar<br> hive â€”â€“&gt; hive -f</p>
</blockquote>
<p><strong>WordCount</strong></p>
<p>  (1). è·å–ç¼–ç¨‹å…¥å£ SparkContext<br>  (2). é€šè¿‡ç¼–ç¨‹å…¥å£åŠ è½½æ•°æ®ï¼Œ å¾—åˆ°æ•°æ®æŠ½è±¡ RDD<br>  (3). é’ˆå¯¹ RDD è¿›è¡Œå„ç§ä¸šåŠ¡å¤„ç†<br>  (4). é’ˆå¯¹ç¬¬3æ­¥çš„ç»“æœè¿›è¡Œå¤„ç†<br>  (5). å…³é—­ SparkContext</p>
<p><strong>RDDç®—å­</strong></p>
<p>SparkContext RDD ç®—å­ (å„ç§å‡½æ•° map, flatMap, filter)</p>
<p>RDDçš„ç®—æ³•çš„åˆ†è¯¶çš„æ—¶å€™ï¼š</p>
<p>Transformationï¼š è½¬æ¢ is lazy<br>Actionï¼š è¡ŒåŠ¨</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark çš„ WordCountJava 2.3]]></title>
      <url>http://shopee.ai/2020/07/22/spark/spark-aura-2.3-core-introduce/</url>
      <content type="html"><![CDATA[<p>WordCount çš„ä»»åŠ¡æäº¤</p>
<a id="more"></a>
<p>1). å­¦ä¼šå·¥ä½œä¸­ï¼Œæ­£å¸¸è¿è¡Œä»»åŠ¡çš„æ–¹å¼:</p>
<blockquote>
<p> spark-submit</p>
</blockquote>
<p>2). â€“master çš„å„ç§ä½¿ç”¨</p>
<blockquote>
<p>  â€“master local   â€”&gt; Linux<br>  â€“master spark://hadoop02:7077  â€“&gt; spark://hadoop02:7077  </p>
<p>  â€“master yarn<br>  â€“deploy-mode client/cluster</p>
<p>  spark hive hdfs mapreduce yarn â€¦</p>
</blockquote>
<p>Running the Examples and Shell</p>
<blockquote>
<p>The â€“master option specifies the master URL for a distributed cluster, or local to run locally with one thread, or local[N] to run locally with N threads. You should start by using local for testing. For a full list of options, run Spark shell with the â€“help option.</p>
<p><strong>spark local[N]</strong><br><strong>spark local[*]</strong> æœ‰å‡ ä¸ªæ ¸, å°±èµ·æ¥å‡ ä¸ª</p>
<p>å›¾ç‰‡</p>
</blockquote>
<p>spark: runs everywhere</p>
<blockquote>
<p>local<br>standalone    â€“&gt;    Spark æµ‹è¯•å’Œå­¦ä¹ æœ€å¸¸ç”¨<br>yarn &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   â€“&gt;    YARN å·¥ä½œæœ€å¸¸ç”¨<br>mesos<br>kubernetes<br>cloud</p>
<p>spark-submit â€“master yarn â€“deploy-mode cluster</p>
</blockquote>
<h2 id="1-Word-Count"><a href="#1-Word-Count" class="headerlink" title="1. Word Count"></a>1. Word Count</h2><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark æ ¸å¿ƒæ¦‚å¿µè¯¦è¿° 2.2]]></title>
      <url>http://shopee.ai/2020/07/21/spark/spark-aura-2.2-core-introduce/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-aura-2.2.0-1.png" width="650" alt="Spark æ ¸å¿ƒæ¦‚å¿µè¯¦è¿° 2.2"></p>
<a id="more"></a>
<h2 id="1-Word-Count"><a href="#1-Word-Count" class="headerlink" title="1. Word Count"></a>1. Word Count</h2><p><img src="/images/spark/spark-aura-2.2.6.png" width="950" alt="Spark æ ¸å¿ƒæ¦‚å¿µè¯¦è¿° 2.2"></p>
<blockquote>
<p><code>data source -&gt; LineRDD -&gt; WordRDD -&gt; WordAndOneRDD -&gt; WordCountRDD -&gt; ç›®çš„åœ°</code></p>
<p>æ•´ä¸ª SPark ç¨‹åºä¸­çš„</p>
<p>1ä¸ªApplication â€“&gt; 1ä¸ªJob â€“&gt; </p>
</blockquote>
<p><img src="/images/spark/spark-aura-2.2.4.png" width="850" alt="Spark æ ¸å¿ƒæ¦‚å¿µè¯¦è¿° 2.2"></p>
<p><img src="/images/spark/spark-aura-2.2.5.png" width="850" alt="Spark æ ¸å¿ƒæ¦‚å¿µè¯¦è¿° 2.2"></p>
<p><img src="/images/spark/spark-aura-2.2.7.png" width="850" alt="Spark æ ¸å¿ƒæ¦‚å¿µè¯¦è¿° 2.2"></p>
<p><img src="/images/spark/spark-aura-2.2.8.png" width="850" alt="Spark æ ¸å¿ƒæ¦‚å¿µè¯¦è¿° 2.2"></p>
<p><img src="/images/spark/spark-aura-2.2.9.png" width="850" alt="Spark æ ¸å¿ƒæ¦‚å¿µè¯¦è¿° 2.2"></p>
<p>storm â€” ç»†ç²’åº¦ â€“ ä¸€æ¡æ•°æ®å¤„ç†ä¸€æ¬¡</p>
<p>sparkStreaming â€“ ç²—ç²’åº¦ â€“ ä¸€å°æ®µæ—¶é—´å†…çš„æ‰€æœ‰æ•°æ®å¤„ç†ä¸€æ¬¡</p>
<p>åŠ å…¥ 1s ä¸­ å°±ä¸€æ¡æ•°æ®<br>åŠ å…¥ 1s ä¸­ å°±ä¸€ä¸‡æ¡æ•°æ®. Spark Core + MapReduce</p>
<p>spark: master(resourcemanager) worker(nodemanager)</p>
<p>YARN:</p>
<p>â€“ master yarn<br>â€“deploy-mode client/cluster</p>
<p>ä¸Šä¼ å’Œä¸‹è½½æ•°æ®çš„æµç¨‹ï¼š 7</p>
<p>SparkSubmitï¼š 10æ­¥<br>SparkCore ä»»åŠ¡è¿è¡Œæµç¨‹ï¼š 20æ­¥</p>
<p>RDD ä¸‰å¥è¯ </p>
<p>linage è¡€è„‰å…³ç³»</p>
<hr>
<p>ä¸€ä¸ªçº¿ç¨‹ä¸€ä¸ªä»»åŠ¡</p>
<p>ä¸€ä¸ª Executor ä¼šæ‰§è¡Œå¤šä¸ª Task</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark RDD çš„æ¦‚å¿µ 2.1]]></title>
      <url>http://shopee.ai/2020/07/20/spark/spark-aura-2.1-RDD-introduce/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-2.1-logo.png" width="550" alt="Spark 3.0 Feature"></p>
<a id="more"></a>
<p>storm â€” ç»†ç²’åº¦ â€“ ä¸€æ¡æ•°æ®å¤„ç†ä¸€æ¬¡</p>
<p>sparkStreaming â€“ ç²—ç²’åº¦ â€“ ä¸€å°æ®µæ—¶é—´å†…çš„æ‰€æœ‰æ•°æ®å¤„ç†ä¸€æ¬¡</p>
<p>åŠ å…¥ 1s ä¸­ å°±ä¸€æ¡æ•°æ®<br>åŠ å…¥ 1s ä¸­ å°±ä¸€ä¸‡æ¡æ•°æ®. Spark Core + MapReduce</p>
<p>spark: master(resourcemanager) worker(nodemanager)</p>
<p>YARN:</p>
<p>â€“ master yarn<br>â€“deploy-mode client/cluster</p>
<hr>
<p>ä¸€ä¸ªçº¿ç¨‹ä¸€ä¸ªä»»åŠ¡</p>
<p>ä¸€ä¸ª Executor ä¼šæ‰§è¡Œå¤šä¸ª Task</p>
<p>æ•´ä¸ª SPark ç¨‹åºä¸­çš„</p>
<p>1ä¸ªApplication â€“&gt; 1ä¸ªJob â€“&gt; </p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[äº‘æ –å¤§ä¼š | Apache Spark 3.0 å’Œ Koalas æœ€æ–°è¿›å±•]]></title>
      <url>http://shopee.ai/2020/07/18/spark/spark-review-4-spark3.0-1/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-3.0-logo.png" width="550" alt="Spark 3.0 Feature"></p>
<a id="more"></a>
<center><embed src="/images/spark/spark3.0.pdf" width="950" height="1000"></center>


<h2 id="1-Spark-å‘å±•å²-ä¸-ç°çŠ¶"><a href="#1-Spark-å‘å±•å²-ä¸-ç°çŠ¶" class="headerlink" title="1. Spark å‘å±•å² ä¸ ç°çŠ¶"></a>1. Spark å‘å±•å² ä¸ ç°çŠ¶</h2><h3 id="1-1-spark-é£é›¨10å¹´"><a href="#1-1-spark-é£é›¨10å¹´" class="headerlink" title="1.1 spark é£é›¨10å¹´"></a>1.1 spark é£é›¨10å¹´</h3><h3 id="1-2-spark-æµè¡ŒåŸå› "><a href="#1-2-spark-æµè¡ŒåŸå› " class="headerlink" title="1.2 spark æµè¡ŒåŸå› "></a>1.2 spark æµè¡ŒåŸå› </h3><blockquote>
<ol>
<li>æä¾›äº†æ˜“ç”¨çš„ API</li>
<li>Spark æ˜¯ç›®å‰å¤§æ•°æ®é¢†åŸŸç”Ÿæ€ç³»ç»Ÿæœ€ä¸°å¯Œçš„ç»„ä»¶</li>
<li>Spark æœ‰éå¸¸é«˜æ•ˆçš„å¤„ç†å¼•æ“.</li>
</ol>
<p><br><br>    å®ƒçš„ Catalyst å’Œ Tungsten é¡¹ç›®æ”¯æŒäº†å¯¹æ•°æ®åˆ†ææ€§èƒ½ä½ é‡è¦çš„2å¤§ç‰¹å¾.  </p>
<pre><code>(1). å†…å­˜ç®¡ç† ï¼ˆ2ï¼‰ä»£ç ç”Ÿæˆ
</code></pre></blockquote>
<h2 id="2-åˆè¯†-spark-3-0"><a href="#2-åˆè¯†-spark-3-0" class="headerlink" title="2. åˆè¯† spark 3.0"></a>2. åˆè¯† spark 3.0</h2><h2 id="3-Spark-3-0-åˆä½“éªŒ"><a href="#3-Spark-3-0-åˆä½“éªŒ" class="headerlink" title="3. Spark 3.0 åˆä½“éªŒ"></a>3. Spark 3.0 åˆä½“éªŒ</h2><h2 id="4-Spark-ç”Ÿæ€ä¸æœªæ¥"><a href="#4-Spark-ç”Ÿæ€ä¸æœªæ¥" class="headerlink" title="4. Spark ç”Ÿæ€ä¸æœªæ¥"></a>4. Spark ç”Ÿæ€ä¸æœªæ¥</h2><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.iteblog.com/archives/2611.html" target="_blank" rel="external">äº‘æ –å¤§ä¼š | Apache Spark 3.0 å’Œ Koalas æœ€æ–°è¿›å±•</a></li>
<li><a href="https://tech.meituan.com/2016/04/29/spark-tuning-basic.html" target="_blank" rel="external">ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ - Sparkæ€§èƒ½ä¼˜åŒ–æŒ‡å—â€”â€”åŸºç¡€ç¯‡</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python æ˜Ÿå·è¡¨è¾¾å¼(*) ç”¨æ³•è¯¦è§£]]></title>
      <url>http://shopee.ai/2020/07/17/python/language/py-language-15-star/</url>
      <content type="html"><![CDATA[<p><img src="/images/python/language/py-star-logo.jpg" width="650" alt="STAR"></p>
<a id="more"></a>
<h2 id="1-å‡½æ•°å¯å˜å‚æ•°æ ‡å¿—ä»¥åŠå‚æ•°è§£åŒ…"><a href="#1-å‡½æ•°å¯å˜å‚æ•°æ ‡å¿—ä»¥åŠå‚æ•°è§£åŒ…" class="headerlink" title="1. å‡½æ•°å¯å˜å‚æ•°æ ‡å¿—ä»¥åŠå‚æ•°è§£åŒ…"></a>1. å‡½æ•°å¯å˜å‚æ•°æ ‡å¿—ä»¥åŠå‚æ•°è§£åŒ…</h2><h2 id="2-èµ‹å€¼è¯­å¥ä¸­ä½œä¸ºå¯å˜å˜é‡æ ‡å¿—"><a href="#2-èµ‹å€¼è¯­å¥ä¸­ä½œä¸ºå¯å˜å˜é‡æ ‡å¿—" class="headerlink" title="2. èµ‹å€¼è¯­å¥ä¸­ä½œä¸ºå¯å˜å˜é‡æ ‡å¿—"></a>2. èµ‹å€¼è¯­å¥ä¸­ä½œä¸ºå¯å˜å˜é‡æ ‡å¿—</h2><h2 id="3-å¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œè§£åŒ…"><a href="#3-å¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œè§£åŒ…" class="headerlink" title="3. å¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œè§£åŒ…"></a>3. å¯¹å¯è¿­ä»£å¯¹è±¡è¿›è¡Œè§£åŒ…</h2><h2 id="4-å…ƒç»„-é›†åˆ-åˆ—è¡¨"><a href="#4-å…ƒç»„-é›†åˆ-åˆ—è¡¨" class="headerlink" title="4. å…ƒç»„/é›†åˆ/åˆ—è¡¨"></a>4. å…ƒç»„/é›†åˆ/åˆ—è¡¨</h2><p>ä»¥å…ƒç»„ä¸ºä¾‹ï¼Œé›†åˆä¸åˆ—è¡¨åŒç†ã€‚</p>
<p>å…ƒç»„ä¹Ÿå¯ä»¥æ¯”è¾ƒå¤§å°ï¼Œä¾‹å¦‚ä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(<span class="number">1</span>, <span class="number">5</span>) &lt; (<span class="number">2</span>, <span class="number">3</span>) <span class="comment"># True</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">8</span>) &lt; (<span class="number">2</span>, <span class="number">6</span>) <span class="comment"># False</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>) &lt; (<span class="number">1</span>, <span class="number">2</span>) <span class="comment"># False</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">1</span>, <span class="number">-1</span>) &lt; (<span class="number">1</span>, <span class="number">2</span>) <span class="comment"># True</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">-1</span>) &lt; (<span class="number">1</span>, <span class="number">2</span>) <span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.cnblogs.com/arkenstone/p/5695161.html" target="_blank" rel="external">pythonå‡½æ•°å‚æ•°å‰é¢å•æ˜Ÿå·ï¼ˆ<em>ï¼‰å’ŒåŒæ˜Ÿå·ï¼ˆ*</em>ï¼‰çš„åŒºåˆ«</a></li>
<li><a href="https://blog.csdn.net/S_o_l_o_n/article/details/102823490" target="_blank" rel="external">Pythonæ˜Ÿå·è¡¨è¾¾å¼(*)ç”¨æ³•è¯¦è§£</a></li>
<li><a href="https://blog.csdn.net/maizousidemao/article/details/106323920?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase" target="_blank" rel="external">å…ƒç»„/é›†åˆ/åˆ—è¡¨ æ¯”è¾ƒå¤§å°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hadoop Tutorial 3 - Hive]]></title>
      <url>http://shopee.ai/2020/07/16/hadoop/hadoop-hive-1/</url>
      <content type="html"><![CDATA[<p><img src="/images/hadoop/hadoop-hive-logo-1.png" width="450" alt="Hadoop MapReduce"></p>
<a id="more"></a>
<p>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFS: æ ¸å¿ƒåŸç†ä¸æ“ä½œ</p>
<p><img src="/images/hadoop/hadoop-hdfs-1.png" width="900" alt="Hadoop HDFS"></p>
<p><img src="/images/hadoop/hadoop-hdfs-2.png" width="900" alt="Hadoop HDFS"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/course/courseLearn.htm?courseId=1209979905#/learn/live?lessonId=1281107303&amp;courseId=1209979905" target="_blank" rel="external">å¤§æ•°æ®å¼€å‘ç³»åˆ—ç›´æ’­è¯¾ â‘¢</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hadoop Tutorial 2 - MapReduce]]></title>
      <url>http://shopee.ai/2020/07/15/hadoop/hadoop-mr-1/</url>
      <content type="html"><![CDATA[<p><img src="/images/hadoop/hadoop-mr-logo.png" width="450" alt="Hadoop MapReduce"></p>
<a id="more"></a>
<h2 id="1-ä»€ä¹ˆæ˜¯å¤§æ•°æ®ï¼Ÿ-æ ¸å¿ƒé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯å¤§æ•°æ®ï¼Ÿ-æ ¸å¿ƒé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å¤§æ•°æ®ï¼Ÿ æ ¸å¿ƒé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯å¤§æ•°æ®ï¼Ÿ æ ¸å¿ƒé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä¸¾ä¸ªğŸŒ°:  å•†å“çš„æ¨è </p>
<blockquote>
<p>(é—®é¢˜1) å¤§é‡çš„è®¢å•æ•°æ®å¦‚ä½•å­˜å‚¨ï¼Ÿ<br>(é—®é¢˜1) å¤§é‡çš„è®¢å•æ•°æ®å¦‚ä½•è®¡ç®—ï¼Ÿ </p>
<p>å¤§æ•°æ®çš„æ ¸å¿ƒé—®é¢˜ (æŠ€æœ¯ä¸Š)ï¼š </p>
<ol>
<li>å­˜å‚¨ (HDFS) </li>
<li>è®¡ç®— (ç¦»çº¿ + å®æ—¶)</li>
</ol>
</blockquote>
<p>ç¦»çº¿è®¡ç®— ä¸ å®æ—¶è®¡ç®—</p>
<blockquote>
<p>2.1 ç¦»çº¿è®¡ç®— - æ‰¹å¤„ç† </p>
<p>  (MapReduce, Spark Core, Flink DataSet API)</p>
<p>2.2 å®æ—¶è®¡ç®—</p>
<p>  (Spark Streamingã€Flink DataStream API)</p>
<p>MapReduce æ ¸å¿ƒæ€æƒ³ï¼š å…ˆæ‹†åˆ†ï¼Œåœ¨åˆå¹¶</p>
</blockquote>
<h2 id="2-MapReduce-ç¼–ç¨‹æ¨¡å¼"><a href="#2-MapReduce-ç¼–ç¨‹æ¨¡å¼" class="headerlink" title="2. MapReduce ç¼–ç¨‹æ¨¡å¼"></a>2. MapReduce ç¼–ç¨‹æ¨¡å¼</h2><p><img src="/images/hadoop/hadoop-mr-5.png" width="880" alt="Hadoop MapReduce"></p>
<p><strong>æ•°æ®çš„å¤„ç†æµç¨‹ï¼š WordCountç¨‹åºä¸ºä¾‹</strong></p>
<p><img src="/images/hadoop/hadoop-mr-6.png" width="980" alt="Hadoop MapReduce"></p>
<h2 id="3-MapReduce-ç¼–ç¨‹å®æˆ˜"><a href="#3-MapReduce-ç¼–ç¨‹å®æˆ˜" class="headerlink" title="3. MapReduce ç¼–ç¨‹å®æˆ˜"></a>3. MapReduce ç¼–ç¨‹å®æˆ˜</h2><ol>
<li>WordCountMapper</li>
<li>WordCountReducer</li>
<li>WordCountMain</li>
</ol>
<blockquote>
<p><img src="/images/hadoop/hadoop-mr-7.png" width="720" alt="Hadoop MapReduce"></p>
<p><img src="/images/hadoop/hadoop-mr-9.jpg" width="900" alt="Hadoop MapReduce WordCountMain"></p>
</blockquote>
<h2 id="4-åˆ†å¸ƒå¼è®¡ç®—æ¨¡å‹"><a href="#4-åˆ†å¸ƒå¼è®¡ç®—æ¨¡å‹" class="headerlink" title="4. åˆ†å¸ƒå¼è®¡ç®—æ¨¡å‹"></a>4. åˆ†å¸ƒå¼è®¡ç®—æ¨¡å‹</h2><p>MapReduce è®¡ç®—æ¨¡å‹çš„æ¥æºï¼š PageRank é—®é¢˜</p>
<blockquote>
<p>å¯åŠ¨ Hadoop &amp; Yarnï¼š<br><img src="/images/hadoop/hadoop-mr-1.png" width="600" alt="Hadoop & Yarn" align="center"></p>
<p>æ‰§è¡Œ MapReduceï¼š</p>
<p><img src="/images/hadoop/hadoop-mr-2.png" width="800" alt="Hadoop MapReduce"></p>
<p>æ‰§è¡Œç»“æœï¼š</p>
<p><img src="/images/hadoop/hadoop-mr-3.png" width="800" alt="Hadoop MapReduce"></p>
</blockquote>
<h2 id="5-å…¶ä»–çš„ä¸€äº›çŸ¥è¯†"><a href="#5-å…¶ä»–çš„ä¸€äº›çŸ¥è¯†" class="headerlink" title="5. å…¶ä»–çš„ä¸€äº›çŸ¥è¯†:"></a>5. å…¶ä»–çš„ä¸€äº›çŸ¥è¯†:</h2><blockquote>
<p><img src="/images/hadoop/hadoop-mr-4.png" width="850" alt="Hadoop MapReduce"></p>
</blockquote>
<h2 id="6-MapReduce-åœ¨-Hadoop-ä¸­çš„ä½ç½®"><a href="#6-MapReduce-åœ¨-Hadoop-ä¸­çš„ä½ç½®" class="headerlink" title="6. MapReduce åœ¨ Hadoop ä¸­çš„ä½ç½®"></a>6. MapReduce åœ¨ Hadoop ä¸­çš„ä½ç½®</h2><p><img src="/images/hadoop/hadoop-mr-8.png" width="760" alt="Hadoop MapReduce"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/course/courseLearn.htm?courseId=1209979905#/learn/live?lessonId=1281107303&amp;courseId=1209979905" target="_blank" rel="external">å¤§æ•°æ®å¼€å‘ç³»åˆ—ç›´æ’­è¯¾ â‘¢</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hadoop Tutorial 1 - HDFS]]></title>
      <url>http://shopee.ai/2020/07/15/hadoop/HDFS-Introduce/</url>
      <content type="html"><![CDATA[<p><img src="/images/hadoop/hadoop-hdfs.webp" width="450" alt="Hadoop HDFS"></p>
<a id="more"></a>
<p>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFS: æ ¸å¿ƒåŸç†ä¸æ“ä½œ</p>
<p><img src="/images/hadoop/hadoop-hdfs-1.png" width="900" alt="Hadoop HDFS"></p>
<p><img src="/images/hadoop/hadoop-hdfs-2.png" width="900" alt="Hadoop HDFS"></p>
<p><strong>å¦‚ä½•å­¦ä¹ å¤§æ•°æ®?</strong></p>
<blockquote>
<ol>
<li>æ€æƒ³ã€æ¶æ„ã€åŸç† (éå¸¸é‡è¦)</li>
<li>æ­å»ºç¯å¢ƒ (å»ºè®®: Apacheç‰ˆæœ¬)</li>
</ol>
</blockquote>
<h2 id="1-ä»€ä¹ˆæ˜¯å¤§æ•°æ®"><a href="#1-ä»€ä¹ˆæ˜¯å¤§æ•°æ®" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å¤§æ•°æ®"></a>1. ä»€ä¹ˆæ˜¯å¤§æ•°æ®</h2><blockquote>
<p>Volume, Velocity, Variety, Value, Veracity</p>
</blockquote>
<p>å•†å“æ¨èï¼š</p>
<blockquote>
<p>Q1ï¼š å¤§é‡çš„è®¢å•å¦‚ä½•å­˜å‚¨ ?<br>Q2ï¼š å¤§é‡çš„è®¢å•å¦‚ä½•è®¡ç®— ?</p>
</blockquote>
<p>å¤§æ•°æ®çš„æ ¸å¿ƒé—®é¢˜æ˜¯?</p>
<blockquote>
<ol>
<li><strong>æ•°æ®çš„å­˜å‚¨</strong></li>
<li><strong>æ•°æ®çš„è®¡ç®—</strong></li>
</ol>
</blockquote>
<h2 id="2-åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"><a href="#2-åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="2. åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"></a>2. åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</h2><p>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†</p>
<p>Q1ï¼š ç¡¬ç›˜ä¸å¤Ÿå¤§</p>
<blockquote>
<ol>
<li>å¤šå‡ ä¸ªç¡¬ç›˜</li>
</ol>
</blockquote>
<p>Q2ï¼š ç¡¬ç›˜ä¸å¤Ÿå®‰å…¨</p>
<blockquote>
<ol>
<li>å¤šå­˜å‡ ä»½</li>
<li>HDFSçš„é»˜è®¤çš„ æ•°æ®åº“å†—ä½™åº¦ï¼š 3</li>
</ol>
</blockquote>
<p>ä¸»ä»æ¶æ„ HDFSã€Yarnã€Hbaseã€Stormã€Sparkã€Flink éƒ½æ˜¯ä¸»ä»æ¶æ„</p>
<blockquote>
<ol>
<li>å­˜åœ¨çš„é—®é¢˜ï¼š å•ç‚¹æ•…éšœ</li>
<li>Zookeeper: HA (Hadoopçš„HAå®ç°æ¶æ„)</li>
<li>..</li>
</ol>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ hdfs dfsadmin -report</span><br><span class="line"></span><br><span class="line">âœ jps</span><br><span class="line">43501 DataNode</span><br><span class="line">43502 NameNode</span><br><span class="line">43503 SecondaryNameNode</span><br></pre></td></tr></table></figure>
<h2 id="3-æ“ä½œ-HDFS"><a href="#3-æ“ä½œ-HDFS" class="headerlink" title="3. æ“ä½œ HDFS"></a>3. æ“ä½œ HDFS</h2><ol>
<li>å‘½ä»¤è¡Œ</li>
<li>Web Consoleï¼š ç«¯å£ 9870</li>
<li>Javaç¨‹åº</li>
</ol>
<p><img src="/images/hadoop/hadoop-hdfs-3.png" width="800" alt="ä½¿ç”¨ Java API ä¸Šä¼ æ•°æ®åˆ°HDFS"></p>
<h2 id="4-HDFS-è¿›é˜¶"><a href="#4-HDFS-è¿›é˜¶" class="headerlink" title="4. HDFS è¿›é˜¶"></a>4. HDFS è¿›é˜¶</h2><ol>
<li>å›æ”¶ç«™</li>
<li>å®‰å…¨æ¨¡å¼</li>
<li>é…é¢</li>
<li>æƒé™ç®¡ç†</li>
<li>å¿«ç…§</li>
</ol>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/course/courseLearn.htm?courseId=1209979905#/learn/live?lessonId=1281107303&amp;courseId=1209979905" target="_blank" rel="external">å¤§æ•°æ®å¼€å‘ç³»åˆ—ç›´æ’­è¯¾ â‘¢</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Tutorial 3 - Spark RDD]]></title>
      <url>http://shopee.ai/2020/07/07/spark/spark-review-3/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-3.0-rdd-logo.png" width="550" alt="Spark RDD Feature"></p>
<a id="more"></a>
<h2 id="1-Spark-æ˜¯ä»€ä¹ˆ"><a href="#1-Spark-æ˜¯ä»€ä¹ˆ" class="headerlink" title="1. Spark æ˜¯ä»€ä¹ˆ?"></a>1. Spark æ˜¯ä»€ä¹ˆ?</h2><p><img src="/images/spark/spark-3.1.png" width="900" alt="Spark"></p>
<blockquote>
<p>SQL, Oracle, Spark</p>
<ol>
<li>Oracle == æ±½è½¦</li>
<li>hadoop == é£æœº</li>
<li>SQL == é©¾ç…§</li>
<li>Spark è®©SQLå¹¶è¡Œè¿è¡Œ == SQLåŠ é€Ÿå™¨</li>
</ol>
<p>Spark æ˜¯è®¡ç®—å¼•æ“</p>
</blockquote>
<h2 id="2-Spark-æ‰§è¡Œè¿‡ç¨‹"><a href="#2-Spark-æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="2. Spark æ‰§è¡Œè¿‡ç¨‹"></a>2. Spark æ‰§è¡Œè¿‡ç¨‹</h2><p><img src="/images/spark/spark-3.2.png" width="830" alt="Spark"></p>
<blockquote>
<p>HiveOnSpark vs SparkSQL</p>
<ol>
<li>Store</li>
<li>MR</li>
</ol>
<p>HiveOnSpark, Hive SQL å¯ä»¥ç”¨ Spark æ‰§è¡Œå¼•æ“, ä½†æ˜¯è¿™æ ·è°ƒä¼˜èµ·æ¥å¾ˆéº»çƒ¦</p>
<p>SparkSQL æ¯” Hive on Spark å¥½ä¸€ç‚¹.</p>
</blockquote>
<h2 id="3-Spark-çš„èµ·æº"><a href="#3-Spark-çš„èµ·æº" class="headerlink" title="3. Spark çš„èµ·æº"></a>3. Spark çš„èµ·æº</h2><p><img src="/images/spark/spark-3.3.png" width="900" alt="Spark"></p>
<h2 id="4-Spark-çš„æ¶æ„å›¾"><a href="#4-Spark-çš„æ¶æ„å›¾" class="headerlink" title="4. Spark çš„æ¶æ„å›¾"></a>4. Spark çš„æ¶æ„å›¾</h2><blockquote>
<p>Spark 2.x python &amp; Java æ€§èƒ½ 1:1</p>
</blockquote>
<p><img src="/images/spark/spark-3.4.png" width="700" alt="Spark"></p>
<p>Spark DataFrame ä¸ pandas Dataframe æ²¡å…³ç³»ï¼Œä½†æ˜¯å¯ä»¥äº’ç›¸è½¬æ¢</p>
<blockquote>
<ol>
<li>to_pandas</li>
<li>to_spark</li>
</ol>
</blockquote>
<ol>
<li>DataSets : for Java</li>
<li>Dataframe : for Python</li>
<li><p>SQL : SQL </p>
<p>æ¡æ¡å¤§è·¯é€šç½—é©¬</p>
<blockquote>
<p>Spark é€‚åˆå¤§è§„æ¨¡æœºå™¨å­¦ä¹ ï¼Œä¸é€‚åˆæ·±åº¦å­¦ä¹ (tensorflowé€‚åˆæ·±åº¦å­¦ä¹ )ï¼Œè¿™æ ·ç†è§£å¯¹ä¹ˆï¼Ÿ</p>
</blockquote>
</li>
</ol>
<h2 id="5-RDD-çš„äº”ä¸ªç‰¹æ€§"><a href="#5-RDD-çš„äº”ä¸ªç‰¹æ€§" class="headerlink" title="5. RDD çš„äº”ä¸ªç‰¹æ€§"></a>5. RDD çš„äº”ä¸ªç‰¹æ€§</h2><p><img src="/images/spark/spark-3.5.png" width="900" alt="Spark"></p>
<h2 id="6-Spark-Api-å¦‚ä½•ä½¿ç”¨"><a href="#6-Spark-Api-å¦‚ä½•ä½¿ç”¨" class="headerlink" title="6. Spark Api å¦‚ä½•ä½¿ç”¨"></a>6. Spark Api å¦‚ä½•ä½¿ç”¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1. PYSPARK_PYTHON</span><br><span class="line">2. JAVA_HOME</span><br><span class="line">3. SPARK_HOME</span><br><span class="line">4. PYLIB (os.environ[<span class="string">"PYLIB"</span>]=os.environ[<span class="string">"SPARK_HOME"</span>] + <span class="string">"/python/lib"</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>PYLIB maybe not setting</p>
<p>export PYSPARK_PYTHON=/Users/blair/.pyenv/versions/anaconda3/envs/spark/bin/python3<br>export PYSPARK_DRIVER_PYTHON=â€jupyterâ€<br>export PYSPARK_DRIVER_PYTHON_OPTS=â€notebookâ€</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ä»¥ä¸‹æ˜¯ Mars çš„è®¾ç½® ï¼ˆæˆ‘ä»¬ç›´æ¥ç”¨pyspark, åˆ™ä¸ç”¨ç›´æ¥è¿™æ ·æ˜¾ç¤ºåœ¨ç¨‹åºä¸­æŒ‡å®šï¼‰ï¼š</span><br><span class="line">os.environ[<span class="string">"PYSPARK_PYTHON"</span>]=<span class="string">"C:/Users/netease/Anaconda3/python.exe"</span></span><br><span class="line">os.environ[<span class="string">"JAVA_HOME"</span>]=<span class="string">"C:/Program Files/Java/jdk1.8.0_144"</span></span><br><span class="line">os.environ[<span class="string">"SPARK_HOME"</span>]=<span class="string">"c:/spark"</span></span><br><span class="line">os.environ[<span class="string">"PYLIB"</span>]=os.environ[<span class="string">"SPARK_HOME"</span>] + <span class="string">"/python/lib"</span></span><br><span class="line">sys.path.insert(<span class="number">0</span>,os.environ[<span class="string">"PYLIB"</span>] + <span class="string">"/py4j-0.10.7-src.zip"</span> )</span><br><span class="line">sys.path.insert(<span class="number">0</span>,os.environ[<span class="string">"PYLIB"</span>] + <span class="string">"/pyspark.zip"</span> )</span><br></pre></td></tr></table></figure>
<h2 id="7-åˆ©ç”¨-Pyspark-å®Œæˆ-WordCount"><a href="#7-åˆ©ç”¨-Pyspark-å®Œæˆ-WordCount" class="headerlink" title="7. åˆ©ç”¨ Pyspark å®Œæˆ WordCount"></a>7. åˆ©ç”¨ Pyspark å®Œæˆ WordCount</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkConf , SparkContext</span><br><span class="line"></span><br><span class="line">print(sc.version)</span><br><span class="line"></span><br><span class="line">lines = sc.textFile(<span class="string">"/Users/blair/ghome/github/spark3.0/pyspark/spark-src/word_count.text"</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">lines.take(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">words= lines.flatMap(<span class="keyword">lambda</span> x : x.split(<span class="string">" "</span>))</span><br><span class="line">words.take(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">wordCounts = words.countByValue()</span><br><span class="line"><span class="keyword">for</span> word,count <span class="keyword">in</span> wordCounts.items():</span><br><span class="line">    print(<span class="string">"&#123;&#125; : &#123;&#125;"</span>.format(word,count))</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæœ‰3ä¸ªèŠ‚ç‚¹, åˆ™ä¸‹åˆ—æ–¹æ³•å¯ä»¥æŸ¥çœ‹ï¼Œæ•°æ®åˆ†å¸ƒåœ¨ä¸åŒçš„ partition</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">indexedFunc</span><span class="params">(parindex,pariter)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="string">"partition : &#123;&#125; =&gt; &#123;&#125;"</span>.format(parindex,x) <span class="keyword">for</span> x <span class="keyword">in</span> pariter]</span><br><span class="line">    </span><br><span class="line">words.mapPartitionsWithIndex(indexedFunc).collect()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>[â€˜partition : 0 =&gt; Theâ€™,<br>â€˜partition : 0 =&gt; historyâ€™,<br>â€˜partition : 0 =&gt; ofâ€™,<br>â€˜partition : 0 =&gt; Newâ€™,<br>â€˜partition : 0 =&gt; Yorkâ€™,<br>â€˜partition : 0 =&gt; beginsâ€™,<br>â€˜partition : 0 =&gt; aroundâ€™,<br>â€˜partition : 0 =&gt; 10,000â€™,</p>
</blockquote>
<p>æŸ¥çœ‹ spark è¿è¡ŒçŠ¶æ€ï¼š <a href="http://localhost:8080/" target="_blank" rel="external">http://localhost:8080/</a></p>
<p><img src="/images/spark/spark-3.7.png" width="900" alt="Spark"></p>
<p>æŸ¥çœ‹ spark Jobs çŠ¶æ€ï¼š<a href="http://localhost:4040/jobs/" target="_blank" rel="external">http://localhost:4040/jobs/</a></p>
<p><img src="/images/spark/spark-3.6.png" width="900" alt="Spark"></p>
<blockquote>
<p><code>çŸ¥è¯†æ‘˜è¦</code>:</p>
<ol>
<li><p>å¦‚æœç”¨ Hadoop Mapreduce æ¥å®Œæˆ, åˆ™ä»£ç å†™èµ·æ¥éº»çƒ¦å¹¶ç¹å¤š.</p>
</li>
<li><p>Spark æ˜¯ å†…å­˜ç‰ˆçš„ Mapreduce, Mapreduce å¯ä»¥è¯´æ˜¯æ‰€æœ‰åˆ†å¸ƒå¼è®¡ç®—çš„é¼»ç¥–.</p>
</li>
<li><p>Spark éœ€è¦åšæ€§èƒ½è°ƒä¼˜çš„æ—¶å€™ï¼Œè¿˜å¾—å†çœ‹ Mapreduce çš„çŸ¥è¯†æ¥ä¿®å¤.</p>
</li>
</ol>
</blockquote>
<h2 id="8-Spark-æ‰§è¡Œå›¾"><a href="#8-Spark-æ‰§è¡Œå›¾" class="headerlink" title="8. Spark æ‰§è¡Œå›¾"></a>8. Spark æ‰§è¡Œå›¾</h2><p><img src="/images/spark/spark-2.3.jpg" width="600" alt="Spark Exec"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.jianshu.com/p/5a42fe0eed4d" target="_blank" rel="external">å¤§æ•°æ®å…¥é—¨ä¸å®æˆ˜-PySparkçš„ä½¿ç”¨æ•™ç¨‹</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/27643991" target="_blank" rel="external">Python - lru_cacheå’Œsingledispatchè£…é¥°å™¨</a></li>
<li><a href="https://study.163.com/course/courseMain.htm?courseId=1209979905" target="_blank" rel="external">å¤§æ•°æ®å¼€å‘ç³»åˆ—ç›´æ’­è¯¾ â‘¢</a></li>
<li><a href="https://www.jianshu.com/p/f79838ddb534" target="_blank" rel="external">PySpark-æ•°æ®æ“ä½œ-DataFrame</a></li>
</ul>
<p><a href="https://www.youtube.com/watch?v=plLTqfBIlqg" target="_blank" rel="external">æ ªå¼ä¼šç¤¾XG JAPAN æ—¥æœ¬æŠ•èµ„ | è¿‡æ¥äººå‘Šè¯‰ä½ ï¼šæ—¥æœ¬åˆ›ä¸šç§»æ°‘çš„è´¹ç”¨å’Œå‘</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Tutorial 2 - æ‰§è¡Œè¿‡ç¨‹]]></title>
      <url>http://shopee.ai/2020/07/07/spark/spark-review-2-pyspark/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-2.1-logo.png" width="450" alt="Spark"></p>
<a id="more"></a>
<h2 id="1-Spark-æ‰§è¡Œè¿‡ç¨‹"><a href="#1-Spark-æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="1. Spark æ‰§è¡Œè¿‡ç¨‹"></a>1. Spark æ‰§è¡Œè¿‡ç¨‹</h2><p><img src="/images/spark/spark-2.2.png" width="700" alt="Spark Exec"></p>
<h2 id="2-pyspark-å°è¯•ç‰›åˆ€"><a href="#2-pyspark-å°è¯•ç‰›åˆ€" class="headerlink" title="2. pyspark å°è¯•ç‰›åˆ€"></a>2. pyspark å°è¯•ç‰›åˆ€</h2><p>è¦å¯¹è¿™äº›RDDè¿›è¡Œæ“ä½œï¼Œæœ‰ä¸¤ç§æ–¹æ³• :</p>
<ol>
<li>Transformation</li>
<li>Action</li>
</ol>
<p>Transformation - è¿™äº›æ“ä½œåº”ç”¨äºRDDä»¥åˆ›å»ºæ–°çš„RDDã€‚Filterï¼ŒgroupByå’Œmapæ˜¯è½¬æ¢çš„ç¤ºä¾‹ã€‚</p>
<p>Action - è¿™äº›æ˜¯åº”ç”¨äºRDDçš„æ“ä½œï¼Œå®ƒæŒ‡ç¤ºSparkæ‰§è¡Œè®¡ç®—å¹¶å°†ç»“æœå‘é€å›é©±åŠ¨ç¨‹åºã€‚</p>
<h3 id="2-1-count"><a href="#2-1-count" class="headerlink" title="2.1 count()"></a>2.1 count()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkContext</span><br><span class="line">sc = SparkContext(<span class="string">"local"</span>, <span class="string">"count app"</span>)</span><br><span class="line">words = sc.parallelize(</span><br><span class="line">    [<span class="string">"scala"</span>,</span><br><span class="line">     <span class="string">"java"</span>,</span><br><span class="line">     <span class="string">"hadoop"</span>,</span><br><span class="line">     <span class="string">"spark"</span>,</span><br><span class="line">     <span class="string">"akka"</span>,</span><br><span class="line">     <span class="string">"spark vs hadoop"</span>,</span><br><span class="line">     <span class="string">"pyspark"</span>,</span><br><span class="line">     <span class="string">"pyspark and spark"</span></span><br><span class="line">     ])</span><br><span class="line">counts = words.count()</span><br><span class="line">print(<span class="string">"Number of elements in RDD -&gt; %i"</span> % counts)</span><br></pre></td></tr></table></figure>
<h3 id="2-2-collect"><a href="#2-2-collect" class="headerlink" title="2.2 collect()"></a>2.2 collect()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkContext</span><br><span class="line">sc = SparkContext(<span class="string">"local"</span>, <span class="string">"collect app"</span>)</span><br><span class="line">words = sc.parallelize(</span><br><span class="line">    [<span class="string">"scala"</span>,</span><br><span class="line">     <span class="string">"java"</span>,</span><br><span class="line">     <span class="string">"hadoop"</span>,</span><br><span class="line">     <span class="string">"spark"</span>,</span><br><span class="line">     <span class="string">"akka"</span>,</span><br><span class="line">     <span class="string">"spark vs hadoop"</span>,</span><br><span class="line">     <span class="string">"pyspark"</span>,</span><br><span class="line">     <span class="string">"pyspark and spark"</span></span><br><span class="line">     ])</span><br><span class="line">coll = words.collect()</span><br><span class="line">print(<span class="string">"Elements in RDD -&gt; %s"</span> % coll)</span><br></pre></td></tr></table></figure>
<h2 id="3-Spark-æ‰§è¡Œå›¾"><a href="#3-Spark-æ‰§è¡Œå›¾" class="headerlink" title="3. Spark æ‰§è¡Œå›¾"></a>3. Spark æ‰§è¡Œå›¾</h2><p><img src="/images/spark/spark-2.3.jpg" width="600" alt="Spark Exec"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.jianshu.com/p/5a42fe0eed4d" target="_blank" rel="external">å¤§æ•°æ®å…¥é—¨ä¸å®æˆ˜-PySparkçš„ä½¿ç”¨æ•™ç¨‹</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/27643991" target="_blank" rel="external">Python - lru_cacheå’Œsingledispatchè£…é¥°å™¨</a></li>
<li><a href="https://study.163.com/course/courseMain.htm?courseId=1209979905" target="_blank" rel="external">å¤§æ•°æ®å¼€å‘ç³»åˆ—ç›´æ’­è¯¾ â‘¢</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Tutorial 1 - Introduce]]></title>
      <url>http://shopee.ai/2020/06/29/spark/spark-review-1-introduce/</url>
      <content type="html"><![CDATA[<p><img src="/images/spark/spark-1.1-logo.png" width="350" alt="Spark"></p>
<a id="more"></a>
<p>Spark å‘æºäºUniversity of California, Berkeley, AMPLap å¤§æ•°æ®åˆ†æå¹³å°<br>Spark ç«‹è¶³äºå†…å­˜è®¡ç®—ã€ä»å¤šè¿­ä»£æ‰¹é‡å¤„ç†å‡ºå‘<br>Spark å…¼é¡¾æ•°æ®ä»“åº“ã€æµå¤„ç†ã€å›¾è®¡ç®— ç­‰å¤šç§è®¡ç®—èŒƒå¼ï¼Œå¤§æ•°æ®ç³»ç»Ÿé¢†åŸŸå…¨æ ˆè®¡ç®—å¹³å°  </p>
<blockquote>
<ul>
<li><a href="http://spark.apache.org" target="_blank" rel="external">spark.apache.org</a></li>
</ul>
</blockquote>
<p><img src="/images/spark/spark-1.2.png" width="650" alt="localhost:8080"> </p>
<h2 id="1-Spark-çš„å†å²ä¸å‘å±•"><a href="#1-Spark-çš„å†å²ä¸å‘å±•" class="headerlink" title="1. Spark çš„å†å²ä¸å‘å±•"></a>1. Spark çš„å†å²ä¸å‘å±•</h2><ul>
<li>2009 : Spark è¯ç”Ÿäº AMPLab  </li>
<li>2014 : Spark 1.0 å‘å¸ƒ</li>
<li>2019 : Spark 3.0 å‘å¸ƒ</li>
</ul>
<h2 id="2-Spark-ä¹‹äº-Hadoop"><a href="#2-Spark-ä¹‹äº-Hadoop" class="headerlink" title="2. Spark ä¹‹äº Hadoop"></a>2. Spark ä¹‹äº Hadoop</h2><p> Spark æ˜¯ MapReduce çš„æ›¿ä»£æ–¹æ¡ˆ, ä¸”å…¼å®¹ HDFSã€Hive ç­‰åˆ†å¸ƒå¼å­˜å‚¨å±‚ã€‚</p>
<p> Spark ç›¸æ¯” Hadoop MapReduce çš„ä¼˜åŠ¿å¦‚ä¸‹ :</p>
<ol>
<li>ä¸­é—´ç»“æœè¾“å‡º</li>
<li>æ•°æ®æ ¼å¼å’Œå†…å­˜å¸ƒå±€</li>
<li>æ‰§è¡Œç­–ç•¥  </li>
<li>ä»»åŠ¡è°ƒåº¦çš„å¼€é”€</li>
</ol>
<blockquote>
<p>Sparkç”¨äº‹ä»¶é©±åŠ¨ç±»åº“AKKAæ¥å¯åŠ¨ä»»åŠ¡, é€šè¿‡çº¿ç¨‹æ± å¤ç”¨çº¿ç¨‹é¿å…è¿›çº¿ç¨‹å¯åŠ¨åˆ‡æ¢å¼€é”€</p>
</blockquote>
<h2 id="3-Spark-èƒ½å¸¦æ¥ä»€ä¹ˆ"><a href="#3-Spark-èƒ½å¸¦æ¥ä»€ä¹ˆ" class="headerlink" title="3. Spark èƒ½å¸¦æ¥ä»€ä¹ˆ ?"></a>3. Spark èƒ½å¸¦æ¥ä»€ä¹ˆ ?</h2><ol>
<li>æ‰“é€ å…¨æ ˆå¤šè®¡ç®—èŒƒå¼çš„é«˜æ•ˆæ•°æ®æµæ°´çº¿</li>
<li>è½»é‡çº§å¿«é€Ÿå¤„ç†, å¹¶æ”¯æŒ Scalaã€Pythonã€Java</li>
<li>ä¸ HDFS ç­‰ å­˜å‚¨å±‚ å…¼å®¹</li>
</ol>
<h2 id="4-Spark-å®‰è£…ä¸éƒ¨ç½²"><a href="#4-Spark-å®‰è£…ä¸éƒ¨ç½²" class="headerlink" title="4. Spark å®‰è£…ä¸éƒ¨ç½²"></a>4. Spark å®‰è£…ä¸éƒ¨ç½²</h2><p>Spark ä¸»è¦ä½¿ç”¨ HDFS å……å½“æŒä¹…åŒ–å±‚ï¼Œæ‰€ä»¥å®Œæ•´çš„å®‰è£… Spark éœ€è¦å…ˆå®‰è£… Hadoop.<br>Spark æ˜¯è®¡ç®—æ¡†æ¶, å®ƒä¸»è¦ä½¿ç”¨ HDFS å……å½“æŒä¹…åŒ–å±‚ã€‚</p>
<p><strong>Linux é›†ç¾¤å®‰è£… Spark</strong></p>
<ol>
<li>å®‰è£… JDK     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;(green download install)</li>
<li>é…ç½® SSH å…å¯†ç ç™»é™† (å¯é€‰)</li>
<li>å®‰è£… Hadoop  &nbsp;&nbsp;&nbsp;&nbsp; (brew install hadoop)</li>
<li>å®‰è£… Scala  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(brew install scala)</li>
<li>å®‰è£… Spark  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(green download install)</li>
<li>å¯åŠ¨ Spark é›†ç¾¤</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">MS=/usr/<span class="built_in">local</span>/xsoft</span><br><span class="line"></span><br><span class="line"><span class="comment">### JAVA ###</span></span><br><span class="line">JAVA_HOME=<span class="variable">$MS</span>/jdk/Contents/Home</span><br><span class="line">JAVA_BIN=<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/jre/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/jre/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME JAVA_BIN PATH CLASSPATH</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/<span class="built_in">local</span>/Cellar/hadoop/3.2.1_1</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/sbin:<span class="variable">$HADOOP_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> SCALA_HOME=/usr/<span class="built_in">local</span>/Cellar/scala/2.13.3</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$SCALA_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> SPARK_HOME=<span class="variable">$MS</span>/spark</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$SPARK_HOME</span>/bin</span><br></pre></td></tr></table></figure>
<p><a href="http://spark.apache.org/downloads.html" target="_blank" rel="external">Sparkå®˜ç½‘ä¸‹è½½</a></p>
<h3 id="4-1-å®‰è£…-Spark"><a href="#4-1-å®‰è£…-Spark" class="headerlink" title="4.1 å®‰è£… Spark"></a>4.1 å®‰è£… Spark</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(1). tar -xzvf spark-3.0.0-bin-hadoop2.7.tgz</span><br><span class="line"></span><br><span class="line">(2). <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/xsoft/spark-3.0.0-bin-hadoop3.2/</span><br><span class="line"></span><br><span class="line">(3). é…ç½® conf/spark-env.sh</span><br><span class="line">    1) è¯¦ç»†å¤æ‚å‚æ•°é…ç½®å‚è§ å®˜ç½‘ Configuration</span><br><span class="line">    2) vim conf/spark-env.sh</span><br><span class="line">    </span><br><span class="line">		<span class="comment">#!/usr/bin/env bash</span></span><br><span class="line">		</span><br><span class="line">		<span class="built_in">export</span> SCALA_HOME=/usr/<span class="built_in">local</span>/Cellar/scala/2.13.3</span><br><span class="line">		<span class="built_in">export</span> SPARK_HOME=/usr/<span class="built_in">local</span>/xsoft/spark</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">export</span> SPARK_MASTER_IP=localhost</span><br><span class="line">		<span class="built_in">export</span> MASTER=spark://localhost:7077</span><br><span class="line">		</span><br><span class="line">		<span class="comment">#export IPYTHON=1</span></span><br><span class="line">		<span class="built_in">export</span> PYSPARK_PYTHON=/Users/blair/.pyenv/versions/anaconda3/envs/spark/bin/python3</span><br><span class="line">		<span class="built_in">export</span> PYSPARK_DRIVER_PYTHON=<span class="string">"jupyter"</span></span><br><span class="line">		<span class="built_in">export</span> PYSPARK_DRIVER_PYTHON_OPTS=<span class="string">"notebook"</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">#export SPARK_WORKER_MEMORY=2g</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">#export SPARK_EXECUTOR_INSTANCES=2</span></span><br><span class="line">		<span class="comment">#export SPARK_EXECUTOR_CORES=1</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">#export SPARK_WORKER_MEMORY=2000m</span></span><br><span class="line">		<span class="comment">#export SPARK_EXECUTOR_MEMORY=500m</span></span><br><span class="line">		</span><br><span class="line">       <span class="comment">#export SPARK_LIBRARY_PATH=$&#123;SPARK_HOME&#125;/lib</span></span><br><span class="line"></span><br><span class="line">(4). é…ç½® conf/slaves (æµ‹è¯•å¯é€‰)</span><br><span class="line">(5). ä¸€èˆ¬éœ€è¦ startup ssh server.</span><br></pre></td></tr></table></figure>
<h3 id="4-2-å¯åŠ¨-Spark-é›†ç¾¤"><a href="#4-2-å¯åŠ¨-Spark-é›†ç¾¤" class="headerlink" title="4.2 å¯åŠ¨ Spark é›†ç¾¤"></a>4.2 å¯åŠ¨ Spark é›†ç¾¤</h3><p>åœ¨ Spark æ ¹ç›®å½•å¯åŠ¨ Spark</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./sbin/start-all.sh</span><br><span class="line">./sbin/stop-all.sh</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨å jps æŸ¥çœ‹ ä¼šæœ‰ Master è¿›ç¨‹å­˜åœ¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  spark  jps</span><br><span class="line">11262 Jps</span><br><span class="line">11101 Master</span><br><span class="line">11221 Worker</span><br></pre></td></tr></table></figure>
<h3 id="4-3-Spark-é›†ç¾¤åˆè¯•"><a href="#4-3-Spark-é›†ç¾¤åˆè¯•" class="headerlink" title="4.3 Spark é›†ç¾¤åˆè¯•"></a>4.3 Spark é›†ç¾¤åˆè¯•</h3><p>å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è¿è¡Œ Spark æ ·ä¾‹ :</p>
<ul>
<li>ä»¥ ./run-example çš„æ–¹å¼æ‰§è¡Œ</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/xsoft/spark</span><br><span class="line">âœ  spark ./sbin/start-all.sh</span><br><span class="line">âœ  spark ./bin/run-example org.apache.spark.examples.SparkPi</span><br></pre></td></tr></table></figure>
<ul>
<li>ä»¥ ./Spark Shell æ–¹å¼æ‰§è¡Œ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scala&gt; import org.apache.spark._</span><br><span class="line">import org.apache.spark._</span><br><span class="line"></span><br><span class="line">scala&gt; object SparkPi &#123;</span><br><span class="line">     |</span><br><span class="line">     |   def main(args: Array[String]) &#123;</span><br><span class="line">     |</span><br><span class="line">     |     val slices = 2</span><br><span class="line">     |     val n = 100000 * slices</span><br><span class="line">     |</span><br><span class="line">     |     val count = sc.parallelize(1 to n, slices).map &#123; i =&gt;</span><br><span class="line">     |</span><br><span class="line">     |       val x = math.random * 2 - 1</span><br><span class="line">     |       val y = math.random * 2 - 1</span><br><span class="line">     |</span><br><span class="line">     |       if (x * x + y * y &lt; 1) 1 else 0</span><br><span class="line">     |</span><br><span class="line">     |     &#125;.reduce(_ + _)</span><br><span class="line">     |</span><br><span class="line">     |     println(&quot;Pi is rounghly &quot; + 4.0 * count / n)</span><br><span class="line">     |</span><br><span class="line">     |   &#125;</span><br><span class="line">     | &#125;</span><br><span class="line">defined module SparkPi</span><br><span class="line">scala&gt;</span><br><span class="line"></span><br><span class="line">// Spark Shell å·²é»˜è®¤å°† SparkContext ç±»åˆå§‹åŒ–ä¸ºå¯¹è±¡ sc, ç”¨æˆ·ä»£ç å¯ç›´æ¥ä½¿ç”¨ã€‚</span><br><span class="line">// Spark è‡ªå¸¦çš„äº¤äº’å¼çš„ Shell ç¨‹åºï¼Œæ–¹ä¾¿è¿›è¡Œäº¤äº’å¼ç¼–ç¨‹ã€‚</span><br></pre></td></tr></table></figure>
<ul>
<li><p>é€šè¿‡ Web UI æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</p>
<pre><code>httpï¼š//masterIp:8080
</code></pre></li>
</ul>
<p><img src="/images/spark/spark-introduce-05.png" width="740" alt="http://localhost:8080/"></p>
<h3 id="4-4-Spark-quick-start"><a href="#4-4-Spark-quick-start" class="headerlink" title="4.4 Spark quick start"></a>4.4 Spark quick start</h3><p>quick-start : <a href="https://spark.apache.org/docs/latest/quick-start.html" target="_blank" rel="external">https://spark.apache.org/docs/latest/quick-start.html</a></p>
<p>./bin/spark-shell</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scala&gt; val textFile = sc.textFile(&quot;README.md&quot;)</span><br><span class="line"># val textFile = sc.textFile(&quot;file:///usr/local/xsoft/spark/README.md&quot;)</span><br><span class="line"></span><br><span class="line">textFile: spark.RDD[String] = spark.MappedRDD@2ee9b6e3</span><br><span class="line">RDDs have actions, which return values, and transformations, which return pointers to new RDDs. Letâ€™s start with a few actions:</span><br><span class="line"></span><br><span class="line">scala&gt; textFile.count() // Number of items in this RDD</span><br><span class="line">res0: Long = 126</span><br><span class="line"></span><br><span class="line">scala&gt; textFile.first() // First item in this RDD</span><br><span class="line">res1: String = # Apache Spark</span><br></pre></td></tr></table></figure>
<h2 id="5-Spark-ç”Ÿæ€-BDAS"><a href="#5-Spark-ç”Ÿæ€-BDAS" class="headerlink" title="5. Spark ç”Ÿæ€ BDAS"></a>5. Spark ç”Ÿæ€ BDAS</h2><ul>
<li>Spark æ¡†æ¶ã€æ¶æ„ã€è®¡ç®—æ¨¡å‹ã€æ•°æ®ç®¡ç†ç­–ç•¥</li>
<li>Spark BDAS é¡¹ç›®åŠå…¶å­é¡¹ç›®è¿›è¡Œäº†ç®€è¦ä»‹ç»</li>
<li>Spark ç”Ÿæ€ç³»ç»ŸåŒ…å«çš„å¤šä¸ªå­é¡¹ç›® : SparkSqlã€Spark Streamingã€GraphXã€MLlib</li>
</ul>
<p><img src="/images/spark/spark-introduce-01.png" alt="Spark EcoSystem = BDAS = ä¼¯å…‹åˆ©æ•°æ®åˆ†ææ ˆ"></p>
<ul>
<li>Spark æ˜¯ BDAS æ ¸å¿ƒ, æ˜¯ä¸€ å¤§æ•°æ®åˆ†å¸ƒå¼ç¼–ç¨‹æ¡†æ¶</li>
</ul>
<h2 id="6-Spark-æ¶æ„"><a href="#6-Spark-æ¶æ„" class="headerlink" title="6. Spark æ¶æ„"></a>6. Spark æ¶æ„</h2><ul>
<li>Spark çš„ä»£ç ç»“æ„</li>
<li>Spark çš„æ¶æ„</li>
<li>Spark è¿è¡Œé€»è¾‘</li>
</ul>
<h3 id="6-1-Spark-çš„ä»£ç ç»“æ„"><a href="#6-1-Spark-çš„ä»£ç ç»“æ„" class="headerlink" title="6.1 Spark çš„ä»£ç ç»“æ„"></a>6.1 Spark çš„ä»£ç ç»“æ„</h3><p><img src="/images/spark/spark-introduce-02.jpeg" alt="spark code"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">schedulerï¼šæ–‡ä»¶å¤¹ä¸­å«æœ‰è´Ÿè´£æ•´ä½“çš„Sparkåº”ç”¨ã€ä»»åŠ¡è°ƒåº¦çš„ä»£ç ã€‚</span><br><span class="line">broadcastï¼šå«æœ‰Broadcastï¼ˆå¹¿æ’­å˜é‡ï¼‰çš„å®ç°ä»£ç ï¼ŒAPIä¸­æ˜¯Javaå’ŒPython APIçš„å®ç°ã€‚</span><br><span class="line"></span><br><span class="line">deployï¼šå«æœ‰Sparkéƒ¨ç½²ä¸å¯åŠ¨è¿è¡Œçš„ä»£ç ã€‚</span><br><span class="line">commonï¼šä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè€Œæ˜¯ä»£è¡¨Sparké€šç”¨çš„ç±»å’Œé€»è¾‘å®ç°ï¼Œæœ‰5000è¡Œä»£ç ã€‚</span><br><span class="line"></span><br><span class="line">metricsï¼šæ˜¯è¿è¡Œæ—¶çŠ¶æ€ç›‘æ§é€»è¾‘ä»£ç ï¼ŒExecutorä¸­å«æœ‰WorkerèŠ‚ç‚¹è´Ÿè´£è®¡ç®—çš„é€»è¾‘ä»£ç ã€‚</span><br><span class="line">partialï¼šå«æœ‰è¿‘ä¼¼è¯„ä¼°ä»£ç ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="6-2-Spark-çš„æ¶æ„"><a href="#6-2-Spark-çš„æ¶æ„" class="headerlink" title="6.2 Spark çš„æ¶æ„"></a>6.2 Spark çš„æ¶æ„</h3><p>Sparkæ¶æ„é‡‡ç”¨äº†åˆ†å¸ƒå¼è®¡ç®—ä¸­çš„Master-Slaveæ¨¡å‹ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">Role</th>
<th style="text-align:center">description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Master</td>
<td style="text-align:center">å¯¹åº”é›†ç¾¤ä¸­çš„å«æœ‰Masterè¿›ç¨‹çš„èŠ‚ç‚¹, é›†ç¾¤çš„æ§åˆ¶å™¨</td>
</tr>
<tr>
<td style="text-align:center">Slave</td>
<td style="text-align:center">é›†ç¾¤ä¸­å«æœ‰Workerè¿›ç¨‹çš„èŠ‚ç‚¹</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Client</td>
<td style="text-align:center">ä½œä¸ºç”¨æˆ·çš„å®¢æˆ·ç«¯è´Ÿè´£æäº¤åº”ç”¨</td>
</tr>
<tr>
<td style="text-align:center">Driver</td>
<td style="text-align:center">è¿è¡ŒApplicationçš„main()å‡½æ•°å¹¶åˆ›å»ºSparkContextã€‚è´Ÿè´£ä½œä¸šçš„è°ƒåº¦ï¼Œå³Taskä»»åŠ¡çš„åˆ†å‘</td>
</tr>
<tr>
<td style="text-align:center">Worker</td>
<td style="text-align:center">ç®¡ç†è®¡ç®—èŠ‚ç‚¹å’Œåˆ›å»ºExecutorï¼Œå¯åŠ¨Executor æˆ– Driver. æ¥æ”¶ä¸»èŠ‚ç‚¹å‘½ä»¤ä¸è¿›è¡ŒçŠ¶æ€æ±‡æŠ¥</td>
</tr>
<tr>
<td style="text-align:center">Executor</td>
<td style="text-align:center">Worker nodeæ‰§è¡Œä»»åŠ¡çš„ç»„ä»¶,è´Ÿè´£ Task çš„æ‰§è¡Œ,ç”¨äºå¯åŠ¨çº¿ç¨‹æ± è¿è¡Œä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">ClusterManager</td>
<td style="text-align:center">Standalone æ¨¡å¼ä¸­ä¸º Master, æ§åˆ¶æ•´ä¸ªé›†ç¾¤, ç›‘æ§Worker</td>
</tr>
<tr>
<td style="text-align:center">SparkContext</td>
<td style="text-align:center">æ•´ä¸ªåº”ç”¨çš„ä¸Šä¸‹æ–‡, æ§åˆ¶Appçš„ç”Ÿå‘½å‘¨æœŸ</td>
</tr>
<tr>
<td style="text-align:center">RDD</td>
<td style="text-align:center">Sparkçš„åŸºæœ¬è®¡ç®—å•å…ƒï¼Œä¸€ç»„RDDå¯å½¢æˆæ‰§è¡Œçš„ DAG</td>
</tr>
</tbody>
</table>
<p><img src="/images/spark/spark-introduce-03.jpeg" alt="spark"></p>
<table>
<thead>
<tr>
<th style="text-align:center">Num</th>
<th style="text-align:center">Spark App æµç¨‹ </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1.</td>
<td style="text-align:center">Client æäº¤åº”ç”¨</td>
</tr>
<tr>
<td style="text-align:center">2.</td>
<td style="text-align:center">Master æ‰¾åˆ°ä¸€ä¸ª Worker å¯åŠ¨ Driver</td>
</tr>
<tr>
<td style="text-align:center">3.</td>
<td style="text-align:center">Driver å‘ Master æˆ–è€… èµ„æºç®¡ç†å™¨ç”³è¯·èµ„æºï¼Œä¹‹åå°†åº”ç”¨è½¬åŒ–ä¸º RDD Graph </td>
</tr>
<tr>
<td style="text-align:center">4.</td>
<td style="text-align:center">DAGScheduler å°† RDD Graph è½¬åŒ–ä¸º Stageçš„æœ‰å‘æ— ç¯å›¾ æäº¤ç»™ TaskScheduler</td>
</tr>
<tr>
<td style="text-align:center">5.</td>
<td style="text-align:center">TaskScheduler æäº¤ task ç»™Executoræ‰§è¡Œ</td>
</tr>
<tr>
<td style="text-align:center">6.</td>
<td style="text-align:center">åœ¨ä»»åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä»–ç»„ä»¶ååŒå·¥ä½œï¼Œç¡®ä¿æ•´ä¸ªåº”ç”¨é¡ºåˆ©æ‰§è¡Œ </td>
</tr>
</tbody>
</table>
<blockquote>
<p>åœ¨æ‰§è¡Œé˜¶æ®µï¼ŒDriver ä¼šå°† Task å’Œ Taskæ‰€ä¾èµ–çš„file å’Œ jar åºåˆ—åŒ–åä¼ é€’ç»™å¯¹åº”çš„ Workeræœºå™¨ï¼ŒåŒæ—¶ Executorå¯¹ç›¸åº”æ•°æ®åˆ†åŒºçš„ä»»åŠ¡è¿›è¡Œå¤„ç†ã€‚</p>
</blockquote>
<h2 id="7-å°ç»“"><a href="#7-å°ç»“" class="headerlink" title="7. å°ç»“"></a>7. å°ç»“</h2><p>ç”±äº Spark ä¸»è¦ä½¿ç”¨ HDFS å……å½“æŒä¹…åŒ–å±‚ï¼Œæ‰€ä»¥å®Œæ•´çš„ä½¿ç”¨ Spark éœ€è¦é¢„å…ˆå®‰è£… Hadoop.</p>
<p>Spark å°†åˆ†å¸ƒå¼çš„å†…å­˜æ•°æ®æŠ½è±¡ä¸ºå¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›† (RDD), å¹¶åœ¨å…¶ä¸Šå®ç°äº†ä¸°å¯Œçš„ç®—å­ï¼Œä»è€Œå¯¹ RDD è¿›è¡Œè®¡ç®—ï¼Œæœ€åå°† ç®—å­åºåˆ— è½¬åŒ–ä¸º DAG è¿›è¡Œæ‰§è¡Œå’Œè°ƒåº¦ã€‚</p>
<blockquote>
<p>Sparkçš„Python APIå‡ ä¹è¦†ç›–äº†æ‰€æœ‰Scala APIæ‰€èƒ½æä¾›çš„åŠŸèƒ½. ä½†çš„ç¡®æœ‰äº›ç‰¹æ€§ï¼Œæ¯”å¦‚Spark Streamingå’Œä¸ªåˆ«çš„APIæ–¹æ³•ï¼Œæš‚ä¸æ”¯æŒã€‚<br><a href="http://spark.apache.org/docs/latest/programming-guide.html" target="_blank" rel="external">å…·ä½“å‚è§ã€ŠSparkç¼–ç¨‹æŒ‡å—ã€‹çš„Pythonéƒ¨åˆ†</a></p>
</blockquote>
<p>ä½“ä¼šäº† å‡½æ•°å¼ ç¼–ç¨‹. ä¸ªäººè®¤ä¸º scalaã€python æ¯”è¾ƒé€‚åˆå†™ spark ç¨‹åº.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/Crazy_SunShine/article/details/103042708" target="_blank" rel="external">Macä¸Šå®‰è£…Spark3.0.0ä»¥åŠHadoop</a></li>
<li><a href="https://www.jianshu.com/p/5a42fe0eed4d" target="_blank" rel="external">å¤§æ•°æ®å…¥é—¨ä¸å®æˆ˜-PySparkçš„ä½¿ç”¨æ•™ç¨‹</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Data WareHouse Questions]]></title>
      <url>http://shopee.ai/2020/06/10/dataware/interview-questions/</url>
      <content type="html"><![CDATA[<!--<img src="/images/dataware/dataware-1.png" width="550" alt="Tech Stack" />

<img src="/images/dataware/dataware-2.jpg" width="550" alt="Tech Stack" />
-->
<p><img src="/images/dataware/data-warehousing-questions-logo.jpg" width="500" alt="data warehousing questions logo"></p>
<a id="more"></a>
<h2 id="1-ä»€ä¹ˆå«æ•°æ®ä»“åº“ï¼Ÿ"><a href="#1-ä»€ä¹ˆå«æ•°æ®ä»“åº“ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆå«æ•°æ®ä»“åº“ï¼Ÿ"></a>1. ä»€ä¹ˆå«æ•°æ®ä»“åº“ï¼Ÿ</h2><p> æ•°æ®ä»“åº“æ˜¯ä¸€ä¸ªé¢å‘ä¸»é¢˜çš„ï¼ˆSubject Orientedï¼‰ã€é›†æˆçš„ï¼ˆIntegrateï¼‰ã€ç›¸å¯¹ç¨³å®šçš„ï¼ˆNon-Volatileï¼‰ã€åæ˜ å†å²å˜åŒ–ï¼ˆTime Variantï¼‰çš„æ•°æ®é›†åˆï¼Œå®ƒç”¨äºæ”¯æŒä¼ä¸šæˆ–ç»„ç»‡çš„å†³ç­–åˆ†æå¤„ç†ã€‚</p>
<p>æ•°æ®ä»“åº“æ˜¯ä¸ºäº†ä¾¿äºå¤šç»´åˆ†æå’Œå¤šè§’åº¦å±•ç°è€Œå°†æ•°æ®æŒ‰ç‰¹å®šçš„æ¨¡å¼è¿›è¡Œå­˜å‚¨æ‰€å»ºç«‹èµ·æ¥çš„å…³ç³»å‹æ•°æ®åº“ï¼Œå®ƒçš„æ•°æ®åŸºäºOLTPæºç³»ç»Ÿã€‚</p>
<p> é¦–å…ˆï¼Œç”¨äºæ”¯æŒå†³ç­–ï¼Œé¢å‘åˆ†æå‹æ•°æ®å¤„ç†ï¼Œå®ƒä¸åŒäºä¼ä¸šç°æœ‰çš„æ“ä½œå‹æ•°æ®åº“ï¼›</p>
<p> å…¶æ¬¡ï¼Œå¯¹å¤šä¸ªå¼‚æ„çš„æ•°æ®æºæœ‰æ•ˆé›†æˆï¼Œé›†æˆåæŒ‰ç…§ä¸»é¢˜è¿›è¡Œäº†é‡ç»„ï¼Œå¹¶åŒ…å«å†å²æ•°æ®ï¼Œè€Œä¸”å­˜æ”¾åœ¨æ•°æ®ä»“åº“ä¸­çš„æ•°æ®ä¸€èˆ¬ä¸å†ä¿®æ”¹</p>
<h3 id="1-1-ç»´åº¦çš„åŸºæœ¬æ¦‚å¿µ"><a href="#1-1-ç»´åº¦çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.1 ç»´åº¦çš„åŸºæœ¬æ¦‚å¿µ"></a>1.1 ç»´åº¦çš„åŸºæœ¬æ¦‚å¿µ</h3><p>ä»£ç†é”®, è‡ªç„¶é”®</p>
<h3 id="1-2-ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•"><a href="#1-2-ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•" class="headerlink" title="1.2 ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•"></a>1.2 ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•</h3><p>æ•°æ®ä»“åº“çš„èƒ½åŠ›ç›´æ¥ä¸ç»´åº¦å±æ€§ çš„è´¨é‡å’Œæ·±åº¦æˆæ­£æ¯”ã€‚</p>
<p>æ·˜å®çš„å•†å“ç»´åº¦:</p>
<blockquote>
<ol>
<li>é€‰æ‹©ç»´åº¦æˆ–æ–°å»ºç»´åº¦ã€‚DataWare å¿…é¡»ä¿è¯ç»´åº¦çš„å”¯ä¸€æ€§ã€‚</li>
<li>ç¬¬äºŒæ­¥:ç¡®å®šä¸»ç»´è¡¨ã€‚æ­¤å¤„çš„ä¸»ç»´è¡¨ä¸€èˆ¬æ˜¯ ODS è¡¨ï¼Œç›´æ¥ä¸ä¸šåŠ¡ ç³»ç»ŸåŒæ­¥ã€‚</li>
<li>ç¡®å®šç›¸å…³ç»´è¡¨ã€‚æ•°æ®ä»“åº“æ˜¯ä¸šåŠ¡æºç³»ç»Ÿçš„æ•°æ®æ•´åˆï¼Œä¸åŒ</li>
<li>ç¡®å®šç»´åº¦å±æ€§</li>
</ol>
</blockquote>
<p>ä¸šåŠ¡ç³»ç»Ÿæˆ–è€…åŒ ä¸€ä¸šåŠ¡ç³»ç»Ÿä¸­çš„è¡¨ä¹‹é—´å­˜åœ¨ å…³è”æ€§ã€‚</p>
<p>ä»¥æ·˜å®å•†å“ç»´åº¦ä¸ºä¾‹ï¼Œæ ¹æ®å¯¹ä¸šåŠ¡é€»è¾‘çš„æ¢³ç†ï¼Œå¯ä»¥å¾—åˆ°å•†å“ä¸ç±»ç›®ã€ SPUã€ å–å®¶ã€åº—é“ºç­‰ç»´åº¦å­˜åœ¨å…³è”å…³ç³»ã€‚</p>
<h3 id="1-3-ç»´åº¦çš„å±‚æ¬¡ç»“æ„"><a href="#1-3-ç»´åº¦çš„å±‚æ¬¡ç»“æ„" class="headerlink" title="1.3 ç»´åº¦çš„å±‚æ¬¡ç»“æ„"></a>1.3 ç»´åº¦çš„å±‚æ¬¡ç»“æ„</h3><h3 id="1-4-è§„èŒƒåŒ–å’Œåè§„èŒƒåŒ–"><a href="#1-4-è§„èŒƒåŒ–å’Œåè§„èŒƒåŒ–" class="headerlink" title="1.4 è§„èŒƒåŒ–å’Œåè§„èŒƒåŒ–"></a>1.4 è§„èŒƒåŒ–å’Œåè§„èŒƒåŒ–</h3><h3 id="1-5-ä¸€è‡´æ€§ç»´åº¦å’Œäº¤å‰æ¢æŸ¥"><a href="#1-5-ä¸€è‡´æ€§ç»´åº¦å’Œäº¤å‰æ¢æŸ¥" class="headerlink" title="1.5 ä¸€è‡´æ€§ç»´åº¦å’Œäº¤å‰æ¢æŸ¥"></a>1.5 ä¸€è‡´æ€§ç»´åº¦å’Œäº¤å‰æ¢æŸ¥</h3><p>æ•°æ®ä»“åº“æ€»çº¿æ¶æ„çš„é‡è¦åŸºçŸ³ä¹‹ä¸€å°±æ˜¯ä¸€è‡´æ€§ç»´åº¦ã€‚</p>
<p>åœ¨é’ˆå¯¹ä¸åŒæ•° æ®åŸŸè¿›è¡Œè¿­ä»£æ„å»ºæˆ–å¹¶è¡Œæ„å»ºæ—¶ï¼Œå­˜åœ¨å¾ˆå¤šéœ€æ±‚æ˜¯å¯¹äºä¸åŒæ•°æ®åŸŸçš„ä¸š åŠ¡è¿‡ç¨‹æˆ–è€…åŒ ä¸€æ•°æ®åŸŸçš„ä¸åŒä¸šåŠ¡è¿‡ç¨‹åˆå¹¶åœ¨ ä¸€èµ·è§‚å¯Ÿã€‚</p>
<blockquote>
<ul>
<li><p>æ—¥å¿—æ•°æ®åŸŸï¼Œç»Ÿè®¡äº†å•†å“ç»´åº¦çš„æœ€è¿‘ä¸€å¤©çš„ PV å’Œ UV; </p>
</li>
<li><p>äº¤æ˜“æ•°æ®åŸŸï¼Œ ç»Ÿè®¡äº† å•†å“ç»´åº¦çš„æœ€è¿‘ä¸€å¤© çš„ä¸‹å• GMVã€‚</p>
</li>
</ul>
</blockquote>
<p>æ€»ç»“ç»´åº¦ä¸€è‡´æ€§çš„å‡ ç§ è¡¨ç°å½¢å¼:</p>
<blockquote>
<ul>
<li>å…±äº«ç»´è¡¨  (å…¬å…±ç»´åº¦)</li>
<li>ä¸€è‡´æ€§ä¸Šå·  (1 dim æ˜¯å¦ä¸€dim å­é›†)</li>
<li>äº¤å‰å±æ€§  ï¼ˆéƒ¨åˆ†ç›¸åŒç»´åº¦ï¼‰</li>
</ul>
</blockquote>
<h2 id="2-ç»´åº¦è®¾è®¡é«˜çº§ä¸»é¢˜"><a href="#2-ç»´åº¦è®¾è®¡é«˜çº§ä¸»é¢˜" class="headerlink" title="2. ç»´åº¦è®¾è®¡é«˜çº§ä¸»é¢˜"></a>2. ç»´åº¦è®¾è®¡é«˜çº§ä¸»é¢˜</h2><h3 id="2-1-ç»´åº¦æ•´åˆ"><a href="#2-1-ç»´åº¦æ•´åˆ" class="headerlink" title="2.1 ç»´åº¦æ•´åˆ"></a>2.1 ç»´åº¦æ•´åˆ</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹æ•°æ®ä»“åº“çš„å®šä¹‰:</p>
<blockquote>
<p>æ•°æ®ä»“åº“æ˜¯ä¸€ä¸ªé¢å‘ä¸»é¢˜çš„ã€<code>é›†æˆçš„</code>ã€ éæ˜“å¤±çš„ä¸”éšæ—¶é—´å˜åŒ–çš„æ•°æ®é›†åˆï¼Œç”¨æ¥æ”¯æŒç®¡ç†äººå‘˜çš„å†³ç­–ã€‚</p>
<p>æ•°æ®ä»“åº“çš„é‡è¦æ•°æ®æ¥æºæ˜¯ <code>å¤§é‡çš„ã€åˆ†æ•£çš„</code> é¢å‘åº”ç”¨çš„æ“ä½œå‹ç¯å¢ƒã€‚</p>
</blockquote>
<p><strong>åº”ç”¨ -&gt; ä¸»é¢˜ ï¼ˆæ•°æ®é›†æˆï¼‰</strong></p>
<blockquote>
<p>æ‰€ä»¥æ•°æ®ç”±é¢å‘åº”ç”¨çš„æ“ä½œå‹ç¯å¢ƒè¿›äººæ•°æ®ä»“åº“åï¼Œéœ€è¦è¿›è¡Œæ•°æ®é›†æˆã€‚</p>
<p>å°†é¢å‘åº”ç”¨çš„æ•°æ®è½¬æ¢ä¸ºé¢å‘ä¸»é¢˜çš„æ•°æ®ä»“åº“æ•°æ®ï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§é›†æˆã€‚</p>
</blockquote>
<!--### 2.2 æ°´å¹³æ‹†åˆ†

### 2.2 å‚ç›´æ‹†åˆ†

### 2.3 å†å²å½’æ¡£

## 3. ç»´åº¦å˜åŒ–

### 3.1 ç¼“æ…¢å˜åŒ–ç»´

### 3.2 å¿«ç…§ç»´è¡¨

### 3.3 æé™å­˜å‚¨

### 3.4 å¾®å‹ç»´åº¦

## 4. ç‰¹æ®Šç»´åº¦

### 4.1 é€’å½’å±‚æ¬¡

### 4.2 è¡Œä¸ºç»´åº¦
-->
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.shangyexinzhi.com/article/157255.html" target="_blank" rel="external">å¤§æ•°æ® | å¤§ç¥æ•™å­¦ï¼Œ10åˆ†é’Ÿå­¦ä¼šæ•°æ®ä»“åº“å»ºè®¾ï¼</a></li>
<li><a href="https://blog.csdn.net/u013412535/article/details/45439929" target="_blank" rel="external">æ•°æ®ä»“åº“èµ„æ–™</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[DataWare ç»´åº¦è®¾è®¡]]></title>
      <url>http://shopee.ai/2020/06/09/dataware/dataware-dim-design/</url>
      <content type="html"><![CDATA[<!--<img src="/images/dataware/dataware-1.png" width="550" alt="Tech Stack" />

<img src="/images/dataware/dataware-2.jpg" width="550" alt="Tech Stack" />
-->
<p><img src="/images/dataware/dataware-4.jpeg" width="550" alt="Tech Stack"></p>
<a id="more"></a>
<h2 id="1-ç»´åº¦è®¾è®¡åŸºç¡€"><a href="#1-ç»´åº¦è®¾è®¡åŸºç¡€" class="headerlink" title="1. ç»´åº¦è®¾è®¡åŸºç¡€"></a>1. ç»´åº¦è®¾è®¡åŸºç¡€</h2><p>ç»´åº¦å»ºæ¨¡ç”¨åˆ°çš„11å¤§ä¸“ä¸šæœ¯è¯­ï¼š</p>
<p>æ•°æ®åŸŸã€ä¸šåŠ¡è¿‡ç¨‹ã€æ—¶é—´å‘¨æœŸã€ä¿®é¥°ç±»å‹ã€ä¿®é¥°è¯ã€åº¦é‡/åŸå­æŒ‡æ ‡ã€ç»´åº¦ã€ç»´åº¦å±æ€§ã€ äº‹å®ã€æ´¾ç”ŸæŒ‡æ ‡ã€é’»å–ã€‚</p>
<h3 id="1-1-ç»´åº¦çš„åŸºæœ¬æ¦‚å¿µ"><a href="#1-1-ç»´åº¦çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.1 ç»´åº¦çš„åŸºæœ¬æ¦‚å¿µ"></a>1.1 ç»´åº¦çš„åŸºæœ¬æ¦‚å¿µ</h3><p>ä»£ç†é”®, è‡ªç„¶é”®</p>
<h3 id="1-2-ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•"><a href="#1-2-ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•" class="headerlink" title="1.2 ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•"></a>1.2 ç»´åº¦çš„åŸºæœ¬è®¾è®¡æ–¹æ³•</h3><p>æ•°æ®ä»“åº“çš„èƒ½åŠ›ç›´æ¥ä¸ç»´åº¦å±æ€§ çš„è´¨é‡å’Œæ·±åº¦æˆæ­£æ¯”ã€‚</p>
<p>æ·˜å®çš„å•†å“ç»´åº¦:</p>
<blockquote>
<ol>
<li>é€‰æ‹©ç»´åº¦æˆ–æ–°å»ºç»´åº¦ã€‚DataWare å¿…é¡»ä¿è¯ç»´åº¦çš„å”¯ä¸€æ€§ã€‚</li>
<li>ç¬¬äºŒæ­¥:ç¡®å®šä¸»ç»´è¡¨ã€‚æ­¤å¤„çš„ä¸»ç»´è¡¨ä¸€èˆ¬æ˜¯ ODS è¡¨ï¼Œç›´æ¥ä¸ä¸šåŠ¡ ç³»ç»ŸåŒæ­¥ã€‚</li>
<li>ç¡®å®šç›¸å…³ç»´è¡¨ã€‚æ•°æ®ä»“åº“æ˜¯ä¸šåŠ¡æºç³»ç»Ÿçš„æ•°æ®æ•´åˆï¼Œä¸åŒ</li>
<li>ç¡®å®šç»´åº¦å±æ€§</li>
</ol>
</blockquote>
<p>ä¸šåŠ¡ç³»ç»Ÿæˆ–è€…åŒ ä¸€ä¸šåŠ¡ç³»ç»Ÿä¸­çš„è¡¨ä¹‹é—´å­˜åœ¨ å…³è”æ€§ã€‚</p>
<p>ä»¥æ·˜å®å•†å“ç»´åº¦ä¸ºä¾‹ï¼Œæ ¹æ®å¯¹ä¸šåŠ¡é€»è¾‘çš„æ¢³ç†ï¼Œå¯ä»¥å¾—åˆ°å•†å“ä¸ç±»ç›®ã€ SPUã€ å–å®¶ã€åº—é“ºç­‰ç»´åº¦å­˜åœ¨å…³è”å…³ç³»ã€‚</p>
<h3 id="1-3-ç»´åº¦çš„å±‚æ¬¡ç»“æ„"><a href="#1-3-ç»´åº¦çš„å±‚æ¬¡ç»“æ„" class="headerlink" title="1.3 ç»´åº¦çš„å±‚æ¬¡ç»“æ„"></a>1.3 ç»´åº¦çš„å±‚æ¬¡ç»“æ„</h3><h3 id="1-4-è§„èŒƒåŒ–å’Œåè§„èŒƒåŒ–"><a href="#1-4-è§„èŒƒåŒ–å’Œåè§„èŒƒåŒ–" class="headerlink" title="1.4 è§„èŒƒåŒ–å’Œåè§„èŒƒåŒ–"></a>1.4 è§„èŒƒåŒ–å’Œåè§„èŒƒåŒ–</h3><h3 id="1-5-ä¸€è‡´æ€§ç»´åº¦å’Œäº¤å‰æ¢æŸ¥"><a href="#1-5-ä¸€è‡´æ€§ç»´åº¦å’Œäº¤å‰æ¢æŸ¥" class="headerlink" title="1.5 ä¸€è‡´æ€§ç»´åº¦å’Œäº¤å‰æ¢æŸ¥"></a>1.5 ä¸€è‡´æ€§ç»´åº¦å’Œäº¤å‰æ¢æŸ¥</h3><p>æ•°æ®ä»“åº“æ€»çº¿æ¶æ„çš„é‡è¦åŸºçŸ³ä¹‹ä¸€å°±æ˜¯ä¸€è‡´æ€§ç»´åº¦ã€‚</p>
<p>åœ¨é’ˆå¯¹ä¸åŒæ•° æ®åŸŸè¿›è¡Œè¿­ä»£æ„å»ºæˆ–å¹¶è¡Œæ„å»ºæ—¶ï¼Œå­˜åœ¨å¾ˆå¤šéœ€æ±‚æ˜¯å¯¹äºä¸åŒæ•°æ®åŸŸçš„ä¸š åŠ¡è¿‡ç¨‹æˆ–è€…åŒ ä¸€æ•°æ®åŸŸçš„ä¸åŒä¸šåŠ¡è¿‡ç¨‹åˆå¹¶åœ¨ ä¸€èµ·è§‚å¯Ÿã€‚</p>
<blockquote>
<ul>
<li><p>æ—¥å¿—æ•°æ®åŸŸï¼Œç»Ÿè®¡äº†å•†å“ç»´åº¦çš„æœ€è¿‘ä¸€å¤©çš„ PV å’Œ UV; </p>
</li>
<li><p>äº¤æ˜“æ•°æ®åŸŸï¼Œ ç»Ÿè®¡äº† å•†å“ç»´åº¦çš„æœ€è¿‘ä¸€å¤© çš„ä¸‹å• GMVã€‚</p>
</li>
</ul>
</blockquote>
<p>æ€»ç»“ç»´åº¦ä¸€è‡´æ€§çš„å‡ ç§ è¡¨ç°å½¢å¼:</p>
<blockquote>
<ul>
<li>å…±äº«ç»´è¡¨  (å…¬å…±ç»´åº¦)</li>
<li>ä¸€è‡´æ€§ä¸Šå·  (1 dim æ˜¯å¦ä¸€dim å­é›†)</li>
<li>äº¤å‰å±æ€§  ï¼ˆéƒ¨åˆ†ç›¸åŒç»´åº¦ï¼‰</li>
</ul>
</blockquote>
<h2 id="2-ç»´åº¦è®¾è®¡é«˜çº§ä¸»é¢˜"><a href="#2-ç»´åº¦è®¾è®¡é«˜çº§ä¸»é¢˜" class="headerlink" title="2. ç»´åº¦è®¾è®¡é«˜çº§ä¸»é¢˜"></a>2. ç»´åº¦è®¾è®¡é«˜çº§ä¸»é¢˜</h2><h3 id="2-1-ç»´åº¦æ•´åˆ"><a href="#2-1-ç»´åº¦æ•´åˆ" class="headerlink" title="2.1 ç»´åº¦æ•´åˆ"></a>2.1 ç»´åº¦æ•´åˆ</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹æ•°æ®ä»“åº“çš„å®šä¹‰:</p>
<blockquote>
<p>æ•°æ®ä»“åº“æ˜¯ä¸€ä¸ªé¢å‘ä¸»é¢˜çš„ã€<code>é›†æˆçš„</code>ã€ éæ˜“å¤±çš„ä¸”éšæ—¶é—´å˜åŒ–çš„æ•°æ®é›†åˆï¼Œç”¨æ¥æ”¯æŒç®¡ç†äººå‘˜çš„å†³ç­–ã€‚</p>
<p>æ•°æ®ä»“åº“çš„é‡è¦æ•°æ®æ¥æºæ˜¯ <code>å¤§é‡çš„ã€åˆ†æ•£çš„</code> é¢å‘åº”ç”¨çš„æ“ä½œå‹ç¯å¢ƒã€‚</p>
</blockquote>
<p><strong>åº”ç”¨ -&gt; ä¸»é¢˜ ï¼ˆæ•°æ®é›†æˆï¼‰</strong></p>
<blockquote>
<p>æ‰€ä»¥æ•°æ®ç”±é¢å‘åº”ç”¨çš„æ“ä½œå‹ç¯å¢ƒè¿›äººæ•°æ®ä»“åº“åï¼Œéœ€è¦è¿›è¡Œæ•°æ®é›†æˆã€‚</p>
<p>å°†é¢å‘åº”ç”¨çš„æ•°æ®è½¬æ¢ä¸ºé¢å‘ä¸»é¢˜çš„æ•°æ®ä»“åº“æ•°æ®ï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§é›†æˆã€‚</p>
</blockquote>
<!--### 2.2 æ°´å¹³æ‹†åˆ†

### 2.2 å‚ç›´æ‹†åˆ†

### 2.3 å†å²å½’æ¡£

## 3. ç»´åº¦å˜åŒ–

### 3.1 ç¼“æ…¢å˜åŒ–ç»´

### 3.2 å¿«ç…§ç»´è¡¨

### 3.3 æé™å­˜å‚¨

### 3.4 å¾®å‹ç»´åº¦

## 4. ç‰¹æ®Šç»´åº¦

### 4.1 é€’å½’å±‚æ¬¡

### 4.2 è¡Œä¸ºç»´åº¦-->
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.shangyexinzhi.com/article/157255.html" target="_blank" rel="external">å¤§æ•°æ® | å¤§ç¥æ•™å­¦ï¼Œ10åˆ†é’Ÿå­¦ä¼šæ•°æ®ä»“åº“å»ºè®¾ï¼</a></li>
<li><a href="https://blog.csdn.net/u013412535/article/details/45439929" target="_blank" rel="external">æ•°æ®ä»“åº“èµ„æ–™</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JVM è¿è¡Œæ—¶]]></title>
      <url>http://shopee.ai/2020/05/30/java/java-jvm-p1/</url>
      <content type="html"><![CDATA[<p><img src="/images/java/Java-Virtual-Machine-1-logo.png" width="550" alt=""></p>
<a id="more"></a>
<h2 id="1-JVM-çš„ç»„ç»‡ç»“æ„"><a href="#1-JVM-çš„ç»„ç»‡ç»“æ„" class="headerlink" title="1. JVM çš„ç»„ç»‡ç»“æ„"></a>1. JVM çš„ç»„ç»‡ç»“æ„</h2><p><img src="/images/java/JVM-1.jpg" width="680" alt=""></p>
<p>jvm çš„ä¸‰ä¸ªæ ¸å¿ƒï¼š</p>
<ol>
<li>jvm ç±»åŠ è½½æœºåˆ¶</li>
<li>jvm è¿è¡Œæ—¶æ•°æ®åŒº</li>
<li>jvm åƒåœ¾å›æ”¶</li>
</ol>
<h2 id="2-JVM-å„åŒºåŸŸä½œç”¨"><a href="#2-JVM-å„åŒºåŸŸä½œç”¨" class="headerlink" title="2. JVM å„åŒºåŸŸä½œç”¨"></a>2. JVM å„åŒºåŸŸä½œç”¨</h2><ol>
<li>heap</li>
<li>Method Area</li>
<li>Program Counter Register</li>
<li>JVM Stacks</li>
<li>Native Method Stacks</li>
<li>å¼‚å¸¸æ€»ç»“</li>
</ol>
<h2 id="3-JVM-åƒåœ¾å›æ”¶"><a href="#3-JVM-åƒåœ¾å›æ”¶" class="headerlink" title="3. JVM åƒåœ¾å›æ”¶"></a>3. JVM åƒåœ¾å›æ”¶</h2><ol>
<li>æ¦‚è¿°</li>
<li>Garbage Collector</li>
</ol>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/130945995" target="_blank" rel="external">JVMå†…å­˜ç»“æ„</a></li>
<li><a href="https://www.cnblogs.com/nizuimeiabc1/p/4254116.html" target="_blank" rel="external">JVMç‰©ç†ç»“æ„å’Œåœ¨å†…å­˜ä¸­çš„ç»„ç»‡ç»“æ„</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/121744378" target="_blank" rel="external">æ·±å…¥ç†è§£JVM-å†…å­˜æ¨¡å‹ï¼ˆjmmï¼‰å’ŒGC</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ä» Transformer åˆ° BERTæ¨¡å‹ (by è‘›ç¿°éª‹ Amazon)]]></title>
      <url>http://shopee.ai/2020/04/05/nlp/BERT_tutorial_5_Summary/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/bert5/bert5-2.png" width="400" alt="BERT tutorial"></p>
<a id="more"></a>
<p><strong>Paper</strong>: <a href="https://arxiv.org/abs/1810.04805" target="_blank" rel="external">BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding</a></p>
<p>BERTçš„å…¨ç§°æ˜¯: Bidirectional Encoder Representation from Transformers</p>
<h2 id="1-Transformer-to-BERT"><a href="#1-Transformer-to-BERT" class="headerlink" title="1. Transformer to BERT"></a>1. Transformer to BERT</h2><p><img src="/images/nlp/bert5/Transformer-to-Bert-1.png" width="650" alt="BERT tutorial"></p>
<h3 id="1-1-ELMO"><a href="#1-1-ELMO" class="headerlink" title="1.1 ELMO"></a>1.1 ELMO</h3><p>ELMO å…¨ç§°ï¼š Embeddings from Language Models</p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-2.png" width="650" alt="BERT tutorial"></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-3.png" width="650" alt="BERT tutorial"></p>
<h3 id="1-2-Transformer"><a href="#1-2-Transformer" class="headerlink" title="1.2 Transformer"></a>1.2 Transformer</h3><p><img src="/images/nlp/bert5/Transformer-to-Bert-6.png" width="650" alt="BERT tutorial"></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-7.png" width="650" alt="BERT tutorial"></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-8.png" width="650" alt="BERT tutorial"></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-9.png" width="500" alt="BERT tutorial"></p>
<h3 id="1-3-Bert"><a href="#1-3-Bert" class="headerlink" title="1.3 Bert"></a>1.3 Bert</h3><p><img src="/images/nlp/bert5/Transformer-to-Bert-10.png" width="750" alt="BERT tutorial"></p>
<hr>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-11.png" width="750" alt="BERT tutorial"></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-12.png" width="750" alt="BERT tutorial"></p>
<p>E_A ä»£è¡¨è¿™ä¸ª Token å±äº SentenceA è¿˜æ˜¯ Sentence B</p>
<h3 id="1-4-Pre-training-Bert"><a href="#1-4-Pre-training-Bert" class="headerlink" title="1.4 Pre-training Bert"></a>1.4 Pre-training Bert</h3><p><img src="/images/nlp/bert5/Transformer-to-Bert-13.png" width="700" alt="BERT tutorial"></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-14.png" width="700" alt="BERT tutorial"></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-15.png" width="700" alt="BERT tutorial"></p>
<p><br></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-16.png" width="600" alt="BERT tutorial"></p>
<p><br></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-17.png" width="800" alt="BERT tutorial"></p>
<!--
<img src="/images/nlp/bert5/Transformer-to-Bert-18.png" width="700" alt="BERT tutorial" />

<img src="/images/nlp/bert5/Transformer-to-Bert-19.png" width="700" alt="BERT tutorial" />
-->
<p>ä¸ºä»€ä¹ˆç”¨2ä¸ª Sentences</p>
<p>è®¡ç®— Loss æ—¶ï¼Œåªé’ˆå¯¹è¢« Mask çš„ Token</p>
<p>Training Tips</p>
<p>1). å¢åŠ ä¸åŒ Token è¢« Mask çš„æœºä¼š<br>3). ä¸è¡¨ç¤ºåœ¨ Word Level åš Mask</p>
<p>Looks Likeï¼š</p>
<p>Bert æ¯ä¸ª Head èƒ½æŠ“ä½ä¸åŒçš„ Feature</p>
<p>å¯¹äºæ¯ä¸ªå±‚ï¼Œhead çš„åŠŸèƒ½å·®ä¸å¤šï¼Œå¯¹äºæ¯ä¸ª Head é‡Œé¢ï¼Œæ¯ä¸ªä¸åŒçš„ head è¡¨ç°çš„åŠŸèƒ½æ˜¯ä¸ä¸€æ ·çš„</p>
<h2 id="2-Transformer-to-BERT"><a href="#2-Transformer-to-BERT" class="headerlink" title="2. Transformer to BERT"></a>2. Transformer to BERT</h2><!--
<img src="/images/nlp/bert5/Transformer-to-Bert-20.png" width="700" alt="BERT tutorial" />-->
<p><img src="/images/nlp/bert5/Transformer-to-Bert-21.png" width="660" alt="BERT tutorial"></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-22.png" width="660" alt="BERT tutorial"></p>
<p><img src="/images/nlp/bert5/Transformer-to-Bert-23.png" width="660" alt="BERT tutorial"></p>
<p>é˜…è¯»ç†è§£æ˜¯QAåŠ éš¾çš„ç‰ˆæœ¬</p>
<h2 id="3-Recap"><a href="#3-Recap" class="headerlink" title="3. Recap"></a>3. Recap</h2><p><img src="/images/nlp/bert5/bert5-3.png" width="650" alt="BERT tutorial"></p>
<blockquote>
<p>æ¯ä¸ªwordéƒ½æ˜¯è¿™å¥è¯çš„æ‰€æœ‰ä¿¡æ¯ç»„æˆçš„</p>
<p>Bert Training 40+ times, Fine-tune 2~4 times</p>
<p>every token: 12 * 768ï¼Œ 12 å±‚çš„ Transformer.</p>
<p>Bert ä¸»è¦çš„ç¼ºé™·å°±æ˜¯å¤ªå¤§äº†. </p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://mp.weixin.qq.com/s/H4at_BDLwZWqlBHLjMZWRQ" target="_blank" rel="external">ä¸€æ­¥æ­¥ç†è§£BERT</a></li>
<li><a href="ä»è¯­è¨€æ¨¡å‹åˆ°Seq2Seqï¼šTransformerå¦‚æˆï¼Œå…¨é Mask">ä»è¯­è¨€æ¨¡å‹åˆ°Seq2Seqï¼šTransformerå¦‚æˆï¼Œå…¨é Mask</a></li>
<li><a href="https://terrifyzhao.github.io/2019/01/17/BERTå®Œå…¨æŒ‡å—.html" target="_blank" rel="external">BERTå®Œå…¨æŒ‡å—</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/67444533" target="_blank" rel="external">å¯è§†åŒ–Bert</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SBERT-WK-Sentence-Embedding]]></title>
      <url>http://shopee.ai/2020/03/18/nlp/SBERT-WK-Sentence-Embedding/</url>
      <content type="html"><![CDATA[<p>SBERT-WK: A Sentence Embedding Method by Dissecting BERT-based Word Models</p>
<p>è¦ç‚¹ï¼šä¸€ç§æ–°çš„å¥å­åµŒå…¥æ–¹æ³•</p>
<a id="more"></a>
<ul>
<li>é“¾æ¥ï¼š<a href="https://arxiv.org/abs/2002.06652" target="_blank" rel="external">https://arxiv.org/abs/2002.06652</a></li>
<li>codeï¼š<a href="https://github.com/BinWang28/SBERT-WK-Sentence-Embedding" target="_blank" rel="external">Github SBERT-WK-Sentence-Embedding</a></li>
<li>ä½œè€…ï¼šBin Wang, C.-C. Jay Kuo</li>
<li>å•ä½ï¼šUniversity of Southern California</li>
<li>ä¸»é¢˜ï¼šComputation and Language (cs.CL); Machine Learning (cs.LG); Multimedia (cs.MM)</li>
</ul>
<p>è¦ç‚¹ï¼šä¸€ç§æ–°çš„å¥å­åµŒå…¥æ–¹æ³•</p>
<p>æ‘˜è¦ï¼šå¥å­åµŒå…¥æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰çš„é‡è¦ç ”ç©¶ä¸»é¢˜ï¼Œå› ä¸ºå®ƒå¯ä»¥å°†çŸ¥è¯†è½¬ç§»åˆ°ä¸‹æ¸¸ä»»åŠ¡ã€‚åŒæ—¶ï¼Œç§°ä¸ºBERTçš„ä¸Šä¸‹æ–‡åŒ–è¯è¡¨ç¤ºåœ¨è®¸å¤šNLPä»»åŠ¡ä¸­éƒ½å®ç°äº†æœ€æ–°çš„æ€§èƒ½ã€‚ç„¶è€Œï¼Œä»åŸºäºBERTçš„å•è¯æ¨¡å‹ç”Ÿæˆé«˜è´¨é‡çš„å¥å­è¡¨ç¤ºæ˜¯ä¸€ä¸ªå¼€æ”¾çš„é—®é¢˜ã€‚å…ˆå‰çš„ç ”ç©¶è¡¨æ˜ï¼ŒBERTçš„ä¸åŒå±‚æ•è·äº†ä¸åŒçš„è¯­è¨€å±æ€§ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿè·¨å±‚èåˆä¿¡æ¯ä»¥æ‰¾åˆ°æ›´å¥½çš„å¥å­è¡¨ç¤ºå½¢å¼ã€‚åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†æ·±åº¦ä¸Šä¸‹æ–‡æ¨¡å‹çš„å•è¯è¡¨ç¤ºçš„åˆ†å±‚æ¨¡å¼ã€‚ç„¶åï¼Œé€šè¿‡å¯¹è¯è¡¨ç¤ºæ‰€è·¨è¶Šç©ºé—´çš„å‡ ä½•åˆ†æï¼Œå¯¹åŸºäºBERTçš„è¯æ¨¡å‹è¿›è¡Œè§£å‰–ï¼Œæå‡ºäº†ä¸€ç§æ–°çš„å¥å­åµŒå…¥æ–¹æ³•ã€‚è¿™ç§°ä¸ºSBERT-WKæ–¹æ³•ã€‚ SBERT-WKä¸éœ€è¦è¿›ä¸€æ­¥çš„è®­ç»ƒã€‚æˆ‘ä»¬è¯„ä¼°SBERT-WKåœ¨è¯­ä¹‰æ–‡æœ¬ç›¸ä¼¼æ€§å’Œä¸‹æ¸¸ç›‘ç£ä»»åŠ¡ä¸Šçš„ä½œç”¨ã€‚æ­¤å¤–ï¼Œæå‡ºäº†åä¸ªå¥å­çº§çš„æ¢æŸ¥ä»»åŠ¡ï¼Œä»¥è¿›è¡Œè¯¦ç»†çš„è¯­è¨€åˆ†æã€‚å®éªŒè¡¨æ˜ï¼ŒSBERT-WKå…·æœ‰æœ€å…ˆè¿›çš„æ€§èƒ½ã€‚æˆ‘ä»¬çš„ä»£ç æ˜¯å…¬å¼€å¯ç”¨çš„ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[çº¿æ€§ä»£æ•°çš„æœ¬è´¨ - ç³»åˆ—åˆé›†]]></title>
      <url>http://shopee.ai/2020/03/11/nlp/PCA-Matrix/</url>
      <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/av6731067/?p=14" target="_blank" rel="external">ã€å®˜æ–¹åŒè¯­/åˆé›†ã€‘çº¿æ€§ä»£æ•°çš„æœ¬è´¨ - ç³»åˆ—åˆé›†</a></p>
<a id="more"></a>
<h2 id="01-å‘é‡ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#01-å‘é‡ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="01. å‘é‡ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ"></a>01. å‘é‡ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</h2><h2 id="02-çº¿æ€§ç»„åˆã€å¼ æˆçš„ç©ºé—´ä¸åŸºç­‰çº¿æ€§ä»£æ•°åŸºç¡€æ¦‚å¿µ"><a href="#02-çº¿æ€§ç»„åˆã€å¼ æˆçš„ç©ºé—´ä¸åŸºç­‰çº¿æ€§ä»£æ•°åŸºç¡€æ¦‚å¿µ" class="headerlink" title="02. çº¿æ€§ç»„åˆã€å¼ æˆçš„ç©ºé—´ä¸åŸºç­‰çº¿æ€§ä»£æ•°åŸºç¡€æ¦‚å¿µ"></a>02. çº¿æ€§ç»„åˆã€å¼ æˆçš„ç©ºé—´ä¸åŸºç­‰çº¿æ€§ä»£æ•°åŸºç¡€æ¦‚å¿µ</h2><h2 id="03-Matrics-as-linear-transformations-çŸ©é˜µä¸çº¿æ€§å˜æ¢"><a href="#03-Matrics-as-linear-transformations-çŸ©é˜µä¸çº¿æ€§å˜æ¢" class="headerlink" title="03. Matrics as linear transformations çŸ©é˜µä¸çº¿æ€§å˜æ¢"></a>03. Matrics as linear transformations çŸ©é˜µä¸çº¿æ€§å˜æ¢</h2><p>çŸ©é˜µä¹˜æ³•çš„æ„ä¹‰å°±æ˜¯ç‰¹å®šçš„å‘é‡è½¬æ¢ (ä¸åŒåæ ‡ç³»çš„å‘é‡è½¬æ¢)</p>
<p><img src="/images/nlp/matrix/liner-03-1.png" width="550" alt="Are you ready?"></p>
<h2 id="04-Matrix-multiplication-as-composition"><a href="#04-Matrix-multiplication-as-composition" class="headerlink" title="04. Matrix multiplication as composition"></a>04. Matrix multiplication as composition</h2><h2 id="09-åŸºå˜æ¢"><a href="#09-åŸºå˜æ¢" class="headerlink" title="09. åŸºå˜æ¢"></a>09. åŸºå˜æ¢</h2><!--<img src="/images/nlp/matrix/matrix-0.png" width="600" alt="Are you ready?"/>
-->
<p><img src="/images/nlp/matrix/matrix-1.png" width="550" alt="Are you ready?"></p>
<p>Jenniferâ€™s åæ ‡ç³»çš„åŸºå‘é‡ï¼Œæ˜¯å¦å¤–çš„æ ·å­. (åœ¨æˆ‘ä»¬çš„åæ ‡ç³»ä¸­çš„è¡¨ç¤º)</p>
<p><img src="/images/nlp/matrix/av6731067-1.png" width="550" alt="Are you ready?"></p>
<p>çŸ©é˜µä¹˜æ³•çš„æ„ä¹‰å°±æ˜¯ç‰¹å®šçš„å‘é‡è½¬æ¢ (ä¸åŒåæ ‡ç³»çš„å‘é‡è½¬æ¢)</p>
<p><img src="/images/nlp/matrix/av6731067-2.png" width="550" alt="Are you ready?"></p>
<p>Jenniferâ€™s åæ ‡ç³»çš„ vector ä¸ æˆ‘ä»¬åæ ‡ç³»çš„ vector çš„äº’ç›¸è½¬æ¢ï¼š</p>
<p><img src="/images/nlp/matrix/av6731067-3.png" width="550" alt="Are you ready?"></p>
<p><img src="/images/nlp/matrix/av6731067-4.png" width="550" alt="Are you ready?"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/u012162613/article/details/42214205" target="_blank" rel="external">ã€ç®€åŒ–æ•°æ®ã€‘å¥‡å¼‚å€¼åˆ†è§£(SVD)</a></li>
<li><a href="http://www.heibanke.com/2016/04/08/svd_demo/" target="_blank" rel="external">çº¿æ€§ä»£æ•°çš„â€åŸºâ€æƒ…</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/69651700" target="_blank" rel="external">A1.1:å¥‡å¼‚å€¼åˆ†è§£åˆ°åº•åˆ†è§£äº†å•¥ï¼ˆSVD</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[XLNETï¼š Generalized Autoregressive Pretraining for Language]]></title>
      <url>http://shopee.ai/2020/02/26/nlp/BERT_tutorial_5_post3/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/bert5/XLNET-logo.jpg" width="550" alt="UniLM"></p>
<a id="more"></a>
<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><ul>
<li>Organizationï¼šGoogle Brainã€CMU</li>
<li>Timeï¼š19 Jun. 2019</li>
<li>Authorï¼šZhilin Yang, Zihang Dai, Yiming Yangâ€¦</li>
<li>Paperï¼š<a href="https://arxiv.org/abs/1906.08237" target="_blank" rel="external">https://arxiv.org/abs/1906.08237</a></li>
<li>Githubï¼š<a href="https://github.com/zihangdai/xlnet" target="_blank" rel="external">https://github.com/zihangdai/xlnet</a></li>
</ul>
<p><strong>XLNet</strong> å¸¦ç€å¼€æºçš„ä»£ç å’Œ 20 é¡¹ SOTA çš„æˆç»©å‘å¸ƒäº†ã€‚ä» BERT åˆ° XLNetâ€¦</p>
<p><strong>XLNet</strong> è¯ç”Ÿä¹‹è·¯ä¸Šæœ€é‡è¦çš„ä¸‰ç¯‡è®ºæ–‡ï¼š</p>
<blockquote>
<ul>
<li>Attention Is All You Need (12 Jun. 2017)</li>
<li>Transformer-XL: Attentive Language Models Beyond a Fixed-Length Context (9 Jan. 2019)</li>
<li>XLNet: Generalized <code>Autoregressive</code> Pretraining for Language Understanding (19 Jun. 2019)</li>
</ul>
</blockquote>
<h2 id="1-Table-of-Contents"><a href="#1-Table-of-Contents" class="headerlink" title="1. Table of Contents"></a>1. Table of Contents</h2><ul>
<li>Unsupervised Pre-training</li>
<li><strong>Autogressive vs Auto-encoding</strong></li>
<li>Permutation Language Model (PLM)</li>
<li>Two-stream Self Attention</li>
<li>Results</li>
</ul>
<blockquote>
<p>Bert çš„ç›®æ ‡å‡½æ•°æ¥è‡ª Auto-encodingï¼Œ Bert ä¸¥æ ¼æ¥è¯´æ˜¯ DAE.</p>
<p>ELMO ä¸¥æ ¼æ¥è¯´æ— æ³•è§£å†³åŒå‘çš„é—®é¢˜. Permutation Language Model, ä½†æ˜¯æƒ³å°† PLM ç›´æ¥ç”¨åœ¨ Transformer ä¸Šï¼Œä½†æ˜¯è¾¾ä¸åˆ°æˆ‘ä»¬çš„è¦æ±‚. ä¸­é—´å‘ç”Ÿå¾ˆå¤šå°é—®é¢˜ï¼Œæ‰€ä»¥å‡ºç° Two Stream Self Attention. </p>
<p>Transformer-XL é•¿æ–‡æœ¬ï¼Œæœ¬è®²ä¸æ¶‰åŠ. å¾ˆåºå¤§çš„è¯é¢˜.</p>
</blockquote>
<h3 id="1-1-Pre-training"><a href="#1-1-Pre-training" class="headerlink" title="1.1 Pre-training"></a>1.1 Pre-training</h3><blockquote>
<p>Pre-training æ˜¯è¿ç§»å­¦ä¹ ä¸­å¾ˆé‡è¦çš„ä¸€é¡¹æŠ€æœ¯ã€‚åœ¨NLPä¸­ä¸»è¦ä»¥è¯å‘é‡ä¸ºä¸»ã€‚</p>
<p>å•è¯æˆ‘ä»¬ä¸€èˆ¬ç”¨ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥è¡¨ç¤ºï¼š</p>
<ul>
<li><strong>one-hot encoding</strong></li>
<li><strong>åˆ†å¸ƒå¼è¡¨ç¤º</strong>ï¼ˆé€šå¸¸ä¹Ÿå«ä½œè¯å‘é‡/Word2Vecï¼‰</li>
</ul>
<p>ç”±äºå•è¯æ˜¯æ‰€æœ‰æ–‡æœ¬çš„åŸºç¡€ï¼Œæ‰€ä»¥å¦‚ä½•å»æ›´å¥½åœ°è¡¨ç¤ºå•è¯å˜å¾—å°¤å…¶é‡è¦.</p>
<p>é‚£å¦‚ä½•å»ç†è§£é¢„è®­ç»ƒå‘¢ï¼Ÿ ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬ç”¨BERTè®­ç»ƒäº†ä¸€å¥—æ¨¡å‹ï¼Œè€Œä¸”å·²ç»å¾—åˆ°äº†æ¯ä¸ªå•è¯çš„è¯å‘é‡ï¼Œ é‚£è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠè¿™äº›è¯å‘é‡ç”¨åœ¨æˆ‘ä»¬è‡ªå·±çš„ä»»åŠ¡ä¸Šï¼Œä¸ç”¨è‡ªå·±é‡æ–°è®­ç»ƒï¼Œè¿™å°±ç±»ä¼¼äºè¿ç§»å­¦ä¹ çš„æ¦‚å¿µã€‚</p>
<p>é¢„è®­ç»ƒåœ¨é€šå¸¸æƒ…å†µä¸‹æ—¢å¯ä»¥æå‡è®­ç»ƒæ•ˆç‡ä¹Ÿå¯ä»¥æé«˜æ¨¡å‹æ•ˆæœ.</p>
</blockquote>
<h3 id="1-2-è¯å‘é‡æŠ€æœ¯"><a href="#1-2-è¯å‘é‡æŠ€æœ¯" class="headerlink" title="1.2 è¯å‘é‡æŠ€æœ¯"></a>1.2 è¯å‘é‡æŠ€æœ¯</h3><blockquote>
<p>é€šè¿‡è¯å‘é‡æŠ€æœ¯æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªå•è¯è¡¨ç¤ºä¸ºå‘é‡çš„å½¢å¼ï¼Œç„¶åæ¥ç€åº”ç”¨åœ¨åç»­çš„æ¨¡å‹å½“ä¸­ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¯å‘é‡è¡¨ç¤ºçš„æ˜¯å•è¯çš„è¯­ä¹‰ï¼ˆsemantic)ã€‚ æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä¸åŒçš„ç±»åˆ«åŒºåˆ†è¯å‘é‡æŠ€æœ¯ã€‚</p>
<p>å¸¸ç”¨çš„è¯å‘é‡æ¨¡å‹æ¯”å¦‚ï¼š</p>
<ul>
<li>SkipGram, CBOW, Glove æ˜¯ä¸è€ƒè™‘ä¸Šä¸‹æ–‡çš„ï¼Œ1ä¸ªå•è¯æœ‰ä¸ªï¼ˆFixedï¼‰çš„å‘é‡ï¼Œä¸ä¾èµ–ä¸Šä¸‹æ–‡æ”¹å˜è€Œæ”¹å˜.</li>
</ul>
<p>ä½†æ˜¯ â€œI back my carâ€å’Œ â€œI hurt my backâ€é‡Œï¼Œå•è¯â€backâ€åœ¨ä¸åŒçš„è¯­å¢ƒä¸‹çš„å«ä¹‰æ˜¯ä¸ä¸€æ ·çš„ ã€‚</p>
<p>è¿‘2ï¼Œ3å¹´å¾ˆå¤šå·¥ä½œçš„é‡ç‚¹æ”¾åœ¨äº†å­¦ä¹ è€ƒè™‘ä¸Šä¸‹æ–‡çš„è¯å‘é‡ã€‚åœ¨è¿™ä¸ªé¢†åŸŸäº§ç”Ÿäº†è¯¸å¤šå¾ˆæœ‰çªç ´æ€§çš„è¿›å±•ï¼Œä»<br><strong>ELMoã€ BERTã€XLNetã€ ALBERT</strong>ï¼Œæ— ä¸€ä¸æ˜¯ä»¥è¿™ä¸ªä¸ºé‡ç‚¹ã€‚åˆ©ç”¨è¿™äº›æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€åœ°å»å­¦å‡ºä¸€ä¸ªå•è¯åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¹‹é—´çš„è¯å‘é‡ã€‚å½“ç„¶ï¼Œè¿™äº›å‘é‡åœ¨ä¸åŒçš„è¯­å¢ƒä¸‹çš„è¡¨ç¤ºè‚¯å®šæ˜¯ä¸ä¸€æ ·çš„</p>
</blockquote>
<h2 id="2-Unsupervised-Learning"><a href="#2-Unsupervised-Learning" class="headerlink" title="2. Unsupervised Learning"></a>2. Unsupervised Learning</h2><p><img src="/images/nlp/bert5/XLNET-1.png" width="650" alt="Unsupervised Learning"></p>
<h3 id="2-1-Unsupervised-Pre-Training"><a href="#2-1-Unsupervised-Pre-Training" class="headerlink" title="2.1 Unsupervised Pre-Training"></a>2.1 Unsupervised Pre-Training</h3><!--<img src="/images/nlp/bert5/XLNET-2.png" width="750" alt="Unsupervised Learning" />-->
<p><img src="/images/nlp/bert5/XLNET-3.png" width="750" alt="Unsupervised Learning"></p>
<h3 id="2-2-Pre-Training-for-NLP"><a href="#2-2-Pre-Training-for-NLP" class="headerlink" title="2.2 Pre-Training for NLP"></a>2.2 Pre-Training for NLP</h3><table>
<thead>
<tr>
<th style="text-align:center"><strong>Non-contextualized techniques</strong></th>
<th style="text-align:center"><strong>Contextualized techniques</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SkipGram</td>
<td style="text-align:center">ELMo</td>
</tr>
<tr>
<td style="text-align:center">CBOW</td>
<td style="text-align:center">BERT</td>
</tr>
<tr>
<td style="text-align:center">Glove</td>
<td style="text-align:center">XLNET</td>
</tr>
<tr>
<td style="text-align:center">..</td>
<td style="text-align:center">ALBERT</td>
</tr>
</tbody>
</table>
<h2 id="3-Autogressive-vs-Auto-encoding"><a href="#3-Autogressive-vs-Auto-encoding" class="headerlink" title="3. Autogressive vs Auto-encoding"></a>3. Autogressive vs Auto-encoding</h2><blockquote>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/34201555" target="_blank" rel="external">æ·±åº¦å­¦ä¹ åŸºç¡€ï¼šAutoencoders</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/70257427" target="_blank" rel="external">å¼ ä¿Šæ—: XLNet:è¿è¡Œæœºåˆ¶åŠå’ŒBertçš„å¼‚åŒæ¯”è¾ƒ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/95594311" target="_blank" rel="external">å…³äºBERTçš„è‹¥å¹²é—®é¢˜æ•´ç†è®°å½•</a></li>
</ul>
</blockquote>
<p><strong>BERT Masked LM</strong></p>
<blockquote>
<p>BERT æ¨¡å‹çš„è¿™ä¸ªé¢„è®­ç»ƒè¿‡ç¨‹å…¶å®å°±æ˜¯åœ¨æ¨¡ä»¿æˆ‘ä»¬å­¦è¯­è¨€çš„è¿‡ç¨‹ï¼Œæ€æƒ³æ¥æºäºå®Œå½¢å¡«ç©ºçš„ä»»åŠ¡ã€‚å…·ä½“æ¥è¯´ï¼Œæ–‡ç« ä½œè€…åœ¨ä¸€å¥è¯ä¸­éšæœºé€‰æ‹© 15% çš„è¯æ±‡ç”¨äºé¢„æµ‹ã€‚å¯¹äºåœ¨åŸå¥ä¸­è¢«æŠ¹å»çš„è¯æ±‡ï¼Œ 80% æƒ…å†µä¸‹é‡‡ç”¨ä¸€ä¸ªç‰¹æ®Šç¬¦å· [MASK] æ›¿æ¢ï¼Œ 10% æƒ…å†µä¸‹é‡‡ç”¨ä¸€ä¸ªä»»æ„è¯æ›¿æ¢ï¼Œå‰©ä½™ 10% æƒ…å†µä¸‹ä¿æŒåŸè¯æ±‡ä¸å˜ã€‚è¿™ä¹ˆåšçš„ä¸»è¦åŸå› æ˜¯ï¼šåœ¨åç»­å¾®è°ƒä»»åŠ¡ä¸­è¯­å¥ä¸­å¹¶ä¸ä¼šå‡ºç° [MASK] æ ‡è®°ï¼Œè€Œä¸”è¿™ä¹ˆåšçš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼šé¢„æµ‹ä¸€ä¸ªè¯æ±‡æ—¶ï¼Œæ¨¡å‹å¹¶ä¸çŸ¥é“è¾“å…¥å¯¹åº”ä½ç½®çš„è¯æ±‡æ˜¯å¦ä¸ºæ­£ç¡®çš„è¯æ±‡ï¼ˆ 10% æ¦‚ç‡ï¼‰ï¼Œè¿™å°±è¿«ä½¿æ¨¡å‹æ›´å¤šåœ°ä¾èµ–äºä¸Šä¸‹æ–‡ä¿¡æ¯å»é¢„æµ‹è¯æ±‡ï¼Œå¹¶ä¸”èµ‹äºˆäº†æ¨¡å‹ä¸€å®šçš„çº é”™èƒ½åŠ›ã€‚ä¸Šè¿°æåˆ°äº†è¿™æ ·åšçš„ä¸€ä¸ªç¼ºç‚¹ï¼Œå…¶å®è¿™æ ·åšè¿˜æœ‰å¦å¤–ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯æ¯æ‰¹æ¬¡æ•°æ®ä¸­åªæœ‰ 15% çš„æ ‡è®°è¢«é¢„æµ‹ï¼Œè¿™æ„å‘³ç€æ¨¡å‹å¯èƒ½éœ€è¦æ›´å¤šçš„é¢„è®­ç»ƒæ­¥éª¤æ¥æ”¶æ•›ã€‚</p>
</blockquote>
<p><strong>BERTæœ‰ä»€ä¹ˆå±€é™æ€§ï¼Ÿ</strong></p>
<p><img src="/images/nlp/bert5/XLNET-DAE.png" width="780" alt="Unsupervised Learning"></p>
<p><strong>Autogressive vs Auto-encodingï¼š</strong></p>
<p><img src="/images/nlp/bert5/XLNET-AG-AE.jpg" width="780" alt="Unsupervised Learning"></p>
<h3 id="3-1-Autogressive"><a href="#3-1-Autogressive" class="headerlink" title="3.1 Autogressive"></a>3.1 Autogressive</h3><p>æœ€å¤§çš„é—®é¢˜æ˜¯ï¼Œä¸èƒ½åŒæ—¶è€ƒè™‘2è¾¹</p>
<p>New York is a City è€ƒè™‘äº†è¢«é¢„æµ‹å•è¯ä¹‹é—´çš„ç›¸å…³æ€§, ä»æ¦‚ç‡æ¥è®²æ˜¯éå¸¸å®Œå¤‡çš„</p>
<h3 id="3-2-Auto-encoding"><a href="#3-2-Auto-encoding" class="headerlink" title="3.2 Auto-encoding"></a>3.2 Auto-encoding</h3><p>New York is a City</p>
<blockquote>
<p>ä½ é¢„æµ‹ä½ çš„ï¼Œæˆ‘é¢„æµ‹æˆ‘çš„ï¼Œè¿™ä¸ªé—®é¢˜å¾ˆä¸¥é‡.</p>
<p>æ¯”å¦‚â€New York is a cityâ€ï¼Œå‡è®¾æˆ‘ä»¬Maskä½â€Newâ€å’Œâ€Yorkâ€ä¸¤ä¸ªè¯ï¼Œé‚£ä¹ˆç»™å®šâ€is a cityâ€çš„æ¡ä»¶ä¸‹â€Newâ€å’Œâ€Yorkâ€å¹¶ä¸ç‹¬ç«‹ï¼Œå› ä¸ºâ€New Yorkâ€æ˜¯ä¸€ä¸ªå®ä½“ï¼Œçœ‹åˆ°â€Newâ€åˆ™åé¢å‡ºç°â€Yorkâ€çš„æ¦‚ç‡è¦æ¯”çœ‹åˆ°â€Oldâ€åé¢å‡ºç°â€Yorkâ€æ¦‚ç‡è¦å¤§å¾—å¤šã€‚</p>
</blockquote>
<p>è¾“å…¥ï¼š</p>
<blockquote>
<p>Log Angeles is s city<br>New York is a city</p>
</blockquote>
<p>è®­ç»ƒæ—¶å€™</p>
<p>[Mask][Mask] is a city.<br>[Mask][Mask] is a city.</p>
<p>è®­ç»ƒæ—¶å€™æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥å¯èƒ½é¢„æµ‹å‡ºï¼š</p>
<blockquote>
<p>New Angeles is a city.</p>
<p>å› ä¸ºæˆ‘ä»¬åœ¨ç›®æ ‡å‡½æ•°ä¸­ï¼Œæ²¡æœ‰å°†å•è¯å…³ç³»åˆ—å‡ºæ¥</p>
</blockquote>
<ol>
<li>Independent Assmption</li>
<li>Training å’Œ Testing</li>
</ol>
<blockquote>
<p>[Mask] token åªå­˜åœ¨äº pre-train è¿‡ç¨‹, çœŸæ­£ä½¿ç”¨æ—¶å€™æ²¡æœ‰ [Mask]</p>
<p>fine-tune å’Œ test æ—¶å€™éƒ½æ²¡æœ‰ [Mask]</p>
</blockquote>
<p>ä¼˜ç‚¹å’Œç¼ºç‚¹æ•´åˆå‡ºä¸€ä¸ªæ–°çš„model: XLNET</p>
<h2 id="XLNET"><a href="#XLNET" class="headerlink" title="XLNET"></a>XLNET</h2><p><strong>AR</strong>: <span style="background-color: rgb(255, 102, 0);">Aotoregressive Lanuage Modeling</span></p>
<blockquote>
<p>å®ƒæŒ‡çš„æ˜¯ï¼Œä¾æ®å‰é¢(æˆ–åé¢)å‡ºç°çš„tokensæ¥é¢„æµ‹å½“å‰æ—¶åˆ»çš„tokenï¼Œä»£è¡¨æ¨¡å‹æœ‰ELMOã€GTPç­‰ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šå®ƒåªèƒ½åˆ©ç”¨å•å‘è¯­ä¹‰è€Œä¸èƒ½åŒæ—¶åˆ©ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<p>ELMO é€šè¿‡åŒå‘éƒ½åšAR æ¨¡å‹ï¼Œç„¶åè¿›è¡Œæ‹¼æ¥ï¼Œä½†ä»ç»“æœæ¥çœ‹ï¼Œæ•ˆæœå¹¶ä¸æ˜¯å¤ªå¥½ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š å¯¹è‡ªç„¶è¯­è¨€ç”Ÿæˆä»»åŠ¡(NLG)å‹å¥½ï¼Œå¤©ç„¶ç¬¦åˆç”Ÿæˆå¼ä»»åŠ¡çš„ç”Ÿæˆè¿‡ç¨‹ã€‚è¿™ä¹Ÿæ˜¯ GPT èƒ½å¤Ÿç¼–æ•…äº‹çš„åŸå› ã€‚</p>
</blockquote>
<p><strong>AE</strong>: <span style="background-color: rgb(255, 102, 0);">Autoencoding Language Modeling</span></p>
<blockquote>
<p>é€šè¿‡ä¸Šä¸‹æ–‡ä¿¡æ¯æ¥é¢„æµ‹å½“å‰è¢«maskçš„tokenï¼Œä»£è¡¨æœ‰BERTã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼š ç”±äºè®­ç»ƒä¸­é‡‡ç”¨äº† [MASK] æ ‡è®°ï¼Œå¯¼è‡´é¢„è®­ç»ƒä¸å¾®è°ƒé˜¶æ®µä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p>
<p>æ­¤å¤–å¯¹äºç”Ÿæˆå¼é—®é¢˜ï¼Œ AE æ¨¡å‹ä¹Ÿæ˜¾å¾—æ‰è¥Ÿè§è‚˜ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰ BERT ä¸ºæ•°ä¸å¤šå®ç°å¤§çš„çªç ´çš„é¢†åŸŸã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š èƒ½å¤Ÿå¾ˆå¥½çš„ç¼–ç ä¸Šä¸‹æ–‡è¯­ä¹‰ä¿¡æ¯ï¼Œ åœ¨è‡ªç„¶è¯­è¨€ç†è§£(NLU)ç›¸å…³çš„ä¸‹æ¸¸ä»»åŠ¡ä¸Šè¡¨ç°çªå‡ºã€‚</p>
</blockquote>
<p><img src="/images/nlp/bert5/XLNET-AG-AE-2.jpg" width="780" alt="Unsupervised Learning"></p>
<p>æ—¶é—´å¤ªé•¿ç„¶å -&gt; <strong>Sample</strong></p>
<p><img src="/images/nlp/bert5/XLNET-Sample.png" width="800" alt="Unsupervised Learning"></p>
<p>non-contexuailized techniques    eg.skipgram cbow glove</p>
<p>contexualized techniques   eg.elmo bert xlnet</p>
<p>Denoising auto encoder  å»å™ªè‡ªåŠ¨ç¼–ç å™¨ï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹â€”â€”å­¦å‡ºå›¾ç‰‡æˆ–æ•°æ®æ›´æœ‰æ•ˆçš„è¡¨ç¤ºï¼Œ</p>
<p>DAEåœ¨è®­ç»ƒä¸­åŠ å…¥å™ªå£°ï¼Œæé«˜æ¨¡å‹å¥å£®æ€§</p>
<p>2ã€auto_regressive vs auto_encoding</p>
<p>è‡ªå›å½’ï¼šelmoï¼Œproduct role  ä¼˜ç‚¹ï¼šä¿æŒä¸€è‡´æ€§ï¼Œè€ƒè™‘è¯çš„ä¾èµ–å…³ç³»ï¼›ç¼ºç‚¹ï¼šå•å‘çš„ï¼Œä¸åŒåŒæ—¶è€ƒè™‘åŒè¾¹ </p>
<p>è‡ªåŠ¨ç¼–ç ï¼š bert , maskä¸€äº›å•è¯ï¼ŒåŸºæœ¬ç‹¬ç«‹å‡è®¾  bertå­˜åœ¨çš„é—®é¢˜ï¼šindependent assumption ä¼˜ç‚¹ï¼šè€ƒè™‘äº†åŒå‘çš„å…³ç³»ï¼›ç¼ºç‚¹ï¼šéç‹¬ç«‹å‡è®¾ï¼›2ã€trainå’Œ test ä¹‹é—´å­˜åœ¨çš„ä¸ä¸€è‡´æ€§ï¼›</p>
<p>3ã€permutation language model æ’åˆ—è¯­è¨€æ¨¡å‹</p>
<p>åŸºäºelmoè€ƒè™‘åŒå‘é—®é¢˜è¿›è¡Œæ”¹é€ ã€‚answerï¼šconsider all possibel factorization</p>
<p>éšæœºé‡‡æ ·ä¸€å®šåºåˆ—ï¼Œattention maskï¼ŒæŠŠè¯çš„é¡ºåºæ··æ’è¿›æ¨¡å‹(ç±»ä¼¼äºæ•°æ®å¢å¼ºï¼Œä¸æ”¹é€ æ¨¡å‹ï¼Œä»æ•°æ®è¾“å…¥ä¸Šæ”¹é€ ï¼‰ï¼›</p>
<p>äºŒã€å·²çŸ¥å‘é‡çš„ä¿¡æ¯ï¼ŒçŸ¥é“å‘é‡çš„ä½ç½®ï¼Œç»“åˆä¸¤ä¸ªä¿¡æ¯ </p>
<h2 id="QA"><a href="#QA" class="headerlink" title="QA"></a>QA</h2><p><strong>BERT ä¸ºä»€ä¹ˆæœ‰äº› Mask, æœ‰äº›ä¸å˜, æœ‰äº›æ”¹ä¸ºå…¶ä»–word ?</strong></p>
<p> Training Bert æ—¶å€™ï¼Œå°† 15% çš„ token å˜ä¸º [Mask Token]</p>
<p> 80% (percent 15 ä¸­çš„ 80%)</p>
<ul>
<li>[Mask] -&gt; [Token] é¢„æµ‹å•è¯æœ¬èº« (80%) DAE</li>
<li>[Token] -&gt; [Token] å•è¯æœ¬èº«æ¥é¢„æµ‹å•è¯æœ¬èº« AE</li>
<li>word1 -&gt; è½¬æ¢ä¸ºå…¶ä»– word2 -&gt; é¢„æµ‹ word1  (éš¾åº¦æ¯”Maskæ›´å¤§)</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.cnblogs.com/Christbao/p/12347501.html" target="_blank" rel="external">ä»bertåˆ°XLnet</a></li>
<li><a href="https://easyai.tech/blog/nlp-xlnet-bert/" target="_blank" rel="external">è°·æ­Œæ›´å¼ºNLPæ¨¡å‹XLNetå¼€æºï¼š20é¡¹ä»»åŠ¡å…¨é¢ç¢¾å‹BERTï¼</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/84559048" target="_blank" rel="external">ä»BERT, XLNet, RoBERTaåˆ°ALBERT</a></li>
<li><a href="https://jalammar.github.io/illustrated-bert/" target="_blank" rel="external">The Illustrated BERT, ELMo, and co. (How NLP Cracked Transfer Learning)</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[BERT è‚©è†€ä¸Šçš„ NLP æ–°ç§€ï¼š UNILM (æ—¢èƒ½é˜…è¯»åˆèƒ½è‡ªåŠ¨ç”Ÿæˆçš„é¢„è®­ç»ƒæ¨¡å‹)]]></title>
      <url>http://shopee.ai/2020/02/23/nlp/BERT_tutorial_5_post2/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/bert5/UNILM_logo.jpg" width="550" alt="UniLM"></p>
<a id="more"></a>
<p>UNILM: <a href="https://arxiv.org/abs/1905.03197" target="_blank" rel="external">Unified Language Model Pre-training for Natural Language Understanding and Generation</a></p>
<h2 id="1-ARä¸AEè¯­è¨€æ¨¡å‹"><a href="#1-ARä¸AEè¯­è¨€æ¨¡å‹" class="headerlink" title="1. ARä¸AEè¯­è¨€æ¨¡å‹"></a>1. ARä¸AEè¯­è¨€æ¨¡å‹</h2><p><strong>AR</strong>: <span style="background-color: rgb(255, 102, 0);">Aotoregressive Lanuage Modeling</span></p>
<blockquote>
<p>å®ƒæŒ‡çš„æ˜¯ï¼Œä¾æ®å‰é¢(æˆ–åé¢)å‡ºç°çš„tokensæ¥é¢„æµ‹å½“å‰æ—¶åˆ»çš„tokenï¼Œä»£è¡¨æ¨¡å‹æœ‰ELMOã€GTPç­‰ã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼šå®ƒåªèƒ½åˆ©ç”¨å•å‘è¯­ä¹‰è€Œä¸èƒ½åŒæ—¶åˆ©ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<p>ELMO é€šè¿‡åŒå‘éƒ½åšAR æ¨¡å‹ï¼Œç„¶åè¿›è¡Œæ‹¼æ¥ï¼Œä½†ä»ç»“æœæ¥çœ‹ï¼Œæ•ˆæœå¹¶ä¸æ˜¯å¤ªå¥½ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š å¯¹è‡ªç„¶è¯­è¨€ç”Ÿæˆä»»åŠ¡(NLG)å‹å¥½ï¼Œå¤©ç„¶ç¬¦åˆç”Ÿæˆå¼ä»»åŠ¡çš„ç”Ÿæˆè¿‡ç¨‹ã€‚è¿™ä¹Ÿæ˜¯ GPT èƒ½å¤Ÿç¼–æ•…äº‹çš„åŸå› ã€‚</p>
</blockquote>
<p><strong>AE</strong>: <span style="background-color: rgb(255, 102, 0);">Autoencoding Language Modeling</span></p>
<blockquote>
<p>é€šè¿‡ä¸Šä¸‹æ–‡ä¿¡æ¯æ¥é¢„æµ‹å½“å‰è¢«maskçš„tokenï¼Œä»£è¡¨æœ‰BERTã€‚</p>
<p><strong>ç¼ºç‚¹</strong>ï¼š ç”±äºè®­ç»ƒä¸­é‡‡ç”¨äº† [MASK] æ ‡è®°ï¼Œå¯¼è‡´é¢„è®­ç»ƒä¸å¾®è°ƒé˜¶æ®µä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p>
<p>æ­¤å¤–å¯¹äºç”Ÿæˆå¼é—®é¢˜ï¼Œ AE æ¨¡å‹ä¹Ÿæ˜¾å¾—æ‰è¥Ÿè§è‚˜ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰ BERT ä¸ºæ•°ä¸å¤šå®ç°å¤§çš„çªç ´çš„é¢†åŸŸã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š èƒ½å¤Ÿå¾ˆå¥½çš„ç¼–ç ä¸Šä¸‹æ–‡è¯­ä¹‰ä¿¡æ¯ï¼Œ åœ¨è‡ªç„¶è¯­è¨€ç†è§£(NLU)ç›¸å…³çš„ä¸‹æ¸¸ä»»åŠ¡ä¸Šè¡¨ç°çªå‡ºã€‚</p>
</blockquote>
<h2 id="2-Transformerå¦‚æˆï¼Œå…¨é Mask"><a href="#2-Transformerå¦‚æˆï¼Œå…¨é Mask" class="headerlink" title="2. Transformerå¦‚æˆï¼Œå…¨é Mask"></a>2. Transformerå¦‚æˆï¼Œå…¨é Mask</h2><p>ä¸ºä»€ä¹ˆTransformerå¯ä»¥å®ç°ä¹±åºè¯­è¨€æ¨¡å‹ï¼Ÿæ˜¯æ€ä¹ˆå®ç°çš„ï¼ŸRNNå¯ä»¥å®ç°å—ï¼Ÿ</p>
<blockquote>
<p>1ã€AttentionçŸ©é˜µçš„Maskæ–¹å¼ä¸å„ç§é¢„è®­ç»ƒæ–¹æ¡ˆçš„å…³ç³»ï¼›</p>
<p>2ã€ç›´æ¥åˆ©ç”¨é¢„è®­ç»ƒçš„Bertæ¨¡å‹æ¥åšSeq2Seqä»»åŠ¡</p>
</blockquote>
<h2 id="3-èŠ±å¼é¢„è®­ç»ƒ"><a href="#3-èŠ±å¼é¢„è®­ç»ƒ" class="headerlink" title="3. èŠ±å¼é¢„è®­ç»ƒ"></a>3. èŠ±å¼é¢„è®­ç»ƒ</h2><blockquote>
<p>æ›´å¤šèŠ±æ ·çš„é¢„è®­ç»ƒç©æ³•ã€‚æ¯”å¦‚Bertå°±ç”¨äº†ç§°ä¹‹ä¸ºâ€œæ©ç è¯­è¨€æ¨¡å‹ï¼ˆMasked Language Modelï¼‰â€çš„æ–¹å¼æ¥é¢„è®­ç»ƒï¼Œä¸è¿‡è¿™åªæ˜¯æ™®é€šè¯­è¨€æ¨¡å‹çš„ä¸€ç§å˜ä½“ï¼›è¿˜æœ‰XLNetåˆ™æå‡ºäº†æ›´å½»åº•çš„â€œPermutation Language Modelingâ€ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºâ€œä¹±åºè¯­è¨€æ¨¡å‹â€ï¼›è¿˜æœ‰<a href="https://arxiv.org/abs/1905.03197" target="_blank" rel="external">UNILM</a>æ¨¡å‹ï¼Œç›´æ¥ç”¨å•ä¸ªBertçš„æ¶æ„åšSeq2Seqï¼Œä½ å¯ä»¥å°†å®ƒä½œä¸ºä¸€ç§é¢„è®­ç»ƒæ‰‹æ®µï¼Œåˆæˆ–è€…å¹²è„†å°±ç”¨å®ƒæ¥åšSeq2Seqä»»åŠ¡â€¦</p>
</blockquote>
<h2 id="4-å•å‘è¯­è¨€æ¨¡å‹"><a href="#4-å•å‘è¯­è¨€æ¨¡å‹" class="headerlink" title="4. å•å‘è¯­è¨€æ¨¡å‹"></a>4. å•å‘è¯­è¨€æ¨¡å‹</h2><h2 id="5-ä¹±åºè¯­è¨€æ¨¡å‹"><a href="#5-ä¹±åºè¯­è¨€æ¨¡å‹" class="headerlink" title="5. ä¹±åºè¯­è¨€æ¨¡å‹"></a>5. ä¹±åºè¯­è¨€æ¨¡å‹</h2><h2 id="6-Seq2Seq"><a href="#6-Seq2Seq" class="headerlink" title="6. Seq2Seq"></a>6. Seq2Seq</h2><p>ç°åœ¨åˆ°æˆ‘ä»¬çš„â€œé‡å¤´æˆâ€äº†ï¼šå°†Bertç­‰Transformeræ¶æ„è·ŸSeq2Seqç»“åˆèµ·æ¥ã€‚ä¸ºä»€ä¹ˆè¯´é‡å¤´æˆå‘¢ï¼Ÿå› ä¸ºåŸåˆ™ä¸Šæ¥è¯´ï¼Œä»»ä½•NLPé—®é¢˜éƒ½å¯ä»¥è½¬åŒ–ä¸ºSeq2Seqæ¥åšï¼Œå®ƒæ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„ä¸‡èƒ½æ¨¡å‹ã€‚æ‰€ä»¥å¦‚æœèƒ½å¤Ÿåšåˆ°Seq2Seqï¼Œç†è®ºä¸Šå°±å¯ä»¥å®ç°ä»»æ„ä»»åŠ¡äº†ã€‚</p>
<blockquote>
<p>å°†Bertä¸Seq2Seqç»“åˆçš„æ¯”è¾ƒçŸ¥åçš„å·¥ä½œæœ‰ä¸¤ä¸ªï¼š<a href="https://arxiv.org/abs/1905.02450" target="_blank" rel="external">MASS</a> å’Œ <a href="https://arxiv.org/abs/1905.03197" target="_blank" rel="external">UNILM</a>ï¼Œä¸¤è€…éƒ½æ˜¯å¾®è½¯çš„å·¥ä½œ</p>
<p><strong>MASS</strong> è¿˜æ˜¯æ™®é€šçš„Seq2Seqæ¶æ„ï¼Œåˆ†åˆ«ç”¨Bertç±»ä¼¼çš„Transformeræ¨¡å‹æ¥åšencoderå’Œdecoderï¼Œå®ƒçš„ä¸»è¦è´¡çŒ®å°±æ˜¯æä¾›äº†ä¸€ç§Seq2Seqæ€æƒ³çš„é¢„è®­ç»ƒæ–¹æ¡ˆï¼›</p>
<p><strong>UNILM</strong>ï¼Œå®ƒæä¾›äº†ä¸€ç§å¾ˆä¼˜é›…çš„æ–¹å¼ï¼Œ<font color="red"><u>èƒ½å¤Ÿè®©æˆ‘ä»¬ç›´æ¥ç”¨å•ä¸ªBertæ¨¡å‹å°±å¯ä»¥åšSeq2Seqä»»åŠ¡ï¼Œè€Œä¸ç”¨åŒºåˆ†encoderå’Œdecoder</u></font>ã€‚è€Œå®ç°è¿™ä¸€ç‚¹å‡ ä¹ä¸è´¹å¹ç°ä¹‹åŠ›â€”â€”åªéœ€è¦ä¸€ä¸ªç‰¹åˆ«çš„Maskã€‚</p>
</blockquote>
<h2 id="7-UniLMä»‹ç»"><a href="#7-UniLMä»‹ç»" class="headerlink" title="7. UniLMä»‹ç»"></a>7. UniLMä»‹ç»</h2><p><img src="/images/nlp/bert5/UniLM-2.png" width="750" alt="UniLM"></p>
<p>æ¨¡å‹æ¶æ„ä¸å®éªŒè®¾ç½®:</p>
<p><img src="/images/nlp/bert5/UniLM-3.jpeg" width="750" alt="UniLM"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://weixin.sogou.com/link?url=dn9a_-gY295K0Rci_xozVXfdMkSQTLW6cwJThYulHEtVjXrGTiVgSwmMbVnGAdyfWpgqR5nTYTTNRmGegeG1-VqXa8Fplpd9NGcTDrYSAXbgISsfQr0Sb9_CKE9ysxzAGaHAyeo9lkT0RPC26F2QSTklSLZ5nrgPSrHnQK7vKrg-R2EmMwyr8Gpe7hI8NXdN1Gjpv49eirDFCUK2wnF3qhKGyEZsHcW1py0vNe-QG79V_QvrMCAY3b6IYNVr5apdUQnP1wEuQY2fxjh3za6jWA..&amp;type=2&amp;query=%E7%AB%99%E5%9C%A8BERT%E8%82%A9%E8%86%80%E4%B8%8A%E7%9A%84NLP%E6%96%B0%E7%A7%80%E4%BB%AC&amp;token=empty&amp;k=63&amp;h=-" target="_blank" rel="external">ç«™åœ¨BERTè‚©è†€ä¸Šçš„NLPæ–°ç§€ä»¬(PART II)</a></li>
</ul>
<ul>
<li><a href="https://kexue.fm/archives/6933" target="_blank" rel="external">ä»è¯­è¨€æ¨¡å‹åˆ°Seq2Seqï¼šTransformerå¦‚æˆï¼Œå…¨é Mask</a></li>
<li><a href="https://wemp.app/posts/f282c739-f1bd-4650-92b9-86f6de7d6eb8" target="_blank" rel="external">UniLM:ä¸€ç§æ—¢èƒ½é˜…è¯»åˆèƒ½è‡ªåŠ¨ç”Ÿæˆçš„é¢„è®­ç»ƒæ¨¡å‹</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[BERT è‚©è†€ä¸Šçš„ NLP æ–°ç§€ï¼š ERNIE]]></title>
      <url>http://shopee.ai/2020/02/23/nlp/BERT_tutorial_5_post1/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/bert5/ERNIE_logo.jpg" width="550" alt="bert"></p>
<a id="more"></a>
<h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>å»å¹´NLPé¢†åŸŸæœ€ç«çš„è«è¿‡äºBERTäº†ï¼Œå¾—ç›Šäºæ•°æ®è§„æ¨¡å’Œè®¡ç®—åŠ›çš„æå‡ã€‚</p>
<p>BERTåœ¨å¤§ä¼šè§„æ¨¡è¯­æ–™ä¸Šé¢„è®­ç»ƒï¼ˆMasked Language Model + Next Sentence Predictionï¼‰</p>
<p>ä¹‹åå¯ä»¥å¾ˆå¥½åœ°ä»è®­ç»ƒè¯­æ–™ä¸­æ•è·ä¸°å¯Œçš„è¯­ä¹‰ä¿¡æ¯ï¼Œå¯¹å„é¡¹ä»»åŠ¡ç–¯ç‹‚å± æ¦œã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">Name</th>
<th style="text-align:center">Full_Name</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">ERNIE from Baidu</td>
<td style="text-align:center">Enhanced Representation through Knowledge Integrationï¼ˆBaidu/2019ï¼‰</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">ERNIE from THU</td>
<td style="text-align:center">Enhanced Language Representation with Informative Entitiesï¼ˆTHU/ACL2019ï¼‰</td>
</tr>
</tbody>
</table>
<blockquote>
<ul>
<li>Basic-Level Maskingã€Phrase-Level Maskingã€ Entity-Level Masking</li>
</ul>
</blockquote>
<p><img src="/images/nlp/bert5/bert5-1.webp" width="750" alt="bert"></p>
<p><strong>XLNetåšäº†äº›ä»€ä¹ˆ?</strong></p>
<blockquote>
<p>å…¶å®ä»å¦å¤–ä¸€ä¸ªè§’åº¦æ›´å¥½ç†è§£XLNetçš„åˆè¡·å’Œåšæ³•ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªä¼°è®¡æ˜¯XLNetä½œè€…çœŸæ­£çš„æ€è€ƒå‡ºå‘ç‚¹ï¼Œæ˜¯å•¥å‘¢ï¼Ÿå°±æ˜¯è¯´è‡ªå›å½’è¯­è¨€æ¨¡å‹æœ‰ä¸ªç¼ºç‚¹ï¼Œè¦ä¹ˆä»å·¦åˆ°å³ï¼Œè¦ä¹ˆä»å³åˆ°å·¦ï¼Œå°½ç®¡å¯ä»¥ç±»ä¼¼ELMOä¸¤ä¸ªéƒ½åšï¼Œç„¶åå†æ‹¼æ¥çš„æ–¹å¼ã€‚ä½†æ˜¯è·ŸBertæ¯”ï¼Œæ•ˆæœæ˜æ˜¾ä¸è¶³å¤Ÿå¥½ï¼ˆè¿™é‡Œé¢æœ‰RNNå¼±äºTransformerçš„å› ç´ ï¼Œä¹Ÿæœ‰åŒå‘è¯­è¨€æ¨¡å‹æ€ä¹ˆåšçš„å› ç´ ï¼‰ã€‚é‚£ä¹ˆï¼Œèƒ½ä¸èƒ½ç±»ä¼¼Berté‚£æ ·ï¼Œæ¯”è¾ƒå……åˆ†åœ°åœ¨è‡ªå›å½’è¯­è¨€æ¨¡å‹ä¸­ï¼Œå¼•å…¥åŒå‘è¯­è¨€æ¨¡å‹å‘¢ï¼Ÿå› ä¸ºBertå·²ç»è¯æ˜äº†è¿™æ˜¯éå¸¸å…³é”®çš„ä¸€ç‚¹ã€‚è¿™ä¸€ç‚¹ï¼Œæƒ³æ³•ç®€å•ï¼Œä½†æ˜¯çœ‹ä¸Šå»è²Œä¼¼ä¸å¤ªå¥½åšï¼Œå› ä¸ºä»å·¦å‘å³çš„è¯­è¨€æ¨¡å‹ï¼Œå¦‚æœæˆ‘ä»¬å½“å‰æ ¹æ®ä¸Šæ–‡ï¼Œè¦é¢„æµ‹æŸä¸ªå•è¯Tiï¼Œé‚£ä¹ˆçœ‹ä¸Šå»å®ƒæ²¡æ³•çœ‹åˆ°ä¸‹æ–‡çš„å†…å®¹ã€‚å…·ä½“æ€ä¹ˆåšæ‰èƒ½è®©è¿™ä¸ªæ¨¡å‹ï¼šçœ‹ä¸Šå»ä»ç„¶æ˜¯ä»å·¦å‘å³çš„è¾“å…¥å’Œé¢„æµ‹æ¨¡å¼ï¼Œä½†æ˜¯å…¶å®å†…éƒ¨å·²ç»å¼•å…¥äº†å½“å‰å•è¯çš„ä¸‹æ–‡ä¿¡æ¯å‘¢ï¼ŸXLNetåœ¨æ¨¡å‹æ–¹é¢çš„ä¸»è¦è´¡çŒ®å…¶å®æ˜¯åœ¨è¿™é‡Œã€‚</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/65470719" target="_blank" rel="external">å¼ ä¿Šæ—: Bertæ—¶ä»£çš„åˆ›æ–°ï¼šBertåº”ç”¨æ¨¡å¼æ¯”è¾ƒåŠå…¶å®ƒ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/68446772" target="_blank" rel="external">å¼ ä¿Šæ—: Bertæ—¶ä»£çš„åˆ›æ–°ï¼ˆåº”ç”¨ç¯‡ï¼‰ï¼šBertåœ¨NLPå„é¢†åŸŸçš„åº”ç”¨è¿›å±•</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/70257427" target="_blank" rel="external">å¼ ä¿Šæ—: XLNet:è¿è¡Œæœºåˆ¶åŠå’ŒBertçš„å¼‚åŒæ¯”è¾ƒ</a></li>
<li><a href="https://weixin.sogou.com/link?url=dn9a_-gY295K0Rci_xozVXfdMkSQTLW6cwJThYulHEtVjXrGTiVgSwmMbVnGAdyfWpgqR5nTYTTNRmGegeG1-VqXa8Fplpd98QrRsspqCZmTI26gpTNBsZawn0sNrhxHDJ181mLFwl4WgTnwq8k_ORKPHXMAAIBnLlMSpr4DFlZayTATBNyOhOs-rqhJlL4GL7ZQDLlAv6CEFTKML6seaP4lUnFq3lweR0hcAwK314DX8i0ACs8zq85aBivyL6Sbgzuq-kv_0OwNGbbB75bUeA..&amp;type=2&amp;query=%E7%AB%99%E5%9C%A8BERT%E8%82%A9%E8%86%80%E4%B8%8A%E7%9A%84NLP%E6%96%B0%E7%A7%80%E4%BB%AC&amp;token=empty&amp;k=80&amp;h=s" target="_blank" rel="external">ç«™åœ¨BERTè‚©è†€ä¸Šçš„NLPæ–°ç§€ä»¬ï¼ˆPART Iï¼‰</a></li>
<li><a href="https://weixin.sogou.com/link?url=dn9a_-gY295K0Rci_xozVXfdMkSQTLW6cwJThYulHEtVjXrGTiVgSwmMbVnGAdyfWpgqR5nTYTTNRmGegeG1-VqXa8Fplpd9NGcTDrYSAXbgISsfQr0Sb9_CKE9ysxzAGaHAyeo9lkT0RPC26F2QSTklSLZ5nrgPSrHnQK7vKrg-R2EmMwyr8Gpe7hI8NXdN1Gjpv49eirDFCUK2wnF3qhKGyEZsHcW1py0vNe-QG79V_QvrMCAY3b6IYNVr5apdUQnP1wEuQY2fxjh3za6jWA..&amp;type=2&amp;query=%E7%AB%99%E5%9C%A8BERT%E8%82%A9%E8%86%80%E4%B8%8A%E7%9A%84NLP%E6%96%B0%E7%A7%80%E4%BB%AC&amp;token=empty&amp;k=63&amp;h=-" target="_blank" rel="external">ç«™åœ¨BERTè‚©è†€ä¸Šçš„NLPæ–°ç§€ä»¬(PART II)</a></li>
</ul>
<ul>
<li><a href="https://kexue.fm/archives/6933" target="_blank" rel="external">ä»è¯­è¨€æ¨¡å‹åˆ°Seq2Seqï¼šTransformerå¦‚æˆï¼Œå…¨é Mask</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[BERT tutorial 4]]></title>
      <url>http://shopee.ai/2020/02/16/nlp/BERT_tutorial_4_Summary/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/bert/bert_update_logo.jpg" width="550" alt="bert"></p>
<a id="more"></a>
<p><strong>2018.10</strong> google å‘å¸ƒ <strong>BERT</strong> æ¨¡å‹. å¼•çˆ†æ•´ä¸ªAIåœˆçš„ NLP æ¨¡å‹. åœ¨ NLPé¢†åŸŸ åˆ·æ–° 11 é¡¹è®°å½•.</p>
<p><strong>BERT</strong> å…¶å®æ˜¯ language_encoderï¼ŒæŠŠè¾“å…¥çš„ sentence æˆ– paragraph è½¬æˆ embedding.</p>
<p><strong>Paper</strong>: <a href="https://arxiv.org/abs/1810.04805" target="_blank" rel="external">BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding</a></p>
<p><strong>BERT</strong> æå‡ºä¸€å¥—å®Œæ•´çš„æ–¹æ¡ˆï¼Œåˆ©ç”¨ä¹‹å‰æœ€æ–°çš„ <strong>model</strong>ï¼Œå»è§£å†³å„ç§å„æ ·çš„ NLP Tasks.</p>
<h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h2><p>BERT: Pre-training of <strong><code>Deep Bidirectional Transformers for Language Understanding</code></strong>.</p>
<p><img src="/images/nlp/bert/bert_su.png" width="750" alt="Bertçš„é¢„è®­ç»ƒå’Œå¾®è°ƒï¼ˆå›¾ç‰‡æ¥è‡ªBertçš„åŸè®ºæ–‡)"></p>
<h2 id="2-åŸç†ç¯‡"><a href="#2-åŸç†ç¯‡" class="headerlink" title="2. åŸç†ç¯‡"></a>2. åŸç†ç¯‡</h2><p>æœ¬ç« å°†ä¼šå…ˆç»™å¤§å®¶ä»‹ç»BERTçš„æ ¸å¿ƒtransformerï¼Œè€Œtransformeråˆæ˜¯ç”±attentionç»„åˆè€Œæˆ. </p>
<h3 id="2-1-Attentionæœºåˆ¶è®²è§£"><a href="#2-1-Attentionæœºåˆ¶è®²è§£" class="headerlink" title="2.1 Attentionæœºåˆ¶è®²è§£"></a>2.1 Attentionæœºåˆ¶è®²è§£</h3><blockquote>
<ul>
<li><p><a href="https://kexue.fm/archives/4765" target="_blank" rel="external">è‹ç¥ã€ŠAttention is All You Needã€‹æµ…è¯»ï¼ˆç®€ä»‹+ä»£ç ï¼‰</a></p>
</li>
<li><p><a href="https://terrifyzhao.github.io/2019/01/04/Attentionæœºåˆ¶è®²è§£.html" target="_blank" rel="external">Attentionæœºåˆ¶è®²è§£</a></p>
</li>
<li><a href="https://zhuanlan.zhihu.com/p/37601161" target="_blank" rel="external">å¼ ä¿Šæ—: æ·±åº¦å­¦ä¹ ä¸­çš„æ³¨æ„åŠ›æ¨¡å‹ï¼ˆ2017ç‰ˆï¼‰</a></li>
</ul>
</blockquote>
<h3 id="2-2-Transrofmeræ¨¡å‹è®²è§£"><a href="#2-2-Transrofmeræ¨¡å‹è®²è§£" class="headerlink" title="2.2 Transrofmeræ¨¡å‹è®²è§£"></a>2.2 Transrofmeræ¨¡å‹è®²è§£</h3><blockquote>
<ul>
<li><a href="https://terrifyzhao.github.io/2019/01/11/Transformeræ¨¡å‹è¯¦è§£.html" target="_blank" rel="external">Transformeræ¨¡å‹è¯¦è§£</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/54356280" target="_blank" rel="external">BERTå¤§ç«å´ä¸æ‡‚Transformerï¼Ÿè¯»è¿™ä¸€ç¯‡å°±å¤Ÿäº†</a></li>
</ul>
</blockquote>
<p>Jay Alammarâ€™s Blog</p>
<blockquote>
<p><a href="https://jalammar.github.io/illustrated-transformer/" target="_blank" rel="external">Transformer</a></p>
<p><a href="https://blog.csdn.net/yujianmin1990/article/details/85221271" target="_blank" rel="external">The Illustrated Transformerã€è¯‘ã€‘</a></p>
</blockquote>
<h3 id="2-3-BERTåŸç†"><a href="#2-3-BERTåŸç†" class="headerlink" title="2.3 BERTåŸç†"></a>2.3 BERTåŸç†</h3><blockquote>
<ul>
<li><a href="https://www.cnblogs.com/gczr/p/11785930.html" target="_blank" rel="external">å›¾ç¤ºè¯¦è§£BERTæ¨¡å‹çš„è¾“å…¥ä¸è¾“å‡º</a></li>
</ul>
</blockquote>
<p><img src="/images/nlp/bert/bert_input_example.png" width="600" alt="bert input"></p>
<p> More Readingï¼š</p>
<blockquote>
<ul>
<li><p><a href="https://zhuanlan.zhihu.com/p/49271699" target="_blank" rel="external">å¼ ä¿Šæ—: ä»Word Embeddingåˆ°Bertæ¨¡å‹â€”è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„é¢„è®­ç»ƒæŠ€æœ¯å‘å±•å²</a> </p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/54743941" target="_blank" rel="external">å¼ ä¿Šæ—: æ”¾å¼ƒå¹»æƒ³ï¼Œå…¨é¢æ‹¥æŠ±Transformerï¼šä¸‰å¤§ç‰¹å¾æŠ½å–å™¨ï¼ˆCNN/RNN/TFï¼‰æ¯”è¾ƒ</a></p>
</li>
</ul>
</blockquote>
<h2 id="3-ä»£ç ç¯‡"><a href="#3-ä»£ç ç¯‡" class="headerlink" title="3. ä»£ç ç¯‡"></a>3. ä»£ç ç¯‡</h2><h2 id="4-å®è·µç¯‡"><a href="#4-å®è·µç¯‡" class="headerlink" title="4. å®è·µç¯‡"></a>4. å®è·µç¯‡</h2><blockquote>
<p><a href="https://kexue.fm/archives/6736" target="_blank" rel="external">å½“Berté‡ä¸ŠKerasï¼šè¿™å¯èƒ½æ˜¯Bertæœ€ç®€å•çš„æ‰“å¼€å§¿åŠ¿</a></p>
<p><a href="https://github.com/hanxiao/bert-as-service" target="_blank" rel="external">hanxiao/bert-as-service</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/50582974" target="_blank" rel="external">PaperWeekly: ä¸¤è¡Œä»£ç ç©è½¬Google BERTå¥å‘é‡è¯å‘é‡</a></p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://mp.weixin.qq.com/s/H4at_BDLwZWqlBHLjMZWRQ" target="_blank" rel="external">ä¸€æ­¥æ­¥ç†è§£BERT</a></li>
<li><a href="ä»è¯­è¨€æ¨¡å‹åˆ°Seq2Seqï¼šTransformerå¦‚æˆï¼Œå…¨é Mask">ä»è¯­è¨€æ¨¡å‹åˆ°Seq2Seqï¼šTransformerå¦‚æˆï¼Œå…¨é Mask</a></li>
<li><a href="https://terrifyzhao.github.io/2019/01/17/BERTå®Œå…¨æŒ‡å—.html" target="_blank" rel="external">BERTå®Œå…¨æŒ‡å—</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pycharm Keyboard Shortcutsï¼ˆMacï¼‰]]></title>
      <url>http://shopee.ai/2019/12/22/python/tools/PyCharm/</url>
      <content type="html"><![CDATA[<p><img src="/images/python/tools/PyCharm_logo.jpg" width="500" alt="Pycharm Keyboard Shortcuts"></p>
<a id="more"></a>
<h2 id="1-Pycharm"><a href="#1-Pycharm" class="headerlink" title="1. Pycharm"></a>1. Pycharm</h2><table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">Shortcuts</th>
<th style="text-align:center">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1.</td>
<td style="text-align:center">Shift + option + Enter</td>
<td style="text-align:center">auto import</td>
</tr>
<tr>
<td style="text-align:center">2.</td>
<td style="text-align:center">CMD + Opt + t</td>
<td style="text-align:center">try/catch</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"><strong>CMD + B</strong></td>
<td style="text-align:center">è·³è½¬åˆ°å£°æ˜å¤„ï¼ˆcmdåŠ é¼ æ ‡ï¼‰</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">CMD + []</td>
<td style="text-align:center">å…‰æ ‡ä¹‹å‰/åçš„ä½ç½®</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"><strong>SHIFT + CMD + F</strong> , å…¨å±€æœç´¢</td>
<td style="text-align:center">âœ”ï¸</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">CMD + R <strong>/</strong> SHIFT + CMD + R</td>
<td style="text-align:center">å½“å‰æ–‡ä»¶æ›¿æ¢ / å…¨å±€æ›¿æ¢</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">CMD + L , æŒ‡å®šè¡Œæ•°è·³è½¬</td>
<td style="text-align:center">âœ”ï¸</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">SHIFT + ENTER , ç›´æ¥åˆ°ä¸‹ä¸€è¡Œ</td>
<td style="text-align:center">âœ”ï¸</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">ALT + ENTER , auto-import</td>
<td style="text-align:center">âœ”ï¸</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">CMD +/- <strong>/</strong> SHIFT CMD +/-</td>
<td style="text-align:center">å±•å¼€å½“å‰ / å±•å¼€æ‰€æœ‰</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">OPT + CMD + l</td>
<td style="text-align:center">ä»£ç å—å¯¹é½</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">CMD + D</td>
<td style="text-align:center">åœ¨ä¸‹ä¸€è¡Œå¤åˆ¶æœ¬è¡Œçš„å†…å®¹</td>
</tr>
<tr>
<td style="text-align:center"> å·²ç†Ÿç»ƒ</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">CMD /</td>
<td style="text-align:center">æ³¨é‡Š/å–æ¶ˆæ³¨é‡Šä¸€è¡Œ</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">CMD + X/C</td>
<td style="text-align:center">å¤åˆ¶å…‰æ ‡å½“å‰è¡Œ,å‰ªåˆ‡åŒç†</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">CMD + F</td>
<td style="text-align:center">å½“å‰æ–‡ä»¶æœç´¢ï¼ˆå›è½¦ä¸‹ä¸€ä¸ª shiftå›è½¦ä¸Šä¸€ä¸ªï¼‰</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">CMD + F6</td>
<td style="text-align:center">æ›´æ”¹å˜é‡</td>
</tr>
<tr>
<td style="text-align:center">ç»“æ„æ€§</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">CMD + O <strong>/</strong> SHIFT + CMD + O <strong>/</strong> OPT + CMD + O</td>
<td style="text-align:center">æœç´¢ class / files / ç¬¦å·ï¼ˆå‡½æ•°ç­‰) </td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">CTR + Tab</td>
<td style="text-align:center">å²ä¸Šæœ€NBçš„å¯¼èˆªçª—å£ <br> 1. å·¥ç¨‹ file åˆ—è¡¨ã€æ–‡ä»¶ç»“æ„åˆ—è¡¨ <br> 2. å‘½ä»¤è¡Œæ¨¡å¼ã€ä»£ç æ£€æŸ¥ã€VCSç­‰</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">ALT + F12 æ‰“å¼€å‘½ä»¤è¡Œæ </td>
<td style="text-align:center">âœ”ï¸</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">CMD + F12 æ˜¾ç¤ºæ–‡ä»¶ç»“æ„</td>
<td style="text-align:center">âœ”ï¸</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">CMD + J</td>
<td style="text-align:center">ä»£ç æ™ºèƒ½è¡¥å…¨</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">ALT + F1</td>
<td style="text-align:center">å®šä½ç¼–è¾‘æ–‡ä»¶æ‰€åœ¨ä½ç½®</td>
</tr>
</tbody>
</table>
<h2 id="2-Invoke-Learning"><a href="#2-Invoke-Learning" class="headerlink" title="2. Invoke Learning"></a>2. Invoke Learning</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">PYTHONUNBUFFERED=1;</span><br><span class="line">INTERMEDIATE_DATA_PATH=/Users/blair/ghome/6E/work_project/mlar/tmp;</span><br><span class="line">PYTHONPATH=~/ghome/6E/work_project/mlar:~/ghome/6E/work_project/mlar/nn_framework</span><br></pre></td></tr></table></figure>
<h3 id="environment"><a href="#environment" class="headerlink" title="environment"></a>environment</h3><p><img src="/images/python/tools/PyCharm_invoke.png" width="800" alt="Pycharm Invoke"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/Haiyang_Duan/article/details/79078167" target="_blank" rel="external">ä»£ç ç¼–è¾‘å¿«æ·é”®</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[scikit-learn ä¸ºæœºå™¨å­¦ä¹ å‡†å¤‡æ–‡æœ¬æ•°æ®]]></title>
      <url>http://shopee.ai/2019/12/08/nlp/scikit-learn-text-processing/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/scikit-learn-logo.jpg" width="550" alt="scikit-learn"></p>
<a id="more"></a>
<p>æœ‰å…³ç‰¹å¾çš„æå–ï¼Œscikit-learnç»™å‡ºäº†å¾ˆå¤šæ–¹æ³•ï¼Œå…·ä½“åˆ†æˆäº†å›¾ç‰‡ç‰¹å¾æå–å’Œæ–‡æœ¬ç‰¹å¾æå–ã€‚</p>
<p>æ–‡æœ¬ç‰¹å¾æå–çš„æ¥å£æ˜¯<code>sklearn.feature_extraction.text</code>ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å­¦ä¹ é‡Œé¢å°è£…çš„å‡½æ•°ã€‚</p>
<h2 id="CountVectorizer"><a href="#CountVectorizer" class="headerlink" title="CountVectorizer"></a>CountVectorizer</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> CountVectorizer</span><br><span class="line"></span><br><span class="line">vectorizer = CountVectorizer(min_df=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">corpus = [</span><br><span class="line">            <span class="string">'This is the first document.'</span>,</span><br><span class="line">            <span class="string">'This is the second second document.'</span>,</span><br><span class="line">            <span class="string">'And the third one.'</span>,</span><br><span class="line">            <span class="string">'Is this the first document?'</span>,</span><br><span class="line">         ]</span><br><span class="line">X = vectorizer.fit_transform(corpus)</span><br><span class="line">feature_name = vectorizer.get_feature_names()</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> feature_name</span><br><span class="line"><span class="keyword">print</span> X.toarray()</span><br></pre></td></tr></table></figure>
<p>ç¨‹åºçš„ç»“æœä¸º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="string">u'and'</span>, <span class="string">u'document'</span>, <span class="string">u'first'</span>, <span class="string">u'is'</span>, <span class="string">u'one'</span>, <span class="string">u'second'</span>, <span class="string">u'the'</span>, <span class="string">u'third'</span>, <span class="string">u'this'</span>]</span><br><span class="line">[[<span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span>]</span><br><span class="line"> [<span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">2</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span>]</span><br><span class="line"> [<span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span>]</span><br><span class="line"> [<span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span>]]</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/33779124" target="_blank" rel="external">scikit-learn ä¸ºæœºå™¨å­¦ä¹ å‡†å¤‡æ–‡æœ¬æ•°æ®</a></li>
<li><a href="https://zhangzirui.github.io/posts/Document-14%20%28sklearn-feature%29.md" target="_blank" rel="external">å­¦ä¹ sklearnä¹‹æ–‡æœ¬ç‰¹å¾æå–</a></li>
<li><a href="https://codeday.me/bug/20190429/1001523.html" target="_blank" rel="external">Scikit-Learn Vectorizer<code>max_features</code></a></li>
</ul>
<p>Keras</p>
<ul>
<li><a href="https://www.cnblogs.com/jclian91/p/9777108.html" target="_blank" rel="external">Keraså…¥é—¨ï¼ˆä¸€ï¼‰æ­å»ºæ·±åº¦ç¥ç»ç½‘ç»œï¼ˆDNNï¼‰è§£å†³å¤šåˆ†ç±»é—®é¢˜</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SpaCy tutorial]]></title>
      <url>http://shopee.ai/2019/12/02/nlp/SpaCy-tutorial/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/spaCy-logo.png" width="550" alt="spaCy"></p>
<a id="more"></a>
<p>spaCy æ˜¯ä¸€ä¸ªPythonè‡ªç„¶è¯­è¨€å¤„ç†å·¥å…·åŒ…ï¼Œè¯ç”Ÿäº <strong>2014</strong> å¹´ã€‚</p>
<p>spaCy æ˜¯ Industrial-Strength Natural Language Processing in Python</p>
<p>spaCy å¤§é‡ä½¿ç”¨äº† Cython æ¥æé«˜æ¨¡å—æ€§èƒ½ï¼ŒåŒºåˆ«äºå­¦æœ¯æ€§è´¨æ›´æµ“çš„Python NLTKï¼Œå…·æœ‰äº†ä¸šç•Œåº”ç”¨çš„å®é™…ä»·å€¼ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://spacy.io/api/cli" target="_blank" rel="external">spacy.io</a></li>
<li><a href="http://www.52nlp.cn/è‡ªç„¶è¯­è¨€å¤„ç†å·¥å…·åŒ…spacyä»‹ç»" target="_blank" rel="external">è‡ªç„¶è¯­è¨€å¤„ç†å·¥å…·åŒ…spacyä»‹ç»</a></li>
<li><a href="https://www.machinelearningplus.com/nlp/lemmatization-examples-python/" target="_blank" rel="external">Lemmatization Approaches with Examples in Python</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/36768778" target="_blank" rel="external">å¦‚ä½•ç”¨Pythonå¤„ç†è‡ªç„¶è¯­è¨€ï¼Ÿï¼ˆSpacyä¸Word Embeddingï¼‰</a></li>
<li><a href="https://zhuanlan.zhihu.com/yushuzhilan" target="_blank" rel="external">ç‰æ ‘èŠå…°, çŸ¥ä¹ä¸“æ </a></li>
<li><a href="https://hub.gke.mybinder.org/user/wshuyi-demo-spa-text-processing-5qo9cxle/lab" target="_blank" rel="external">demo-spa-text-processing</a></li>
<li><a href="https://www.cnblogs.com/ljhdo/p/10762035.html" target="_blank" rel="external">spaCy ç¬¬äºŒç¯‡ï¼šè¯­è¨€æ¨¡å‹</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux Systemd Tutorial]]></title>
      <url>http://shopee.ai/2019/11/23/devops/linux-systemd-tutorial/</url>
      <content type="html"><![CDATA[<p><img src="/images/devops/systemd-logo.gif" width="400" alt="www.freedesktop.org"></p>
<a id="more"></a>
<h2 id="1-Preface"><a href="#1-Preface" class="headerlink" title="1. Preface"></a>1. Preface</h2><p>å†å²ä¸Šï¼ŒLinux çš„å¯åŠ¨ä¸€ç›´é‡‡ç”¨initè¿›ç¨‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo /etc/init.d/apache2 start</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">$ service apache2 start</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹:</p>
<ol>
<li>å¯åŠ¨æ—¶é—´é•¿</li>
<li>å¯åŠ¨è„šæœ¬å¤æ‚</li>
</ol>
<blockquote>
<p>init è¿›ç¨‹æ˜¯ä¸²è¡Œå¯åŠ¨ï¼Œåªæœ‰å‰ä¸€ä¸ªè¿›ç¨‹å¯åŠ¨å®Œï¼Œæ‰ä¼šå¯åŠ¨ä¸‹ä¸€ä¸ªè¿›ç¨‹ã€‚</p>
<p>init è¿›ç¨‹åªæ˜¯æ‰§è¡Œå¯åŠ¨è„šæœ¬ï¼Œä¸ç®¡å…¶ä»–äº‹æƒ…ã€‚è„šæœ¬éœ€è¦è‡ªå·±å¤„ç†å„ç§æƒ…å†µï¼Œè¿™å¾€å¾€ä½¿å¾—è„šæœ¬å˜å¾—å¾ˆé•¿ã€‚</p>
</blockquote>
<h2 id="2-Systemd-daemon"><a href="#2-Systemd-daemon" class="headerlink" title="2. Systemd (daemon)"></a>2. Systemd (daemon)</h2><p>Systemd å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜è€Œè¯ç”Ÿçš„ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯ï¼Œä¸ºç³»ç»Ÿçš„å¯åŠ¨å’Œç®¡ç†æä¾›ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æ ¹æ® Linux æƒ¯ä¾‹ï¼Œå­—æ¯dæ˜¯å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰çš„ç¼©å†™ã€‚ Systemd è¿™ä¸ªåå­—çš„å«ä¹‰ï¼Œå°±æ˜¯å®ƒè¦å®ˆæŠ¤æ•´ä¸ªç³»ç»Ÿã€‚</p>
<p><img src="/images/devops/linux-systemd-2.jpg" width="400" alt="Systemd Author: Lennart Poettering"></p>
<p>Linux OS Daemon management tool <strong>Systemd</strong> ã€‚å®ƒæ˜¯ OS çš„ä¸€éƒ¨åˆ†ï¼Œç›´æ¥ä¸ kernel äº¤äº’ï¼Œæ€§èƒ½æ£’ï¼ŒåŠŸèƒ½å¼ºã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥å°†ç¨‹åºäº¤ç»™ Systemd ï¼Œè®©ç³»ç»Ÿç»Ÿä¸€ç®¡ç†ï¼Œæˆä¸ºçœŸæ­£æ„ä¹‰ä¸Šçš„ç³»ç»ŸæœåŠ¡ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">æŸ¥çœ‹ Systemd çš„ç‰ˆæœ¬ã€‚</span><br><span class="line">$ systemctl --version</span><br></pre></td></tr></table></figure>
<h2 id="3-System-management"><a href="#3-System-management" class="headerlink" title="3. System management"></a>3. System management</h2><p>Systemd å¹¶ä¸æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œè€Œæ˜¯ä¸€ç»„å‘½ä»¤ï¼Œæ¶‰åŠåˆ°ç³»ç»Ÿç®¡ç†çš„æ–¹æ–¹é¢é¢ã€‚</p>
<p><img src="/images/devops/linux-systemd-1.png" width="700" alt=" Systemd æ¶æ„å›¾"></p>
<h2 id="4-Unit"><a href="#4-Unit" class="headerlink" title="4. Unit"></a>4. Unit</h2><p>Systemd å¯ä»¥ç®¡ç†æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚ä¸åŒçš„èµ„æºç»Ÿç§°ä¸º Unitï¼ˆå•ä½ï¼‰ã€‚</p>
<h3 id="4-1-Unit-definition"><a href="#4-1-Unit-definition" class="headerlink" title="4.1 Unit definition"></a>4.1 Unit definition</h3><p>Unit ä¸€å…±åˆ†æˆ12ç§:</p>
<blockquote>
<ul>
<li>Service unitï¼šç³»ç»ŸæœåŠ¡</li>
<li>Target unitï¼šå¤šä¸ª Unit æ„æˆçš„ä¸€ä¸ªç»„</li>
<li>Device Unitï¼šç¡¬ä»¶è®¾å¤‡</li>
<li>Mount Unitï¼šæ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹</li>
<li>Automount Unitï¼šè‡ªåŠ¨æŒ‚è½½ç‚¹</li>
<li>Path Unitï¼šæ–‡ä»¶æˆ–è·¯å¾„</li>
<li>Scope Unitï¼šä¸æ˜¯ç”± Systemd å¯åŠ¨çš„å¤–éƒ¨è¿›ç¨‹</li>
<li>Slice Unitï¼šè¿›ç¨‹ç»„</li>
<li>Snapshot Unitï¼šSystemd å¿«ç…§ï¼Œå¯ä»¥åˆ‡å›æŸä¸ªå¿«ç…§</li>
<li>Socket Unitï¼šè¿›ç¨‹é—´é€šä¿¡çš„ socket</li>
<li>Swap Unitï¼šswap æ–‡ä»¶</li>
<li>Timer Unitï¼šå®šæ—¶å™¨</li>
</ul>
</blockquote>
<p><code>systemctl list-units</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„æ‰€æœ‰ Unit </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„ Unit</span></span><br><span class="line">$ systemctl list-units</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰Unitï¼ŒåŒ…æ‹¬æ²¡æœ‰æ‰¾åˆ°é…ç½®æ–‡ä»¶çš„æˆ–è€…å¯åŠ¨å¤±è´¥çš„</span></span><br><span class="line">$ systemctl list-units --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰æ²¡æœ‰è¿è¡Œçš„ Unit</span></span><br><span class="line">$ systemctl list-units --all --state=inactive</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰åŠ è½½å¤±è´¥çš„ Unit</span></span><br><span class="line">$ systemctl list-units --failed</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ã€ç±»å‹ä¸º service çš„ Unit</span></span><br><span class="line">$ systemctl list-units --type=service</span><br></pre></td></tr></table></figure>
<h3 id="4-2-Unit-status"><a href="#4-2-Unit-status" class="headerlink" title="4.2 Unit status"></a>4.2 Unit status</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€</span></span><br><span class="line">$ systemctl status</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå•ä¸ª Unit çš„çŠ¶æ€</span></span><br><span class="line">$ sysystemctl status bluetooth.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºè¿œç¨‹ä¸»æœºçš„æŸä¸ª Unit çš„çŠ¶æ€</span></span><br><span class="line">$ systemctl -H root@rhel7.example.com status httpd.service</span><br></pre></td></tr></table></figure>
<p>é™¤äº† status å‘½ä»¤ï¼Œ systemctl è¿˜æä¾›äº†ä¸‰ä¸ªæŸ¥è¯¢çŠ¶æ€çš„ç®€å•æ–¹æ³•ï¼Œä¸»è¦ä¾›è„šæœ¬å†…éƒ¨çš„åˆ¤æ–­è¯­å¥ä½¿ç”¨ã€‚</p>
<h3 id="4-3-Unit-management"><a href="#4-3-Unit-management" class="headerlink" title="4.3 Unit management"></a>4.3 Unit management</h3><p>å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ä¸‹é¢è¿™äº›å‘½ä»¤ï¼Œç”¨äº start å’Œ stop Unitï¼ˆä¸»è¦æ˜¯ serviceï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç«‹å³å¯åŠ¨ä¸€ä¸ªæœåŠ¡</span></span><br><span class="line">$ sudo systemctl start apache.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç«‹å³åœæ­¢ä¸€ä¸ªæœåŠ¡</span></span><br><span class="line">$ sudo systemctl stop apache.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯ä¸€ä¸ªæœåŠ¡</span></span><br><span class="line">$ sudo systemctl restart apache.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ€æ­»ä¸€ä¸ªæœåŠ¡çš„æ‰€æœ‰å­è¿›ç¨‹</span></span><br><span class="line">$ sudo systemctl <span class="built_in">kill</span> apache.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½ä¸€ä¸ªæœåŠ¡çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">$ sudo systemctl reload apache.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡è½½æ‰€æœ‰ä¿®æ”¹è¿‡çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">$ sudo systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ª Unit çš„æ‰€æœ‰åº•å±‚å‚æ•°</span></span><br><span class="line">$ systemctl show httpd.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ª Unit çš„æŒ‡å®šå±æ€§çš„å€¼</span></span><br><span class="line">$ systemctl show -p CPUShares httpd.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æŸä¸ª Unit çš„æŒ‡å®šå±æ€§</span></span><br><span class="line">$ sudo systemctl <span class="built_in">set</span>-property httpd.service CPUShares=500</span><br></pre></td></tr></table></figure>
<h3 id="4-4-Unit-dependencies"><a href="#4-4-Unit-dependencies" class="headerlink" title="4.4 Unit dependencies"></a>4.4 Unit dependencies</h3><p>Unit ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼šA ä¾èµ–äº Bï¼Œå°±æ„å‘³ç€ Systemd åœ¨å¯åŠ¨ A çš„æ—¶å€™ï¼ŒåŒæ—¶ä¼šå»å¯åŠ¨ Bã€‚</p>
<p>systemctl list-dependencieså‘½ä»¤åˆ—å‡ºä¸€ä¸ª Unit çš„æ‰€æœ‰ä¾èµ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl list-dependencies nginx.service</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢å‘½ä»¤çš„è¾“å‡ºç»“æœä¹‹ä¸­ï¼Œæœ‰äº›ä¾èµ–æ˜¯ Target ç±»å‹ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œé»˜è®¤ä¸ä¼šå±•å¼€æ˜¾ç¤ºã€‚å¦‚æœè¦å±•å¼€ Targetï¼Œå°±éœ€è¦ä½¿ç”¨â€“allå‚æ•°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl list-dependencies --all nginx.service</span><br></pre></td></tr></table></figure>
<h2 id="5-Unit-config"><a href="#5-Unit-config" class="headerlink" title="5. Unit config"></a>5. Unit config</h2><h3 id="5-1-config-overview"><a href="#5-1-config-overview" class="headerlink" title="5.1 config overview"></a>5.1 config overview</h3><p>æ¯ä¸€ä¸ª Unit éƒ½æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘Šè¯‰ Systemd æ€ä¹ˆå¯åŠ¨è¿™ä¸ª Unit ã€‚</p>
<p>Systemd é»˜è®¤ä»ç›®å½• <code>/etc/systemd/system/</code> è¯»å–é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œé‡Œé¢å­˜æ”¾çš„å¤§éƒ¨åˆ†æ–‡ä»¶éƒ½æ˜¯ç¬¦å·é“¾æ¥ï¼ŒæŒ‡å‘ç›®å½• <code>/usr/lib/systemd/system/</code>ï¼ŒçœŸæ­£çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨é‚£ä¸ªç›®å½•ã€‚</p>
<p>systemctl enable å‘½ä»¤ç”¨äºåœ¨ä¸Šé¢ä¸¤ä¸ªç›®å½•ä¹‹é—´ï¼Œå»ºç«‹ç¬¦å·é“¾æ¥å…³ç³»ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">enable</span> clamd@scan.service</span><br><span class="line"><span class="comment"># ç­‰åŒäº</span></span><br><span class="line">$ sudo ln <span class="_">-s</span> <span class="string">'/usr/lib/systemd/system/clamd@scan.service'</span> <span class="string">'/etc/systemd/system/multi-user.target.wants/clamd@scan.service'</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>é…ç½®æ–‡ä»¶çš„åç¼€åï¼Œå°±æ˜¯è¯¥ Unit çš„ç§ç±»ï¼Œæ¯”å¦‚ sshd.socketã€‚å¦‚æœçœç•¥ï¼ŒSystemd é»˜è®¤åç¼€åä¸º.serviceï¼Œæ‰€ä»¥ sshd ä¼šè¢«ç†è§£æˆ sshd.serviceã€‚</p>
</blockquote>
<h3 id="5-2-config-status"><a href="#5-2-config-status" class="headerlink" title="5.2 config status"></a>5.2 config status</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰é…ç½®æ–‡ä»¶</span></span><br><span class="line">$ systemctl list-unit-files</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæŒ‡å®šç±»å‹çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">$ systemctl list-unit-files --type=service</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‘½ä»¤ä¼šè¾“å‡ºä¸€ä¸ªåˆ—è¡¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl list-unit-files</span><br><span class="line"></span><br><span class="line">UNIT FILE              STATE</span><br><span class="line">chronyd.service        enabled (å·²å¯åŠ¨é“¾æ¥)</span><br><span class="line">clamd@.service         static (è¯¥é…ç½®æ–‡ä»¶æ²¡æœ‰[Install]éƒ¨åˆ†ï¼ˆæ— æ³•æ‰§è¡Œï¼‰ï¼Œåªèƒ½ä½œä¸ºå…¶ä»–é…ç½®æ–‡ä»¶çš„ä¾èµ–)</span><br><span class="line">clamd@scan.service     disabled (æ²¡å»ºç«‹å¯åŠ¨é“¾æ¥)</span><br></pre></td></tr></table></figure>
<p>ä»é…ç½®æ–‡ä»¶çš„çŠ¶æ€æ— æ³•çœ‹å‡ºï¼Œè¯¥ Unit æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚è¿™å¿…é¡»æ‰§è¡Œå‰é¢æåˆ°çš„ systemctl status å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl status bluetooth.service</span><br></pre></td></tr></table></figure>
<p>ä¸€æ—¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°±è¦è®© SystemD é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œç„¶åé‡æ–°å¯åŠ¨ï¼Œå¦åˆ™ä¿®æ”¹ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo systemctl daemon-reload</span><br><span class="line">$ sudo systemctl restart httpd.service</span><br></pre></td></tr></table></figure>
<h3 id="5-3-config-format"><a href="#5-3-config-format" class="headerlink" title="5.3 config format"></a>5.3 config format</h3><p><code>systemctl cat service_name</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹é…ç½®æ–‡ä»¶çš„å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl cat atd.service</span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description=ATD daemon</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/bin/atd</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼Œé”®å€¼å¯¹çš„ç­‰å·ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼</p>
</blockquote>
<h3 id="5-4-config-block"><a href="#5-4-config-block" class="headerlink" title="5.4 config block"></a>5.4 config block</h3><p><code>[Unit]</code>åŒºå—æ˜¯é…ç½®æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªåŒºå—ï¼Œç”¨æ¥å®šä¹‰ Unit çš„å…ƒæ•°æ®åŠé…ç½®ä¸å…¶ä»– Unit çš„å…³ç³»ã€‚å®ƒçš„ä¸»è¦å­—æ®µå¦‚ä¸‹ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">field</th>
<th style="text-align:center">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Description</td>
<td style="text-align:center">ç®€çŸ­æè¿°</td>
</tr>
<tr>
<td style="text-align:center">Documentation</td>
<td style="text-align:center">æ–‡æ¡£åœ°å€</td>
</tr>
<tr>
<td style="text-align:center">Requires</td>
<td style="text-align:center">å½“å‰ Unit ä¾èµ–çš„å…¶ä»– Unitï¼Œå¦‚æœå®ƒä»¬æ²¡æœ‰è¿è¡Œï¼Œå½“å‰ Unit ä¼šå¯åŠ¨å¤±è´¥</td>
</tr>
<tr>
<td style="text-align:center">â€¦</td>
<td style="text-align:center">â€¦</td>
</tr>
<tr>
<td style="text-align:center">Assertâ€¦</td>
<td style="text-align:center">å½“å‰ Unit è¿è¡Œå¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼Œå¦åˆ™ä¼šæŠ¥å¯åŠ¨å¤±è´¥</td>
</tr>
</tbody>
</table>
<p><code>[Install]</code>åŒºå—æ˜¯é…ç½®æ–‡ä»¶çš„æœ€åä¸€ä¸ªåŒºå—ï¼Œç”¨æ¥å®šä¹‰å¦‚ä½•å¯åŠ¨ï¼Œä»¥åŠæ˜¯å¦å¼€æœºå¯åŠ¨ã€‚å®ƒçš„ä¸»è¦å­—æ®µå¦‚ä¸‹ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">field</th>
<th style="text-align:center">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">WantedBy</td>
<td style="text-align:center">å®ƒçš„å€¼æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª Targetï¼Œå½“å‰ Unit æ¿€æ´»æ—¶ï¼ˆenableï¼‰ç¬¦å·é“¾æ¥ä¼šæ”¾å…¥/etc/systemd/systemç›®å½•ä¸‹é¢ä»¥ Target å + .wantsåç¼€æ„æˆçš„å­ç›®å½•ä¸­. </td>
</tr>
<tr>
<td style="text-align:center">â€¦</td>
<td style="text-align:center">â€¦</td>
</tr>
<tr>
<td style="text-align:center">Alias</td>
<td style="text-align:center">å½“å‰ Unit å¯ç”¨äºå¯åŠ¨çš„åˆ«å</td>
</tr>
<tr>
<td style="text-align:center">Also</td>
<td style="text-align:center">å½“å‰ Unit æ¿€æ´»ï¼ˆenableï¼‰æ—¶ï¼Œä¼šè¢«åŒæ—¶æ¿€æ´»çš„å…¶ä»– Unit</td>
</tr>
</tbody>
</table>
<p><code>[Service]</code>åŒºå—ç”¨æ¥ Service çš„é…ç½®ï¼Œåªæœ‰ Service ç±»å‹çš„ Unit æ‰æœ‰è¿™ä¸ªåŒºå—ã€‚å®ƒçš„ä¸»è¦å­—æ®µå¦‚ä¸‹ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">field</th>
<th style="text-align:center">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Type</td>
<td style="text-align:center">å®šä¹‰å¯åŠ¨æ—¶çš„è¿›ç¨‹è¡Œä¸ºã€‚å®ƒæœ‰ä»¥ä¸‹å‡ ç§å€¼ã€‚</td>
</tr>
<tr>
<td style="text-align:center">â€¦</td>
<td style="text-align:center">â€¦</td>
</tr>
<tr>
<td style="text-align:center">Environment</td>
<td style="text-align:center">æŒ‡å®šç¯å¢ƒå˜é‡</td>
</tr>
</tbody>
</table>
<p>Unit é…ç½®æ–‡ä»¶çš„å®Œæ•´å­—æ®µæ¸…å•ï¼Œè¯·å‚è€ƒ<a href="https://www.freedesktop.org/software/systemd/man/systemd.unit.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>.</p>
<h2 id="6-Target-units"><a href="#6-Target-units" class="headerlink" title="6. Target (units)"></a>6. Target (units)</h2><p>å¯åŠ¨è®¡ç®—æœºçš„æ—¶å€™ï¼Œéœ€è¦å¯åŠ¨å¤§é‡çš„ Unitã€‚å¦‚æœæ¯ä¸€æ¬¡å¯åŠ¨ï¼Œéƒ½è¦ä¸€ä¸€å†™æ˜æœ¬æ¬¡å¯åŠ¨éœ€è¦å“ªäº› Unitï¼Œæ˜¾ç„¶éå¸¸ä¸æ–¹ä¾¿ã€‚Systemd çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ Targetã€‚ ç®€å•è¯´ï¼ŒTarget å°±æ˜¯ä¸€ä¸ª <strong>Unit ç»„</strong>ï¼ŒåŒ…å«è®¸å¤šç›¸å…³çš„ Unit ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„æ‰€æœ‰ Target</span></span><br><span class="line">$ systemctl list-unit-files --type=target</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¸€ä¸ª Target åŒ…å«çš„æ‰€æœ‰ Unit</span></span><br><span class="line">$ systemctl list-dependencies multi-user.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å¯åŠ¨æ—¶çš„é»˜è®¤ Target</span></span><br><span class="line">$ systemctl get-default</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¯åŠ¨æ—¶çš„é»˜è®¤ Target</span></span><br><span class="line">$ sudo systemctl <span class="built_in">set</span>-default multi-user.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢ Target æ—¶ï¼Œé»˜è®¤ä¸å…³é—­å‰ä¸€ä¸ª Target å¯åŠ¨çš„è¿›ç¨‹ï¼Œ</span></span><br><span class="line"><span class="comment"># systemctl isolate å‘½ä»¤æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œ</span></span><br><span class="line"><span class="comment"># å…³é—­å‰ä¸€ä¸ª Target é‡Œé¢æ‰€æœ‰ä¸å±äºåä¸€ä¸ª Target çš„è¿›ç¨‹</span></span><br><span class="line">$ sudo systemctl isolate multi-user.target</span><br></pre></td></tr></table></figure>
<p>Target ä¸ ä¼ ç»Ÿ RunLevel çš„å¯¹åº”å…³ç³»å¦‚ä¸‹:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Traditional runlevel      New target name     Symbolically linked to...</span><br><span class="line"></span><br><span class="line">Runlevel 0           |    runlevel0.target -&gt; poweroff.target</span><br><span class="line">Runlevel 1           |    runlevel1.target -&gt; rescue.target</span><br><span class="line">Runlevel 2           |    runlevel2.target -&gt; multi-user.target</span><br><span class="line">Runlevel 3           |    runlevel3.target -&gt; multi-user.target</span><br><span class="line">Runlevel 4           |    runlevel4.target -&gt; multi-user.target</span><br><span class="line">Runlevel 5           |    runlevel5.target -&gt; graphical.target</span><br><span class="line">Runlevel 6           |    runlevel6.target -&gt; reboot.target</span><br></pre></td></tr></table></figure>
<h2 id="7-Log-management"><a href="#7-Log-management" class="headerlink" title="7. Log management"></a>7. Log management</h2><p>Systemd ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ Unit çš„å¯åŠ¨æ—¥å¿—ã€‚å¸¦æ¥çš„å¥½å¤„å°±æ˜¯ï¼Œå¯ä»¥åªç”¨ journalctl ä¸€ä¸ªå‘½ä»¤ï¼ŒæŸ¥çœ‹æ‰€æœ‰æ—¥å¿—ï¼ˆå†…æ ¸æ—¥å¿—å’Œåº”ç”¨æ—¥å¿—ï¼‰ã€‚æ—¥å¿—çš„é…ç½®æ–‡ä»¶æ˜¯ <code>/etc/systemd/journald.conf</code>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æŸä¸ª Unit çš„æ—¥å¿—</span></span><br><span class="line">$ sudo journalctl -u nginx.service</span><br><span class="line">$ sudo journalctl -u nginx.service --since today</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®æ—¶æ»šåŠ¨æ˜¾ç¤ºæŸä¸ª Unit çš„æœ€æ–°æ—¥å¿—</span></span><br><span class="line">$ sudo journalctl -u nginx.service <span class="_">-f</span></span><br></pre></td></tr></table></figure>
<p>å®ƒä¸<code>init</code>è¿›ç¨‹çš„ä¸»è¦å·®åˆ«å¦‚ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰é»˜è®¤çš„ RunLevelï¼ˆåœ¨/etc/inittabæ–‡ä»¶è®¾ç½®ï¼‰ç°åœ¨è¢«é»˜è®¤çš„ Target å–ä»£ï¼Œä½ç½®æ˜¯/etc/systemd/system/default.targetï¼Œé€šå¸¸ç¬¦å·é“¾æ¥åˆ°graphical.targetï¼ˆå›¾å½¢ç•Œé¢ï¼‰æˆ–è€…multi-user.targetï¼ˆå¤šç”¨æˆ·å‘½ä»¤è¡Œï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">ï¼ˆ2ï¼‰å¯åŠ¨è„šæœ¬çš„ä½ç½®ï¼Œä»¥å‰æ˜¯/etc/init.dç›®å½•ï¼Œç¬¦å·é“¾æ¥åˆ°ä¸åŒçš„ RunLevel ç›®å½• ï¼ˆæ¯”å¦‚/etc/rc3.dã€/etc/rc5.dç­‰ï¼‰ï¼Œç°åœ¨åˆ™å­˜æ”¾åœ¨/lib/systemd/systemå’Œ/etc/systemd/systemç›®å½•ã€‚</span><br><span class="line"></span><br><span class="line">ï¼ˆ3ï¼‰é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œä»¥å‰initè¿›ç¨‹çš„é…ç½®æ–‡ä»¶æ˜¯/etc/inittabï¼Œå„ç§æœåŠ¡çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨/etc/sysconfigç›®å½•ã€‚ç°åœ¨çš„é…ç½®æ–‡ä»¶ä¸»è¦å­˜æ”¾åœ¨/lib/systemdç›®å½•ï¼Œåœ¨/etc/systemdç›®å½•é‡Œé¢çš„ä¿®æ”¹å¯ä»¥è¦†ç›–åŸå§‹è®¾ç½®ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2013/02/booting.html" target="_blank" rel="external">é˜®ä¸€å³°: è®¡ç®—æœºæ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼Ÿ âœ”ï¸</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html" target="_blank" rel="external">é˜®ä¸€å³°: Linux çš„å¯åŠ¨æµç¨‹ âœ”ï¸</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/02/linux-daemon.html" target="_blank" rel="external">é˜®ä¸€å³°: Linux daemon (å®ˆæŠ¤è¿›ç¨‹)çš„å¯åŠ¨æ–¹æ³• âœ”ï¸</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html" target="_blank" rel="external">é˜®ä¸€å³°: Systemd å…¥é—¨æ•™ç¨‹ï¼šå‘½ä»¤ç¯‡ âœ”ï¸</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2009/06/unix_philosophy.html" target="_blank" rel="external">é˜®ä¸€å³°: Kiss (Keep it sample stupid) Unixå“²å­¦ âœ”ï¸</a></li>
</ul>
<ul>
<li><a href="https://www.freedesktop.org/wiki/Software/systemd/" target="_blank" rel="external">Systemd Service Manager</a></li>
<li><a href="https://linux.cn/article-8835-1.html" target="_blank" rel="external">Great:  Linux ç³»ç»Ÿå¼€æœºå¯åŠ¨é¡¹æ¸…ç†</a></li>
<li><a href="https://www.linux.com/tutorials/understanding-and-using-systemd/" target="_blank" rel="external">Understanding And Using Systemd</a></li>
</ul>
<p><strong>sudo</strong></p>
<ul>
<li><a href="https://www.cnblogs.com/hazir/p/sudo_command.html" target="_blank" rel="external">sudo å‘½ä»¤æƒ…æ™¯åˆ†æ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/36037822" target="_blank" rel="external">Linux ç³»ç»Ÿä¸­ sudo å‘½ä»¤çš„ 10 ä¸ªæŠ€å·§</a></li>
<li><a href="http://cn.linux.vbird.org/linux_basic/0410accountmanager_4.php" target="_blank" rel="external">é¸Ÿå“¥çš„ç§æˆ¿èœï¼š ç¬¬åå››ç« ã€Linux è´¦å·ç®¡ç†ä¸ ACL æƒé™é…ç½®</a></li>
</ul>
<!--table {
    width: 100%; /*è¡¨æ ¼å®½åº¦*/
    max-width: 65em; /*è¡¨æ ¼æœ€å¤§å®½åº¦ï¼Œé¿å…è¡¨æ ¼è¿‡å®½*/
    border: 1px solid #dedede; /*è¡¨æ ¼å¤–è¾¹æ¡†è®¾ç½®*/
    margin: 15px auto; /*å¤–è¾¹è·*/
    border-collapse: collapse; /*ä½¿ç”¨å•ä¸€çº¿æ¡çš„è¾¹æ¡†*/
    empty-cells: show; /*å•å…ƒæ ¼æ— å†…å®¹ä¾æ—§ç»˜åˆ¶è¾¹æ¡†*/
}
table th,
table td {
  height: 35px; /*ç»Ÿä¸€æ¯ä¸€è¡Œçš„é»˜è®¤é«˜åº¦*/
  border: 1px solid #dedede; /*å†…éƒ¨è¾¹æ¡†æ ·å¼*/
  padding:
-->
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Anaconda + Tensorflow ç¯å¢ƒæ­å»º]]></title>
      <url>http://shopee.ai/2019/11/08/nlp/tensorflow_env_build/</url>
      <content type="html"><![CDATA[<p><img src="/images/devops/Anaconda-Jupyter-Tensorflow.png" width="550" alt="bert é‡è§ keras"></p>
<a id="more"></a>
<h2 id="1-Anaconda"><a href="#1-Anaconda" class="headerlink" title="1. Anaconda"></a>1. Anaconda</h2><h3 id="1-1-Anaconda-å¸¸ç”¨å‘½ä»¤"><a href="#1-1-Anaconda-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="1.1 Anaconda å¸¸ç”¨å‘½ä»¤"></a>1.1 Anaconda å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda --version</span><br><span class="line">conda update conda</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># å¸®åŠ©å‘½ä»¤</span><br><span class="line">conda -h</span><br><span class="line"></span><br><span class="line"># æ›´æ–°æ‰€æœ‰åŒ…</span><br><span class="line">conda update --all</span><br><span class="line">conda upgrade --all</span><br></pre></td></tr></table></figure>
<h3 id="1-2-Anaconda-ç®¡ç†ç¯å¢ƒ"><a href="#1-2-Anaconda-ç®¡ç†ç¯å¢ƒ" class="headerlink" title="1.2 Anaconda ç®¡ç†ç¯å¢ƒ"></a>1.2 Anaconda ç®¡ç†ç¯å¢ƒ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda create --name &lt;env_name&gt; &lt;package_names&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚ï¼š conda create -n python3 python=3.5 numpy pandas </p>
<p>  å³åˆ›å»ºä¸€ä¸ªåä¸ºâ€œpython3â€çš„ç¯å¢ƒï¼Œç¯å¢ƒä¸­å®‰è£…ç‰ˆæœ¬ä¸º3.5çš„pythonï¼ŒåŒæ—¶ä¹Ÿå®‰è£…äº†numpyå’Œpandasã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda info --envs</span><br><span class="line"></span><br><span class="line">conda env list</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> activate &lt;env_name&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¤åˆ¶ç¯å¢ƒ</span></span><br><span class="line">conda create --name &lt;new_env_name&gt; --clone &lt;copied_env_name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ç¯å¢ƒ</span></span><br><span class="line">conda remove --name &lt;env_name&gt; --all</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip list / conda list</span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“ä½¿ç”¨ conda install æ— æ³•è¿›è¡Œå®‰è£…æ—¶ï¼Œå¯ä»¥ä½¿ç”¨pipè¿›è¡Œå®‰è£…</span></span><br><span class="line">pip install &lt;package_name&gt;</span><br></pre></td></tr></table></figure>
<h2 id="2-Tensorflow"><a href="#2-Tensorflow" class="headerlink" title="2. Tensorflow"></a>2. Tensorflow</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda install pandas xlrd</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda install keras==2.2.4</span><br><span class="line">pip install keras-bert</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda install tensorflow==<span class="string">'1.11.0'</span></span><br><span class="line">conda install tensorflow-gpu==<span class="string">'1.11.0'</span></span><br></pre></td></tr></table></figure>
<h2 id="3-GPU"><a href="#3-GPU" class="headerlink" title="3. GPU"></a>3. GPU</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nvidia-smi</span><br><span class="line"></span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                       GPU Memory |</span><br><span class="line">|  GPU       PID   Type   Process name                             Usage      |</span><br><span class="line">|=============================================================================|</span><br><span class="line">|    6      7847      C   python                                     11615MiB |</span><br><span class="line">|    7      6412      C   python                                      4219MiB |</span><br><span class="line">|    8     36257      C   .../anaconda2/envs/bert-serving/bin/python 11615MiB |</span><br><span class="line">|    9     17293      C   /home/xxx/.conda/envs/aspect/bin/python    11613MiB |</span><br><span class="line">+-----------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>
<p>è§£å†³ cuda10 å› ä¸ºæ˜¾å¡é©±åŠ¨ä¸æ”¯æŒçš„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">conda install cudatoolkit=9.0</span><br></pre></td></tr></table></figure>
<p>ç”¨å¦‚ä¸‹ä»£ç å¯æ£€æµ‹tensorflowçš„èƒ½ä½¿ç”¨è®¾å¤‡æƒ…å†µï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorflow.python.client <span class="keyword">import</span> device_lib</span><br><span class="line">print(device_lib.list_local_devices())</span><br></pre></td></tr></table></figure>
<h2 id="4-CPU"><a href="#4-CPU" class="headerlink" title="4. CPU"></a>4. CPU</h2><p>Kerasä»¥åŠTensorflowå¼ºåˆ¶ä½¿ç”¨CPU</p>
<p>ä½¿ç”¨CUDA_VISIBLE_DEVICESå‘½ä»¤è¡Œå‚æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CUDA_VISIBLE_DEVICES=<span class="string">""</span> python3 train.py</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/32925500" target="_blank" rel="external">Anacondaä»‹ç»ã€å®‰è£…åŠä½¿ç”¨æ•™ç¨‹</a></li>
<li><a href="https://www.cnblogs.com/nxf-rabbit75/p/10639833.html" target="_blank" rel="external">Tensorflowæ£€éªŒGPUæ˜¯å¦å®‰è£…æˆåŠŸ åŠ ä½¿ç”¨GPUè®­ç»ƒæ³¨æ„äº‹é¡¹</a></li>
<li><a href="https://blog.csdn.net/u010513327/article/details/81124110" target="_blank" rel="external">æŠ¥é”™ï¼šcudaGetDevice() failed. Status: CUDA driver version is</a></li>
<li><a href="https://tensorflow.google.cn/install/source" target="_blank" rel="external">https://tensorflow.google.cn/install/source</a></li>
<li><a href="https://www.cnblogs.com/hutao722/p/9583214.html" target="_blank" rel="external">tensorflow ä½¿ç”¨CPUè€Œä¸ä½¿ç”¨GPUçš„é—®é¢˜è§£å†³</a></li>
<li><a href="https://blog.csdn.net/silent56_th/article/details/72628606" target="_blank" rel="external">Kerasä»¥åŠTensorflowå¼ºåˆ¶ä½¿ç”¨CPU</a></li>
</ul>
<p>Good!</p>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/38330654" target="_blank" rel="external">æ•™ç¨‹ | ä½¿ç”¨ PyCharm è¿æ¥æœåŠ¡å™¨è¿›è¡Œè¿œç¨‹å¼€å‘å’Œè°ƒè¯•</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Bert æœ€ç®€å•çš„æ‰“å¼€å§¿åŠ¿]]></title>
      <url>http://shopee.ai/2019/11/08/nlp/bert_keras-tutorial/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/bert-keras-1.jpeg" width="550" alt="bert é‡è§ keras"></p>
<a id="more"></a>
<h2 id="1-å½“Berté‡ä¸ŠKeras"><a href="#1-å½“Berté‡ä¸ŠKeras" class="headerlink" title="1. å½“Berté‡ä¸ŠKeras"></a>1. å½“Berté‡ä¸ŠKeras</h2><p>åœ¨Kerasä¸‹å¯¹Bertæœ€å¥½çš„å°è£…æ˜¯ï¼š</p>
<p>keras-bertï¼š<a href="https://github.com/CyberZHG/keras-bert" target="_blank" rel="external">https://github.com/CyberZHG/keras-bert</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#! -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice</span><br><span class="line"><span class="keyword">from</span> keras_bert <span class="keyword">import</span> load_trained_model_from_checkpoint, Tokenizer</span><br><span class="line"><span class="keyword">import</span> re, os</span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">maxlen = <span class="number">100</span></span><br><span class="line">config_path = <span class="string">'../bert/chinese_L-12_H-768_A-12/bert_config.json'</span></span><br><span class="line">checkpoint_path = <span class="string">'../bert/chinese_L-12_H-768_A-12/bert_model.ckpt'</span></span><br><span class="line">dict_path = <span class="string">'../bert/chinese_L-12_H-768_A-12/vocab.txt'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">token_dict = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># dict_path = './bert/chinese_L-12_H-768_A-12/vocab.txt'</span></span><br><span class="line"><span class="keyword">with</span> codecs.open(dict_path, <span class="string">'r'</span>, <span class="string">'utf8'</span>) <span class="keyword">as</span> reader:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> reader:</span><br><span class="line">        token = line.strip()</span><br><span class="line">        token_dict[token] = len(token_dict)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OurTokenizer</span><span class="params">(Tokenizer)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_tokenize</span><span class="params">(self, text)</span>:</span></span><br><span class="line">        R = []</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> text:</span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">in</span> self._token_dict:</span><br><span class="line">                print(c)</span><br><span class="line">                R.append(c)</span><br><span class="line">            <span class="keyword">elif</span> self._is_space(c):</span><br><span class="line">                R.append(<span class="string">'[unused1]'</span>) <span class="comment"># spaceç±»ç”¨æœªç»è®­ç»ƒçš„[unused1]è¡¨ç¤º</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                R.append(<span class="string">'[UNK]'</span>) <span class="comment"># å‰©ä½™çš„å­—ç¬¦æ˜¯[UNK]</span></span><br><span class="line">        <span class="keyword">return</span> R</span><br><span class="line"></span><br><span class="line">tokenizer = OurTokenizer(token_dict)</span><br><span class="line">tokenizer</span><br><span class="line"></span><br><span class="line">tokenizer = OurTokenizer(token_dict)</span><br><span class="line">tokenizer.tokenize(<span class="string">u'ä»Šå¤©å¤© æ°”ä¸é”™'</span>)</span><br></pre></td></tr></table></figure>
<p>output:</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[&apos;[CLS]&apos;, &apos;ä»Š&apos;, &apos;å¤©&apos;, &apos;å¤©&apos;, &apos;[unused1]&apos;, &apos;æ°”&apos;, &apos;ä¸&apos;, &apos;é”™&apos;, &apos;[SEP]&apos;]</span><br></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<p>è¿™é‡Œç®€å•è§£é‡Šä¸€ä¸‹Tokenizerçš„è¾“å‡ºç»“æœã€‚é¦–å…ˆï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ†è¯åå¥å­é¦–ä½ä¼šåˆ†åˆ«åŠ ä¸Š[CLS]å’Œ[SEP]æ ‡è®°ï¼Œå…¶ä¸­[CLS]ä½ç½®å¯¹åº”çš„è¾“å‡ºå‘é‡æ˜¯èƒ½ä»£è¡¨æ•´å¥çš„å¥å‘é‡ï¼ˆåæ­£Bertæ˜¯è¿™æ ·è®¾è®¡çš„ï¼‰ï¼Œè€Œ[SEP]åˆ™æ˜¯å¥é—´çš„åˆ†éš”ç¬¦ï¼Œå…¶ä½™éƒ¨åˆ†åˆ™æ˜¯å•å­—è¾“å‡ºï¼ˆå¯¹äºä¸­æ–‡æ¥è¯´ï¼‰</p>
</blockquote>
<h2 id="2-Sentiment-classification"><a href="#2-Sentiment-classification" class="headerlink" title="2. Sentiment classification"></a>2. Sentiment classification</h2><ul>
<li><a href="https://kexue.fm/archives/3360" target="_blank" rel="external">æ–‡æœ¬æƒ…æ„Ÿåˆ†ç±»ï¼ˆä¸€ï¼‰ï¼šä¼ ç»Ÿæ¨¡å‹</a> </li>
<li><a href="https://kexue.fm/archives/3414" target="_blank" rel="external">æ–‡æœ¬æƒ…æ„Ÿåˆ†ç±»ï¼ˆäºŒï¼‰ï¼šæ·±åº¦å­¦ä¹ æ¨¡å‹</a> </li>
</ul>
<p>åšä¸€ä¸ªæœ€åŸºæœ¬çš„æ–‡æœ¬åˆ†ç±»ä»»åŠ¡:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bert_model = load_trained_model_from_checkpoint(config_path, checkpoint_path, seq_len=None)</span><br><span class="line"></span><br><span class="line">for l in bert_model.layers:</span><br><span class="line">    l.trainable = True</span><br><span class="line"></span><br><span class="line">x1_in = Input(shape=(None,))</span><br><span class="line">x2_in = Input(shape=(None,))</span><br><span class="line"></span><br><span class="line">x = bert_model([x1_in, x2_in])</span><br><span class="line">x = Lambda(lambda x: x[:, 0])(x) # å–å‡º[CLS]å¯¹åº”çš„å‘é‡ç”¨æ¥åšåˆ†ç±»</span><br><span class="line">p = Dense(1, activation=&apos;sigmoid&apos;)(x)</span><br><span class="line"></span><br><span class="line">model = Model([x1_in, x2_in], p)</span><br><span class="line">model.compile(</span><br><span class="line">    loss=&apos;binary_crossentropy&apos;,</span><br><span class="line">    optimizer=Adam(1e-5), # </span><br><span class="line">    metrics=[&apos;accuracy&apos;]</span><br><span class="line">)</span><br><span class="line">model.summary()</span><br></pre></td></tr></table></figure>
<p>åœ¨Kerasä¸­è°ƒç”¨Bertæ¥åšæƒ…æ„Ÿåˆ†ç±»ä»»åŠ¡å°±è¿™æ ·å†™å®Œäº†ï½å†™å®Œäº†ï½ï½</p>
<h2 id="3-è¿è¡Œæ•ˆæœ"><a href="#3-è¿è¡Œæ•ˆæœ" class="headerlink" title="3. è¿è¡Œæ•ˆæœ"></a>3. è¿è¡Œæ•ˆæœ</h2><p>æ‰€æœ‰çš„ params train</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> l <span class="keyword">in</span> bert_model.layers:</span><br><span class="line">    l.trainable = <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/nlp/bert-keras-2.png" width="800" alt="bert keras Sentiment analysis"></p>
<p>åŠ è½½çš„ bert params non-train</p>
<p><img src="/images/nlp/bert-keras-3.png" width="800" alt="bert keras Sentiment analysis"></p>
<h2 id="4-æŒ‡å¯¼åŸåˆ™"><a href="#4-æŒ‡å¯¼åŸåˆ™" class="headerlink" title="4. æŒ‡å¯¼åŸåˆ™"></a>4. æŒ‡å¯¼åŸåˆ™</h2><p>æœ‰ä»€ä¹ˆåŸåˆ™æ¥æŒ‡å¯¼Bertåé¢åº”è¯¥è¦æ¥å“ªäº›å±‚ï¼Ÿ</p>
<blockquote>
<p>ç­”æ¡ˆæ˜¯ï¼šç”¨å°½å¯èƒ½å°‘çš„å±‚æ¥å®Œæˆä½ çš„ä»»åŠ¡ã€‚</p>
<p>æ¯”å¦‚ä¸Šè¿°æƒ…æ„Ÿåˆ†æåªæ˜¯ä¸€ä¸ªäºŒåˆ†ç±»ä»»åŠ¡ï¼Œä½ å°±å–å‡ºç¬¬ä¸€ä¸ªå‘é‡ç„¶ååŠ ä¸ªDense(1)å°±å¥½äº†ï¼Œä¸è¦æƒ³ç€å¤šåŠ å‡ å±‚Denseï¼Œæ›´åŠ ä¸è¦æƒ³ç€æ¥ä¸ªLSTMå†æ¥Denseï¼›</p>
<p>å¦‚æœä½ è¦åšåºåˆ—æ ‡æ³¨ï¼ˆæ¯”å¦‚NERï¼‰ï¼Œé‚£ä½ å°±æ¥ä¸ªDense+CRFå°±å¥½ï¼Œä¹Ÿä¸è¦å¤šåŠ å…¶ä»–ä¸œè¥¿ã€‚</p>
<p>æ€»ä¹‹ï¼Œé¢å¤–åŠ çš„ä¸œè¥¿å°½å¯èƒ½å°‘ã€‚ä¸€æ˜¯å› ä¸ºBertæœ¬èº«å°±è¶³å¤Ÿå¤æ‚ï¼Œå®ƒæœ‰è¶³å¤Ÿèƒ½åŠ›åº”å¯¹ä½ è¦åšçš„å¾ˆå¤šä»»åŠ¡ï¼›äºŒæ¥ä½ è‡ªå·±åŠ çš„å±‚éƒ½æ˜¯éšå³åˆå§‹åŒ–çš„ï¼ŒåŠ å¤ªå¤šä¼šå¯¹Bertçš„é¢„è®­ç»ƒæƒé‡é€ æˆå‰§çƒˆæ‰°åŠ¨ï¼Œå®¹æ˜“é™ä½æ•ˆæœç”šè‡³é€ æˆæ¨¡å‹ä¸æ”¶æ•›</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://kexue.fm/archives/4765" target="_blank" rel="external">ã€ŠAttention is All You Needã€‹-è‹ç¥</a></li>
<li><a href="https://arxiv.org/abs/1810.04805" target="_blank" rel="external">BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding</a></li>
<li><a href="https://blog.csdn.net/itplus" target="_blank" rel="external">æ·±åº¦å­¦ä¹ æ•™ç¨‹-è‹ç¥</a> ã€ <a href="https://kexue.fm/archives/6736" target="_blank" rel="external">å½“Berté‡ä¸ŠKeras-è‹ç¥</a></li>
<li><a href="https://keras.io/zh/models/model/#fit_generator" target="_blank" rel="external">Kerasä¸­æ–‡æ–‡æ¡£ fit_generator</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/80880371" target="_blank" rel="external">å¼€å¯NLPçš„å¤§é­”æ³•é˜µâ€”â€”é€šè¿‡Keras-Bertæ“çºµBert</a></li>
</ul>
<p>è¶…ç‰›æ¨è</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">albert</span><br><span class="line">https://arxiv.org/pdf/1909.11942.pdf</span><br><span class="line">ELECTRA</span><br><span class="line">https://openreview.net/pdf?id=r1xMH1BtvB</span><br><span class="line">bert attention analysis</span><br><span class="line">https://nlp.stanford.edu/pubs/clark2019what.pdf</span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ElasticSearch å„ç§æŸ¥è¯¢å…³é”®å­—çš„åŒºåˆ«]]></title>
      <url>http://shopee.ai/2019/10/31/elasticsearch/es-keyword-for-search/</url>
      <content type="html"><![CDATA[<p><img src="/images/elastic/elastic-keyword-1.jpg" width="550" alt="ElasticSearch"></p>
<a id="more"></a>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://my.oschina.net/weiweiblog/blog/1574020" target="_blank" rel="external">ElasticSearchå„ç§æŸ¥è¯¢å…³é”®å­—çš„åŒºåˆ«</a></li>
<li><a href="https://mp.weixin.qq.com/s/dn1n2FGwG9BNQuJUMVmo7w" target="_blank" rel="external">ç»ˆäºæœ‰äººæŠŠelasticsearchåŸç†è®²é€šäº†ï¼</a></li>
<li><a href="https://wjw465150.github.io/Elasticsearch/3_2_DeepSearch.html#" target="_blank" rel="external">æ·±å…¥æœç´¢</a></li>
<li><a href="http://doc.codingdict.com/elasticsearch/251/" target="_blank" rel="external">Function Score æŸ¥è¯¢</a></li>
<li><a href="https://www.cnblogs.com/wangiqngpei557/p/10423875.html" target="_blank" rel="external">ElasticSearch è¯„åˆ†æ’åº</a></li>
<li><a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/controlling-relevance.html" target="_blank" rel="external">æ·±å…¥æœç´¢ Â» æ§åˆ¶ç›¸å…³åº¦</a></li>
<li><a href="https://n3xtchen.github.io/n3xtchen/elasticsearch/2017/07/05/elasticsearch-23-useful-query-example" target="_blank" rel="external">19 ä¸ªå¾ˆæœ‰ç”¨çš„ ElasticSearch æŸ¥è¯¢è¯­å¥</a></li>
<li><a href="https://www.cnblogs.com/ljhdo/p/4577065.html" target="_blank" rel="external">ElasticSearchæŸ¥è¯¢ ç¬¬å››ç¯‡ï¼šåŒ¹é…æŸ¥è¯¢ï¼ˆMatchï¼‰</a></li>
<li><a href="https://juejin.im/post/5c180f0df265da6124155db5" target="_blank" rel="external">Elasticsearch bool queryå°ç»“ (è§£å†³shouldå¤±æ•ˆ)</a></li>
<li><a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/most-fields.html#most-fields" target="_blank" rel="external">æ·±å…¥æœç´¢ Â» å¤šå­—æ®µæœç´¢ Â» å¤šæ•°å­—æ®µ</a></li>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/analysis-stemmer-tokenfilter.html" target="_blank" rel="external">Stemmer Token Filter</a></li>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.2/analysis-analyzers.html" target="_blank" rel="external">Elasticsearch Reference [6.2] Â» Analysis Â» Analyzers</a></li>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.2/analysis-standard-analyzer.html" target="_blank" rel="external">Elasticsearch Reference [6.2] Â» Analysis Â» Analyzers Â» Standard Analyzer</a></li>
<li><a href="https://blog.csdn.net/shuimofengyang/article/details/88973597" target="_blank" rel="external">Elasticsearchä¿®æ”¹åˆ†è¯å™¨ä»¥åŠè‡ªå®šä¹‰åˆ†è¯å™¨</a></li>
<li><a href="https://www.cnblogs.com/shoufeng/p/10562746.html" target="_blank" rel="external">ES 09 - Elasticsearchå¦‚ä½•å®šåˆ¶åˆ†è¯å™¨ (è‡ªå®šä¹‰åˆ†è¯ç­–ç•¥)</a></li>
<li><a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/stemming-in-situ.html" target="_blank" rel="external">å¤„ç†äººç±»è¯­è¨€ Â» å°†å•è¯è¿˜åŸä¸ºè¯æ ¹ Â» åŸå½¢è¯å¹²æå–</a></li>
<li><a href="https://my.oschina.net/u/3625378/blog/1492575" target="_blank" rel="external">elasticsearch shouldå®ç°oråŠŸèƒ½ï¼Œè®¾ç½®minimum_should_match</a></li>
<li><a href="https://www.elastic.co/guide/cn/kibana/current/discover.html" target="_blank" rel="external">Kibana ç”¨æˆ·æ‰‹å†Œ Â» æ•°æ®æ¢ç´¢</a></li>
<li><a href="https://www.elastic.co/guide/cn/elasticsearch/guide/current/bool-query.html" target="_blank" rel="external">Elasticsearch: æƒå¨æŒ‡å— Â» æ·±å…¥æœç´¢ Â» å…¨æ–‡æœç´¢ Â» ç»„åˆæŸ¥è¯¢</a></li>
<li><a href="http://s0www0elastic0co.icopy.site/guide/en/elasticsearch/reference/6.4/search-request-collapse.html" target="_blank" rel="external">Elasticsearch Reference [6.4] Â» Search APIs Â» Request Body Search Â» Field Collapsing</a></li>
<li><a href="https://blog.csdn.net/ZYC88888/article/details/83023143" target="_blank" rel="external">ES Field Collapsing å­—æ®µæŠ˜å ä½¿ç”¨è¯¦è§£</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Kubernetes tutorial]]></title>
      <url>http://shopee.ai/2019/10/28/devops/kubernetes-tutorial/</url>
      <content type="html"><![CDATA[<p><img src="/images/devops/kubernetes-1.png" width="550" alt="kubernetes.io"></p>
<a id="more"></a>
<h2 id="1-Kubernetes-what"><a href="#1-Kubernetes-what" class="headerlink" title="1. Kubernetes what?"></a>1. Kubernetes what?</h2><p>Kubernetes (K8s) is an open-source system for automating deployment, scaling, and management of containerized applications.</p>
<p>Kubernetes minikube install @Mac</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sysctl <span class="_">-a</span> | grep -E --color <span class="string">'machdep.cpu.features|VMX'</span> </span><br><span class="line"></span><br><span class="line">brew cask install minikube</span><br><span class="line"></span><br><span class="line">åŒæ™‚å®ƒä¹Ÿæœƒä¸€èµ·å®‰è£ kubectl é€™å€‹ Kubernetes æŒ‡ä»¤æ“ä½œå·¥å…· kubectl</span><br></pre></td></tr></table></figure>
<p>minikube version</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># /tmp/fluentd/etc [9:47:26]</span></span><br><span class="line">âœ minikube version</span><br><span class="line">minikube version: v1.5.0</span><br><span class="line">commit: d1151d93385a70c5a03775e166e94067791fe2d9</span><br><span class="line"></span><br><span class="line">minikube ä¸»è¦æ˜¯ç”¨åœ¨ç·´ç¿’å’Œæ•™å­¸ä½¿ç”¨, éç”Ÿäº§ç¯å¢ƒ.</span><br></pre></td></tr></table></figure>
<p>Kubernetes is growing rapidly, has become a leader in <strong>Container Orchestration</strong>ã€‚</p>
<h2 id="2-Kubernetes-whyï¼Ÿ"><a href="#2-Kubernetes-whyï¼Ÿ" class="headerlink" title="2. Kubernetes whyï¼Ÿ"></a>2. Kubernetes whyï¼Ÿ</h2><p>ç”Ÿäº§ç¯å¢ƒåº”ç”¨ä¼šåŒ…å«å¤šä¸ª Containersï¼Œè€Œè¿™äº› Containers è¿˜å¾ˆå¯èƒ½ä¼šè·¨è¶Šå¤šä¸ªæœåŠ¡å™¨ä¸»æœºéƒ¨ç½²ã€‚</p>
<blockquote>
<ol>
<li>Kubernetes æä¾›äº†ä¸ºé‚£äº›å·¥ä½œè´Ÿè½½å¤§è§„æ¨¡éƒ¨ç½² Container çš„ç¼–æ’ä¸ç®¡ç†èƒ½åŠ›.</li>
<li>Kubernetes ç¼–æ’èƒ½æ„å»ºå¤šå®¹å™¨åº”ç”¨æœåŠ¡ï¼Œåœ¨é›†ç¾¤ä¸Šè°ƒåº¦æˆ–ä¼¸ç¼©è¿™äº›å®¹å™¨ï¼ŒåŠç®¡ç†å®ƒä»¬éšæ—¶é—´å˜åŒ–çš„å¥åº·çŠ¶æ€.</li>
</ol>
<p>Kubernetes ä¹Ÿéœ€è¦ä¸ç½‘ç»œã€å­˜å‚¨ã€å®‰å…¨ã€ç›‘æ§ç­‰å…¶å®ƒæœåŠ¡é›†æˆæ‰èƒ½æä¾›ç»¼åˆæ€§çš„å®¹å™¨åŸºç¡€è®¾æ–½ã€‚</p>
</blockquote>
<p>æœ‰äº† Kubernetesï¼Œä½ å¯ä»¥ï¼š</p>
<blockquote>
<ul>
<li>è·¨ä¸»æœºç¼–æ’ Container;</li>
<li>æ§åˆ¶ä¸è‡ªåŠ¨åŒ–åº”ç”¨çš„éƒ¨ç½²ä¸å‡çº§ã€‚</li>
<li>ä¸ºæœ‰çŠ¶æ€çš„ Application æŒ‚è½½å’Œæ·»åŠ å­˜å‚¨å™¨ã€‚</li>
<li>çº¿ä¸Šæ‰©å±•æˆ–è£å‰ª Containerized applications ä¸å®ƒä»¬çš„èµ„æºã€‚</li>
<li>å£°æ˜å¼çš„å®¹å™¨ç®¡ç†ï¼Œä¿è¯æ‰€éƒ¨ç½²çš„åº”ç”¨æŒ‰ç…§æˆ‘ä»¬éƒ¨ç½²çš„æ–¹å¼è¿ä½œã€‚</li>
<li>é€šè¿‡è‡ªåŠ¨å¸ƒå±€ã€è‡ªåŠ¨é‡å¯ã€è‡ªåŠ¨å¤åˆ¶ã€è‡ªåŠ¨ä¼¸ç¼©å®ç°åº”ç”¨çš„çŠ¶æ€æ£€æŸ¥ä¸è‡ªæˆ‘ä¿®å¤ã€‚</li>
</ul>
</blockquote>
<p>Kubernetes ä¾èµ–å…¶å®ƒé¡¹ç›®æ¥æä¾›å®Œæ•´çš„ç¼–æ’æœåŠ¡ã€‚ç»“åˆå…¶å®ƒå¿…è¦å¼€æºé¡¹ç›®ä½œä¸ºå…¶ç»„ä»¶ï¼š</p>
<blockquote>
<ul>
<li>ä»“åº“ï¼šAtomic Registryã€Docker Registry ç­‰ã€‚</li>
<li>ç½‘ç»œï¼šOpenvSwitch å’Œæ™ºèƒ½è¾¹ç¼˜è·¯ç”±ç­‰ã€‚</li>
<li>ç›‘æ§ï¼šheapsterã€kibanaã€hawkular å’Œ elasticã€‚</li>
<li>å®‰å…¨ï¼šLDAPã€SELinuxã€ RBAC ä¸ æ”¯æŒå¤šç§Ÿæˆ·çš„ OAUTHã€‚</li>
<li>è‡ªåŠ¨åŒ–ï¼šé€šè¿‡ Ansible çš„ playbook è¿›è¡Œé›†ç¾¤çš„å®‰è£…å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</li>
<li>æœåŠ¡ï¼šå¤§é‡äº‹å…ˆåˆ›å»ºå¥½çš„å¸¸ç”¨åº”ç”¨æ¨¡æ¿ã€‚</li>
</ul>
</blockquote>
<p><a href="https://www.redhat.com/en/technologies/cloud-computing/openshift" target="_blank" rel="external">çº¢å¸½ OpenShift ä¸ºå®¹å™¨éƒ¨ç½²é¢„å…ˆé›†æˆäº†ä¸Šé¢è¿™äº›ç»„ä»¶ã€‚</a></p>
<h2 id="3-Kubernetes-architecture"><a href="#3-Kubernetes-architecture" class="headerlink" title="3. Kubernetes architecture"></a>3. Kubernetes architecture</h2><p>Kubernetes æ”¯æŒåœ¨å¤šç§ç¯å¢ƒä¸‹çš„å®‰è£…:</p>
<blockquote>
<ol>
<li>æœ¬åœ°ä¸»æœºï¼ˆFedoraï¼‰</li>
<li>äº‘æœåŠ¡ï¼ˆGoogle GAEã€AWSï¼‰</li>
</ol>
</blockquote>
<h3 id="3-1-K8s-architecture"><a href="#3-1-K8s-architecture" class="headerlink" title="3.1 K8s architecture"></a>3.1 K8s architecture</h3><p><img src="/images/devops/kubernetes-5.png" width="750" alt="kubernetes.io"></p>
<h3 id="3-2-Master"><a href="#3-2-Master" class="headerlink" title="3.2 Master"></a>3.2 Master</h3><p>Masteræœ‰ä¸‰ä¸ªç»„ä»¶ï¼šAPI Serverã€Schedulerã€Controller:</p>
<blockquote>
<ol>
<li>API Server æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å¯¹å¤–æ¥å£ï¼Œæä¾› RESTful æ–¹å¼ä¾›å®¢æˆ·ç«¯å’Œå…¶å®ƒç»„ä»¶è°ƒç”¨ï¼›</li>
<li>Scheduler è´Ÿè´£å¯¹èµ„æºè¿›è¡Œè°ƒåº¦ï¼Œåˆ†é…æŸä¸ª pod åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šï¼›</li>
<li>Controller-manager è´Ÿè´£ç®¡ç†æ§åˆ¶å™¨ï¼ŒåŒ…æ‹¬ endpoint-controllerï¼ˆåˆ·æ–°æœåŠ¡å’Œ pod çš„å…³è”ä¿¡æ¯ï¼‰å’Œ replication-controllerï¼ˆç»´æŠ¤æŸä¸ª pod çš„å¤åˆ¶ä¸ºé…ç½®çš„æ•°å€¼ï¼‰ã€‚</li>
</ol>
</blockquote>
<h3 id="3-3-Node"><a href="#3-3-Node" class="headerlink" title="3.3 Node"></a>3.3 Node</h3><p><img src="/images/devops/kubernetes-4.jpg" width="600" alt="Kubernetes Node"></p>
<p>é›†ç¾¤ä¸­çš„æ¯ä¸ªé master èŠ‚ç‚¹éƒ½è¿è¡Œä¸¤ä¸ªè¿›ç¨‹ï¼š</p>
<blockquote>
<ul>
<li><strong>kubelet</strong>ï¼Œå’Œ master èŠ‚ç‚¹è¿›è¡Œé€šä¿¡ã€‚</li>
<li>kube-proxyï¼Œä¸€ç§ç½‘ç»œä»£ç†ï¼Œå°† Kubernetes çš„ç½‘ç»œæœåŠ¡ä»£ç†åˆ°æ¯ä¸ªèŠ‚ç‚¹ä¸Šã€‚</li>
</ul>
</blockquote>
<h3 id="3-4-Kubernetes-æœ¯è¯­"><a href="#3-4-Kubernetes-æœ¯è¯­" class="headerlink" title="3.4 Kubernetes æœ¯è¯­"></a>3.4 Kubernetes æœ¯è¯­</h3><blockquote>
<ul>
<li>Masterï¼ˆä¸»èŠ‚ç‚¹ï¼‰ï¼š æ§åˆ¶ Kubernetes èŠ‚ç‚¹çš„æœºå™¨ï¼Œä¹Ÿæ˜¯åˆ›å»ºä½œä¸šä»»åŠ¡çš„åœ°æ–¹ã€‚</li>
<li><p>Nodeï¼ˆèŠ‚ç‚¹ï¼‰ï¼š è¿™äº›æœºå™¨åœ¨ Kubernetes ä¸»èŠ‚ç‚¹çš„æ§åˆ¶ä¸‹æ‰§è¡Œè¢«åˆ†é…çš„ä»»åŠ¡ã€‚</p>
</li>
<li><p>Podï¼š ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨æ„æˆçš„é›†åˆï¼Œä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«éƒ¨ç½²åˆ°ä¸€ä¸ªå•ä¸€èŠ‚ç‚¹ã€‚</p>
</li>
</ul>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;åŒä¸€ä¸ª pod ä¸­çš„å®¹å™¨å…±äº« IP åœ°å€ã€è¿›ç¨‹é—´é€šè®¯ï¼ˆIPCï¼‰ã€ä¸»æœºåä»¥åŠå…¶å®ƒèµ„æºã€‚</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pod å°†åº•å±‚å®¹å™¨çš„ç½‘ç»œå’Œå­˜å‚¨æŠ½è±¡å‡ºæ¥ï¼Œä½¿å¾—é›†ç¾¤å†…çš„å®¹å™¨è¿ç§»æ›´ä¸ºä¾¿æ·ã€‚</p>
<ul>
<li>Replication controllerï¼š æ§åˆ¶ä¸€ä¸ª pod åœ¨é›†ç¾¤ä¸Šè¿è¡Œçš„å®ä¾‹æ•°é‡ã€‚</li>
<li>Serviceï¼š å°†æœåŠ¡å†…å®¹ä¸å…·ä½“çš„ pod åˆ†ç¦»ã€‚Kubernetes æœåŠ¡ä»£ç†è´Ÿè´£è‡ªåŠ¨å°†æœåŠ¡è¯·æ±‚åˆ†å‘åˆ°æ­£ç¡®çš„ pod å¤„.</li>
<li>Kubeletï¼š è¿™ä¸ªå®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨å„ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šï¼Œè´Ÿè´£è·å–å®¹å™¨åˆ—è¡¨ï¼Œä¿è¯å£°æ˜çš„å®¹å™¨å·²ç»å¯åŠ¨ä¸”æ­£å¸¸è¿è¡Œã€‚</li>
<li>kubectlï¼š è¿™æ˜¯ Kubernetes çš„å‘½ä»¤è¡Œé…ç½®å·¥å…·ã€‚</li>
</ul>
<p><a href="https://kubernetes.io/docs/reference/" target="_blank" rel="external">æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹ Kubernetes æœ¯è¯­è¡¨</a></p>
</blockquote>
<h2 id="4-Quickstart-minikube"><a href="#4-Quickstart-minikube" class="headerlink" title="4. Quickstart minikube"></a>4. Quickstart minikube</h2><p>å¯åŠ¨ Kubernetes cluster</p>
<h3 id="4-1-Start-Minik-amp-create-cluster"><a href="#4-1-Start-Minik-amp-create-cluster" class="headerlink" title="4.1 Start Minik &amp; create cluster"></a>4.1 Start Minik &amp; create cluster</h3><p>Start Minikube and create a cluster</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># /tmp/fluentd/etc [14:03:57]</span></span><br><span class="line">âœ minikube start</span><br><span class="line">ğŸ˜„  minikube v1.5.0 on Darwin 10.14.6</span><br><span class="line">âœ¨  Automatically selected the <span class="string">'hyperkit'</span> driver</span><br><span class="line">ğŸ’¾  Downloading driver docker-machine-driver-hyperkit:</span><br></pre></td></tr></table></figure>
<h3 id="4-2-create-a-k8s-Deployment"><a href="#4-2-create-a-k8s-Deployment" class="headerlink" title="4.2 create a k8s Deployment"></a>4.2 create a k8s Deployment</h3><p>Letâ€™s create a Kubernetes Deployment using an existing image named echoserver, which is a simple HTTP server and expose it on port 8080 using â€“port.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ kubectl create deployment hello-minikube --image=k8s.gcr.io/echoserver:1.10</span><br><span class="line">deployment.apps/hello-minikube created</span><br></pre></td></tr></table></figure>
<h3 id="4-3-hello-minikube-Deployment"><a href="#4-3-hello-minikube-Deployment" class="headerlink" title="4.3 hello-minikube Deployment"></a>4.3 hello-minikube Deployment</h3><p>To access the hello-minikube Deployment, expose it as a Service:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ kubectl expose deployment hello-minikube --type=NodePort --port=8080</span><br><span class="line">service/hello-minikube exposed</span><br></pre></td></tr></table></figure>
<h3 id="4-4-view-hello-minikube-Pod"><a href="#4-4-view-hello-minikube-Pod" class="headerlink" title="4.4 view hello-minikube Pod"></a>4.4 view hello-minikube Pod</h3><p>The hello-minikube Pod is now launched but you have to wait until the Pod is up before accessing it via the exposed Service.</p>
<p>If the output shows the STATUS as Running, the Pod is now up and running:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ kubectl get pod</span><br><span class="line">NAME                              READY   STATUS    RESTARTS   AGE</span><br><span class="line">hello-minikube-797f975945-nrb6r   1/1     Running   0          2m14s</span><br><span class="line">(anaconda3) (base)</span><br></pre></td></tr></table></figure>
<p>kubectl get cmdï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl get node</span><br><span class="line">kubectl get po,svc -n kube-system</span><br></pre></td></tr></table></figure>
<h3 id="4-5-view-the-Service-details"><a href="#4-5-view-the-Service-details" class="headerlink" title="4.5 view the Service details"></a>4.5 view the Service details</h3><p>Get the URL of the exposed Service to view the Service details:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ minikube service hello-minikube --url</span><br><span class="line">http://192.168.64.2:30799</span><br><span class="line">(anaconda3) (base)</span><br></pre></td></tr></table></figure>
<p>Output: </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Hostname: hello-minikube-797f975945-nrb6r</span><br><span class="line"></span><br><span class="line">Pod Information:</span><br><span class="line">	-no pod information available-</span><br><span class="line"></span><br><span class="line">Server values:</span><br><span class="line">	server_version=nginx: 1.13.3 - lua: 10008</span><br><span class="line"></span><br><span class="line">Request Information:</span><br><span class="line">	client_address=172.17.0.1</span><br><span class="line">	method=GET</span><br><span class="line">	real path=/</span><br><span class="line">	query=</span><br><span class="line">	request_version=1.1</span><br><span class="line">	request_scheme=http</span><br><span class="line">	request_uri=http://192.168.64.2:8080/</span><br><span class="line"></span><br><span class="line">Request Headers:</span><br><span class="line">	accept=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3</span><br><span class="line">	accept-encoding=gzip, deflate</span><br><span class="line">	accept-language=zh-CN,zh;q=0.9,zh-TW;q=0.8,en-US;q=0.7,en;q=0.6</span><br><span class="line">	connection=keep-alive</span><br><span class="line">	host=192.168.64.2:30799</span><br><span class="line">	upgrade-insecure-requests=1</span><br><span class="line">	user-agent=Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.120 Safari/537.36</span><br><span class="line"></span><br><span class="line">Request Body:</span><br><span class="line">	-no body <span class="keyword">in</span> request-</span><br></pre></td></tr></table></figure>
<h3 id="4-6-delete-hello-minik-service"><a href="#4-6-delete-hello-minik-service" class="headerlink" title="4.6 delete hello-minik service"></a>4.6 delete hello-minik service</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl delete services hello-minikube</span><br></pre></td></tr></table></figure>
<h3 id="4-7-delete-hello-minik-deploym"><a href="#4-7-delete-hello-minik-deploym" class="headerlink" title="4.7 delete hello-minik deploym"></a>4.7 delete hello-minik deploym</h3><p>é”€æ¯è¯¥ Deploymentï¼ˆå’Œå®ƒçš„ podï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl delete deployment hello-minikube</span><br></pre></td></tr></table></figure>
<h3 id="4-8-stop-Minikube-cluster"><a href="#4-8-stop-Minikube-cluster" class="headerlink" title="4.8 stop Minikube cluster"></a>4.8 stop Minikube cluster</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">minikube stop</span><br></pre></td></tr></table></figure>
<h3 id="4-9-delete-Minikube-cluster"><a href="#4-9-delete-Minikube-cluster" class="headerlink" title="4.9 delete Minikube cluster"></a>4.9 delete Minikube cluster</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">minikube delete</span><br></pre></td></tr></table></figure>
<h2 id="5-Kubernetes-hexo"><a href="#5-Kubernetes-hexo" class="headerlink" title="5. Kubernetes hexo"></a>5. Kubernetes hexo</h2><p><a href="https://kubernetes.io/zh/docs/reference/kubectl/docker-cli-to-kubectl/" target="_blank" rel="external">Docker ç”¨æˆ·ä½¿ç”¨ kubectl å‘½ä»¤æŒ‡å—</a></p>
<p><a href="https://www.ibm.com/developerworks/community/blogs/132cfa78-44b0-4376-85d0-d3096cd30d3f/entry/k8s_åˆ›å»ºèµ„æºçš„ä¸¤ç§æ–¹å¼_æ¯å¤©5åˆ†é’Ÿç©è½¬_Docker_å®¹å™¨æŠ€æœ¯_124?lang=en" target="_blank" rel="external">Kubernetes æ”¯æŒä¸¤ç§æ–¹å¼åˆ›å»ºèµ„æº</a>ï¼š</p>
<ol>
<li>ç”¨ kubectl å‘½ä»¤ç›´æ¥åˆ›å»ºï¼Œæ¯”å¦‚ï¼š</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl run nginx-deployment --image=nginx:1.7.9 --replicas=2</span><br><span class="line"></span><br><span class="line">åœ¨å‘½ä»¤è¡Œä¸­é€šè¿‡å‚æ•°æŒ‡å®šèµ„æºçš„å±æ€§.</span><br></pre></td></tr></table></figure>
<ol>
<li>é€šè¿‡é…ç½®æ–‡ä»¶å’Œ kubectl apply åˆ›å»ºï¼Œè¦å®Œæˆå‰é¢åŒæ ·çš„å·¥ä½œï¼Œå¯æ‰§è¡Œå‘½ä»¤ï¼š</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl apply <span class="_">-f</span> nginx.yml</span><br><span class="line"></span><br><span class="line">kubectl apply ä¸ä½†èƒ½å¤Ÿåˆ›å»º Kubernetes èµ„æºï¼Œä¹Ÿèƒ½å¯¹èµ„æºè¿›è¡Œæ›´æ–°ï¼Œéå¸¸æ–¹ä¾¿ã€‚</span><br></pre></td></tr></table></figure>
<p>Kubernets è¿˜æä¾›äº†å‡ ä¸ªç±»ä¼¼çš„å‘½ä»¤ï¼Œä¾‹å¦‚:</p>
<blockquote>
<ol>
<li>kubectl create, kubectl replace</li>
<li>kubectl edit, kubectl patch</li>
</ol>
</blockquote>
<h3 id="5-1-kubectl-cluster-info-cmd"><a href="#5-1-kubectl-cluster-info-cmd" class="headerlink" title="5.1 kubectl cluster-info cmd"></a>5.1 kubectl cluster-info cmd</h3><p>kubectl cluster-info</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ kubectl cluster-info</span><br><span class="line">Kubernetes master is running at https://192.168.64.2:8443</span><br><span class="line">KubeDNS is running at https://192.168.64.2:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br></pre></td></tr></table></figure>
<p>kubectl get po,svc -n kube-system</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ kubectl get po,svc -n kube-system</span><br><span class="line">NAME                                   READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/coredns-5644d7b6d9-2qtds           1/1     Running   0          25h</span><br><span class="line">pod/coredns-5644d7b6d9-w8442           1/1     Running   0          25h</span><br><span class="line">pod/etcd-minikube                      1/1     Running   0          25h</span><br><span class="line">pod/kube-addon-manager-minikube        1/1     Running   0          25h</span><br><span class="line">pod/kube-apiserver-minikube            1/1     Running   0          25h</span><br><span class="line">pod/kube-controller-manager-minikube   1/1     Running   1          25h</span><br><span class="line">pod/kube-proxy-k2pgh                   1/1     Running   0          25h</span><br><span class="line">pod/kube-scheduler-minikube            1/1     Running   2          25h</span><br><span class="line">pod/storage-provisioner                1/1     Running   0          25h</span><br><span class="line"></span><br><span class="line">NAME               TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE</span><br><span class="line">service/kube-dns   ClusterIP   10.96.0.10   &lt;none&gt;        53/UDP,53/TCP,9153/TCP   25h</span><br></pre></td></tr></table></figure>
<h3 id="5-2-Create-deployment-hexo4"><a href="#5-2-Create-deployment-hexo4" class="headerlink" title="5.2 Create deployment hexo4"></a>5.2 Create deployment hexo4</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl run --image=blair101/ubuntu-hexo-blog:v1.4 hexo4 --port=4000 --env=<span class="string">"DOMAIN=cluster"</span></span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºä¸€ä¸ª deployment, name: hexo4, ä¹Ÿä¼šç”Ÿæˆä¸€ä¸ª pod, å¯é€šè¿‡ kubectl edit deploy hexo4 ä¿®æ”¹å‰¯æœ¬æ•°ä¸º2</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ kubectl get deploy,svc</span><br><span class="line">NAME                    READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">deployment.apps/hexo4   2/2     2            2           8m34s</span><br><span class="line"></span><br><span class="line">NAME                         READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/hexo4-67f54d9bd9-8gzt9   1/1     Running   0          8m34s</span><br><span class="line">pod/hexo4-67f54d9bd9-dvzht   1/1     Running   0          3s</span><br></pre></td></tr></table></figure>
<p><a href="https://feisky.gitbooks.io/kubernetes/practice/portmap.html" target="_blank" rel="external">k8s ç«¯å£æ˜ å°„</a></p>
<p>æŸ¥çœ‹è¯¦ç»† deploy hexo4 -o yaml</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl get deploy hexo4 -o yaml</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  annotations:</span><br><span class="line">    deployment.kubernetes.io/revision: &quot;1&quot;</span><br><span class="line">  creationTimestamp: null</span><br><span class="line">  generation: 1</span><br><span class="line">  labels:</span><br><span class="line">    run: hexo4</span><br><span class="line">  name: hexo4</span><br><span class="line">  selfLink: /apis/apps/v1/namespaces/default/deployments/hexo4</span><br><span class="line">spec:</span><br><span class="line">  progressDeadlineSeconds: 600</span><br><span class="line">  replicas: 2</span><br><span class="line">  revisionHistoryLimit: 10</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      run: hexo4</span><br><span class="line">  strategy:</span><br><span class="line">    rollingUpdate:</span><br><span class="line">      maxSurge: 25%</span><br><span class="line">      maxUnavailable: 25%</span><br><span class="line">    type: RollingUpdate</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      creationTimestamp: null</span><br><span class="line">      labels:</span><br><span class="line">        run: hexo4</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - env:</span><br><span class="line">        - name: DOMAIN</span><br><span class="line">          value: cluster</span><br><span class="line">        image: blair101/ubuntu-hexo-blog:v1.4</span><br><span class="line">        imagePullPolicy: IfNotPresent</span><br><span class="line">        name: hexo4</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 4000</span><br><span class="line">          protocol: TCP</span><br><span class="line">        resources: &#123;&#125;</span><br><span class="line">        terminationMessagePath: /dev/termination-log</span><br><span class="line">        terminationMessagePolicy: File</span><br><span class="line">      dnsPolicy: ClusterFirst</span><br><span class="line">      restartPolicy: Always</span><br><span class="line">      schedulerName: default-scheduler</span><br><span class="line">      securityContext: &#123;&#125;</span><br><span class="line">      terminationGracePeriodSeconds: 30</span><br><span class="line">status: &#123;&#125;</span><br><span class="line">(anaconda3) (base)</span><br></pre></td></tr></table></figure>
<p>ä¸€äº›å¸¸ç”¨å‘½ä»¤è®°å½•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl describe po hexo4-67f54d9bd9-ffnsp</span><br><span class="line"></span><br><span class="line">kubectl <span class="built_in">exec</span> -it hexo4-67f54d9bd9-ffnsp bash</span><br><span class="line"></span><br><span class="line">kubectl get po hexo4-5b97779b7c-8z8ns -o yaml --export</span><br><span class="line"></span><br><span class="line">kubectl get deploy hexo4 -o yaml --export | tee deploy-v1.yaml</span><br><span class="line">kubectl apply <span class="_">-f</span> deploy-v5.yaml</span><br></pre></td></tr></table></figure>
<h3 id="5-3-Create-service-hexo4"><a href="#5-3-Create-service-hexo4" class="headerlink" title="5.3 Create service hexo4"></a>5.3 Create service hexo4</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl expose deployment hexo4 --port=4000 --name=hexo4</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ service, kubectl edit svc hexo4</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ kubectl get deploy, po, svc</span><br><span class="line">NAME                    READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">deployment.apps/hexo4   2/2     2            2           54m</span><br><span class="line"></span><br><span class="line">NAME                         READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/hexo4-67f54d9bd9-8gzt9   1/1     Running   0          54m</span><br><span class="line">pod/hexo4-67f54d9bd9-dvzht   1/1     Running   0          45m</span><br><span class="line"></span><br><span class="line">NAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE</span><br><span class="line">service/hexo4        ClusterIP   10.97.151.174   &lt;none&gt;        4000/TCP   35s</span><br><span class="line">service/kubernetes   ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP    26h</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ service hexo4 è¯¦æƒ…:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ kubectl get svc -o yaml hexo4</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  creationTimestamp: <span class="string">"2019-10-30T03:56:49Z"</span></span><br><span class="line">  labels:</span><br><span class="line">    run: hexo4</span><br><span class="line">  name: hexo4</span><br><span class="line">  namespace: default</span><br><span class="line">  resourceVersion: <span class="string">"48479"</span></span><br><span class="line">  selfLink: /api/v1/namespaces/default/services/hexo4</span><br><span class="line">  uid: e1c9c30b<span class="_">-d</span>3b8-4625-9817<span class="_">-a</span>14ea3677bd3</span><br><span class="line">spec:</span><br><span class="line">  clusterIP: 10.97.151.174</span><br><span class="line">  ports:</span><br><span class="line">  - port: 4000</span><br><span class="line">    protocol: TCP</span><br><span class="line">    targetPort: 4000</span><br><span class="line">  selector:</span><br><span class="line">    run: hexo4</span><br><span class="line">  sessionAffinity: None</span><br><span class="line">  <span class="built_in">type</span>: ClusterIP</span><br><span class="line">status:</span><br><span class="line">  loadBalancer: &#123;&#125;</span><br><span class="line">(anaconda3) (base)</span><br></pre></td></tr></table></figure>
<h3 id="5-4-kubectl-edit-service-hexo4"><a href="#5-4-kubectl-edit-service-hexo4" class="headerlink" title="5.4 kubectl edit service hexo4"></a>5.4 kubectl edit service hexo4</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl edit service hexo4</span><br></pre></td></tr></table></figure>
<p>type: ClusterIP â€“&gt; NodePort ä¸” spec.ports å¢åŠ  nodePort: 30001</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spec:</span><br><span class="line">  clusterIP: 10.107.236.48</span><br><span class="line">  externalTrafficPolicy: Cluster</span><br><span class="line">  ports:</span><br><span class="line">  - nodePort: 30001</span><br><span class="line">    port: 4000</span><br><span class="line">    protocol: TCP</span><br><span class="line">    targetPort: 4000</span><br><span class="line">  selector:</span><br><span class="line">    run: hexo4</span><br><span class="line">  sessionAffinity: None</span><br><span class="line">  type: NodePort</span><br></pre></td></tr></table></figure>
<h3 id="5-5-build-hexo5-deploy-ervice"><a href="#5-5-build-hexo5-deploy-ervice" class="headerlink" title="5.5 build hexo5, deploy ervice"></a>5.5 build hexo5, deploy ervice</h3><p>create deployment hexo5</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl run --image=blair101/ubuntu-hexo-blog:v1.5 hexo5 --port=4000 --env=<span class="string">"DOMAIN=cluster"</span></span><br></pre></td></tr></table></figure>
<p>create service hexo5</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">kubectl expose deployment hexo5 --port=4000 --name=hexo5</span><br></pre></td></tr></table></figure>
<p>kubectl edit service hexo5</p>
<blockquote>
<p>type: ClusterIP â€“&gt; NodePort ä¸” spec.ports å¢åŠ  nodePort: 30001</p>
</blockquote>
<h3 id="5-6-modify-service-hexo4"><a href="#5-6-modify-service-hexo4" class="headerlink" title="5.6 modify service hexo4"></a>5.6 modify service hexo4</h3><p>æ›´æ”¹ selector.run: hexo4 ä¸º hexo5</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spec:</span><br><span class="line">  clusterIP: 10.107.236.48</span><br><span class="line">  externalTrafficPolicy: Cluster</span><br><span class="line">  ports:</span><br><span class="line">  - nodePort: 30001</span><br><span class="line">    port: 4000</span><br><span class="line">    protocol: TCP</span><br><span class="line">    targetPort: 4000</span><br><span class="line">  selector:</span><br><span class="line">    run: hexo5</span><br><span class="line">  sessionAffinity: None</span><br><span class="line">  type: NodePort</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥æ˜¯ä¸€äº› delete æ“ä½œ.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://kubernetes.io" target="_blank" rel="external">kubernetes.io</a></li>
<li><a href="https://kubernetes.io/docs/setup/learning-environment/minikube/" target="_blank" rel="external">Kubernetes with Minikube</a></li>
<li><a href="https://kubernetes.io/docs/tasks/tools/install-minikube/" target="_blank" rel="external">Install Minikube</a></li>
<li><a href="https://github.com/kubernetes/kubernetes" target="_blank" rel="external">Github kubernetes</a></li>
<li><a href="https://yeasy.gitbooks.io/docker_practice/kubernetes/" target="_blank" rel="external">Kubernetes é¡¹ç›®Â· Docker â€”â€” ä»å…¥é—¨åˆ°å®è·µ - yeasy</a></li>
<li><a href="https://juejin.im/post/5b8656a6f265da4332072aae" target="_blank" rel="external">ä»0åˆ°1ä½¿ç”¨Kubernetesç³»åˆ—</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/29232090" target="_blank" rel="external">çŸ¥ä¹ï¼š Kubernetes æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="https://dreamerjonson.com/2019/03/14/k8s/index.html" target="_blank" rel="external">éƒ‘å»ºå‹‹ï¼ˆjonsonï¼‰K8S</a></li>
<li><a href="https://kubernetes.io/zh/docs/concepts/" target="_blank" rel="external">å®˜ç½‘ k8s æ¦‚å¿µ &amp; å¯¹è±¡</a></li>
<li><a href="https://kubernetes.io/zh/docs/reference/kubectl/docker-cli-to-kubectl/" target="_blank" rel="external">Docker ç”¨æˆ·ä½¿ç”¨ kubectl å‘½ä»¤æŒ‡å—</a></li>
<li><a href="https://kubernetes.io/docs/tasks/debug-application-cluster/get-shell-running-container/" target="_blank" rel="external">Get a Shell to a Running Container</a></li>
<li><a href="http://kubernetes.kansea.com/docs/user-guide/walkthrough/k8s201/" target="_blank" rel="external">Labelï¼Œ Deploymentï¼Œ Service å’Œ å¥åº·æ£€æŸ¥</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tech Stack]]></title>
      <url>http://shopee.ai/2019/10/28/devops/tech_stack/</url>
      <content type="html"><![CDATA[<p><img src="/images/devops/tech-stack-logo1.png" width="550" alt="Tech Stack"></p>
<a id="more"></a>
<h2 id="1-Python-env"><a href="#1-Python-env" class="headerlink" title="1. Python env"></a>1. Python env</h2><ul>
<li><a href="https://conda.io/en/latest/" target="_blank" rel="external">conda</a></li>
<li><a href="https://www.python.org/downloads/" target="_blank" rel="external">python &gt; 3.6</a></li>
</ul>
<h2 id="2-Data-Process"><a href="#2-Data-Process" class="headerlink" title="2. Data Process"></a>2. Data Process</h2><ul>
<li><a href="https://numpy.org/" target="_blank" rel="external">numpy</a></li>
<li><a href="https://pandas.pydata.org/" target="_blank" rel="external">pandas</a></li>
<li><a href="https://scikit-learn.org/" target="_blank" rel="external">scikit-learn</a></li>
<li><a href="https://www.scipy.org/" target="_blank" rel="external">scipy</a></li>
<li><a href="https://matplotlib.org/" target="_blank" rel="external">matplotlib</a></li>
</ul>
<h2 id="3-Deep-Learning"><a href="#3-Deep-Learning" class="headerlink" title="3. Deep Learning"></a>3. Deep Learning</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow</a></li>
<li><a href="https://pytorch.org/" target="_blank" rel="external">pytorch</a></li>
<li><a href="https://keras.io/" target="_blank" rel="external">keras</a></li>
</ul>
<h2 id="4-NLP"><a href="#4-NLP" class="headerlink" title="4. NLP"></a>4. NLP</h2><ul>
<li><a href="https://www.nltk.org/" target="_blank" rel="external">nltk</a></li>
<li><a href="https://spacy.io/" target="_blank" rel="external">spacy</a></li>
<li><a href="https://github.com/google-research/bert" target="_blank" rel="external">bert</a></li>
</ul>
<h2 id="5-System-Dev"><a href="#5-System-Dev" class="headerlink" title="5. System Dev"></a>5. System Dev</h2><h3 id="5-1-Dev"><a href="#5-1-Dev" class="headerlink" title="5.1 Dev"></a>5.1 Dev</h3><ul>
<li><a href="https://www.tensorflow.org/tfx/guide/serving" target="_blank" rel="external">tensorflow serving</a></li>
<li><a href="https://palletsprojects.com/p/flask/" target="_blank" rel="external">flask</a></li>
<li><a href="https://flask-restplus.readthedocs.io/en/stable/quickstart.html" target="_blank" rel="external">flask-restplus</a></li>
<li><a href="https://docs.pytest.org/en/latest/" target="_blank" rel="external">pytest</a></li>
<li><a href="http://docs.pyinvoke.org/en/1.3/getting-started.html" target="_blank" rel="external">pyinvoke</a></li>
<li><a href="https://gunicorn.org/" target="_blank" rel="external">gunicorn</a></li>
</ul>
<h3 id="5-2-Libraries"><a href="#5-2-Libraries" class="headerlink" title="5.2 Libraries"></a>5.2 Libraries</h3><ul>
<li><a href="https://pydash.readthedocs.io/en/latest/api.html" target="_blank" rel="external">pydash</a></li>
<li><a href="https://saurabh-kumar.com/python-dotenv/" target="_blank" rel="external">dotenv</a></li>
<li><a href="http://www.fabfile.org/" target="_blank" rel="external">fabric</a></li>
<li><a href="https://docs.python.org/3/library/pathlib.html" target="_blank" rel="external">pathlib</a></li>
</ul>
<h3 id="5-2-Tools"><a href="#5-2-Tools" class="headerlink" title="5.2 Tools"></a>5.2 Tools</h3><ul>
<li><a href="https://cyberduck.io/" target="_blank" rel="external">Cyberduck</a></li>
</ul>
<h2 id="6-System-Test"><a href="#6-System-Test" class="headerlink" title="6. System Test"></a>6. System Test</h2><ul>
<li><a href="https://docs.pytest.org/en/latest/" target="_blank" rel="external">pytest</a></li>
<li><a href="https://nose.readthedocs.io/en/latest/" target="_blank" rel="external">nose</a></li>
<li><a href="https://locust.io/" target="_blank" rel="external">locust</a></li>
<li><a href="https://mitmproxy.org/" target="_blank" rel="external">mitmproxy</a></li>
</ul>
<h2 id="7-Log-Collection"><a href="#7-Log-Collection" class="headerlink" title="7. Log Collection"></a>7. Log Collection</h2><ul>
<li><a href="https://github.com/fluent/fluent-logger-python" target="_blank" rel="external">fluentd</a></li>
<li><a href="https://www.elastic.co/" target="_blank" rel="external">elastic</a></li>
</ul>
<h2 id="8-CI-CD"><a href="#8-CI-CD" class="headerlink" title="8. CI/CD"></a>8. CI/CD</h2><ul>
<li><a href="https://about.gitlab.com/" target="_blank" rel="external">gitlab</a></li>
<li><a href="https://www.docker.io/" target="_blank" rel="external">docker</a></li>
<li><a href="https://kubernetes.io/" target="_blank" rel="external">kubernetes</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Fluentd tutorial]]></title>
      <url>http://shopee.ai/2019/10/23/devops/fluentd_td-agent/</url>
      <content type="html"><![CDATA[<p><img src="/images/devops/fluentd-1.png" width="550" alt="Fluentd"></p>
<a id="more"></a>
<h2 id="1-Fluentd-what"><a href="#1-Fluentd-what" class="headerlink" title="1. Fluentd what?"></a>1. Fluentd what?</h2><p>Fluentd is an open source data collector for unified logging layer. </p>
<p>Fluentd allows you to unify data collection and consumption for a better use and understanding of data.</p>
<h2 id="2-Fluentd-docker"><a href="#2-Fluentd-docker" class="headerlink" title="2. Fluentd docker"></a>2. Fluentd docker</h2><p>Docker æä¾›å¾ˆå¤š logging driverï¼Œé»˜è®¤ä¸‹ç”¨çš„ json-fileï¼Œdocker logs çœ‹åˆ°çš„æ—¥å¿—å°±æ˜¯æ¥è‡ªäºè¿™äº›jsonæ–‡ä»¶.</p>
<p>å½“æœ‰å¤šä¸ªdocker hostçš„æ—¶å€™ä½ ä¼šå¸Œæœ›èƒ½å¤ŸæŠŠæ—¥å¿—æ±‡é›†èµ·æ¥ï¼Œé›†ä¸­å­˜æ”¾åˆ°ä¸€å¤„.</p>
<p>æœ¬æ–‡è®²çš„æ˜¯å¦‚ä½•é€šè¿‡ fluentd logging driver é…åˆ fluentd æ¥è¾¾æˆè¿™ä¸€ç›®æ ‡ã€‚</p>
<p>Targetï¼š</p>
<blockquote>
<ol>
<li>å°†standaloneå®¹å™¨æ‰“åˆ°stdout/stderrorçš„æ—¥å¿—æ”¶é›†èµ·æ¥</li>
<li>æ”¶é›†çš„æ—¥å¿—æ ¹æ®å®¹å™¨ååˆ†å¼€å­˜å‚¨</li>
<li>æ—¥å¿—æ–‡ä»¶æ ¹æ®æ¯å¤©æ»šåŠ¨</li>
</ol>
</blockquote>
<h3 id="2-1-é…ç½®-Fluentd-å®ä¾‹"><a href="#2-1-é…ç½®-Fluentd-å®ä¾‹" class="headerlink" title="2.1 é…ç½® Fluentd å®ä¾‹"></a>2.1 é…ç½® Fluentd å®ä¾‹</h3><p>fluent.conf</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;<span class="built_in">source</span>&gt;</span><br><span class="line">  @<span class="built_in">type</span>   forward</span><br><span class="line">&lt;/<span class="built_in">source</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;match *&gt;</span><br><span class="line"> </span><br><span class="line">  @<span class="built_in">type</span>              file</span><br><span class="line"> </span><br><span class="line">  path               /fluentd/<span class="built_in">log</span>/<span class="variable">$&#123;tag&#125;</span>/<span class="variable">$&#123;tag&#125;</span></span><br><span class="line">  append             <span class="literal">true</span></span><br><span class="line">  &lt;format&gt;</span><br><span class="line">    @<span class="built_in">type</span>            single_value</span><br><span class="line">    message_key      <span class="built_in">log</span></span><br><span class="line">  &lt;/format&gt;</span><br><span class="line">  &lt;buffer tag,time&gt;</span><br><span class="line">    @<span class="built_in">type</span>             file</span><br><span class="line">    timekey           1d</span><br><span class="line">    timekey_<span class="built_in">wait</span>      10m</span><br><span class="line">    flush_mode        interval</span><br><span class="line">    flush_interval    30s</span><br><span class="line">  &lt;/buffer&gt;</span><br><span class="line">&lt;/match&gt;</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºç›®å½• container-logsï¼Œ è®¾ç½® 777 æƒé™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ~/ghome/home/ub [17:57:07]</span></span><br><span class="line">âœ ll</span><br><span class="line">total 0</span><br><span class="line">drwxrwxrwx  5 blair  staff   160B Oct 24 17:50 container-logs</span><br><span class="line">drwxr-xr-x  4 blair  staff   128B Oct 23 18:06 fluentd</span><br><span class="line">(base)</span><br><span class="line"><span class="comment"># ~/ghome/home/ub [17:57:07]</span></span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨Fluentdå®ä¾‹ï¼Œè¿™é‡Œä½¿ç”¨çš„Dockeræ–¹å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -it \</span><br><span class="line">  <span class="_">-d</span> \</span><br><span class="line">  -p 24224:24224 \</span><br><span class="line">  -v /Users/blair/ghome/home/ub/fluentd/conf/fluent.conf:/fluentd/etc2/fluent.conf \</span><br><span class="line">  -v /Users/blair/ghome/home/ub/container-logs:/fluentd/<span class="built_in">log</span> \</span><br><span class="line">  fluent/fluentd:v1.7.3-debian-1.0</span><br></pre></td></tr></table></figure>
<h3 id="2-2-æŒ‡å®š-logging-driver"><a href="#2-2-æŒ‡å®š-logging-driver" class="headerlink" title="2.2 æŒ‡å®š logging driver"></a>2.2 æŒ‡å®š logging driver</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run \</span><br><span class="line">  <span class="_">-d</span> \</span><br><span class="line">  --log-driver=fluentd \</span><br><span class="line">  --log-opt fluentd-address=&lt;fluentdhost&gt;:24224 \</span><br><span class="line">  --log-opt mode=non-blocking \</span><br><span class="line">  --log-opt tag=&#123;&#123;.Name&#125;&#125; \</span><br><span class="line">  --rm -p 4000:4000 blair101/ubuntu-hexo-blog:v1.4</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>&lt;fluentdhost&gt;</code> å‚æ•°ä¸å†™åˆ™æ˜¯æŒ‡æœ¬æœº.</p>
</blockquote>
<h3 id="2-3-è§‚å¯Ÿæ—¥å¿—"><a href="#2-3-è§‚å¯Ÿæ—¥å¿—" class="headerlink" title="2.3 è§‚å¯Ÿæ—¥å¿—"></a>2.3 è§‚å¯Ÿæ—¥å¿—</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ~/ghome/home/ub [18:00:10]</span></span><br><span class="line">âœ ll container-logs</span><br><span class="line">total 16</span><br><span class="line">-rw-r--r--  1 blair  staff   470B Oct 24 17:47 data.b595a4ec02f220b1ce9d68e14ca1<span class="built_in">fc</span>303.log</span><br><span class="line">-rw-r--r--  1 blair  staff    74B Oct 24 17:47 data.b595a4ec02f220b1ce9d68e14ca1<span class="built_in">fc</span>303.log.meta</span><br><span class="line">lrwxrwxrwx  1 blair  staff    55B Oct 24 17:47 data.log -&gt; /fluentd/<span class="built_in">log</span>/data.b595a4ec02f220b1ce9d68e14ca1<span class="built_in">fc</span>303.log</span><br><span class="line">(base)</span><br><span class="line"><span class="comment"># ~/ghome/home/ub [18:00:12]</span></span><br></pre></td></tr></table></figure>
<h2 id="3-Fluentd-docker-nginx"><a href="#3-Fluentd-docker-nginx" class="headerlink" title="3. Fluentd docker + nginx"></a>3. Fluentd docker + nginx</h2><p>æœ¬æœº /tmp/fluentd/etc ä¸‹åˆ›å»ºfluentd.conf</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;<span class="built_in">source</span>&gt;</span><br><span class="line">@<span class="built_in">type</span> forward</span><br><span class="line">&lt;/<span class="built_in">source</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;match *&gt;</span><br><span class="line">  @<span class="built_in">type</span>              file</span><br><span class="line"></span><br><span class="line">  path               /fluentd/<span class="built_in">log</span>/app.log</span><br><span class="line">  append             <span class="literal">true</span></span><br><span class="line">&lt;/match&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-1-Fluentd-Container"><a href="#3-1-Fluentd-Container" class="headerlink" title="3.1 Fluentd Container"></a>3.1 Fluentd Container</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run <span class="_">-d</span> \</span><br><span class="line">-p 24224:24224 \</span><br><span class="line">-v /tmp/fluentd/etc:/fluentd/etc <span class="_">-e</span> FLUENTD_CONF=fluentd.conf \</span><br><span class="line">-v /tmp/container-logs:/fluentd/<span class="built_in">log</span> \</span><br><span class="line">fluent/fluentd</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ—¥å¿—</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker logs 2e6d50875a07</span><br></pre></td></tr></table></figure>
<h3 id="3-2-Nginx-Container"><a href="#3-2-Nginx-Container" class="headerlink" title="3.2 Nginx Container"></a>3.2 Nginx Container</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run <span class="_">-d</span> --log-driver fluentd --log-opt fluentd-address=localhost:24224 --log-opt tag=<span class="string">"nginx-test"</span> --log-opt fluentd-async-connect --name nginx-test -p 9080:80 nginx</span><br></pre></td></tr></table></figure>
<h3 id="3-3-Curl-test"><a href="#3-3-Curl-test" class="headerlink" title="3.3 Curl test"></a>3.3 Curl test</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -X GET http://localhost:9080</span><br></pre></td></tr></table></figure>
<h3 id="3-4-æŸ¥çœ‹æ—¥å¿—"><a href="#3-4-æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="3.4 æŸ¥çœ‹æ—¥å¿—"></a>3.4 æŸ¥çœ‹æ—¥å¿—</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># /tmp/container-logs/app.log [19:02:53]</span></span><br><span class="line">âœ cat buffer.b595a5b11618618c6459a69df40de5e79.log</span><br><span class="line">2019-10-24T10:42:36+00:00	nginx-test	&#123;<span class="string">"container_id"</span>:<span class="string">"53929d5422b0d74cd47f9fa3f6a21e63dd0a559b570631034118b4185435f266"</span>,<span class="string">"container_name"</span>:<span class="string">"/nginx-test"</span>,<span class="string">"source"</span>:<span class="string">"stdout"</span>,<span class="string">"log"</span>:<span class="string">"172.17.0.1 - - [24/Oct/2019:10:42:36 +0000] \"GET / HTTP/1.1\" 200 612 \"-\" \"curl/7.55.1\" \"-\""</span>&#125;</span><br><span class="line">2019-10-24T10:46:04+00:00	nginx-test	&#123;<span class="string">"container_id"</span>:<span class="string">"35dcb86564324032d5a4736d5e7bcfe78e6c2ead1408b9be85c60ac113d0de43"</span>,<span class="string">"container_name"</span>:<span class="string">"/nginx-test"</span>,<span class="string">"source"</span>:<span class="string">"stdout"</span>,<span class="string">"log"</span>:<span class="string">"172.17.0.1 - - [24/Oct/2019:10:46:04 +0000] \"GET / HTTP/1.1\" 200 612 \"-\" \"curl/7.55.1\" \"-\""</span>&#125;</span><br><span class="line">2019-10-24T10:47:03+00:00	nginx-test	&#123;<span class="string">"log"</span>:<span class="string">"172.17.0.1 - - [24/Oct/2019:10:47:03 +0000] \"GET / HTTP/1.1\" 200 612 \"-\" \"curl/7.55.1\" \"-\""</span>,<span class="string">"container_id"</span>:<span class="string">"35dcb86564324032d5a4736d5e7bcfe78e6c2ead1408b9be85c60ac113d0de43"</span>,<span class="string">"container_name"</span>:<span class="string">"/nginx-test"</span>,<span class="string">"source"</span>:<span class="string">"stdout"</span>&#125;</span><br><span class="line">2019-10-24T10:48:12+00:00	nginx-test	&#123;<span class="string">"log"</span>:<span class="string">"172.17.0.1 - - [24/Oct/2019:10:48:12 +0000] \"GET / HTTP/1.1\" 200 612 \"-\" \"curl/7.55.1\" \"-\""</span>,<span class="string">"container_id"</span>:<span class="string">"35dcb86564324032d5a4736d5e7bcfe78e6c2ead1408b9be85c60ac113d0de43"</span>,<span class="string">"container_name"</span>:<span class="string">"/nginx-test"</span>,<span class="string">"source"</span>:<span class="string">"stdout"</span>&#125;</span><br><span class="line">(base)</span><br><span class="line"><span class="comment"># /tmp/container-logs/app.log [19:02:55]</span></span><br><span class="line">âœ</span><br></pre></td></tr></table></figure>
<h2 id="4-Fluent-Logger-Python"><a href="#4-Fluent-Logger-Python" class="headerlink" title="4. Fluent-Logger-Python"></a>4. Fluent-Logger-Python</h2><p><strong>fluentd.conf</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;<span class="built_in">source</span>&gt;</span><br><span class="line">  @<span class="built_in">type</span> forward</span><br><span class="line">  port 24224</span><br><span class="line">&lt;/<span class="built_in">source</span>&gt;</span><br><span class="line">&lt;match fluentd.test.**&gt;</span><br><span class="line">  @<span class="built_in">type</span> stdout</span><br><span class="line">&lt;/match&gt;</span><br></pre></td></tr></table></figure>
<p>Please restart your agent once these lines are in place.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --rm \</span><br><span class="line"><span class="_">-d</span> \</span><br><span class="line">-p 24224:24224 \</span><br><span class="line">-v /tmp/fluentd/etc:/fluentd/etc <span class="_">-e</span> FLUENTD_CONF=fluentd.conf \</span><br><span class="line">-v /tmp/container-logs:/fluentd/<span class="built_in">log</span> \</span><br><span class="line">fluent/fluentd</span><br></pre></td></tr></table></figure>
<h3 id="4-1-Event-Based-Interface"><a href="#4-1-Event-Based-Interface" class="headerlink" title="4.1 Event-Based Interface"></a>4.1 Event-Based Interface</h3><p>First, install the fluent-logger library via pip.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install fluent-logger</span><br></pre></td></tr></table></figure>
<p>Next, initialize and post the records as shown below.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># test.py</span></span><br><span class="line"><span class="keyword">from</span> fluent <span class="keyword">import</span> sender</span><br><span class="line"><span class="keyword">from</span> fluent <span class="keyword">import</span> event</span><br><span class="line">sender.setup(<span class="string">'fluentd.test'</span>, host=<span class="string">'localhost'</span>, port=<span class="number">24224</span>)</span><br><span class="line">event.Event(<span class="string">'follow'</span>, &#123;</span><br><span class="line">  <span class="string">'from'</span>: <span class="string">'userA'</span>,</span><br><span class="line">  <span class="string">'to'</span>:   <span class="string">'userB'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Executing the script will send the logs to Fluentd</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># /tmp/fluentd/etc [14:21:01]</span></span><br><span class="line">âœ python test.py</span><br></pre></td></tr></table></figure>
<p>show docker fluentd log</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># /tmp/fluentd/etc [14:21:11]</span><br><span class="line">âœ docker logs cda923986a28</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2019-10-25 06:19:57 +0000 [info]: parsing config file is succeeded path=&quot;/fluentd/etc/fluentd.conf&quot;</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">2019-10-25 06:21:11.000000000 +0000 fluentd.test.follow: &#123;&quot;from&quot;:&quot;userA&quot;,&quot;to&quot;:&quot;userB&quot;&#125;</span><br><span class="line">(anaconda3) (base)</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/fluent/fluent-logger-python#fluentsender-interface" target="_blank" rel="external">#fluentsender-interface</a></p>
<h3 id="4-2-FluentSender-Interface"><a href="#4-2-FluentSender-Interface" class="headerlink" title="4.2 FluentSender Interface"></a>4.2 FluentSender Interface</h3><p><strong>fluentd.conf</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">source</span>&gt;</span></span><br><span class="line">  @type forward</span><br><span class="line">  port 24224</span><br><span class="line"><span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">fluentd.test.</span>**&gt;</span></span><br><span class="line">  @type stdout</span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">app.</span>**&gt;</span></span><br><span class="line">  type stdout</span><br><span class="line"><span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>app.py</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fluent <span class="keyword">import</span> sender</span><br><span class="line"><span class="keyword">from</span> fluent <span class="keyword">import</span> event</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span><br><span class="line">   FluentSender Interface</span><br><span class="line">   </span><br><span class="line">     sender.FluentSender is a structured event logger for Fluentd.</span><br><span class="line"></span><br><span class="line">     By default, the logger assumes fluentd daemon is launched locally. You can also specify remote logger by passing the options.</span><br><span class="line">'''</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for local fluent</span></span><br><span class="line">logger = sender.FluentSender(<span class="string">'app'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># for remote fluent</span></span><br><span class="line">logger = sender.FluentSender(<span class="string">'app'</span>, host=<span class="string">'localhost'</span>, port=<span class="number">24224</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify optional time</span></span><br><span class="line">cur_time = int(time.time())</span><br><span class="line"></span><br><span class="line">logger.emit_with_time(<span class="string">'follow'</span>, cur_time, &#123;<span class="string">'from'</span>: <span class="string">'userA'</span>, <span class="string">'to'</span>:<span class="string">'userB'</span>&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="4-3-Handler-for-buffer-overflow"><a href="#4-3-Handler-for-buffer-overflow" class="headerlink" title="4.3 Handler for buffer overflow"></a>4.3 Handler for buffer overflow</h3><p>You can inject your own custom proc to handle buffer overflow in the event of connection failure. This will mitigate the loss of data instead of simply throwing data away.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> fluent <span class="keyword">import</span> sender</span><br><span class="line"><span class="keyword">from</span> fluent <span class="keyword">import</span> event</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> msgpack</span><br><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">overflow_handler</span><span class="params">(pendings)</span>:</span></span><br><span class="line">    unpacker = msgpack.Unpacker(BytesIO(pendings))</span><br><span class="line">    <span class="keyword">for</span> unpacked <span class="keyword">in</span> unpacker:</span><br><span class="line">        print(unpacked)</span><br><span class="line"></span><br><span class="line"><span class="comment"># for local fluent</span></span><br><span class="line">logger = sender.FluentSender(<span class="string">'app'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># for remote fluent</span></span><br><span class="line">logger = sender.FluentSender(<span class="string">'app'</span>, host=<span class="string">'localhost'</span>, port=<span class="number">24224</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify optional time</span></span><br><span class="line">cur_time = int(time.time())</span><br><span class="line"></span><br><span class="line"><span class="comment"># logger.emit_with_time('follow', cur_time, &#123;'from': 'userA', 'to':'userB'&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Use nanosecond</span></span><br><span class="line">logger = sender.FluentSender(<span class="string">'app'</span>, nanosecond_precision=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">logger = sender.FluentSender(<span class="string">'app'</span>, host=<span class="string">'localhost'</span>, port=<span class="number">24224</span>, buffer_overflow_handler=overflow_handler)</span><br><span class="line"></span><br><span class="line">logger.emit(<span class="string">'follow'</span>, &#123;<span class="string">'from'</span>: <span class="string">'userA'</span>, <span class="string">'to'</span>: <span class="string">'userB'</span>&#125;)</span><br><span class="line"></span><br><span class="line">logger.emit_with_time(<span class="string">'follow'</span>, time.time(), &#123;<span class="string">'from'</span>: <span class="string">'userA'</span>, <span class="string">'to'</span>: <span class="string">'userB'</span>&#125;)</span><br><span class="line"></span><br><span class="line">logger.close()</span><br></pre></td></tr></table></figure>
<h3 id="4-4-Python-logging-Handler-interface"><a href="#4-4-Python-logging-Handler-interface" class="headerlink" title="4.4 Python logging.Handler interface"></a>4.4 Python logging.Handler interface</h3><p>This client-library also has FluentHandler class for Python logging module.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> fluent <span class="keyword">import</span> handler</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> msgpack</span><br><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"></span><br><span class="line">custom_format = &#123;</span><br><span class="line">    <span class="string">'host'</span>: <span class="string">'%(hostname)s'</span>,</span><br><span class="line">    <span class="string">'where'</span>: <span class="string">'%(module)s.%(funcName)s'</span>,</span><br><span class="line">    <span class="string">'type'</span>: <span class="string">'%(levelname)s'</span>,</span><br><span class="line">    <span class="string">'stack_trace'</span>: <span class="string">'%(exc_text)s'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">logging.basicConfig(level=logging.INFO)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">overflow_handler</span><span class="params">(pendings)</span>:</span></span><br><span class="line">    unpacker = msgpack.Unpacker(BytesIO(pendings))</span><br><span class="line">    <span class="keyword">for</span> unpacked <span class="keyword">in</span> unpacker:</span><br><span class="line">        print(unpacked)</span><br><span class="line"></span><br><span class="line">l = logging.getLogger(<span class="string">'fluent.test'</span>)</span><br><span class="line"></span><br><span class="line">h = handler.FluentHandler(<span class="string">'app.follow'</span>, host=<span class="string">'localhost'</span>, port=<span class="number">24224</span>, buffer_overflow_handler=overflow_handler)</span><br><span class="line">formatter = handler.FluentRecordFormatter(custom_format)</span><br><span class="line">h.setFormatter(formatter)</span><br><span class="line">l.addHandler(h)</span><br><span class="line">l.info(&#123;</span><br><span class="line">    <span class="string">'from'</span>: <span class="string">'userA'</span>,</span><br><span class="line">    <span class="string">'to'</span>: <span class="string">'userB'</span></span><br><span class="line">&#125;)</span><br><span class="line">l.info(<span class="string">'&#123;"from": "userC", "to": "userD"&#125;'</span>)</span><br><span class="line">l.info(<span class="string">"This log entry will be logged with the additional key: 'message'."</span>)</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨æ­¥éª¤æ€»ç»“ï¼š</strong></p>
<blockquote>
<ol>
<li>FluentHandler (å¹¶å¯è®¾ç½® formatter)</li>
<li>logging instance , l.addHandler(h)</li>
</ol>
</blockquote>
<p><strong>è‡ªå®šä¹‰æ ¼å¼åŒ–ç¨‹åº</strong></p>
<p>ä½ è¿˜å¯ä»¥é€šè¿‡ logging.config.dictConfig è‡ªå®šä¹‰æ ¼å¼åŒ–ç¨‹åº</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging.configimport yamlwithopen(<span class="string">'logging.yaml'</span>) <span class="keyword">as</span> fd:</span><br><span class="line"> conf = yaml.load(fd)</span><br><span class="line">logging.config.dictConfig(conf[<span class="string">'logging'</span>])</span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥åœ¨è¿æ¥å¤±è´¥æ—¶æ’å…¥è‡ªå·±çš„è‡ªå®šä¹‰è¿‡ç¨‹æ¥å¤„ç†ç¼“å†²åŒºæº¢å‡ºã€‚ è¿™å°†å‡å°‘æ•°æ®çš„ä¸¢å¤±ï¼Œè€Œä¸æ˜¯ç®€å•åœ°ä¸¢å¼ƒæ•°æ®ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">    version:</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">    formatters:</span></span><br><span class="line"><span class="attr">      brief:</span></span><br><span class="line"><span class="attr">        format:</span> <span class="string">'%(message)s'</span></span><br><span class="line"><span class="attr">      default:</span></span><br><span class="line"><span class="attr">        format:</span> <span class="string">'%(asctime)s %(levelname)-8s %(name)-15s %(message)s'</span></span><br><span class="line"><span class="attr">        datefmt:</span> <span class="string">'%Y-%m-%d %H:%M:%S'</span></span><br><span class="line"><span class="attr">      fluent_fmt:</span></span><br><span class="line">        <span class="string">'()'</span>: fluent.handler.FluentRecordFormatter</span><br><span class="line"><span class="attr">        format:</span></span><br><span class="line"><span class="attr">          level:</span> <span class="string">'%(levelname)s'</span></span><br><span class="line"><span class="attr">          hostname:</span> <span class="string">'%(hostname)s'</span></span><br><span class="line"><span class="attr">          where:</span> <span class="string">'%(module)s.%(funcName)s'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">    handlers:</span></span><br><span class="line"><span class="attr">        console:</span></span><br><span class="line">            class : logging.StreamHandler</span><br><span class="line"><span class="attr">            level:</span> DEBUG</span><br><span class="line"><span class="attr">            formatter:</span> default</span><br><span class="line"><span class="attr">            stream:</span> ext://sys.stdout</span><br><span class="line"><span class="attr">        fluent:</span></span><br><span class="line"><span class="attr">            class:</span> fluent.handler.FluentHandler</span><br><span class="line"><span class="attr">            host:</span> localhost</span><br><span class="line"><span class="attr">            port:</span> <span class="number">24224</span></span><br><span class="line"><span class="attr">            tag:</span> app.follow</span><br><span class="line"><span class="attr">            buffer_overflow_handler:</span> overflow_handler</span><br><span class="line"><span class="attr">            formatter:</span> fluent_fmt</span><br><span class="line"><span class="attr">            level:</span> DEBUG</span><br><span class="line"><span class="attr">        none:</span></span><br><span class="line"><span class="attr">            class:</span> logging.NullHandler</span><br><span class="line"></span><br><span class="line"><span class="attr">    loggers:</span></span><br><span class="line"><span class="attr">        amqp:</span></span><br><span class="line"><span class="attr">            handlers:</span> [none]</span><br><span class="line"><span class="attr">            propagate:</span> <span class="literal">False</span></span><br><span class="line"><span class="attr">        conf:</span></span><br><span class="line"><span class="attr">            handlers:</span> [none]</span><br><span class="line"><span class="attr">            propagate:</span> <span class="literal">False</span></span><br><span class="line">        <span class="string">''</span>: <span class="comment"># root logger</span></span><br><span class="line"><span class="attr">            handlers:</span> [console, fluent]</span><br><span class="line"><span class="attr">            level:</span> DEBUG</span><br><span class="line"><span class="attr">            propagate:</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://docs.fluentd.org/installation/install-by-dmg" target="_blank" rel="external">docs.fluentd.org</a></li>
<li><a href="https://hub.docker.com/r/fluent/fluentd" target="_blank" rel="external">fluentd docker</a></li>
<li><a href="http://www.muzixing.com/pages/2017/02/05/fluentdru-men-jiao-cheng.html" target="_blank" rel="external">Fluentdå…¥é—¨æ•™ç¨‹</a></li>
<li><a href="https://blog.csdn.net/qq_21816375/article/details/78011059" target="_blank" rel="external">fluentdä¹‹mac install &amp; test</a></li>
<li><a href="https://medium.com/@harvey.chen/fluentd-ä¸è² è²¬ä»»çš„å­¸ç¿’ç­†è¨˜-ä¸€-in-docker-compose-a7bfa1b69f87" target="_blank" rel="external">fluentd-ä¸è² è²¬ä»»çš„å­¸ç¿’ç­†è¨˜</a></li>
<li><a href="https://blog.csdn.net/weixin_34326179/article/details/88659550" target="_blank" rel="external">ä½¿ç”¨Fluentdæ”¶é›†Dockerå®¹å™¨æ—¥å¿—</a></li>
<li><a href="https://www.yipzale.me/2018/04/22/fluentd-collect-dockerlog.html" target="_blank" rel="external">fluentdæ”¶é›†dockerå®¹å™¨æ—¥å¿—</a></li>
<li><a href="http://www.pangxieke.com/linux/docker-logging-fluentd.html" target="_blank" rel="external">Dockerå®‰è£…Fluentdå¹¶ç®¡ç† Docker æ—¥å¿—</a></li>
<li><a href="https://docs.fluentd.org/v/0.12/articles/python" target="_blank" rel="external">fluent-logger-python</a></li>
<li><a href="https://github.com/fluent/fluent-logger-python" target="_blank" rel="external">github.com/fluent/fluent-logger-python</a></li>
<li><a href="https://hant.helplib.com/GitHub/article_58290" target="_blank" rel="external">fluent-logger-python, ç”¨æ–¼Fluentdçš„çµæ§‹åŒ–è¨˜éŒ„å™¨( python )</a></li>
<li><a href="https://www.li-rui.top/2018/11/29/log/fluentdä¸­bufferé…ç½®/" target="_blank" rel="external">fluentdä¸­bufferé…ç½®</a></li>
<li><a href="https://chenguolin.github.io/2019/02/28/Fluentd-3-Fluentdæ’ä»¶ä»‹ç»/" target="_blank" rel="external">fluentdæ’ä»¶ä»‹ç»</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[BERT tutorial]]></title>
      <url>http://shopee.ai/2019/10/23/nlp/BERT_tutorial_3/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/Bert-Ernie-logo.jpg" width="550" alt="Bert-Ernie"></p>
<a id="more"></a>
<p><strong>2018.10</strong> google å‘å¸ƒ <strong>BERT</strong> æ¨¡å‹. å¼•çˆ†æ•´ä¸ªAIåœˆçš„ NLP æ¨¡å‹. åœ¨ NLPé¢†åŸŸ åˆ·æ–° 11 é¡¹è®°å½•.</p>
<p><strong>BERT</strong> is <strong>language_encoder</strong>ï¼ŒæŠŠè¾“å…¥çš„ <strong>sentence</strong> æˆ– <strong>paragraph</strong> è½¬æˆ <strong>feature_vector</strong>(embedding).</p>
<p><strong>Paper</strong>: <a href="https://arxiv.org/abs/1810.04805" target="_blank" rel="external">BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding</a></p>
<p><strong>BERT</strong> åˆ›æ–°ç‚¹åœ¨äºæå‡ºäº†ä¸€å¥—å®Œæ•´çš„æ–¹æ¡ˆï¼Œåˆ©ç”¨ä¹‹å‰æœ€æ–°çš„ç®—æ³•æ¨¡å‹ï¼Œå»è§£å†³å„ç§å„æ ·çš„ NLP ä»»åŠ¡.</p>
<!-- more -->
<p><strong>NLP çš„ 4 å¤§ä»»åŠ¡</strong></p>
<blockquote>
<p>(1). åºåˆ—æ ‡æ³¨.   </p>
<p>(2). åˆ†ç±»ä»»åŠ¡               </p>
<p>(3). å¥å­å…³ç³»åˆ¤æ–­</p>
<p>(4). ç”Ÿæˆå¼ä»»åŠ¡</p>
</blockquote>
<p><img src="/images/nlp/bert-sample-1.png" width="700" alt="Bertçš„é¢„è®­ç»ƒå’Œå¾®è°ƒï¼ˆå›¾ç‰‡æ¥è‡ªBertçš„åŸè®ºæ–‡ï¼‰"></p>
<p>BERTçš„ç›®çš„æ˜¯é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯é¢„è®­ç»ƒä¸€ä¸ªæ¨¡å‹å¯ä»¥å¯¹å¥å­è¿›è¡Œembeddingï¼Œå…¶ä½œç”¨å¯ä»¥ç±»æ¯”word embeddingã€‚è®ºæ–‡é¦–å…ˆå¯¹Language model pre-trainingçš„æ–¹æ³•è¿›è¡Œäº†ä»‹ç»ï¼Œä¸€ä¸ªæ˜¯Feature-basedçš„æ–¹æ³•ï¼Œä¾‹å¦‚ELMoï¼Œä¸€ä¸ªæ˜¯Fine-tuningçš„æ–¹æ³•ï¼Œä¾‹å¦‚OpenAI GPTï¼ŒBERTåŒæ ·å±äºåè€…ã€‚é‚£ä¹ˆBERTæ˜¯å¦‚ä½•é¢„è®­ç»ƒçš„å‘¢ï¼Ÿ</p>
<p><strong>é‚£ä¹ˆBERTæ˜¯å¦‚ä½•é¢„è®­ç»ƒçš„å‘¢ï¼Ÿ</strong></p>
<h2 id="Task1ï¼š-Masked-Language-Model"><a href="#Task1ï¼š-Masked-Language-Model" class="headerlink" title="Task1ï¼š Masked Language Model"></a>Task1ï¼š Masked Language Model</h2><p>æ€æƒ³å¾ˆç®€å•ï¼Œå°±æ˜¯éšæœºmaskå¥å­ä¸­çš„ä¸€éƒ¨åˆ†è¯ï¼Œç›®æ ‡æ˜¯åˆ©ç”¨å…¶å®ƒè¯å»é¢„æµ‹è¢«maskæ‰çš„è¯ã€‚</p>
<p>å…·ä½“BERTé‡‡å–çš„ç­–ç•¥å¦‚ä¸‹ï¼š</p>
<p><img src="/images/nlp/Bert-tutorial-1.jpg" width="600" alt="Masked Language Model"></p>
<p>æ–‡ä¸­è§£é‡Šå¹¶ä¸100%è¿›è¡Œmaskçš„åŸå› æ˜¯ä¸ºäº†ä¿æŒpre-trainingä¸fine-tuningçš„ä¸€è‡´ï¼Œå› ä¸ºfine-tuningçš„æ—¶å€™å¹¶ä¸èƒ½çœ‹åˆ°[mask]ã€‚è‡³äºå¼•å…¥éšæœºwordçš„åŸå› ä¸ªäººæ„Ÿè§‰ä»…ä»…æ˜¯å¼•å…¥ä¸€äº›å™ªå£°ä»è€Œä½¿æ¨¡å‹æ›´ç¨³å¥ï¼Œå…·æœ‰ä¸€å®šçº é”™èƒ½åŠ›ã€‚ä¸€ç‚¹ç‰µå¼ºçš„ç†ç”±æ˜¯æ–‡ä¸­å¼ºè°ƒäº†å’Œdenoising auto-encodersçš„åŒºåˆ«ã€‚</p>
<p><a href="https://zhuanlan.zhihu.com/p/49542105" target="_blank" rel="external">Transformerä¸BERTæµ…è¯´</a></p>
<h2 id="Task2ï¼š-Next-Sentence-Prediction"><a href="#Task2ï¼š-Next-Sentence-Prediction" class="headerlink" title="Task2ï¼š Next Sentence Prediction"></a>Task2ï¼š Next Sentence Prediction</h2><p>NSP ç®€å•è¯´å°±æ˜¯é¢„æµ‹ å¥å­B æ˜¯å¦æ‰¿æ¥ å¥å­Aï¼Œå…·ä½“ BERT çš„ç­–ç•¥æ˜¯ï¼š</p>
<blockquote>
<p>(1). 50%Bæ˜¯Açš„ä¸‹æ–‡ï¼Œlabel=IsNext</p>
<p>(2). 50%ä¸æ˜¯ï¼Œlabel=NotNext</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯ä¸ªäºŒåˆ†ç±»é—®é¢˜ã€‚</p>
<p><img src="/images/nlp/Bert-tutorial-2.jpg" width="700" alt="NSPç®€å•è¯´å°±æ˜¯é¢„æµ‹å¥å­Bæ˜¯å¦æ‰¿æ¥å¥å­A"></p>
<p>pre-training è¿‡ç¨‹åŒæ—¶ä¼˜åŒ–ä¸Šé¢ä¸¤ä¸ªä»»åŠ¡ï¼Œå…¶ç»“æŸåå°±å¯ä»¥åœ¨ç‰¹å®šä»»åŠ¡ä¸Šè¿›è¡Œ fine-tuningï¼Œä»…éœ€åœ¨BERTçš„åŸºç¡€ä¸Šå¢åŠ ç›¸åº”çš„ output layer å³å¯.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/51934140" target="_blank" rel="external">å¼ ä¿Šæ—: å¤©ç©ºä¹‹åŸï¼šæ‹‰é©¬åŠªé‡‘å¼æ€ç»´è®­ç»ƒæ³•</a></li>
<li><a href="https://www.zhihu.com/question/20584585/answer/15559213" target="_blank" rel="external">äº’è”ç½‘äººåˆ°äº† 30 å²ï¼Œå¤§éƒ¨åˆ†éƒ½å»å¹²ä»€ä¹ˆäº†ï¼Ÿ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/50717786" target="_blank" rel="external">AINLP BERTç›¸å…³è®ºæ–‡ã€æ–‡ç« å’Œä»£ç èµ„æºæ±‡æ€»</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/53099098" target="_blank" rel="external">è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„Transformerå’ŒBERT</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/36331888" target="_blank" rel="external">RNNå’ŒLSTMå¼±ï¼çˆ†ï¼äº†ï¼æ³¨æ„åŠ›æ¨¡å‹æ‰æ˜¯ç‹é“</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/46997268" target="_blank" rel="external">NLPçªç ´æ€§æˆæœ BERT æ¨¡å‹è¯¦ç»†è§£è¯»</a></li>
<li><a href="https://mp.weixin.qq.com/s/H4at_BDLwZWqlBHLjMZWRQ" target="_blank" rel="external">ä¸€æ­¥æ­¥ç†è§£BERT</a></li>
<li><a href="https://kexue.fm/archives/6736" target="_blank" rel="external">å½“Berté‡ä¸ŠKerasï¼šè¿™å¯èƒ½æ˜¯Bertæœ€ç®€å•çš„æ‰“å¼€å§¿åŠ¿</a></li>
<li><a href="https://terrifyzhao.github.io/2019/01/17/BERTå®Œå…¨æŒ‡å—.html" target="_blank" rel="external">BERTå®Œå…¨æŒ‡å—</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/53099098" target="_blank" rel="external">è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„Transformerå’ŒBERT</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Developer's manual]]></title>
      <url>http://shopee.ai/2019/10/20/devops/developer-manual/</url>
      <content type="html"><![CDATA[<p><img src="/images/devops/developer-3.png" width="550" alt="Developer's manual"></p>
<a id="more"></a>
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html" target="_blank" rel="external">é˜®ä¸€å³°: Docker å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html" target="_blank" rel="external">é˜®ä¸€å³°: Docker å¾®æœåŠ¡æ•™ç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/developer/" target="_blank" rel="external">é˜®ä¸€å³°: developer æ‰‹å†Œ</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html" target="_blank" rel="external">é˜®ä¸€å³°: RESTful API æœ€ä½³å®è·µ</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" target="_blank" rel="external">é˜®ä¸€å³°: RESTful API è®¾è®¡æŒ‡å—</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="external">é˜®ä¸€å³°: MVCï¼ŒMVP å’Œ MVVM çš„å›¾ç¤º</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2009/10/5_ways_to_search_for_files_using_the_terminal.html" target="_blank" rel="external">é˜®ä¸€å³°: Linuxçš„äº”ä¸ªæŸ¥æ‰¾å‘½ä»¤</a></li>
<li><p><a href="http://www.ruanyifeng.com/blog/2019/09/curl-reference.html" target="_blank" rel="external">é˜®ä¸€å³°: curl çš„ç”¨æ³•æŒ‡å—</a></p>
</li>
<li><p><a href="https://coolshell.cn/articles/19219.html" target="_blank" rel="external">CoolShell: æ‰“é€ é«˜æ•ˆçš„å·¥ä½œç¯å¢ƒ â€“ SHELL ç¯‡</a></p>
</li>
<li><a href="https://coolshell.cn/articles/18654.html" target="_blank" rel="external">CoolShell: è®°ä¸€æ¬¡KUBERNETES/DOCKERç½‘ç»œæ’éšœ</a></li>
<li><a href="https://coolshell.cn/articles/4990.html" target="_blank" rel="external">CoolShell: ç¨‹åºå‘˜æŠ€æœ¯ç»ƒçº§æ”»ç•¥</a></li>
<li><a href="https://www.liaoxuefeng.com/" target="_blank" rel="external">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></li>
</ul>
<p>devops</p>
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2018/11/awk.html" target="_blank" rel="external">é˜®ä¸€å³°: awk å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2019/08/xargs-tutorial.html" target="_blank" rel="external">é˜®ä¸€å³°: xargs å‘½ä»¤æ•™ç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/09/vimrc.html" target="_blank" rel="external">é˜®ä¸€å³°: Vim é…ç½®å…¥é—¨</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html" target="_blank" rel="external">é˜®ä¸€å³°: å‘½ä»¤è¡Œé€šé…ç¬¦æ•™ç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2017/02/filename-should-be-lowercase.html" target="_blank" rel="external">é˜®ä¸€å³°: ä¸ºä»€ä¹ˆæ–‡ä»¶åè¦å°å†™ï¼Ÿ</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2016/07/yaml.html" target="_blank" rel="external">é˜®ä¸€å³°: YAML è¯­è¨€æ•™ç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2014/03/server_setup.html" target="_blank" rel="external">é˜®ä¸€å³°: Linux Serverçš„åˆæ­¥é…ç½®æµç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2012/08/how_to_read_diff.html&#39;" target="_blank" rel="external">é˜®ä¸€å³°: è¯»æ‡‚diff</a></li>
<li><a href="https://www.epubit.com/bookDetails?id=N847" target="_blank" rel="external">Steve Yegge ç¨‹åºå‘˜çš„å‘å–Š</a></li>
</ul>
<p>other</p>
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2010/05/my_wp_tweet_archive.html" target="_blank" rel="external">æˆ‘çš„Tweetæ¡£æ¡ˆ</a></li>
<li><a href="https://www.liaoxuefeng.com/" target="_blank" rel="external">æ„Ÿè°¢å»–é›ªå³°å¸®åŠ©</a></li>
<li><a href="https://book.douban.com/people/haoel/collect?start=0&amp;sort=time&amp;rating=all&amp;filter=all&amp;mode=grid" target="_blank" rel="external">é™ˆçš“è¯»è¿‡çš„ä¹¦(72)</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Docker + Hexo]]></title>
      <url>http://shopee.ai/2019/10/19/devops/docker-hexo/</url>
      <content type="html"><![CDATA[<p><img src="/images/devops/docker-3.1.svg" width="550" alt="Docker"></p>
<a id="more"></a>
<p>ä¸ºäº†æ›´å¥½çš„å¼•å‡º Docker, å…ˆç®€å•ä»‹ç»ä¸‹ Linux å®¹å™¨:</p>
<h2 id="1-docker-what"><a href="#1-docker-what" class="headerlink" title="1. docker what?"></a>1. docker what?</h2><p>Docker å±äº Linux å®¹å™¨çš„ä¸€ç§å°è£…ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ã€‚</p>
<h2 id="2-dockerfile"><a href="#2-dockerfile" class="headerlink" title="2. dockerfile"></a>2. dockerfile</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">FROM blair101/ubuntu-hexo-blog:v1.3</span><br><span class="line"></span><br><span class="line">COPY ./<span class="built_in">source</span> /blog/<span class="built_in">source</span></span><br><span class="line"></span><br><span class="line">WORKDIR /blog</span><br><span class="line"></span><br><span class="line"><span class="comment">#RUN hexo s</span></span><br><span class="line"></span><br><span class="line">EXPOSE 4000</span><br><span class="line"></span><br><span class="line">CMD hexo s</span><br></pre></td></tr></table></figure>
<h2 id="3-markdown-é€‚é…æ¸²æŸ“é—®é¢˜"><a href="#3-markdown-é€‚é…æ¸²æŸ“é—®é¢˜" class="headerlink" title="3. markdown é€‚é…æ¸²æŸ“é—®é¢˜"></a>3. markdown é€‚é…æ¸²æŸ“é—®é¢˜</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-renderer-markdown-it</span><br><span class="line">npm un hexo-renderer-marked</span><br><span class="line">npm install hexo-renderer-markdown-it-plus --save</span><br><span class="line">npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://hexo.io/" target="_blank" rel="external">hexo.io</a>, <a href="https://hexo.io/zh-tw/docs/server.html" target="_blank" rel="external">hexo-server</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html" target="_blank" rel="external">é˜®ä¸€å³°: Docker å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html" target="_blank" rel="external">é˜®ä¸€å³°: Docker å¾®æœåŠ¡æ•™ç¨‹</a></li>
<li><a href="https://icoty.github.io/2019/04/22/docker/" target="_blank" rel="external">è’é‡ä¹‹è: Docker æœ€ç®€æ•™ç¨‹</a></li>
<li><a href="https://icoty.github.io/2019/04/18/docker-hexo-blog/" target="_blank" rel="external">è’é‡ä¹‹è: Hexo+Github-Dockerfileè‡ªåŠ¨æ­å»º</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/45610616" target="_blank" rel="external">Docker å®¹å™¨ä»å…¥é—¨åˆ°å…¥é­”</a></li>
</ul>
<p>plugins:</p>
<ul>
<li><a href="http://www.itomtan.com/2017/09/29/the-problem-when-use-post-asset-folder/" target="_blank" rel="external">Hexo + hexo-asset-image</a></li>
<li><a href="https://zhiho.github.io/2015/09/26/start-hexo1/" target="_blank" rel="external">Hexo + hexo-deployer-git</a></li>
<li><a href="https://chad-it.github.io/2018/07/01/Hexoé›†æˆWordCountæ’ä»¶/" target="_blank" rel="external">Hexo + WordCount</a></li>
<li><a href="https://wizardforcel.gitbooks.io/markdown-simple-world/hexo-tutor-6.html" target="_blank" rel="external">Hexo + sitemapã€rss</a></li>
<li><a href="https://hexo.io/zh-tw/docs/tag-plugins#Image" target="_blank" rel="external">æ¨™ç±¤å¤–æ›ï¼ˆTag Pluginsï¼‰</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Docker microservices]]></title>
      <url>http://shopee.ai/2019/10/14/devops/docker-wordpress-tutorial/</url>
      <content type="html"><![CDATA[<p><img src="/images/devops/docker-2.1.png" width="550" alt="Docker Microservices"></p>
<a id="more"></a>
<p>ç«™åœ¨ Docker çš„è§’åº¦ï¼Œ<strong><code>Software</code></strong> is the combination of <strong><code>Containers</code></strong>ï¼š</p>
<blockquote>
<ol>
<li>ä¸šåŠ¡é€»è¾‘å®¹å™¨</li>
<li>æ•°æ®åº“å®¹å™¨</li>
<li>å‚¨å­˜å®¹å™¨</li>
<li>â€¦</li>
</ol>
</blockquote>
<p>Docker ä½¿å¾—è½¯ä»¶å¯ä»¥æ‹†åˆ†æˆè‹¥å¹²ä¸ªæ ‡å‡†åŒ–å®¹å™¨ï¼Œç„¶ååƒæ­ç§¯æœ¨ä¸€æ ·ç»„åˆèµ·æ¥ã€‚</p>
<p>è¿™æ­£æ˜¯å¾®æœåŠ¡ï¼ˆmicroservicesï¼‰çš„æ€æƒ³ï¼š</p>
<blockquote>
<p>è½¯ä»¶æŠŠä»»åŠ¡å¤–åŒ…å‡ºå»ï¼Œè®©å„ç§å¤–éƒ¨æœåŠ¡å®Œæˆè¿™äº›ä»»åŠ¡ï¼Œè½¯ä»¶æœ¬èº«åªæ˜¯åº•å±‚æœåŠ¡çš„è°ƒåº¦ä¸­å¿ƒå’Œç»„è£…å±‚ã€‚</p>
</blockquote>
<!--<img src="/images/devops/docker-2.2.png" width="550" alt="Docker Microservices" />-->
<p>å¦‚ä½•åœ¨<strong>ä¸€å°è®¡ç®—æœº</strong>ä¸Šå®ç°å¤šä¸ª <strong><code>Services</code></strong>ï¼Œè®©å®ƒä»¬äº’ç›¸é…åˆï¼Œç»„åˆå‡ºä¸€ä¸ª <strong><code>Application</code></strong>:</p>
<p><img src="/images/devops/docker-2.3.png" width="550" alt="Docker Microservices"></p>
<p>ä¸ºäº†åŠ æ·±ç†è§£ï¼Œé‡‡ç”¨ä¸‰ç§æ–¹æ³•ï¼Œæ¼”ç¤ºå¦‚ä½•æ¶è®¾ WordPress ç½‘ç«™</p>
<blockquote>
<p>æ–¹æ³• Aï¼šè‡ªå»º WordPress å®¹å™¨<br>æ–¹æ³• Bï¼šé‡‡ç”¨å®˜æ–¹çš„ WordPress å®¹å™¨<br>æ–¹æ³• Cï¼šé‡‡ç”¨ Docker Compose å·¥å…·</p>
</blockquote>
<h2 id="1-è‡ªå»º-WordPress-Container"><a href="#1-è‡ªå»º-WordPress-Container" class="headerlink" title="1. è‡ªå»º WordPress Container"></a>1. è‡ªå»º WordPress Container</h2><p><a href="http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html" target="_blank" rel="external">æ–¹æ³• Aï¼šè‡ªå»º WordPress Container</a></p>
<h3 id="1-1-å®˜æ–¹-PHP-image"><a href="#1-1-å®˜æ–¹-PHP-image" class="headerlink" title="1.1 å®˜æ–¹ PHP image"></a>1.1 å®˜æ–¹ PHP image</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker container run \</span><br><span class="line">    -p 8080:80 \</span><br><span class="line">    -it \</span><br><span class="line">    --rm \</span><br><span class="line">    --name wordpress \</span><br><span class="line">   --volume <span class="string">"<span class="variable">$PWD</span>/"</span>:/var/www/html php:5.6-apache</span><br></pre></td></tr></table></figure>
<h3 id="1-2-æ‹·è´-WordPress-å®‰è£…åŒ…"><a href="#1-2-æ‹·è´-WordPress-å®‰è£…åŒ…" class="headerlink" title="1.2 æ‹·è´ WordPress å®‰è£…åŒ…"></a>1.2 æ‹·è´ WordPress å®‰è£…åŒ…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ wget https://cn.wordpress.org/wordpress-4.9.4-zh_CN.tar.gz</span><br><span class="line">$ tar -xvf wordpress-4.9.4-zh_CN.tar.gz</span><br></pre></td></tr></table></figure>
<h3 id="1-3-å®˜æ–¹-MySQL-Container"><a href="#1-3-å®˜æ–¹-MySQL-Container" class="headerlink" title="1.3 å®˜æ–¹ MySQL Container"></a>1.3 å®˜æ–¹ MySQL Container</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker container run \</span><br><span class="line">  <span class="_">-d</span> \</span><br><span class="line">  --rm \</span><br><span class="line">  --name wordpressdb \</span><br><span class="line">  --env MYSQL_ROOT_PASSWORD=123456 \</span><br><span class="line">  --env MYSQL_DATABASE=wordpress \</span><br><span class="line">  mysql:5.7</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">228857116d2d        mysql:5.7           <span class="string">"docker-entrypoint.sâ€¦"</span>   4 minutes ago       Up 4 minutes        3306/tcp, 33060/tcp    wordpressdb</span><br><span class="line">a4c7f3d045a3        php:5.6-apache      <span class="string">"docker-php-entrypoiâ€¦"</span>   23 minutes ago      Up 23 minutes       0.0.0.0:8080-&gt;80/tcp   wordpress</span><br><span class="line">(anaconda3) (base)</span><br><span class="line">âœ</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œwordpressdbæ˜¯åå°è¿è¡Œçš„ï¼Œå‰å°çœ‹ä¸è§å®ƒçš„è¾“å‡ºï¼Œå¿…é¡»ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker container logs wordpressdb</span><br></pre></td></tr></table></figure>
<h3 id="1-4-å®šåˆ¶-PHP-Container"><a href="#1-4-å®šåˆ¶-PHP-Container" class="headerlink" title="1.4 å®šåˆ¶ PHP Container"></a>1.4 å®šåˆ¶ PHP Container</h3><p>PHP çš„å®˜æ–¹ image ä¸å¸¦æœ‰mysqlæ‰©å±•ï¼Œå¿…é¡»è‡ªå·±æ–°å»º image æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker container stop wordpress</span><br></pre></td></tr></table></figure>
<p>Create Dockerfile in docker-demo dir</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">FROM php:5.6-apache</span><br><span class="line">RUN docker-php-ext-install mysqli</span><br><span class="line">CMD apache2-foreground</span><br></pre></td></tr></table></figure>
<p>åŸºäºè¿™ä¸ª Dockerfile æ–‡ä»¶ï¼Œæ–°å»ºä¸€ä¸ªåä¸º phpwithmysql çš„ image æ–‡ä»¶.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t phpwithmysql .</span><br></pre></td></tr></table></figure>
<h3 id="1-5-WordpresspC-è¿æ¥-MySQL"><a href="#1-5-WordpresspC-è¿æ¥-MySQL" class="headerlink" title="1.5 WordpresspC è¿æ¥ MySQL"></a>1.5 WordpresspC è¿æ¥ MySQL</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker container run \</span><br><span class="line">  --rm \</span><br><span class="line">  --name wordpress \</span><br><span class="line">  --volume <span class="string">"<span class="variable">$PWD</span>/"</span>:/var/www/html \</span><br><span class="line">  --link wordpressdb:mysql \</span><br><span class="line">  phpwithmysql</span><br></pre></td></tr></table></figure>
<blockquote>
<p>WordPressC è¦è¿åˆ° wordpressdbCï¼Œå†’å·è¡¨ç¤ºè¯¥ Container çš„åˆ«åæ˜¯ mysql .</p>
</blockquote>
<p><img src="/images/devops/docker-1.3.png" width="750" alt="wp"></p>
<p>çœ‹åˆ°ä»¥ä¸Šç•Œé¢ï¼Œè‡ªå»ºWPC æ¼”ç¤ºå®Œæ¯•ã€‚ å…³é—­ Containersã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ docker container stop wordpress wordpressdb</span><br></pre></td></tr></table></figure>
<h2 id="2-Official-WordPress-Container"><a href="#2-Official-WordPress-Container" class="headerlink" title="2. Official WordPress Container"></a>2. Official WordPress Container</h2><p><a href="http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html" target="_blank" rel="external">æ–¹æ³• Bï¼šå®˜æ–¹ WordPress Container</a></p>
<h3 id="2-1-mysql-container"><a href="#2-1-mysql-container" class="headerlink" title="2.1 mysql container"></a>2.1 mysql container</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker container run \</span><br><span class="line">  <span class="_">-d</span> \</span><br><span class="line">  --rm \</span><br><span class="line">  --name wordpressdb \</span><br><span class="line">  --env MYSQL_ROOT_PASSWORD=123456 \</span><br><span class="line">  --env MYSQL_DATABASE=wordpress \</span><br><span class="line">  mysql:5.7</span><br></pre></td></tr></table></figure>
<h3 id="2-2-wordpress-container"><a href="#2-2-wordpress-container" class="headerlink" title="2.2 wordpress container"></a>2.2 wordpress container</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ docker container run \</span><br><span class="line">  -p 8080:80 \</span><br><span class="line">  <span class="_">-d</span> \</span><br><span class="line">  --rm \</span><br><span class="line">  --name wordpress \</span><br><span class="line">  --env WORDPRESS_DB_PASSWORD=123456 \</span><br><span class="line">  --link wordpressdb:mysql \</span><br><span class="line">  wordpress</span><br></pre></td></tr></table></figure>
<blockquote>
<p>  -p 127.0.0.1:8080:80ï¼šå°†å®¹å™¨çš„ 80 ç«¯å£ æ˜ å°„åˆ° 127.0.0.2 çš„ 8080 ç«¯å£</p>
<p>  â€“volume â€œ$PWD/wordpressâ€:/var/www/htmlï¼šå°†å®¹å™¨çš„/var/www/htmlç›®å½•æ˜ å°„åˆ°å½“å‰ç›®å½•çš„wordpresså­ç›®å½•</p>
</blockquote>
<h3 id="2-3-docker-container-ls"><a href="#2-3-docker-container-ls" class="headerlink" title="2.3 docker container ls"></a>2.3 docker container ls</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ docker container ls --all</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                 NAMES</span><br><span class="line">99e93c4dfc7c        wordpress           <span class="string">"docker-entrypoint.sâ€¦"</span>   2 seconds ago       Up 1 second         80/tcp                wordpress</span><br><span class="line">373fcc5e1b94        mysql:5.7           <span class="string">"docker-entrypoint.sâ€¦"</span>   2 minutes ago       Up 2 minutes        3306/tcp, 33060/tcp   wordpressdb</span><br><span class="line">(anaconda3) (base)</span><br></pre></td></tr></table></figure>
<p>æµè§ˆå™¨ <a href="http://localhost:8080" target="_blank" rel="external">http://localhost:8080</a> å°±èƒ½çœ‹åˆ° WordPress çš„å®‰è£…æç¤º.</p>
<h3 id="2-4-stop-containers"><a href="#2-4-stop-containers" class="headerlink" title="2.4 stop containers"></a>2.4 stop containers</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ docker container stop wordpress wordpressdb</span><br></pre></td></tr></table></figure>
<h2 id="3-Docker-Compose-Tool"><a href="#3-Docker-Compose-Tool" class="headerlink" title="3. Docker Compose Tool"></a>3. Docker Compose Tool</h2><p><a href="https://docs.docker.com/compose/" target="_blank" rel="external">Compose</a> ä¸€ä¸ªå·¥å…·è½¯ä»¶, å¯ä»¥ç®¡ç†å¤šä¸ª Docker å®¹å™¨ç»„æˆä¸€ä¸ªåº”ç”¨.</p>
<blockquote>
<p>å®šä¹‰ docker-compose.ymlï¼Œå†™å¥½å¤šå®¹å™¨çš„è°ƒç”¨å…³ç³»ã€‚ç„¶åï¼Œåªè¦ä¸€ä¸ªå‘½ä»¤ï¼Œå°±èƒ½åŒæ—¶å¯åŠ¨/å…³é—­è¿™äº›å®¹å™¨.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>
<h3 id="3-1-WordPress-example"><a href="#3-1-WordPress-example" class="headerlink" title="3.1 WordPress example"></a>3.1 WordPress example</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql:</span><br><span class="line">    image: mysql:5.7</span><br><span class="line">    environment:</span><br><span class="line">     - MYSQL_ROOT_PASSWORD=123456</span><br><span class="line">     - MYSQL_DATABASE=wordpress</span><br><span class="line">web:</span><br><span class="line">    image: wordpress</span><br><span class="line">    links:</span><br><span class="line">     - mysql</span><br><span class="line">    environment:</span><br><span class="line">     - WORDPRESS_DB_PASSWORD=123456</span><br><span class="line">    ports:</span><br><span class="line">     - &quot;127.0.0.3:8080:80&quot;</span><br><span class="line">    working_dir: /var/www/html</span><br><span class="line">    volumes:</span><br><span class="line">     - wordpress:/var/www/html</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨ 2ä¸ª Container</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose up</span><br></pre></td></tr></table></figure>
<p>å…³é—­ 2ä¸ª Container</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose stop</span><br></pre></td></tr></table></figure>
<p>å…³é—­ä»¥åï¼Œè¿™ä¸¤ä¸ªå®¹å™¨æ–‡ä»¶è¿˜æ˜¯å­˜åœ¨çš„ï¼Œå†™åœ¨é‡Œé¢çš„æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚ä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥å¤ç”¨ã€‚ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æŠŠè¿™ä¸¤ä¸ªå®¹å™¨æ–‡ä»¶åˆ é™¤ï¼ˆå®¹å™¨å¿…é¡»å·²ç»åœæ­¢è¿è¡Œï¼‰ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose rm</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html" target="_blank" rel="external">é˜®ä¸€å³°: Docker å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html" target="_blank" rel="external">é˜®ä¸€å³°: Docker å¾®æœåŠ¡æ•™ç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/developer/" target="_blank" rel="external">é˜®ä¸€å³°: developer æ‰‹å†Œ</a></li>
<li><a href="https://icoty.github.io/2019/04/22/docker/" target="_blank" rel="external">è’é‡ä¹‹è: Dockeræœ€ç®€æ•™ç¨‹</a></li>
<li><a href="https://icoty.github.io/2019/04/18/docker-hexo-blog/" target="_blank" rel="external">Hexo+Githubåšå®¢æœ€ç®€æ•™ç¨‹-Dockerfileè‡ªåŠ¨æ­å»º</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Docker tutorial]]></title>
      <url>http://shopee.ai/2019/10/07/devops/docker-tutorial/</url>
      <content type="html"><![CDATA[<p><img src="/images/devops/docker-1.1.jpg" width="550" alt="Docker"></p>
<a id="more"></a>
<p>ç”±äºç¯å¢ƒé…ç½®çš„éš¾é¢˜ï¼Œæ‰€ä»¥å¼€å‘è€…å¸¸å¸¸ä¼šè¯´ï¼š<strong>It works on my machine</strong></p>
<blockquote>
<p>ä¸ºäº†æ›´å¥½çš„å¼•å‡º Docker, å…ˆç®€å•ä»‹ç»ä¸‹ Linux å®¹å™¨:</p>
<p>Linux Container ä¸æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„ OSï¼Œè€Œæ˜¯å¯¹è¿›ç¨‹è¿›è¡Œéš”ç¦»ã€‚æˆ–è€…è¯´ï¼Œåœ¨æ­£å¸¸è¿›ç¨‹çš„å¤–é¢å¥—äº†ä¸€ä¸ªä¿æŠ¤å±‚ã€‚å¯¹äº <strong>Container</strong> é‡Œé¢çš„è¿›ç¨‹æ¥è¯´ï¼Œå®ƒæ¥è§¦åˆ°çš„å„ç§èµ„æºéƒ½æ˜¯ <strong>virtual</strong>ï¼Œä»è€Œå®ç°ä¸åº•å±‚ç³»ç»Ÿçš„éš”ç¦»ã€‚</p>
</blockquote>
<ul>
<li><p><strong>Container</strong> æ˜¯è¿›ç¨‹çº§åˆ«çš„ï¼Œç›¸æ¯” virtual machine æœ‰å¾ˆå¤šä¼˜åŠ¿ã€‚</p>
</li>
<li><p><strong>Container</strong> æœ‰ç‚¹åƒè½»é‡çº§çš„ virtual machineï¼Œèƒ½å¤Ÿæä¾› virtual_envï¼Œä½†æ˜¯æˆæœ¬å¼€é”€å°å¾—å¤š</p>
</li>
</ul>
<h2 id="1-docker-what"><a href="#1-docker-what" class="headerlink" title="1. docker what?"></a>1. docker what?</h2><p>Docker å±äº Linux å®¹å™¨çš„ä¸€ç§å°è£…ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ã€‚å®ƒæ˜¯ç›®å‰æœ€æµè¡Œçš„ Linux å®¹å™¨è§£å†³æ–¹æ¡ˆã€‚</p>
<p>Docker å°† Application ä¸è¯¥ç¨‹åºçš„ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ä¸€ä¸ª image_file é‡Œé¢ã€‚è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚</p>
<p>ç¨‹åºåœ¨è¿™ä¸ª Container é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·ã€‚æœ‰äº† Dockerï¼Œå°±ä¸ç”¨æ‹…å¿ƒç¯å¢ƒé—®é¢˜ã€‚</p>
<h2 id="2-docker-function"><a href="#2-docker-function" class="headerlink" title="2. docker function"></a>2. docker function</h2><blockquote>
<ol>
<li>æä¾›ä¸€æ¬¡æ€§çš„ç¯å¢ƒ</li>
<li>æä¾›å¼¹æ€§çš„äº‘æœåŠ¡</li>
<li>ç»„å»ºå¾®æœåŠ¡æ¶æ„</li>
</ol>
</blockquote>
<h2 id="3-docker-install"><a href="#3-docker-install" class="headerlink" title="3. docker install"></a>3. docker install</h2><p><a href="https://docs.docker.com/docker-for-mac/install/" target="_blank" rel="external">Install Docker Desktop on Mac</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker version</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">$ docker info</span><br></pre></td></tr></table></figure>
<h2 id="4-docker-image-file"><a href="#4-docker-image-file" class="headerlink" title="4. docker image file"></a>4. docker image file</h2><ol>
<li>Docker æŠŠ <strong><code>Application åŠä¾èµ–ï¼Œæ‰“åŒ…åœ¨ image file</code></strong> é‡Œ.</li>
<li>åªæœ‰é€šè¿‡è¿™ä¸ª image fileï¼Œæ‰èƒ½ç”Ÿæˆ Docker Container, image file å¯ä»¥çœ‹ä½œæ˜¯ template of container.</li>
<li>Docker æ ¹æ® image file ç”Ÿæˆ instance of container.</li>
<li>åŒä¸€ image æ–‡ä»¶ï¼Œå¯ä»¥ç”Ÿæˆå¤šä¸ªåŒæ—¶è¿è¡Œçš„ instance of container.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºæœ¬æœºçš„æ‰€æœ‰ image æ–‡ä»¶ã€‚</span></span><br><span class="line">$ docker image ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ image æ–‡ä»¶</span></span><br><span class="line">$ docker image rm [imageName]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>image æ–‡ä»¶æ˜¯é€šç”¨çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡ä½¿ç”¨åˆ«äººåˆ¶ä½œå¥½çš„ image æ–‡ä»¶ï¼Œè€Œä¸æ˜¯è‡ªå·±åˆ¶ä½œã€‚å³ä½¿è¦å®šåˆ¶ï¼Œä¹Ÿåº”è¯¥åŸºäºåˆ«äººçš„ image æ–‡ä»¶è¿›è¡ŒåŠ å·¥ï¼Œè€Œä¸æ˜¯ä»é›¶å¼€å§‹åˆ¶ä½œã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿å…±äº«ï¼Œimage æ–‡ä»¶åˆ¶ä½œå®Œæˆåï¼Œå¯ä»¥ä¸Šä¼ åˆ°ç½‘ä¸Šçš„ä»“åº“ã€‚Docker çš„å®˜æ–¹ä»“åº“ Docker Hub æ˜¯æœ€é‡è¦ã€æœ€å¸¸ç”¨çš„ image ä»“åº“ã€‚</p>
</blockquote>
<h2 id="5-exampleï¼šhello-world"><a href="#5-exampleï¼šhello-world" class="headerlink" title="5. exampleï¼šhello world"></a>5. exampleï¼šhello world</h2><p>æˆ‘ä»¬é€šè¿‡æœ€ç®€å•çš„ image æ–‡ä»¶â€<a href="https://hub.docker.com/_/hello-world" target="_blank" rel="external">hello world</a>â€œï¼Œæ„Ÿå—ä¸€ä¸‹ Docker</p>
<p>(1). å°† image æ–‡ä»¶ä»ä»“åº“æŠ“å–åˆ°æœ¬åœ°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image pull library/hello-world</span><br><span class="line"><span class="comment">#or</span></span><br><span class="line">$ docker image pull hello-world</span><br></pre></td></tr></table></figure>
<p>(2). æœ¬æœºçœ‹åˆ°è¿™ä¸ª image æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls</span><br></pre></td></tr></table></figure>
<p>(3). è¿è¡Œè¿™ä¸ª image æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container run hello-world</span><br></pre></td></tr></table></figure>
<p>è¿è¡ŒæˆåŠŸ:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ docker container run hello-world</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">... ...</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºè¿™æ®µæç¤ºä»¥åï¼Œhello worldå°±ä¼šåœæ­¢è¿è¡Œï¼Œå®¹å™¨è‡ªåŠ¨ç»ˆæ­¢ã€‚</p>
<p>(4). æ‰‹åŠ¨ç»ˆæ­¢å®¹å™¨</p>
<p>å¯¹äºé‚£äº›ä¸ä¼šè‡ªåŠ¨ç»ˆæ­¢çš„å®¹å™¨ï¼Œå¿…é¡»ä½¿ç”¨ docker container kill æ‰‹åŠ¨ç»ˆæ­¢.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container <span class="built_in">kill</span> [containID]</span><br></pre></td></tr></table></figure>
<h2 id="6-container-file"><a href="#6-container-file" class="headerlink" title="6. container file"></a>6. container file</h2><p>image file ç”Ÿæˆçš„ <strong>instance of container</strong>ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç§°ä¸º container fileã€‚</p>
<blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ container ç”Ÿæˆï¼Œå°±ä¼šåŒæ—¶å­˜åœ¨ 2 filesï¼š <strong>image file</strong> å’Œ <strong>container file</strong>ã€‚</p>
<p>ä¸” close container å¹¶ä¸ä¼š delete container fileï¼Œåªæ˜¯ container stop run.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºæœ¬æœºæ­£åœ¨è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line">$ docker container ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæœ¬æœºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬ç»ˆæ­¢è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line">$ docker container ls --all</span><br></pre></td></tr></table></figure>
<p><strong>docker çš„å¸¸ç”¨å‘½ä»¤:</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker --version 			<span class="comment">#æŸ¥çœ‹Dockerç‰ˆæœ¬</span></span><br><span class="line">docker info 				<span class="comment">#æŸ¥çœ‹Dockerå®‰è£…æœ‰å…³çš„æ‰€æœ‰ç»†èŠ‚ä¿¡æ¯</span></span><br><span class="line">docker version				<span class="comment">#æŸ¥çœ‹Dockerå®‰è£…æœ‰å…³çš„æ‰€æœ‰ç»†èŠ‚ä¿¡æ¯</span></span><br><span class="line">docker image ls				<span class="comment">#åˆ—å‡ºé•œåƒæ¸…å•</span></span><br><span class="line">docker container ls 	 	<span class="comment">#åˆ—å‡ºå®¹å™¨æ¸…å•ï¼ˆåˆ—å‡ºè¿è¡Œä¸­çš„å®¹å™¨ï¼‰</span></span><br><span class="line">docker container ls --all 	<span class="comment">#åˆ—å‡ºå®¹å™¨æ¸…å•ï¼ˆåˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼‰</span></span><br><span class="line">docker container ls --aq 	<span class="comment">#åˆ—å‡ºå®¹å™¨æ¸…å•ï¼ˆåˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼Œç®€å•æ¨¡å¼ï¼Œåªæœ‰å®¹å™¨IDï¼‰</span></span><br><span class="line">docker run hello-world		<span class="comment">#æ‰§è¡ŒDockeré•œåƒï¼Œé•œåƒåå­—ä¸ºhello-world</span></span><br></pre></td></tr></table></figure>
<h2 id="7-Dockerfile"><a href="#7-Dockerfile" class="headerlink" title="7. Dockerfile"></a>7. Dockerfile</h2><p>å­¦ä¼šä½¿ç”¨ image æ–‡ä»¶ä»¥åï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œå¦‚ä½•ç”Ÿæˆ image æ–‡ä»¶ï¼Ÿ</p>
<p>è¿™éœ€è¦ç”¨åˆ° Dockerfile æ–‡ä»¶ã€‚å®ƒæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç”¨æ¥é…ç½® imageã€‚</p>
<blockquote>
<p>Docker æ ¹æ® Dockerfile ç”ŸæˆäºŒè¿›åˆ¶çš„ image file .</p>
</blockquote>
<h2 id="8-Custom-docker-container"><a href="#8-Custom-docker-container" class="headerlink" title="8. Custom docker container"></a>8. Custom docker container</h2><h3 id="8-1-make-Dockerfile"><a href="#8-1-make-Dockerfile" class="headerlink" title="8.1 make Dockerfile"></a>8.1 make Dockerfile</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.git</span><br><span class="line">node_modules</span><br><span class="line">npm-debug.log</span><br></pre></td></tr></table></figure>
<h3 id="8-2-create-image"><a href="#8-2-create-image" class="headerlink" title="8.2 create image"></a>8.2 create image</h3><h3 id="8-3-generate-Container"><a href="#8-3-generate-Container" class="headerlink" title="8.3 generate Container"></a>8.3 generate Container</h3><h3 id="8-4-CMD"><a href="#8-4-CMD" class="headerlink" title="8.4 CMD"></a>8.4 CMD</h3><h3 id="8-5-Release-image"><a href="#8-5-Release-image" class="headerlink" title="8.5 Release image"></a>8.5 Release image</h3><p>åœ¨ hub.docker.com æˆ– cloud.docker.com æ³¨å†Œä¸€ä¸ªè´¦æˆ·ã€‚ç„¶åï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤ç™»å½•ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker login</span><br></pre></td></tr></table></figure>
<p>æ¥ç€ï¼Œä¸ºæœ¬åœ°çš„ image æ ‡æ³¨ç”¨æˆ·åå’Œç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image tag [imageName] [username]/[repository]:[tag]</span><br><span class="line"><span class="comment"># å®ä¾‹</span></span><br><span class="line">$ docker image tag koa-demos:0.0.1 ruanyf/koa-demos:0.0.1</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä¸æ ‡æ³¨ç”¨æˆ·åï¼Œé‡æ–°æ„å»ºä¸€ä¸‹ image æ–‡ä»¶ä¹Ÿæ˜¯å¯ä»¥çš„:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image build -t [username]/[repository]:[tag] .</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œå‘å¸ƒ image æ–‡ä»¶:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image push [username]/[repository]:[tag]</span><br></pre></td></tr></table></figure>
<h2 id="9-other-docker-command"><a href="#9-other-docker-command" class="headerlink" title="9. other docker command"></a>9. other docker command</h2><p>docker çš„ä¸»è¦ç”¨æ³•å°±æ˜¯ä¸Šé¢è¿™äº›ï¼Œæ­¤å¤–è¿˜æœ‰å‡ ä¸ªå‘½ä»¤ï¼Œä¹Ÿéå¸¸æœ‰ç”¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker container start [containerID]</span><br><span class="line">docker container stop [containerID]</span><br><span class="line">docker container logs [containerID]</span><br><span class="line">docker container <span class="built_in">exec</span> [containerID]</span><br><span class="line">docker container cp [containerID]</span><br></pre></td></tr></table></figure>
<h3 id="9-1-container-start"><a href="#9-1-container-start" class="headerlink" title="9.1 container start"></a>9.1 container start</h3><blockquote>
<p>å‘½ä»¤æ˜¯æ–°å»ºå®¹å™¨ï¼Œæ¯è¿è¡Œä¸€æ¬¡ï¼Œå°±ä¼šæ–°å»ºä¸€ä¸ªå®¹å™¨ã€‚åŒæ ·çš„å‘½ä»¤è¿è¡Œä¸¤æ¬¡ï¼Œå°±ä¼šç”Ÿæˆä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„å®¹å™¨æ–‡ä»¶ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container start [containerID]</span><br></pre></td></tr></table></figure>
<h3 id="9-2-container-stop"><a href="#9-2-container-stop" class="headerlink" title="9.2 container stop"></a>9.2 container stop</h3><p>docker container kill å‘½ä»¤ç»ˆæ­¢å®¹å™¨è¿è¡Œï¼Œç›¸å½“äºå‘å®¹å™¨é‡Œé¢çš„ä¸»è¿›ç¨‹å‘å‡º SIGKILL ä¿¡å·ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container <span class="built_in">kill</span> [containerID]</span><br></pre></td></tr></table></figure>
<p>docker container stop å‘½ä»¤ä¹Ÿæ˜¯ç”¨æ¥ç»ˆæ­¢å®¹å™¨è¿è¡Œï¼Œç›¸å½“äºå‘å®¹å™¨é‡Œé¢çš„ä¸»è¿›ç¨‹å‘å‡º SIGTERM ä¿¡å·ï¼Œç„¶åè¿‡ä¸€æ®µæ—¶é—´å†å‘å‡º SIGKILL ä¿¡å·</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container stop [containerID]</span><br></pre></td></tr></table></figure>
<h3 id="9-3-container-logs"><a href="#9-3-container-logs" class="headerlink" title="9.3 container logs"></a>9.3 container logs</h3><p>docker container logs å‘½ä»¤ç”¨æ¥æŸ¥çœ‹ docker å®¹å™¨çš„è¾“å‡ºï¼Œå³å®¹å™¨é‡Œé¢ Shell çš„æ ‡å‡†è¾“å‡ºã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container logs [containerID]</span><br></pre></td></tr></table></figure>
<h3 id="9-4-container-exec"><a href="#9-4-container-exec" class="headerlink" title="9.4 container exec"></a>9.4 container exec</h3><p>docker container exec å‘½ä»¤ç”¨äºè¿›å…¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ docker Container.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container <span class="built_in">exec</span> -it [containerID] /bin/bash</span><br></pre></td></tr></table></figure>
<h3 id="9-5-container-cp"><a href="#9-5-container-cp" class="headerlink" title="9.5 container cp"></a>9.5 container cp</h3><p>docker container cp å‘½ä»¤ç”¨äºä»æ­£åœ¨è¿è¡Œçš„ Docker å®¹å™¨é‡Œé¢ï¼Œå°†æ–‡ä»¶æ‹·è´åˆ°æœ¬æœº.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container cp [containID]:[/path/to/file] .</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html" target="_blank" rel="external">é˜®ä¸€å³°: Docker å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html" target="_blank" rel="external">é˜®ä¸€å³°: Docker å¾®æœåŠ¡æ•™ç¨‹</a></li>
<li><a href="https://hujb2000.gitbooks.io/docker-flow-evolution/content/cn/basis/dockerfiledetail.html" target="_blank" rel="external">Dockerfileæ–‡ä»¶è¯¦è§£</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/45610616" target="_blank" rel="external">Docker å®¹å™¨ä»å…¥é—¨åˆ°å…¥é­”</a></li>
<li><a href="https://coolshell.cn/articles/18190.html" target="_blank" rel="external">GOè¯­è¨€ã€DOCKER å’Œæ–°æŠ€æœ¯</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python WSGI åè®®è¯¦è§£]]></title>
      <url>http://shopee.ai/2019/10/06/python/README/</url>
      <content type="html"><![CDATA[<p><img src="/images/python/WSGI/WSGI-1.jpg" width="550" alt="WSGI"></p>
<a id="more"></a>
<p><strong>Webåº”ç”¨ç¨‹åºçš„æœ¬è´¨</strong>: </p>
<p>User é€šè¿‡ æµè§ˆå™¨ è®¿é—® äº’è”ç½‘ä¸ŠæŒ‡å®šçš„ ç½‘é¡µæ–‡ä»¶ å±•ç¤ºåˆ°æµè§ˆå™¨ä¸Šã€‚</p>
<p><img src="/images/python/WSGI/WSGI-2.png" width="600" alt="WSGI"></p>
<p>æŠ€æœ¯è§’åº¦ï¼Œä»¥ä¸‹3ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>æµè§ˆå™¨ï¼Œå°†è¦è¯·æ±‚çš„å†…å®¹æŒ‰ç…§HTTPåè®®å‘é€æœåŠ¡ç«¯</li>
<li>æœåŠ¡ç«¯ï¼Œæ ¹æ®è¯·æ±‚å†…å®¹æ‰¾åˆ°æŒ‡å®šçš„HTMLé¡µé¢</li>
<li>æµè§ˆå™¨ï¼Œè§£æè¯·æ±‚åˆ°çš„HTMLå†…å®¹å±•ç¤ºå‡ºæ¥</li>
</ul>
<p><a href="https://zhuanlan.zhihu.com/p/66144617" target="_blank" rel="external">WEBå¼€å‘â€”â€”Python WSGIåè®®è¯¦è§£</a></p>
<h2 id="1-Web-DEV"><a href="#1-Web-DEV" class="headerlink" title="1. Web DEV"></a>1. Web DEV</h2><ol>
<li>é™æ€å¼€å‘</li>
<li>åŠ¨æ€å¼€å‘</li>
</ol>
<p><strong>åŠ¨æ€å¼€å‘</strong></p>
<ol>
<li>CGI</li>
<li>WSGI</li>
</ol>
<p><strong>CGI æµç¨‹</strong></p>
<p><img src="/images/python/WSGI/WSGI-3.png" width="650" alt="CGI æµç¨‹"></p>
<p><strong>WSGI æµç¨‹</strong></p>
<p><img src="/images/python/WSGI/WSGI-4.png" width="550" alt="WSGI æµç¨‹"></p>
<h2 id="2-Whatâ€™s-WSGI"><a href="#2-Whatâ€™s-WSGI" class="headerlink" title="2. Whatâ€™s WSGI"></a>2. Whatâ€™s WSGI</h2><p>WSGIå…¨ç§°æ˜¯Web Server Gateway Interfaceï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯WebæœåŠ¡å™¨ä¸Python Webåº”ç”¨ç¨‹åºæˆ–æ¡†æ¶ä¹‹é—´çš„å»ºè®®æ ‡å‡†æ¥å£ï¼Œä»¥ä¿ƒè¿›è·¨å„ç§WebæœåŠ¡å™¨çš„Webåº”ç”¨ç¨‹åºå¯ç§»æ¤æ€§ã€‚</p>
<p>WSGI åè®® åˆ†æˆä¸‰ä¸ªç»„ä»¶ Applicationã€Serverã€Middleware å’Œ åè®®ä¸­ä¼ è¾“çš„å†…å®¹ã€‚</p>
<ol>
<li>Applicationï¼šDjangoï¼ŒFlaskç­‰</li>
<li>Serverï¼šå¸¸ç”¨çš„æœ‰uWSGIï¼Œgunicornç­‰</li>
<li>Middlewareï¼š Flaskç­‰æ¡†æ¶ä¸­çš„è£…é¥°å™¨</li>
</ol>
<h3 id="2-1-Application"><a href="#2-1-Application" class="headerlink" title="2.1 Application"></a>2.1 Application</h3><p>åº”ç”¨ç¨‹åºï¼Œæ˜¯ä¸€ä¸ªå¯é‡å¤è°ƒç”¨çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œåœ¨Pythonä¸­å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç±»ï¼Œå¦‚æœæ˜¯ç±»çš„è¯è¦å®ç°<strong>call</strong>æ–¹æ³•ï¼Œè¦æ±‚è¿™ä¸ªå¯è°ƒç”¨å¯¹è±¡æ¥æ”¶2ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå†…å®¹ç»“æœã€‚</p>
<h3 id="2-2-Server"><a href="#2-2-Server" class="headerlink" title="2.2 Server"></a>2.2 Server</h3><p>WebæœåŠ¡å™¨ï¼Œä¸»è¦æ˜¯å®ç°ç›¸åº”çš„ä¿¡æ¯è½¬æ¢ï¼Œå°†ç½‘ç»œè¯·æ±‚ä¸­çš„ä¿¡æ¯ï¼ŒæŒ‰ç…§HTTPåè®®å°†å†…å®¹æ‹¿å‡ºï¼ŒåŒæ—¶æŒ‰ç…§WSGIåè®®ç»„è£…æˆæ–°çš„æ•°æ®ï¼ŒåŒæ—¶å°†æä¾›çš„start_responseä¼ é€’ç»™Applicationã€‚æœ€åæ¥æ”¶Applicationè¿”å›çš„å†…å®¹ï¼ŒæŒ‰ç…§WSGIåè®®è§£æå‡ºã€‚æœ€ç»ˆæŒ‰ç…§HTTPåè®®ç»„ç»‡å¥½å†…å®¹è¿”å›å°±å®Œæˆäº†ä¸€æ¬¡è¯·æ±‚ã€‚</p>
<h3 id="2-3-Middleware"><a href="#2-3-Middleware" class="headerlink" title="2.3 Middleware"></a>2.3 Middleware</h3><p>Middleware ä¸­é—´ä»¶ï¼Œå¯ä»¥ç†è§£ä¸ºå¯¹åº”ç”¨ç¨‹åºçš„ä¸€ç»„è£…é¥°å™¨ã€‚</p>
<blockquote>
<p>åœ¨ Application ç«¯çœ‹æ¥ï¼Œå®ƒå¯ä»¥æä¾›ä¸€ä¸ªç±»start_responseå‡½æ•°ï¼Œå¯ä»¥åƒstart_responseå‡½æ•°ä¸€æ ·æ¥æ”¶HTTP STATUå’ŒHeadersï¼›å’Œenvironã€‚</p>
<p>åœ¨ Server çœ‹æ¥ï¼Œä»–å¯ä»¥æ¥æ”¶2ä¸ªå‚æ•°ï¼Œå¹¶ä¸”å¯ä»¥è¿”å›ä¸€ä¸ªç±» Applicationå¯¹è±¡ã€‚</p>
</blockquote>
<h3 id="2-4-æ€»ç»“"><a href="#2-4-æ€»ç»“" class="headerlink" title="2.4 æ€»ç»“"></a>2.4 æ€»ç»“</h3><p>WSGI å¯¹äº application å¯¹è±¡æœ‰å¦‚ä¸‹ä¸‰ç‚¹è¦æ±‚</p>
<ul>
<li>å¿…é¡»æ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„å¯¹è±¡</li>
<li>æ¥æ”¶ä¸¤ä¸ªå¿…é€‰å‚æ•° environã€start_responseã€‚</li>
<li>è¿”å›å€¼å¿…é¡»æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤º http bodyã€‚</li>
</ul>
<h2 id="3-Python-Web-åº”ç”¨æ˜¯ä»€ä¹ˆ"><a href="#3-Python-Web-åº”ç”¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="3. Python Web åº”ç”¨æ˜¯ä»€ä¹ˆ?"></a>3. Python Web åº”ç”¨æ˜¯ä»€ä¹ˆ?</h2><p>ä¸€ä¸ª Python Web åº”ç”¨åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>åº”ç”¨çš„å¼€å‘ï¼šå®ç° Web åº”ç”¨çš„é€»è¾‘ï¼Œè¯»æ•°æ®åº“ï¼Œæ‹¼è£…é¡µé¢ï¼Œç”¨æˆ·ç™»å½•</li>
<li>åº”ç”¨çš„éƒ¨ç½²ï¼šå°† Web åº”ç”¨è·‘èµ·æ¥ï¼Œå¤šçº¿ç¨‹ï¼Œå¤šè¿›ç¨‹ï¼Œå¼‚æ­¥ï¼Œç›‘å¬ç«¯å£ï¼Œæ‰€æœ‰æœåŠ¡å™¨è¯¥åšçš„äº‹æƒ…</li>
</ul>
<blockquote>
<p>æˆ‘ä»¬å¸Œæœ›ç”¨å„ç§ä¸åŒçš„æŠ€æœ¯æ¥å¼€å‘åº”ç”¨ï¼Œç”¨å„ç§ä¸åŒçš„æœåŠ¡å™¨ç¨‹åºæ¥è·‘åº”ç”¨.</p>
<p>è¿™å°±è¦æ±‚ å¼€å‘ å’Œ éƒ¨ç½² éµå¾ªç»Ÿä¸€çš„ é€šä¿¡æ¥å£ï¼Œè¿™æ¥å£å« Web Server Gateway Interfaceï¼Œç®€ç§°â€œWSGIâ€ã€‚</p>
</blockquote>
<p>WSGI æ¥å£ å°±æ˜¯ä¸€ä¸ªæ»¡è¶³ç‰¹å®šè¦æ±‚çš„å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">application</span><span class="params">(environ, start_response)</span>:</span></span><br><span class="line">    â€œâ€â€œ</span><br><span class="line">    environï¼šåŒ…å«æ‰€æœ‰ HTTP è¯·æ±‚ä¿¡æ¯çš„ dict</span><br><span class="line">    start_responseï¼šå‘é€ HTTP å“åº”çš„å‡½æ•°</span><br><span class="line">    â€â€œâ€</span><br><span class="line">    start_response(<span class="string">'200 OK'</span>, [(<span class="string">'Content-Type'</span>, <span class="string">'text/html'</span>)])</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'&lt;h1&gt;Hello, web!&lt;/h1&gt;'</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>WSGI å®Œæ•´è¯´æ˜ï¼š<a href="https://www.python.org/dev/peps/pep-3333/" target="_blank" rel="external">PEP 333 : Python Web Server Gateway Interface v1.0.1</a><br>WSGI ç®€å•è¯´æ˜ï¼š <a href="https://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001386832689740b04430a98f614b6da89da2157ea3efe2000" target="_blank" rel="external">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a><br>Py Web åº”ç”¨æ¦‚è§ˆï¼š<a href="http://pythonguidecn.readthedocs.io/zh/latest/scenarios/web.html" target="_blank" rel="external">The Hitchhikerâ€™s Guide To Python</a></p>
</blockquote>
<h2 id="4-Flask-Web-åº”ç”¨å¼€å‘"><a href="#4-Flask-Web-åº”ç”¨å¼€å‘" class="headerlink" title="4. Flask Web åº”ç”¨å¼€å‘"></a>4. Flask Web åº”ç”¨å¼€å‘</h2><p>åŸºæœ¬å½¢æ€ï¼šURL è·¯ç”±ï¼Œè·å–è¯·æ±‚ï¼Œæ„é€ å“åº”</p>
<blockquote>
<p>Flask ä½œä¸ºä¸€ä¸ª Web æ¡†æ¶ï¼Œå®ƒéµå¾ª WSGI æ¥å£ï¼Œå¹¶ä¸”åœ¨å…¶ä¹‹ä¸Šæ•´åˆäº† Werkzeug çš„ URL è·¯ç”±ä»¥åŠ WSGI å·¥å…·åº“ï¼ŒSQLAlchemy çš„æ•°æ®åº“è®¿é—®ï¼Œjinja2 çš„æ¨¡ç‰ˆæ¸²æŸ“ç­‰åŠŸèƒ½ã€‚</p>
</blockquote>
<p><a href="https://github.com/pallets/flask/blob/master/flask/app.py" target="_blank" rel="external">app å¯¹è±¡å®ç°äº† WSGI æ¥å£</a></p>
<blockquote>
<p><a href="https://heleifz.github.io/15013781349463.html" target="_blank" rel="external">Flaskï¼Œä»ç®€å•å¼€å§‹</a></p>
</blockquote>
<h2 id="5-Flask-RESTPlus"><a href="#5-Flask-RESTPlus" class="headerlink" title="5. Flask-RESTPlus"></a>5. Flask-RESTPlus</h2><p>Flask-RESTPlus æ˜¯å¯¹Flaskçš„æ‰©å±•ï¼Œå®ƒå¢åŠ äº†å¯¹å¿«é€Ÿå¼€å‘REST APIçš„æ”¯æŒ.</p>
<p>Flask-RESTPlus é¼“åŠ±ä»¥æœ€å°çš„è®¾ç½®æ¥å®ç°åŠŸèƒ½çš„å¼€å‘.</p>
<p>Flask-RESTPlus æ—¢åŒ…å« <strong>Flask-Restful</strong>åŒ… çš„åŠŸèƒ½ï¼ŒåˆåŒ…æ‹¬ <strong>swagger</strong> æ–‡æ¡£åŒ–åŠŸèƒ½ï¼ˆå…¶å®æ˜¯å°è£…äº†swaggerï¼‰.</p>
<h3 id="5-1-quickstart-hello"><a href="#5-1-quickstart-hello" class="headerlink" title="5.1 quickstart hello"></a>5.1 quickstart hello</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_restplus <span class="keyword">import</span> Api</span><br><span class="line"></span><br><span class="line"><span class="comment"># Flaskå®ä¾‹</span></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ä½¿ç”¨Flask-RESTPlusä¹‹å‰ï¼Œéœ€è¦é€šè¿‡ä¼ å…¥Flaskå®ä¾‹è¿›è¡Œåˆå§‹åŒ–, è¿›è¡Œåˆå§‹åŒ–.</span></span><br><span class="line"></span><br><span class="line">api = Api(app)</span><br></pre></td></tr></table></figure>
<p>æœ€ç®€å•çš„æ‰“å¼€ Flask-RESTPlus, API ç¤ºä¾‹:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># file:simple_api.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_restplus <span class="keyword">import</span> Resource, Api</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">api = Api(app)</span><br><span class="line"></span><br><span class="line"><span class="meta">@api.route('/hello')</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span><span class="params">(Resource)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">'hello'</span>: <span class="string">'world'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(debug=<span class="keyword">True</span>) <span class="comment"># å¼€å¯äº†Flaskçš„è°ƒè¯•æ¨¡å¼</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">#    ç”Ÿäº§ç¯å¢ƒç»å¯¹ä¸è¦å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œå› ä¸ºå®ƒä¼šä½¿ä½ çš„åå°æœåŠ¡å¤„äºè¢«æ”»å‡»çš„é£é™©ä¹‹ä¸­ï¼</span></span><br></pre></td></tr></table></figure>
<p>run <code>âœ python simple_api.py</code> , then:</p>
<p><a href="http://localhost:5000/helloï¼š" target="_blank" rel="external">http://localhost:5000/helloï¼š</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;hello&quot;: &quot;world&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-Resourceful-Routing"><a href="#5-2-Resourceful-Routing" class="headerlink" title="5.2 Resourceful Routing"></a>5.2 Resourceful Routing</h3><p>é€šè¿‡åœ¨èµ„æºä¸Šå®šä¹‰æ–¹æ³•æ¥å¾ˆå®¹æ˜“åœ°è®¿é—®å¤šä¸ª HTTP æ–¹æ³•.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request</span><br><span class="line"><span class="keyword">from</span> flask_restplus <span class="keyword">import</span> Resource, Api</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">api = Api(app)</span><br><span class="line"></span><br><span class="line">todos = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@api.route('/&lt;string:todo_id&gt;')</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoSimple</span><span class="params">(Resource)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, todo_id)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> &#123;todo_id: todos[todo_id]&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span><span class="params">(self, todo_id)</span>:</span></span><br><span class="line">        todos[todo_id] = request.form[<span class="string">'data'</span>]</span><br><span class="line">        <span class="keyword">return</span> &#123;todo_id: todos[todo_id]&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(debug=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<h3 id="5-3-Endpoints"><a href="#5-3-Endpoints" class="headerlink" title="5.3 Endpoints"></a>5.3 Endpoints</h3><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒæŸä¸ªèµ„æºéƒ½ä¼šæœ‰å¤šä¸ªURLã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ route()è£…é¥°å™¨ ä¸­ä¼ å…¥å¤šä¸ªURLï¼Œè¿™æ ·æ¯ä¸ªURLéƒ½å°†ä¼šè·¯ç”±åˆ°è¯¥èµ„æºä¸Š.</p>
<h3 id="5-4-Data-Formatting"><a href="#5-4-Data-Formatting" class="headerlink" title="5.4 Data Formatting"></a>5.4 Data Formatting</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_restplus <span class="keyword">import</span> fields, Api, Resource</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">api = Api(app)</span><br><span class="line"></span><br><span class="line">model = api.model(<span class="string">'Model'</span>, &#123;</span><br><span class="line">    <span class="string">'task'</span>: fields.String,</span><br><span class="line">    <span class="string">'uri'</span>: fields.Url(<span class="string">'todo_ep'</span>,absolute=<span class="keyword">True</span>) <span class="comment"># absoluteå‚æ•°è¡¨ç¤ºç”Ÿæˆçš„urlæ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoDao</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, todo_id, task)</span>:</span></span><br><span class="line">        self.todo_id = todo_id</span><br><span class="line">        self.task = task</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¯¥å­—æ®µä¸ä¼šå‘é€åˆ°å“åº”ç»“æœä¸­</span></span><br><span class="line">        self.status = <span class="string">'active'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@api.route('/todo',endpoint='todo_ep')</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span><span class="params">(Resource)</span>:</span></span><br><span class="line"><span class="meta">    @api.marshal_with(model)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> TodoDao(todo_id=<span class="string">'my_todo'</span>, task=<span class="string">'Remember the milk'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(debug=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>marshal_with()è£…é¥°å™¨å°±æ˜¯ç”¨æ¥å¯¹ç»“æœæŒ‰ç…§modelçš„ç»“æ„è¿›è¡Œè½¬æ¢çš„.</p>
</blockquote>
<p><a href="http://flask-restplus.readthedocs.io/en/stable/quickstart.html" target="_blank" rel="external">flask-restplus quickstart</a><br><a href="http://flask-restplus.readthedocs.io/en/stable/example.html" target="_blank" rel="external">flask-restplus example.html</a></p>
<h3 id="5-5-Order-Preservation"><a href="#5-5-Order-Preservation" class="headerlink" title="5.5 Order Preservation"></a>5.5 Order Preservation</h3><ul>
<li>Apiå…¨å±€ä¿ç•™ï¼šapi = Api(ordered = True)</li>
<li>Namespaceå…¨å±€ä¿ç•™ï¼šns = Namespace(ordered=True)</li>
<li>marshal()å±€éƒ¨ä¿ç•™ï¼šreturn marshal(data, fields, ordered=True)</li>
</ul>
<h3 id="5-6-Full-example"><a href="#5-6-Full-example" class="headerlink" title="5.6 Full example"></a>5.6 Full example</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_restplus <span class="keyword">import</span> Api, Resource, fields</span><br><span class="line"><span class="keyword">from</span> werkzeug.contrib.fixers <span class="keyword">import</span> ProxyFix</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.wsgi_app = ProxyFix(app.wsgi_app)</span><br><span class="line"></span><br><span class="line">api = Api(app, version=<span class="string">'1.0'</span>, title=<span class="string">'TodoMVC API'</span>,</span><br><span class="line">    description=<span class="string">'A simple TodoMVC API'</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å‘½åç©ºé—´</span></span><br><span class="line">ns = api.namespace(<span class="string">'todos'</span>, description=<span class="string">'TODO operations'</span>)</span><br><span class="line"></span><br><span class="line">todo = api.model(<span class="string">'Todo'</span>, &#123;</span><br><span class="line">    <span class="string">'id'</span>: fields.Integer(readOnly=<span class="keyword">True</span>, description=<span class="string">'The task unique identifier'</span>),</span><br><span class="line">    <span class="string">'task'</span>: fields.String(required=<span class="keyword">True</span>, description=<span class="string">'The task details'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># DAO</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoDAO</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.counter = <span class="number">0</span></span><br><span class="line">        self.todos = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, id)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> todo <span class="keyword">in</span> self.todos:</span><br><span class="line">            <span class="keyword">if</span> todo[<span class="string">'id'</span>] == id:</span><br><span class="line">                <span class="keyword">return</span> todo</span><br><span class="line">        api.abort(<span class="number">404</span>, <span class="string">"Todo &#123;&#125; doesn't exist"</span>.format(id))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        todo = data</span><br><span class="line">        todo[<span class="string">'id'</span>] = self.counter = self.counter + <span class="number">1</span></span><br><span class="line">        self.todos.append(todo)</span><br><span class="line">        <span class="keyword">return</span> todo</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(self, id, data)</span>:</span></span><br><span class="line">        todo = self.get(id)</span><br><span class="line">        todo.update(data)</span><br><span class="line">        <span class="keyword">return</span> todo</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(self, id)</span>:</span></span><br><span class="line">        todo = self.get(id)</span><br><span class="line">        self.todos.remove(todo)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DAO = TodoDAO()</span><br><span class="line">DAO.create(&#123;<span class="string">'task'</span>: <span class="string">'Build an API'</span>&#125;)</span><br><span class="line">DAO.create(&#123;<span class="string">'task'</span>: <span class="string">'?????'</span>&#125;)</span><br><span class="line">DAO.create(&#123;<span class="string">'task'</span>: <span class="string">'profit!'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹ all todo æ“ä½œ</span></span><br><span class="line"><span class="meta">@ns.route('/')</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoList</span><span class="params">(Resource)</span>:</span></span><br><span class="line">    <span class="string">'''è·å–æ‰€æœ‰todoså…ƒç´ ï¼Œå¹¶å…è®¸é€šè¿‡POSTæ¥æ·»åŠ æ–°çš„task'''</span></span><br><span class="line"><span class="meta">    @ns.doc('list_todos')</span></span><br><span class="line"><span class="meta">    @ns.marshal_list_with(todo)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''è¿”å›æ‰€æœ‰task'''</span></span><br><span class="line">        <span class="keyword">return</span> DAO.todos</span><br><span class="line"></span><br><span class="line"><span class="meta">    @ns.doc('create_todo')</span></span><br><span class="line"><span class="meta">    @ns.expect(todo)</span></span><br><span class="line"><span class="meta">    @ns.marshal_with(todo, code=201)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''åˆ›å»ºä¸€ä¸ªæ–°çš„task'''</span></span><br><span class="line">        <span class="keyword">return</span> DAO.create(api.payload), <span class="number">201</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹å…¶ä¸­ æŸä¸ªid çš„ å®ä½“ æ“ä½œ</span></span><br><span class="line"><span class="meta">@ns.route('/&lt;int:id&gt;')</span></span><br><span class="line"><span class="meta">@ns.response(404, 'Todo not found')</span></span><br><span class="line"><span class="meta">@ns.param('id', 'The task identifier')</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span><span class="params">(Resource)</span>:</span></span><br><span class="line">    <span class="string">'''è·å–å•ä¸ªtodoé¡¹ï¼Œå¹¶å…è®¸åˆ é™¤æ“ä½œ'''</span></span><br><span class="line"><span class="meta">    @ns.doc('get_todo')</span></span><br><span class="line"><span class="meta">    @ns.marshal_with(todo)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, id)</span>:</span></span><br><span class="line">        <span class="string">'''è·å–idæŒ‡å®šçš„todoé¡¹'''</span></span><br><span class="line">        <span class="keyword">return</span> DAO.get(id)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @ns.doc('delete_todo')</span></span><br><span class="line"><span class="meta">    @ns.response(204, 'Todo deleted')</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(self, id)</span>:</span></span><br><span class="line">        <span class="string">'''æ ¹æ®idåˆ é™¤å¯¹åº”çš„task'''</span></span><br><span class="line">        DAO.delete(id)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>, <span class="number">204</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @ns.expect(todo)</span></span><br><span class="line"><span class="meta">    @ns.marshal_with(todo)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span><span class="params">(self, id)</span>:</span></span><br><span class="line">        <span class="string">'''æ›´æ–°idæŒ‡å®šçš„task'''</span></span><br><span class="line">        <span class="keyword">return</span> DAO.update(id, api.payload)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    app.run(debug=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<p>get all</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl <span class="string">"http://localhost:5000/todos/"</span></span><br></pre></td></tr></table></figure>
<p>get id</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -X GET <span class="string">"http://localhost:5000/todos/1"</span> -H <span class="string">"accept: application/json"</span></span><br></pre></td></tr></table></figure>
<p>delete:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -X DELETE <span class="string">"http://localhost:5000/todos/2"</span> -H <span class="string">"accept: application/json"</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/68676316" target="_blank" rel="external">èŠ±äº†ä¸¤ä¸ªæ˜ŸæœŸï¼Œæˆ‘ç»ˆäºæŠŠ WSGI æ•´æ˜ç™½äº†</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/46983059" target="_blank" rel="external">å°è¯•ç†è§£Flaskæºç  ä¹‹ ææ‡‚WSGIåè®®</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/66144617" target="_blank" rel="external">WEBå¼€å‘â€”â€”Python WSGIåè®®è¯¦è§£</a></li>
<li><a href="https://heleifz.github.io/15013781349463.html" target="_blank" rel="external">Flaskï¼Œä»ç®€å•å¼€å§‹</a></li>
<li><a href="https://www.cnblogs.com/leejack/p/9160818.html" target="_blank" rel="external">HackHanæŠ€æœ¯åšå®¢:ã€Flask-RESTPlusç³»åˆ—ã€‘Flask-RESTPlusç³»åˆ—è¯‘æ–‡å¼€ç¯‡</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æœ€å…¨ Tensorflow2.0 å…¥é—¨æ•™ç¨‹æŒç»­æ›´æ–°]]></title>
      <url>http://shopee.ai/2019/09/05/tensorflow/tf2.0-1-keras/</url>
      <content type="html"><![CDATA[<p><a href="https://zhuanlan.zhihu.com/p/59507137" target="_blank" rel="external">çŸ¥ä¹ï¼šæœ€å…¨Tensorflow2.0 å…¥é—¨æ•™ç¨‹æŒç»­æ›´æ–°</a></p>
<a id="more"></a>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/59507137" target="_blank" rel="external">çŸ¥ä¹ï¼šæœ€å…¨Tensorflow2.0 å…¥é—¨æ•™ç¨‹æŒç»­æ›´æ–°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[RNN classifier in Keras]]></title>
      <url>http://shopee.ai/2019/08/22/tensorflow/keras-1.5-RNN/</url>
      <content type="html"><![CDATA[<p>RNN, Recurrent Neural Networks è¿›è¡Œåˆ†ç±»ï¼ˆclassificationï¼‰ï¼Œé‡‡ç”¨ MNIST æ•°æ®é›†ï¼Œç”¨ SimpleRNN å±‚ã€‚</p>
<a id="more"></a>
<p><img src="/images/tensorflow/keras-lstm1.png" width="550" alt="LSTM in Keras"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1337</span>)  <span class="comment"># for reproducibility</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> keras.datasets <span class="keyword">import</span> mnist</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> np_utils</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> SimpleRNN, Activation, Dense</span><br><span class="line"><span class="keyword">from</span> keras.optimizers <span class="keyword">import</span> Adam</span><br><span class="line"></span><br><span class="line">TIME_STEPS = <span class="number">28</span>     <span class="comment"># same as the height of the image</span></span><br><span class="line"></span><br><span class="line">INPUT_SIZE = <span class="number">28</span>     <span class="comment"># same as the width of the image</span></span><br><span class="line"></span><br><span class="line">BATCH_SIZE = <span class="number">50</span></span><br><span class="line">BATCH_INDEX = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">OUTPUT_SIZE = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">CELL_SIZE = <span class="number">50</span></span><br><span class="line"></span><br><span class="line">LR = <span class="number">0.001</span></span><br></pre></td></tr></table></figure>
<h2 id="1-data-pre-processing"><a href="#1-data-pre-processing" class="headerlink" title="1. data pre-processing"></a>1. data pre-processing</h2><p>MNISTé‡Œé¢çš„å›¾åƒåˆ†è¾¨ç‡æ˜¯28Ã—28ï¼Œä¸ºç”¨RNNï¼Œå°†å›¾åƒç†è§£ä¸ºåºåˆ—åŒ–æ•°æ®ã€‚</p>
<p>æ¯ä¸€è¡Œä½œä¸ºä¸€ä¸ªè¾“å…¥å•å…ƒï¼Œæ‰€ä»¥è¾“å…¥æ•°æ®å¤§å° <strong><code>INPUT_SIZE = 28</code></strong>ï¼› </p>
<p>å…ˆæ˜¯ç¬¬1è¡Œè¾“å…¥ï¼Œå†æ˜¯ç¬¬2è¡Œï¼Œâ€¦ï¼Œç¬¬28è¡Œè¾“å…¥ï¼Œ è¿™å°±æ˜¯ä¸€å¼ å›¾ç‰‡ä¹Ÿå°±æ˜¯ä¸€ä¸ªåºåˆ—ï¼Œæ‰€ä»¥æ­¥é•¿ <strong><code>TIME_STEPS = 28</code></strong>ã€‚</p>
<p>è®­ç»ƒæ•°æ®è¦è¿›è¡Œ normalizeï¼Œå› ä¸ºåŸå§‹æ•°æ®æ˜¯ 8bit ç°åº¦å›¾åƒ, æ‰€ä»¥éœ€è¦é™¤ä»¥ 255ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># download the mnist to the path '~/.keras/datasets/' if it is the first time to be called</span></span><br><span class="line"><span class="comment"># X shape (60,000 28x28), y shape (10,000, )</span></span><br><span class="line">(X_train, y_train), (X_test, y_test) = mnist.load_data()</span><br><span class="line"></span><br><span class="line"><span class="comment"># data pre-processing</span></span><br><span class="line">X_train = X_train.reshape(<span class="number">-1</span>, <span class="number">28</span>, <span class="number">28</span>) / <span class="number">255.</span>      <span class="comment"># normalize</span></span><br><span class="line">X_test = X_test.reshape(<span class="number">-1</span>, <span class="number">28</span>, <span class="number">28</span>) / <span class="number">255.</span>        <span class="comment"># normalize</span></span><br><span class="line"></span><br><span class="line">y_train = np_utils.to_categorical(y_train, num_classes=<span class="number">10</span>)</span><br><span class="line">y_test = np_utils.to_categorical(y_test, num_classes=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(X_train.shape)</span><br><span class="line">print(y_train.shape)</span><br><span class="line"></span><br><span class="line">(<span class="number">60000</span>, <span class="number">28</span>, <span class="number">28</span>)</span><br><span class="line">(<span class="number">60000</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<h2 id="2-build-model"><a href="#2-build-model" class="headerlink" title="2. build model"></a>2. build model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># build RNN model</span></span><br><span class="line">model = Sequential()</span><br><span class="line"></span><br><span class="line"><span class="comment"># RNN cell</span></span><br><span class="line">model.add(SimpleRNN(</span><br><span class="line">    <span class="comment"># for batch_input_shape, if using tensorflow as the backend, we have to put None for the batch_size.</span></span><br><span class="line">    <span class="comment"># Otherwise, model.evaluate() will get error.</span></span><br><span class="line">    batch_input_shape=(<span class="keyword">None</span>, TIME_STEPS, INPUT_SIZE),       <span class="comment"># Or: input_dim=INPUT_SIZE, input_length=TIME_STEPS,</span></span><br><span class="line">    output_dim=CELL_SIZE,</span><br><span class="line">    unroll=<span class="keyword">True</span>,</span><br><span class="line">))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># output layer</span></span><br><span class="line">model.add(Dense(OUTPUT_SIZE))</span><br><span class="line">model.add(Activation(<span class="string">'softmax'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># optimizer</span></span><br><span class="line">adam = Adam(LR)</span><br><span class="line">model.compile(optimizer=adam,</span><br><span class="line">              loss=<span class="string">'categorical_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line"></span><br><span class="line">model.summary()</span><br></pre></td></tr></table></figure>
<pre><code>_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
simple_rnn_1 (SimpleRNN)     (None, 50)                3950      
_________________________________________________________________
dense_1 (Dense)              (None, 10)                510       
_________________________________________________________________
activation_1 (Activation)    (None, 10)                0         
_________________________________________________________________
dense_2 (Dense)              (None, 10)                110       
_________________________________________________________________
activation_2 (Activation)    (None, 10)                0         
=================================================================
Total params: 4,570
Trainable params: 4,570
Non-trainable params: 0
_________________________________________________________________
</code></pre><p>è®¾ç½®ä¼˜åŒ–æ–¹æ³•ï¼Œlosså‡½æ•° å’Œ <code>metrics</code> æ–¹æ³•ä¹‹åå°±å¯ä»¥å¼€å§‹è®­ç»ƒäº†ã€‚ æ¯æ¬¡è®­ç»ƒçš„æ—¶å€™å¹¶ä¸æ˜¯å–æ‰€æœ‰çš„æ•°æ®ï¼Œåªæ˜¯å– <code>BATCH_SIZE</code>ä¸ªåºåˆ—ï¼Œæˆ–è€…ç§°ä¸º <code>BATCH_SIZE</code> å¼ å›¾ç‰‡ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§é™ä½è¿ç®—æ—¶é—´ï¼Œæé«˜è®­ç»ƒæ•ˆç‡ã€‚</p>
<h2 id="3-training-amp-evaluate"><a href="#3-training-amp-evaluate" class="headerlink" title="3. training &amp; evaluate"></a>3. training &amp; evaluate</h2><p>è¾“å‡º test ä¸Šçš„ <strong><code>loss</code></strong> å’Œ <strong><code>accuracy</code></strong> ç»“æœ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># training</span></span><br><span class="line"><span class="keyword">for</span> step <span class="keyword">in</span> range(<span class="number">4001</span>):</span><br><span class="line">    <span class="comment"># data shape = (batch_num, steps, inputs/outputs)</span></span><br><span class="line">    </span><br><span class="line">    X_batch = X_train[BATCH_INDEX: BATCH_INDEX+BATCH_SIZE, :, :]</span><br><span class="line">    Y_batch = y_train[BATCH_INDEX: BATCH_INDEX+BATCH_SIZE, :]</span><br><span class="line">    </span><br><span class="line">    cost = model.train_on_batch(X_batch, Y_batch)</span><br><span class="line">    </span><br><span class="line">    BATCH_INDEX += BATCH_SIZE</span><br><span class="line">    BATCH_INDEX = <span class="number">0</span> <span class="keyword">if</span> BATCH_INDEX &gt;= X_train.shape[<span class="number">0</span>] <span class="keyword">else</span> BATCH_INDEX</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> step % <span class="number">500</span> == <span class="number">0</span>:</span><br><span class="line">        cost, accuracy = model.evaluate(X_test, y_test, batch_size=y_test.shape[<span class="number">0</span>], verbose=<span class="keyword">False</span>)</span><br><span class="line">        print(<span class="string">'test cost: '</span>, cost, <span class="string">'test accuracy: '</span>, accuracy)</span><br></pre></td></tr></table></figure>
<pre><code>test cost:  2.311124086380005 test accuracy:  0.0957999974489212
test cost:  1.6327736377716064 test accuracy:  0.5228999853134155
test cost:  1.3161704540252686 test accuracy:  0.559499979019165
test cost:  1.1487971544265747 test accuracy:  0.5494999885559082
test cost:  1.0471760034561157 test accuracy:  0.5713000297546387
test cost:  1.0110148191452026 test accuracy:  0.5630999803543091
test cost:  0.9520753622055054 test accuracy:  0.5877000093460083
test cost:  0.8796814680099487 test accuracy:  0.604200005531311
test cost:  0.858435869216919 test accuracy:  0.6585999727249146
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://keras-cn.readthedocs.io/en/latest/backend/" target="_blank" rel="external">keras-cn</a>ã€ <a href="https://keras.io/" target="_blank" rel="external">keras.io</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/keras/" target="_blank" rel="external">è«çƒ¦ Keras</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CNN classifier in Keras]]></title>
      <url>http://shopee.ai/2019/08/22/tensorflow/keras-1.4-CNN/</url>
      <content type="html"><![CDATA[<p>Convolutional Neural Networksï¼ŒCNN ä¹Ÿæ˜¯ä¸€ç§å‰é¦ˆç¥ç»ç½‘ç»œï¼Œå…¶ç‰¹ç‚¹æ˜¯æ¯å±‚çš„ç¥ç»å…ƒèŠ‚ç‚¹åªå“åº”å‰ä¸€å±‚å±€éƒ¨åŒºåŸŸèŒƒå›´å†…çš„ç¥ç»å…ƒï¼ˆå…¨è¿æ¥ç½‘ç»œä¸­æ¯ä¸ªç¥ç»å…ƒèŠ‚ç‚¹å“åº”å‰ä¸€å±‚çš„å…¨éƒ¨èŠ‚ç‚¹ï¼‰</p>
<a id="more"></a>
<p><img src="/images/tensorflow/keras-cnn4.png" width="550" alt="Convolutional Neural Network in Keras"></p>
<p><strong>pooling</strong></p>
<p><img src="/images/tensorflow/keras-cnn5.png" width="470" alt="Convolutional Neural Network in Keras"></p>
<blockquote>
<p>ç ”ç©¶å‘ç°, åœ¨æ¯ä¸€æ¬¡å·ç§¯çš„æ—¶å€™, ç¥ç»å±‚å¯èƒ½ä¼šæ— æ„åœ°ä¸¢å¤±ä¸€äº›ä¿¡æ¯. è¿™æ—¶, pooling å°±å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸€é—®é¢˜. è€Œä¸”æ± åŒ–æ˜¯ä¸€ä¸ªç­›é€‰è¿‡æ»¤çš„è¿‡ç¨‹, èƒ½å°† layer ä¸­æœ‰ç”¨çš„ä¿¡æ¯ç­›é€‰å‡ºæ¥, ç»™ä¸‹ä¸€ä¸ªå±‚åˆ†æ. </p>
<p>åŒæ—¶ä¹Ÿå‡è½»äº†ç¥ç»ç½‘ç»œçš„è®¡ç®—è´Ÿæ‹…. ä¹Ÿå°±æ˜¯è¯´åœ¨å·é›†çš„æ—¶å€™, æˆ‘ä»¬ä¸å‹ç¼©é•¿å®½, å°½é‡ä¿ç•™æ›´å¤šä¿¡æ¯, å‹ç¼©çš„å·¥ä½œå°±äº¤ç»™æ± åŒ–äº†,è¿™æ ·çš„ä¸€é¡¹é™„åŠ å·¥ä½œèƒ½å¤Ÿå¾ˆæœ‰æ•ˆçš„æé«˜å‡†ç¡®æ€§. æœ‰äº†è¿™äº›æŠ€æœ¯,æˆ‘ä»¬å°±å¯ä»¥æ­å»ºä¸€ä¸ª CNN.</p>
</blockquote>
<p><img src="/images/tensorflow/keras-cnn2.png" width="550" alt="Convolutional Neural Network in Keras"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1337</span>)  <span class="comment"># for reproducibility</span></span><br><span class="line"><span class="keyword">from</span> keras.datasets <span class="keyword">import</span> mnist</span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> np_utils</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Dense, Activation, Convolution2D, MaxPooling2D, Flatten</span><br><span class="line"><span class="keyword">from</span> keras.optimizers <span class="keyword">import</span> Adam</span><br></pre></td></tr></table></figure>
<p>æ•°æ®é›† MNIST</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># download the mnist to the path '~/.keras/datasets/' if it is the first time to be called</span></span><br><span class="line"><span class="comment"># training X shape (60000, 28x28), Y shape (60000, ). test X shape (10000, 28x28), Y shape (10000, )</span></span><br><span class="line">(X_train, y_train), (X_test, y_test) = mnist.load_data()</span><br></pre></td></tr></table></figure>
<h2 id="1-data-pre-processing"><a href="#1-data-pre-processing" class="headerlink" title="1. data pre-processing"></a>1. data pre-processing</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X_train = X_train.reshape(<span class="number">-1</span>, <span class="number">1</span>,<span class="number">28</span>, <span class="number">28</span>)/<span class="number">255.</span></span><br><span class="line">X_test = X_test.reshape(<span class="number">-1</span>, <span class="number">1</span>,<span class="number">28</span>, <span class="number">28</span>)/<span class="number">255.</span></span><br><span class="line"></span><br><span class="line">y_train = np_utils.to_categorical(y_train, num_classes=<span class="number">10</span>)</span><br><span class="line">y_test = np_utils.to_categorical(y_test, num_classes=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<h2 id="2-build-model"><a href="#2-build-model" class="headerlink" title="2. build model"></a>2. build model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Another way to build your CNN</span></span><br><span class="line">model = Sequential()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Conv layer 1 output shape (32, 28, 28)</span></span><br><span class="line">model.add(Convolution2D(</span><br><span class="line">    batch_input_shape=(<span class="keyword">None</span>, <span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>),</span><br><span class="line">    filters=<span class="number">32</span>,</span><br><span class="line">    kernel_size=<span class="number">5</span>,</span><br><span class="line">    strides=<span class="number">1</span>,</span><br><span class="line">    padding=<span class="string">'same'</span>,     <span class="comment"># Padding method</span></span><br><span class="line">    data_format=<span class="string">'channels_first'</span>,</span><br><span class="line">))</span><br><span class="line">model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pooling layer 1 (max pooling) output shape (32, 14, 14)</span></span><br><span class="line">model.add(MaxPooling2D(</span><br><span class="line">    pool_size=<span class="number">2</span>,</span><br><span class="line">    strides=<span class="number">2</span>,</span><br><span class="line">    padding=<span class="string">'same'</span>,    <span class="comment"># Padding method</span></span><br><span class="line">    data_format=<span class="string">'channels_first'</span>,</span><br><span class="line">))</span><br></pre></td></tr></table></figure>
<p>å†æ·»åŠ ç¬¬äºŒ, å·ç§¯å±‚å’Œæ± åŒ–å±‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Conv layer 2 output shape (64, 14, 14)</span></span><br><span class="line">model.add(Convolution2D(<span class="number">64</span>, <span class="number">5</span>, strides=<span class="number">1</span>, padding=<span class="string">'same'</span>, data_format=<span class="string">'channels_first'</span>))</span><br><span class="line">model.add(Activation(<span class="string">'relu'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pooling layer 2 (max pooling) output shape (64, 7, 7)</span></span><br><span class="line">model.add(MaxPooling2D(<span class="number">2</span>, <span class="number">2</span>, <span class="string">'same'</span>, data_format=<span class="string">'channels_first'</span>))</span><br></pre></td></tr></table></figure>
<p>Fully connected layer 1 input shape (64 * 7 * 7) = (3136), output shape (1024)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model.add(Flatten())</span><br><span class="line">model.add(Dense(<span class="number">1024</span>))</span><br><span class="line">model.add(Activation(<span class="string">'relu'</span>))</span><br></pre></td></tr></table></figure>
<p>Fully connected layer 2 to shape (10) for 10 classes</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model.add(Dense(<span class="number">10</span>))</span><br><span class="line">model.add(Activation(<span class="string">'softmax'</span>))</span><br></pre></td></tr></table></figure>
<p>define your optimizer</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Another way to define your optimizer</span></span><br><span class="line">adam = Adam(lr=<span class="number">1e-4</span>)</span><br></pre></td></tr></table></figure>
<p><a href="https://keras.io/zh/layers/convolutional/" target="_blank" rel="external">keras.layers.Conv1D 1D å·ç§¯å±‚ (ä¾‹å¦‚æ—¶åºå·ç§¯)</a><br><a href="https://blog.csdn.net/qq_19707521/article/details/78486185" target="_blank" rel="external">Keras Convolution1Dä¸Convolution2DåŒºåˆ«</a></p>
<pre><code>_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
conv2d_3 (Conv2D)            (None, 32, 28, 28)        832       
_________________________________________________________________
activation_5 (Activation)    (None, 32, 28, 28)        0         
_________________________________________________________________
max_pooling2d_3 (MaxPooling2 (None, 32, 14, 14)        0         
_________________________________________________________________
conv2d_4 (Conv2D)            (None, 64, 14, 14)        51264     
_________________________________________________________________
activation_6 (Activation)    (None, 64, 14, 14)        0         
_________________________________________________________________
max_pooling2d_4 (MaxPooling2 (None, 64, 7, 7)          0         
_________________________________________________________________
flatten_2 (Flatten)          (None, 3136)              0         
_________________________________________________________________
dense_3 (Dense)              (None, 1024)              3212288   
_________________________________________________________________
activation_7 (Activation)    (None, 1024)              0         
_________________________________________________________________
dense_4 (Dense)              (None, 10)                10250     
_________________________________________________________________
activation_8 (Activation)    (None, 10)                0         
=================================================================
Total params: 3,274,634
Trainable params: 3,274,634
Non-trainable params: 0
_________________________________________________________________
</code></pre><h2 id="3-compile-model"><a href="#3-compile-model" class="headerlink" title="3. compile model"></a>3. compile model</h2><p>è®¾ç½®adamä¼˜åŒ–æ–¹æ³•ï¼Œlosså‡½æ•°, metricsæ–¹æ³•æ¥è§‚å¯Ÿè¾“å‡ºç»“æœ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># We add metrics to get more results you want to see</span></span><br><span class="line">model.compile(optimizer=adam,</span><br><span class="line">              loss=<span class="string">'categorical_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br></pre></td></tr></table></figure>
<h2 id="4-train-model"><a href="#4-train-model" class="headerlink" title="4. train model"></a>4. train model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'Training ------------'</span>)</span><br><span class="line"><span class="comment"># Another way to train the model</span></span><br><span class="line">model.fit(X_train, y_train, epochs=<span class="number">1</span>, batch_size=<span class="number">64</span>,)</span><br></pre></td></tr></table></figure>
<h2 id="5-evaluate-model"><a href="#5-evaluate-model" class="headerlink" title="5. evaluate model"></a>5. evaluate model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'\nTesting ------------'</span>)</span><br><span class="line"><span class="comment"># Evaluate the model with the metrics we defined earlier</span></span><br><span class="line">loss, accuracy = model.evaluate(X_test, y_test)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'\ntest loss: '</span>, loss)</span><br><span class="line">print(<span class="string">'\ntest accuracy: '</span>, accuracy)</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://keras-cn.readthedocs.io/en/latest/backend/" target="_blank" rel="external">keras-cn</a>ã€ <a href="https://keras.io/" target="_blank" rel="external">keras.io</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/keras/" target="_blank" rel="external">è«çƒ¦ Keras</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Classifier in Keras]]></title>
      <url>http://shopee.ai/2019/08/22/tensorflow/keras-1.3-classifier/</url>
      <content type="html"><![CDATA[<p><img src="/images/tensorflow/keras-Classifier.png" width="550" alt="Classifier in Keras"></p>
<a id="more"></a>
<p><strong>data preprocessing</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.datasets <span class="keyword">import</span> mnist</span><br><span class="line"></span><br><span class="line"><span class="comment"># download the mnist to the path '~/.keras/datasets/' if it is the first time to be called</span></span><br><span class="line"><span class="comment"># X shape (60,000 28x28), y shape (10,000, )</span></span><br><span class="line">(X_train, y_train), (X_test, y_test) = mnist.load_data()</span><br><span class="line"></span><br><span class="line"><span class="comment"># data pre-processing</span></span><br><span class="line">X_train = X_train.reshape(X_train.shape[<span class="number">0</span>], <span class="number">-1</span>) / <span class="number">255.</span>   <span class="comment"># normalize</span></span><br><span class="line">X_test = X_test.reshape(X_test.shape[<span class="number">0</span>], <span class="number">-1</span>) / <span class="number">255.</span>      <span class="comment"># normalize</span></span><br><span class="line"></span><br><span class="line">y_train = np_utils.to_categorical(y_train, num_classes=<span class="number">10</span>)</span><br><span class="line">y_test = np_utils.to_categorical(y_test, num_classes=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">print(X_train[<span class="number">1</span>].shape)</span><br><span class="line"><span class="string">"""</span><br><span class="line">(784,)</span><br><span class="line">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#print(y_train[:3])</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">[[ 0.  0.  0.  0.  0.  1.  0.  0.  0.  0.]</span><br><span class="line"> [ 1.  0.  0.  0.  0.  0.  0.  0.  0.  0.]</span><br><span class="line"> [ 0.  0.  0.  0.  1.  0.  0.  0.  0.  0.]]</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<h2 id="1-build-model"><a href="#1-build-model" class="headerlink" title="1. build model"></a>1. build model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">1337</span>)  <span class="comment"># for reproducibility</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> keras.datasets <span class="keyword">import</span> mnist</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> keras.utils <span class="keyword">import</span> np_utils</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Dense, Activation</span><br><span class="line"><span class="keyword">from</span> keras.optimizers <span class="keyword">import</span> RMSprop</span><br></pre></td></tr></table></figure>
<p>Another way to build your neural net</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Another way to build your neural net</span></span><br><span class="line">model = Sequential([</span><br><span class="line">    Dense(<span class="number">32</span>, input_dim=<span class="number">784</span>),</span><br><span class="line">    Activation(<span class="string">'relu'</span>),</span><br><span class="line">    Dense(<span class="number">10</span>),</span><br><span class="line">    Activation(<span class="string">'softmax'</span>),</span><br><span class="line">])</span><br><span class="line">model.summary()</span><br></pre></td></tr></table></figure>
<pre><code>_________________________________________________________________
Layer (type)                 Output Shape              Param #   
=================================================================
dense_5 (Dense)              (None, 32)                25120     
_________________________________________________________________
activation_5 (Activation)    (None, 32)                0         
_________________________________________________________________
dense_6 (Dense)              (None, 10)                330       
_________________________________________________________________
activation_6 (Activation)    (None, 10)                0         
=================================================================
Total params: 25,450
Trainable params: 25,450
Non-trainable params: 0
_________________________________________________________________
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Another way to define your optimizer</span></span><br><span class="line">rmsprop = RMSprop(lr=<span class="number">0.001</span>, rho=<span class="number">0.9</span>, epsilon=<span class="number">1e-08</span>, decay=<span class="number">0.0</span>)</span><br></pre></td></tr></table></figure>
<h2 id="2-compile-model"><a href="#2-compile-model" class="headerlink" title="2. compile model"></a>2. compile model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># We add metrics to get more results you want to see</span></span><br><span class="line">model.compile(optimizer=rmsprop,</span><br><span class="line">              loss=<span class="string">'categorical_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br></pre></td></tr></table></figure>
<h2 id="3-train-model"><a href="#3-train-model" class="headerlink" title="3. train model"></a>3. train model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'Training ------------'</span>)</span><br><span class="line"><span class="comment"># Another way to train the model</span></span><br><span class="line">model.fit(X_train, y_train, epochs=<span class="number">2</span>, batch_size=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># """</span></span><br><span class="line"><span class="comment"># Training ------------</span></span><br><span class="line"><span class="comment"># Epoch 1/2</span></span><br><span class="line"><span class="comment"># 60000/60000 [==============================] - 2s - loss: 0.3506 - acc: 0.9025     </span></span><br><span class="line"><span class="comment"># Epoch 2/2</span></span><br><span class="line"><span class="comment"># 60000/60000 [==============================] - 2s - loss: 0.1995 - acc: 0.9421   </span></span><br><span class="line"><span class="comment"># """</span></span><br></pre></td></tr></table></figure>
<h2 id="4-evaluate-model"><a href="#4-evaluate-model" class="headerlink" title="4. evaluate model"></a>4. evaluate model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'\nTesting ------------'</span>)</span><br><span class="line"><span class="comment"># Evaluate the model with the metrics we defined earlier</span></span><br><span class="line">loss, accuracy = model.evaluate(X_test, y_test)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'test loss: '</span>, loss)</span><br><span class="line">print(<span class="string">'test accuracy: '</span>, accuracy)</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span><br><span class="line">Testing ------------</span><br><span class="line"> 9760/10000 [============================&gt;.] - ETA: 0s</span><br><span class="line"></span><br><span class="line">test loss:  0.1724540345</span><br><span class="line">test accuracy:  0.9489</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://keras-cn.readthedocs.io/en/latest/backend/" target="_blank" rel="external">keras-cn</a>ã€ <a href="https://keras.io/" target="_blank" rel="external">keras.io</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/keras/" target="_blank" rel="external">è«çƒ¦ Keras</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Regressor in Keras]]></title>
      <url>http://shopee.ai/2019/08/21/tensorflow/keras-1.2-Regressor/</url>
      <content type="html"><![CDATA[<p>NN å¯ç”¨æ¥æ¨¡æ‹Ÿ regressionï¼Œç»™ä¸€ç»„æ•°æ®ï¼Œç”¨ä¸€æ¡çº¿å¯¹æ•°æ®è¿›è¡Œæ‹Ÿåˆï¼Œå¹¶å¯é¢„æµ‹æ–°è¾“å…¥ x çš„è¾“å‡ºå€¼ã€‚</p>
<a id="more"></a>
<p><img src="/images/tensorflow/keras-regressor-1.2-1.png" width="450" alt="Regressor in Keras"></p>
<p><strong>åˆ›å»ºæ•°æ®</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">1337</span>)  <span class="comment"># for reproducibility</span></span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Dense</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt <span class="comment"># å¯è§†åŒ–æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># create some data</span></span><br><span class="line">X = np.linspace(<span class="number">-1</span>, <span class="number">1</span>, <span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">np.random.shuffle(X)    <span class="comment"># randomize the data</span></span><br><span class="line"></span><br><span class="line">Y = <span class="number">0.5</span> * X + <span class="number">2</span> + np.random.normal(<span class="number">0</span>, <span class="number">0.05</span>, (<span class="number">200</span>, ))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># plot data</span></span><br><span class="line">plt.scatter(X, Y)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">X_train, Y_train = X[:<span class="number">160</span>], Y[:<span class="number">160</span>]     <span class="comment"># train å‰ 160 data points</span></span><br><span class="line">X_test, Y_test = X[<span class="number">160</span>:], Y[<span class="number">160</span>:]       <span class="comment"># test å 40 data points</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/tensorflow/keras-regressor-1.2-2.png" width="450"></p>
<h2 id="1-build-model"><a href="#1-build-model" class="headerlink" title="1. build model"></a>1. build model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = Sequential()</span><br><span class="line">model.add(Dense(output_dim=<span class="number">1</span>, input_dim=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç”¨ Sequential å»ºç«‹ modelï¼Œ å†ç”¨ model.add æ·»åŠ ç¥ç»å±‚ï¼Œæ·»åŠ çš„æ˜¯ Dense FC å±‚</p>
<p>å‚æ•°æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯è¾“å…¥æ•°æ®å’Œè¾“å‡ºæ•°æ®çš„ç»´åº¦ï¼Œæœ¬ä»£ç çš„ä¾‹å­ä¸­ x å’Œ y æ˜¯ä¸€ç»´çš„ã€‚</p>
<p>å¦‚æœéœ€è¦æ·»åŠ ä¸‹ä¸€ä¸ªç¥ç»å±‚çš„æ—¶å€™ï¼Œä¸ç”¨å†å®šä¹‰è¾“å…¥çš„çº¬åº¦ï¼Œå› ä¸ºå®ƒé»˜è®¤å°±æŠŠå‰ä¸€å±‚çš„è¾“å‡ºä½œä¸ºå½“å‰å±‚çš„è¾“å…¥ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œåªéœ€è¦ä¸€å±‚å°±å¤Ÿäº†ã€‚</p>
</blockquote>
<h2 id="2-compile-model"><a href="#2-compile-model" class="headerlink" title="2. compile model"></a>2. compile model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># choose loss function and optimizing method</span></span><br><span class="line">model.compile(loss=<span class="string">'mse'</span>, optimizer=<span class="string">'sgd'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># mse å‡æ–¹è¯¯å·®ï¼› optimizer sgd éšæœºæ¢¯åº¦ä¸‹é™æ³•.</span></span><br></pre></td></tr></table></figure>
<h2 id="3-train-model"><a href="#3-train-model" class="headerlink" title="3. train model"></a>3. train model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># training</span></span><br><span class="line">print(<span class="string">'Training -----------'</span>)</span><br><span class="line"><span class="keyword">for</span> step <span class="keyword">in</span> range(<span class="number">301</span>):</span><br><span class="line">    cost = model.train_on_batch(X_train, Y_train)</span><br><span class="line">    <span class="keyword">if</span> step % <span class="number">100</span> == <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">'train cost: '</span>, cost)</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span><br><span class="line">Training -----------</span><br><span class="line">train cost:  4.111329555511475</span><br><span class="line">train cost:  0.08777070790529251</span><br><span class="line">train cost:  0.007415373809635639</span><br><span class="line">train cost:  0.003544030711054802</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è®­ç»ƒçš„æ—¶å€™ç”¨ <code>model.train_on_batch</code> ä¸€æ‰¹ä¸€æ‰¹çš„è®­ç»ƒ <code>X_train</code>, <code>Y_train</code>ã€‚é»˜è®¤çš„è¿”å›å€¼æ˜¯ <code>cost</code>.</p>
</blockquote>
<h2 id="4-evaluate-model"><a href="#4-evaluate-model" class="headerlink" title="4. evaluate model"></a>4. evaluate model</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># test</span></span><br><span class="line">print(<span class="string">'\nTesting ------------'</span>)</span><br><span class="line">cost = model.evaluate(X_test, Y_test, batch_size=<span class="number">40</span>)</span><br><span class="line">print(<span class="string">'test cost:'</span>, cost)</span><br><span class="line">W, b = model.layers[<span class="number">0</span>].get_weights()</span><br><span class="line">print(<span class="string">'Weights='</span>, W, <span class="string">'\nbiases='</span>, b)</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span><br><span class="line">Testing ------------</span><br><span class="line">40/40 [==============================] - 0s</span><br><span class="line">test cost: 0.004269329831</span><br><span class="line">Weights= [[ 0.54246825]] </span><br><span class="line">biases= [ 2.00056005]</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç”¨åˆ°çš„å‡½æ•°æ˜¯ <code>model.evaluate</code>ï¼Œè¾“å…¥æµ‹è¯•é›†çš„<code>x</code>å’Œ<code>y</code>ï¼Œ è¾“å‡º <code>cost</code>ï¼Œ<code>weights</code> å’Œ <code>biases</code>ã€‚å…¶ä¸­ <code>weights</code> å’Œ <code>biases</code> æ˜¯å–åœ¨æ¨¡å‹çš„ç¬¬ä¸€å±‚ <code>model.layers[0]</code> å­¦ä¹ åˆ°çš„å‚æ•°ã€‚</p>
<p>ä»å­¦ä¹ åˆ°çš„ç»“æœå¯ä»¥çœ‹åˆ°, weights æ¯”è¾ƒæ¥è¿‘0.5ï¼Œbias æ¥è¿‘ 2ã€‚</p>
</blockquote>
<h2 id="5-Visualization"><a href="#5-Visualization" class="headerlink" title="5. Visualization"></a>5. Visualization</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># plotting the prediction</span></span><br><span class="line">Y_pred = model.predict(X_test)</span><br><span class="line">plt.scatter(X_test, Y_test)</span><br><span class="line">plt.plot(X_test, Y_pred)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/images/tensorflow/keras-regressor-1.2-3.png" width="450"></p>
<h2 id="6-Gaussian-Distribution"><a href="#6-Gaussian-Distribution" class="headerlink" title="6. Gaussian Distribution"></a>6. Gaussian Distribution</h2><p>å…ˆçœ‹ä¼Ÿå¤§çš„é«˜æ–¯åˆ†å¸ƒï¼ˆGaussian Distributionï¼‰çš„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼ˆprobability density functionï¼‰</p>
<p>$$<br>f(x)=\frac1{\sqrt{2\pi}\sigma}\exp(-\frac{(x-\mu)^2}{2\sigma^2})<br>$$</p>
<p>å¯¹åº”äºnumpyä¸­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">numpy.random.normal(loc=<span class="number">0.0</span>, scale=<span class="number">1.0</span>, size=<span class="keyword">None</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://keras-cn.readthedocs.io/en/latest/backend/" target="_blank" rel="external">keras-cn</a>ã€ <a href="https://keras.io/" target="_blank" rel="external">keras.io</a></li>
<li><a href="https://blog.csdn.net/lanchunhui/article/details/50163669" target="_blank" rel="external">ä»np.random.normal()åˆ°æ­£æ€åˆ†å¸ƒçš„æ‹Ÿåˆ</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/keras/" target="_blank" rel="external">è«çƒ¦ Keras</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/keras/3-1-save/" target="_blank" rel="external">è«çƒ¦ Keras Model, Save &amp; reload</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Keras Introduce]]></title>
      <url>http://shopee.ai/2019/08/19/tensorflow/keras-1.1-intro/</url>
      <content type="html"><![CDATA[<!--<img src="/images/tensorflow/keras-5.jpeg" width="550" alt="Keras"/>
-->
<p>Keras å¼€å‘é‡ç‚¹æ˜¯æ”¯æŒå¿«é€Ÿçš„å®éªŒã€‚èƒ½å¤Ÿä»¥æœ€å°çš„æ—¶å»¶æŠŠä½ çš„æƒ³æ³•è½¬æ¢ä¸ºå®éªŒç»“æœï¼Œæ˜¯åšå¥½ç ”ç©¶çš„å…³é”®ã€‚</p>
<p>Keras å¹¶ä¸å¤„ç†å¦‚å¼ é‡ä¹˜æ³•ã€å·ç§¯ç­‰åº•å±‚æ“ä½œã€‚è¿™äº›æ“ä½œä¾èµ–äºæŸç§ç‰¹å®šçš„ã€ä¼˜åŒ–è‰¯å¥½çš„å¼ é‡æ“ä½œåº“ã€‚</p>
<a id="more"></a>
<p><img src="/images/tensorflow/keras-4.png" width="550" alt="Keras + Tensorflow"></p>
<h2 id="1-Keras-install"><a href="#1-Keras-install" class="headerlink" title="1. Keras install"></a>1. Keras install</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pip install --upgrade pip</span><br><span class="line">pip3 install keras</span><br><span class="line">pip3 install ipython</span><br><span class="line">pip3 install notebook</span><br><span class="line">pip3 install tensorflow</span><br><span class="line">pip3 install --upgrade tensorflow</span><br><span class="line">pip3 install astkit</span><br><span class="line">pip3 install pandas</span><br><span class="line">pip3 install matplotlib</span><br></pre></td></tr></table></figure>
<h2 id="2-Basic-concepts"><a href="#2-Basic-concepts" class="headerlink" title="2. Basic concepts"></a>2. Basic concepts</h2><p><a href="https://keras-cn.readthedocs.io/en/latest/for_beginners/concepts/" target="_blank" rel="external">keras-cn.readthedocs.io ä¸€äº›åŸºæœ¬æ¦‚å¿µ</a></p>
<ol>
<li>ç¬¦å·è®¡ç®—</li>
<li>tensor å¼ é‡</li>
<li>data_format</li>
<li>functional model API</li>
<li>batch</li>
<li>epochs</li>
</ol>
<blockquote>
<p>è§„æ¨¡æœ€å°çš„å¼ é‡æ˜¯0é˜¶å¼ é‡ï¼Œå³æ ‡é‡ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ•°ã€‚</p>
<p>Keras æ¨¡å‹æœ‰ä¸€ç§å« Sequentialï¼Œä¹Ÿå°±æ˜¯å•è¾“å…¥å•è¾“å‡ºï¼Œä¸€æ¡è·¯é€šåˆ°åº•ï¼Œè·¨å±‚è¿æ¥ç»Ÿç»Ÿæ²¡æœ‰ã€‚</p>
<p>Keras ä¸­ç”¨çš„ä¼˜åŒ–å™¨SGDæ˜¯stochastic gradient descentçš„ç¼©å†™ï¼Œä¸æ˜¯ä¸€æ ·æœ¬æ›´æ–°ï¼Œè¿˜æ˜¯åŸºäºmini-batchçš„.</p>
<p><a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000" target="_blank" rel="external">å»–é›ªå³°çš„Pythonæ•™ç¨‹</a></p>
</blockquote>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1 2</span></span><br><span class="line"><span class="comment"># 3 4</span></span><br><span class="line"></span><br><span class="line">sum0 = np.sum(a, axis=<span class="number">0</span>)</span><br><span class="line">sum1 = np.sum(a, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">print(sum0)</span><br><span class="line">print(sum1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [4 6]</span></span><br><span class="line"><span class="comment"># [3 7]</span></span><br></pre></td></tr></table></figure>
<h2 id="3-Quickstart-in-30s"><a href="#3-Quickstart-in-30s" class="headerlink" title="3. Quickstart in 30s"></a>3. Quickstart in 30s</h2><p><a href="https://keras-cn.readthedocs.io/en/latest/" target="_blank" rel="external">30sä¸Šæ‰‹Keras</a></p>
<p>Sequentialæ¨¡å‹å¦‚ä¸‹</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"></span><br><span class="line">model = Sequential()</span><br></pre></td></tr></table></figure>
<p>å°†ä¸€äº›ç½‘ç»œå±‚é€šè¿‡<code>.add()</code>å †å èµ·æ¥ï¼Œå°±æ„æˆäº†ä¸€ä¸ªæ¨¡å‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Dense, Activation</span><br><span class="line"></span><br><span class="line">model.add(Dense(units=<span class="number">64</span>, input_dim=<span class="number">100</span>))</span><br><span class="line">model.add(Activation(<span class="string">"relu"</span>))</span><br><span class="line">model.add(Dense(units=<span class="number">10</span>))</span><br><span class="line">model.add(Activation(<span class="string">"softmax"</span>))</span><br></pre></td></tr></table></figure>
<p>å®Œæˆæ¨¡å‹çš„æ­å»ºåï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>.compile()</code>æ–¹æ³•æ¥ç¼–è¯‘æ¨¡å‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model.compile(loss=<span class="string">'categorical_crossentropy'</span>, optimizer=<span class="string">'sgd'</span>, metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># from keras.optimizers import SGD</span></span><br><span class="line"><span class="comment"># model.compile(loss='categorical_crossentropy', optimizer=SGD(lr=0.01, momentum=0.9, nesterov=True))</span></span><br></pre></td></tr></table></figure>
<p>å®Œæˆæ¨¡å‹ç¼–è¯‘åï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒæ•°æ®ä¸ŠæŒ‰batchè¿›è¡Œä¸€å®šæ¬¡æ•°çš„è¿­ä»£æ¥è®­ç»ƒç½‘ç»œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model.fit(x_train, y_train, epochs=<span class="number">5</span>, batch_size=<span class="number">32</span>)</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥æ‰‹åŠ¨å°†ä¸€ä¸ªä¸ªbatchçš„æ•°æ®é€å…¥ç½‘ç»œä¸­è®­ç»ƒï¼Œè¿™æ—¶å€™éœ€è¦ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model.train_on_batch(x_batch, y_batch)</span><br></pre></td></tr></table></figure>
<p>éšåï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€è¡Œä»£ç å¯¹æˆ‘ä»¬çš„æ¨¡å‹è¿›è¡Œè¯„ä¼°ï¼Œçœ‹çœ‹æ¨¡å‹çš„æŒ‡æ ‡æ˜¯å¦æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">loss_and_metrics = model.evaluate(x_test, y_test, batch_size=<span class="number">128</span>)</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ¨¡å‹ï¼Œå¯¹æ–°çš„æ•°æ®è¿›è¡Œé¢„æµ‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">classes = model.predict(x_test, batch_size=128)</span><br></pre></td></tr></table></figure>
<h2 id="4-Functional-model"><a href="#4-Functional-model" class="headerlink" title="4. Functional model"></a>4. Functional model</h2><p><a href="https://keras-cn.readthedocs.io/en/latest/getting_started/functional_API/" target="_blank" rel="external">å¿«é€Ÿå¼€å§‹å‡½æ•°å¼ï¼ˆFunctionalï¼‰æ¨¡å‹</a></p>
<blockquote>
<ol>
<li>ç¬¬ä¸€ä¸ªæ¨¡å‹ï¼šå…¨è¿æ¥ç½‘ç»œ</li>
<li>å¤šè¾“å…¥å’Œå¤šè¾“å‡ºæ¨¡å‹</li>
<li>å…±äº«å±‚, å±‚â€œèŠ‚ç‚¹â€çš„æ¦‚å¿µ</li>
</ol>
</blockquote>
<h2 id="5-Sequential-model"><a href="#5-Sequential-model" class="headerlink" title="5. Sequential model"></a>5. Sequential model</h2><p><a href="https://keras-cn.readthedocs.io/en/latest/getting_started/sequential_model/" target="_blank" rel="external">Sequential model</a> æ˜¯å¤šä¸ªç½‘ç»œå±‚çš„çº¿æ€§å †å ï¼Œä¹Ÿå°±æ˜¯â€œä¸€æ¡è·¯èµ°åˆ°é»‘â€ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = Sequential()</span><br><span class="line">model.add(Dense(<span class="number">32</span>, input_shape=(<span class="number">784</span>,)))</span><br><span class="line">model.add(Activation(<span class="string">'relu'</span>))</span><br></pre></td></tr></table></figure>
<h3 id="5-1-input-data-shape"><a href="#5-1-input-data-shape" class="headerlink" title="5.1 input data shape"></a>5.1 input data shape</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = Sequential()</span><br><span class="line">model.add(Dense(<span class="number">32</span>, input_dim=<span class="number">784</span>))</span><br><span class="line">model = Sequential()</span><br><span class="line">model.add(Dense(<span class="number">32</span>, input_shape=(<span class="number">784</span>,)))</span><br></pre></td></tr></table></figure>
<h3 id="5-2-compile-and-train-fit"><a href="#5-2-compile-and-train-fit" class="headerlink" title="5.2 compile and train (fit)"></a>5.2 compile and train (fit)</h3><p><a href="https://keras-cn.readthedocs.io/en/latest/getting_started/sequential_model/" target="_blank" rel="external">Sequential model methods_cn</a>ã€<a href="https://keras.io/models/sequential/" target="_blank" rel="external">Sequential model methods_en</a></p>
<p><strong>compile</strong> Arguments</p>
<blockquote>
<ul>
<li>optimizer</li>
<li>loss</li>
<li>metrics</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># For a multi-class classification problem</span></span><br><span class="line">model.compile(optimizer=<span class="string">'rmsprop'</span>,</span><br><span class="line">              loss=<span class="string">'categorical_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br></pre></td></tr></table></figure>
<p>Keras ä»¥ Numpyæ•°ç»„ ä½œä¸º <strong><code>input_data</code></strong> å’Œ <strong><code>label</code></strong> çš„æ•°æ®ç±»å‹ã€‚è®­ç»ƒæ¨¡å‹ä¸€èˆ¬ä½¿ç”¨<strong><code>fitå‡½æ•°</code></strong>.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># For a single-input model with 2 classes (binary classification):</span></span><br><span class="line"></span><br><span class="line">model = Sequential()</span><br><span class="line">model.add(Dense(<span class="number">32</span>, activation=<span class="string">'relu'</span>, input_dim=<span class="number">100</span>))</span><br><span class="line">model.add(Dense(<span class="number">1</span>, activation=<span class="string">'sigmoid'</span>))</span><br><span class="line">model.compile(optimizer=<span class="string">'rmsprop'</span>,</span><br><span class="line">              loss=<span class="string">'binary_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Generate dummy data</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">data = np.random.random((<span class="number">1000</span>, <span class="number">100</span>))</span><br><span class="line">labels = np.random.randint(<span class="number">2</span>, size=(<span class="number">1000</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Train the model, iterating on the data in batches of 32 samples</span></span><br><span class="line">model.fit(data, labels, epochs=<span class="number">10</span>, batch_size=<span class="number">32</span>)</span><br></pre></td></tr></table></figure>
<h2 id="6-Pre-knowledge"><a href="#6-Pre-knowledge" class="headerlink" title="6. Pre-knowledge"></a>6. Pre-knowledge</h2><h3 id="6-1-python-language"><a href="#6-1-python-language" class="headerlink" title="6.1 python language"></a>6.1 python language</h3><ul>
<li><p>Object-oriented,  class, object, encapsulation, polymorphism, inheritance, scope, etc.</p>
</li>
<li><p>Python çš„ç§‘å­¦è®¡ç®—åŒ…æœ‰ä¸€å®šäº†è§£ï¼Œnumpy, scipy, scikit-learn, pandasâ€¦</p>
</li>
<li><p>generatorï¼Œä»¥åŠå¦‚ä½•ç¼–å†™ generatorã€‚ä»€ä¹ˆæ˜¯åŒ¿åå‡½æ•°ï¼ˆlambdaï¼‰</p>
</li>
</ul>
<h3 id="6-2-deep-learning"><a href="#6-2-deep-learning" class="headerlink" title="6.2 deep learning"></a>6.2 deep learning</h3><blockquote>
<p>Supervised Learning, Unsupervised Learning, Classification, Clustering, Regression</p>
<p>Neuron model, multilayer perceptronï¼ŒBP algorithm</p>
<p>loss functionï¼Œactivation functionï¼ŒGradient descent</p>
<p>Fully Connected NNã€CNNã€RNNã€LSTM</p>
<p>Training set, test set, cross validation, under-fitting, over-fitting</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://keras-cn.readthedocs.io/en/latest/backend/" target="_blank" rel="external">keras-cn</a></li>
<li><a href="https://keras.io/" target="_blank" rel="external">keras.io</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Named Entity Recognitionï¼ŒNER]]></title>
      <url>http://shopee.ai/2019/08/15/nlp/info-NER/</url>
      <content type="html"><![CDATA[<!--<img src="/images/nlp/info-NER-1.png" width="550" alt="Information Extraction, Named Entity Recognition"/>-->
<p><img src="/images/nlp/info-NER-2.png" width="600"></p>
<a id="more"></a>
<h2 id="1-NER-Introduce"><a href="#1-NER-Introduce" class="headerlink" title="1. NER Introduce"></a>1. NER Introduce</h2><p>NERç³»ç»Ÿ å°±æ˜¯ä»éç»“æ„åŒ–çš„è¾“å…¥æ–‡æœ¬ä¸­æŠ½å–å‡ºä¸Šè¿°å®ä½“ï¼Œå¹¶ä¸”å¯ä»¥æŒ‰ç…§ä¸šåŠ¡éœ€æ±‚è¯†åˆ«å‡ºæ›´å¤šç±»åˆ«çš„å®ä½“.</p>
<!--<img src="/images/nlp/info-NER-2.png" width="700" alt="Information Extraction, NER"/>-->
<blockquote>
<p>å‘½åå®ä½“è¯†åˆ«æ˜¯æœªç™»å½•è¯ä¸­æ•°é‡æœ€å¤šã€è¯†åˆ«éš¾åº¦æœ€å¤§ã€å¯¹åˆ†è¯æ•ˆæœå½±å“æœ€å¤§çš„é—®é¢˜ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ä¿¡æ¯æŠ½å–ã€ä¿¡æ¯æ£€ç´¢ã€æœºå™¨ç¿»è¯‘ã€é—®ç­”ç³»ç»Ÿç­‰å¤šç§è‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯å¿…ä¸å¯å°‘çš„ç»„æˆéƒ¨åˆ†ã€‚ </p>
</blockquote>
<h2 id="2-Deep-Learning-in-NER"><a href="#2-Deep-Learning-in-NER" class="headerlink" title="2. Deep Learning in NER"></a>2. Deep Learning in NER</h2><p><img src="/images/nlp/info-NER-3.jpg" width="650" alt="NERå‘å±•è¶‹åŠ¿"></p>
<p><strong> Embedding+BiLSTM+CRF</strong> æ˜¯ä¸€ä¸ªéå¸¸å¼ºçš„ baseline æ¨¡å‹ï¼Œæ˜¯ç›®å‰åŸºäºæ·±åº¦å­¦ä¹ çš„ NER æ–¹æ³•ä¸­æœ€ä¸»æµçš„æ¨¡å‹ã€‚</p>
<h3 id="2-1-BiLSTM-CRF"><a href="#2-1-BiLSTM-CRF" class="headerlink" title="2.1  BiLSTM-CRF"></a>2.1  BiLSTM-CRF</h3><p>LongShort Term Memory ç½‘ç»œä¸€èˆ¬å«åšLSTMï¼Œæ˜¯RNNçš„ä¸€ç§ç‰¹æ®Šç±»å‹ï¼Œå¯ä»¥å­¦ä¹ é•¿è·ç¦»ä¾èµ–ä¿¡æ¯ã€‚</p>
<p><img src="/images/nlp/info-NER-5.png" width="500" alt="Information Extraction, NER"></p>
<p>LSTM åŒæ ·æ˜¯è¿™æ ·çš„ç»“æ„ï¼Œä½†æ˜¯é‡å¤çš„å•å…ƒæ‹¥æœ‰ä¸€ä¸ªä¸åŒçš„ç»“æ„ã€‚ä¸åŒäºæ™®é€šRNNå•å…ƒï¼Œè¿™é‡Œæ˜¯æœ‰å››ä¸ªï¼Œä»¥ä¸€ç§éå¸¸ç‰¹æ®Šçš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚</p>
<p><img src="/images/nlp/info-NER-6.png" width="500" alt="Information Extraction, NER"></p>
<p>LSTM é€šè¿‡ä¸‰ä¸ªé—¨ç»“æ„ï¼ˆè¾“å…¥é—¨ï¼Œé—å¿˜é—¨ï¼Œè¾“å‡ºé—¨ï¼‰ï¼Œé€‰æ‹©æ€§åœ°é—å¿˜éƒ¨åˆ†å†å²ä¿¡æ¯ï¼ŒåŠ å…¥éƒ¨åˆ†å½“å‰è¾“å…¥ä¿¡æ¯ï¼Œæœ€ç»ˆæ•´åˆåˆ°å½“å‰çŠ¶æ€å¹¶äº§ç”Ÿè¾“å‡ºçŠ¶æ€ã€‚</p>
<p><img src="/images/nlp/info-NER-7.png" width="600" alt="Information Extraction, NER"></p>
<p>åº”ç”¨äºNERä¸­çš„ biLSTM-CRF æ¨¡å‹ä¸»è¦ç”± Embeddingå±‚ï¼ˆä¸»è¦æœ‰è¯å‘é‡ï¼Œå­—å‘é‡ç­‰ç‰¹å¾ï¼‰ã€‚</p>
<p>æ— éœ€ç‰¹å¾å·¥ç¨‹ï¼Œä½¿ç”¨è¯å‘é‡ä»¥åŠå­—ç¬¦å‘é‡å°±å¯ä»¥è¾¾åˆ°å¾ˆå¥½çš„æ•ˆæœï¼Œå¦‚æœæœ‰é«˜è´¨é‡çš„è¯å…¸ç‰¹å¾ï¼Œèƒ½è¿›ä¸€æ­¥æé«˜ã€‚</p>
<p><br><br><img src="/images/nlp/info-NER-8.png" width="550" alt="Information Extraction, NER"></p>
<h3 id="2-2-IDCNN-CRF"><a href="#2-2-IDCNN-CRF" class="headerlink" title="2.2 IDCNN-CRF"></a>2.2 IDCNN-CRF</h3><h2 id="3-å®æˆ˜åº”ç”¨"><a href="#3-å®æˆ˜åº”ç”¨" class="headerlink" title="3. å®æˆ˜åº”ç”¨"></a>3. å®æˆ˜åº”ç”¨</h2><h3 id="3-1-è¯­æ–™å‡†å¤‡"><a href="#3-1-è¯­æ–™å‡†å¤‡" class="headerlink" title="3.1 è¯­æ–™å‡†å¤‡"></a>3.1 è¯­æ–™å‡†å¤‡</h3><h3 id="3-2-æ•°æ®å¢å¼º"><a href="#3-2-æ•°æ®å¢å¼º" class="headerlink" title="3.2 æ•°æ®å¢å¼º"></a>3.2 æ•°æ®å¢å¼º</h3><h2 id="4-ELMO-GPT-Bert"><a href="#4-ELMO-GPT-Bert" class="headerlink" title="4. ELMO / GPT / Bert"></a>4. ELMO / GPT / Bert</h2><p><strong>ELMO / GPT / Bert</strong></p>
<ol>
<li>ELMO æ˜¯åŸºäºåŒå‘ LSTM çš„è¯­è¨€æ¨¡å‹.</li>
<li>GPT æ˜¯å•å‘ Transformer è¯­è¨€æ¨¡å‹.</li>
<li>Bert æ˜¯åŒå‘ Transformer è¯­è¨€æ¨¡å‹.</li>
</ol>
<p><strong>NLP é¢†åŸŸå·²ç»å¼€å§‹ä»å•ä¸€ä»»åŠ¡å­¦ä¹ </strong>ï¼Œå‘å±•ä¸º<strong><code>å¤šä»»åŠ¡ä¸¤é˜¶æ®µå­¦ä¹ </code></strong>ï¼š</p>
<ol>
<li>ç¬¬ä¸€é˜¶æ®µåˆ©ç”¨è¯­è¨€æ¨¡å‹è¿›è¡Œé¢„è®­ç»ƒï¼›</li>
<li>ç¬¬äºŒä¸ªé˜¶æ®µåœ¨ä¸‹æ¸¸ä»»åŠ¡ä¸Š finetuneã€‚</li>
</ol>
<p>è¿™äº›è¯­è¨€æ¨¡å‹åœ¨ NER éƒ½è¾¾åˆ°äº†éå¸¸å¥½çš„æ•ˆæœã€‚ </p>
<blockquote>
<p>å§œå…´åï¼Œæµ™æ±Ÿå¤§å­¦è®¡ç®—æœºç¡•å£« ï¼Œç ”ç©¶æ–¹å‘æœºå™¨å­¦ä¹ ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼Œåœ¨ ACM-multimediaã€IJCAI ä¼šè®®ä¸Šå‘è¡¨è¿‡å¤šç¯‡æ–‡ç« ã€‚åœ¨ ByteCup2018 æ¯”èµ›ä¸­è·å¾—ç¬¬ä¸€åã€‚</p>
<p>å´”å¾·ç››ï¼ŒåŒ—äº¬é‚®ç”µå¤§å­¦æ¨¡å¼è¯†åˆ«å®éªŒå®¤ ï¼Œä¸»è¦çš„ç ”ç©¶æ–¹å‘æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†å’Œå¹¿å‘Šæ¨èï¼Œæ›¾è· 2017 çŸ¥ä¹çœ‹å±±æ¯æŒ‘æˆ˜èµ›äºšå†›ï¼Œ2017 æ‘©æ‹œç®—æ³•æŒ‘æˆ˜èµ›å­£å†›ï¼Œ2019 æœç‹ç®—æ³•å¤§èµ›å† å†›ã€‚</p>
</blockquote>
<h2 id="5-Summary"><a href="#5-Summary" class="headerlink" title="5. Summary"></a>5. Summary</h2><p>æœ€åè¿›è¡Œä¸€ä¸‹æ€»ç»“ï¼Œå°†ç¥ç»ç½‘ç»œä¸CRFæ¨¡å‹ç›¸ç»“åˆçš„CNN/RNN-CRFæˆä¸ºäº†ç›®å‰NERçš„ä¸»æµæ¨¡å‹ã€‚</p>
<p>å¯¹äºCNNä¸RNNï¼Œå„æœ‰å„çš„ä¼˜ç‚¹ã€‚ç”±äºRNNæœ‰å¤©ç„¶çš„åºåˆ—ç»“æ„ï¼Œæ‰€ä»¥RNN-CRFä½¿ç”¨æ›´ä¸ºå¹¿æ³›ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li>æ‘˜è¦å¿ƒå¾—: <strong><code>baeline</code></strong> æ˜¯éå¸¸é‡è¦çš„.</li>
<li><a href="https://zhuanlan.zhihu.com/p/75342886" target="_blank" rel="external">è¾¾è§‚æ•°æ®é«˜ç¿”è¯¦è§£æ–‡æœ¬æŠ½å–ï¼ˆé™„â€œè¾¾è§‚æ¯â€å‚èµ›æ–¹å¼ï¼‰</a></li>
<li><a href="https://www.jishuwen.com/d/2TEc#tuit" target="_blank" rel="external">ç¬¬ä¸‰å±Šâ€œè¾¾è§‚æ¯â€æ–‡æœ¬æ™ºèƒ½ç®—æ³•å¤§èµ›å‚èµ›æŒ‡å—</a></li>
<li><a href="https://easyai.tech/ai-definition/ner/" target="_blank" rel="external">Named-entity recognition | NER</a></li>
<li><a href="https://www.jiqizhixin.com/articles/2018-08-31-2" target="_blank" rel="external">ä¸€æ–‡è¯¦è§£æ·±åº¦å­¦ä¹ åœ¨å‘½åå®ä½“è¯†åˆ«(NER)ä¸­çš„åº”ç”¨</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2019 Leetcode]]></title>
      <url>http://shopee.ai/2019/07/01/leetcode/leetcode/</url>
      <content type="html"><![CDATA[<p><img src="/images/icpc/Array-In-C.png" width="580"></p>
<a id="more"></a>
<p>1ã€ä¸ƒç§å¸¸è§çš„æ•°ç»„æ’åºç®—æ³•æ•´ç†(Cè¯­è¨€ç‰ˆæœ¬)<br>2ã€2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“æ•°ç»„å’Œé“¾è¡¨<br>3ã€2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“å­—ç¬¦ä¸²<br>4ã€2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“æ ˆå’Œé˜Ÿåˆ—<br>5ã€2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“ä¼˜å…ˆé˜Ÿåˆ—<br>6ã€2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“å“ˆå¸Œè¡¨<br>7ã€2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“æ ‘ã€äºŒå‰æ ‘ã€äºŒå‰æœç´¢æ ‘<br>8ã€2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“é€’å½’ä¸åˆ†æ²»<br>9ã€2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“è´ªå¿ƒç®—æ³•<br>10ã€2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“åŠ¨æ€è§„åˆ’(Dynamic Programming)</p>
<p><strong>Hot100</strong></p>
<h3 id="hot-easy"><a href="#hot-easy" class="headerlink" title="hot easy"></a>hot easy</h3><blockquote>
<ol>
<li>ä¸¤æ•°ä¹‹å’Œï¼Œ âœ”ï¸</li>
<li>åè½¬é“¾è¡¨ï¼Œ å›æ–‡é“¾è¡¨(1.å¿«æ…¢pæ‹†ï¼Œ2.ç¿»è½¬ 3. åˆ¤æ–­)ï¼Œ <a href="https://blog.csdn.net/qq_17550379/article/details/85680899" target="_blank" rel="external">ç›¸äº¤é“¾è¡¨</a>ï¼ˆf1: set() f2: A+Bå’ŒB+A f3:å¿«æ…¢pï¼‰    âœ”ï¸</li>
<li><a href="https://blog.csdn.net/Jaster_wisdom/article/details/80662037" target="_blank" rel="external">æœ€å¤§å­åºå’Œ</a> ï¼ˆåŠ¨æ€è§„åˆ’/åˆ†æ²»æ³•ï¼‰ï¼Œ âœ”ï¸</li>
<li>çˆ¬æ¥¼æ¢¯ï¼Œ æ‰“å®¶åŠ«èˆ  &amp; ç¯å½¢é“¾è¡¨ , åˆå¹¶2ä¸ªæœ‰åºé“¾è¡¨ï¼Œ âœ”ï¸</li>
<li>æœ‰æ•ˆçš„æ‹¬å·ï¼Œ æœ€å°æ ˆ âœ”ï¸</li>
<li><a href="https://blog.csdn.net/cumt_cx/article/details/48015735" target="_blank" rel="external">ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-3, ä¸¤é˜¶æ®µ</a>ï¼Œ âœ”ï¸</li>
<li><a href="https://www.cnblogs.com/grandyang/p/4295761.html" target="_blank" rel="external">ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº-4, è¶…éš¾</a> </li>
<li>ç¿»è½¬äºŒå‰æ ‘ , æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘  ï¼Œ âœ”ï¸</li>
<li>åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼Œ æ±‰æ˜è·ç¦» x&amp;(x-1)æ¥ç»Ÿè®¡äºŒè¿›åˆ¶æ•°xä¸­1çš„ä¸ªæ•° âœ”ï¸</li>
<li>äºŒå‰æ ‘çš„ç›´å¾„ &amp; äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ &amp; å¯¹ç§°äºŒå‰æ ‘, åˆå¹¶äºŒå‰æ ‘ ï¼Œ âœ”ï¸</li>
<li>æ±‚ä¼—æ•° ï¼Œç§»åŠ¨é›¶ ï¼Œæ‰¾åˆ°æ‰€æœ‰æ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­— </li>
<li>æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„,æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯ , è·¯å¾„æ€»å’Œ III                 </li>
</ol>
</blockquote>
<h3 id="hot-ä¸­ç­‰"><a href="#hot-ä¸­ç­‰" class="headerlink" title="hot ä¸­ç­‰"></a>hot ä¸­ç­‰</h3><p>Page1</p>
<blockquote>
<ol>
<li>ä¸¤æ•°ä¹‹å’Œï¼ˆæ–¹æ³•ï¼šä¸€éå“ˆå¸Œè¡¨ï¼‰  Map &lt; Integer, Integer &gt; ï¼Œ âœ”ï¸</li>
<li>æœ€é•¿å›æ–‡å­ä¸²    </li>
<li>åè½¬é“¾è¡¨    ï¼Œ âœ”ï¸</li>
<li>LRUç¼“å­˜æœºåˆ¶</li>
<li>ç¼–è¾‘è·ç¦»</li>
<li>æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</li>
<li>æˆ³æ°”çƒ</li>
<li>æ¥é›¨æ°´</li>
<li>ä¸¤æ•°ç›¸åŠ  (é“¾è¡¨+è¿›ä½carry)ï¼Œ âœ”ï¸</li>
<li>å¯»æ‰¾ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°</li>
<li><a href="https://blog.csdn.net/qq_17550379/article/details/80614597" target="_blank" rel="external">ä¸‰æ•°ä¹‹å’Œ</a> ï¼ˆ2æ–¹æ³•ï¼š hash &amp; å¯¹æ’æŒ‡é’ˆï¼‰ ï¼Œ âœ”ï¸  </li>
<li><a href="https://blog.csdn.net/Jaster_wisdom/article/details/80662037" target="_blank" rel="external">æœ€å¤§å­åºå’Œ</a> ï¼ˆåŠ¨æ€è§„åˆ’/åˆ†æ²»æ³•ï¼‰ï¼Œ âœ”ï¸</li>
<li>å­—ç¬¦ä¸²è§£ç     </li>
<li><a href="https://www.cnblogs.com/grandyang/p/4944875.html" target="_blank" rel="external">åˆ é™¤æ— æ•ˆçš„æ‹¬å·</a></li>
<li><a href="https://www.cnblogs.com/grandyang/p/4322667.html" target="_blank" rel="external">æœ€å¤§çŸ©å½¢</a> æœ‰éš¾åº¦ nok</li>
<li><a href="https://my.oschina.net/u/3744313/blog/1923933" target="_blank" rel="external">å…¨æ’åˆ— (äº¤æ¢æ³•ï¼Œç±»æ¯”å­—ç¬¦ä¸²æ€è·¯)</a>ï¼Œ âœ”ï¸</li>
<li>åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨  ï¼Œ âœ”ï¸  </li>
<li>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…    </li>
<li>é›¶é’±å…‘æ¢ ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<p>Page3</p>
<blockquote>
<ol>
<li><a href="https://blog.csdn.net/weixin_41958153/article/details/81735032" target="_blank" rel="external">å•è¯æœç´¢</a> (DFS vector &lt; vector &lt; bool &gt; &gt; <strong>visit(row, vector &lt; bool &gt; (col, false))</strong>)</li>
<li><a href="https://www.cnblogs.com/grandyang/p/5275096.html" target="_blank" rel="external">æ‰“å®¶åŠ«èˆä¹‹ä¸‰</a> (DFS)</li>
<li>æœ€å°è·¯å¾„å’Œ</li>
<li>ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</li>
<li>æ¯æ—¥æ¸©åº¦    </li>
<li>å›æ–‡å­ä¸² </li>
<li>éªŒè¯äºŒå‰æœç´¢æ ‘    </li>
<li>å•è¯æ‹†åˆ†    </li>
<li>é¢œè‰²åˆ†ç±»    </li>
<li>åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®    </li>
<li>å­—æ¯å¼‚ä½è¯åˆ†ç»„    </li>
<li>å®Œå…¨å¹³æ–¹æ•°    </li>
<li>ç¯å½¢é“¾è¡¨ II    </li>
<li>é™¤æ³•æ±‚å€¼    </li>
<li>è¯¾ç¨‹è¡¨    </li>
<li>æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—    </li>
<li>é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯ </li>
<li>ç›®æ ‡å’Œ    </li>
<li>æ¯”ç‰¹ä½è®¡æ•°    </li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; m = <span class="keyword">new</span> HashMap&lt;Integer, Integer&gt;();</span><br><span class="line">        <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (m.containsKey(target - nums[i])) &#123;</span><br><span class="line">                res[<span class="number">0</span>] = i;</span><br><span class="line">                res[<span class="number">1</span>] = m.get(target - nums[i]);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            m.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ol>
<li>çˆ¬æ¥¼æ¢¯</li>
</ol>
</blockquote>
<h2 id="1-Array"><a href="#1-Array" class="headerlink" title="1. Array"></a>1. Array</h2><p><strong>1.1 easy</strong></p>
<blockquote>
<ol>
<li><strong>äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</strong> bool Find(int b[][4], int rows, int cols, int value)ï¼Œ âœ”ï¸</li>
<li>æ›¿æ¢ç©ºæ ¼ char* replace(char* str, int len) â€˜ â€™-&gt;%20 åœ¨æºæ•°ç»„æ€»é•¿åº¦ï¼Œä»åå‘å‰ï¼Œé€ä¸ªèµ‹å€¼ï¼Œ âœ”ï¸</li>
<li>æ•°å­—åœ¨æ’åºæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•° biSea(arr,k+0.5)-biSea(arr,k-0.5); / bina(*a, len, num, isLeft)ï¼Œ âœ”ï¸</li>
<li>æ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´  while(low &lt; high) { if(a[m] &gt; a[high]) min[m+1,high], else [low,m]} âœ”ï¸ </li>
<li>è°ƒæ•´æ•°ç»„ä½æ•°ä½¿å¥‡æ•°ä½äºå‰é¢ void odds(int[] arr) ï¼Œ âœ”ï¸</li>
<li>æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ¬¡æ•° * int core(int *a, int len)ï¼Œ âœ”ï¸</li>
<li><strong>ä¸‘æ•°</strong>, åªåŒ…å«è´¨å› å­2ã€3å’Œ5çš„æ•°ç§°ä½œä¸‘æ•°, 1, 2, 3, 5, 6, â€¦ ï¼Œ âœ”ï¸</li>
<li>å’Œä¸ºSçš„ä¸¤ä¸ªæ•°å­—(åŒæŒ‡é’ˆæ€æƒ³) ï¼Œ âœ”ï¸</li>
<li>æ‰‘å…‹ç‰Œé¡ºå­ (æ’åºåï¼Œç»Ÿè®¡å¤§å°ç‹æ•°é‡ + é—´éš”)ï¼Œ âœ”ï¸</li>
<li>æ„å»ºä¹˜ç§¯æ•°ç»„ (Aæ•°ç»„ï¼Œä»å‰å‘åï¼Œå†ä»åå‘å‰j-2,æ„é€  B)ï¼Œ âœ”ï¸</li>
<li>æ±‚1+2+3+â€¦+n (åˆ¤æ–­ &amp;&amp; é€’å½’)ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<p><strong>1.2 medium</strong></p>
<blockquote>
<ol>
<li><strong><code>å…«çš‡å</code></strong>ï¼Œ void dfs(int n) for(int i = 0; i &lt; 8; i++) { pos[n] = i; ï¼Œ âœ”ï¸</li>
<li><a href="https://www.weiweiblog.cn/findcontinuoussequence/" target="_blank" rel="external">å’ŒSè¿ç»­æ­£æ•°åº</a> (3funï¼Œmid = (1+sum)/2; while(start&lt;mid), Sum(int start, int end), åŒvector)ï¼Œ âœ”ï¸</li>
<li>çº¦ç‘Ÿå¤«ç¯ LinkedList; (index = (index + m) %link.size();link.remove(index--);) link.get(0); ï¼Œ âœ”ï¸</li>
<li><a href="https://www.weiweiblog.cn/printminnumber/" target="_blank" rel="external">æ•°ç»„æ’æˆæœ€å°çš„æ•°</a> Arrays.sort(str, new Comparator<string>(){ public int compare(String s1, String s2)ï¼Œâœ”ï¸</string></li>
<li>æ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— , åˆ’åˆ†2æ•°ç»„ï¼Œnum &amp; (-num);äºŒè€…ä¸åå¾—åˆ°çš„æ•°ï¼Œå°†numæœ€å³è¾¹çš„1ä¿ç•™ä¸‹æ¥ï¼Œâœ”ï¸</li>
</ol>
</blockquote>
<p><strong>1.3 important</strong></p>
<blockquote>
<ol>
<li>æ•°ç»„ä¸­çš„é€†åºå¯¹(å½’å¹¶æ’åº).  void mergeSort(int a[], int l, int r) ï¼Œ âœ”ï¸</li>
<li>æœ€å°çš„Kä¸ªæ•°(å †æ’åº)ï¼Œ <a href="https://www.weiweiblog.cn/getmedian/" target="_blank" rel="external">æ•°æ®æµä¸­çš„ä¸­ä½æ•° ï¼ˆ2 PriorityQueueï¼‰</a>.   </li>
<li><strong>æœ€å°çš„Kä¸ªæ•°</strong> ï¼ˆ2funï¼‰å¿«æ’æ€æƒ³ part return l, å¤–else return left; void set_k(int* input, n, k) ï¼Œ âœ”ï¸</li>
<li><strong>quickSort</strong>(a[],left,right), while(1) { (åŒwhile, if(l &gt;= r) break; swap) } swap(a[left], a[l]);ï¼Œ âœ”ï¸</li>
<li><a href="https://www.cnblogs.com/biyeymyhjob/archive/2012/07/31/2615833.html" target="_blank" rel="external">æœ€çŸ­è·¯Floyd</a>ï¼Œ âœ”ï¸</li>
</ol>
<p>quickSort (1 while + [2while + break + swap] + swap + 2 quickSort)</p>
<p>mergeSort (2 mergeSort + new *arr + 3 while + 1 for)</p>
</blockquote>
<p>1.1 å…«çš‡å</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"><span class="keyword">int</span> pos[N];</span><br><span class="line"><span class="keyword">int</span> num = <span class="number">8</span>, cnt = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ok</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(pos[i] == pos[n]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">abs</span>(pos[n] - pos[i]) == n-i) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n == num) &#123;</span><br><span class="line">        cnt++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">        pos[n] = i;</span><br><span class="line">        <span class="keyword">if</span>(ok(n)) &#123;</span><br><span class="line">            dfs(n+<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    res = dfs(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.2 äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> a[][<span class="number">4</span>] = &#123;</span><br><span class="line">    &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;,</span><br><span class="line">    &#123; <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> &#125;,</span><br><span class="line">    &#123; <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>&#125;,</span><br><span class="line">    &#123; <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>&#125;,</span><br><span class="line">    &#123; <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> b[][<span class="number">4</span>], <span class="keyword">int</span> rows, <span class="keyword">int</span> cols, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> row = <span class="number">0</span>, col = cols - <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (b != <span class="literal">NULL</span> &amp;&amp; row &lt; rows &amp;&amp; col &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (b[row][col] == value) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"row: "</span> &lt;&lt; row &lt;&lt; <span class="string">" col: "</span> &lt;&lt; col &lt;&lt; end;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (b[row][col] &gt; value) &#123;</span><br><span class="line">            col--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            row++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.3 æ›¿æ¢ç©ºæ ¼</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span>* <span class="title">replace</span><span class="params">(<span class="keyword">char</span>* str, <span class="keyword">int</span> len)</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">while</span>(str[len] != <span class="string">'\0'</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(str[len] == <span class="string">' '</span>)&#123;</span><br><span class="line">            konglen++;</span><br><span class="line">        &#125;</span><br><span class="line">        len++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'\0'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.4 æ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(left &lt; right) &#123; <span class="comment">// exit. good idea!</span></span><br><span class="line">        <span class="keyword">int</span> l = left, r = right, x = a[l];</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; a[r] &gt;= x) r--;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; a[l] &lt;= x) l++;</span><br><span class="line">            <span class="keyword">if</span>(l &gt;= r) <span class="keyword">break</span>;</span><br><span class="line">            swap(a[r], a[l]);</span><br><span class="line">        &#125;</span><br><span class="line">        swap(a[left], a[l]);</span><br><span class="line">        quickSort(a, left, l<span class="number">-1</span>);</span><br><span class="line">        quickSort(a, l+<span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.5 è°ƒæ•´æ•°ç»„ä½æ•°ä½¿å¥‡æ•°ä½äºå‰é¢</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reorderOddEven</span><span class="params">(<span class="keyword">int</span>[] arr, len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr == <span class="literal">NULL</span> || len &lt;= <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, r = len - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r &amp;&amp; arr[r] % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            r--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r &amp;&amp; arr[l] % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            l++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (l &lt; r) &#123;</span><br><span class="line">            swap(arr[l], arr[r]);</span><br><span class="line">            l++, r--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.6 å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ¬¡æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">core</span><span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr == <span class="literal">NULL</span> || len &lt;= <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> target = a[<span class="number">0</span>], cnt = <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] == target) &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            cnt--;</span><br><span class="line">            <span class="keyword">if</span> (cnt == <span class="number">0</span>) &#123;</span><br><span class="line">                target = a[i];</span><br><span class="line">                cnt = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.7 æœ€å°çš„Kä¸ªæ•°  part å¿«æ’æ€æƒ³</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">105</span>;</span><br><span class="line"><span class="keyword">int</span> a[N] = &#123;<span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">8</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">part</span> <span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(left &lt; right) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">int</span> x = a[<span class="number">0</span>], l = left, r = right;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">while</span>(l &lt; r) &#123;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; a[r] &gt;= x) r--;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; a[l] &lt;= x) l++;</span><br><span class="line">            <span class="keyword">if</span>(l &gt;= r) <span class="keyword">break</span>;</span><br><span class="line">            swap(a[l], a[r]);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        swap(x, a[l]);</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_k</span><span class="params">(<span class="keyword">int</span> *input, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">if</span>(input == <span class="literal">NULL</span> || k &gt; n || k &lt;= <span class="number">0</span> || n &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> start = <span class="number">0</span>, end = n - <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> index = part(input, start, end);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(index != k<span class="number">-1</span>) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(index &gt; k<span class="number">-1</span>) &#123;</span><br><span class="line">            end = index - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(index &lt; k - <span class="number">1</span>) &#123;</span><br><span class="line">            start = index + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        index = part(input, start, end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.8 æ•°ç»„ä¸­çš„é€†åºå¯¹ &amp; å½’å¹¶æ’åº</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123; <span class="comment">//  8, 5, 4, 9, 2, 3, 6</span></span><br><span class="line">    <span class="keyword">if</span>(l &gt;= r) <span class="keyword">return</span>;   <span class="comment">// exit.</span></span><br><span class="line">    <span class="keyword">int</span> mid = (l+r) / <span class="number">2</span>; <span class="comment">// overflow  &lt;-&gt;  l + (r-l)/2</span></span><br><span class="line">    mergeSort(a, l, mid);</span><br><span class="line">    mergeSort(a, mid+<span class="number">1</span>, r);  </span><br><span class="line">    <span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[r-l+<span class="number">1</span>];  </span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i = l, j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= mid &amp;&amp; j &lt;= r) &#123;  </span><br><span class="line">        <span class="keyword">if</span>(a[i] &lt;= a[j]) &#123;</span><br><span class="line">            arr[k++] = a[i++]; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[k++] = a[j++]; <span class="comment">// ans += (mid-i+1);  </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= mid) arr[k++] = a[i++];</span><br><span class="line">    <span class="keyword">while</span>(j &lt;= r) arr[k++] = a[j++];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        a[i] = arr[i-l];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> []arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.15 çº¦ç‘Ÿå¤«ç¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">LastRemaining_Solution</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n &lt; <span class="number">1</span> || m &lt; <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        LinkedList&lt;Integer&gt; link = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            link.add(i);</span><br><span class="line">        <span class="keyword">int</span> index = -<span class="number">1</span>;   <span class="comment">//èµ·æ­¥æ˜¯ -1 ä¸æ˜¯ 0</span></span><br><span class="line">        <span class="keyword">while</span>(link.size() &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            index = (index + m) % link.size();  <span class="comment">//å¯¹ linkçš„é•¿åº¦æ±‚ä½™ä¸æ˜¯å¯¹ n</span></span><br><span class="line">            link.remove(index);</span><br><span class="line">            index --;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> link.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.17 æ’åºæ•°ç»„ä¸­æŸæ•°å­—å‡ºç°çš„æ¬¡æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bina</span><span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> len, <span class="keyword">int</span> data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a == <span class="literal">NULL</span> || len &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, r = len - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l &lt;= r) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(a[mid] == data) <span class="keyword">return</span> mid;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(data &lt; a[mid]) &#123;</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> l = mid+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-LinkedList"><a href="#2-LinkedList" class="headerlink" title="2. LinkedList"></a>2. LinkedList</h2><p><a href="https://www.weiweiblog.cn/linkedlist_summary/" target="_blank" rel="external">linkedlist_summary</a></p>
<p><strong>2.1 easy:</strong></p>
<blockquote>
<ol>
<li>åœ¨ O(1) æ—¶é—´åˆ é™¤é“¾è¡¨èŠ‚ç‚¹ï¼Œ âœ”ï¸</li>
<li>åˆ é™¤å•é“¾è¡¨å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹ï¼Œ âœ”ï¸</li>
<li>æ±‚å•é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ï¼Œ âœ”ï¸</li>
<li>åˆ¤æ–­å•é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯ï¼Œ âœ”ï¸</li>
<li>ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨, é€’å½’ ok.ï¼Œ âœ”ï¸</li>
<li>é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªç»“ç‚¹ ok.ï¼Œ âœ”ï¸</li>
<li>åˆ¤æ–­ä¸¤ä¸ªæ— ç¯å•é“¾è¡¨æ˜¯å¦ç›¸äº¤ï¼Œ âœ”ï¸</li>
<li>ä¸¤ä¸ªé“¾è¡¨ç›¸äº¤æ‰©å±•ï¼šæ±‚ä¸¤ä¸ªæ— ç¯å•é“¾è¡¨çš„ç¬¬ä¸€ä¸ªç›¸äº¤ç‚¹ï¼Œ âœ”ï¸</li>
<li>ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±ç»“ç‚¹  ï¼Œ âœ”ï¸   </li>
<li>æ—‹è½¬å•é“¾è¡¨</li>
</ol>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªå•é“¾è¡¨ï¼Œè®¾è®¡ä¸€ä¸ªç®—æ³•å®ç°é“¾è¡¨å‘å³æ—‹è½¬ K ä¸ªä½ç½®ã€‚<br>ä¸¾ä¾‹ï¼š ç»™å®š 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;6-&gt;NULL, K=3<br>åˆ™4-&gt;5-&gt;6-&gt;1-&gt;2-&gt;3-&gt;NULL</p>
</blockquote>
<p>ç¯è·¯çš„å…¥å£ç‚¹</p>
<blockquote>
<p>åœ¨ç¬¬ 4 é¢˜ä¸¤ä¸ªæŒ‡é’ˆç›¸é‡åï¼Œè®©å…¶ä¸­ä¸€ä¸ªæŒ‡é’ˆå›åˆ°é“¾è¡¨çš„å¤´éƒ¨ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆåœ¨åŸåœ°ï¼ŒåŒæ—¶å¾€å‰æ¯æ¬¡èµ°ä¸€æ­¥ï¼Œå½“å®ƒä»¬å†æ¬¡ç›¸é‡æ—¶ï¼Œå°±æ˜¯åœ¨ç¯è·¯çš„å…¥å£ç‚¹ã€‚</p>
</blockquote>
<p><strong>2.2 medium:</strong></p>
<blockquote>
<ol>
<li><a href="https://www.jianshu.com/p/bd6a64d36916" target="_blank" rel="external">åè½¬é“¾è¡¨</a> next=head-&gt;next, head-&gt;next=pre, pre=head, head=next; 4æ­¥ okï¼Œ âœ”ï¸</li>
<li>ç¿»è½¬éƒ¨åˆ†å•é“¾è¡¨ ä¸¾ä¾‹ï¼š1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;null, from = 2, to = 4 ç»“æœï¼š1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;null</li>
<li><a href="https://zhuanlan.zhihu.com/p/38888164" target="_blank" rel="external">å¤æ‚é“¾è¡¨çš„å¤åˆ¶</a> okï¼Œ âœ”ï¸</li>
<li>é“¾è¡¨åˆ’åˆ† ï¼ˆé¢˜ç›®æè¿°ï¼š ç»™å®šä¸€ä¸ªå•é“¾è¡¨å’Œæ•°å€¼xï¼Œåˆ’åˆ†é“¾è¡¨ä½¿å¾—å°äºxçš„èŠ‚ç‚¹æ’åœ¨å¤§äºç­‰äºxçš„èŠ‚ç‚¹ä¹‹å‰ï¼‰</li>
<li>å•é“¾è¡¨æ’åº</li>
<li>åˆå¹¶ä¸¤ä¸ªæˆ–kä¸ªæœ‰åºé“¾è¡¨  okï¼Œ é€’å½’ (ä¸‰å…ƒè¿ç®—ç¬¦).   </li>
<li>åˆ é™¤é“¾è¡¨é‡å¤ç»“ç‚¹  é“¾è¡¨1-&gt;2-&gt;3-&gt;3-&gt;4-&gt;4-&gt;5 å¤„ç†åä¸º 1-&gt;2-&gt;5. first-&gt;next=head, last, p ä¸‰é’ˆï¼Œ âœ”ï¸</li>
<li>é“¾è¡¨ä¸­ç¯çš„å…¥å£ç»“ç‚¹ï¼Œ âœ”ï¸     </li>
</ol>
</blockquote>
<p>å•é“¾è¡¨æ’åº or åˆå¹¶ä¸¤ä¸ªæˆ–kä¸ªæœ‰åºé“¾è¡¨</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> Node &#123; Node *next; <span class="keyword">int</span> value; &#125;; </span><br><span class="line"><span class="comment">/* ä½ ä¸€å®šè¦ç›¸ä¿¡é€’å½’æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ€æƒ³ */</span></span><br><span class="line"><span class="function">Node* <span class="title">mergeList</span><span class="params">(Node* head1, Node* head2)</span> </span>&#123; <span class="comment">// æœ‰åºé“¾è¡¨çš„åˆå¹¶</span></span><br><span class="line">    <span class="keyword">if</span>(head1 == <span class="literal">NULL</span>) <span class="keyword">return</span> head2;</span><br><span class="line">    <span class="keyword">if</span>(head2 == <span class="literal">NULL</span>) <span class="keyword">return</span> head1;</span><br><span class="line">    Node* tmp;</span><br><span class="line">    <span class="keyword">if</span>(head1-&gt;value &lt; head2-&gt;value) &#123;</span><br><span class="line">        tmp = head1;</span><br><span class="line">        head1 = head1-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        tmp = head2;</span><br><span class="line">        head2 = head2-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    tmp-&gt;next = mergeList(head1, head2);</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Node* <span class="title">mergeSort</span><span class="params">(Node* head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    Node* r_head = head;</span><br><span class="line">    Node* head1 = head;</span><br><span class="line">    Node* head2 = head;</span><br><span class="line">    <span class="keyword">while</span>(head2-&gt;next != <span class="literal">NULL</span> &amp;&amp; head2-&gt;next-&gt;next != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        head1 = head1-&gt;next;</span><br><span class="line">        head2 = head2-&gt;next-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(head1-&gt;next == <span class="literal">NULL</span>) <span class="keyword">return</span> r_head; <span class="comment">// åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">    head2 = head1-&gt;next;</span><br><span class="line">    head1 = head;</span><br><span class="line">    r_head = mergeList(mergeSort(head1), mergeSort(head2));</span><br><span class="line">    <span class="keyword">return</span> r_head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2.3 difficul:</strong></p>
<ol>
<li>é“¾è¡¨æ±‚å’Œ</li>
</ol>
<hr>
<p><strong>åè½¬é“¾è¡¨:</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    ListNode next = null;</span><br><span class="line">    ListNode pre = <span class="function">null</span><br><span class="line"></span><br><span class="line">    <span class="title">while</span> <span class="params">(head != null)</span> </span>&#123;</span><br><span class="line">        next = head.next; (ä¿å­˜å½“å‰å¤´ç»“ç‚¹çš„ä¸‹ä¸ªèŠ‚ç‚¹)</span><br><span class="line">        head.next = pre;  (å°†å½“å‰å¤´ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘â€œä¸Šä¸€ä¸ªèŠ‚ç‚¹â€ï¼Œè¿™ä¸€æ­¥æ˜¯å®ç°äº†åè½¬)</span><br><span class="line">        pre = head;       (å°†å½“å‰å¤´ç»“ç‚¹è®¾ç½®ä¸ºâ€œä¸Šä¸€ä¸ªèŠ‚ç‚¹â€)</span><br><span class="line">        head = next;      (å°†ä¿å­˜çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è®¾ç½®ä¸ºå¤´ç»“ç‚¹)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pre;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¤æ‚é“¾è¡¨çš„å¤åˆ¶:</strong></p>
<p><img src="https://pic2.zhimg.com/80/v2-995312b12e59f14c77f3572e9c94d4c5_hd.jpg" alt=""></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">public class RandomListNode &#123;</span><br><span class="line">    int label;</span><br><span class="line">    RandomListNode next = null;</span><br><span class="line">    RandomListNode random = null;</span><br><span class="line"></span><br><span class="line">    RandomListNode(int label) &#123;</span><br><span class="line">        this.label = label;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">*/</span></span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Solution &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> RandomListNode <span class="title">Clone</span><span class="params">(RandomListNode pHead)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pHead == null)</span><br><span class="line">            <span class="keyword">return</span> null;</span><br><span class="line">        <span class="comment">//å¤åˆ¶èŠ‚ç‚¹ A-&gt;B-&gt;C å˜æˆ A-&gt;A'-&gt;B-&gt;B'-&gt;C-&gt;C'</span></span><br><span class="line">        RandomListNode head = pHead;</span><br><span class="line">        <span class="keyword">while</span>(head != null)&#123;</span><br><span class="line">            RandomListNode node = <span class="keyword">new</span> RandomListNode(head.label);</span><br><span class="line">            node.next = head.next;</span><br><span class="line">            head.next = node;</span><br><span class="line">            head = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¤åˆ¶random</span></span><br><span class="line">        head = pHead;</span><br><span class="line">        <span class="keyword">while</span>(head != null)&#123;</span><br><span class="line">            head.next.random = head.random == null ? null : head.random.next;</span><br><span class="line">            head = head.next.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æŠ˜åˆ†</span></span><br><span class="line">        head = pHead;</span><br><span class="line">        RandomListNode chead = head.next;</span><br><span class="line">        <span class="keyword">while</span>(head != null)&#123;</span><br><span class="line">            RandomListNode node = head.next;</span><br><span class="line">            head.next = node.next;</span><br><span class="line">            node.next = node.next == null ? null : node.next.next;</span><br><span class="line">            head = head.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> chead;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>é“¾è¡¨åˆ’åˆ†ï¼š</strong></p>
<p>ç»™å®šä¸€ä¸ªå•é“¾è¡¨å’Œæ•°å€¼xï¼Œåˆ’åˆ†é“¾è¡¨ä½¿å¾—æ‰€æœ‰å°äºxçš„èŠ‚ç‚¹æ’åœ¨å¤§äºç­‰äºxçš„èŠ‚ç‚¹ä¹‹å‰ã€‚</p>
<p>ä½ åº”è¯¥ä¿ç•™ä¸¤éƒ¨åˆ†å†…é“¾è¡¨èŠ‚ç‚¹åŸæœ‰çš„ç›¸å¯¹é¡ºåºã€‚</p>
<p>æ ·ä¾‹<br>ç»™å®šé“¾è¡¨ 1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;2-&gt;nullï¼Œå¹¶ä¸” x=3<br>è¿”å›<strong> 1-&gt;2-&gt;2-&gt;4-&gt;3-&gt;5-&gt;null</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">partition</span><span class="params">(ListNode head, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// write your code here</span></span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        ListNode leftDummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode rightDummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode left = leftDummy, right = rightDummy;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (head != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (head.val &lt; x) &#123;</span><br><span class="line">                left.next = head;</span><br><span class="line">                left = head;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                right.next = head;</span><br><span class="line">                right = head;</span><br><span class="line">            &#125;</span><br><span class="line">            head = head.next;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        right.next = <span class="keyword">null</span>;</span><br><span class="line">        left.next = rightDummy.next;</span><br><span class="line">        <span class="keyword">return</span> leftDummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-String"><a href="#3-String" class="headerlink" title="3. String"></a>3. String</h2><p><a href="https://www.weiweiblog.cn/13string/" target="_blank" rel="external">13 é“é¢˜æå®š BAT é¢è¯•â€”â€”å­—ç¬¦ä¸²</a></p>
<p>å­—ç¬¦ä¸²</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">string</span> x;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">    sort(x.begin(), x.end());</span><br><span class="line">    reverse(x.begin(), x.end());</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3.1 easy:</strong></p>
<blockquote>
<ol>
<li>æ›¿æ¢ç©ºæ ¼ï¼Œ âœ”ï¸</li>
<li>åè½¬å­—ç¬¦ä¸² abcd -&gt; dcbaï¼Œ âœ”ï¸</li>
<li>ç¿»è½¬å•è¯é¡ºåºåˆ—ï¼Œ I am a student. -&gt; student. a am Iï¼Œ âœ”ï¸</li>
<li>æ—‹è½¬å­—ç¬¦ä¸²ï¼Œ abcde â€“2ä½â€“&gt; cdeab, è‹¥å¹²æ¬¡æ—‹è½¬æ“ä½œä¹‹åï¼ŒA èƒ½å˜æˆBï¼Œé‚£ä¹ˆè¿”å›Trueï¼Œ âœ”ï¸</li>
<li>å·¦æ—‹è½¬å­—ç¬¦ä¸² string LeftRotateString(string str, int n),string Reverse(string str)ï¼Œ âœ”ï¸</li>
</ol>
<p>åè½¬å­—ä¸²å•è¯ string ReverseSentence(string str), reverse(str.begin(), str.end()); in lib algorithm</p>
</blockquote>
<p><strong>3.2 medium</strong></p>
<blockquote>
<ol>
<li><a href="https://www.weiweiblog.cn/firstappearingonce/" target="_blank" rel="external">å­—ç¬¦æµä¸­ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦</a> (å“ˆå¸Œæ¥å­˜æ¯ä¸ªå­—ç¬¦åŠå…¶å‡ºç°çš„æ¬¡æ•°ï¼Œå¦ç”¨ä¸€å­—ç¬¦ä¸² s æ¥ä¿å­˜å­—ç¬¦æµä¸­å­—ç¬¦é¡ºåº)</li>
<li><a href="https://www.weiweiblog.cn/firstnotrepeatingchar/" target="_blank" rel="external">ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦</a></li>
<li>å­—ç¬¦ä¸²å…¨æ’åˆ— void res(char *str, char *pStr), scanf(â€œ%sâ€, str); #include &lt; utility> </li>
<li>å­—ç¬¦ä¸²è½¬æ•´å‹ int StrToInt(char* str)       ok</li>
<li>å­—ç¬¦ä¸²çš„æ’åˆ— (ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² s1 å’Œ s2ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ’åˆ—ä¹‹ä¸€æ˜¯ç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„å­ä¸²)</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    HashMap&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;Character, Integer&gt;();</span><br><span class="line">    StringBuffer s = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    <span class="comment">//Insert one char from stringstream</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">char</span> ch)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        s.append(ch);</span><br><span class="line">        <span class="keyword">if</span>(map.containsKey(ch))&#123;</span><br><span class="line">            map.put(ch, map.get(ch)+<span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            map.put(ch, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//return the first appearence once char in current stringstream</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">FirstAppearingOnce</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(map.get(s.charAt(i)) == <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> s.charAt(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'#'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3.2 difficult</strong></p>
<blockquote>
<ol>
<li>KMP ç®—æ³•</li>
<li>æœ€é•¿å…¬å…±å‰ç¼€</li>
<li>æœ€é•¿å›æ–‡ä¸² (3.1) éªŒè¯å›æ–‡ä¸² (3.2) æœ€é•¿å›æ–‡å­ä¸² (3.3) æœ€é•¿å›æ–‡å­åºåˆ—</li>
<li>è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²</li>
</ol>
<p>å‰‘æŒ‡offer: è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦</p>
<p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦è¡¨ç¤ºæ•°å€¼ï¼ˆåŒ…æ‹¬æ•´æ•°å’Œå°æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²â€+100â€³,â€5e2â€³,â€-123â€³,â€3.1416â€³å’Œâ€-1E-16â€³éƒ½è¡¨ç¤ºæ•°å€¼ã€‚ ä½†æ˜¯â€12eâ€,â€1a3.14â€³,â€1.2.3â€³,â€+-5â€³å’Œâ€12e+4.3â€³éƒ½ä¸æ˜¯ã€‚</p>
</blockquote>
<p><strong>3.1 easy code</strong></p>
<p>3.1.1 æ›¿æ¢ç©ºæ ¼</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=tail; i&gt;len &amp;&amp; i&gt;=<span class="number">0</span>; i--)&#123;</span><br><span class="line">    <span class="keyword">if</span>(str[len] == <span class="string">' '</span>) &#123;</span><br><span class="line">        str[i--] = <span class="string">'0'</span>;</span><br><span class="line">Â Â Â Â Â Â Â Â str[i--] = <span class="string">'2'</span>;</span><br><span class="line">Â Â Â Â Â Â Â Â str[i] = <span class="string">'%'</span>;</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â <span class="keyword">else</span> &#123;</span><br><span class="line">Â Â Â Â Â Â Â  str[i] = str[len];</span><br><span class="line">Â Â Â Â &#125;</span><br><span class="line">Â Â Â Â len--;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.1.4 æ—‹è½¬å­—ç¬¦ä¸²</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">rotateString</span><span class="params">(String A, String B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> A.length() == B.length() &amp;&amp; (A+A).contains(B);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.1.5 å·¦æ—‹è½¬å­—ç¬¦ä¸²</p>
<p>å­—ç¬¦åºåˆ—S=â€abcXYZdefâ€,è¦æ±‚è¾“å‡ºå¾ªç¯å·¦ç§»3ä½åçš„ç»“æœï¼Œå³â€œXYZdefabcâ€ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼ŸOKï¼Œæå®šå®ƒï¼</p>
<p>åœ¨ç¬¬ n ä¸ªå­—ç¬¦åé¢å°†åˆ‡ä¸€åˆ€ï¼Œå°†å­—ç¬¦ä¸²åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå†é‡æ–°å¹¶æ¥èµ·æ¥å³å¯ã€‚æ³¨æ„å­—ç¬¦ä¸²é•¿åº¦ä¸º 0 çš„æƒ…å†µã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">LeftRotateString</span><span class="params">(String str,<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = str.length();</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        n = n % len;</span><br><span class="line">        String s1 = str.substring(n, len);</span><br><span class="line">        String s2 = str.substring(<span class="number">0</span>, n);</span><br><span class="line">        <span class="keyword">return</span> s1+s2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3.2 medium code</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">res</span><span class="params">(<span class="keyword">char</span> *str, <span class="keyword">char</span> *pStr)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(*pStr == <span class="string">'\0'</span>) <span class="built_in">cout</span> &lt;&lt; str &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">char</span> *p = pStr; *p != <span class="string">'\0'</span>; ++p) &#123;</span><br><span class="line">        <span class="keyword">char</span> tmp = *p;</span><br><span class="line">        *p = *pStr;</span><br><span class="line">        *pStr = tmp;</span><br><span class="line">        res(str, pStr+<span class="number">1</span>);</span><br><span class="line">        tmp = *p;</span><br><span class="line">        *p = *pStr;</span><br><span class="line">        *pStr = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å­—ç¬¦æµä¸­ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦ C++</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">/<span class="keyword">class</span> Solution</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="comment">//Insert one char from stringstream</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// vectorç”¨æ¥è®°å½•å­—ç¬¦æµ</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; vec;</span><br><span class="line">    <span class="comment">// mapç”¨æ¥ç»Ÿè®¡å­—ç¬¦çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; table;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">char</span> ch)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        table[ch]++;</span><br><span class="line">        vec.push_back(ch);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//return the first appearence once char in current stringstream</span></span><br><span class="line">    <span class="function"><span class="keyword">char</span> <span class="title">FirstAppearingOnce</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="comment">// éå†å­—ç¬¦æµï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸º1çš„å­—ç¬¦</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c : vec) &#123;</span><br><span class="line">            <span class="keyword">if</span> (table[c] == <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">'#'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å­—ç¬¦æµä¸­ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦ Java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    HashMap&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;Character, Integer&gt;();</span><br><span class="line">    StringBuffer s = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">    <span class="comment">//Insert one char from stringstream    </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Insert</span><span class="params">(<span class="keyword">char</span> ch)</span>    </span>&#123;</span><br><span class="line">        s.append(ch);</span><br><span class="line">        <span class="keyword">if</span>(map.containsKey(ch))&#123;</span><br><span class="line">            map.put(ch, map.get(ch)+<span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            map.put(ch, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//return the first appearence once char in current stringstream    </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">FirstAppearingOnce</span><span class="params">()</span>    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(map.get(s.charAt(i)) == <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">return</span> s.charAt(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'#'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-Binary-Tree"><a href="#4-Binary-Tree" class="headerlink" title="4. Binary Tree"></a>4. Binary Tree</h2><ul>
<li><a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">ç®—æ³•&amp;æ•°æ®ç»“æ„ ï¼Œ 20Tree</a></li>
</ul>
<p><img src="/images/icpc/BinaryTree-1.png" width="450"></p>
<p><strong>4.1 easy</strong></p>
<blockquote>
<ol>
<li>é€’å½’ï¼š <a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">æ±‚äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°</a> ï¼Œ <strong>âœ”ï¸</strong></li>
<li>é€’å½’ï¼š <a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">æ±‚äºŒå‰æ ‘çš„æœ€å¤§å±‚æ•°(æœ€å¤§æ·±åº¦) &amp; (æœ€å°æ·±åº¦)</a> æœ€å°æ·±åº¦ç‰¹æ®Šæƒ…å†µï¼šleft || right==0 ï¼Œ âœ”ï¸</li>
<li>é€’å½’ï¼š <a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„èŠ‚ç‚¹ä¸ªæ•°</a> get_k(root.left, k-1) + get_k(root.right, k-1); good ï¼Œ âœ”ï¸</li>
<li>é€’å½’ï¼š <a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">æ±‚äºŒå‰æ ‘ç¬¬Kå±‚çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°</a> if(k==1 and root.left and root.right is null) return 1; ï¼Œ âœ”ï¸</li>
<li>é€’å½’ï¼š <a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">äºŒå‰æ ‘å…ˆåºéå†/å‰åºéå†</a>  (fIno(Node* root) { while(1) {if else}</li>
<li>é€’å½’ï¼š <a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">åˆ¤æ–­ä¸¤æ£µäºŒå‰æ ‘æ˜¯å¦ç»“æ„ç›¸åŒ</a> ï¼Œ âœ”ï¸</li>
<li>é€’å½’ï¼š <a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">æ±‚äºŒå‰æ ‘çš„é•œåƒï¼ˆåè½¬äºŒå‰æ ‘ï¼‰</a> ï¼Œ ï¼ˆå·¦å³é€’å½’äº¤æ¢ï¼‰âœ”ï¸ </li>
<li>é€’å½’ï¼š <a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">å¯¹ç§°äºŒå‰æ ‘</a> ï¼ˆåŒå‡½æ•°ï¼Œæ‰¿æ¥ä¸Šé¢˜äºŒå‰æ ‘çš„é•œåƒï¼Œ goodï¼‰ ï¼Œ âœ”ï¸</li>
<li>é€’å½’ï¼š <a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">æ±‚äºŒå‰æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€ä½å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ good</a> ï¼Œ âœ”ï¸</li>
<li>é€’å½’ï¼š <a href="https://www.weiweiblog.cn/20tree/" target="_blank" rel="external">æ±‚äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ good</a> ï¼Œ âœ”ï¸</li>
<li>é€’å½’ï¼š æ ¹æ®å‰åºå’Œä¸­åºé‡å»ºäºŒå‰æ ‘ ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<p>åŒå‡½æ•°ï¼Œé€’å½’</p>
<blockquote>
<ol>
<li>æ ‘çš„å­ç»“æ„,éå†+åˆ¤æ–­, bool f5(Node* root1, Node* root2), bool son(Node* p1, Node* p2)  ï¼Œ âœ”ï¸</li>
<li>åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘ bool isBalance(Node* root)ï¼Œ int maxHigh(Node* root)  ï¼Œ âœ”ï¸</li>
<li>æ±‚äºŒå‰æ ‘çš„ç›´å¾„ ï¼ˆç›´å¾„é•¿åº¦æ˜¯ä»»æ„ä¸¤ä¸ªç»“ç‚¹è·¯å¾„é•¿åº¦ä¸­çš„æœ€å¤§å€¼ï¼‰ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<p><strong>4.2 medium</strong></p>
<blockquote>
<ol>
<li>åˆ†å±‚éå† (åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘) ï¼ˆéå†åˆ°äº†NULLç»“ç‚¹ï¼Œå¦‚åç»­è¿˜æœ‰éNULLç»“ç‚¹ï¼‰ï¼Œ âœ”ï¸</li>
<li>åˆ†å±‚éå† (è‡ªä¸‹è€Œä¸Šåˆ†å±‚éå†) bfs + vector&lt; vector &lt; int &gt; &gt;ï¼Œ âœ”ï¸</li>
<li>åˆ†å±‚éå† (æŒ‰ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘)ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<p><strong>4.3 difficult:</strong></p>
<blockquote>
<ol>
<li>äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„ void f4(Node* root, int exSum, int curSum, vecotr\&lt; int >&amp; path)ï¼Œ âœ”ï¸</li>
<li><a href="https://blog.csdn.net/libin1105/article/details/48422299" target="_blank" rel="external">äºŒå‰æ ‘ä¸‹ä¸€ç»“ç‚¹:3æƒ…å†µ</a>  (1.æœ‰right.child 2.æ²¡æœ‰right.child,çˆ¶left.child 3.æ²¡æœ‰right.child,çˆ¶right.child)âœ”ï¸    </li>
<li>åºåˆ—åŒ–äºŒå‰æ ‘ï¼Œ String serialize(TreeNode root), TreeNode deserialize(String data) Queue<string> queue = new LinkedList&lt;&gt;(); âœ”ï¸      </string></li>
<li>äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ— bool f6(int* sec, int len)ï¼Œ âœ”ï¸  </li>
<li>äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨ void convert(Node* root, Node*&amp; pLast) ï¼Œ âœ”ï¸   </li>
<li>äºŒå‰æœç´¢æ ‘çš„ç¬¬kä¸ªç»“ç‚¹ ï¼Œ âœ”ï¸</li>
<li><a href="https://blog.csdn.net/xiaoxiaoxuanao/article/details/61918125" target="_blank" rel="external">äºŒå‰æŸ¥æ‰¾æ ‘èŠ‚ç‚¹çš„åˆ é™¤</a>.  é‡è¦</li>
</ol>
</blockquote>
<p><strong>4.1 easy code</strong></p>
<p>4.1.9 äºŒå‰æ ‘ä¸¤èŠ‚ç‚¹çš„æœ€ä½å…¬å…±ç¥–å…ˆ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> Node &#123;</span><br><span class="line">    Node* lchild;</span><br><span class="line">    Node* rchild;</span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">    Node(): value(<span class="number">0</span>), lchild(<span class="literal">NULL</span>), rchild(<span class="literal">NULL</span>) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node*&gt; vec1;</span><br><span class="line"><span class="built_in">vector</span>&lt;Node*&gt; vec2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"></span><br><span class="line">  1. æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹1ï¼Œå¯»æ‰¾è·¯å¾„ï¼Œå­˜æ”¾åœ¨ vec1 ä¸­.</span><br><span class="line">  2. æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹2ï¼Œå¯»æ‰¾è·¯å¾„ï¼Œå­˜æ”¾åœ¨ vec2 ä¸­.</span><br><span class="line">  3. åŒæ—¶éå† 2 ä¸ª </span><br><span class="line"></span><br><span class="line">*/</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">getNodePath</span><span class="params">(Node* root, Node* target, <span class="built_in">vector</span>&lt;Node*&gt;&amp; vec)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == NULl) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    vec.push_back(root);</span><br><span class="line">    <span class="keyword">if</span> (root == target) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    flag = getNodePath(root-&gt;lchild, target, vec)</span><br><span class="line">    <span class="keyword">if</span> (!flag &amp;&amp; root-&gt;rchild) &#123;</span><br><span class="line">        flag = getNodePath(root-&gt;rchild, target, vec)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">        vec.pop_back();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Node* <span class="title">getCom</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;Node*&gt;&amp; v1,  <span class="keyword">const</span> <span class="built_in">vector</span>&lt;Node*&gt;&amp; v2)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Node*&gt;::const_iterator it1 = v1.begin();</span><br><span class="line">    <span class="built_in">vector</span>&lt;Node*&gt;::const_iterator it2 = v2.begin();</span><br><span class="line">    </span><br><span class="line">    Node* pLast = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (it1 != v1.end() &amp;&amp; it2 != v2.end()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (*it1 != *it2) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pLast = *it1;</span><br><span class="line">        it1++;</span><br><span class="line">        it2++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pLast;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    retunr <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.1.10 æ±‚äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Node* <span class="title">lowestCommonAncestor</span><span class="params">(Node* root, Node* p, Node* q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">NULL</span> || p == <span class="literal">NULL</span> || q == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (root-&gt;value &gt; p-&gt;value &amp;&amp; root &gt; q-&gt;value) &#123;</span><br><span class="line">        <span class="keyword">return</span> lowestCommonAncestor(root-&gt;lchild, p, q);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (root-&gt;value &lt; p-&gt;value &amp;&amp; root &lt; q-&gt;value) &#123;</span><br><span class="line">        <span class="keyword">return</span> lowestCommonAncestor(root-&gt;rchild, p, q);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.1.11 å‰åºä¸­åºé‡å»ºäºŒå‰æ ‘</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Node* <span class="title">f3</span><span class="params">(<span class="keyword">int</span>* pre, <span class="keyword">int</span>* ino, <span class="keyword">int</span> len)</span> </span>&#123; <span class="comment">// pre : 1, 2, 4, 7, 3, 5, 6, 8  ino : 4, 7, 2, 1, 5, 3, 8, 6</span></span><br><span class="line">    <span class="keyword">if</span>(pre == <span class="literal">NULL</span> || ino == <span class="literal">NULL</span> || len &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">int</span> r_v = pre[<span class="number">0</span>];</span><br><span class="line">    Node* root = <span class="keyword">new</span> Node();</span><br><span class="line">    root-&gt;value = r_v;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; ; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(ino[i] == r_v) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    root-&gt;lchild = f3(pre+<span class="number">1</span>, ino, i);</span><br><span class="line">    root-&gt;rchild = f3(pre+i+<span class="number">1</span>, ino+i+<span class="number">1</span>, len<span class="number">-1</span>-i);</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒå‡½æ•° + é€’å½’</p>
<p>4.1.12 æ ‘2æ˜¯å¦æ˜¯æ ‘1çš„å­ç»“æ„</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">son</span><span class="params">(Node* p1, Node* p2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (p2 == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p1 == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p1-&gt;value == p2-&gt;value) &#123;</span><br><span class="line">        <span class="keyword">return</span> son(p1-&gt;lchild, p2-lchild);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">son_tree</span><span class="params">(Node* root1, Node* root2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root2 == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root1 == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (root1-&gt;value == root2-&gt;child) &#123;</span><br><span class="line">        <span class="keyword">return</span> son(root1, root2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span></span><br><span class="line">    flag = son_tree(root1-&gt;lchild, root2);</span><br><span class="line">    <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">        <span class="keyword">return</span> son_tree(root1-&gt;rchild, root2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.1.13 å¹³è¡¡äºŒå‰æ ‘</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isBalanced</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> (<span class="number">-1</span> &lt;= (maxHigh(root-&gt;lchild) - maxHigh(root-&gt;rchild)) &lt;= <span class="number">1</span>)</span><br><span class="line">        &amp;&amp; isBalanced(root-&gt;lchild) &amp;&amp; isBalanced(root-&gt;lchild);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">maxHigh</span><span class="params">(Node* root)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> max(maxHigh(root-&gt;lchild), maxHigh(root-&gt;rchild))+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.1.14 æ±‚äºŒå‰æ ‘çš„ç›´å¾„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">diamHelper</span><span class="params">(TreeNode root)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> left = diamHelper(root.left);</span><br><span class="line">    <span class="keyword">int</span> right = diamHelper(root.right);</span><br><span class="line">    path = Math.max(path, left + right);</span><br><span class="line">    <span class="keyword">return</span> Math.max(left, right) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4.2 medium code</strong></p>
<p>4.2.1 åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘ </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">checkCompleteTree</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">queue</span>&lt;Node*&gt; q;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root == null)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    q.push(root);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">while</span>(!q.empty())&#123;  </span><br><span class="line">         <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; q.size(); ++i) &#123;  </span><br><span class="line">             Node* tmp = q.front();</span><br><span class="line">             q.pop();</span><br><span class="line">            </span><br><span class="line">             <span class="keyword">if</span> (tmp-&gt;lchild == <span class="literal">NULL</span> &amp;&amp; tmp-&gt;rchild != <span class="literal">NULL</span>)&#123;</span><br><span class="line">                 flag = <span class="literal">false</span>;</span><br><span class="line">                 <span class="keyword">break</span>;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">if</span> (tmp-&gt;left != <span class="literal">NULL</span>)</span><br><span class="line">                 que.push(tmp-&gt;left);</span><br><span class="line">             <span class="keyword">if</span> (tmp-&gt;right != <span class="literal">NULL</span>)</span><br><span class="line">                 que.push(tmp-&gt;right);</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.2.2 åˆ†å±‚éå† (è‡ªä¸‹è€Œä¸Šåˆ†å±‚éå†) </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; bfs(Node* root) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span> &lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &gt; ans;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">queue</span>&lt;Node*&gt; q;</span><br><span class="line">    </span><br><span class="line">    q.push(root);</span><br><span class="line"></span><br><span class="line">     <span class="keyword">while</span>(!q.empty()) &#123;  </span><br><span class="line">     </span><br><span class="line">         <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tv;</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; q.size(); ++i) &#123;  </span><br><span class="line">             Node* tmp = q.front();</span><br><span class="line">             q.pop();</span><br><span class="line">             <span class="keyword">if</span> (tmp-&gt;lchild == <span class="literal">NULL</span> &amp;&amp; tmp-&gt;rchild != <span class="literal">NULL</span>)&#123;</span><br><span class="line">                 flag = <span class="literal">false</span>;</span><br><span class="line">                 <span class="keyword">break</span>;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">if</span> (tmp-&gt;left != <span class="literal">NULL</span>)</span><br><span class="line">                 que.push(tmp-&gt;left);</span><br><span class="line">             <span class="keyword">if</span> (tmp-&gt;right != <span class="literal">NULL</span>)</span><br><span class="line">                 que.push(tmp-&gt;right);</span><br><span class="line">             </span><br><span class="line">             tv.push_back(tmp-&gt;value);</span><br><span class="line">         &#125;</span><br><span class="line">         ans.push_back(tv)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// reverse(res[i].begin(), res[i].end());</span></span><br></pre></td></tr></table></figure>
<p><strong>4.3 difficult code</strong></p>
<p>4.3.1 äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f4</span><span class="params">(Node*, <span class="keyword">int</span>, <span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f4</span><span class="params">(Node* root, <span class="keyword">int</span> exSum)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; V;</span><br><span class="line">    <span class="keyword">int</span> curSum = <span class="number">0</span>;</span><br><span class="line">    f4(root, exSum, curSum, V);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f4</span><span class="params">(Node* root, <span class="keyword">int</span> exSum, <span class="keyword">int</span> curSum, vecotr&lt;<span class="keyword">int</span>&gt;&amp; path)</span> </span>&#123;</span><br><span class="line">    curSum += root-&gt;value;</span><br><span class="line">    path.push_back(root-&gt;value);</span><br><span class="line">    <span class="keyword">if</span>(curSum == exSum &amp;&amp; root-&gt;lchild == <span class="literal">NULL</span> &amp;&amp; root-&gt;rchild == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="comment">//; æ‰“å°vectorä¸­çš„è·¯å¾„</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(root-&gt;lchild) f4(root-&gt;lchild, exSum, curSum, path);</span><br><span class="line">    <span class="keyword">if</span>(root-&gt;rchild) f4(root-&gt;rchild, exSum, curSum, path);</span><br><span class="line">    curSum -= root-&gt;value;</span><br><span class="line">    path.pop_back();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.3.3 åºåˆ—åŒ–äºŒå‰æ ‘</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">serialize</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"#,"</span>;</span><br><span class="line">    StringBuffer res = <span class="keyword">new</span> StringBuffer(root.val + <span class="string">","</span>);</span><br><span class="line">    res.append(serialize(root.left));</span><br><span class="line">    res.append(serialize(root.right));</span><br><span class="line">    <span class="keyword">return</span> res.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Decodes your encoded data to tree.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">deserialize</span><span class="params">(String data)</span> </span>&#123;</span><br><span class="line">    String [] d = data.split(<span class="string">","</span>);</span><br><span class="line">    Queue&lt;String&gt; queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; d.length; i++)&#123;</span><br><span class="line">        queue.offer(d[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pre(queue);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">pre</span><span class="params">(Queue&lt;String&gt; queue)</span></span>&#123;</span><br><span class="line">    String val = queue.poll();</span><br><span class="line">    <span class="keyword">if</span>(val.equals(<span class="string">"#"</span>))</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    TreeNode node = <span class="keyword">new</span> TreeNode(Integer.parseInt(val));</span><br><span class="line">    node.left = pre(queue);</span><br><span class="line">    node.right = pre(queue);</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.3.4 äºŒå‰æœç´¢æ ‘ååºéå†çš„ç»“æœ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">f6</span><span class="params">(<span class="keyword">int</span>* sec, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sec == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(len &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">int</span> i, rv = sec[len<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(sec[i] &gt; rv) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt; len<span class="number">-1</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(sec[j] &lt; rv) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f6(sec, i) &amp;&amp; f6(sec+i, len-i<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.3.5 äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨</p>
<p><img src="https://pic4.zhimg.com/80/v2-dfed873e672f0cb9aa0f6cd729fc19df_hd.jpg" alt=""></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">convert</span><span class="params">(Node* root, Node*&amp; pLast)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="literal">NULL</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(root-&gt;lchild) convert(root-&gt;lchild, pLast);</span><br><span class="line">    </span><br><span class="line">    Node* pCur = root;</span><br><span class="line">    pCur-&gt;lchild = pLast;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(pLast) pLast-&gt;rchild = pCur;</span><br><span class="line">    pLast = pCur;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(root-&gt;rchild) convert(root-&gt;rchild, pLast);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.3.6 äºŒå‰æœç´¢æ ‘çš„ç¬¬kä¸ªç»“ç‚¹</p>
<p>ç»™å®šä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­çš„ç¬¬kå°çš„ç»“ç‚¹ã€‚ä¾‹å¦‚ï¼Œ ï¼ˆ5ï¼Œ3ï¼Œ7ï¼Œ2ï¼Œ4ï¼Œ6ï¼Œ8ï¼‰ä¸­ï¼ŒæŒ‰ç»“ç‚¹æ•°å€¼å¤§å°é¡ºåºç¬¬ä¸‰å°ç»“ç‚¹çš„å€¼ä¸º4ã€‚</p>
<p>å› ä¸ºäºŒå‰æœç´¢æ ‘æŒ‰ç…§ä¸­åºéå†çš„é¡ºåºæ‰“å°å‡ºæ¥å°±æ˜¯æ’å¥½åºçš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸­åºéå†æ‰¾åˆ°ç¬¬kä¸ªç»“ç‚¹å°±æ˜¯é¢˜ç›®æ‰€æ±‚çš„ç»“ç‚¹ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> Solution &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">kthSmallest</span><span class="params">(TreeNode root, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == null)</span><br><span class="line">             <span class="keyword">return</span> Integer.MIN_VALUE;</span><br><span class="line">        Stack&lt;TreeNode&gt; <span class="built_in">stack</span> = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        TreeNode p = root;</span><br><span class="line">        <span class="keyword">while</span>(p != null || !<span class="built_in">stack</span>.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">if</span>(p != null)&#123;</span><br><span class="line">                <span class="built_in">stack</span>.push(p);</span><br><span class="line">                p = p.left;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                TreeNode node = <span class="built_in">stack</span>.pop();</span><br><span class="line">                count ++;</span><br><span class="line">                <span class="keyword">if</span>(count == k)</span><br><span class="line">                    <span class="keyword">return</span> node.val;</span><br><span class="line">                p = node.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Integer.MIN_VALUE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-é€’å½’-å›æº¯"><a href="#5-é€’å½’-å›æº¯" class="headerlink" title="5. é€’å½’ / å›æº¯"></a>5. é€’å½’ / å›æº¯</h2><h3 id="5-1-æ–æ³¢æ‹‰å¥‘"><a href="#5-1-æ–æ³¢æ‹‰å¥‘" class="headerlink" title="5.1 æ–æ³¢æ‹‰å¥‘"></a>5.1 æ–æ³¢æ‹‰å¥‘</h3><blockquote>
<ol>
<li>æ–æ³¢æ‹‰å¥‘æ•°åˆ— &amp; è·³å°é˜¶ &amp; å˜æ€è·³å°é˜¶  2 * Fib(n-1).  ï¼Œ âœ”ï¸ </li>
<li>çŸ©å½¢è¦†ç›–  ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<h3 id="5-2-å›æº¯"><a href="#5-2-å›æº¯" class="headerlink" title="5.2 å›æº¯"></a>5.2 å›æº¯</h3><blockquote>
<ol>
<li><a href="https://www.weiweiblog.cn/haspath/" target="_blank" rel="external">çŸ©é˜µä¸­çš„è·¯å¾„(BFS)</a>   </li>
<li><a href="https://www.weiweiblog.cn/movingcount/" target="_blank" rel="external">æœºå™¨äººçš„è¿åŠ¨èŒƒå›´(DFS)</a></li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span> threshold, <span class="keyword">int</span> rows, <span class="keyword">int</span> cols, <span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span>[][] flag)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i&lt;<span class="number">0</span> || j&lt;<span class="number">0</span> || i&gt;=rows || j&gt;=cols || sum(i)+sum(j) &gt; threshold || flag[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    flag[i][j] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + count(threshold, rows, cols, i - <span class="number">1</span>, j, flag) + </span><br><span class="line">        count(threshold, rows, cols, i + <span class="number">1</span>, j, flag) +</span><br><span class="line">        count(threshold, rows, cols, i, j - <span class="number">1</span>, flag) +</span><br><span class="line">        count(threshold, rows, cols, i, j + <span class="number">1</span>, flag);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-3-ä½è¿ç®—"><a href="#5-3-ä½è¿ç®—" class="headerlink" title="5.3 ä½è¿ç®—"></a>5.3 ä½è¿ç®—</h3><blockquote>
<ol>
<li>äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°  n &amp; n-1.ï¼Œ âœ”ï¸   </li>
<li>æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹ dp.   ï¼Œ âœ”ï¸</li>
<li>æ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— ok.  ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<h2 id="6-Stack-amp-Queue-amp-heap"><a href="#6-Stack-amp-Queue-amp-heap" class="headerlink" title="6. Stack &amp; Queue &amp; heap"></a>6. Stack &amp; Queue &amp; heap</h2><p><a href="https://www.weiweiblog.cn/ispoporder/" target="_blank" rel="external">Stack &amp; Queue</a></p>
<blockquote>
<ol>
<li><strong><code>ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</code></strong> ï¼Œ âœ”ï¸</li>
<li><strong><code>åŒ…å«minå‡½æ•°çš„æ ˆ</code></strong> ï¼Œ âœ”ï¸</li>
<li><a href="https://www.weiweiblog.cn/ispoporder/" target="_blank" rel="external">æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—</a></li>
</ol>
</blockquote>
<h3 id="6-1-ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—"><a href="#6-1-ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—" class="headerlink" title="6.1 ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—"></a>6.1 ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyQueue</span> </span>&#123;</span><br><span class="line">    Stack&lt;Integer&gt; input = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">    Stack&lt;Integer&gt; output = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">    <span class="comment">/** Push element x to the back of queue. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        input.push(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Removes the element from in front of queue and returns that element. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        peek();</span><br><span class="line">        <span class="keyword">return</span> output.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Get the front element. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(output.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">while</span>(!input.isEmpty())</span><br><span class="line">                output.push(input.pop());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> output.peek();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Returns whether the queue is empty. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> input.isEmpty() &amp;&amp; output.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-åŒ…å«minå‡½æ•°çš„æ ˆ"><a href="#6-2-åŒ…å«minå‡½æ•°çš„æ ˆ" class="headerlink" title="6.2 åŒ…å«minå‡½æ•°çš„æ ˆ"></a>6.2 åŒ…å«minå‡½æ•°çš„æ ˆ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinStack</span> </span>&#123;</span><br><span class="line">    Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">    Stack&lt;Integer&gt; temp = <span class="keyword">new</span> Stack&lt;Integer&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        stack.push(x);</span><br><span class="line">        <span class="keyword">if</span>(temp.isEmpty() || temp.peek() &gt;= x)</span><br><span class="line">            temp.push(x);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x = stack.pop();</span><br><span class="line">        <span class="keyword">int</span> min = temp.peek();</span><br><span class="line">        <span class="keyword">if</span>(x == min)</span><br><span class="line">            temp.pop();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">top</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stack.peek();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> temp.peek();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-3-æ ˆçš„-push-pop-åºåˆ—"><a href="#6-3-æ ˆçš„-push-pop-åºåˆ—" class="headerlink" title="6.3 æ ˆçš„ push pop åºåˆ—"></a>6.3 æ ˆçš„ push pop åºåˆ—</h3><p>æ ˆçš„ push pop åºåˆ—<br>1 2 3 4 5<br>4 3 5 1 2</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">IsPopOrder</span><span class="params">(<span class="keyword">int</span> [] pushA, <span class="keyword">int</span> [] popA)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(pushA.length != popA.length || </span><br><span class="line">               pushA.length == <span class="number">0</span> ||</span><br><span class="line">               popA.length == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pushA.length; i++)&#123;</span><br><span class="line">            stack.push(pushA[i]);</span><br><span class="line">            <span class="keyword">while</span>(!stack.empty() &amp;&amp; stack.peek() == popA[index])&#123;</span><br><span class="line">                stack.pop();</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.empty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-PriorityQueue"><a href="#7-PriorityQueue" class="headerlink" title="7. PriorityQueue"></a>7. PriorityQueue</h2><blockquote>
<ol>
<li><a href="https://www.weiweiblog.cn/getleastnumbers_solution/" target="_blank" rel="external">æœ€å°çš„Kä¸ªæ•°</a></li>
<li>æ•°æ®æµä¸­çš„ç¬¬Kå¤§å…ƒç´ </li>
<li>æ»‘åŠ¨çª—å£æœ€å¤§å€¼</li>
<li>å‰Kä¸ªé«˜é¢‘å•è¯</li>
</ol>
</blockquote>
<ul>
<li><a href="https://www.jianshu.com/p/1bedaee726da" target="_blank" rel="external">ä¼˜å…ˆé˜Ÿåˆ—</a></li>
</ul>
<h2 id="8-Dynamic-Programming"><a href="#8-Dynamic-Programming" class="headerlink" title="8. Dynamic Programming"></a>8. Dynamic Programming</h2><blockquote>
<ol>
<li>çˆ¬æ¥¼æ¢¯ ï¼Œ âœ”ï¸</li>
<li>ä¸åŒè·¯å¾„ II ï¼Œ âœ”ï¸</li>
<li>ç¼–è¾‘è·ç¦» ï¼Œ âœ”ï¸</li>
</ol>
</blockquote>
<p>ä¸åŒè·¯å¾„ II</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1782258-9dbebab909d4a555.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400/format/webp" alt=""></p>
<blockquote>
<p>å¦‚æœå½“å‰æ²¡æœ‰éšœç¢ç‰©ï¼Œdp[m][n] = dp[m - 1][n] + dp[m][n - 1]<br>å¦‚æœæœ‰éšœç¢ç‰©ï¼Œåˆ™dp[m][n] = 0</p>
</blockquote>
<p>ç¼–è¾‘è·ç¦»</p>
<blockquote>
<p>å¦‚æœå•è¯1ç¬¬i+1ä¸ªå­—ç¬¦å’Œå•è¯2ç¬¬j+1ä¸ªå­—ç¬¦ç›¸åŒï¼Œé‚£ä¹ˆå°±ä¸ç”¨æ“ä½œï¼Œåˆ™DP[i + 1][j + 1] = DP[i][j];</p>
<p>å¦‚æœä¸ç›¸åŒ,åˆ™æœ‰ä¸‰ç§å¯èƒ½æ“ä½œï¼Œå³å¢ï¼Œåˆ ï¼Œæ›¿æ¢ã€‚åˆ™å–è¿™ä¸‰ç§æ“ä½œçš„æœ€ä¼˜å€¼ï¼Œå³dp[i + 1][j + 1] = 1 + Math.min(dp[i][j], Math.min(dp[i][j + 1], dp[i + 1][j]));</p>
</blockquote>
<h3 id="8-1-ä¸€ç»´DP"><a href="#8-1-ä¸€ç»´DP" class="headerlink" title="8.1 ä¸€ç»´DP"></a>8.1 ä¸€ç»´DP</h3><blockquote>
<ol>
<li><strong>è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ</strong>   // dp: F[i] = max(a[i], F[i-1]+a[i]);</li>
</ol>
</blockquote>
<h3 id="8-2-äºŒç»´DP"><a href="#8-2-äºŒç»´DP" class="headerlink" title="8.2 äºŒç»´DP"></a>8.2 äºŒç»´DP</h3><p><strong>å¸ƒå°”æ•°ç»„</strong></p>
<blockquote>
<ol>
<li>Longest Palindromic Substring/æœ€é•¿å›æ–‡å­ä¸² ç»™å‡ºä¸€ä¸ªå­—ç¬¦ä¸²Sï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ€é•¿çš„è¿ç»­å›æ–‡ä¸²ã€‚</li>
<li>Interleaving String/äº¤é”™å­—ç¬¦ä¸² è¾“å…¥ä¸‰ä¸ªå­—ç¬¦ä¸²s1ã€s2å’Œs3ï¼Œåˆ¤æ–­ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²s3æ˜¯å¦ç”±å‰ä¸¤ä¸ªå­—ç¬¦ä¸²s1å’Œs2äº¤æ›¿è€Œæˆä¸”ä¸æ”¹å˜s1å’Œs2ä¸­å„ä¸ªå­—ç¬¦åŸæœ‰çš„ç›¸å¯¹é¡ºåºã€‚</li>
</ol>
</blockquote>
<p><strong>æ•°å­—æ•°ç»„</strong></p>
<blockquote>
<ol>
<li><a href="https://blog.csdn.net/yuanliang861/article/details/83514372" target="_blank" rel="external">Unique Paths II/ä¸åŒè·¯å¾„</a> (åˆå§‹åŒ–å¾ˆé‡è¦) ï¼Œ èµ·ç‚¹åˆ°ç»ˆç‚¹æœ‰å¤šå°‘æ¡ä¸åŒè·¯å¾„ï¼Œå‘å³æˆ–å‘ä¸‹èµ°ã€‚</li>
<li><a href="https://www.cnblogs.com/grandyang/p/4353255.html" target="_blank" rel="external">Minimum Path Sum</a> çŸ©é˜µå·¦ä¸Šè§’å‡ºå‘åˆ°å³ä¸‹è§’ï¼Œåªèƒ½å‘å³æˆ–å‘ä¸‹èµ°ï¼Œæ‰¾å‡ºå“ªä¸€æ¡è·¯å¾„ä¸Šçš„æ•°å­—ä¹‹å’Œæœ€å°ã€‚</li>
<li>Edit Distance/ç¼–è¾‘è·ç¦» æ±‚ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„æœ€çŸ­ç¼–è¾‘è·ç¦»ï¼Œå³åŸæ¥çš„å­—ç¬¦ä¸²è‡³å°‘è¦ç»è¿‡å¤šå°‘æ¬¡æ“ä½œæ‰èƒ½å¤Ÿå˜æˆç›®æ ‡å­—ç¬¦ä¸²ï¼Œæ“ä½œåŒ…æ‹¬åˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€æ’å…¥ä¸€ä¸ªå­—ç¬¦ã€æ›´æ–°ä¸€ä¸ªå­—ç¬¦ã€‚</li>
<li>Distinct Subsequences/ä¸åŒå­åºåˆ— ç»™å®šSå’ŒTä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œé—®æŠŠé€šè¿‡åˆ é™¤Sä¸­çš„æŸäº›å­—ç¬¦ï¼ŒæŠŠSå˜ä¸ºTæœ‰å‡ ç§æ–¹æ³•ï¼Ÿ</li>
</ol>
<p>è¡¥å……ï¼šäº¬ä¸œ2019å®ä¹ ç¼–ç¨‹é¢˜-åˆ é™¤0æˆ–éƒ¨åˆ†å­—ç¬¦ä½¿å…¶æˆä¸ºå›æ–‡ä¸² è§ç¬”è¯•æ•´ç†æ€»ç»“</p>
</blockquote>
<h3 id="8-3-ä¸‰ç»´DP"><a href="#8-3-ä¸‰ç»´DP" class="headerlink" title="8.3 ä¸‰ç»´DP"></a>8.3 ä¸‰ç»´DP</h3><h2 id="9-å‰‘æŒ‡offer"><a href="#9-å‰‘æŒ‡offer" class="headerlink" title="9. å‰‘æŒ‡offer"></a>9. å‰‘æŒ‡offer</h2><p><a href="https://www.weiweiblog.cn/category/ç®—æ³•å­¦ä¹ /page/5/" target="_blank" rel="external">ç®—æ³•å­¦ä¹ 5</a></p>
<ol>
<li>æ•°æ®æµä¸­çš„ä¸­ä½æ•°</li>
<li>æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼ (åŒå‘é˜Ÿåˆ—)</li>
<li><a href="https://www.weiweiblog.cn/match/" target="_blank" rel="external">æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</a></li>
<li><a href="https://www.weiweiblog.cn/power/" target="_blank" rel="external">æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹</a></li>
<li><a href="https://www.weiweiblog.cn/findfirstcommonnode/" target="_blank" rel="external">ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ï¼ˆ2ä¸ªstack or é•¿çŸ­é“¾è¡¨ç›¸å‡ï¼‰</a></li>
</ol>
<p><strong>diffcult</strong></p>
<ol>
<li><a href="https://github.com/WordZzzz/Note/blob/master/AtOffer/ã€Šå‰‘æŒ‡offerã€‹åˆ·é¢˜ç¬”è®°ï¼ˆæ—¶é—´æ•ˆç‡ï¼‰ï¼šæ•´æ•°ä¸­1å‡ºç°çš„æ¬¡æ•°ï¼ˆä»1åˆ°næ•´æ•°ä¸­1å‡ºç°çš„æ¬¡æ•°ï¼‰.md" target="_blank" rel="external">æ•´æ•°ä¸­1å‡ºç°çš„æ¬¡æ•°</a> (åˆ¤æ–­æ¯ä¸€ä½ï¼Œ æ¯”å¦‚ç™¾ä½åˆ†åˆ«ä¸º 1, 0, 2~9, å2ç§æƒ…å†µå¯åˆå¹¶)</li>
<li><a href="https://blog.csdn.net/JackZhang_123/article/details/78015549" target="_blank" rel="external">LRU Cache éœ€è¦æ·±å…¥å­¦ä¹ Javaçš„Mapçš„å†…éƒ¨å®ç°</a></li>
</ol>
<blockquote>
<ol>
<li>vector: vector<int>::iterator, Modifiers (push_back, pop_back, insert)</int></li>
<li>array : len = sizeof(arr)/sizeof(int)</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Integer&gt; <span class="title">maxInWindows</span><span class="params">(<span class="keyword">int</span> [] num, <span class="keyword">int</span> size)</span></span>&#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        LinkedList&lt;Integer&gt; deque = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">if</span>(num.length == <span class="number">0</span> || size == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!deque.isEmpty() &amp;&amp; deque.peekFirst() &lt;= i - size)</span><br><span class="line">                deque.poll();</span><br><span class="line">            <span class="keyword">while</span>(!deque.isEmpty() &amp;&amp; num[deque.peekLast()] &lt; num[i])</span><br><span class="line">                deque.removeLast();</span><br><span class="line">            deque.offerLast(i);</span><br><span class="line">            <span class="keyword">if</span>(i + <span class="number">1</span> &gt;= size)</span><br><span class="line">                res.add(num[deque.peekFirst()]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-shopee-amp-sina"><a href="#10-shopee-amp-sina" class="headerlink" title="10. shopee &amp; sina"></a>10. shopee &amp; sina</h2><p>shopee</p>
<blockquote>
<ol>
<li><a href="https://blog.csdn.net/zhangzhetaojj/article/details/80837232" target="_blank" rel="external">ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ </a> (Stack &lt; Integer &gt; (), Map &lt; Int, Int &gt;  map, map.getOrDefault(nums1[i], -1); åºåˆ—ä¸º 9 2 1 4 å€ŸåŠ©æ ˆå®ç°ï¼Œåˆ¤æ–­æ ˆé¡¶ å’Œ ä¸‹ä¸€ä¸ªå…ƒç´ çš„å¤§å° ï¼Œ âœ”ï¸</li>
<li><a href="https://www.cnblogs.com/grandyang/p/11048142.html" target="_blank" rel="external">é¸¡è›‹æ‰è½</a> (DPé—®é¢˜ï¼Œéš¾) </li>
<li>google æ‰”é¸¡è›‹ï¼ŒåŸé¢˜æ˜¯ 100 å±‚æ¥¼ï¼Œé¸¡è›‹æ— é™ï¼Œç­”æ¡ˆ 14 æ¬¡ã€‚ï¼Œ âœ”ï¸</li>
<li><a href="https://cxyxiaowu.com/articles/2019/05/02/1556786653527.html" target="_blank" rel="external">äºŒå‰æ ‘çš„å³è§†å›¾ (å±‚æ¬¡éå†)</a> res.push_back(q.back()-&gt;val);ï¼Œ âœ”ï¸</li>
<li>å¤æ‚é“¾è¡¨æŒ‡é’ˆ  ï¼Œ âœ”ï¸</li>
<li><a href="https://blog.csdn.net/qq_17550379/article/details/80696835" target="_blank" rel="external">K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</a> 1-&gt;2-&gt;3-&gt;4-&gt;5ï¼Œ å½“ k = 2 æ—¶ï¼Œåº”è¿”: 2-&gt;1-&gt;4-&gt;3-&gt;5 ï¼Œ âœ”ï¸</li>
<li><a href="https://blog.csdn.net/shinanhualiu/article/details/50225093" target="_blank" rel="external">ä¸åŒçš„äºŒå‰æœç´¢æ ‘</a>  ï¼Œ âœ”ï¸</li>
<li><a href="https://blog.csdn.net/zw159357/article/details/82664026" target="_blank" rel="external">é›¶é’±å…‘æ¢</a> å®Œå…¨èƒŒåŒ…é—®é¢˜ ï¼Œi=coins[j];i&lt;=amount;ï¼Œdp[i]=Math.min(dp[i],dp[i-coins[j]]+1); âœ”ï¸</li>
<li>ç›¸äº¤é“¾è¡¨</li>
<li><a href="https://blog.csdn.net/qq_17550379/article/details/80723003" target="_blank" rel="external">æœ‰æ•ˆçš„æ‹¬å· ï¼ˆStackæ¥è§£å†³ï¼‰</a> ï¼Œ âœ”ï¸</li>
<li>ä¸¤æ•°ç›¸åŠ </li>
</ol>
</blockquote>
<p>[LeetCode] 887. Super Egg Drop è¶…çº§é¸¡è›‹æ‰è½ ï¼Œ âœ”ï¸</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">dp[i][j] = min(dp[i][j], max(dp[i - <span class="number">1</span>][k - <span class="number">1</span>], dp[i][j - k]) + <span class="number">1</span>) ( <span class="number">1</span> &lt;= k &lt;= j )</span><br></pre></td></tr></table></figure>
<p>ä¹‹åå¯ä»¥å†ä¼˜åŒ–.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isValid</span><span class="params">(self, s)</span>:</span></span><br><span class="line">        <span class="string">"""</span><br><span class="line">        :type s: str</span><br><span class="line">        :rtype: bool</span><br><span class="line">        """</span></span><br><span class="line">        stack = list()</span><br><span class="line">        match = &#123;<span class="string">'&#123;'</span>:<span class="string">'&#125;'</span>, <span class="string">'['</span>:<span class="string">']'</span>, <span class="string">'('</span>:<span class="string">')'</span>&#125;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> s:</span><br><span class="line">            <span class="keyword">if</span> i == <span class="string">'&#123;'</span> <span class="keyword">or</span> i == <span class="string">'('</span> <span class="keyword">or</span> i == <span class="string">'['</span>:</span><br><span class="line">                stack.append(i)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> len(stack) == <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">                top = stack.pop()</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> match[top] != i:</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> len(stack) != <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<p>sina</p>
<blockquote>
<ol>
<li>ä¸¤æ•°ä¹‹å’Œ (é“¾è¡¨ carry) ï¼Œ âœ”ï¸</li>
<li>æœ€å¤§å­åºå’Œ ï¼Œ âœ”ï¸ åˆ†æ²»ï¼Ÿ</li>
<li><a href="https://www.cnblogs.com/grandyang/p/5310649.html" target="_blank" rel="external">æœå¯»åäºº</a> (if (knows(res, i)) res = i;) ï¼Œ âœ”ï¸</li>
<li>è¿ç»­å‡ºç°çš„æ•°å­—  ï¼Œ âœ”ï¸</li>
<li>æœç´¢äºŒç»´çŸ©é˜µ ï¼Œ âœ”ï¸</li>
<li>æ’åºé“¾è¡¨</li>
<li>ç¿»è½¬äºŒå‰æ ‘ ï¼Œ âœ”ï¸</li>
<li>ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº ç³»åˆ—</li>
<li>å­—ç¬¦ä¸²è½¬æ•´å‹</li>
<li>æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² ï¼Œ âœ”ï¸ ï¼ˆå€ŸåŠ©hashmapï¼‰</li>
</ol>
</blockquote>
<p>Tencent</p>
<blockquote>
<p><a href="https://www.cnblogs.com/grandyang/p/7076026.html" target="_blank" rel="external">Minimum Factorization æœ€å°å› æ•°åˆ†è§£</a><br>[LeetCode æœ€å°åŸºå› å˜åŒ–ï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰]</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> Solution &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">addTwoNumbers</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">        ListNode* fakeHead = <span class="keyword">new</span> ListNode(<span class="number">-1</span>);</span><br><span class="line">        ListNode* curr = fakeHead;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="literal">NULL</span> || l2 != <span class="literal">NULL</span> | carry != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (l1 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                carry += l1-&gt;val;</span><br><span class="line">                l1 = l1-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (l2 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                carry += l2-&gt;val;</span><br><span class="line">                l2 = l2-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            ListNode* node = <span class="keyword">new</span> ListNode(carry % <span class="number">10</span>);</span><br><span class="line">            carry /= <span class="number">10</span>;</span><br><span class="line">            curr-&gt;next = node;</span><br><span class="line">            curr = node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fakeHead-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="11-æµ·é‡æ•°æ®"><a href="#11-æµ·é‡æ•°æ®" class="headerlink" title="11. æµ·é‡æ•°æ®"></a>11. æµ·é‡æ•°æ®</h2><p>m_15 äºŒå‰æ ‘éé€’å½’çš„ å…ˆæ ¹éå†å’Œä¸­åºéå†   (å¿…ä¼šæ•°æ®ç»“æ„ä¹‹ä¸€)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fPre</span><span class="params">(Node* root)</span> </span>&#123; <span class="comment">// å…ˆæ ¹éå†  æ ¹-&gt;å·¦-&gt;å³</span></span><br><span class="line">    Node* p = root;</span><br><span class="line">    <span class="built_in">stack</span>&lt;Node*&gt;  S;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(p != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; p-&gt;value &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">            S.push(p);</span><br><span class="line">            p = p-&gt;lchild;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(S.empty()) <span class="keyword">return</span>;</span><br><span class="line">            p = S.top(); S.pop();</span><br><span class="line">            p = p-&gt;rchild;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fIno</span><span class="params">(Node* root)</span> </span>&#123;</span><br><span class="line">    Node* p = root;</span><br><span class="line">    <span class="built_in">stack</span>&lt;Node*&gt; S;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(p != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            S.push(p);</span><br><span class="line">            p = p-&gt;lchild;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(S.empty()) <span class="keyword">return</span>;</span><br><span class="line">            p = S.top(); S.pop();</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; p-&gt;value &lt;&lt;  <span class="string">' '</span>;</span><br><span class="line">            p = p-&gt;rchild;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://leetcode-cn.com/interview" target="_blank" rel="external">leetcode CN</a></li>
<li><a href="https://leetcode.com/problemset/all/" target="_blank" rel="external">leetcode EN</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/35707293" target="_blank" rel="external">çŸ¥ä¹ï¼š [Leetcode][åŠ¨æ€è§„åˆ’]ç›¸å…³é¢˜ç›®æ±‡æ€»/åˆ†æ/æ€»ç»“</a></li>
<li><a href="https://www.jianshu.com/p/af880bbba792" target="_blank" rel="external">ç®€ä¹¦ï¼š 2019 ç®—æ³•é¢è¯•ç›¸å…³(leetcode)â€“åŠ¨æ€è§„åˆ’(Dynamic Programming)</a></li>
<li><a href="https://blog.csdn.net/EbowTang/article/details/50791500" target="_blank" rel="external">CSDN leetcode DP</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Fine-grained Sentiment Analysis of User Online Reviews]]></title>
      <url>http://shopee.ai/2019/06/25/nlp/Fine-grained-Sentiment-Analysis-of-User-Online-Reviews/</url>
      <content type="html"><![CDATA[<p><img src="/images/deeplearning/AI-Challenger-11.png" width="550" alt="AI-Challenger"></p>
<a id="more"></a>
<p><a href="https://challenger.ai/" target="_blank" rel="external">Challenger.AI</a></p>
<p>Online reviews have become the critical factor to make consumption decision in recent years. They not only have a profound impact on the incisive understanding of shops, users, and the implied sentiment, but also have been widely used in Internet and e-commerce industry, such as personalized recommendation, intelligent search, product feedback, and business security. In this challenge, we provide a dataset of user reviews for fine-grained sentiment analysis from the catering industry, containning 335K public user reviews from Dianping.com. The dataset builds a two-layer labeling system according to the granularity, which contains 6 categories and 20 fine-grained elements.</p>
<blockquote>
<p>Training set: 105K</p>
<p>Verification set: 15K</p>
<p>Test set A: 15K</p>
<p>Test set B: 200K</p>
</blockquote>
<p>There are four sentimental types for every fine-grained element: Positive, Neutral, Negative and Not mentioned, which are labelled as 1, 0, -1 and-2. The meaning of these four labels are listed below.</p>
<p><img src="/images/deeplearning/AI-Challenger-14.png" width="650" alt=""></p>
<p>An example of one labelled review:</p>
<blockquote>
<p>â€œå‘³é“ä¸é”™çš„é¢é¦†ï¼Œæ€§ä»·æ¯”ä¹Ÿç›¸å½“ä¹‹é«˜ï¼Œåˆ†é‡å¾ˆè¶³ï½å¥³ç”Ÿåƒå°ä»½ï¼Œèƒƒå£å°çš„ï¼Œå¯èƒ½åƒä¸å®Œå‘¢ã€‚ç¯å¢ƒåœ¨é¢é¦†æ¥è¯´ç®—æ˜¯å¥½çš„ï¼Œè‡³å°‘çœ‹ä¸Šå»å ‚å­å¾ˆäº®ï¼Œä¹Ÿæ¯”è¾ƒå¹²å‡€ï¼Œä¸€èˆ¬è‹è‡é¦†å­è¿˜æ˜¯æ¯”ä¸ä¸Šè¿™ä¸ªå«ç”ŸçŠ¶å†µçš„ã€‚ä¸­åˆé¥­ç‚¹çš„æ—¶å€™ï¼Œäººå¾ˆå¤šï¼Œäººè¡Œé“ä¸Šä¹Ÿæ˜¯è¦åæ»¡çš„ï¼Œéš”å£çš„å†’èœé¦†å­ï¼Œæ®è¯´æ˜¯ä¸€å®¶ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šå¼€æ”¾å‡ºæ¥ååƒé¢çš„äººã€‚â€œ</p>
</blockquote>
<p><img src="/images/deeplearning/AI-Challenger-13.png" width="650" alt=""></p>
<hr>
<p>ã€ŒAI Challengerã€æ˜¯é¢å‘å…¨çƒäººå·¥æ™ºèƒ½äººæ‰çš„å¼€æºæ•°æ®é›†å’Œç¼–ç¨‹ç«èµ›å¹³å°ã€‚AI Challenger 2018 ç”±åˆ›æ–°å·¥åœºã€æœç‹—ã€ç¾å›¢ç‚¹è¯„ã€ç¾å›¾å…¬å¸è”åˆä¸»åŠã€‚æœ‰ä¸Šä¸‡æ”¯å›¢é˜Ÿå‚èµ›ï¼Œ è¦†ç›– 81 ä¸ªå›½å®¶ã€1100 æ‰€é«˜æ ¡ã€990 å®¶å…¬å¸ã€‚</p>
<!--<img src="/images/deeplearning/AI-Challenger-21.webp" width="850" alt=""/>
-->
<h2 id="æ•´ä½“æµç¨‹"><a href="#æ•´ä½“æµç¨‹" class="headerlink" title="æ•´ä½“æµç¨‹"></a>æ•´ä½“æµç¨‹</h2><ul>
<li><strong>é—®é¢˜å»ºæ¨¡</strong></li>
<li><strong>æ¨¡å‹åŸºæœ¬æ¶æ„</strong></li>
<li><strong>æ•°æ®å¤„ç†</strong><br>ã€‚ã€‚ã€‚</li>
</ul>
<p><img src="/images/deeplearning/AI-Challenger-22.webp" width="890" alt=""></p>
<p>æœ‰20ä¸ªç²’åº¦çš„è¯„ä»·æŒ‡æ ‡ï¼Œæ¯ä¸ªç²’åº¦åˆæœ‰4ç§æƒ…æ„ŸçŠ¶æ€ï¼Œä»å®˜æ–¹baselineæ¥çœ‹ï¼Œåˆ†åˆ«è®­ç»ƒäº†20ä¸ªï¼ˆ4æ ‡ç­¾ï¼‰åˆ†ç±»å™¨ã€‚</p>
<blockquote>
<p>FastTextï¼ˆ0.573ï¼‰ã€Attention-RNN (0.637)ã€Attention-RCNN (0.669)ã€ELMO-likeï¼ˆ0.68830ï¼‰</p>
</blockquote>
<h2 id="1-FastText-baseline"><a href="#1-FastText-baseline" class="headerlink" title="1. FastText baseline"></a>1. FastText baseline</h2><blockquote>
<p>skiftï¼šscikit-learn wrappers for Python fastText.</p>
</blockquote>
<p>ä»€ä¹ˆæ˜¯ skift?</p>
<blockquote>
<p>skift åŒ…æ‹¬å‡ ä¸ª scikit-learnå…¼å®¹åŒ…è£å™¨, å°è£äº†fasttextæ¨¡å‹ï¼ŒfasttextåŸç†ç±»ä¼¼word2vecï¼Œä¸»è¦ç”¨äºæ–‡æœ¬å¿«é€Ÿåˆ†ç±»ã€‚å…¶ä¼˜åŠ¿åœ¨äºåˆ†ç±»é€Ÿåº¦å¿«ï¼Œä½¿ç”¨n-gram ç‰¹åˆ«å®¹æ˜“è·å¾—æ–‡æœ¬å¥å­å±€éƒ¨ä¿¡æ¯ã€æ„é€ æ–°è©ã€‚</p>
</blockquote>
<p>fasttext ç¼ºç‚¹æ˜¯éšç€è¯­æ–™çš„å¢é•¿ï¼Œå…§å­˜éœ€æ±‚ä¹Ÿä¼šå¢é•¿ã€‚é‚£ä¹ˆå¦‚æœè§£æ±ºå…§å­˜é—®é¢˜å‘¢ï¼Ÿ</p>
<blockquote>
<ol>
<li>è¿‡æ»¤æ‰æ¬¡æ•°å‡ºç°å°‘çš„è¯ï¼›</li>
<li>é‡‡ç”¨wordç²’åº¦ï¼Œè€Œécharç²’åº¦</li>
</ol>
</blockquote>
<p>ä¾‹å¦‚å¥å­: </p>
<blockquote>
<p>æˆ‘å–œæ­¡å»ä¸­åœ‹ï¼Œ å¦‚æœæ¡ç”¨charç²’åº¦ï¼Œå‰‡ä½¿ç”¨2-gramçš„è©±ï¼Œç”¢ç”Ÿçš„ç‰¹å¾µçˆ²:</p>
<p>æˆ‘å–œ å–œæ­¡ æ­¡ä¸­ ä¸­åœ‹</p>
</blockquote>
<p>å¦‚æœæ¡ç”¨wordç²’åº¦çš„è©±ï¼Œç”¢ç”Ÿçš„ç‰¹å¾µçˆ²</p>
<blockquote>
<p>æˆ‘å–œæ­¡ å–œæ­¡å» å»ä¸­åœ‹</p>
</blockquote>
<ul>
<li><a href="https://www.twblogs.net/a/5c1215debd9eee5e40bb42fd" target="_blank" rel="external">åˆ©ç”¨skiftå¯¦ç¾fasttextæ¨¡å‹</a></li>
<li><a href="https://blog.csdn.net/supinyu/article/details/81136590" target="_blank" rel="external">FastTextæ–‡æœ¬åˆ†ç±»ä»¥åŠç”Ÿæˆè¯å‘é‡</a></li>
<li><a href="https://blog.csdn.net/sinat_26917383/article/details/83041424#2_fasttext_21" target="_blank" rel="external">æç®€ä½¿ç”¨ï¸±Gensim-FastText è¯å‘é‡è®­ç»ƒä»¥åŠOOV</a></li>
<li><a href="https://blog.csdn.net/feilong_csdn/article/details/88655927" target="_blank" rel="external">fastTextåŸç†å’Œæ–‡æœ¬åˆ†ç±»å®æˆ˜ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†</a></li>
</ul>
<blockquote>
<p>é»˜è®¤é…ç½®å‚æ•°è®­ç»ƒ fasttext å¤šæ¨¡å‹ï¼Œf1å‡å€¼ çº¦ä¸º 0.5513 çš„ fasttext å¤šåˆ†ç±»æ¨¡å‹(20ä¸ªï¼‰</p>
</blockquote>
<h3 id="1-1-æ•°æ®æƒ…å†µè®°å½•"><a href="#1-1-æ•°æ®æƒ…å†µè®°å½•" class="headerlink" title="1.1 æ•°æ®æƒ…å†µè®°å½•"></a>1.1 æ•°æ®æƒ…å†µè®°å½•</h3><p>fastText æ—¶å€™ï¼Œ è¯çš„ç²’åº¦</p>
<ul>
<li>jieba åˆ†è¯</li>
<li>å»ºç«‹è¯å…¸æ—¶ï¼Œè¿‡æ»¤æ‰å‡ºç°æ¬¡æ•°å°äº 2~5 çš„è¯</li>
<li>è®­ç»ƒé›†ã€éªŒè¯é›† ä»¥åŠ æµ‹è¯•é›†Aç»„æˆçš„è¯­æ–™ï¼Œè¯å…¸å¤§å°ä¸º 66347</li>
<li>é¢„æµ‹å’Œè®­ç»ƒæ—¶ï¼Œè¯å…¸æ²¡æœ‰å‡ºç°çš„è¯ ç”¨ <code>&lt;UNK&gt;</code> ä»£æ›¿</li>
</ul>
<h3 id="1-2-main-code"><a href="#1-2-main-code" class="headerlink" title="1.2 main code"></a>1.2 main code</h3><p>åˆ©ç”¨è®­ç»ƒé›†ï¼Œæ¥è®­ç»ƒ <strong>20 ä¸ª</strong> 4åˆ†ç±» åˆ†ç±»å™¨, è®­ç»ƒ 15 åˆ†é’Ÿ</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">sk_clf = FirstColFtClassifier(lr=learning_rate, epoch=epoch,</span><br><span class="line">                              wordNgrams=word_ngrams,</span><br><span class="line">                              minCount=min_count, verbose=<span class="number">2</span>)</span><br><span class="line">sk_clf.fit(train_data_format, train_label)</span><br></pre></td></tr></table></figure>
<!--
éªŒè¯é›†ï¼Œè®¡ç®— macro F1


    for column in columns[2:]:
        true_label = np.asarray(validate_data_df[column])
        classifier = classifier_dict[column]
        pred_label = classifier.predict(validata_data_format).astype(int)
        f1_score = get_f1_score(true_label, pred_label)
        f1_score_dict[column] = f1_score

    f1_score = np.mean(list(f1_score_dict.values()))
-->
<blockquote>
<p>min_countè®¾ç½®ä¸º2è²Œä¼¼ä¹Ÿæœ‰ä¸€äº›è´Ÿå‘å½±å“ï¼Œ word_ngrams 2ï¼Œ epoch 10 .</p>
</blockquote>
<h3 id="1-3-baseline-æ•ˆæœ"><a href="#1-3-baseline-æ•ˆæœ" class="headerlink" title="1.3 baseline æ•ˆæœ"></a>1.3 baseline æ•ˆæœ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service_<span class="built_in">wait</span>_time:0.5247890022873511</span><br><span class="line">service_waiters_attitude:0.6781093513108542</span><br><span class="line">service_parking_convenience:0.5828932335474249</span><br><span class="line">service_serving_speed:0.6146828053320519</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">f1_score: 0.5513</span><br></pre></td></tr></table></figure>
<p>è°ƒå‚ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">python main_train.py -mn fasttext_model_wn2.pkl -wn <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>çº¦è·‘15åˆ†é’Ÿå·¦å³ï¼Œå­˜å‚¨çš„æ¨¡å‹å¤§çº¦åœ¨17Gï¼ŒéªŒè¯é›† macro F1å€¼ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service_<span class="built_in">wait</span>_time:0.5247890022873511</span><br><span class="line">service_waiters_attitude:0.6881098513108542</span><br><span class="line">service_parking_convenience:0.5828935095474249</span><br><span class="line">service_serving_speed:0.6168828054420539</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">f1_score: 0.5783</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç»“æœçœ‹èµ·æ¥è¿˜ä¸é”™ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¿™ä¸ªfasttextå¤šåˆ†ç±»æ¨¡å‹è¿›è¡Œæµ‹è¯•é›†çš„é¢„æµ‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">python main_predict.py -mn fasttext_wn2_model.pkl</span><br></pre></td></tr></table></figure>
<p>ä¼˜åŒ–æ–¹æ³•ï¼š å»åœç”¨è¯å’Œå»ä¸€äº›æ ‡ç‚¹ç¬¦å·ï¼Œè°ƒå‚ï¼Œlearning_rateçš„å½±å“æ˜¯æ¯”è¾ƒç›´æ¥çš„ï¼Œmin_count</p>
<h3 id="1-4-fastText-é€Ÿåº¦å¿«"><a href="#1-4-fastText-é€Ÿåº¦å¿«" class="headerlink" title="1.4 fastText é€Ÿåº¦å¿«"></a>1.4 fastText é€Ÿåº¦å¿«</h3><p>èƒ½å¤Ÿåšåˆ°æ•ˆæœå¥½ï¼Œé€Ÿåº¦å¿«ï¼Œä¸»è¦ä¾é ä¸¤ä¸ªç§˜å¯†æ­¦å™¨ï¼š</p>
<blockquote>
<ol>
<li>åˆ©ç”¨äº† è¯å†…çš„n-gramä¿¡æ¯ (subword n-gram information)</li>
<li>ç”¨åˆ°äº† å±‚æ¬¡åŒ–Softmaxå›å½’ (Hierarchical Softmax) çš„è®­ç»ƒ trick.</li>
</ol>
</blockquote>
<h2 id="2-Attention-RNNã€RCNN"><a href="#2-Attention-RNNã€RCNN" class="headerlink" title="2. Attention RNNã€RCNN"></a>2. Attention RNNã€RCNN</h2><h3 id="2-1-é¢„å¤„ç†-data"><a href="#2-1-é¢„å¤„ç†-data" class="headerlink" title="2.1 é¢„å¤„ç† data"></a>2.1 é¢„å¤„ç† data</h3><p>ç²—æš´ä½¿ç”¨charæ¨¡å‹ï¼Œç”¨åˆ°çš„åœç”¨è¯ä¹Ÿä¸å¤šã€‚</p>
<ul>
<li>trainsets linesï¼š  501132ï¼Œ åˆæ³•ä¾‹å­ ï¼š 105000</li>
<li>validationset linesï¼š  70935, åˆæ³•ä¾‹å­ ï¼š 15000</li>
<li>testsets linesï¼š  72028ï¼Œ åˆæ³•ä¾‹å­ ï¼š 15000</li>
</ul>
<p>æ•°æ®é¢„å¤„ç†ï¼Œç”Ÿæˆ train_char.csvã€test_char.csvã€test_char.csv ä¸‰ä¸ªæ–‡ä»¶:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-rw-r--r--  1 blair 10:36 <span class="built_in">test</span>_char.csv</span><br><span class="line">-rw-r--r--  1 blair 10:09 train_char.csv</span><br><span class="line">-rw-r--r--  1 blair 10:32 validation_char.csv</span><br></pre></td></tr></table></figure>
<p><strong>word2vecï¼š</strong> ç»´åº¦ 100ï¼Œ çª—å£ 10ï¼Œ è¿‡æ»¤æ‰æ¬¡æ•°å°äº 1~2 çš„å­—</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">3.1M chars.vector</span><br></pre></td></tr></table></figure>
<p>è¿‡æ»¤æ‰ä½é¢‘è¯ä¹‹åï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">word2vec/chars.vector ä¸º 7983 * 100</span><br></pre></td></tr></table></figure>
<h3 id="2-2-Attention-RCNN"><a href="#2-2-Attention-RCNN" class="headerlink" title="2.2 Attention RCNN"></a>2.2 Attention RCNN</h3><blockquote>
<p>Attention-RNN (0.637)ã€Attention-RCNN (0.669)</p>
</blockquote>
<ul>
<li>Attention å‚è€ƒè‡ª Kaggle çš„ <a href="https://www.kaggle.com/qqgeogor/keras-lstm-attention-glove840b-lb-0-043" target="_blank" rel="external">Attention Model</a></li>
</ul>
<p>Kaggle å¸¸è§æ–‡æœ¬åˆ†ç±»ç»“æ„: 2å±‚GRU æ¥Attentionå±‚ï¼Œç„¶åå’Œ avgpoolã€maxpool concat æ¥èµ·æ¥.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">model</span><span class="params">(self, embeddings_matrix, maxlen, word_index, num_class)</span>:</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†ä¹‹å summary çœ‹æ¸…æ¥šç½‘ç»œç»“æ„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€äº›å‚æ•°å…ˆå†™æ­»çœ‹ä¸€ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> keras</span><br><span class="line"><span class="keyword">from</span> keras <span class="keyword">import</span> Model</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> *</span><br><span class="line"><span class="comment"># from JoinAttLayer import Attention</span></span><br><span class="line"></span><br><span class="line">maxlen=<span class="number">1200</span></span><br><span class="line"></span><br><span class="line">inp = Input(shape=(maxlen,)) <span class="comment"># å½“è¾“å…¥åºåˆ—çš„é•¿åº¦å›ºå®šæ—¶ï¼Œè¯¥å€¼ä¸ºå…¶é•¿åº¦ 1200 ï¼ˆä¸€ä¸ªæ–‡æ¡£docçš„æœ€å¤§é•¿åº¦ï¼‰</span></span><br><span class="line"></span><br><span class="line">encode = Bidirectional(CuDNNGRU(<span class="number">128</span>, return_sequences=<span class="keyword">True</span>))</span><br><span class="line">encode2 = Bidirectional(CuDNNGRU(<span class="number">128</span>, return_sequences=<span class="keyword">True</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># attention = Attention(maxlen)</span></span><br><span class="line"></span><br><span class="line">x_4 = Embedding(<span class="number">7555</span>+ <span class="number">1</span>,<span class="comment">#7983+1 # è¯æ±‡è¡¨å¤§å°ï¼Œ å³ï¼Œæœ€å¤§æ•´æ•° index + 1, len(word_index) + 1, # input_dim</span></span><br><span class="line">                <span class="number">100</span>, <span class="comment"># output_dim: int &gt;= 0ã€‚è¯å‘é‡çš„ç»´åº¦ã€‚</span></span><br><span class="line">                input_length=maxlen, <span class="comment"># maxlen=1200, ä¸€ä¸ª doc æœ€å¤§é•¿åº¦</span></span><br><span class="line">                trainable=<span class="keyword">True</span>)(inp)</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x_3 = encode(x_4)</span><br><span class="line">x_3 = encode2(x_3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å…¥shapeï¼Œ å½¢å¦‚ï¼ˆsamplesï¼Œstepsï¼Œfeaturesï¼‰çš„3Då¼ é‡</span></span><br><span class="line"><span class="comment"># è¾“å‡ºshapeï¼Œ å½¢å¦‚(samples, features)çš„2Då¼ é‡</span></span><br><span class="line">avg_pool_3 = GlobalAveragePooling1D()(x_3) <span class="comment"># GlobalAveragePooling1D ä¸ºæ—¶åŸŸä¿¡å·æ–½åŠ å…¨å±€å¹³å‡å€¼æ± åŒ–</span></span><br><span class="line">max_pool_3 = GlobalMaxPooling1D()(x_3) <span class="comment"># å¯¹äºæ—¶é—´ä¿¡å·çš„å…¨å±€æœ€å¤§æ± åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># attention_3 = attention(x_3)</span></span><br><span class="line"></span><br><span class="line">x = keras.layers.concatenate([avg_pool_3, max_pool_3], name=<span class="string">"fc"</span>)</span><br><span class="line">x = Dense(<span class="number">4</span>, activation=<span class="string">"softmax"</span>)(x)</span><br><span class="line"></span><br><span class="line">adam = keras.optimizers.Adam(lr=<span class="number">0.001</span>, beta_1=<span class="number">0.9</span>, beta_2=<span class="number">0.999</span>, epsilon=<span class="number">1e-08</span>, amsgrad=<span class="keyword">True</span>)</span><br><span class="line">rmsprop = keras.optimizers.RMSprop(lr=<span class="number">0.001</span>, rho=<span class="number">0.9</span>, epsilon=<span class="number">1e-06</span>)</span><br><span class="line">model = Model(inputs=inp, outputs=x)</span><br><span class="line"></span><br><span class="line">model.compile(</span><br><span class="line">    loss=<span class="string">'categorical_crossentropy'</span>,</span><br><span class="line">    optimizer=adam)</span><br><span class="line"></span><br><span class="line"><span class="comment"># categorical_crossentropy ç”¨æ¥åšå¤šåˆ†ç±»é—®é¢˜</span></span><br><span class="line"><span class="comment"># binary_crossentropy ç”¨æ¥åšå¤šæ ‡ç­¾åˆ†ç±»é—®é¢˜</span></span><br><span class="line"></span><br><span class="line">model.summary()</span><br></pre></td></tr></table></figure>
<p>RNNï¼š</p>
<p><img src="/images/deeplearning/AI-Challenger-16-1.png" width="900" alt=""></p>
<p>RCNNï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x_4 = Embedding(<span class="number">7555</span>+ <span class="number">1</span>,<span class="comment">#7983+1 # è¯æ±‡è¡¨å¤§å°ï¼Œ å³ï¼Œæœ€å¤§æ•´æ•° index + 1</span></span><br><span class="line">                <span class="number">100</span>,</span><br><span class="line">                input_length=maxlen,</span><br><span class="line">                trainable=<span class="keyword">True</span>)(inp)</span><br><span class="line"></span><br><span class="line">x_3 = encode(x_4)</span><br><span class="line">x_3 = encode2(x_3)</span><br><span class="line"></span><br><span class="line">x_3 = Conv1D(<span class="number">64</span>, kernel_size=<span class="number">3</span>, padding=<span class="string">"valid"</span>, kernel_initializer=<span class="string">"glorot_uniform"</span>)(x_3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å…¥shapeï¼Œ å½¢å¦‚ï¼ˆsamplesï¼Œstepsï¼Œfeaturesï¼‰çš„3Då¼ é‡</span></span><br><span class="line"><span class="comment"># è¾“å‡ºshapeï¼Œ å½¢å¦‚(samples, features)çš„2Då¼ é‡</span></span><br><span class="line">avg_pool_3 = GlobalAveragePooling1D()(x_3) <span class="comment"># GlobalAveragePooling1D ä¸ºæ—¶åŸŸä¿¡å·æ–½åŠ å…¨å±€å¹³å‡å€¼æ± åŒ–</span></span><br><span class="line">max_pool_3 = GlobalMaxPooling1D()(x_3) <span class="comment"># å¯¹äºæ—¶é—´ä¿¡å·çš„å…¨å±€æœ€å¤§æ± åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># attention_3 = attention(x_3)</span></span><br><span class="line"></span><br><span class="line">x = keras.layers.concatenate([avg_pool_3, max_pool_3], name=<span class="string">"fc"</span>)</span><br><span class="line">x = Dense(<span class="number">4</span>, activation=<span class="string">"softmax"</span>)(x)</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">model.summary()</span><br></pre></td></tr></table></figure>
<p><img src="/images/deeplearning/AI-Challenger-17-1.png" width="900" alt=""></p>
<blockquote>
<p>Input ä¸€ä¸ªç½‘ç»œå±‚æ¬¡ï¼Œè¾“å…¥å±‚ åœ¨ keras</p>
<p>SpatialDropout1D ï¼Œé‚£ä¹ˆå¸¸è§„çš„ dropout å°†æ— æ³•ä½¿æ¿€æ´»æ­£åˆ™åŒ–ï¼Œä¸”å¯¼è‡´æœ‰æ•ˆçš„å­¦ä¹ é€Ÿç‡é™ä½ã€‚<br>SpatialDropout1D ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒSpatialDropout1D å°†æœ‰åŠ©äºæé«˜ç‰¹å¾å›¾ä¹‹é—´çš„ç‹¬ç«‹æ€§ï¼Œåº”è¯¥ä½¿ç”¨å®ƒæ¥ä»£æ›¿ Dropoutã€‚</p>
<p>CuDNNGRU æ˜¯ åŸºäºCuDNNçš„å¿«é€ŸGRUå®ç°ï¼Œåªèƒ½åœ¨GPUä¸Šè¿è¡Œï¼Œåªèƒ½ä½¿ç”¨ tensoflow ä¸ºåç«¯<br>CuDNNLSTM æ˜¯ åŸºäºCuDNNçš„å¿«é€ŸLSTMå®ç°ï¼Œåªèƒ½åœ¨GPUä¸Šè¿è¡Œï¼Œåªèƒ½ä½¿ç”¨ tensoflow ä¸ºåç«¯</p>
<p>attention = Attention(maxlen)</p>
<p>EmbeddingåµŒå…¥å±‚å°†æ­£æ•´æ•°ï¼ˆä¸‹æ ‡ï¼‰è½¬æ¢ä¸ºå…·æœ‰å›ºå®šå¤§å°çš„å‘é‡ï¼Œå¦‚[<a href="https://blog.csdn.net/liuchonge/article/details/77140719" target="_blank" rel="external">4</a>, [20]]-&gt;[[0.25, 0.1], [0.6, -0.2]]</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">keras.layers.embeddings.Embedding(</span><br><span class="line">    input_dim, </span><br><span class="line">    output_dim, </span><br><span class="line">    embeddings_initializer=<span class="string">'uniform'</span>, <span class="comment"># embeddings_regularizer=None, </span></span><br><span class="line">    activity_regularizer=<span class="keyword">None</span>,  <span class="comment"># embeddings_constraint=None,              </span></span><br><span class="line">    mask_zero=<span class="keyword">False</span>, </span><br><span class="line">    input_length=<span class="keyword">None</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Embedding çš„ä¸€äº›å‚æ•°è§£é‡Šï¼š</p>
<blockquote>
<p>Embeddingå±‚åªèƒ½ä½œä¸ºæ¨¡å‹çš„ç¬¬ä¸€å±‚</p>
<p>input_dim: int &gt; 0ã€‚è¯æ±‡è¡¨å¤§å°ï¼Œ å³ï¼Œæœ€å¤§æ•´æ•° index + 1ã€‚<br>output_dim: int &gt;= 0ã€‚è¯å‘é‡çš„ç»´åº¦ã€‚<br>embeddings_initializer: åµŒå…¥çŸ©é˜µçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œä¸ºé¢„å®šä¹‰åˆå§‹åŒ–æ–¹æ³•åçš„å­—ç¬¦ä¸²ï¼Œæˆ–ç”¨äºåˆå§‹åŒ–æƒé‡çš„åˆå§‹åŒ–å™¨ã€‚å‚è€ƒinitializers<br>input_lengthï¼šå½“è¾“å…¥åºåˆ—çš„é•¿åº¦å›ºå®šæ—¶ï¼Œè¯¥å€¼ä¸ºå…¶é•¿åº¦ã€‚å¦‚æœè¦åœ¨è¯¥å±‚åæ¥Flattenå±‚ï¼Œç„¶åæ¥Denseå±‚ï¼Œåˆ™å¿…é¡»æŒ‡å®šè¯¥å‚æ•°ï¼Œå¦åˆ™Denseå±‚çš„è¾“å‡ºç»´åº¦æ— æ³•è‡ªåŠ¨æ¨æ–­ã€‚</p>
</blockquote>
<p><a href="/2018/08/21/deeplearning/Convolutional-Neural-Networks-week1/#4-1-è¿ç”¨-Padding-çš„åŸå› ">Convolutional Neural Networks (week1) - CNN , è¿ç”¨ Padding</a><br><a href="https://blog.csdn.net/wuzqChom/article/details/74785643" target="_blank" rel="external">TensorFlowä¸­CNNçš„ä¸¤ç§paddingæ–¹å¼â€œSAMEâ€å’Œâ€œVALIDâ€</a></p>
<blockquote>
<p>word2vec : 7983 100 word2vec/chars.vector è¿‡æ»¤æ‰ä½é¢‘è¯</p>
</blockquote>
<p>å¾ªç¯å·ç§¯ç¥ç»ç½‘ç»œ(RCNN)ï¼Œå¹¶å°†å…¶åº”ç”¨äºæ–‡æœ¬åˆ†ç±»çš„ä»»åŠ¡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åº”ç”¨ä¸€ä¸ªåŒå‘çš„å¾ªç¯ç»“æ„ï¼Œä¸ä¼ ç»Ÿçš„åŸºäºçª—å£çš„ç¥ç»ç½‘ç»œç›¸æ¯”ï¼Œå®ƒå¯ä»¥å¤§å¤§å‡å°‘å™ªå£°ï¼Œä»è€Œæœ€å¤§ç¨‹åº¦åœ°æ•æ‰ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œ<strong>è¯¥æ¨¡å‹åœ¨å­¦ä¹ æ–‡æœ¬è¡¨ç¤ºæ—¶å¯ä»¥ä¿ç•™æ›´å¤§èŒƒå›´çš„è¯åº</strong>ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå¯ä»¥<strong>è‡ªåŠ¨åˆ¤æ–­å“ªäº›ç‰¹æ€§åœ¨æ–‡æœ¬åˆ†ç±»ä¸­æ‰®æ¼”å…³é”®è§’è‰²çš„æ± åŒ–å±‚</strong>ï¼Œä»¥æ•è·æ–‡æœ¬ä¸­çš„å…³é”®ç»„ä»¶ã€‚æˆ‘ä»¬çš„æ¨¡å‹ç»“åˆäº†RNNçš„ç»“æ„å’Œæœ€å¤§æ± åŒ–å±‚ï¼Œ<strong>åˆ©ç”¨äº†å¾ªç¯ç¥ç»æ¨¡å‹å’Œå·ç§¯ç¥ç»æ¨¡å‹çš„ä¼˜ç‚¹</strong>ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„æ¨¡å‹æ˜¾ç¤ºäº†O(n)çš„æ—¶é—´å¤æ‚åº¦ï¼Œå®ƒä¸æ–‡æœ¬é•¿åº¦çš„é•¿åº¦æ˜¯çº¿æ€§ç›¸å…³çš„ã€‚</p>
<blockquote>
<ol>
<li>RNN ä¼˜ç‚¹ï¼š æœ€å¤§ç¨‹åº¦æ•æ‰ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè¿™å¯èƒ½æœ‰åˆ©äºæ•è·é•¿æ–‡æœ¬çš„è¯­ä¹‰ã€‚</li>
<li>RNN ç¼ºç‚¹ï¼š æ˜¯ä¸€ä¸ªæœ‰åå€šçš„æ¨¡å‹ï¼Œåœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œåé¢çš„å•è¯æ¯”å…ˆå‰çš„å•è¯æ›´å…·ä¼˜åŠ¿ã€‚å› æ­¤ï¼Œå½“å®ƒè¢«ç”¨äºæ•è·æ•´ä¸ªæ–‡æ¡£çš„è¯­ä¹‰æ—¶ï¼Œå®ƒå¯èƒ½ä¼šé™ä½æ•ˆç‡ï¼Œå› ä¸ºå…³é”®ç»„ä»¶å¯èƒ½å‡ºç°åœ¨æ–‡æ¡£ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œè€Œä¸æ˜¯æœ€åã€‚</li>
<li>CNN ä¼˜ç‚¹ï¼š æå–æ•°æ®ä¸­çš„å±€éƒ¨ä½ç½®çš„ç‰¹å¾ï¼Œç„¶åå†æ‹¼æ¥æ± åŒ–å±‚ã€‚ CNNå¯ä»¥æ›´å¥½åœ°æ•æ‰æ–‡æœ¬çš„è¯­ä¹‰ã€‚æ˜¯O(n)</li>
<li>CNN ä¼˜ç‚¹ï¼š ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨åˆ¤æ–­å“ªäº›ç‰¹æ€§åœ¨æ–‡æœ¬åˆ†ç±»ä¸­æ‰®æ¼”å…³é”®è§’è‰²çš„æ± åŒ–å±‚ï¼Œä»¥æ•è·æ–‡æœ¬ä¸­çš„å…³é”®ç»„ä»¶ã€‚</li>
</ol>
<p>é¦–å…ˆæˆ‘ä»¬æ¥ç†è§£ä¸‹ä»€ä¹ˆæ˜¯å·ç§¯æ“ä½œï¼Ÿå·ç§¯ï¼Œä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªåº”ç”¨åœ¨çŸ©é˜µä¸Šçš„æ»‘åŠ¨çª—å£å‡½æ•°ã€‚</p>
<p>å·ç§¯ç½‘ç»œä¹Ÿå°±æ˜¯å¯¹è¾“å…¥æ ·æœ¬è¿›è¡Œå¤šæ¬¡å·ç§¯æ“ä½œï¼Œæå–æ•°æ®ä¸­çš„å±€éƒ¨ä½ç½®çš„ç‰¹å¾ï¼Œç„¶åå†æ‹¼æ¥æ± åŒ–å±‚ï¼ˆå›¾ä¸­çš„Poolingå±‚ï¼‰åšè¿›ä¸€æ­¥çš„é™ç»´æ“ä½œ</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠCNNç±»æ¯”N-gramæ¨¡å‹ï¼ŒN-gramä¹Ÿæ˜¯åŸºäºè¯çª—èŒƒå›´è¿™ç§å±€éƒ¨çš„æ–¹å¼å¯¹æ–‡æœ¬è¿›è¡Œç‰¹å¾æå–ï¼Œä¸CNNçš„åšæ³•å¾ˆç±»ä¼¼</p>
</blockquote>
<ul>
<li><a href="https://plushunter.github.io/2018/03/08/è‡ªç„¶è¯­è¨€å¤„ç†ç³»åˆ—ï¼ˆ8ï¼‰ï¼šRCNN/" target="_blank" rel="external">è‡ªç„¶è¯­è¨€å¤„ç†ç³»åˆ—ï¼ˆ8ï¼‰ï¼šRCNN</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/29201491" target="_blank" rel="external">Kerasä¹‹æ–‡æœ¬åˆ†ç±»å®ç°</a></li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.backend.tensorflow_backend <span class="keyword">import</span> set_session</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line">config = tf.ConfigProto()</span><br><span class="line">config.gpu_options.allow_growth = <span class="keyword">True</span></span><br><span class="line">set_session(tf.Session(config=config))</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">random.seed = <span class="number">42</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> tensorflow <span class="keyword">import</span> set_random_seed</span><br><span class="line">set_random_seed(<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> keras.preprocessing <span class="keyword">import</span> text, sequence</span><br><span class="line"><span class="keyword">from</span> keras.callbacks <span class="keyword">import</span> ModelCheckpoint, Callback</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> f1_score, recall_score, precision_score</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> classifier_bigru <span class="keyword">import</span> TextClassifier</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> gensim.models.keyedvectors <span class="keyword">import</span> KeyedVectors</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> gc</span><br></pre></td></tr></table></figure>
<h3 id="2-3-loss-function"><a href="#2-3-loss-function" class="headerlink" title="2.3 loss function"></a>2.3 loss function</h3><p><a href="https://blog.csdn.net/qinglv1/article/details/85701106" target="_blank" rel="external">å¤šåˆ†ç±»å’Œå¤šæ ‡ç­¾åˆ†ç±»</a>, <a href="https://blog.csdn.net/sinat_26917383/article/details/69803018" target="_blank" rel="external">gensimè®­ç»ƒword2vecåŠç›¸å…³å‡½æ•°</a></p>
<blockquote>
<p>å¤šåˆ†ç±»ï¼šç±»åˆ«æ•°ç›®å¤§äº2ä¸ªï¼Œç±»åˆ«ä¹‹é—´æ˜¯äº’æ–¥çš„ã€‚æ¯”å¦‚æ˜¯çŒ«ï¼Œå°±ä¸èƒ½æ˜¯ç‹—ã€çŒª<br>categorical crossentropy ç”¨æ¥åšå¤šåˆ†ç±»é—®é¢˜<br>binary crossentropy ç”¨æ¥åšå¤šæ ‡ç­¾åˆ†ç±»é—®é¢˜</p>
</blockquote>
<p><a href="https://www.zhihu.com/question/36307214" target="_blank" rel="external">sigmoid,softmax,binary/categorical crossentropyçš„è”ç³»ï¼Ÿ</a></p>
<blockquote>
<p><strong>Binary cross-entropy</strong> å¸¸ç”¨äºäºŒåˆ†ç±»é—®é¢˜ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨äºå¤šåˆ†ç±»é—®é¢˜ï¼Œé€šå¸¸éœ€è¦åœ¨ç½‘ç»œçš„æœ€åä¸€å±‚æ·»åŠ sigmoidè¿›è¡Œé…åˆä½¿ç”¨ </p>
<p><strong>Categorical cross-entropy</strong> é€‚ç”¨äºå¤šåˆ†ç±»é—®é¢˜ï¼Œå¹¶ä½¿ç”¨softmaxä½œä¸ºè¾“å‡ºå±‚çš„æ¿€æ´»å‡½æ•°çš„æƒ…å†µã€‚</p>
</blockquote>
<h3 id="2-4-Early-Stop"><a href="#2-4-Early-Stop" class="headerlink" title="2.4 Early Stop"></a>2.4 Early Stop</h3><p>éœ€è¦åœ¨æ¯ä¸ª epoch ç»“æŸä¹‹åå»è®¡ç®—æ¨¡å‹çš„ F1 å€¼ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½çš„æŒæ¡æ¨¡å‹çš„è®­ç»ƒæƒ…å†µã€‚</p>
<blockquote>
<p>Tips å¦‚æœæˆ‘ä»¬åœ¨è®­ç»ƒä¸­è®¾ç½® metric çš„è¯ï¼Œå¾—åˆ°æ˜¯æ¯ä¸ª batch çš„ F1 å€¼, æ˜¯ä¸é è°±çš„.</p>
</blockquote>
<p>ç±»ä¼¼è¿™æ ·: </p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getClassification</span><span class="params">(arr)</span>:</span></span><br><span class="line">    arr = list(arr)</span><br><span class="line">    <span class="keyword">if</span> arr.index(max(arr)) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-2</span></span><br><span class="line">    <span class="keyword">elif</span> arr.index(max(arr)) == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    <span class="keyword">elif</span> arr.index(max(arr)) == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Metrics</span><span class="params">(Callback)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">on_train_begin</span><span class="params">(self, logs=&#123;&#125;)</span>:</span></span><br><span class="line">        self.val_f1s = []</span><br><span class="line">        self.val_recalls = []</span><br><span class="line">        self.val_precisions = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">on_epoch_end</span><span class="params">(self, epoch, logs=&#123;&#125;)</span>:</span></span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>early_stopï¼Œå°±æ˜¯åœ¨è®­ç»ƒæ¨¡å‹çš„æ—¶å€™ï¼Œå½“åœ¨éªŒè¯é›†ä¸Šæ•ˆæœä¸å†æå‡çš„æ—¶å€™ï¼Œå°±æå‰åœæ­¢è®­ç»ƒï¼ŒèŠ‚çº¦æ—¶é—´ã€‚</p>
</blockquote>
<!--

### 2.5 Class Weight (ç±»åˆ«æƒé‡)

ä¸€èˆ¬è€Œè¨€ï¼Œå½“æ•°æ®é›†æ ·æœ¬ä¸å‡è¡¡çš„æ—¶å€™ï¼Œé€šè¿‡è®¾ç½®æ­£è´Ÿæ ·æœ¬æƒé‡ï¼Œå¯ä»¥æé«˜ä¸€äº›æ•ˆæœï¼Œä½†æ˜¯åœ¨è¿™é“é¢˜ç›®é‡Œé¢ï¼Œæˆ‘å¯¹4ä¸ªç±»åˆ«åˆ†åˆ«è®¾ç½®äº†class_weight ä¹‹åï¼Œæˆ‘å‘ç°æ•ˆæœç«Ÿç„¶å˜å¾—æ›´å·®äº†ã€‚

-->
<h3 id="2-6-Max-Length-padding"><a href="#2-6-Max-Length-padding" class="headerlink" title="2.6 Max Length (padding)"></a>2.6 Max Length (padding)</h3><blockquote>
<p>æ‰€æœ‰è¯„è®ºå¹³å‡çš„é•¿åº¦æ˜¯ 200 å·¦å³ï¼Œmax_length å– 2 * 200ï¼Œæ•ˆæœä¸€ç›´ä¸ç»™åŠ›.</p>
<p>å°† max_length æ”¹ä¸º 1200 ï¼Œmacro f-score æ•ˆæœæ˜æ˜¾æå‡</p>
<p>Tipsï¼š å¤šåˆ†ç±»é—®é¢˜ä¸­ï¼Œé‚£äº›é•¿åº¦å¾ˆé•¿çš„è¯„è®ºå¯èƒ½ä¼šæœ‰éƒ¨åˆ†å±äºé‚£äº›æ ·æœ¬æ•°å¾ˆå°‘çš„ç±»åˆ«ï¼Œpaddingè¿‡çŸ­ä¼šå¯¼è‡´è¿™äº›é•¿è¯„è®ºæ— æ³•è¢«æ­£ç¡®åˆ’åˆ†ã€‚</p>
</blockquote>
<h2 id="3-ELMO-Like"><a href="#3-ELMO-Like" class="headerlink" title="3. ELMO-Like"></a>3. ELMO-Like</h2><!--<img src="/images/deeplearning/AI-Challenger-23.webp" width="850" alt=""/>
-->
<p>ï¼ˆè…¾è®¯è¯å‘é‡ 16Gï¼Œ 800W * 200 = 5W * 200 + è‡ªè®­è¯å‘ 5W * 128 ï¼‰ + BiGRU ä¸­å±‚è¯­ä¹‰ + BiGRU é«˜å±‚è¯­ä¹‰</p>
<blockquote>
<p>10W+ æ•°æ®é›†ï¼Œè¯é¢‘å‰5Wçš„è¯, æ¯ä¸ªè¯„è®ºä¸€ä¸ª epoch è¾“å…¥1æ¬¡ï¼Œ å‚æ•°å…±äº«</p>
<p>328 + 256 + 256 è¿‘1000ç»´åº¦ï¼ŒBatch 128ï¼Œ 512ç»´åº¦çš„æ—¶å€™ï¼ŒBatch 256 å¯ä»¥æ”¾å¾—ä¸‹.</p>
<p>æœºå™¨é…ç½®ï¼š 32G å†…å­˜ï¼Œ i9 CPUï¼Œ æ˜¾å¡å‹å· 1080ï¼Œ æ˜¾å­˜8G</p>
</blockquote>
<p><strong>å¤šä»»åŠ¡å­¦ä¹ </strong></p>
<blockquote>
<ul>
<li><strong>åˆ†åˆ«è®­ç»ƒ20ä¸ªåˆ†ç±»æ¨¡å‹çš„è®¡ç®—å¤æ‚åº¦è¾ƒé«˜</strong></li>
<li><strong>20ä¸ªåˆ†ç±»æ¨¡å‹å ç”¨å­˜å‚¨ç©ºé—´</strong></li>
<li><strong>å¤šä»»åŠ¡å­¦ä¹ å¯ä»¥é€šè¿‡ç‰¹å¾å…±äº«é™ä½è¿‡æ‹Ÿåˆé£é™©</strong></li>
</ul>
</blockquote>
<p>epoch</p>
<blockquote>
<p>ä¸€æ¬¡è¾“å…¥ä¸€ä¸ªBatch=128æ¡è¯„è®ºï¼Œ20ä¸ªå±æ€§éƒ½4åˆ†ç±»æˆåŠŸï¼Œ 1 ä¸ª epochï¼Œ 1200ç§’=20å¤šåˆ†é’Ÿ</p>
<p>æ¯ä¸ªè¯„è®ºä¸€ä¸ª epoch è¾“å…¥1æ¬¡ï¼Œ å‚æ•°å…±äº«</p>
<p>maxLen 500 å·¦å³</p>
</blockquote>
<hr>
<blockquote>
<p>1.5W è·‘ä¸€æ¬¡æµ‹è¯•é›† 1~2 åˆ†é’Ÿ.<br>20W, è·‘ä¸€æ¬¡æµ‹è¯•é›† 10å¤šåˆ†é’Ÿ å·¦å³</p>
</blockquote>
<h2 id="4-Summary"><a href="#4-Summary" class="headerlink" title="4. Summary"></a>4. Summary</h2><blockquote>
<ol>
<li>RNN ä¼˜ç‚¹ï¼š æœ€å¤§ç¨‹åº¦æ•æ‰ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè¿™å¯èƒ½æœ‰åˆ©äºæ•è·é•¿æ–‡æœ¬çš„è¯­ä¹‰ã€‚</li>
<li>RNN ç¼ºç‚¹ï¼š æ˜¯ä¸€ä¸ªæœ‰åå€šçš„æ¨¡å‹ï¼Œåœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œåé¢çš„å•è¯æ¯”å…ˆå‰çš„å•è¯æ›´å…·ä¼˜åŠ¿ã€‚å› æ­¤ï¼Œå½“å®ƒè¢«ç”¨äºæ•è·æ•´ä¸ªæ–‡æ¡£çš„è¯­ä¹‰æ—¶ï¼Œå®ƒå¯èƒ½ä¼šé™ä½æ•ˆç‡ï¼Œå› ä¸ºå…³é”®ç»„ä»¶å¯èƒ½å‡ºç°åœ¨æ–‡æ¡£ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œè€Œä¸æ˜¯æœ€åã€‚</li>
<li>CNN ä¼˜ç‚¹ï¼š æå–æ•°æ®ä¸­çš„å±€éƒ¨ä½ç½®çš„ç‰¹å¾ï¼Œç„¶åå†æ‹¼æ¥æ± åŒ–å±‚ã€‚ CNNå¯ä»¥æ›´å¥½åœ°æ•æ‰æ–‡æœ¬çš„è¯­ä¹‰ã€‚æ˜¯O(n)</li>
<li>CNN ä¼˜ç‚¹ï¼š ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨åˆ¤æ–­å“ªäº›ç‰¹æ€§åœ¨æ–‡æœ¬åˆ†ç±»ä¸­æ‰®æ¼”å…³é”®è§’è‰²çš„æ± åŒ–å±‚ï¼Œä»¥æ•è·æ–‡æœ¬ä¸­çš„å…³é”®ç»„ä»¶ã€‚</li>
</ol>
</blockquote>
<hr>
<p>åœ¨æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œæœ‰å“ªäº›å¯¹æ€§èƒ½æœ‰é‡è¦å½±å“çš„tricksï¼Ÿ</p>
<blockquote>
<ol>
<li>æ•°æ®é¢„å¤„ç†æ—¶vocabçš„é€‰å–ï¼ˆå‰Nä¸ªé«˜é¢‘è¯æˆ–è€…è¿‡æ»¤æ‰å‡ºç°æ¬¡æ•°å°äº3çš„è¯ç­‰ç­‰ï¼‰</li>
<li>è¯å‘é‡çš„é€‰æ‹©ï¼Œå¯ä»¥ä½¿ç”¨é¢„è®­ç»ƒå¥½çš„è¯å‘é‡å¦‚è°·æ­Œã€facebookå¼€æºå‡ºæ¥çš„ï¼Œå½“è®­ç»ƒé›†æ¯”è¾ƒå¤§çš„æ—¶å€™ä¹Ÿå¯ä»¥è¿›è¡Œå¾®è°ƒæˆ–è€…éšæœºåˆå§‹åŒ–ä¸è®­ç»ƒåŒæ—¶è¿›è¡Œã€‚è®­ç»ƒé›†è¾ƒå°æ—¶å°±åˆ«å¾®è°ƒäº†</li>
<li>ç»“åˆè¦ä½¿ç”¨çš„æ¨¡å‹ï¼Œè¿™é‡Œå¯ä»¥æŠŠæ•°æ®å¤„ç†æˆcharã€wordæˆ–è€…éƒ½ç”¨ç­‰</li>
<li>æœ‰æ—¶å°†è¯æ€§æ ‡æ³¨ä¿¡æ¯ä¹ŸåŠ å…¥è®­ç»ƒæ•°æ®ä¼šæ”¶åˆ°æ¯”è¾ƒå¥½çš„æ•ˆæœ</li>
<li>è‡³äºPADçš„è¯ï¼Œå–å‡å€¼æˆ–è€…ä¸€ä¸ªç¨å¾®æ¯”è¾ƒå¤§çš„æ•°ï¼ˆæ¯”è¾ƒå¤§çš„å€¼ï¼Œè´¹ç‚¹ç©ºé—´ï¼Œè°¨æ…ä½¿ç”¨ï¼‰</li>
<li>ç¥ç»ç½‘ç»œç»“æ„çš„è¯åˆ°æ²¡æœ‰ä»€ä¹ˆè¦è¯´çš„ï¼ŒåŠ ä¸Šdropoutå’ŒBNå¯èƒ½ä¼šæ›´å¥½ã€‚æ¨¡å‹è¿™å—è¿˜æ˜¯è¦å…·ä½“é—®é¢˜å…·ä½“åˆ†æå§.</li>
<li>æ–‡æœ¬é¢†åŸŸç”¨è¿‡æ•°æ®å¢å¼ºçš„æ–¹æ³•ï¼Œå°±æ˜¯å¯¹æ–‡æœ¬è¿›è¡Œéšæœºçš„shuffleå’Œdropç­‰æ“ä½œæ¥å¢åŠ æ•°æ®é‡</li>
</ol>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/liuchonge/article/details/77140719" target="_blank" rel="external">æ·±åº¦å­¦ä¹ ä¸æ–‡æœ¬åˆ†ç±»æ€»ç»“ç¬¬ä¸€ç¯‡â€“å¸¸ç”¨æ¨¡å‹æ€»ç»“</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/25928551" target="_blank" rel="external">ç”¨æ·±åº¦å­¦ä¹ ï¼ˆCNN RNN Attentionï¼‰è§£å†³å¤§è§„æ¨¡æ–‡æœ¬åˆ†ç±»é—®é¢˜ - ç»¼è¿°å’Œå®è·µ</a></li>
<li><a href="https://www.zhihu.com/question/59236897" target="_blank" rel="external">ä¸¥é‡æ•°æ®å€¾æ–œæ–‡æœ¬åˆ†ç±»ï¼Œæ¯”å¦‚æ­£åæ¯”1:20ï½100ï¼Œé€‚åˆä»€ä¹ˆmodel</a></li>
<li><a href="https://github.com/xueyouluo/fsauor2018" target="_blank" rel="external">ç¬¬16åè§£å†³æ–¹æ¡ˆ</a>ã€ <a href="https://github.com/BigHeartC/Al_challenger_2018_sentiment_analysis" target="_blank" rel="external">ç¬¬17åè§£å†³æ–¹æ¡ˆ</a>ã€ <a href="https://github.com/brightmart/sentiment_analysis_fine_grain" target="_blank" rel="external">åŸºäºBertçš„å°è¯•</a></li>
</ul>
<!--

- [AI-Challenger Baseline (0.70201) å‰ç¯‡ æ€»è§ˆ][niu1]
- [AI-Challenger Baseline (0.70201) åç¯‡ è®­ç»ƒ][niu2]
- [2019 11å®¶äº’è”ç½‘å…¬å¸ï¼ŒNLPé¢ç»å›é¦ˆ][v1]
- [æš‘æœŸå®ä¹ NLPç®—æ³•å²—é¢ç»æ€»ç»“][v2]
- [å‘œå‘œå“ˆåšä¸€ä¸ªæœ‰æ€æƒ³çš„ç å†œ][v3]
- [AI Challenger 2018 è¿›è¡Œæ—¶][w6]
- [AI Challenger 2018 ç»†ç²’åº¦ç”¨æˆ·è¯„è®ºæƒ…æ„Ÿåˆ†æ fastText Baseline][w7]

-->
<ul>
<li><a href="http://www.52nlp.cn/ai-challenger-2018-æ–‡æœ¬æŒ–æ˜ç±»ç«èµ›ç›¸å…³è§£å†³æ–¹æ¡ˆåŠä»£ç æ±‡æ€»" target="_blank" rel="external">ai-challenger-2018-æ–‡æœ¬æŒ–æ˜ç±»ç«èµ›ç›¸å…³è§£å†³æ–¹æ¡ˆåŠä»£ç æ±‡æ€»</a></li>
<li><a href="http://www.52nlp.cn/qaé—®ç­”ç³»ç»Ÿä¸­çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯å®ç°" target="_blank" rel="external">QAé—®ç­”ç³»ç»Ÿä¸­çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯å®ç°</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/42517760" target="_blank" rel="external">æ·±åº¦å­¦ä¹ ä»£ç å¤ç°ä¹‹å‡å°‘éšæœºæ€§çš„å½±å“</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[User Credit Score]]></title>
      <url>http://shopee.ai/2019/06/23/datascience/credit-score/</url>
      <content type="html"><![CDATA[<p><img src="/images/datascience/credit-score-02.jpg" width="550" alt="Credit Score Card"></p>
<a id="more"></a>
<p>ä¿¡ç”¨è¯„åˆ†å¡æ¨¡å‹æ˜¯æœ€å¸¸è§çš„é‡‘èé£æ§æ‰‹æ®µä¹‹ä¸€ï¼Œå®ƒæ˜¯æŒ‡æ ¹æ®å®¢æˆ·çš„å„ç§å±æ€§å’Œè¡Œä¸ºæ•°æ®ï¼Œåˆ©ç”¨ä¸€å®šçš„ä¿¡ç”¨è¯„åˆ†æ¨¡å‹ï¼Œå¯¹å®¢æˆ·è¿›è¡Œä¿¡ç”¨è¯„åˆ†ï¼Œæ®æ­¤å†³å®šæ˜¯å¦ç»™äºˆæˆä¿¡ä»¥åŠæˆä¿¡çš„é¢åº¦å’Œåˆ©ç‡ï¼Œä»è€Œè¯†åˆ«å’Œå‡å°‘åœ¨é‡‘èäº¤æ˜“ä¸­å­˜åœ¨çš„äº¤æ˜“é£é™©ã€‚</p>
<p>æŒ‰ç…§å€Ÿè´·ç”¨æˆ·çš„å€Ÿè´·æ—¶é—´ï¼Œè¯„åˆ†å¡æ¨¡å‹å¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ul>
<li>è´·å‰ï¼š Application score cardï¼Œ åˆç§°ä¸ºAå¡</li>
<li>è´·ä¸­ï¼š Behavior score cardï¼Œ åˆç§°ä¸ºBå¡</li>
<li>è´·åï¼š Collection score cardï¼Œ åˆç§°ä¸ºCå¡</li>
</ul>
<p>ç”³è¯·è¯„åˆ†å¡è¦æ±‚æœ€ä¸ºä¸¥æ ¼ï¼Œä¹Ÿæœ€ä¸ºé‡è¦ï¼Œå¯è§£é‡Šæ€§ä¹Ÿè¦æ±‚æœ€å¼ºï¼Œä¸€èˆ¬ä¸»æµæ¨¡å‹ä¸º LR.</p>
<blockquote>
<p>å¦‚éœ€äº†è§£æ›´å¤šå…³äº äº’è”ç½‘é‡‘èé£æ§ çš„ç›¸å…³èƒŒæ™¯çŸ¥è¯†ï¼Œè¯·å‚é˜…ï¼š</p>
<ul>
<li><p><a href="/2018/04/20/datascience/internet-finance-1/">Internet Financial Risk Control (part1) ï¼š The Fraud Risk of Financial Technology Enterprises</a></p>
</li>
<li><p><a href="/2018/04/21/datascience/internet-finance-2/">Internet Financial Risk Control (part2) ï¼š model strategy</a></p>
</li>
<li><p><a href="/2018/04/23/datascience/internet-finance-3/">Internet Financial Risk Control (part3) ï¼š Lending Club Data dev</a></p>
</li>
</ul>
</blockquote>
<h2 id="1-æ•°æ®è·å–"><a href="#1-æ•°æ®è·å–" class="headerlink" title="1. æ•°æ®è·å–"></a>1. æ•°æ®è·å–</h2><ul>
<li>é‡‘èæœºæ„è‡ªèº«å­—æ®µï¼š å¹´é¾„ï¼Œæˆ·ç±ï¼Œæ€§åˆ«ï¼Œæ”¶å…¥ï¼Œâ€¦ï¼›</li>
<li>ç¬¬ä¸‰æ–¹æœºæ„çš„æ•°æ®ï¼š æ¶ˆè´¹è¡Œä¸ºâ€¦</li>
</ul>
<blockquote>
<p><strong>æ•°æ®æƒ…å†µï¼š</strong></p>
<p>23W+ å»æ‰ä¸€äº›ç°ç”¨æˆ·ï¼Œå‰©ä½™ </p>
<p>M1æ ‡å‡†ï¼š å¥½/å: 13W+ å 4K</p>
<p>30~50 : 1 éƒ½æ˜¯æ­£å¸¸çš„</p>
</blockquote>
<h2 id="2-EDA"><a href="#2-EDA" class="headerlink" title="2. EDA"></a>2. EDA</h2><p>Exploratory Data Analysis</p>
<blockquote>
<p>æ¯ä¸ªå­—æ®µçš„ç¼ºå¤±å€¼æƒ…å†µã€å¼‚å¸¸å€¼æƒ…å†µã€å¹³å‡å€¼ã€ä¸­ä½æ•°ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€åˆ†å¸ƒæƒ…å†µç­‰</p>
</blockquote>
<ul>
<li><a href="https://www.zhihu.com/question/22320408/answer/141973314" target="_blank" rel="external">ç‰›é¡¿æ’å€¼çš„å‡ ä½•è§£é‡Šæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</a></li>
<li><a href="https://www.zhihu.com/question/58333118" target="_blank" rel="external">å¦‚ä½•ç›´è§‚åœ°ç†è§£æ‹‰æ ¼æœ—æ—¥æ’å€¼æ³•ï¼Ÿ</a></li>
<li><a href="https://www.matongxue.com/madocs/126.html" target="_blank" rel="external">ä»ç‰›é¡¿æ’å€¼æ³•åˆ°æ³°å‹’å…¬å¼</a></li>
<li><a href="https://www.zhihu.com/question/21149770/answer/111173412" target="_blank" rel="external">æ³°å‹’å…¬å¼ä¸€å¥è¯æè¿°ï¼šå°±æ˜¯ç”¨å¤šé¡¹å¼å‡½æ•°å»é€¼è¿‘å…‰æ»‘å‡½æ•°</a></li>
</ul>
<blockquote>
<p>ç¼ºå¤±å€¼çš„å¤„ç†ï¼Œè¿˜å¯ä»¥ç”¨ RF å»æ‹Ÿåˆ.</p>
</blockquote>
<h2 id="3-æ•°æ®é¢„å¤„ç†"><a href="#3-æ•°æ®é¢„å¤„ç†" class="headerlink" title="3. æ•°æ®é¢„å¤„ç†"></a>3. æ•°æ®é¢„å¤„ç†</h2><p>(1). æ•°æ®æ¸…æ´—</p>
<p>(2). å˜é‡åˆ†ç®±</p>
<p>(3). WOE ç¼–ç </p>
<blockquote>
<ol>
<li>ç¼ºå¤±å€¼å¤ªå¤š</li>
<li>éæ•°å€¼å˜é‡å¤š (emp_title..)</li>
<li>id, member_id ç­‰</li>
<li>loan_amnt != df.funded_amnt</li>
<li>ç©ºå€¼å¡«å……ä¸º 0</li>
<li>å¸¦ % çš„æµ®ç‚¹ï¼Œå»æ‰ %</li>
</ol>
<p>å¥½åæ¯”æ˜¯ 34:1 æ˜¯éå¸¸éš¾ä»¥å¤„ç†çš„æ ·æœ¬äº†.</p>
</blockquote>
<h3 id="3-1-æ•°æ®æ¸…æ´—"><a href="#3-1-æ•°æ®æ¸…æ´—" class="headerlink" title="3.1 æ•°æ®æ¸…æ´—"></a>3.1 æ•°æ®æ¸…æ´—</h3><p>ç¼ºå¤±å€¼å¤ªå¤š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¤„ç†å¯¹è±¡ç±»å‹çš„ç¼ºå¤±ï¼Œunique</span></span><br><span class="line">df.select_dtypes(include=[<span class="string">'O'</span>]).describe().T.\</span><br><span class="line">assign(missing_pct=df.apply(<span class="keyword">lambda</span> x : (len(x)-x.count())/float(len(x))))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼ºå¤±å€¼ç‰¹åˆ«é«˜çš„å¯ä»¥åˆ é™¤æ‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ‘ä»¬å¯ä»¥å¯¹ éæ•°å€¼å‹ å˜é‡ï¼Œåšä¸€ä¸ªå¾ªç¯ï¼Œå‘ç° zip_code æœ‰ 873 ä¸ª unique çš„å€¼ï¼Œé‚£ä¹ˆå…ˆä¸å¤„ç†</span></span><br><span class="line"><span class="keyword">for</span> col <span class="keyword">in</span> df.select_dtypes(include=[<span class="string">'object'</span>]).columns:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"Column &#123;&#125; has &#123;&#125; unique instances"</span>.format( col, len(df[col].unique())) )</span><br></pre></td></tr></table></figure>
<h3 id="3-2-å˜é‡åˆ†ç®±"><a href="#3-2-å˜é‡åˆ†ç®±" class="headerlink" title="3.2 å˜é‡åˆ†ç®±"></a>3.2 å˜é‡åˆ†ç®±</h3><ul>
<li>å¯¹è¿ç»­å˜é‡è¿›è¡Œåˆ†æ®µç¦»æ•£åŒ–ï¼›</li>
<li>å°†å¤šçŠ¶æ€çš„ç¦»æ•£å˜é‡è¿›è¡Œåˆå¹¶ï¼Œå‡å°‘ç¦»æ•£å˜é‡çš„çŠ¶æ€æ•°ã€‚</li>
</ul>
<p>å…ˆå¯ä»¥ç²—åˆ†ç®±ï¼Œä¹‹ååœ¨åˆå¹¶ã€‚ æ¯”å¦‚ å¹´é¾„å–å€¼æ•°æœ‰ 30ä¸ªï¼Œé‚£ä¹ˆåˆ†ä¸º 30 ç®±ï¼Œæœ€ååˆä¸º 5 ç®±ã€‚<br>å…¶ä»–å˜é‡å¯èƒ½ç²—åˆ†ç®±ä¸º 100 ç®±ï¼Œä¹‹ååˆå¹¶.</p>
<blockquote>
<p>åˆ†ç®±æ–¹æ³•å¾ˆå¤šï¼Œæœ€å¸¸è§çš„æ–¹æ³•ä¹‹ä¸€ï¼š Mergeåˆ†ç®±ä¸­çš„ Chimerge åˆ†ç®±.</p>
<p>Chimerge å…¶åŸºæœ¬æ€æƒ³æ˜¯å¦‚æœä¸¤ä¸ªç›¸é‚»çš„åŒºé—´å…·æœ‰ç±»ä¼¼çš„ç±»åˆ†å¸ƒï¼Œåˆ™è¿™ä¸¤ä¸ªåŒºé—´åˆå¹¶ï¼›<br>å¦åˆ™ï¼Œå®ƒä»¬åº”ä¿æŒåˆ†å¼€ã€‚Chimergeé€šå¸¸é‡‡ç”¨<strong>å¡æ–¹å€¼</strong>æ¥è¡¡é‡ä¸¤ç›¸é‚»åŒºé—´çš„ç±»åˆ†å¸ƒæƒ…å†µã€‚</p>
<ul>
<li>è¿ç»­å€¼æŒ‰å‡åºæ’åˆ—ï¼Œç¦»æ•£å€¼å…ˆè½¬åŒ–ä¸ºåå®¢æˆ·çš„æ¯”ç‡ï¼Œç„¶åå†æŒ‰å‡åºæ’åˆ—ï¼›</li>
<li>ä¸ºäº†å‡å°‘è®¡ç®—é‡ï¼Œå¯¹äºçŠ¶æ€æ•°å¤§äºæŸä¸€é˜ˆå€¼ (å»ºè®®ä¸º100) çš„å˜é‡ï¼Œåˆ©ç”¨ç­‰é¢‘åˆ†ç®±è¿›è¡Œç²—åˆ†ç®±ã€‚</li>
<li>è‹¥æœ‰ç¼ºå¤±å€¼ï¼Œåˆ™ç¼ºå¤±å€¼å•ç‹¬ä½œä¸ºä¸€ä¸ªåˆ†ç®±ã€‚</li>
</ul>
</blockquote>
<p><strong>åˆ†ç®±çš„æœ€å¤§åŒºé—´æ•° &amp; åˆ†ç®±åˆå§‹åŒ–</strong></p>
<blockquote>
<p>è¿™é‡Œæˆ‘å–ï¼š n = 5</p>
<ol>
<li>è¿ç»­å€¼æŒ‰å‡åºæ’åˆ—ï¼Œç¦»æ•£å€¼å…ˆè½¬åŒ–ä¸ºåå®¢æˆ·çš„æ¯”ç‡ï¼Œç„¶åå†æŒ‰å‡åºæ’åˆ—ï¼›</li>
<li>ä¸ºäº†å‡å°‘è®¡ç®—é‡ï¼Œå¯¹äºçŠ¶æ€æ•°å¤§äºæŸä¸€é˜ˆå€¼ (å»ºè®®ä¸º100) çš„å˜é‡ï¼Œåˆ©ç”¨ç­‰é¢‘åˆ†ç®±è¿›è¡Œç²—åˆ†ç®±ã€‚</li>
<li>è‹¥æœ‰ç¼ºå¤±å€¼ï¼Œåˆ™ç¼ºå¤±å€¼å•ç‹¬ä½œä¸ºä¸€ä¸ªåˆ†ç®±ã€‚</li>
</ol>
</blockquote>
<p><strong>åˆå¹¶åŒºé—´ï¼š</strong></p>
<blockquote>
<ol>
<li>å°†å¡æ–¹å€¼æœ€å°çš„ä¸€å¯¹åŒºé—´åˆå¹¶</li>
</ol>
</blockquote>
<p><strong>åˆ†ç®±åå¤„ç†ï¼š</strong></p>
<blockquote>
<ol>
<li>å¯¹äºåå®¢æˆ·æ¯”ä¾‹ä¸º 0 æˆ– 1 çš„åˆ†ç®±è¿›è¡Œåˆå¹¶ (ä¸€ä¸ªåˆ†ç®±å†…ä¸èƒ½å…¨ä¸ºå¥½å®¢æˆ·æˆ–è€…å…¨ä¸ºåå®¢æˆ·)ã€‚</li>
<li>å¯¹äºåˆ†ç®±åæŸä¸€ç®±æ ·æœ¬å æ¯”è¶…è¿‡ 95% çš„ç®±å­è¿›è¡Œåˆ é™¤ã€‚</li>
<li>æ£€æŸ¥ç¼ºå¤±åˆ†ç®±çš„åå®¢æˆ·æ¯”ä¾‹æ˜¯å¦å’Œéç¼ºå¤±åˆ†ç®±ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œè¿›è¡Œåˆå¹¶ã€‚</li>
</ol>
</blockquote>
<p><strong>æ€»ç»“ä¸€ä¸‹ç‰¹å¾åˆ†ç®±çš„ä¼˜åŠ¿</strong>ï¼š</p>
<blockquote>
<ol>
<li>ç‰¹å¾åˆ†ç®±å¯ä»¥æœ‰æ•ˆå¤„ç†ç‰¹å¾ä¸­çš„ç¼ºå¤±å€¼å’Œå¼‚å¸¸å€¼ã€‚</li>
<li>ç‰¹å¾åˆ†ç®±åï¼Œæ•°æ®å’Œæ¨¡å‹ä¼šæ›´ç¨³å®šã€‚</li>
<li>ç‰¹å¾åˆ†ç®±å¯ä»¥ç®€åŒ–é€»è¾‘å›å½’æ¨¡å‹ï¼Œé™ä½æ¨¡å‹è¿‡æ‹Ÿåˆçš„é£é™©ï¼Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</li>
<li>å°†æ‰€æœ‰ç‰¹å¾ç»Ÿä¸€å˜æ¢ä¸ºç±»åˆ«å‹å˜é‡ã€‚</li>
<li>åˆ†ç®±åå˜é‡æ‰å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„è¯„åˆ†å¡æ ¼å¼ï¼Œå³å¯¹ä¸åŒçš„åˆ†æ®µè¿›è¡Œè¯„åˆ†ã€‚</li>
</ol>
<p>åˆ—è¡¨å†…å®¹ç‰¹å¾ç¦»æ•£åŒ–åï¼Œæ¨¡å‹ä¼šæ›´ç¨³å®šï¼Œæ¯”å¦‚å¦‚æœå¯¹ç”¨æˆ·å¹´é¾„ç¦»æ•£åŒ–ï¼Œ20-30ä½œä¸ºä¸€ä¸ªåŒºé—´ï¼Œä¸ä¼šå› ä¸ºä¸€ä¸ªç”¨æˆ·å¹´é¾„é•¿äº†ä¸€å²å°±å˜æˆä¸€ä¸ªå®Œå…¨ä¸åŒçš„äººã€‚å½“ç„¶å¤„äºåŒºé—´ç›¸é‚»å¤„çš„æ ·æœ¬ä¼šåˆšå¥½ç›¸åï¼Œæ‰€ä»¥æ€ä¹ˆåˆ’åˆ†åŒºé—´æ˜¯é—¨å­¦é—®ï¼›</p>
</blockquote>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/52312186" target="_blank" rel="external">å˜é‡åˆ†ç®±å®è·µ</a></li>
<li><a href="http://www.jiehuozhe.com/article/3" target="_blank" rel="external">One-Hotç¼–ç ä¸å“‘å˜é‡</a></li>
<li><a href="https://blog.csdn.net/zengxiantao1994/article/details/77855644" target="_blank" rel="external">æ–¹å·®ã€æ ‡å‡†å·®å’Œå‡æ–¹æ ¹è¯¯å·®çš„åŒºåˆ«æ€»ç»“</a></li>
<li><a href="https://www.cnblogs.com/wzdLY/p/9649101.html" target="_blank" rel="external">åŸºäºå¡æ–¹åˆ†ç®±çš„è¯„åˆ†å¡å»ºæ¨¡</a></li>
</ul>
<hr>
<p><a href="https://www.cnblogs.com/wzdLY/p/9649101.html" target="_blank" rel="external">good åŸºäºå¡æ–¹åˆ†ç®±çš„è¯„åˆ†å¡å»ºæ¨¡ , å¡æ–¹åˆ†å¸ƒâ€”chi-square distribution, Ï‡2-distribution</a></p>
<p><strong>å¡æ–¹å€¼çš„æ„ä¹‰,ä¸¾ä¸ªä¾‹å­ï¼š</strong></p>
<p>æŸåŒ»é™¢å¯¹æŸç§ç—…ç—‡çš„æ‚£è€…ä½¿ç”¨äº† $A$ï¼Œ$B$ ä¸¤ç§ä¸åŒçš„ç–—æ³•ï¼Œç»“æœå¦‚è¡¨1ï¼Œé—®ä¸¤ç§ç–—æ³•æœ‰æ— å·®åˆ«ï¼Ÿ</p>
<table>
<thead>
<tr>
<th style="text-align:center">ç»„åˆ«</th>
<th style="text-align:center">æœ‰æ•ˆ</th>
<th style="text-align:center">æ— æ•ˆ</th>
<th style="text-align:center">åˆè®¡</th>
<th style="text-align:center">æœ‰æ•ˆç‡ï¼ˆ%ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Aç»„</td>
<td style="text-align:center">19</td>
<td style="text-align:center">24</td>
<td style="text-align:center">43</td>
<td style="text-align:center">44.2</td>
</tr>
<tr>
<td style="text-align:center">Bç»„</td>
<td style="text-align:center">34</td>
<td style="text-align:center">10</td>
<td style="text-align:center">44</td>
<td style="text-align:center">77.3</td>
</tr>
<tr>
<td style="text-align:center">åˆè®¡</td>
<td style="text-align:center">53</td>
<td style="text-align:center">34</td>
<td style="text-align:center">87</td>
<td style="text-align:center">60.9</td>
</tr>
</tbody>
</table>
<p>å¯ä»¥è®¡ç®—å‡ºå„æ ¼å†…çš„æœŸæœ›é¢‘æ•°ï¼š</p>
<p>ç¬¬1è¡Œ1åˆ—ï¼š 43Ã—53/87=26.2 , </p>
<p>ç¬¬1è¡Œ2åˆ—ï¼š 43Ã—34/87=16.8 , </p>
<p>ç¬¬2è¡Œ1åˆ—ï¼š 44Ã—53/87=26.8 , </p>
<p>ç¬¬2è¡Œ2åˆ—ï¼š 44Ã—34/87=17.2 </p>
<p>Aç®±</p>
<p>(26.2-19)*(26.2-19) / 26.2  -&gt; <strong>(26.2 æ˜¯ æ­£ç±»çš„æœŸæœ›é¢‘æ•°ï¼Œ 19 æ˜¯çœŸå®é¢‘æ•°)</strong></p>
<p>(16.8-24)*(16.8-24) / 16.8 (16.8 æ˜¯ è´Ÿç±»çš„æœŸæœ›é¢‘æ•°)</p>
<p>Bç®±</p>
<p>(26.8-34)*(26.8-34) / 26.8 (26.8 æ˜¯ æ­£ç±»çš„æœŸæœ›é¢‘æ•°)</p>
<p>(17.2-10)*(17.2-10) / 17.2 (17.2 æ˜¯ è´Ÿç±»çš„æœŸæœ›é¢‘æ•°)</p>
<p>å…ˆå»ºç«‹åŸå‡è®¾ï¼šAã€Bä¸¤ç§ç–—æ³•æ²¡æœ‰åŒºåˆ«ã€‚æ ¹æ®å¡æ–¹å€¼çš„è®¡ç®—å…¬å¼ï¼Œè®¡ç®—ï¼šå¡æ–¹å€¼=10.01ã€‚å¾—åˆ°å¡æ–¹å€¼ä»¥åï¼Œæ¥ä¸‹æ¥éœ€è¦æŸ¥è¯¢å¡æ–¹åˆ†å¸ƒè¡¨æ¥åˆ¤æ–­på€¼ï¼Œä»è€Œåšå‡ºæ¥å—æˆ–æ‹’ç»åŸå‡è®¾çš„å†³å®šã€‚</p>
<details><br>  <summary> ç‚¹å‡»æ—¶çš„åŒºåŸŸæ ‡é¢˜ï¼š å¡æ–¹åˆ†å¸ƒâ€”chi-square distribution, Ï‡2-distribution </summary><br><br><strong>Ï‡2-distribution:</strong><br><br><strong><br>è‹¥ $k$ ä¸ªç‹¬ç«‹çš„éšæœºå˜é‡ $Z_1, Z_2, â€¦, Z_k$ æ»¡è¶³æ ‡å‡†æ­£æ€åˆ†å¸ƒ $N(0,1)$ , åˆ™è¿™ $k$ ä¸ªéšæœºå˜é‡çš„å¹³æ–¹å’Œï¼š<br><br><img src="/images/datascience/credit-score-01.jpeg" width="150" alt=""><br><br>å¡æ–¹æ£€éªŒâ€”Ï‡2æ£€éªŒæ˜¯ä»¥Ï‡2åˆ†å¸ƒä¸ºåŸºç¡€çš„ä¸€ç§å‡è®¾æ£€éªŒæ–¹æ³•ï¼Œä¸»è¦ç”¨äºåˆ†ç±»å˜é‡ä¹‹é—´çš„ç‹¬ç«‹æ€§æ£€éªŒ<br><br>æ€æƒ³æ˜¯æ ¹æ®æ ·æœ¬æ•°æ®æ¨æ–­ <strong><code>æ€»ä½“åˆ†å¸ƒä¸æœŸæœ›åˆ†å¸ƒ æ˜¯å¦æœ‰æ˜¾è‘—æ€§å·®å¼‚</code></strong>ï¼Œæˆ–è€…æ¨æ–­ä¸¤ä¸ªåˆ†ç±»å˜é‡æ˜¯å¦ç›¸å…³æˆ–è€…ç‹¬ç«‹ã€‚<br><br>ä¸€èˆ¬å¯ä»¥è®¾åŸå‡è®¾ä¸º ï¼šè§‚å¯Ÿé¢‘æ•°ä¸æœŸæœ›é¢‘æ•°æ²¡æœ‰å·®å¼‚ï¼Œæˆ–è€…ä¸¤ä¸ªå˜é‡ç›¸äº’ç‹¬ç«‹ä¸ç›¸å…³ã€‚<br><br>å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å…ˆå‡è®¾åŸå‡è®¾æˆç«‹ï¼Œè®¡ç®—å‡ºå¡æ–¹å€¼ï¼Œå¡æ–¹è¡¨ç¤ºè§‚å¯Ÿå€¼ä¸ç†è®ºå€¼é—´çš„åç¦»ç¨‹åº¦ã€‚<br><br><img src="/images/datascience/credit-score-03.png" width="500" alt=""><br><br>å¡æ–¹å€¼åªæ˜¯ä¸€ä¸ªä¸­é—´è¿‡ç¨‹ï¼Œé€šè¿‡å¡æ–¹å€¼è®¡ç®—å‡ºpå€¼ï¼Œpå€¼æ‰æ˜¯æˆ‘ä»¬æœ€é‡è¦éœ€è¦çš„ã€‚på°äº0.05æ„å‘³ç€å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚<br><br>å¡æ–¹å€¼æ˜¯éå‚æ•°æ£€éªŒä¸­çš„ä¸€ä¸ªç»Ÿè®¡é‡ï¼Œä¸»è¦ç”¨äºéå‚æ•°ç»Ÿè®¡åˆ†æä¸­ã€‚å®ƒçš„ä½œç”¨æ˜¯æ£€éªŒæ•°æ®çš„ç›¸å…³æ€§ã€‚å¦‚æœå¡æ–¹å€¼çš„æ˜¾è‘—æ€§ï¼ˆå³SIG.ï¼‰å°äº0.05ï¼Œè¯´æ˜ä¸¤ä¸ªå˜é‡æ˜¯æ˜¾è‘—ç›¸å…³çš„ã€‚<br></strong><br></details>

<hr>
<h3 id="3-3-WOE-weight-of-evidence"><a href="#3-3-WOE-weight-of-evidence" class="headerlink" title="3.3 WOE (weight of evidence)"></a>3.3 WOE (weight of evidence)</h3><blockquote>
<p>WOE ç§°ä¸ºè¯æ®æƒé‡(weight of evidence) , å°†ç¦»æ•£å˜é‡è½¬åŒ–ä¸ºè¿ç»­å˜é‡ã€‚</p>
</blockquote>
<p>WOE å°†é¢„æµ‹ç±»åˆ«çš„é›†ä¸­åº¦çš„å±æ€§ä½œä¸ºç¼–ç çš„æ•°å€¼ã€‚å¯¹äºè‡ªå˜é‡ç¬¬ $i$ ç®±çš„WOEå€¼ä¸ºï¼š</p>
<p><img src="/images/datascience/credit-score-04.svg" width="600" alt=""></p>
<blockquote>
<p>$p_{i1}$ æ˜¯ç¬¬ $i$ ç®±ä¸­åå®¢æˆ·å æ‰€æœ‰åå®¢æˆ·æ¯”ä¾‹</p>
<p>$p_{i0}$ æ˜¯ç¬¬ $i$ ç®±ä¸­å¥½å®¢æˆ·å æ‰€æœ‰å¥½å®¢æˆ·æ¯”ä¾‹</p>
<p><strong><code>WOE: å½“å‰åˆ†ç®±ä¸­åå®¢æˆ·å’Œå¥½å®¢æˆ·çš„æ¯”å€¼ï¼Œå’Œæ‰€æœ‰æ ·æœ¬ä¸­è¿™ä¸ªæ¯”å€¼çš„å·®å¼‚</code></strong></p>
<p>å½“åˆ†ç®±ä¸­åå®¢æˆ·å’Œå¥½å®¢æˆ·çš„æ¯”ä¾‹ç­‰äºéšæœºåå®¢æˆ·å’Œå¥½å®¢æˆ·çš„æ¯”å€¼æ—¶ï¼Œè¯´æ˜è¿™ä¸ªåˆ†ç®±æ²¡æœ‰é¢„æµ‹èƒ½åŠ›ï¼Œå³WOE=0ã€‚ (WOEä¸º0ï¼Œè¯´æ˜è¯¥ç®±å‡ºçš„ç‰¹å¾å¯¹ç»“æœæ²¡æœ‰åŒºåˆ†åº¦)</p>
</blockquote>
<p>å®é™…ä¸ŠWOEç¼–ç ç›¸å½“äºæŠŠåˆ†ç®±åçš„ç‰¹å¾ä»éçº¿æ€§å¯åˆ†æ˜ å°„åˆ°è¿‘ä¼¼çº¿æ€§å¯åˆ†çš„ç©ºé—´å†…:</p>
<p><img src="/images/datascience/credit-score-05.svg" width="600" alt=""></p>
<p>æ€»ç»“ä¸€ä¸‹WOEç¼–ç çš„ä¼˜åŠ¿ï¼š</p>
<blockquote>
<ol>
<li>å¯æå‡æ¨¡å‹çš„é¢„æµ‹æ•ˆæœ</li>
<li>å°†è‡ªå˜é‡è§„èŒƒåˆ°åŒä¸€å°ºåº¦ä¸Š</li>
<li>WOEèƒ½åæ˜ è‡ªå˜é‡å–å€¼çš„è´¡çŒ®æƒ…å†µ</li>
<li>æœ‰åˆ©äºå¯¹å˜é‡çš„æ¯ä¸ªåˆ†ç®±è¿›è¡Œè¯„åˆ†</li>
<li>è½¬åŒ–ä¸ºè¿ç»­å˜é‡ä¹‹åï¼Œä¾¿äºåˆ†æå˜é‡ä¸å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§</li>
<li>ä¸ç‹¬çƒ­å‘é‡ç¼–ç ç›¸æ¯”ï¼Œå¯ä»¥ä¿è¯å˜é‡çš„å®Œæ•´æ€§ï¼ŒåŒæ—¶é¿å…ç¨€ç–çŸ©é˜µå’Œç»´åº¦ç¾éš¾</li>
</ol>
</blockquote>
<hr>
<h2 id="4-å˜é‡ç­›é€‰"><a href="#4-å˜é‡ç­›é€‰" class="headerlink" title="4. å˜é‡ç­›é€‰"></a>4. å˜é‡ç­›é€‰</h2><p>ä¸»è¦è¡¡é‡æ ‡å‡†: å˜é‡çš„é¢„æµ‹èƒ½åŠ›å’Œå˜é‡çš„çº¿æ€§ç›¸å…³æ€§ã€‚</p>
<p>æŒ‘é€‰å…¥æ¨¡å˜é‡:</p>
<blockquote>
<ol>
<li>å˜é‡çš„é¢„æµ‹èƒ½åŠ›</li>
<li>å˜é‡ä¹‹é—´çš„çº¿æ€§ç›¸å…³æ€§</li>
<li>å˜é‡åœ¨ä¸šåŠ¡ä¸Šçš„å¯è§£é‡Šæ€§</li>
</ol>
</blockquote>
<p>å˜é‡ä¸¤ä¸¤ç›¸å…³æ€§åˆ†æï¼Œå˜é‡çš„å¤šé‡å…±çº¿æ€§åˆ†æã€‚</p>
<h3 id="4-1-å•å˜é‡ç­›é€‰"><a href="#4-1-å•å˜é‡ç­›é€‰" class="headerlink" title="4.1 å•å˜é‡ç­›é€‰"></a>4.1 å•å˜é‡ç­›é€‰</h3><p>IV ä¿¡æ¯ä»·å€¼(information value)ï¼Œè‡ªå˜é‡çš„IVå€¼è¶Šå¤§ï¼Œè¡¨ç¤ºè‡ªå˜é‡çš„é¢„æµ‹èƒ½åŠ›è¶Šå¼ºã€‚ ç±»ä¼¼æŒ‡æ ‡è¿˜æœ‰ä¿¡æ¯å¢ç›Šç­‰ã€‚</p>
<p><img src="/images/datascience/credit-score-06.jpg" width="850" alt=""></p>
<p><img src="https://www.zhihu.com/equation?tex=IV_i+%3D%28%5Cfrac%7B%5C%23B_i%7D%7B%5C%23B_T%7D-%5Cfrac%7B%5C%23G_i%7D%7B%5C%23G_T%7D%29+%2A+log+%28%5Cfrac%7B%5C%23B_i%2F%5C%23B_T%7D%7B%5C%23G_i%2F%5C%23G_T%7D%29%3D%28%5Cfrac%7B%5C%23B_i%7D%7B%5C%23B_T%7D-%5Cfrac%7B%5C%23G_i%7D%7B%5C%23G_T%7D%29+%2A+WOE_i+%5C%5C" alt=""></p>
<p>å˜é‡å¯¹åº”çš„IVå€¼ä¸ºæ‰€æœ‰åˆ†ç®±å¯¹åº”çš„ IV å€¼ä¹‹å’Œï¼š</p>
<p><img src="https://www.zhihu.com/equation?tex=IV+%3D+%5Csum%5Climits_i%5En+IV_i+%5C%5C" alt=""></p>
<p>IV å€¼å®é™…ä¸Šå¼å˜é‡å„ä¸ªåˆ†ç®±çš„åŠ æƒæ±‚å’Œã€‚ä¸”å’Œå†³ç­–æ ‘ä¸­çš„äº¤å‰ç†µæœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ã€‚ä»¥ä¸‹ä¸ºäº¤å‰ç†µå…¬å¼ï¼š</p>
<p><img src="/images/datascience/credit-score-07.svg" width="600" alt=""></p>
<p>IVå€¼çš„å…·ä½“çš„è®¡ç®—æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="/images/datascience/credit-score-08.jpg" width="800" alt=""></p>
<p>IVæ’åºåï¼Œé€‰æ‹©IV&gt;0.02çš„å˜é‡ï¼Œå…±58ä¸ªå˜é‡IV&gt;0.02</p>
<h3 id="4-2-å¤šå˜é‡åˆ†æ"><a href="#4-2-å¤šå˜é‡åˆ†æ" class="headerlink" title="4.2 å¤šå˜é‡åˆ†æ"></a>4.2 å¤šå˜é‡åˆ†æ</h3><p>ä¿ç•™ç›¸å…³æ€§ä½äºé˜ˆå€¼0.6çš„å˜é‡ï¼Œå‰©ä½™27ä¸ªå˜é‡</p>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿›è¡Œç›¸å…³æ€§åˆ†æï¼Ÿ</strong></p>
<blockquote>
<p>ç†æƒ³çŠ¶æ€ä¸‹ï¼Œç³»æ•°æƒé‡ä¼šæœ‰æ— æ•°ç§å–æ³•ï¼Œä½¿ç³»æ•°æƒé‡å˜å¾—æ— æ³•è§£é‡Šï¼Œå¯¼è‡´å˜é‡çš„æ¯ä¸ªåˆ†æ®µçš„å¾—åˆ†ä¹Ÿæœ‰æ— æ•°ç§å–æ³•ï¼ˆåé¢æˆ‘ä»¬ä¼šå‘ç°å˜é‡ä¸­ä¸åŒåˆ†æ®µçš„è¯„åˆ†ä¼šç”¨åˆ°å˜é‡çš„ç³»æ•°ï¼‰</p>
</blockquote>
<p><strong>æ€»ç»“ä¸€ä¸‹å˜é‡ç­›é€‰çš„æ„ä¹‰ï¼š</strong></p>
<ol>
<li>å‰”é™¤è·Ÿç›®æ ‡å˜é‡ä¸å¤ªç›¸å…³çš„ç‰¹å¾</li>
<li>æ¶ˆé™¤ç”±äºçº¿æ€§ç›¸å…³çš„å˜é‡ï¼Œé¿å…ç‰¹å¾å†—ä½™</li>
<li>å‡è½»åæœŸéªŒè¯ã€éƒ¨ç½²ã€ç›‘æ§çš„è´Ÿæ‹…</li>
<li>ä¿è¯å˜é‡çš„å¯è§£é‡Šæ€§</li>
</ol>
<p>ç‰¹å¾ç›¸å…³åº¦ç­›é€‰</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">cor = df.corr()</span><br><span class="line">cor.loc[:,:] = np.tril(cor, k=<span class="number">-1</span>) <span class="comment"># below main lower triangle of an array</span></span><br><span class="line">cor = cor.stack()</span><br><span class="line">cor[(cor &gt; <span class="number">0.55</span>) | (cor &lt; <span class="number">-0.55</span>)] <span class="comment"># ç‰¹å¾ç›¸å…³åº¦ç­›é€‰</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-æ˜¾è‘—æ€§åˆ†æ"><a href="#4-3-æ˜¾è‘—æ€§åˆ†æ" class="headerlink" title="4.3 æ˜¾è‘—æ€§åˆ†æ"></a>4.3 æ˜¾è‘—æ€§åˆ†æ</h3><p>åˆ é™¤På€¼ä¸æ˜¾è‘—çš„å˜é‡ï¼Œå‰©ä½™12ä¸ªå˜é‡äº†ã€‚</p>
<p><strong>GBDT, GBRT, Xgboost, RF grid search</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">param_grid = &#123;</span><br><span class="line">    <span class="string">'learning_rate'</span>: [<span class="number">0.1</span>, <span class="number">0.05</span>, <span class="number">0.02</span>, <span class="number">0.01</span>],</span><br><span class="line">    <span class="string">'max_depth'</span>: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],</span><br><span class="line">    <span class="string">'min_samples_split'</span>: [<span class="number">50</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">400</span>],</span><br><span class="line">    <span class="string">'n_estimators'</span>: [<span class="number">100</span>,<span class="number">200</span>,<span class="number">400</span>,<span class="number">800</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç‰¹å¾é‡è¦åº¦ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Top Tenï¼Œ GBRT top 10 çš„å‚æ•°æœ‰å“ªäº›ï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒï¼Œ GBRT ä¸ä»…æ˜¯ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œè¿˜èƒ½å¸®ä½ ç­›é€‰å˜é‡</span><br><span class="line"># æ¯”å¦‚ feature_importance = 0 çš„è¯ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡ è¿™ä¸ªç‰¹å¾ï¼Œä½ å°±å»æ‰å°±å¯ä»¥äº†</span><br><span class="line"># é‡æ–°ç”¨æ¨¡å‹GBRTé‡æ–°è·‘ï¼Œæˆ–è€…ç”¨å…¶ä»–æ¨¡å‹LRè·‘</span><br><span class="line"># æˆ–è€…å…¶ä»–çš„ RF ä¹Ÿå¯ä»¥å¸®åŠ©ä½ åšç‰¹å¾ç­›é€‰</span><br></pre></td></tr></table></figure>
<p>æœ€åé€‰æ‹©å‡º 84 ä¸ªå˜é‡ï¼Œ ç„¶ååœ¨æ”¾åˆ°ä¸åŒçš„æ¨¡å‹ä¸­åšè®­ç»ƒï¼Œåœ¨ ensemble åº”è¯¥æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ã€‚</p>
<p><strong>ç‰¹å¾ä¸ç¨³å®šçš„ï¼Œä¸å¯ä»¥ä½œä¸ºå…¥æ¨¡å˜é‡ï¼š</strong></p>
<blockquote>
<p>æŒ‘é€‰å˜é‡çš„æ—¶å€™ï¼Œå¼€å§‹æ¯ä¸ªæœˆæˆ‘ä¸€ç›´åœ¨çœ‹å®ƒçš„å‡å€¼å’Œæ–¹å·®çš„å˜åŒ–æ˜¯å¦åœ¨å®¹å¿çš„èŒƒå›´å†…ï¼Œè¶…è¿‡50%èˆ</p>
</blockquote>
<h2 id="5-è½¬åŒ–ä¸ºè¯„åˆ†å¡"><a href="#5-è½¬åŒ–ä¸ºè¯„åˆ†å¡" class="headerlink" title="5. è½¬åŒ–ä¸ºè¯„åˆ†å¡"></a>5. è½¬åŒ–ä¸ºè¯„åˆ†å¡</h2><p>å°† odds å¸¦å…¥å¯å¾—ï¼š</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Ctext%7Blog%7D%28+%5Ctext%7Bodds%7D%29+%3D+%5Ctheta%5ETx+%5C%5C" alt=""></p>
<p>è¯„åˆ†å¡çš„åˆ†å€¼å¯ä»¥å®šä¹‰ä¸ºæ¯”ç‡å¯¹æ•°çš„çº¿æ€§è¡¨è¾¾æ¥ï¼Œå³ï¼š </p>
<p><img src="https://www.zhihu.com/equation?tex=Score+%3D+A+-B+%5Ctimes+%5Ctext%7Blog%7D%28+%5Ctext%7Bodds%7D%29+%5C%5C" alt=""></p>
<p>æœ€ç»ˆå¾—åˆ°è¯„åˆ†å¡æ¨¡å‹ï¼š</p>
<p><img src="https://pic2.zhimg.com/80/v2-fec98ff9de65d835a5be217f01f678a5_hd.jpg" alt=""></p>
<p>éœ€è¦è®¾å®šä¸¤ä¸ªå‡è®¾ï¼š</p>
<ul>
<li>æŸä¸ªç‰¹å®šçš„è¿çº¦æ¦‚ç‡ä¸‹çš„é¢„æœŸè¯„åˆ†ï¼Œå³æ¯”ç‡ å³æ¯”ç‡ $\text{odds}$ ä¸º $Î¸_0$ æ—¶çš„åˆ†æ•°ä¸º $P_0$</li>
<li>è¯¥oddsä¸º$2Î¸_0$æƒ…å†µä¸‹è¯„åˆ†çš„å‡å°‘é‡ï¼ˆPDOï¼‰</li>
</ul>
<h2 id="6-KS-è¯„ä¼°"><a href="#6-KS-è¯„ä¼°" class="headerlink" title="6. KS è¯„ä¼°"></a>6. KS è¯„ä¼°</h2><p>K-Sæ›²çº¿å…¶å®æ•°æ®æ¥æºå’Œæœ¬è´¨å’ŒROCæ›²çº¿æ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯ROCæ›²çº¿æ˜¯æŠŠçœŸæ­£ç‡å’Œå‡æ­£ç‡å½“ä½œæ¨ªçºµè½´ï¼Œè€ŒK-Sæ›²çº¿æ˜¯æŠŠçœŸæ­£ç‡å’Œå‡æ­£ç‡éƒ½å½“ä½œæ˜¯çºµè½´ï¼Œæ¨ªè½´åˆ™ç”±é€‰å®šçš„é˜ˆå€¼æ¥å……å½“ã€‚</p>
<blockquote>
<p>ç”±äºkså€¼èƒ½æ‰¾å‡ºæ¨¡å‹ä¸­å·®å¼‚æœ€å¤§çš„ä¸€ä¸ªåˆ†æ®µï¼Œå› æ­¤é€‚åˆç”¨äºcut_offï¼Œåƒè¯„åˆ†å¡è¿™ç§å°±å¾ˆé€‚åˆç”¨kså€¼æ¥è¯„ä¼°ã€‚ä½†æ˜¯kså€¼åªèƒ½åæ˜ å‡ºå“ªä¸ªåˆ†æ®µæ˜¯åŒºåˆ†æœ€å¤§çš„ï¼Œè€Œä¸èƒ½æ€»ä½“åæ˜ å‡ºæ‰€æœ‰åˆ†æ®µçš„æ•ˆæœï¼Œå› æœAUCå€¼æ›´èƒ½èƒœä»»ã€‚ </p>
<p>KSå€¼è¡¨ç¤ºäº†æ¨¡å‹å°†+å’Œ-åŒºåˆ†å¼€æ¥çš„èƒ½åŠ›ã€‚å€¼è¶Šå¤§ï¼Œæ¨¡å‹çš„é¢„æµ‹å‡†ç¡®æ€§è¶Šå¥½ã€‚</p>
</blockquote>
<p>KS å€¼è¡¨ç¤ºäº†æ¨¡å‹åŒºåˆ†å¥½åå®¢æˆ·çš„èƒ½åŠ›ã€‚</p>
<p>ç­‰åˆ† 10 ä»½ï¼Œä¸¤æ¡æ´›ä¼¦å…¹æ›²çº¿ï¼Œ TPR ä¸ FPR çš„å·®å€¼. å¥½åå®¢æˆ·çš„åŒºç¨‹åº¦.</p>
<p>å…¶å®è´¨æ˜¯ $TPR - FPR$ éšå¥½åå®¢æˆ·é˜ˆå€¼å˜åŒ–çš„æœ€å¤§å€¼ã€‚KS å€¼è¶Šå¤§ï¼Œæ¨¡å‹çš„é¢„æµ‹å‡†ç¡®æ€§è¶Šå¥½ã€‚ä¸€èˆ¬ï¼ŒKS &gt; 0.4 å³è®¤ä¸ºæ¨¡å‹æœ‰å¾ˆå¥½çš„é¢„æµ‹æ€§èƒ½ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/34370741" target="_blank" rel="external">Pythonä¸‰å¤§è¯„åˆ†å¡ä¹‹è¡Œä¸ºè¯„åˆ†å¡</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/36539125" target="_blank" rel="external">ç©è½¬é€»è¾‘å›å½’ä¹‹é‡‘èè¯„åˆ†å¡æ¨¡å‹</a></li>
<li><a href="http://www.sfinst.com/?p=1389" target="_blank" rel="external">æ‹æ‹è´·æ•™ä½ å¦‚ä½•ç”¨GBDTåšè¯„åˆ†å¡</a></li>
<li><a href="https://blog.csdn.net/zs15321583801/article/details/88217839" target="_blank" rel="external">æ¨¡å‹åŒºåˆ†åº¦æŒ‡æ ‡ KS å€¼</a></li>
<li><a href="https://blog.csdn.net/Orange_Spotty_Cat/article/details/82425113" target="_blank" rel="external">åˆ†ç±»æ¨¡å‹è¯„åˆ¤æŒ‡æ ‡ ROCï¼ŒAUCï¼ŒGINIï¼ŒKS</a></li>
<li><a href="https://www.cnblogs.com/gczr/p/10354646.html" target="_blank" rel="external">æ·±å…¥ç†è§£KS</a></li>
<li><a href="http://rosen.xyz/2018/02/01/AUCå’ŒKSæŒ‡æ ‡" target="_blank" rel="external">AUCå’ŒKSæŒ‡æ ‡</a></li>
<li><a href="https://blog.csdn.net/sscc_learning/article/details/86707005" target="_blank" rel="external">ä¸€æ–‡å®Œå…¨ç†è§£æ¨¡å‹ksæŒ‡æ ‡å«ä¹‰å¹¶ç”»å‡ºksæ›²çº¿</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Bert æœ€ç®€å•çš„æ‰“å¼€å§¿åŠ¿]]></title>
      <url>http://shopee.ai/2019/06/21/nlp/BERT_tutorial_1/</url>
      <content type="html"><![CDATA[<p>2018.10 google å‘å¸ƒ BERT æ¨¡å‹. å¼•çˆ†æ•´ä¸ªAIåœˆçš„ NLP æ¨¡å‹. åœ¨ NLPé¢†åŸŸ åˆ·æ–° 11 é¡¹è®°å½•.</p>
<p>BERT åˆ›æ–°ç‚¹åœ¨äºæå‡ºäº†ä¸€å¥—å®Œæ•´çš„æ–¹æ¡ˆï¼Œåˆ©ç”¨ä¹‹å‰æœ€æ–°çš„ç®—æ³•æ¨¡å‹ï¼Œå»è§£å†³å„ç§å„æ ·çš„ NLP ä»»åŠ¡.</p>
<a id="more"></a>
<p><img src="/images/nlp/bert-sample-1.png" width="700" alt="Bertçš„é¢„è®­ç»ƒå’Œå¾®è°ƒï¼ˆå›¾ç‰‡æ¥è‡ªBertçš„åŸè®ºæ–‡ï¼‰"></p>
<h2 id="å½“Berté‡ä¸ŠKeras"><a href="#å½“Berté‡ä¸ŠKeras" class="headerlink" title="å½“Berté‡ä¸ŠKeras"></a>å½“Berté‡ä¸ŠKeras</h2><p>åœ¨Kerasä¸‹å¯¹Bertæœ€å¥½çš„å°è£…æ˜¯ï¼š</p>
<p>keras-bertï¼š<a href="https://github.com/CyberZHG/keras-bert" target="_blank" rel="external">https://github.com/CyberZHG/keras-bert</a></p>
<p>è¿™é‡Œç®€å•è§£é‡Šä¸€ä¸‹Tokenizerçš„è¾“å‡ºç»“æœã€‚é¦–å…ˆï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ†è¯åå¥å­é¦–ä½ä¼šåˆ†åˆ«åŠ ä¸Š[CLS]å’Œ[SEP]æ ‡è®°ï¼Œå…¶ä¸­[CLS]ä½ç½®å¯¹åº”çš„è¾“å‡ºå‘é‡æ˜¯èƒ½ä»£è¡¨æ•´å¥çš„å¥å‘é‡ï¼ˆåæ­£Bertæ˜¯è¿™æ ·è®¾è®¡çš„ï¼‰ï¼Œè€Œ[SEP]åˆ™æ˜¯å¥é—´çš„åˆ†éš”ç¬¦ï¼Œå…¶ä½™éƒ¨åˆ†åˆ™æ˜¯å•å­—è¾“å‡ºï¼ˆå¯¹äºä¸­æ–‡æ¥è¯´ï¼‰</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://arxiv.org/abs/1810.04805" target="_blank" rel="external">BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding</a></li>
<li><a href="https://kexue.fm/archives/4765" target="_blank" rel="external">ã€ŠAttention is All You Needã€‹æµ…è¯»ï¼ˆç®€ä»‹+ä»£ç ï¼‰</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Project]]></title>
      <url>http://shopee.ai/2019/06/20/chatbot/chatbot-project/</url>
      <content type="html"><![CDATA[<p><img src="/images/chatbot/chatbot-logo-03.png" width="550" alt="chatbot"></p>
<a id="more"></a>
<p>                èŠå¤©æœºå™¨äººï¼ˆchatbotï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸ºä¼šè¯ä»£ç†æˆ–å¯¹è¯ç³»ç»Ÿï¼Œç°å·²æˆä¸ºäº†ä¸€ä¸ªçƒ­é—¨è¯é¢˜ã€‚å¾®è½¯åœ¨èŠå¤©æœºå™¨äººä¸ŠæŠ¼ä¸Šäº†é‡æ³¨ï¼ŒFacebookï¼ˆMï¼‰ã€è‹¹æœï¼ˆSiriï¼‰ã€è°·æ­Œ å’Œ Slack ç­‰å…¬å¸ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ æ–°ä¸€æ³¢åˆ›ä¸šè€…ä»¬æ­£åœ¨å°è¯•æ”¹å˜æ¶ˆè´¹è€…ä¸æœåŠ¡çš„äº¤äº’æ–¹å¼ã€‚</p>
<ul>
<li><p><a href="/2017/08/11/chatbot/chatbot-research1/">Chatbot Research 1 - èŠå¤©æœºå™¨äººçš„è¡Œä¸šç»¼è¿°</a></p>
</li>
<li><p><a href="/2017/08/12/chatbot/chatbot-research2/">Chatbot Research 2 - NLP çš„åŸºç¡€çŸ¥è¯†å›é¡¾</a></p>
</li>
<li><p><a href="/2017/08/13/chatbot/chatbot-research3/">Chatbot Research 3 - æœºå™¨å­¦ä¹ æ„å»º chatbot</a></p>
</li>
<li><p><a href="/2017/08/14/chatbot/chatbot-research4/">Chatbot Research 4 - æ·±åº¦å­¦ä¹ çŸ¥è¯†å›é¡¾</a></p>
</li>
<li><p><a href="/2017/08/15/chatbot/chatbot-research5/">Chatbot Research 5 - åŸºäºæ·±åº¦å­¦ä¹ çš„æ£€ç´¢èŠå¤©æœºå™¨äºº</a></p>
</li>
<li><p><a href="/2017/08/16/chatbot/chatbot-research6/">Chatbot Research 6 - æ›´å¤šè®ºæ–‡ (æ„Ÿè°¢ PaperWeekly)</a></p>
</li>
<li><p><a href="/2017/09/26/chatbot/chatbot-research7/">Chatbot Research 7 - Dialog_Corpus å¸¸ç”¨æ•°æ®é›†</a></p>
</li>
<li><p><a href="/2017/11/17/chatbot/chatbot-research8/">Chatbot Research 8 - ç†è®º seq2seq+Attention æœºåˆ¶æ¨¡å‹è¯¦è§£</a></p>
</li>
<li><p><a href="/2017/11/29/chatbot/chatbot-research11/">Chatbot Research 11 - ç¬¬äºŒä¸ªç‰ˆæœ¬ (æ–°ç‰ˆå®ç°)</a></p>
</li>
<li><p><a href="/2018/12/01/chatbot/chatbot-research12/">Chatbot Research 12 - ç†è®ºç¯‡ï¼š è¯„ä»·æŒ‡æ ‡ä»‹ç»</a></p>
</li>
<li><p><a href="/2018/12/05/chatbot/chatbot-research13/">Chatbot Research 13 - ç†è®ºç¯‡ï¼š MMI æ¨¡å‹ç†è®º</a></p>
</li>
<li><p><a href="/2018/12/01/chatbot/chatbot-common-links/">Chatbot Useful Links</a></p>
</li>
</ul>
<p><strong>é¢„å¤‡çŸ¥è¯†</strong></p>
<ul>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.1 è¯åµŒå…¥ï¼ˆword2vecï¼‰</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.2 è¿‘ä¼¼è®­ç»ƒ</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.3 Word2vec çš„å®ç°</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.4 å­è¯åµŒå…¥ï¼ˆfastTextï¼‰</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.5 å…¨å±€å‘é‡çš„è¯åµŒå…¥ï¼ˆGloVeï¼‰</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.6 æ±‚è¿‘ä¹‰è¯å’Œç±»æ¯”è¯</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.7 æ–‡æœ¬æƒ…æ„Ÿåˆ†ç±»ï¼šä½¿ç”¨ RNN</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.8 æ–‡æœ¬æƒ…æ„Ÿåˆ†ç±»ï¼šä½¿ç”¨ CNNï¼ˆtextCNNï¼‰</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.9 ç¼–ç å™¨â€”è§£ç å™¨ï¼ˆseq2seqï¼‰</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.10 æŸæœç´¢ beam-search</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.11 Attentionæœºåˆ¶</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/55600911" target="_blank" rel="external">1.12 tensorflowæ¨¡å‹çº¿ä¸Šéƒ¨ç½²</a></p>
</li>
</ul>
<h2 id="2-TensorFlow"><a href="#2-TensorFlow" class="headerlink" title="2. TensorFlow"></a>2. TensorFlow</h2><p>TensorFlow ç”¨äºæœºå™¨å­¦ä¹ å’Œç¥ç»ç½‘ç»œæ–¹é¢çš„ç ”ç©¶ï¼Œé‡‡ç”¨<strong>æ•°æ®æµå›¾</strong>æ¥è¿›è¡Œæ•°å€¼è®¡ç®—çš„å¼€æºè½¯ä»¶åº“.</p>
<p><a href="https://keras.io/zh/models/about-keras-models/" target="_blank" rel="external">Keras</a> å¼€å‘é‡ç‚¹æ˜¯æ”¯æŒå¿«é€Ÿçš„å®éªŒã€‚èƒ½å¤Ÿä»¥æœ€å°çš„æ—¶å»¶æŠŠä½ çš„æƒ³æ³•è½¬æ¢ä¸ºå®éªŒç»“æœï¼Œæ˜¯åšå¥½ç ”ç©¶çš„å…³é”®ã€‚ </p>
<h3 id="2-1-TensorFlow-ç®€ä»‹"><a href="#2-1-TensorFlow-ç®€ä»‹" class="headerlink" title="2.1 TensorFlow ç®€ä»‹"></a>2.1 TensorFlow ç®€ä»‹</h3><ul>
<li><p><a href="/2017/08/22/tensorflow/tf-1.1-why/">1.1 TensorFlow Why ?</a></p>
</li>
<li><p><a href="/2017/10/23/tensorflow/tf-doc/">1.2 TensorFlow å¿«é€Ÿå­¦ä¹  &amp; æ–‡æ¡£</a>  </p>
</li>
</ul>
<h3 id="2-2-Tensorflow-åŸºç¡€æ„æ¶"><a href="#2-2-Tensorflow-åŸºç¡€æ„æ¶" class="headerlink" title="2.2 Tensorflow åŸºç¡€æ„æ¶"></a>2.2 Tensorflow åŸºç¡€æ„æ¶</h3><ul>
<li><p><a href="/2017/08/25/tensorflow/tf-2.1-structure/">2.1 å¤„ç†ç»“æ„: è®¡ç®—å›¾</a></p>
</li>
<li><p><a href="/2017/08/27/tensorflow/tf-2.2-example/">2.2 å®Œæ•´æ­¥éª¤ ä¾‹å­2 ğŸŒ°ï¼ˆåˆ›å»ºæ•°æ®ã€æ­å»ºæ¨¡å‹ã€è®¡ç®—è¯¯å·®ã€ä¼ æ’­è¯¯å·®ã€è®­ç»ƒï¼‰</a></p>
</li>
<li><p><a href="/2017/08/28/tensorflow/tf-2.3-session/">2.3 Session ä¼šè¯æ§åˆ¶</a></p>
</li>
<li><p><a href="/2017/08/29/tensorflow/tf-2.4-variable/">2.4 Variable å˜é‡</a></p>
</li>
<li><p><a href="/2017/08/30/tensorflow/tf-2.5-placeholde/">2.5 Placeholder ä¼ å…¥å€¼</a></p>
</li>
<li><p><a href="/2017/09/07/tensorflow/tf-2.6-A-activation-function/">2.6 ä»€ä¹ˆæ˜¯æ¿€åŠ±å‡½æ•° (Activation Function)</a></p>
</li>
<li><p><a href="/2017/09/07/tensorflow/tf-2.6-B-activation-function/">2.7 æ¿€åŠ±å‡½æ•° Activation Function</a></p>
</li>
<li><p><a href="/2017/09/08/tensorflow/tf-2.8-tensorflow-basic-summary/">2.8 TensorFlow åŸºæœ¬ç”¨æ³•æ€»ç»“ ğŸŒ°ğŸŒ°ğŸŒ°</a></p>
</li>
</ul>
<h3 id="2-3-å»ºé€ æˆ‘ä»¬ç¬¬ä¸€ä¸ªç¥ç»ç½‘ç»œ"><a href="#2-3-å»ºé€ æˆ‘ä»¬ç¬¬ä¸€ä¸ªç¥ç»ç½‘ç»œ" class="headerlink" title="2.3 å»ºé€ æˆ‘ä»¬ç¬¬ä¸€ä¸ªç¥ç»ç½‘ç»œ"></a>2.3 å»ºé€ æˆ‘ä»¬ç¬¬ä¸€ä¸ªç¥ç»ç½‘ç»œ</h3><ul>
<li><p><a href="/2017/09/09/tensorflow/tf-3.1-add-layer/">3.1 æ·»åŠ å±‚ def add_layer()</a></p>
</li>
<li><p><a href="/2017/09/11/tensorflow/tf-3.2-create-NN/">3.2 å»ºé€ ç¥ç»ç½‘ç»œ ğŸŒ°ğŸŒ°ğŸŒ°</a></p>
</li>
<li><p><a href="/2017/09/12/tensorflow/tf-3.3-A-speed-up-learning/">3.3 Speed Up Training &amp; Optimizer (è½¬è½½è‡ªè«çƒ¦)</a></p>
</li>
</ul>
<h3 id="2-4-Tensorboard"><a href="#2-4-Tensorboard" class="headerlink" title="2.4 Tensorboard"></a>2.4 Tensorboard</h3><ul>
<li><a href="/2017/09/12/tensorflow/tf-4.1-tensorboard1/">4.1 Tensorboard å¯è§†åŒ–å¥½å¸®æ‰‹ 1</a></li>
</ul>
<h3 id="2-5-Estimator"><a href="#2-5-Estimator" class="headerlink" title="2.5 Estimator"></a>2.5 Estimator</h3><ul>
<li><p><a href="/2018/10/31/tensorflow/tf-5.1-contrib-learn-Quickstart/">5.1 tf.contrib.learn å¿«é€Ÿå…¥é—¨</a></p>
</li>
<li><p><a href="/2018/11/01/tensorflow/tf-5.2-contrib-learn-Input-fn/">5.2 tf.contrib.learn æ„å»ºè¾“å…¥å‡½æ•°</a></p>
</li>
<li><p><a href="/2018/11/04/tensorflow/tf-5.3-contrib-learn-MonitorAPI/">5.3 tf.contrib.learn åŸºç¡€çš„è®°å½•å’Œç›‘æ§æ•™ç¨‹</a></p>
</li>
<li><p><a href="/2018/11/04/tensorflow/tf-5.4-contrib-learn-Estimator/">5.4 tf.contrib.learn åˆ›å»º Estimator</a></p>
</li>
<li><p><a href="https://www.jianshu.com/p/8850127ed25d" target="_blank" rel="external">5.5 TF ä¿å­˜å’ŒåŠ è½½æ¨¡å‹ - ç®€ä¹¦</a></p>
</li>
</ul>
<h3 id="2-6-Language-model-ä»‹ç»"><a href="#2-6-Language-model-ä»‹ç»" class="headerlink" title="2.6 Language model ä»‹ç»"></a>2.6 Language model ä»‹ç»</h3><p>è¯­è¨€æ¨¡å‹æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†é—®é¢˜ä¸­ä¸€ç±»æœ€åŸºæœ¬çš„é—®é¢˜ï¼Œå®ƒæœ‰ç€éå¸¸å¹¿æ³›çš„åº”ç”¨ã€‚</p>
<ul>
<li><p><a href="/2018/11/08/tensorflow/tf-google-8-rnn-1/">1.1 RNN å¾ªç¯ç¥ç»ç½‘ç»œ ç®€ä»‹</a></p>
</li>
<li><p><a href="/2018/11/10/tensorflow/tf-google-8-rnn-2/">1.2 LSTM &amp; Bi-RNN &amp; Deep RNN</a></p>
</li>
<li><p><a href="/2018/12/06/chatbot/chatbot-index/#1-Chatbot">1.3 Language model ä»‹ç» / è¯„ä»·æ–¹æ³• perplexity (not finish)</a></p>
</li>
</ul>
<h3 id="2-7-NNLM-ç¥ç»è¯­è¨€æ¨¡å‹"><a href="#2-7-NNLM-ç¥ç»è¯­è¨€æ¨¡å‹" class="headerlink" title="2.7 NNLM (ç¥ç»è¯­è¨€æ¨¡å‹)"></a>2.7 NNLM (ç¥ç»è¯­è¨€æ¨¡å‹)</h3><ul>
<li><p><a href="/2018/10/01/tensorflow/tf-nlp-9.2.2/">2.2 PTB æ•°æ®çš„ batching æ–¹æ³•</a></p>
</li>
<li><p><a href="/2018/10/02/tensorflow/tf-nlp-9.2.3/">2.3 RNN çš„è¯­è¨€æ¨¡å‹ TensorFlow å®ç°</a></p>
</li>
</ul>
<h3 id="2-8-MNIST-æ•°å­—è¯†åˆ«é—®é¢˜"><a href="#2-8-MNIST-æ•°å­—è¯†åˆ«é—®é¢˜" class="headerlink" title="2.8 MNIST æ•°å­—è¯†åˆ«é—®é¢˜"></a>2.8 MNIST æ•°å­—è¯†åˆ«é—®é¢˜</h3><ul>
<li><p><a href="/2018/10/04/tensorflow/tf-mnist-1-beginners/">3.1 ç®€å•å‰é¦ˆç½‘ç»œå®ç° mnist åˆ†ç±»</a></p>
</li>
<li><p><a href="/2017/10/05/tensorflow/tf-4.3-name-variable_scope/">3.3 name / variable_scope</a></p>
</li>
<li><p><a href="/2017/10/07/tensorflow/tf-simple-lstms/">3.4 å¤šå±‚ LSTM é€šä¿—æ˜“æ‡‚ç‰ˆ</a></p>
</li>
</ul>
<h2 id="4-Python"><a href="#4-Python" class="headerlink" title="4. Python"></a>4. Python</h2><p>Python å“²å­¦å°±æ˜¯ç®€å•ä¼˜é›…ï¼Œå°½é‡å†™å®¹æ˜“çœ‹æ˜ç™½çš„ä»£ç ï¼Œå°½é‡å†™å°‘çš„ä»£ç .</p>
<p>Python æ•°æ®åˆ†ææ¨¡å—: Numpy &amp; Pandas, åŠå¼ºå¤§çš„ç”»å›¾å·¥å…· Matplotlib</p>
<ul>
<li><p><a href="/python_language">Python</a></p>
</li>
<li><p><a href="/python_numpy_pandas">Numpy &amp; Pandas</a></p>
</li>
<li><p><a href="/python_matplotlib">Matplotlib</a></p>
</li>
</ul>
<h2 id="5-Scikit-Learn"><a href="#5-Scikit-Learn" class="headerlink" title="5. Scikit-Learn"></a>5. Scikit-Learn</h2><p>Sklearn æœºå™¨å­¦ä¹ é¢†åŸŸå½“ä¸­æœ€çŸ¥åçš„ Python æ¨¡å—ä¹‹ä¸€ <a href="/2018/01/03/python/py-sklearn-0-why/">why</a> </p>
<ul>
<li><p><a href="/2018/01/03/python/py-sklearn-1-choosing-estimator/">1.1 : Sklearn Choosing The Right Estimator</a></p>
</li>
<li><p><a href="/2018/01/05/python/py-sklearn-2-general-learning-model/">1.2 : Sklearn General Learning Model</a></p>
</li>
<li><p><a href="/2018/01/03/python/py-sklearn-3-database/">1.3 : Sklearn DataSets</a></p>
</li>
<li><p><a href="/2018/01/05/python/py-sklearn-4-common-attributes/">1.4 : Sklearn Common Attributes and Functions</a></p>
</li>
<li><p><a href="/2018/01/06/python/py-sklearn-5-normalization/">1.5 : Normalization</a></p>
</li>
<li><p><a href="/2018/01/08/python/py-sklearn-6-cross-validation-1/">1.6 : Cross-validation 1</a></p>
</li>
<li><p><a href="/2018/01/09/python/py-sklearn-6-cross-validation-2/">1.7 : Cross-validation 2</a></p>
</li>
<li><p><a href="/2018/01/09/python/py-sklearn-6-cross-validation-3/">1.8 : Cross-validation 3</a></p>
</li>
<li><p><a href="/2018/01/10/python/py-sklearn-7-save-model/">1.9 : Sklearn Save Model</a></p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[BERT å®Œå…¨æŒ‡å—]]></title>
      <url>http://shopee.ai/2019/06/20/nlp/BERT_tutorial_2/</url>
      <content type="html"><![CDATA[<p><a href="/2019/06/20/nlp/BERT/" target="_self"><img src="/images/nlp/Bert-Ernie-logo.jpg" width="550" alt="Bert-Ernie"><br></a></p>
<!--<a href="/2019/06/30/nlp/BERT/" target="_self" style="display:block; margin:0 auto; background:url('/images/nlp/Bert-Ernie-logo.jpg') no-repeat 0 0 / contain; height:323px; width:550px;"></a>-->
<a id="more"></a>
<p><strong>2018.10</strong> google å‘å¸ƒ <strong>BERT</strong> æ¨¡å‹. å¼•çˆ†æ•´ä¸ªAIåœˆçš„ NLP æ¨¡å‹. åœ¨ NLPé¢†åŸŸ åˆ·æ–° 11 é¡¹è®°å½•.</p>
<p><strong>BERT</strong> å…¶å®æ˜¯ language_encoderï¼ŒæŠŠè¾“å…¥çš„ sentence æˆ– paragraph è½¬æˆ feature_vectorï¼ˆembeddingï¼‰.</p>
<p><strong>Paper</strong>: <a href="https://arxiv.org/abs/1810.04805" target="_blank" rel="external">BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding</a></p>
<p><strong>BERT</strong> åˆ›æ–°ç‚¹åœ¨äºæå‡ºäº†ä¸€å¥—å®Œæ•´çš„æ–¹æ¡ˆï¼Œåˆ©ç”¨ä¹‹å‰æœ€æ–°çš„ç®—æ³•æ¨¡å‹ï¼Œå»è§£å†³å„ç§å„æ ·çš„ NLP ä»»åŠ¡.</p>
<!-- more -->
<hr>
<!--![](/images/nlp/language-mode-l.jpg)
-->
<h2 id="1-NLP-çš„å‘å±•"><a href="#1-NLP-çš„å‘å±•" class="headerlink" title="1. NLP çš„å‘å±•"></a>1. NLP çš„å‘å±•</h2><p><a href="https://www.infoq.cn/article/66vicQt*GTIFy33B4mu9" target="_blank" rel="external">NLP ç¥ç»ç½‘ç»œå‘å±•å†å²ä¸­æœ€é‡è¦çš„ 8 ä¸ªé‡Œç¨‹ç¢‘</a></p>
<blockquote>
<ol>
<li><p>Language Model (è¯­è¨€æ¨¡å‹å°±æ˜¯è¦çœ‹åˆ°ä¸Šæ–‡é¢„æµ‹ä¸‹æ–‡, So NNLM)</p>
</li>
<li><p>n-gram modelï¼ˆnå…ƒæ¨¡å‹ï¼‰ï¼ˆåŸºäº é©¬å°”å¯å¤«å‡è®¾ æ€æƒ³ï¼‰<strong>ä¸Šä¸‹æ–‡ç›¸å…³çš„ç‰¹æ€§ å»ºç«‹æ•°å­¦æ¨¡å‹</strong>ã€‚</p>
</li>
<li><p>2001 - <strong>NNLM</strong> , @Bengio , ç«äº 2013 å¹´ï¼Œ æ²‰å¯‚åå¹´ç»ˆæ—¶æ¥è¿è½¬ã€‚ ä½†å¾ˆå¿«åˆè¢«NLPå·¥ä½œè€…ç¥­å…¥ç¥æ®¿ã€‚ </p>
</li>
<li><p>2008 - Multi-task learning</p>
</li>
<li><p>2013 - Word2Vec (Word Embeddingçš„å·¥å…·word2vec : CBOW å’Œ Skip-gram)</p>
</li>
<li><p>2014 - sequence-to-sequence </p>
</li>
<li><p>2015 - Attention</p>
</li>
<li><p>2015 - Memory-based networks</p>
</li>
<li><p>2018 - Pretrained language models</p>
</li>
</ol>
</blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/37601161" target="_blank" rel="external">good å¼ ä¿Šæ—: æ·±åº¦å­¦ä¹ ä¸­çš„æ³¨æ„åŠ›æ¨¡å‹ï¼ˆ2017ç‰ˆï¼‰</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/49271699" target="_blank" rel="external">good å¼ ä¿Šæ—: ä»Word Embeddingåˆ°Bertæ¨¡å‹â€”è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„é¢„è®­ç»ƒæŠ€æœ¯å‘å±•å²</a> </p>
<p><strong>NNLM vs Word2Vec</strong></p>
<blockquote>
<ol>
<li>NNLM ç›®æ ‡ï¼š è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼Œ è¯­è¨€æ¨¡å‹å°±æ˜¯è¦çœ‹ä¸Šæ–‡é¢„æµ‹ä¸‹æ–‡ï¼Œ word embedding åªæ˜¯æ— å¿ƒçš„ä¸€ä¸ªå‰¯äº§å“ã€‚</li>
<li>Word2Vecç›®æ ‡ï¼š å®ƒå•çº¯å°±æ˜¯è¦ word embedding çš„ï¼Œè¿™æ˜¯ä¸»äº§å“ã€‚</li>
</ol>
<p>2018 å¹´ä¹‹å‰çš„ Word Embedding æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯æ— æ³•å¤„ç† <strong>å¤šä¹‰è¯</strong> çš„é—®é¢˜, é™æ€è¯åµŒ.</p>
</blockquote>
<p><strong>ELMO: Embedding from Language Models</strong></p>
<blockquote>
<p>ELMOçš„è®ºæ–‡é¢˜ç›®ï¼šâ€œDeep contextualized word representationâ€</p>
<p>NAACL 2018 æœ€ä½³è®ºæ–‡ - ELMOï¼š Deep contextualized word representation</p>
<p>ELMO æœ¬èº«æ˜¯ä¸ªæ ¹æ®å½“å‰ä¸Šä¸‹æ–‡å¯¹Word EmbeddingåŠ¨æ€è°ƒæ•´çš„æ€è·¯ã€‚</p>
<p><strong>ELMO æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ</strong></p>
<ol>
<li>LSTM æŠ½å–ç‰¹å¾èƒ½åŠ›è¿œå¼±äº Transformer</li>
<li>æ‹¼æ¥æ–¹å¼åŒå‘èåˆç‰¹å¾èƒ½åŠ›åå¼±</li>
</ol>
</blockquote>
<p><strong>GPT (Generative Pre-Training) </strong></p>
<blockquote>
<ol>
<li>ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯åˆ©ç”¨ language è¿›è¡Œ Pre-Training.</li>
<li>ç¬¬äºŒé˜¶æ®µé€šè¿‡ Fine-tuning çš„æ¨¡å¼è§£å†³ä¸‹æ¸¸ä»»åŠ¡ã€‚</li>
</ol>
<p><strong>GPT: æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ</strong></p>
<ol>
<li>è¦æ˜¯æŠŠ language model æ”¹é€ æˆåŒå‘å°±å¥½äº†</li>
<li>ä¸å¤ªä¼šç‚’ä½œï¼ŒGPT ä¹Ÿæ˜¯éå¸¸é‡è¦çš„å·¥ä½œ.</li>
</ol>
</blockquote>
<p><strong>Bert äº®ç‚¹ : æ•ˆæœå¥½ å’Œ æ™®é€‚æ€§å¼º</strong></p>
<blockquote>
<ol>
<li>Transformer ç‰¹å¾æŠ½å–å™¨</li>
<li>Language Model ä½œä¸ºè®­ç»ƒä»»åŠ¡ (åŒå‘)</li>
</ol>
<p>Bert é‡‡ç”¨å’Œ GPT å®Œå…¨ç›¸åŒçš„ <strong>ä¸¤é˜¶æ®µ</strong> æ¨¡å‹ï¼š</p>
<ol>
<li>Pre-Train Language Modelï¼›</li>
<li>Fine-&gt; Tuningæ¨¡å¼è§£å†³ä¸‹æ¸¸ä»»åŠ¡ã€‚</li>
</ol>
</blockquote>
<p><strong>NLP çš„ 4å¤§ä»»åŠ¡</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">4 NLP task</th>
<th style="text-align:center">description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">åºåˆ—æ ‡æ³¨</td>
<td style="text-align:center">ç‰¹ç‚¹æ˜¯å¥å­ä¸­<strong>æ¯ä¸ªå•è¯</strong>è¦æ±‚æ¨¡å‹æ ¹æ®ä¸Šä¸‹æ–‡éƒ½è¦ç»™å‡ºä¸€ä¸ª åˆ†ç±»<strong>label</strong>ï¼›</td>
</tr>
<tr>
<td style="text-align:center">åˆ†ç±»ä»»åŠ¡</td>
<td style="text-align:center">ç‰¹ç‚¹æ˜¯ä¸ç®¡æ–‡ç« æœ‰å¤šé•¿ï¼Œæ€»ä½“ç»™å‡ºä¸€ä¸ªåˆ†ç±»<strong>label</strong> å³å¯ï¼›</td>
</tr>
<tr>
<td style="text-align:center">å¥å­å…³ç³»åˆ¤æ–­</td>
<td style="text-align:center">ç‰¹ç‚¹æ˜¯ç»™å®šä¸¤ä¸ªå¥å­ï¼Œæ¨¡å‹<strong>åˆ¤æ–­å‡ºä¸¤ä¸ªå¥å­</strong> æ˜¯å¦å…·å¤‡æŸç§è¯­ä¹‰å…³ç³»ï¼›</td>
</tr>
<tr>
<td style="text-align:center">ç”Ÿæˆå¼ä»»åŠ¡</td>
<td style="text-align:center">ç‰¹ç‚¹æ˜¯è¾“å…¥æ–‡æœ¬å†…å®¹åï¼Œéœ€è¦è‡ªä¸»ç”Ÿæˆå¦å¤–ä¸€æ®µæ–‡å­—ã€‚</td>
</tr>
</tbody>
</table>
<hr>
<p><img src="https://pic3.zhimg.com/80/v2-0245d07d9e227d1cb1091d96bf499032_hd.jpg" alt=""></p>
<!--
## 2. Word Representation

è¦å¤„ç† NLP é—®é¢˜ï¼Œé¦–å…ˆè¦è§£å†³ **Word Representation æ–‡æœ¬è¡¨ç¤º** é—®é¢˜ã€‚è™½ç„¶æˆ‘ä»¬äººå»çœ‹æ–‡æœ¬ï¼Œèƒ½å¤Ÿæ¸…æ¥šæ˜ç™½æ–‡æœ¬ä¸­çš„ç¬¦å·è¡¨è¾¾ä»€ä¹ˆå«ä¹‰ï¼Œä½†æ˜¯è®¡ç®—æœºåªèƒ½åšæ•°å­¦è®¡ç®—ï¼Œéœ€è¦å°†æ–‡æœ¬è¡¨ç¤ºæˆè®¡ç®—æœºå¯ä»¥å¤„ç†çš„å½¢å¼ã€‚

![](https://pic3.zhimg.com/80/v2-597b011ddd148eb53b5a90730b6090ae_hd.jpg)

åæ¥å‡ºç°äº†è¯å‘é‡ï¼Œword embeddingï¼Œç”¨ä¸€ä¸ªä½ç»´ç¨ å¯†çš„å‘é‡å»è¡¨ç¤ºä¸€ä¸ªè¯ã€‚é€šå¸¸è¿™ä¸ªå‘é‡çš„ç»´åº¦åœ¨å‡ ç™¾åˆ°ä¸Šåƒä¹‹é—´ï¼Œè¯å‘é‡å¯ä»¥é€šè¿‡ä¸€äº›æ— ç›‘ç£çš„æ–¹æ³•å­¦ä¹ å¾—åˆ°ï¼Œæ¯”å¦‚ CBOW æˆ– Skip-Gram ç­‰.

> æ›´å¤š Word Embeddings è¯·å‚è§ï¼š [Sequence Models (week2) - NLP - Word Embeddings ](/2018/08/02/deeplearning/Sequence-Models-week2/)
> 
> åœ¨å›¾åƒä¸­å°±ä¸å­˜åœ¨è¡¨ç¤ºæ–¹æ³•çš„å›°æ‰°ï¼Œå› ä¸ºå›¾åƒæœ¬èº«å°±æ˜¯æ•°å€¼çŸ©é˜µï¼Œè®¡ç®—æœºå¯ä»¥ç›´æ¥å¤„ç†ã€‚

NLP é¢†åŸŸç»å¸¸å¼•å…¥ä¸€ç§åšæ³•ï¼Œåœ¨éå¸¸å¤§çš„è¯­æ–™åº“ä¸Šè¿›è¡Œ pre-trainingï¼Œç„¶ååœ¨ç‰¹å®šä»»åŠ¡ä¸Šè¿›è¡Œ fine-tuning.
BERT å°±æ˜¯ç”¨äº†ä¸€ä¸ªå·²æœ‰çš„æ¨¡å‹ç»“æ„ï¼Œæå‡ºäº†ä¸€æ•´å¥—çš„ pre-training æ–¹æ³•å’Œ fine-tuning æ–¹æ³•.-->
<p><a href="https://zhuanlan.zhihu.com/p/54743941" target="_blank" rel="external">good å¼ ä¿Šæ—: æ”¾å¼ƒå¹»æƒ³ï¼Œå…¨é¢æ‹¥æŠ±Transformerï¼šè‡ªç„¶è¯­è¨€å¤„ç†ä¸‰å¤§ç‰¹å¾æŠ½å–å™¨ï¼ˆCNN/RNN/TFï¼‰æ¯”è¾ƒ</a></p>
<h2 id="2-Feature-Extraction"><a href="#2-Feature-Extraction" class="headerlink" title="2. Feature Extraction"></a>2. Feature Extraction</h2><blockquote>
<ol>
<li>RNN äººè€ç é»„ï¼Œå·²ç»åŸºæœ¬å®Œæˆå®ƒçš„å†å²ä½¿å‘½ï¼Œå°†æ¥ä¼šé€æ­¥é€€å‡ºå†å²èˆå°ï¼›</li>
<li>CNN å¦‚æœæ”¹é€ æˆåŠŸå¹¶è¶…å‡ºæœŸæœ›ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ä¸å¯èƒ½ç»§ç»­ç”Ÿå­˜å£®å¤§ï¼›</li>
<li>Transformer æ˜æ˜¾ä¼šå¾ˆå¿«æˆä¸º NLPé‡Œ æ‹…å½“å¤§ä»»çš„æœ€ä¸»æµçš„ç‰¹å¾æŠ½å–å™¨ã€‚</li>
</ol>
<p>ç‰¹å¾æŠ½å–å™¨èƒ½å¦å…·å¤‡é•¿è·ç¦»ç‰¹å¾æ•è·èƒ½åŠ›è¿™ä¸€ç‚¹å¯¹äºè§£å†³NLPä»»åŠ¡æ¥è¯´ä¹Ÿæ˜¯å¾ˆå…³é”®çš„ã€‚</p>
<p>ä¸€ä¸ªç‰¹å¾æŠ½å–å™¨æ˜¯å¦é€‚é…é—®é¢˜é¢†åŸŸçš„ç‰¹ç‚¹ï¼Œæœ‰æ—¶å€™å†³å®šäº†å®ƒçš„æˆè´¥ï¼Œè€Œå¾ˆå¤šæ¨¡å‹æ”¹è¿›çš„æ–¹å‘ï¼Œå…¶å®å°±æ˜¯æ”¹é€ å¾—ä½¿å¾—å®ƒæ›´åŒ¹é…é¢†åŸŸé—®é¢˜çš„ç‰¹æ€§ã€‚</p>
</blockquote>
<p>Three Feature Extraction:</p>
<blockquote>
<p>â€œTransformerè€ƒä¸Šäº†åŒ—äº¬å¤§å­¦ï¼›CNNè¿›äº†ä¸­ç­‰æŠ€æœ¯å­¦æ ¡ï¼Œå¸Œæœ›æœ‰ä¸€å¤©èƒ½å¤Ÿè€ƒç ”è€ƒè¿›åŒ—äº¬å¤§å­¦ï¼›RNNåœ¨ç™¾è´§å…¬å¸å½“å”®è´§å‘˜ï¼šæˆ‘ä»¬éƒ½æœ‰çœ‹ä¼¼å…‰æ˜çš„å‰é€”ã€‚â€</p>
<p><strong>1. è¿›é€€ç»´è°·çš„ RNN</strong></p>
<ol>
<li>RNN (åŒ…æ‹¬LSTMã€GRU + Attention) æ•ˆæœä¸ Transformer å·®è·å¾ˆæ˜æ˜¾</li>
<li>RNN å¾ˆéš¾å¹¶è¡Œè®¡ç®—ã€‚ ç”±äº RNN ç‰¹ç‚¹ ï¼š çº¿å½¢åºåˆ—æ”¶é›†å‰é¢çš„ä¿¡æ¯ã€‚</li>
</ol>
<p>ä¸€ä¸ªä¸¥é‡é˜»ç¢RNNå°†æ¥ç»§ç»­èµ°çº¢çš„é—®é¢˜æ˜¯ï¼šRNNæœ¬èº«çš„åºåˆ—ä¾èµ–ç»“æ„å¯¹äºå¤§è§„æ¨¡å¹¶è¡Œè®¡ç®—æ¥è¯´ç›¸å½“ä¹‹ä¸å‹å¥½ã€‚é€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯RNNå¾ˆéš¾å…·å¤‡é«˜æ•ˆçš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œè¿™ä¸ªä¹ä¸€çœ‹å¥½åƒä¸æ˜¯å¤ªå¤§çš„é—®é¢˜ï¼Œå…¶å®é—®é¢˜å¾ˆä¸¥é‡ã€‚</p>
<p>å¯¹äºå°æ•°æ®é›† RNN å¯èƒ½é€Ÿåº¦æ›´å¿«äº›ï¼Œ Transformer æ…¢äº›ï¼Œ ä½†æ˜¯å¯ä»¥æ”¹è¿› Transformer ç¼“è§£ï¼š</p>
<ol>
<li>å¯æŠŠBlockæ•°ç›®é™ä½ï¼Œå‡å°‘å‚æ•°é‡ï¼›</li>
<li>å¼•å…¥Bertä¸¤é˜¶æ®µè®­ç»ƒæ¨¡å‹ï¼Œé‚£ä¹ˆå¯¹äºå°æ•°æ®é›†åˆæ¥è¯´ä¼šæå¤§ç¼“è§£æ•ˆæœé—®é¢˜ã€‚</li>
</ol>
<p><strong>2. ä¸€å¸Œå°šå­˜çš„ CNN</strong></p>
<ol>
<li>CNN å¤©ç”Ÿè‡ªå¸¦çš„é«˜å¹¶è¡Œè®¡ç®—èƒ½åŠ›</li>
<li>ä¸€äº›æ·±åº¦ç½‘ç»œçš„ä¼˜åŒ–trickï¼ŒCNNåœ¨NLPé¢†åŸŸé‡Œçš„æ·±åº¦é€æ­¥èƒ½åšèµ·æ¥äº†ã€‚dilated CNN</li>
</ol>
<p>æ—©æœŸCNNåšä¸å¥½NLPçš„ä¸€ä¸ªå¾ˆå¤§åŸå› æ˜¯ç½‘ç»œæ·±åº¦åšä¸èµ·æ¥ã€‚ åŸç”Ÿçš„CNNåœ¨å¾ˆå¤šæ–¹é¢ä»ç„¶æ˜¯æ¯”ä¸è¿‡Transformerçš„ï¼Œå…¸å‹çš„è¿˜æ˜¯é•¿è·ç¦»ç‰¹å¾æ•è·èƒ½åŠ›æ–¹é¢ï¼Œè€Œè¿™ç‚¹åœ¨NLPç•Œç®—æ˜¯æ¯”è¾ƒä¸¥é‡çš„ç¼ºé™·ã€‚</p>
<p>å¯¹äºè¿œè·ç¦»ç‰¹å¾ï¼Œå•å±‚æ€€æ—§ç‰ˆCNNæ˜¯æ— æ³•æ•è·åˆ°çš„ï¼Œå¦‚æœæ»‘åŠ¨çª—å£kæœ€å¤§ä¸º2ï¼Œè€Œå¦‚æœæœ‰ä¸ªè¿œè·ç¦»ç‰¹å¾è·ç¦»æ˜¯5ï¼Œé‚£ä¹ˆæ— è®ºä¸Šå¤šå°‘ä¸ªå·ç§¯æ ¸ï¼Œéƒ½æ— æ³•è¦†ç›–åˆ°é•¿åº¦ä¸º5çš„è·ç¦»çš„è¾“å…¥ï¼Œæ‰€ä»¥å®ƒæ˜¯æ— æ³•æ•è·é•¿è·ç¦»ç‰¹å¾çš„</p>
<p>æ»‘åŠ¨çª—å£ä»å·¦åˆ°å³æ»‘åŠ¨ï¼Œæ•è·åˆ°çš„ç‰¹å¾ä¹Ÿæ˜¯å¦‚æ­¤é¡ºåºæ’åˆ—ï¼Œæ‰€ä»¥å®ƒåœ¨ç»“æ„ä¸Šå·²ç»è®°å½•äº†ç›¸å¯¹ä½ç½®ä¿¡æ¯äº†ã€‚ä½†æ˜¯å¦‚æœå·ç§¯å±‚åé¢ç«‹å³æ¥ä¸ŠPoolingå±‚çš„è¯ï¼ŒMax Poolingçš„æ“ä½œé€»è¾‘æ˜¯ï¼šä»ä¸€ä¸ªå·ç§¯æ ¸è·å¾—çš„ç‰¹å¾å‘é‡é‡Œåªé€‰ä¸­å¹¶ä¿ç•™æœ€å¼ºçš„é‚£ä¸€ä¸ªç‰¹å¾ï¼Œæ‰€ä»¥åˆ°äº†Poolingå±‚ï¼Œä½ç½®ä¿¡æ¯å°±è¢«æ‰”æ‰äº†ï¼Œè¿™åœ¨NLPé‡Œå…¶å®æ˜¯æœ‰ä¿¡æ¯æŸå¤±çš„ã€‚æ‰€ä»¥åœ¨NLPé¢†åŸŸé‡Œï¼Œç›®å‰CNNçš„ä¸€ä¸ªå‘å±•è¶‹åŠ¿æ˜¯æŠ›å¼ƒPoolingå±‚ï¼Œé å…¨å·ç§¯å±‚æ¥å åŠ ç½‘ç»œæ·±åº¦ã€‚</p>
<p>æ€€æ—§ç‰ˆ CNNæ¨¡å‹ ä¸€ç›´å¤„äºè¢« RNNæ¨¡å‹ å‹åˆ¶åˆ°æŠ‘éƒç—‡æ—©æœŸçš„å°´å°¬å±€é¢ã€‚</p>
<p><strong>CNNçš„è¿›åŒ–</strong>ï¼šç‰©ç«å¤©æ‹©çš„æ¨¡å‹æ–—å…½åœº</p>
<p>æ‘©ç™»CNNï¼ˆä½¿ç”¨Skip Connectionæ¥è¾…åŠ©ä¼˜åŒ–ï¼‰ã€Dilated CNN </p>
<p>æƒ³æ–¹è®¾æ³•æŠŠCNNçš„æ·±åº¦åšèµ·æ¥ï¼Œéšç€æ·±åº¦çš„å¢åŠ ï¼Œå¾ˆå¤šçœ‹ä¼¼æ— å…³çš„é—®é¢˜å°±éšä¹‹è§£å†³äº†ã€‚</p>
<p><strong>3. Transformer</strong></p>
<p>Transformerä½œä¸ºæ–°æ¨¡å‹ï¼Œå¹¶ä¸æ˜¯å®Œç¾æ— ç¼ºçš„ã€‚å®ƒä¹Ÿæœ‰æ˜æ˜¾çš„ç¼ºç‚¹ï¼šé¦–å…ˆï¼Œå¯¹äºé•¿è¾“å…¥çš„ä»»åŠ¡ï¼Œå…¸å‹çš„æ¯”å¦‚ç¯‡ç« çº§åˆ«çš„ä»»åŠ¡ï¼ˆä¾‹å¦‚æ–‡æœ¬æ‘˜è¦ï¼‰ï¼Œå› ä¸ºä»»åŠ¡çš„è¾“å…¥å¤ªé•¿ï¼ŒTransformerä¼šæœ‰å·¨å¤§çš„è®¡ç®—å¤æ‚åº¦ï¼Œå¯¼è‡´é€Ÿåº¦ä¼šæ€¥å‰§å˜æ…¢ã€‚</p>
<p>åšè¯­ä¹‰ç‰¹å¾æŠ½å–èƒ½åŠ›æ¯”è¾ƒæ—¶ï¼Œç»“è®ºæ˜¯å¯¹äºè·ç¦»è¿œä¸13çš„é•¿è·ç¦»ç‰¹å¾ï¼ŒTransformeræ€§èƒ½å¼±äºRNNï¼Œæ¯”è¾ƒå‡ºä¹æ„æ–™ï¼Œå› ä¸ºTransformeré€šè¿‡Self attentionä½¿å¾—è¿œè·ç¦»ç‰¹å¾ç›´æ¥å‘ç”Ÿå…³ç³»ï¼ŒæŒ‰ç†è¯´è·ç¦»ä¸åº”è¯¥æˆä¸ºå®ƒçš„é—®é¢˜ï¼Œä½†æ˜¯æ•ˆæœç«Ÿç„¶ä¸å¦‚RNNï¼Œè¿™èƒŒåçš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™ä¹Ÿæ˜¯å¾ˆæœ‰ä»·å€¼çš„ä¸€ä¸ªæ¢ç´¢ç‚¹ã€‚</p>
</blockquote>
<p><strong>åå±±è®ºå‰‘ï¼šä¸‰å¤§ç‰¹å¾æŠ½å–å™¨æ¯”è¾ƒ</strong></p>
<blockquote>
<p>æ€»è€Œè¨€ä¹‹ï¼Œå…³äºä¸‰è€…é€Ÿåº¦å¯¹æ¯”æ–¹é¢ï¼Œç›®å‰çš„ä¸»æµç»éªŒç»“è®ºåŸºæœ¬å¦‚ä¸Šæ‰€è¿°ï¼šTransformer Baseæœ€å¿«ï¼ŒCNNæ¬¡ä¹‹ï¼Œå†æ¬¡Transformer Bigï¼Œæœ€æ…¢çš„æ˜¯RNNã€‚RNNæ¯”å‰ä¸¤è€…æ…¢äº†3å€åˆ°å‡ åå€ä¹‹é—´ã€‚</p>
<p>å•ä»ä»»åŠ¡ç»¼åˆæ•ˆæœæ–¹é¢æ¥è¯´ï¼ŒTransformeræ˜æ˜¾ä¼˜äºCNNï¼ŒCNNç•¥å¾®ä¼˜äºRNNã€‚é€Ÿåº¦æ–¹é¢Transformerå’ŒCNNæ˜æ˜¾å ä¼˜ï¼ŒRNNåœ¨è¿™æ–¹é¢åŠ£åŠ¿éå¸¸æ˜æ˜¾ã€‚è¿™ä¸¤è€…å†ç»¼åˆèµ·æ¥ï¼Œå¦‚æœæˆ‘ç»™çš„æ’åºç»“æœæ˜¯Transformer&gt;CNN&gt;RNN</p>
<p>ä»é€Ÿåº¦å’Œæ•ˆæœæŠ˜è¡·çš„è§’åº¦çœ‹ï¼Œå¯¹äºå·¥ä¸šç•Œåº”ç”¨ï¼Œç‰¹å¾æŠ½å–é€‰æ‹©æ–¹é¢é…ç½®<strong>Transformer base</strong>æ˜¯ä¸ªè¾ƒå¥½çš„é€‰æ‹©ã€‚</p>
</blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/54743941" target="_blank" rel="external">good å¼ ä¿Šæ—: æ”¾å¼ƒå¹»æƒ³ï¼Œå…¨é¢æ‹¥æŠ±Transformerï¼šè‡ªç„¶è¯­è¨€å¤„ç†ä¸‰å¤§ç‰¹å¾æŠ½å–å™¨ï¼ˆCNN/RNN/TFï¼‰æ¯”è¾ƒ</a></p>
<p><strong>NLP 4 å¤§ä»»åŠ¡ï¼š</strong></p>
<ol>
<li>åºåˆ—æ ‡æ³¨ (åˆ†è¯ã€POS Tagã€NERã€è¯­ä¹‰æ ‡æ³¨)</li>
<li>åˆ†ç±»ä»»åŠ¡</li>
<li>å¥å­å…³ç³»åˆ¤æ–­ ï¼ˆEntailmentã€QAã€è¯­ä¹‰æ”¹å†™ï¼‰</li>
<li>ç”Ÿæˆå¼ä»»åŠ¡ ï¼ˆæœºå™¨ç¿»è¯‘ã€æ–‡æœ¬æ‘˜è¦ã€å†™è¯—é€ å¥ã€çœ‹å›¾è¯´è¯ï¼‰</li>
</ol>
<blockquote>
<p>è§£å†³è¿™äº›ä¸åŒçš„ä»»åŠ¡ï¼Œä»æ¨¡å‹è§’åº¦æ¥è®²ä»€ä¹ˆæœ€é‡è¦ï¼Ÿæ˜¯ç‰¹å¾æŠ½å–å™¨çš„èƒ½åŠ›ã€‚å°¤å…¶æ˜¯æ·±åº¦å­¦ä¹ æµè¡Œå¼€æ¥åï¼Œè¿™ä¸€ç‚¹æ›´å‡¸æ˜¾å‡ºæ¥ã€‚å› ä¸ºæ·±åº¦å­¦ä¹ æœ€å¤§çš„ä¼˜ç‚¹æ˜¯â€œç«¯åˆ°ç«¯ï¼ˆend to endï¼‰â€ï¼Œå½“ç„¶è¿™é‡Œä¸æ˜¯æŒ‡çš„ä»å®¢æˆ·ç«¯åˆ°äº‘ç«¯ï¼Œæ„æ€æ˜¯ä»¥å‰ç ”å‘äººå‘˜å¾—è€ƒè™‘è®¾è®¡æŠ½å–å“ªäº›ç‰¹å¾ï¼Œè€Œç«¯åˆ°ç«¯æ—¶ä»£åï¼Œè¿™äº›ä½ å®Œå…¨ä¸ç”¨ç®¡ï¼ŒæŠŠåŸå§‹è¾“å…¥æ‰”ç»™å¥½çš„ç‰¹å¾æŠ½å–å™¨ï¼Œå®ƒè‡ªå·±ä¼šæŠŠæœ‰ç”¨çš„ç‰¹å¾æŠ½å–å‡ºæ¥ã€‚</p>
</blockquote>
<h2 id="3-Attention"><a href="#3-Attention" class="headerlink" title="3. Attention"></a>3. Attention</h2><p><img src="/images/nlp/attention.jpg" alt=""></p>
<blockquote>
<p>Attention model ç‰©ç†å«ä¹‰: çœ‹ä½œæ˜¯è¾“å‡º Targetå¥å­ ä¸­æŸä¸ªå•è¯å’Œè¾“å…¥ Sourceå¥å­ æ¯ä¸ªå•è¯çš„ <strong>å¯¹é½æ¨¡å‹</strong>.</p>
<p>Self Attention å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç§ç‰¹æ®Šçš„ Source == Target çš„æƒ…å†µ.</p>
</blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/37601161" target="_blank" rel="external">good å¼ ä¿Šæ—: æ·±åº¦å­¦ä¹ ä¸­çš„ Attention Modelï¼ˆ2017ç‰ˆï¼‰</a></p>
<h2 id="4-Transformer"><a href="#4-Transformer" class="headerlink" title="4. Transformer"></a>4. Transformer</h2><p>BERT æ‰€é‡‡ç”¨çš„ç®—æ³•æ¥è‡ªäº <strong>2017.12 google Transformer</strong>: <a href="https://arxiv.org/abs/1706.03762" target="_blank" rel="external">Attenion Is All You Need</a></p>
<p>å…¥é—¨ Transformer çš„å¯ä»¥å‚è€ƒä»¥ä¸‹ä¸‰ç¯‡æ–‡ç« ï¼š</p>
<blockquote>
<p>ç¬¬ä¸€ç¯‡æ˜¯ Jay Alammarâ€™s Blog</p>
<p><a href="https://jalammar.github.io/illustrated-transformer/" target="_blank" rel="external">Transformer</a></p>
<p><a href="https://blog.csdn.net/yujianmin1990/article/details/85221271" target="_blank" rel="external">The Illustrated Transformerã€è¯‘ã€‘</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/54356280" target="_blank" rel="external">good The Illustrated Transformer ä¸­æ–‡ç‰ˆ</a></p>
<!--![](/images/nlp/bert-4.jpg)-->
<p><strong>Qã€Kã€V å®ƒä»¬éƒ½æ˜¯æœ‰åŠ©äºè®¡ç®—å’Œç†è§£æ³¨æ„åŠ›æœºåˆ¶</strong>çš„æŠ½è±¡æ¦‚å¿µ</p>
<p><img src="/images/nlp/bert-6.jpg" alt=""></p>
<p>ç¬¬äºŒç¯‡æ˜¯ Calvoâ€™s Blog</p>
<p><a href="https://medium.com/dissecting-bert/dissecting-bert-part-1-d3c3d495cdb3" target="_blank" rel="external">Dissecting BERT Part 1: The Encoder</a></p>
<p>ç¬¬ä¸‰ç¯‡æ˜¯ å“ˆä½›å¤§å­¦NLPç ”ç©¶ç»„</p>
<p><a href="http://nlp.seas.harvard.edu/2018/04/03/attention.html" target="_blank" rel="external">The Annotated Transformer</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/39034683" target="_blank" rel="external">good Transformer çŸ¥ä¹æ¨¡å‹ç¬”è®°ï¼Œé˜…è¯»å¿ƒå¾—</a></p>
</blockquote>
<!--![](/images/nlp/bert-2.jpg)-->
<blockquote>
<p>æœ¬æ–‡æ‰€è¯´çš„Transformerç‰¹å¾æŠ½å–å™¨å¹¶éåŸå§‹è®ºæ–‡æ‰€æŒ‡ã€‚å› ä¸ºEncoderéƒ¨åˆ†ç›®çš„æ¯”è¾ƒå•çº¯ï¼Œå°±æ˜¯ä»åŸå§‹å¥å­ä¸­æå–ç‰¹å¾ï¼Œè€ŒDecoderéƒ¨åˆ†åˆ™åŠŸèƒ½ç›¸å¯¹æ¯”è¾ƒå¤šï¼Œé™¤äº†ç‰¹å¾æå–åŠŸèƒ½å¤–ï¼Œè¿˜åŒ…å«è¯­è¨€æ¨¡å‹åŠŸèƒ½ï¼Œä»¥åŠç”¨attentionæœºåˆ¶è¡¨è¾¾çš„ç¿»è¯‘æ¨¡å‹åŠŸèƒ½ã€‚</p>
</blockquote>
<p><img src="/images/nlp/bert-3.jpg" alt=""></p>
<ul>
<li><a href="https://blog.csdn.net/qq_42208267/article/details/84967446" target="_blank" rel="external">å®Œå…¨å›¾è§£è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„Transformerâ€”â€”BERTåŸºç¡€ï¼ˆå…¥é—¨é•¿æ–‡ï¼‰</a></li>
<li><p><a href="https://colab.research.google.com/github/tensorflow/tensor2tensor/blob/master/tensor2tensor/notebooks/hello_t2t.ipynb" target="_blank" rel="external">tensor2tensor åŠ©äºç†è§£</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/58009338" target="_blank" rel="external">Transformer çŸ¥è¯†ç‚¹ç†è§£</a></p>
</li>
</ul>
<h3 id="4-1-step"><a href="#4-1-step" class="headerlink" title="4.1 step"></a>4.1 step</h3><p><a href="https://zhuanlan.zhihu.com/p/54356280" target="_blank" rel="external">åŠ¡å¿…é˜…è¯»ï¼š The Illustrated Transformer ä¸­æ–‡ç‰ˆ</a></p>
<blockquote>
<p><img src="https://pic4.zhimg.com/80/v2-f5e99be76f0727be85df0d8f4ab88057_hd.jpg" alt=""></p>
</blockquote>
<p>æ‰€æœ‰çš„ç¼–ç å™¨åœ¨ç»“æ„ä¸Šéƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†å®ƒä»¬æ²¡æœ‰å…±äº«å‚æ•°ã€‚æ¯ä¸ªè§£ç å™¨éƒ½å¯ä»¥åˆ†è§£æˆä¸¤ä¸ªå­å±‚ã€‚</p>
<blockquote>
<p><img src="https://pic2.zhimg.com/80/v2-fbb5dbc286b9f9cec2ddbc5eae2bf5a9_hd.jpg" alt=""></p>
<ol>
<li>ä»ç¼–ç å™¨è¾“å…¥çš„å¥å­é¦–å…ˆä¼šç»è¿‡ä¸€ä¸ªè‡ªæ³¨æ„åŠ›ï¼ˆself-attentionï¼‰å±‚</li>
<li>è¿™å±‚å¸®åŠ©ç¼–ç å™¨åœ¨å¯¹<code>æ¯ä¸ªå•è¯ç¼–ç æ—¶å…³æ³¨è¾“å…¥å¥å­çš„å…¶ä»–å•è¯</code>ã€‚æˆ‘ä»¬å°†åœ¨ç¨åçš„æ–‡ç« ä¸­æ›´æ·±å…¥åœ°ç ”ç©¶è‡ªæ³¨æ„åŠ›ã€‚</li>
</ol>
<p>è‡ªæ³¨æ„åŠ›å±‚çš„è¾“å‡ºä¼šä¼ é€’åˆ°å‰é¦ˆï¼ˆfeed-forwardï¼‰ç¥ç»ç½‘ç»œä¸­ã€‚æ¯ä¸ªä½ç½®çš„å•è¯å¯¹åº”çš„å‰é¦ˆç¥ç»ç½‘ç»œéƒ½å®Œå…¨ä¸€æ ·ï¼ˆè¯‘æ³¨ï¼šå¦ä¸€ç§è§£è¯»å°±æ˜¯ä¸€å±‚çª—å£ä¸ºä¸€ä¸ªå•è¯çš„ä¸€ç»´å·ç§¯ç¥ç»ç½‘ç»œï¼‰ã€‚</p>
<p>è§£ç å™¨ä¸­ä¹Ÿæœ‰ç¼–ç å™¨çš„è‡ªæ³¨æ„åŠ›ï¼ˆself-attentionï¼‰å±‚å’Œå‰é¦ˆï¼ˆfeed-forwardï¼‰å±‚ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªå±‚ä¹‹é—´è¿˜æœ‰ä¸€ä¸ªæ³¨æ„åŠ›å±‚ï¼Œç”¨æ¥å…³æ³¨è¾“å…¥å¥å­çš„ç›¸å…³éƒ¨åˆ†ï¼ˆå’Œseq2seqæ¨¡å‹çš„æ³¨æ„åŠ›ä½œç”¨ç›¸ä¼¼ï¼‰ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-1cfd35f0ff43407e25da3ab25631f82d_hd.jpg" alt=""></p>
</blockquote>
<p><strong>å°†å¼ é‡å¼•å…¥å›¾æ™¯</strong></p>
<blockquote>
<p><img src="https://pic2.zhimg.com/80/v2-d7b0bb93c9f7e7185d690b6df83d8859_hd.jpg" alt=""></p>
</blockquote>
<p><strong>ç°åœ¨æˆ‘ä»¬å¼€å§‹â€œç¼–ç â€</strong></p>
<blockquote>
<p><img src="https://pic2.zhimg.com/80/v2-7173f8fa4d601a5255af46d48e9d370d_hd.jpg" alt=""></p>
</blockquote>
<p>è¿™ä¸ªsoftmaxåˆ†æ•°å†³å®šäº†æ¯ä¸ªå•è¯å¯¹ç¼–ç å½“ä¸‹ä½ç½®ï¼ˆâ€œThinkingâ€ï¼‰çš„è´¡çŒ®ã€‚æ˜¾ç„¶ï¼Œå·²ç»åœ¨è¿™ä¸ªä½ç½®ä¸Šçš„å•è¯å°†è·å¾—æœ€é«˜çš„softmaxåˆ†æ•°ï¼Œä½†æœ‰æ—¶å…³æ³¨å¦ä¸€ä¸ªä¸å½“å‰å•è¯ç›¸å…³çš„å•è¯ä¹Ÿä¼šæœ‰å¸®åŠ©ã€‚</p>
<p>ç¬¬äº”æ­¥æ˜¯å°†æ¯ä¸ªå€¼å‘é‡ä¹˜ä»¥softmaxåˆ†æ•°(è¿™æ˜¯ä¸ºäº†å‡†å¤‡ä¹‹åå°†å®ƒä»¬æ±‚å’Œ)ã€‚è¿™é‡Œçš„ç›´è§‰æ˜¯å¸Œæœ›å…³æ³¨è¯­ä¹‰ä¸Šç›¸å…³çš„å•è¯ï¼Œå¹¶å¼±åŒ–ä¸ç›¸å…³çš„å•è¯(ä¾‹å¦‚ï¼Œè®©å®ƒä»¬ä¹˜ä»¥0.001è¿™æ ·çš„å°æ•°)ã€‚</p>
<p>ç¬¬å…­æ­¥æ˜¯å¯¹åŠ æƒå€¼å‘é‡æ±‚å’Œï¼ˆè¯‘æ³¨ï¼šè‡ªæ³¨æ„åŠ›çš„å¦ä¸€ç§è§£é‡Šå°±æ˜¯åœ¨ç¼–ç æŸä¸ªå•è¯æ—¶ï¼Œå°±æ˜¯å°†æ‰€æœ‰å•è¯çš„è¡¨ç¤ºï¼ˆå€¼å‘é‡ï¼‰è¿›è¡ŒåŠ æƒæ±‚å’Œï¼Œè€Œæƒé‡æ˜¯é€šè¿‡è¯¥è¯çš„è¡¨ç¤ºï¼ˆé”®å‘é‡ï¼‰ä¸è¢«ç¼–ç è¯è¡¨ç¤ºï¼ˆæŸ¥è¯¢å‘é‡ï¼‰çš„ç‚¹ç§¯å¹¶é€šè¿‡softmaxå¾—åˆ°ã€‚ï¼‰ï¼Œç„¶åå³å¾—åˆ°è‡ªæ³¨æ„åŠ›å±‚åœ¨è¯¥ä½ç½®çš„è¾“å‡º(åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯å¯¹äºç¬¬ä¸€ä¸ªå•è¯)ã€‚</p>
<blockquote>
<p><img src="https://pic4.zhimg.com/80/v2-609de8f8f8e628e6a9ca918230c70d67_hd.jpg" alt=""></p>
<p><img src="https://pic4.zhimg.com/80/v2-f8c32c325da61ee587abcd2426854b33_hd.jpg" alt=""></p>
<p><img src="https://pic4.zhimg.com/80/v2-12e11c0fea79bc485a6d9f4a2cb12f7f_hd.jpg" alt=""></p>
</blockquote>
<h2 id="5-BERT"><a href="#5-BERT" class="headerlink" title="5. BERT"></a>5. BERT</h2><p><strong>Action:</strong></p>
<ul>
<li><a href="https://github.com/hanxiao/bert-as-service/blob/master/README.md" target="_blank" rel="external">hanxiaoå¤§ä½¬å¼€æºå‡ºæ¥çš„bert-as-serviceæ¡†æ¶å¾ˆé€‚åˆåˆå­¦è€…</a></li>
<li><a href="https://netycc.com/2018/12/05/åˆ©ç”¨bertæ„å»ºå¥å‘é‡å¹¶è®¡ç®—ç›¸ä¼¼åº¦/" target="_blank" rel="external">Netyccâ€™s blog åˆ©ç”¨Bertæ„å»ºå¥å‘é‡å¹¶è®¡ç®—ç›¸ä¼¼åº¦</a></li>
<li><a href="https://juejin.im/post/5c6d65a56fb9a04a0f65c45d" target="_blank" rel="external">BERTä½¿ç”¨è¯¦è§£(å®æˆ˜)</a></li>
<li><a href="https://terrifyzhao.github.io/2018/11/29/ä½¿ç”¨BERTåšä¸­æ–‡æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—.html" target="_blank" rel="external">BERTä¸­æ–‡æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—ä¸æ–‡æœ¬åˆ†ç±»</a></li>
</ul>
<p><strong>Bertå®Œå…¨æŒ‡å—</strong></p>
<ul>
<li><a href="https://terrifyzhao.github.io/2019/01/17/BERTå®Œå…¨æŒ‡å—.html" target="_blank" rel="external">BERTå®Œå…¨æŒ‡å—</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/51934140" target="_blank" rel="external">å¼ ä¿Šæ—: å¤©ç©ºä¹‹åŸï¼šæ‹‰é©¬åŠªé‡‘å¼æ€ç»´è®­ç»ƒæ³•</a></li>
<li><a href="https://www.zhihu.com/question/20584585/answer/15559213" target="_blank" rel="external">äº’è”ç½‘äººåˆ°äº† 30 å²ï¼Œå¤§éƒ¨åˆ†éƒ½å»å¹²ä»€ä¹ˆäº†ï¼Ÿ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/50717786" target="_blank" rel="external">AINLP BERTç›¸å…³è®ºæ–‡ã€æ–‡ç« å’Œä»£ç èµ„æºæ±‡æ€»</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/53099098" target="_blank" rel="external">è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„Transformerå’ŒBERT</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/36331888" target="_blank" rel="external">RNNå’ŒLSTMå¼±ï¼çˆ†ï¼äº†ï¼æ³¨æ„åŠ›æ¨¡å‹æ‰æ˜¯ç‹é“</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/46997268" target="_blank" rel="external">NLPçªç ´æ€§æˆæœ BERT æ¨¡å‹è¯¦ç»†è§£è¯»</a></li>
<li><a href="https://mp.weixin.qq.com/s/H4at_BDLwZWqlBHLjMZWRQ" target="_blank" rel="external">ä¸€æ­¥æ­¥ç†è§£BERT</a></li>
<li><a href="https://kexue.fm/archives/6736" target="_blank" rel="external">å½“Berté‡ä¸ŠKerasï¼šè¿™å¯èƒ½æ˜¯Bertæœ€ç®€å•çš„æ‰“å¼€å§¿åŠ¿</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Seq2Seq and Attention]]></title>
      <url>http://shopee.ai/2019/06/17/deeplearning/Seq2Seq-Attention/</url>
      <content type="html"><![CDATA[<p><img src="/images/deeplearning/Seq2Seq-00.jpg" width="550" alt="Attention å’Œäººç±»çš„é€‰æ‹©æ€§è§†è§‰æ³¨æ„åŠ›æœºåˆ¶ç±»ä¼¼"></p>
<a id="more"></a>
<p>æˆ‘ä»¬å…ˆç»“åˆä¸Šç¯‡æ–‡ç« çš„å†…å®¹ï¼Œå°† language model å’Œ Machine translation model åšä¸€ä¸ªå¯¹æ¯”ï¼š</p>
<p><img src="/images/deeplearning/C5W3-3.png" width="600"></p>
<p><img src="/images/deeplearning/C5W3-4.png" width="700"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæœºå™¨ç¿»è¯‘æ¨¡å‹çš„ååŠéƒ¨åˆ†å…¶å®å°±æ˜¯è¯­è¨€æ¨¡å‹ï¼ŒAndrew å°†å…¶ç§°ä¹‹ä¸º â€œ<strong>æ¡ä»¶è¯­è¨€æ¨¡å‹</strong>â€.</p>
<p>$$<br>P(y^{<1>},â€¦,y^{&lt;{T_y}&gt;}|x^{<1>},â€¦,x^{&lt;{T_x}&gt;})<br>$$</1></1></p>
<h2 id="1-Encoder-Decoder"><a href="#1-Encoder-Decoder" class="headerlink" title="1. Encoder-Decoder"></a>1. Encoder-Decoder</h2><p><img src="/images/deeplearning/Seq2Seq-03.jpg" width="600" alt="Encoder-Decoder"></p>
<p>Source å’Œ Target åˆ†åˆ«ç”±å„è‡ªçš„å•è¯åºåˆ—æ„æˆï¼š</p>
<p>$$<br>Source = ({x}_1, {x}_2, â€¦, {x}_m)<br>$$</p>
<p>$$<br>Target = ({y}_1, {y}_2, â€¦, {y}_n)<br>$$</p>
<p>Encoder é¡¾åæ€ä¹‰å°±æ˜¯å¯¹è¾“å…¥å¥å­Sourceè¿›è¡Œç¼–ç ï¼Œå°†è¾“å…¥å¥å­é€šè¿‡éçº¿æ€§å˜æ¢è½¬åŒ–ä¸ºä¸­é—´è¯­ä¹‰è¡¨ç¤ºCï¼š</p>
<p>$$<br>C = F({x}_1, {x}_2, â€¦, {x}_m)<br>$$</p>
<p>å¯¹äº Decoder æ¥è¯´ï¼Œå…¶ä»»åŠ¡æ˜¯æ ¹æ®å¥å­ Source çš„ ä¸­é—´è¯­ä¹‰è¡¨ç¤º C å’Œ ä¹‹å‰å·²ç»ç”Ÿæˆçš„å†å²ä¿¡æ¯</p>
<p>$$<br>({y}_1, {y}_2, â€¦, {y}_{i-1})<br>$$</p>
<p>æ¥ç”Ÿæˆ iæ—¶åˆ» è¦ç”Ÿæˆçš„å•è¯ ${y}_{i}$</p>
<p>$$<br>y_{i} = g(C, {y}_1, {y}_2, â€¦, {y}_{i-1})<br>$$</p>
<blockquote>
<p>æ¯ä¸ª $y_i$ éƒ½ä¾æ¬¡è¿™ä¹ˆäº§ç”Ÿï¼Œé‚£ä¹ˆçœ‹èµ·æ¥å°±æ˜¯æ•´ä¸ªç³»ç»Ÿæ ¹æ®è¾“å…¥ å¥å­Source ç”Ÿæˆäº†ç›®æ ‡å¥å­Targetã€‚</p>
<p>(1). å¦‚æœSourceæ˜¯ä¸­æ–‡å¥å­ï¼ŒTargetæ˜¯è‹±æ–‡å¥å­ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯è§£å†³æœºå™¨ç¿»è¯‘é—®é¢˜ï¼›<br>(2). å¦‚æœSourceæ˜¯ä¸€ç¯‡æ–‡ç« ï¼ŒTargetæ˜¯æ¦‚æ‹¬æ€§çš„å‡ å¥æè¿°è¯­å¥ï¼Œé‚£ä¹ˆè¿™æ˜¯æ–‡æœ¬æ‘˜è¦ï¼›<br>(3). å¦‚æœSourceæ˜¯ä¸€å¥é—®å¥ï¼ŒTargetæ˜¯ä¸€å¥å›ç­”ï¼Œé‚£ä¹ˆè¿™æ˜¯é—®ç­”ç³»ç»Ÿã€‚</p>
<p>Encoder-Decoderæ¡†æ¶ ä¸ä»…ä»…åœ¨æ–‡æœ¬é¢†åŸŸå¹¿æ³›ä½¿ç”¨ï¼Œåœ¨è¯­éŸ³è¯†åˆ«ã€å›¾åƒå¤„ç†ç­‰é¢†åŸŸä¹Ÿç»å¸¸ä½¿ç”¨.</p>
</blockquote>
<p><a href="https://arxiv.org/pdf/1406.1078.pdf" target="_blank" rel="external">Learning Phrase Representations using RNN Encoderâ€“Decoder for Statistical Machine Translation</a></p>
<h3 id="1-1-encoder"><a href="#1-1-encoder" class="headerlink" title="1.1 encoder"></a>1.1 encoder</h3><p>ç”¨å‡½æ•° $f$ è¡¨è¾¾ RNN éšè—å±‚çš„å˜æ¢ï¼š</p>
<p>$$<br>\boldsymbol{h}_t = f(\boldsymbol{x}_t, \boldsymbol{h}_{t-1}).<br>$$</p>
<p>ç„¶å Encoder é€šè¿‡è‡ªå®šä¹‰å‡½æ•° $q$ å°†å„ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€å˜æ¢ä¸ºèƒŒæ™¯å˜é‡</p>
<p>$$<br>\boldsymbol{c} =  q(\boldsymbol{h}_1, \ldots, \boldsymbol{h}_T).<br>$$</p>
<p>ä¾‹å¦‚ï¼Œå½“é€‰æ‹© $q(\boldsymbol{h}_1, \ldots, \boldsymbol{h}_T) = \boldsymbol{h}_T$ æ—¶ï¼ŒèƒŒæ™¯å˜é‡æ˜¯è¾“å…¥åºåˆ—æœ€ç»ˆæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_T$ã€‚</p>
<blockquote>
<p>ä»¥ä¸Šæè¿°çš„ç¼–ç å™¨æ˜¯ä¸€ä¸ªå•å‘çš„ RNNï¼Œæ¯ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€åªå–å†³äºè¯¥æ—¶é—´æ­¥åŠä¹‹å‰çš„è¾“å…¥å­åºåˆ—ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Bi-RNN æ„é€ ç¼–ç å™¨ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–ç å™¨æ¯ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€åŒæ—¶å–å†³äºè¯¥æ—¶é—´æ­¥ä¹‹å‰å’Œä¹‹åçš„å­åºåˆ—ï¼ˆåŒ…æ‹¬å½“å‰æ—¶é—´æ­¥çš„è¾“å…¥ï¼‰ï¼Œå¹¶ç¼–ç äº†æ•´ä¸ªåºåˆ—çš„ä¿¡æ¯ã€‚</p>
</blockquote>
<p><img src="/images/chatbot/seq2seq-5.jpeg" width="700"></p>
<h3 id="1-2-decoder"><a href="#1-2-decoder" class="headerlink" title="1.2 decoder"></a>1.2 decoder</h3><blockquote>
<p>ä¸Šå°èŠ‚ Encode ç¼–ç å™¨è¾“å‡ºçš„èƒŒæ™¯å˜é‡ $c$ ç¼–ç äº†æ•´ä¸ªè¾“å…¥åºåˆ— $x_1, \ldots, x_T$ çš„ä¿¡æ¯ã€‚</p>
</blockquote>
<p>ç»™å®š train sample çš„ input sequenceï¼š $y_1, y_2, \ldots, y_{Tâ€™}$ï¼Œå¯¹æ¯ä¸ªæ—¶é—´æ­¥ $tâ€™$ï¼ˆç¬¦å·ä¸ input sequence æˆ– encoder çš„æ—¶é—´æ­¥ $t$ æœ‰åŒºåˆ«ï¼‰ï¼Œ decoder è¾“å‡º $y_{tâ€™}$ çš„æ¡ä»¶æ¦‚ç‡å°†åŸºäºä¹‹å‰çš„ output sequenceï¼š $y_1,\ldots,y_{tâ€™-1}$ å’Œ $c$.</p>
<p><strong>å³:</strong> </p>
<p>$$<br>P(y_{tâ€™} \mid y_1, \ldots, y_{tâ€™-1}, \boldsymbol{c})<br>$$</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>å¦ä¸€ä¸ªRNN</code>ä½œä¸ºè§£ç å™¨ã€‚ åœ¨è¾“å‡ºåºåˆ—çš„æ—¶é—´æ­¥ $t^\prime$ï¼Œè§£ç å™¨å°†ä¸Šä¸€æ—¶é—´æ­¥çš„è¾“å‡º $y_{t^\prime-1}$ ä»¥åŠèƒŒæ™¯å˜é‡ $c$ ä½œä¸ºè¾“å…¥ï¼Œå¹¶å°†å®ƒä»¬ä¸ä¸Šä¸€æ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_{t^\prime-1}$ å˜æ¢ä¸ºå½“å‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_{t^\prime}$ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•° $g$ è¡¨è¾¾è§£ç å™¨éšè—å±‚çš„å˜æ¢ï¼š</p>
<p>$$<br>\boldsymbol{h}_{t^\prime} = g(y_{t^\prime-1}, \boldsymbol{c}, \boldsymbol{h}_{t^\prime-1}).<br>$$</p>
<p>å¯ä½¿ç”¨è‡ªå®šä¹‰çš„ output layer å’Œ softmax è®¡ç®— ${P}(y_{t^\prime} \mid y_1, \ldots, y_{t^\prime-1}, \boldsymbol{c})$ï¼Œè®¡ç®—å½“å‰æ—¶é—´æ­¥è¾“å‡º $y_{t^\prime}$ çš„æ¦‚ç‡åˆ†å¸ƒ.</p>
<h3 id="1-3-decoder-greedy-search"><a href="#1-3-decoder-greedy-search" class="headerlink" title="1.3 decoder greedy search"></a>1.3 decoder greedy search</h3><p>åœ¨è¯­è¨€æ¨¡å‹ä¹‹å‰æœ‰ä¸€ ä¸ªæ¡ä»¶ä¹Ÿå°±æ˜¯è¢«ç¿»è¯‘çš„å¥å­:</p>
<p>$$<br>P(y^{<1>},â€¦,y^{&lt;{T_y}&gt;}|x^{<1>},â€¦,x^{&lt;{T_x}&gt;})<br>$$</1></1></p>
<blockquote>
<p>ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ç¿»è¯‘æ˜¯æœ‰å¾ˆå¤šç§æ–¹å¼çš„ï¼ŒåŒä¸€å¥è¯å¯ä»¥ç¿»è¯‘æˆå¾ˆå¤šä¸åŒçš„å¥å­ï¼Œé‚£ä¹ˆå¦‚ä½•åˆ¤æ–­å“ªä¸€å¥å­æ˜¯æœ€å¥½çš„å‘¢ï¼Ÿ</p>
<p>è¿˜æ˜¯ç¿»è¯‘ä¸Šé¢é‚£å¥è¯ï¼Œæœ‰å¦‚ä¸‹å‡ ç§ç¿»è¯‘ç»“æœï¼š</p>
<ul>
<li>â€œJane is visiting China in September.â€</li>
<li>â€œJane is going to visit China in September.â€</li>
<li>â€œIn September, Jane will visit Chinaâ€</li>
<li>â€œJaneâ€™s Chinese friend welcomed her in September.â€</li>
<li>â€¦.</li>
</ul>
</blockquote>
<p>å¾—åˆ°æœ€å¥½çš„ç¿»è¯‘ç»“æœï¼Œè½¬æ¢æˆæ•°å­¦å…¬å¼å°±æ˜¯:</p>
<p>$$<br>argmax P(y^{<1>},â€¦,y^{&lt;{T_y}&gt;}|x^{<1>},â€¦,x^{&lt;{T_x}&gt;})<br>$$</1></1></p>
<p>é‚£ä¹ˆ Greedy Search å°±æ˜¯æ¯æ¬¡è¾“å‡ºçš„é‚£ä¸ªéƒ½å¿…é¡»æ˜¯æœ€å¥½çš„ã€‚è¿˜æ˜¯ä»¥ç¿»è¯‘é‚£å¥è¯ä¸ºä¾‹ã€‚</p>
<blockquote>
<p>ç°åœ¨å‡è®¾é€šè¿‡è´ªå©ªæœç´¢å·²ç»ç¡®å®šæœ€å¥½çš„ç¿»è¯‘çš„å‰ä¸¤ä¸ªå•è¯æ˜¯ï¼šâ€Jane is â€œ</p>
<p>ç„¶åå› ä¸º â€œgoingâ€ å‡ºç°é¢‘ç‡è¾ƒé«˜å’Œå…¶å®ƒåŸå› ï¼Œæ‰€ä»¥æ ¹æ®è´ªå©ªç®—æ³•å¾—å‡ºæ­¤æ—¶ç¬¬ä¸‰ä¸ªå•è¯çš„æœ€å¥½ç»“æœæ˜¯ â€œgoingâ€ã€‚</p>
<p>æ‰€ä»¥æ®è´ªå©ªç®—æ³•æœ€åçš„ç¿»è¯‘ç»“æœå¯èƒ½æ˜¯ä¸‹å›¾ä¸­çš„ç¬¬äºŒä¸ªå¥å­ï¼Œ<strong>ä½†ç¬¬ä¸€å¥å¯èƒ½ä¼šæ›´å¥½.</strong></p>
<p><img src="/images/deeplearning/C5W3-5.png" width="600"></p>
<p>æ‰€ä»¥ Greedy Search çš„ç¼ºç‚¹æ˜¯å±€éƒ¨æœ€ä¼˜å¹¶ä¸ä»£è¡¨å…¨å±€æœ€ä¼˜. Greedy Search æ›´åŠ çŸ­è§†ï¼Œçœ‹çš„ä¸é•¿è¿œã€‚</p>
</blockquote>
<h3 id="1-4-decoder-beam-search"><a href="#1-4-decoder-beam-search" class="headerlink" title="1.4 decoder beam search"></a>1.4 decoder beam search</h3><p>Beam Search æ˜¯ greedy search çš„åŠ å¼ºç‰ˆæœ¬ï¼Œé¦–å…ˆè¦é¢„è®¾ä¸€ä¸ªå€¼ beam widthï¼Œè¿™é‡Œç­‰äº <code>3</code> (å¦‚æœç­‰äº 1 å°±æ˜¯ greedy search)ã€‚ç„¶ååœ¨æ¯ä¸€æ­¥ä¿å­˜æœ€ä½³çš„ 3 ä¸ªç»“æœè¿›è¡Œä¸‹ä¸€æ­¥çš„é€‰æ‹©ï¼Œä»¥æ­¤ç›´åˆ°é‡åˆ°å¥å­çš„ç»ˆç»“ç¬¦.</p>
<h4 id="1-4-1-step-1"><a href="#1-4-1-step-1" class="headerlink" title="1.4.1 step 1"></a>1.4.1 step 1</h4><p>å¦‚ä¸‹å›¾ç¤ºï¼Œå› ä¸ºbeam width=3ï¼Œæ‰€ä»¥æ ¹æ®è¾“å…¥çš„éœ€è¦ç¿»è¯‘çš„å¥å­é€‰å‡º 3 ä¸ª $y^{<1>}$æœ€å¯èƒ½çš„è¾“å‡ºå€¼ã€‚</1></p>
<p>å³é€‰å‡º $P(y^{<1>}|x)$ æœ€å¤§çš„å‰3ä¸ªå€¼ã€‚ å‡è®¾åˆ†åˆ«æ˜¯ <strong>â€œinâ€, â€œjaneâ€, â€œseptemberâ€</strong></1></p>
<p><img src="/images/deeplearning/C5W3-6_1.png" width="650"></p>
<h4 id="1-4-2-step-2"><a href="#1-4-2-step-2" class="headerlink" title="1.4.2 step 2"></a>1.4.2 step 2</h4><p>ä»¥â€<strong>in</strong>â€œä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼Œå…¶ä»–åŒç†.</p>
<p>å¦‚ä¸‹å›¾ç¤ºï¼Œåœ¨ç»™å®šè¢«ç¿»è¯‘å¥å­ $x$ å’Œç¡®å®š $y^{<1>}$ = â€œ<strong>in</strong>â€œ çš„æ¡ä»¶ä¸‹ï¼Œä¸‹ä¸€ä¸ªè¾“å‡ºå€¼çš„æ¡ä»¶æ¦‚ç‡æ˜¯ $P(y^{<2>}|x,â€inâ€)$ã€‚</2></1></p>
<p>æ­¤æ—¶éœ€è¦ä» 10000 ç§å¯èƒ½ä¸­æ‰¾å‡ºæ¡ä»¶æ¦‚ç‡æœ€é«˜çš„å‰ 3 ä¸ª.</p>
<p>åˆç”±å…¬å¼:</p>
<p>$$<br>P(y^{<1>},y^{<2>}|x)=P(y^{<1>}|x) P(y^{<2>}|x, y^{<1>})<br>$$</1></2></1></2></1></p>
<p>æˆ‘ä»¬æ­¤æ—¶å·²ç»å¾—åˆ°äº†ç»™å®šè¾“å…¥æ•°æ®ï¼Œå‰ä¸¤ä¸ªè¾“å‡ºå€¼çš„è¾“å‡ºæ¦‚ç‡æ¯”è¾ƒå¤§çš„ç»„åˆäº†.</p>
<p><img src="/images/deeplearning/C5W3-7_1.png" width="650"></p>
<p>å¦å¤– 2 ä¸ªå•è¯ä¹ŸåšåŒæ ·çš„è®¡ç®—</p>
<p><img src="/images/deeplearning/C5W3-8_1.png" width="650"></p>
<p>æ­¤æ—¶æˆ‘ä»¬å¾—åˆ°äº† 9 ç»„ $P(y^{<1>},y^{<2>}|x)$, æ­¤æ—¶æˆ‘ä»¬å†ä»è¿™ 9ç»„ ä¸­é€‰å‡ºæ¦‚ç‡å€¼æœ€é«˜çš„å‰ 3 ä¸ªã€‚</2></1></p>
<p>å¦‚ä¸‹å›¾ç¤ºï¼Œå‡è®¾æ˜¯è¿™3ä¸ªï¼š</p>
<blockquote>
<ul>
<li>â€œin septemberâ€</li>
<li>â€œjane isâ€</li>
<li>â€œjane visitsâ€</li>
</ul>
</blockquote>
<h4 id="1-4-3-step-3"><a href="#1-4-3-step-3" class="headerlink" title="1.4.3 step 3"></a>1.4.3 step 3</h4><p>ç»§ç»­ step 2 çš„è¿‡ç¨‹ï¼Œæ ¹æ® $P(y^{<3>}|x,y^{<1>},y^{<2>})$ é€‰å‡º $P(y^{<1>},y^{<2>},y^{<3>}|x)$ æœ€å¤§çš„å‰3ä¸ªç»„åˆ.</3></2></1></2></1></3></p>
<p>åé¢é‡å¤ä¸Šè¿°æ­¥éª¤å¾—å‡ºç»“æœ.</p>
<h4 id="1-4-4-summary"><a href="#1-4-4-summary" class="headerlink" title="1.4.4 summary"></a>1.4.4 summary</h4><p>æ€»ç»“ä¸€ä¸‹ä¸Šé¢çš„æ­¥éª¤å°±æ˜¯ï¼š</p>
<blockquote>
<ul>
<li><p>(1). ç»è¿‡ encoder ä»¥åï¼Œdecoder ç»™å‡ºæœ€æœ‰å¯èƒ½çš„ä¸‰ä¸ªå¼€å¤´è¯ä¾æ¬¡ä¸º â€œinâ€, â€œjaneâ€, â€œseptemberâ€<br>$$P(y^{<1>}|x)$$</1></p>
</li>
<li><p>(2). ç» step 1 å¾—åˆ°çš„å€¼è¾“å…¥åˆ° step 2 ä¸­ï¼Œæœ€å¯èƒ½çš„ä¸‰ä¸ªç¿»è¯‘ä¸º â€œin septemberâ€, â€œjane isâ€, â€œjane visitsâ€ </p>
</li>
</ul>
<p>$$P(y^{<2>}|x,y^{<1>})$$</1></2></p>
<p>(è¿™é‡Œï¼Œseptemberå¼€å¤´çš„å¥å­ç”±äºæ¦‚ç‡æ²¡æœ‰å…¶ä»–çš„å¯èƒ½æ€§å¤§ï¼Œå·²ç»å¤±å»äº†ä½œä¸ºå¼€å¤´è¯èµ„æ ¼)</p>
<ul>
<li>(3). ç»§ç»­è¿™ä¸ªè¿‡ç¨‹â€¦ </li>
</ul>
<p>$$P(y^{<3>}|x,y^{<1>},y^{<2>})$$</2></1></3></p>
</blockquote>
<p><img src="/images/deeplearning/C5W3-10_1.png" width="750"></p>
<h3 id="1-5-refinements-to-beam-search"><a href="#1-5-refinements-to-beam-search" class="headerlink" title="1.5 refinements to beam search"></a>1.5 refinements to beam search</h3><p>$$<br>P(y^{<1>},â€¦.,P(y^{T_y})|x)=P(y^{<1>}|x)P(y^{<2>}|x,y^{<1>})â€¦P(y^{&lt;{T_y}&gt;}|x,y^{<1>},â€¦y^{&lt;{T_y-1}&gt;})<br>$$</1></1></2></1></1></p>
<p>æ‰€ä»¥è¦æ»¡è¶³ $argmax P(y^{<1>},â€¦.,P(y^{T_y})|x)$, ä¹Ÿå°±ç­‰åŒäºè¦æ»¡è¶³</1></p>
<p>$$<br>argmax \prod_{t=1}^{T_y}P(y^{&lt;{t}&gt;}|x,y^{<1>},â€¦y^{&lt;{t-1}&gt;})<br>$$</1></p>
<p>ä½†æ˜¯ä¸Šé¢çš„å…¬å¼å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºæ¦‚ç‡éƒ½æ˜¯å°äº1çš„ï¼Œç´¯ä¹˜ä¹‹åä¼šè¶Šæ¥è¶Šå°ï¼Œå¯èƒ½å°åˆ°è®¡ç®—æœºæ— æ³•ç²¾ç¡®å­˜å‚¨ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶è½¬å˜æˆ log å½¢å¼ï¼ˆå› ä¸º log æ˜¯å•è°ƒé€’å¢çš„ï¼Œæ‰€ä»¥å¯¹æœ€ç»ˆç»“æœä¸ä¼šæœ‰å½±å“ï¼‰ï¼Œå…¶å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>$$<br>argmax \sum_{t=1}^{T_y}logP(y^{&lt;{t}&gt;}|x,y^{<1>},â€¦y^{&lt;{t-1}&gt;})<br>$$</1></p>
<blockquote>
<p>Butï¼ï¼ï¼ä¸Šè¿°å…¬å¼ä»ç„¶å­˜åœ¨bugï¼Œè§‚å¯Ÿå¯ä»¥çŸ¥é“ï¼Œæ¦‚ç‡å€¼éƒ½æ˜¯å°äº1çš„ï¼Œé‚£ä¹ˆlogä¹‹åéƒ½æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥ä¸ºäº†ä½¿å¾—æœ€åçš„å€¼æœ€å¤§ï¼Œé‚£ä¹ˆåªè¦ä¿è¯ç¿»è¯‘çš„å¥å­è¶ŠçŸ­ï¼Œé‚£ä¹ˆå€¼å°±è¶Šå¤§ï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨è¿™ä¸ªå…¬å¼ï¼Œé‚£ä¹ˆæœ€åç¿»è¯‘çš„å¥å­é€šå¸¸éƒ½æ˜¯æ¯”è¾ƒçŸ­çš„å¥å­ï¼Œè¿™æ˜¾ç„¶ä¸è¡Œã€‚</p>
</blockquote>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡å½’ä¸€åŒ–çš„æ–¹å¼æ¥çº æ­£ï¼Œå³ä¿è¯å¹³å‡åˆ°æ¯ä¸ªå•è¯éƒ½èƒ½å¾—åˆ°æœ€å¤§å€¼ã€‚å…¶å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>$$<br>argmax \frac{1}{T_y}\sum_{t=1}^{T_y}logP(y^{&lt;{t}&gt;}|x,y^{<1>},â€¦y^{&lt;{t-1}&gt;})<br>$$</1></p>
<p>å½’ä¸€åŒ–çš„ç¡®èƒ½å¾ˆå¥½çš„è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å®é™…è¿ç”¨ä¸­ï¼Œä¼šé¢å¤–æ·»åŠ ä¸€ä¸ªå‚æ•° $Î±$, å…¶å¤§å°ä»‹äº 0 å’Œ 1 ä¹‹é—´</p>
<p>$$<br>argmax \frac{1}{T_y^Î±}\sum_{t=1}^{T_y}logP(y^{&lt;{t}&gt;}|x,y^{<1>},â€¦y^{&lt;{t-1}&gt;})<br>$$</1></p>
<p><img src="/images/deeplearning/C5W3-11_1.png" width="700"></p>
<blockquote>
<p>$T_y$ ä¸ºè¾“å‡ºå¥å­ä¸­å•è¯çš„ä¸ªæ•°ï¼Œ$Î±$ æ˜¯ä¸€ä¸ªè¶…å‚æ•° (å¯ä»¥è®¾ç½®ä¸º 0.7)</p>
<p>$Î±$ == 1. åˆ™ä»£è¡¨ å®Œå…¨ç”¨å¥å­é•¿åº¦å½’ä¸€åŒ–<br>$Î±$ == 0. åˆ™ä»£è¡¨ æ²¡æœ‰å½’ä¸€åŒ–<br>$Î±$ == 0~1. åˆ™ä»£è¡¨ åœ¨ å¥å­é•¿åº¦å½’ä¸€åŒ– ä¸ æ²¡æœ‰å½’ä¸€åŒ– ä¹‹é—´çš„æŠ˜ä¸­ç¨‹åº¦.</p>
<p>beam width = B = 3~<strong>10</strong>~100 æ˜¯ä¼šæœ‰ä¸€ä¸ªæ˜æ˜¾çš„å¢é•¿ï¼Œä½†æ˜¯ B ä» 1000 ~ 3000 æ˜¯å¹¶æ²¡æœ‰ä¸€ä¸ªæ˜æ˜¾å¢é•¿çš„.</p>
</blockquote>
<h3 id="1-6-train-seq2seq-model"><a href="#1-6-train-seq2seq-model" class="headerlink" title="1.6 train seq2seq model"></a>1.6 train seq2seq model</h3><p>æ ¹æ®æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œæˆ‘ä»¬å¯ä»¥æœ€å¤§åŒ–è¾“å‡ºåºåˆ—åŸºäºè¾“å…¥åºåˆ—çš„æ¡ä»¶æ¦‚ç‡</p>
<p>$$<br>\begin{split}\begin{aligned}<br>{P}(y_1, \ldots, y_{Tâ€™} \mid x_1, \ldots, x_T)<br>&amp;= \prod_{tâ€™=1}^{Tâ€™} {P}(y_{tâ€™} \mid y_1, \ldots, y_{tâ€™-1}, x_1, \ldots, x_T)\\<br>&amp;= \prod_{tâ€™=1}^{Tâ€™} {P}(y_{tâ€™} \mid y_1, \ldots, y_{tâ€™-1}, \boldsymbol{c}),<br>\end{aligned}\end{split}<br>$$</p>
<p>å¹¶å¾—åˆ°è¯¥è¾“å‡ºåºåˆ—çš„æŸå¤±</p>
<p>$$ - \log{P}(y_1, \ldots, y_{Tâ€™} \mid x_1, \ldots, x_T) = -\sum_{tâ€™=1}^{Tâ€™} \log {P}(y_{tâ€™} \mid y_1,  \ldots, y_{tâ€™-1}, \boldsymbol{c}),<br>$$</p>
<p><img src="/images/chatbot/seq2seq-6.png" width="800"></p>
<p>åœ¨æ¨¡å‹è®­ç»ƒä¸­ï¼Œæ‰€æœ‰è¾“å‡ºåºåˆ—æŸå¤±çš„å‡å€¼é€šå¸¸ä½œä¸ºéœ€è¦æœ€å°åŒ–çš„æŸå¤±å‡½æ•°ã€‚åœ¨å›¾ä¸­æ‰€æè¿°çš„æ¨¡å‹é¢„æµ‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†decodeåœ¨ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºä½œä¸ºå½“å‰æ—¶é—´æ­¥çš„è¾“å…¥ã€‚ä¸æ­¤ä¸åŒï¼Œåœ¨è®­ç»ƒä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ ‡ç­¾åºåˆ—åœ¨ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„æ ‡ç­¾ä½œä¸ºdecodeåœ¨å½“å‰æ—¶é—´æ­¥çš„è¾“å…¥ã€‚è¿™å«åšå¼ºåˆ¶æ•™å­¦ï¼ˆteacher forcingï¼‰ã€‚</p>
<h3 id="1-7-summary"><a href="#1-7-summary" class="headerlink" title="1.7 summary"></a>1.7 summary</h3><ul>
<li>ç¼–ç å™¨ - è§£ç å™¨ï¼ˆseq2seqï¼‰å¯ä»¥è¾“å…¥å¹¶è¾“å‡ºä¸å®šé•¿çš„åºåˆ—ã€‚</li>
<li>ç¼–ç å™¨â€”è§£ç å™¨ä½¿ç”¨äº†ä¸¤ä¸ª RNNã€‚</li>
<li>åœ¨ç¼–ç å™¨â€”è§£ç å™¨çš„è®­ç»ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ teacher forcingã€‚(è¿™ä¹Ÿæ˜¯ Seq2Seq 2 çš„å†…å®¹)</li>
</ul>
<h2 id="2-Seq2Seq-æ¡†æ¶2"><a href="#2-Seq2Seq-æ¡†æ¶2" class="headerlink" title="2. Seq2Seq æ¡†æ¶2"></a>2. Seq2Seq æ¡†æ¶2</h2><p>Seq2Seq model æ¥è‡ªäº â€œ<a href="https://arxiv.org/pdf/1409.3215.pdf" target="_blank" rel="external">Sequence to Sequence Learning with Neural Networks</a>â€</p>
<p>å…¶æ¨¡å‹ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/images/chatbot/seq2seq-2.jpg" width="700"></p>
<p>ä¸ä¸Šé¢æ¨¡å‹æœ€å¤§çš„åŒºåˆ«åœ¨äºå…¶sourceç¼–ç åçš„ å‘é‡$C$ ç›´æ¥ä½œä¸º Decoder RNN çš„ init stateï¼Œè€Œä¸æ˜¯åœ¨æ¯æ¬¡decodeæ—¶éƒ½ä½œä¸º RNN cell çš„è¾“å…¥ã€‚æ­¤å¤–ï¼Œdecode æ—¶ RNN çš„è¾“å…¥æ˜¯ labelï¼Œè€Œä¸æ˜¯å‰ä¸€æ—¶åˆ»çš„è¾“å‡ºã€‚</p>
<p>Encoder é˜¶æ®µï¼š</p>
<p><img src="/images/chatbot/seq2seq-3.jpg" width="500"></p>
<blockquote>
<p>æ¯ä¸ªè¯ç»è¿‡ RNN éƒ½ä¼šç¼–ç ä¸º hidden (e0,e1,e2), sourceåºåˆ— çš„ç¼–ç å‘é‡e å°±æ˜¯ æœ€ç»ˆçš„ hidden state e2</p>
<p>Tipsï¼š è¿™é‡Œ $e_0, e_1, e_2$ æ˜¯ hidden stateï¼Œ å¹¶æ²¡æœ‰ç»è¿‡ g å’Œ softmax .</p>
</blockquote>
<p>Decoder é˜¶æ®µï¼š</p>
<p><img src="/images/chatbot/seq2seq-4.jpg" width="500"></p>
<p>eå‘é‡ ä»…ä½œä¸º RNN çš„ init state ä¼ å…¥decodeæ¨¡å‹ï¼Œæ¯ä¸€æ—¶åˆ»è¾“å…¥éƒ½æ˜¯å‰ä¸€æ—¶åˆ»çš„æ­£ç¡®labelã€‚ç›´åˆ°æœ€ç»ˆè¾“å…¥<eos>ç¬¦å·æˆªæ­¢.</eos></p>
<h2 id="3-Seq2Seq-Attention"><a href="#3-Seq2Seq-Attention" class="headerlink" title="3. Seq2Seq Attention"></a>3. Seq2Seq Attention</h2><p>è¯·åŠ¡å¿…è¦é˜…è¯»ï¼š <a href="https://zhuanlan.zhihu.com/p/37601161" target="_blank" rel="external">å¼ ä¿Šæ— æ·±åº¦å­¦ä¹ ä¸­çš„æ³¨æ„åŠ›æ¨¡å‹ï¼ˆ2017ç‰ˆï¼‰</a></p>
<p><img src="/images/deeplearning/Attention-01.jpg" width="600"></p>
<p><strong>decode</strong> åœ¨å„ä¸ªæ—¶é—´æ­¥ä¾èµ–ç›¸åŒçš„ <strong>èƒŒæ™¯å˜é‡ $c$</strong> æ¥è·å–è¾“å…¥åºåˆ—ä¿¡æ¯ã€‚å½“ <strong>encode</strong> ä¸º RNN æ—¶ï¼Œ<strong>èƒŒæ™¯å˜é‡$c$</strong> æ¥è‡ªå®ƒæœ€ç»ˆæ—¶é—´æ­¥çš„ hidden stateã€‚</p>
<blockquote>
<p>è‹±è¯­è¾“å…¥ï¼šâ€œTheyâ€ã€â€œareâ€ã€â€œwatchingâ€ã€â€œ.â€<br>æ³•è¯­è¾“å‡ºï¼šâ€œIlsâ€ã€â€œregardentâ€ã€â€œ.â€</p>
<p>ç¿»è¯‘ä¾‹å­ï¼šè¾“å…¥ä¸ºè‹±è¯­åºåˆ—â€œTheyâ€ã€â€œareâ€ã€â€œwatchingâ€ã€â€œ.â€ï¼Œè¾“å‡ºä¸ºæ³•è¯­åºåˆ—â€œIlsâ€ã€â€œregardentâ€ã€â€œ.â€ã€‚ï¼Œ<strong>decode</strong> åœ¨ç”Ÿæˆè¾“å‡ºåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªè¯æ—¶å¯èƒ½åªéœ€åˆ©ç”¨è¾“å…¥åºåˆ—æŸä¸€éƒ¨åˆ†çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨è¾“å‡ºåºåˆ—çš„æ—¶é—´æ­¥ 1ï¼Œè§£ç å™¨å¯ä»¥ä¸»è¦ä¾èµ–â€œTheyâ€ã€â€œareâ€çš„ä¿¡æ¯æ¥ç”Ÿæˆâ€œIlsâ€ï¼Œåœ¨æ—¶é—´æ­¥ 2 åˆ™ä¸»è¦ä½¿ç”¨æ¥è‡ªâ€œwatchingâ€çš„ç¼–ç ä¿¡æ¯ç”Ÿæˆâ€œregardentâ€ï¼Œæœ€ååœ¨æ—¶é—´æ­¥ 3 åˆ™ç›´æ¥æ˜ å°„å¥å·â€œ.â€ã€‚è¿™çœ‹ä¸Šå»å°±åƒæ˜¯åœ¨ <strong>decode</strong> çš„æ¯ä¸€æ—¶é—´æ­¥å¯¹è¾“å…¥åºåˆ—ä¸­ä¸åŒæ—¶é—´æ­¥çš„ç¼–ç ä¿¡æ¯åˆ†é…ä¸åŒçš„æ³¨æ„åŠ›ä¸€æ ·ã€‚è¿™ä¹Ÿæ˜¯æ³¨æ„åŠ›æœºåˆ¶çš„ç”±æ¥ <a href="https://www.youtube.com/watch?v=GQh7wDQDc0Y&amp;index=18&amp;list=PLLbeS1kM6teJqdFzw1ICHfa4a1y0hg8Ax" target="_blank" rel="external">1</a>ã€‚</p>
<p>ä»ä»¥ RNN ä¸ºä¾‹ï¼ŒAttention é€šè¿‡å¯¹ Encode æ‰€æœ‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€åš<strong>åŠ æƒå¹³å‡</strong>æ¥å¾—åˆ°èƒŒæ™¯å˜é‡$c$ã€‚Decode åœ¨æ¯ä¸€æ—¶é—´æ­¥è°ƒæ•´è¿™äº›æƒé‡ï¼Œå³ Attention weightï¼Œä»è€Œèƒ½å¤Ÿåœ¨ä¸åŒæ—¶é—´æ­¥åˆ†åˆ«å…³æ³¨è¾“å…¥åºåˆ—ä¸­çš„ä¸åŒéƒ¨åˆ†å¹¶ç¼–ç è¿›ç›¸åº”æ—¶é—´æ­¥çš„èƒŒæ™¯å˜é‡$c$ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†è®¨è®º Attentionæœºåˆ¶ æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p>
</blockquote>
<p>åœ¨â€œencoder-decoderï¼ˆseq2seqï¼‰â€, Decoder åœ¨æ—¶é—´æ­¥ $tâ€™$ çš„ hidden state</p>
<p>$$<br>\boldsymbol{s}_{tâ€™} = g(\boldsymbol{y}_{tâ€™-1}, \boldsymbol{c}, \boldsymbol{s}_{tâ€™-1})<br>$$</p>
<p>åœ¨ Attentionæœºåˆ¶ ä¸­, Decoder çš„æ¯ä¸€æ—¶é—´æ­¥å°†ä½¿ç”¨å¯å˜çš„èƒŒæ™¯å˜é‡$c$</p>
<p>$$<br>\boldsymbol{s}_{tâ€™} = g(\boldsymbol{y}_{tâ€™-1}, \boldsymbol{c}_{tâ€™}, \boldsymbol{s}_{tâ€™-1}).<br>$$</p>
<p>å…³é”®æ˜¯å¦‚ä½•è®¡ç®—èƒŒæ™¯å˜é‡ $\boldsymbol{c}_{tâ€™}$ å’Œå¦‚ä½•åˆ©ç”¨å®ƒæ¥æ›´æ–°éšè—çŠ¶æ€ $\boldsymbol{s}_{tâ€™}$ã€‚ä»¥ä¸‹å°†åˆ†åˆ«æè¿°è¿™ä¸¤ä¸ªå…³é”®ç‚¹ã€‚</p>
<h3 id="3-1-è®¡ç®—èƒŒæ™¯å˜é‡-c"><a href="#3-1-è®¡ç®—èƒŒæ™¯å˜é‡-c" class="headerlink" title="3.1 è®¡ç®—èƒŒæ™¯å˜é‡ c"></a>3.1 è®¡ç®—èƒŒæ™¯å˜é‡ c</h3><p>$$<br>\boldsymbol{c}_{tâ€™} = \sum_{t=1}^T \alpha_{tâ€™ t} \boldsymbol{h}_t,<br>$$</p>
<p>å…¶ä¸­ç»™å®š $tâ€™$ æ—¶ï¼Œæƒé‡ $\alpha_{tâ€™ t}$ åœ¨ $t=1,\ldots,T$ çš„å€¼æ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒã€‚ä¸ºäº†å¾—åˆ°æ¦‚ç‡åˆ†å¸ƒï¼Œå¯ä»¥ä½¿ç”¨ softmax è¿ç®—:</p>
<p>$$<br>\alpha_{tâ€™ t} = \frac{\exp(e_{tâ€™ t})}{ \sum_{k=1}^T \exp(e_{tâ€™ k}) },\quad t=1,\ldots,T.<br>$$</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å¦‚ä½•è®¡ç®—ä¸Šå¼ä¸­ softmax è¿ç®—çš„è¾“å…¥ $e_{tâ€™ t}$ã€‚ç”±äº $e_{tâ€™ t}$ åŒæ—¶å–å†³äºdecodeçš„æ—¶é—´æ­¥ $tâ€™$ å’Œencodeçš„æ—¶é—´æ­¥ $t$ï¼Œæˆ‘ä»¬ä¸å¦¨ä»¥è§£ç å™¨åœ¨æ—¶é—´æ­¥ $tâ€™âˆ’1$ çš„éšè—çŠ¶æ€ $\boldsymbol{s}_{tâ€™ - 1}$ ä¸ç¼–ç å™¨åœ¨æ—¶é—´æ­¥ $t$ çš„éšè—çŠ¶æ€ $h_t$ ä¸ºè¾“å…¥ï¼Œå¹¶é€šè¿‡å‡½æ•° $a$ è®¡ç®— $e_{tâ€™ t}$ï¼š</p>
<p>$$<br>e_{tâ€™ t} = a(\boldsymbol{s}_{tâ€™ - 1}, \boldsymbol{h}_t).<br>$$</p>
<p>è¿™é‡Œå‡½æ•° a æœ‰å¤šç§é€‰æ‹©ï¼Œå¦‚æœä¸¤ä¸ªè¾“å…¥å‘é‡é•¿åº¦ç›¸åŒï¼Œä¸€ä¸ªç®€å•çš„é€‰æ‹©æ˜¯è®¡ç®—å®ƒä»¬çš„å†…ç§¯ $a(\boldsymbol{s}, \boldsymbol{h})=\boldsymbol{s}^\top \boldsymbol{h}$ã€‚è€Œæœ€æ—©æå‡ºAttentionæœºåˆ¶çš„è®ºæ–‡åˆ™å°†è¾“å…¥è¿ç»“åé€šè¿‡å«å•éšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºMLP å˜æ¢ </p>
<p>$$<br>a(\boldsymbol{s}, \boldsymbol{h}) = \boldsymbol{v}^\top \tanh(\boldsymbol{W}_s \boldsymbol{s} + \boldsymbol{W}_h \boldsymbol{h}),<br>$$</p>
<p>å…¶ä¸­ $vã€W_sã€W_h$ éƒ½æ˜¯å¯ä»¥å­¦ä¹ çš„æ¨¡å‹å‚æ•°ã€‚</p>
<h3 id="3-2-update-hidden-state"><a href="#3-2-update-hidden-state" class="headerlink" title="3.2 update hidden state"></a>3.2 update hidden state</h3><p>ä»¥ GRU ä¸ºä¾‹ï¼Œåœ¨è§£ç å™¨ä¸­æˆ‘ä»¬å¯ä»¥å¯¹ GRU çš„è®¾è®¡ç¨ä½œä¿®æ”¹ã€‚è§£ç å™¨åœ¨æ—¶é—´æ­¥ $tâ€™$ çš„éšè—çŠ¶æ€ä¸º</p>
<p>$$<br>\boldsymbol{s}_{tâ€™} = \boldsymbol{z}_{tâ€™} \odot \boldsymbol{s}_{tâ€™-1}  + (1 - \boldsymbol{z}_{tâ€™}) \odot \tilde{\boldsymbol{s}}_{tâ€™},<br>$$</p>
<p>å…¶ä¸­çš„é‡ç½®é—¨ã€æ›´æ–°é—¨å’Œå€™é€‰éšå«çŠ¶æ€åˆ†åˆ«ä¸º :</p>
<p>$$<br>\begin{split}\begin{aligned}<br>\boldsymbol{r}_{tâ€™} &amp;= \sigma(\boldsymbol{W}_{yr} \boldsymbol{y}_{tâ€™-1} + \boldsymbol{W}_{sr} \boldsymbol{s}_{tâ€™ - 1} + \boldsymbol{W}_{cr} \boldsymbol{c}_{tâ€™} + \boldsymbol{b}_r),\\<br>\boldsymbol{z}_{tâ€™} &amp;= \sigma(\boldsymbol{W}_{yz} \boldsymbol{y}_{tâ€™-1} + \boldsymbol{W}_{sz} \boldsymbol{s}_{tâ€™ - 1} + \boldsymbol{W}_{cz} \boldsymbol{c}_{tâ€™} + \boldsymbol{b}_z),\\<br>\tilde{\boldsymbol{s}}_{tâ€™} &amp;= \text{tanh}(\boldsymbol{W}_{ys} \boldsymbol{y}_{tâ€™-1} + \boldsymbol{W}_{ss} (\boldsymbol{s}_{tâ€™ - 1} \odot \boldsymbol{r}_{tâ€™}) + \boldsymbol{W}_{cs} \boldsymbol{c}_{tâ€™} + \boldsymbol{b}_s),<br>\end{aligned}\end{split}<br>$$</p>
<p>å…¶ä¸­å«ä¸‹æ ‡çš„ W å’Œ b åˆ†åˆ«ä¸º GRU çš„æƒé‡å‚æ•°å’Œåå·®å‚æ•°ã€‚</p>
<p><img src="/images/chatbot/seq2seq-7.jpeg" width="800"></p>
<h3 id="3-3-attention-summary"><a href="#3-3-attention-summary" class="headerlink" title="3.3 attention summary"></a>3.3 attention summary</h3><ul>
<li>å¯ä»¥åœ¨decodeçš„æ¯ä¸ªæ—¶é—´æ­¥ä½¿ç”¨ä¸åŒçš„èƒŒæ™¯å˜é‡ï¼Œå¹¶å¯¹è¾“å…¥åºåˆ—ä¸­ä¸åŒæ—¶é—´æ­¥ç¼–ç çš„ä¿¡æ¯åˆ†é…ä¸åŒçš„æ³¨æ„åŠ›ã€‚</li>
<li>Attentionæœºåˆ¶å¯ä»¥é‡‡ç”¨æ›´ä¸ºé«˜æ•ˆçš„çŸ¢é‡åŒ–è®¡ç®—ã€‚</li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–æ¨¡å‹ä¸ºäº†å–å¾—æ¯”è¾ƒå¥½çš„æ•ˆæœè¿˜æ˜¯ç”¨äº†ä¸‹é¢ä¸‰ä¸ªå°æŠ€å·§æ¥æ”¹å–„æ€§èƒ½ï¼š</p>
<blockquote>
<p>æ·±å±‚æ¬¡çš„LSTMï¼šä½œè€…ä½¿ç”¨äº†4å±‚LSTMä½œä¸ºencoderå’Œdecoderæ¨¡å‹ï¼Œå¹¶ä¸”è¡¨ç¤ºæ·±å±‚æ¬¡çš„æ¨¡å‹æ¯”shallowçš„æ¨¡å‹æ•ˆæœè¦å¥½ï¼ˆå•å±‚ï¼Œç¥ç»å…ƒä¸ªæ•°å¤šï¼‰ã€‚</p>
<p>å°†sourceè¿›è¡Œååºè¾“å…¥ï¼šè¾“å…¥çš„æ—¶å€™å°†â€œABCâ€å˜æˆâ€œCBAâ€ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯è§£å†³äº†é•¿åºåˆ—çš„long-termä¾èµ–ï¼Œä½¿å¾—æ¨¡å‹å¯ä»¥å­¦ä¹ åˆ°æ›´å¤šçš„å¯¹åº”å…³ç³»ï¼Œä»è€Œè¾¾åˆ°æ¯”è¾ƒå¥½çš„æ•ˆæœã€‚</p>
</blockquote>
<p>æ³¨æ„åŠ›æœºåˆ¶æ˜¯ä¸€ç§æ€æƒ³ï¼Œå¯ä»¥æœ‰å¤šç§ä¸åŒçš„å®ç°æ–¹å¼ï¼Œåœ¨ Seq2Seq æ¨¡å‹ä»¥å¤–çš„åœºæ™¯ä¹Ÿæœ‰ä¸å°‘åº”ç”¨</p>
<p><img src="/images/deeplearning/Attention-00.jpg" width="700"></p>
<h2 id="4-Attention-æœ¬è´¨æ€æƒ³"><a href="#4-Attention-æœ¬è´¨æ€æƒ³" class="headerlink" title="4. Attention æœ¬è´¨æ€æƒ³"></a>4. Attention æœ¬è´¨æ€æƒ³</h2><p>æŠŠAttentionæœºåˆ¶ä»ä¸Šæ–‡è®²è¿°ä¾‹å­ä¸­çš„Encoder-Decoderæ¡†æ¶ä¸­å‰¥ç¦»ï¼Œå¹¶è¿›ä¸€æ­¥åšæŠ½è±¡ï¼Œå¯ä»¥æ›´å®¹æ˜“æ‡‚:</p>
<p><img src="/images/deeplearning/Attention-04.jpg" width="600"></p>
<h3 id="4-1-Attention-çš„ä¸‰é˜¶æ®µ"><a href="#4-1-Attention-çš„ä¸‰é˜¶æ®µ" class="headerlink" title="4.1 Attention çš„ä¸‰é˜¶æ®µ"></a>4.1 Attention çš„ä¸‰é˜¶æ®µ</h3><blockquote>
<ol>
<li>ç¬¬ä¸€ä¸ªé˜¶æ®µæ ¹æ®Queryå’ŒKeyè®¡ç®—ä¸¤è€…çš„ç›¸ä¼¼æ€§æˆ–è€…ç›¸å…³æ€§ï¼›</li>
<li>ç¬¬äºŒä¸ªé˜¶æ®µå¯¹ç¬¬ä¸€é˜¶æ®µçš„åŸå§‹åˆ†å€¼è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼›</li>
<li>æ ¹æ®æƒé‡ç³»æ•°å¯¹Valueè¿›è¡ŒåŠ æƒæ±‚å’Œã€‚</li>
</ol>
</blockquote>
<p><img src="/images/deeplearning/Attention-03.jpg" width="600"></p>
<h3 id="4-2-Self-Attention"><a href="#4-2-Self-Attention" class="headerlink" title="4.2 Self Attention"></a>4.2 Self Attention</h3><p>Attentioné¡¾åæ€ä¹‰ï¼ŒæŒ‡çš„ä¸æ˜¯Targetå’ŒSourceä¹‹é—´çš„Attentionæœºåˆ¶ï¼Œè€Œæ˜¯Sourceå†…éƒ¨å…ƒç´ ä¹‹é—´æˆ–è€…Targetå†…éƒ¨å…ƒç´ ä¹‹é—´å‘ç”Ÿçš„Attentionæœºåˆ¶ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºTarget=Sourceè¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹çš„æ³¨æ„åŠ›è®¡ç®—æœºåˆ¶ã€‚</p>
<p><img src="/images/deeplearning/Attention-05.jpg" width="600"></p>
<blockquote>
<p>å¼•å…¥Self Attentionåä¼šæ›´å®¹æ˜“æ•è·å¥å­ä¸­é•¿è·ç¦»çš„ç›¸äº’ä¾èµ–çš„ç‰¹å¾ï¼Œå› ä¸ºå¦‚æœæ˜¯RNNæˆ–è€…LSTMï¼Œéœ€è¦ä¾æ¬¡åºåºåˆ—è®¡ç®—ï¼Œå¯¹äºè¿œè·ç¦»çš„ç›¸äº’ä¾èµ–çš„ç‰¹å¾ï¼Œè¦ç»è¿‡è‹¥å¹²æ—¶é—´æ­¥æ­¥éª¤çš„ä¿¡æ¯ç´¯ç§¯æ‰èƒ½å°†ä¸¤è€…è”ç³»èµ·æ¥ï¼Œè€Œè·ç¦»è¶Šè¿œï¼Œæœ‰æ•ˆæ•è·çš„å¯èƒ½æ€§è¶Šå°ã€‚</p>
</blockquote>
<p>è¯·åŠ¡å¿…è¦é˜…è¯»ï¼š <a href="https://zhuanlan.zhihu.com/p/37601161" target="_blank" rel="external">å¼ ä¿Šæ— æ·±åº¦å­¦ä¹ ä¸­çš„æ³¨æ„åŠ›æ¨¡å‹ï¼ˆ2017ç‰ˆï¼‰</a></p>
<hr>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.youtube.com/watch?v=GQh7wDQDc0Y&amp;index=18&amp;list=PLLbeS1kM6teJqdFzw1ICHfa4a1y0hg8Ax" target="_blank" rel="external">åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ç¬¬åå…«è¯¾ï¼šseq2seqï¼ˆç¼–ç å™¨å’Œè§£ç å™¨ï¼‰å’Œæ³¨æ„åŠ›æœºåˆ¶</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/32092871" target="_blank" rel="external">seq2seq+Attentionæœºåˆ¶æ¨¡å‹è¯¦è§£</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/37601161" target="_blank" rel="external">æ·±åº¦å­¦ä¹ å‰æ²¿ç¬”è®°</a></li>
<li><a href="http://www.iterate.site/2019/04/19/05-seq2seq%E6%A8%A1%E5%9E%8B/" target="_blank" rel="external">ç™¾é¢ seq2seqæ¨¡å‹</a></li>
<li><a href="http://www.iterate.site/2019/04/19/06-æ³¨æ„åŠ›æœºåˆ¶/" target="_blank" rel="external">ç™¾é¢ æ³¨æ„åŠ›æœºåˆ¶</a></li>
<li><a href="https://kexue.fm/archives/6736" target="_blank" rel="external">Berté‡ä¸ŠKeras</a></li>
<li><a href="/2018/08/14/deeplearning/Sequence-Models-week3/">Sequence-Models-week3</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/28048246" target="_blank" rel="external">seq2seqä¸­çš„beam searchç®—æ³•è¿‡ç¨‹</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/37601161" target="_blank" rel="external">æ·±åº¦å­¦ä¹ ä¸­çš„æ³¨æ„åŠ›æ¨¡å‹ï¼ˆ2017ç‰ˆï¼‰</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Language Model and Perplexity]]></title>
      <url>http://shopee.ai/2019/06/16/nlp/Language-Model-and-Word-Embedding/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/LM-01.jpg" width="550" alt="2001 NNLM, @Yoshua bengio"></p>
<a id="more"></a>
<p>è®¡ç®—æœºå¾ˆå¤šäº‹æƒ…æ¯”äººç±»åšå¾—å¥½ï¼Œé‚£ä¹ˆæœºå™¨æ˜¯å¦èƒ½æ‡‚ Natural Language?</p>
<p>ä¸€äº› NLP æŠ€æœ¯çš„åº”ç”¨:</p>
<blockquote>
<ul>
<li>ç®€å•çš„ä»»åŠ¡ï¼šæ‹¼å†™æ£€æŸ¥ï¼Œå…³é”®è¯æ£€ç´¢ï¼ŒåŒä¹‰è¯æ£€ç´¢ç­‰</li>
<li>å¤æ‚çš„ä»»åŠ¡ï¼šä¿¡æ¯æå–ã€æƒ…æ„Ÿåˆ†æã€æ–‡æœ¬åˆ†ç±»ç­‰</li>
<li>æ›´å¤æ‚ä»»åŠ¡ï¼šæœºå™¨ç¿»è¯‘ã€äººæœºå¯¹è¯ã€QAç³»ç»Ÿ</li>
</ul>
</blockquote>
<p>Natural Language é€æ¸æ¼”å˜æˆä¸€ç§ <strong>ä¸Šä¸‹æ–‡ä¿¡æ¯è¡¨è¾¾</strong> å’Œ <strong>ä¼ é€’</strong> çš„æ–¹å¼ã€‚</p>
<p>è®©è®¡ç®—æœºå¤„ç†è‡ªç„¶è¯­è¨€ï¼Œä¸€ä¸ªåŸºæœ¬çš„é—®é¢˜å°±æ˜¯ä¸º è‡ªç„¶è¯­è¨€ è¿™ç§ ä¸Šä¸‹æ–‡ç›¸å…³çš„ç‰¹æ€§ å»ºç«‹æ•°å­¦æ¨¡å‹ã€‚</p>
<h2 id="1-Language-Model"><a href="#1-Language-Model" class="headerlink" title="1. Language Model"></a>1. Language Model</h2><blockquote>
<ol>
<li>ç¾è”å‚¨ä¸»å¸­æ˜¨å¤©å‘Šè¯‰åª’ä½“ 7000 äº¿ç¾é‡‘çš„æ•‘åŠ©èµ„é‡‘å°†å€Ÿç»™ä¸Šç™¾å®¶é“¶è¡Œã€æ±½è½¦å…¬å¸ã€‚</li>
<li>ç¾è”å‚¨ä¸»å¸­æ˜¨å¤© 7000 äº¿ç¾é‡‘çš„æ•‘åŠ©èµ„é‡‘å‘Šè¯‰åª’ä½“å°†å€Ÿç»™ä¸Šç™¾å®¶é“¶è¡Œã€æ±½è½¦å…¬å¸ã€‚</li>
<li>ç¾è”å‚¨ä¸»å¸­æ˜¨å¤© å‘Šåª’è¯‰ä½“ 70 äº¿00ç¾é‡‘çš„æ•‘åŠ©èµ„é‡‘ä¸Šç™¾å®¶é“¶è¡Œå°†å€Ÿç»™ã€æ±½è½¦å…¬å¸ã€‚</li>
</ol>
<p>ä¸Šä¸–çºª70å¹´ä»£ç§‘å­¦å®¶ä»¬è¯•å›¾ç”¨è§„åˆ™æ–‡æ³•åˆ¤æ–­å¥å­æ˜¯å¦åˆç†ã€‚è´¾é‡Œå°¼å…‹ç”¨ç»Ÿè®¡æ¨¡å‹è§£å†³æ–¹æ³•æ›´æœ‰æ•ˆã€‚</p>
</blockquote>
<p>å¦‚æœ S è¡¨ç¤ºä¸€è¿ä¸²ç‰¹å®šé¡ºåºæ’åˆ—çš„è¯ $w_1$ï¼Œ $w_2$ï¼Œâ€¦ï¼Œ $w_n$ ï¼Œæ¢å¥è¯è¯´ï¼ŒS è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæœ‰æ„ä¹‰çš„å¥å­ã€‚æœºå™¨å¯¹è¯­è¨€çš„è¯†åˆ«ä»æŸç§è§’åº¦æ¥è¯´ï¼Œå°±æ˜¯æƒ³çŸ¥é“ S åœ¨æ–‡æœ¬ä¸­å‡ºç°çš„å¯èƒ½æ€§ï¼Œä¹Ÿå°±æ˜¯æ•°å­¦ä¸Šæ‰€è¯´çš„ S çš„æ¦‚ç‡ç”¨ P(S) æ¥è¡¨ç¤ºã€‚åˆ©ç”¨æ¡ä»¶æ¦‚ç‡çš„å…¬å¼ï¼ŒS è¿™ä¸ªåºåˆ—å‡ºç°çš„æ¦‚ç‡ç­‰äºæ¯ä¸€ä¸ªè¯å‡ºç°çš„æ¦‚ç‡ç›¸ä¹˜ï¼Œäºæ˜¯ P(S) å¯å±•å¼€ä¸ºï¼š</p>
<p>$$<br>P(S) = P(w_1)P(w_2|w_1)P(w_3| w_1 w_2)â€¦P(w_n|w_1 w_2â€¦w_{n-1})<br>$$</p>
<h3 id="1-1-Markov-assumption"><a href="#1-1-Markov-assumption" class="headerlink" title="1.1 Markov assumption"></a>1.1 Markov assumption</h3><p>å‡å®šæ–‡æœ¬ä¸­çš„æ¯ä¸ªè¯ $w_i$ å’Œ å‰é¢N-1ä¸ªè¯æœ‰å…³ï¼Œè€Œå’Œæ›´å‰é¢çš„è¯æ— å…³ï¼Œè¿™æ ·å½“å‰è¯ $w_i$ çš„æ¦‚ç‡å€¼å–å†³äºå‰é¢ N-1ä¸ªè¯ $P(w_{i-N+1}, w_{i-N+2}, â€¦, w_{i-1})$</p>
<p>$$<br>P(w_{i}|w_{1}, w_{2}, â€¦, w_{i-1}) = P(w_i | w_{i-N+1}, w_{i-N+2}, â€¦, w_{i-1})<br>$$</p>
<blockquote>
<p>Nå…ƒæ¨¡å‹ï¼Œ N=2 æ—¶ï¼Œä¸ºäºŒå…ƒæ¨¡å‹ã€‚ åœ¨å®é™…ä¸­åº”ç”¨æœ€å¤šçš„æ˜¯ N=3 çš„ä¸‰å…ƒæ¨¡å‹.</p>
</blockquote>
<h3 id="1-2-n-gram-n-2"><a href="#1-2-n-gram-n-2" class="headerlink" title="1.2 n-gram, n=2"></a>1.2 n-gram, n=2</h3><p>$$<br>P(S) = P(w_1)P(w_2|w_1)P(w_3|w_2)â€¦P(w_i|w_{i-1})â€¦<br>$$</p>
<p>æ¥ä¸‹æ¥å¦‚ä½•ä¼°è®¡ $P (w_i|w_{i-1})$ã€‚åªè¦æœºå™¨æ•°ä¸€æ•°è¿™å¯¹è¯ $(w_i{-1}, w_i)$ åœ¨ç»Ÿè®¡çš„æ–‡æœ¬ä¸­å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œä»¥åŠ $w_{i-1}$ æœ¬èº«åœ¨åŒæ ·çš„æ–‡æœ¬ä¸­å‰åç›¸é‚»å‡ºç°äº†å¤šå°‘æ¬¡ï¼Œç„¶åç”¨ä¸¤ä¸ªæ•°ä¸€é™¤å°±å¯ä»¥äº†,</p>
<p>$$<br>P(w_i|w_{i-1}) = \frac {P(w_{i-1}, w_i)} {P(w_{i-1})}<br>$$</p>
<h2 id="2-Perplexity-PPL"><a href="#2-Perplexity-PPL" class="headerlink" title="2. Perplexity, PPL"></a>2. Perplexity, PPL</h2><p>è¯­è¨€æ¨¡å‹æ•ˆæœçš„å¸¸ç”¨æŒ‡æ ‡ perplexityï¼Œ åœ¨æµ‹è¯•é›†ä¸Š perplexity è¶Šä½ï¼Œè¯´æ˜å»ºæ¨¡æ•ˆæœè¶Šå¥½. </p>
<p>è®¡ç®—perplexityçš„å…¬å¼å¦‚ä¸‹ï¼š</p>
<p><img src="/images/tensorflow/tf-google-9.1.2_1-equation.svg" width="600"></p>
<p><strong>perplexity</strong> åˆ»ç”»çš„æ˜¯è¯­è¨€æ¨¡å‹é¢„æµ‹ä¸€ä¸ªè¯­è¨€æ ·æœ¬çš„èƒ½åŠ›. æ¯”å¦‚å·²ç»çŸ¥é“ (w1,w2,w3,â€¦,wm) è¿™å¥è¯ä¼šå‡ºç°åœ¨è¯­æ–™åº“ä¹‹ä¸­ï¼Œé‚£ä¹ˆé€šè¿‡è¯­è¨€æ¨¡å‹è®¡ç®—å¾—åˆ°çš„è¿™å¥è¯çš„æ¦‚ç‡è¶Šé«˜ï¼Œè¯´æ˜è¯­è¨€æ¨¡å‹å¯¹è¿™ä¸ªè¯­æ–™åº“æ‹Ÿåˆå¾—è¶Šå¥½ã€‚</p>
<p><strong>perplexity</strong> å®é™…æ˜¯è®¡ç®—æ¯ä¸€ä¸ªå•è¯å¾—åˆ°çš„æ¦‚ç‡å€’æ•°çš„å‡ ä½•å¹³å‡ï¼Œå› æ­¤ perplexity å¯ä»¥ç†è§£ä¸ºå¹³å‡åˆ†æ”¯ç³»æ•°ï¼ˆaverage branching factorï¼‰ï¼Œå³æ¨¡å‹é¢„æµ‹ä¸‹ä¸€ä¸ªè¯æ—¶çš„å¹³å‡å¯é€‰æ‹©æ•°é‡ã€‚</p>
<blockquote>
<p>ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸€ä¸ªç”±0~9è¿™10ä¸ªæ•°å­—éšæœºç»„æˆçš„é•¿åº¦ä¸ºmçš„åºåˆ—ï¼Œç”±äºè¿™10ä¸ªæ•°å­—å‡ºç°çš„æ¦‚ç‡æ˜¯éšæœºçš„ï¼Œæ‰€ä»¥æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¦‚ç‡æ˜¯ ã€‚å› æ­¤ï¼Œåœ¨ä»»æ„æ—¶åˆ»ï¼Œæ¨¡å‹éƒ½æœ‰10ä¸ªç­‰æ¦‚ç‡çš„å€™é€‰ç­”æ¡ˆå¯ä»¥é€‰æ‹©ï¼Œäºæ˜¯perplexityå°±æ˜¯10ï¼ˆæœ‰10ä¸ªåˆç†çš„ç­”æ¡ˆï¼‰ã€‚</p>
<p>perplexityçš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="/images/tensorflow/tf-google-9.1.2_3-ppl.jpg" width="800"></p>
</blockquote>
<p>åœ¨è¯­è¨€æ¨¡å‹çš„è®­ç»ƒä¸­ï¼Œé€šå¸¸é‡‡ç”¨ perplexity çš„å¯¹æ•°è¡¨è¾¾å½¢å¼ï¼š</p>
<p><img src="/images/tensorflow/tf-google-9.1.2_2-equation.svg" width="600"></p>
<blockquote>
<p>ç›¸æ¯”è¾ƒä¹˜ç§¯æ±‚å¹³æ–¹æ ¹çš„æ–¹å¼ï¼ŒåŠ æ³•çš„å½¢å¼å¯åŠ é€Ÿè®¡ç®—ï¼ŒåŒæ—¶é¿å…æ¦‚ç‡ä¹˜ç§¯æ•°å€¼è¿‡å°è€Œå¯¼è‡´æµ®ç‚¹æ•°å‘ä¸‹æº¢å‡ºçš„é—®é¢˜.</p>
<p>åœ¨æ•°å­¦ä¸Šï¼Œlog perplexity å¯ä»¥çœ‹ä½œçœŸå®åˆ†å¸ƒä¸é¢„æµ‹åˆ†å¸ƒä¹‹é—´çš„äº¤å‰ç†µ Cross Entropy, äº¤å‰ç†µæè¿°äº†ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒä¹‹é—´çš„ä¸€ç§è·ç¦». log perplexity å’Œ Cross Entropy æ˜¯ç­‰ä»·çš„</p>
</blockquote>
<p>åœ¨ç¥ç»ç½‘ç»œæ¨¡å‹ä¸­ï¼Œ$P(w_i | w_{1}, , â€¦, w_{i-1})$ åˆ†å¸ƒé€šå¸¸æ˜¯ç”±ä¸€ä¸ª softmaxå±‚ äº§ç”Ÿçš„ï¼ŒTensorFlow ä¸­æä¾›äº†ä¸¤ä¸ªæ–¹ä¾¿è®¡ç®—äº¤å‰ç†µçš„å‡½æ•°ï¼Œå¯ä»¥å°† logits ç»“æœç›´æ¥æ”¾å…¥è¾“å…¥ï¼Œæ¥å¸®åŠ©è®¡ç®— softmax ç„¶åå†è¿›è¡Œè®¡ç®— Cross Entropy.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">cross_entropy = tf.nn.softmax_cross_entropy_with_logits(labels = y, logits = y)</span><br><span class="line">cross_entropy = tf.nn.sparse_softmax_cross_entropy_with_logits(labels = y, logits = y)</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://www.zhihu.com/people/xi-xiang-yu-20/posts" target="_blank" rel="external">çŸ¥ä¹_ä¹ ç¿”å®‡</a></li>
</ul>
<h2 id="3-NNLM"><a href="#3-NNLM" class="headerlink" title="3. NNLM"></a>3. NNLM</h2><p>NNLM,ç›´æ¥ä»è¯­è¨€æ¨¡å‹å‡ºå‘ï¼Œå°†æ¨¡å‹æœ€ä¼˜åŒ–è¿‡ç¨‹è½¬åŒ–ä¸ºæ±‚è¯å‘é‡è¡¨ç¤ºçš„è¿‡ç¨‹.</p>
<p>æ—¢ç„¶ç¦»æ•£çš„è¡¨ç¤ºæœ‰è¾£ä¹ˆå¤šç¼ºç‚¹ï¼Œäºæ˜¯æœ‰å°ä¼™ä¼´å°±å°è¯•ç€ç”¨æ¨¡å‹æœ€ä¼˜åŒ–çš„è¿‡ç¨‹å»è½¬æ¢è¯å‘é‡äº†.</p>
<p><img src="/images/nlp/word2vec-nnlm.png" width="600"></p>
<p>è®¡ç®—å¤æ‚åº¦ï¼š ($N * D + N * D * H + H * V$) ç›¸å½“ä¹‹é«˜, äºæ˜¯æœ‰äº† CBOW å’Œ Skip-Gram .</p>
<blockquote>
<p>NN è®­ç»ƒ è¯­è¨€æ¨¡å‹ï¼Œ ä¼šé¡ºå¸¦äº§ç”Ÿä¸€ä¸ª Word Embedding çŸ©é˜µ.</p>
<p>è¯åµŒçŸ©é˜µ * å•è¯çš„ç‹¬çƒ­ç¼–ç  = å•è¯çš„è¯åµŒ</p>
<p>(300, 10000) * (10000, 1) = (300, 1)</p>
</blockquote>
<p>å¯ä»¥é€šè¿‡è®­ç»ƒç¥ç»ç½‘ç»œçš„æ–¹å¼æ„å»ºè¯åµŒè¡¨ <code>E</code> .</p>
<p>ä¸‹å›¾å±•ç¤ºäº†é¢„æµ‹å•è¯çš„æ–¹æ³•ï¼Œå³ç»™å‡ºç¼ºå°‘ä¸€ä¸ªå•è¯çš„å¥å­ï¼š</p>
<p>â€œ<strong>I want a glass of orange ___</strong>â€</p>
<blockquote>
<p>è®¡ç®—æ–¹æ³•æ˜¯å°†å·²çŸ¥å•è¯çš„ç‰¹å¾å‘é‡éƒ½ä½œä¸ºè¾“å…¥æ•°æ®é€åˆ°ç¥ç»ç½‘ç»œä¸­å»ï¼Œç„¶åç»è¿‡ä¸€ç³»åˆ—è®¡ç®—åˆ°è¾¾ Softmaxåˆ†ç±»å±‚ï¼Œåœ¨è¯¥ä¾‹ä¸­è¾“å‡ºèŠ‚ç‚¹æ•°ä¸º 10000ä¸ªã€‚ç»è¿‡è®¡ç®— juice æ¦‚ç‡æœ€é«˜ï¼Œæ‰€ä»¥é¢„æµ‹ä¸º</p>
<p>â€œI want a glass of orange <code>juice</code>â€</p>
</blockquote>
<p><img src="/images/deeplearning/C5W2-5_1.png" width="750"></p>
<p>åœ¨è¿™ä¸ªè®­ç»ƒæ¨¡å¼ä¸­ï¼Œæ˜¯é€šè¿‡å…¨éƒ¨çš„å•è¯å»é¢„æµ‹æœ€åä¸€ä¸ªå•è¯ç„¶ååå‘ä¼ æ’­æ›´æ–°è¯åµŒè¡¨ $E$</p>
<blockquote>
<p>å‡è®¾è¦é¢„æµ‹çš„å•è¯ä¸º $W$ï¼Œè¯åµŒè¡¨ä»ç„¶ä¸º $E$ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è®­ç»ƒè¯åµŒè¡¨å’Œé¢„æµ‹ $W$ æ˜¯ä¸¤ä¸ªä¸åŒçš„ä»»åŠ¡ã€‚</p>
<p>å¦‚æœä»»åŠ¡æ˜¯é¢„æµ‹ $W$ï¼Œæœ€ä½³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ $W$ å‰é¢ $n$ ä¸ªå•è¯æ„å»ºè¯­å¢ƒã€‚</p>
<p>å¦‚æœä»»åŠ¡æ˜¯è®­ç»ƒ $E$ï¼Œé™¤äº†ä½¿ç”¨ $W$ å‰å…¨éƒ¨å•è¯è¿˜å¯ä»¥é€šè¿‡ï¼šå‰åå„4ä¸ªå•è¯ã€å‰é¢å•ç‹¬çš„ä¸€ä¸ªè¯ã€å‰é¢è¯­å¢ƒä¸­éšæœºçš„ä¸€ä¸ªè¯ï¼ˆè¿™ä¸ªæ–¹å¼ä¹Ÿå«åš Skip Gram ç®—æ³•ï¼‰ï¼Œè¿™äº›æ–¹æ³•éƒ½èƒ½æä¾›å¾ˆå¥½çš„ç»“æœã€‚</p>
</blockquote>
<h3 id="3-1-Word-Representation"><a href="#3-1-Word-Representation" class="headerlink" title="3.1 Word Representation"></a>3.1 Word Representation</h3><p>å•è¯ä¸å•è¯ä¹‹é—´æ˜¯æœ‰å¾ˆå¤šå…±æ€§çš„ï¼Œæˆ–åœ¨æŸä¸€ç‰¹æ€§ä¸Šç›¸è¿‘ï¼Œæ¯”å¦‚â€œè‹¹æœâ€å’Œâ€œæ©™å­â€éƒ½æ˜¯æ°´æœï¼›æˆ–è€…åœ¨æŸä¸€ç‰¹æ€§ä¸Šç›¸åï¼Œæ¯”å¦‚â€œçˆ¶äº²â€åœ¨æ€§åˆ«ä¸Šæ˜¯ç”·æ€§ï¼Œâ€œæ¯äº²â€åœ¨æ€§åˆ«ä¸Šæ˜¯å¥³æ€§ï¼Œé€šè¿‡æ„å»ºä»–ä»¬å…¶ä¸­çš„è”ç³»å¯ä»¥å°†åœ¨ä¸€ä¸ªå•è¯å­¦ä¹ åˆ°çš„å†…å®¹åº”ç”¨åˆ°å…¶ä»–çš„å•è¯ä¸Šæ¥æé«˜æ¨¡å‹çš„å­¦ä¹ çš„æ•ˆç‡ï¼Œè¿™é‡Œç”¨ä¸€ä¸ªç®€åŒ–çš„è¡¨æ ¼è¯´æ˜:</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">Man (5391)</th>
<th style="text-align:center">Woman (9853)</th>
<th style="text-align:center">Apple (456)</th>
<th style="text-align:center">Orange (6257)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æ€§åˆ«</td>
<td style="text-align:center">-1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0.1</td>
</tr>
<tr>
<td style="text-align:center">å¹´é¾„</td>
<td style="text-align:center">0.01</td>
<td style="text-align:center">0.02</td>
<td style="text-align:center">-0.01</td>
<td style="text-align:center">0.00</td>
</tr>
<tr>
<td style="text-align:center">é£Ÿç‰©</td>
<td style="text-align:center">0.04</td>
<td style="text-align:center">0.01</td>
<td style="text-align:center">0.95</td>
<td style="text-align:center">0.97</td>
</tr>
<tr>
<td style="text-align:center">é¢œè‰²</td>
<td style="text-align:center">0.03</td>
<td style="text-align:center">0.01</td>
<td style="text-align:center">0.70</td>
<td style="text-align:center">0.30</td>
</tr>
</tbody>
</table>
<p>åœ¨è¡¨æ ¼ä¸­å¯ä»¥çœ‹åˆ°ä¸åŒçš„è¯è¯­å¯¹åº”ç€ä¸åŒçš„ç‰¹æ€§æœ‰ä¸åŒçš„ç³»æ•°å€¼ï¼Œä»£è¡¨ç€è¿™ä¸ªè¯è¯­ä¸å½“å‰ç‰¹æ€§çš„å…³ç³»ã€‚æ‹¬å·é‡Œçš„æ•°å­—ä»£è¡¨è¿™ä¸ªå•è¯åœ¨ç‹¬çƒ­ç¼–ç ä¸­çš„ä½ç½®ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ•°å­—ä»£è¡¨è¿™ä¸ªå•è¯æ¯”å¦‚ Man = ï¼ŒMan çš„ç‰¹æ€§ç”¨ ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸€çºµåˆ—ã€‚</p>
<p>åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œç‰¹æ€§çš„æ•°é‡è¿œä¸æ­¢ 4 ç§ï¼Œå¯èƒ½æœ‰å‡ ç™¾ç§ï¼Œç”šè‡³æ›´å¤šã€‚å¯¹äºå•è¯ â€œorangeâ€ å’Œ â€œappleâ€ æ¥è¯´ä»–ä»¬ä¼šå…±äº«å¾ˆå¤šçš„ç‰¹æ€§ï¼Œæ¯”å¦‚éƒ½æ˜¯æ°´æœï¼Œéƒ½æ˜¯åœ†å½¢ï¼Œéƒ½å¯ä»¥åƒï¼Œä¹Ÿæœ‰äº›ä¸åŒçš„ç‰¹æ€§æ¯”å¦‚é¢œè‰²ä¸åŒï¼Œå‘³é“ä¸åŒï¼Œä½†å› ä¸ºè¿™äº›ç‰¹æ€§è®© RNN æ¨¡å‹ç†è§£äº†ä»–ä»¬çš„å…³ç³»ï¼Œä¹Ÿå°±å¢åŠ äº†é€šè¿‡å­¦ä¹ ä¸€ä¸ªå•è¯å»é¢„æµ‹å¦ä¸€ä¸ªçš„å¯èƒ½æ€§ã€‚</p>
<blockquote>
<p>å‹ç¼©åˆ°äºŒç»´çš„å¯è§†åŒ–å¹³é¢ä¸Šï¼Œæ¯ä¸€ä¸ªå•è¯ åµŒå…¥ å±äºè‡ªå·±çš„ä¸€ä¸ªä½ç½®ï¼Œç›¸ä¼¼çš„å•è¯ç¦»çš„è¿‘ï¼Œæ²¡æœ‰å…±æ€§çš„å•è¯ç¦»å¾—è¿œï¼Œè¿™ä¸ªå°±æ˜¯ â€œWord Embeddingsâ€ çš„æ¦‚å¿µ.</p>
</blockquote>
<p><img src="/images/deeplearning/C5W2-2.png" width="500"></p>
<blockquote>
<p>ä¸Šå›¾é€šè¿‡èšç±»å°†è¯æ€§ç›¸ç±»ä¼¼çš„å•è¯åœ¨äºŒç»´ç©ºé—´èšä¸ºä¸€ç±».</p>
</blockquote>
<h3 id="3-2-Word-Embeddings"><a href="#3-2-Word-Embeddings" class="headerlink" title="3.2 Word Embeddings"></a>3.2 Word Embeddings</h3><p>å…ˆä¸‹ä¸€ä¸ªéæ­£è§„å®šä¹‰ â€œè¯åµŒ - æè¿°äº†è¯æ€§ç‰¹å¾çš„æ€»é‡ï¼Œä¹Ÿæ˜¯åœ¨é«˜ç»´è¯æ€§ç©ºé—´ä¸­åµŒå…¥çš„ä½ç½®ï¼Œæ‹¥æœ‰è¶Šå¤šå…±æ€§çš„è¯ï¼Œè¯åµŒç¦»å¾—è¶Šè¿‘ï¼Œåä¹‹åˆ™è¶Šè¿œâ€ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¡¨è¾¾è¿™ä¸ªâ€œä½ç½®â€ï¼Œéœ€è¦ä½¿ç”¨æ‰€æœ‰è®¾å®šçš„è¯æ€§ç‰¹å¾ï¼Œå‡å¦‚æœ‰ 300 ä¸ªç‰¹å¾ï¼ˆæ€§åˆ«ï¼Œé¢œè‰²ï¼Œâ€¦ï¼‰ï¼Œé‚£ä¹ˆè¯åµŒçš„ç©ºé—´ç»´åº¦å°±æ˜¯ 300.</p>
<h3 id="3-3-ä½¿ç”¨è¯åµŒä¸‰æ­¥"><a href="#3-3-ä½¿ç”¨è¯åµŒä¸‰æ­¥" class="headerlink" title="3.3 ä½¿ç”¨è¯åµŒä¸‰æ­¥"></a>3.3 ä½¿ç”¨è¯åµŒä¸‰æ­¥</h3><ol>
<li>è·å¾—è¯åµŒï¼šè·å¾—çš„æ–¹å¼å¯ä»¥é€šè¿‡è®­ç»ƒå¤§çš„æ–‡æœ¬é›†æˆ–è€…ä¸‹è½½å¾ˆå¤šå¼€æºçš„è¯åµŒåº“</li>
<li>åº”ç”¨è¯åµŒï¼šå°†è·å¾—çš„è¯åµŒåº”ç”¨åœ¨æˆ‘ä»¬çš„è®­ç»ƒä»»åŠ¡ä¸­</li>
<li>å¯é€‰ï¼šé€šè¿‡æˆ‘ä»¬çš„è®­ç»ƒä»»åŠ¡æ›´æ–°è¯åµŒåº“ï¼ˆå¦‚æœè®­ç»ƒé‡å¾ˆå°å°±ä¸è¦æ›´æ–°äº†ï¼‰</li>
</ol>
<p><strong>è¯åµŒå®ç”¨åœºæ™¯:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">sencentce</th>
<th style="text-align:center">replace word</th>
<th style="text-align:center">target</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">Sally Johnson is an <code>orange</code> farmer.</td>
<td style="text-align:center">orange</td>
<td style="text-align:center">Sally Johnson</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">Robert Lin is an <code>apple</code> farmer.</td>
<td style="text-align:center">apple</td>
<td style="text-align:center">Robert Lin</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">Robert Lin is a <code>durian cultivator</code>.</td>
<td style="text-align:center">durian cultivator</td>
<td style="text-align:center">Robert Lin</td>
</tr>
</tbody>
</table>
<blockquote>
<p>æˆ‘ä»¬ç»§ç»­æ›¿æ¢ï¼Œæˆ‘ä»¬å°† apple farmer æ›¿æ¢æˆä¸å¤ªå¸¸è§çš„ durian cultivator (æ¦´è²ç¹æ®–å‘˜)ã€‚æ­¤æ—¶è¯åµŒå…¥ä¸­å¯èƒ½å¹¶æ²¡æœ‰ durian è¿™ä¸ªè¯ï¼Œcultivator ä¹Ÿæ˜¯ä¸å¸¸ç”¨çš„è¯æ±‡ã€‚è¿™ä¸ªæ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç”¨åˆ°è¿ç§»å­¦ä¹ ã€‚</p>
</blockquote>
<p><strong>è¯åµŒå…¥è¿ç§»å­¦ä¹ æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<blockquote>
<ol>
<li>å­¦ä¹ å«æœ‰å¤§é‡æ–‡æœ¬è¯­æ–™åº“çš„è¯åµŒå…¥ (ä¸€èˆ¬å«æœ‰ 10äº¿ åˆ° 1000äº¿ å•è¯)ï¼Œæˆ–è€…ä¸‹è½½é¢„è®­ç»ƒå¥½çš„è¯åµŒå…¥</li>
<li>å°†å­¦åˆ°çš„è¯åµŒå…¥è¿ç§»åˆ°ç›¸å¯¹è¾ƒå°è§„æ¨¡çš„è®­ç»ƒé›† (ä¾‹å¦‚ 10ä¸‡ è¯æ±‡).</li>
<li>(å¯é€‰) è¿™ä¸€æ­¥éª¤å°±æ˜¯å¯¹æ–°çš„æ•°æ®è¿›è¡Œ fine-tuneã€‚</li>
</ol>
</blockquote>
<h2 id="4-word2vec"><a href="#4-word2vec" class="headerlink" title="4. word2vec"></a>4. word2vec</h2><p>word2vec å¹¶ä¸æ˜¯ä¸€ä¸ªæ¨¡å‹ï¼Œ è€Œæ˜¯ä¸€ä¸ª 2013å¹´ google å‘è¡¨çš„å·¥å…·. è¯¥å·¥å…·åŒ…å«2ä¸ªæ¨¡å‹ï¼š Skip-Gram å’Œ CBOW. åŠä¸¤ç§é«˜æ•ˆè®­ç»ƒæ–¹æ³•ï¼š negative sampling å’Œ hierarchicam softmax.</p>
<blockquote>
<ol>
<li>CBOW  Continous Bag of Words Model</li>
<li>Skip-Gram Model</li>
</ol>
<p>è¯å‘é‡ï¼ˆè¯çš„ç‰¹å¾å‘é‡ï¼‰æ—¢èƒ½å¤Ÿé™ä½ç»´åº¦ï¼Œåˆèƒ½å¤Ÿcaptureåˆ°å½“å‰è¯åœ¨æœ¬å¥å­ä¸­ä¸Šä¸‹æ–‡çš„ä¿¡æ¯.</p>
</blockquote>
<p><a href="https://blog.csdn.net/u012052268/article/details/77170517/#63ä¸ªäººå¯¹word-embeddingçš„ç†è§£" target="_blank" rel="external">Word2Vec</a><br><a href="https://blog.csdn.net/sinat_33761963/article/details/54631367" target="_blank" rel="external">Word2Vecè¯åµŒå…¥çŸ©é˜µ</a></p>
<h3 id="4-1-CBOW"><a href="#4-1-CBOW" class="headerlink" title="4.1 CBOW"></a>4.1 CBOW</h3><p><img src="/images/nlp/word2vec-CBOW_1.png" width="600"></p>
<blockquote>
<p>çº é”™ : ä¸Šå›¾â€ç›®æ ‡å‡½æ•°â€œçš„ç¬¬ä¸€ä¸ªå…¬å¼ï¼Œåº”è¯¥æ˜¯ è¿ä¹˜ å…¬å¼ï¼Œä¸æ˜¯ è¿åŠ  è¿ç®—ã€‚</p>
<p>ç†è§£ : èƒŒæ™¯è¯å‘é‡ä¸ ä¸­å¿ƒè¯å‘é‡ å†…ç§¯ ç­‰éƒ¨åˆ†ï¼Œä½ å¯è€ƒè™‘ softmax $w * x+b$ ä¸­ $x$ å’Œ $w$ çš„å…³ç³»æ¥ç†è§£.</p>
</blockquote>
<h3 id="4-2-Skip-Gram"><a href="#4-2-Skip-Gram" class="headerlink" title="4.2 Skip-Gram"></a>4.2 Skip-Gram</h3><p>è·³å­—æ¨¡å‹å‡è®¾åŸºäºæŸä¸ªè¯æ¥ç”Ÿæˆå®ƒåœ¨æ–‡æœ¬åºåˆ—å‘¨å›´çš„è¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æ–‡æœ¬åºåˆ—æ˜¯â€œtheâ€â€œmanâ€â€œlovesâ€â€œhisâ€â€œsonâ€ã€‚ä»¥â€œlovesâ€ä½œä¸ºä¸­å¿ƒè¯ï¼Œè®¾èƒŒæ™¯çª—å£å¤§å°ä¸º2ã€‚å¦‚å›¾10.1æ‰€ç¤ºï¼Œè·³å­—æ¨¡å‹æ‰€å…³å¿ƒçš„æ˜¯ï¼Œç»™å®šä¸­å¿ƒè¯â€œlovesâ€ï¼Œç”Ÿæˆä¸å®ƒè·ç¦»ä¸è¶…è¿‡2ä¸ªè¯çš„èƒŒæ™¯è¯â€œtheâ€â€œmanâ€â€œhisâ€â€œsonâ€çš„æ¡ä»¶æ¦‚ç‡ï¼Œå³</p>
<p>$$<br>P(\textrm{the},\textrm{man},\textrm{his},\textrm{son}\mid\textrm{loves}).<br>$$</p>
<p>å‡è®¾ç»™å®šä¸­å¿ƒè¯çš„æƒ…å†µä¸‹ï¼ŒèƒŒæ™¯è¯çš„ç”Ÿæˆæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œé‚£ä¹ˆä¸Šå¼å¯ä»¥æ”¹å†™æˆ</p>
<p>$$<br>P(\textrm{the}\mid\textrm{loves})\cdot P(\textrm{man}\mid\textrm{loves})\cdot P(\textrm{his}\mid\textrm{loves})\cdot P(\textrm{son}\mid\textrm{loves}).<br>$$</p>
<p><img src="/images/nlp/word2vec-skip-gram.svg" width="300"></p>
<p><strong>è®­ç»ƒ Skip-Gram</strong></p>
<p>è·³å­—æ¨¡å‹çš„å‚æ•°æ˜¯æ¯ä¸ªè¯æ‰€å¯¹åº”çš„ä¸­å¿ƒè¯å‘é‡å’ŒèƒŒæ™¯è¯å‘é‡ã€‚è®­ç»ƒä¸­æˆ‘ä»¬é€šè¿‡æœ€å¤§åŒ–ä¼¼ç„¶å‡½æ•°æ¥å­¦ä¹ æ¨¡å‹å‚æ•°ï¼Œå³æœ€å¤§ä¼¼ç„¶ä¼°è®¡ã€‚è¿™ç­‰ä»·äºæœ€å°åŒ–ä»¥ä¸‹æŸå¤±å‡½æ•°ï¼š</p>
<p>$$ - \sum_{t=1}^{T} \sum_{-m \leq j \leq m,\ j \neq 0} \text{log}\, P(w^{(t+j)} \mid w^{(t)}).<br>$$</p>
<p>å¦‚æœä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™ï¼Œé‚£ä¹ˆåœ¨æ¯ä¸€æ¬¡è¿­ä»£é‡Œæˆ‘ä»¬éšæœºé‡‡æ ·ä¸€ä¸ªè¾ƒçŸ­çš„å­åºåˆ—æ¥è®¡ç®—æœ‰å…³è¯¥å­åºåˆ—çš„æŸå¤±ï¼Œç„¶åè®¡ç®—æ¢¯åº¦æ¥æ›´æ–°æ¨¡å‹å‚æ•°ã€‚æ¢¯åº¦è®¡ç®—çš„å…³é”®æ˜¯æ¡ä»¶æ¦‚ç‡çš„å¯¹æ•°æœ‰å…³ä¸­å¿ƒè¯å‘é‡å’ŒèƒŒæ™¯è¯å‘é‡çš„æ¢¯åº¦ã€‚æ ¹æ®å®šä¹‰ï¼Œé¦–å…ˆçœ‹åˆ°</p>
<p>$$<br>\log P(w_o \mid w_c) =<br>\boldsymbol{u}_o^\top \boldsymbol{v}_c - \log\left(\sum_{i \in \mathcal{V}} \text{exp}(\boldsymbol{u}_i^\top \boldsymbol{v}_c)\right)<br>$$</p>
<p><img src="/images/nlp/word2vec-skip.png" width="700"></p>
<p>å®ƒçš„è®¡ç®—éœ€è¦è¯å…¸ä¸­æ‰€æœ‰è¯ä»¥ $w_c$ ä¸ºä¸­å¿ƒè¯çš„æ¡ä»¶æ¦‚ç‡ã€‚æœ‰å…³å…¶ä»–è¯å‘é‡çš„æ¢¯åº¦åŒç†å¯å¾—ã€‚</p>
<p>è®­ç»ƒç»“æŸåï¼Œå¯¹äºè¯å…¸ä¸­çš„ä»»ä¸€ç´¢å¼•ä¸º $i$ çš„è¯ï¼Œæˆ‘ä»¬å‡å¾—åˆ°è¯¥è¯ä½œä¸ºä¸­å¿ƒè¯å’ŒèƒŒæ™¯è¯çš„ä¸¤ç»„è¯å‘é‡ $v_i$ å’Œ $u_i$ ã€‚åœ¨è‡ªç„¶è¯­è¨€å¤„ç†åº”ç”¨ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨è·³å­—æ¨¡å‹çš„ä¸­å¿ƒè¯å‘é‡ä½œä¸ºè¯çš„è¡¨å¾å‘é‡ã€‚</p>
<blockquote>
<p>ä¸¤ä¸ªå‘é‡è¶Šç›¸ä¼¼ï¼Œä»–ä»¬çš„ç‚¹ä¹˜ä¹Ÿå°±è¶Šå¤§.</p>
</blockquote>
<p><strong>å°ç»“ï¼š</strong></p>
<ol>
<li>æœ€å¤§ä¼¼ç„¶ä¼°è®¡ MLE</li>
<li>æœ€å°åŒ–æŸå¤±å‡½æ•°ï¼ˆä¸ç¬¬ä¸€æ­¥ç­‰ä»·ï¼‰ï¼ŒæŸå¤±å‡½æ•°å¯¹æ•°è”åˆæ¦‚ç‡çš„ç›¸åæ•°</li>
<li>æè¿°æ¦‚ç‡å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è‡ªå˜é‡æ˜¯è¯å‘é‡ï¼ˆuå’Œvï¼‰ï¼Œè¯å‘é‡ä¹Ÿæ˜¯æ¨¡å‹å‚æ•°</li>
<li>å¯¹ç¬¬äºŒæ­¥ä¸­æ¯ä¸€é¡¹æ±‚æ¢¯åº¦ã€‚æœ‰äº†æ¢¯åº¦å°±å¯ä»¥ä¼˜åŒ–ç¬¬äºŒæ­¥ä¸­çš„æŸå¤±å‡½æ•°ï¼Œä»è€Œè¿­ä»£å­¦ä¹ åˆ°æ¨¡å‹å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯å‘é‡ã€‚</li>
</ol>
<h3 id="4-3-é«˜æ•ˆè¿‘ä¼¼è®­ç»ƒ"><a href="#4-3-é«˜æ•ˆè¿‘ä¼¼è®­ç»ƒ" class="headerlink" title="4.3 é«˜æ•ˆè¿‘ä¼¼è®­ç»ƒ"></a>4.3 é«˜æ•ˆè¿‘ä¼¼è®­ç»ƒ</h3><ul>
<li>hierarchicam softmax</li>
<li>negative sampling</li>
</ul>
<h2 id="5-fastText"><a href="#5-fastText" class="headerlink" title="5. fastText"></a>5. fastText</h2><p>FastTextæ˜¯ä¸€ä¸ªå¿«é€Ÿæ–‡æœ¬åˆ†ç±»ç®—æ³•ï¼Œåœ¨ä½¿ç”¨æ ‡å‡†å¤šæ ¸CPUçš„æƒ…å†µä¸‹ï¼Œåœ¨10åˆ†é’Ÿå†…å¯ä»¥å¯¹è¶…è¿‡10äº¿ä¸ªå•è¯è¿›è¡Œè®­ç»ƒã€‚ ä¸éœ€è¦ä½¿ç”¨é¢„å…ˆè®­ç»ƒå¥½çš„è¯å‘é‡ï¼Œå› ä¸ºFastTextä¼šè‡ªå·±è®­ç»ƒè¯å‘é‡ã€‚</p>
<p>æ–‡æœ¬åˆ†ç±»ï¼š</p>
<p><img src="/images/nlp/fastText-3.webp" width="500"></p>
<p>æƒ…æ„Ÿåˆ†ç±»:</p>
<p><img src="/images/nlp/fastText-4.webp" width="500"></p>
<p>fastText èƒ½å¤Ÿåšåˆ°æ•ˆæœå¥½ï¼Œé€Ÿåº¦å¿«ï¼Œä¸»è¦ä¾é ä¸¤ä¸ªç§˜å¯†æ­¦å™¨ï¼š</p>
<blockquote>
<ol>
<li>åˆ©ç”¨äº† è¯å†…çš„n-gramä¿¡æ¯ (subword n-gram information)</li>
<li>ç”¨åˆ°äº† å±‚æ¬¡åŒ–Softmaxå›å½’ (Hierarchical Softmax) çš„è®­ç»ƒ trick.</li>
</ol>
</blockquote>
<p><strong>fastText å’Œ word2vec çš„åŒºåˆ«:</strong></p>
<p><strong>ä¸¤è€…è¡¨é¢çš„ä¸åŒï¼š</strong></p>
<blockquote>
<p><strong>æ¨¡å‹çš„è¾“å‡ºå±‚ï¼š</strong></p>
<p>word2vecçš„è¾“å‡ºå±‚ï¼Œå¯¹åº”çš„æ˜¯æ¯ä¸€ä¸ªtermï¼Œè®¡ç®—æŸtermçš„æ¦‚ç‡æœ€å¤§ï¼›è€Œfasttextçš„è¾“å‡ºå±‚å¯¹åº”çš„æ˜¯ åˆ†ç±»çš„labelã€‚ä¸è¿‡ä¸ç®¡è¾“å‡ºå±‚å¯¹åº”çš„æ˜¯ä»€ä¹ˆå†…å®¹ï¼Œèµ·å¯¹åº”çš„vectoréƒ½ä¸ä¼šè¢«ä¿ç•™å’Œä½¿ç”¨ï¼›</p>
<p><strong>æ¨¡å‹çš„è¾“å…¥å±‚ï¼š</strong></p>
<p>word2vecçš„è¾“å‡ºå±‚ï¼Œæ˜¯ context window å†…çš„termï¼›è€Œfasttextå¯¹åº”çš„æ•´ä¸ªsentenceçš„å†…å®¹ï¼ŒåŒ…æ‹¬termï¼Œä¹ŸåŒ…æ‹¬ n-gramçš„å†…å®¹ï¼›</p>
</blockquote>
<p><strong>ä¸¤è€…æœ¬è´¨çš„ä¸åŒï¼Œä½“ç°åœ¨ h-softmax çš„ä½¿ç”¨ï¼š</strong></p>
<blockquote>
<p>Wordvecçš„ç›®çš„æ˜¯å¾—åˆ°è¯å‘é‡ï¼Œè¯¥è¯å‘é‡æœ€ç»ˆæ˜¯åœ¨è¾“å…¥å±‚å¾—åˆ°ï¼Œè¾“å‡ºå±‚å¯¹åº”çš„ h-softmaxä¹Ÿä¼šç”Ÿæˆä¸€ç³»åˆ—çš„å‘é‡ï¼Œä½†æœ€ç»ˆéƒ½è¢«æŠ›å¼ƒï¼Œä¸ä¼šä½¿ç”¨ã€‚</p>
<p>fasttextåˆ™å……åˆ†åˆ©ç”¨äº†h-softmaxçš„åˆ†ç±»åŠŸèƒ½ï¼Œéå†åˆ†ç±»æ ‘çš„æ‰€æœ‰å¶èŠ‚ç‚¹ï¼Œæ‰¾åˆ°æ¦‚ç‡æœ€å¤§çš„labelï¼ˆä¸€ä¸ªæˆ–è€…Nä¸ªï¼‰</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li>ã€Šæ•°å­¦ä¹‹ç¾ã€‹ è¯»ä¹¦ç¬”è®° </li>
<li><a href="https://whiskytina.github.io/word2vec.html" target="_blank" rel="external">word2vecå‰ä¸–ä»Šç”Ÿ</a></li>
<li><a href="https://whiskytina.github.io/14947653164873.html" target="_blank" rel="external">CS224N NLP with Deep Learning: Lecture 1 è¯¾ç¨‹ç¬”è®°</a></li>
<li><a href="https://blog.csdn.net/m0_37324740/article/details/79411651" target="_blank" rel="external">good, sklearn ä¸­ CountVectorizerã€TfidfTransformer å’Œ TfidfVectorizer</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Recurrent Neural Networks]]></title>
      <url>http://shopee.ai/2019/06/14/deeplearning/RNN-LSTM-GRU/</url>
      <content type="html"><![CDATA[<p><img src="/images/deeplearning/RNN-01.png" width="500"></p>
<a id="more"></a>
<ul>
<li>ä½œä¸ºç”Ÿç‰©ä½“ï¼Œæˆ‘ä»¬çš„è§†è§‰å’Œå¬è§‰ä¸æ–­åœ°è·å¾—å¸¦æœ‰åºåˆ—çš„å£°éŸ³å’Œå›¾åƒä¿¡å·ï¼Œå¹¶äº¤ç”±å¤§è„‘ç†è§£ï¼›</li>
<li>äº’è”ç½‘æ•°æ®ä¸­ï¼Œå¾ˆå¤šæ˜¯ä»¥åºåˆ—å½¢å¼å­˜åœ¨çš„ï¼Œä¾‹å¦‚æ–‡æœ¬ã€è¯­éŸ³ã€è§†é¢‘ã€ç‚¹å‡»æµç­‰ç­‰ã€‚</li>
</ul>
<p><a href="/2018/07/26/deeplearning/Sequence-Models-week1/">RNN åŸºç¡€çŸ¥è¯†ï¼Œè¯¦å‚æœ¬åšï¼š Sequence Models</a></p>
<h2 id="1-RNN-Basic"><a href="#1-RNN-Basic" class="headerlink" title="1. RNN Basic"></a>1. RNN Basic</h2><p>åœ¨ä»‹ç» RNN ä¹‹å‰ï¼Œé¦–å…ˆè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆä¹‹å‰çš„æ ‡å‡†ç½‘ç»œä¸å†é€‚ç”¨äº†ã€‚å› ä¸ºå®ƒæœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š</p>
<ul>
<li><strong><code>è¾“å…¥å’Œè¾“å‡ºçš„é•¿åº¦ä¸å°½ç›¸åŒ</code></strong></li>
<li><strong><code>æ— æ³•å…±äº«ä»å…¶ä»–ä½ç½®å­¦æ¥çš„ç‰¹å¾</code></strong></li>
</ul>
<blockquote>
<p>ä¼ ç»Ÿæ–¹æ³•æ–‡æœ¬åˆ†ç±»ï¼š ç”¨ä¸€ç¯‡æ–‡ç« çš„ TF-IDF å‘é‡ä½œä¸ºè¾“å…¥ï¼Œå…¶ä¸­ TF-IDF å‘é‡æ˜¯è¯æ±‡è¡¨å¤§å°.</p>
</blockquote>
<p><strong>Typical RNN Structure:</strong></p>
<p>åœ¨ $h_T$ åé¢ç›´æ¥æ¥ä¸€ä¸ª Softmax å±‚ï¼Œè¾“å‡ºæ–‡æœ¬æ‰€å±ç±»åˆ«çš„é¢„æµ‹æ¦‚ç‡ $y$ï¼Œå°±å¯ä»¥å®ç°æ–‡æœ¬åˆ†ç±».</p>
<p><img src="/images/deeplearning/RNN-02.png" width="650"></p>
<p>å¯åº”ç”¨äºå¤šç§å…·ä½“ä»»åŠ¡ï¼š</p>
<p>$$<br>net_{t}=U x_{t}+W h_{t-1}<br>$$</p>
<p>$$<br>h_{t}=f\left(\text {net}_{t}\right)<br>$$</p>
<p>$$<br>y=g\left(V h_{T}\right)<br>$$</p>
<p>å…¶ä¸­ $f$ å’Œ $g$ ä¸ºæ¿€æ´»å‡½æ•°ï¼Œ$U$ ä¸ºè¾“å…¥å±‚åˆ°éšå«å±‚çš„æƒé‡çŸ©é˜µï¼Œ$W$ ä¸ºéšå«å±‚ä»ä¸Šä¸€æ—¶åˆ»åˆ°ä¸‹ä¸€æ—¶åˆ»çŠ¶æ€è½¬ç§»çš„æƒé‡çŸ©é˜µã€‚åœ¨æ–‡æœ¬åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œ$f$ å¯ä»¥é€‰å– Tanh å‡½æ•°æˆ–è€… ReLU å‡½æ•°ï¼Œ$g$ å¯ä»¥é‡‡ç”¨ Softmax å‡½æ•°ã€‚</p>
<h3 id="1-1-TensorFlow-RNN"><a href="#1-1-TensorFlow-RNN" class="headerlink" title="1.1 TensorFlow RNN"></a>1.1 TensorFlow RNN</h3><p><img src="/images/tensorflow/tf-google-8-1.jpg" width="700" alt="Forward Propagation"></p>
<blockquote>
<p><a href="/2018/11/08/tensorflow/tf-google-8-rnn-1/">æ›´å¤šè¯¦æƒ…å‚è§æœ¬åšï¼š TensorFlowï¼šç¬¬8ç«  Recurrent Neural Networks 1</a></p>
</blockquote>
<h3 id="1-2-Forward-Propagation"><a href="#1-2-Forward-Propagation" class="headerlink" title="1.2 Forward Propagation"></a>1.2 Forward Propagation</h3><p><img src="/images/deeplearning/C5W1-10_1.png" width="700"></p>
<blockquote>
<p>$a^{<0>}=\vec{0}$</0></p>
<p>$a^{<1>}=g_1(W_{aa}a^{<0>}+W_{ax}x^{<1>}+b_a)$</1></0></1></p>
<p>$y^{<1>}=g_2(W_{ya}a^{<1>}+b_y)$</1></1></p>
<p>$a^{&lt;{t}&gt;}=g_1(W_{aa}a^{&lt;{t-1}&gt;}+W_{ax}x^{&lt;{t}&gt;}+b_a)$</p>
<p>$y^{&lt;{t}&gt;}=g_2(W_{ya}a^{&lt;{t}&gt;}+b_y)$</p>
<p>æ¿€æ´»å‡½æ•°ï¼š<strong>$g_1$</strong> ä¸€èˆ¬ä¸º <strong><code>tanh</code>å‡½æ•°</strong> (or <strong><code>Relu</code>å‡½æ•°</strong>)ï¼Œ<strong>$g_2$</strong> ä¸€èˆ¬æ˜¯ <strong><code>Sigmod</code> or <code>softmax</code> å‡½æ•°</strong>.</p>
</blockquote>
<h3 id="1-3-RNN-vs-CNN"><a href="#1-3-RNN-vs-CNN" class="headerlink" title="1.3 RNN vs CNN"></a>1.3 RNN vs CNN</h3><blockquote>
<ol>
<li>RNN ä¼˜ç‚¹ï¼š æœ€å¤§ç¨‹åº¦æ•æ‰ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè¿™å¯èƒ½æœ‰åˆ©äºæ•è·é•¿æ–‡æœ¬çš„è¯­ä¹‰ã€‚</li>
<li>RNN ç¼ºç‚¹ï¼š æ˜¯ä¸€ä¸ªæœ‰åå€šçš„æ¨¡å‹ï¼Œåœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œåé¢çš„å•è¯æ¯”å…ˆå‰çš„å•è¯æ›´å…·ä¼˜åŠ¿ã€‚å› æ­¤ï¼Œå½“å®ƒè¢«ç”¨äºæ•è·æ•´ä¸ªæ–‡æ¡£çš„è¯­ä¹‰æ—¶ï¼Œå®ƒå¯èƒ½ä¼šé™ä½æ•ˆç‡ï¼Œå› ä¸ºå…³é”®ç»„ä»¶å¯èƒ½å‡ºç°åœ¨æ–‡æ¡£ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œè€Œä¸æ˜¯æœ€åã€‚</li>
<li>CNN ä¼˜ç‚¹ï¼š æå–æ•°æ®ä¸­çš„å±€éƒ¨ä½ç½®çš„ç‰¹å¾ï¼Œç„¶åå†æ‹¼æ¥æ± åŒ–å±‚ã€‚ CNNå¯ä»¥æ›´å¥½åœ°æ•æ‰æ–‡æœ¬çš„è¯­ä¹‰ã€‚æ˜¯O(n)</li>
<li>CNN ä¼˜ç‚¹ï¼š ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨åˆ¤æ–­å“ªäº›ç‰¹æ€§åœ¨æ–‡æœ¬åˆ†ç±»ä¸­æ‰®æ¼”å…³é”®è§’è‰²çš„æ± åŒ–å±‚ï¼Œä»¥æ•è·æ–‡æœ¬ä¸­çš„å…³é”®ç»„ä»¶ã€‚</li>
</ol>
</blockquote>
<h2 id="2-Language-model"><a href="#2-Language-model" class="headerlink" title="2. Language model"></a>2. Language model</h2><p> æ­¤æ—¶å°±éœ€è¦é€šè¿‡è¯­è¨€æ¨¡å‹æ¥é¢„æµ‹æ¯å¥è¯çš„æ¦‚ç‡ï¼š</p>
<p><img src="/images/deeplearning/C5W1-29_1.png" width="600"></p>
<h3 id="2-1-RNN-Language-Model"><a href="#2-1-RNN-Language-Model" class="headerlink" title="2.1 RNN Language Model"></a>2.1 RNN Language Model</h3><ol>
<li>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¾ˆå¤§çš„è¯­æ–™åº“ (<strong>Corpus</strong>)</li>
<li>å°†æ¯ä¸ªå•è¯å­—ç¬¦åŒ– (<strong>Tokenize</strong>ï¼Œ<strong>å³ä½¿ç”¨One-shotç¼–ç </strong>) å¾—åˆ°è¯å…¸,ï¼Œå‡è®¾æœ‰ 10000 ä¸ªå•è¯</li>
<li>è¿˜éœ€è¦æ·»åŠ ä¸¤ä¸ªç‰¹æ®Šçš„å•è¯<blockquote>
<ul>
<li>end of sentence. ç»ˆæ­¢ç¬¦ï¼Œè¡¨ç¤ºå¥å­ç»“æŸ.<br><img src="/images/deeplearning/C5W1-30_1.png" width="600"></li>
<li>UNknown, ä¹‹å‰çš„ç¬”è®°å·²ä»‹ç»è¿‡<br><img src="/images/deeplearning/C5W1-31_1.png" width="600"></li>
</ul>
</blockquote>
</li>
</ol>
<h3 id="2-2-Language-Model-Example"><a href="#2-2-Language-Model-Example" class="headerlink" title="2.2 Language Model Example"></a>2.2 Language Model Example</h3><p>å‡è®¾è¦å¯¹è¿™å¥è¯è¿›è¡Œå»ºæ¨¡ï¼š<strong>Cats average 15 hours of sleep a day. <eos></eos></strong></p>
<p><strong>1. åˆå§‹åŒ–</strong></p>
<blockquote>
<p>è¿™ä¸€æ­¥æ¯”è¾ƒç‰¹æ®Šï¼Œå³ $x^{<1>}$ å’Œ $a^{<0>}$ éƒ½éœ€è¦åˆå§‹åŒ–ä¸º $\vec{0}$ .<br>æ­¤æ—¶ $\hat{y}^{<1>}$ å°†ä¼šå¯¹ç¬¬ä¸€ä¸ªå­—å¯èƒ½å‡ºç°çš„æ¯ä¸€ä¸ªå¯èƒ½è¿›è¡Œæ¦‚ç‡çš„åˆ¤æ–­,å³ $\hat{y}^{<1>}=[p(a),â€¦,p(cats),â€¦]$.</1></1></0></1></p>
<p>å½“ç„¶åœ¨æœ€å¼€å§‹çš„æ—¶å€™æ²¡æœ‰ä»»ä½•çš„ä¾æ®ï¼Œå¯èƒ½å¾—åˆ°çš„æ˜¯å®Œå…¨ä¸ç›¸å¹²çš„å­—ï¼Œå› ä¸ºåªæ˜¯æ ¹æ®åˆå§‹çš„å€¼å’Œæ¿€æ´»å‡½æ•°åšå‡ºçš„å–æ ·ã€‚</p>
<p><img src="/images/deeplearning/C5W1-32_1.png" width="500"></p>
</blockquote>
<p><strong>2. å°†çœŸå®å€¼ä½œä¸ºè¾“å…¥å€¼:</strong></p>
<blockquote>
<p>ä¹‹æ‰€ä»¥å°†çœŸå®å€¼ä½œä¸ºè¾“å…¥å€¼å¾ˆå¥½ç†è§£ï¼Œå¦‚æœæˆ‘ä»¬ä¸€ç›´ä¼ é”™è¯¯çš„å€¼ï¼Œå°†æ°¸è¿œä¹Ÿæ— æ³•å¾—åˆ°å­—ä¸å­—ä¹‹é—´çš„å…³ç³»</p>
</blockquote>
<p>å¦‚ä¸‹å›¾ç¤ºï¼Œå°† $y^{<1>}$ æ‰€è¡¨ç¤ºçš„çœŸå®å€¼ Cats ä½œä¸ºè¾“å…¥ï¼Œå³ $x^{<2>}=y^{<1>}$ å¾—åˆ° $\hat{y}^{<2>}$</2></1></2></1></p>
<p>æ­¤æ—¶çš„ $\hat{y}^{<2>}=[p(a|cats),â€¦,p(average|cats),â€¦]$</2></p>
<p>åŒç†æœ‰ $\hat{y}^{<3>}=[p(a|cats\, average),â€¦,p(average|cats\,average),â€¦]$</3></p>
<p>å¦å¤–è¾“å…¥å€¼æ»¡è¶³ï¼š $x^{&lt;{t}&gt;}=y^{&lt;{t-1}&gt;}$</p>
<p><img src="/images/deeplearning/C5W1-33_1.png" width="600"></p>
<p><strong>3. è®¡ç®—å‡ºæŸå¤±å€¼:</strong></p>
<p>ä¸‹å›¾ç»™å‡ºäº†æ„å»ºæ¨¡å‹çš„è¿‡ç¨‹ä»¥åŠæŸå¤±å€¼è®¡ç®—å…¬å¼:</p>
<p><img src="/images/deeplearning/C5W1-34_1.png" width="700"></p>
<blockquote>
<p>éšç€è®­ç»ƒçš„æ¬¡æ•°çš„å¢å¤šï¼Œæˆ–è€…å¸¸ç”¨è¯å‡ºç°çš„é¢‘ç‡çš„å¢å¤šï¼Œè¯­è¨€æ¨¡å‹ä¾¿æ…¢æ…¢çš„ä¼šå¼€å§‹æŒæ¡ç®€å•çš„è¯è¯­æ¯”å¦‚â€œå¹³å‡â€ï¼Œâ€œæ¯å¤©â€ï¼Œâ€œå°æ—¶â€ã€‚ä¸€ä¸ªå®Œå–„çš„è¯­è¨€æ¨¡å‹çœ‹åˆ°ç±»ä¼¼â€œ 10 ä¸ªå°â€çš„æ—¶å€™ï¼Œåº”è¯¥å°±èƒ½å‡†ç¡®çš„åˆ¤å®šä¸‹ä¸€ä¸ªå­—æ˜¯â€œæ—¶â€ã€‚</p>
<p>ï¼ˆå½“ç„¶ä¹Ÿè®¸å®é™…æƒ…å†µæ˜¯â€œ 10 ä¸ªå°æœ‹å‹â€ï¼Œæ‰€ä»¥é€šå¸¸ä¼šæœ‰æ›´å¤šçš„åˆ¤æ–­å› ç´ ï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªä¾‹å­ï¼‰</p>
</blockquote>
<h2 id="3-Vanishing-gradients-with-RNNs"><a href="#3-Vanishing-gradients-with-RNNs" class="headerlink" title="3. Vanishing gradients with RNNs"></a>3. Vanishing gradients with RNNs</h2><blockquote>
<p>ç›®å‰è¿™ç§åŸºæœ¬çš„ RNN ä¹Ÿä¸æ“…é•¿æ•è·è¿™ç§é•¿æœŸä¾èµ–æ•ˆåº”. </p>
<p>æ¢¯åº¦çˆ†ç‚¸å¯ä»¥ç”¨æ¢¯åº¦æ¶ˆå‡è§£å†³ã€æ¢¯åº¦æ¶ˆå¤±å°±æœ‰ç‚¹éº»çƒ¦äº†ï¼Œéœ€è¦ç”¨ GRU æ¥è§£å†³.</p>
</blockquote>
<p><strong>gradient value</strong> åœ¨ RNN ä¸­ä¹Ÿå¯èƒ½å› ä¸ºåå‘ä¼ æ’­çš„å±‚æ¬¡å¤ªå¤šå¯¼è‡´ <strong>è¿‡å°</strong> æˆ– <strong>è¿‡å¤§</strong></p>
<blockquote>
<ul>
<li>å½“æ¢¯åº¦å€¼è¿‡å°çš„æ—¶å€™ï¼Œç½‘ç»œæ— æ³•æœ‰æ•ˆè°ƒæ•´è‡ªå·±æƒé‡çŸ©é˜µè‡´è®­ç»ƒæ•ˆæœä¸ä½³ï¼Œç§°ä¸º <strong>gradient vanishing</strong>ï¼›</li>
<li>è¿‡å¤§æ—¶ç›´æ¥å½±å“åˆ°ç¨‹åºçš„è¿ä½œå› ä¸ºç¨‹åºå·²æ— æ³•å­˜å‚¨é‚£ä¹ˆå¤§çš„å€¼ï¼Œä¼šè¿”å› NaN ï¼Œç§°ä¸º <strong>gradient exploding</strong>.</li>
</ul>
</blockquote>
<p>å½“ <strong>gradient</strong> è¿‡å¤§æ—¶, å¯ä»¥æ¯æ¬¡å°†è¿”å›çš„æ¢¯åº¦å€¼è¿›è¡Œæ£€æŸ¥ï¼Œè¶…å‡ºé¢„å®šèŒƒå›´ï¼Œåˆ™æ‰‹åŠ¨è®¾ä¸ºèŒƒå›´çš„è¾¹ç•Œå€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if (gradient &gt; max) &#123;</span><br><span class="line">    gradient = max</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ¢¯åº¦å€¼è¿‡å°çš„è§£å†³æ–¹æ¡ˆè¦ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæ¯”å¦‚ä¸‹é¢ä¸¤å¥è¯ï¼š</p>
<blockquote>
<p>â€œThe <strong>cat</strong>ï¼Œwhich already ate appleï¼Œyogurtï¼Œbananaï¼Œâ€¦, <strong>was</strong> full.â€<br>â€œThe <strong>cats</strong>ï¼Œwhich already ate appleï¼Œyogurtï¼Œbananaï¼Œâ€¦, <strong>were</strong> full.â€</p>
<p>é‡ç‚¹æ ‡å‡ºçš„ <strong>cat(s)</strong> å’Œ be åŠ¨è¯ï¼ˆ<strong>was, were</strong>ï¼‰ æ˜¯æœ‰é‡è¦å…³è”çš„ï¼Œä½†æ˜¯ä¸­é—´éš”äº†ä¸€ä¸ª which å¼•å¯¼çš„å®šè¯­ä»å¥ï¼Œå¯¹äºå‰é¢æ‰€ä»‹ç»çš„åŸºç¡€çš„ RNNç½‘ç»œ å¾ˆéš¾å­¦ä¹ åˆ°è¿™ä¸ªä¿¡æ¯ï¼Œå°¤å…¶æ˜¯å½“å‡ºç°æ¢¯åº¦æ¶ˆå¤±æ—¶ï¼Œè€Œä¸”è¿™ç§æƒ…å†µå¾ˆå®¹æ˜“å‘ç”Ÿ.</p>
</blockquote>
<p>ç¥ç»ç½‘ç»œå±‚æ¬¡å¾ˆå¤šæ—¶ï¼Œåå‘ä¼ æ’­å¾ˆéš¾å½±å“å‰é¢å±‚æ¬¡çš„å‚æ•°ã€‚è§£å†³ <strong>gradient vanishing</strong>ï¼Œæå‡ºäº† <strong>GRU</strong> å•å…ƒ.</p>
<blockquote>
<p>å°†åœ¨æ¥ä¸‹æ¥çš„ä¸¤ä¸ªç« èŠ‚ä»‹ç»ä¸¤ç§æ–¹æ³•æ¥è§£å†³ <strong>æ¢¯åº¦è¿‡å°</strong> é—®é¢˜ï¼Œç›®æ ‡æ˜¯å½“ä¸€äº›é‡è¦çš„å•è¯ç¦»å¾—å¾ˆè¿œçš„æ—¶å€™ï¼Œæ¯”å¦‚ä¾‹å­ä¸­çš„ â€œ<strong>cat</strong>â€ å’Œ â€œ<strong>was</strong>â€ï¼Œèƒ½è®©è¯­è¨€æ¨¡å‹å‡†ç¡®çš„è¾“å‡ºå•æ•°äººç§°è¿‡å»æ—¶çš„ â€œ<strong>was</strong>â€ï¼Œè€Œä¸æ˜¯ â€œ<strong>is</strong>â€ æˆ–è€… â€œ<strong>were</strong>â€. ä¸¤ä¸ªæ–¹æ³•éƒ½å°†å¼•å…¥â€œè®°å¿†â€çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯ä¸º RNN èµ‹äºˆä¸€ä¸ªè®°å¿†çš„åŠŸèƒ½.</p>
</blockquote>
<h2 id="4-GRU-Gated-Recurrent-Unit"><a href="#4-GRU-Gated-Recurrent-Unit" class="headerlink" title="4. GRU - Gated Recurrent Unit"></a>4. GRU - Gated Recurrent Unit</h2><p>GRU æ˜¯ä¸€ç§ç”¨æ¥è§£å†³æ¢¯åº¦å€¼è¿‡å°çš„æ–¹æ³•ï¼Œé¦–å…ˆæ¥çœ‹ä¸‹åœ¨ä¸€ä¸ªæ—¶åˆ»ä¸‹çš„ RNNå•å…ƒï¼Œæ¿€æ´»å‡½æ•°ä¸º tanh</p>
<h3 id="4-1-å›é¡¾-RNN"><a href="#4-1-å›é¡¾-RNN" class="headerlink" title="4.1 å›é¡¾ RNN"></a>4.1 å›é¡¾ RNN</h3><p>è¾“å…¥æ•°æ®ä¸º $a^{&lt;{t-1}&gt;}$ å’Œ $x^{&lt;{t}&gt;}$, ä¸å‚æ•° $W_a$ è¿›è¡Œçº¿æ€§è¿ç®—åå†ä½¿ç”¨ $tanh$ å‡½æ•° è½¬åŒ–å¾—åˆ° $a^{&lt;{t}&gt;}$. </p>
<p>å½“ç„¶ $a^{&lt;{t}&gt;}$, å†ä½¿ç”¨ softmax å‡½æ•°å¤„ç†å¯ä»¥å¾—åˆ°é¢„æµ‹å€¼.</p>
<p><img src="/images/deeplearning/C5W1-37_1.png" width="750"></p>
<h3 id="4-2-GRUç»“æ„"><a href="#4-2-GRUç»“æ„" class="headerlink" title="4.2 GRUç»“æ„"></a>4.2 GRUç»“æ„</h3><p>åœ¨ GRUä¸­ ä¼šç”¨åˆ° â€œè®°å¿†ç»†èƒ(<strong>Memory cell</strong>)â€ è¿™ä¸ªæ¦‚å¿µ, æˆ‘ä»¬ç”¨å˜é‡<code>C</code>è¡¨ç¤ºã€‚è¿™ä¸ªè®°å¿†ç»†èƒæä¾›äº†è®°å¿†åŠŸèƒ½ï¼Œä¾‹å¦‚å®ƒèƒ½å¤Ÿå¸®åŠ©è®°ä½ cat å¯¹åº” was, cats å¯¹åº” were.</p>
<p>è€Œåœ¨ $t$ æ—¶åˆ»ï¼Œè®°å¿†ç»†èƒæ‰€åŒ…å«çš„å€¼å…¶å®å°±æ˜¯ Activation function å€¼ï¼Œå³ $c^{&lt;{t}&gt;}=a^{&lt;{t}&gt;}$</p>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨è¿™é‡Œä¸¤ä¸ªå˜é‡çš„å€¼è™½ç„¶ä¸€æ ·ï¼Œä½†æ˜¯å«ä¹‰ä¸åŒã€‚</p>
<p>å¦å¤–åœ¨ä¸‹èŠ‚å°†ä»‹ç»çš„ LSTM ä¸­ï¼ŒäºŒè€…å€¼çš„å¤§å°æœ‰å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æœ‰å¿…è¦ä½¿ç”¨è¿™ä¸¤ç§å˜é‡è¿›è¡ŒåŒºåˆ†.</p>
</blockquote>
<p>ä¸ºäº†æ›´æ–° <strong>memory_cell</strong> çš„å€¼ï¼Œæˆ‘ä»¬å¼•å…¥ $\tilde{c}$ æ¥ä½œä¸ºå€™é€‰å€¼ä»è€Œæ¥æ›´æ–° $c^{&lt;{t}&gt;}$ï¼Œå…¶å…¬å¼ä¸ºï¼š</p>
<p>$$<br>\tilde{c}=tanh(W_c [c^{&lt;{t-1}&gt;}, x^{&lt;{t}&gt;}]+b_c)<br>$$</p>
<p><strong>æ›´æ–°é—¨ (update gate):</strong></p>
<p>æ›´æ–°é—¨æ˜¯ GRU çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒçš„ä½œç”¨æ˜¯ç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œæ›´æ–°.</p>
<p>æ›´æ–°é—¨ç”¨ $\Gamma_u$ è¡¨ç¤ºï¼Œå…¶å…¬å¼ä¸ºï¼š</p>
<p>$$<br>\Gamma_u=Ïƒ(W_u [c^{&lt;{t-1}&gt;}, x^{&lt;{t}&gt;}]+b_u)<br>$$</p>
<blockquote>
<p>å¦‚ä¸Šå›¾ç¤ºï¼Œ$\Gamma_u$ å€¼çš„å¤§å°å¤§å¤šåˆ†å¸ƒåœ¨ 0 æˆ–è€… 1ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶å€¼çš„å¤§å°ç²—ç•¥çš„è§†ä¸º 0 æˆ–è€… 1ã€‚<br>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†å…¶ç†è§£ä¸ºä¸€æ‰‡é—¨ï¼Œå¦‚æœ $\Gamma_u=1$ , å°±è¡¨ç¤ºæ­¤æ—¶éœ€è¦æ›´æ–°å€¼ï¼Œåä¹‹ä¸ç”¨.</p>
</blockquote>
<p><strong>$t$ æ—¶åˆ»è®°å¿†ç»†èƒ:</strong></p>
<p>æœ‰äº†æ›´æ–°é—¨å…¬å¼åï¼Œæˆ‘ä»¬åˆ™å¯ä»¥ç»™å‡º $t$ æ—¶åˆ» <strong>memory_cell</strong> çš„å€¼çš„è®¡ç®—å…¬å¼:</p>
<p>$$<br>c^{&lt;{t}&gt;} =  \Gamma_u * \tilde{c} + (1-\Gamma_u) * c^{&lt;{t-1}&gt;}<br>$$</p>
<blockquote>
<p>å…¬å¼å¾ˆå¥½ç†è§£ï¼Œå¦‚æœ $\Gamma_u=1$ï¼Œé‚£ä¹ˆ $t$ æ—¶åˆ» è®°å¿†ç»†èƒçš„å€¼å°±ç­‰äºå€™é€‰å€¼ $\tilde{c}$, åä¹‹ç­‰äºå‰ä¸€æ—¶åˆ»è®°å¿†ç»†èƒçš„å€¼.</p>
<p><strong>æ³¨</strong>ï¼šä¸Šé¢å…¬å¼ä¸­çš„ * è¡¨ç¤ºå…ƒç´ ä¹‹é—´è¿›è¡Œä¹˜æ³•è¿ç®—ï¼Œè€Œå…¶ä»–å…¬å¼æ˜¯ çŸ©é˜µè¿ç®—.</p>
</blockquote>
<p>ä¸‹å›¾ç»™å‡ºäº†è¯¥å…¬å¼å¾ˆç›´è§‚çš„è§£é‡Šï¼š</p>
<blockquote>
<p>åœ¨è¯»åˆ° â€œcatâ€ æ—¶å€™ï¼Œå…¶ä»–æ—¶å€™ä¸€ç›´ä¸º 0ï¼ŒçŸ¥é“è¦è¾“å‡º â€œwasâ€ çš„æ—¶åˆ»ï¼Œæˆ‘ä»¬çŸ¥é“ â€œcatâ€ çš„å­˜åœ¨ï¼Œä¹Ÿå°±çŸ¥é“å®ƒä¸ºå•æ•°</p>
<p><img src="/images/deeplearning/C5W1-39_1.png" width="550"></p>
</blockquote>
<p><strong>GRU ç»“æ„ç¤ºæ„å›¾</strong></p>
<p><img src="/images/deeplearning/C5W1-40_1.png" width="550"></p>
<h3 id="4-3-å®Œæ•´ç‰ˆ-GRU"><a href="#4-3-å®Œæ•´ç‰ˆ-GRU" class="headerlink" title="4.3 å®Œæ•´ç‰ˆ GRU"></a>4.3 å®Œæ•´ç‰ˆ GRU</h3><p>ä¸Šé¢ç®€åŒ–äº† GRUï¼Œåœ¨å®Œæ•´ç‰ˆä¸­è¿˜å­˜åœ¨å¦ä¸€ä¸ªç¬¦å· ï¼Œè¿™ç¬¦å·çš„æ„ä¹‰æ˜¯æ§åˆ¶ $\tilde{c}$ å’Œ $c^{&lt;{t-1}&gt;}$ ä¹‹é—´çš„è”ç³»å¼ºå¼±ï¼Œå®Œæ•´ç‰ˆå¦‚ä¸‹ï¼š</p>
<p><img src="/images/deeplearning/C5W1-41_1.png" width="550"></p>
<blockquote>
<p>æ³¨æ„ï¼Œå®Œæ•´å…¬å¼ä¸­å¤šå‡ºäº†ä¸€ä¸ª $\Gamma_r$, è¿™ä¸ªç¬¦å·çš„ä½œç”¨æ˜¯æ§åˆ¶ $\tilde{c}^{&lt;{t}&gt;}$ å’Œ $c^{&lt;{t}&gt;}$ ä¹‹é—´è”ç³»çš„å¼ºå¼±.</p>
</blockquote>
<h2 id="5-LSTM-Long-Short-Term"><a href="#5-LSTM-Long-Short-Term" class="headerlink" title="5. LSTM - Long Short Term"></a>5. LSTM - Long Short Term</h2><p>ä»‹ç»å®Œ GRU åï¼Œå†ä»‹ç» LSTM ä¼šæ›´åŠ å®¹æ˜“ç†è§£ã€‚</p>
<h3 id="5-1-GRU-and-LSTM"><a href="#5-1-GRU-and-LSTM" class="headerlink" title="5.1 GRU and LSTM"></a>5.1 GRU and LSTM</h3><p>GRU åªæœ‰ä¸¤ä¸ªé—¨ï¼Œè€Œ LSTM æœ‰ä¸‰ä¸ªé—¨ï¼Œåˆ†åˆ«æ˜¯æ›´æ–°é—¨ $\Gamma_u$ (æ˜¯å¦éœ€è¦æ›´æ–°ä¸º $\tilde{c}^{&lt;{t}&gt;}$)ï¼Œé—å¿˜é—¨ $\Gamma_f$ (æ˜¯å¦éœ€è¦ä¸¢å¼ƒä¸Šä¸€ä¸ªæ—¶åˆ»çš„å€¼)ï¼Œè¾“å‡ºé—¨ $\Gamma_o$ (æ˜¯å¦éœ€è¦è¾“å‡ºæœ¬æ—¶åˆ»çš„å€¼)</p>
<p><img src="/images/deeplearning/C5W1-42_1.png" width="650"></p>
<p><img src="/images/deeplearning/C5W1-43_1.png" width="650"></p>
<p>ä¸‹å›¾æ˜¯ LSTM çš„ç»“æ„ç¤ºæ„å›¾ï¼š</p>
<p><img src="/images/deeplearning/C5W1-44_1.png" width="700"></p>
<h3 id="5-2-LSTM-Structure"><a href="#5-2-LSTM-Structure" class="headerlink" title="5.2 LSTM Structure"></a>5.2 LSTM Structure</h3><p><img src="/images/deeplearning/RNN-03.png" width="700" alt="1997å¹´, Sepp Hochreiter å’Œ JÃ¼rgen Schmidhuber"></p>
<p>LSTM ä»æ˜¯ $x_t$ å’Œ $h_{tâˆ’1}$ æ¥è®¡ç®— $h_t$ï¼Œä½†å¯¹å†…éƒ¨çš„ç»“æ„è¿›è¡Œäº†æ›´åŠ ç²¾å¿ƒçš„è®¾è®¡ï¼ŒåŠ å…¥ <strong>3 Gate</strong> å’Œ <strong>1 memory_cell</strong>.</p>
<blockquote>
<ul>
<li><p>è¾“å…¥é—¨ $\Gamma_u$ï¼š æ§åˆ¶ <strong>å½“å‰è®¡ç®—çš„æ–°çŠ¶æ€</strong> ä»¥å¤šå¤§ç¨‹åº¦æ›´æ–°åˆ°è®°å¿†å•å…ƒä¸­ ï¼ˆä¹Ÿå«æ›´æ–°é—¨ï¼‰;</p>
</li>
<li><p>é—å¿˜é—¨ $\Gamma_f$ï¼š æ§åˆ¶ <strong>å‰ä¸€æ­¥è®°å¿†å•å…ƒ</strong> ä¸­çš„ä¿¡æ¯æœ‰å¤šå¤§ç¨‹åº¦è¢«é—å¿˜æ‰;</p>
</li>
<li><p>è¾“å‡ºé—¨ $\Gamma_o$ï¼š æ§åˆ¶å½“å‰çš„è¾“å‡ºæœ‰å¤šå¤§ç¨‹åº¦ä¸Šå–å†³äº <strong>å½“å‰çš„è®°å¿†å•å…ƒ</strong>;</p>
</li>
<li><p>è®°å¿†å•å…ƒ memory cell $c_t$.<br>$$ h_{t}=o_{t} \odot \operatorname{Tanh}\left(c_{t}\right) $$ </p>
</li>
</ul>
</blockquote>
<h3 id="5-3-Activation-function"><a href="#5-3-Activation-function" class="headerlink" title="5.3 Activation function"></a>5.3 Activation function</h3><p>åœ¨ LSTM ä¸­, å…³äº activation function çš„é€‰å–ï¼š</p>
<ul>
<li>$\Gamma_f$ã€$\Gamma_i{u}$ å’Œ $\Gamma_o$ ä½¿ç”¨ Sigmoid å‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼›</li>
<li>åœ¨ç”Ÿæˆå€™é€‰è®°å¿†æ—¶ï¼Œä½¿ç”¨ Tanh ä½œä¸ºæ¿€æ´»å‡½æ•°ã€‚</li>
</ul>
<blockquote>
<p><strong>æ³¨</strong>ï¼š è¿™ä¸¤ä¸ªæ¿€æ´»å‡½æ•°éƒ½æ˜¯é¥±å’Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¾“å…¥è¾¾åˆ°ä¸€å®šå€¼çš„æƒ…å†µä¸‹ï¼Œè¾“å‡ºå°±ä¸ä¼šå‘ç”Ÿæ˜æ˜¾å˜åŒ–äº†ã€‚å¦‚æœæ˜¯ç”¨éé¥±å’Œçš„æ¿€æ´»å‡½æ•°ï¼Œä¾‹å¦‚ ReLUï¼Œé‚£ä¹ˆå°†éš¾ä»¥å®ç°é—¨æ§çš„æ•ˆæœã€‚</p>
</blockquote>
<p>ä½¿ç”¨è¿™ä¸ªæ¿€æ´»å‡½æ•°çš„åŸå› å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>(1). Sigmoid è¾“å‡ºåœ¨ 0ï½1 ä¹‹é—´ã€‚ä¸”å½“è¾“å…¥è¾ƒå¤§æˆ–è¾ƒå°æ—¶ï¼Œå…¶è¾“å‡ºä¼šéå¸¸æ¥è¿‘1æˆ–0ï¼Œä»è€Œä¿è¯è¯¥é—¨å¼€æˆ–å…³ã€‚</p>
<p>(2). åœ¨ç”Ÿæˆå€™é€‰è®°å¿†æ—¶ï¼Œä½¿ç”¨ Tanh å‡½æ•°ï¼Œæ˜¯å› ä¸ºå…¶è¾“å‡ºåœ¨ âˆ’1~1 ä¹‹é—´ï¼Œè¿™ä¸å¤§å¤šæ•°åœºæ™¯ä¸‹ç‰¹å¾åˆ†å¸ƒæ˜¯ 0 ä¸­å¿ƒçš„å»åˆã€‚æ­¤å¤–ï¼ŒTanh å‡½æ•°åœ¨è¾“å…¥ä¸º 0 é™„è¿‘ç›¸æ¯” Sigmoid å‡½æ•°æœ‰æ›´å¤§çš„æ¢¯åº¦ï¼Œé€šå¸¸ä½¿æ¨¡å‹æ”¶æ•›æ›´å¿«ã€‚</p>
</blockquote>
<p>æ€»è€Œè¨€ä¹‹ï¼ŒLSTM ç»å†äº† 20 å¹´çš„å‘å±•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³ä¸€è„‰ç›¸æ‰¿ï¼Œä½†å„ä¸ªç»„ä»¶éƒ½å‘ç”Ÿäº†å¾ˆå¤šæ¼”åŒ–ã€‚</p>
<p><strong>GRU vs LSTM</strong></p>
<ul>
<li>GRU å’Œ LSTM çš„æ•ˆæœåœ¨å¾ˆå¤šä»»åŠ¡ä¸Šä¸åˆ†ä¼¯ä»²ã€‚</li>
<li>GRU å‚æ•°æ›´å°‘å› æ­¤æ›´å®¹æ˜“æ”¶æ•›ï¼Œä½†æ˜¯æ•°æ®é›†å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼ŒLSTMè¡¨è¾¾æ•ˆæœæ›´å¥½ï¼Œä½†è®¡ç®—é‡æ›´å¤§ã€‚</li>
</ul>
<blockquote>
<p>ä»ç»“æ„ä¸Šæ¥è¯´ï¼š</p>
<ul>
<li>GRU åªæœ‰ä¸¤ä¸ªé—¨ï¼ˆupdateå’Œresetï¼‰ï¼ŒLSTM æœ‰ä¸‰ä¸ªé—¨ï¼ˆforgetï¼Œinputï¼Œoutputï¼‰</li>
<li>GRU ç›´æ¥å°† hidden state ä¼ ç»™ä¸‹ä¸€ä¸ªå•å…ƒï¼Œè€Œ LSTM åˆ™ç”¨ memory cell æŠŠhidden state åŒ…è£…èµ·æ¥ã€‚</li>
</ul>
</blockquote>
<h2 id="6-Bidirectional-RNN"><a href="#6-Bidirectional-RNN" class="headerlink" title="6. Bidirectional RNN"></a>6. Bidirectional RNN</h2><p>å‰é¢ä»‹ç»çš„éƒ½æ˜¯å•å‘çš„ RNN ç»“æ„ï¼Œåœ¨å¤„ç†æŸäº›é—®é¢˜ä¸Šå¾—åˆ°çš„æ•ˆæœä¸å°½äººæ„</p>
<p>å¦‚ä¸‹é¢ä¸¤å¥è¯ï¼Œæˆ‘ä»¬è¦ä»ä¸­æ ‡å‡ºäººåï¼š</p>
<blockquote>
<p><code>He</code> said, â€œTeddy Roosevelt was a great Presidentâ€.<br><code>He</code> said, â€œTeddy bears are on saleâ€.</p>
</blockquote>
<ol>
<li>ç¬¬ä¸€å¥ä¸­çš„ Teddy Roosevelt æ˜¯äººå</li>
<li>ç¬¬äºŒå¥ä¸­çš„ Teddy bears æ˜¯æ³°è¿ªç†Šï¼ŒåŒæ ·éƒ½æ˜¯å•è¯ <strong>Teddy</strong> å¯¹åº”çš„è¾“å‡ºåœ¨ç¬¬ä¸€å¥ä¸­åº”è¯¥æ˜¯ 1ï¼Œç¬¬äºŒå¥ä¸­åº”è¯¥æ˜¯ 0</li>
</ol>
<p>åƒè¿™æ ·çš„ä¾‹å­å¦‚æœæƒ³è®©æˆ‘ä»¬çš„åºåˆ—æ¨¡å‹æ˜ç™½å°±éœ€è¦å€ŸåŠ©ä¸åŒçš„ç»“æ„æ¯”å¦‚ - åŒå‘é€’å½’ç¥ç»ç½‘ç»œ(Bidirectional RNN).<br>è¯¥ç¥ç»ç½‘ç»œé¦–å…ˆä»æ­£é¢ç†è§£ä¸€éè¿™å¥è¯ï¼Œå†ä»åæ–¹å‘ç†è§£ä¸€é.</p>
<p><img src="/images/deeplearning/C5W1-45_1.png" width="750"></p>
<p>ä¸‹å›¾æ‘˜è‡ªå¤§æ•°æ®æ–‡æ‘˜æ•´ç†</p>
<p><img src="/images/deeplearning/C5W1-46_1.png" width="750"></p>
<h2 id="7-Deep-RNNs"><a href="#7-Deep-RNNs" class="headerlink" title="7. Deep RNNs"></a>7. Deep RNNs</h2><p>æ·±å±‚ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å±‚æ¬¡å¢åŠ ã€‚å¦‚ä¸‹å›¾æ˜¯æ·±å±‚å¾ªç¯ç¥ç»ç½‘ç»œçš„ç¤ºæ„å›¾</p>
<p>æ¨ªå‘è¡¨ç¤ºæ—¶é—´å±•å¼€ï¼Œçºµå‘åˆ™æ˜¯å±‚æ¬¡å±•å¼€ã€‚</p>
<p><img src="/images/deeplearning/C5W1-47_1.png" width="750"></p>
<p>æ³¨æ„æ¿€æ´»å€¼çš„è¡¨è¾¾å½¢å¼æœ‰æ‰€æ”¹å˜ï¼Œä»¥ $a^{[1]<0>}$ ä¸ºä¾‹è¿›è¡Œè§£é‡Šï¼š</0></p>
<ul>
<li>[1] è¡¨ç¤ºç¬¬ä¸€å±‚</li>
<li><0> è¡¨ç¤ºç¬¬ä¸€ä¸ªæ¿€æ´»å€¼</0></li>
</ul>
<p>å¦å¤–å„ä¸ªæ¿€æ´»å€¼çš„è®¡ç®—å…¬å¼ä¹Ÿç•¥æœ‰ä¸åŒï¼Œä»¥ $a^{[2]<3>}$ ä¸ºä¾‹ï¼Œå…¶è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</3></p>
<p><img src="/images/deeplearning/C5W1-48_1.png" width="550"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://book.douban.com/subject/30285146/" target="_blank" rel="external">ã€Šç™¾é¢æœºå™¨å­¦ä¹ ã€‹</a></li>
<li><a href="http://www.iterate.site/2019/04/14/01-å¾ªç¯ç¥ç»ç½‘ç»œå’Œå·ç§¯ç¥ç»ç½‘ç»œ/" target="_blank" rel="external">RNN and CNN</a></li>
<li><a href="http://www.iterate.site/2019/04/19/04-é•¿çŸ­æœŸè®°å¿†ç½‘ç»œ/" target="_blank" rel="external">LSTM é•¿çŸ­æœŸè®°å¿†ç½‘ç»œ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Convolutional Neural Networks]]></title>
      <url>http://shopee.ai/2019/06/13/deeplearning/CNN/</url>
      <content type="html"><![CDATA[<p><img src="/images/deeplearning/CNN-03.png" width="700" alt="Convolutional Neural Networks"></p>
<a id="more"></a>
<p><a href="/deeplearning/#4-Convolutional-Neural-Networks">CNN åŸºç¡€çŸ¥è¯†ï¼Œè¯¦å‚æœ¬åšï¼š Convolutional-Neural-Networks</a></p>
<p>Convolutional Neural Networksï¼ŒCNN ä¹Ÿæ˜¯ä¸€ç§å‰é¦ˆç¥ç»ç½‘ç»œï¼Œå…¶ç‰¹ç‚¹æ˜¯<strong>æ¯å±‚çš„ç¥ç»å…ƒèŠ‚ç‚¹åªå“åº”å‰ä¸€å±‚å±€éƒ¨åŒºåŸŸèŒƒå›´å†…çš„ç¥ç»å…ƒ</strong>ï¼ˆå…¨è¿æ¥ç½‘ç»œä¸­æ¯ä¸ªç¥ç»å…ƒèŠ‚ç‚¹å“åº”å‰ä¸€å±‚çš„å…¨éƒ¨èŠ‚ç‚¹ï¼‰ã€‚</p>
<p>ä¸€ä¸ª DCNN é€šå¸¸ç”±è‹¥å¹² Convolutional-Layer å åŠ è‹¥å¹² Fully-Connected ç»„æˆï¼Œä¸­é—´ä¹ŸåŒ…å«å„ç§ Non-Linear æ“ä½œä»¥åŠ Pooling æ“ä½œã€‚</p>
<p>Convolution operation çš„<strong><code>å‚æ•°å…±äº«ç‰¹æ€§</code></strong>ä½¿å¾—éœ€è¦ä¼˜åŒ–çš„å‚æ•°æ•°ç›®å¤§å¤§ç¼©å‡ï¼Œæé«˜äº†æ¨¡å‹çš„è®­ç»ƒæ•ˆç‡ä»¥åŠå¯æ‰©å±•æ€§ã€‚</p>
<p><img src="/images/deeplearning/CNN-04.png" width="700" alt="LeCun Yann åœ¨ 1998 å¹´æå‡º"></p>
<h2 id="1-Convolutional-Function"><a href="#1-Convolutional-Function" class="headerlink" title="1. Convolutional Function"></a>1. Convolutional Function</h2><h3 id="1-1-Sparse-Interaction"><a href="#1-1-Sparse-Interaction" class="headerlink" title="1.1 Sparse Interaction"></a>1.1 Sparse Interaction</h3><p>&nbsp;&nbsp;ç¨ å¯†çš„è¿æ¥ç»“æ„,  ç¥ç»å…ƒ $s_i$ ä¸è¾“å…¥çš„æ‰€æœ‰ç¥ç»å…ƒ $x_j$ å‡æœ‰è¿æ¥ï¼š</p>
<p><img src="/images/deeplearning/CNN-05.png" width="400" alt="å¯¹äºå…¨è¿æ¥ç½‘ç»œï¼Œä»»æ„ä¸€å¯¹è¾“å…¥ä¸è¾“å‡ºç¥ç»å…ƒä¹‹é—´éƒ½äº§ç”Ÿäº¤äº’ï¼Œå½¢æˆ`ç¨ å¯†`çš„è¿æ¥ç»“æ„"></p>
<p>&nbsp;&nbsp;å·ç§¯ï¼Œ æ¯ä¸ªè¾“å‡ºç¥ç»å…ƒä»…ä¸å‰ä¸€å±‚ç‰¹å®šå±€éƒ¨åŒºåŸŸå†…çš„ç¥ç»å…ƒå­˜åœ¨è¿æ¥ï¼š</p>
<p><img src="/images/deeplearning/CNN-06.png" width="400" alt="å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œå·ç§¯æ ¸å°ºåº¦è¿œå°äºè¾“å…¥çš„ç»´åº¦ï¼Œæˆ‘ä»¬ç§°è¿™ç§ç‰¹æ€§ä¸ºç¨€ç–äº¤äº’"></p>
<p>ç¥ç»å…ƒ $s_i$ ä»…ä¸å‰ä¸€å±‚ä¸­çš„ $x_{iâˆ’1}$, $x_i$ å’Œ $x_{i+1}$ ç›¸è¿ã€‚å…·ä½“æ¥è®²å¦‚æœé™å®šæ¯ä¸ªè¾“å‡ºä¸å‰ä¸€å±‚ç¥ç»å…ƒçš„è¿æ¥æ•°ä¸º k ï¼Œé‚£ä¹ˆè¯¥å±‚çš„å‚æ•°æ€»é‡ä¸º $kÃ—n$ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸€èˆ¬ $k$ å€¼è¿œå°äº $m$ å°±å¯ä»¥å–å¾—è¾ƒä¸ºå¯è§‚çš„æ•ˆæœï¼›å¤æ‚åº¦å°†ä¼šå‡å°å‡ ä¸ªæ•°é‡çº§ï¼Œè¿‡æ‹Ÿåˆçš„æƒ…å†µæ”¹å–„.</p>
<p> <strong>ç¨€ç–äº¤äº’çš„ç‰©ç†æ„ä¹‰ï¼š</strong></p>
<p> <img src="/images/deeplearning/CNN-07.png" width="750"></p>
<h3 id="1-2-Parameter-Sharing"><a href="#1-2-Parameter-Sharing" class="headerlink" title="1.2 Parameter Sharing"></a>1.2 Parameter Sharing</h3><blockquote>
<ol>
<li>Fully-Connected Networksï¼Œè®¡ç®—æ¯å±‚çš„è¾“å‡ºæ—¶ï¼Œæƒå€¼å‚æ•°çŸ©é˜µä¸­çš„æ¯ä¸ªå…ƒç´ åªä½œç”¨äºæŸä¸ªè¾“å…¥å…ƒç´ ä¸€æ¬¡ï¼›</li>
<li>CNNï¼Œå·ç§¯æ ¸ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å°†ä½œç”¨äºæ¯ä¸€æ¬¡å±€éƒ¨è¾“å…¥çš„ç‰¹å®šä½ç½®ä¸Šã€‚</li>
</ol>
</blockquote>
<p>æ ¹æ®å‚æ•°å…±äº«çš„æ€æƒ³ï¼Œæˆ‘ä»¬åªéœ€è¦å­¦ä¹ ä¸€ç»„å‚æ•°é›†åˆï¼Œè€Œä¸éœ€è¦é’ˆå¯¹æ¯ä¸ªä½ç½®çš„æ¯ä¸ªå‚æ•°éƒ½è¿›è¡Œä¼˜åŒ–ï¼Œä»è€Œå¤§å¤§é™ä½äº†æ¨¡å‹çš„å­˜å‚¨éœ€æ±‚ã€‚</p>
<p>å‚æ•°å…±äº«çš„ç‰©ç†æ„ä¹‰æ˜¯ä½¿å¾—å·ç§¯å±‚å…·æœ‰å¹³ç§»ç­‰å˜æ€§ã€‚ä»€ä¹ˆæ„æ€ï¼Ÿå‡å¦‚å›¾åƒä¸­æœ‰ä¸€åªçŒ«ï¼Œé‚£ä¹ˆæ— è®ºå®ƒå‡ºç°åœ¨å›¾åƒä¸­çš„ä»»ä½•ä½ç½®ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥å°†å®ƒè¯†åˆ«ä¸ºçŒ«ï¼Œä¹Ÿå°±æ˜¯è¯´ç¥ç»ç½‘ç»œçš„è¾“å‡ºå¯¹äºå¹³ç§»å˜æ¢æ¥è¯´åº”å½“æ˜¯ç­‰å˜çš„ã€‚</p>
<h2 id="2-Pooling-Function"><a href="#2-Pooling-Function" class="headerlink" title="2. Pooling Function"></a>2. Pooling Function</h2><ul>
<li>mean pooling</li>
<li><p>max pooling</p>
<p><img src="/images/deeplearning/CNN-08.png" width="600"></p>
</li>
</ul>
<p>pooling çš„æœ¬è´¨æ˜¯é™é‡‡æ ·.</p>
<p>pooling é™¤äº†èƒ½æ˜¾è‘—é™ä½å‚æ•°é‡å¤–ï¼Œè¿˜èƒ½å¤Ÿä¿æŒå¯¹å¹³ç§»ã€ä¼¸ç¼©ã€æ—‹è½¬æ“ä½œçš„ä¸å˜æ€§ã€‚</p>
<h2 id="3-CNN-æ–‡æœ¬åˆ†ç±»ä»»åŠ¡"><a href="#3-CNN-æ–‡æœ¬åˆ†ç±»ä»»åŠ¡" class="headerlink" title="3. CNN æ–‡æœ¬åˆ†ç±»ä»»åŠ¡"></a>3. CNN æ–‡æœ¬åˆ†ç±»ä»»åŠ¡</h2><p>CNN çš„æ ¸å¿ƒæ€æƒ³æ˜¯æ•æ‰å±€éƒ¨ç‰¹å¾ï¼Œèµ·åˆåœ¨å›¾åƒé¢†åŸŸå–å¾—äº†å·¨å¤§çš„æˆåŠŸï¼Œåæ¥åœ¨æ–‡æœ¬é¢†åŸŸä¹Ÿå¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚å¯¹äºæ–‡æœ¬æ¥è¯´ï¼Œå±€éƒ¨ç‰¹å¾å°±æ˜¯ç”±è‹¥å¹²å•è¯ç»„æˆçš„æ»‘åŠ¨çª—å£ï¼Œç±»ä¼¼äº N-gram.</p>
<p>CNN çš„ä¼˜åŠ¿åœ¨äºèƒ½å¤Ÿè‡ªåŠ¨åœ°å¯¹ N-gram ç‰¹å¾è¿›è¡Œç»„åˆå’Œç­›é€‰ï¼Œè·å¾—ä¸åŒæŠ½è±¡å±‚æ¬¡çš„è¯­ä¹‰ä¿¡æ¯ã€‚</p>
<p> <img src="/images/deeplearning/CNN-10.png" width="700"></p>
<blockquote>
<p>(1). è¾“å…¥å±‚æ˜¯ä¸€ä¸ª $NÃ—K$ çš„çŸ©é˜µï¼Œå…¶ä¸­ $N$ ä¸ºæ–‡ç« æ‰€å¯¹åº”çš„å•è¯æ€»æ•°ï¼Œ$K$ æ˜¯æ¯ä¸ªè¯å¯¹åº”çš„è¡¨ç¤ºå‘é‡çš„ç»´åº¦.</p>
<p>(2). å·ç§¯å±‚ã€‚åœ¨è¾“å…¥çš„ $NÃ—K$ ç»´çŸ©é˜µä¸Šï¼Œæˆ‘ä»¬å®šä¹‰ä¸åŒå¤§å°çš„æ»‘åŠ¨çª—å£è¿›è¡Œå·ç§¯æ“ä½œ.</p>
<p>(3). æ± åŒ–å±‚ï¼Œç½‘ç»œé‡‡ç”¨äº† 1-MaxPool, è¾¾åˆ°çš„æ•ˆæœéƒ½æ˜¯å°†ä¸åŒé•¿åº¦çš„å¥å­é€šè¿‡æ± åŒ–å¾—åˆ°ä¸€ä¸ªå®šé•¿çš„å‘é‡è¡¨ç¤ºã€‚</p>
<p>(4). å¾—åˆ°æ–‡æœ¬çš„å‘é‡è¡¨ç¤ºä¹‹åï¼Œæ¥ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œå¹¶ä½¿ç”¨ Softmax æ¿€æ´»å‡½æ•°è¾“å‡ºæ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</p>
</blockquote>
<p><img src="/images/nlp/textcnn-3.webp" width="700" img=""></p>
<p>æ•´ä¸ªæ¨¡å‹ç”±å››éƒ¨åˆ†æ„æˆï¼š <strong>è¾“å…¥å±‚</strong>ã€<strong>å·ç§¯å±‚</strong>ã€<strong>æ± åŒ–å±‚</strong>ã€<strong>å…¨è¿æ¥å±‚</strong>ã€‚ <a href="/2018/12/16/nlp/textCNN/">æ›´å¤šèµ„æ–™è¯¦è§ï¼š TextCNNæ–‡æœ¬åˆ†ç±»</a></p>
<blockquote>
<p>é’ˆå¯¹æµ·é‡çš„æ–‡æœ¬å¤šåˆ†ç±»æ•°æ®ï¼Œä¹Ÿå¯ä»¥å°è¯•ä¸€ä¸‹æµ…å±‚çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ FastTextæ¨¡å‹ï¼Œè¯¥æ¨¡å‹çš„åˆ†ç±»æ•ˆç‡æ›´é«˜.</p>
</blockquote>
<h2 id="4-ResNet"><a href="#4-ResNet" class="headerlink" title="4. ResNet"></a>4. ResNet</h2><p>æ·±åº¦ç¥ç»ç½‘ç»œçš„å±‚æ•°å†³å®šäº†æ¨¡å‹çš„å®¹é‡ï¼Œç„¶è€Œéšç€ç¥ç»ç½‘ç»œå±‚æ•°çš„åŠ æ·±ï¼š</p>
<ul>
<li>ä¼˜åŒ–å‡½æ•°è¶Šæ¥è¶Šé™·å…¥å±€éƒ¨æœ€ä¼˜è§£ã€‚</li>
<li>åŒæ—¶ï¼Œéšç€ç½‘ç»œå±‚æ•°çš„å¢åŠ ï¼Œæ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜æ›´åŠ ä¸¥é‡ï¼Œè¿™æ˜¯å› ä¸ºæ¢¯åº¦åœ¨åå‘ä¼ æ’­æ—¶ä¼šé€æ¸è¡°å‡ã€‚ç‰¹åˆ«æ˜¯åˆ©ç”¨ Sigmoid æ¿€æ´»å‡½æ•°æ—¶ï¼Œä½¿å¾—è¿œç¦»è¾“å‡ºå±‚ï¼ˆå³æ¥è¿‘è¾“å…¥å±‚ï¼‰çš„ç½‘ç»œå±‚ä¸èƒ½å¤Ÿå¾—åˆ°æœ‰æ•ˆçš„å­¦ä¹ ï¼Œå½±å“äº†æ¨¡å‹æ³›åŒ–çš„æ•ˆæœã€‚</li>
</ul>
<p><strong>Deep Residual Networkï¼ŒResNet çš„æå‡ºèƒŒæ™¯å’Œæ ¸å¿ƒç†è®ºæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>ResNet çš„æå‡ºèƒŒæ™¯æ˜¯è§£å†³æˆ–ç¼“è§£ Deep Neural Networks è®­ç»ƒä¸­çš„ Gradients Vanishing é—®é¢˜</p>
<p> <img src="/images/deeplearning/CNN-11.png" width="700"></p>
<blockquote>
<p>ResNetåœ¨ ImageNet ç«èµ›å’Œ AlphaGo Zero çš„åº”ç”¨ä¸­éƒ½å–å¾—äº†éå¸¸å¥½çš„æ•ˆæœ.</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://book.douban.com/subject/30285146/" target="_blank" rel="external">ã€Šç™¾é¢æœºå™¨å­¦ä¹ ã€‹</a></li>
<li><a href="http://www.iterate.site/post/01-æ•°å­—çš„å¼ åŠ›/02-æœºå™¨å­¦ä¹ /01-æœºå™¨å­¦ä¹ ç†è®º/03-æ·±åº¦å­¦ä¹ /02-æ·±åº¦å­¦ä¹ /01-å‰å‘ç¥ç»ç½‘ç»œ/05-æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œ/" target="_blank" rel="external">è¿­ä»£è‡ªå·± DCNN</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Deep Feedforward Networks]]></title>
      <url>http://shopee.ai/2019/06/12/deeplearning/Deep-Feedforward-Networks/</url>
      <content type="html"><![CDATA[<p><img src="/images/deeplearning/ANN-01.png" width="500"></p>
<a id="more"></a>
<p><strong>æ›´å¤šåŸºç¡€çŸ¥è¯†ç³»åˆ—è¯¦æƒ…å‚è§ : <a href="/deeplearning/">Deep Learning Notes</a>
</strong></p>
<blockquote>
<p>Feedforward Networks æ˜¯ä¸€ç§æœ€ç®€å•çš„ç¥ç»ç½‘ç»œï¼Œå„ç¥ç»å…ƒåˆ†å±‚æ’åˆ—ã€‚æ¯ä¸ªç¥ç»å…ƒåªä¸å‰ä¸€å±‚çš„ç¥ç»å…ƒç›¸è¿ã€‚æ¥æ”¶å‰ä¸€å±‚çš„è¾“å‡ºï¼Œå¹¶è¾“å‡ºç»™ä¸‹ä¸€å±‚ï¼å„å±‚é—´æ²¡æœ‰åé¦ˆã€‚</p>
</blockquote>
<p>Feedforward Networks æ˜¯ä¸€ç±»ç½‘ç»œçš„ç»Ÿç§°: MLPã€Autoencoderã€RBMã€CNN ç­‰éƒ½å±äºè¿™ç±».</p>
<blockquote>
<p>å¯¹äºä¸­é—´å±‚æ¥è¯´, å¾€å¾€æ˜¯ ReLU çš„æ•ˆæœæœ€å¥½.<br>è™½ç„¶ z &lt; 0, çš„æ—¶å€™ï¼Œæ–œç‡ä¸º0ï¼Œ ä½†åœ¨å®è·µä¸­ï¼Œæœ‰è¶³å¤Ÿå¤šçš„éšè—å•å…ƒ ä»¤ z &gt; 0, å¯¹å¤§å¤šæ•°è®­ç»ƒæ ·æœ¬æ¥è¯´æ˜¯å¾ˆå¿«çš„.</p>
<p>so the one place you might use as linear activation function others usually in the output layer.</p>
</blockquote>
<h2 id="1-Neural-Networks-Basics"><a href="#1-Neural-Networks-Basics" class="headerlink" title="1. Neural Networks Basics"></a>1. Neural Networks Basics</h2><p><img src="/images/deeplearning/C1W3-8_1.png" width="700"></p>
<h2 id="2-Activation-functions"><a href="#2-Activation-functions" class="headerlink" title="2. Activation functions"></a>2. Activation functions</h2><p>å››ç§å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°: Sigmoid, Tanh, ReLU, Leaky ReLU.</p>
<p>å…¶ä¸­ sigmoid æˆ‘ä»¬å·²ç»è§è¿‡äº†, å®ƒçš„è¾“å‡ºå¯çœ‹æˆä¸€ä¸ªæ¦‚ç‡å€¼, å¾€å¾€ç”¨åœ¨è¾“å‡ºå±‚. <strong>å¯¹äºä¸­é—´å±‚æ¥è¯´, å¾€å¾€<code>ReLU</code>æ•ˆæœæœ€å¥½.</strong></p>
<blockquote>
<p>Tanh æ•°æ®å¹³å‡å€¼ä¸º 0ï¼Œå…·æœ‰æ•°æ®ä¸­å¿ƒåŒ–çš„æ•ˆæœï¼Œå‡ ä¹åœ¨ä»»ä½•åœºåˆéƒ½ä¼˜äº Sigmoid</p>
</blockquote>
<p><img src="/images/deeplearning/C1W3-9_1.png" width="700"></p>
<p>ä¸ºä»€ä¹ˆéœ€è¦æ¿€æ´»å‡½æ•°? å¦‚æœæ²¡æœ‰æ¿€æ´»å‡½æ•°, é‚£ä¹ˆä¸è®ºå¤šå°‘å±‚çš„ç¥ç»ç½‘ç»œéƒ½åªç›¸å½“äºä¸€ä¸ªLR:</p>
<blockquote>
<p>it turns out that if you use a linear activation function or alternatively if you donâ€™t have an activation function, then no matter how many layers your neural network has, always doing just computing a linear activation function, so you might as well not have any hidden layers.</p>
<p>so unless you throw a non-linearity in there, then youâ€™re not computing more interesting functions</p>
</blockquote>
<p>ReLU (rectified linear unit çŸ«æ­£çº¿æ€§å•å…ƒ)</p>
<blockquote>
<p>tanh å’Œ sigmoid éƒ½æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯ z éå¸¸å¤§æˆ–è€…éå¸¸å°ï¼Œå‡½æ•°çš„æ–œç‡(å¯¼æ•°æ¢¯åº¦)å°±ä¼šéå¸¸å°, æ¢¯åº¦ä¸‹é™å¾ˆæ…¢.</p>
<p>the slope of the function you know ends up being close to zero, and so this can slow down gradient descent</p>
<p>ReLU (rectified linear unit) is well, z = 0 çš„æ—¶å€™ï¼Œä½ å¯ä»¥ç»™å¯¼æ•°èµ‹å€¼ä¸º 0 or 1ï¼Œè™½ç„¶è¿™ä¸ªç‚¹æ˜¯ä¸å¯å¾®çš„. ä½†å®ç°æ²¡æœ‰å½±å“.</p>
<p>è™½ç„¶ z &lt; 0, çš„æ—¶å€™ï¼Œæ–œç‡ä¸º0ï¼Œ ä½†åœ¨å®è·µä¸­ï¼Œæœ‰è¶³å¤Ÿå¤šçš„éšè—å•å…ƒ ä»¤ z &gt; 0, å¯¹å¤§å¤šæ•°è®­ç»ƒæ ·æœ¬æ¥è¯´æ˜¯å¾ˆå¿«çš„.</p>
</blockquote>
<p><strong>æ¿€æ´»å‡½æ•°çš„å¯¹æ¯”:</strong></p>
<blockquote>
<ol>
<li>Sigmoid å’Œ Tanh ä¸ºä»€ä¹ˆä¼šå¯¼è‡´ Vanishing/Exploding gradients ? </li>
<li>Tanh å€¼åŸŸ (-1,1) Sigmoid å€¼åŸŸ (0,1)</li>
<li>ReLU çš„ä¼˜ç‚¹ï¼Œå’Œå±€é™æ€§åˆ†åˆ«æ˜¯ä»€ä¹ˆ? </li>
<li><a href="https://zhuanlan.zhihu.com/p/48776056" target="_blank" rel="external">è°ˆè°ˆæ¿€æ´»å‡½æ•° Sigmoid,Tanh,ReLu,softplus,softmax</a></li>
</ol>
</blockquote>
<h2 id="3-Initialization-weights"><a href="#3-Initialization-weights" class="headerlink" title="3. Initialization weights"></a>3. Initialization weights</h2><p>åœ¨ LR ä¸­æˆ‘ä»¬çš„å‚æ•° $w$ åˆå§‹åŒ–ä¸º 0, å¦‚æœåœ¨ç¥ç»ç½‘ç»œä¸­ä¹Ÿæ˜¯ç”¨ç›¸åŒçš„åˆå§‹åŒ–, é‚£ä¹ˆä¸€ä¸ªéšè—å±‚çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ç›¸åŒçš„, ä¸è®ºè¿­ä»£å¤šå°‘æ¬¡. è¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„, æ‰€ä»¥æˆ‘ä»¬åº”è¯¥<font color="red"> <strong>éšæœºåœ°åˆå§‹åŒ–</strong></font> $w$ ä»è€Œè§£å†³è¿™ä¸ª sysmmetry breaking problem. ç ´åå¯¹ç§°é—®é¢˜</p>
<p><img src="/images/deeplearning/C1W3-16_1.png" width="700"></p>
<blockquote>
<p>å…·ä½“åˆå§‹åŒ–ä»£ç å¯å‚è§ä¸‹å›¾, å…¶ä¸­ <strong>ä¹˜ä»¥ 0.01</strong> æ˜¯ä¸ºäº†è®©å‚æ•° $w$ è¾ƒå°, åŠ é€Ÿæ¢¯åº¦ä¸‹é™ </p>
<p>å¦‚æ¿€æ´»ä¸º tanh æ—¶, è‹¥å‚æ•°è¾ƒå¤§åˆ™ $z$ ä¹Ÿè¾ƒå¤§, æ­¤æ—¶æ¢¯åº¦æ¥è¿‘äº 0, æ›´æ–°ç¼“æ…¢. å¦‚ä¸æ˜¯ tanh or sigmoid åˆ™é—®é¢˜ä¸å¤§.</p>
<p>this is a relatively shallow neural network without too many hidden layers, so 0.01 maybe work ok.</p>
<p>finally it turns out that sometimes there can be better constants than 0.01.</p>
</blockquote>
<p><img src="/images/deeplearning/C1W3-17_1.png" width="700"></p>
<h2 id="4-Improving-DNN"><a href="#4-Improving-DNN" class="headerlink" title="4. Improving DNN"></a>4. Improving DNN</h2><p>æ·±åº¦å­¦ä¹ çš„å®ç”¨å±‚é¢ ï¼š</p>
<blockquote>
<ul>
<li>èƒ½å¤Ÿé«˜æ•ˆåœ°ä½¿ç”¨ç¥ç»ç½‘ç»œ<strong>é€šç”¨</strong>çš„æŠ€å·§ï¼ŒåŒ…æ‹¬ <code>åˆå§‹åŒ–ã€L2å’Œdropoutæ­£åˆ™åŒ–ã€Batchå½’ä¸€åŒ–ã€æ¢¯åº¦æ£€éªŒ</code>ã€‚</li>
<li>èƒ½å¤Ÿå®ç°å¹¶åº”ç”¨å„ç§<strong>ä¼˜åŒ–</strong>ç®—æ³•ï¼Œä¾‹å¦‚ <code>Mini-batchã€Momentumã€RMSpropã€Adamï¼Œå¹¶æ£€æŸ¥å®ƒä»¬çš„æ”¶æ•›ç¨‹åº¦</code>ã€‚</li>
<li>ç†è§£æ·±åº¦å­¦ä¹ æ—¶ä»£å…³äºå¦‚ä½• <strong>æ„å»ºè®­ç»ƒ/å¼€å‘/æµ‹è¯•é›†</strong> ä»¥åŠ <strong>åå·®/æ–¹å·®åˆ†æ</strong> æœ€æ–°æœ€æœ‰æ•ˆçš„æ–¹æ³•.</li>
</ul>
</blockquote>
<h3 id="4-1-Train-dev-test"><a href="#4-1-Train-dev-test" class="headerlink" title="4.1 Train/dev/test"></a>4.1 Train/dev/test</h3><p>ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ ä¸­ï¼š</p>
<blockquote>
<p>é€šå¸¸æŒ‰ç…§ 70/30 æ¥æ•°æ®é›†, æˆ–è€…æŒ‰ç…§ 60/20/20 çš„æ¯”ä¾‹åˆ†ä¸º Train/Validation/Test.</p>
</blockquote>
<p>æ·±åº¦å­¦ä¹ é—®é¢˜ä¸­:</p>
<blockquote>
<p>æˆ‘ä»¬å¯ç”¨çš„æ•°æ®é›†çš„é‡çº§éå¸¸å¤§. è¿™æ—¶æˆ‘ä»¬å°±ä¸éœ€è¦ç»™éªŒè¯é›†å’Œæµ‹è¯•é›†å¤ªå¤§çš„æ¯”ä¾‹, ä¾‹å¦‚ 98/1/1.</p>
</blockquote>
<h3 id="4-2-Regularization"><a href="#4-2-Regularization" class="headerlink" title="4.2 Regularization"></a>4.2 Regularization</h3><p>ä¸ºä»€ä¹ˆæ­£åˆ™åŒ–æ²¡æœ‰åŠ  $\frac{\lambda}{2m} b^2$:</p>
<blockquote>
<p>å› ä¸º $w$ é€šå¸¸æ˜¯ä¸€ä¸ªé«˜ç»´å‚æ•°çŸ¢é‡, å·²ç»å¯ä»¥è¡¨è¾¾ <strong>High bias</strong> çš„é—®é¢˜, $w$ å¯èƒ½å«æœ‰å¾ˆå¤šå‚æ•°ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ‹Ÿåˆæ‰€æœ‰å‚æ•°, è€Œ $b$ åªæ˜¯å•ä¸ªæ•°å­—, æ‰€ä»¥ $w$ å‡ ä¹è¦†ç›–äº†æ‰€æœ‰å‚æ•°ï¼Œè€Œä¸æ˜¯ $b$, å¦‚æœåŠ äº† $b$ ä¹Ÿæ²¡æœ‰å½±å“ï¼Œå› ä¸º $b$ åªæ˜¯ä¼—å¤šå‚æ•°ä¸­çš„ä¸€ä¸ª.</p>
</blockquote>
<p><strong>L1 regularization :</strong></p>
<blockquote>
<p>å¦‚æœç”¨çš„æ˜¯ L1 regularization, then $w$ will end up being sprase ç¨€ç–çš„, ä¹Ÿå°±æ˜¯è¯´ $w$ å‘é‡ä¸­æœ‰å¾ˆå¤š 0. æœ‰äººè¯´è¿™æ ·æœ‰åˆ©äºå‹ç¼©æ¨¡å‹ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ä¸æ˜¯å¾ˆåˆé€‚. è¶Šæ¥è¶Šå¤šçš„äººä½¿ç”¨ L2.</p>
<p>Notes: ä¸ç§°ä¸º:çŸ©é˜µ L2 èŒƒæ•°ï¼Œ æŒ‰ç…§æƒ¯ä¾‹æˆ‘ä»¬ç§°ä¸º: <strong>Frobenius norm of a matrix</strong>, å…¶å®å°±æ˜¯ : çŸ©é˜µ L2.</p>
</blockquote>
<p><strong>L2 regularization :</strong></p>
<blockquote>
<p>L2 regularization ä¸‹çš„ Cost Function å¦‚ä¸‹æ‰€ç¤º, åªéœ€è¦æ·»åŠ æ­£åˆ™é¡¹ <strong>$\frac{\lambda}{2m}\sum_{l=1}^L||w^{[l]}||^2_F$</strong>, å…¶ä¸­ F ä»£è¡¨ Frobenius Norm. åœ¨æ·»åŠ äº†æ­£åˆ™é¡¹ä¹‹å, ç›¸åº”çš„æ¢¯åº¦ä¹Ÿè¦å˜åŒ–, æ‰€ä»¥åœ¨æ›´æ–°å‚æ•°çš„æ—¶å€™éœ€è¦åŠ ä¸Šå¯¹åº”çš„é¡¹. è¿™é‡Œæ³¨æ„ä¸€ç‚¹, æˆ‘ä»¬åªå¯¹å‚æ•° $w$ æ­£åˆ™, è€Œä¸å¯¹ $b$. å› ä¸ºå¯¹äºæ¯ä¸€å±‚æ¥è¯´, $w$ æœ‰å¾ˆé«˜çš„ç»´åº¦, è€Œ $b$ åªæ˜¯ä¸€ä¸ªæ ‡é‡. $w$ å¯¹æ•´ä¸ªæ¨¡å‹çš„å½±å“è¿œå¤§äº $b$.</p>
</blockquote>
<p>ä¸‹é¢ç»™å‡ºæ·»åŠ  regularization ä¸ºä»€ä¹ˆèƒ½é˜²æ­¢è¿‡æ‹Ÿåˆç»™å‡ºç›´è§‚çš„è§£é‡Š:</p>
<blockquote>
<p>å½“æˆ‘ä»¬çš„ Î» æ¯”è¾ƒå¤§çš„æ—¶å€™, æ¨¡å‹å°±ä¼šåŠ å¤§å¯¹ w çš„æƒ©ç½š, è¿™æ ·æœ‰äº› w å°±ä¼šå˜å¾—å¾ˆå° (L2 Regularization ä¹Ÿå«æƒé‡è¡°å‡, <strong>weights decay</strong>). æ•ˆæœå°±æ˜¯æ•´ä¸ªç¥ç»ç½‘ç»œå˜å¾—ç®€å•äº†(ä¸€äº›éšè—å±‚ç”šè‡³ $w$ è¶‹å‘äº 0), ä»è€Œé™ä½äº†è¿‡æ‹Ÿåˆçš„é£é™©.</p>
<p>é‚£äº› éšè—å±‚ å¹¶æ²¡æœ‰è¢«æ¶ˆé™¤ï¼Œåªæ˜¯å½±å“å˜å¾—æ›´å°äº†ï¼Œç¥ç»ç½‘ç»œå˜å¾—ç®€å•äº†.</p>
</blockquote>
<hr>
<blockquote>
<p>ä»å¦ä¸€ä¸ªè§’åº¦æ¥çœ‹. ä»¥ tanhæ¿€æ´»å‡½æ•° ä¸ºä¾‹, å½“ $Î»$ å¢åŠ æ—¶, $w$ ä¼šåå°, è¿™æ · $z = wa +b$ ä¹Ÿä¼šåå°, æ­¤æ—¶çš„æ¿€æ´»å‡½æ•°å¤§è‡´æ˜¯çº¿æ€§çš„. è¿™æ ·æ¨¡å‹çš„å¤æ‚åº¦ä¹Ÿå°±é™ä½äº†, å³é™ä½äº†è¿‡æ‹Ÿåˆçš„é£é™©.</p>
<p>å¦‚æœç¥ç»ç½‘ç»œæ¯å±‚éƒ½æ˜¯çº¿æ€§çš„ï¼Œå…¶å®æ•´ä¸ªè¿˜æ˜¯ä¸€ä¸ªçº¿æ€§çš„, å³ä½¿æ˜¯ä¸€ä¸ªå¾ˆæ·±çš„ç½‘ç»œï¼Œå› ä¸ºçº¿æ€§æ¿€æ´»å‡½æ•°çš„ç‰¹å¾ï¼Œæœ€ç»ˆæˆ‘ä»¬åªèƒ½è®¡ç®—çº¿æ€§å‡½æ•°.</p>
</blockquote>
<p><strong>Other Regularization</strong></p>
<ul>
<li>Data augmentation</li>
<li>Early stopping</li>
</ul>
<blockquote>
<p>W å¼€å§‹æ˜¯å˜å°çš„ï¼Œä¹‹åä¼šéšç€è¿­ä»£è¶Šæ¥è¶Šå¤§. early stopping å°±æ˜¯åœ¨ä¸­é—´ç‚¹åœæ­¢è¿­ä»£è¿‡ç¨‹.</p>
<p>å…¶å®å¯ä»¥è®¾ç½®åœ¨ J ä¸åœ¨æ˜æ˜¾ä¸‹é™çš„æ—¶å€™ï¼Œè®¾ç½® Early Stopping.</p>
<p>Notes:</p>
<p>&nbsp;&nbsp; 1. early stopping ç¼ºç‚¹æ˜¯ ææ—©åœæ­¢ï¼Œw æ˜¯é˜²æ­¢äº†è¿‡æ‹Ÿåˆï¼Œä½†æ˜¯ J æ²¡æœ‰è¢«ç»§ç»­ä¸‹é™.<br>&nbsp;&nbsp; 2. L2 æ­£åˆ™åŒ– çš„ç¼ºç‚¹æ˜¯ï¼Œè¦ç”¨å¤§é‡ç²¾åŠ›æœç´¢åˆé€‚çš„ Î» .</p>
</blockquote>
<h3 id="4-3-Dropout"><a href="#4-3-Dropout" class="headerlink" title="4.3 Dropout"></a>4.3 Dropout</h3><p>dropout ä¹Ÿæ˜¯ä¸€ç§æ­£åˆ™åŒ–çš„æ‰‹æ®µ, åœ¨è®­ç»ƒæ—¶ä»¥ 1-keep_prob éšæœºåœ°â€ä¸¢å¼ƒâ€ä¸€äº›èŠ‚ç‚¹. å¦‚ä¸‹å›¾æ‰€ç¤º.</p>
<p><img src="/images/deeplearning/C2W1-10_1.png" width="600"></p>
<blockquote>
<p>dropout å°†äº§ç”Ÿæ”¶ç¼©æƒé‡çš„å¹³æ–¹èŒƒæ•°çš„æ•ˆæœ, å’Œ L2 ç±»ä¼¼ï¼Œå®æ–½ dropout çš„ç»“æœæ˜¯å®ƒä¼šå‹ç¼©æƒé‡ï¼Œå¹¶å®Œæˆä¸€äº›é¢„é˜²è¿‡æ‹Ÿåˆçš„å¤–å±‚æ­£åˆ™åŒ–ï¼Œäº‹å®è¯æ˜ dropout è¢«æ­£å¼åœ°ä½œä¸ºä¸€ç§æ­£åˆ™åŒ–çš„æ›¿ä»£å½¢å¼</p>
<p>L2 å¯¹ä¸åŒæƒé‡çš„è¡°å‡æ˜¯ä¸åŒçš„ï¼Œå®ƒå–å†³äºå€å¢çš„æ¿€æ´»å‡½æ•°çš„å¤§å°.</p>
<p>dropout çš„åŠŸèƒ½ç±»ä¼¼äº L2 æ­£åˆ™åŒ–. ç”šè‡³ dropout æ›´é€‚ç”¨äºä¸åŒçš„è¾“å…¥èŒƒå›´.</p>
</blockquote>
<hr>
<blockquote>
<p>å…¶ä»– : è®¡ç®—æœºè§†è§‰çš„äººå‘˜éå¸¸é’Ÿæƒ… dropout å‡½æ•°.</p>
<p>Notes: dropout çš„ä¸€å¤§ç¼ºç‚¹å°±æ˜¯ J ä¸ä¼šè¢«æ˜ç¡®å®šä¹‰. æ¯æ¬¡è¿­ä»£éƒ½ä¼šè¢«éšæœºåˆ é™¤ä¸€äº›èŠ‚ç‚¹. å¦‚æœå†ä¸‰æ£€æŸ¥æ¢¯åº¦ä¸‹é™çš„æ€§èƒ½ï¼Œå®é™…ä¸Šæ˜¯å¾ˆéš¾å¤æŸ¥çš„.</p>
<p>å®šä¹‰æ˜ç¡®çš„ä»£ä»·å‡½æ•°ï¼Œæ¯æ¬¡è¿­ä»£éƒ½ä¼šä¸‹é™. å› ä¸º dropout ä½¿å¾— J æ²¡æœ‰è¢«æ˜ç¡®å®šä¹‰ï¼Œæˆ–è€…åœ¨æŸç§ç¨‹åº¦ä¸Šå¾ˆéš¾è®¡ç®—. æ‰€ä»¥æˆ‘ä»¬å¤±å»äº†è°ƒè¯•å·¥å…·ï¼Œæˆ‘é€šå¸¸ä¼šå…³é—­ dropout. keep_prob è®¾ç½®ä¸º 1ï¼Œ è¿è¡Œä»£ç ï¼Œç¡®ä¿ J å‡½æ•°å•è°ƒé€’å‡, ç„¶ååœ¨æ‰“å¼€ dropout, åœ¨ dropout çš„è¿‡ç¨‹ä¸­ï¼Œä»£ç å¹¶æœªå¼•å…¥bug.</p>
</blockquote>
<h3 id="4-4-Normalization"><a href="#4-4-Normalization" class="headerlink" title="4.4 Normalization"></a>4.4 Normalization</h3><p><img src="/images/deeplearning/C2W1-14_1.png" width="600"></p>
<blockquote>
<ol>
<li>0 å‡å€¼åŒ– </li>
<li>å½’ä¸€åŒ– æ–¹å·®</li>
</ol>
<p>ä¸Šå›¾2ï¼Œ ç‰¹å¾ x1 çš„æ–¹å·® æ¯” ç‰¹å¾ x2 çš„æ–¹å·® å¤§å¾ˆå¤š<br>ä¸Šå›¾3ï¼Œ ç‰¹å¾ x1 å’Œ ç‰¹å¾ x2 çš„ æ–¹å·® éƒ½æ˜¯ 1</p>
<p>æ³¨æ„: è®­ç»ƒé›† å’Œ æµ‹è¯•é›†ï¼Œéƒ½æ˜¯é€šè¿‡ç›¸åŒçš„ $\mu$ å’Œ ${\sigma}^2$ å®šä¹‰çš„ç›¸åŒæ•°æ®è½¬æ¢, å…¶ä¸­ $\mu$ å’Œ ${\sigma}^2$ æ˜¯ç”±è®­ç»ƒæ•°æ®è®¡ç®—è€Œæ¥.</p>
</blockquote>
<hr>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/38176412" target="_blank" rel="external">å¼ ä¿Šæ— - Batch Normalizationå¯¼è¯»</a> ã€ <a href="https://zhuanlan.zhihu.com/p/43200897" target="_blank" rel="external">å¼ ä¿Šæ— - æ·±åº¦å­¦ä¹ ä¸­çš„Normalizationæ¨¡å‹</a></p>
<p><code>Internal Covariate Shift</code> &amp; Independent and identically distributedï¼Œç¼©å†™ä¸º <code>IID</code></p>
<p>Batch Normalization å¯ä»¥æœ‰æ•ˆé¿å…å¤æ‚å‚æ•°å¯¹ç½‘ç»œè®­ç»ƒäº§ç”Ÿçš„å½±å“ï¼Œä¹Ÿå¯æé«˜æ³›åŒ–èƒ½åŠ›.</p>
<p>ç¥ç»ç½‘è·¯çš„è®­ç»ƒè¿‡ç¨‹çš„æœ¬è´¨æ˜¯å­¦ä¹ æ•°æ®åˆ†å¸ƒï¼Œå¦‚æœè®­ç»ƒæ•°æ®ä¸æµ‹è¯•æ•°æ®åˆ†å¸ƒä¸åŒï¼Œå°†å¤§å¤§é™ä½ç½‘ç»œæ³›åŒ–èƒ½åŠ›ï¼Œ BN æ˜¯é’ˆå¯¹æ¯ä¸€æ‰¹æ•°æ®ï¼Œåœ¨ç½‘ç»œçš„æ¯ä¸€å±‚è¾“å…¥ä¹‹å‰å¢åŠ  BNï¼Œ(å‡å€¼0ï¼Œæ ‡å‡†å·®1)ã€‚</p>
<p>Dropout å¯ä»¥æŠ‘åˆ¶è¿‡æ‹Ÿåˆï¼Œä½œç”¨äºæ¯ä»½å°æ‰¹é‡çš„è®­ç»ƒæ•°æ®ï¼Œéšæœºä¸¢å¼ƒéƒ¨åˆ†ç¥ç»å…ƒæœºåˆ¶. bagging åŸç†.</p>
<p><a href="https://posts.careerengine.us/p/5cae13b2d401440a7fe047af" target="_blank" rel="external">MLç®—æ³•ï¼š å…³äºé˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæ•´ç†äº† 8 æ¡è¿­ä»£æ–¹å‘</a></p>
</blockquote>
<h3 id="4-5-Vanishing-Exploding"><a href="#4-5-Vanishing-Exploding" class="headerlink" title="4.5 Vanishing/Exploding"></a>4.5 Vanishing/Exploding</h3><p>Vanishing/Exploding gradients æŒ‡çš„æ˜¯éšç€å‰å‘ä¼ æ’­ä¸æ–­åœ°è¿›è¡Œ, æ¿€æ´»å•å…ƒçš„å€¼ä¼šé€å±‚æŒ‡æ•°çº§åœ°å¢åŠ æˆ–å‡å°, ä»è€Œå¯¼è‡´æ¢¯åº¦æ— é™å¢å¤§æˆ–è€…è¶‹è¿‘äºé›¶, è¿™æ ·ä¼šä¸¥é‡å½±å“ç¥ç»ç½‘ç»œçš„è®­ç»ƒ. å¦‚ä¸‹å›¾.</p>
<p><img src="/images/deeplearning/Vanishing-Exploding-gradients.png" width="750"></p>
<blockquote>
<p>å¯ä»¥å‡å°è¿™ç§æƒ…å†µå‘ç”Ÿçš„æ–¹æ³•, å°±æ˜¯ç”¨æœ‰æ•ˆçš„å‚æ•°åˆå§‹åŒ– (è¯¥æ–¹æ³•å¹¶ä¸èƒ½å®Œå…¨è§£å†³è¿™ä¸ªé—®é¢˜). ä½†æ˜¯ä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„</p>
<p>è®¾ç½®åˆç†çš„æƒé‡ï¼Œå¸Œæœ›ä½ è®¾ç½®çš„æƒé‡çŸ©é˜µï¼Œæ—¢ä¸ä¼šå¢é•¿è¿‡å¿«ï¼Œä¹Ÿä¸ä¼šä¸‹é™è¿‡å¿«åˆ° 0.</p>
<p>æƒ³æ›´åŠ äº†è§£å¦‚ä½•åˆå§‹åŒ–æƒé‡å¯ä»¥çœ‹ä¸‹è¿™ç¯‡æ–‡ç«  <a href="http://www.cnblogs.com/marsggbo/p/7462682.html" target="_blank" rel="external">ç¥ç»ç½‘ç»œæƒé‡åˆå§‹åŒ–é—®é¢˜</a>ï¼Œå…¶ä¸­å¾ˆè¯¦ç»†çš„ä»‹ç»äº†æƒé‡åˆå§‹åŒ–é—®é¢˜ã€‚</p>
</blockquote>
<h2 id="5-Optimization-amp-Hyperparam"><a href="#5-Optimization-amp-Hyperparam" class="headerlink" title="5. Optimization &amp; Hyperparam"></a>5. Optimization &amp; Hyperparam</h2><p>å…³äºä¼˜åŒ–ç®—æ³•ä¸è¶…å‚æ•°è°ƒä¼˜ï¼Œä»¥åŠ BN ç­‰æ›´å¤šï¼Œè¯¦æƒ…å‚é˜…æœ¬åšä¸‹é¢é“¾æ¥ï¼š</p>
<blockquote>
<ul>
<li><p><a href="/2018/07/21/deeplearning/Improving-Deep-Neural-Networks-week2/">Improving DNN (week2) - Optimization Algorithm</a></p>
</li>
<li><p><a href="/2018/07/23/deeplearning/Improving-Deep-Neural-Networks-week3/">Improving DNN (week3) - Hyperparameterã€Batch Regularization</a></p>
</li>
</ul>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="/deeplearning/">Andrew Ng Notes</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SVM å’Œ LR çš„åŒºåˆ«ä¸è”ç³»ï¼Ÿ]]></title>
      <url>http://shopee.ai/2019/06/10/ml/SVM-vs-LR/</url>
      <content type="html"><![CDATA[<p><img class="img-fancy" src="/images/ml/svm/svm-01.jpg" width="600" border="0" alt="SVM vs LR"></p>
<!--<a href="/2019/06/02/ml/Random_Forest_and_GBDT/" target="_self" style="display:block; margin:0 auto; background:url('/images/ml/ensumble/ensumble-1.png') no-repeat 0 0 / contain; height:304px; width:550px;"></a>
-->
<a id="more"></a>
<p>å…³äº SVM çš„è¯¦ç»†åŸç†ä¸æ¨å¯¼è¿‡ç¨‹ï¼Œè¯¦è§ï¼š <a href="/2018/06/20/ml/svm-hanxiaoyang/">Support Vecor Machine (å…­éƒ¨æ›²)</a></p>
<p>å…¶å®æˆ‘è®¤ä¸º SVM çš„ä½¿ç”¨ç‡å·²ç»æ˜æ˜¾åœ¨ä¸‹é™è¶‹åŠ¿äº†ï¼Œä¸»è¦åŸå› æ˜¯éšç€ç¥ç»ç½‘ç»œçš„å…´èµ·ä¹‹åï¼Œæ‰€ä»¥æˆ‘ä¸å»ºè®®ä¸€å®šè¦èŠ±éå¸¸å¤šçš„ç»å†å»å­¦ä¹  SVM çš„åŸç†å’Œæ¨å¯¼äº†ï¼Œå¯ä»¥ç®€å•äº†è§£ä¸‹ã€‚ ä¸»è¦è¿˜æ˜¯äº†è§£ä¸‹é€‚ç”¨èŒƒå›´å’Œåœºæ™¯ç­‰å°±å¯ä»¥äº†ã€‚</p>
<h2 id="1-LR-vs-SVM"><a href="#1-LR-vs-SVM" class="headerlink" title="1. LR vs SVM"></a>1. LR vs SVM</h2><p>è¦è¯´æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Œé‚£å°±æ˜¯ loss function ä¸åŒï¼Œä¸¤è€…å¯¹æ•°æ®å’Œå‚æ•°çš„æ•æ„Ÿç¨‹åº¦ä¸åŒ</p>
<blockquote>
<p>(1). å¯¹éçº¿æ€§è¡¨è¾¾ä¸Šï¼ŒLR åªèƒ½é€šè¿‡äººå·¥çš„ç‰¹å¾ç»„åˆæ¥å®ç°ï¼Œè€Œ SVM å¼•å…¥æ ¸å‡½æ•°æ¥å®ç°éçº¿æ€§è¡¨è¾¾ã€‚</p>
<p>(2). LR äº§å‡ºçš„æ˜¯æ¦‚ç‡å€¼ï¼Œè€Œ SVM åªèƒ½äº§å‡ºæ˜¯æ­£ç±»è¿˜æ˜¯è´Ÿç±»ï¼Œä¸èƒ½äº§å‡ºæ¦‚ç‡ã€‚</p>
<p>(3). Linear SVM ä¾èµ–æ•°æ®è¡¨è¾¾çš„è·ç¦»æµ‹åº¦ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ•°æ®å…ˆåš normalizationï¼›LRä¸å—å…¶å½±å“.</p>
<p>(4). SVM ä¸ç›´æ¥ä¾èµ–æ•°æ®åˆ†å¸ƒï¼Œè€ŒLRåˆ™ä¾èµ–, SVM ä¸»è¦å…³æ³¨çš„æ˜¯â€œæ”¯æŒå‘é‡â€ï¼Œä¹Ÿå°±æ˜¯å’Œåˆ†ç±»æœ€ç›¸å…³çš„å°‘æ•°ç‚¹ï¼Œå³å…³æ³¨å±€éƒ¨å…³é”®ä¿¡æ¯ï¼›è€Œ LR æ˜¯åœ¨å…¨å±€è¿›è¡Œä¼˜åŒ–çš„ã€‚è¿™å¯¼è‡´ SVM å¤©ç„¶æ¯” LR æœ‰<strong>æ›´å¥½çš„æ³›åŒ–èƒ½åŠ›</strong>ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚ LRåˆ™å—æ‰€æœ‰æ•°æ®ç‚¹çš„å½±å“ï¼Œå¦‚æœæ•°æ®ä¸åŒç±»åˆ« strongly unbalance ä¸€èˆ¬éœ€è¦å…ˆå¯¹æ•°æ®åš balancingã€‚</p>
<p>(5). æŸå¤±å‡½æ•°çš„ä¼˜åŒ–æ–¹æ³•ä¸åŒï¼ŒLR æ˜¯ä½¿ç”¨ GD æ¥æ±‚è§£ <strong>å¯¹æ•°ä¼¼ç„¶å‡½æ•°</strong> çš„æœ€ä¼˜è§£ï¼›SVM ä½¿ç”¨ (Sequnential Minimal Optimal) é¡ºåºæœ€å°ä¼˜åŒ–ï¼Œæ¥æ±‚è§£æ¡ä»¶çº¦æŸæŸå¤±å‡½æ•°çš„å¯¹å¶å½¢å¼ã€‚</p>
<hr>
<p>ä¸€èˆ¬ç”¨çº¿æ€§æ ¸å’Œé«˜æ–¯æ ¸ï¼Œä¹Ÿå°±æ˜¯Linearæ ¸ä¸RBFæ ¸éœ€è¦æ³¨æ„çš„æ˜¯éœ€è¦å¯¹ <strong>æ•°æ®å½’ä¸€åŒ–å¤„ç†</strong>.</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹RBFæ•ˆæœæ˜¯ä¸ä¼šå·®äºLinearä½†æ˜¯æ—¶é—´ä¸ŠRBFä¼šè€—è´¹æ›´å¤š</p>
</blockquote>
<p>æ‰©å±•ç‚¹ï¼š</p>
<blockquote>
<p><strong>æ³¨</strong>ï¼šä¸å¸¦æ­£åˆ™åŒ–çš„LRï¼Œå…¶åš normalization çš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿é€‰æ‹©ä¼˜åŒ–è¿‡ç¨‹çš„èµ·å§‹å€¼ï¼Œä¸ä»£è¡¨æœ€åçš„è§£çš„ performance ä¼šè·Ÿ normalization ç›¸å…³ï¼Œè€Œå…¶çº¿æ€§çº¦æŸæ˜¯å¯ä»¥è¢«æ”¾ç¼©çš„ï¼ˆç­‰å¼ä¸¤è¾¹å¯åŒæ—¶ä¹˜ä»¥ä¸€ä¸ªç³»æ•°ï¼‰ï¼Œæ‰€ä»¥åš normalization åªæ˜¯ä¸ºäº†æ±‚è§£ä¼˜åŒ–æ¨¡å‹è¿‡ç¨‹ä¸­æ›´å®¹æ˜“é€‰æ‹©åˆå§‹å€¼</p>
</blockquote>
<h2 id="2-Andrew-Ng"><a href="#2-Andrew-Ng" class="headerlink" title="2. Andrew Ng"></a>2. Andrew Ng</h2><blockquote>
<ol>
<li>å¦‚æœFeatureçš„æ•°é‡å¾ˆå¤§ï¼Œè·Ÿæ ·æœ¬æ•°é‡å·®ä¸å¤šï¼Œè¿™æ—¶å€™é€‰ç”¨LRæˆ–è€…æ˜¯Linear Kernelçš„SVM</li>
<li>å¦‚æœFeatureçš„æ•°é‡æ¯”è¾ƒå°ï¼Œæ ·æœ¬æ•°é‡ä¸€èˆ¬ï¼Œä¸ç®—å¤§ä¹Ÿä¸ç®—å°ï¼Œé€‰ç”¨SVM+Gaussian Kernel</li>
<li>å¦‚æœFeatureçš„æ•°é‡æ¯”è¾ƒå°ï¼Œè€Œæ ·æœ¬æ•°é‡å¾ˆå¤šï¼Œéœ€è¦æ‰‹å·¥æ·»åŠ ä¸€äº›featureå˜æˆç¬¬ä¸€ç§æƒ…å†µ</li>
</ol>
</blockquote>
<p><strong>å¦‚ä½•é‡åŒ– feature number å’Œ sample numberï¼š</strong></p>
<blockquote>
<p>n æ˜¯featureçš„æ•°é‡, mæ˜¯æ ·æœ¬æ•°   </p>
<p>1). feature number &gt;&gt; sample numberï¼Œåˆ™ä½¿ç”¨LRç®—æ³•æˆ–è€…ä¸å¸¦æ ¸å‡½æ•°çš„SVMï¼ˆçº¿æ€§åˆ†ç±»ï¼‰<br>  &nbsp;&nbsp;&nbsp;&nbsp; feature number = 1Wï¼Œ sample number = 1K</p>
<p>2). <strong>fn</strong> å°ï¼Œ sample number <strong>ä¸€èˆ¬</strong>1Wï¼Œä½¿ç”¨å¸¦æœ‰ <strong>kernelå‡½æ•°</strong> çš„ SVMç®—æ³•.  </p>
<p>3). <strong>fn</strong> å°ï¼Œ sample number <strong>å¾ˆå¤§</strong>5W+ï¼ˆn=1-1000ï¼Œm=50000+ï¼‰<br>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; å¢åŠ æ›´å¤šçš„ feature ç„¶åä½¿ç”¨LR ç®—æ³•æˆ–è€… not have kernel çš„ SVM</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.cnblogs.com/zhizhan/p/5038747.html" target="_blank" rel="external">LR ä¸ SVMçš„å¼‚åŒ</a></li>
<li><a href="http://izhaoyi.top/2017/06/02/Note-StatisticalML/" target="_blank" rel="external">æ‡’æ­»éª†é©¼ - ç»Ÿè®¡å­¦ä¹ æ–¹æ³•ç¬”è®°(ä¸€)</a></li>
<li><a href="https://www.zhihu.com/question/24900876" target="_blank" rel="external">çŸ¥ä¹ : æœ€å°äºŒä¹˜ã€æå¤§ä¼¼ç„¶ã€æ¢¯åº¦ä¸‹é™æœ‰ä½•åŒºåˆ«ï¼Ÿ</a></li>
<li><a href="https://www.zhihu.com/question/26768865/answer/139613835" target="_blank" rel="external">çŸ¥ä¹ : Linear SVM å’Œ LR æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ</a></li>
<li><a href="http://www.cnblogs.com/peizhe123/p/5674730.html" target="_blank" rel="external">ç™½å¼€æ°´åŠ ç³– SVMä¸LRçš„æ¯”è¾ƒ</a></li>
<li><a href="http://izhaoyi.top/2017/09/03/model-pre/" target="_blank" rel="external">æ‡’æ­»éª†é©¼ - å£è¿°æ¨¡å‹æ•´ç†</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/53944720" target="_blank" rel="external">æ”¯æŒå‘é‡æœº(SVM)ç¡¬æ ¸å…¥é—¨-åŸºç¡€ç¯‡</a></li>
<li><a href="https://www.cnblogs.com/pinard/p/6035872.html" target="_blank" rel="external">scikit-learn é€»è¾‘å›å½’ç±»åº“ä½¿ç”¨å°ç»“</a></li>
<li><a href="https://blog.csdn.net/Dinosoft/article/details/50492309" target="_blank" rel="external">LR æ­£è´Ÿæ ·æœ¬ä¸å‡è¡¡é—®é¢˜</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[L1ã€L2 Regularization]]></title>
      <url>http://shopee.ai/2019/06/09/ml/ERM-SRM-L1-L2/</url>
      <content type="html"><![CDATA[<p><img class="img-fancy" src="/images/ml/intro/L1l2regularization.png" width="550" border="0" alt="L1 L2 Regularization"></p>
<!--<a href="/2019/06/02/ml/Random_Forest_and_GBDT/" target="_self" style="display:block; margin:0 auto; background:url('/images/ml/ensumble/ensumble-1.png') no-repeat 0 0 / contain; height:304px; width:550px;"></a>
-->
<a id="more"></a>
<p>Supervised Learning:  â€œminimizeyour error while regularizing your parametersâ€</p>
<p>$$<br>w^*=argmin_w\sum_iL(y_i,f(x_i;w))+\lambda\Omega(w)<br>$$</p>
<blockquote>
<p>æˆ‘ä»¬ä¸ä»…è¦ä¿è¯è®­ç»ƒè¯¯å·®æœ€å°ï¼Œæˆ‘ä»¬æ›´å¸Œæœ›æˆ‘ä»¬çš„æ¨¡å‹æµ‹è¯•è¯¯å·®å°.</p>
<p>ç¬¬äºŒé¡¹ $\lambda\Omega(w)$ï¼Œä¹Ÿå°±æ˜¯å¯¹å‚æ•°$w$çš„è§„åˆ™åŒ–å‡½æ•° $Î©(w)$ å»çº¦æŸæˆ‘ä»¬çš„æ¨¡å‹å°½é‡çš„ç®€å•.</p>
<ol>
<li>ç¬¬ä¸€é¡¹å¯¹åº”æ¨¡å‹çš„è®­ç»ƒæŸå¤±å‡½æ•° (Square Lossã€Hinge lossã€Exp lossã€Log loss)</li>
<li>ç¬¬äºŒé¡¹å¯¹åº”æ¨¡å‹çš„æ­£åˆ™åŒ–é¡¹ ï¼ˆæ¨¡å‹å‚æ•°å‘é‡çš„èŒƒæ•°ï¼‰</li>
</ol>
<p>ç»éªŒé£é™©æœ€å°åŒ– empirical risk minimization, ç»“æ„é£é™©æœ€å°åŒ– structural risk minimization</p>
</blockquote>
<p>ææ²æ›¾ç»è¯´è¿‡ï¼š</p>
<blockquote>
<p>modelæ˜¯ç”¨ç¦»æ•£ç‰¹å¾è¿˜æ˜¯è¿ç»­ç‰¹å¾ï¼Œå…¶å®æ˜¯â€œ<strong>æµ·é‡ç¦»æ•£ç‰¹å¾+ç®€å•æ¨¡å‹</strong>â€ åŒ â€œ<strong>å°‘é‡è¿ç»­ç‰¹å¾+å¤æ‚æ¨¡å‹</strong>â€çš„æƒè¡¡ã€‚</p>
<p>æ—¢å¯ä»¥ç¦»æ•£åŒ–ç”¨çº¿æ€§æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥ç”¨è¿ç»­ç‰¹å¾åŠ æ·±åº¦å­¦ä¹ ã€‚å°±çœ‹æ˜¯å–œæ¬¢æŠ˜è…¾ <strong>feature</strong> è¿˜æ˜¯æŠ˜è…¾ <strong>model</strong> äº†ã€‚é€šå¸¸æ¥è¯´ï¼Œå‰è€…å®¹æ˜“ï¼Œè€Œä¸”å¯ä»¥nä¸ªäººä¸€èµ·å¹¶è¡Œåšï¼Œæœ‰æˆåŠŸç»éªŒï¼›åè€…ç›®å‰çœ‹å¾ˆèµï¼Œèƒ½èµ°å¤šè¿œè¿˜é¡»æ‹­ç›®ä»¥å¾…ã€‚ </p>
</blockquote>
<p>ç»“æ„é£é™©æœ€å°åŒ–: è§„åˆ™åŒ–é¡¹æ˜¯ç»“æ„é£é™©æœ€å°åŒ–ç­–ç•¥çš„å®ç°ï¼Œå³åœ¨ç»éªŒé£é™©ä¸ŠåŠ ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹æˆ–æƒ©ç½šé¡¹</p>
<blockquote>
<p><strong>æœ€å°åŒ–è¯¯å·®</strong>æ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„æ¨¡å‹æ‹Ÿåˆæˆ‘ä»¬çš„è®­ç»ƒæ•°æ®ï¼Œ<strong>regularized parameters</strong>æ˜¯é˜²æ­¢æˆ‘ä»¬çš„æ¨¡å‹<strong>è¿‡åˆ†æ‹Ÿåˆ</strong>æˆ‘ä»¬çš„<strong>è®­ç»ƒæ•°æ®</strong>ã€‚ å› ä¸ºå‚æ•°å¤ªå¤šï¼Œä¼šå¯¼è‡´æˆ‘ä»¬çš„æ¨¡å‹å¤æ‚åº¦ä¸Šå‡ï¼Œå®¹æ˜“è¿‡æ‹Ÿåˆï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„è®­ç»ƒè¯¯å·®ä¼šå¾ˆå°ã€‚ä½†è®­ç»ƒè¯¯å·®å°å¹¶ä¸æ˜¯æˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡ï¼Œæˆ‘ä»¬çš„<strong>ç›®æ ‡æ˜¯å¸Œæœ›æ¨¡å‹çš„æµ‹è¯•è¯¯å·®å°</strong>ï¼Œä¹Ÿå°±æ˜¯èƒ½å‡†ç¡®çš„é¢„æµ‹æ–°çš„æ ·æœ¬ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦<strong>ä¿è¯æ¨¡å‹â€œ<code>ç®€å•</code>â€çš„åŸºç¡€ä¸Šæœ€å°åŒ–è®­ç»ƒè¯¯å·®</strong>ï¼Œ<strong>è¿™æ ·å¾—åˆ°çš„å‚æ•°æ‰å…·æœ‰å¥½çš„æ³›åŒ–æ€§èƒ½ï¼ˆä¹Ÿå°±æ˜¯æµ‹è¯•è¯¯å·®ä¹Ÿå°ï¼‰</strong>.</p>
<p>è€Œæ¨¡å‹<strong>â€œç®€å•â€å°±æ˜¯é€šè¿‡è§„åˆ™å‡½æ•°æ¥å®ç°çš„</strong>ã€‚<strong>regularized item</strong>çš„ä½¿ç”¨è¿˜å¯ä»¥çº¦æŸæˆ‘ä»¬çš„æ¨¡å‹çš„ç‰¹æ€§ã€‚<strong>è¿™æ ·å°±å¯ä»¥å°†äººå¯¹è¿™ä¸ªæ¨¡å‹çš„å…ˆéªŒçŸ¥è¯†èå…¥åˆ°æ¨¡å‹çš„å­¦ä¹ å½“ä¸­</strong>ï¼Œå¼ºè¡Œåœ°è®©å­¦ä¹ åˆ°çš„æ¨¡å‹å…·æœ‰äººæƒ³è¦çš„ç‰¹æ€§ï¼Œä¾‹å¦‚ ç¨€ç–ã€ä½ç§©ã€å¹³æ»‘ ç­‰ç­‰ã€‚</p>
<p>äººçš„å…ˆéªŒæ˜¯éå¸¸é‡è¦çš„ã€‚å‰äººçš„ç»éªŒä¼šè®©ä½ å°‘èµ°å¾ˆå¤šå¼¯è·¯ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¹³æ—¶å­¦ä¹ æœ€å¥½æ‰¾ä¸ªå¤§ç‰›å¸¦å¸¦çš„åŸå› ã€‚ä¸€å¥ç‚¹æ‹¨å¯ä»¥ä¸ºæˆ‘ä»¬æ‹¨å¼€çœ¼å‰ä¹Œäº‘ï¼Œè¿˜æˆ‘ä»¬ä¸€ç‰‡æ™´ç©ºä¸‡é‡Œï¼Œé†é†çŒé¡¶ã€‚å¯¹æœºå™¨å­¦ä¹ ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœè¢«æˆ‘ä»¬äººç¨å¾®ç‚¹æ‹¨ä¸€ä¸‹ï¼Œå®ƒè‚¯å®šèƒ½æ›´å¿«çš„å­¦ä¹ ç›¸åº”çš„ä»»åŠ¡ã€‚åªæ˜¯ç”±äºäººå’Œæœºå™¨çš„äº¤æµç›®å‰è¿˜æ²¡æœ‰é‚£ä¹ˆç›´æ¥çš„æ–¹æ³•ï¼Œç›®å‰åªèƒ½ç”±è§„åˆ™é¡¹æ¥æ‹…å½“äº†.</p>
</blockquote>
<h2 id="1-Supervised-Learning-Obj"><a href="#1-Supervised-Learning-Obj" class="headerlink" title="1. Supervised Learning Obj"></a>1. Supervised Learning Obj</h2><p><strong>ç¬¬ä¸€é¡¹å¯¹åº”æ¨¡å‹çš„è®­ç»ƒæŸå¤±å‡½æ•°:</strong></p>
<blockquote>
<ul>
<li>Square Loss â€“&gt; æœ€å°äºŒä¹˜</li>
<li>Hinge Loss â€“&gt; SVM</li>
<li>Exp Loss â€“&gt; AdaBoost</li>
<li>Log Loss â€“&gt; LR</li>
</ul>
</blockquote>
<p><strong>ç¬¬äºŒé¡¹å¯¹åº”æ¨¡å‹çš„æ­£åˆ™åŒ–é¡¹:</strong> (ä¸€èˆ¬æ˜¯æ¨¡å‹å¤æ‚åº¦çš„å•è°ƒé€’å¢å‡½æ•°)</p>
<blockquote>
<ul>
<li>æ¨¡å‹å‚æ•°å‘é‡çš„èŒƒæ•°ï¼Œä¸åŒçš„é€‰æ‹©å¯¹å‚æ•°çš„çº¦æŸä¸åŒï¼Œå–å¾—çš„æ•ˆæœä¹Ÿä¸åŒ</li>
</ul>
<p>è®ºæ–‡ä¸­å¸¸éƒ½èšé›†åœ¨ï¼šé›¶èŒƒæ•°ã€ä¸€èŒƒæ•°ã€äºŒèŒƒæ•°ã€æ ¸èŒƒæ•°ç­‰ç­‰ã€‚è¿™ä¹ˆå¤šèŒƒæ•°ï¼Œåˆ°åº•å®ƒä»¬è¡¨è¾¾å•¥æ„æ€ï¼Ÿå…·æœ‰å•¥èƒ½åŠ›ï¼Ÿ</p>
</blockquote>
<h2 id="2-Norm"><a href="#2-Norm" class="headerlink" title="2. Norm"></a>2. Norm</h2><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ç§°ä¸ºèŒƒæ•°(norm)çš„å‡½æ•°æ¥è¡¡é‡å‘é‡å¤§å°. </p>
<p>$L^p$  èŒƒæ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p>$$<br>|x|_{p}=\left(\sum_{i}\left|x_{i}\right|^{p}\right)^{\frac{1}{p}}<br>$$</p>
<ul>
<li><p>$L^0$ èŒƒæ•°ï¼š$|x|_{0}$ ä¸º $x$ å‘é‡å„ä¸ªéé›¶å…ƒç´ çš„ä¸ªæ•°ã€‚</p>
</li>
<li><p>$L^1$ èŒƒæ•°ï¼š$|x|_{1}$ ä¸º $x$ å‘é‡å„ä¸ªå…ƒç´ ç»å¯¹å€¼ä¹‹å’Œï¼Œä¹Ÿå«â€œç¨€ç–è§„åˆ™ç®—å­â€ï¼ˆLasso Regularizationï¼‰ã€‚</p>
</li>
<li><p>$L^2$ èŒƒæ•°ï¼š$|x|_{2}$ ä¸º $x$ å‘é‡å„ä¸ªå…ƒç´ å¹³æ–¹å’Œçš„ $1/2$ æ¬¡æ–¹ï¼Œ$L^2$ èŒƒæ•°åˆç§° Euclideanã€ Frobenius èŒƒæ•°ã€‚</p>
</li>
</ul>
<h2 id="3-L1-Regularization"><a href="#3-L1-Regularization" class="headerlink" title="3. L1 Regularization"></a>3. L1 Regularization</h2><p>L1 å¯ä»¥å®ç°ç¨€ç–ï¼Œä¸ºä»€ä¹ˆè¦ç¨€ç–ï¼Ÿ</p>
<p>$$<br>|\boldsymbol{x}|_{1}=\sum_{i}\left|x_{i}\right|<br>$$</p>
<p>è®©æˆ‘ä»¬çš„å‚æ•°ç¨€ç–æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿè¿™é‡Œæ‰¯ä¸¤ç‚¹ï¼š</p>
<p><strong>ç‰¹å¾é€‰æ‹©(Feature Selection)ï¼š</strong></p>
<blockquote>
<p>å¤§å®¶å¯¹<strong>ç¨€ç–è§„åˆ™åŒ–</strong>è¶‹ä¹‹è‹¥é¹œçš„ä¸€ä¸ªå…³é”®åŸå› åœ¨äºå®ƒèƒ½å®ç°ç‰¹å¾çš„è‡ªåŠ¨é€‰æ‹©ã€‚$x_i$ çš„å¤§éƒ¨åˆ†å…ƒç´ ï¼ˆä¹Ÿå°±æ˜¯ç‰¹å¾ï¼‰éƒ½æ˜¯å’Œæœ€ç»ˆçš„è¾“å‡º $y_i$ æ²¡æœ‰å…³ç³»æˆ–è€…ä¸æä¾›ä»»ä½•ä¿¡æ¯çš„ï¼Œåœ¨æœ€å°åŒ–ç›®æ ‡å‡½æ•°çš„æ—¶å€™è€ƒè™‘$x_i$è¿™äº›é¢å¤–çš„ç‰¹å¾ï¼Œè™½ç„¶å¯ä»¥è·å¾—æ›´å°çš„è®­ç»ƒè¯¯å·®ï¼Œ<strong>ä½†åœ¨é¢„æµ‹æ–°çš„æ ·æœ¬æ—¶ï¼Œè¿™äº›æ²¡ç”¨çš„ä¿¡æ¯åè€Œä¼šè¢«è€ƒè™‘ï¼Œä»è€Œå¹²æ‰°äº†å¯¹æ­£ç¡®$y_i$çš„é¢„æµ‹</strong>ã€‚ç¨€ç–è§„åˆ™åŒ–ç®—å­çš„å¼•å…¥å°±æ˜¯ä¸ºäº†å®Œæˆç‰¹å¾è‡ªåŠ¨é€‰æ‹©çš„å…‰è£ä½¿å‘½ï¼Œå®ƒä¼šå­¦ä¹ åœ°å»æ‰è¿™äº›æ²¡æœ‰ä¿¡æ¯çš„ç‰¹å¾ï¼Œä¹Ÿå°±æ˜¯æŠŠè¿™äº›ç‰¹å¾å¯¹åº”çš„æƒé‡ç½®ä¸º0ã€‚</p>
</blockquote>
<p><strong>å¯è§£é‡Šæ€§(Interpretability)ï¼š</strong></p>
<blockquote>
<p>æ¨¡å‹æ›´å®¹æ˜“è§£é‡Šã€‚ä¾‹å¦‚æ‚£æŸç§ç—…çš„æ¦‚ç‡æ˜¯$y$ï¼Œæˆ‘ä»¬æ”¶é›†åˆ°çš„æ•°æ®$x$æ˜¯ 1000 ç»´çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦å¯»æ‰¾è¿™ 1000ç§ å› ç´ åˆ°åº•æ˜¯æ€ä¹ˆå½±å“æ‚£ä¸Šè¿™ç§ç—…çš„æ¦‚ç‡çš„ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬è¿™ä¸ªæ˜¯ä¸ªå›å½’æ¨¡å‹ï¼š$y=w_1 x_1 + w_2 x_2 + w_{1000} x_{1000} + b$ï¼ˆå½“ç„¶äº†ï¼Œä¸ºäº†è®© $y$ é™å®šåœ¨[0,1]çš„èŒƒå›´ï¼Œä¸€èˆ¬è¿˜å¾—åŠ ä¸ªLogisticå‡½æ•°ï¼‰ã€‚</p>
<p>é€šè¿‡å­¦ä¹ ï¼Œå¦‚æœæœ€åå­¦ä¹ åˆ°çš„ $w*$ å°±åªæœ‰å¾ˆå°‘çš„éé›¶å…ƒç´ ï¼Œä¾‹å¦‚åªæœ‰5ä¸ªéé›¶çš„ $w_i$ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æœ‰ç†ç”±ç›¸ä¿¡ï¼Œè¿™äº›å¯¹åº”çš„ç‰¹å¾åœ¨æ‚£ç—…åˆ†æä¸Šé¢æä¾›çš„ä¿¡æ¯æ˜¯å·¨å¤§çš„ï¼Œå†³ç­–æ€§çš„ã€‚</p>
<p>æ‚£ä¸æ‚£è¿™ç§ç—…åªå’Œè¿™5ä¸ªå› ç´ æœ‰å…³ï¼Œé‚£åŒ»ç”Ÿå°±å¥½åˆ†æå¤šäº†ã€‚ä½†å¦‚æœ1000ä¸ª $w_i$ éƒ½é0ï¼ŒåŒ»ç”Ÿé¢å¯¹è¿™1000ç§å› ç´ ï¼Œç´¯è§‰ä¸çˆ±.</p>
</blockquote>
<h2 id="4-L2-Regularization"><a href="#4-L2-Regularization" class="headerlink" title="4. L2 Regularization"></a>4. L2 Regularization</h2><h3 id="4-1-L2-èƒ½é˜²æ­¢è¿‡æ‹Ÿåˆï¼Ÿ"><a href="#4-1-L2-èƒ½é˜²æ­¢è¿‡æ‹Ÿåˆï¼Ÿ" class="headerlink" title="4.1 L2 èƒ½é˜²æ­¢è¿‡æ‹Ÿåˆï¼Ÿ"></a>4.1 L2 èƒ½é˜²æ­¢è¿‡æ‹Ÿåˆï¼Ÿ</h3><p>é€šè¿‡ L2èŒƒæ•° çš„è§„åˆ™é¡¹æœ€å°æ¥ä½¿å‚æ•°å€¼éƒ½è¾ƒå°ã€ç”šè‡³è¶‹äº0(ä½†ä¸ä¼šä¸º0)ï¼Œæ¨¡å‹å‚æ•°å€¼è¶Šå°åˆ™å¯¹åº”çš„ç‰¹å¾å¯¹äºæ¨¡å‹çš„å½±å“å°±æ¯”è¾ƒå°ï¼Œè¿™æ ·ç›¸å½“äºå¯¹è¿™éƒ¨åˆ†æ— å…³ç‰¹å¾åšäº†ä¸€ä¸ªæƒ©ç½šï¼Œå³ä½¿ä»–ä»¬çš„å€¼æ³¢åŠ¨æ¯”è¾ƒå¤§ï¼Œå—é™äºå‚æ•°å€¼å¾ˆå°ï¼Œä¹Ÿä¸ä¼šå¯¹æ¨¡å‹çš„è¾“å‡ºç»“æœé€ æˆå¤ªå¤§å½±å“ï¼Œä¹Ÿå°±ä½¿å¾—æ¨¡å‹ä¸ä¼šä¹ å¾—è¿™éƒ¨åˆ†ç‰¹å¾è€Œå‘ç”Ÿè¿‡æ‹Ÿåˆ</p>
<h3 id="4-2-L2-èŒƒæ•°çš„å¥½å¤„"><a href="#4-2-L2-èŒƒæ•°çš„å¥½å¤„" class="headerlink" title="4.2 L2 èŒƒæ•°çš„å¥½å¤„"></a>4.2 L2 èŒƒæ•°çš„å¥½å¤„</h3><ul>
<li>å­¦ä¹ ç†è®ºçš„è§’åº¦ï¼šå¯ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›</li>
<li>ä¼˜åŒ–ã€æ•°å€¼è®¡ç®—çš„è§’åº¦ï¼šL2èŒƒæ•°èƒ½å¤Ÿè®©æˆ‘ä»¬çš„ä¼˜åŒ–æ±‚è§£å˜å¾—ç¨³å®šå’Œå¿«é€Ÿ.</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://izhaoyi.top/2017/09/15/l1-l2/" target="_blank" rel="external">æ‡’æ­»éª†é©¼</a></li>
<li><a href="https://blog.csdn.net/zouxy09/article/details/24971995" target="_blank" rel="external">æœºå™¨å­¦ä¹ ä¸­çš„èŒƒæ•°è§„åˆ™åŒ–ä¹‹ï¼ˆä¸€ï¼‰L0ã€L1ä¸L2èŒƒæ•°</a></li>
<li><a href="https://plushunter.github.io/2017/07/22/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E7%B3%BB%E5%88%97%EF%BC%8828%EF%BC%89%EF%BC%9AL1%E3%80%81L2%E6%AD%A3%E5%88%99%E5%8C%96/" target="_blank" rel="external">æœºå™¨å­¦ä¹ ç®—æ³•ç³»åˆ—ï¼ˆ28ï¼‰ï¼šL1ã€L2æ­£åˆ™åŒ–</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/ML-intro/3-09-l1l2regularization/" target="_blank" rel="external">L1 / L2 æ­£è§„åŒ–</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/5-02-A-overfitting/" target="_blank" rel="external">ä»€ä¹ˆæ˜¯è¿‡æ‹Ÿåˆ (Overfitting)</a></li>
<li><a href="http://www.iterate.site/post/01-æ•°å­—çš„å¼ åŠ›/02-æœºå™¨å­¦ä¹ /01-æœºå™¨å­¦ä¹ ç†è®º/01-æ•°å­¦åŸºç¡€/02-çº¿æ€§ä»£æ•°/25-èŒƒæ•°/" target="_blank" rel="external">è¿­ä»£è‡ªå·±: èŒƒæ•°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Probabilistic Graphical Model]]></title>
      <url>http://shopee.ai/2019/06/08/ml/Probabilistic_Graphical_Model/</url>
      <content type="html"><![CDATA[<p><img class="img-fancy" src="/images/ml/pgm/pgm-01.png" width="550" border="0" alt="Probabilistic Graphical Model"></p>
<!--<a href="/2019/06/02/ml/Random_Forest_and_GBDT/" target="_self" style="display:block; margin:0 auto; background:url('/images/ml/ensumble/ensumble-1.png') no-repeat 0 0 / contain; height:304px; width:550px;"></a>
-->
<a id="more"></a>
<p>å¯¹äºä¸€ä¸ªå®é™…é—®é¢˜ï¼Œç›®æ ‡ï¼š èƒ½å¤ŸæŒ–æ˜éšå«åœ¨æ•°æ®ä¸­çš„çŸ¥è¯†ã€‚ æ€æ ·æ‰èƒ½ä½¿ç”¨æ¦‚ç‡å›¾æ¨¡å‹æŒ–æ˜è¿™äº›éšè—çŸ¥è¯†å‘¢ï¼Ÿ</p>
<blockquote>
<p><strong>ç”¨è§‚æµ‹ç»“ç‚¹è¡¨ç¤ºè§‚æµ‹åˆ°çš„æ•°æ®ï¼Œç”¨éšå«ç»“ç‚¹è¡¨ç¤ºæ½œåœ¨çš„çŸ¥è¯†ï¼Œç”¨è¾¹æ¥æè¿°çŸ¥è¯†ä¸æ•°æ®çš„ç›¸äº’å…³ç³»</strong>ï¼Œè·ä¸€æ¦‚ç‡åˆ†å¸ƒã€‚</p>
</blockquote>
<h2 id="1-Probabilistic-Graphical-Model"><a href="#1-Probabilistic-Graphical-Model" class="headerlink" title="1. Probabilistic Graphical Model"></a>1. Probabilistic Graphical Model</h2><p>æ¦‚ç‡å›¾ä¸­çš„<strong><code>èŠ‚ç‚¹</code></strong>åˆ†ä¸ºï¼š </p>
<ol>
<li>éšå«èŠ‚ç‚¹</li>
<li>è§‚æµ‹èŠ‚ç‚¹</li>
</ol>
<p>æ¦‚ç‡å›¾ä¸­çš„<strong><code>è¾¹</code></strong> åˆ†ä¸ºï¼š </p>
<ol>
<li>æœ‰å‘è¾¹</li>
<li>æ— å‘è¾¹</li>
</ol>
<blockquote>
<p>å¸¸è§çš„æ¦‚ç‡å›¾æ¨¡å‹ ï¼š Native Bayesã€æœ€å¤§ç†µã€éšé©¬å°”ç§‘å¤«æ¨¡å‹ã€CRFã€LDA ç­‰.</p>
</blockquote>
<p><strong>PGM è”åˆæ¦‚ç‡:</strong></p>
<p>æ¦‚ç‡å›¾æ¨¡å‹æœ€ä¸ºâ€œç²¾å½©â€çš„éƒ¨åˆ†å°±æ˜¯èƒ½å¤Ÿç”¨ç®€æ´æ¸…æ™°çš„å›¾ç¤ºå½¢å¼è¡¨è¾¾æ¦‚ç‡ç”Ÿæˆçš„å…³ç³»:</p>
<p><img src="/images/ml/pgm/pgm-02.png" width="500"></p>
<p>åœ¨ç»™å®šAçš„æ¡ä»¶ä¸‹Bå’ŒCæ˜¯æ¡ä»¶ç‹¬ç«‹çš„ï¼ŒåŸºäºæ¡ä»¶æ¦‚ç‡çš„å®šä¹‰å¯å¾—ï¼š</p>
<p>$$\begin{aligned} P(C | A, B) &amp;=\frac{P(B, C | A)}{P(B A)}=\frac{P(B | A) P(C | A)}{P(B | A)} \\ &amp;=P(C | A) \end{aligned}<br>$$</p>
<p>åŒç†ï¼Œåœ¨ç»™å®šBå’ŒCçš„æ¡ä»¶ä¸‹Aå’ŒDæ˜¯æ¡ä»¶ç‹¬ç«‹çš„ï¼Œå¯å¾—ï¼š</p>
<p>$$<br>\begin{aligned} P(D | A, B, C) &amp;= \frac{P(A, D | B, C)}{P(A | B, C)}=\frac{P(A | B, C) P(D | B, C)}{P(A | B, C)} \\ &amp;= P(D | B, C) \end{aligned}<br>$$</p>
<p>ç»“åˆä¸Šé¢çš„ä¸¤ä¸ªè¡¨è¾¾å¼å¯å¾—è”åˆæ¦‚ç‡ï¼š</p>
<p>$$<br>\begin{aligned}<br>P(A,B,C,D)&amp;=P(A)P(B|A)P(C|A,B)P(D|A,B,C) \\<br>&amp;= P(A)P(B|A)P(C|A)P(D|B,C)<br>\end{aligned}\tag{6.3}<br>$$</p>
<h2 id="2-PGM-Expression"><a href="#2-PGM-Expression" class="headerlink" title="2. PGM Expression"></a>2. PGM Expression</h2><p><strong>è§£é‡Šæœ´ç´ è´å¶æ–¯æ¨¡å‹çš„åŸç†ï¼Œå¹¶ç»™å‡ºæ¦‚ç‡å›¾æ¨¡å‹è¡¨ç¤º:</strong></p>
<p>é€šè¿‡é¢„æµ‹æŒ‡å®šæ ·æœ¬å±äºç‰¹å®šç±»åˆ«çš„æ¦‚ç‡ </p>
<p>$$<br>y=\max _{y_{i}} P\left(y_{i} | x\right)<br>$$</p>
<p>å¯ä»¥å†™æˆï¼š</p>
<p>$$<br>P\left(y_{i} | x\right)=\frac{P\left(x | y_{i}\right) P\left(y_{i}\right)}{P(x)}<br>$$</p>
<p>å…¶ä¸­ $x=\left(x_{1}, x_{2}, \ldots \ldots, x_{n}\right)$, ä¸ºæ ·æœ¬å¯¹åº”çš„ç‰¹å¾å‘é‡ï¼Œ $P(x)$ ä¸ºæ ·æœ¬çš„å…ˆéªŒæ¦‚ç‡ã€‚</p>
<p><img src="/images/ml/pgm/pgm-03.png" width="120"></p>
<h2 id="3-Generative-vs-Discriminative"><a href="#3-Generative-vs-Discriminative" class="headerlink" title="3. Generative vs Discriminative"></a>3. Generative vs Discriminative</h2><h3 id="3-1-Generative"><a href="#3-1-Generative" class="headerlink" title="3.1 Generative"></a>3.1 Generative</h3><p>generative approach ç”±æ•°æ®å­¦ä¹ åˆ°è”åˆæ¦‚ç‡åˆ†å¸ƒ $P(X,Y)$ï¼Œç„¶åæ±‚å‡ºæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ $P(Y\mid X)$ ä½œä¸ºé¢„æµ‹çš„æ¨¡å‹ï¼š</p>
<p>$$<br>P(Y\mid X)=\frac{P(X,Y)}{P(X)}<br>$$ </p>
<blockquote>
<p>å…¸å‹çš„ç”Ÿæˆå¼æ¨¡å‹åŒ…æ‹¬ï¼š Native Bayesã€HMMã€Bayes Net</p>
</blockquote>
<h3 id="3-2-Discriminative"><a href="#3-2-Discriminative" class="headerlink" title="3.2 Discriminative"></a>3.2 Discriminative</h3><p>discriminative approach ç”±æ•°æ®ç›´æ¥å­¦åˆ°å†³ç­–å‡½æ•° $f(X)$ æˆ–æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ $P(Y\mid X)$ ä½œä¸ºé¢„æµ‹çš„æ¨¡å‹ï¼š</p>
<p>$$<br>f(X), P(Y\mid X)<br>$$</p>
<p>åˆ¤åˆ«å¼æ¨¡å‹å…³å¿ƒçš„æ˜¯å¯¹äºç»™å®šçš„è¾“å…¥ $X$, åº”è¯¥é¢„æµ‹ä»€ä¹ˆæ ·çš„è¾“å‡º $Y$, åˆ¤åˆ«æ¨¡å‹å°±æ˜¯åˆ¤åˆ«æ•°æ®è¾“å‡ºé‡çš„æ¨¡å‹ã€‚</p>
<blockquote>
<p>å…¸å‹çš„åˆ¤åˆ«å¼æ¨¡å‹åŒ…æ‹¬ï¼š LRã€NNã€SVMã€CRFã€CART</p>
</blockquote>
<h3 id="3-3-generative-vs-discriminative"><a href="#3-3-generative-vs-discriminative" class="headerlink" title="3.3 generative vs discriminative"></a>3.3 generative vs discriminative</h3><table>
<thead>
<tr>
<th style="text-align:center">vs</th>
<th style="text-align:center">generative approach</th>
<th style="text-align:center">discriminative approach</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å®šä¹‰</td>
<td style="text-align:center">ç”±æ•°æ®å­¦ä¹ è”åˆæ¦‚ç‡åˆ†å¸ƒ$P(X,Y)$ ç„¶å,<br>æ±‚å‡ºåœ¨$X$æƒ…å†µä¸‹ï¼Œ$P(Y)$ä½œä¸ºé¢„æµ‹çš„æ¨¡å‹</td>
<td style="text-align:center">å†³ç­–å‡½æ•°$f(x)$æˆ–æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ$P(X)$ä½œä¸ºé¢„æµ‹æ¨¡å‹</td>
</tr>
<tr>
<td style="text-align:center">ç‰¹ç‚¹</td>
<td style="text-align:center">1. å¯è¿˜åŸå‡º$P(X,Y)$ï¼›<br> 2. å­¦ä¹ æ”¶æ•›é€Ÿåº¦æ›´å¿«ï¼›<br> 3. å­˜åœ¨éšå˜é‡æ—¶ä»å¯ç”¨</td>
<td style="text-align:center">1. ç›´æ¥é¢å¯¹é¢„æµ‹ï¼Œå‡†ç¡®ç‡æ›´é«˜äº›; <br> 2. ä¾¿äºæ•°æ®æŠ½è±¡ï¼Œç‰¹å¾å®šä¹‰ä½¿ç”¨;</td>
</tr>
<tr>
<td style="text-align:center">æ¨¡å‹</td>
<td style="text-align:center">native bayesã€hidden markov</td>
<td style="text-align:center">Logistic Regressionã€SVMã€Gradient Boostingã€CRF.. </td>
</tr>
<tr>
<td style="text-align:center">Note</td>
<td style="text-align:center">ç»™å®šè¾“å…¥ $X$ äº§ç”Ÿè¾“å‡º $Y$ çš„ç”Ÿæˆå…³ç³»</td>
<td style="text-align:center">å¯¹ç»™å®šçš„è¾“å…¥ $X$ï¼Œåº”é¢„æµ‹ä»€ä¹ˆæ ·çš„è¾“å‡º $Y$</td>
</tr>
</tbody>
</table>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://xiaosheng.me/2017/04/09/article50/" target="_blank" rel="external">äº§ç”Ÿå¼æ¨¡å‹ä¸åˆ¤åˆ«å¼æ¨¡å‹</a></li>
<li><a href="http://www.iterate.site/2019/04/05/12-æ¦‚ç‡å›¾è¡¨ç¤º/" target="_blank" rel="external">è¿­ä»£è‡ªå·± æ¦‚ç‡å›¾è¡¨ç¤º</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Information Entropy]]></title>
      <url>http://shopee.ai/2019/06/07/ml/Entropy/</url>
      <content type="html"><![CDATA[<p><img class="img-fancy" src="/images/ml/info/entropy-1.png" width="700" border="0" alt="Claude Shannon"></p>
<!--<a href="/2019/06/02/ml/Random_Forest_and_GBDT/" target="_self" style="display:block; margin:0 auto; background:url('/images/ml/ensumble/ensumble-1.png') no-repeat 0 0 / contain; height:304px; width:550px;"></a>
-->
<a id="more"></a>
<h2 id="1-Infomation-Entropy"><a href="#1-Infomation-Entropy" class="headerlink" title="1. Infomation Entropy"></a>1. Infomation Entropy</h2><p>2014 å¹´ä¸¾è¡Œäº†ä¸–ç•Œæ¯è¶³çƒèµ›ï¼Œå¤§å®¶éƒ½å¾ˆå…³å¿ƒè°ä¼šæ˜¯å† å†›ã€‚å‡å¦‚æˆ‘é”™è¿‡äº†çœ‹ä¸–ç•Œæ¯ï¼Œèµ›åæˆ‘é—®ä¸€ä¸ªçŸ¥é“æ¯”èµ›ç»“æœçš„è§‚ä¼—â€œå“ªåªçƒé˜Ÿæ˜¯å† å†›â€ï¼Ÿä»–ä¸æ„¿æ„ç›´æ¥å‘Šè¯‰æˆ‘ï¼Œè€Œè®©æˆ‘çŒœï¼Œå¹¶ä¸”æˆ‘æ¯çŒœä¸€æ¬¡ï¼Œä»–è¦æ”¶æˆ‘ä¸€å…ƒé’±æ‰è‚¯å‘Šè¯‰æˆ‘æ˜¯å¦çŒœå¯¹äº†ï¼Œé‚£ä¹ˆæˆ‘è¦æå¤šå°‘é’±æ‰èƒ½çŸ¥é“è°æ˜¯å† å†›å‘¢ï¼Ÿæˆ‘å¯ä»¥æŠŠçƒé˜Ÿç¼–ä¸Šå·ï¼Œä» 1 åˆ° 32ï¼Œç„¶åæé—®ï¼šâ€œå† å†›åœ¨ 1~16 å·ä¸­å—ï¼Ÿâ€å‡å¦‚ä»–å‘Šè¯‰æˆ‘çŒœå¯¹äº†ï¼Œæˆ‘ä¼šæ¥ç€æé—®ï¼šâ€œå† å†›åœ¨ 1~8 å·ä¸­å—ï¼Ÿâ€å‡å¦‚ä»–å‘Šè¯‰æˆ‘çŒœé”™äº†ï¼Œæˆ‘è‡ªç„¶çŸ¥é“å† å†›åœ¨ 9~16 å·ä¸­ã€‚è¿™æ ·æˆ‘åªéœ€è¦ 5 æ¬¡ï¼Œå°±èƒ½çŸ¥é“å“ªåªçƒé˜Ÿæ˜¯å† å†›ã€‚æ‰€ä»¥ï¼Œè°æ˜¯ä¸–ç•Œæ¯å† å†›è¿™æ¡æ¶ˆæ¯çš„ä¿¡æ¯é‡åªå€¼ 5 å—é’±ã€‚</p>
<p>$$<br>H=-(p_1\cdot\log p_1+p_2\cdot\log p_2+\cdots+p_{32}\cdot\log p_{32})<br>$$</p>
<blockquote>
<p>å…¶ä¸­ $p_1,p_2,\cdots,p_{32}$ åˆ†åˆ«æ˜¯è¿™ 32 æ”¯çƒé˜Ÿå¤ºå† çš„æ¦‚ç‡ã€‚é¦™å†œæŠŠå®ƒç§°ä¸ºä¿¡æ¯ç†µ(Entropy)ï¼Œä¸€èˆ¬ç”¨ç¬¦å· $H$ è¡¨ç¤ºï¼Œå•ä½æ¯”ç‰¹ã€‚å¾ˆå®¹æ˜“è®¡ç®—å‡ºï¼Œå½“ 32 æ”¯çƒé˜Ÿå¤ºå† æ¦‚ç‡ç›¸åŒæ—¶ï¼Œå¯¹åº”çš„ä¿¡æ¯ç†µç­‰äº 5 æ¯”ç‰¹ã€‚</p>
</blockquote>
<h3 id="1-1-ä¿¡æ¯ç†µçš„å®šä¹‰"><a href="#1-1-ä¿¡æ¯ç†µçš„å®šä¹‰" class="headerlink" title="1.1 ä¿¡æ¯ç†µçš„å®šä¹‰"></a>1.1 ä¿¡æ¯ç†µçš„å®šä¹‰</h3><p>å¯¹äºä»»æ„ä¸€ä¸ªç¦»æ•£å‹éšæœºå˜é‡ $X$ï¼Œå®ƒçš„ç†µ $H(X)$ å®šä¹‰ä¸º:</p>
<p>$$<br>H(X)=-\sum_{x\in X}p(x)\log p(x)<br>$$</p>
<p>å…¶ä¸­ï¼Œçº¦å®š $0\log0=0$ã€‚$H(X)$ å¯ä»¥å†™ä¸º $H(p)$ã€‚</p>
<blockquote>
<p>å˜é‡çš„ä¸ç¡®å®šæ€§è¶Šå¤§ï¼Œç†µä¹Ÿå°±è¶Šå¤§ï¼Œè¦æŠŠå®ƒææ¸…æ¥šï¼Œæ‰€éœ€ä¿¡æ¯é‡ä¹Ÿå°±è¶Šå¤§ã€‚</p>
<p>ä¿¡æ¯ç†µçš„ç‰©ç†å«ä¹‰æ˜¯å¯¹ä¸€ä¸ªä¿¡æ¯ç³»ç»Ÿä¸ç¡®å®šæ€§çš„åº¦é‡ï¼Œå’Œçƒ­åŠ›å­¦ä¸­ç†µæœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œåè€…å°±æ˜¯ä¸€ä¸ªç³»ç»Ÿæ— åºçš„åº¦é‡ã€‚</p>
<p>ä»å¦ä¸€è§’åº¦è®²ä¹Ÿæ˜¯å¯¹ä¸€ç§ <strong>ä¸ç¡®å®šæ€§çš„åº¦é‡</strong>ã€‚</p>
</blockquote>
<h3 id="1-2-ä¿¡æ¯ç†µçš„ä¾‹å­"><a href="#1-2-ä¿¡æ¯ç†µçš„ä¾‹å­" class="headerlink" title="1.2 ä¿¡æ¯ç†µçš„ä¾‹å­"></a>1.2 ä¿¡æ¯ç†µçš„ä¾‹å­</h3><p>è®¾ä¸€æ¬¡éšæœºäº‹ä»¶ï¼ˆç”¨éšæœºå˜é‡$X$è¡¨ç¤ºï¼‰å®ƒå¯èƒ½ä¼šæœ‰ $x_1ï¼Œx_2ï¼Œâ‹¯ï¼Œx_m$ å…± m ä¸ªä¸åŒçš„ç»“æœï¼Œæ¯ä¸ªç»“æœå‡ºç°çš„æ¦‚ç‡åˆ†åˆ«ä¸º $p_1ï¼Œp_2ï¼Œâ‹¯ï¼Œp_m$ï¼Œé‚£ä¹ˆ $X$ çš„ä¸ç¡®å®šåº¦ï¼Œå³ä¿¡æ¯Entropyä¸ºï¼š</p>
<p>$$<br>H(X) =\sum_{i=1}^{m} p_i \cdot \log_{2} \frac{1}{p_i} = - \sum_{i=1}^{m} p_i \cdot \log_{2} p_i<br>$$</p>
<p>å°†ä¸€ä¸ªç«‹æ–¹ä½“AæŠ›å‘ç©ºä¸­ï¼Œè®°è½åœ°æ—¶ç€åœ°çš„é¢ä¸º $c$, $c$ çš„å–å€¼ä¸º{1,2,3,4,5,6} </p>
<blockquote>
<p>$$<br>info(c) = - (1/6 \cdot log_{2}(1/6)+â€¦+1/6 \cdot log_{2}(1/6)) = -1 \cdot log(1/6) = 2.58ï¼›<br>$$</p>
</blockquote>
<p>å››é¢ä½“æŠ›å…¥ç©ºä¸­ :</p>
<blockquote>
<p>$$<br>info(c) = - (1/4 \cdot log_{2}(1/4)+â€¦+1/4 \cdot log_{2}(1/4)) = -1 \cdot log(1/4) = 2ï¼›<br>$$</p>
</blockquote>
<p>çƒä½“æŠ›å…¥ç©ºä¸­ :</p>
<blockquote>
<p>$$<br>info(c) = -1 \cdot log(1) = 0ï¼›<br>$$<br>æ­¤æ—¶è¡¨ç¤ºä¸ç¡®å®šç¨‹åº¦ä¸º0ï¼Œä¹Ÿå°±æ˜¯ç€åœ°æ—¶å‘ä¸‹çš„é¢æ˜¯ç¡®å®šçš„ã€‚</p>
</blockquote>
<h3 id="1-3-æœ€å¤§ç†µ"><a href="#1-3-æœ€å¤§ç†µ" class="headerlink" title="1.3 æœ€å¤§ç†µ"></a>1.3 æœ€å¤§ç†µ</h3><p>â€œæœ€å¤§ç†µâ€è¿™ä¸ªåè¯å¬èµ·æ¥å¾ˆæ·±å¥¥ï¼Œä½†æ˜¯å®ƒçš„åŸç†å¾ˆç®€å•ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨ç”¨ã€‚è¯´ç™½äº†ï¼Œå°±æ˜¯è¦ä¿ç•™å…¨éƒ¨çš„ä¸ç¡®å®šæ€§ï¼Œå°†é£é™©é™åˆ°æœ€å°ã€‚</p>
<p>$$<br>\hat{p}=\arg\max_{p\in C}H(p)<br>$$</p>
<p>æœ€å¤§ç†µåŸç†æŒ‡å‡ºï¼Œå¯¹ä¸€ä¸ªéšæœºäº‹ä»¶çš„æ¦‚ç‡åˆ†å¸ƒè¿›è¡Œé¢„æµ‹æ—¶ï¼Œæˆ‘ä»¬çš„é¢„æµ‹åº”å½“æ»¡è¶³å…¨éƒ¨å·²çŸ¥çš„æ¡ä»¶ï¼Œè€Œå¯¹æœªçŸ¥çš„æƒ…å†µä¸è¦åšä»»ä½•ä¸»è§‚å‡è®¾ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¦‚ç‡åˆ†å¸ƒæœ€å‡åŒ€ï¼Œé¢„æµ‹çš„é£é™©æœ€å°ã€‚å› ä¸ºè¿™æ—¶æ¦‚ç‡åˆ†å¸ƒçš„ä¿¡æ¯ç†µæœ€å¤§ï¼Œæ‰€ä»¥äººä»¬æŠŠè¿™ç§æ¨¡å‹ç§°ä½œâ€œæœ€å¤§ç†µæ¨¡å‹â€ã€‚æˆ‘ä»¬å¸¸è¯´çš„ï¼Œä¸è¦æŠŠæ‰€æœ‰çš„é¸¡è›‹æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œï¼Œå…¶å®å°±æ˜¯æœ€å¤§ç†µåŸç†çš„ä¸€ä¸ªæœ´ç´ çš„è¯´æ³•ï¼Œå› ä¸ºå½“æˆ‘ä»¬é‡åˆ°ä¸ç¡®å®šæ—¶ï¼Œå°±è¦ä¿ç•™å„ç§å¯èƒ½æ€§ã€‚</p>
<h2 id="2-Conditional-Entropy"><a href="#2-Conditional-Entropy" class="headerlink" title="2. Conditional Entropy"></a>2. Conditional Entropy</h2><p>è‡ªå¤ä»¥æ¥ï¼Œä¿¡æ¯å’Œæ¶ˆé™¤ä¸ç¡®å®šæ€§æ˜¯ç›¸è”ç³»çš„ã€‚åœ¨è‹±è¯­é‡Œï¼Œä¿¡æ¯å’Œæƒ…æŠ¥æ˜¯åŒä¸€ä¸ªè¯ï¼ˆInfomationï¼‰ï¼Œè€Œæˆ‘ä»¬çŸ¥é“æƒ…æŠ¥çš„ä½œç”¨å°±æ˜¯æ’é™¤ä¸ç¡®å®šæ€§ã€‚ (äºŒæˆ˜æ—¶æœŸï¼Œæ–¯å¤§æ—æ— å…µå¯æ´¾åˆ°æ¬§æ´²æˆ˜åœºï¼Œä½†åœ¨è¿œä¸œæœ‰60ä¸‡å¤§å†›ï¼Œæƒ…æŠ¥å¾—çŸ¥ Japan ä¸ä¼šåŒ—ä¸Š)</p>
<p>ä¸€ä¸ªäº‹ç‰©å†…éƒ¨ä¼šå­˜æœ‰éšæœºæ€§ï¼Œä¹Ÿå°±æ˜¯ä¸ç¡®å®šæ€§ï¼Œå‡å®šä¸º $U$, è€Œä»å¤–éƒ¨æ¶ˆé™¤è¿™ä¸ªä¸ç¡®å®šæ€§çš„å”¯ä¸€çš„æ–¹æ³•æ˜¯å¼•å…¥ä¿¡æ¯ $I$ï¼Œ è€Œå¼•å…¥çš„ä¿¡æ¯é‡å–å†³äºè¿™ä¸ªä¸ç¡®å®šæ€§çš„å¤§å°, å½“ $I &lt; U$ æ—¶ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥æ¶ˆé™¤ä¸€éƒ¨åˆ†ä¸ç¡®å®šæ€§.</p>
<p><strong>æ–°çš„ä¸ç¡®å®šæ€§ï¼š</strong></p>
<p>$$<br>Uâ€™=U-I<br>$$</p>
<blockquote>
<p>å‡ ä¹æ‰€æœ‰çš„è‡ªç„¶è¯­è¨€å¤„ç†ã€ä¿¡æ¯ä¸ä¿¡å·å¤„ç†çš„åº”ç”¨éƒ½æ˜¯ä¸€ä¸ªæ¶ˆé™¤ä¸ç¡®å®šæ€§çš„è¿‡ç¨‹ã€‚</p>
<p>è‡ªç„¶è¯­è¨€çš„ç»Ÿè®¡æ¨¡å‹ï¼Œå…¶ä¸­çš„ä¸€å…ƒæ¨¡å‹å°±æ˜¯é€šè¿‡æŸä¸ªè¯æœ¬èº«çš„æ¦‚ç‡åˆ†å¸ƒï¼Œæ¥æ¶ˆé™¤ä¸ç¡®å®šæ€§ï¼›äºŒå…ƒåŠæ›´é«˜é˜¶çš„è¯­è¨€æ¨¡å‹åˆ™è¿˜ä½¿ç”¨äº†ä¸Šä¸‹æ–‡çš„ä¿¡æ¯ï¼Œé‚£å°±èƒ½å‡†ç¡®é¢„æµ‹ä¸€ä¸ªå¥å­ä¸­å½“å‰çš„è¯æ±‡äº†ã€‚åœ¨æ•°å­¦ä¸Šå¯ä»¥ä¸¥æ ¼åœ°è¯æ˜ä¸ºä»€ä¹ˆè¿™äº›â€œç›¸å…³çš„â€ä¿¡æ¯ä¹Ÿèƒ½å¤Ÿæ¶ˆé™¤ä¸ç¡®å®šæ€§ã€‚ä¸ºæ­¤ï¼Œéœ€è¦å¼•å…¥æ¡ä»¶ç†µ(Conditional Entropy)çš„æ¦‚å¿µã€‚</p>
</blockquote>
<h3 id="2-1-æ¡ä»¶ç†µçš„å®šä¹‰"><a href="#2-1-æ¡ä»¶ç†µçš„å®šä¹‰" class="headerlink" title="2.1 æ¡ä»¶ç†µçš„å®šä¹‰"></a>2.1 æ¡ä»¶ç†µçš„å®šä¹‰</h3><p>å‡å®š $X$ å’Œ $Y$ æ˜¯ä¸¤ä¸ªéšæœºå˜é‡ï¼Œ$X$ æ˜¯æˆ‘ä»¬éœ€è¦äº†è§£çš„ã€‚å‡å®šæˆ‘ä»¬ç°åœ¨çŸ¥é“äº† $X$ çš„éšæœºåˆ†å¸ƒ<br>$P(X)$ï¼Œé‚£ä¹ˆä¹Ÿå°±çŸ¥é“äº† $X$ çš„ç†µï¼š</p>
<p>$$<br>H(X)=-\sum_{x\in X}P(x)\cdot\log P(x)<br>$$</p>
<p>é‚£ä¹ˆå®ƒçš„ä¸ç¡®å®šæ€§å°±æ˜¯è¿™ä¹ˆå¤§ã€‚ç°åœ¨å‡å®šæˆ‘ä»¬è¿˜çŸ¥é“ $Y$ çš„ä¸€äº›æƒ…å†µï¼ŒåŒ…æ‹¬å®ƒå’Œ $X$ ä¸€èµ·å‡ºç°çš„æ¦‚ç‡ï¼Œåœ¨æ•°å­¦ä¸Šç§°ä¸ºè”åˆæ¦‚ç‡åˆ†å¸ƒ(Joint Probability)ï¼Œä»¥åŠåœ¨ $Y$ å–ä¸åŒå€¼çš„å‰æä¸‹ $X$ çš„æ¦‚ç‡åˆ†å¸ƒï¼Œåœ¨æ•°å­¦ä¸Šç§°ä¸ºæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ(Conditional Probability)ã€‚å®šä¹‰åœ¨ $Y$ æ¡ä»¶ä¸‹ $X$ çš„æ¡ä»¶ç†µä¸ºï¼š</p>
<p>$$<br>\begin{align}H(X \mid Y) &amp;=  \sum_{y\in Y}P(y)H(X \mid Y=y) \\&amp;=\sum_{y\in Y}P(y)\big[-\sum_{x\in X}P(x\mid y)\log P(x\mid y)\big]\\&amp;=-\sum_{x\in X,y \in Y}P(x,y)\log P(x\mid y)\end{align}<br>$$</p>
<p>å¯ä»¥è¯æ˜ $H(X)\ge H(X\mid Y)$ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¤šäº† $Y$ çš„ä¿¡æ¯ä¹‹åï¼Œå…³äº $X$ çš„ä¸ç¡®å®šæ€§ä¸‹é™äº†ï¼åœ¨ç»Ÿè®¡è¯­è¨€æ¨¡å‹ä¸­ï¼Œå¦‚æœæŠŠ $Y$ çœ‹æˆæ˜¯å‰ä¸€ä¸ªå­—ï¼Œé‚£ä¹ˆåœ¨æ•°å­¦ä¸Šå°±è¯æ˜äº†äºŒå…ƒæ¨¡å‹çš„ä¸ç¡®å®šæ€§å°äºä¸€å…ƒæ¨¡å‹ã€‚åŒç†ï¼Œå¯ä»¥å®šä¹‰æœ‰ä¸¤ä¸ªæ¡ä»¶çš„æ¡ä»¶ç†µï¼š</p>
<p>$$<br>H(X\mid Y,Z)=-\sum_{x\in X,y\in Y,z\in Z}P(x,y,z)\log P(x\mid y,z)<br>$$</p>
<p>è¿˜å¯ä»¥è¯æ˜ $H(X\mid Y)\ge H(X\mid Y,Z)$ã€‚ä¹Ÿå°±è¯´ï¼Œä¸‰å…ƒæ¨¡å‹åº”è¯¥æ¯”äºŒå…ƒçš„å¥½ã€‚</p>
<h3 id="2-2-ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜"><a href="#2-2-ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜" class="headerlink" title="2.2 ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜"></a>2.2 ä¸€ä¸ªæœ‰æ„æ€çš„é—®é¢˜</h3><p>æ€è€ƒä¸€ä¸‹ï¼Œä¸Šè¿°å¼å­ä¸­çš„ç­‰å·ä»€ä¹ˆæ—¶å€™æˆç«‹ï¼Ÿç­‰å·æˆç«‹è¯´æ˜å¢åŠ äº†ä¿¡æ¯ï¼Œä¸ç¡®å®šæ€§å´æ²¡æœ‰é™ä½ï¼Œè¿™å¯èƒ½å—ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå¦‚æœæˆ‘ä»¬è·å–çš„ä¿¡æ¯ä¸è¦ç ”ç©¶çš„äº‹ç‰©æ¯«æ— å…³ç³»ï¼Œç­‰å·å°±æˆç«‹ã€‚é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­äº‹ç‰©ä¹‹é—´æ˜¯å¦å­˜åœ¨å…³ç³»ï¼Œæˆ–è€…è¯´æˆ‘ä»¬åº”è¯¥å¦‚ä½•å»åº¦é‡ä¸¤ä¸ªäº‹ç‰©ä¹‹é—´çš„å…³è”æ€§å‘¢ï¼Ÿè¿™è‡ªç„¶è€Œç„¶å°±å¼•å‡ºäº†äº’ä¿¡æ¯(Mutual Infomation)çš„æ¦‚å¿µã€‚</p>
<h2 id="3-Mutual-Infomation"><a href="#3-Mutual-Infomation" class="headerlink" title="3. Mutual Infomation"></a>3. Mutual Infomation</h2><p>è·å–çš„ä¿¡æ¯å’Œè¦ç ”ç©¶çš„äº‹ç‰©â€œæœ‰å…³ç³»â€æ—¶ï¼Œè¿™äº›ä¿¡æ¯æ‰èƒ½å¸®åŠ©æˆ‘ä»¬æ¶ˆé™¤ä¸ç¡®å®šæ€§ã€‚å½“ç„¶â€œæœ‰å…³ç³»â€è¿™ç§è¯´æ³•å¤ªæ¨¡ç³Šï¼Œå¤ªä¸ç§‘å­¦ï¼Œæœ€å¥½èƒ½å¤Ÿé‡åŒ–åœ°åº¦é‡â€œç›¸å…³æ€§â€ã€‚ä¸ºæ­¤ï¼Œé¦™å†œåœ¨ä¿¡æ¯è®ºä¸­æå‡ºäº†ä¸€ä¸ªäº’ä¿¡æ¯(Mutual Infomation)çš„æ¦‚å¿µä½œä¸ºä¸¤ä¸ªéšæœºäº‹ä»¶â€œç›¸å…³æ€§â€çš„é‡åŒ–åº¦é‡ã€‚</p>
<p>å‡å®šæœ‰ä¸¤ä¸ªéšæœºäº‹ä»¶ $X$ å’Œ $Y$ï¼Œå®ƒä»¬ä¹‹é—´çš„äº’ä¿¡æ¯å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p>$$<br>I(X;Y)=\sum_{x\in X,y\in Y}P(x,y)\log\frac{P(x,y)}{P(x)P(y)}<br>$$</p>
<p>å¯ä»¥è¯æ˜ï¼Œäº’ä¿¡æ¯ $I(X;Y)$ å°±æ˜¯éšæœºäº‹ä»¶ $X$ çš„ä¸ç¡®å®šæ€§ï¼ˆç†µ $H(X)$ ä¸åœ¨çŸ¥é“éšæœºäº‹ä»¶ $Y$<br> æ¡ä»¶ä¸‹ $X$ çš„ä¸ç¡®å®šæ€§ï¼ˆæ¡ä»¶ç†µ $H(Xâˆ£Y)$ï¼‰ä¹‹é—´çš„å·®å¼‚ï¼Œå³ï¼š</p>
<p>$$<br>I(X;Y)=H(X)-H(X\mid Y)<br>$$</p>
<p>æ‰€è°“ä¸¤ä¸ªäº‹ä»¶ç›¸å…³æ€§çš„é‡åŒ–åº¦é‡ï¼Œå°±æ˜¯åœ¨äº†è§£äº†å…¶ä¸­ä¸€ä¸ª $Y$ çš„å‰æä¸‹ï¼Œå¯¹æ¶ˆé™¤å¦ä¸€ä¸ª $X$ ä¸ç¡®å®šæ€§æ‰€æä¾›çš„ä¿¡æ¯é‡ã€‚äº’ä¿¡æ¯æ˜¯ä¸€ä¸ªå–å€¼åœ¨ 0 åˆ° $min(H(X),H(Y))$ ä¹‹é—´çš„å‡½æ•°ï¼Œå½“ $X$ å’Œ $Y$ å®Œå…¨ç›¸å…³æ—¶ï¼Œå®ƒçš„å–å€¼æ˜¯ 1ï¼›å½“äºŒè€…å®Œå…¨æ— å…³æ—¶ï¼Œå®ƒçš„å–å€¼æ˜¯ 0ã€‚</p>
<h2 id="4-Relative-Entropy"><a href="#4-Relative-Entropy" class="headerlink" title="4. Relative Entropy"></a>4. Relative Entropy</h2><p>ç›¸å¯¹ç†µä¹Ÿç”¨æ¥è¡¡é‡ç›¸å…³æ€§ï¼Œä½†å’Œå˜é‡çš„äº’ä¿¡æ¯ä¸åŒï¼Œå®ƒç”¨æ¥è¡¡é‡ä¸¤ä¸ªå–å€¼ä¸ºæ­£æ•°çš„å‡½æ•°çš„ç›¸ä¼¼æ€§ã€‚å®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p>$$<br>KL(f(x) || g(x))=\sum_{x\in X}f(x)\cdot\log \frac{f(x)}{g(x)}<br>$$</p>
<p>å¤§å®¶ä¸å¿…å…³å¿ƒå…¬å¼æœ¬èº«ï¼Œåªéœ€è®°ä½ä¸‹é¢ä¸‰æ¡ç»“è®ºå°±å¥½ï¼š</p>
<blockquote>
<p>(1). å¯¹äºä¸¤ä¸ªå®Œå…¨ç›¸åŒçš„å‡½æ•°ï¼Œå®ƒä»¬çš„ç›¸å¯¹ç†µç­‰äºé›¶ã€‚</p>
<p>(2). ç›¸å¯¹ç†µè¶Šå¤§ï¼Œä¸¤ä¸ªå‡½æ•°å·®å¼‚è¶Šå¤§ï¼›åä¹‹ï¼Œç›¸å¯¹ç†µè¶Šå°ï¼Œä¸¤ä¸ªå‡½æ•°å·®å¼‚è¶Šå°ã€‚</p>
<p>(3). å¯¹äºæ¦‚ç‡åˆ†å¸ƒæˆ–è€…æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œå¦‚æœå–å€¼å‡å¤§äºé›¶ï¼Œç›¸å¯¹ç†µå¯ä»¥åº¦é‡ä¸¤ä¸ªéšæœºåˆ†å¸ƒçš„å·®å¼‚æ€§ã€‚</p>
<p>ç¬¬ (3) æ¡ï¼š <strong>å¯ä»¥å¯¹æ ‡ï¼ŒCrossEntropy çš„æ„ä¹‰</strong>.</p>
</blockquote>
<p>æ³¨æ„ï¼Œç›¸å¯¹ç†µæ˜¯ä¸å¯¹ç§°çš„ï¼Œå³ï¼š</p>
<p>$$<br>KL(f(x)||g(x))\ne KL(g(x)||f(x))<br>$$</p>
<p>ä¸ºäº†è®©å®ƒå¯¹ç§°ï¼Œè©¹æ£®å’Œé¦™å†œæå‡ºä¸€ç§æ–°çš„ç›¸å¯¹ç†µçš„è®¡ç®—æ–¹æ³•</p>
<p>$$<br>JS(f(x)||g(x))=\frac{1}{2}\big[KL(f(x)||g(x))+KL(g(x)||f(x))\big]<br>$$</p>
<blockquote>
<p>ç›¸å¯¹ç†µæœ€æ—©ç”¨åœ¨ä¿¡å·å¤„ç†ä¸Šã€‚å¦‚ä¸¤ä¸ªéšæœºä¿¡å·ï¼Œå®ƒä»¬ç›¸å¯¹ç†µè¶Šå°ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªä¿¡å·è¶Šæ¥è¿‘ï¼Œå¦åˆ™ä¿¡å·çš„å·®å¼‚è¶Šå¤§ã€‚</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li>å´å†›ã€Šæ•°å­¦ä¹‹ç¾ã€‹</li>
<li>å®—æˆåº†ã€Šç»Ÿè®¡è‡ªç„¶è¯­è¨€å¤„ç†ã€‹</li>
<li><a href="https://xiaosheng.me/2017/03/09/article39/" target="_blank" rel="external">ä¿¡æ¯çš„åº¦é‡å’Œä½œç”¨</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Evaluation Metric]]></title>
      <url>http://shopee.ai/2019/06/03/ml/Evaluation_Metric/</url>
      <content type="html"><![CDATA[<p><img class="img-fancy" src="/images/ml/metric/metric-1.gif" width="580" border="0" alt="æœºå™¨å­¦ä¹ æ€§èƒ½è¯„ä¼°æŒ‡æ ‡"></p>
<!--<a href="/2019/06/02/ml/Random_Forest_and_GBDT/" target="_self" style="display:block; margin:0 auto; background:url('/images/ml/ensumble/ensumble-1.png') no-repeat 0 0 / contain; height:304px; width:550px;"></a>
-->
<a id="more"></a>
<hr>
<p>é€‰æ‹©ä¸é—®é¢˜ç›¸åŒ¹é…çš„è¯„ä¼°æ–¹æ³•ï¼Œæ‰èƒ½å¿«é€Ÿå‘ç°åœ¨ <strong>æ¨¡å‹é€‰æ‹©å’Œè®­ç»ƒè¿‡ç¨‹</strong> ä¸­å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œè¿­ä»£åœ°å¯¹æ¨¡å‹è¿›è¡Œä¼˜åŒ–. é’ˆå¯¹ <strong><code>åˆ†ç±»ã€æ’åºã€å›å½’ã€åºåˆ—é¢„æµ‹</code></strong> ç­‰ä¸åŒç±»å‹çš„æœºå™¨å­¦ä¹ é—®é¢˜ï¼Œè¯„ä¼°æŒ‡æ ‡çš„é€‰æ‹©ä¹Ÿæœ‰æ‰€ä¸åŒ:</p>
<p>æœ¬æ–‡å°†è°ˆè°ˆæœºå™¨å­¦ä¹ ä¸­ï¼Œå¸¸ç”¨çš„æ€§èƒ½è¯„ä¼°æŒ‡æ ‡ï¼š</p>
<p><img class="img-fancy" src="/images/ml/metric/metric-2.jpg" width="600" border="0" alt=""></p>
<p>å…³äºæ¨¡å‹è¯„ä¼°çš„åŸºç¡€æ¦‚å¿µ:</p>
<blockquote>
<p>ã€è¯¯å·®(error)ã€‘ï¼šå­¦ä¹ å™¨çš„é¢„æµ‹è¾“å‡ºä¸æ ·æœ¬çš„çœŸå®è¾“å‡ºä¹‹é—´çš„å·®å¼‚ã€‚æ ¹æ®äº§ç”Ÿè¯¯å·®çš„æ•°æ®é›†ï¼Œå¯åˆ†ä¸ºï¼š</p>
<ul>
<li><strong>Training error</strong>ï¼šåˆç§°ä¸ºç»éªŒè¯¯å·®(empirical error)ï¼Œå­¦ä¹ å™¨åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®ã€‚</li>
<li><strong>Test error</strong>ï¼šå­¦ä¹ å™¨åœ¨æµ‹è¯•é›†ä¸Šçš„è¯¯å·®ã€‚</li>
<li><strong>Generalization error</strong>ï¼šå­¦ä¹ å™¨åœ¨æœªçŸ¥æ–°æ ·æœ¬ä¸Šçš„è¯¯å·®ã€‚</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿°æ‰€è¯´çš„â€œè¯¯å·®â€å‡æŒ‡è¯¯å·®æœŸæœ›ï¼Œæ’é™¤æ•°æ®é›†å¤§å°çš„å½±å“ã€‚</p>
<p>åº”è¯¥ä»è®­ç»ƒæ ·æœ¬ä¸­å°½å¯èƒ½å­¦å‡ºé€‚ç”¨äºæ‰€æœ‰ <strong>æ½œåœ¨æ ·æœ¬çš„â€œæ™®éè§„å¾‹â€</strong>ï¼Œè¿™æ ·æ‰èƒ½åœ¨é‡åˆ°æ–°æ ·æœ¬æ—¶åšå‡ºæ­£ç¡®çš„åˆ¤åˆ«ã€‚å› ä¸ºï¼Œæ³›åŒ–è¯¯å·®æ— æ³•æµ‹é‡ï¼Œå› æ­¤ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šå°† <strong>Test error è¿‘ä¼¼ç­‰åŒäº Generalization error</strong>ã€‚</p>
</blockquote>
<h2 id="1-Classification-Metric"><a href="#1-Classification-Metric" class="headerlink" title="1. Classification Metric"></a>1. Classification Metric</h2><h3 id="1-1-Accuracy"><a href="#1-1-Accuracy" class="headerlink" title="1.1 Accuracy"></a>1.1 Accuracy</h3><p>å‡†ç¡®ç‡ï¼šæŒ‡çš„æ˜¯åˆ†ç±»æ­£ç¡®çš„æ ·æœ¬æ•°é‡å æ ·æœ¬æ€»æ•°çš„æ¯”ä¾‹ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<p>$$<br>Accuracy = \frac{n_{correct}}{n_{total}}, Error = \frac{n_{error}}{n_{total}}<br>$$</p>
<p>æ­£åæ¯”ä¾‹ä¸¥é‡å¤±è¡¡ï¼Œåˆ™æ²¡æ„ä¹‰ï¼Œå­˜åœ¨ accuracy paradox ç°è±¡.</p>
<p><img src="/images/ml/metric/metric-3.jpg" width="800" alt=""></p>
<blockquote>
<p>accuracy å‡†ç¡®ç‡ = (TP+TN)/(TP+TN+FP+FN), <strong>å‡†ç¡®ç‡å¯ä»¥åˆ¤æ–­æ€»çš„æ­£ç¡®ç‡</strong></p>
</blockquote>
<h3 id="1-2-Precision"><a href="#1-2-Precision" class="headerlink" title="1.2 Precision"></a>1.2 Precision</h3><p>precision æŸ¥å‡†ç‡ (80% = ä½ ä¸€å…±é¢„æµ‹äº†100ä¸ªæ­£ä¾‹ï¼Œ80ä¸ªæ˜¯å¯¹çš„æ­£ä¾‹)</p>
<p><img src="/images/ml/metric/metric-4.jpg" width="800" alt=""></p>
<blockquote>
<p>Precision = TP/(TP+FP)</p>
</blockquote>
<h3 id="1-3-Recall"><a href="#1-3-Recall" class="headerlink" title="1.3 Recall"></a>1.3 Recall</h3><p>recall (æ ·æœ¬ä¸­çš„æ­£ä¾‹æœ‰å¤šå°‘è¢«é¢„æµ‹æ­£ç¡® TPR = TP/(TP+FN))</p>
<p><img src="/images/ml/metric/metric-5.jpg" width="800" alt=""></p>
<h3 id="1-4-F1-score"><a href="#1-4-F1-score" class="headerlink" title="1.4 F1-score"></a>1.4 F1-score</h3><p><img src="/images/ml/metric/metric-16.jpg" width="280" alt=""></p>
<p><strong>multi-class classification</strong></p>
<p>å¦‚æœéè¦ç”¨ä¸€ä¸ªç»¼åˆè€ƒé‡çš„ metric çš„è¯ï¼Œ</p>
<blockquote>
<ol>
<li>macro-averageï¼ˆå®å¹³å‡ï¼‰- åˆ†å¸ƒè®¡ç®—æ¯ä¸ªç±»åˆ«çš„F1ï¼Œç„¶ååšå¹³å‡ï¼ˆå„ç±»åˆ«F1çš„æƒé‡ç›¸åŒï¼‰</li>
<li>micro-averageï¼ˆå¾®å¹³å‡ï¼‰- é€šè¿‡å…ˆè®¡ç®—æ€»ä½“çš„TPï¼ŒFNå’ŒFPçš„æ•°é‡ï¼Œå†è®¡ç®—F1</li>
</ol>
<p>macro-averageï¼ˆå®å¹³å‡ï¼‰ ä¼šæ¯” micro-averageï¼ˆå¾®å¹³å‡ï¼‰å¥½ä¸€äº›å“¦ï¼Œå› ä¸º macro ä¼šå— minority class å½±å“æ›´å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´æ›´èƒ½ä½“ç°åœ¨ small class ä¸Šçš„ performance.</p>
<p><a href="https://www.cnblogs.com/techengin/p/8962024.html" target="_blank" rel="external">sklearnä¸­ F1-micro ä¸ F1-macro åŒºåˆ«å’Œè®¡ç®—åŸç†</a></p>
</blockquote>
<p>precision &amp; recall</p>
<blockquote>
<p>precision æ˜¯ç›¸å¯¹ä½ è‡ªå·±çš„æ¨¡å‹é¢„æµ‹è€Œè¨€<br>recall æ˜¯ç›¸å¯¹çœŸå®çš„ç­”æ¡ˆè€Œè¨€</p>
</blockquote>
<h3 id="1-5-P-R-curve"><a href="#1-5-P-R-curve" class="headerlink" title="1.5 P-R curve"></a>1.5 P-R curve</h3><p>P-Ræ›²çº¿çš„æ¨ªè½´æ˜¯å¬å›ç‡ï¼Œçºµè½´æ˜¯ç²¾ç¡®ç‡ã€‚å¯¹äºä¸€ä¸ªæ’åºæ¨¡å‹æ¥è¯´ï¼Œå…¶P-Ræ›²çº¿ä¸Šçš„ä¸€ä¸ªç‚¹ä»£è¡¨ç€ï¼Œåœ¨æŸä¸€é˜ˆå€¼ä¸‹ï¼Œæ¨¡å‹å°†å¤§äºè¯¥é˜ˆå€¼çš„ç»“æœåˆ¤å®šä¸ºæ­£æ ·æœ¬ï¼Œ å°äºè¯¥é˜ˆå€¼çš„ç»“æœåˆ¤å®šä¸ºè´Ÿæ ·æœ¬ï¼Œæ­¤æ—¶è¿”å›ç»“æœå¯¹åº”çš„å¬å›ç‡å’Œç²¾ç¡®ç‡ã€‚</p>
<p><img src="/images/ml/metric/metric-15.jpg" width="400" alt=""></p>
<blockquote>
<p>æ•´æ¡ P-R æ›²çº¿æ˜¯é€šè¿‡å°†é˜ˆå€¼ä»é«˜åˆ°ä½ç§»åŠ¨è€Œç”Ÿæˆçš„ã€‚ å®çº¿ï¼šA modelï¼Œ è™šçº¿ï¼šB model</p>
<p>ä¸Šé¢è¯´çš„é˜ˆå€¼ä»é«˜åˆ°ä½åŸå› ï¼šé˜ˆå€¼é«˜ï¼Œç²¾ç¡®ç‡é«˜ï¼Œé˜ˆå€¼ä½ï¼Œå¬å›ç‡é«˜</p>
</blockquote>
<h3 id="1-6-ROC"><a href="#1-6-ROC" class="headerlink" title="1.6 ROC"></a>1.6 ROC</h3><p>Q1: ä»€ä¹ˆæ˜¯ROCæ›²çº¿ï¼Ÿ</p>
<p>ROC curve ï¼ˆTPR çºµè½´ï¼ŒFPR æ¨ªè½´ï¼ŒTPï¼ˆçœŸæ­£ç‡ï¼‰å’Œ FPï¼ˆå‡æ­£ç‡ï¼‰ï¼Œè®¾ä¸€ä¸ªé˜ˆå€¼ï¼‰</p>
<blockquote>
<p>ROCï¼ˆReceiver Operating Characteristic Curveï¼‰æ›²çº¿ã€‚ ROC æ›²çº¿ æ˜¯åŸºäºæ··æ·†çŸ©é˜µå¾—å‡ºçš„ã€‚ </p>
<p>TPR = recall = çµæ•åº¦ = Pï¼ˆX=1 | Y=1ï¼‰ï¼Œ FPR = ç‰¹å¼‚åº¦ = Pï¼ˆX=0 | Y=0ï¼‰</p>
</blockquote>
<p><img src="/images/ml/metric/metric-6.jpg" width="800" alt=""></p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> ROC æ›²çº¿æ˜¯ FPR è¶Šå°ï¼ŒTPR è¶Šå¤§ æœ€å¥½. (ä¹Ÿå°±æ˜¯æ›²çº¿ x è½´è¶Šå°ï¼Œyè½´è¶Šå¤§ æœ€å¥½)</p>
<p>ROCæ›²çº¿çš„é€‚ç”¨åœºæ™¯æ›´å¤šï¼Œè¢«å¹¿æ³›ç”¨äºæ’åºã€æ¨èã€å¹¿å‘Šç­‰é¢†åŸŸ</p>
</blockquote>
<p><strong>Q2: å¦‚ä½•ç»˜åˆ¶ROCæ›²çº¿ï¼Ÿ</strong></p>
<p>ä¸å‰é¢çš„P-Ræ›²çº¿ç±»ä¼¼ï¼Œ ROCæ›²çº¿æ˜¯é€šè¿‡ä¸æ–­ç§»åŠ¨åˆ†ç±»å™¨çš„â€œæˆªæ–­ç‚¹â€æ¥ç”Ÿæˆæ›²çº¿ä¸Šçš„ä¸€ç»„å…³é”®ç‚¹çš„, æˆªæ–­ç‚¹æŒ‡çš„æ˜¯åŒºåˆ†æ­£è´Ÿé¢„æµ‹ç»“æœçš„é˜ˆå€¼:</p>
<p><img src="/images/ml/metric/metric-7.png" width="550" alt=""></p>
<blockquote>
<p>(1). è¿˜æœ‰ä¸€ç§æ›´ç›´è§‚åœ°ç»˜åˆ¶ROCçš„æ–¹æ³•ã€‚æ ¹æ®æ ·æœ¬æ ‡ç­¾ç»Ÿè®¡æ­£è´Ÿæ ·æœ¬æ•°é‡ï¼Œå‡è®¾æ­£æ ·æœ¬æ•°é‡ Pï¼Œè´Ÿæ ·æœ¬æ•°é‡ N.</p>
<p>(2). æ¥ä¸‹æ¥æŠŠæ¨ªè½´åˆ»åº¦é—´éš”è®¾ç½®ä¸º 1 / N, çºµè½´çš„åˆ»åº¦é—´éš”è®¾ç½®ä¸º 1 / Pã€‚</p>
<p>(3). å†æ ¹æ®æ¨¡å‹è¾“å‡ºçš„é¢„æµ‹æ¦‚ç‡å¯¹æ ·æœ¬è¿›è¡Œæ’åºï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼›ä¾æ¬¡éå†æ ·æœ¬ï¼ŒåŒæ—¶ä»é›¶ç‚¹å¼€å§‹ç»˜åˆ¶ROCæ›²çº¿ï¼Œæ¯é‡åˆ°ä¸€ä¸ªæ­£æ ·æœ¬å°±æ²¿ç€çºµè½´æ–¹å‘ç»˜åˆ¶ä¸€ä¸ªåˆ»åº¦é—´éš”çš„æ›²çº¿ï¼Œæ¯é‡åˆ°ä¸€ä¸ªè´Ÿæ ·æœ¬å°±æ²¿æ¨ªè½´æ–¹å‘ç»˜åˆ¶ä¸€ä¸ªåˆ»åº¦é—´éš”çš„æ›²çº¿ï¼Œç›´åˆ°éå†å®Œæ‰€æœ‰æ ·æœ¬ï¼Œæ›²çº¿æœ€ç»ˆåœåœ¨ï¼ˆ1ï¼Œ1ï¼‰æ•´ä¸ªROCæ›²çº¿ç»˜åˆ¶å®Œæˆã€‚è¿™æ ·å°±å¾ˆå¥½ç†è§£ä¸ºä»€ä¹ˆé¢ç§¯è¶Šå¤§ï¼Œåˆ†ç±»æ€§èƒ½è¶Šå¥½äº†ï¼Œæƒ³è±¡è¿™ä¸ªè¿‡ç¨‹å³å¯ã€‚</p>
</blockquote>
<p><strong>ROCæ›²çº¿æ— è§†æ ·æœ¬ä¸å¹³è¡¡</strong></p>
<blockquote>
<ul>
<li><a href="https://www.zhihu.com/question/30643044" target="_blank" rel="external">ç²¾ç¡®ç‡ã€å¬å›ç‡ã€F1 å€¼ã€ROCã€AUC å„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/34655990" target="_blank" rel="external">æœºå™¨å­¦ä¹ ä¹‹ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜ (2) â€”â€” ROCå’ŒPRæ›²çº¿</a></li>
</ul>
</blockquote>
<h3 id="1-7-AUC"><a href="#1-7-AUC" class="headerlink" title="1.7 AUC"></a>1.7 AUC</h3><p>AUC = 0.5ï¼Œè·ŸéšæœºçŒœæµ‹ä¸€æ ·ï¼Œ ROC çºµè½´ TPR è¶Šå¤§ï¼Œ æ¨ªè½´ FPR è¶Šå° æ¨¡å‹è¶Šå¥½</p>
<blockquote>
<p>0.5 - 0.7ï¼šæ•ˆæœè¾ƒä½ï¼Œä½†ç”¨äºé¢„æµ‹è‚¡ç¥¨å·²ç»å¾ˆä¸é”™äº†<br>0.7 - 0.85ï¼šæ•ˆæœä¸€èˆ¬<br>0.85 - 0.95ï¼šæ•ˆæœå¾ˆå¥½</p>
<p>real world data ç»å¸¸ä¼šé¢ä¸´ class imbalance é—®é¢˜ï¼Œå³æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹å¤±è¡¡ã€‚</p>
<p>æ ¹æ®è®¡ç®—å…¬å¼å¯ä»¥æ¨çŸ¥ï¼Œåœ¨ testing set å‡ºç° <strong><code>imbalance æ—¶ ROCæ›²çº¿ èƒ½ä¿æŒä¸å˜</code></strong>ï¼Œè€Œ PR åˆ™ä¼šå‡ºç°å¤§å˜åŒ–ã€‚</p>
</blockquote>
<h2 id="2-Regression-Metric"><a href="#2-Regression-Metric" class="headerlink" title="2 Regression Metric"></a>2 Regression Metric</h2><h3 id="2-1-MSE"><a href="#2-1-MSE" class="headerlink" title="2.1 MSE"></a>2.1 MSE</h3><p>MSE ï¼ˆMean Squared Errorï¼‰ç§°ä¸ºå‡æ–¹è¯¯å·®ï¼Œï¼Œåˆè¢«ç§°ä¸º L2èŒƒæ•°æŸå¤±:</p>
<p>$$<br>MSE=\frac{1}{n}\sum_{i=1}^n{(f_i - y_i)^2}<br>$$</p>
<h3 id="2-2-RMSE"><a href="#2-2-RMSE" class="headerlink" title="2.2 RMSE"></a>2.2 RMSE</h3><p>å‡æ–¹æ ¹è¯¯å·®(Root Mean Squared Error, RMSE)ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<p>$$<br>RMSE=\sqrt{MSE}<br>$$</p>
<h3 id="2-3-MAE"><a href="#2-3-MAE" class="headerlink" title="2.3 MAE"></a>2.3 MAE</h3><p>$$<br>MAE = \frac{1}{n}\sum_{i=1}^n|f_i-y_i|<br>$$</p>
<blockquote>
<p>ç¼ºç‚¹ï¼šå› ä¸ºå®ƒä½¿ç”¨çš„æ˜¯å¹³å‡è¯¯å·®ï¼Œè€Œå¹³å‡è¯¯å·®å¯¹å¼‚å¸¸ç‚¹è¾ƒæ•æ„Ÿï¼Œå¦‚æœå›å½’å™¨å¯¹æŸä¸ªç‚¹çš„å›å½’å€¼å¾ˆä¸åˆç†ï¼Œé‚£ä¹ˆå®ƒçš„è¯¯å·®åˆ™æ¯”è¾ƒå¤§ï¼Œä»è€Œä¼šå¯¹RMSEçš„å€¼æœ‰è¾ƒå¤§å½±å“ï¼Œå³å¹³å‡å€¼æ˜¯éé²æ£’çš„ã€‚</p>
</blockquote>
<h3 id="2-4-MAPE"><a href="#2-4-MAPE" class="headerlink" title="2.4 MAPE"></a>2.4 MAPE</h3><p>å…¨ç§°æ˜¯ Mean Absolute Percentage Errorï¼ˆWikiPediaï¼‰, ä¹Ÿå« mean absolute percentage deviation (MAPD)ï¼Œåœ¨ç»Ÿè®¡é¢†åŸŸæ˜¯ä¸€ä¸ªé¢„æµ‹å‡†ç¡®æ€§çš„è¡¡é‡æŒ‡æ ‡ã€‚ </p>
<p>$$<br>MAPE=\frac{100}{n}\sum_{t=1}^{n}|\frac{y_i-f_i}{y_i}|<br>$$</p>
<h2 id="3-ä½™å¼¦ç›¸ä¼¼åº¦-vs-æ¬§å¼è·ç¦»"><a href="#3-ä½™å¼¦ç›¸ä¼¼åº¦-vs-æ¬§å¼è·ç¦»" class="headerlink" title="3. ä½™å¼¦ç›¸ä¼¼åº¦ vs æ¬§å¼è·ç¦»"></a>3. ä½™å¼¦ç›¸ä¼¼åº¦ vs æ¬§å¼è·ç¦»</h2><p><strong>ä½™å¼¦ç›¸ä¼¼åº¦ ï¼š</strong> åæ ‡ç³»ä¸­ä¸¤ä¸ªå‘é‡ï¼Œæ¥è®¡ç®—ä¸¤å‘é‡ä¹‹é—´çš„å¤¹è§’, å€¼åŸŸ [-1, 1]</p>
<p><img src="/images/ml/metric/metric-8.jpg" width="390" alt=""></p>
<p><strong>ä½™å¼¦è·ç¦» ï¼š</strong>  å€¼åŸŸ [0, 1]</p>
<p>$$<br>1 - cos<br>$$</p>
<p><strong>æ¬§å¼è·ç¦» ï¼š</strong> åæ ‡ç³»ä¸­ä¸¤ä¸ªç‚¹ï¼Œæ¥è®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ï¼›</p>
<p><img src="/images/ml/metric/metric-9.png" width="300" alt=""></p>
<p>å‡è®¾äºŒç»´ç©ºé—´ä¸¤ä¸ªç‚¹ï¼š</p>
<p><img src="/images/ml/metric/metric-10.svg" width="200" alt=""></p>
<p>ç„¶åå½’ä¸€åŒ–ä¸ºå•ä½å‘é‡ï¼š</p>
<p><img src="/images/ml/metric/metric-11.svg" width="400" alt=""></p>
<p>ä½™å¼¦ç›¸ä¼¼åº¦å°±æ˜¯ï¼š</p>
<p><img src="/images/ml/metric/metric-12.svg" width="400" alt=""></p>
<p>æ¬§å¼è·ç¦»å°±æ˜¯ï¼š</p>
<p><img src="/images/ml/metric/metric-13.svg" width="400" alt=""></p>
<p>åŒ–ç®€åå°±æ˜¯ï¼š</p>
<p><img src="/images/ml/metric/metric-14.svg" width="200" alt=""></p>
<p>å¾ˆæ˜æ˜¾ï¼Œæ˜¯ä¸€ä¸ªå•è°ƒå‡½æ•°ï¼ˆå›¾åƒç±»ä¼¼äºå•ä½å…ƒçš„ç¬¬ä¸€è±¡é™éƒ¨åˆ†ï¼‰ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œä¸¤è€…åœ¨å½’ä¸€åŒ–ä¸ºå•ä½å‘é‡çš„æ—¶å€™è®¡ç®—ç›¸ä¼¼åº¦ç»“æœå®Œå…¨ä¸€æ ·ã€‚åªä¸è¿‡ä½™å¼¦ç›¸ä¼¼åº¦æ˜¯å€¼è¶Šå¤§æœˆç›¸ä¼¼ï¼Œæ¬§å¼è·ç¦»æ˜¯å€¼è¶Šå°è¶Šç›¸ä¼¼ã€‚</p>
<blockquote>
<p>çŸ¥è¯†ç‚¹ ï¼š ä½™å¼¦ç›¸ä¼¼åº¦ã€ä½™å¼¦è·ç¦»ã€æ¬§å¼è·ç¦»ã€è·ç¦»çš„å®šä¹‰</p>
</blockquote>
<h2 id="4-A-B-æµ‹è¯•çš„é™·é˜±"><a href="#4-A-B-æµ‹è¯•çš„é™·é˜±" class="headerlink" title="4. A/B æµ‹è¯•çš„é™·é˜±"></a>4. A/B æµ‹è¯•çš„é™·é˜±</h2><p>Q1ï¼šåœ¨å¯¹æ¨¡å‹è¿›è¡Œå……åˆ†çš„ç¦»çº¿è¯„ä¼°ä¹‹åï¼Œä¸ºä»€ä¹ˆè¿˜è¦è¿›è¡Œåœ¨çº¿A/Bæµ‹è¯•ï¼Ÿ</p>
<blockquote>
<p>ï¼ˆ1ï¼‰ç¦»çº¿è¯„ä¼°æ— æ³•å®Œå…¨æ¶ˆé™¤æ¨¡å‹è¿‡æ‹Ÿåˆçš„å½±å“ã€‚</p>
<p>ï¼ˆ2ï¼‰ç¦»çº¿è¯„ä¼°æ— æ³•å®Œå…¨è¿˜åŸçº¿ä¸Šçš„å·¥ç¨‹ç¯å¢ƒã€‚çº¿ä¸Šçš„å·¥ç¨‹ç¯å¢ƒåŒ…æ‹¬æ•°æ®å»¶è¿Ÿã€æ•°æ®ç¼ºå¤±ã€æ ‡ç­¾ç¼ºå¤±ç­‰æƒ…å†µã€‚</p>
<p>ï¼ˆ3ï¼‰çº¿ä¸Šç³»ç»Ÿçš„æŸäº›å•†ä¸šæŒ‡æ ‡åœ¨ç¦»çº¿è¯„ä¼°ä¸­æ— æ³•è®¡ç®—ã€‚ ç¦»çº¿æ¨¡å‹è¯„ä¼°çš„æŒ‡æ ‡åŒ…æ‹¬å‡†ç¡®ç‡ï¼Œå¬å›ç‡å’ŒROCæ›²çº¿ç­‰ã€‚ è€Œçº¿ä¸Šè¯„ä¼°å¯ä»¥å…¨é¢äº†è§£è¯¥æ¨èç®—æ³•å¸¦æ¥çš„ç”¨æˆ·ç‚¹å‡»ç‡ã€ç•™å­˜æ—¶é•¿ã€PVè®¿é—®é‡ç­‰çš„å˜åŒ–ã€‚è¿™äº›éƒ½è¦ç”±A/Bæµ‹è¯•æ¥è¿›è¡Œå…¨é¢çš„è¯„ä¼°ã€‚</p>
</blockquote>
<p>Q2ï¼šå¦‚ä½•è¿›è¡Œçº¿ä¸ŠABæµ‹è¯•ï¼Ÿ</p>
<blockquote>
<p>ç­”ï¼šè¿›è¡ŒABæµ‹è¯•çš„ä¸»è¦æ‰‹æ®µæ˜¯è¿›è¡Œç”¨æˆ·åˆ†æ¡¶ï¼Œå³å°†ç”¨æˆ·åˆ†æˆå®éªŒç»„å’Œå¯¹ç…§ç»„ï¼Œå¯¹å®éªŒç»„çš„ç”¨æˆ·æ–½ä»¥æ–°æ¨¡å‹ï¼Œå¯¹å¯¹ç…§ç»„çš„ç”¨æˆ·æ–½ä»¥æ—§æ¨¡å‹ã€‚</p>
<p>åˆ†æ¡¶çš„è¿‡ç¨‹ä¸­ï¼Œè¦æ³¨æ„ <strong>æ ·æœ¬çš„ç‹¬ç«‹æ€§ å’Œ é‡‡æ ·æ–¹å¼çš„æ— åæ€§</strong>.</p>
</blockquote>
<h2 id="5-æ¨¡å‹è¯„ä¼°æ–¹æ³•"><a href="#5-æ¨¡å‹è¯„ä¼°æ–¹æ³•" class="headerlink" title="5. æ¨¡å‹è¯„ä¼°æ–¹æ³•"></a>5. æ¨¡å‹è¯„ä¼°æ–¹æ³•</h2><p>Q1: åœ¨æ¨¡å‹è¯„ä¼°è¿‡ç¨‹ä¸­ï¼Œæœ‰å“ªäº›ä¸»è¦çš„éªŒè¯æ–¹æ³•ï¼Œå®ƒä»¬çš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<ul>
<li>Holdoutæ£€éªŒ</li>
<li>äº¤å‰æ£€éªŒ (k-foldäº¤å‰éªŒè¯, åœ¨å®é™…å®éªŒä¸­ï¼Œç»å¸¸å–10ã€‚)</li>
<li>è‡ªåŠ©æ³•</li>
</ul>
</blockquote>
<p>Q2ï¼šåœ¨è‡ªåŠ©æ³•çš„é‡‡æ ·è¿‡ç¨‹ä¸­ï¼Œå¯¹nä¸ªæ ·æœ¬è¿›è¡Œnæ¬¡è‡ªåŠ©æŠ½æ ·ï¼Œå½“nè¶‹äºæ— ç©·å¤§æ—¶ï¼Œæœ€ç»ˆæœ‰å¤šå°‘æ•°æ®ä»æœªè¢«é€‰æ‹©è¿‡?</p>
<blockquote>
<p>æ ¹æ®é‡è¦æé™ï¼Œå½“æ ·æœ¬é‡å¾ˆå¤§æ—¶ï¼Œå¤§çº¦æœ‰ 0.368 çš„æ ·æœ¬ä»æœªè¢«é€‰æ‹©è¿‡ï¼Œå¯åšä¸ºéªŒè¯é›†ã€‚</p>
</blockquote>
<h2 id="6-è¶…å‚æ•°è°ƒä¼˜"><a href="#6-è¶…å‚æ•°è°ƒä¼˜" class="headerlink" title="6. è¶…å‚æ•°è°ƒä¼˜"></a>6. è¶…å‚æ•°è°ƒä¼˜</h2><ul>
<li>ç½‘æ ¼æœç´¢</li>
<li>éšæœºæœç´¢</li>
<li>è´å¶æ–¯ä¼˜åŒ– (æœªç ”ç©¶)</li>
</ul>
<h2 id="7-è¿‡æ‹Ÿåˆ-æ¬ æ‹Ÿåˆ"><a href="#7-è¿‡æ‹Ÿåˆ-æ¬ æ‹Ÿåˆ" class="headerlink" title="7. è¿‡æ‹Ÿåˆ/æ¬ æ‹Ÿåˆ"></a>7. è¿‡æ‹Ÿåˆ/æ¬ æ‹Ÿåˆ</h2><p>é˜²æ­¢ overfiting çš„ 8 æ¡</p>
<blockquote>
<p>1). get more data<br>2). Data augmentation<br>3). Regularizationï¼ˆæƒå€¼è¡°å‡ï¼‰. (L1 æ‹‰æ™®æ‹‰æ–¯å…ˆéªŒ, L2 é«˜æ–¯å…ˆéªŒ)<br>4). Dropout (ç±»ä¼¼ RF bagging ä½œç”¨ï¼Œæœ€åä»¥æŠ•ç¥¨çš„æ–¹å¼é™ä½è¿‡æ‹Ÿåˆï¼›)<br>5). Choosing Right Network Structure<br>6). Early stopping<br>7). Model Ensumble<br>8). Batch Normalization</p>
</blockquote>
<h2 id="8-å…¶ä»–è¯„ä»·æŒ‡æ ‡"><a href="#8-å…¶ä»–è¯„ä»·æŒ‡æ ‡" class="headerlink" title="8. å…¶ä»–è¯„ä»·æŒ‡æ ‡"></a>8. å…¶ä»–è¯„ä»·æŒ‡æ ‡</h2><ul>
<li>è®¡ç®—é€Ÿåº¦ï¼šæ¨¡å‹è®­ç»ƒå’Œé¢„æµ‹éœ€è¦çš„æ—¶é—´ï¼›</li>
<li>é²æ£’æ€§ï¼šå¤„ç†ç¼ºå¤±å€¼å’Œå¼‚å¸¸å€¼çš„èƒ½åŠ›ï¼›</li>
<li>å¯æ‹“å±•æ€§ï¼šå¤„ç†å¤§æ•°æ®é›†çš„èƒ½åŠ›ï¼›</li>
<li>å¯è§£é‡Šæ€§ï¼šæ¨¡å‹é¢„æµ‹æ ‡å‡†çš„å¯ç†è§£æ€§ï¼Œæ¯”å¦‚å†³ç­–æ ‘äº§ç”Ÿçš„è§„åˆ™å°±å¾ˆå®¹æ˜“ç†è§£ï¼Œè€Œç¥ç»ç½‘ç»œè¢«ç§°ä¸ºé»‘ç›’å­çš„åŸå› å°±æ˜¯å®ƒçš„å¤§é‡å‚æ•°å¹¶ä¸å¥½ç†è§£ã€‚</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.zhihu.com/question/30643044" target="_blank" rel="external">ç²¾ç¡®ç‡ã€å¬å›ç‡ã€F1 å€¼ã€ROCã€AUC å„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/34655990" target="_blank" rel="external">æœºå™¨å­¦ä¹ ä¹‹ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜ (2) â€”â€” ROCå’ŒPRæ›²çº¿</a></li>
<li><a href="https://www.cnblogs.com/techengin/p/8962024.html" target="_blank" rel="external">sklearnä¸­ F1-micro ä¸ F1-macro åŒºåˆ«å’Œè®¡ç®—åŸç†</a></li>
<li><a href="https://charlesliuyx.github.io" target="_blank" rel="external">Bias-Variance Tradeoff</a></li>
<li><a href="http://www.pianshen.com/article/9039255388/" target="_blank" rel="external">ç¨‹åºå‘˜å¤§æœ¬è¥-ç™¾é¢</a></li>
<li><a href="https://blog.csdn.net/weixin_43378396/article/details/90707493" target="_blank" rel="external">CSDN æ¨¡å‹è¯„ä¼°</a></li>
<li><a href="https://blog.csdn.net/lc013/article/details/88583580" target="_blank" rel="external">ç®€å•èŠèŠæ¨¡å‹çš„æ€§èƒ½è¯„ä¼°æ ‡å‡†</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/59685112" target="_blank" rel="external">ä»0å¼€å§‹æœºå™¨å­¦ä¹ -ä¸ºä»€ä¹ˆè¦åšAï¼B Test</a></li>
<li><a href="https://zdkswd.github.io/2019/03/20/%E7%99%BE%E9%9D%A2%20%20%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0/#AB%E6%B5%8B%E8%AF%95" target="_blank" rel="external">ç™¾é¢æ¨¡å‹è¯„ä¼°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Rondom Forest vs GBDT]]></title>
      <url>http://shopee.ai/2019/06/02/ml/Random_Forest_and_GBDT/</url>
      <content type="html"><![CDATA[<p><img class="img-fancy" src="/images/ml/ensumble/ensumble-1.png" width="550" border="0" alt=""></p>
<!--<a href="/2019/06/02/ml/Random_Forest_and_GBDT/" target="_self" style="display:block; margin:0 auto; background:url('/images/ml/ensumble/ensumble-1.png') no-repeat 0 0 / contain; height:304px; width:550px;"></a>
-->
<a id="more"></a>
<h2 id="1-Random-Forest"><a href="#1-Random-Forest" class="headerlink" title="1. Random Forest"></a>1. Random Forest</h2><p>Rondom Forest æ˜¯ä¸€ä¸ªå…¸å‹çš„å¤šä¸ªå†³ç­–æ ‘çš„ç»„åˆåˆ†ç±»å™¨.</p>
<p>Rondom Forest, çš„ Random ä½“ç°åœ¨ 2 ä¸ªæ–¹é¢ï¼š</p>
<blockquote>
<ol>
<li>data random</li>
<li>feature random</li>
</ol>
</blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/34534004" target="_blank" rel="external">RFã€baggingã€boostingã€GBDTã€xgboostç®—æ³•æ€»ç»“</a></p>
<p>Sample data Randomï¼š </p>
<p><img class="img-fancy" src="/images/ml/ensumble/ensumble-2.jpg" width="600" border="0"></p>
<p>Feature Randomï¼š</p>
<blockquote>
<p>ä¸æ•°æ®é›†çš„éšæœºé€‰å–ç±»ä¼¼ï¼Œéšæœºæ£®æ—ä¸­çš„å­æ ‘çš„æ¯ä¸€ä¸ªåˆ†è£‚è¿‡ç¨‹å¹¶æœªç”¨åˆ°æ‰€æœ‰çš„å¾…é€‰ç‰¹å¾ï¼Œè€Œæ˜¯ä»æ‰€æœ‰çš„å¾…é€‰ç‰¹å¾ä¸­éšæœºé€‰å–ä¸€å®šçš„ç‰¹å¾ï¼Œä¹‹åå†åœ¨éšæœºé€‰å–çš„ç‰¹å¾ä¸­é€‰å–æœ€ä¼˜çš„ç‰¹å¾ã€‚è¿™æ ·èƒ½å¤Ÿä½¿å¾—éšæœºæ£®æ—ä¸­çš„å†³ç­–æ ‘éƒ½èƒ½å¤Ÿå½¼æ­¤ä¸åŒï¼Œæå‡ç³»ç»Ÿçš„å¤šæ ·æ€§ï¼Œä»è€Œæå‡åˆ†ç±»æ€§èƒ½ã€‚</p>
</blockquote>
<p><img class="img-fancy" src="/images/ml/ensumble/ensumble-3.jpg" width="600" border="0"></p>
<h2 id="2-GBDT"><a href="#2-GBDT" class="headerlink" title="2. GBDT"></a>2. GBDT</h2><p>GBDT æ˜¯ä»¥å†³ç­–æ ‘ï¼ˆCARTï¼‰ä¸ºåŸºå­¦ä¹ å™¨çš„ GBç®—æ³•ï¼Œæ˜¯è¿­ä»£æ ‘ï¼Œè€Œä¸æ˜¯åˆ†ç±»æ ‘ã€‚</p>
<p>ä¸€èˆ¬ Boosting ç®—æ³•éƒ½æ˜¯ä¸€ä¸ªè¿­ä»£çš„è¿‡ç¨‹ï¼Œæ¯ä¸€æ¬¡æ–°çš„è®­ç»ƒéƒ½æ˜¯ä¸ºäº†æ”¹è¿›ä¸Šä¸€æ¬¡çš„ç»“æœã€‚</p>
<p><img class="img-fancy" src="/images/ml/ensumble/ensumble-4.jpg" width="600"></p>
<p>GBDT çš„æ ¸å¿ƒå°±åœ¨äºï¼š<strong>æ¯ä¸€æ£µæ ‘å­¦çš„æ˜¯ä¹‹å‰æ‰€æœ‰æ ‘ç»“è®ºå’Œçš„æ®‹å·®</strong>ï¼Œè¿™ä¸ªæ®‹å·®å°±æ˜¯ä¸€ä¸ªåŠ é¢„æµ‹å€¼åèƒ½å¾—çœŸå®å€¼çš„ç´¯åŠ é‡ã€‚</p>
<p><img class="img-fancy" src="/images/ml/ensumble/ensumble-5.jpg" width="850"></p>
<h2 id="3-RF-vs-GBDT"><a href="#3-RF-vs-GBDT" class="headerlink" title="3. RF vs GBDT"></a>3. RF vs GBDT</h2><blockquote>
<ol>
<li>ç»„æˆ RF çš„æ ‘å¯ä»¥æ˜¯åˆ†ç±»æ ‘ï¼Œä¹Ÿå¯ä»¥æ˜¯å›å½’æ ‘ï¼›è€ŒGBDTåªç”±å›å½’æ ‘ç»„æˆ </li>
<li>ç»„æˆ RF çš„æ ‘å¯ä»¥å¹¶è¡Œç”Ÿæˆï¼›è€Œ GBDT åªèƒ½æ˜¯ä¸²è¡Œç”Ÿæˆ. </li>
<li>å¯¹äºæœ€ç»ˆçš„è¾“å‡ºç»“æœè€Œè¨€ï¼Œéšæœºæ£®æ—é‡‡ç”¨å¤šæ•°æŠ•ç¥¨ç­‰ï¼›è€Œ GBDT åˆ™æ˜¯å°†æ‰€æœ‰ç»“æœç´¯åŠ èµ·æ¥ï¼Œæˆ–è€…åŠ æƒç´¯åŠ èµ·æ¥. </li>
<li>RF å¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿï¼ŒGBDT å¯¹<code>å¼‚å¸¸å€¼éå¸¸æ•æ„Ÿ</code>.</li>
<li>RF å¯¹è®­ç»ƒé›†ä¸€è§†åŒä»ï¼ŒGBDT æ˜¯åŸºäºæƒå€¼çš„å¼±åˆ†ç±»å™¨çš„é›†æˆ. </li>
<li>RF æ˜¯é€šè¿‡å‡å°‘æ¨¡å‹<code>æ–¹å·®</code>æé«˜æ€§èƒ½ï¼ŒGBDTæ˜¯é€šè¿‡å‡å°‘æ¨¡å‹<code>åå·®</code>æé«˜æ€§èƒ½.</li>
</ol>
</blockquote>
<h2 id="4-Xgboost-vs-GBDT"><a href="#4-Xgboost-vs-GBDT" class="headerlink" title="4. Xgboost vs GBDT"></a>4. Xgboost vs GBDT</h2><p>Xgboostç›¸æ¯”äºGBDTæ¥è¯´ï¼Œæ›´åŠ æœ‰æ•ˆåº”ç”¨äº†æ•°å€¼ä¼˜åŒ–ï¼Œæœ€é‡è¦æ˜¯<strong>å¯¹æŸå¤±å‡½æ•°</strong>ï¼ˆé¢„æµ‹å€¼å’ŒçœŸå®å€¼çš„è¯¯å·®ï¼‰<strong>å˜å¾—æ›´å¤æ‚</strong>ã€‚ç›®æ ‡å‡½æ•°ä¾ç„¶æ˜¯æ‰€æœ‰æ ‘çš„é¢„æµ‹å€¼ç›¸åŠ ç­‰äºé¢„æµ‹å€¼ã€‚</p>
<blockquote>
<ol>
<li>äºŒé˜¶æ³°å‹’å±•å¼€ï¼ŒåŒæ—¶ç”¨åˆ°äº†ä¸€é˜¶å’ŒäºŒé˜¶å¯¼æ•°</li>
<li>xgbooståœ¨ä»£ä»·å‡½æ•°é‡ŒåŠ å…¥äº†æ­£åˆ™é¡¹ï¼Œç”¨äºæ§åˆ¶æ¨¡å‹çš„å¤æ‚åº¦</li>
<li>Shrinkageï¼ˆç¼©å‡ï¼‰ï¼Œç›¸å½“äºå­¦ä¹ é€Ÿç‡ï¼ˆxgboostä¸­çš„etaï¼‰</li>
<li>åˆ—æŠ½æ ·ï¼ˆcolumn subsamplingï¼‰ã€‚xgboostå€Ÿé‰´RFåšæ³•ï¼Œæ”¯æŒåˆ—æŠ½æ ·ï¼ˆå³æ¯æ¬¡çš„è¾“å…¥ç‰¹å¾ä¸æ˜¯å…¨éƒ¨ç‰¹å¾)</li>
<li>å¹¶è¡ŒåŒ–å¤„ç†ï¼š é¢„å…ˆå¯¹æ¯ä¸ªç‰¹å¾å†…éƒ¨è¿›è¡Œäº†æ’åºæ‰¾å‡ºå€™é€‰åˆ‡å‰²ç‚¹.å„ä¸ª<strong>feature</strong>çš„å¢ç›Šè®¡ç®—å°±å¯ä»¥å¼€å¤šçº¿ç¨‹è¿›è¡Œ.</li>
</ol>
</blockquote>
<p><img class="img-fancy" src="/images/ml/ensumble/ensumble-6.jpg" width="600"></p>
<blockquote>
<p>å¥½çš„æ¨¡å‹éœ€è¦å…·å¤‡ä¸¤ä¸ªåŸºæœ¬è¦ç´ ï¼š</p>
<ol>
<li>æ˜¯è¦æœ‰å¥½çš„ç²¾åº¦ï¼ˆå³å¥½çš„æ‹Ÿåˆç¨‹åº¦ï¼‰</li>
<li>æ˜¯æ¨¡å‹è¦å°½å¯èƒ½çš„ç®€å•ï¼ˆå¤æ‚çš„æ¨¡å‹å®¹æ˜“å‡ºç°è¿‡æ‹Ÿåˆï¼Œå¹¶ä¸”æ›´åŠ ä¸ç¨³å®šï¼‰</li>
</ol>
<p>å› æ­¤ï¼Œæˆ‘ä»¬æ„å»ºçš„ç›®æ ‡å‡½æ•°å³è¾¹ç¬¬ä¸€é¡¹æ˜¯æ¨¡å‹çš„è¯¯å·®é¡¹ï¼Œç¬¬äºŒé¡¹æ˜¯æ­£åˆ™åŒ–é¡¹ï¼ˆä¹Ÿå°±æ˜¯æ¨¡å‹å¤æ‚åº¦çš„æƒ©ç½šé¡¹ï¼‰</p>
<p>å¸¸ç”¨çš„è¯¯å·®é¡¹æœ‰å¹³æ–¹è¯¯å·®å’Œé€»è¾‘æ–¯è’‚è¯¯å·®ï¼Œå¸¸è§çš„æƒ©ç½šé¡¹æœ‰l1ï¼Œl2æ­£åˆ™ï¼Œl1æ­£åˆ™æ˜¯å°†æ¨¡å‹å„ä¸ªå…ƒç´ è¿›è¡Œæ±‚å’Œï¼Œl2æ­£åˆ™æ˜¯å¯¹å…ƒç´ æ±‚å¹³æ–¹ã€‚</p>
<p><a href="https://zhuanlan.zhihu.com/p/34534004" target="_blank" rel="external">ID3ã€C4.5ã€CARTã€éšæœºæ£®æ—ã€baggingã€boostingã€Adaboostã€GBDTã€xgboostç®—æ³•æ€»ç»“</a></p>
</blockquote>
<h2 id="5-Bagging-vs-Boosting"><a href="#5-Bagging-vs-Boosting" class="headerlink" title="5. Bagging vs Boosting"></a>5. Bagging vs Boosting</h2><p>ä¸¤ç§æ–¹æ³•çš„é‡‡æ ·å’Œå¤„ç†æ–¹å¼éƒ½ä¸åŒï¼Œä¸»è¦ä»£è¡¨ç®—æ³•ä¾¿æ˜¯ï¼š Rondom Forestã€ GBDT.</p>
<h3 id="5-1-Bagging"><a href="#5-1-Bagging" class="headerlink" title="5.1 Bagging"></a>5.1 Bagging</h3><p>Bagging çš„æ€æƒ³æ¯”è¾ƒç®€å•ï¼Œå³æ¯ä¸€æ¬¡ä»åŸå§‹æ•°æ®ä¸­æ ¹æ® <strong>å‡åŒ€æ¦‚ç‡åˆ†å¸ƒæœ‰æ”¾å›çš„æŠ½å–å’ŒåŸå§‹æ•°æ®å¤§å°ç›¸åŒçš„æ ·æœ¬é›†åˆ</strong>ï¼Œæ ·æœ¬ç‚¹å¯èƒ½å‡ºç°é‡å¤ï¼Œç„¶åå¯¹æ¯ä¸€æ¬¡äº§ç”Ÿçš„è®­ç»ƒé›†æ„é€ ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œå†å¯¹åˆ†ç±»å™¨è¿›è¡Œç»„åˆã€‚</p>
<h3 id="5-2-Boosting"><a href="#5-2-Boosting" class="headerlink" title="5.2 Boosting"></a>5.2 Boosting</h3><p>Boosting çš„æ¯ä¸€æ¬¡æŠ½æ ·çš„ <strong>æ ·æœ¬åˆ†å¸ƒéƒ½æ˜¯ä¸ä¸€æ ·</strong> çš„ã€‚æ¯ä¸€æ¬¡è¿­ä»£ï¼Œéƒ½æ ¹æ®ä¸Šä¸€æ¬¡è¿­ä»£çš„ç»“æœï¼Œ<strong>å¢åŠ è¢«é”™è¯¯åˆ†ç±»çš„æ ·æœ¬çš„æƒé‡</strong>ï¼Œä½¿å¾—æ¨¡å‹èƒ½åœ¨ä¹‹åçš„è¿­ä»£ä¸­æ›´åŠ æ³¨æ„åˆ° <strong>éš¾ä»¥åˆ†ç±»çš„æ ·æœ¬</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ª <strong>ä¸æ–­å­¦ä¹ çš„è¿‡ç¨‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸æ–­æå‡</strong> çš„è¿‡ç¨‹ï¼Œè¿™ä¹Ÿå°±æ˜¯boostingæ€æƒ³çš„æœ¬è´¨æ‰€åœ¨ã€‚ è¿­ä»£ä¹‹åï¼Œå°†æ¯æ¬¡è¿­ä»£çš„åŸºåˆ†ç±»å™¨è¿›è¡Œé›†æˆã€‚é‚£ä¹ˆå¦‚ä½•è¿›è¡Œæ ·æœ¬æƒé‡çš„è°ƒæ•´å’Œåˆ†ç±»å™¨çš„é›†æˆæ˜¯æˆ‘ä»¬éœ€è¦è€ƒè™‘çš„å…³é”®é—®é¢˜ã€‚</p>
<p><img src="/images/ml/ensumble/ensumble-7.jpg" width="600" alt=""></p>
<h2 id="6-ç‰¹å¾é‡è¦åº¦"><a href="#6-ç‰¹å¾é‡è¦åº¦" class="headerlink" title="6. ç‰¹å¾é‡è¦åº¦"></a>6. ç‰¹å¾é‡è¦åº¦</h2><h3 id="6-1-RF-ç‰¹å¾åº¦é‡"><a href="#6-1-RF-ç‰¹å¾åº¦é‡" class="headerlink" title="6.1 RF ç‰¹å¾åº¦é‡"></a>6.1 RF ç‰¹å¾åº¦é‡</h3><p>(1ï¼‰å¯¹æ¯ä¸€é¢—å†³ç­–æ ‘ï¼Œé€‰æ‹©ç›¸åº”çš„è¢‹å¤–æ•°æ®ï¼ˆout of bagï¼ŒOOBï¼‰â€‹è®¡ç®—è¢‹å¤–æ•°æ®è¯¯å·®ï¼Œè®°ä¸ºerrOOB1.</p>
<blockquote>
<p>æ‰€è°“è¢‹å¤–æ•°æ®æ˜¯æŒ‡ï¼Œæ¯æ¬¡å»ºç«‹å†³ç­–æ ‘æ—¶ï¼Œé€šè¿‡é‡å¤æŠ½æ ·å¾—åˆ°ä¸€ä¸ªæ•°æ®ç”¨äºè®­ç»ƒâ€‹å†³ç­–æ ‘ï¼Œè¿™æ—¶è¿˜æœ‰å¤§çº¦1/3çš„æ•°æ®æ²¡æœ‰è¢«åˆ©ç”¨ï¼Œæ²¡æœ‰å‚ä¸å†³ç­–æ ‘çš„å»ºç«‹ã€‚è¿™éƒ¨åˆ†æ•°æ®å¯ä»¥ç”¨äºå¯¹å†³ç­–æ ‘çš„æ€§èƒ½è¿›è¡Œè¯„ä¼°ï¼Œè®¡ç®—æ¨¡å‹çš„é¢„æµ‹é”™è¯¯ç‡ï¼Œç§°ä¸ºè¢‹å¤–æ•°æ®è¯¯å·®ã€‚</p>
<p>â€‹è¿™å·²ç»ç»è¿‡è¯æ˜æ˜¯æ— åä¼°è®¡çš„,æ‰€ä»¥åœ¨éšæœºæ£®æ—ç®—æ³•ä¸­ä¸éœ€è¦å†è¿›è¡Œäº¤å‰éªŒè¯æˆ–è€…å•ç‹¬çš„æµ‹è¯•é›†æ¥è·å–æµ‹è¯•é›†è¯¯å·®çš„æ— åä¼°è®¡ã€‚</p>
</blockquote>
<p>â€‹(2ï¼‰éšæœºå¯¹è¢‹å¤–æ•°æ®OOBæ‰€æœ‰æ ·æœ¬çš„ç‰¹å¾$X$åŠ å…¥å™ªå£°å¹²æ‰°ï¼ˆå¯ä»¥éšæœºæ”¹å˜æ ·æœ¬åœ¨ç‰¹å¾Xå¤„çš„å€¼ï¼‰ï¼Œå†æ¬¡è®¡ç®—è¢‹å¤–æ•°æ®è¯¯å·®ï¼Œè®°ä¸ºerrOOB2ã€‚</p>
<p>(3ï¼‰â€‹å‡è®¾æ£®æ—ä¸­æœ‰Næ£µæ ‘ï¼Œåˆ™ç‰¹å¾Xçš„é‡è¦æ€§=âˆ‘ï¼ˆerrOOB2-errOOB1ï¼‰/Nã€‚è¿™ä¸ªæ•°å€¼ä¹‹æ‰€ä»¥èƒ½å¤Ÿè¯´æ˜ç‰¹å¾çš„é‡è¦æ€§æ˜¯å› ä¸ºï¼Œå¦‚æœåŠ å…¥éšæœºå™ªå£°åï¼Œè¢‹å¤–æ•°æ®å‡†ç¡®ç‡å¤§å¹…åº¦ä¸‹é™ï¼ˆå³errOOB2ä¸Šå‡ï¼‰ï¼Œè¯´æ˜è¿™ä¸ªç‰¹å¾å¯¹äºæ ·æœ¬çš„é¢„æµ‹ç»“æœæœ‰å¾ˆå¤§å½±å“ï¼Œè¿›è€Œè¯´æ˜é‡è¦ç¨‹åº¦æ¯”è¾ƒé«˜ã€‚</p>
<h3 id="6-2-GBDT-ç‰¹å¾åº¦é‡"><a href="#6-2-GBDT-ç‰¹å¾åº¦é‡" class="headerlink" title="6.2 GBDT ç‰¹å¾åº¦é‡"></a>6.2 GBDT ç‰¹å¾åº¦é‡</h3><p>ä¸»è¦æ˜¯é€šè¿‡è®¡ç®—ç‰¹å¾iåœ¨å•æ£µæ ‘ä¸­é‡è¦åº¦çš„å¹³å‡å€¼ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>å…¶ä¸­ï¼ŒMæ˜¯æ ‘çš„æ•°é‡ã€‚ç‰¹å¾iåœ¨å•æ£µæ ‘çš„é‡è¦åº¦ä¸»è¦æ˜¯é€šè¿‡è®¡ç®—æŒ‰è¿™ä¸ªç‰¹å¾iåˆ†è£‚ä¹‹åæŸå¤±çš„å‡å°‘å€¼.</p>
<p>å…¶ä¸­ï¼ŒLæ˜¯å¶å­èŠ‚ç‚¹çš„æ•°é‡ï¼ŒL-1å°±æ˜¯éå¶å­ç»“ç‚¹çš„æ•°é‡ã€‚</p>
<h3 id="6-3-Xgboost"><a href="#6-3-Xgboost" class="headerlink" title="6.3 Xgboost"></a>6.3 Xgboost</h3><p>XGboostæ˜¯é€šè¿‡è¯¥ç‰¹å¾æ¯æ£µæ ‘ä¸­åˆ†è£‚æ¬¡æ•°çš„å’Œå»è®¡ç®—çš„ï¼Œæ¯”å¦‚è¿™ä¸ªç‰¹å¾åœ¨ç¬¬ä¸€æ£µæ ‘åˆ†è£‚1æ¬¡ï¼Œç¬¬äºŒæ£µæ ‘2æ¬¡â€¦â€¦ï¼Œé‚£ä¹ˆè¿™ä¸ªç‰¹å¾çš„å¾—åˆ†å°±æ˜¯(1+2+â€¦)ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/m0_37770941/article/details/78330795" target="_blank" rel="external">éšæœºæ£®æ—è¿›è¡Œç‰¹å¾é‡è¦æ€§åº¦é‡çš„è¯¦ç»†è¯´æ˜</a></li>
<li><a href="https://www.zhihu.com/question/22983179" target="_blank" rel="external">ä»€ä¹ˆæ˜¯æ— åä¼°è®¡ï¼Ÿ</a></li>
<li><a href="http://wepon.me/files/gbdt.pdf" target="_blank" rel="external">GBDT PDF</a></li>
<li><a href="https://www.zhihu.com/question/41354392" target="_blank" rel="external">æœºå™¨å­¦ä¹ ç®—æ³•ä¸­ GBDT å’Œ XGBOOST çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Logistic Regression]]></title>
      <url>http://shopee.ai/2019/05/31/ml/Logistic_Regression/</url>
      <content type="html"><![CDATA[<p><img src="/images/ml/lr/LR-1.png" width="600"></p>
<!--<a href="/2019/05/31/ml/Logistic_Regression/" target="_self" style="display:block; margin:0 auto; background:url('/images/ml/lr/LR-1.png') no-repeat 0 0 / contain; height:275px; width:550px;"></a>-->
<a id="more"></a>
<!--<center><font size=3.5>-->
<p>Logistic Regression æ˜¯ä¸€ç§ç”¨äºè§£å†³äºŒåˆ†ç±»ï¼ˆ0 or 1ï¼‰é—®é¢˜çš„æœºå™¨å­¦ä¹ æ–¹æ³•.<br><!--</font></center>--><br>ä¸¾ä¸ªğŸŒ° :</p>
<blockquote>
<p>(1). ç”¨æˆ·è´­ä¹°æŸå•†å“çš„å¯èƒ½æ€§</p>
<p>(2). æŸç—…äººæ‚£æœ‰æŸç§ç–¾ç—…çš„å¯èƒ½æ€§</p>
<p>(3). æŸå¹¿å‘Šè¢«ç”¨æˆ·ç‚¹å‡»çš„å¯èƒ½æ€§ç­‰</p>
</blockquote>
<h2 id="1-Logistic-vs-Linear-Regression"><a href="#1-Logistic-vs-Linear-Regression" class="headerlink" title="1. Logistic vs Linear Regression"></a>1. Logistic vs Linear Regression</h2><p>Logistic Regression å’Œ Linear Regression éƒ½æ˜¯ä¸€ç§å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆgeneralized linear modelï¼‰ã€‚</p>
<p>é€»è¾‘å›å½’å‡è®¾å› å˜é‡ y æœä»ä¼¯åŠªåˆ©åˆ†å¸ƒï¼Œè€Œçº¿æ€§å›å½’å‡è®¾å› å˜é‡ y æœä»é«˜æ–¯åˆ†å¸ƒã€‚ å› æ­¤ä¸çº¿æ€§å›å½’æœ‰å¾ˆå¤šç›¸åŒä¹‹å¤„ï¼Œå»é™¤ Sigmoid æ˜ å°„å‡½æ•°çš„è¯ï¼Œé€»è¾‘å›å½’ç®—æ³•å°±æ˜¯ä¸€ä¸ªçº¿æ€§å›å½’ã€‚å¯ä»¥è¯´ï¼Œé€»è¾‘å›å½’æ˜¯ä»¥çº¿æ€§å›å½’ä¸ºç†è®ºæ”¯æŒçš„ï¼Œä½†æ˜¯é€»è¾‘å›å½’é€šè¿‡ Sigmoidå‡½æ•° å¼•å…¥äº†éçº¿æ€§å› ç´ ï¼Œå› æ­¤å¯ä»¥è½»æ¾å¤„ç† 0/1 åˆ†ç±»é—®é¢˜ã€‚</p>
<h3 id="1-1-Linear-Regression"><a href="#1-1-Linear-Regression" class="headerlink" title="1.1 Linear Regression"></a>1.1 Linear Regression</h3><p>$$<br>z={\theta_{0}}+{\theta_{1}x_{1}}+{\theta_{2}x_{2}+{\theta_{3}x_{3}}â€¦+{\theta_{n}x_{n}}}=\theta^Tx<br>$$</p>
<blockquote>
<p>ä½¿ç”¨æœ€å°äºŒä¹˜æ³•æ±‚è§£ Linear Regression æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºå› å˜é‡ y æœä»æ­£æ€åˆ†å¸ƒã€‚</p>
<p>çº¿æ€§å›å½’å‡è®¾å› å˜é‡ y æœä»é«˜æ–¯åˆ†å¸ƒ:  çœŸå®å€¼yä¸æ‹Ÿåˆå€¼Yä¹‹é—´çš„å·®å€¼æ˜¯ä¸æ˜¯ç¬¦åˆæ­£æ€åˆ†å¸ƒã€‚</p>
</blockquote>
<h3 id="1-2-Logistic-Regression"><a href="#1-2-Logistic-Regression" class="headerlink" title="1.2 Logistic Regression"></a>1.2 Logistic Regression</h3><p>$$<br>h_{\theta}(x)=\frac{1}{1+e^{-z}}=\frac{1}{1+e^{-\theta^Tx}}<br>$$</p>
<p><img src="/images/ml/lr/LR-2.png" width="280" alt="Logistic Regression å°†çº¿æ€§å‡½æ•°çš„ç»“æœæ˜ å°„åˆ°äº† sigmoid å‡½æ•° ä¸­. å–å€¼åœ¨ [0, 1] ä¹‹é—´."></p>
<p>$$<br>log\frac{p}{1-p} = \theta^Tx<br>$$</p>
<blockquote>
<p>ä¸€ä»¶äº‹å‘ç”Ÿçš„å‡ ç‡ $odds = \frac{p}{1-p}$ï¼Œ $p = P(y=1|x)$</p>
<p>Logistic Regression å¯ä»¥çœ‹ä½œæ˜¯å¯¹äº â€œy=1|xâ€ è¿™ä¸€äº‹ä»¶çš„å¯¹æ•°å‡ ç‡çš„çº¿æ€§å›å½’.</p>
</blockquote>
<p>é€»è¾‘å›å½’é€šè¿‡å¯¹ä¼¼ç„¶å‡½æ•° $<br>L(\theta)=\prod_{i=1}^{N}P(y_i|x_i;\theta)=\prod_{i=1}^{N}(\pi(x_i))^{y_i}(1-\pi(x_i))^{1-y_i} $ çš„å­¦ä¹ ï¼Œå¾—åˆ°æœ€ä½³å‚æ•° Î¸.</p>
<blockquote>
<p>Logistic ä¸ Linear Regression äºŒè€…éƒ½ä½¿ç”¨äº†æå¤§ä¼¼ç„¶ä¼°è®¡æ¥å¯¹è®­ç»ƒæ ·æœ¬è¿›è¡Œå»ºæ¨¡</p>
</blockquote>
<p><a href="http://www.iterate.site/2019/03/30/12-é€»è¾‘å›å½’/" target="_blank" rel="external">è¿­ä»£è‡ªå·± Logistic Regression</a></p>
<h2 id="2-LR-Hypothesis-function"><a href="#2-LR-Hypothesis-function" class="headerlink" title="2. LR Hypothesis function"></a>2. LR Hypothesis function</h2><p><img src="/images/ml/lr/LR-3.svg" width="150"></p>
<p>å…¶å‡½æ•°æ›²çº¿å¦‚ä¸‹ï¼š</p>
<p><img src="/images/ml/lr/LR-2.png" width="280" alt="å–å€¼åœ¨[0, 1]ä¹‹é—´ï¼Œåœ¨è¿œç¦»0çš„åœ°æ–¹å‡½æ•°çš„å€¼ä¼šå¾ˆå¿«æ¥è¿‘0æˆ–è€…1ã€‚å®ƒçš„è¿™ä¸ªç‰¹æ€§å¯¹äºè§£å†³äºŒåˆ†ç±»é—®é¢˜ååˆ†é‡è¦."></p>
<p>Logistic Regression å‡è®¾å‡½æ•°å½¢å¼å¦‚ä¸‹ï¼š</p>
<p><img src="/images/ml/lr/LR-4.svg" width="270"></p>
<p>æ‰€ä»¥ï¼š</p>
<p><img src="/images/ml/lr/LR-5.svg" width="170"></p>
<p>ä¸€ä¸ªæœºå™¨å­¦ä¹ çš„æ¨¡å‹ï¼Œå®é™…ä¸Šæ˜¯æŠŠå†³ç­–å‡½æ•°é™å®šåœ¨æŸä¸€ç»„æ¡ä»¶ä¸‹ï¼Œè¿™ç»„é™å®šæ¡ä»¶å°±å†³å®šäº†æ¨¡å‹çš„å‡è®¾ç©ºé—´ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›è¿™ç»„é™å®šæ¡ä»¶ç®€å•è€Œåˆç†ã€‚è€Œé€»è¾‘å›å½’æ¨¡å‹æ‰€åšçš„å‡è®¾æ˜¯ï¼š</p>
<p><img src="/images/ml/lr/LR-6.svg" width="300" alt="è¿™ä¸ªå‡½æ•°çš„æ„æ€å°±æ˜¯åœ¨ç»™å®š x å’Œ 0 çš„æ¡ä»¶ä¸‹ y=1 çš„æ¦‚ç‡"></p>
<h2 id="3-Cost-Function"><a href="#3-Cost-Function" class="headerlink" title="3. Cost Function"></a>3. Cost Function</h2><p>Cost Functionï¼š</p>
<p><img src="/images/ml/lr/LR-7.svg" width="470"></p>
<p>Loss Functionï¼š</p>
<p><img src="/images/ml/lr/LR-8.svg" width="400"></p>
<p>ä¸Šé¢çš„æ–¹ç¨‹ç­‰ä»·äºï¼š</p>
<p><img src="/images/ml/lr/LR-9.svg" width="570"></p>
<p><img src="/images/ml/lr/LR-10.png" width="370"></p>
<blockquote>
<ul>
<li>é€‰æ‹© Cost_Function æ—¶ï¼Œæœ€å¥½æŒ‘é€‰å¯¹å‚æ•° $\theta$ å¯å¾®çš„å‡½æ•°ï¼ˆå…¨å¾®åˆ†å­˜åœ¨ï¼Œåå¯¼æ•°ä¸€å®šå­˜åœ¨ï¼‰</li>
<li>å¯¹äºæ¯ç§ç®—æ³•æ¥è¯´ï¼ŒCost_Function ä¸æ˜¯å”¯ä¸€çš„ï¼› Cost_Function æ˜¯å‚æ•° $\theta$ çš„å‡½æ•°ï¼›</li>
<li>Cost Function æ˜¯å¯¹æ‰€æœ‰æ ·æœ¬è€Œè¨€, Loss Function æ˜¯å¯¹å•ä¸€æ ·æœ¬è€Œè¨€.</li>
<li>$J(\theta)$ æ˜¯ä¸€ä¸ªæ ‡é‡, æˆ‘ä»¬éœ€è¦ min æœ€å°åŒ–å®ƒ.</li>
</ul>
</blockquote>
<p>LR ä¸­ï¼Œä»£ä»·å‡½æ•°æ˜¯äº¤å‰ç†µ (<strong>Cross Entropy</strong>)ï¼Œäº¤å‰ç†µæ˜¯ä¸€ä¸ªå¸¸è§çš„ä»£ä»·å‡½æ•°:</p>
<p><a href="https://zhuanlan.zhihu.com/p/38241764" target="_blank" rel="external">good ç®€å•çš„äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼Œä½ çœŸçš„æ‡‚äº†å—ï¼Ÿ</a></p>
<h2 id="4-Cross-Entropy"><a href="#4-Cross-Entropy" class="headerlink" title="4. Cross Entropy"></a>4. Cross Entropy</h2><p>Cross Entropy æ˜¯ä¿¡æ¯è®ºä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œè¦æƒ³äº†è§£äº¤å‰ç†µçš„æœ¬è´¨ï¼Œéœ€è¦å…ˆä»æœ€åŸºæœ¬çš„æ¦‚å¿µè®²èµ·ã€‚</p>
<blockquote>
<p>ä¿¡æ¯é‡ã€ç†µã€ç›¸å¯¹ç†µï¼ˆKLæ•£åº¦ï¼‰ã€äº¤å‰ç†µ</p>
<p>åŒä¸€ä¸ªéšæœºå˜é‡ x æœ‰ä¸¤ä¸ªå•ç‹¬çš„æ¦‚ç‡åˆ†å¸ƒ P(x) å’Œ Q(x)ï¼Œ ç”¨ KLæ•£åº¦ æ¥è¡¡é‡è¿™ä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚ã€‚</p>
<p>$D_{KL}(p||q)=\sum_{i=1}^np(x_i)log(\frac{p(x_i)}{q(x_i)}) \tag{3.1}$</p>
<p>$$\begin{eqnarray}<br>D_{KL}(p||q) &amp;=&amp; \sum_{i=1}^np(x_i)log(p(x_i))-\sum_{i=1}^np(x_i)log(q(x_i))\end{eqnarray}$$</p>
<p>ç­‰å¼çš„å‰ä¸€éƒ¨åˆ†æ°å·§å°±æ˜¯pçš„ç†µï¼Œç­‰å¼çš„åä¸€éƒ¨åˆ†ï¼Œå°±æ˜¯äº¤å‰ç†µï¼š</p>
<p>$$\begin{eqnarray}<br>=&amp; -H(p(x))+[-\sum_{i=1}^np(x_i)log(q(x_i))]<br>\end{eqnarray}$$</p>
<p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¯„ä¼°labelå’Œpredictsä¹‹é—´çš„å·®è·ï¼Œä½¿ç”¨KLæ•£åº¦åˆšåˆšå¥½ï¼Œå³ $D_{KL}(y||\hat{y})$ .</p>
<p>ç”±äºKLæ•£åº¦ä¸­çš„å‰ä¸€éƒ¨åˆ† $-H(y)$ ä¸å˜ï¼Œæ•…åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦å…³æ³¨ Cross Entropy å°±å¯ä»¥äº†ã€‚</p>
<p>æ‰€ä»¥ä¸€èˆ¬åœ¨æœºå™¨å­¦ä¹ ä¸­ç›´æ¥ç”¨ç”¨ Cross Entropy Lossï¼Œè¯„ä¼°æ¨¡å‹ã€‚</p>
<p>$D_{KL}$ çš„å€¼è¶Šå°ï¼Œè¡¨ç¤º qåˆ†å¸ƒ å’Œ påˆ†å¸ƒ è¶Šæ¥è¿‘.</p>
</blockquote>
<p><a href="https://blog.csdn.net/tsyccnh/article/details/79163834" target="_blank" rel="external">ä¸€æ–‡ææ‡‚äº¤å‰ç†µåœ¨æœºå™¨å­¦ä¹ ä¸­çš„ä½¿ç”¨</a></p>
<p><a href="https://blog.csdn.net/tsyccnh/article/details/79163834" target="_blank" rel="external">äº¤å‰ç†µåœ¨å¤šåˆ†ç±»é—®é¢˜ä¸­çš„ä½¿ç”¨, sigmoid</a></p>
<blockquote>
<p>1ï¼‰CrossEntropy lossFunction </p>
<p><img src="/images/ml/lr/LR-11.svg" width="300"></p>
<p>äºŒåˆ†ç±»: </p>
<p><img src="/images/ml/lr/LR-12.svg" width="150"></p>
<p>æ„ä¹‰ï¼šèƒ½è¡¨å¾ çœŸå®æ ·æœ¬æ ‡ç­¾ å’Œ é¢„æµ‹æ¦‚ç‡ ä¹‹é—´çš„å·®å€¼</p>
<p>2ï¼‰æœ€å°åŒ–äº¤å‰ç†µçš„æœ¬è´¨å°±æ˜¯å¯¹æ•°ä¼¼ç„¶å‡½æ•°çš„æœ€å¤§åŒ–ï¼›</p>
<p>3ï¼‰å¯¹æ•°ä¼¼ç„¶å‡½æ•°çš„æœ¬è´¨å°±æ˜¯è¡¡é‡åœ¨æŸä¸ªå‚æ•°ä¸‹ï¼Œæ•´ä½“çš„ä¼°è®¡å’ŒçœŸå®æƒ…å†µä¸€æ ·çš„æ¦‚ç‡ï¼Œè¶Šå¤§ä»£è¡¨è¶Šç›¸è¿‘ï¼›</p>
<p>4ï¼‰æŸå¤±å‡½æ•°çš„æœ¬è´¨å°±æ˜¯è¡¡é‡é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„å·®è·ï¼Œè¶Šå¤§ä»£è¡¨è¶Šä¸ç›¸è¿‘ã€‚</p>
</blockquote>
<h3 id="4-1-Log-è®¾è®¡ç†å¿µ"><a href="#4-1-Log-è®¾è®¡ç†å¿µ" class="headerlink" title="4.1 Log è®¾è®¡ç†å¿µ"></a>4.1 Log è®¾è®¡ç†å¿µ</h3><p>é¢„æµ‹è¾“å‡ºä¸ y å·®å¾—è¶Šå¤šï¼ŒL çš„å€¼è¶Šå¤§ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹å½“å‰æ¨¡å‹çš„ â€œ æƒ©ç½š â€ è¶Šå¤§ï¼Œè€Œä¸”æ˜¯éçº¿æ€§å¢å¤§ï¼Œæ˜¯ä¸€ç§ç±»ä¼¼æŒ‡æ•°å¢é•¿çš„çº§åˆ«ã€‚è¿™æ˜¯ç”± log å‡½æ•°æœ¬èº«çš„ç‰¹æ€§æ‰€å†³å®šçš„ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ æ¨¡å‹ä¼šå€¾å‘äºè®©é¢„æµ‹è¾“å‡ºæ›´æ¥è¿‘çœŸå®æ ·æœ¬æ ‡ç­¾ yã€‚</p>
<blockquote>
<p>æˆ‘ä»¬å¸Œæœ› log P(y|x) è¶Šå¤§è¶Šå¥½ï¼Œåè¿‡æ¥ï¼Œåªè¦ log P(y|x) çš„è´Ÿå€¼ -log P(y|x) è¶Šå°å°±è¡Œäº†ã€‚é‚£æˆ‘ä»¬å°±å¯ä»¥å¼•å…¥æŸå¤±å‡½æ•°ï¼Œä¸”ä»¤ Loss = -log P(y|x)å³å¯ã€‚åˆ™å¾—åˆ°æŸå¤±å‡½æ•°ä¸ºï¼š</p>
<p><img src="/images/ml/lr/LR-11.svg" width="300"></p>
<p>å›¾å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¯¹ CrossEntropy lossFunction æœ‰æ›´ç›´è§‚çš„ç†è§£ã€‚æ— è®ºçœŸå®æ ·æœ¬æ ‡ç­¾ y æ˜¯ 0 è¿˜æ˜¯ 1ï¼ŒL éƒ½è¡¨å¾äº†é¢„æµ‹è¾“å‡ºä¸ y çš„å·®è·ã€‚</p>
</blockquote>
<h3 id="4-2-MLE-æœ€å¤§ä¼¼ç„¶"><a href="#4-2-MLE-æœ€å¤§ä¼¼ç„¶" class="headerlink" title="4.2 MLE æœ€å¤§ä¼¼ç„¶"></a>4.2 MLE æœ€å¤§ä¼¼ç„¶</h3><p>å°±æ˜¯åˆ©ç”¨å·²çŸ¥çš„æ ·æœ¬ç»“æœä¿¡æ¯ï¼Œåæ¨æœ€å…·æœ‰å¯èƒ½ï¼ˆæœ€å¤§æ¦‚ç‡ï¼‰å¯¼è‡´è¿™äº›æ ·æœ¬ç»“æœå‡ºç°çš„ <font color="#c7254e"><strong>æ¨¡å‹å‚æ•°å€¼</strong>ï¼</font></p>
<blockquote>
<p>è¾“å…¥æœ‰ä¸¤ä¸ªï¼š$x$ è¡¨ç¤ºæŸä¸€ä¸ªå…·ä½“çš„æ•°æ®ï¼›$Î¸$ è¡¨ç¤ºæ¨¡å‹çš„å‚æ•°ã€‚</p>
</blockquote>
<p>Probability Functionï¼š</p>
<blockquote>
<p>å¯¹äºè¿™ä¸ªå‡½æ•°ï¼š $P(x|Î¸)$ ï¼Œ å¦‚æœ $Î¸$ æ˜¯å·²çŸ¥ç¡®å®šçš„ï¼Œ$x$ æ˜¯å˜é‡ï¼Œè¿™ä¸ªå‡½æ•°å«åšæ¦‚ç‡å‡½æ•° (probability function)ï¼Œå®ƒæè¿°å¯¹äºä¸åŒçš„æ ·æœ¬ç‚¹ $x$ï¼Œå…¶å‡ºç°æ¦‚ç‡æ˜¯å¤šå°‘ã€‚</p>
</blockquote>
<p>Likelihood Functionï¼š</p>
<blockquote>
<p>å¦‚æœ $x$ æ˜¯å·²çŸ¥ç¡®å®šçš„ï¼Œ$Î¸$ æ˜¯å˜é‡ï¼Œè¿™ä¸ªå‡½æ•°å«åšä¼¼ç„¶å‡½æ•°(likelihood function), å®ƒæè¿°å¯¹äºä¸åŒçš„æ¨¡å‹å‚æ•°ï¼Œå‡ºç° $x$ è¿™ä¸ªæ ·æœ¬ç‚¹çš„æ¦‚ç‡æ˜¯å¤šå°‘ã€‚</p>
<p>MLE æä¾›äº†ä¸€ç§ <strong>ç»™å®šè§‚å¯Ÿæ•°æ®æ¥è¯„ä¼°æ¨¡å‹å‚æ•°</strong> çš„æ–¹æ³•ï¼Œå³ï¼šâ€œæ¨¡å‹å·²å®šï¼Œå‚æ•°æœªçŸ¥â€ã€‚</p>
<p>MLE ä¸­ <strong>é‡‡æ ·</strong> éœ€æ»¡è¶³ä¸€ä¸ªé‡è¦çš„å‡è®¾ï¼Œå°±æ˜¯æ‰€æœ‰çš„é‡‡æ ·éƒ½æ˜¯ <strong>ç‹¬ç«‹åŒåˆ†å¸ƒ</strong> çš„.</p>
<p>ä¸€å¥è¯æ€»ç»“ï¼šæ¦‚ç‡æ˜¯å·²çŸ¥æ¨¡å‹å’Œå‚æ•°ï¼Œæ¨æ•°æ®ã€‚ç»Ÿè®¡æ˜¯å·²çŸ¥æ•°æ®ï¼Œæ¨æ¨¡å‹å’Œå‚æ•°ã€‚</p>
</blockquote>
<h2 id="5-æœ€å°äºŒä¹˜æ³•-vs-æœ€å¤§ä¼¼ç„¶ä¼°è®¡"><a href="#5-æœ€å°äºŒä¹˜æ³•-vs-æœ€å¤§ä¼¼ç„¶ä¼°è®¡" class="headerlink" title="5. æœ€å°äºŒä¹˜æ³• vs æœ€å¤§ä¼¼ç„¶ä¼°è®¡"></a>5. æœ€å°äºŒä¹˜æ³• vs æœ€å¤§ä¼¼ç„¶ä¼°è®¡</h2><p>æ€»ç»“ä¸€å¥è¯ï¼š</p>
<ul>
<li>æœ€å°äºŒä¹˜æ³•çš„æ ¸å¿ƒæ˜¯æƒè¡¡ï¼Œå› ä¸ºä½ è¦åœ¨å¾ˆå¤šæ¡çº¿ä¸­é—´é€‰æ‹©ï¼Œé€‰æ‹©å‡ºè·ç¦»æ‰€æœ‰çš„ç‚¹ä¹‹å’Œæœ€çŸ­çš„ï¼›</li>
<li>è€Œæå¤§ä¼¼ç„¶çš„æ ¸å¿ƒæ˜¯è‡ªæ‹ï¼Œè¦ç›¸ä¿¡è‡ªå·±æ˜¯å¤©é€‰ä¹‹å­ï¼Œè‡ªå·±çœ‹åˆ°çš„ï¼Œå°±æ˜¯å†¥å†¥ä¹‹ä¸­æœ€æ¥è¿‘çœŸç›¸çš„ã€‚^_^</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/28408516" target="_blank" rel="external">é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰ï¼ˆä¸€ï¼‰</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/22876460" target="_blank" rel="external">å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆGeneralized Linear Modelï¼‰</a></li>
<li><a href="https://blog.csdn.net/Cdd2xd/article/details/75635688" target="_blank" rel="external">GLM(å¹¿ä¹‰çº¿æ€§æ¨¡å‹) ä¸ LR(é€»è¾‘å›å½’) è¯¦è§£</a></li>
<li><a href="https://www.zhihu.com/question/56891433" target="_blank" rel="external">æ€æ ·ç”¨é€šä¿—æ˜“æ‡‚çš„æ–‡å­—è§£é‡Šæ­£æ€åˆ†å¸ƒåŠå…¶æ„ä¹‰ï¼Ÿ</a></li>
<li><a href="https://www.zhihu.com/question/20447622" target="_blank" rel="external">æœ€å¤§ä¼¼ç„¶ä¼°è®¡å’Œæœ€å°äºŒä¹˜æ³•æ€ä¹ˆç†è§£ï¼Ÿ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/26614750" target="_blank" rel="external">çŸ¥ä¹ï¼šä¸€æ–‡ææ‡‚æå¤§ä¼¼ç„¶ä¼°è®¡</a></li>
<li><a href="https://blog.csdn.net/u011508640/article/details/72815981" target="_blank" rel="external">CSDNï¼šè¯¦è§£æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼ˆMLEï¼‰ã€æœ€å¤§åéªŒæ¦‚ç‡ä¼°è®¡ï¼ˆMAPï¼‰ï¼Œä»¥åŠè´å¶æ–¯å…¬å¼çš„ç†è§£</a></li>
<li><a href="https://blog.csdn.net/tsyccnh/article/details/79163834" target="_blank" rel="external">ä¸€æ–‡ææ‡‚äº¤å‰ç†µåœ¨æœºå™¨å­¦ä¹ ä¸­çš„ä½¿ç”¨ï¼Œé€å½»ç†è§£äº¤å‰ç†µèƒŒåçš„ç›´è§‰</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Dimensionality Reductionï¼š PCA]]></title>
      <url>http://shopee.ai/2019/04/21/ml/PCA/</url>
      <content type="html"><![CDATA[<p><img src="/images/ml/pca/pca-logo.png" width="550" alt="PCA"></p>
<a id="more"></a>
<p>å¸¸è§çš„ Dimensionality Reduction æ–¹æ³•ï¼š PCAã€LDA ç­‰ã€‚ <a href="https://terrifyzhao.github.io/2018/06/30/PCAä¸»æˆåˆ†åˆ†æ.html" target="_blank" rel="external">PCAä¸»æˆåˆ†åˆ†æ</a></p>
<p>Machine Learning ä¸­çš„æ•°æ®ç»´æ•° ä¸ ç°å®ä¸–ç•Œä¸­çš„ç©ºé—´ç»´åº¦æœ¬åŒæœ«ç¦»ã€‚åœ¨ Machine Learning ä¸­ï¼Œæ•°æ®é€šå¸¸éœ€è¦è¢«è¡¨ç¤ºæˆå‘é‡å½¢å¼ä»¥è¾“å…¥æ¨¡å‹è¿›è¡Œè®­ç»ƒã€‚ç”¨ä¸€ä¸ª <strong>ä½ç»´åº¦çš„å‘é‡</strong> è¡¨ç¤ºåŸå§‹ <strong>é«˜çº¬åº¦çš„ç‰¹å¾</strong> æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚ </p>
<p>é™ç»´çš„å¥½å¤„å¾ˆæ˜æ˜¾ï¼Œå®ƒä¸ä»…å¯ä»¥æ•°æ®å‡å°‘å¯¹å†…å­˜çš„å ç”¨ï¼Œè€Œä¸”è¿˜å¯ä»¥åŠ å¿«å­¦ä¹ ç®—æ³•çš„æ‰§è¡Œ</p>
<p>PCA æ˜¯ä¸€ç§ç»å…¸çš„é™ç»´æ–¹æ³•ï¼Œæ˜¯ä¸€ç§<strong>çº¿æ€§ã€éç›‘ç£ã€å…¨å±€çš„</strong>é™ç»´æ–¹æ³•ï¼Œæ˜¯é¢è¯•å¸¸è§é—®é¢˜.</p>
<h2 id="1-Motivation"><a href="#1-Motivation" class="headerlink" title="1. Motivation"></a>1. Motivation</h2><p>å¦‚æœæˆ‘ä»¬æœ‰è®¸å¤šå†—ä½™çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹ç‰¹å¾é‡è¿›è¡Œé™ç»´(Dimensionality Reduction)</p>
<h3 id="1-1-Data-Compression"><a href="#1-1-Data-Compression" class="headerlink" title="1.1 Data Compression"></a>1.1 Data Compression</h3><p><img src="/images/ml/pca/pca-1.png" alt="ä¸€ä¸ª2ç»´åˆ°1ç»´çš„ä¾‹å­"></p>
<p>å¦‚å›¾10-2æ‰€ç¤ºçš„3ç»´åˆ°2ç»´çš„ä¾‹å­ï¼Œé€šè¿‡å¯¹x1,x2,x3çš„å¯è§†åŒ–ï¼Œå‘ç°è™½ç„¶æ ·æœ¬å¤„äº3ç»´ç©ºé—´ï¼Œä½†æ˜¯ä»–ä»¬å¤§å¤šæ•°éƒ½åˆ†å¸ƒåœ¨åŒä¸€ä¸ªå¹³é¢ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æŠ•å½±ï¼Œå°†3ç»´é™ä¸º2ç»´ã€‚</p>
<p><img src="/images/ml/pca/pca-2.png" alt="ä¸€ä¸ª3ç»´åˆ°2ç»´çš„ä¾‹å­"></p>
<h3 id="1-2-Visualization"><a href="#1-2-Visualization" class="headerlink" title="1.2 Visualization"></a>1.2 Visualization</h3><p>ç‰¹å¾é‡ç»´æ•°å¤§äº3æ—¶ï¼Œæˆ‘ä»¬å‡ ä¹ä¸èƒ½å¯¹æ•°æ®è¿›è¡Œå¯è§†åŒ–ã€‚æ‰€ä»¥ï¼Œæœ‰æ—¶ä¸ºäº†å¯¹æ•°æ®è¿›è¡Œå¯è§†åŒ–ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œé™ç»´ã€‚æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°2ä¸ªæˆ–3ä¸ªå…·æœ‰ä»£è¡¨æ€§çš„ç‰¹å¾é‡ï¼Œä»–ä»¬(å¤§è‡´)å¯ä»¥æ¦‚æ‹¬å…¶ä»–çš„ç‰¹å¾é‡ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæè¿°ä¸€ä¸ªå›½å®¶æœ‰å¾ˆå¤šç‰¹å¾é‡ï¼Œæ¯”å¦‚GDPï¼Œäººå‡GDPï¼Œäººå‡å¯¿å‘½ï¼Œå¹³å‡å®¶åº­æ”¶å…¥ç­‰ç­‰ã€‚</p>
<p><img src="/images/ml/pca/pca-3.png" alt="Visualization"></p>
<h2 id="2-Principal-Component-Analysis"><a href="#2-Principal-Component-Analysis" class="headerlink" title="2. Principal Component Analysis"></a>2. Principal Component Analysis</h2><p>ä¸»æˆåˆ†åˆ†æ(Principal Component Analysis : PCA)æ˜¯æœ€å¸¸ç”¨çš„é™ç»´ç®—æ³•ã€‚</p>
<h3 id="2-1-Problem-formulation"><a href="#2-1-Problem-formulation" class="headerlink" title="2.1 Problem formulation"></a>2.1 Problem formulation</h3><p>é¦–å…ˆæˆ‘ä»¬æ€è€ƒå¦‚ä¸‹é—®é¢˜ï¼Œå¯¹äºæ­£äº¤å±æ€§ç©ºé—´(å¯¹2ç»´ç©ºé—´å³ä¸ºç›´è§’åæ ‡ç³»)ä¸­çš„æ ·æœ¬ç‚¹ï¼Œå¦‚ä½•ç”¨ä¸€ä¸ªè¶…å¹³é¢(ç›´çº¿/å¹³é¢çš„é«˜ç»´æ¨å¹¿)å¯¹æ‰€æœ‰æ ·æœ¬è¿›è¡Œæ°å½“çš„è¡¨è¾¾ï¼Ÿ</p>
<p>äº‹å®ä¸Šï¼Œè‹¥å­˜åœ¨è¿™æ ·çš„è¶…å¹³é¢ï¼Œé‚£ä¹ˆå®ƒå¤§æ¦‚åº”å…·æœ‰è¿™æ ·çš„æ€§è´¨ï¼š</p>
<ul>
<li><code>æœ€è¿‘é‡æ„æ€§</code> : æ ·æœ¬ç‚¹åˆ°è¿™ä¸ªè¶…å¹³é¢çš„è·ç¦»éƒ½è¶³å¤Ÿè¿‘ï¼›</li>
<li><code>æœ€å¤§å¯åˆ†æ€§</code> : æ ·æœ¬ç‚¹åœ¨è¿™ä¸ªè¶…å¹³é¢ä¸Šçš„æŠ•å½±èƒ½å°½å¯èƒ½åˆ†å¼€ã€‚</li>
</ul>
<p><img src="/images/ml/pca/pca-4.png" alt="æ ·æœ¬åœ¨3ç»´æ­£äº¤ç©ºé—´çš„åˆ†å¸ƒ"></p>
<blockquote>
<p>å¯¹å½“å‰æ ·æœ¬è€Œè¨€ï¼Œs1å¹³é¢æ¯”s2å¹³é¢çš„æœ€è¿‘é‡æ„æ€§è¦å¥½ï¼ˆæ ·æœ¬ç¦»å¹³é¢çš„è·ç¦»æ›´è¿‘ï¼‰ï¼›</p>
</blockquote>
<p><img src="/images/ml/pca/pca-5.png" alt="æ ·æœ¬æŠ•å½±åœ¨2ç»´å¹³é¢åçš„ç»“æœ"></p>
<blockquote>
<p>å¯¹å½“å‰æ ·æœ¬è€Œè¨€ï¼Œs1å¹³é¢(å·¦è¾¹) æ¯”s2å¹³é¢çš„æœ€å¤§å¯åˆ†æ€§è¦å¥½(æ ·æœ¬ç‚¹æ›´åˆ†æ•£)ã€‚</p>
<p>æ€»ç»“: è®©ä¸Šé¢çš„ä¾‹å­ä¹Ÿè¯´æ˜äº† <strong>æœ€è¿‘é‡æ„æ€§</strong> å’Œ <strong>æœ€å¤§å¯åˆ†æ€§</strong> å¯ä»¥åŒæ—¶æ»¡è¶³ã€‚åˆ†åˆ«ä»¥æœ€è¿‘é‡æ„æ€§å’Œæœ€å¤§å¯åˆ†æ€§ä¸ºç›®æ ‡ï¼Œèƒ½å¤Ÿå¾—åˆ° <strong>PCA çš„ä¸¤ç§ç­‰ä»·æ¨å¯¼</strong>ã€‚</p>
</blockquote>
<p><strong>ä¸¢å¤±ä¿¡æ¯å¯¹æ¯”ï¼š</strong></p>
<blockquote>
<p>s2å¹³é¢ è¿›è¡ŒæŠ•å½±é™ç»´ï¼Œæˆ‘ä»¬ä¼šä¸¢å¤±æ›´å¤šï¼ˆç›¸å½“å¤šï¼‰çš„ç‰¹å¾é‡ä¿¡æ¯ï¼Œå› ä¸ºå®ƒçš„æŠ•å½±ç»“æœç”šè‡³å¯ä»¥åœ¨è½¬åŒ–ä¸º1ç»´ã€‚</p>
<p>è€Œ s1å¹³é¢ ä¸Šçš„æŠ•å½±åŒ…å«æ›´å¤šçš„ä¿¡æ¯(ä¸¢å¤±çš„æ›´å°‘)ã€‚</p>
</blockquote>
<p><strong>å°†ç‰¹å¾é‡ä»nç»´é™åˆ°kç»´ï¼š</strong></p>
<blockquote>
<ol>
<li><p>ä»¥æœ€è¿‘é‡æ„æ€§ä¸ºç›®æ ‡ï¼ŒPCAçš„ç›®æ ‡æ˜¯æ‰¾åˆ°kä¸ªå‘é‡ï¼Œå°†æ‰€æœ‰æ ·æœ¬æŠ•å½±åˆ°è¿™kä¸ªå‘é‡æ„æˆçš„è¶…å¹³é¢ï¼Œä½¿å¾—<strong>æŠ•å½±çš„è·ç¦»æœ€å°</strong>ï¼ˆæˆ–è€…è¯´æŠ•å½±è¯¯å·®projection erroræœ€å°ï¼‰ã€‚</p>
</li>
<li><p>ä»¥æœ€å¤§å¯åˆ†æ€§ä¸ºç›®æ ‡ï¼ŒPCAçš„ç›®æ ‡æ˜¯æ‰¾åˆ°kä¸ªå‘é‡ï¼Œå°†æ‰€æœ‰æ ·æœ¬æŠ•å½±åˆ°è¿™kä¸ªå‘é‡æ„æˆçš„è¶…å¹³é¢ï¼Œä½¿å¾—<strong>æ ·æœ¬ç‚¹çš„æŠ•å½±èƒ½å¤Ÿå°½å¯èƒ½çš„åˆ†å¼€</strong>ï¼Œä¹Ÿå°±æ˜¯ä½¿æŠ•å½±åçš„<strong>æ ·æœ¬ç‚¹æ–¹å·®æœ€å¤§åŒ–</strong>ã€‚</p>
</li>
</ol>
</blockquote>
<p>æ‘˜è¦ï¼š</p>
<blockquote>
<p>PCA ä¸ çº¿æ€§å›å½’ æœ‰ä¸€ç‚¹ç›¸ä¼¼ï¼Œä½†æ˜¯ä»–ä»¬æ˜¯2ç§ä¸åŒçš„ç®—æ³•.</p>
<p><a href="https://blog.csdn.net/u014665013/article/details/78669835" target="_blank" rel="external">good CSDN ä¸»æˆåˆ†åˆ†æPCAä¹‹åæ–¹å·®çŸ©é˜µçš„ç†è§£</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/37609917" target="_blank" rel="external">çŸ¥ä¹: å¦‚ä½•ç›´è§‚åœ°ç†è§£ã€Œåæ–¹å·®çŸ©é˜µã€ï¼Ÿ</a></p>
<p><a href="https://blog.csdn.net/babywong/article/details/50085239" target="_blank" rel="external">PCAä¸ºä»€ä¹ˆè¦ç”¨åæ–¹å·®çŸ©é˜µï¼Ÿ</a></p>
<p><a href="https://mp.weixin.qq.com/s/QqqLAxx92v_HOg7QBKrK6A" target="_blank" rel="external">çº¿æ€§é™ç»´æ–¹æ³•ï¼ˆä»£ç ç¯‡ï¼‰| æœºå™¨å­¦ä¹ ä½ ä¼šé‡åˆ°çš„â€œå‘â€</a></p>
<p><a href="http://www.cnblogs.com/pinard/p/6239403.html" target="_blank" rel="external">ä¸»æˆåˆ†åˆ†æï¼ˆPCAï¼‰åŸç†æ€»ç»“</a></p>
<p><a href="https://www.cnblogs.com/pinard/p/6243025.html" target="_blank" rel="external">åˆ˜å»ºå¹³Pinard ç”¨scikit-learnå­¦ä¹ ä¸»æˆåˆ†åˆ†æ(PCA)</a></p>
<p>PCAä¸ºä»€ä¹ˆè¦ç”¨åæ–¹å·®çŸ©é˜µçš„ç‰¹å¾å‘é‡çŸ©é˜µæ¥åšæŠ•å½±çŸ©é˜µå‘¢ï¼Ÿä¸ºç¥é©¬å•Šä¸ºç¥é©¬ï¼Ÿ</p>
<p>é™ç»´çš„ç›®çš„å°±æ˜¯â€œé™å™ªâ€å’Œâ€œå»å†—ä½™â€ã€‚â€œé™å™ªâ€çš„ç›®çš„å°±æ˜¯ä½¿ä¿ç•™ä¸‹æ¥çš„ç»´åº¦é—´çš„ç›¸å…³æ€§å°½å¯èƒ½å°ï¼Œè€Œâ€œå»å†—ä½™â€çš„ç›®çš„å°±æ˜¯ä½¿ä¿ç•™ä¸‹æ¥çš„ç»´åº¦å«æœ‰çš„â€œèƒ½é‡â€å³æ–¹å·®å°½å¯èƒ½å¤§ã€‚é‚£é¦–å…ˆçš„é¦–å…ˆï¼Œæˆ‘ä»¬å¾—éœ€è¦çŸ¥é“å„ç»´åº¦é—´çš„ç›¸å…³æ€§ä»¥åŠä¸ªç»´åº¦ä¸Šçš„æ–¹å·®å•Šï¼é‚£æœ‰ä»€ä¹ˆæ•°æ®ç»“æ„èƒ½åŒæ—¶è¡¨ç°ä¸åŒç»´åº¦é—´çš„<strong><code>ç›¸å…³æ€§</code></strong>ä»¥åŠå„ä¸ª<strong><code>ç»´åº¦ä¸Šçš„æ–¹å·®</code></strong>å‘¢ï¼Ÿè‡ªç„¶æ˜¯åæ–¹å·®çŸ©é˜µï¼</p>
<p>åæ–¹å·®çŸ©é˜µåº¦é‡çš„æ˜¯ç»´åº¦ä¸ç»´åº¦ä¹‹é—´çš„å…³ç³»ï¼Œè€Œéæ ·æœ¬ä¸æ ·æœ¬ä¹‹é—´ã€‚åæ–¹å·®çŸ©é˜µçš„ä¸»å¯¹è§’çº¿ä¸Šçš„å…ƒç´ æ˜¯å„ä¸ª<code>ç»´åº¦ä¸Šçš„æ–¹å·®(å³èƒ½é‡)</code>ï¼Œå…¶ä»–å…ƒç´ æ˜¯ä¸¤ä¸¤ç»´åº¦é—´çš„<code>åæ–¹å·®</code>(å³ç›¸å…³æ€§)ã€‚æˆ‘ä»¬è¦çš„ä¸œè¥¿åæ–¹å·®çŸ©é˜µéƒ½æœ‰äº†ï¼Œå…ˆæ¥çœ‹â€œé™å™ªâ€ï¼Œè®©ä¿ç•™ä¸‹çš„ä¸åŒç»´åº¦é—´çš„<code>ç›¸å…³æ€§å°½å¯èƒ½å°</code>ï¼Œä¹Ÿå°±æ˜¯è¯´è®©<code>åæ–¹å·®çŸ©é˜µä¸­éå¯¹è§’çº¿å…ƒç´ éƒ½åŸºæœ¬ä¸ºé›¶</code>ã€‚è¾¾åˆ°è¿™ä¸ªç›®çš„çš„æ–¹å¼è‡ªç„¶ä¸ç”¨è¯´ï¼Œçº¿ä»£ä¸­å¥–çš„å¾ˆæ˜ç¡®â€”â€”çŸ©é˜µå¯¹è§’åŒ–ã€‚</p>
<p>æ–¹å·®æ˜¯ç”¨æ¥åº¦é‡å•ä¸ªéšæœºå˜é‡çš„ç¦»æ•£ç¨‹åº¦ï¼Œè€Œåæ–¹å·®åˆ™ä¸€èˆ¬ç”¨æ¥åˆ»ç”»ä¸¤ä¸ªéšæœºå˜é‡çš„ç›¸ä¼¼ç¨‹åº¦.</p>
</blockquote>
<h3 id="2-2-PCA-Algorithm"><a href="#2-2-PCA-Algorithm" class="headerlink" title="2.2 PCA Algorithm"></a>2.2 PCA Algorithm</h3><p>è¾“å…¥ï¼š </p>
<blockquote>
<p>è®­ç»ƒé›† $x^{(1)}, x^{(2)}, â€¦, x^{(m)}$ å’Œ ä½ç»´ç©ºé—´ç»´æ•° $k$</p>
</blockquote>
<p>è¿‡ç¨‹ï¼š</p>
<blockquote>
<p>(1) æ•°æ®é¢„å¤„ç†ï¼šå¯¹æ‰€æœ‰æ ·æœ¬è¿›è¡Œä¸­å¿ƒåŒ–(å³ä½¿å¾—æ ·æœ¬å’Œä¸º0)</p>
<p><img src="/images/ml/pca/pca-7.png" width="350"></p>
<p>(2) è®¡ç®—æ ·æœ¬çš„åæ–¹å·®çŸ©é˜µ</p>
<p><img src="/images/ml/pca/pca-8.png" width="350"></p>
<p>(3) å¯¹2ä¸­æ±‚å¾—çš„åæ–¹å·®çŸ©é˜µSigmaè¿›è¡Œç‰¹å¾å€¼åˆ†è§£</p>
<p>  &nbsp;&nbsp;&nbsp;&nbsp;åœ¨å®è·µä¸­é€šå¸¸å¯¹åæ–¹å·®çŸ©é˜µè¿›è¡Œ <strong>SVDåˆ†è§£</strong> ä»£æ›¿ ç‰¹å¾å€¼åˆ†è§£.<br>$$<br>    [U, S, V] = svd(Sigma);<br>$$</p>
<p>(4) å–æœ€å¤§çš„kä¸ªç‰¹å¾å€¼æ‰€å¯¹åº”çš„ç‰¹å¾å‘é‡ $u^{(1)}, u^{(2)}, â€¦, u^{(k)}$</p>
</blockquote>
<h3 id="2-3-Choosing-the-Number-of-Principal-Components"><a href="#2-3-Choosing-the-Number-of-Principal-Components" class="headerlink" title="2.3 Choosing the Number of Principal Components"></a>2.3 Choosing the Number of Principal Components</h3><p>å¦‚ä½•é€‰æ‹©kï¼ˆåˆç§°ä¸ºä¸»æˆåˆ†çš„ä¸ªæ•°ï¼‰çš„å€¼ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œè¯•æƒ³æˆ‘ä»¬å¯ä»¥ä½¿ç”¨PCAæ¥å‹ç¼©æ•°æ®ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•è§£å‹ï¼Ÿæˆ–è€…è¯´å¦‚ä½•å›åˆ°åŸæœ¬çš„æ ·æœ¬å€¼ï¼Ÿäº‹å®ä¸Šæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸‹åˆ—ç­‰å¼è®¡ç®—å‡ºåŸå§‹æ•°æ®çš„è¿‘ä¼¼å€¼Xapproxï¼š</p>
<h3 id="2-4-Advice-for-Applying-PCA"><a href="#2-4-Advice-for-Applying-PCA" class="headerlink" title="2.4 Advice for Applying PCA"></a>2.4 Advice for Applying PCA</h3><ol>
<li><p>PCA é€šå¸¸ç”¨æ¥åŠ å¿«ç›‘ç£å­¦ä¹ ç®—æ³•.</p>
</li>
<li><p>PCA åº”è¯¥åªæ˜¯é€šè¿‡ <strong>è®­ç»ƒé›†çš„ç‰¹å¾é‡</strong> æ¥è·å– æŠ•å½±çŸ©é˜µ Ureduceï¼Œè€Œä¸æ˜¯äº¤å‰æ£€éªŒé›†æˆ–æµ‹è¯•é›†ã€‚<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ä½†æ˜¯è·å–åˆ° Ureduce ä¹‹åå¯ä»¥åº”ç”¨åœ¨äº¤å‰æ£€éªŒé›†å’Œæµ‹è¯•é›†ã€‚</p>
</li>
<li>é¿å…ä½¿ç”¨ PCA æ¥é˜²æ­¢ overfitingï¼ŒPCA åªæ˜¯å¯¹ ç‰¹å¾ $X$ è¿›è¡Œé™ç»´ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘ $Y$ çš„å€¼ï¼›</li>
<li>ä¸åº”åœ¨é¡¹ç›®å¼€å§‹å°±ç”¨PCA: èŠ±å¤§é‡æ—¶é—´æ¥é€‰æ‹©kå€¼ï¼Œå¯èƒ½é¡¹ç›®å¹¶ä¸éœ€ç”¨PCAæ¥é™ç»´ã€‚åŒæ—¶é™ç»´å®šä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ã€‚</li>
<li>ä»…åœ¨éœ€ç”¨ PCA çš„æ—¶ä½¿ç”¨ PCA: é™ç»´ä¸¢å¤±çš„ä¿¡æ¯å¯èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯å™ªå£°ï¼Œä½¿ç”¨ PCA å¯ä»¥èµ·åˆ°ä¸€å®šçš„å»å™ªæ•ˆæœã€‚</li>
<li>PCA é€šå¸¸ç”¨æ¥ Data Compression ä»¥åŠ å¿«ç®—æ³•ï¼Œå‡å°‘å†…å­˜ä½¿ç”¨æˆ–ç£ç›˜å ç”¨ï¼Œæˆ–è€…ç”¨äºå¯è§†åŒ–(k=2, 3)ã€‚</li>
</ol>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><ul>
<li>ç™¾é¢æœºå™¨å­¦ä¹ </li>
<li><a href="https://www.cnblogs.com/llhthinker/p/5522054.html" target="_blank" rel="external">Stanford Machine Learning</a></li>
<li><a href="https://study.163.com/course/courseLearn.htm?courseId=1004570029#/learn/video?lessonId=1052320898&amp;courseId=1004570029" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[FastText ç”¨äºé«˜æ•ˆæ–‡æœ¬åˆ†ç±»çš„æŠ€å·§]]></title>
      <url>http://shopee.ai/2018/12/19/nlp/fastText/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/fasttext-logo.png" width="600" alt="fasttext word2vec"></p>
<a id="more"></a>
<p>fastText æ˜¯ 2016å¹´ FAIR(Facebook AIResearch) æ¨å‡ºçš„ä¸€æ¬¾æ–‡æœ¬åˆ†ç±»ä¸å‘é‡åŒ–å·¥å…·ã€‚</p>
<p>fastText æ˜¯ æ™ºæ…§ä¸ç¾è²Œå¹¶é‡çš„ <strong>æ–‡æœ¬åˆ†ç±»</strong> and <strong>å‘é‡åŒ–å·¥å…·</strong> çš„é¡¹ç›®ï¼Œå®ƒæ˜¯æœ‰ä¸¤éƒ¨åˆ†ç»„æˆçš„ã€‚ </p>
<p>è®ºæ–‡1é“¾æ¥ï¼š <a href="https://arxiv.org/abs/1607.01759" target="_blank" rel="external">Bag of Tricks for Efficient Text Classification</a></p>
<p>è®ºæ–‡2é“¾æ¥ï¼š <a href="https://arxiv.org/abs/1607.01759" target="_blank" rel="external">Enriching Word Vectors with Subword Information</a></p>
<p>githubé“¾æ¥ï¼š <a href="https://github.com/facebookresearch/fastText" target="_blank" rel="external">facebookresearch/fastText</a></p>
<p>fastText èƒ½å¤Ÿåšåˆ°æ•ˆæœå¥½ï¼Œé€Ÿåº¦å¿«ï¼Œä¸»è¦ä¾é ä¸¤ä¸ªç§˜å¯†æ­¦å™¨ï¼š</p>
<blockquote>
<ol>
<li>åˆ©ç”¨äº†è¯å†…çš„n-gramä¿¡æ¯(subword n-gram information)</li>
<li>ç”¨åˆ°äº†å±‚æ¬¡åŒ–Softmaxå›å½’(Hierarchical Softmax) çš„è®­ç»ƒ trick.</li>
</ol>
</blockquote>
<p><strong>fastText èƒŒæ™¯</strong></p>
<p>è‹±è¯­å•è¯é€šå¸¸æœ‰å…¶å†…éƒ¨ç»“æ„å’Œå½¢æˆæ–¹å¼ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥ä»â€œdogâ€ã€â€œdogsâ€å’Œâ€œdogcatcherâ€çš„å­—é¢ä¸Šæ¨æµ‹ä»–ä»¬çš„å…³ç³»ã€‚è¿™äº›è¯éƒ½æœ‰åŒä¸€ä¸ªè¯æ ¹â€œdogâ€ï¼Œè¿™ä¸ªå…³è”å¯ä»¥æ¨å¹¿è‡³å…¶ä»–è¯æ±‡ã€‚ä¾‹å¦‚ï¼Œâ€œdogâ€å’Œâ€œdogsâ€çš„å…³ç³»å¦‚åŒâ€œcatâ€å’Œâ€œcatsâ€çš„å…³ç³»ï¼Œâ€œboyâ€å’Œâ€œboyfriendâ€çš„å…³ç³»å¦‚åŒâ€œgirlâ€å’Œâ€œgirlfriendâ€çš„å…³ç³»ã€‚å¾ˆå¤šè¯æ ¹æ®åœºæ™¯ä¸åŒæœ‰å¤šç§ä¸åŒçš„å½¢æ€ã€‚æ„è¯å­¦ï¼ˆmorphologyï¼‰ä½œä¸ºè¯­è¨€å­¦çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ï¼Œç ”ç©¶çš„æ­£æ˜¯è¯çš„å†…éƒ¨ç»“æ„å’Œå½¢æˆæ–¹å¼ã€‚</p>
<p>åœ¨ word2vec ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥åˆ©ç”¨æ„è¯å­¦ä¸­çš„ä¿¡æ¯ã€‚æ— è®ºæ˜¯åœ¨ <strong>skip-gram</strong> è¿˜æ˜¯ <strong>CBOW</strong> ä¸­ï¼Œæˆ‘ä»¬å°†å½¢æ€ä¸åŒçš„å•è¯ç”¨ä¸åŒçš„å‘é‡æ¥è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œâ€œdogâ€å’Œâ€œdogsâ€åˆ†åˆ«ç”¨ä¸¤ä¸ªä¸åŒçš„å‘é‡è¡¨ç¤ºï¼Œè€Œæ¨¡å‹ä¸­å¹¶æœªç›´æ¥è¡¨è¾¾è¿™ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å…³ç³»ã€‚æœ‰é‰´äºæ­¤ï¼ŒfastText æå‡ºäº†å­è¯åµŒå…¥ï¼ˆsubword embeddingï¼‰çš„æ–¹æ³•ï¼Œä»è€Œè¯•å›¾å°†æ„è¯ä¿¡æ¯å¼•å…¥ word2vec ä¸­çš„ <strong>skip-gram</strong>ã€‚</p>
<p><strong>å­è¯åµŒå…¥ subword embedding</strong></p>
<p>åœ¨ fastText ä¸­ï¼Œæ¯ä¸ªä¸­å¿ƒè¯è¢«è¡¨ç¤ºæˆå­è¯çš„é›†åˆã€‚ä¸‹é¢æˆ‘ä»¬ç”¨å•è¯â€œwhereâ€ä½œä¸ºä¾‹å­æ¥äº†è§£å­è¯æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨å•è¯çš„é¦–å°¾åˆ†åˆ«æ·»åŠ ç‰¹æ®Šå­—ç¬¦â€œ&lt;â€å’Œâ€œ&gt;â€ä»¥åŒºåˆ†ä½œä¸ºå‰åç¼€çš„å­è¯ã€‚ç„¶åï¼Œå°†å•è¯å½“æˆä¸€ä¸ªç”±å­—ç¬¦æ„æˆçš„åºåˆ—æ¥æå– $n$ å…ƒè¯­æ³•ã€‚ä¾‹å¦‚å½“ $n=3$ æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°æ‰€æœ‰é•¿åº¦ä¸º 3 çš„å­è¯ï¼š</p>
<p>$$&lt;.wh ï¼Œ whe ï¼Œ her ï¼Œ ere ï¼Œ re&gt;$$</p>
<p>ä»¥åŠç‰¹æ®Šå­è¯ â€œ&lt;.where&gt;â€ã€‚</p>
<p>åœ¨ fastText ä¸­ï¼Œå¯¹äºä¸€ä¸ªè¯ $w$ï¼Œå°†å®ƒæ‰€æœ‰é•¿åº¦åœ¨ 3 åˆ° 6 çš„å­è¯å’Œç‰¹æ®Šå­è¯çš„å¹¶é›†è®°ä¸º $\mathcal{G}_w$ã€‚é‚£ä¹ˆè¯å…¸åˆ™æ˜¯æ‰€æœ‰è¯çš„å­è¯é›†åˆçš„å¹¶é›†ã€‚å‡è®¾è¯å…¸ä¸­å­è¯ $g$ çš„å‘é‡ä¸º $\boldsymbol{z}_g$ï¼Œé‚£ä¹ˆè·³å­—æ¨¡å‹ä¸­è¯ $w$ çš„ä½œä¸ºä¸­å¿ƒè¯çš„å‘é‡ $\boldsymbol{v}_w$ åˆ™è¡¨ç¤ºæˆ</p>
<p>$$<br>\boldsymbol{v}_w = \sum_{g\in\mathcal{G}_w} \boldsymbol{z}_g.<br>$$</p>
<p>FastText çš„å…¶ä½™éƒ¨åˆ†åŒ <strong>skip-gram</strong> ä¸€è‡´ï¼Œä¸åœ¨æ­¤é‡å¤ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒåŒ <strong>skip-gram</strong> ç›¸æ¯”ï¼ŒfastText ä¸­è¯å…¸è§„æ¨¡æ›´å¤§ï¼Œé€ æˆæ¨¡å‹å‚æ•°æ›´å¤šï¼ŒåŒæ—¶ä¸€ä¸ªè¯çš„å‘é‡éœ€è¦å¯¹æ‰€æœ‰å­è¯å‘é‡æ±‚å’Œï¼Œç»§è€Œå¯¼è‡´è®¡ç®—å¤æ‚åº¦æ›´é«˜ã€‚ä½†ä¸æ­¤åŒæ—¶ï¼Œè¾ƒç”Ÿåƒ»çš„å¤æ‚å•è¯ï¼Œç”šè‡³æ˜¯è¯å…¸ä¸­æ²¡æœ‰çš„å•è¯ï¼Œå¯èƒ½ä¼šä»åŒå®ƒç»“æ„ç±»ä¼¼çš„å…¶ä»–è¯é‚£é‡Œè·å–æ›´å¥½çš„è¯å‘é‡è¡¨ç¤ºã€‚</p>
<h2 id="1-å‰ç½®çŸ¥è¯†"><a href="#1-å‰ç½®çŸ¥è¯†" class="headerlink" title="1. å‰ç½®çŸ¥è¯†"></a>1. å‰ç½®çŸ¥è¯†</h2><h3 id="1-1-Softmax-Regression"><a href="#1-1-Softmax-Regression" class="headerlink" title="1.1 Softmax Regression"></a>1.1 Softmax Regression</h3><p>Softmax Regression (å›å½’) åˆè¢«ç§°ä½œå¤šé¡¹LRï¼ˆmultinomial logistic regressionï¼‰ï¼Œå®ƒæ˜¯LRåœ¨å¤šç±»åˆ«ä»»åŠ¡ä¸Šçš„æ¨å¹¿ã€‚</p>
<p><img src="/images/nlp/fastText2.jpg" width="850" img=""></p>
<h3 id="1-2-Hierarchical-Softmax"><a href="#1-2-Hierarchical-Softmax" class="headerlink" title="1.2 Hierarchical Softmax"></a>1.2 Hierarchical Softmax</h3><h3 id="1-3-n-gramâ€™s-feature"><a href="#1-3-n-gramâ€™s-feature" class="headerlink" title="1.3 n-gramâ€™s feature"></a>1.3 n-gramâ€™s feature</h3><p>åœ¨æ–‡æœ¬ç‰¹å¾æå–ä¸­ï¼Œå¸¸å¸¸èƒ½çœ‹åˆ° n-gram çš„èº«å½±ã€‚å®ƒæ˜¯ä¸€ç§åŸºäºè¯­è¨€æ¨¡å‹çš„ç®—æ³•ï¼ŒåŸºæœ¬æ€æƒ³æ˜¯å°†æ–‡æœ¬å†…å®¹æŒ‰ç…§å­—èŠ‚é¡ºåºè¿›è¡Œå¤§å°ä¸º N çš„æ»‘åŠ¨çª—å£æ“ä½œï¼Œæœ€ç»ˆå½¢æˆé•¿åº¦ä¸º N çš„å­—èŠ‚ç‰‡æ®µåºåˆ—ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<p><strong>å­—ç²’åº¦</strong></p>
<blockquote>
<p>æˆ‘æ¥åˆ°è¾¾è§‚æ•°æ®å‚è§‚</p>
<ul>
<li><p>ç›¸åº”çš„bigramç‰¹å¾ä¸ºï¼šæˆ‘æ¥ æ¥åˆ° åˆ°è¾¾ è¾¾è§‚ è§‚æ•° æ•°æ® æ®å‚ å‚è§‚</p>
</li>
<li><p>ç›¸åº”çš„trigramç‰¹å¾ä¸ºï¼šæˆ‘æ¥åˆ° æ¥åˆ°è¾¾ åˆ°è¾¾è§‚ è¾¾è§‚æ•° è§‚æ•°æ® æ•°æ®å‚ æ®å‚è§‚</p>
</li>
</ul>
</blockquote>
<p><strong>è¯ç²’åº¦</strong></p>
<blockquote>
<p>æˆ‘ æ¥åˆ° è¾¾è§‚æ•°æ® å‚è§‚</p>
<ul>
<li><p>ç›¸åº”çš„bigramç‰¹å¾ä¸ºï¼šæˆ‘/æ¥åˆ° æ¥åˆ°/è¾¾è§‚æ•°æ® è¾¾è§‚æ•°æ®/å‚è§‚</p>
</li>
<li><p>ç›¸åº”çš„trigramç‰¹å¾ä¸ºï¼šæˆ‘/æ¥åˆ°/è¾¾è§‚æ•°æ® æ¥åˆ°/è¾¾è§‚æ•°æ®/å‚è§‚ </p>
</li>
</ul>
</blockquote>
<p><strong>å°ç»“ï¼š</strong></p>
<p>n-gramä¸­çš„gramæ ¹æ®ç²’åº¦ä¸åŒã€‚å®ƒå¯ä»¥æ˜¯å­—ç²’åº¦ï¼Œä¹Ÿå¯ä»¥æ˜¯è¯ç²’åº¦çš„ã€‚</p>
<p>n-gram äº§ç”Ÿçš„ç‰¹å¾åªæ˜¯ä½œä¸º<strong>æ–‡æœ¬ç‰¹å¾çš„å€™é€‰é›†</strong>ï¼Œä½ åé¢å¯èƒ½ä¼šé‡‡ç”¨ä¿¡æ¯ç†µã€å¡æ–¹ç»Ÿè®¡ã€IDFç­‰æ–‡æœ¬ç‰¹å¾é€‰æ‹©æ–¹å¼ç­›é€‰å‡ºæ¯”è¾ƒé‡è¦ç‰¹å¾ã€‚</p>
<h2 id="2-word2vec-æ¶æ„åŸç†"><a href="#2-word2vec-æ¶æ„åŸç†" class="headerlink" title="2. word2vec æ¶æ„åŸç†"></a>2. word2vec æ¶æ„åŸç†</h2><h3 id="2-1-CBOW-æ¨¡å‹æ¶æ„"><a href="#2-1-CBOW-æ¨¡å‹æ¶æ„" class="headerlink" title="2.1 CBOW æ¨¡å‹æ¶æ„"></a>2.1 CBOW æ¨¡å‹æ¶æ„</h3><h3 id="2-2-å‰å‘ä¼ æ’­"><a href="#2-2-å‰å‘ä¼ æ’­" class="headerlink" title="2.2 å‰å‘ä¼ æ’­"></a>2.2 å‰å‘ä¼ æ’­</h3><h3 id="2-3-åå‘ä¼ æ’­"><a href="#2-3-åå‘ä¼ æ’­" class="headerlink" title="2.3 åå‘ä¼ æ’­"></a>2.3 åå‘ä¼ æ’­</h3><h2 id="3-fastText-æ ¸å¿ƒæ€æƒ³"><a href="#3-fastText-æ ¸å¿ƒæ€æƒ³" class="headerlink" title="3. fastText æ ¸å¿ƒæ€æƒ³"></a>3. fastText æ ¸å¿ƒæ€æƒ³</h2><h3 id="3-1-å­—ç¬¦çº§-n-gram"><a href="#3-1-å­—ç¬¦çº§-n-gram" class="headerlink" title="3.1 å­—ç¬¦çº§ n-gram"></a>3.1 å­—ç¬¦çº§ n-gram</h3><h3 id="3-2-æ¨¡å‹æ¶æ„"><a href="#3-2-æ¨¡å‹æ¶æ„" class="headerlink" title="3.2 æ¨¡å‹æ¶æ„"></a>3.2 æ¨¡å‹æ¶æ„</h3><h3 id="3-3-æ ¸å¿ƒæ€æƒ³"><a href="#3-3-æ ¸å¿ƒæ€æƒ³" class="headerlink" title="3.3 æ ¸å¿ƒæ€æƒ³"></a>3.3 æ ¸å¿ƒæ€æƒ³</h3><p>ä»”ç»†è§‚å¯Ÿæ¨¡å‹çš„ååŠéƒ¨åˆ†ï¼Œå³ä»éšå«å±‚è¾“å‡ºåˆ°è¾“å‡ºå±‚è¾“å‡ºï¼Œä¼šå‘ç°å®ƒå°±æ˜¯ä¸€ä¸ªsoftmaxçº¿æ€§å¤šç±»åˆ«åˆ†ç±»å™¨ï¼Œåˆ†ç±»å™¨çš„è¾“å…¥æ˜¯ä¸€ä¸ªç”¨æ¥è¡¨å¾å½“å‰æ–‡æ¡£çš„å‘é‡ï¼›æ¨¡å‹çš„å‰åŠéƒ¨åˆ†ï¼Œå³ä»è¾“å…¥å±‚è¾“å…¥åˆ°éšå«å±‚è¾“å‡ºéƒ¨åˆ†ï¼Œä¸»è¦åœ¨åšä¸€ä»¶äº‹æƒ…ï¼šç”Ÿæˆç”¨æ¥è¡¨å¾æ–‡æ¡£çš„å‘é‡ã€‚é‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•åšçš„å‘¢ï¼Ÿå åŠ æ„æˆè¿™ç¯‡æ–‡æ¡£çš„æ‰€æœ‰è¯åŠn-gramçš„è¯å‘é‡ï¼Œç„¶åå–å¹³å‡ã€‚å åŠ è¯å‘é‡èƒŒåçš„æ€æƒ³å°±æ˜¯ä¼ ç»Ÿçš„è¯è¢‹æ³•ï¼Œå³å°†æ–‡æ¡£çœ‹æˆä¸€ä¸ªç”±è¯æ„æˆçš„é›†åˆã€‚</p>
<p>äºæ˜¯fastTextçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼šå°†æ•´ç¯‡æ–‡æ¡£çš„è¯åŠn-gramå‘é‡å åŠ å¹³å‡å¾—åˆ°æ–‡æ¡£å‘é‡ï¼Œç„¶åä½¿ç”¨æ–‡æ¡£å‘é‡åšsoftmaxå¤šåˆ†ç±»ã€‚è¿™ä¸­é—´æ¶‰åŠåˆ°ä¸¤ä¸ªæŠ€å·§ï¼šå­—ç¬¦çº§n-gramç‰¹å¾çš„å¼•å…¥ä»¥åŠåˆ†å±‚Softmaxåˆ†ç±»ã€‚</p>
<h3 id="3-4-åˆ†ç±»æ•ˆæœ"><a href="#3-4-åˆ†ç±»æ•ˆæœ" class="headerlink" title="3.4 åˆ†ç±»æ•ˆæœ"></a>3.4 åˆ†ç±»æ•ˆæœ</h3><p>è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸ºä½•fastTextçš„åˆ†ç±»æ•ˆæœå¸¸å¸¸ä¸è¾“äºä¼ ç»Ÿçš„éçº¿æ€§åˆ†ç±»å™¨ï¼Ÿ</p>
<p><strong>å‡è®¾æˆ‘ä»¬æœ‰ä¸¤æ®µæ–‡æœ¬ï¼š</strong></p>
<blockquote>
<p>æˆ‘ æ¥åˆ° è¾¾è§‚æ•°æ®</p>
<p>ä¿º å»äº† è¾¾è€Œè§‚ä¿¡æ¯ç§‘æŠ€</p>
</blockquote>
<p>è¿™ä¸¤æ®µæ–‡æœ¬æ„æ€å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œå¦‚æœè¦åˆ†ç±»ï¼Œè‚¯å®šè¦åˆ†åˆ°åŒä¸€ä¸ªç±»ä¸­å»ã€‚ä½†åœ¨ä¼ ç»Ÿçš„åˆ†ç±»å™¨ä¸­ï¼Œç”¨æ¥è¡¨å¾è¿™ä¸¤æ®µæ–‡æœ¬çš„å‘é‡å¯èƒ½å·®è·éå¸¸å¤§ã€‚ä¼ ç»Ÿçš„æ–‡æœ¬åˆ†ç±»ä¸­ï¼Œä½ éœ€è¦è®¡ç®—å‡ºæ¯ä¸ªè¯çš„æƒé‡ï¼Œæ¯”å¦‚tfidfå€¼ï¼Œ â€œæˆ‘â€å’Œâ€œä¿ºâ€ ç®—å‡ºçš„tfidfå€¼ç›¸å·®å¯èƒ½ä¼šæ¯”è¾ƒå¤§ï¼Œå…¶å®ƒè¯ç±»ä¼¼ï¼Œäºæ˜¯ï¼ŒVSMï¼ˆå‘é‡ç©ºé—´æ¨¡å‹ï¼‰ä¸­ç”¨æ¥è¡¨å¾è¿™ä¸¤æ®µæ–‡æœ¬çš„æ–‡æœ¬å‘é‡å·®åˆ«å¯èƒ½æ¯”è¾ƒå¤§ã€‚</p>
<p>ä½†æ˜¯fastTextå°±ä¸ä¸€æ ·äº†ï¼Œå®ƒæ˜¯ç”¨å•è¯çš„embeddingå åŠ è·å¾—çš„æ–‡æ¡£å‘é‡ï¼Œè¯å‘é‡çš„é‡è¦ç‰¹ç‚¹å°±æ˜¯å‘é‡çš„è·ç¦»å¯ä»¥ç”¨æ¥è¡¡é‡å•è¯é—´çš„è¯­ä¹‰ç›¸ä¼¼ç¨‹åº¦ï¼Œäºæ˜¯ï¼Œåœ¨fastTextæ¨¡å‹ä¸­ï¼Œè¿™ä¸¤æ®µæ–‡æœ¬çš„å‘é‡åº”è¯¥æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œäºæ˜¯ï¼Œå®ƒä»¬å¾ˆå¤§æ¦‚ç‡ä¼šè¢«åˆ†åˆ°åŒä¸€ä¸ªç±»ä¸­ã€‚</p>
<p><strong>fastTextæ•ˆæœå¥½çš„åŸå› ï¼š</strong></p>
<blockquote>
<ol>
<li>ä½¿ç”¨è¯embeddingè€Œéè¯æœ¬èº«ä½œä¸ºç‰¹å¾</li>
<li>å­—ç¬¦çº§n-gramç‰¹å¾çš„å¼•å…¥å¯¹åˆ†ç±»æ•ˆæœä¼šæœ‰ä¸€äº›æå‡ </li>
</ol>
</blockquote>
<h2 id="4-fastText-keras-å®æˆ˜"><a href="#4-fastText-keras-å®æˆ˜" class="headerlink" title="4. fastText keras å®æˆ˜"></a>4. fastText keras å®æˆ˜</h2><h2 id="6-å°ç»“"><a href="#6-å°ç»“" class="headerlink" title="6. å°ç»“"></a>6. å°ç»“</h2><ul>
<li>FastText æå‡ºäº†å­è¯åµŒå…¥æ–¹æ³•ã€‚åœ¨ word2vec <strong>skip-gram</strong> åŸºç¡€ä¸Šï¼Œå°†ä¸­å¿ƒè¯å‘é‡è¡¨ç¤ºæˆå•è¯çš„å­è¯å‘é‡ä¹‹å’Œã€‚</li>
<li>å­è¯åµŒå…¥ï¼ˆsubword embeddingï¼‰åˆ©ç”¨æ„è¯ä¸Šçš„è§„å¾‹ï¼Œé€šå¸¸å¯ä»¥æå‡ç”Ÿåƒ»è¯è¡¨ç¤ºçš„è´¨é‡ã€‚</li>
<li>fastText è®­ç»ƒæ—¶å¤æ‚åº¦ é‡‡ç”¨å±‚æ¬¡åŒ– softmax ä¹‹åï¼Œå‡å°‘ä¸º O(hlogK) çº§åˆ«, é¢„æµ‹æ—¶è¿˜æ˜¯ O(Kh) </li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zh.gluon.ai/chapter_natural-language-processing/fasttext.html" target="_blank" rel="external">å­è¯åµŒå…¥ï¼ˆfastTextï¼‰</a></li>
<li><a href="https://www.jiqizhixin.com/articles/2018-06-05-3" target="_blank" rel="external">fastTextï¼Œæ™ºæ…§ä¸ç¾è²Œå¹¶é‡çš„æ–‡æœ¬åˆ†ç±»åŠå‘é‡åŒ–å·¥å…·</a></li>
<li><a href="https://blog.csdn.net/sinat_26917383/article/details/54850933" target="_blank" rel="external">NLPï¸±é«˜çº§è¯å‘é‡è¡¨è¾¾ï¼ˆäºŒï¼‰â€”â€”FastTextï¼ˆç®€è¿°ã€å­¦ä¹ ç¬”è®°ï¼‰</a></li>
<li><a href="https://blog.csdn.net/sinat_26917383/article/details/83041424" target="_blank" rel="external">å¦‚ä½•åœ¨python éå¸¸ç®€å•è®­ç»ƒFastText</a></li>
<li><a href="http://www.52nlp.cn/fasttext" target="_blank" rel="external">æˆ‘çˆ±è‡ªç„¶è¯­è¨€å¤„ç†-fastTextåŸç†åŠå®è·µ</a></li>
<li><a href="https://www.jianshu.com/p/2acc49549af6" target="_blank" rel="external">FastTextæ–‡æœ¬åˆ†ç±»ç®—æ³•å­¦ä¹ ç¬”è®°ï¼ˆå¥½æ–‡ï¼‰</a></li>
<li><a href="https://blog.csdn.net/fendouaini/article/details/81086575" target="_blank" rel="external">FastTextçš„å†…éƒ¨æœºåˆ¶</a></li>
<li><a href="https://blog.csdn.net/joleoy/article/details/84987230" target="_blank" rel="external">åˆ©ç”¨skiftå®ç°fasttextæ¨¡å‹</a></li>
<li><a href="https://blog.csdn.net/sxllllwd/article/details/81914447" target="_blank" rel="external">CSDN å±‚æ¬¡softmax</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[K-means]]></title>
      <url>http://shopee.ai/2018/12/18/ml/K-Means/</url>
      <content type="html"><![CDATA[<p><img src="/images/ml/k-means/K-Means.gif" width="550"></p>
<p><a id="more"></a><br></p>
<p>åœ¨æ•°æ®æŒ–æ˜ä¸­ï¼Œ k-Means ç®—æ³•æ˜¯ä¸€ç§ cluster analysis çš„ç®—æ³•ï¼Œå…¶ä¸»è¦æ˜¯æ¥è®¡ç®—æ•°æ®èšé›†çš„ç®—æ³•ï¼Œä¸»è¦é€šè¿‡ä¸æ–­åœ°å–ç¦»ç§å­ç‚¹æœ€è¿‘å‡å€¼çš„ç®—æ³•ã€‚</p>
<h2 id="1-é—®é¢˜"><a href="#1-é—®é¢˜" class="headerlink" title="1. é—®é¢˜"></a>1. é—®é¢˜</h2><p>K-Meansç®—æ³•ä¸»è¦è§£å†³çš„é—®é¢˜å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å›¾çš„å·¦è¾¹æœ‰ä¸€äº›ç‚¹ï¼Œæˆ‘ä»¬ç”¨è‚‰çœ¼å¯ä»¥çœ‹å‡ºæ¥æœ‰å››ä¸ªç‚¹ç¾¤ï¼Œä½†æ˜¯æˆ‘ä»¬æ€ä¹ˆé€šè¿‡è®¡ç®—æœºç¨‹åºæ‰¾å‡ºè¿™å‡ ä¸ªç‚¹ç¾¤æ¥å‘¢ï¼Ÿäºæ˜¯å°±å‡ºç°äº†æˆ‘ä»¬çš„K-Meansç®—æ³•.</p>
<p><img src="/images/ml/k-means/K-Means-1.png" width="750"></p>
<p>Kå‡å€¼èšç±»çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œé€šè¿‡è¿­ä»£æ–¹å¼å¯»æ‰¾Kä¸ªç°‡(Cluster)çš„ä¸€ç§åˆ’åˆ†æ–¹æ¡ˆï¼Œä½¿å¾—èšç±»ç»“æœå¯¹åº”çš„ä»£ä»·å‡½æ•°æœ€å°ã€‚ç‰¹åˆ«çš„ï¼Œä»£ä»·å‡½æ•°å¯ä»¥å®šä¹‰ä¸ºå„ä¸ªæ ·æœ¬è·ç¦»æ‰€å±ç°‡ä¸­å¿ƒç‚¹çš„è¯¯å·®å¹³æ–¹å’Œ</p>
<p><img src="/images/ml/k-means/K-Means-2.svg" alt="K-Means ç®—æ³•æ¦‚è¦"></p>
<h2 id="2-ç®—æ³•æ¦‚è¦"><a href="#2-ç®—æ³•æ¦‚è¦" class="headerlink" title="2. ç®—æ³•æ¦‚è¦"></a>2. ç®—æ³•æ¦‚è¦</h2><p>è¿™ä¸ªç®—æ³•å…¶å®å¾ˆç®€å•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/ml/k-means/K-Means.jpg" alt="K-Means ç®—æ³•æ¦‚è¦"></p>
<p>ä»ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒA, B, C, D, E æ˜¯äº”ä¸ªåœ¨å›¾ä¸­ç‚¹ã€‚è€Œç°è‰²çš„ç‚¹æ˜¯æˆ‘ä»¬çš„ç§å­ç‚¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç”¨æ¥æ‰¾ç‚¹ç¾¤çš„ç‚¹ã€‚æœ‰ä¸¤ä¸ªç§å­ç‚¹ï¼Œæ‰€ä»¥K=2ã€‚</p>
<p>ç„¶åï¼ŒK-Meansçš„ç®—æ³•å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>1). éšæœºåœ¨å›¾ä¸­å–Kï¼ˆè¿™é‡ŒK=2ï¼‰ä¸ªç§å­ç‚¹ã€‚  </p>
<p>2). ç„¶åå¯¹å›¾ä¸­çš„æ‰€æœ‰ç‚¹æ±‚åˆ°è¿™Kä¸ªç§å­ç‚¹çš„è·ç¦»ï¼Œå‡å¦‚ç‚¹Piç¦»ç§å­ç‚¹Siæœ€è¿‘ï¼Œé‚£ä¹ˆPiå±äºSiç‚¹ç¾¤ã€‚ï¼ˆä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°A,Bå±äºä¸Šé¢çš„ç§å­ç‚¹ï¼ŒC,D,Eå±äºä¸‹é¢ä¸­éƒ¨çš„ç§å­ç‚¹ï¼‰. </p>
<p>3). æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦ç§»åŠ¨ç§å­ç‚¹åˆ°å±äºä»–çš„â€œç‚¹ç¾¤â€çš„ä¸­å¿ƒã€‚ï¼ˆè§å›¾ä¸Šçš„ç¬¬ä¸‰æ­¥ï¼‰. </p>
<p>4). ç„¶åé‡å¤ ç¬¬2ï¼‰å’Œ ç¬¬3ï¼‰æ­¥ï¼Œç›´åˆ°ï¼Œç§å­ç‚¹æ²¡æœ‰ç§»åŠ¨ï¼ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å›¾ä¸­çš„ç¬¬å››æ­¥ä¸Šé¢çš„ç§å­ç‚¹èšåˆäº†A,B,Cï¼Œä¸‹é¢çš„ç§å­ç‚¹ èšåˆäº†Dï¼ŒEï¼‰ã€‚  </p>
</blockquote>
<p>è¿™ä¸ªç®—æ³•å¾ˆç®€å•ã€‚</p>
<h2 id="3-K-Means-å…·ä½“æ­¥éª¤"><a href="#3-K-Means-å…·ä½“æ­¥éª¤" class="headerlink" title="3. K-Means å…·ä½“æ­¥éª¤"></a>3. K-Means å…·ä½“æ­¥éª¤</h2><blockquote>
<p>(1). æ•°æ®é¢„å¤„ç†ã€å½’ä¸€åŒ–ã€ç¦»ç¾¤ç‚¹å¤„ç†ã€‚</p>
<p>(2). éšæœºé€‰æ‹© K ä¸ªç°‡ä¸­å¿ƒï¼Œè®°ä¸º ${\mu_1}^{(0)}, {\mu_2}^{(0)}, {\mu_3}^{(0)}, â€¦, {\mu_k}^{(0)}$</p>
<p>(3). å®šä¹‰ä»£ä»·å‡½æ•° :</p>
<p><img src="/images/ml/k-means/K-Means-5.svg" width="280"></p>
<p>(4). ä»¤ t=0,1,2,â€¦ ä¸ºè¿­ä»£è½®æ•°ï¼Œé‡å¤ä¸‹é¢çš„è¿‡ç¨‹çŸ¥é“ J æ”¶æ•›:</p>
<ul>
<li>å¯¹äºæ¯ä¸€ä¸ªæ ·æœ¬ $x_i$, å°†å…¶åˆ†é…åˆ°è·ç¦»æœ€è¿‘çš„ç°‡.</li>
</ul>
<p><img src="/images/ml/k-means/K-Means-3.svg" width="280"></p>
<ul>
<li>å¯¹äºæ¯ä¸€ä¸ªç±»ç°‡ $k$, é‡æ–°è®¡ç®—è¯¥ç±»ç°‡çš„ä¸­å¿ƒ</li>
</ul>
<p><img src="/images/ml/k-means/K-Means-4.svg" width="280"></p>
</blockquote>
<h2 id="4-K-Means-ä¼˜ç¼ºç‚¹"><a href="#4-K-Means-ä¼˜ç¼ºç‚¹" class="headerlink" title="4. K-Means ä¼˜ç¼ºç‚¹"></a>4. K-Means ä¼˜ç¼ºç‚¹</h2><p><strong>Advantageï¼š</strong></p>
<blockquote>
<p>å¯¹äºå¤§æ•°æ®é›†ï¼ŒKå‡å€¼ é«˜æ•ˆä¸”å¯ä¼¸ç¼©ï¼Œå®ƒçš„å¤æ‚åº¦æ˜¯ $O(NKt)$ï¼Œæ¥è¿‘äºçº¿æ€§ã€‚ å…¶ä¸­ tæ˜¯è¿­ä»£è½®æ•°ã€‚</p>
</blockquote>
<p><strong>Disadvantageï¼š</strong></p>
<blockquote>
<p>(1) <strong><code>éœ€è¦äººå·¥é¢„è®¾Kå€¼ï¼Œä¸”è¯¥å€¼å’ŒçœŸå®æ•°æ®åˆ†å¸ƒæœªå¿…å»åˆ</code></strong>ï¼›  </p>
<p>(2) <strong><code>å—åˆå€¼å’Œç¦»ç¾¤ç‚¹çš„å½±å“ï¼Œæ¯æ¬¡çš„ç»“æœä¸ç¨³å®š</code></strong>ï¼›  </p>
<p>(3) <strong><code>å—åˆå€¼å½±å“ï¼Œç»“æœé€šå¸¸æ˜¯å±€éƒ¨æœ€ä¼˜</code></strong>ï¼›  </p>
<p>(4) æ— æ³•å¾ˆå¥½åœ°è§£å†³æ•°æ®ç°‡åˆ†å¸ƒå·®åˆ«æ¯”è¾ƒå¤§çš„æƒ…å†µ(å¦‚ä¸€ç±»æ˜¯å¦ä¸€ç±»æ ·æœ¬æ•°é‡çš„100å€)ï¼›  </p>
<p>(5) ä¸å¤ªé€‚ç”¨äºç¦»æ•£åˆ†å¸ƒï¼›æ ·æœ¬ç‚¹åªèƒ½è¢«åˆ’åˆ†åˆ°å•ä¸€çš„ç±»ä¸­ã€‚  </p>
</blockquote>
<h2 id="5-K-Means"><a href="#5-K-Means" class="headerlink" title="5. K-Means++"></a>5. K-Means++</h2><blockquote>
<p>K-means æœ€å¼€å§‹æ˜¯éšæœºé€‰å–æ•°æ®é›†ä¸­çš„Kä¸ªç‚¹ä½œä¸ºèšç±»ä¸­å¿ƒ.</p>
<p>K-means++ <strong>æ”¹è¿›äº†åˆå§‹å€¼çš„é€‰æ‹©ï¼Œä¼šå°½é‡ä½¿èšç±»ä¸­å¿ƒè¶Šè¿œè¶Šå¥½</strong>.</p>
</blockquote>
<h2 id="6-æ‰©å±•"><a href="#6-æ‰©å±•" class="headerlink" title="6. æ‰©å±•"></a>6. æ‰©å±•</h2><ul>
<li>ISODATAç®—æ³•(è¿­ä»£è‡ªç»„ç»‡æ•°æ®åˆ†ææ³•)</li>
<li>é«˜æ–¯æ··åˆæ¨¡å‹ã€EM</li>
<li>è‡ªç»„ç»‡æ˜ å°„ç¥ç»ç½‘ç»œ (SOM)</li>
<li>èšç±»ç®—æ³•çš„è¯„ä¼°</li>
</ul>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><ul>
<li><a href="https://www.jianshu.com/p/7676f3b9808f" target="_blank" rel="external">ç™¾é¢æœºå™¨å­¦ä¹ </a> ã€ <a href="https://study.163.com/course/courseLearn.htm?courseId=1004570029#/learn/video?lessonId=1052320898&amp;courseId=1004570029" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚</a></li>
<li><a href="https://coolshell.cn/articles/7779.html" target="_blank" rel="external">COOLSHELL K-MEANS ç®—æ³•</a></li>
<li><a href="https://coolshell.cn/articles/8052.html" target="_blank" rel="external">K NEAREST NEIGHBOR</a></li>
<li><a href="https://blog.csdn.net/howhigh/article/details/74527651" target="_blank" rel="external">å•ä½çŸ©é˜µå’Œé€†çŸ©é˜µ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TextCNN æ–‡æœ¬æƒ…æ„Ÿåˆ†ç±»çš„å·ç§¯ç¥ç»ç½‘ç»œ]]></title>
      <url>http://shopee.ai/2018/12/16/nlp/textCNN/</url>
      <content type="html"><![CDATA[<p><img src="/images/nlp/textcnn-logo.png" width="650"></p>
<a id="more"></a>
<p>textCNN æ˜¯ 2014å¹´ æå‡ºçš„ç”¨æ¥åšæ–‡æœ¬åˆ†ç±»çš„å·ç§¯ç¥ç»ç½‘ç»œï¼Œç»“æ„ç®€å•ã€æ•ˆæœå¥½.</p>
<p>è®ºæ–‡é“¾æ¥ï¼š <a href="https://arxiv.org/abs/1510.03820" target="_blank" rel="external">Convolutional Neural Networks for Sentence Classification</a> åœ¨æ–‡æœ¬åˆ†ç±»ç­‰ NLP é¢†åŸŸåº”ç”¨å¹¿æ³›. </p>
<p>ä¸€èˆ¬ç»“æ„ï¼š é™ç»´ -&gt; conv -&gt; æœ€å¤§æ± åŒ– -&gt; å®Œå…¨è¿æ¥å±‚ -&gt; softmax .</p>
<blockquote>
<p>å°†æ–‡æœ¬å½“åšæ˜¯ä¸€ç»´å›¾åƒï¼Œä»è€Œå¯ä»¥ç”¨ä¸€ç»´å·ç§¯ç¥ç»ç½‘ç»œæ¥æ•æ‰ä¸´è¿‘è¯ä¹‹é—´çš„å…³è”ã€‚</p>
</blockquote>
<h2 id="1-ä¸€ç»´å·ç§¯å±‚"><a href="#1-ä¸€ç»´å·ç§¯å±‚" class="headerlink" title="1. ä¸€ç»´å·ç§¯å±‚"></a>1. ä¸€ç»´å·ç§¯å±‚</h2><p>åœ¨ä»‹ç»æ¨¡å‹å‰æˆ‘ä»¬å…ˆæ¥è§£é‡Šä¸€ç»´å·ç§¯å±‚çš„å·¥ä½œåŸç†ã€‚å’ŒäºŒç»´å·ç§¯å±‚ä¸€æ ·ï¼Œä¸€ç»´å·ç§¯å±‚ä½¿ç”¨ä¸€ç»´çš„äº’ç›¸å…³è¿ç®—ã€‚åœ¨ä¸€ç»´äº’ç›¸å…³è¿ç®—ä¸­ï¼Œå·ç§¯çª—å£ä»è¾“å…¥æ•°ç»„çš„æœ€å·¦æ–¹å¼€å§‹ï¼ŒæŒ‰ä»å·¦å¾€å³çš„é¡ºåºï¼Œä¾æ¬¡åœ¨è¾“å…¥æ•°ç»„ä¸Šæ»‘åŠ¨ã€‚</p>
<p>å½“å·ç§¯çª—å£æ»‘åŠ¨åˆ°æŸä¸€ä½ç½®æ—¶ï¼Œçª—å£ä¸­çš„è¾“å…¥å­æ•°ç»„ä¸æ ¸æ•°ç»„æŒ‰å…ƒç´ ç›¸ä¹˜å¹¶æ±‚å’Œï¼Œå¾—åˆ°è¾“å‡ºæ•°ç»„ä¸­ç›¸åº”ä½ç½®çš„å…ƒç´ ã€‚</p>
<h3 id="1-1-å¤šè¾“å…¥é€šé“-ä¸€ç»´äº’ç›¸å…³"><a href="#1-1-å¤šè¾“å…¥é€šé“-ä¸€ç»´äº’ç›¸å…³" class="headerlink" title="1.1 å¤šè¾“å…¥é€šé“ * ä¸€ç»´äº’ç›¸å…³"></a>1.1 å¤šè¾“å…¥é€šé“ * ä¸€ç»´äº’ç›¸å…³</h3><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªå®½ä¸º 7 çš„ä¸€ç»´æ•°ç»„ï¼Œæ ¸æ•°ç»„çš„å®½ä¸º 2ã€‚å¯ä»¥çœ‹åˆ°è¾“å‡ºçš„å®½åº¦ä¸º <strong>7âˆ’2+1=6</strong>ï¼Œä¸”ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ç”±è¾“å…¥çš„æœ€å·¦è¾¹çš„å®½ä¸º 2 çš„å­æ•°ç»„ä¸æ ¸æ•°ç»„æŒ‰å…ƒç´ ç›¸ä¹˜åå†ç›¸åŠ å¾—åˆ°çš„ã€‚</p>
<p><img src="/images/nlp/conv1d.svg" width="650" img=""></p>
<blockquote>
<p>ä¸€ç»´äº’ç›¸å…³è¿ç®—ã€‚é˜´å½±éƒ¨åˆ†ä¸ºç¬¬ä¸€ä¸ªè¾“å‡ºå…ƒç´ åŠå…¶è®¡ç®—æ‰€ä½¿ç”¨çš„è¾“å…¥å’Œæ ¸æ•°ç»„å…ƒç´ ï¼š0Ã—1+1Ã—2=2ã€‚</p>
</blockquote>
<h3 id="1-2-å¤šè¾“å…¥é€šé“-ä¸€ç»´äº’ç›¸å…³"><a href="#1-2-å¤šè¾“å…¥é€šé“-ä¸€ç»´äº’ç›¸å…³" class="headerlink" title="1.2 å¤šè¾“å…¥é€šé“ * ä¸€ç»´äº’ç›¸å…³"></a>1.2 å¤šè¾“å…¥é€šé“ * ä¸€ç»´äº’ç›¸å…³</h3><p>å¤šè¾“å…¥é€šé“çš„ä¸€ç»´äº’ç›¸å…³è¿ç®—ä¹Ÿä¸å¤šè¾“å…¥é€šé“çš„äºŒç»´äº’ç›¸å…³è¿ç®—ç±»ä¼¼ï¼šåœ¨æ¯ä¸ªé€šé“ä¸Šï¼Œå°†æ ¸ä¸ç›¸åº”çš„è¾“å…¥åšä¸€ç»´äº’ç›¸å…³è¿ç®—ï¼Œå¹¶å°†é€šé“ä¹‹é—´çš„ç»“æœç›¸åŠ å¾—åˆ°è¾“å‡ºç»“æœã€‚ä¸‹å›¾å±•ç¤ºäº†å« 3 ä¸ªè¾“å…¥é€šé“çš„ä¸€ç»´äº’ç›¸å…³è¿ç®—ã€‚</p>
<p><img src="/images/nlp/conv1d-channel.svg" width="650" img=""></p>
<blockquote>
<p>å«3ä¸ªè¾“å…¥é€šé“çš„ä¸€ç»´äº’ç›¸å…³è¿ç®—ã€‚é˜´å½±éƒ¨åˆ†ä¸ºç¬¬ä¸€ä¸ªè¾“å‡ºå…ƒç´ åŠå…¶è®¡ç®—æ‰€ä½¿ç”¨çš„è¾“å…¥å’Œæ ¸æ•°ç»„å…ƒç´ ï¼š</p>
<p>$$0Ã—1+1Ã—2+1Ã—3+2Ã—4+2Ã—(âˆ’1)+3Ã—(âˆ’3)=2$$</p>
</blockquote>
<h3 id="1-3-å•è¾“å…¥é€šé“-äºŒç»´äº’ç›¸å…³"><a href="#1-3-å•è¾“å…¥é€šé“-äºŒç»´äº’ç›¸å…³" class="headerlink" title="1.3 å•è¾“å…¥é€šé“ * äºŒç»´äº’ç›¸å…³"></a>1.3 å•è¾“å…¥é€šé“ * äºŒç»´äº’ç›¸å…³</h3><p><img src="/images/nlp/conv1d-2d.svg" width="650" img=""></p>
<blockquote>
<p>$$2Ã—(âˆ’1)+3Ã—(âˆ’3)+1Ã—3+2Ã—4+0Ã—1+1Ã—2=2$$</p>
<p>ç»“è®º ï¼š <strong>å¤šè¾“å…¥é€šé“</strong> <strong>ä¸€ç»´äº’ç›¸å…³</strong> &lt;=&gt; <strong>å•è¾“å…¥é€šé“</strong> <strong>äºŒç»´äº’ç›¸å…³</strong></p>
</blockquote>
<h3 id="1-4-å¤šè¾“å…¥é€šé“-äºŒç»´äº’ç›¸å…³"><a href="#1-4-å¤šè¾“å…¥é€šé“-äºŒç»´äº’ç›¸å…³" class="headerlink" title="1.4 å¤šè¾“å…¥é€šé“ * äºŒç»´äº’ç›¸å…³"></a>1.4 å¤šè¾“å…¥é€šé“ * äºŒç»´äº’ç›¸å…³</h3><p><img src="/images/nlp/conv_multi_in.svg" width="650" img=""></p>
<blockquote>
<p>$$<br>(1Ã—1+2Ã—2+4Ã—3+5Ã—4)+(0Ã—0+1Ã—1+3Ã—2+4Ã—3)=56<br>$$</p>
</blockquote>
<h3 id="1-5-å¤šè¾“å‡ºé€šé“-1Ã—1-å·ç§¯å±‚"><a href="#1-5-å¤šè¾“å‡ºé€šé“-1Ã—1-å·ç§¯å±‚" class="headerlink" title="1.5 å¤šè¾“å‡ºé€šé“ 1Ã—1 å·ç§¯å±‚"></a>1.5 å¤šè¾“å‡ºé€šé“ 1Ã—1 å·ç§¯å±‚</h3><p>å½“è¾“å…¥é€šé“æœ‰å¤šä¸ªæ—¶ï¼Œç”±äºæˆ‘ä»¬å¯¹å„ä¸ªé€šé“çš„ç»“æœåšäº†ç´¯åŠ ï¼Œæ‰€ä»¥ä¸è®ºè¾“å…¥é€šé“æ•°æ˜¯å¤šå°‘ï¼Œè¾“å‡ºé€šé“æ•°æ€»æ˜¯ä¸º 1</p>
<p><img src="/images/nlp/conv_1x1.svg" width="650" img=""></p>
<h3 id="1-6-å°ç»“"><a href="#1-6-å°ç»“" class="headerlink" title="1.6 å°ç»“"></a>1.6 å°ç»“</h3><ul>
<li>ä½¿ç”¨å¤šé€šé“å¯ä»¥æ‹“å±•å·ç§¯å±‚çš„æ¨¡å‹å‚æ•°.</li>
<li>å‡è®¾å°†é€šé“ç»´å½“åšæ˜¯ç‰¹å¾ç»´ï¼Œå°†é«˜å’Œå®½ç»´åº¦ä¸Šçš„å…ƒç´ å½“æˆæ•°æ®æ ·æœ¬ï¼Œé‚£ä¹ˆ 1Ã—1 å·ç§¯å±‚çš„ä½œç”¨ä¸å…¨è¿æ¥å±‚ç­‰ä»·.</li>
<li>1Ã—1 å·ç§¯å±‚é€šå¸¸ç”¨æ¥è°ƒæ•´ç½‘ç»œå±‚ä¹‹é—´çš„é€šé“æ•°ï¼Œå¹¶æ§åˆ¶æ¨¡å‹å¤æ‚åº¦.</li>
</ul>
<h2 id="2-æ—¶åºæœ€å¤§æ± åŒ–å±‚"><a href="#2-æ—¶åºæœ€å¤§æ± åŒ–å±‚" class="headerlink" title="2. æ—¶åºæœ€å¤§æ± åŒ–å±‚"></a>2. æ—¶åºæœ€å¤§æ± åŒ–å±‚</h2><p>ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬æœ‰ä¸€ç»´æ± åŒ–å±‚ã€‚TextCNN ä¸­ä½¿ç”¨çš„æ—¶åºæœ€å¤§æ± åŒ–å±‚ï¼ˆmax-over-time poolingï¼‰å®é™…ä¸Šå¯¹åº”ä¸€ç»´å…¨å±€æœ€å¤§æ± åŒ–å±‚ï¼šå‡è®¾è¾“å…¥åŒ…å«å¤šä¸ªé€šé“ï¼Œå„é€šé“ç”±ä¸åŒæ—¶é—´æ­¥ä¸Šçš„æ•°å€¼ç»„æˆï¼Œå„é€šé“çš„è¾“å‡ºå³è¯¥é€šé“æ‰€æœ‰æ—¶é—´æ­¥ä¸­æœ€å¤§çš„æ•°å€¼ã€‚å› æ­¤ï¼Œæ—¶åºæœ€å¤§æ± åŒ–å±‚çš„è¾“å…¥åœ¨å„ä¸ªé€šé“ä¸Šçš„æ—¶é—´æ­¥æ•°å¯ä»¥ä¸åŒã€‚</p>
<blockquote>
<p>ä¸ºæå‡è®¡ç®—æ€§èƒ½ï¼Œæˆ‘ä»¬å¸¸å¸¸å°†ä¸åŒé•¿åº¦çš„æ—¶åºæ ·æœ¬ç»„æˆä¸€ä¸ªå°<strong>Batch</strong>ï¼Œå¹¶é€šè¿‡åœ¨è¾ƒçŸ­åºåˆ—åé™„åŠ <strong>ç‰¹æ®Šå­—ç¬¦ï¼ˆä¾‹å¦‚ 0ï¼‰</strong>ä»¤æ‰¹é‡ä¸­å„æ—¶åºæ ·æœ¬é•¿åº¦ç›¸åŒã€‚è¿™äº›äººä¸ºæ·»åŠ çš„ç‰¹æ®Šå­—ç¬¦å½“ç„¶æ˜¯æ— æ„ä¹‰çš„ã€‚ç”±äºæ—¶åºæœ€å¤§æ± åŒ–çš„ä¸»è¦ç›®çš„æ˜¯æŠ“å–æ—¶åºä¸­æœ€é‡è¦çš„ç‰¹å¾ï¼Œå®ƒé€šå¸¸èƒ½ä½¿æ¨¡å‹ä¸å—äººä¸ºæ·»åŠ å­—ç¬¦çš„å½±å“ã€‚</p>
</blockquote>
<h2 id="3-TextCNN-æ¨¡å‹"><a href="#3-TextCNN-æ¨¡å‹" class="headerlink" title="3. TextCNN æ¨¡å‹"></a>3. TextCNN æ¨¡å‹</h2><p>TextCNN ä¸»è¦ä½¿ç”¨äº†ä¸€ç»´å·ç§¯å±‚å’Œæ—¶åºæœ€å¤§æ± åŒ–å±‚ã€‚å‡è®¾è¾“å…¥çš„æ–‡æœ¬åºåˆ—ç”± n ä¸ªè¯ç»„æˆï¼Œæ¯ä¸ªè¯ç”¨ d ç»´çš„è¯å‘é‡è¡¨ç¤ºã€‚é‚£ä¹ˆè¾“å…¥æ ·æœ¬çš„å®½ä¸º nï¼Œé«˜ä¸º 1ï¼Œè¾“å…¥é€šé“æ•°ä¸º dã€‚</p>
<p>textCNN çš„è®¡ç®—ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p>
<blockquote>
<p>(1). <strong>å·ç§¯å±‚</strong>ï¼š å®šä¹‰å¤šä¸ªä¸€ç»´å·ç§¯æ ¸ï¼Œå¹¶ä½¿ç”¨è¿™äº›å·ç§¯æ ¸å¯¹è¾“å…¥åˆ†åˆ«åšå·ç§¯è®¡ç®—ã€‚å®½åº¦ä¸åŒçš„å·ç§¯æ ¸å¯èƒ½ä¼šæ•æ‰åˆ°ä¸åŒä¸ªæ•°çš„ç›¸é‚»è¯çš„ç›¸å…³æ€§ã€‚</p>
<p>(2). <strong>æ± åŒ–å±‚</strong>ï¼š å¯¹è¾“å‡ºçš„æ‰€æœ‰é€šé“åˆ†åˆ«åšæ—¶åºæœ€å¤§æ± åŒ–ï¼Œå†å°†è¿™äº›é€šé“çš„æ± åŒ–è¾“å‡ºå€¼è¿ç»“ä¸ºå‘é‡ã€‚</p>
<p>(3). <strong>å…¨è¿å±‚</strong>ï¼š é€šè¿‡å…¨è¿æ¥å±‚å°†è¿ç»“åçš„å‘é‡å˜æ¢ä¸ºæœ‰å…³å„ç±»åˆ«çš„è¾“å‡ºã€‚è¿™ä¸€æ­¥å¯ä»¥ä½¿ç”¨ä¸¢å¼ƒå±‚åº”å¯¹è¿‡æ‹Ÿåˆã€‚</p>
</blockquote>
<p><img src="/images/nlp/conv_textcnn.svg" width="700" img=""></p>
<p>ç”¨ä¸€ä¸ªä¾‹å­è§£é‡Šäº† textCNN çš„è®¾è®¡ã€‚è¿™é‡Œçš„è¾“å…¥æ˜¯ä¸€ä¸ªæœ‰ 11 ä¸ªè¯çš„å¥å­ï¼Œæ¯ä¸ªè¯ç”¨ 6 ç»´è¯å‘é‡è¡¨ç¤ºã€‚å› æ­¤è¾“å…¥åºåˆ—çš„å®½ä¸º 11ï¼Œè¾“å…¥é€šé“æ•°ä¸º 6ã€‚ç»™å®š 2 ä¸ªä¸€ç»´å·ç§¯æ ¸ï¼Œæ ¸å®½åˆ†åˆ«ä¸º 2 å’Œ 4ï¼Œè¾“å‡ºé€šé“æ•°åˆ†åˆ«è®¾ä¸º 4 å’Œ 5ã€‚å› æ­¤ï¼Œä¸€ç»´å·ç§¯è®¡ç®—åï¼Œ4 ä¸ªè¾“å‡ºé€šé“çš„å®½ä¸º 11âˆ’2+1=10ï¼Œè€Œå…¶ä»– 5 ä¸ªé€šé“çš„å®½ä¸º 11âˆ’4+1=8ã€‚å°½ç®¡æ¯ä¸ªé€šé“çš„å®½ä¸åŒï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥å¯¹å„ä¸ªé€šé“åšæ—¶åºæœ€å¤§æ± åŒ–ï¼Œå¹¶å°† 9 ä¸ªé€šé“çš„æ± åŒ–è¾“å‡ºè¿ç»“æˆä¸€ä¸ª 9 ç»´å‘é‡ã€‚æœ€ç»ˆï¼Œæˆ‘ä»¬ä½¿ç”¨å…¨è¿æ¥å°† 9 ç»´å‘é‡å˜æ¢ä¸º 2 ç»´è¾“å‡ºï¼šæ­£é¢æƒ…æ„Ÿå’Œè´Ÿé¢æƒ…æ„Ÿçš„é¢„æµ‹ã€‚</p>
<h2 id="4-CNN-çš„ç‰¹ç‚¹"><a href="#4-CNN-çš„ç‰¹ç‚¹" class="headerlink" title="4. CNN çš„ç‰¹ç‚¹"></a>4. CNN çš„ç‰¹ç‚¹</h2><p>CNNçš„ä¸‰ä¸ªä¼˜ç‚¹ï¼š</p>
<ol>
<li>sparse interaction(ç¨€ç–çš„äº¤äº’)</li>
<li>parameter sharing(å‚æ•°å…±äº«)</li>
<li>equivalent respresentation(ç­‰ä»·è¡¨ç¤º)ã€‚</li>
</ol>
<p>ç»å…¸çš„ç®€åŒ–å·ç§¯å…¬å¼è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="/images/nlp/textcnn-1.webp" width="700" img=""></p>
<p>å‡è®¾æ¯ä¸ªè¯ç”¨ä¸‰ç»´å‘é‡è¡¨ç¤ºï¼Œå·¦è¾¹æ˜¯4ä¸ªè¯ï¼Œå³è¾¹æ˜¯å·ç§¯çŸ©é˜µï¼Œé‚£ä¹ˆå¾—åˆ°è¾“å‡ºä¸ºï¼š</p>
<p><img src="/images/nlp/textcnn-2.webp" width="700" img=""></p>
<p>å¦‚æœåŸºäºè¿™ä¸ªç»“æœåš1-MaxPoolæ± åŒ–(æœ€å¤§å€¼æ± åŒ–)ï¼Œé‚£ä¹ˆå°±å–å·ç§¯å±‚ç»“æœ o ä¸­çš„æœ€å¤§å€¼ï¼Œå³æå–æœ€æ˜¾è‘—çš„ç‰¹å¾ã€‚</p>
<p>é’ˆå¯¹æµ·é‡çš„æ–‡æœ¬å¤šåˆ†ç±»æ•°æ®ï¼Œä¹Ÿå¯ä»¥å°è¯•ä¸€ä¸‹æµ…å±‚çš„æ·±åº¦å­¦ä¹ æ¨¡å‹FastTextæ¨¡å‹ï¼Œè¯¥æ¨¡å‹çš„åˆ†ç±»æ•ˆç‡æ›´é«˜ã€‚</p>
<p><img src="/images/nlp/textcnn-3.webp" width="700" img=""></p>
<p>æ•´ä¸ªæ¨¡å‹ç”±å››éƒ¨åˆ†æ„æˆï¼š <strong>è¾“å…¥å±‚</strong>ã€<strong>å·ç§¯å±‚</strong>ã€<strong>æ± åŒ–å±‚</strong>ã€<strong>å…¨è¿æ¥å±‚</strong>ã€‚</p>
<h2 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h2><ul>
<li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç»´å·ç§¯æ¥å¤„ç†å’Œåˆ†ææ—¶åºæ•°æ®ã€‚</li>
<li>å¤šè¾“å…¥é€šé“çš„ä¸€ç»´äº’ç›¸å…³è¿ç®—å¯ä»¥çœ‹ä½œæ˜¯å•è¾“å…¥é€šé“çš„äºŒç»´äº’ç›¸å…³è¿ç®—ã€‚</li>
<li>æ—¶åºæœ€å¤§æ± åŒ–å±‚çš„è¾“å…¥åœ¨å„ä¸ªé€šé“ä¸Šçš„æ—¶é—´æ­¥æ•°å¯ä»¥ä¸åŒã€‚</li>
<li>TextCNN ä¸»è¦ä½¿ç”¨äº†ä¸€ç»´å·ç§¯å±‚å’Œæ—¶åºæœ€å¤§æ± åŒ–å±‚ã€‚</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zh.gluon.ai/chapter_natural-language-processing/sentiment-analysis-cnn.html" target="_blank" rel="external">æ–‡æœ¬æƒ…æ„Ÿåˆ†ç±»ï¼šä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œï¼ˆtextCNNï¼‰</a></li>
<li><a href="http://www.52nlp.cn/tag/textcnn" target="_blank" rel="external">æˆ‘çˆ±è‡ªç„¶è¯­è¨€å¤„ç†</a></li>
<li><a href="https://www.jianshu.com/p/f69e8a306862" target="_blank" rel="external">å¾çˆ±NLP(4)â€”åŸºäºText-CNNæ¨¡å‹çš„ä¸­æ–‡æ–‡æœ¬åˆ†ç±»å®æˆ˜</a></li>
<li><a href="https://www.cnblogs.com/DjangoBlog/p/7511979.html" target="_blank" rel="external">fastTextã€TextCNNã€TextRNNâ€¦â€¦è¿™é‡Œæœ‰ä¸€å¥—NLPæ–‡æœ¬åˆ†ç±»æ·±åº¦å­¦ä¹ æ–¹æ³•åº“ä¾›ä½ é€‰æ‹©</a></li>
<li><a href="https://blog.csdn.net/u012762419/article/details/79561441" target="_blank" rel="external">å¤§è§„æ¨¡æ–‡æœ¬åˆ†ç±»ç½‘ç»œTextCNNä»‹ç»</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 13 - ç†è®ºç¯‡ï¼š MMI æ¨¡å‹ç†è®º]]></title>
      <url>http://shopee.ai/2018/12/05/chatbot/chatbot-research13/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡æå‡ºäº†ä¸¤ç§æ¨¡å‹ï¼ˆå…¶å®å°±æ˜¯æ”¹äº†ä¸‹ç›®æ ‡å‡½æ•°ï¼Œè€Œä¸”è®­ç»ƒè¿‡ç¨‹ä¸­ä»ç„¶ä½¿ç”¨likelihoodï¼Œä»…åœ¨æµ‹è¯•çš„æ—¶å€™ä½¿ç”¨æ–°çš„ç›®æ ‡å‡½æ•°å°†æœ‰æ„ä¹‰çš„å“åº”çš„æ¦‚ç‡å˜å¤§~~ï¼‰ï¼ŒMMI-antiLMå’ŒMMI-bidiï¼Œä¸‹é¢åˆ†åˆ«è¿›è¡Œä»‹ç»ã€‚</p>
<a id="more"></a>
<p>æœ¬æ–‡æ˜¯æçºªä¸ºçš„è®ºæ–‡â€œA Diversity-Promoting Objective Function for Neural Conversation Modelsâ€é˜…è¯»ç¬”è®°ã€‚è¿ç« æå‡ºä½¿ç”¨MMIä»£æ›¿åŸå§‹çš„maximum likelihoodä½œä¸ºç›®æ ‡å‡½æ•°ï¼Œç›®çš„æ˜¯ä½¿ç”¨äº’ä¿¡æ¯å‡å°â€œI donâ€™t Knowâ€è¿™ç±»æ— èŠå“åº”çš„ç”Ÿæˆæ¦‚ç‡ã€‚ä¸€èˆ¬çš„seq2seqæ¨¡å‹ï¼Œå€¾å‘äºç”Ÿæˆå®‰å…¨ã€æ™®é€‚çš„å“åº”ï¼Œå› ä¸ºè¿™ç§å“åº”æ›´ç¬¦åˆè¯­æ³•è§„åˆ™ï¼Œåœ¨è®­ç»ƒé›†ä¸­å‡ºç°é¢‘ç‡ä¹Ÿè¾ƒé«˜ï¼Œæœ€ç»ˆç”Ÿæˆçš„æ¦‚ç‡ä¹Ÿæœ€å¤§ï¼Œè€Œæœ‰æ„ä¹‰çš„å“åº”ç”Ÿæˆæ¦‚ç‡å¾€å¾€æ¯”ä»–ä»¬å°ã€‚é€šè¿‡MMIæ¥è®¡ç®—è¾“å…¥è¾“å‡ºä¹‹é—´çš„ä¾èµ–æ€§å’Œç›¸å…³æ€§ï¼Œå¯ä»¥å‡å°‘æ¨¡å‹å¯¹ä»–ä»¬çš„ç”Ÿæˆæ¦‚ç‡ã€‚</p>
<h2 id="æ–°çš„ç›®æ ‡å‡½æ•°"><a href="#æ–°çš„ç›®æ ‡å‡½æ•°" class="headerlink" title="æ–°çš„ç›®æ ‡å‡½æ•°"></a>æ–°çš„ç›®æ ‡å‡½æ•°</h2><p>â€¦</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 12 - ç†è®ºç¯‡ï¼š è¯„ä»·æŒ‡æ ‡ä»‹ç»]]></title>
      <url>http://shopee.ai/2018/12/01/chatbot/chatbot-research12/</url>
      <content type="html"><![CDATA[<p>å¯¹è¯ç³»ç»Ÿä¹‹æ‰€ä»¥æ²¡æœ‰å–å¾—çªç ´æ€§çš„è¿›å±•ï¼Œå¾ˆå¤§ç¨‹åº¦æ˜¯å› ä¸ºæ²¡æœ‰ä¸€ä¸ªå¯ä»¥å‡†ç¡®è¡¨ç¤ºå›ç­”æ•ˆæœå¥½åçš„è¯„ä»·æ ‡å‡†ã€‚å¯¹è¯ç³»ç»Ÿä¸­å¤§éƒ½ä½¿ç”¨æœºå™¨ç¿»è¯‘ã€æ‘˜è¦ç”Ÿæˆé¢†åŸŸæå‡ºæ¥çš„è¯„ä»·æŒ‡æ ‡ï¼Œä½†æ˜¯å¾ˆæ˜æ˜¾å¯¹è¯ç³»ç»Ÿçš„åœºæ™¯å’Œéœ€æ±‚ä¸ä»–ä»¬æ˜¯å­˜åœ¨å·®åˆ«çš„.</p>
<a id="more"></a>
<h2 id="1-è¯„ä»·æŒ‡æ ‡-æ¦‚è§ˆ"><a href="#1-è¯„ä»·æŒ‡æ ‡-æ¦‚è§ˆ" class="headerlink" title="1. è¯„ä»·æŒ‡æ ‡*æ¦‚è§ˆ"></a>1. è¯„ä»·æŒ‡æ ‡*æ¦‚è§ˆ</h2><p><strong>å¯¹äºæŸä¸€è½®å¯¹è¯è€Œè¨€:</strong></p>
<blockquote>
<p>å¯ä½¿ç”¨å“åº”çš„é€‚å½“æ€§ã€æµç•…åº¦ã€ç›¸å…³æ€§ï¼›</p>
</blockquote>
<p><strong>å¯¹äºå¤šè½®å¯¹è¯è€Œè¨€:</strong></p>
<blockquote>
<p>å…³æ³¨æµç•…æ€§ã€å¯¹è¯æ·±åº¦ã€å¤šæ ·æ€§ã€ä¸€è‡´è¿è´¯æ€§ç­‰æŒ‡æ ‡</p>
</blockquote>
<p><strong>å¯¹äºæ•´ä¸ªå¯¹è¯ç³»ç»Ÿ:</strong></p>
<blockquote>
<p>æˆ‘ä»¬åˆ™å¸Œæœ›ä»–å¯ä»¥æ¶µç›–æ›´å¤šçš„è¯é¢˜ã€å›å¤çœŸå®å¯ä¿¡ç­‰ç­‰ã€‚</p>
</blockquote>
<p>è¿™äº›éƒ½æ˜¯æˆ‘ä»¬æƒ³è¦å¯¹è¯ç³»ç»Ÿæ‰€æ‹¥æœ‰çš„èƒ½åŠ›ï¼Œä½†æ˜¯å¾€å¾€åœ¨ä¸€ä¸ªå…·ä½“çš„ä»»åŠ¡ä¸­æˆ‘ä»¬åªèƒ½å…³æ³¨æŸä¸€é¡¹æˆ–è€…å‡ é¡¹æŒ‡æ ‡ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦é’ˆå¯¹å¼€æ”¾åŸŸç”Ÿæˆå¼å¯¹è¯æ¨¡å‹çš„è¯„ä»·æŒ‡æ ‡è¿›è¡Œæ€»ç»“ã€‚</p>
<h2 id="2-è¯é‡å è¯„ä»·æŒ‡æ ‡"><a href="#2-è¯é‡å è¯„ä»·æŒ‡æ ‡" class="headerlink" title="2. è¯é‡å è¯„ä»·æŒ‡æ ‡"></a>2. è¯é‡å è¯„ä»·æŒ‡æ ‡</h2><p>é¦–å…ˆæ¥çœ‹è¯é‡å è¯„ä»·æŒ‡æ ‡ï¼Œä»–ä»¬è®¤ä¸ºæœ‰æ•ˆåœ°å›ç­”åº”è¯¥å’ŒçœŸå®å›ç­”ä¹‹é—´å­˜åœ¨å¤§é‡çš„è¯é‡å <br>ï¼ˆä½†æ˜¯å¯¹è¯ç³»ç»Ÿçš„ç­”æ¡ˆç©ºé—´å¾€å¾€æ˜¯å‘æ•£çš„ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªé—®é¢˜çš„ç­”æ¡ˆå¯èƒ½æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤å¥è¯ï¼Œè¿™ç§æƒ…å†µä¸‹è¯¥è¯„ä»·æŒ‡æ ‡æ•ˆæœä¸å¥½ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºçš„å‡è®¾ã€‚ï¼ˆä»¥ä¸‹ç¯èŠ‚ä¸­rè¡¨ç¤ºçœŸæ˜¯å“åº”ï¼Œr^è¡¨ç¤ºç³»ç»Ÿç”Ÿæˆå“åº”ï¼‰</p>
<h2 id="3-BLEU"><a href="#3-BLEU" class="headerlink" title="3. BLEU"></a>3. BLEU</h2><p>è¯¥è¯„ä»·æŒ‡æ ‡æœ‰IBMåœ¨2002å¹´æå‡ºï¼Œå‚è€ƒè®ºæ–‡â€œBLEU: a Method for Automatic Evaluation of Machine Translationâ€ï¼Œå¸¸ä½œä¸ºæœºå™¨ç¿»è¯‘ç³»ç»Ÿè¯„ä»·æŒ‡æ ‡ã€‚å…¶å®å°±æ˜¯ç»Ÿè®¡ç”Ÿæˆå“åº”å’ŒçœŸå®å“åº”ä¸­çš„n-gramè¯ç»„åœ¨æ•´ä¸ªè®­ç»ƒè¯­æ–™ä¸­å‡ºç°æ¬¡æ•°ã€‚å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/images/chatbot/chatbot-12.1.jpg" width="400" img=""></p>
<blockquote>
<p>ROUGE : è¯¥æŒ‡æ ‡å¸¸ç”¨äºæ–‡æœ¬æ‘˜è¦é¢†åŸŸ<br>METEOR: BLEU çš„å‡çº§ç‰ˆ</p>
</blockquote>
<h2 id="4-è¯å‘é‡è¯„ä»·æŒ‡æ ‡"><a href="#4-è¯å‘é‡è¯„ä»·æŒ‡æ ‡" class="headerlink" title="4. è¯å‘é‡è¯„ä»·æŒ‡æ ‡"></a>4. è¯å‘é‡è¯„ä»·æŒ‡æ ‡</h2><p>ä¸Šé¢çš„è¯é‡å è¯„ä»·æŒ‡æ ‡åŸºæœ¬ä¸Šéƒ½æ˜¯n-gramæ–¹å¼ï¼Œå»è®¡ç®—ç”Ÿæˆå“åº”å’ŒçœŸå®å“åº”ä¹‹é—´çš„é‡åˆç¨‹åº¦ï¼Œå…±ç°ç¨‹åº¦ç­‰æŒ‡æ ‡ã€‚è€Œè¯å‘é‡åˆ™æ˜¯é€šè¿‡Word2Vecç­‰æ–¹æ³•å°†å¥å­è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºï¼Œè¿™æ ·ä¸€ä¸ªå¥å­å°±è¢«æ˜ å°„åˆ°ä¸€ä¸ªä½ç»´ç©ºé—´ï¼Œå¥å‘é‡åœ¨ä¸€å®šç¨‹åº¦ä¸Šè¡¨å¾äº†å…¶å«ä¹‰ï¼Œåœ¨é€šè¿‡ä½™å¼¦ç›¸ä¼¼åº¦ç­‰æ–¹æ³•å°±å¯ä»¥è®¡ç®—ä¸¤ä¸ªå¥å­ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ã€‚ä½¿ç”¨è¯å‘é‡çš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ ç­”æ¡ˆçš„å¤šæ ·æ€§ï¼Œå› ä¸ºè¿™é‡Œå¤§å¤šé‡‡ç”¨è¯è¯­ç›¸ä¼¼åº¦è¿›è¡Œè¡¨å¾ï¼Œç›¸æ¯”è¯é‡å ä¸­è¦æ±‚å‡ºç°å®Œå…¨ç›¸åŒçš„è¯è¯­ï¼Œé™åˆ¶é™ä½äº†å¾ˆå¤šã€‚</p>
<h2 id="5-perplexityå›°æƒ‘åº¦"><a href="#5-perplexityå›°æƒ‘åº¦" class="headerlink" title="5. perplexityå›°æƒ‘åº¦"></a>5. perplexityå›°æƒ‘åº¦</h2><p>perplexityæ˜¯è¯­è¨€æ¨¡å‹ä¸­çš„æŒ‡æ ‡ï¼Œç”¨äºè¯„ä»·è¯­è¨€æ¨¡å‹çš„å¥½åï¼Œå…¶å®å°±æ˜¯ä¼°ç®—ä¸€å¥è¯å‡ºç°çš„æ¦‚ç‡ï¼Œçœ‹ä¸€å¥è¯æ˜¯å¦é€šé¡ºã€‚ä¹Ÿç»å¸¸ä¼šåœ¨å¯¹è¯ç³»ç»Ÿä¸­å‡ºç°è¯„ä»·ç”Ÿæˆçš„å“åº”æ˜¯å¦ç¬¦åˆè¯­è¨€è§„åˆ™ï¼Œè®¡ç®—æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/chatbot/chatbot-12.3.jpg" width="400" img=""></p>
<p>æ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨tf.contrib.seq2seq.sequence_loss()å‡½æ•°è®¡ç®—æ¨¡å‹lossçš„æ—¶å€™ï¼Œperplexityçš„è®¡ç®—å°±æ˜¾å¾—å¾ˆç®€å•äº†ï¼Œç›´æ¥å¯¹è®¡ç®—å‡ºæ¥çš„losså–ä¸ªæŒ‡æ•°å°±è¡Œäº†ï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">train_perp = math.exp(float(mean_loss)) <span class="keyword">if</span> mean_loss &lt; <span class="number">300</span> <span class="keyword">else</span> math.inf</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘è®­ç»ƒçš„å¯¹è¯ç³»ç»Ÿï¼Œä¸€èˆ¬éƒ½åªæ˜¯ç”¨äº†perplexityæ¥è¯„åˆ¤æ¨¡å‹çš„æ•ˆæœï¼Œæœ€ç»ˆperplexityå¯ä»¥é™åˆ°20å·¦å³ï¼ˆè¶Šå°è¶Šå¥½ï¼Œè¯´æ˜è¶Šæ¥è¿‘äºè‡ªç„¶è¯­è¨€ï¼‰ã€‚</p>
<h2 id="6-äººå·¥æŒ‡æ ‡"><a href="#6-äººå·¥æŒ‡æ ‡" class="headerlink" title="6. äººå·¥æŒ‡æ ‡"></a>6. äººå·¥æŒ‡æ ‡</h2><p>æœ€åè¯´ä¸€ä¸‹äººå·¥è¯„ä»·ï¼Œé¦–å…ˆæ¥è®²ï¼Œä¸Šé¢è¯´äº†è¿™ä¹ˆå¤šçš„è¯„ä»·æŒ‡æ ‡ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªå¯ä»¥å¾ˆå¥½çš„è§£å†³å¯¹è¯ç³»ç»Ÿçš„é—®é¢˜ï¼Œå°±åƒâ€œHow NOT To Evaluate Your Dialogue Systemâ€è®ºæ–‡ä¸­è¯´åˆ°çš„é‚£æ ·ï¼Œå½“ä¸‹çš„è¿™äº›è¯„ä»·æŒ‡æ ‡éƒ½è·Ÿäººå·¥è¯„ä»·æˆå¼±ç›¸å…³æˆ–è€…å®Œå…¨æ²¡æœ‰å…³ç³»ï¼Œç›¸å…³ç¨‹åº¦è·Ÿå…·ä½“çš„æ•°æ®é›†æœ‰å…³ã€‚</p>
<p>ä»¥ä¸‹æ‘˜è‡ªå¾é˜¿è¡¡çš„å›ç­”ï¼š</p>
<ul>
<li>åœ¨é—²èŠæ€§è´¨çš„æ•°æ®é›†ä¸Šï¼Œä¸Šè¿° metric å’Œäººå·¥åˆ¤æ–­æœ‰ä¸€å®šå¾®å¼±çš„å…³è” (only a small positive correlation on chitchat oriented Twitter dataset)</li>
<li>åœ¨æŠ€æœ¯ç±»çš„æ•°æ®é›†ä¸Šï¼Œä¸Šè¿° metric å’Œäººå·¥åˆ¤æ–­å®Œå…¨æ²¡æœ‰å…³è”(no correlation at all on the technical UDC)</li>
<li>å½“å±€é™äºä¸€ä¸ªç‰¹åˆ«å…·ä½“çš„é¢†åŸŸæ—¶ï¼ŒBLEU ä¼šæœ‰ä¸é”™çš„è¡¨ç°</li>
</ul>
<p>éšç€å‘å±•ï¼Œè¿˜é€æ¸æœ‰äº†ä¸€äº›åˆ«çš„è¯„ä»·æ–¹æ³•ï¼Œæ¯”å¦‚ä½¿ç”¨GANç½‘ç»œæ¥è¯„ä»·ç”Ÿæˆçš„å›å¤æ˜¯å¦è·Ÿäººç±»å›å¤ç›¸ä¼¼ç­‰ç­‰ã€‚ã€‚ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Common Useful Links]]></title>
      <url>http://shopee.ai/2018/12/01/chatbot/chatbot-common-links/</url>
      <content type="html"><![CDATA[<p>Here are some useful links about Chatbot</p>
<a id="more"></a>
<h2 id="Tensorflow"><a href="#Tensorflow" class="headerlink" title="Tensorflow"></a>Tensorflow</h2><ul>
<li><a href="https://blog.csdn.net/leviopku/article/details/78508951" target="_blank" rel="external">TensorFlowä¸­global_stepçš„ç®€å•åˆ†æ</a></li>
<li><a href="https://feisky.xyz/machine-learning/tensorflow/hello.html" target="_blank" rel="external">Tensorflow å…¥é—¨ï¼Œ å¾ˆå¥½çš„æ•™ç¨‹</a></li>
<li><a href="https://applenob.github.io/tf_10.html#tf.sequence_mask" target="_blank" rel="external">Tensorflow å­¦ä¹ ç¬”è®° æ•°æ®å¤„ç† sequence_mask</a></li>
<li><a href="https://blog.csdn.net/qq_28808697/article/details/80648657" target="_blank" rel="external">tensorflow å­¦ä¹ ç¬”è®°â€“ tf.reduce_maxã€tf.sequence_mask</a></li>
<li><a href="https://blog.csdn.net/UESTC_C2_403/article/details/72779417" target="_blank" rel="external">tf.nn.embedding_lookupå‡½æ•°çš„ç”¨æ³•</a></li>
<li><a href="https://ask.hellobi.com/blog/wenwen/11367" target="_blank" rel="external">ä½¿ç”¨Seq2Seq+attentionå®ç°ç®€å•çš„Chatbot</a></li>
<li><a href="https://blog.csdn.net/banana1006034246/article/details/75092388" target="_blank" rel="external">tf.strided_sliceå‡½æ•°</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/27685060" target="_blank" rel="external">Tensorlow ä¸­æ–‡API: å¸¸é‡(constants) - 5. tf.fill</a></li>
<li><a href="https://blog.csdn.net/mao_xiao_feng/article/details/53366163" target="_blank" rel="external">ã€TensorFlowã€‘tf.concatçš„ç”¨æ³•</a></li>
<li><a href="https://ithelp.ithome.com.tw/articles/10187814" target="_blank" rel="external">[ç¬¬ 28 å¤©] æ·±åº¦å­¸ç¿’ï¼ˆ2ï¼‰TensorBoard</a></li>
<li><a href="https://blog.csdn.net/hu_guan_jie/article/details/78495297" target="_blank" rel="external">tf.identityçš„æ„ä¹‰ä»¥åŠç”¨ä¾‹</a></li>
<li><a href="https://www.jianshu.com/p/c0c5f1bdbb88" target="_blank" rel="external">TensorflowåŠ¨æ€seq2seqä½¿ç”¨æ€»ç»“ï¼ˆr1.3ï¼‰- Loss Function</a></li>
<li><a href="https://blog.csdn.net/u012436149/article/details/53184847" target="_blank" rel="external">tensorflowå­¦ä¹ ç¬”è®°(äºŒåä¸€):tensorflowå¯è§†åŒ–</a></li>
<li><a href="https://blog.csdn.net/hustqb/article/details/80260002" target="_blank" rel="external">tensorflowâ€”tf.gradients()ç®€å•å®ç”¨æ•™ç¨‹</a></li>
<li><a href="https://blog.csdn.net/u013713117/article/details/56281715" target="_blank" rel="external">tf.clip_by_global_normç†è§£</a></li>
<li><a href="https://applenob.github.io/tf_6.html" target="_blank" rel="external">Tensorflow å­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰ â€”â€”â€”â€” Optimizer</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/47929039" target="_blank" rel="external">Tensorflowä¸­çš„Seq2Seqå…¨å®¶æ¡¶</a></li>
<li><a href="https://blog.csdn.net/weixin_41700555/article/details/85011957" target="_blank" rel="external">map() ä¸ nest.map_structureï¼ˆï¼‰ çš„åŒºåˆ«åŠç”¨æ³•</a></li>
</ul>
<h2 id="Seq2Seq"><a href="#Seq2Seq" class="headerlink" title="Seq2Seq"></a>Seq2Seq</h2><ul>
<li><a href="https://blog.csdn.net/wuzqChom/article/details/77073246" target="_blank" rel="external">sampled softmax Csdn wuzqChom</a></li>
<li><a href="https://www.zhihu.com/question/62070907/answer/218745719" target="_blank" rel="external">å¦‚ä½•é€šä¿—ç†è§£sampled softmaxæœºåˆ¶ï¼Ÿ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tensorflow Sequence_loss]]></title>
      <url>http://shopee.ai/2018/12/01/tensorflow/sequence_loss/</url>
      <content type="html"><![CDATA[<p>sequence_loss æ˜¯ nlpç®—æ³• ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªå‡½æ•°. rnn,lstm,attentionéƒ½è¦ç”¨åˆ°è¿™ä¸ªå‡½æ•°.çœ‹ä¸‹é¢ä»£ç :</p>
<a id="more"></a>
<h2 id="1-ç‰¹æ®Šçš„ğŸŒ°"><a href="#1-ç‰¹æ®Šçš„ğŸŒ°" class="headerlink" title="1. ç‰¹æ®Šçš„ğŸŒ°"></a>1. ç‰¹æ®Šçš„ğŸŒ°</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow.contrib.seq2seq <span class="keyword">import</span> sequence_loss</span><br><span class="line"></span><br><span class="line">logits_np = np.array([</span><br><span class="line">    [[<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>], [<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>], [<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>]],</span><br><span class="line">    [[<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>], [<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>], [<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>]]</span><br><span class="line">])</span><br><span class="line">targets_np = np.array([</span><br><span class="line">    [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">    [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">], dtype=np.int32)</span><br><span class="line"></span><br><span class="line">logits = tf.convert_to_tensor(logits_np)</span><br><span class="line">targets = tf.convert_to_tensor(targets_np)</span><br><span class="line">cost = sequence_loss(logits=logits,</span><br><span class="line">                     targets=targets,</span><br><span class="line">                     weights=tf.ones_like(targets, dtype=tf.float64))</span><br><span class="line">init = tf.global_variables_initializer()</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.run(init)</span><br><span class="line">    r = sess.run(cost)</span><br><span class="line">    print(r)</span><br></pre></td></tr></table></figure>
<p>å…ˆå¯¹æ¯ä¸ª[0.5,0.5,0.5,0.5]å–softmax. softmax([0.5,0.5,0.5,0.5])=(0.25,0.25,0.25,0.25)ç„¶åå†è®¡ç®—-ln(0.25)*6/6=1.38629436112.</p>
<h2 id="2-ä¸€èˆ¬çš„ğŸŒ°"><a href="#2-ä¸€èˆ¬çš„ğŸŒ°" class="headerlink" title="2. ä¸€èˆ¬çš„ğŸŒ°"></a>2. ä¸€èˆ¬çš„ğŸŒ°</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> tensorflow.contrib.seq2seq <span class="keyword">import</span> sequence_loss</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ä¸ªå¥å­ï¼Œ3ä¸ªæ—¶åˆ»ï¼Œ4ä¸ªå€¼(è¯æ±‡è¡¨)</span></span><br><span class="line">output_np = np.array(</span><br><span class="line">    [</span><br><span class="line">        [[<span class="number">0.6</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>], [<span class="number">0.9</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>], [<span class="number">1.0</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>]],</span><br><span class="line">        [[<span class="number">0.2</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>], [<span class="number">0.3</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>], [<span class="number">0.4</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>]]</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line">print(output_np.shape)</span><br><span class="line"><span class="comment"># 2ä¸ªå¥å­ï¼Œ</span></span><br><span class="line">target_np = np.array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">                      [<span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>]],</span><br><span class="line">                     dtype=np.int32)</span><br><span class="line">print(target_np.shape)</span><br><span class="line">output = tf.convert_to_tensor(output_np, np.float32)</span><br><span class="line">target = tf.convert_to_tensor(target_np, np.int32)</span><br><span class="line"></span><br><span class="line">cost = sequence_loss(output,</span><br><span class="line">                     target,</span><br><span class="line">                     tf.ones_like(target, dtype=np.float32))</span><br><span class="line"></span><br><span class="line">init = tf.global_variables_initializer()</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.run(init)</span><br><span class="line">    cost_r = sess.run(cost)</span><br><span class="line">    print(cost_r)</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä»£ç ä½œç”¨å’Œä¸‹é¢çš„tf.reduce_mean(softmax_cross_entropy_with_logits)ä½œç”¨ä¸€è‡´.</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_onehot</span><span class="params">(a)</span>:</span></span><br><span class="line">    max_index = np.max(a)</span><br><span class="line">    b = np.zeros((a.shape[<span class="number">0</span>], max_index + <span class="number">1</span>))</span><br><span class="line">    b[np.arange(a.shape[<span class="number">0</span>]), a] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> b</span><br><span class="line"></span><br><span class="line">logits_ph = tf.placeholder(tf.float32, shape=(<span class="keyword">None</span>, <span class="keyword">None</span>))</span><br><span class="line">labels_ph = tf.placeholder(tf.float32, shape=(<span class="keyword">None</span>, <span class="keyword">None</span>))</span><br><span class="line">output_np = np.array([</span><br><span class="line">    [<span class="number">0.6</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>],</span><br><span class="line">    [<span class="number">0.9</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>],</span><br><span class="line">    [<span class="number">1.0</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>],</span><br><span class="line">    [<span class="number">0.2</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>],</span><br><span class="line">    [<span class="number">0.3</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>],</span><br><span class="line">    [<span class="number">0.4</span>, <span class="number">0.5</span>, <span class="number">0.3</span>, <span class="number">0.2</span>]])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cost = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits(labels=labels_ph, logits=logits_ph))</span><br><span class="line">target_np = np.array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">init = tf.global_variables_initializer()</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.run(init)</span><br><span class="line">    cost_r = sess.run(cost, feed_dict=&#123;logits_ph: output_np, labels_ph: to_onehot(target_np)&#125;)</span><br><span class="line">    print(cost_r)</span><br></pre></td></tr></table></figure>
<p>å†å–äº¤å‰ç†µ,å†å–å¹³å‡.</p>
<h2 id="seq2seq-çš„åº”ç”¨"><a href="#seq2seq-çš„åº”ç”¨" class="headerlink" title="seq2seq çš„åº”ç”¨"></a>seq2seq çš„åº”ç”¨</h2><p>chatbot åº”ç”¨ seq2seq éœ€è¦ç”¨åˆ° sequence_loss</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å·¥ç¨‹å¸ˆåº”è¯¥å¦‚ä½•æ³¨æ„èº«ä½“å¥åº·ï¼Ÿ]]></title>
      <url>http://shopee.ai/2018/11/26/tools/body-health/</url>
      <content type="html"><![CDATA[<p>IT å·¥ç¨‹å¸ˆç¾¤ä½“æ˜¯èŒä¸šç—…é«˜å‘äººç¾¤ï¼ˆä¸è¯´äº†ï¼Œéƒ½æ˜¯æ³ªâ€¦ï¼‰</p>
<a id="more"></a>
<p><strong>ç¨‹åºå‘˜å¸¸è§çš„èŒä¸šç—…</strong></p>
<ul>
<li>é¢ˆæ¤ç—…</li>
<li>è…°æ¤ç—…</li>
<li>ä¹…åå¯¹å‰åˆ—è…ºçš„å±å®³ä»¥åŠè‚¥èƒ–é—®é¢˜</li>
<li>çœ¼ç–²åŠ³ã€ç”¨çœ¼è¿‡åº¦</li>
<li>é¥®é£Ÿã€ä½œæ¯ä¸è§„å¾‹å¯¼è‡´çš„èƒƒç—…ç­‰ä¸€ç³»åˆ—é—®é¢˜</li>
</ul>
<p><strong>å…¨æ–‡ç›®å½•ï¼š</strong></p>
<p>é¢ˆæ¤ã€è…°æ¤ç—…é˜²æ²»ã€ä¹…åå¯¹å‰åˆ—è…ºã€è‚›é—¨çš„å±å®³ä»¥åŠè‚¥èƒ–é—®é¢˜</p>
<ul>
<li>æ¢ä¸€æŠŠäººä½“å·¥å­¦æ¤…ï¼Œé™„ä¸åŒä»·ä½å“ç‰Œæ¨è</li>
<li>ç«™ç«‹å¼åŠå…¬</li>
<li>äººä½“å·¥å­¦æ¤…å’Œç«™ç«‹å¼åŠå…¬ï¼Œåº”è¯¥é€‰æ‹©å“ªä¸ªï¼Ÿ</li>
</ul>
<p>ç”¨çœ¼è¿‡åº¦ã€çœ¼ç–²åŠ³</p>
<ul>
<li>æŠ¤çœ¼å® è½¯ä»¶</li>
<li>Gunnar é˜²è“å…‰çœ¼é•œ</li>
<li>f.lux è½¯ä»¶</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.zhihu.com/question/20402689" target="_blank" rel="external">ç¨‹åºå‘˜åº”è¯¥å¦‚ä½•æ³¨æ„èº«ä½“å¥åº·ï¼Ÿå¯èƒ½æ‚£å“ªäº›èŒä¸šç—…ï¼Ÿå¦‚ä½•é˜²æ²»ï¼Ÿ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Glove å’Œ fastText]]></title>
      <url>http://shopee.ai/2018/11/16/nlp/glove_p1/</url>
      <content type="html"><![CDATA[<p>æœ¬èŠ‚ä»‹ç»ä¸¤ç§æ›´æ–°ä¸€ç‚¹çš„è¯å‘é‡ã€‚åˆ†åˆ«æ˜¯2014å¹´Stanfordå‘è¡¨çš„<a href="https://nlp.stanford.edu/projects/glove/" target="_blank" rel="external">Glove</a>å’Œ2017å¹´ç”±Facebookå‘è¡¨çš„<a href="https://fasttext.cc/" target="_blank" rel="external">fastText</a>.</p>
<a id="more"></a>
<p>è®©æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ word2vec ä¸­çš„è·³å­—æ¨¡å‹ã€‚å°†è·³å­—æ¨¡å‹ä¸­ä½¿ç”¨ softmax è¿ç®—è¡¨è¾¾çš„æ¡ä»¶æ¦‚ç‡ $\mathbb{P}(w_j\mid w_i)$. è®°ä½œ $q_{ij}$ï¼Œå³</p>
<p>$$<br>q_{ij}=\frac{\exp(\mathbf{u}_j^\top \mathbf{v}_i)}{ \sum_{k \in \mathcal{V}} \text{exp}(\mathbf{u}_k^\top \mathbf{v}_i)},<br>$$</p>
<h2 id="GloVe-æ¨¡å‹"><a href="#GloVe-æ¨¡å‹" class="headerlink" title="GloVe æ¨¡å‹"></a>GloVe æ¨¡å‹</h2><p>æœ‰é‰´äºæ­¤ï¼Œä½œä¸ºåœ¨ word2vec ä¹‹åæå‡ºçš„è¯åµŒå…¥æ¨¡å‹ï¼ŒGloVe é‡‡ç”¨äº†å¹³æ–¹æŸå¤±ï¼Œå¹¶åŸºäºè¯¥æŸå¤±å¯¹è·³å­—æ¨¡å‹åšäº†ä¸‰ç‚¹æ”¹åŠ¨ </p>
<h2 id="ä»æ¡ä»¶æ¦‚ç‡æ¯”å€¼ç†è§£-GloVe"><a href="#ä»æ¡ä»¶æ¦‚ç‡æ¯”å€¼ç†è§£-GloVe" class="headerlink" title="ä»æ¡ä»¶æ¦‚ç‡æ¯”å€¼ç†è§£ GloVe"></a>ä»æ¡ä»¶æ¦‚ç‡æ¯”å€¼ç†è§£ GloVe</h2><p>æˆ‘ä»¬è¿˜å¯ä»¥ä»å¦å¤–ä¸€ä¸ªè§’åº¦æ¥ç†è§£ GloVe è¯åµŒå…¥ã€‚æ²¿ç”¨æœ¬èŠ‚å‰é¢çš„ç¬¦å·ï¼Œ$\mathbb{P}(w_j \mid w_i)$ è¡¨ç¤ºæ•°æ®é›†ä¸­ä»¥ $w_i$ ä¸ºä¸­å¿ƒè¯ç”ŸæˆèƒŒæ™¯è¯ $w_j$ çš„æ¡ä»¶æ¦‚ç‡ï¼Œå¹¶è®°ä½œ $p_{ij}$ã€‚ä½œä¸ºæºäºæŸå¤§å‹è¯­æ–™åº“çš„çœŸå®ä¾‹å­ï¼Œä»¥ä¸‹åˆ—ä¸¾äº†ä¸¤ç»„åˆ†åˆ«ä»¥â€œiceâ€ï¼ˆâ€œå†°â€ï¼‰å’Œâ€œsteamâ€ï¼ˆâ€œè’¸æ±½â€ï¼‰ä¸ºä¸­å¿ƒè¯çš„æ¡ä»¶æ¦‚ç‡ä»¥åŠå®ƒä»¬ä¹‹é—´çš„æ¯”å€¼ [1]ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">$w_k$=</th>
<th style="text-align:center">â€œsolidâ€</th>
<th style="text-align:center">â€œgasâ€</th>
<th style="text-align:center">â€œwaterâ€</th>
<th style="text-align:center">â€œfashionâ€</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$p_1=\mathbb{P}(w_k\mid\text{â€œiceâ€})$</td>
<td style="text-align:center">0.00019</td>
<td style="text-align:center">0.000066</td>
<td style="text-align:center">0.003</td>
<td style="text-align:center">0.000017</td>
</tr>
<tr>
<td style="text-align:center">$p_2=\mathbb{P}(w_k\mid\text{â€œsteamâ€})$</td>
<td style="text-align:center">0.000022</td>
<td style="text-align:center">0.00078</td>
<td style="text-align:center">0.0022</td>
<td style="text-align:center">0.000018</td>
</tr>
<tr>
<td style="text-align:center">$p_1/p_2$</td>
<td style="text-align:center">8.9</td>
<td style="text-align:center">0.085</td>
<td style="text-align:center">1.36</td>
<td style="text-align:center">0.96</td>
</tr>
</tbody>
</table>
<p>æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ä»¥ä¸‹ç°è±¡ï¼š</p>
<blockquote>
<ul>
<li><p>å¯¹äºä¸â€œiceâ€ç›¸å…³è€Œä¸â€œsteamâ€ä¸ç›¸å…³çš„è¯ $w_k$ï¼Œä¾‹å¦‚ $w_k=$â€œsolidâ€ï¼ˆâ€œå›ºä½“â€ï¼‰ï¼Œæˆ‘ä»¬æœŸæœ›æ¡ä»¶æ¦‚ç‡æ¯”å€¼è¾ƒå¤§ï¼Œä¾‹å¦‚ä¸Šè¡¨æœ€åä¸€è¡Œä¸­çš„å€¼ 8.9ï¼›</p>
</li>
<li><p>å¯¹äºä¸â€œiceâ€ä¸ç›¸å…³è€Œä¸ steam ç›¸å…³çš„è¯ $w_k$ï¼Œä¾‹å¦‚ $w_k=$â€œgasâ€ï¼ˆâ€œæ°”ä½“â€ï¼‰ï¼Œæˆ‘ä»¬æœŸæœ›æ¡ä»¶æ¦‚ç‡æ¯”å€¼è¾ƒå°ï¼Œä¾‹å¦‚ä¸Šè¡¨æœ€åä¸€è¡Œä¸­çš„å€¼ 0.085ï¼›</p>
</li>
<li><p>å¯¹äºä¸â€œiceâ€å’Œâ€œsteamâ€éƒ½ç›¸å…³çš„è¯ $w_k$ï¼Œä¾‹å¦‚ $w_k=$â€œwaterâ€ï¼ˆâ€œæ°´â€ï¼‰ï¼Œæˆ‘ä»¬æœŸæœ›æ¡ä»¶æ¦‚ç‡æ¯”å€¼æ¥è¿‘ 1ï¼Œä¾‹å¦‚ä¸Šè¡¨æœ€åä¸€è¡Œä¸­çš„å€¼ 1.36ï¼›</p>
</li>
<li><p>å¯¹äºä¸â€œiceâ€å’Œâ€œsteamâ€éƒ½ä¸ç›¸å…³çš„è¯ $w_k$ï¼Œä¾‹å¦‚ $w_k=$â€œfashionâ€ï¼ˆâ€œæ—¶å°šâ€ï¼‰ï¼Œæˆ‘ä»¬æœŸæœ›æ¡ä»¶æ¦‚ç‡æ¯”å€¼æ¥è¿‘ 1ï¼Œä¾‹å¦‚ä¸Šè¡¨æœ€åä¸€è¡Œä¸­çš„å€¼ 0.96ã€‚</p>
</li>
</ul>
</blockquote>
<p>ç”±æ­¤å¯è§ï¼Œæ¡ä»¶æ¦‚ç‡æ¯”å€¼èƒ½æ¯”è¾ƒç›´è§‚åœ°è¡¨è¾¾è¯ä¸è¯ä¹‹é—´çš„å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªè¯å‘é‡å‡½æ•°ä½¿å¾—å®ƒèƒ½æœ‰æ•ˆæ‹Ÿåˆæ¡ä»¶æ¦‚ç‡æ¯”å€¼ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œä»»æ„ä¸€ä¸ªè¿™æ ·çš„æ¯”å€¼éœ€è¦ä¸‰ä¸ªè¯ $w_i$ã€$w_j$ å’Œ $w_k$ã€‚ä»¥ $w_i$ ä½œä¸ºä¸­å¿ƒè¯çš„æ¡ä»¶æ¦‚ç‡æ¯”å€¼ä¸º ${p_{ij}}/{p_{ik}}$ã€‚æˆ‘ä»¬å¯ä»¥æ‰¾ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä½¿ç”¨è¯å‘é‡æ¥æ‹Ÿåˆè¿™ä¸ªæ¡ä»¶æ¦‚ç‡æ¯”å€¼</p>
<p>$$f(\boldsymbol{u}_j, \boldsymbol{u}_k, {\boldsymbol{v}}_i) \approx \frac{p_{ij}}{p_{ik}}.$$</p>
<p>è¿™é‡Œå‡½æ•° $f$ å¯èƒ½çš„è®¾è®¡å¹¶ä¸å”¯ä¸€ï¼Œæˆ‘ä»¬åªéœ€è€ƒè™‘ä¸€ç§è¾ƒä¸ºåˆç†çš„å¯èƒ½æ€§ã€‚æ³¨æ„åˆ°æ¡ä»¶æ¦‚ç‡æ¯”å€¼æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œæˆ‘ä»¬å¯ä»¥å°† $f$ é™åˆ¶ä¸ºä¸€ä¸ªæ ‡é‡å‡½æ•°ï¼š$f(\boldsymbol{u}_j, \boldsymbol{u}_k, {\boldsymbol{v}}_i) = f\left((\boldsymbol{u}_j - \boldsymbol{u}_k)^\top {\boldsymbol{v}}_i\right)$ã€‚äº¤æ¢ç´¢å¼• $j$ å’Œ $k$ åå¯ä»¥çœ‹åˆ°å‡½æ•° $f$ åº”è¯¥æ»¡è¶³ $f(x)f(-x)=1$ï¼Œå› æ­¤ä¸€ä¸ªå¯èƒ½æ˜¯ $f(x)=\exp(x)$ï¼Œäºæ˜¯</p>
<p>$$f(\boldsymbol{u}_j, \boldsymbol{u}_k, {\boldsymbol{v}}_i) = \frac{\exp\left(\boldsymbol{u}_j^\top {\boldsymbol{v}}_i\right)}{\exp\left(\boldsymbol{u}_k^\top {\boldsymbol{v}}_i\right)} \approx \frac{p_{ij}}{p_{ik}}.$$</p>
<p>æ»¡è¶³æœ€å³è¾¹çº¦ç­‰å·çš„ä¸€ä¸ªå¯èƒ½æ˜¯ $\exp\left(\boldsymbol{u}_j^\top {\boldsymbol{v}}_i\right) \approx \alpha p_{ij}$ï¼Œè¿™é‡Œ $\alpha$ æ˜¯ä¸€ä¸ªå¸¸æ•°ã€‚è€ƒè™‘åˆ° $p_{ij}=x_{ij}/x_i$ï¼Œå–å¯¹æ•°å $\boldsymbol{u}_j^\top {\boldsymbol{v}}_i \approx \log\,\alpha + \log\,x_{ij} - \log\,x_i$ã€‚æˆ‘ä»¬ä½¿ç”¨é¢å¤–çš„åå·®é¡¹æ¥æ‹Ÿåˆ $- \log\,\alpha + \log\,x_i$ï¼Œä¾‹å¦‚ä¸­å¿ƒè¯åå·®é¡¹ $b_i$ å’ŒèƒŒæ™¯è¯åå·®é¡¹ $c_j$ï¼š</p>
<p>$$\boldsymbol{u}_j^\top \boldsymbol{v}_i + b_i + c_j \approx \log(x_{ij}).$$</p>
<p>å¯¹ä¸Šå¼å·¦å³ä¸¤è¾¹å–å¹³æ–¹è¯¯å·®å¹¶åŠ æƒï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ° GloVe çš„æŸå¤±å‡½æ•°ã€‚</p>
<p><img src="/images/nlp/glove-1.jpeg" width="900" img=""></p>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul>
<li>åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œäº¤å‰ç†µæŸå¤±å‡½æ•°æœ‰åŠ£åŠ¿ã€‚GloVe é‡‡ç”¨äº†å¹³æ–¹æŸå¤±ï¼Œå¹¶é€šè¿‡è¯å‘é‡æ‹Ÿåˆé¢„å…ˆåŸºäºæ•´ä¸ªæ•°æ®é›†è®¡ç®—å¾—åˆ°çš„å…¨å±€ç»Ÿè®¡ä¿¡æ¯ã€‚</li>
<li>ä»»æ„è¯çš„ä¸­å¿ƒè¯å‘é‡å’ŒèƒŒæ™¯è¯å‘é‡åœ¨ GloVe ä¸­æ˜¯ç­‰ä»·çš„ã€‚</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.youtube.com/watch?v=ioSnNLZSQq0&amp;list=PLLbeS1kM6teJqdFzw1ICHfa4a1y0hg8Ax&amp;index=17" target="_blank" rel="external">åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ç¬¬åä¸ƒè¯¾ï¼šGloVeã€fastTextå’Œä½¿ç”¨é¢„è®­ç»ƒçš„è¯å‘é‡</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TensorFlowï¼šç¬¬8ç«  LSTM & Bi-RNN & Deep RNN]]></title>
      <url>http://shopee.ai/2018/11/10/tensorflow/tf-google-8-rnn-2/</url>
      <content type="html"><![CDATA[<p>LSTM å¯ä»¥å­¦ä¹ åˆ°è·ç¦»å¾ˆè¿œçš„ä¿¡æ¯ï¼Œè§£å†³äº†RNNæ— æ³•é•¿æœŸä¾èµ–çš„é—®é¢˜ã€‚ </p>
<p>Bidirectional RNN è§£å†³çš„æ˜¯ å½“å‰æ—¶åˆ»çš„è¾“å‡ºä¸ä»…å’Œä¹‹å‰çš„çŠ¶æ€æœ‰å…³ç³»ï¼Œä¹Ÿå’Œä¹‹åçš„çŠ¶æ€ç›¸å…³ã€‚</p>
<p>Deep RNNs æ˜¯ ä¸ºäº†å¢å¼ºæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ï¼Œå¯ä»¥åœ¨ç½‘ç»œä¸­è®¾ç½®å¤šä¸ªå¾ªç¯å±‚ï¼Œå°†æ¯å±‚ RNN çš„è¾“å‡ºä¼ ç»™ä¸‹ä¸€å±‚å¤„ç†ã€‚</p>
<a id="more"></a>
<h2 id="1-LSTM"><a href="#1-LSTM" class="headerlink" title="1. LSTM"></a>1. LSTM</h2><p><img src="/images/tensorflow/tf-google-8-2.jpg" width="600"></p>
<h3 id="å•å±‚LSTMç»“æ„å®ç°"><a href="#å•å±‚LSTMç»“æ„å®ç°" class="headerlink" title="å•å±‚LSTMç»“æ„å®ç°"></a>å•å±‚LSTMç»“æ„å®ç°</h3><p>Tensorflowä¸­å®ç°äº†ä»¥ä¸‹æ¨¡å— :tf.nn.rnn_cellï¼ŒåŒ…æ‹¬äº†10ä¸ªç±»ï¼š</p>
<ol>
<li>class BasicLSTMCell: Basic LSTM recurrent network cell.</li>
<li>class BasicRNNCell: The most basic RNN cell.</li>
<li>class DeviceWrapper: Operator that ensures an RNNCell runs on a particular device.</li>
<li>class DropoutWrapper: Operator adding dropout to inputs and outputs of the given cell.</li>
<li>class GRUCell: Gated Recurrent Unit cell (cf. <a href="http://arxiv.org/abs/1406.1078" target="_blank" rel="external">http://arxiv.org/abs/1406.1078</a>).</li>
<li>class LSTMCell: Long short-term memory unit (LSTM) recurrent network cell.</li>
<li>class LSTMStateTuple: Tuple used by LSTM Cells for state_size, zero_state, and output state.</li>
<li>class MultiRNNCell: RNN cell composed sequentially of multiple simple cells.</li>
<li>class RNNCell: Abstract object representing an RNN cell.</li>
<li>class ResidualWrapper: RNNCell wrapper that ensures cell inputs are added to the outputs.</li>
</ol>
<p>åœ¨åŸºæœ¬çš„ LSTM cell ä¸­æˆ‘ä»¬ç”¨ç¬¬ä¸€ä¸ªç±»æ¥è¿›è¡Œå®ç°ï¼Œä»–æ˜¯ tf.contrib.rnn.BasicLSTMCell åŒåç±»ï¼Œå®šä¹‰åœ¨ <a href="https://github.com/tensorflow/tensorflow/blob/r1.11/tensorflow/python/ops/rnn_cell_impl.py" target="_blank" rel="external">tensorflow/python/ops/rnn_cell_impl.py</a> ä¸­</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">_init__(</span><br><span class="line">    num_units,</span><br><span class="line">    forget_bias=<span class="number">1.0</span>,</span><br><span class="line">    state_is_tuple=<span class="keyword">True</span>,</span><br><span class="line">    activation=<span class="keyword">None</span>,</span><br><span class="line">    reuse=<span class="keyword">None</span>,</span><br><span class="line">    name=<span class="keyword">None</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­å‚æ•°è¡¨ç¤ºï¼š</p>
<ul>
<li>num_units è¡¨ç¤ºç¥ç»å…ƒçš„ä¸ªæ•°</li>
<li>forget_bias å°±æ˜¯LSTMä»¬çš„å¿˜è®°ç³»æ•°ï¼Œå¦‚æœç­‰äº1ï¼Œå°±æ˜¯ä¸ä¼šå¿˜è®°ä»»ä½•ä¿¡æ¯ã€‚å¦‚æœç­‰äº0ï¼Œå°±éƒ½å¿˜è®°</li>
<li>state_is_tuple é»˜è®¤å°±æ˜¯Trueï¼Œè¡¨ç¤ºè¿”å›çš„çŠ¶æ€æ˜¯ä¸€ä¸ª 2-tuple (c_state, m_state)</li>
<li>activation è¡¨ç¤ºå†…éƒ¨çŠ¶æ€çš„æ¿€æ´»å‡½æ•°ï¼Œé»˜è®¤æ˜¯ tanh</li>
<li>name è¡¨ç¤ºè¿™ä¸€å±‚çš„åå­—ï¼ŒåŒæ ·åå­—çš„å±‚ä¼šå…±äº«æƒé‡ï¼Œå¦‚æœä¸ºäº†é¿å…è¿™æ ·çš„æƒ…å†µéœ€è¦è®¾ç½®reuse=True</li>
</ul>
<p><img src="/images/tensorflow/tf-google-8-5.jpg" width="600"></p>
<p>é‡‡ç”¨<strong>BasicLSTMCellæ¥å£°æ˜LSTMç»“æ„å¦‚ä¸‹æ‰€ç¤º</strong>ï¼Œæˆ‘ä»¬ç”¨ä¼ªä»£ç å’Œæ³¨é‡Šæ¥è¿›è¡Œè¯´æ˜ã€‚</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªlstmç»“æ„ï¼Œåœ¨tensorflowä¸­é€šè¿‡ä¸€å¥è¯å°±èƒ½å®ç°ä¸€ä¸ªå®Œæ•´çš„lstmç»“æ„</span></span><br><span class="line"><span class="comment"># lstm_hidden_size è¡¨ç¤º LSTM cell ä¸­ç¥ç»å…ƒçš„æ•°é‡ã€‚ cellå…¶å®å°±æ˜¯ä¸€ä¸ªRNNçš„ç½‘ç»œã€‚</span></span><br><span class="line">lstm = tf.nn.rnn_cell.BasicLSTMCell(lstm_hidden_size)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†lstmä¸­çš„çŠ¶æ€åˆå§‹åŒ–ä¸ºå…¨0æ•°ç»„ï¼ŒBasicLSTMCellæä¾›äº†zero_stateæ¥ç”Ÿæˆå…¨0æ•°ç»„</span></span><br><span class="line"><span class="comment"># åœ¨ä¼˜åŒ–RNNæ—¶æ¯æ¬¡ä¹Ÿä¼šä½¿ç”¨ä¸€ä¸ªbatchçš„è®­ç»ƒæ ·æœ¬ï¼Œbatch_sizeç»™å‡ºäº†ä¸€ä¸ªbatchçš„å¤§å°</span></span><br><span class="line">state = lstm.zero_state(batch_size, tf.float32)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰æŸå¤±å‡½æ•°</span></span><br><span class="line">loss = <span class="number">0.0</span></span><br><span class="line"><span class="comment"># ä¸ºäº†åœ¨è®­ç»ƒä¸­é¿å…æ¢¯åº¦å¼¥æ•£çš„æƒ…å†µï¼Œè§„å®šä¸€ä¸ªæœ€å¤§çš„åºåˆ—é•¿åº¦num_steps</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(num_steps):</span><br><span class="line">    <span class="comment"># åœ¨ç¬¬ä¸€ä¸ªæ—¶åˆ»å£°æ˜lstmç»“æ„ä¸­ä½¿ç”¨çš„å˜é‡ï¼Œåœ¨ä¹‹åçš„æ—¶åˆ»éƒ½éœ€è¦é‡å¤ä½¿ç”¨ä¹‹å‰å®šä¹‰å¥½çš„å˜é‡</span></span><br><span class="line">    <span class="keyword">if</span> i&gt;<span class="number">0</span>:</span><br><span class="line">        tf.get_variable_scope().reuse_variables()</span><br><span class="line">    <span class="comment"># æ¯ä¸€æ­¥å¤„ç†æ—¶é—´åºåˆ—ä¸­çš„ä¸€ä¸ªæ—¶åˆ»ï¼Œå°†å½“å‰è¾“å…¥current_inputå’Œå‰ä¸€æ—¶åˆ»çŠ¶æ€stateä¼ å…¥LSTMç»“æ„</span></span><br><span class="line">    <span class="comment"># å°±å¯ä»¥å¾—åˆ°å½“å‰lstmç»“æ„çš„è¾“å‡ºlstm_outputå’Œæ›´æ–°åçš„çŠ¶æ€state</span></span><br><span class="line">    lstm_output, state = lstm(current_input, state)</span><br><span class="line">    <span class="comment"># å°†å½“å‰æ—¶åˆ»lstmè¾“å‡ºä¼ å…¥ä¸€ä¸ªå…¨è¿æ¥å±‚å¾—åˆ°æœ€åçš„è¾“å‡º</span></span><br><span class="line">    final_output = fully_connected(lstm_output)</span><br><span class="line">    <span class="comment"># è®¡ç®—å½“å‰æ—¶åˆ»è¾“å‡ºçš„æŸå¤±</span></span><br><span class="line">    loss += calc_loss(final_output, expected_output)</span><br></pre></td></tr></table></figure>
<h2 id="2-Bidirectional-RNN"><a href="#2-Bidirectional-RNN" class="headerlink" title="2. Bidirectional RNN"></a>2. Bidirectional RNN</h2><ul>
<li>Bidirectional RNN åŒå‘é€’å½’ç¥ç»ç½‘ç»œ. è¯¥ç¥ç»ç½‘ç»œé¦–å…ˆä»æ­£é¢ç†è§£ä¸€éè¿™å¥è¯ï¼Œå†ä»åæ–¹å‘ç†è§£ä¸€é.</li>
</ul>
<p><img src="/images/tensorflow/tf-google-8-3.jpg" width="600"></p>
<h2 id="3-Deep-RNNs"><a href="#3-Deep-RNNs" class="headerlink" title="3. Deep RNNs"></a>3. Deep RNNs</h2><ul>
<li>Deep RNNs æ·±å±‚ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å±‚æ¬¡å¢ã€‚ æ¨ªå‘è¡¨ç¤ºæ—¶é—´å±•å¼€ï¼Œçºµå‘åˆ™æ˜¯å±‚æ¬¡å±•å¼€ã€‚</li>
</ul>
<!--<img src="/images/tensorflow/tf-google-8-4.jpg" width="600" />
-->
<p><img src="/images/deeplearning/C5W1-47_1.png" width="750"></p>
<p>MultiRNNCellçš„åˆå§‹åŒ–æ–¹æ³•å¦‚ä¸‹</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">__init__(</span><br><span class="line">    cells,</span><br><span class="line">    state_is_tuple=<span class="keyword">True</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­</p>
<ul>
<li>cells è¡¨ç¤º RNNCells çš„ listï¼ŒæŒ‰ç…§é¡ºåºä»è¾“å…¥åˆ°è¾“å‡ºæ¥è¡¨ç¤ºä¸åŒå±‚çš„å¾ªç¯å±‚</li>
<li>state_is_tuple è¡¨ç¤º æ¥å—å’Œè¿”å›çš„çŠ¶æ€éƒ½æ˜¯ n-tuples, å…¶ä¸­ n = len(cells)ï¼Œå»ºè®®é‡‡ç”¨True</li>
</ul>
<p>åŒæ ·MultiRNNCellæä¾›äº†çŠ¶æ€åˆå§‹åŒ–çš„å‡½æ•°</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">zero_state(</span><br><span class="line">    batch_size,</span><br><span class="line">    dtype</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥ä¸‹æ¥ç”¨ä¼ªä»£ç å’Œæ³¨é‡Šæ¥è¯´æ˜Deep RNNå¦‚ä½•å®ç°</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªåŸºæœ¬çš„LSTMç»“æ„ä½œä¸ºå¾ªç¯ä½“çš„åŸºç¡€ç»“æ„ï¼Œå½“ç„¶ä¹Ÿæ”¯æŒä½¿ç”¨å…¶ä»–çš„å¾ªç¯ä½“ç»“æ„</span></span><br><span class="line">lstm_cell = tf.nn.rnn_cell.BasicLSTMCell</span><br><span class="line"><span class="comment"># é€šè¿‡MultiRNNCellsç±»æ¥å®ç°Deep RNNï¼Œå…¶ä¸­number_of_layersè¡¨ç¤ºæœ‰å¤šå°‘å±‚ï¼Œlstm_sizeè¡¨ç¤ºæ¯å±‚çš„å•å…ƒæ•°é‡</span></span><br><span class="line">stacked_lstm = tf.nn.rnn_cell.MultiRNNCell([lstm_cell(lstm_size) <span class="keyword">for</span> _ <span class="keyword">in</span> range(number_of_layers)])</span><br><span class="line"><span class="comment"># åˆå§‹åŒ–å¹¶è·å–åˆå§‹çŠ¶æ€</span></span><br><span class="line">state = stacked_lstm.zeros_state(batch_size, tf.float32)</span><br><span class="line"></span><br><span class="line">foor i <span class="keyword">in</span> range(len(num_steps)):</span><br><span class="line">    <span class="keyword">if</span> i &gt; <span class="number">0</span>:</span><br><span class="line">        tf.get_variable_scope().reuse_variables()</span><br><span class="line">    <span class="comment"># æ ¹æ®å½“å‰è¾“å…¥current_input(x_t) å’Œå‰ä¸€é˜¶æ®µçŠ¶æ€state(h_(t-1), s_(t-1)) æ¥å‰å‘è®¡ç®—å¾—åˆ°å½“å‰çŠ¶æ€state(h_t, s_t) å’Œè¾“å‡ºstacked_lstm_output (h_t)</span></span><br><span class="line">    stacked_lstm_output, state = stacked_lstm(current_input, state)</span><br><span class="line">    <span class="comment"># è¾“å‡ºå–‚ç»™å…¨è”æ¥å±‚</span></span><br><span class="line">    final_output = fully_connected(stacked_lstm_output)</span><br><span class="line">    <span class="comment"># è®¡ç®—æŸå¤±</span></span><br><span class="line">    loss += calc_loss(final_output, expected_output)</span><br><span class="line">    <span class="comment"># è¿›è¡Œä¼˜åŒ–</span></span><br><span class="line">    .......</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.ctolib.com/docs-Tensorflow-c-Tensorflow5.html" target="_blank" rel="external">æ·±å…¥æµ…å‡ºTensorflowï¼ˆäº”ï¼‰ï¼šå¾ªç¯ç¥ç»ç½‘ç»œç®€ä»‹</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/37070414" target="_blank" rel="external">Tensorflowå®æˆ˜(1): å®ç°æ·±å±‚å¾ªç¯ç¥ç»ç½‘ç»œ</a></li>
<li><a href="https://zh.gluon.ai/" target="_blank" rel="external">zh.gluon.ai åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ </a></li>
<li><a href="https://www.zhihu.com/question/272049149" target="_blank" rel="external">æ­£ç¡®ç†è§£ cell ä¸ hidden size çš„åŒºåˆ«</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TensorFlowï¼š ç¬¬8ç«  å¾ªç¯ç¥ç»ç½‘ç»œ 1]]></title>
      <url>http://shopee.ai/2018/11/08/tensorflow/tf-google-8-rnn-1/</url>
      <content type="html"><![CDATA[<p>å®æˆ˜Googleæ·±åº¦å­¦ä¹ æ¡†æ¶ ç¬”è®°-ç¬¬8ç«  å¾ªç¯ç¥ç»ç½‘ç»œ-1-å‰å‘ä¼ æ’­ã€‚ <a href="https://github.com/blair101/deep-learning-action/tree/master/tf.tutorials/Chapter8" target="_blank" rel="external">Github: RNN-1-Forward_Propagation.ipynb</a></p>
<a id="more"></a>
<p>è¿ç®—çš„æµç¨‹å›¾å¯å‚è€ƒä¸‹é¢è¿™å¼ å›¾</p>
<p><img src="/images/tensorflow/tf-google-8-1.jpg" width="800"></p>
<h2 id="RNN-Forward-Propagation"><a href="#RNN-Forward-Propagation" class="headerlink" title="RNN Forward Propagation"></a>RNN Forward Propagation</h2><p>RNN å‰å‘ä¼ æ’­çŸ¥è¯†å›é¡¾</p>
<p><img src="/images/deeplearning/C5W1-10_1.png" width="750"></p>
<blockquote>
<p>$a^{<0>}=\vec{0}$</0></p>
<p>$a^{<1>}=g_1(W_{aa}a^{<0>}+W_{ax}x^{<1>}+b_a)$</1></0></1></p>
<p>$y^{<1>}=g_2(W_{ya}a^{<1>}+b_y)$</1></1></p>
<p>$a^{&lt;{t}&gt;}=g_1(W_{aa}a^{&lt;{t-1}&gt;}+W_{ax}x^{&lt;{t}&gt;}+b_a)$</p>
<p>$y^{&lt;{t}&gt;}=g_2(W_{ya}a^{&lt;{t}&gt;}+b_y)$</p>
<p>æ¿€æ´»å‡½æ•°ï¼š<strong>$g_1$</strong> ä¸€èˆ¬ä¸º <strong><code>tanh</code>å‡½æ•°</strong> (æˆ–è€…æ˜¯ <strong><code>Relu</code>å‡½æ•°</strong>)ï¼Œ<strong>$g_2$</strong> ä¸€èˆ¬æ˜¯ <strong><code>Sigmod</code>å‡½æ•°</strong>.</p>
<p>æ³¨æ„: å‚æ•°çš„ä¸‹æ ‡æ˜¯æœ‰é¡ºåºå«ä¹‰çš„ï¼Œå¦‚ $W_{ax}$ ä¸‹æ ‡çš„ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè¦è®¡ç®—çš„é‡çš„ç±»å‹ï¼Œå³è¦è®¡ç®— $a$ çŸ¢é‡ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºè¦è¿›è¡Œä¹˜æ³•è¿ç®—çš„æ•°æ®ç±»å‹ï¼Œå³éœ€è¦ä¸ $x$ çŸ¢é‡åšè¿ç®—ã€‚å¦‚ $W_{ax} x^{t}\rightarrow{a}$</p>
</blockquote>
<h2 id="1-å®šä¹‰RNNçš„å‚æ•°"><a href="#1-å®šä¹‰RNNçš„å‚æ•°" class="headerlink" title="1. å®šä¹‰RNNçš„å‚æ•°"></a>1. å®šä¹‰RNNçš„å‚æ•°</h2><p>è¿™ä¸ªä¾‹å­æ˜¯ç”¨npå†™çš„ï¼Œæ²¡ç”¨åˆ°tensorflow</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–ï¼Œ state = a^&#123;&lt;0&gt;&#125; ä¸ å®šä¹‰ X æ—¶é—´åºåˆ—å‚æ•°</span></span><br><span class="line">X = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">state = [<span class="number">0.0</span>, <span class="number">0.0</span>] <span class="comment"># a^&#123;&lt;0&gt;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†å¼€å®šä¹‰ä¸åŒè¾“å…¥éƒ¨åˆ†çš„æƒé‡ä»¥æ–¹ä¾¿æ“ä½œ</span></span><br><span class="line">w_cell_state = np.asarray([[<span class="number">0.1</span>, <span class="number">0.2</span>], [<span class="number">0.3</span>, <span class="number">0.4</span>]]) <span class="comment"># W_&#123;aa&#125;</span></span><br><span class="line">w_cell_input = np.asarray([[<span class="number">0.5</span>, <span class="number">0.6</span>]]) <span class="comment"># W_&#123;ax&#125;</span></span><br><span class="line"></span><br><span class="line">b_cell = np.asarray([<span class="number">0.1</span>, <span class="number">-0.1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ç”¨äºè¾“å‡ºçš„å…¨è¿æ¥å±‚å‚æ•°ï¼Œ ä¸ state = a^&#123;&lt;i&gt;&#125; çš„ shape ç›¸åç½®</span></span><br><span class="line">w_output = np.asarray([[<span class="number">0.1</span>], [<span class="number">2.0</span>]])</span><br><span class="line">b_output = <span class="number">0.1</span></span><br></pre></td></tr></table></figure>
<h2 id="2-æ‰§è¡Œå‰å‘ä¼ æ’­çš„è¿‡ç¨‹"><a href="#2-æ‰§è¡Œå‰å‘ä¼ æ’­çš„è¿‡ç¨‹" class="headerlink" title="2. æ‰§è¡Œå‰å‘ä¼ æ’­çš„è¿‡ç¨‹"></a>2. æ‰§è¡Œå‰å‘ä¼ æ’­çš„è¿‡ç¨‹</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŒ‰ç…§æ—¶é—´é¡ºåºæ‰§è¡Œå¾ªç¯å®¡è®¡ç½‘ç»œçš„å‰å‘ä¼ æ’­è¿‡ç¨‹</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(X)):</span><br><span class="line">    <span class="comment"># è®¡ç®—å¾ªç¯ä½“ä¸­çš„å…¨è¿æ¥å±‚ç¥ç»ç½‘ç»œ</span></span><br><span class="line">    before_activation = np.dot(state, w_cell_state) + X[i] * w_cell_input + b_cell</span><br><span class="line">    </span><br><span class="line">    state = np.tanh(before_activation)</span><br><span class="line">    final_output = np.dot(state, w_output) + b_output</span><br><span class="line">    </span><br><span class="line">    print(<span class="string">"iteration round:"</span>, i+<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">"before activation: "</span>, before_activation)</span><br><span class="line">    </span><br><span class="line">    print(<span class="string">"state: "</span>, state)</span><br><span class="line">    print(<span class="string">"output: "</span>, final_output)</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">iteration round: 1</span><br><span class="line">before activation:  [[0.95107374 1.0254142 ]]</span><br><span class="line">state:  [[0.74026877 0.7720626 ]]</span><br><span class="line">output:  [[1.71815207]]</span><br><span class="line">iteration round: 2</span><br><span class="line">before activation:  [[1.40564566 1.55687879]]</span><br><span class="line">state:  [[0.88656589 0.91491336]]</span><br><span class="line">output:  [[2.0184833]]</span><br></pre></td></tr></table></figure>
<p>å’Œå…¶ä»–ç¥ç»ç½‘ç»œç±»ä¼¼ï¼Œåœ¨å®šä¹‰å®ŒæŸå¤±å‡½æ•°ä¹‹åï¼Œå¥—ç”¨ç¬¬4ç« ä¸­ä»‹ç»çš„ä¼˜åŒ–æ¡†æ¶TensorFlowå°±å¯ä»¥<strong>è‡ªåŠ¨å®Œæˆæ¨¡å‹è®­ç»ƒ</strong>çš„è¿‡ç¨‹ã€‚è¿™é‡Œå”¯ä¸€éœ€è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯ï¼Œç†è®ºä¸Šå¾ªç¯ç¥ç»ç½‘ç»œå¯ä»¥æ”¯æŒä»»æ„é•¿åº¦çš„åºåˆ—ï¼Œç„¶è€Œåœ¨å®é™…ä¸­ï¼Œå¦‚æœåºåˆ—è¿‡é•¿ä¼šå¯¼è‡´ä¼˜åŒ–æ—¶å‡ºç°æ¢¯åº¦æ¶ˆæ•£çš„é—®é¢˜ï¼ˆ<strong>the vanishing gradient problem</strong>ï¼‰ (8) ï¼Œæ‰€ä»¥å®é™…ä¸­ä¸€èˆ¬ä¼š<strong>è§„å®šä¸€ä¸ªæœ€å¤§é•¿åº¦</strong>ï¼Œå½“åºåˆ—é•¿åº¦è¶…è¿‡è§„å®šé•¿åº¦ä¹‹åä¼šå¯¹åºåˆ—è¿›è¡Œæˆªæ–­ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/31539492" target="_blank" rel="external">çŸ¥ä¹ï¼šã€ŠTensorFlowï¼šå®æˆ˜Googleæ·±åº¦å­¦ä¹ æ¡†æ¶ã€‹ç¬”è®°ã€ä»£ç åŠå‹˜è¯¯-ç¬¬8ç«  å¾ªç¯ç¥ç»ç½‘ç»œ-1-å‰å‘ä¼ æ’­</a></li>
<li><a href="http://b.7dtime.com/B076DGNXP1/13/0.html" target="_blank" rel="external">7å¤©æ—¶é—´ï¼š å¾ªç¯ç¥ç»ç½‘ç»œç®€ä»‹ (1)</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TensorFlow - tf.contrib.learn åˆ›å»º Estimator]]></title>
      <url>http://shopee.ai/2018/11/04/tensorflow/tf-5.4-contrib-learn-Estimator/</url>
      <content type="html"><![CDATA[<p>tf.contrib.learn æ¡†æ¶å¯ä»¥é€šè¿‡å…¶é«˜çº§åˆ«çš„ Estimator API è½»æ¾æ„å»ºå’Œè®­ç»ƒæœºå™¨å­¦ä¹ æ¨¡å‹.</p>
<p>Estimator æä¾›æ‚¨å¯ä»¥å®ä¾‹åŒ–çš„ç±»ä»¥å¿«é€Ÿé…ç½®å¸¸è§çš„æ¨¡å‹ç±»å‹ï¼Œå¦‚ regressors å’Œ classifiersï¼š</p>
<a id="more"></a> 
<ul>
<li><a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn/LinearClassifier" target="_blank" rel="external">tf.contrib.learn.LinearClassifier</a></li>
<li><a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn/LinearRegressor" target="_blank" rel="external">tf.contrib.learn.LinearRegressor</a></li>
<li><a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn/DNNClassifier" target="_blank" rel="external">tf.contrib.learn.DNNClassifier</a></li>
<li><a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn/DNNRegressor" target="_blank" rel="external">tf.contrib.learn.DNNRegressor</a></li>
<li><a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn" target="_blank" rel="external">tf.contrib.learnâ€¦â€¦</a></li>
</ul>
<p><strong>å®Œæ•´ä»£ç </strong>ï¼š</p>
<ul>
<li><a href="https://github.com/blair101/deep-learning-action/tree/master/tf.contrib.learn/tf-5.4-Estimator" target="_blank" rel="external">Github é²é±¼å¹´é¾„é¢„æµ‹å™¨ r1.11 Abalone Age Predictor</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://cwiki.apachecn.org/pages/viewpage.action?pageId=10029584" target="_blank" rel="external">åœ¨tf.contrib.learnä¸­åˆ›å»ºä¼°ç®—å™¨</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TensorFlow - tf.contrib.learn åŸºç¡€çš„è®°å½•å’Œç›‘æ§æ•™ç¨‹]]></title>
      <url>http://shopee.ai/2018/11/04/tensorflow/tf-5.3-contrib-learn-MonitorAPI/</url>
      <content type="html"><![CDATA[<p>è®­ç»ƒæ¨¡å‹æ—¶ï¼Œå®æ—¶è·Ÿè¸ªå’Œè¯„ä¼°è¿›åº¦é€šå¸¸å¾ˆæœ‰ä»·å€¼ã€‚</p>
<p>å­¦ä¹ ä½¿ç”¨TensorFlowçš„æ—¥å¿—è®°å½•åŠŸèƒ½å’ŒMonitorAPIæ¥ç›‘ç£æ­£åœ¨ç”¨ç¥ç»ç½‘ç»œåˆ†ç±»å™¨åˆ†ç±»irisesçš„è®­ç»ƒæƒ…å†µã€‚</p>
<a id="more"></a> 
<p><strong>å®Œæ•´ä»£ç ï¼š</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="comment"># Data sets</span></span><br><span class="line">IRIS_TRAINING = <span class="string">"iris_training.csv"</span></span><br><span class="line">IRIS_TEST = <span class="string">"iris_test.csv"</span></span><br><span class="line"></span><br><span class="line">tf.logging.set_verbosity(tf.logging.INFO)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># First download iris_training.csv and iris_test.csv</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Load datasets.</span></span><br><span class="line">    training_set = tf.contrib.learn.datasets.base.load_csv_with_header(</span><br><span class="line">        filename=IRIS_TRAINING,</span><br><span class="line">        target_dtype=np.int,</span><br><span class="line">        features_dtype=np.float32)</span><br><span class="line"></span><br><span class="line">    test_set = tf.contrib.learn.datasets.base.load_csv_with_header(</span><br><span class="line">        filename=IRIS_TEST,</span><br><span class="line">        target_dtype=np.int,</span><br><span class="line">        features_dtype=np.float32)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Specify that all features have real-value data</span></span><br><span class="line">    feature_columns = [tf.contrib.layers.real_valued_column(<span class="string">""</span>, dimension=<span class="number">4</span>)]</span><br><span class="line">    <span class="comment"># [_RealValuedColumn(column_name='', dimension=4, default_value=None, dtype=tf.float32, normalizer=None)]</span></span><br><span class="line"></span><br><span class="line">    validation_monitor = tf.contrib.learn.monitors.ValidationMonitor(</span><br><span class="line">        test_set.data,</span><br><span class="line">        test_set.target,</span><br><span class="line">        every_n_steps=<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Build 3 layer DNN with 10, 20, 10 units respectively.</span></span><br><span class="line">    classifier = tf.contrib.learn.DNNClassifier(</span><br><span class="line">        feature_columns=feature_columns,</span><br><span class="line">        hidden_units=[<span class="number">10</span>, <span class="number">20</span>, <span class="number">10</span>],</span><br><span class="line">        n_classes=<span class="number">3</span>,</span><br><span class="line">        model_dir=<span class="string">"/tmp/iris_model"</span>,</span><br><span class="line">        config=tf.contrib.learn.RunConfig(save_checkpoints_secs=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Fit model.</span></span><br><span class="line">    classifier.fit(x=training_set.data,</span><br><span class="line">                   y=training_set.target,</span><br><span class="line">                   steps=<span class="number">2000</span>,</span><br><span class="line">                   monitors=[validation_monitor])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><a href="https://github.com/blair101/TensorFlowExamples/tree/master/tf.contrib.learn/tf-5.3-validationMonitor-Iris" target="_blank" rel="external">ä»£ç å‚è§ Blairâ€˜s Github - tf.contrib.learn åŸºç¡€çš„è®°å½•å’Œç›‘æ§æ•™ç¨‹</a></li>
<li><a href="http://cwiki.apachecn.org/pages/viewpage.action?pageId=10029489" target="_blank" rel="external">æ•™ç¨‹å‚è§ cwiki.apachecn.org tf.contrib.learn åŸºç¡€çš„è®°å½•å’Œç›‘æ§æ•™ç¨‹</a></li>
</ul>
</blockquote>
<h2 id="1-ä½¿ç”¨TensorFlowå¯ç”¨æ—¥å¿—è®°å½•"><a href="#1-ä½¿ç”¨TensorFlowå¯ç”¨æ—¥å¿—è®°å½•" class="headerlink" title="1. ä½¿ç”¨TensorFlowå¯ç”¨æ—¥å¿—è®°å½•"></a>1. ä½¿ç”¨TensorFlowå¯ç”¨æ—¥å¿—è®°å½•</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒTensorFlowè¢«é…ç½®åœ¨WARNæ—¥å¿—çº§åˆ«ï¼Œä½†æ˜¯å½“è·Ÿè¸ªæ¨¡å‹è®­ç»ƒæ—¶ï¼Œæ‚¨éœ€è¦å°†çº§åˆ«è°ƒæ•´ä¸ºINFOã€‚</p>
<p>ä»£ç çš„å¼€å¤´ï¼ˆåœ¨importå¯¼å…¥ä¹‹åï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tf.logging.set_verbosity(tf.logging.INFO)</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä»£ç æ—¶ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å…¶ä»–æ—¥å¿—è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">INFO:tensorflow:loss = 1.18812, step = 1</span><br><span class="line">INFO:tensorflow:loss = 0.210323, step = 101</span><br><span class="line">INFO:tensorflow:loss = 0.109025, step = 201</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨INFOçº§åˆ«æ—¥å¿—è®°å½•ï¼Œtf.contrib.learnä¼šåœ¨æ¯100æ­¥ä¹‹åè‡ªåŠ¨å°†training-loss metricsè¾“å‡ºåˆ°stderrã€‚</p>
<h2 id="2-é…ç½®éªŒè¯ç›‘è§†å™¨è¿›è¡Œæµè¯„ä¼°"><a href="#2-é…ç½®éªŒè¯ç›‘è§†å™¨è¿›è¡Œæµè¯„ä¼°" class="headerlink" title="2. é…ç½®éªŒè¯ç›‘è§†å™¨è¿›è¡Œæµè¯„ä¼°"></a>2. é…ç½®éªŒè¯ç›‘è§†å™¨è¿›è¡Œæµè¯„ä¼°</h2><p>è®°å½•è®­ç»ƒæŸå¤±æœ‰åŠ©äºäº†è§£æ‚¨çš„æ¨¡å‹æ˜¯å¦æ”¶æ•›ï¼Œä½†å¦‚æœæ‚¨æƒ³è¿›ä¸€æ­¥äº†è§£è®­ç»ƒä¸­å‘ç”Ÿçš„æƒ…å†µæ€ä¹ˆåŠï¼Ÿtf.contrib.learnæä¾›äº†å‡ ä¸ªé«˜çº§åˆ«Monitorï¼Œæ‚¨å¯ä»¥é™„åŠ åˆ°æ‚¨çš„fitæ“ä½œï¼Œä»¥è¿›ä¸€æ­¥è·Ÿè¸ªmetrics/è°ƒè¯•æ¨¡å‹è®­ç»ƒæœŸé—´çš„æ›´ä½çº§åˆ«TensorFlowæ“ä½œ</p>
<h3 id="2-1-æ¯éš”Næ­¥è¯„ä¼°"><a href="#2-1-æ¯éš”Næ­¥è¯„ä¼°" class="headerlink" title="2.1 æ¯éš”Næ­¥è¯„ä¼°"></a>2.1 æ¯éš”Næ­¥è¯„ä¼°</h3><p>å¯¹äºirisç¥ç»ç½‘ç»œåˆ†ç±»å™¨ï¼Œåœ¨è®°å½•è®­ç»ƒæŸå¤±æ—¶ï¼Œæ‚¨å¯èƒ½è¿˜éœ€è¦åŒæ—¶å¯¹æµ‹è¯•æ•°æ®è¿›è¡Œè¯„ä¼°ï¼Œä»¥äº†è§£è¯¥æ¨¡å‹çš„æ³›åŒ–ç¨‹åº¦ã€‚</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">validation_monitor = tf.contrib.learn.monitors.ValidationMonitor(</span><br><span class="line">    test_set.data,</span><br><span class="line">    test_set.target,</span><br><span class="line">    every_n_steps=<span class="number">50</span>)</span><br></pre></td></tr></table></figure>
<p>å°†æ­¤ä»£ç æ”¾åœ¨å®ä¾‹åŒ–classifieré‚£è¡Œä¹‹å‰ã€‚</p>
<p>ValidationMonitorä¾é ä¿å­˜çš„checkpointsæ‰§è¡Œè¯„ä¼°æ“ä½œï¼Œå› æ­¤æ‚¨éœ€è¦æ·»åŠ åŒ…å«save_checkpoints_secsçš„<a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn/RunConfig" target="_blank" rel="external">tf.contrib.learn.RunConfig</a>å»ä¿®æ”¹classifierçš„å®ä¾‹åŒ–ï¼Œè¯¥å‚æ•°æŒ‡å®šåœ¨è®­ç»ƒæœŸé—´ç»è¿‡å¤šå°‘ç§’ä¿å­˜checkpointã€‚</p>
<p>ç”±äºirisæ•°æ®é›†ç›¸å½“å°ï¼Œå› æ­¤è®­ç»ƒé€Ÿåº¦å¾ˆå¿«ï¼Œè®¾ç½®save_checkpoints_secsä¸º1ï¼ˆæ¯1ç§’ä¿å­˜checkpointï¼‰ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">classifier = tf.contrib.learn.DNNClassifier(</span><br><span class="line">    feature_columns=feature_columns,</span><br><span class="line">    hidden_units=[<span class="number">10</span>, <span class="number">20</span>, <span class="number">10</span>],</span><br><span class="line">    n_classes=<span class="number">3</span>,</span><br><span class="line">    model_dir=<span class="string">"/tmp/iris_model"</span>,</span><br><span class="line">    config=tf.contrib.learn.RunConfig(save_checkpoints_secs=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<p>validation_monitorï¼Œæ›´æ–°åŒ…å¿«è°ƒç”¨monitorså‚æ•°çš„fitï¼Œè¯¥å‚æ•°åœ¨æ¨¡å‹è®­ç»ƒæœŸé—´ç”ŸæˆåŒ…å«æ‰€æœ‰monitorsçš„listï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">classifier.fit(x=training_set.data,</span><br><span class="line">               y=training_set.target,</span><br><span class="line">               steps=<span class="number">2000</span>,</span><br><span class="line">               monitors=[validation_monitor])</span><br></pre></td></tr></table></figure>
<p>é‡æ–°è¿è¡Œä»£ç æ—¶ï¼Œæ‚¨åº”è¯¥åœ¨æ—¥å¿—è¾“å‡ºä¸­çœ‹åˆ°éªŒè¯metricsï¼Œä¾‹å¦‚ï¼š (ä½†æ˜¯æˆ‘è¿™é‡Œè¯•éªŒçš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰å‡ºç°)</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">INFO:tensorflow:Validation (step <span class="number">50</span>): loss = <span class="number">1.71139</span>, global_step = <span class="number">0</span>, accuracy = <span class="number">0.266667</span></span><br><span class="line">...</span><br><span class="line">INFO:tensorflow:Validation (step <span class="number">300</span>): loss = <span class="number">0.0714158</span>, global_step = <span class="number">268</span>, accuracy = <span class="number">0.966667</span></span><br><span class="line">...</span><br><span class="line">INFO:tensorflow:Validation (step <span class="number">1750</span>): loss = <span class="number">0.0574449</span>, global_step = <span class="number">1729</span>, accuracy = <span class="number">0.966667</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-ä½¿ç”¨MetricSpecå®šä¹‰Evaluation-Metrics"><a href="#2-2-ä½¿ç”¨MetricSpecå®šä¹‰Evaluation-Metrics" class="headerlink" title="2.2 ä½¿ç”¨MetricSpecå®šä¹‰Evaluation Metrics"></a>2.2 ä½¿ç”¨MetricSpecå®šä¹‰Evaluation Metrics</h3><ul>
<li><a href="http://cwiki.apachecn.org/pages/viewpage.action?pageId=10029489" target="_blank" rel="external">è¯¦æƒ…å‚è§ cwiki.apachecn.org tf.contrib.learn åŸºç¡€çš„è®°å½•å’Œç›‘æ§æ•™ç¨‹</a></li>
</ul>
<h3 id="2-3-é€šè¿‡ValidationMonitoræå‰åœæ­¢è®­ç»ƒ"><a href="#2-3-é€šè¿‡ValidationMonitoræå‰åœæ­¢è®­ç»ƒ" class="headerlink" title="2.3 é€šè¿‡ValidationMonitoræå‰åœæ­¢è®­ç»ƒ"></a>2.3 é€šè¿‡ValidationMonitoræå‰åœæ­¢è®­ç»ƒ</h3><ul>
<li><a href="http://cwiki.apachecn.org/pages/viewpage.action?pageId=10029489" target="_blank" rel="external">è¯¦æƒ…å‚è§ cwiki.apachecn.org tf.contrib.learn åŸºç¡€çš„è®°å½•å’Œç›‘æ§æ•™ç¨‹</a></li>
</ul>
<h2 id="3-ç”¨TensorBoardå¯è§†åŒ–æ—¥å¿—æ•°æ®"><a href="#3-ç”¨TensorBoardå¯è§†åŒ–æ—¥å¿—æ•°æ®" class="headerlink" title="3. ç”¨TensorBoardå¯è§†åŒ–æ—¥å¿—æ•°æ®"></a>3. ç”¨TensorBoardå¯è§†åŒ–æ—¥å¿—æ•°æ®</h2><p>è¯»å–é€šè¿‡ValidationMonitoråœ¨è®­ç»ƒæœŸé—´äº§ç”Ÿå¤§é‡å…³äºæ¨¡å‹æ€§èƒ½çš„åŸå§‹æ•°æ®çš„æ—¥å¿—ï¼Œæ­¤æ•°æ®çš„å¯è§†åŒ–ï¼Œå¯¹è¿›ä¸€æ­¥äº†è§£è¶‹åŠ¿å¯èƒ½ä¼šæœ‰å¸®åŠ©ï¼Œä¾‹å¦‚å‡†ç¡®æ€§å¦‚ä½•éšç€æ­¥æ•°è€Œå˜åŒ–ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ tensorboard --logdir=/tmp/iris_model/</span><br><span class="line">Starting TensorBoard 39 on port 6006</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://cwiki.apachecn.org/pages/viewpage.action?pageId=10029489" target="_blank" rel="external">tf.contrib.learnåŸºç¡€çš„è®°å½•å’Œç›‘æ§æ•™ç¨‹</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å¤§æ•°æ®å¹³å°CDH6.0é›†ç¾¤åœ¨çº¿å®‰è£…]]></title>
      <url>http://shopee.ai/2018/11/02/hadoop/ops-install-CDH6.0.1/</url>
      <content type="html"><![CDATA[<p>ä»‹ç»äº† CDH é›†ç¾¤çš„æ­å»ºä¸å®‰è£…</p>
<p>æ ‡ç­¾ï¼š Cloudera-Manager CDH Hadoop éƒ¨ç½² é›†ç¾¤</p>
<a id="more"></a>
<blockquote>
<p>ç›®å‰Hadoopæ¯”è¾ƒæµè¡Œçš„ä¸»è¦æœ‰2ä¸ªç‰ˆæœ¬ï¼ŒApacheå’ŒClouderaç‰ˆæœ¬ã€‚</p>
<ul>
<li>Apache Hadoopï¼šç»´æŠ¤äººå‘˜æ¯”è¾ƒå¤šï¼Œæ›´æ–°é¢‘ç‡æ¯”è¾ƒå¿«ï¼Œä½†æ˜¯ç¨³å®šæ€§æ¯”è¾ƒå·®ã€‚</li>
<li>Cloudera Hadoopï¼ˆCDHï¼‰ï¼šCDHï¼šClouderaå…¬å¸çš„å‘è¡Œç‰ˆæœ¬ï¼ŒåŸºäºApache Hadoopçš„äºŒæ¬¡å¼€å‘ï¼Œä¼˜åŒ–äº†ç»„ä»¶å…¼å®¹å’Œäº¤äº’æ¥å£ã€ç®€åŒ–å®‰è£…é…ç½®ã€å¢åŠ Clouderaå…¼å®¹ç‰¹æ€§ã€‚</li>
</ul>
</blockquote>
<h2 id="1-æ“ä½œç¯å¢ƒ"><a href="#1-æ“ä½œç¯å¢ƒ" class="headerlink" title="1. æ“ä½œç¯å¢ƒ"></a>1. æ“ä½œç¯å¢ƒ</h2><ul>
<li>CentOS 7.3 x64 ï¼ˆ4C/10G/50Gï¼‰ </li>
<li>Cloudera Managerï¼š6.0.1  </li>
<li>CDH: 6.0.1</li>
</ul>
<p>ç›¸å…³åŒ…åœ°å€</p>
<p>Cloudera Managerä¸‹è½½åœ°å€ï¼š<a href="https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/RPMS/x86_64/" target="_blank" rel="external">https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/RPMS/x86_64/</a></p>
<blockquote>
<ul>
<li>cloudera-manager-agent-6.0.0-530873.el7.x86_64.rpm</li>
<li>cloudera-manager-daemons-6.0.0-530873.el7.x86_64.rpm</li>
<li>cloudera-manager-server-6.0.0-530873.el7.x86_64.rpm</li>
<li>cloudera-manager-server-db-2-6.0.0-530873.el7.x86_64.rpm</li>
<li>oracle-j2sdk1.8-1.8.0+update141-1.x86_64.rpm</li>
</ul>
</blockquote>
<p>CDHå®‰è£…åŒ…åœ°å€ï¼š<a href="https://archive.cloudera.com/cdh6/6.0.0/parcels/" target="_blank" rel="external">https://archive.cloudera.com/cdh6/6.0.0/parcels/</a></p>
<blockquote>
<ul>
<li>CDH-6.0.0-1.cdh6.0.0.p0.537114-el7.parcel</li>
<li>CDH-6.0.0-1.cdh6.0.0.p0.537114-el7.parcel.sha256</li>
<li>manifest.json</li>
</ul>
</blockquote>
<p>æ³¨æ„ï¼šä»¥ä¸‹æ“ä½œå‡ç”¨rootç”¨æˆ·æ“ä½œã€‚</p>
<h2 id="2-ç½‘ç»œé…ç½®-æ‰€æœ‰èŠ‚ç‚¹"><a href="#2-ç½‘ç»œé…ç½®-æ‰€æœ‰èŠ‚ç‚¹" class="headerlink" title="2. ç½‘ç»œé…ç½®(æ‰€æœ‰èŠ‚ç‚¹)"></a>2. ç½‘ç»œé…ç½®(æ‰€æœ‰èŠ‚ç‚¹)</h2><p><strong>åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸ŠæŠŠIPå’Œä¸»æœºåçš„å¯¹åº”å…³ç³»å†™å…¥</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/hosts</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨é‡Šæ‰åŸæœ‰çš„è¯­å¥, å¢åŠ ï¼š</span></span><br><span class="line">192.192.0.25 server</span><br><span class="line">192.192.0.26 chdagent1</span><br><span class="line">192.192.0.27 chdagent2</span><br></pre></td></tr></table></figure>
<p><strong>åœ¨ç›¸åº”çš„èŠ‚ç‚¹ä¸»æœºä¸Šä¿®æ”¹ä¸»æœºå</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network</span><br><span class="line"></span><br><span class="line">NETWORKING=yes</span><br><span class="line">HOSTNAME=cdhserver</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹æˆ–è€…æ·»åŠ  HOSTNAME=cdhserver</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>cdhserver æ˜¯ä½ èµ·çš„çš„ä¸»æœºåå­—</p>
</blockquote>
<p><strong>æ‰§è¡Œå‘½ä»¤</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># hostname cdhserver</span><br></pre></td></tr></table></figure>
<p>CentOS7è¦å¤šæ‰§è¡Œä»¥ä¸‹è¿™æ­¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hostnamectl set-hostname cdhserver</span><br></pre></td></tr></table></figure>
<h2 id="3-æ‰“é€šSSH"><a href="#3-æ‰“é€šSSH" class="headerlink" title="3. æ‰“é€šSSH"></a>3. æ‰“é€šSSH</h2><p>è®¾ç½®sshæ— å¯†ç ç™»é™†ï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼‰</p>
<h2 id="4-å…³é—­é˜²ç«å¢™å’ŒSELinux"><a href="#4-å…³é—­é˜²ç«å¢™å’ŒSELinux" class="headerlink" title="4. å…³é—­é˜²ç«å¢™å’ŒSELinux"></a>4. å…³é—­é˜²ç«å¢™å’ŒSELinux</h2><p>æ³¨æ„ï¼š éœ€è¦åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼Œå› ä¸ºæ¶‰åŠåˆ°çš„ç«¯å£å¤ªå¤šäº†ï¼Œä¸´æ—¶å…³é—­é˜²ç«å¢™æ˜¯ä¸ºäº†å®‰è£…èµ·æ¥æ›´æ–¹ä¾¿ï¼Œå®‰è£…å®Œæ¯•åå¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®é˜²ç«å¢™ç­–ç•¥ï¼Œä¿è¯é›†ç¾¤å®‰å…¨ã€‚</p>
<p>å…³é—­é˜²ç«å¢™å¹¶å…³é—­è‡ªå¯åŠ¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure>
<h2 id="5-æ‰€æœ‰èŠ‚ç‚¹é…ç½®NTPæœåŠ¡"><a href="#5-æ‰€æœ‰èŠ‚ç‚¹é…ç½®NTPæœåŠ¡" class="headerlink" title="5. æ‰€æœ‰èŠ‚ç‚¹é…ç½®NTPæœåŠ¡"></a>5. æ‰€æœ‰èŠ‚ç‚¹é…ç½®NTPæœåŠ¡</h2><p>é›†ç¾¤ä¸­æ‰€æœ‰ä¸»æœºå¿…é¡»ä¿æŒæ—¶é—´åŒæ­¥ï¼Œå¦‚æœæ—¶é—´ç›¸å·®è¾ƒå¤§ä¼šå¼•èµ·å„ç§é—®é¢˜ã€‚ å…·ä½“æ€è·¯å¦‚ä¸‹ï¼š</p>
<p>masterèŠ‚ç‚¹ä½œä¸ºntpæœåŠ¡å™¨ä¸å¤–ç•Œå¯¹æ—¶ä¸­å¿ƒåŒæ­¥æ—¶é—´ï¼Œéšåå¯¹æ‰€æœ‰datanodeèŠ‚ç‚¹æä¾›æ—¶é—´åŒæ­¥æœåŠ¡ã€‚</p>
<p>æ‰€æœ‰datanodeèŠ‚ç‚¹ä»¥masterèŠ‚ç‚¹ä¸ºåŸºç¡€åŒæ­¥æ—¶é—´ã€‚</p>
<p>æ‰€æœ‰èŠ‚ç‚¹å®‰è£…ç›¸å…³ç»„ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install ntp</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨æœåŠ¡ï¼š </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start ntpd</span><br></pre></td></tr></table></figure>
<p>é…ç½®å¼€æœºå¯åŠ¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> ntpd</span><br></pre></td></tr></table></figure>
<h2 id="6-å®‰è£…-python-2-7"><a href="#6-å®‰è£…-python-2-7" class="headerlink" title="6. å®‰è£… python 2.7"></a>6. å®‰è£… python 2.7</h2><p>å¿…é¡»æ˜¯python2.7ç‰ˆæœ¬ï¼ŒCentOS 7 ç³»ç»Ÿå¯ä»¥ä¸ç”¨è£…ï¼Œç³»ç»Ÿè‡ªå¸¦çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#ä¸‹è½½å¹¶å®‰è£…EPELï¼Œå®‰è£…python-pipï¼Œpsycopg2æœ‰ä¾èµ–</span><br><span class="line">[root@localhost ~]# wget http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span><br><span class="line">[root@localhost ~]# rpm -ivh epel-release-latest-7.noarch.rpm</span><br><span class="line">[root@localhost ~]# yum repolist  #æ£€æŸ¥æ˜¯å¦å·²æ·»åŠ è‡³æºåˆ—è¡¨</span><br></pre></td></tr></table></figure>
<p>å‡çº§è½¯ä»¶ä¾èµ–ç‰ˆæœ¬</p>
<p>Starting with CDH 6, PostgreSQL-backed Hue requires the Psycopg2 version to be at least 2.5.4</p>
<p>é¦–å…ˆå®‰è£…epelæ‰©å±•æºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install epel-release</span><br><span class="line">yum -y install python-pip</span><br><span class="line">pip install --upgrade psycopg2</span><br></pre></td></tr></table></figure>
<h2 id="7-å‡†å¤‡Parcelsï¼Œç”¨ä»¥å®‰è£…CDH6"><a href="#7-å‡†å¤‡Parcelsï¼Œç”¨ä»¥å®‰è£…CDH6" class="headerlink" title="7. å‡†å¤‡Parcelsï¼Œç”¨ä»¥å®‰è£…CDH6"></a>7. å‡†å¤‡Parcelsï¼Œç”¨ä»¥å®‰è£…CDH6</h2><p>å°†CHD6ç›¸å…³çš„ParcelåŒ…æ”¾åˆ°ä¸»èŠ‚ç‚¹çš„/opt/cloudera/parcel-repo/ç›®å½•ä¸­ï¼Œå¦‚æœæ²¡æœ‰æ­¤ç›®å½•ï¼Œå¯ä»¥è‡ªå·±åˆ›å»ºã€‚</p>
<blockquote>
<ul>
<li>CDH-6.0.0-1.cdh6.0.0.p0.537114-el7.parcel</li>
<li>CDH-6.0.0-1.cdh6.0.0.p0.537114-el7.parcel.sha256</li>
<li>manifest.json</li>
</ul>
</blockquote>
<p>æ³¨æ„ï¼šæœ€åå°†CDH-6.0.0-1.cdh6.0.0.p0.537114-el7.parcel.sha256ï¼Œé‡å‘½åä¸ºCDH-6.0.0-1.cdh6.0.0.p0.537114-el7.parcel.sha</p>
<p><strong>å®‰è£…repo</strong>: </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/cloudera-manager.repo -P /etc/yum.repos.d/</span><br></pre></td></tr></table></figure>
<p><strong>å¯¼å…¥GPG key</strong>: </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rpm --import https://archive.cloudera.com/cm6/6.0.0/redhat7/yum/RPM-GPG-KEY-cloudera</span><br></pre></td></tr></table></figure>
<p><strong>JDK install</strong>: </p>
<blockquote>
<p>yum install oracle-j2sdk1.8</p>
<p>æ³¨æ„ ï¼š </p>
<ul>
<li>ä½¿ç”¨ yum ä¸‹è½½ï¼Œéœ€è¦ç¡®å®šç‰ˆæœ¬ä¸å®‰è£…CDH6å®˜æ–¹è¦æ±‚çš„éœ€è¦çš„ç‰ˆæœ¬ä¸€è‡´</li>
<li>ä¹Ÿå¯ä¸ä½¿ç”¨ yum å®‰è£…ï¼Œä½¿ç”¨è‡ªå·±ä¸‹è½½ JDKï¼Œç„¶åæ‰‹åŠ¨ç»¿è‰²å®‰è£…é…ç½®</li>
<li>ä¹Ÿå¯åœ¨å®‰è£… CM çš„æ—¶å€™ï¼Œå†æ ¹æ®æç¤ºæ¥å®‰è£…éœ€è¦çš„ JDK</li>
</ul>
<p>ä¸‰ç§æ–¹å¼ä»»é€‰å…¶ä¸€ä¾¿å¯</p>
</blockquote>
<p><strong>yumå®‰è£…CM</strong>: </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install cloudera-manager-server</span><br></pre></td></tr></table></figure>
<h2 id="8-å®‰è£…MySql"><a href="#8-å®‰è£…MySql" class="headerlink" title="8. å®‰è£…MySql"></a>8. å®‰è£…MySql</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm</span><br><span class="line">rpm -ivh mysql-community-release-el7-5.noarch.rpm</span><br><span class="line">yum update</span><br><span class="line">yum install mysql-server</span><br><span class="line">systemctl start mysqld</span><br><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–Mysql</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/bin/mysql_secure_installation</span><br></pre></td></tr></table></figure>
<p>é…ç½®JDBC</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.46.tar.gz</span><br><span class="line">tar zxvf mysql-connector-java-5.1.46.tar.gz</span><br><span class="line">mkdir -p /usr/share/java/</span><br><span class="line"><span class="built_in">cd</span> mysql-connector-java-5.1.46</span><br><span class="line">cp mysql-connector-java-5.1.46-bin.jar /usr/share/java/mysql-connector-java.jar</span><br></pre></td></tr></table></figure>
<p>å»ºåº“ï¼šæ ¹æ®å®˜æ–¹æ–‡æ¡£æä¾›çš„å‘½åå»ºåº“ï¼Œæ–¹ä¾¿è®°å¿†ã€‚(åœ¨CMé…ç½®CDHçš„æ—¶å€™ä¼šç”¨åˆ°è¿™äº›åº“å)</p>
<blockquote>
<p>Set up the Cloudera Manager Databaseï¼š/opt/cloudera/cm/schema/scm_prepare_database.sh mysql scm scm</p>
</blockquote>
<p>å‡ºç°å¦‚ä¸‹æ—¥å¿—ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">JAVA_HOME=/usr/java/jdk1.8.0_141-cloudera</span><br><span class="line">Verifying that we can write to /etc/cloudera-scm-server</span><br><span class="line">Creating SCM configuration file <span class="keyword">in</span> /etc/cloudera-scm-server</span><br><span class="line">Executing:  /usr/java/jdk1.8.0_141-cloudera/bin/java -cp /usr/share/java/mysql-connector-java.jar:/usr/share/java/oracle-connector-java.jar:/usr/share/java/postgresql-connector-java.jar:/opt/cloudera/cm/schema/../lib/* com.cloudera.enterprise.dbutil.DbCommandExecutor /etc/cloudera-scm-server/db.properties com.cloudera.cmf.db.</span><br><span class="line">[main] DbCommandExecutor INFO  Successfully connected to database.</span><br><span class="line">All <span class="keyword">done</span>, your SCM database is configured correctly!</span><br></pre></td></tr></table></figure>
<h2 id="9-å¯åŠ¨CMæœåŠ¡"><a href="#9-å¯åŠ¨CMæœåŠ¡" class="headerlink" title="9. å¯åŠ¨CMæœåŠ¡"></a>9. å¯åŠ¨CMæœåŠ¡</h2><p>å¯åŠ¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start cloudera-scm-server</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ—¥å¿—ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tail <span class="_">-f</span> /var/<span class="built_in">log</span>/cloudera-scm-server/cloudera-scm-server.log</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‡ºç°ï¼šINFO WebServerImpl:com.cloudera.server.cmf.WebServerImpl: Started Jetty server.åˆ™è¡¨ç¤ºæœåŠ¡æ­£å¸¸å¯åŠ¨</p>
</blockquote>
<p>ç™»å½• http://<server_host>:7180 è´¦å·ï¼šadmin</server_host></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/caolijun1166/article/details/82714387" target="_blank" rel="external">CDH 6.0.0 æ­å»º</a></li>
<li><a href="http://blog.51cto.com/pizibaidu/2174297" target="_blank" rel="external">CDH6.0.0è¯¦ç»†å®‰è£…æ•™ç¨‹åŠæ‰€é‡åˆ°çš„é—®é¢˜</a></li>
<li><a href="https://www.cloudera.com/documentation/enterprise/6/6.0/topics/installation.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£ - Cloudera Installation Guide</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TensorFlow - tf.contrib.learn æ„å»ºè¾“å…¥å‡½æ•°]]></title>
      <url>http://shopee.ai/2018/11/01/tensorflow/tf-5.2-contrib-learn-Input-fn/</url>
      <content type="html"><![CDATA[<p>ä»‹ç»å¦‚ä½•åœ¨tf.contrib.learnä¸­åˆ›å»ºè¾“å…¥å‡½æ•°ã€‚äº†è§£å¦‚ä½•æ„å»ºinput_fnå»é¢„å¤„ç†å’Œå°†æ•°æ®è¾“åˆ°æ¨¡å‹ä¸­çš„æ¦‚è¿°ã€‚</p>
<p>å®ç°åˆ©ç”¨input_fnå°†è®­ç»ƒï¼Œè¯„ä¼°å’Œé¢„æµ‹æ•°æ®æä¾›ç»™ç¥ç»ç½‘ç»œå›å½’å™¨ï¼Œç”¨äºé¢„æµ‹æˆ¿ä»·ä¸­ä½æ•°ã€‚</p>
<a id="more"></a> 
<h2 id="1-åˆ©ç”¨input-fnè‡ªå®šä¹‰è¾“å…¥Pipelines"><a href="#1-åˆ©ç”¨input-fnè‡ªå®šä¹‰è¾“å…¥Pipelines" class="headerlink" title="1. åˆ©ç”¨input_fnè‡ªå®šä¹‰è¾“å…¥Pipelines"></a>1. åˆ©ç”¨input_fnè‡ªå®šä¹‰è¾“å…¥Pipelines</h2><p>å½“ä½¿ç”¨ tf.contrib.learn è®­ç»ƒç¥ç»ç½‘ç»œï¼Œå®ƒå¯ä»¥ç›´æ¥é€šè¿‡æ‚¨çš„ç‰¹å¾å’Œç›®æ ‡æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œåˆ†ææˆ–é¢„æµ‹æ“ä½œã€‚è¿™æ˜¯ä¸€ä¸ªä»tf.contrib.learnå¿«é€Ÿå…¥é—¨æ•™ç¨‹ä¸­è·å–çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">training_set = tf.contrib.learn.datasets.base.load_csv_with_header(</span><br><span class="line">    filename=IRIS_TRAINING, target_dtype=np.int, features_dtype=np.float32)</span><br><span class="line">test_set = tf.contrib.learn.datasets.base.load_csv_with_header(</span><br><span class="line">    filename=IRIS_TEST, target_dtype=np.int, features_dtype=np.float32)</span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">classifier.fit(x=training_set.data,</span><br><span class="line">               y=training_set.target,</span><br><span class="line">               steps=<span class="number">2000</span>)</span><br></pre></td></tr></table></figure>
<p>å½“éœ€è¦å¯¹æºæ•°æ®è¿›è¡Œå°‘é‡æ“ä½œæ—¶ï¼Œè¿™ç§æ–¹æ³•è¿è¡Œè‰¯å¥½ã€‚ä½†æ˜¯åœ¨éœ€è¦æ›´å¤šç‰¹å¾å·¥ç¨‹çš„æƒ…å†µä¸‹ï¼Œ tf.contrib.learnæ”¯æŒä½¿ç”¨è‡ªå®šä¹‰è¾“å…¥å‡½æ•°ï¼ˆinput_fnï¼‰å°†é¢„å¤„ç†å’Œpipelineæ•°æ®çš„é€»è¾‘å°è£…åˆ°æ¨¡å‹ä¸­ã€‚</p>
<h3 id="1-1-è§£æinput-fn"><a href="#1-1-è§£æinput-fn" class="headerlink" title="1.1 è§£æinput_fn"></a>1.1 è§£æinput_fn</h3><p>ä»¥ä¸‹ä»£ç é˜è¿°äº†è¾“å…¥å‡½æ•°çš„åŸºæœ¬æ¡†æ¶ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_input_fn</span><span class="params">()</span>:</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment"># Preprocess your data here...</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment"># ...then return 1) a mapping of feature columns to Tensors with</span></span><br><span class="line">    <span class="comment"># the corresponding feature data, and 2) a Tensor containing labels</span></span><br><span class="line">    <span class="keyword">return</span> feature_cols, labels</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥å‡½æ•°éƒ¨åˆ†åŒ…å«ç”¨äºé¢„å¤„ç†è¾“å…¥æ•°æ®çš„ç‰¹å®šé€»è¾‘ï¼Œä¾‹å¦‚æ“¦é™¤ä¸è‰¯ç¤ºä¾‹æˆ–feature scalingã€‚</p>
<p>è¾“å…¥å‡½æ•°å¿…é¡»è¿”å›ä»¥ä¸‹ä¸¤ä¸ªå€¼ï¼Œå…¶ä¸­åŒ…å«è¦é¦ˆé€åˆ°æ¨¡å‹ä¸­çš„æœ€ç»ˆç‰¹å¾å’Œæ ‡ç­¾æ•°æ®ï¼ˆå¦‚ä¸Šè¿°ä»£ç æ¡†æ¶æ‰€ç¤ºï¼‰ï¼š</p>
<blockquote>
<p>feature_cols</p>
<ul>
<li>å°†ç‰¹å¾åˆ—åç§°æ˜ å°„åˆ°ç›¸åº”ç‰¹å¾æ•°æ®çš„Tensorsï¼ˆæˆ–SparseTensorsï¼‰çš„keys/valueså¯¹çš„å­—å…¸ã€‚</li>
</ul>
<p>labels</p>
<ul>
<li>åŒ…å«æ‚¨çš„æ ‡ç­¾ï¼ˆç›®æ ‡ï¼‰å€¼çš„å¼ é‡ï¼šæ‚¨çš„æ¨¡å‹é¢„æµ‹çš„å€¼ã€‚</li>
</ul>
</blockquote>
<h3 id="1-2-å°†ç‰¹å¾æ•°æ®è½¬æ¢ä¸ºå¼ é‡"><a href="#1-2-å°†ç‰¹å¾æ•°æ®è½¬æ¢ä¸ºå¼ é‡" class="headerlink" title="1.2 å°†ç‰¹å¾æ•°æ®è½¬æ¢ä¸ºå¼ é‡"></a>1.2 å°†ç‰¹å¾æ•°æ®è½¬æ¢ä¸ºå¼ é‡</h3><p>å¦‚æœç‰¹å¾/æ ‡ç­¾æ•°æ®å­˜å‚¨åœ¨pandas æ•°æ®æ¶æ„æˆ–numpyæ•°ç»„ï¼Œä½ éœ€è¦å°†å…¶è½¬æ¢ä¸ºTensoråœ¨å®ƒä»input_fnè¿”å›ä¹‹å‰ã€‚</p>
<p>å¯¹äºè¿ç»­æ•°æ®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨tf.constantåˆ›å»ºå’Œå¡«å……Tensorï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">feature_column_data = [<span class="number">1</span>, <span class="number">2.4</span>, <span class="number">0</span>, <span class="number">9.9</span>, <span class="number">3</span>, <span class="number">120</span>]</span><br><span class="line">feature_tensor = tf.constant(feature_column_data)</span><br></pre></td></tr></table></figure>
<h2 id="2-è¯¦è§ä»£ç "><a href="#2-è¯¦è§ä»£ç " class="headerlink" title="2. è¯¦è§ä»£ç "></a>2. è¯¦è§ä»£ç </h2><ul>
<li><a href="https://github.com/blair101/TensorFlowExamples/blob/master/tf.contrib.learn/tf.contrib.learnæ„å»ºè¾“å…¥å‡½æ•°.ipynb" target="_blank" rel="external">Blairâ€™s Github tf.contrib.learnæ„å»ºè¾“å…¥å‡½æ•°</a></li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"> </span><br><span class="line">tf.logging.set_verbosity(tf.logging.INFO)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. å®šä¹‰æ•°æ®é›†ä¸­çš„åˆ—åCOLUMNSã€‚ ä¸ºäº†åŒºåˆ†æ ‡ç­¾çš„ featureï¼Œè¿˜è¦å®šä¹‰ FEATURES å’Œ LABELã€‚</span></span><br><span class="line"></span><br><span class="line">COLUMNS = [<span class="string">"crim"</span>, <span class="string">"zn"</span>, <span class="string">"indus"</span>, <span class="string">"nox"</span>, <span class="string">"rm"</span>, <span class="string">"age"</span>,</span><br><span class="line">           <span class="string">"dis"</span>, <span class="string">"tax"</span>, <span class="string">"ptratio"</span>, <span class="string">"medv"</span>]</span><br><span class="line">FEATURES = [<span class="string">"crim"</span>, <span class="string">"zn"</span>, <span class="string">"indus"</span>, <span class="string">"nox"</span>, <span class="string">"rm"</span>,</span><br><span class="line">            <span class="string">"age"</span>, <span class="string">"dis"</span>, <span class="string">"tax"</span>, <span class="string">"ptratio"</span>]</span><br><span class="line">LABEL = <span class="string">"medv"</span></span><br><span class="line"> </span><br><span class="line">training_set = pd.read_csv(<span class="string">"boston_train.csv"</span>, skipinitialspace=<span class="keyword">True</span>,</span><br><span class="line">                           skiprows=<span class="number">1</span>, names=COLUMNS)</span><br><span class="line">test_set = pd.read_csv(<span class="string">"boston_test.csv"</span>, skipinitialspace=<span class="keyword">True</span>,</span><br><span class="line">                       skiprows=<span class="number">1</span>, names=COLUMNS)</span><br><span class="line">prediction_set = pd.read_csv(<span class="string">"boston_predict.csv"</span>, skipinitialspace=<span class="keyword">True</span>,</span><br><span class="line">                             skiprows=<span class="number">1</span>, names=COLUMNS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(training_set.head(2))</span></span><br><span class="line"><span class="comment"># print(test_set.head(2))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å®šä¹‰FeatureColumnså¹¶åˆ›å»ºå›å½’</span></span><br><span class="line">feature_cols = [tf.contrib.layers.real_valued_column(k) <span class="keyword">for</span> k <span class="keyword">in</span> FEATURES]</span><br><span class="line">feature_cols</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å®ä¾‹åŒ–ä¸€ä¸ªDNNRegressorç¥ç»ç½‘ç»œå›å½’æ¨¡å‹</span></span><br><span class="line">regressor = tf.contrib.learn.DNNRegressor(feature_columns=feature_cols,</span><br><span class="line">                                          hidden_units=[<span class="number">10</span>, <span class="number">10</span>],</span><br><span class="line">                                          model_dir=<span class="string">"/tmp/boston_model"</span>)</span><br><span class="line">                                          </span><br><span class="line"><span class="comment"># 4. æ„å»ºinput_fn                                          </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">input_fn</span><span class="params">(data_set)</span>:</span></span><br><span class="line">    feature_cols = &#123;k: tf.constant(data_set[k].values)</span><br><span class="line">                    <span class="keyword">for</span> k <span class="keyword">in</span> FEATURES&#125;</span><br><span class="line">    labels = tf.constant(data_set[LABEL].values)</span><br><span class="line">    <span class="keyword">return</span> feature_cols, labels</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. è®­ç»ƒå›å½’å™¨</span></span><br><span class="line">regressor.fit(input_fn=<span class="keyword">lambda</span>: input_fn(training_set), steps=<span class="number">5000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. è¯„ä¼°æ¨¡å‹</span></span><br><span class="line">ev = regressor.evaluate(input_fn=<span class="keyword">lambda</span>: input_fn(test_set), steps=<span class="number">1</span>)</span><br><span class="line">loss_score = ev[<span class="string">"loss"</span>]</span><br><span class="line">print(<span class="string">"Loss: &#123;0:f&#125;"</span>.format(loss_score))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. é¢„æµ‹</span></span><br><span class="line">y = regressor.predict_scores(input_fn=<span class="keyword">lambda</span>: input_fn(prediction_set), batch_size=<span class="keyword">None</span>)</span><br><span class="line"><span class="comment"># .predict() returns an iterator; convert to a list and print predictions</span></span><br><span class="line">predictions = list(itertools.islice(y, <span class="number">6</span>))</span><br><span class="line">print(<span class="string">"Predictions: &#123;&#125;"</span>.format(str(predictions)))</span><br></pre></td></tr></table></figure>
<h2 id="3-å…¶ä»–èµ„æº"><a href="#3-å…¶ä»–èµ„æº" class="headerlink" title="3. å…¶ä»–èµ„æº"></a>3. å…¶ä»–èµ„æº</h2><p>ä¸ºç¥ç»ç½‘ç»œå›å½’å™¨åˆ›å»ºä¸€ä¸ªinput_fnã€‚è¦äº†è§£æœ‰å…³å°†input_fnç”¨äºå…¶ä»–ç±»å‹æ¨¡å‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ä»¥ä¸‹èµ„æºï¼š</p>
<ul>
<li><a href="https://www.tensorflow.org/tutorials/linear" target="_blank" rel="external">TensorFlowçš„å¤§è§„æ¨¡çº¿æ€§æ¨¡å‹</a>ï¼šä»‹ç»TensorFlowä¸­çº¿æ€§æ¨¡å‹ï¼Œæä¾›è½¬æ¢è¾“å…¥æ•°æ®çš„ç‰¹å¾åˆ—å’ŒæŠ€æœ¯çš„é«˜çº§æ¦‚è¿°ã€‚</li>
<li><a href="https://www.tensorflow.org/tutorials/wide" target="_blank" rel="external">TensorFlowçº¿æ€§æ¨¡å‹æ•™ç¨‹</a>ï¼šFeatureColumnså’Œ input_fnï¼Œçº¿æ€§åˆ†ç±»æ¨¡å‹ï¼Œæ®äººå£è´¢äº§æ™®æŸ¥æ•°æ®é¢„æµ‹æ”¶å…¥èŒƒå›´ã€‚</li>
<li><a href="https://www.tensorflow.org/tutorials/wide_and_deep" target="_blank" rel="external">TensorFlow Wideï¼†Deep Learningæ•™ç¨‹</a>ï¼šåŸºäº<a href="https://www.tensorflow.org/tutorials/wide" target="_blank" rel="external">çº¿æ€§æ¨¡å‹æ•™ç¨‹</a>ï¼Œæœ¬æ•™ç¨‹æ¶µç›– FeatureColumn å’Œ input_fnï¼Œåˆ›å»ºäº†ä¸€ä¸ªâ€œå®½è€Œæ·±â€çš„æ¨¡å‹ï¼Œå®ƒèåˆäº†ä¸€ä¸ªçº¿æ€§æ¨¡å‹å’Œä½¿ç”¨ DNNLinearCombinedClassifier çš„ç¥ç»ç½‘ç»œ ã€‚</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://cwiki.apachecn.org/pages/viewpage.action?pageId=10029487" target="_blank" rel="external">ä½¿ç”¨tf.contrib.learnæ„å»ºè¾“å…¥å‡½æ•°</a></li>
<li><a href="http://funhacks.net/2017/02/13/itertools/" target="_blank" rel="external">é«˜æ•ˆçš„ itertools æ¨¡å—</a></li>
<li><a href="http://www.cnblogs.com/datablog/p/6127000.html" target="_blank" rel="external">pandas.read_csvå‚æ•°æ•´ç†</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TensorFlow - tf.contrib.learn å¿«é€Ÿå…¥é—¨]]></title>
      <url>http://shopee.ai/2018/10/31/tensorflow/tf-5.1-contrib-learn-Quickstart/</url>
      <content type="html"><![CDATA[<p>TensorFlow çš„é«˜çº§æœºå™¨å­¦ä¹ APIï¼ˆtf.contrib.learnï¼‰å¯ä»¥è½»æ¾é…ç½®ï¼Œè®­ç»ƒå’Œè¯„ä¼°å„ç§æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚</p>
<p>ä½¿ç”¨tf.contrib.learnæ„å»º ç¥ç»ç½‘ç»œ åˆ†ç±»å™¨å¹¶åœ¨<strong>Iris</strong>æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒ. åŸºäºèŠ±è¼/èŠ±ç“£å‡ ä½•å½¢çŠ¶æ¥é¢„æµ‹èŠ±ç§ã€‚</p>
<a id="more"></a> 
<p>ä¾ç…§ä»¥ä¸‹äº”ä¸ªæ­¥éª¤ç¼–å†™ä»£ç ï¼š</p>
<ol>
<li>å°†åŒ…å«Irisè®­ç»ƒ/æµ‹è¯•æ•°æ®çš„CSVåŠ è½½åˆ°TensorFlowæ•°æ®é›†ä¸­</li>
<li>æ„å»ºç¥ç»ç½‘ç»œåˆ†ç±»å™¨</li>
<li>ä½¿ç”¨è®­ç»ƒæ•°æ®æ‹Ÿåˆæ¨¡å‹</li>
<li>è¯„ä¼°æ¨¡å‹çš„å‡†ç¡®æ€§</li>
<li>åˆ†ç±»æ–°æ ·æœ¬</li>
</ol>
<h2 id="1-å®Œæ•´çš„ç¥ç»ç½‘ç»œæºä»£ç "><a href="#1-å®Œæ•´çš„ç¥ç»ç½‘ç»œæºä»£ç " class="headerlink" title="1. å®Œæ•´çš„ç¥ç»ç½‘ç»œæºä»£ç "></a>1. å®Œæ•´çš„ç¥ç»ç½‘ç»œæºä»£ç </h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="comment"># Data sets</span></span><br><span class="line">IRIS_TRAINING = <span class="string">"iris_training.csv"</span></span><br><span class="line">IRIS_TRAINING_URL = <span class="string">"http://download.tensorflow.org/data/iris_training.csv"</span></span><br><span class="line"></span><br><span class="line">IRIS_TEST = <span class="string">"iris_test.csv"</span></span><br><span class="line">IRIS_TEST_URL = <span class="string">"http://download.tensorflow.org/data/iris_test.csv"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># First download iris_training.csv and iris_test.csv</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Load datasets.</span></span><br><span class="line">    training_set = tf.contrib.learn.datasets.base.load_csv_with_header(</span><br><span class="line">        filename=IRIS_TRAINING,</span><br><span class="line">        target_dtype=np.int,</span><br><span class="line">        features_dtype=np.float32)</span><br><span class="line"></span><br><span class="line">    test_set = tf.contrib.learn.datasets.base.load_csv_with_header(</span><br><span class="line">        filename=IRIS_TEST,</span><br><span class="line">        target_dtype=np.int,</span><br><span class="line">        features_dtype=np.float32)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Specify that all features have real-value data</span></span><br><span class="line">    feature_columns = [tf.contrib.layers.real_valued_column(<span class="string">""</span>, dimension=<span class="number">4</span>)]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Build 3 layer DNN with 10, 20, 10 units respectively.</span></span><br><span class="line">    classifier = tf.contrib.learn.DNNClassifier(feature_columns=feature_columns,</span><br><span class="line">                                                hidden_units=[<span class="number">10</span>, <span class="number">20</span>, <span class="number">10</span>],</span><br><span class="line">                                                n_classes=<span class="number">3</span>,</span><br><span class="line">                                                model_dir=<span class="string">"/tmp/iris_model"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Define the training inputs</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_train_inputs</span><span class="params">()</span>:</span></span><br><span class="line">        x = tf.constant(training_set.data)</span><br><span class="line">        y = tf.constant(training_set.target)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x, y</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Fit model.</span></span><br><span class="line">    classifier.fit(input_fn=get_train_inputs, steps=<span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Define the test inputs</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_test_inputs</span><span class="params">()</span>:</span></span><br><span class="line">        x = tf.constant(test_set.data)</span><br><span class="line">        y = tf.constant(test_set.target)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x, y</span><br><span class="line"></span><br><span class="line">    <span class="string">'''Evaluate accuracy'''</span> </span><br><span class="line">    <span class="comment"># &#123;'loss': 0.098150678, 'accuracy': 0.96666664, 'global_step': 4000&#125;</span></span><br><span class="line">    accuracy_score = classifier.evaluate(input_fn=get_test_inputs,</span><br><span class="line">                                         steps=<span class="number">1</span>)[<span class="string">"accuracy"</span>]</span><br><span class="line"></span><br><span class="line">    print(<span class="string">"\nTest Accuracy: &#123;0:f&#125;\n"</span>.format(accuracy_score))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Classify two new flower samples.</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">new_samples</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">return</span> np.array(</span><br><span class="line">            [[<span class="number">6.4</span>, <span class="number">3.2</span>, <span class="number">4.5</span>, <span class="number">1.5</span>],</span><br><span class="line">             [<span class="number">5.8</span>, <span class="number">3.1</span>, <span class="number">5.0</span>, <span class="number">1.7</span>]], dtype=np.float32)</span><br><span class="line"></span><br><span class="line">    predictions = list(classifier.predict(input_fn=new_samples))</span><br><span class="line"></span><br><span class="line">    print(</span><br><span class="line">        <span class="string">"New Samples, Class Predictions:    &#123;&#125;\n"</span></span><br><span class="line">            .format(predictions))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h2 id="2-å°†Iris-CSVæ•°æ®åŠ è½½åˆ°TFä¸­"><a href="#2-å°†Iris-CSVæ•°æ®åŠ è½½åˆ°TFä¸­" class="headerlink" title="2. å°†Iris CSVæ•°æ®åŠ è½½åˆ°TFä¸­"></a>2. å°†Iris CSVæ•°æ®åŠ è½½åˆ°TFä¸­</h2><p>è¯¥<a href="https://en.wikipedia.org/wiki/Iris_flower_data_set" target="_blank" rel="external">Iris data set</a>åŒ…å«150è¡Œæ•°æ®ï¼ŒåŒ…æ‹¬æ¥è‡ªæ¯ä¸‰ä¸ªç›¸å…³Irisç§ç±»çš„50ä¸ªæ ·å“ï¼š ris setosa, Iris virginica, ä»¥åŠ Iris versicolorã€‚</p>
<p><img src="/images/tensorflow/tf-5.1-Iris-data_1.jpg" width="700"></p>
<blockquote>
<p>ä»å·¦åˆ°å³ï¼Œ Iris setosaï¼ˆ Radomilï¼ŒCC BY-SA 3.0ï¼‰ï¼Œ Iris versicolorï¼ˆDlangloisï¼ŒCC BY-SA 3.0ï¼‰å’ŒIris virginicaï¼ˆFrank Mayfieldï¼ŒCC BY-SA 2.0ï¼‰ï¼‰ã€‚</p>
<p>æ¯è¡ŒåŒ…å«æ¯ä¸ªèŠ±æ ·å“çš„ä»¥ä¸‹æ•°æ®ï¼š èŠ±è¼é•¿åº¦ï¼ŒèŠ±è¼å®½åº¦ï¼Œ èŠ±ç“£é•¿åº¦ï¼ŒèŠ±ç“£å®½åº¦å’ŒèŠ±ç§ã€‚èŠ±ç§ä»¥æ•´æ•°è¡¨ç¤ºï¼Œ0è¡¨ç¤ºIris setosaï¼Œ1è¡¨ç¤ºIris versicolorï¼Œ2è¡¨ç¤ºIris virginicaã€‚</p>
</blockquote>
<p><img src="/images/tensorflow/tf-5.1-Iris-data_2.jpg" width="400"></p>
<blockquote>
<p>Irisæ•°æ®å·²è¢«éšæœºåˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„CSVï¼š</p>
<ul>
<li>å«120ä¸ªæ ·æœ¬çš„è®­ç»ƒé›†ï¼ˆiris_training.csvï¼‰</li>
<li>å«30ä¸ªæ ·æœ¬çš„æµ‹è¯•é›†ï¼ˆiris_test.csvï¼‰ã€‚</li>
</ul>
</blockquote>
<p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨learn.datasets.baseä¸­çš„<a href="https://www.github.com/tensorflow/tensorflow/blob/r1.1/tensorflow/contrib/learn/python/learn/datasets/base.py" target="_blank" rel="external">load_csv_with_header()</a> æ–¹æ³•å°†è®­ç»ƒé›†å’Œæµ‹è¯•é›†åŠ è½½åˆ°datasetsä¸­ã€‚è¯¥load_csv_with_header()æ–¹æ³•éœ€è¦ä¸‰ä¸ªå¿…ä¸å¯å°‘çš„å‚æ•°ï¼š</p>
<ul>
<li>filenameï¼Œå¸¦æœ‰æ–‡ä»¶è·¯å¾„çš„CSVæ–‡ä»¶ã€‚</li>
<li>target_dtypeï¼Œæ•°æ®é›†çš„å½¢å¼ä¸ºnumpy æ•°æ®ç±»å‹ã€‚</li>
<li>features_dtypeï¼Œæ•°æ®ç‰¹å¾é›†çš„å½¢å¼ä¸ºnumpy æ•°æ®ç±»å‹ã€‚</li>
</ul>
<p>åœ¨è¿™é‡Œï¼Œç›®æ ‡ï¼ˆä½ æ­£åœ¨è®­ç»ƒé¢„æµ‹æ¨¡å‹çš„å€¼ï¼‰æ˜¯èŠ±ç§ï¼Œå®ƒæ˜¯0-2çš„æ•´æ•°ï¼Œæ‰€ä»¥é€‚å½“çš„numpyæ•°æ®ç±»å‹æ˜¯np.intï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Load datasets.</span></span><br><span class="line">training_set = tf.contrib.learn.datasets.base.load_csv_with_header(</span><br><span class="line">    filename=IRIS_TRAINING,</span><br><span class="line">    target_dtype=np.int,</span><br><span class="line">    features_dtype=np.float32)</span><br><span class="line">    </span><br><span class="line">test_set = tf.contrib.learn.datasets.base.load_csv_with_header(</span><br><span class="line">    filename=IRIS_TEST,</span><br><span class="line">    target_dtype=np.int,</span><br><span class="line">    features_dtype=np.float32)</span><br></pre></td></tr></table></figure>
<p>test_set æ•°æ®å½¢å¼</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">Dataset(</span><br><span class="line">       data=array([</span><br><span class="line">          [ <span class="number">5.9000001</span> ,  <span class="number">3.</span> ,  <span class="number">4.19999981</span>,  <span class="number">1.5</span>],</span><br><span class="line">          [ <span class="number">6.9000001</span> ,  <span class="number">3.0999999</span> ,  <span class="number">5.4000001</span> ,  <span class="number">2.0999999</span> ],</span><br><span class="line">          ......</span><br><span class="line">          [ <span class="number">6.69999981</span>,  <span class="number">3.29999995</span>,  <span class="number">5.69999981</span>,  <span class="number">2.5</span>       ],</span><br><span class="line">          [ <span class="number">6.4000001</span> ,  <span class="number">2.9000001</span> ,  <span class="number">4.30000019</span>,  <span class="number">1.29999995</span>]</span><br><span class="line">       ], dtype=float32), </span><br><span class="line">   		</span><br><span class="line">       target=array(</span><br><span class="line">          [<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>,<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>])</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>test_set.data æ•°æ®å½¢å¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[[ 5.9000001   3.          4.19999981  1.5       ]</span><br><span class="line"> [ 6.9000001   3.0999999   5.4000001   2.0999999 ]</span><br><span class="line"> ......</span><br><span class="line"> [ 6.4000001   2.9000001   4.30000019  1.29999995]]</span><br></pre></td></tr></table></figure>
<p>test_set.target æ•°æ®å½¢å¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[1 2 0 1 1 1 0 2 1 2 2 0 2 1 1 0 1 0 0 2 0 1 2 1 1 1 0 1 2 1]</span><br></pre></td></tr></table></figure>
<p>tf.contrib.learnä¸­çš„datasetsè¢«å‘½åä¸º tuples ; æ‚¨å¯ä»¥é€šè¿‡dataå’Œtarget å±æ€§è®¿é—®ç‰¹å¾æ•°æ®å’Œç›®æ ‡å€¼ã€‚è¿™é‡Œçš„training_set.dataï¼Œtraining_set.targetåŒ…å«è®­ç»ƒé›†çš„ç‰¹å¾æ•°æ®å’Œç›®æ ‡å€¼ï¼Œtest_set.data ï¼Œtest_set.targetåŒ…å«æµ‹è¯•é›†çš„ç‰¹å¾æ•°æ®å’Œç›®æ ‡å€¼ã€‚</p>
<p>åœ¨ â€œåœ¨Irisè®­ç»ƒæ•°æ®ä¸­æ‹ŸåˆDNNCåˆ†ç±»å™¨â€ï¼Œ æ‚¨å°†ä½¿ç”¨training_set.dataå’Œ training_set.targetè®­ç»ƒæ‚¨çš„æ¨¡å‹ï¼Œåœ¨ â€œè¯„ä¼°æ¨¡å‹ç²¾åº¦â€ æ—¶ï¼Œæ‚¨å°†ä½¿ç”¨test_set.dataå’Œ test_set.targetã€‚</p>
<h2 id="3-æ„å»ºæ·±å±‚ç¥ç»ç½‘ç»œåˆ†ç±»å™¨"><a href="#3-æ„å»ºæ·±å±‚ç¥ç»ç½‘ç»œåˆ†ç±»å™¨" class="headerlink" title="3. æ„å»ºæ·±å±‚ç¥ç»ç½‘ç»œåˆ†ç±»å™¨"></a>3. æ„å»ºæ·±å±‚ç¥ç»ç½‘ç»œåˆ†ç±»å™¨</h2><p>tf.contrib.learnæä¾›äº†å„ç§é¢„å®šä¹‰çš„æ¨¡å‹ï¼Œç§°ä¸º <a href="https://www.tensorflow.org/api_guides/python/contrib.learn#estimators" target="_blank" rel="external">Estimators</a>ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨â€œout of the boxâ€æ–¹å¼å¯¹æ•°æ®è¿›è¡Œè®­ç»ƒå’Œè¯„ä¼°æ“ä½œã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œæ‚¨å°†é…ç½®æ·±å±‚ç¥ç»ç½‘ç»œåˆ†ç±»å™¨æ¨¡å‹ä»¥æ‹ŸåˆIrisæ•°æ®ã€‚åˆ©ç”¨tf.contrib.learnï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å‡ è¡Œä»£ç å®ä¾‹åŒ–<a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn/DNNClassifier" target="_blank" rel="external">tf.contrib.learn.DNNClassifier</a>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Specify that all features have real-value data</span></span><br><span class="line">feature_columns = [tf.contrib.layers.real_valued_column(<span class="string">""</span>, dimension=<span class="number">4</span>)]</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Build 3 layer DNN with 10, 20, 10 units respectively.</span></span><br><span class="line">classifier = tf.contrib.learn.DNNClassifier(feature_columns=feature_columns,</span><br><span class="line">                                            hidden_units=[<span class="number">10</span>, <span class="number">20</span>, <span class="number">10</span>],</span><br><span class="line">                                            n_classes=<span class="number">3</span>,</span><br><span class="line">                                            model_dir=<span class="string">"/tmp/iris_model"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3-1-feature-columns-å½¢å¼"><a href="#3-1-feature-columns-å½¢å¼" class="headerlink" title="3.1 feature_columns å½¢å¼"></a>3.1 feature_columns å½¢å¼</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[_RealValuedColumn(column_name=<span class="string">''</span>, dimension=4, default_value=None, dtype=tf.float32, normalizer=None)]</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç é¦–å…ˆå®šä¹‰äº†æ¨¡å‹çš„ç‰¹å¾åˆ—ï¼Œå®ƒä»¬æŒ‡å®šæ•°æ®é›†ä¸­çš„ç‰¹å¾æ•°æ®ç±»å‹ã€‚æ‰€æœ‰çš„ç‰¹å¾æ•°æ®æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥tf.contrib.layers.real_valued_columnä½¿ç”¨ç›¸åº”çš„å‡½æ•°æ¥æ„é€ ç‰¹å¾åˆ—ã€‚æ•°æ®é›†ä¸­æœ‰å››ä¸ªç‰¹å¾ï¼ˆèŠ±è¼å®½åº¦ï¼ŒèŠ±è¼é«˜åº¦ï¼ŒèŠ±ç“£å®½åº¦å’ŒèŠ±ç“£é«˜åº¦ï¼‰ï¼Œå› æ­¤dimension å¿…é¡»è®¾ç½®ä¸º4ä¿å­˜æ‰€æœ‰æ•°æ®ã€‚</p>
<h3 id="3-2-classifier-å½¢å¼"><a href="#3-2-classifier-å½¢å¼" class="headerlink" title="3.2 classifier å½¢å¼"></a>3.2 classifier å½¢å¼</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DNNClassifier(params=&#123;</span><br><span class="line"><span class="string">'head'</span>: &lt;tensorflow.contrib.learn.python.learn.estimators.head._MultiClassHead object at 0x1089c0c18&gt;, </span><br><span class="line"><span class="string">'hidden_units'</span>: [10, 20, 10], </span><br><span class="line"><span class="string">'feature_columns'</span>: (_RealValuedColumn(column_name=<span class="string">''</span>, dimension=4, default_value=None, dtype=tf.float32, normalizer=None),), </span><br><span class="line"><span class="string">'optimizer'</span>: None, </span><br><span class="line"><span class="string">'activation_fn'</span>: &lt;<span class="keyword">function</span> relu at 0x11590ad08&gt;, </span><br><span class="line"><span class="string">'dropout'</span>: None, </span><br><span class="line"><span class="string">'gradient_clip_norm'</span>: None, </span><br><span class="line"><span class="string">'embedding_lr_multipliers'</span>: None, </span><br><span class="line"><span class="string">'input_layer_min_slice_size'</span>: None&#125;)</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œä»£ç ä½¿ç”¨ä»¥ä¸‹å‚æ•°åˆ›å»ºä¸€ä¸ªDNNClassifieræ¨¡å‹ï¼š</p>
<ul>
<li>feature_columns=feature_columnsã€‚ä¸Šé¢å®šä¹‰çš„ç‰¹å¾åˆ—é›†åˆã€‚</li>
<li>hidden_units=[10, 20, 10]ã€‚ä¸‰ä¸ªéšå«å±‚ï¼Œåˆ†åˆ«å«æœ‰10,20å’Œ10ä¸ªç¥ç»å…ƒã€‚</li>
<li>n_classes=3ã€‚ä¸‰ä¸ªç›®æ ‡ç±»åˆ«ï¼Œä»£è¡¨ä¸‰ç§Irisç‰©ç§ã€‚</li>
<li>model_dir=/tmp/iris_modelã€‚TensorFlowå°†åœ¨æ¨¡å‹è®­ç»ƒæœŸé—´ä¿å­˜æ£€æŸ¥ç‚¹æ•°æ®çš„ç›®å½•ã€‚æœ‰å…³ä½¿ç”¨TensorFlowè¿›è¡Œæ—¥å¿—è®°å½•å’Œç›‘è§†çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…Logging and Monitoring Basics with tf.contrib.learn.ã€‚</li>
</ul>
<h2 id="4-è®­ç»ƒçš„è¾“å…¥æµ"><a href="#4-è®­ç»ƒçš„è¾“å…¥æµ" class="headerlink" title="4. è®­ç»ƒçš„è¾“å…¥æµ"></a>4. è®­ç»ƒçš„è¾“å…¥æµ</h2><p>tf.contrib.learnAPIä½¿ç”¨è¾“å…¥å‡½æ•°ï¼Œåˆ›å»ºä¸ºæ¨¡å‹ç”Ÿæˆæ•°æ®çš„TensorFlowæ“ä½œã€‚æœ¬ä¾‹ä¸­ï¼Œæ•°æ®è¶³å¤Ÿå°ï¼Œå¯ä»¥TensorFlow constants å­˜å‚¨ã€‚ä»¥ä¸‹ä»£ç ç”Ÿæˆæœ€ç®€å•çš„è¾“å…¥ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Define the test inputs</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_train_inputs</span><span class="params">()</span>:</span></span><br><span class="line">  x = tf.constant(training_set.data)</span><br><span class="line">  y = tf.constant(training_set.target)</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> x, y</span><br></pre></td></tr></table></figure>
<h2 id="5-åœ¨Irisè®­ç»ƒæ•°æ®ä¸Šæ‹ŸåˆDNNåˆ†ç±»å™¨"><a href="#5-åœ¨Irisè®­ç»ƒæ•°æ®ä¸Šæ‹ŸåˆDNNåˆ†ç±»å™¨" class="headerlink" title="5. åœ¨Irisè®­ç»ƒæ•°æ®ä¸Šæ‹ŸåˆDNNåˆ†ç±»å™¨"></a>5. åœ¨Irisè®­ç»ƒæ•°æ®ä¸Šæ‹ŸåˆDNNåˆ†ç±»å™¨</h2><p>ç°åœ¨æ‚¨å·²ç»é…ç½®äº†DNN classifieræ¨¡å‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥<a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn/BaseEstimator#fit" target="_blank" rel="external">fit</a>æ–¹æ³•å°†å…¶æ‹ŸåˆIrisè®­ç»ƒæ•°æ®ã€‚å°†get_train_inputsä¼ é€’ç»™input_fnï¼ŒæŒ‡å®šè®­ç»ƒçš„æ­¥éª¤ï¼ˆè¿™é‡Œå–2000ï¼‰ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Fit model.</span></span><br><span class="line">classifier.fit(input_fn=get_train_inputs, steps=<span class="number">2000</span>)</span><br></pre></td></tr></table></figure>
<p>æ¨¡å‹çš„çŠ¶æ€ä¿ç•™åœ¨classifierï¼Œè¿™æ„å‘³ç€å¦‚æœä½ å–œæ¬¢ï¼Œä½ å¯ä»¥åˆ†å¸ƒè®­ç»ƒã€‚ä¾‹å¦‚ï¼Œä»¥ä¸Šä»£ç ç›¸å½“äºï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">classifier.fit(x=training_set.data, y=training_set.target, steps=<span class="number">1000</span>)</span><br><span class="line">classifier.fit(x=training_set.data, y=training_set.target, steps=<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å¸Œæœ›åœ¨è®­ç»ƒæ—¶è·Ÿè¸ªæ¨¡å‹ï¼Œåˆ™å¯èƒ½éœ€è¦ä½¿ç”¨TensorFlow <a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn/monitors" target="_blank" rel="external">monitor</a> æ¥æ‰§è¡Œæ—¥å¿—è®°å½•æ“ä½œã€‚æœ‰å…³æ­¤ä¸»é¢˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<br>â€œLogging and Monitoring Basics with tf.contrib.learnâ€æ•™ç¨‹ ã€‚</p>
<h2 id="6-è¯„ä¼°æ¨¡å‹ç²¾åº¦"><a href="#6-è¯„ä¼°æ¨¡å‹ç²¾åº¦" class="headerlink" title="6. è¯„ä¼°æ¨¡å‹ç²¾åº¦"></a>6. è¯„ä¼°æ¨¡å‹ç²¾åº¦</h2><p>æ‚¨å·²ç»åœ¨Irisè®­ç»ƒæ•°æ®ä¸Šæ‹ŸåˆDNNClassifieræ¨¡å‹; ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥<a href="https://www.tensorflow.org/api_docs/python/tf/contrib/learn/BaseEstimator#evaluate" target="_blank" rel="external">evaluate</a>æ–¹æ³•æ£€æŸ¥å…¶å¯¹Irisæµ‹è¯•æ•°æ®çš„å‡†ç¡®æ€§ ã€‚æ­£å¦‚fitï¼Œ evaluateéœ€è¦ä¸€ä¸ªæ„å»ºå…¶è¾“å…¥æ¸ é“çš„è¾“å…¥å‡½æ•°ã€‚evaluate è¿”å›ä¸€ä¸ªè¯„ä¼°ç»“æœdictã€‚ä¸‹é¢çš„ä»£ç é€šè¿‡Irisæµ‹è¯•æ•°æ®- test_set.dataå’Œtest_set.targetè¿›è¡Œevaluateå¹¶æ‰“å°ç»“æœçš„ç²¾åº¦ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Define the test inputs</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_test_inputs</span><span class="params">()</span>:</span></span><br><span class="line">  x = tf.constant(test_set.data)</span><br><span class="line">  y = tf.constant(test_set.target)</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">return</span> x, y</span><br><span class="line"> </span><br><span class="line"><span class="string">'''Evaluate accuracy.'''</span> </span><br><span class="line"><span class="comment"># &#123;'loss': 0.098150678, 'accuracy': 0.96666664, 'global_step': 4000&#125;</span></span><br><span class="line">accuracy_score = classifier.evaluate(input_fn=get_test_inputs,</span><br><span class="line">                                     steps=<span class="number">1</span>)[<span class="string">"accuracy"</span>]</span><br><span class="line"> </span><br><span class="line">print(<span class="string">"\nTest Accuracy: &#123;0:f&#125;\n"</span>.format(accuracy_score))</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šè¿™é‡Œçš„stepså‚æ•°å¯¹evaluateå¾ˆé‡è¦ã€‚ evaluateç›´åˆ°å®ƒåˆ°è¾¾è¾“å…¥çš„æœ«å°¾æ‰åœæ­¢è¿è¡Œã€‚</p>
<h2 id="7-åˆ†ç±»æ–°æ ·æœ¬"><a href="#7-åˆ†ç±»æ–°æ ·æœ¬" class="headerlink" title="7. åˆ†ç±»æ–°æ ·æœ¬"></a>7. åˆ†ç±»æ–°æ ·æœ¬</h2><p>ä½¿ç”¨estimatorçš„predict()æ–¹æ³•å¯¹æ–°æ ·æœ¬è¿›è¡Œåˆ†ç±»ã€‚ä¾‹å¦‚ï¼Œè¯´ä½ æœ‰è¿™ä¸¤ä¸ªæ–°çš„èŠ±æœµæ ·ä¾‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Classify two new flower samples.</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">new_samples</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="keyword">return</span> np.array(</span><br><span class="line">    [[<span class="number">6.4</span>, <span class="number">3.2</span>, <span class="number">4.5</span>, <span class="number">1.5</span>],</span><br><span class="line">     [<span class="number">5.8</span>, <span class="number">3.1</span>, <span class="number">5.0</span>, <span class="number">1.7</span>]], dtype=np.float32)</span><br><span class="line"> </span><br><span class="line">predictions = list(classifier.predict(input_fn=new_samples))</span><br><span class="line"> </span><br><span class="line">print(</span><br><span class="line">    <span class="string">"New Samples, Class Predictions:    &#123;&#125;\n"</span></span><br><span class="line">    .format(predictions))</span><br></pre></td></tr></table></figure>
<p>æ‚¨å¯ä»¥ä½¿ç”¨è¯¥predict()æ–¹æ³•é¢„æµ‹å…¶ç‰©ç§ã€‚predictè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°è½¬æ¢æˆä¸€ä¸ªåˆ—è¡¨ã€‚ä»¥ä¸‹ä»£ç å–å¾—å¹¶æ‰“å°åˆ†ç±»çš„é¢„æµ‹ç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">New Samples, Class Predictions:    [1 2]</span><br></pre></td></tr></table></figure>
<h2 id="8-å…¶ä»–èµ„æº"><a href="#8-å…¶ä»–èµ„æº" class="headerlink" title="8. å…¶ä»–èµ„æº"></a>8. å…¶ä»–èµ„æº</h2><ul>
<li>å…¶ä»–èµ„æºæœ‰å…³tf.contrib.learnçš„æ›´å¤šå‚è€ƒèµ„æ–™ï¼Œè¯·å‚é˜…å®˜æ–¹ <a href="https://www.tensorflow.org/api_guides/python/contrib.learn" target="_blank" rel="external">APIæ–‡æ¡£</a>ã€‚</li>
<li>æœ‰å…³ä½¿ç”¨tf.contrib.learnåˆ›å»ºçº¿æ€§æ¨¡å‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://www.tensorflow.org/tutorials/linear" target="_blank" rel="external">Large-scale Linear Models with TensorFlow.</a></li>
<li>è¦ä½¿ç”¨tf.contrib.learn APIæ„å»ºè‡ªå·±çš„Estimatorï¼Œè¯·æŸ¥çœ‹åœ¨ <a href="https://www.tensorflow.org/extend/estimators" target="_blank" rel="external">tf.contrib.learnä¸­åˆ›å»ºä¼°è®¡å™¨</a>ã€‚</li>
<li>è¦åœ¨æµè§ˆå™¨ä¸­å®éªŒç¥ç»ç½‘ç»œå»ºæ¨¡å’Œå¯è§†åŒ–ï¼Œè¯·æŸ¥çœ‹<a href="http://playground.tensorflow.org/" target="_blank" rel="external">Deep Playground</a>ã€‚</li>
<li>æœ‰å…³ç¥ç»ç½‘ç»œçš„æ›´å¤šé«˜çº§æ•™ç¨‹ï¼Œè¯·å‚é˜… <a href="https://www.tensorflow.org/tutorials/images/deep_cnn" target="_blank" rel="external">å·ç§¯ç¥ç»ç½‘ç»œ</a>å’Œ<a href="https://www.tensorflow.org/tutorials/sequences/recurrent" target="_blank" rel="external">å¾ªç¯ç¥ç»ç½‘ç»œ</a>ã€‚</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://mli.github.io/gpu/2016/01/17/build-gpu-clusters/" target="_blank" rel="external">GPUé›†ç¾¤æŠ˜è…¾æ‰‹è®°â€”â€”2015</a></li>
<li><a href="http://cwiki.apachecn.org/pages/viewpage.action?pageId=10029485" target="_blank" rel="external">TensorFlow R1.2 ä¸­æ–‡æ–‡æ¡£</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tensorflow è¸©å‘è®°ä¹‹ tf.metrics]]></title>
      <url>http://shopee.ai/2018/10/23/tensorflow/tf-metrics_learn/</url>
      <content type="html"><![CDATA[<p>æ€»ç»“ä¸€ä¸‹ tf.metrics é‡åˆ°çš„ä¸€äº›å‘ã€‚</p>
<a id="more"></a>
<p><strong>ç²¾ç¡®ç‡çš„è®¡ç®—å…¬å¼</strong></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/qq_37747262/article/details/82223155" target="_blank" rel="external">Tensorflowè¸©å‘è®°ä¹‹tf.metrics</a></li>
<li><a href="https://github.com/blair101/tensorflow_metrics_learn/blob/master/tensorflow_metrics_learn.ipynb" target="_blank" rel="external">TensorFlow Github tf.metrics å®è·µ</a></li>
<li><a href="http://ronny.rest/blog/post_2017_09_11_tf_metrics/" target="_blank" rel="external">Ronny Restrepo - tf.metrics.accuracy()è®²è§£æ»´å¾ˆæ¸…æ¥š</a></li>
<li><a href="http://cwiki.apachecn.org/pages/viewpage.action?pageId=10029489" target="_blank" rel="external">ApacheCN å¼€æºç»„ç»‡ tf.contrib.learnåŸºç¡€çš„è®°å½•å’Œç›‘æ§æ•™ç¨‹</a></li>
<li><a href="http://cwiki.apachecn.org/pages/viewpage.action?pageId=10029377" target="_blank" rel="external">ApacheCN å¼€æºç»„ç»‡ TensorFlowå…¥é—¨</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tensorflow tf.app.run()ä¸å‘½ä»¤è¡Œå‚æ•°è§£æ]]></title>
      <url>http://shopee.ai/2018/10/23/tensorflow/tf-app_run_&_tf_flags/</url>
      <content type="html"><![CDATA[<p>tf.app.run() ä¸ å‘½ä»¤è¡Œå‚æ•°è§£æ tf.flags</p>
<a id="more"></a>
<p>é¦–å…ˆç»™å‡ºä¸€æ®µå¸¸è§çš„ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    tf.app.run()</span><br></pre></td></tr></table></figure>
<p>æ‰¾åˆ° Tensorflow ä¸­å…³äºä¸Šè¿° å‡½æ•°<code>run()</code> çš„æºç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(main=None, argv=None)</span>:</span></span><br><span class="line">  <span class="string">"""Runs the program with an optional 'main' function and 'argv' list."""</span></span><br><span class="line">  f = flags.FLAGS</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Extract the args from the optional `argv` list.</span></span><br><span class="line">  args = argv[<span class="number">1</span>:] <span class="keyword">if</span> argv <span class="keyword">else</span> <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Parse the known flags from that list, or from the command</span></span><br><span class="line">  <span class="comment"># line otherwise.</span></span><br><span class="line">  <span class="comment"># pylint: disable=protected-access</span></span><br><span class="line">  flags_passthrough = f._parse_flags(args=args)</span><br><span class="line">  <span class="comment"># pylint: enable=protected-access</span></span><br><span class="line"></span><br><span class="line">  main = main <span class="keyword">or</span> _sys.modules[<span class="string">'__main__'</span>].main</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Call the main function, passing through any arguments</span></span><br><span class="line">  <span class="comment"># to the final program.</span></span><br><span class="line">  _sys.exit(main(_sys.argv[:<span class="number">1</span>] + flags_passthrough))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">_allowed_symbols = [</span><br><span class="line">    <span class="string">'run'</span>,</span><br><span class="line">    <span class="comment"># Allowed submodule.</span></span><br><span class="line">    <span class="string">'flags'</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">remove_undocumented(__name__, _allowed_symbols)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°æºç ä¸­çš„è¿‡ç¨‹æ˜¯é¦–å…ˆåŠ è½½ <code>flags</code> çš„å‚æ•°é¡¹ï¼Œç„¶åæ‰§è¡Œ <code>main</code> å‡½æ•°ã€‚å‚æ•°æ˜¯ä½¿ç”¨<code>tf.app.flags.FLAGS</code> å®šä¹‰çš„ã€‚</p>
<h2 id="tf-app-flags-FLAGS"><a href="#tf-app-flags-FLAGS" class="headerlink" title="tf.app.flags.FLAGS"></a>tf.app.flags.FLAGS</h2><p>å…³äº <code>tf.app.flags.FLAGS</code> çš„ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># fila_name: temp.py</span></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">FLAGS = tf.app.flags.FLAGS</span><br><span class="line"></span><br><span class="line">tf.app.flags.DEFINE_string(<span class="string">'string'</span>, <span class="string">'train'</span>, <span class="string">'This is a string'</span>)</span><br><span class="line">tf.app.flags.DEFINE_float(<span class="string">'learning_rate'</span>, <span class="number">0.001</span>, <span class="string">'This is the rate in training'</span>)</span><br><span class="line">tf.app.flags.DEFINE_boolean(<span class="string">'flag'</span>, <span class="keyword">True</span>, <span class="string">'This is a flag'</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'string: '</span>, FLAGS.string)</span><br><span class="line">print(<span class="string">'learning_rate: '</span>, FLAGS.learning_rate)</span><br><span class="line">print(<span class="string">'flag: '</span>, FLAGS.flag)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(<span class="string">'string: '</span>, <span class="string">'train'</span>)</span><br><span class="line">(<span class="string">'learning_rate: '</span>, 0.001)</span><br><span class="line">(<span class="string">'flag: '</span>, True)</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/TwT520Ly/article/details/79759448" target="_blank" rel="external">tf.app.run()ä¸å‘½ä»¤è¡Œå‚æ•°è§£æ</a></li>
<li><a href="https://blog.csdn.net/spring_willow/article/details/80111993" target="_blank" rel="external">TensorFlowä¸­çš„å°çŸ¥è¯†ï¼štf.flags.DEFINE_xxx()</a></li>
<li><a href="https://www.jianshu.com/p/7ccfe8cf4aa1" target="_blank" rel="external">Tensorflow 1.0ï¼šè€å¸æœºç«‹ä¸‹çš„Flag</a></li>
<li><a href="https://blog.csdn.net/yanqianglifei/article/details/83020992" target="_blank" rel="external">Tensorflowæ•™ç¨‹(åå››) å‘½ä»¤è¡Œå‚æ•°tf.flagsçš„ä½¿ç”¨</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ä» Encoder åˆ° Decoder å®ç° Seq2Seq æ¨¡å‹]]></title>
      <url>http://shopee.ai/2018/10/15/tensorflow/tf-seq2seq/</url>
      <content type="html"><![CDATA[<p>ç®€å•çš„ Seq2Seq å®ç°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ TensorFlow æ¥å®ç°ä¸ªåŸºç¡€ç‰ˆçš„ Seq2Seqï¼Œä¸»è¦å¸®åŠ©ç†è§£ Seq2Seq ä¸­çš„åŸºç¡€æ¶æ„ã€‚</p>
<a id="more"></a>
<p><img src="/images/tensorflow/tf-nlp-seq2seq.jpg" width="800"></p>
<p>è‡ªå·±åšäº†ä¸€ä¸ªç¤ºæ„å›¾ï¼Œå¸Œæœ›å¸®åŠ©åˆå­¦è€…æ›´å¥½åœ°ç†è§£. </p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://coolshell.cn/articles/17583.html" target="_blank" rel="external">æŠ€æœ¯äººå‘˜çš„å‘å±•ä¹‹è·¯</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/27608348" target="_blank" rel="external">ä» Encoder åˆ° Decoder å®ç° Seq2Seq æ¨¡å‹</a></li>
<li><a href="https://github.com/NELSONZHAO/zhihu/tree/master/basic_seq2seq?1521452873816" target="_blank" rel="external">zhihu/basic_seq2seq/</a></li>
<li><a href="https://www.zhihu.com/question/41949741" target="_blank" rel="external">éš”å£å°ç‹ LSTM ç¥ç»ç½‘ç»œè¾“å…¥è¾“å‡ºç©¶ç«Ÿæ˜¯æ€æ ·çš„ï¼Ÿ</a></li>
<li><a href="https://colab.research.google.com" target="_blank" rel="external">colab.research.google</a></li>
<li><a href="https://zh.gluon.ai/" target="_blank" rel="external">zh.gluon.ai åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ </a></li>
<li><a href="http://discuss.gluon.ai/" target="_blank" rel="external">discuss.gluon.ai è®ºå›</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å¤šå±‚ LSTM é€šä¿—ç‰ˆ]]></title>
      <url>http://shopee.ai/2018/10/07/tensorflow/tf-simple-lstms/</url>
      <content type="html"><![CDATA[<p>å®˜æ–¹ç»™å‡ºçš„ä¾‹å­ï¼Œç”¨å¤šå±‚ LSTM æ¥å®ç° PTBModel è¯­è¨€æ¨¡å‹ï¼Œæ¯”å¦‚ï¼š <a href="https://blog.csdn.net/u014595019/article/details/52759104" target="_blank" rel="external">tensorflowç¬”è®°ï¼šå¤šå±‚LSTMä»£ç åˆ†æ</a> æ„Ÿè§‰è¿™äº›ä¾‹å­è¿˜æ˜¯å¤ªå¤æ‚äº†ï¼Œæ‰€ä»¥è¿™é‡Œå†™äº†ä¸ªæ¯”è¾ƒç®€å•çš„ç‰ˆæœ¬</p>
<a id="more"></a>
<p>å£°æ˜ï¼š æœ¬æ–‡éƒ¨åˆ†å†…å®¹è½¬è‡ª <a href="https://blog.csdn.net/Jerr__y/article/details/61195257" target="_blank" rel="external">æ°¸æ°¸å¤œ Tensorflowå­¦ä¹ ä¹‹è·¯</a></p>
<p>è‡ªå·±åšäº†ä¸€ä¸ªç¤ºæ„å›¾ï¼Œå¸Œæœ›å¸®åŠ©åˆå­¦è€…æ›´å¥½åœ°ç†è§£ å¤šå±‚RNN. </p>
<p><img src="/images/tensorflow/tf-4.4_1-simple-lstms.png" width="800"></p>
<p>é€šè¿‡æœ¬ä¾‹ï¼Œä½ å¯ä»¥äº†è§£åˆ°å•å±‚ LSTM çš„å®ç°ï¼Œå¤šå±‚ LSTM çš„å®ç°ã€‚è¾“å…¥è¾“å‡ºæ•°æ®çš„æ ¼å¼ã€‚ RNN çš„ dropout layer çš„å®ç°ã€‚</p>
<h2 id="MNIST-èƒŒæ™¯"><a href="#MNIST-èƒŒæ™¯" class="headerlink" title="MNIST èƒŒæ™¯"></a>MNIST èƒŒæ™¯</h2><p><strong>å‡†å¤‡æ•°æ®</strong></p>
<p>MNIST æ˜¯åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸä¸­çš„ä¸€ä¸ªç»å…¸é—®é¢˜ã€‚è¯¥é—®é¢˜è§£å†³çš„æ˜¯æŠŠ 28x28åƒç´  çš„ç°åº¦æ‰‹å†™æ•°å­—å›¾ç‰‡è¯†åˆ«ä¸ºç›¸åº”çš„æ•°å­—ï¼Œå…¶ä¸­æ•°å­—çš„èŒƒå›´ä» 0åˆ°9.</p>
<p><img src="/images/tensorflow/tf-4.4_5-mnist_digits.png" width="400"></p>
<blockquote>
<p>MNIST æ•°æ®é›† åŒ…å«äº† 60000 å¼ å›¾ç‰‡æ¥ä½œä¸ºè®­ç»ƒæ•°æ®ï¼Œ10000 å¼ å›¾ç‰‡ä½œä¸ºæµ‹è¯•æ•°æ®ã€‚æ¯å¼ å›¾ç‰‡éƒ½ä»£è¡¨äº† 0~9 ä¸­çš„ä¸€ä¸ªæ•°å­—ã€‚å›¾ç‰‡å¤§å°éƒ½ä¸º 28*28ï¼Œå¤„ç†åçš„æ¯å¼ å›¾ç‰‡æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 784 çš„ä¸€ç»´æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ å¯¹åº”å›¾ç‰‡åƒç´ çŸ©é˜µæä¾›ç»™ç¥ç»ç½‘ç»œçš„è¾“å…¥å±‚ï¼Œåƒç´ çŸ©é˜µä¸­å…ƒç´ çš„å–å€¼èŒƒå›´ [0, 1]ï¼Œ å®ƒä»£è¡¨äº†é¢œè‰²çš„æ·±æµ…ã€‚å…¶ä¸­ 0 è¡¨ç¤ºç™½è‰²èƒŒæ™¯(background)ï¼Œ1 è¡¨ç¤ºé»‘è‰²å‰æ™¯(foreground)ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> tensorflow.contrib <span class="keyword">import</span> rnn</span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½® GPU æŒ‰éœ€å¢é•¿</span></span><br><span class="line">config = tf.ConfigProto()</span><br><span class="line">config.gpu_options.allow_growth = <span class="keyword">True</span></span><br><span class="line">sess = tf.Session(config=config)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¦–å…ˆå¯¼å…¥æ•°æ®ï¼Œçœ‹ä¸€ä¸‹æ•°æ®çš„å½¢å¼</span></span><br><span class="line">mnist = input_data.read_data_sets(<span class="string">'MNIST_data'</span>, one_hot=<span class="keyword">True</span>)</span><br><span class="line">print(mnist.train.images.shape)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Extracting MNIST_data/train-images-idx3-ubyte.gz</span><br><span class="line">Extracting MNIST_data/train-labels-idx1-ubyte.gz</span><br><span class="line">Extracting MNIST_data/t10k-images-idx3-ubyte.gz</span><br><span class="line">Extracting MNIST_data/t10k-labels-idx1-ubyte.gz</span><br><span class="line">(55000, 784) # è®­ç»ƒé›†å›¾ç‰‡ - 55000 å¼  * 784ç»´ä¸€ç»´æ•°ç»„</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ input_data.read_data_sets åè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç›®å½• MNIST_dataï¼Œå¹¶å¼€å§‹ä¸‹è½½æ•°æ®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(anaconda3)</span><br><span class="line"><span class="comment"># ~/ghome/github/TensorFlowExamples [master âœ— (98591d9)] [16:15:03]</span></span><br><span class="line">âœ ll</span><br><span class="line">total 24</span><br><span class="line">drwxr-xr-x   6 blair  staff   192B Oct  9 16:14 MNIST_data</span><br><span class="line">-rw-r--r--   1 blair  staff   2.3K Oct  9 16:13 simple-lstms.ipynb</span><br><span class="line">(anaconda3)</span><br><span class="line"><span class="comment"># ~/ghome/github/TensorFlowExamples [master âœ— (98591d9)] [16:15:06]</span></span><br><span class="line">âœ ll MNIST_data</span><br><span class="line">total 22672</span><br><span class="line">-rw-r--r--  1 blair  staff   1.6M Oct  9 16:14 t10k-images-idx3-ubyte.gz</span><br><span class="line">-rw-r--r--  1 blair  staff   4.4K Oct  9 16:14 t10k-labels-idx1-ubyte.gz</span><br><span class="line">-rw-r--r--  1 blair  staff   9.5M Oct  9 16:14 train-images-idx3-ubyte.gz</span><br><span class="line">-rw-r--r--  1 blair  staff    28K Oct  9 16:14 train-labels-idx1-ubyte.gz</span><br><span class="line">(anaconda3)</span><br><span class="line"><span class="comment"># ~/ghome/github/TensorFlowExamples [master âœ— (98591d9)] [16:15:12]</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">æ–‡ä»¶</th>
<th style="text-align:center">å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">train-images-idx3-ubyte.gz</td>
<td style="text-align:center">è®­ç»ƒé›†å›¾ç‰‡ - 55000 å¼  è®­ç»ƒå›¾ç‰‡, 5000 å¼  éªŒè¯å›¾ç‰‡</td>
</tr>
<tr>
<td style="text-align:center">train-labels-idx1-ubyte.gz</td>
<td style="text-align:center">è®­ç»ƒé›†å›¾ç‰‡å¯¹åº”çš„æ•°å­—æ ‡ç­¾</td>
</tr>
<tr>
<td style="text-align:center">t10k-images-idx3-ubyte.gz</td>
<td style="text-align:center">æµ‹è¯•é›†å›¾ç‰‡ - 10000 å¼  å›¾ç‰‡</td>
</tr>
<tr>
<td style="text-align:center">t10k-labels-idx1-ubyte.gz</td>
<td style="text-align:center">æµ‹è¯•é›†å›¾ç‰‡å¯¹åº”çš„æ•°å­—æ ‡ç­¾</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'training data shape '</span>, mnist.train.images.shape)</span><br><span class="line">print(<span class="string">'training label shape '</span>, mnist.train.labels.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># training data shape  (55000, 784)</span></span><br><span class="line"><span class="comment"># training label shape  (55000, 10)</span></span><br></pre></td></tr></table></figure>
<h2 id="1-é¦–å…ˆè®¾ç½®å¥½æ¨¡å‹ç”¨åˆ°çš„å„ä¸ªè¶…å‚æ•°"><a href="#1-é¦–å…ˆè®¾ç½®å¥½æ¨¡å‹ç”¨åˆ°çš„å„ä¸ªè¶…å‚æ•°" class="headerlink" title="1. é¦–å…ˆè®¾ç½®å¥½æ¨¡å‹ç”¨åˆ°çš„å„ä¸ªè¶…å‚æ•°"></a>1. é¦–å…ˆè®¾ç½®å¥½æ¨¡å‹ç”¨åˆ°çš„å„ä¸ªè¶…å‚æ•°</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lr = <span class="number">1e-3</span> <span class="comment"># 0.001</span></span><br><span class="line"><span class="comment"># åœ¨è®­ç»ƒå’Œæµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³ç”¨ä¸åŒçš„ batch_size.æ‰€ä»¥é‡‡ç”¨å ä½ç¬¦çš„æ–¹å¼</span></span><br><span class="line">batch_size = tf.placeholder(tf.int32, [])  <span class="comment"># æ³¨æ„ç±»å‹å¿…é¡»ä¸º tf.int32</span></span><br><span class="line"></span><br><span class="line">keep_prob = tf.placeholder(tf.float32, [])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯ä¸ªæ—¶åˆ»çš„è¾“å…¥ç‰¹å¾æ˜¯28ç»´çš„ï¼Œå°±æ˜¯æ¯ä¸ªæ—¶åˆ»è¾“å…¥ä¸€è¡Œï¼Œä¸€è¡Œæœ‰ 28 ä¸ªåƒç´ </span></span><br><span class="line">input_size = <span class="number">28</span></span><br><span class="line"><span class="comment"># æ—¶åºæŒç»­é•¿åº¦ä¸º28ï¼Œå³æ¯åšä¸€æ¬¡é¢„æµ‹ï¼Œéœ€è¦å…ˆè¾“å…¥28è¡Œ</span></span><br><span class="line">timestep_size = <span class="number">28</span></span><br><span class="line"><span class="comment"># æ¯ä¸ªéšå«å±‚çš„èŠ‚ç‚¹æ•°</span></span><br><span class="line">hidden_size = <span class="number">256</span></span><br><span class="line"><span class="comment"># LSTM layer çš„å±‚æ•°</span></span><br><span class="line">layer_num = <span class="number">2</span></span><br><span class="line"><span class="comment"># æœ€åè¾“å‡ºåˆ†ç±»ç±»åˆ«æ•°é‡ï¼Œå¦‚æœæ˜¯å›å½’é¢„æµ‹çš„è¯åº”è¯¥æ˜¯ 1</span></span><br><span class="line">class_num = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">_X = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">784</span>])</span><br><span class="line">y = tf.placeholder(tf.float32, [<span class="keyword">None</span>, class_num])</span><br></pre></td></tr></table></figure>
<h2 id="2-å¼€å§‹æ­å»º-LSTM-æ¨¡å‹ï¼Œå…¶å®æ™®é€š-RNNs-æ¨¡å‹ä¹Ÿä¸€æ ·"><a href="#2-å¼€å§‹æ­å»º-LSTM-æ¨¡å‹ï¼Œå…¶å®æ™®é€š-RNNs-æ¨¡å‹ä¹Ÿä¸€æ ·" class="headerlink" title="2. å¼€å§‹æ­å»º LSTM æ¨¡å‹ï¼Œå…¶å®æ™®é€š RNNs æ¨¡å‹ä¹Ÿä¸€æ ·"></a>2. å¼€å§‹æ­å»º LSTM æ¨¡å‹ï¼Œå…¶å®æ™®é€š RNNs æ¨¡å‹ä¹Ÿä¸€æ ·</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŠŠ784ä¸ªç‚¹çš„å­—ç¬¦ä¿¡æ¯è¿˜åŸæˆ 28 * 28 çš„å›¾ç‰‡</span></span><br><span class="line"><span class="comment"># ä¸‹é¢å‡ ä¸ªæ­¥éª¤æ˜¯å®ç° RNN / LSTM çš„å…³é”®</span></span><br><span class="line"><span class="comment">###################################################################</span></span><br><span class="line"><span class="comment"># tf.reshape(tensor, shape, name=None)  å‡½æ•°çš„ä½œç”¨æ˜¯å°† tensor å˜æ¢ä¸ºå‚æ•°shapeçš„å½¢å¼</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># **æ­¥éª¤1ï¼šRNN çš„è¾“å…¥shape = (batch_size, timestep_size, input_size) </span></span><br><span class="line">X = tf.reshape(_X, [<span class="number">-1</span>, <span class="number">28</span>, <span class="number">28</span>]) </span><br><span class="line"></span><br><span class="line"><span class="comment"># **æ­¥éª¤2ï¼šå®šä¹‰ä¸€å±‚ LSTM_cellï¼Œåªéœ€è¦è¯´æ˜ hidden_size, å®ƒä¼šè‡ªåŠ¨åŒ¹é…è¾“å…¥çš„ X çš„ç»´åº¦</span></span><br><span class="line">lstm_cell = rnn.BasicLSTMCell(num_units=hidden_size, forget_bias=<span class="number">1.0</span>, state_is_tuple=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># **æ­¥éª¤3ï¼šæ·»åŠ  dropout layer, ä¸€èˆ¬åªè®¾ç½® output_keep_prob</span></span><br><span class="line">lstm_cell = rnn.DropoutWrapper(cell=lstm_cell, input_keep_prob=<span class="number">1.0</span>, output_keep_prob=keep_prob)</span><br><span class="line"></span><br><span class="line"><span class="comment"># **æ­¥éª¤4ï¼šè°ƒç”¨ MultiRNNCell æ¥å®ç°å¤šå±‚ LSTM</span></span><br><span class="line">mlstm_cell = rnn.MultiRNNCell([lstm_cell] * layer_num, state_is_tuple=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># **æ­¥éª¤5ï¼šç”¨å…¨é›¶æ¥åˆå§‹åŒ–state</span></span><br><span class="line">init_state = mlstm_cell.zero_state(batch_size, dtype=tf.float32)</span><br><span class="line"></span><br><span class="line"><span class="comment"># **æ­¥éª¤6ï¼šæ–¹æ³•ä¸€ï¼Œè°ƒç”¨ dynamic_rnn() æ¥è®©æˆ‘ä»¬æ„å»ºå¥½çš„ç½‘ç»œè¿è¡Œèµ·æ¥</span></span><br><span class="line"><span class="comment"># ** å½“ time_major==False æ—¶ï¼Œ outputs.shape = [batch_size, timestep_size, hidden_size] </span></span><br><span class="line"><span class="comment"># ** æ‰€ä»¥ï¼Œå¯ä»¥å– h_state = outputs[:, -1, :] ä½œä¸ºæœ€åè¾“å‡º</span></span><br><span class="line"><span class="comment"># ** state.shape = [layer_num, 2, batch_size, hidden_size], </span></span><br><span class="line"><span class="comment"># ** æˆ–è€…ï¼Œå¯ä»¥å– h_state = state[-1][1] ä½œä¸ºæœ€åè¾“å‡º</span></span><br><span class="line"><span class="comment"># ** æœ€åè¾“å‡ºç»´åº¦æ˜¯ [batch_size, hidden_size]</span></span><br><span class="line"><span class="comment"># outputs, state = tf.nn.dynamic_rnn(mlstm_cell, inputs=X, initial_state=init_state, time_major=False)</span></span><br><span class="line"><span class="comment"># h_state = outputs[:, -1, :]  # æˆ–è€… h_state = state[-1][1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># *************** ä¸ºäº†æ›´å¥½çš„ç†è§£ LSTM å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬æŠŠä¸Šé¢ æ­¥éª¤6 ä¸­çš„å‡½æ•°è‡ªå·±æ¥å®ç° ***************</span></span><br><span class="line"><span class="comment"># é€šè¿‡æŸ¥çœ‹æ–‡æ¡£ä½ ä¼šå‘ç°ï¼Œ RNNCell éƒ½æä¾›äº†ä¸€ä¸ª __call__()å‡½æ•°ï¼ˆè§æœ€åé™„ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å±•å¼€å®ç°LSTMæŒ‰æ—¶é—´æ­¥è¿­ä»£ã€‚</span></span><br><span class="line"><span class="comment"># **æ­¥éª¤6ï¼šæ–¹æ³•äºŒï¼ŒæŒ‰æ—¶é—´æ­¥å±•å¼€è®¡ç®— (æš‚æ—¶æ²¡æœ‰è¿è¡Œé€šè¿‡)</span></span><br><span class="line">outputs = list()</span><br><span class="line">state = init_state</span><br><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">'RNN'</span>):</span><br><span class="line">    <span class="keyword">for</span> timestep <span class="keyword">in</span> range(timestep_size):</span><br><span class="line">        <span class="keyword">if</span> timestep &gt; <span class="number">0</span>:</span><br><span class="line">            tf.get_variable_scope().reuse_variables()</span><br><span class="line">        <span class="comment"># è¿™é‡Œçš„stateä¿å­˜äº†æ¯ä¸€å±‚ LSTM çš„çŠ¶æ€</span></span><br><span class="line">        (cell_output, state) = mlstm_cell(X[:, timestep, :], state)</span><br><span class="line">        outputs.append(cell_output)</span><br><span class="line">h_state = outputs[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#  X[:, timestep, :] å°±æ˜¯å–ç¬¬timestepä¸ªæ—¶åˆ»çš„ç‰¹å¾ x_t è¾“å…¥ mlstm_cell ä¸­è®¡ç®—ï¼Œå› ä¸ºæ¯æ¬¡ç”¨ batch_size ä¸ªæ ·æœ¬æ¥è®­ç»ƒï¼Œæ‰€ä»¥ç›¸å½“äºï¼ˆå¹¶è¡Œï¼‰è¾“å…¥ batch_size ä¸ª x_t åˆ° mlstm_cell ä¸­è®¡ç®—ã€‚</span></span><br></pre></td></tr></table></figure>
<h2 id="3-è®¾ç½®-loss-function-å’Œ-ä¼˜åŒ–å™¨ï¼Œå±•å¼€è®­ç»ƒå¹¶å®Œæˆæµ‹è¯•"><a href="#3-è®¾ç½®-loss-function-å’Œ-ä¼˜åŒ–å™¨ï¼Œå±•å¼€è®­ç»ƒå¹¶å®Œæˆæµ‹è¯•" class="headerlink" title="3. è®¾ç½® loss function å’Œ ä¼˜åŒ–å™¨ï¼Œå±•å¼€è®­ç»ƒå¹¶å®Œæˆæµ‹è¯•"></a>3. è®¾ç½® loss function å’Œ ä¼˜åŒ–å™¨ï¼Œå±•å¼€è®­ç»ƒå¹¶å®Œæˆæµ‹è¯•</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸Šé¢ LSTM éƒ¨åˆ†çš„è¾“å‡ºä¼šæ˜¯ä¸€ä¸ª [hidden_size] çš„ tensorï¼Œæˆ‘ä»¬è¦åˆ†ç±»çš„è¯ï¼Œè¿˜éœ€è¦æ¥ä¸€ä¸ª softmax å±‚</span></span><br><span class="line"><span class="comment"># é¦–å…ˆå®šä¹‰ softmax çš„è¿æ¥æƒé‡çŸ©é˜µå’Œåç½®</span></span><br><span class="line"><span class="comment"># out_W = tf.placeholder(tf.float32, [hidden_size, class_num], name='out_Weights')</span></span><br><span class="line"><span class="comment"># out_bias = tf.placeholder(tf.float32, [class_num], name='out_bias')</span></span><br><span class="line"><span class="comment"># å¼€å§‹è®­ç»ƒå’Œæµ‹è¯•</span></span><br><span class="line">W = tf.Variable(tf.truncated_normal([hidden_size, class_num], stddev=<span class="number">0.1</span>), dtype=tf.float32)</span><br><span class="line">bias = tf.Variable(tf.constant(<span class="number">0.1</span>,shape=[class_num]), dtype=tf.float32)</span><br><span class="line">y_pre = tf.nn.softmax(tf.matmul(h_state, W) + bias)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸå¤±å’Œè¯„ä¼°å‡½æ•°</span></span><br><span class="line">cross_entropy = -tf.reduce_mean(y * tf.log(y_pre))</span><br><span class="line">train_op = tf.train.AdamOptimizer(lr).minimize(cross_entropy)</span><br><span class="line"></span><br><span class="line">correct_prediction = tf.equal(tf.argmax(y_pre,<span class="number">1</span>), tf.argmax(y,<span class="number">1</span>))</span><br><span class="line">accuracy = tf.reduce_mean(tf.cast(correct_prediction, <span class="string">"float"</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2000</span>):</span><br><span class="line">    _batch_size = <span class="number">128</span></span><br><span class="line">    batch = mnist.train.next_batch(_batch_size)</span><br><span class="line">    sess.run(train_op, feed_dict=&#123;_X: batch[<span class="number">0</span>], y: batch[<span class="number">1</span>], keep_prob: <span class="number">0.5</span>, batch_size: _batch_size&#125;)</span><br><span class="line">    <span class="keyword">if</span> (i+<span class="number">1</span>)%<span class="number">200</span> == <span class="number">0</span>:</span><br><span class="line">        train_accuracy = sess.run(accuracy, feed_dict=&#123;</span><br><span class="line">            _X:batch[<span class="number">0</span>], y: batch[<span class="number">1</span>], keep_prob: <span class="number">1.0</span>, batch_size: _batch_size&#125;)</span><br><span class="line">        <span class="comment"># å·²ç»è¿­ä»£å®Œæˆçš„ epoch æ•°: mnist.train.epochs_completed</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Iter%d, step %d, training accuracy %g"</span> % ( mnist.train.epochs_completed, (i+<span class="number">1</span>), train_accuracy)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># è®¡ç®—æµ‹è¯•æ•°æ®çš„å‡†ç¡®ç‡</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"test accuracy %g"</span>% sess.run(accuracy, feed_dict=&#123;</span><br><span class="line">    _X: mnist.test.images, y: mnist.test.labels, keep_prob: <span class="number">1.0</span>, batch_size:mnist.test.images.shape[<span class="number">0</span>]&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Iter0, step 200, training accuracy 0.851562</span><br><span class="line">Iter0, step 400, training accuracy 0.960938</span><br><span class="line">Iter1, step 600, training accuracy 0.984375</span><br><span class="line">Iter1, step 800, training accuracy 0.960938</span><br><span class="line">Iter2, step 1000, training accuracy 0.984375</span><br><span class="line">Iter2, step 1200, training accuracy 0.9375</span><br><span class="line">Iter3, step 1400, training accuracy 0.96875</span><br><span class="line">Iter3, step 1600, training accuracy 0.984375</span><br><span class="line">Iter4, step 1800, training accuracy 0.992188</span><br><span class="line">Iter4, step 2000, training accuracy 0.984375</span><br><span class="line">test accuracy 0.9858</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¸€å…±åªè¿­ä»£ä¸åˆ° 5 ä¸ª epochï¼Œåœ¨æµ‹è¯•é›†ä¸Šå°±å·²ç»è¾¾åˆ°äº† 0.98 çš„å‡†ç¡®ç‡ï¼Œå¯ä»¥çœ‹å‡ºæ¥ LSTM åœ¨åšè¿™ä¸ªå­—ç¬¦åˆ†ç±»çš„ä»»åŠ¡ä¸Šè¿˜æ˜¯æ¯”è¾ƒæœ‰æ•ˆçš„ï¼Œè€Œä¸”æˆ‘ä»¬æœ€åä¸€æ¬¡æ€§å¯¹ 10000 å¼ æµ‹è¯•å›¾ç‰‡è¿›è¡Œé¢„æµ‹ï¼Œæ‰å äº† 725 MiB çš„æ˜¾å­˜ã€‚è€Œæˆ‘ä»¬åœ¨ä¹‹å‰çš„ä¸¤å±‚ CNNs ç½‘ç»œä¸­ï¼Œé¢„æµ‹ 10000 å¼ å›¾ç‰‡ä¸€å…±ç”¨äº† 8721 MiB çš„æ˜¾å­˜ï¼Œå·®äº†æ•´æ•´ 12 å€å‘€ï¼ï¼ è¿™ä¸»è¦æ˜¯å› ä¸º RNN/LSTM ç½‘ç»œä¸­ï¼Œæ¯ä¸ªæ—¶é—´æ­¥æ‰€ç”¨çš„æƒå€¼çŸ©é˜µéƒ½æ˜¯å…±äº«çš„ï¼Œå¯ä»¥é€šè¿‡å‰é¢ä»‹ç»çš„ LSTM çš„ç½‘ç»œç»“æ„åˆ†æä¸€ä¸‹ï¼Œæ•´ä¸ªç½‘ç»œçš„å‚æ•°éå¸¸å°‘ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/jerr__y/article/category/6747409" target="_blank" rel="external">å¤§å­¦ä¹‹é“ï¼Œåœ¨æ˜æ˜å¾· æ°¸æ°¸å¤œ Tensorflowå­¦ä¹ ä¹‹è·¯</a></li>
<li><a href="https://blog.csdn.net/u014595019/article/details/52759104" target="_blank" rel="external">tensorflowç¬”è®°ï¼šå¤šå±‚LSTMä»£ç åˆ†æ </a></li>
<li><a href="http://wiki.jikexueyuan.com/project/tensorflow-zh/tutorials/mnist_download.html" target="_blank" rel="external">æå®¢å­¦é™¢ MNIST æ•°æ®ä¸‹è½½</a></li>
<li><a href="https://www.zhihu.com/question/41949741" target="_blank" rel="external">éš”å£å°ç‹ LSTM ç¥ç»ç½‘ç»œè¾“å…¥è¾“å‡ºç©¶ç«Ÿæ˜¯æ€æ ·çš„ï¼Ÿ</a></li>
<li><a href="https://colab.research.google.com" target="_blank" rel="external">colab.research.google</a></li>
<li><a href="https://zh.gluon.ai/" target="_blank" rel="external">zh.gluon.ai åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ </a></li>
<li><a href="http://discuss.gluon.ai/" target="_blank" rel="external">discuss.gluon.ai è®ºå›</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">roll_jjï¼š åšä¸»ä½ å¥½ï¼Œ outputs, state = tf.nn.dynamic_rnn(mlstm_cell, inputs=X, initial_state=init_state, time_major=False) h_state = outputs[:, -1, :] è¿™ä¸¤å¥è¯é‡Œï¼Œoutputsçš„ä¸‰ä¸ªç»´åº¦æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸ºä»€ä¹ˆæŠŠä¸­é—´é‚£ä¸ªç»´åº¦å»æ‰å°±æ˜¯æˆ‘ä»¬è¦çš„è¾“å‡ºç»“æœäº†ï¼Ÿ(1å¹´å‰#6æ¥¼)æ”¶èµ·å›å¤ä¸¾æŠ¥å›å¤</span><br><span class="line">Jerr__y</span><br><span class="line">CQU_HYXå›å¤ roll_jjï¼š æ˜¯çš„(1å¹´å‰)</span><br><span class="line">roll_jj</span><br><span class="line">roll_jjå›å¤ CQU_HYXï¼š è°¢è°¢åšä¸»è§£ç­”ã€‚æˆ‘çœ‹å®˜æ–¹çš„é‚£ä¸ªPTBä¾‹å­é‡Œï¼Œæ²¡æœ‰å–[-1]çš„è¿™ä¸ªæ“ä½œï¼Œè€Œæ˜¯ç”¨äº†output = tf.reshape(tf.concat(1, outputs), [-1, size])æ“ä½œï¼Œè¿™æ˜¯å› ä¸ºé¢„æµ‹ç›®æ ‡çš„ä¸åŒä¹ˆï¼Ÿ(1å¹´å‰)</span><br><span class="line">Jerr__y</span><br><span class="line">CQU_HYXå›å¤ roll_jjï¼š åŸæ–‡æ³¨é‡Šä¸Šé¢æœ‰è¯´äº†ï¼Œoutputs.shape = [batch_size, timestep_size, hidden_size]ã€‚ å› ä¸ºæ˜¯åˆ†ç±»é—®é¢˜ï¼Œæ‰€æœ‰åªéœ€è¦åœ¨çœ‹å®Œæœ€åä¸€è¡Œåƒç´ åæ‰è¾“å‡ºåˆ†ç±»ç»“æœã€‚-1 è¡¨ç¤ºå–æœ€åä¸€ä¸ª timestep çš„ç»“æœï¼Œ è€Œä¸æ˜¯è¯´æŠŠä¸­é—´ç»´åº¦å»æ‰</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[(è½¬) ç†è§£ LSTM ç½‘ç»œ ï¼ˆUnderstanding LSTM Networks by colahï¼‰]]></title>
      <url>http://shopee.ai/2018/10/06/tensorflow/tf-Understanding-LSTMs/</url>
      <content type="html"><![CDATA[<p>åŸæ–‡é“¾æ¥1ï¼š <a href="http://colah.github.io/posts/2015-08-Understanding-LSTMs/" target="_blank" rel="external">Understanding LSTM Networks</a><br>åŸæ–‡é“¾æ¥2ï¼š <a href="https://blog.csdn.net/jerr__y/article/details/58598296" target="_blank" rel="external">ç†è§£ LSTM ç½‘ç»œ</a> @ç¿»è¯‘ï¼šhuangyongye</p>
<a id="more"></a> 
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/jerr__y/article/category/6747409" target="_blank" rel="external">å¤§å­¦ä¹‹é“ï¼Œåœ¨æ˜æ˜å¾· æ°¸æ°¸å¤œ Tensorflowå­¦ä¹ ä¹‹è·¯</a></li>
<li><a href="http://colah.github.io/posts/2015-08-Understanding-LSTMs/" target="_blank" rel="external">Understanding LSTM Networks</a></li>
<li><a href="https://blog.csdn.net/jerr__y/article/details/58598296" target="_blank" rel="external">å¤§å­¦ä¹‹é“ï¼Œåœ¨æ˜æ˜å¾· æ°¸æ°¸å¤œ ç†è§£ LSTM ç½‘ç»œ ï¼ˆUnderstanding LSTM Networks by colahï¼‰</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TensorFlow å‘½åæ–¹æ³• name_scope / variable_scope]]></title>
      <url>http://shopee.ai/2018/10/05/tensorflow/tf-4.3-name-variable_scope/</url>
      <content type="html"><![CDATA[<p>æœ¬ä¾‹ä¸»è¦ä»‹ç» name_scope å’Œ variable_scope çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼ï¼Œå­¦ä¹ å¹¶ç†è§£æœ¬ä¾‹ä¹‹åï¼Œä½ å°±èƒ½å¤ŸçœŸæ­£è¯»æ‡‚ TensorFlow çš„å¾ˆå¤šä»£ç å¹¶èƒ½å¤Ÿæ¸…æ™°åœ°ç†è§£æ¨¡å‹ç»“æ„äº†.</p>
<a id="more"></a> 
<p>scope èƒ½è®©ä½ å‘½åå˜é‡çš„æ—¶å€™è½»æ¾å¾ˆå¤š. åŒæ—¶ä¹Ÿä¼šåœ¨ reusing variable ä»£ç ä¸­å¸¸å¸¸è§åˆ°. æ‰€ä»¥ä»Šå¤©æˆ‘ä»¬ä¼šæ¥è®¨è®ºä¸‹ tensorflow å½“ä¸­çš„ä¸¤ç§å®šä¹‰ scope çš„æ–¹å¼. æœ€åå¹¶é™„åŠ ä¸€ä¸ª RNN è¿ç”¨ reuse variable çš„ä¾‹å­.</p>
<p>åœ¨ TensorFlow ä¸­ï¼Œç»å¸¸çœ‹åˆ° name_scope å’Œ variable_scope ä¸¤ä¸ªä¸œä¸œï¼Œè¿™åˆ°åº•æ˜¯ä»€ä¹ˆé¬¼ï¼Œåˆ°åº•ç³»åšå’©å™¶!!! åœ¨åš LSTM çš„æ—¶å€™é‡åˆ°äº†ä¸‹é¢çš„é”™è¯¯ï¼š <code>ValueError: Variable rnn/basic_lstm_cell/weights already exists, disallowed.</code></p>
<h2 id="1-å…ˆè¯´ç»“è®º"><a href="#1-å…ˆè¯´ç»“è®º" class="headerlink" title="1. å…ˆè¯´ç»“è®º"></a>1. å…ˆè¯´ç»“è®º</h2><p>è¦ç†è§£  name_scope å’Œ variable_scopeï¼Œ é¦–å…ˆå¿…é¡»æ˜ç¡®äºŒè€…çš„ä½¿ç”¨ç›®çš„ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå’Œæ™®é€šæ¨¡å‹ç›¸æ¯”ï¼Œç¥ç»ç½‘ç»œçš„èŠ‚ç‚¹éå¸¸å¤šï¼ŒèŠ‚ç‚¹èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥ï¼ˆæƒå€¼çŸ©é˜µï¼‰ä¹Ÿéå¸¸å¤šã€‚æ‰€ä»¥æˆ‘ä»¬è´¹å°½å¿ƒæ€ï¼Œå‡†å¤‡æ­å»ºä¸€ä¸ªç½‘ç»œï¼Œç„¶åæœ‰äº†å›¾1çš„ç½‘ç»œï¼ŒWTF! å› ä¸ºå˜é‡å¤ªå¤šï¼Œæˆ‘ä»¬æ„é€ å®Œç½‘ç»œä¹‹åï¼Œä¸€çœ‹ï¼Œä»€ä¹ˆé¬¼ï¼Œè¿™ä¸ªå˜é‡åˆ°åº•æ˜¯å“ªå±‚çš„ï¼Ÿï¼Ÿ</p>
<p><img src="/images/tensorflow/tf-4.3_1.jpg" width="750"></p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº† <strong>name_scope</strong> å’Œ <strong>variable_scope</strong>ï¼Œ äºŒè€…åˆåˆ†åˆ«æ‰¿æ‹…ç€ä¸åŒçš„è´£ä»»ï¼š</p>
<ul>
<li>name_scope: ä¸ºäº†æ›´å¥½åœ°ç®¡ç†å˜é‡çš„å‘½åç©ºé—´è€Œæå‡ºçš„ã€‚æ¯”å¦‚åœ¨ tensorboard ä¸­ï¼Œå› ä¸ºå¼•å…¥äº† name_scopeï¼Œ æˆ‘ä»¬çš„ Graph çœ‹èµ·æ¥æ‰äº•ç„¶æœ‰åºã€‚</li>
<li>variable_scope: å¤§å¤§å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè·Ÿ <code>tf.get_variable()</code> é…åˆä½¿ç”¨ï¼Œå®ç°å˜é‡å…±äº«çš„åŠŸèƒ½ã€‚</li>
</ul>
<p>ä¸‹é¢é€šè¿‡ä¸¤ç»„å®éªŒæ¥æ¢ç´¢ TensorFlow çš„å‘½åæœºåˆ¶ã€‚</p>
<h2 id="2-name-scope-variable-scope-å®éªŒ-ğŸŒ°"><a href="#2-name-scope-variable-scope-å®éªŒ-ğŸŒ°" class="headerlink" title="2. name_scope/variable_scope å®éªŒ ğŸŒ°"></a>2. name_scope/variable_scope å®éªŒ ğŸŒ°</h2><p><strong>å®éªŒ 1 ä¸‰ç§æ–¹å¼åˆ›å»ºå˜é‡ï¼š</strong></p>
<p>ä¸‰ç§æ–¹å¼åˆ›å»ºå˜é‡ï¼š <strong>tf.placeholder</strong>, <strong>tf.Variable</strong>, <strong>tf.get_variable</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="comment"># è®¾ç½®GPUæŒ‰éœ€å¢é•¿</span></span><br><span class="line">config = tf.ConfigProto()</span><br><span class="line">config.gpu_options.allow_growth = <span class="keyword">True</span></span><br><span class="line">sess = tf.Session(config=config)</span><br></pre></td></tr></table></figure>
<h3 id="2-1-placeholder"><a href="#2-1-placeholder" class="headerlink" title="2.1 placeholder"></a>2.1 placeholder</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.placeholder </span></span><br><span class="line">v1 = tf.placeholder(tf.float32, shape=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">print(v1.name)</span><br><span class="line">v1 = tf.placeholder(tf.float32, shape=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], name=<span class="string">'ph'</span>)</span><br><span class="line">print(v1.name)</span><br><span class="line">v1 = tf.placeholder(tf.float32, shape=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], name=<span class="string">'ph'</span>)</span><br><span class="line">print(v1.name)</span><br><span class="line">print(type(v1))</span><br><span class="line">print(v1)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Placeholder:0</span><br><span class="line">ph:0</span><br><span class="line">ph_1:0</span><br><span class="line">&lt;class &apos;tensorflow.python.framework.ops.Tensor&apos;&gt;</span><br><span class="line">Tensor(&quot;ph_1:0&quot;, shape=(2, 3, 4), dtype=float32)</span><br></pre></td></tr></table></figure>
<h3 id="2-2-tf-Variable"><a href="#2-2-tf-Variable" class="headerlink" title="2.2 tf.Variable()"></a>2.2 tf.Variable()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 2. tf.Variable()</span></span><br><span class="line">v2 = tf.Variable([<span class="number">1</span>,<span class="number">2</span>], dtype=tf.float32)</span><br><span class="line">print(v2.name)</span><br><span class="line">v2 = tf.Variable([<span class="number">1</span>,<span class="number">2</span>], dtype=tf.float32, name=<span class="string">'V'</span>)</span><br><span class="line">print(v2.name)</span><br><span class="line">v2 = tf.Variable([<span class="number">1</span>,<span class="number">2</span>], dtype=tf.float32, name=<span class="string">'V'</span>)</span><br><span class="line">print(v2.name)</span><br><span class="line">print(type(v2))</span><br><span class="line">print(v2)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Variable:0</span><br><span class="line">V:0</span><br><span class="line">V_1:0</span><br><span class="line">&lt;class &apos;tensorflow.python.ops.variables.Variable&apos;&gt;</span><br><span class="line">Tensor(&quot;V_1/read:0&quot;, shape=(2,), dtype=float32)</span><br></pre></td></tr></table></figure>
<h3 id="2-3-tf-get-variable"><a href="#2-3-tf-get-variable" class="headerlink" title="2.3 tf.get_variable()"></a>2.3 tf.get_variable()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 3.tf.get_variable() åˆ›å»ºå˜é‡çš„æ—¶å€™å¿…é¡»è¦æä¾› name</span></span><br><span class="line">v3 = tf.get_variable(name=<span class="string">'gv'</span>, shape=[])  </span><br><span class="line">print(v3.name)</span><br><span class="line">v4 = tf.get_variable(name=<span class="string">'gv'</span>, shape=[<span class="number">2</span>])</span><br><span class="line">print(v4.name)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gv:0</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">ValueError                                Traceback (most recent call last)</span><br><span class="line"></span><br><span class="line">&lt;ipython-input-7-29efaac2d76c&gt; in &lt;module&gt;()</span><br><span class="line">      2 v3 = tf.get_variable(name=&apos;gv&apos;, shape=[])</span><br><span class="line">      3 print(v3.name)</span><br><span class="line">----&gt; 4 v4 = tf.get_variable(name=&apos;gv&apos;, shape=[2])</span><br><span class="line">      5 print(v4.name)</span><br><span class="line">æ­¤å¤„è¿˜æœ‰ä¸€å †é”™è¯¯ä¿¡æ¯ã€‚ã€‚ã€‚</span><br><span class="line">ValueError: Variable gv already exists, disallowed. Did you mean to set reuse=True in VarScope? Originally defined at:</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(type(v3))</span><br><span class="line">print(v3)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;class &apos;tensorflow.python.ops.variables.Variable&apos;&gt;</span><br><span class="line">Tensor(&quot;gv/read:0&quot;, shape=(), dtype=float32)</span><br></pre></td></tr></table></figure>
<p>è¿˜è®°å¾—æœ‰è¿™ä¹ˆä¸ªå‡½æ•°å—ï¼Ÿ <strong>tf.trainable_variables(</strong>), å®ƒèƒ½å¤Ÿå°†æˆ‘ä»¬å®šä¹‰çš„æ‰€æœ‰çš„ trainable=True çš„æ‰€æœ‰å˜é‡ä»¥ä¸€ä¸ª list çš„å½¢å¼è¿”å›ã€‚ very good, ç°åœ¨è¦æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">vs = tf.trainable_variables()</span><br><span class="line">print(len(vs))</span><br><span class="line"><span class="keyword">for</span> v <span class="keyword">in</span> vs:</span><br><span class="line">    print(v)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">4</span><br><span class="line">Tensor(&quot;Variable/read:0&quot;, shape=(2,), dtype=float32)</span><br><span class="line">Tensor(&quot;V/read:0&quot;, shape=(2,), dtype=float32)</span><br><span class="line">Tensor(&quot;V_1/read:0&quot;, shape=(2,), dtype=float32)</span><br><span class="line">Tensor(&quot;gv/read:0&quot;, shape=(), dtype=float32)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>å®éªŒ1 ç»“è®º:</strong></p>
<p>ä»ä¸Šé¢çš„å®éªŒç»“æœæ¥çœ‹ï¼Œè¿™ä¸‰ç§æ–¹å¼æ‰€å®šä¹‰çš„å˜é‡å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚</p>
<p>åªæœ‰ <code>tf.get_variable()</code> åˆ›å»ºçš„å˜é‡ä¹‹é—´ä¼šå‘ç”Ÿ <strong>å‘½åå†²çª</strong>ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¸‰ç§åˆ›å»ºå˜é‡æ–¹å¼çš„ç”¨é€”åˆ†å·¥éå¸¸æ˜ç¡®ã€‚</p>
<ul>
<li>tf.placeholder() å ä½ç¬¦ã€‚ trainable==False</li>
<li>tf.Variable() ä¸€èˆ¬å˜é‡ç”¨è¿™ç§æ–¹å¼å®šä¹‰ã€‚ å¯ä»¥é€‰æ‹© trainable ç±»å‹</li>
<li>tf.get_variable() ä¸€èˆ¬éƒ½æ˜¯å’Œ tf.variable_scope() é…åˆä½¿ç”¨ï¼Œä»è€Œå®ç°å˜é‡å…±äº«çš„åŠŸèƒ½ã€‚  å¯ä»¥é€‰æ‹© trainable ç±»å‹</li>
</ul>
</blockquote>
<h2 id="3-æ¢ç´¢-name-scope-å’Œ-variable-scope"><a href="#3-æ¢ç´¢-name-scope-å’Œ-variable-scope" class="headerlink" title="3. æ¢ç´¢ name_scope å’Œ variable_scope"></a>3. æ¢ç´¢ name_scope å’Œ variable_scope</h2><p>å®éªŒç›®çš„ï¼š ç†Ÿæ‚‰ä¸¤ç§å‘½åç©ºé—´çš„åº”ç”¨æƒ…æ™¯</p>
<h3 id="3-1-tf-name-scope"><a href="#3-1-tf-name-scope" class="headerlink" title="3.1 tf.name_scope()"></a>3.1 tf.name_scope()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">'nsc1'</span>):</span><br><span class="line">    v1 = tf.Variable([<span class="number">1</span>], name=<span class="string">'v1'</span>)</span><br><span class="line">    <span class="keyword">with</span> tf.variable_scope(<span class="string">'vsc1'</span>):</span><br><span class="line">        v2 = tf.Variable([<span class="number">1</span>], name=<span class="string">'v2'</span>)</span><br><span class="line">        v3 = tf.get_variable(name=<span class="string">'v3'</span>, shape=[])</span><br><span class="line">print(<span class="string">'v1.name: '</span>, v1.name)</span><br><span class="line">print(<span class="string">'v2.name: '</span>, v2.name)</span><br><span class="line">print(<span class="string">'v3.name: '</span>, v3.name)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">v1.name:  nsc1/v1:0</span><br><span class="line">v2.name:  nsc1/vsc1/v2:0</span><br><span class="line">v3.name:  vsc1/v3:0</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">'nsc1'</span>):</span><br><span class="line">    v4 = tf.Variable([<span class="number">1</span>], name=<span class="string">'v4'</span>)</span><br><span class="line">print(<span class="string">'v4.name: '</span>, v4.name) <span class="comment"># v4.name:  nsc1_1/v4:0</span></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>tf.name_scope() å¹¶ä¸ä¼šå¯¹ tf.get_variable() åˆ›å»ºçš„å˜é‡æœ‰ä»»ä½•å½±å“ã€‚ </li>
<li><p>tf.name_scope() ä¸»è¦æ˜¯ç”¨æ¥ç®¡ç†å‘½åç©ºé—´çš„ï¼Œè¿™æ ·å­è®©æˆ‘ä»¬çš„æ•´ä¸ªæ¨¡å‹æ›´åŠ æœ‰æ¡ç†ã€‚</p>
</li>
<li><p>tf.variable_scope() çš„ä½œç”¨æ˜¯ä¸ºäº†å®ç°<strong>å˜é‡å…±äº«</strong>ï¼Œå®ƒå’Œ tf.get_variable() æ¥å®Œæˆå˜é‡å…±äº«çš„åŠŸèƒ½ã€‚</p>
</li>
</ul>
</blockquote>
<h3 id="3-2-tf-variable-scope"><a href="#3-2-tf-variable-scope" class="headerlink" title="3.2 tf.variable_scope()"></a>3.2 tf.variable_scope()</h3><p>å¦‚æœæƒ³è¦è¾¾åˆ°é‡å¤åˆ©ç”¨å˜é‡çš„æ•ˆæœ, æˆ‘ä»¬å°±è¦ä½¿ç”¨ <code>tf.variable_scope()</code>, å¹¶æ­é… <code>tf.get_variable()</code> è¿™ç§æ–¹å¼äº§ç”Ÿå’Œæå–å˜é‡. ä¸åƒ <code>tf.Variable()</code> æ¯æ¬¡éƒ½ä¼šäº§ç”Ÿæ–°çš„å˜é‡, <code>tf.get_variable()</code> å¦‚æœé‡åˆ°äº†åŒæ ·åå­—çš„å˜é‡æ—¶, å®ƒä¼šå•çº¯çš„æå–è¿™ä¸ªåŒæ ·åå­—çš„å˜é‡(é¿å…äº§ç”Ÿæ–°å˜é‡). è€Œåœ¨é‡å¤ä½¿ç”¨çš„æ—¶å€™, ä¸€å®šè¦åœ¨ä»£ç ä¸­å¼ºè°ƒ <code>scope.reuse_variables()</code>, å¦åˆ™ç³»ç»Ÿå°†ä¼šæŠ¥é”™, ä»¥ä¸ºä½ åªæ˜¯å•çº¯çš„ä¸å°å¿ƒé‡å¤ä½¿ç”¨åˆ°äº†ä¸€ä¸ªå˜é‡.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">"a_variable_scope"</span>) <span class="keyword">as</span> scope:</span><br><span class="line">    initializer = tf.constant_initializer(value=<span class="number">3</span>)</span><br><span class="line">    </span><br><span class="line">    var3 = tf.get_variable(name=<span class="string">'var3'</span>, shape=[<span class="number">1</span>], dtype=tf.float32, initializer=initializer)</span><br><span class="line">    scope.reuse_variables()</span><br><span class="line">    var3_reuse = tf.get_variable(name=<span class="string">'var3'</span>,)</span><br><span class="line">    </span><br><span class="line">    var4 = tf.Variable(name=<span class="string">'var4'</span>, initial_value=[<span class="number">4</span>], dtype=tf.float32)</span><br><span class="line">    var4_reuse = tf.Variable(name=<span class="string">'var4'</span>, initial_value=[<span class="number">4</span>], dtype=tf.float32)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.run(tf.global_variables_initializer())</span><br><span class="line">    </span><br><span class="line">    print(var3.name)            <span class="comment"># a_variable_scope/var3:0</span></span><br><span class="line">    print(sess.run(var3))       <span class="comment"># [ 3.]</span></span><br><span class="line">    print(var3_reuse.name)      <span class="comment"># a_variable_scope/var3:0</span></span><br><span class="line">    print(sess.run(var3_reuse)) <span class="comment"># [ 3.]</span></span><br><span class="line">    </span><br><span class="line">    print(var4.name)            <span class="comment"># a_variable_scope/var4:0</span></span><br><span class="line">    print(sess.run(var4))       <span class="comment"># [ 4.]</span></span><br><span class="line">    print(var4_reuse.name)      <span class="comment"># a_variable_scope/var4_1:0</span></span><br><span class="line">    print(sess.run(var4_reuse)) <span class="comment"># [ 4.]</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>é¦–å…ˆæˆ‘ä»¬è¦ç¡®ç«‹ä¸€ç§ Graph çš„æ€æƒ³ã€‚åœ¨ TensorFlow ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç›¸å½“äºå¾€ Graph ä¸­æ·»åŠ äº†ä¸€ä¸ªèŠ‚ç‚¹ã€‚å’Œæ™®é€šçš„ python å‡½æ•°ä¸ä¸€æ ·ï¼Œåœ¨ä¸€èˆ¬çš„å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯¹è¾“å…¥è¿›è¡Œå¤„ç†ï¼Œç„¶åè¿”å›ä¸€ä¸ªç»“æœï¼Œè€Œå‡½æ•°é‡Œè¾¹å®šä¹‰çš„ä¸€äº›å±€éƒ¨å˜é‡æˆ‘ä»¬å°±ä¸ç®¡äº†ã€‚ä½†æ˜¯åœ¨ TensorFlow ä¸­ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°é‡Œè¾¹åˆ›å»ºäº†ä¸€ä¸ªå˜é‡ï¼Œå°±æ˜¯å¾€ Graph ä¸­æ·»åŠ äº†ä¸€ä¸ªèŠ‚ç‚¹ã€‚å‡ºäº†è¿™ä¸ªå‡½æ•°åï¼Œè¿™ä¸ªèŠ‚ç‚¹è¿˜æ˜¯å­˜åœ¨äº Graph ä¸­çš„ã€‚</p>
</blockquote>
<h2 id="4-RNN-åº”ç”¨ä¾‹å­"><a href="#4-RNN-åº”ç”¨ä¾‹å­" class="headerlink" title="4. RNN åº”ç”¨ä¾‹å­"></a>4. RNN åº”ç”¨ä¾‹å­</h2><p>æ•´ä¸ª RNN çš„ç»“æ„å·²ç»åœ¨è¿™é‡Œå®šä¹‰å¥½äº†. åœ¨ training RNN å’Œ test RNN çš„æ—¶å€™, RNN çš„ <code>time_steps</code> ä¼šæœ‰ä¸åŒçš„å–å€¼, è¿™å°†ä¼šå½±å“åˆ°æ•´ä¸ª RNN çš„ç»“æ„, æ‰€ä»¥å¯¼è‡´åœ¨ test çš„æ—¶å€™, ä¸èƒ½å•çº¯åœ°ä½¿ç”¨ training æ—¶å»ºç«‹çš„é‚£ä¸ª RNN. ä½†æ˜¯ training RNN å’Œ test RNN åˆå¿…é¡»æ˜¯æœ‰åŒæ ·çš„ weights biases çš„å‚æ•°. æ‰€ä»¥, è¿™æ—¶, å°±æ˜¯ä½¿ç”¨ reuse variable çš„å¥½æ—¶æœº.</p>
<p>é¦–å…ˆå®šä¹‰ training å’Œ test çš„ä¸åŒå‚æ•°.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrainConfig</span>:</span></span><br><span class="line">    batch_size = <span class="number">20</span></span><br><span class="line">    time_steps = <span class="number">20</span></span><br><span class="line">    input_size = <span class="number">10</span></span><br><span class="line">    output_size = <span class="number">2</span></span><br><span class="line">    cell_size = <span class="number">11</span></span><br><span class="line">    learning_rate = <span class="number">0.01</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestConfig</span><span class="params">(TrainConfig)</span>:</span></span><br><span class="line">    time_steps = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">train_config = TrainConfig()</span><br><span class="line">test_config = TestConfig()</span><br></pre></td></tr></table></figure>
<p>ç„¶åè®© <code>train_rnn</code> å’Œ <code>test_rnn</code> åœ¨åŒä¸€ä¸ª <code>tf.variable_scope(&#39;rnn&#39;)</code> ä¹‹ä¸‹. å¹¶ä¸”å®šä¹‰ <strong>scope.reuse_variables()</strong>, ä½¿æˆ‘ä»¬èƒ½æŠŠ <code>train_rnn</code> çš„æ‰€æœ‰ weights, biases å‚æ•°å…¨éƒ¨ç»‘å®šåˆ° <code>test_rnn</code> ä¸­. </p>
<p>è¿™æ ·, ä¸ç®¡ä¸¤è€…çš„ <code>time_steps</code> æœ‰å¤šä¸åŒ, ç»“æ„æœ‰å¤šä¸åŒ, <code>train_rnn</code> W, b å‚æ•°æ›´æ–°æˆä»€ä¹ˆæ ·, <code>test_rnn</code> çš„å‚æ•°ä¹Ÿæ›´æ–°æˆä»€ä¹ˆæ ·.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">'rnn'</span>) <span class="keyword">as</span> scope:</span><br><span class="line">    sess = tf.Session()</span><br><span class="line">    train_rnn = RNN(train_config)</span><br><span class="line">    scope.reuse_variables()</span><br><span class="line">    test_rnn = RNN(test_config)</span><br><span class="line">    sess.run(tf.global_variables_initializer())</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/jerr__y/article/category/6747409" target="_blank" rel="external">å¤§å­¦ä¹‹é“ï¼Œåœ¨æ˜æ˜å¾· æ°¸æ°¸å¤œ Tensorflowå­¦ä¹ ä¹‹è·¯</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/5-12-scope/" target="_blank" rel="external">morvanzhou, scope å‘½åæ–¹æ³•</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç®€å•å‰é¦ˆç½‘ç»œå®ç° mnist åˆ†ç±»]]></title>
      <url>http://shopee.ai/2018/10/04/tensorflow/tf-mnist-1-beginners/</url>
      <content type="html"><![CDATA[<p>æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸¤å±‚ FC å…¨è¿æ¥ç½‘ç»œæ¥å®Œæˆ MNISTæ•°æ® çš„åˆ†ç±»</p>
<a id="more"></a> 
<p>è¾“å…¥ [-1,28*28]ï¼Œ FC1 æœ‰ 1024 ä¸ªneuronsï¼Œ FC2 æœ‰ 10 ä¸ªneuronsã€‚</p>
<blockquote>
<p>è¿™ä¹ˆç®€å•çš„ä¸€ä¸ªå…¨è¿æ¥ç½‘ç»œï¼Œç»“æœæµ‹è¯•å‡†ç¡®ç‡è¾¾åˆ°äº† 0.98ã€‚è¿˜æ˜¯éå¸¸æ£’çš„ï¼ï¼ï¼</p>
<p>MNIST æ•°æ®é›† åŒ…å«äº† 60000 å¼ å›¾ç‰‡æ¥ä½œä¸ºè®­ç»ƒæ•°æ®ï¼Œ10000 å¼ å›¾ç‰‡ä½œä¸ºæµ‹è¯•æ•°æ®ã€‚æ¯å¼ å›¾ç‰‡éƒ½ä»£è¡¨äº† 0~9 ä¸­çš„ä¸€ä¸ªæ•°å­—ã€‚å›¾ç‰‡å¤§å°éƒ½ä¸º 28*28ï¼Œå¤„ç†åçš„æ¯å¼ å›¾ç‰‡æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 784 çš„ä¸€ç»´æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ å¯¹åº”å›¾ç‰‡åƒç´ çŸ©é˜µæä¾›ç»™ç¥ç»ç½‘ç»œçš„è¾“å…¥å±‚ï¼Œåƒç´ çŸ©é˜µä¸­å…ƒç´ çš„å–å€¼èŒƒå›´ [0, 1]ï¼Œ å®ƒä»£è¡¨äº†é¢œè‰²çš„æ·±æµ…ã€‚å…¶ä¸­ 0 è¡¨ç¤ºç™½è‰²èƒŒæ™¯(background)ï¼Œ1 è¡¨ç¤ºé»‘è‰²å‰æ™¯(foreground)ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™ï¼Œ input_data.read_data_sets å‡½æ•°ç”Ÿæˆçš„ç±»è¿˜æä¾›äº† mnist.train.next.batch å‡½æ•°ï¼Œå®ƒå¯ä»¥ä»æ‰€æœ‰è®­ç»ƒæ•°æ®ä¸­è¯»å–ä¸€å°éƒ¨åˆ†ä½œä¸ºä¸€ä¸ªè®­ç»ƒ batchã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">MNIST æ•°æ®ä¸‹è½½åœ°å€å’Œå†…å®¹</th>
<th style="text-align:center">å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Extracting MNIST_data/train-images-idx3-ubyte.gz</td>
<td style="text-align:center">è®­ç»ƒæ•°æ®å›¾ç‰‡</td>
</tr>
<tr>
<td style="text-align:center">Extracting MNIST_data/train-labels-idx1-ubyte.gz</td>
<td style="text-align:center">è®­ç»ƒæ•°æ®ç­”æ¡ˆ</td>
</tr>
<tr>
<td style="text-align:center">Extracting MNIST_data/t10k-images-idx3-ubyte.gz</td>
<td style="text-align:center">æµ‹è¯•æ•°æ®å›¾ç‰‡</td>
</tr>
<tr>
<td style="text-align:center">Extracting MNIST_data/t10k-labels-idx1-ubyte.gz</td>
<td style="text-align:center">æµ‹è¯•æ•°æ®ç­”æ¡ˆ</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æŒ‰éœ€ä½¿ç”¨ GPU</span></span><br><span class="line">config = tf.ConfigProto()</span><br><span class="line">config.gpu_options.allow_growth = <span class="keyword">True</span></span><br><span class="line">sess = tf.InteractiveSession(config=config)</span><br></pre></td></tr></table></figure>
<h2 id="1-å¯¼å…¥æ•°æ®"><a href="#1-å¯¼å…¥æ•°æ®" class="headerlink" title="1. å¯¼å…¥æ•°æ®"></a>1. å¯¼å…¥æ•°æ®</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”¨tensorflow å¯¼å…¥æ•°æ®</span></span><br><span class="line"><span class="keyword">from</span> tensorflow.examples.tutorials.mnist <span class="keyword">import</span> input_data</span><br><span class="line"></span><br><span class="line"><span class="comment"># input_data.read_data_sets è‡ªåŠ¨å°† MNIST æ•°æ®é›†åˆ’åˆ†ä¸º trainã€validationã€test ä¸‰ä¸ªæ•°æ®é›†</span></span><br><span class="line">mnist = input_data.read_data_sets(<span class="string">'MNIST_data'</span>, one_hot=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># train é›†åˆæœ‰ 55000 å¼ å›¾ç‰‡</span></span><br><span class="line"><span class="comment"># validation é›†åˆæœ‰ 5000 å¼ å›¾ç‰‡</span></span><br><span class="line"><span class="comment"># test é›†åˆæœ‰ 10000 å¼ å›¾ç‰‡ï¼Œå›¾ç‰‡æ¥è‡ª MNIST æä¾›çš„æµ‹è¯•æ•°æ®é›†</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'training data shape '</span>, mnist.train.images.shape)</span><br><span class="line">print(<span class="string">'training label shape '</span>, mnist.train.labels.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># training data shape  (55000, 784)</span></span><br><span class="line"><span class="comment"># training label shape  (55000, 10)</span></span><br></pre></td></tr></table></figure>
<h2 id="2-æ„å»ºç½‘ç»œ"><a href="#2-æ„å»ºç½‘ç»œ" class="headerlink" title="2. æ„å»ºç½‘ç»œ"></a>2. æ„å»ºç½‘ç»œ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æƒå€¼åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">weight_variable</span><span class="params">(shape)</span>:</span></span><br><span class="line">    <span class="comment"># ç”¨æ­£æ€åˆ†å¸ƒæ¥åˆå§‹åŒ–æƒå€¼</span></span><br><span class="line">    initial = tf.truncated_normal(shape, stddev=<span class="number">0.1</span>)</span><br><span class="line">    <span class="keyword">return</span> tf.Variable(initial)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bias_variable</span><span class="params">(shape)</span>:</span></span><br><span class="line">    <span class="comment"># æœ¬ä¾‹ä¸­ç”¨reluæ¿€æ´»å‡½æ•°ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªå¾ˆå°çš„æ­£åç½®è¾ƒå¥½</span></span><br><span class="line">    initial = tf.constant(<span class="number">0.1</span>, shape=shape)</span><br><span class="line">    <span class="keyword">return</span> tf.Variable(initial)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># input_layer</span></span><br><span class="line">X_ = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">784</span>])</span><br><span class="line">y_ = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">10</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># FC1</span></span><br><span class="line">W_fc1 = weight_variable([<span class="number">784</span>, <span class="number">1024</span>])</span><br><span class="line">b_fc1 = bias_variable([<span class="number">1024</span>])</span><br><span class="line">h_fc1 = tf.nn.relu(tf.matmul(X_, W_fc1) + b_fc1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># FC2</span></span><br><span class="line">W_fc2 = weight_variable([<span class="number">1024</span>, <span class="number">10</span>])</span><br><span class="line">b_fc2 = bias_variable([<span class="number">10</span>])</span><br><span class="line">y_pre = tf.nn.softmax(tf.matmul(h_fc1, W_fc2) + b_fc2)</span><br></pre></td></tr></table></figure>
<h2 id="3-è®­ç»ƒå’Œè¯„ä¼°"><a href="#3-è®­ç»ƒå’Œè¯„ä¼°" class="headerlink" title="3. è®­ç»ƒå’Œè¯„ä¼°"></a>3. è®­ç»ƒå’Œè¯„ä¼°</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.æŸå¤±å‡½æ•°ï¼šcross_entropy</span></span><br><span class="line">cross_entropy = -tf.reduce_sum(y_ * tf.log(y_pre))</span><br><span class="line"><span class="comment"># 2.ä¼˜åŒ–å‡½æ•°ï¼šAdamOptimizer, ä¼˜åŒ–é€Ÿåº¦è¦æ¯” GradientOptimizer å¿«å¾ˆå¤š</span></span><br><span class="line">train_step = tf.train.AdamOptimizer(<span class="number">0.001</span>).minimize(cross_entropy)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.é¢„æµ‹ç»“æœè¯„ä¼°</span></span><br><span class="line"><span class="comment">#ã€€é¢„æµ‹å€¼ä¸­æœ€å¤§å€¼ï¼ˆï¼‘ï¼‰å³åˆ†ç±»ç»“æœï¼Œæ˜¯å¦ç­‰äºåŸå§‹æ ‡ç­¾ä¸­çš„ï¼ˆï¼‘ï¼‰çš„ä½ç½®ã€‚argmax()å–æœ€å¤§å€¼æ‰€åœ¨çš„ä¸‹æ ‡</span></span><br><span class="line">correct_prediction = tf.equal(tf.argmax(y_pre, <span class="number">1</span>), tf.arg_max(y_, <span class="number">1</span>))  </span><br><span class="line">accuracy = tf.reduce_mean(tf.cast(correct_prediction, tf.float32))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹è¿è¡Œ</span></span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line"><span class="comment"># è¿™å¤§æ¦‚è¿­ä»£äº†ä¸åˆ° 10 ä¸ª epochï¼Œ è®­ç»ƒå‡†ç¡®ç‡å·²ç»è¾¾åˆ°äº†0.98</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5000</span>):</span><br><span class="line">    X_batch, y_batch = mnist.train.next_batch(batch_size=<span class="number">100</span>)</span><br><span class="line">    train_step.run(feed_dict=&#123;X_: X_batch, y_: y_batch&#125;)</span><br><span class="line">    <span class="keyword">if</span> (i+<span class="number">1</span>) % <span class="number">200</span> == <span class="number">0</span>:</span><br><span class="line">        train_accuracy = accuracy.eval(feed_dict=&#123;X_: mnist.train.images, y_: mnist.train.labels&#125;)</span><br><span class="line">        print(<span class="string">"step %d, training acc %g"</span> % (i+<span class="number">1</span>, train_accuracy))</span><br><span class="line">    <span class="keyword">if</span> (i+<span class="number">1</span>) % <span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">        test_accuracy = accuracy.eval(feed_dict=&#123;X_: mnist.test.images, y_: mnist.test.labels&#125;)</span><br><span class="line">        print(<span class="string">"= "</span> * <span class="number">10</span>, <span class="string">"step %d, testing acc %g"</span> % (i+<span class="number">1</span>, test_accuracy))</span><br></pre></td></tr></table></figure>
<p><strong>Output:</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">step 200, training acc 0.937364</span><br><span class="line">step 400, training acc 0.965818</span><br><span class="line">step 600, training acc 0.973364</span><br><span class="line">step 800, training acc 0.977709</span><br><span class="line">step 1000, training acc 0.981528</span><br><span class="line">= = = = = = = = = =  step 1000, testing acc 0.9688</span><br><span class="line">step 1200, training acc 0.988437</span><br><span class="line">step 1400, training acc 0.988728</span><br><span class="line">step 1600, training acc 0.987491</span><br><span class="line">step 1800, training acc 0.993873</span><br><span class="line">step 2000, training acc 0.992527</span><br><span class="line">= = = = = = = = = =  step 2000, testing acc 0.9789</span><br><span class="line">step 2200, training acc 0.995309</span><br><span class="line">step 2400, training acc 0.995455</span><br><span class="line">step 2600, training acc 0.9952</span><br><span class="line">step 2800, training acc 0.996073</span><br><span class="line">step 3000, training acc 0.9964</span><br><span class="line">= = = = = = = = = =  step 3000, testing acc 0.9778</span><br><span class="line">step 3200, training acc 0.996709</span><br><span class="line">step 3400, training acc 0.998109</span><br><span class="line">step 3600, training acc 0.997455</span><br><span class="line">step 3800, training acc 0.995055</span><br><span class="line">step 4000, training acc 0.997291</span><br><span class="line">= = = = = = = = = =  step 4000, testing acc 0.9808</span><br><span class="line">step 4200, training acc 0.997746</span><br><span class="line">step 4400, training acc 0.996073</span><br><span class="line">step 4600, training acc 0.998564</span><br><span class="line">step 4800, training acc 0.997946</span><br><span class="line">step 5000, training acc 0.998673</span><br><span class="line">= = = = = = = = = =  step 5000, testing acc 0.98</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/jerr__y/article/category/6747409" target="_blank" rel="external">å¤§å­¦ä¹‹é“ï¼Œåœ¨æ˜æ˜å¾· æ°¸æ°¸å¤œ Tensorflowå­¦ä¹ ä¹‹è·¯</a></li>
<li><a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-c1ov28so.html" target="_blank" rel="external">W3cschool MNISTæ•°æ®é›† ä¾†é¾å»è„ˆè¬›è§£çš„æ¸…æ¸…æ¥šæ¥š</a></li>
<li><a href="http://colah.github.io/posts/2015-09-Visual-Information/" target="_blank" rel="external">Visual-Information äº¤å‰ç†µ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[RNN çš„è¯­è¨€æ¨¡å‹ TensorFlow å®ç°]]></title>
      <url>http://shopee.ai/2018/10/02/tensorflow/tf-nlp-9.2.3/</url>
      <content type="html"><![CDATA[<p>ä¸Šç¯‡ <code>PTB</code> æ•°æ®é›† batching ä¸­æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å¯¹ <code>PTB</code> æ•°æ®é›†è¿›è¡Œ è¿æ¥ã€åˆ‡å‰² æˆå¤šä¸ª batchï¼Œä½œä¸º NNLM çš„è¾“å…¥ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é‡‡ç”¨ TensorFlow å®ç° RNN-based NNLMã€‚ </p>
<a id="more"></a>
<p><img src="/images/tensorflow/tf-nlp-9.2.3_1.jpg" width="700"></p>
<h2 id="1-Embedding-å±‚"><a href="#1-Embedding-å±‚" class="headerlink" title="1. Embedding å±‚"></a>1. Embedding å±‚</h2><p>å°† word ç¼–å· è½¬åŒ–ä¸º word embedding ä¸¤å¤§ä½œç”¨ :</p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">function</th>
<th style="text-align:center">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1.</td>
<td style="text-align:center">é™ä½è¾“å…¥çš„ç»´åº¦</td>
<td style="text-align:center">è¯å‘é‡çš„ç»´åº¦é€šå¸¸åœ¨ 200 ~ 1000 ä¹‹é—´, å¤§å¤§å‡å°‘ RNN ç½‘ç»œçš„å‚æ•°æ•°é‡ ä¸ è®¡ç®—é‡</td>
</tr>
<tr>
<td style="text-align:center">2.</td>
<td style="text-align:center">å¢åŠ è¯­ä¹‰ä¿¡æ¯</td>
<td style="text-align:center">ç®€å•çš„å•è¯ç¼–å·æ˜¯ä¸åŒ…å«ä»»ä½•è¯­ä¹‰ä¿¡æ¯çš„.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>è¯å‘é‡ç»´åº¦: EMB_SIZEï¼Œè¯æ±‡è¡¨å¤§å°: VOCAB_SIZE</p>
<p>æ‰€æœ‰å•è¯çš„è¯å‘é‡å¯ä»¥æ”¾å…¥ä¸€ä¸ªå¤§å°ä¸º <strong>(EMB_SIZE, VOCAB_SIZE)</strong> çš„çŸ©é˜µå†…</p>
<p>åœ¨è¯»å–è¯å‘é‡æ—¶ï¼Œå¯ä»¥è°ƒç”¨ <strong>tf.nn.embedding_lookup</strong> æ–¹æ³•ã€‚</p>
<p>ç”¨ tf.Variable æ¥è¡¨ç¤ºè¯å‘é‡ï¼Œè¿™æ ·å°±å¯ä»¥é‡‡ç”¨ä»»æ„åˆå§‹åŒ–çš„è¯å‘é‡ï¼Œå­¦ä¹ è¿‡ç¨‹ä¸­ä¹Ÿä¼šä¼˜åŒ–è¯å‘é‡ã€‚</p>
</blockquote>
<p><img src="/images/tensorflow/tf-nlp-9.2.3_2.jpg" width="700"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰å•è¯çš„è¯å‘é‡çŸ©é˜µ</span></span><br><span class="line">embedding = tf.get_variable(<span class="string">"embedding"</span>, [VOCAB_SIZE, EMB_SIZE])</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ•°æ®è½¬åŒ–ä¸ºè¯å‘é‡è¡¨ç¤º</span></span><br><span class="line">inputs = tf.nn.embedding_lookup(embedding, input_data)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å…¶ä¸­è¾“å…¥æ•°æ® input_data çš„ç»´åº¦æ˜¯ (batch_size * num_steps)</p>
<p>è€Œè¾“å‡ºçš„ input_embedding çš„ç»´åº¦æˆä¸º (batch_size * num_steps * EMB_SIZE). </p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è¾“å…¥æ•°æ®ç»´åº¦æ˜¯ ($20 \times 35$) ï¼ŒEMB_SIZE = 300, è¾“å…¥è¯å‘é‡ç»´åº¦æ—¶ ($20 \times 35 \times 300$) .</p>
</blockquote>
<h2 id="2-Softmax-å±‚"><a href="#2-Softmax-å±‚" class="headerlink" title="2. Softmax å±‚"></a>2. Softmax å±‚</h2><p>Softmaxå±‚ çš„ä½œç”¨æ˜¯å°† RNN çš„è¾“å‡º è½¬åŒ–ä¸ºä¸€ä¸ªå•è¯è¡¨ä¸­æ¯ä¸ªå•è¯çš„è¾“å‡ºæ¦‚ç‡ï¼Œä¸ºæ­¤éœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<h3 id="2-1-ç¬¬ä¸€æ­¥"><a href="#2-1-ç¬¬ä¸€æ­¥" class="headerlink" title="2.1 ç¬¬ä¸€æ­¥"></a>2.1 ç¬¬ä¸€æ­¥</h3><p>ä½¿ç”¨ä¸€ä¸ªçº¿æ€§æ˜ å°„å°† RNN çš„è¾“å‡ºæ˜ å°„ä¸ºä¸€ä¸ªç»´åº¦ä¸è¯æ±‡è¡¨å¤§å°ç›¸åŒçš„å‘é‡ï¼Œè¿™ä¸€æ­¥çš„è¾“å‡ºå«åš <strong>logits</strong>. ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆå®šä¹‰æ˜ å°„ç”¨åˆ°çš„å‚æ•°</span></span><br><span class="line"><span class="comment"># HIDDEN_SIZE æ˜¯ RNN çš„éšè—çŠ¶æ€ç»´åº¦ï¼ŒVOCAB_SIZE æ˜¯è¯æ±‡è¡¨å¤§å°</span></span><br><span class="line">weight = tf.get_variable(<span class="string">"weight"</span>, [HIDDEN_ZIZE, VOCAB_SIZE])</span><br><span class="line">bias = tf.get_variable(<span class="string">"bias"</span>, [VOCAB_SIZE])</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—çº¿æ€§æ˜ å°„</span></span><br><span class="line">logits = tf.matmul(output, weight) + bias</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å…¶ä¸­ output æ˜¯ RNN çš„è¾“å‡ºï¼Œç»´åº¦æ˜¯ [batch_size * num_steps, <strong>HIDDEN_SIZE</strong>]</p>
<p>ç»è¿‡çº¿æ€§æ˜ å°„åï¼Œè¾“å‡ºç»“æœæ˜¯ [batch_size * num_steps, <strong>VOCAB_SIZE</strong>].</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://www.zhihu.com/question/52250059/answer/146260654" target="_blank" rel="external">tf.nn.embedding_lookupå‡½æ•°åŸç†ï¼Ÿ</a></li>
<li><a href="https://www.zhihu.com/question/48107602/answer/159801895" target="_blank" rel="external">æ±‚é€šä¿—è®²è§£ä¸‹tensorflowçš„embedding_lookupæ¥å£çš„æ„æ€ï¼Ÿ</a></li>
<li><a href="http://www.fit.vutbr.cz/~imikolov/rnnlm/" target="_blank" rel="external">Tomas Mikolov PTB æ•°æ®</a></li>
<li><a href="https://www.zhihu.com/question/60751553" target="_blank" rel="external">å¦‚ä½•ç†è§£æ·±åº¦å­¦ä¹ æºç é‡Œç»å¸¸å‡ºç°çš„logitsï¼Ÿ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/37886740" target="_blank" rel="external">åŸºäºå¾ªç¯ç¥ç»ç½‘ç»œçš„è¯­è¨€æ¨¡å‹çš„ä»‹ç»ä¸TensorFlowå®ç°(4)ï¼šTensorFlowå®ç°RNN-basedè¯­è¨€æ¨¡å‹</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[PTB æ•°æ®çš„ batching æ–¹æ³•]]></title>
      <url>http://shopee.ai/2018/10/01/tensorflow/tf-nlp-9.2.2/</url>
      <content type="html"><![CDATA[<p><code>PTB</code> æ•°æ®é›† batching ä»‹ç», å¦‚ä½•å¯¹ <code>PTB</code> æ•°æ®é›†è¿›è¡Œ è¿æ¥ã€åˆ‡å‰² æˆå¤šä¸ª batchã€‚</p>
<p>é‡ç‚¹äº†è§£ <strong>batch_size</strong>ã€<strong>num_batch</strong>ã€<strong>num_step</strong> è¿™ä¸‰ä¸ªæ¦‚å¿µã€‚</p>
<a id="more"></a>
<h2 id="batching"><a href="#batching" class="headerlink" title="batching"></a>batching</h2><p>å…ˆçœ‹ä¸‹é¢è¿™æ®µï¼Œæ‘˜å–è‡ª <a href="https://www.zhihu.com/question/278485204/answer/402066718" target="_blank" rel="external">çŸ¥ä¹ ä½œè€…ï¼šdalida</a></p>
<p>ç”»å›¾å¾ˆå¼±ï¼Œç›´æ¥å°±å¾’æ‰‹ç”»äº†ã€‚ä»¥æœ±è‡ªæ¸…çš„ã€ŠèƒŒå½±ã€‹ä¸­çš„èŠ‚é€‰æ®µè½ä¸ºä¾‹ã€‚å­—æœ‰ç‚¹éš¾çœ‹ï¼Œè¯·å¿½ç•¥ï½(ï¿£â–½ï¿£ï½)~</p>
<p>è¿™æ˜¯å•ä¸ªå­—ç¬¦çº§åˆ«çš„ RNNï¼Œæ¢æˆè¯è¯­ä¹Ÿä¸€æ ·ã€‚</p>
<p>num_batch å…¶å®å°±æ˜¯ batch çš„æ•°é‡ï¼Œè¿™é‡Œåªç”»äº†ä¸‰ä¸ªï¼Œå¯ä»¥ä¸€ç›´æ¥ä¸‹å»â€¦.è¿™æ ·ä¸€æ¬¡å®Œæˆ 6ä¸ªå­—ç¬¦ (num_step=6) çš„å¤„ç†ï¼Œè€Œä¸”èƒ½ä¿è¯ batch ä¹‹é—´çš„è¿ç»­æ€§ã€‚ä½†æ˜¯è¡Œä¸è¡Œä¹‹é—´çš„è¿ç»­æ€§ç¡®å®æ˜¯ä¸¢å¤±äº†ã€‚</p>
<p><img src="/images/tensorflow/tf-nlp-9.2.2_2.jpg" width="700"></p>
<p><strong>ç»“è®º :</strong></p>
<ul>
<li>batch_size = 3 </li>
<li>num_batch = 3</li>
<li>num_step = 6</li>
</ul>
<blockquote>
<p>batch_size ä¹Ÿæ˜¯ä¸€æ¬¡è¾“å…¥çš„å¥å­æ•°</p>
</blockquote>
<h2 id="æœ±è‡ªæ¸…ã€ŠèƒŒå½±ã€‹"><a href="#æœ±è‡ªæ¸…ã€ŠèƒŒå½±ã€‹" class="headerlink" title="æœ±è‡ªæ¸…ã€ŠèƒŒå½±ã€‹"></a>æœ±è‡ªæ¸…ã€ŠèƒŒå½±ã€‹</h2><p>æˆ‘ä»¬è¿‡äº†æ±Ÿï¼Œè¿›äº†è½¦ç«™ã€‚æˆ‘ä¹°ç¥¨ï¼Œä»–å¿™ç€ç…§çœ‹è¡Œæã€‚è¡Œæå¤ªå¤šäº†ï¼Œå¾—å‘è„šå¤«è¡Œäº›å°è´¹ï¼Œæ‰å¯è¿‡å»ã€‚ä»–ä¾¿åˆå¿™ç€å’Œä»–ä»¬è®²ä»·é’±ã€‚æˆ‘é‚£æ—¶çœŸæ˜¯èªæ˜è¿‡åˆ†ï¼Œæ€»è§‰ä»–è¯´è¯ä¸å¤§æ¼‚äº®ï¼Œéè‡ªå·±æ’å˜´ä¸å¯ã€‚ä½†ä»–ç»ˆäºè®²å®šäº†ä»·é’±ï¼›å°±é€æˆ‘ä¸Šè½¦ã€‚ä»–ç»™æˆ‘æ‹£å®šäº†é è½¦é—¨çš„ä¸€å¼ æ¤…å­ï¼›æˆ‘å°†ä»–ç»™æˆ‘åšçš„ç´«æ¯›å¤§è¡£é“ºå¥½åä½ã€‚ä»–å˜±æˆ‘è·¯ä¸Šå°å¿ƒï¼Œå¤œé‡Œè­¦é†’äº›ï¼Œä¸è¦å—å‡‰ã€‚åˆå˜±æ‰˜èŒ¶æˆ¿å¥½å¥½ç…§åº”æˆ‘ã€‚æˆ‘å¿ƒé‡Œæš—ç¬‘ä»–çš„è¿‚ï¼›ä»–ä»¬åªè®¤å¾—é’±ï¼Œæ‰˜ä»–ä»¬ç›´æ˜¯ç™½æ‰˜ï¼è€Œä¸”æˆ‘è¿™æ ·å¤§å¹´çºªçš„äººï¼Œéš¾é“è¿˜ä¸èƒ½æ–™ç†è‡ªå·±ä¹ˆï¼Ÿå”‰ï¼Œæˆ‘ç°åœ¨æƒ³æƒ³ï¼Œé‚£æ—¶çœŸæ˜¯å¤ªèªæ˜äº†ï¼</p>
<p>æˆ‘è¯´é“ï¼Œâ€œçˆ¸çˆ¸ï¼Œä½ èµ°å§ã€‚â€ä»–æœ›è½¦å¤–çœ‹äº†çœ‹ï¼Œè¯´ï¼Œâ€œæˆ‘ä¹°å‡ ä¸ªæ©˜å­å»ã€‚ä½ å°±åœ¨æ­¤åœ°ï¼Œä¸è¦èµ°åŠ¨ã€‚â€æˆ‘çœ‹é‚£è¾¹æœˆå°çš„æ …æ å¤–æœ‰å‡ ä¸ªå–ä¸œè¥¿çš„ç­‰ç€é¡¾å®¢ã€‚èµ°åˆ°é‚£è¾¹æœˆå°ï¼Œé¡»ç©¿è¿‡é“é“ï¼Œé¡»è·³ä¸‹å»åˆçˆ¬ä¸Šå»ã€‚çˆ¶äº²æ˜¯ä¸€ä¸ªèƒ–å­ï¼Œèµ°è¿‡å»è‡ªç„¶è¦è´¹äº‹äº›ã€‚æˆ‘æœ¬æ¥è¦å»çš„ï¼Œä»–ä¸è‚¯ï¼Œåªå¥½è®©ä»–å»ã€‚æˆ‘çœ‹è§ä»–æˆ´ç€é»‘å¸ƒå°å¸½ï¼Œç©¿ç€é»‘å¸ƒå¤§é©¬è¤‚ï¼Œæ·±é’å¸ƒæ£‰è¢ï¼Œè¹’è·šåœ°èµ°åˆ°é“é“è¾¹ï¼Œæ…¢æ…¢æ¢èº«ä¸‹å»ï¼Œå°šä¸å¤§éš¾ã€‚å¯æ˜¯ä»–ç©¿è¿‡é“é“ï¼Œè¦çˆ¬ä¸Šé‚£è¾¹æœˆå°ï¼Œå°±ä¸å®¹æ˜“äº†ã€‚ä»–ç”¨ä¸¤æ‰‹æ”€ç€ä¸Šé¢ï¼Œä¸¤è„šå†å‘ä¸Šç¼©ï¼›ä»–è‚¥èƒ–çš„èº«å­å‘å·¦å¾®å€¾ï¼Œæ˜¾å‡ºåŠªåŠ›çš„æ ·å­ã€‚è¿™æ—¶æˆ‘çœ‹è§ä»–çš„èƒŒå½±ï¼Œæˆ‘çš„æ³ªå¾ˆå¿«åœ°æµä¸‹æ¥äº†ã€‚æˆ‘èµ¶ç´§æ‹­å¹²äº†æ³ªï¼Œæ€•ä»–çœ‹è§ï¼Œä¹Ÿæ€•åˆ«äººçœ‹è§ã€‚æˆ‘å†å‘å¤–çœ‹æ—¶ï¼Œä»–å·²æŠ±äº†æœ±çº¢çš„æ©˜å­æœ›å›èµ°äº†ã€‚è¿‡é“é“æ—¶ï¼Œä»–å…ˆå°†æ©˜å­æ•£æ”¾åœ¨åœ°ä¸Šï¼Œè‡ªå·±æ…¢æ…¢çˆ¬ä¸‹ï¼Œå†æŠ±èµ·æ©˜å­èµ°ã€‚åˆ°è¿™è¾¹æ—¶ï¼Œæˆ‘èµ¶ç´§å»æ€ä»–ã€‚ä»–å’Œæˆ‘èµ°åˆ°è½¦ä¸Šï¼Œå°†æ©˜å­ä¸€è‚¡è„‘å„¿æ”¾åœ¨æˆ‘çš„çš®å¤§è¡£ä¸Šã€‚äºæ˜¯æ‰‘æ‰‘è¡£ä¸Šçš„æ³¥åœŸï¼Œå¿ƒé‡Œå¾ˆè½»æ¾ä¼¼çš„ï¼Œè¿‡ä¸€ä¼šè¯´ï¼Œâ€œæˆ‘èµ°äº†ï¼›åˆ°é‚£è¾¹æ¥ä¿¡ï¼â€æˆ‘æœ›ç€ä»–èµ°å‡ºå»ã€‚ä»–èµ°äº†å‡ æ­¥ï¼Œå›è¿‡å¤´çœ‹è§æˆ‘ï¼Œè¯´ï¼Œâ€œè¿›å»å§ï¼Œé‡Œè¾¹æ²¡äººã€‚â€ç­‰ä»–çš„èƒŒå½±æ··å…¥æ¥æ¥å¾€å¾€çš„äººé‡Œï¼Œå†æ‰¾ä¸ç€äº†ï¼Œæˆ‘ä¾¿è¿›æ¥åä¸‹ï¼Œæˆ‘çš„çœ¼æ³ªåˆæ¥äº†ã€‚</p>
<p>è¿‘å‡ å¹´æ¥ï¼Œçˆ¶äº²å’Œæˆ‘éƒ½æ˜¯ä¸œå¥”è¥¿èµ°ï¼Œå®¶ä¸­å…‰æ™¯æ˜¯ä¸€æ—¥ä¸å¦‚ä¸€æ—¥ã€‚ä»–å°‘å¹´å‡ºå¤–è°‹ç”Ÿï¼Œç‹¬åŠ›æ”¯æŒï¼Œåšäº†è®¸å¤šå¤§äº‹ã€‚é‚£çŸ¥è€å¢ƒå´å¦‚æ­¤é¢“å”ï¼ä»–è§¦ç›®ä¼¤æ€€ï¼Œè‡ªç„¶æƒ…ä¸èƒ½è‡ªå·²ã€‚æƒ…éƒäºä¸­ï¼Œè‡ªç„¶è¦å‘ä¹‹äºå¤–ï¼›å®¶åº­çå±‘ä¾¿å¾€å¾€è§¦ä»–ä¹‹æ€’ã€‚ä»–å¾…æˆ‘æ¸æ¸ä¸åŒå¾€æ—¥ã€‚ä½†æœ€è¿‘ä¸¤å¹´çš„ä¸è§ï¼Œä»–ç»ˆäºå¿˜å´æˆ‘çš„ä¸å¥½ï¼Œåªæ˜¯æƒ¦è®°ç€æˆ‘ï¼Œæƒ¦è®°ç€æˆ‘çš„å„¿å­ã€‚æˆ‘åŒ—æ¥åï¼Œä»–å†™äº†ä¸€ä¿¡ç»™æˆ‘ï¼Œä¿¡ä¸­è¯´é“ï¼Œâ€œæˆ‘èº«ä½“å¹³å®‰ï¼ŒæƒŸè†€å­ç–¼ç—›åˆ©å®³ï¼Œä¸¾ç®¸æç¬”ï¼Œè¯¸å¤šä¸ä¾¿ï¼Œå¤§çº¦å¤§å»ä¹‹æœŸä¸è¿œçŸ£ã€‚â€æˆ‘è¯»åˆ°æ­¤å¤„ï¼Œåœ¨æ™¶è¹çš„æ³ªå…‰ä¸­ï¼Œåˆçœ‹è§é‚£è‚¥èƒ–çš„ï¼Œé’å¸ƒæ£‰è¢ï¼Œé»‘å¸ƒé©¬è¤‚çš„èƒŒå½±ã€‚å”‰ï¼æˆ‘ä¸çŸ¥ä½•æ—¶å†èƒ½ä¸ä»–ç›¸è§ï¼</p>
<p><strong>å†çœ‹è¿™ä¸ªå›¾</strong>ï¼š</p>
<p><img src="/images/tensorflow/tf-nlp-9.2.2_1.jpg" width="700"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.zhihu.com/question/278485204/answer/402066718" target="_blank" rel="external">å…³äºbatchingå¤šå¥å­åˆ‡å‰²batchç–‘é—®ï¼Ÿ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/40809517" target="_blank" rel="external">[L2]ä½¿ç”¨LSTMå®ç°è¯­è¨€æ¨¡å‹-æ•°æ®batching</a></li>
<li><a href="https://blog.csdn.net/jerr__y/article/details/61195257" target="_blank" rel="external">TensorFlowå…¥é—¨ï¼ˆäº”ï¼‰å¤šå±‚ LSTM é€šä¿—æ˜“æ‡‚ç‰ˆ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TensorFlowï¼š ç¬¬6ç«  å›¾ç‰‡è¯†åˆ«ä¸CNN]]></title>
      <url>http://shopee.ai/2018/09/28/tensorflow/tf-google-6-cnn-1/</url>
      <content type="html"><![CDATA[<p>å®æˆ˜Googleæ·±åº¦å­¦ä¹ æ¡†æ¶ ç¬”è®°-ç¬¬6ç«  å›¾ç‰‡è¯†åˆ« ä¸ CNN</p>
<p>ä»‹ç» CNN åœ¨å›¾ç‰‡è¯†åˆ«çš„åº”ç”¨ å’Œ CNN åŸºæœ¬åŸç† ä»¥åŠ å¦‚ä½•ä½¿ç”¨ TensorFlow æ¥å®ç° CNN .</p>
<a id="more"></a>
<h2 id="1-å›¾åƒè¯†åˆ«ä»‹ç»ä¸ç»å…¸æ•°æ®é›†"><a href="#1-å›¾åƒè¯†åˆ«ä»‹ç»ä¸ç»å…¸æ•°æ®é›†" class="headerlink" title="1. å›¾åƒè¯†åˆ«ä»‹ç»ä¸ç»å…¸æ•°æ®é›†"></a>1. å›¾åƒè¯†åˆ«ä»‹ç»ä¸ç»å…¸æ•°æ®é›†</h2><p>è§†è§‰æ˜¯äººç±»è®¤è¯†ä¸–ç•Œéå¸¸é‡è¦çš„ä¸€ç§çŸ¥è§‰.</p>
<p>ç»å…¸æ•°æ®é›† </p>
<ol>
<li>MNIST</li>
<li><a href="https://www.cs.toronto.edu/~kriz/cifar.html" target="_blank" rel="external">CIFAR</a></li>
<li><a href="http://www.image-net.org/challenges/LSVRC/" target="_blank" rel="external">ImageNet</a></li>
</ol>
<blockquote>
<p>CIFAR æ•°æ®é›†æ˜¯ä¸€ä¸ªå½±å“åŠ›å¾ˆå¤§çš„å›¾åƒåˆ†ç±»æ•°æ®é›†, æ˜¯å›¾åƒè¯å…¸é¡¹ç›®ï¼ˆVisual Dictionaryï¼‰ (7) ä¸­800ä¸‡å¼ å›¾ç‰‡çš„ä¸€ä¸ªå­é›†ï¼Œ éƒ½æ˜¯ 32Ã—32çš„å½©è‰²å›¾ç‰‡, ç”±Alex Krizhevskyæ•™æˆã€Vinod Nairåšå£«å’ŒGeoffrey Hintonæ•™æˆæ•´ç†çš„.</p>
<p><a href="https://www.cs.toronto.edu/~kriz/cifar.html" target="_blank" rel="external">CIFAR-10</a> é—®é¢˜æ”¶é›†äº†æ¥è‡ª 10ä¸ª ä¸åŒç§ç±»çš„ 60000å¼ å›¾ç‰‡, Cifar-10ä¸­çš„å›¾ç‰‡å¤§å°éƒ½æ˜¯å›ºå®šçš„ä¸”æ¯ä¸€å¼ å›¾ç‰‡ä¸­ä»…åŒ…å«ä¸€ä¸ªç§ç±»çš„å®ä½“ </p>
<p><a href="http://www.image-net.org/challenges/LSVRC/" target="_blank" rel="external">ImageNet</a> æ˜¯ä¸ºäº†æ›´åŠ è´´è¿‘çœŸå®ç¯å¢ƒä¸‹çš„å›¾åƒè¯†åˆ«é—®é¢˜ï¼ŒåŸºäº WordNetï¼Œ ç”±æ–¯å¦ç¦å¤§å­¦ï¼ˆStanford Universityï¼‰çš„æé£é£ï¼ˆFeifei Liï¼‰å¸¦å¤´æ•´ç†çš„ImageNetå¾ˆå¤§ç¨‹åº¦åœ°è§£å†³äº†è¿™ä¸¤ä¸ªé—®é¢˜ã€‚ ILSVRC2012 åŒ…å«æ¥è‡ª 1000 ä¸ªç±»åˆ« 120ä¸‡ å¼ å›¾ç‰‡.</p>
</blockquote>
<h2 id="2-CNN-ä»‹ç»ä¸å¸¸ç”¨ç»“æ„"><a href="#2-CNN-ä»‹ç»ä¸å¸¸ç”¨ç»“æ„" class="headerlink" title="2. CNN ä»‹ç»ä¸å¸¸ç”¨ç»“æ„"></a>2. CNN ä»‹ç»ä¸å¸¸ç”¨ç»“æ„</h2><p>è¿™éƒ¨åˆ†å†…å®¹è¯¦è§ <a href="/deeplearning/#4-Convolutional-Neural-Networks">Convolutional Neural Networks</a></p>
<p><a href="/2018/08/24/deeplearning/Convolutional-Neural-Networks-week2/">å¦‚ä½•æ­å»ºä¸€ä¸ªç¥ç»ç½‘ç»œï¼ŒåŒ…æ‹¬æœ€æ–°çš„å˜ä½“ï¼Œå¦‚: ResNet</a></p>
<h2 id="3-ç»å…¸-CNN-æ¨¡å‹"><a href="#3-ç»å…¸-CNN-æ¨¡å‹" class="headerlink" title="3. ç»å…¸ CNN æ¨¡å‹"></a>3. ç»å…¸ CNN æ¨¡å‹</h2><ul>
<li>LeNet-5</li>
<li>Inception</li>
<li>ResNet</li>
</ul>
<h3 id="3-1-LeNet-5-æ¨¡å‹"><a href="#3-1-LeNet-5-æ¨¡å‹" class="headerlink" title="3.1 LeNet-5 æ¨¡å‹"></a>3.1 LeNet-5 æ¨¡å‹</h3><p>è¯¥ç½‘ç»œ 1980s æå‡ºï¼Œä¸»è¦é’ˆå¯¹ç°åº¦å›¾åƒè®­ç»ƒçš„ï¼Œç”¨äºè¯†åˆ«æ‰‹å†™æ•°å­—ã€‚</p>
<h3 id="3-2-Inception-v3-æ¨¡å‹"><a href="#3-2-Inception-v3-æ¨¡å‹" class="headerlink" title="3.2 Inception-v3 æ¨¡å‹"></a>3.2 Inception-v3 æ¨¡å‹</h3><h2 id="4-CNN-è¿ç§»å­¦ä¹ "><a href="#4-CNN-è¿ç§»å­¦ä¹ " class="headerlink" title="4. CNN è¿ç§»å­¦ä¹ "></a>4. CNN è¿ç§»å­¦ä¹ </h2><h3 id="4-1-è¿ç§»å­¦ä¹ ä»‹ç»"><a href="#4-1-è¿ç§»å­¦ä¹ ä»‹ç»" class="headerlink" title="4.1 è¿ç§»å­¦ä¹ ä»‹ç»"></a>4.1 è¿ç§»å­¦ä¹ ä»‹ç»</h3><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/31534286" target="_blank" rel="external">çŸ¥ä¹ï¼šã€ŠTensorFlowï¼šå®æˆ˜Googleæ·±åº¦å­¦ä¹ æ¡†æ¶ã€‹ç¬”è®°ã€ä»£ç åŠå‹˜è¯¯-ç¬¬6ç«  å›¾åƒè¯†åˆ«ä¸å·ç§¯ç¥ç»ç½‘ç»œ-1</a></li>
<li><a href="http://b.7dtime.com/B076DGNXP1/11/0.html" target="_blank" rel="external">7å¤©æ—¶é—´è¯»ä¹¦ Tensorflow å®æˆ˜ Google æ·±åº¦å­¦ä¹ æ¡†æ¶</a></li>
<li><a href="https://blog.csdn.net/u011389706/article/details/81455750" target="_blank" rel="external">MNISTè¯†åˆ«è‡ªå·±æ‰‹å†™çš„æ•°å­—â€“è¿›é˜¶ç¯‡ï¼ˆCNNï¼‰</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tensorboard å¯è§†åŒ–å¥½å¸®æ‰‹ 1]]></title>
      <url>http://shopee.ai/2018/09/12/tensorflow/tf-4.1-tensorboard1/</url>
      <content type="html"><![CDATA[<p>å­¦ä¼šç”¨ Tensorflow è‡ªå¸¦çš„ tensorboard å»å¯è§†åŒ–æˆ‘ä»¬æ‰€å»ºé€ å‡ºæ¥çš„ç¥ç»ç½‘ç»œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ ç†è§£æ–¹å¼. </p>
<p>ç”¨æœ€ç›´è§‚çš„æµç¨‹å›¾å‘Šè¯‰ä½ , ä½ çš„ç¥ç»ç½‘ç»œæ˜¯é•¿æ€æ ·,æœ‰åŠ©äºä½ å‘ç°ç¼–ç¨‹ä¸­é—´çš„é—®é¢˜å’Œç–‘é—®.</p>
<a id="more"></a>
<h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p>è¿™æ¬¡æˆ‘ä»¬ä¼šä»‹ç»å¦‚ä½•å¯è§†åŒ–ç¥ç»ç½‘ç»œã€‚å› ä¸ºå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½æ˜¯åšå¥½äº†ä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªå›¾åƒå¯ä»¥å±•ç¤ºç»™å¤§å®¶çœ‹ã€‚</p>
<p><strong>TensorFlow</strong> çš„å¯è§†åŒ–å·¥å…· <strong>Tensorboard</strong> : é€šè¿‡ä½¿ç”¨è¿™ä¸ªå·¥å…·æˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚çš„çœ‹åˆ°æ•´ä¸ªç¥ç»ç½‘ç»œçš„ç»“æ„ã€æ¡†æ¶ã€‚ </p>
<p>ä»Šå¤©è¦æ˜¾ç¤ºçš„ç¥ç»ç½‘ç»œå·®ä¸å¤šæ˜¯è¿™æ ·å­çš„</p>
<p><img src="/images/tensorflow/tf-4.1_1.png" width="600"></p>
<p>åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å±•å¼€çœ‹æ¯ä¸ªlayerä¸­çš„ä¸€äº›å…·ä½“çš„ç»“æ„ï¼š</p>
<p><img src="/images/tensorflow/tf-4.1_2.png" width="600"></p>
<p>å¥½ï¼Œé€šè¿‡é˜…è¯»ä»£ç å’Œä¹‹å‰çš„å›¾ç‰‡æˆ‘ä»¬å¤§æ¦‚çŸ¥é“äº†æ­¤å¤„æ˜¯æœ‰:</p>
<blockquote>
<ul>
<li>ä¸€ä¸ªè¾“å…¥å±‚ï¼ˆ<strong>inputs</strong>ï¼‰</li>
<li>ä¸€ä¸ªéšå«å±‚ï¼ˆ<strong>layer</strong>ï¼‰</li>
<li>ä¸€ä¸ªè¾“å‡ºå±‚ï¼ˆ<strong>output</strong>ï¼‰ </li>
</ul>
</blockquote>
<p>ç°åœ¨å¯ä»¥çœ‹çœ‹å¦‚ä½•è¿›è¡Œå¯è§†åŒ–.</p>
<h2 id="æ­å»ºå›¾çº¸"><a href="#æ­å»ºå›¾çº¸" class="headerlink" title="æ­å»ºå›¾çº¸"></a>æ­å»ºå›¾çº¸</h2><p>é¦–å…ˆä» <code>Input</code> å¼€å§‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># define placeholder for inputs to network</span></span><br><span class="line">xs = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">1</span>])</span><br><span class="line">ys = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>å¯¹äº input æˆ‘ä»¬è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š é¦–å…ˆï¼Œå¯ä»¥ä¸º<code>xs</code>æŒ‡å®šåç§°ä¸º<code>x_in</code>, <code>ys</code> åŒæ ·ã€‚ :</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">xs= tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">1</span>],name=<span class="string">'x_in'</span>)</span><br><span class="line">ys= tf.placeholder(tf.loat32, [<span class="keyword">None</span>, <span class="number">1</span>],name=<span class="string">'y_in'</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™é‡ŒæŒ‡å®šçš„åç§°å°†æ¥ä¼šåœ¨å¯è§†åŒ–çš„å›¾å±‚ <code>inputs</code> ä¸­æ˜¾ç¤ºå‡ºæ¥</p>
<p>ä½¿ç”¨ <code>with tf.name_scope(&#39;inputs&#39;)</code> å¯ä»¥å°† <code>xs</code> å’Œ <code>ys</code> åŒ…å«è¿›æ¥ï¼Œå½¢æˆä¸€ä¸ªå¤§çš„å›¾å±‚ï¼Œå›¾å±‚çš„åå­—å°±æ˜¯ <code>with tf.name_scope()</code> æ–¹æ³•é‡Œçš„å‚æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">'inputs'</span>):</span><br><span class="line">    <span class="comment"># define placeholder for inputs to network</span></span><br><span class="line">    xs = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">1</span>])</span><br><span class="line">    ys = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥å¼€å§‹ç¼–è¾‘ <code>layer</code> ï¼Œ è¯·çœ‹ç¼–è¾‘å‰çš„ç¨‹åºç‰‡æ®µ ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_layer</span><span class="params">(inputs, in_size, out_size, activation_function=None)</span>:</span></span><br><span class="line">    <span class="comment"># add one more layer and return the output of this layer</span></span><br><span class="line">    Weights = tf.Variable(tf.random_normal([in_size, out_size]))</span><br><span class="line">    biases = tf.Variable(tf.zeros([<span class="number">1</span>, out_size]) + <span class="number">0.1</span>)</span><br><span class="line">    Wx_plus_b = tf.add(tf.matmul(inputs, Weights), biases)</span><br><span class="line">    <span class="keyword">if</span> activation_function <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        outputs = Wx_plus_b</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        outputs = activation_function(Wx_plus_b, )</span><br><span class="line">    <span class="keyword">return</span> outputs</span><br></pre></td></tr></table></figure>
<h3 id="2-1-ç¼–è¾‘å-add-layer"><a href="#2-1-ç¼–è¾‘å-add-layer" class="headerlink" title="2.1 ç¼–è¾‘å add_layer"></a>2.1 ç¼–è¾‘å add_layer</h3><p><font color="green"><strong>ç¼–è¾‘åï¼Œ è¿™é‡Œçš„åå­—åº”è¯¥å« layer, ä¸‹é¢æ˜¯ç¼–è¾‘åçš„</strong></font>:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_layer</span><span class="params">(inputs, in_size, out_size, activation_function=None)</span>:</span></span><br><span class="line">    <span class="comment"># add one more layer and return the output of this layer</span></span><br><span class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">'layer'</span>):</span><br><span class="line">        Weights= tf.Variable(tf.random_normal([in_size, out_size]))</span><br><span class="line">        <span class="comment"># and so on...</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å®šä¹‰å®Œå¤§çš„æ¡†æ¶layerä¹‹åï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å®šä¹‰æ¯ä¸€ä¸ªâ€™æ¡†æ¶â€˜é‡Œé¢çš„å°éƒ¨ä»¶ï¼š(Weights biases å’Œ activation function): ç°åœ¨ç°å¯¹ <code>Weights</code> å®šä¹‰ï¼š å®šä¹‰çš„æ–¹æ³•åŒä¸Šï¼Œå¯ä»¥ä½¿ç”¨<code>tf.name.scope()</code> æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åœ¨ <code>Weights</code> ä¸­æŒ‡å®šåç§° <code>W</code> ã€‚ å³ä¸ºï¼š</p>
<p>æ¥ç€ç»§ç»­å®šä¹‰ <code>biases</code> ï¼Œ å®šä¹‰æ–¹å¼åŒä¸Šã€‚</p>
<p><code>activation_function</code> çš„è¯ï¼Œå¯ä»¥æš‚æ—¶å¿½ç•¥ã€‚å› ä¸ºå½“ä½ è‡ªå·±é€‰æ‹©ç”¨ tensorflow ä¸­çš„æ¿€åŠ±å‡½æ•°ï¼ˆactivation functionï¼‰çš„æ—¶å€™ï¼Œtensorflowä¼šé»˜è®¤æ·»åŠ åç§°ã€‚ æœ€ç»ˆï¼Œlayerå½¢å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_layer</span><span class="params">(inputs, in_size, out_size, activation_function=None)</span>:</span></span><br><span class="line">    <span class="comment"># add one more layer and return the output of this layer</span></span><br><span class="line">    <span class="keyword">with</span> tf.name_scope(<span class="string">'layer'</span>):</span><br><span class="line">        <span class="keyword">with</span> tf.name_scope(<span class="string">'weights'</span>):</span><br><span class="line">            Weights = tf.Variable(</span><br><span class="line">            tf.random_normal([in_size, out_size]), </span><br><span class="line">            name=<span class="string">'W'</span>)</span><br><span class="line">        <span class="keyword">with</span> tf.name_scope(<span class="string">'biases'</span>):</span><br><span class="line">            biases = tf.Variable(</span><br><span class="line">            tf.zeros([<span class="number">1</span>, out_size]) + <span class="number">0.1</span>, </span><br><span class="line">            name=<span class="string">'b'</span>)</span><br><span class="line">        <span class="keyword">with</span> tf.name_scope(<span class="string">'Wx_plus_b'</span>):</span><br><span class="line">            Wx_plus_b = tf.add(</span><br><span class="line">            tf.matmul(inputs, Weights), </span><br><span class="line">            biases)</span><br><span class="line">        <span class="keyword">if</span> activation_function <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            outputs = Wx_plus_b</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            outputs = activation_function(Wx_plus_b, )</span><br><span class="line">        <span class="keyword">return</span> outputs</span><br></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼šï¼ˆæœ‰æ²¡æœ‰çœ‹è§åˆšæ‰å®šä¹‰ layer é‡Œé¢çš„â€œå†…éƒ¨æ„ä»¶â€å‘¢ï¼Ÿï¼‰</p>
<p><img src="/images/tensorflow/tf-4.1_4.png" width="600"></p>
<p>æœ€åç¼–è¾‘ <code>loss</code> éƒ¨åˆ†ï¼šå°† <code>with tf.name_scope()</code> æ·»åŠ åœ¨ <code>loss</code> ä¸Šæ–¹ï¼Œå¹¶ä¸ºå®ƒèµ·åä¸º <code>loss</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># the error between prediciton and real data</span></span><br><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">'loss'</span>):</span><br><span class="line">    loss = tf.reduce_mean(</span><br><span class="line">    tf.reduce_sum(</span><br><span class="line">    tf.square(ys - prediction),</span><br><span class="line">    eduction_indices=[<span class="number">1</span>]</span><br><span class="line">    ))</span><br></pre></td></tr></table></figure>
<p>è¿™å¥è¯å°±æ˜¯â€œç»˜åˆ¶â€ loss äº†ï¼Œ å¦‚ä¸‹ï¼š</p>
<p><img src="/images/tensorflow/tf-4.1_5.png" width="600"></p>
<p>ä½¿ç”¨ <code>with tf.name_scope()</code> å†æ¬¡å¯¹ <code>train_step</code> éƒ¨åˆ†è¿›è¡Œç¼–è¾‘, å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">'train'</span>):</span><br><span class="line">    train_step = tf.train.GradientDescentOptimizer(<span class="number">0.1</span>).minimize(loss)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>tf.summary.FileWriter()</code> å°†ä¸Šé¢â€˜ç»˜ç”»â€™å‡ºçš„å›¾ä¿å­˜åˆ°ä¸€ä¸ªç›®å½•ä¸­ï¼Œä»¥æ–¹ä¾¿åæœŸåœ¨æµè§ˆå™¨ä¸­å¯ä»¥æµè§ˆã€‚ è¿™ä¸ªæ–¹æ³•ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°éœ€è¦ä½¿ç”¨ <code>sess.graph</code> ï¼Œ å› æ­¤æˆ‘ä»¬éœ€è¦æŠŠè¿™å¥è¯æ”¾åœ¨è·å– <code>session</code> çš„åé¢ã€‚ è¿™é‡Œçš„ <code>graph</code> æ˜¯å°†å‰é¢å®šä¹‰çš„æ¡†æ¶ä¿¡æ¯æ”¶é›†èµ·æ¥ï¼Œç„¶åæ”¾åœ¨ <code>logs/</code> ç›®å½•ä¸‹é¢ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sess = tf.Session() <span class="comment"># get session</span></span><br><span class="line"><span class="comment"># tf.train.SummaryWriter soon be deprecated, use following</span></span><br><span class="line">writer = tf.summary.FileWriter(<span class="string">"logs/"</span>, sess.graph)</span><br></pre></td></tr></table></figure>
<p>æœ€ååœ¨ä½ çš„terminalï¼ˆç»ˆç«¯ï¼‰ä¸­ ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tensorboard --logdir logs</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶å°†ç»ˆç«¯ä¸­è¾“å‡ºçš„ç½‘å€å¤åˆ¶åˆ°æµè§ˆå™¨ä¸­ï¼Œä¾¿å¯ä»¥çœ‹åˆ°ä¹‹å‰å®šä¹‰çš„è§†å›¾æ¡†æ¶äº†ã€‚</p>
<p>tensorboard è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„å‚æ•°ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥å¤šå¤šäº†è§£, å¯ä»¥ä½¿ç”¨ tensorboard â€“help æŸ¥çœ‹tensorboardçš„è¯¦ç»†å‚æ•° æœ€ç»ˆçš„å…¨éƒ¨ä»£ç åœ¨è¿™é‡Œ</p>
<h2 id="å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"><a href="#å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"></a>å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜</h2><p>(1) ä¸ Tensorboard å…¼å®¹çš„æµè§ˆå™¨æ˜¯ â€œGoogle Chromeâ€. ä½¿ç”¨å…¶ä»–çš„æµè§ˆå™¨ä¸ä¿è¯æ‰€æœ‰å†…å®¹éƒ½èƒ½æ­£å¸¸æ˜¾ç¤º.</p>
<p>(2) è¯·ä½¿ç”¨ <a href="http://localhost:6006" target="_blank" rel="external">http://localhost:6006</a>, å¤§å¤šæ•°æœ‹å‹éƒ½æ˜¯è¿™ä¸ªé—®é¢˜.</p>
<p>(3) è¯·ç¡®ä¿ä½ çš„ tensorboard æŒ‡ä»¤æ˜¯åœ¨ä½ çš„ logs æ–‡ä»¶æ ¹ç›®å½•æ‰§è¡Œçš„. å¦‚æœåœ¨å…¶ä»–ç›®å½•ä¸‹, æ¯”å¦‚ <code>Desktop</code> ç­‰, å¯èƒ½ä¸ä¼šæˆåŠŸçœ‹åˆ°å›¾. æ¯”å¦‚åœ¨ä¸‹é¢è¿™ä¸ªç›®å½•, ä½ è¦ cd åˆ° <code>project</code> è¿™ä¸ªåœ°æ–¹æ‰§è¡Œ <code>/project &gt; tensorboard --logdir logs</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- project</span><br><span class="line">   - logs</span><br><span class="line">   model.py</span><br><span class="line">   env.py</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ‰çš„æœ‹å‹ä½¿ç”¨ anaconda ä¸‹çš„ python3.5 çš„è™šæ‹Ÿç¯å¢ƒ, å¦‚æœä½ è¾“å…¥ tensorboard çš„æŒ‡ä»¤, å‡ºç°æŠ¥é”™: <code>&quot;tensorboard&quot; is not recognized as an internal or external command...</code></p>
<p>è§£å†³æ–¹æ³•çš„å…³é”®å°±æ˜¯éœ€è¦æ¿€æ´»TensorFlow. ç®¡ç†å‘˜æ¨¡å¼æ‰“å¼€ Anaconda Prompt, è¾“å…¥ activate tensorflow, æ¥ç€æŒ‰ç…§ä¸Šé¢çš„æµç¨‹æ‰§è¡Œ tensorboard æŒ‡ä»¤.</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python</a></li>
<li><a href="https://github.com/MorvanZhou/tutorials/blob/master/tensorflowTUT/tf14_tensorboard/full_code.py" target="_blank" rel="external">è«çƒ¦ä»£ç  tf14_tensorboard/full_code.py</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tensorflow Speed Up Training]]></title>
      <url>http://shopee.ai/2018/09/12/tensorflow/tf-3.3-A-speed-up-learning/</url>
      <content type="html"><![CDATA[<p>æ€ä¹ˆæ ·åŠ é€Ÿä½ çš„ç¥ç»ç½‘ç»œè®­ç»ƒè¿‡ç¨‹. Speed Up Training</p>
<a id="more"></a>
<p>å­¦ä¹ èµ„æ–™:</p>
<ul>
<li>cs231n å„ç§ Optimizer çš„å¯¹æ¯” <a href="http://cs231n.github.io/neural-networks-3/" target="_blank" rel="external">é“¾æ¥</a> (è‹±æ–‡)</li>
<li>Tensorflow çš„å¯ç”¨ Optimizer <a href="https://www.tensorflow.org/api_guides/python/train" target="_blank" rel="external">é“¾æ¥</a></li>
<li>Improving DNN (week2) Optimization Algorithm <a href="/2018/07/21/deeplearning-ai-Improving-Deep-Neural-Networks-week2/#3-Momentum">é“¾æ¥</a></li>
</ul>
<p>åŒ…æ‹¬ä»¥ä¸‹å‡ ç§æ¨¡å¼:</p>
<blockquote>
<ul>
<li>Stochastic Gradient Descent (SGD)</li>
<li>Momentum</li>
<li>AdaGrad</li>
<li>RMSProp</li>
<li>Adam</li>
</ul>
</blockquote>
<p><img src="/images/tensorflow/tf-3.4-speedup1.png" width="600"></p>
<p>è¶Šå¤æ‚çš„ç¥ç»ç½‘ç»œ , è¶Šå¤šçš„æ•°æ® , æˆ‘ä»¬éœ€è¦åœ¨è®­ç»ƒç¥ç»ç½‘ç»œçš„è¿‡ç¨‹ä¸ŠèŠ±è´¹çš„æ—¶é—´ä¹Ÿå°±è¶Šå¤š. åŸå› å¾ˆç®€å•, å°±æ˜¯å› ä¸ºè®¡ç®—é‡å¤ªå¤§äº†. å¯æ˜¯å¾€å¾€æœ‰æ—¶å€™ä¸ºäº†è§£å†³å¤æ‚çš„é—®é¢˜, å¤æ‚çš„ç»“æ„å’Œå¤§æ•°æ®åˆæ˜¯ä¸èƒ½é¿å…çš„, æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯»æ‰¾ä¸€äº›æ–¹æ³•, è®©ç¥ç»ç½‘ç»œèªæ˜èµ·æ¥, å¿«èµ·æ¥.</p>
<h2 id="1-Stochastic-Gradient-Descent-SGD"><a href="#1-Stochastic-Gradient-Descent-SGD" class="headerlink" title="1. Stochastic Gradient Descent (SGD)"></a>1. Stochastic Gradient Descent (SGD)</h2><p><img src="/images/tensorflow/tf-3.4-speedup2.png" width="600"></p>
<p>æ‰€ä»¥, æœ€åŸºç¡€çš„æ–¹æ³•å°±æ˜¯ SGD å•¦, æƒ³åƒçº¢è‰²æ–¹å—æ˜¯æˆ‘ä»¬è¦è®­ç»ƒçš„ data, å¦‚æœç”¨æ™®é€šçš„è®­ç»ƒæ–¹æ³•, å°±éœ€è¦é‡å¤ä¸æ–­çš„æŠŠæ•´å¥—æ•°æ®æ”¾å…¥ç¥ç»ç½‘ç»œ <strong>NN</strong> è®­ç»ƒ, è¿™æ ·æ¶ˆè€—çš„è®¡ç®—èµ„æºä¼šå¾ˆå¤§.</p>
<p>æˆ‘ä»¬æ¢ä¸€ç§æ€è·¯, å¦‚æœæŠŠè¿™äº›æ•°æ®æ‹†åˆ†æˆå°æ‰¹å°æ‰¹çš„, ç„¶åå†åˆ†æ‰¹ä¸æ–­æ”¾å…¥ NN ä¸­è®¡ç®—, è¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ SGD çš„æ­£ç¡®æ‰“å¼€æ–¹å¼äº†. æ¯æ¬¡ä½¿ç”¨æ‰¹æ•°æ®, è™½ç„¶ä¸èƒ½åæ˜ æ•´ä½“æ•°æ®çš„æƒ…å†µ, ä¸è¿‡å´å¾ˆå¤§ç¨‹åº¦ä¸ŠåŠ é€Ÿäº† NN çš„è®­ç»ƒè¿‡ç¨‹, è€Œä¸”ä¹Ÿä¸ä¼šä¸¢å¤±å¤ªå¤šå‡†ç¡®ç‡.å¦‚æœè¿ç”¨ä¸Šäº† SGD, ä½ è¿˜æ˜¯å«Œè®­ç»ƒé€Ÿåº¦æ…¢, é‚£æ€ä¹ˆåŠ?</p>
<p><img src="/images/tensorflow/tf-3.4-speedup3.png" width="400"></p>
<p>æ²¡é—®é¢˜, äº‹å®è¯æ˜, SGD å¹¶ä¸æ˜¯æœ€å¿«é€Ÿçš„è®­ç»ƒæ–¹æ³•, çº¢è‰²çš„çº¿æ˜¯ SGD, ä½†å®ƒåˆ°è¾¾å­¦ä¹ ç›®æ ‡çš„æ—¶é—´æ˜¯åœ¨è¿™äº›æ–¹æ³•ä¸­æœ€é•¿çš„ä¸€ç§. æˆ‘ä»¬è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é€”å¾„æ¥åŠ é€Ÿè®­ç»ƒ.</p>
<h2 id="2-Momentum-æ›´æ–°æ–¹æ³•"><a href="#2-Momentum-æ›´æ–°æ–¹æ³•" class="headerlink" title="2. Momentum æ›´æ–°æ–¹æ³•"></a>2. Momentum æ›´æ–°æ–¹æ³•</h2><p><img src="/images/tensorflow/tf-3.4-speedup4.png" width="650"></p>
<p>å¤§å¤šæ•°å…¶ä»–é€”å¾„æ˜¯åœ¨æ›´æ–°ç¥ç»ç½‘ç»œå‚æ•°é‚£ä¸€æ­¥ä¸ŠåŠ¨åŠ¨æ‰‹è„š. ä¼ ç»Ÿçš„å‚æ•° W çš„æ›´æ–°æ˜¯æŠŠåŸå§‹çš„ W ç´¯åŠ ä¸Šä¸€ä¸ªè´Ÿçš„å­¦ä¹ ç‡(learning rate) ä¹˜ä»¥æ ¡æ­£å€¼ (dx). è¿™ç§æ–¹æ³•å¯èƒ½ä¼šè®©å­¦ä¹ è¿‡ç¨‹æ›²æŠ˜æ— æ¯”, çœ‹èµ·æ¥åƒ å–é†‰çš„äººå›å®¶æ—¶, æ‘‡æ‘‡æ™ƒæ™ƒèµ°äº†å¾ˆå¤šå¼¯è·¯.</p>
<p><img src="/images/tensorflow/tf-3.4-speedup5.png" width="650"></p>
<p>æ‰€ä»¥æˆ‘ä»¬æŠŠè¿™ä¸ªäººä»å¹³åœ°ä¸Šæ”¾åˆ°äº†ä¸€ä¸ªæ–œå¡ä¸Š, åªè¦ä»–<strong><code>å¾€ä¸‹å¡çš„æ–¹å‘èµ°ä¸€ç‚¹ç‚¹, ç”±äºå‘ä¸‹çš„æƒ¯æ€§</code></strong>, ä»–ä¸è‡ªè§‰åœ°å°±ä¸€ç›´å¾€ä¸‹èµ°, èµ°çš„å¼¯è·¯ä¹Ÿå˜å°‘äº†. è¿™å°±æ˜¯ Momentum å‚æ•°æ›´æ–°. å¦å¤–ä¸€ç§åŠ é€Ÿæ–¹æ³•å« <strong>AdaGrad</strong>.</p>
<h2 id="3-AdaGrad-æ›´æ–°æ–¹æ³•"><a href="#3-AdaGrad-æ›´æ–°æ–¹æ³•" class="headerlink" title="3. AdaGrad æ›´æ–°æ–¹æ³•"></a>3. AdaGrad æ›´æ–°æ–¹æ³•</h2><p><img src="/images/tensorflow/tf-3.4-speedup6.png" width="650"></p>
<p>è¿™ç§æ–¹æ³•æ˜¯åœ¨å­¦ä¹ ç‡ä¸Šé¢åŠ¨æ‰‹è„š, ä½¿å¾—æ¯ä¸€ä¸ªå‚æ•°æ›´æ–°éƒ½ä¼šæœ‰è‡ªå·±ä¸ä¼—ä¸åŒçš„å­¦ä¹ ç‡, ä»–çš„ä½œç”¨å’Œ momentum ç±»ä¼¼, ä¸è¿‡ä¸æ˜¯ç»™å–é†‰é…’çš„äººå®‰æ’å¦ä¸€ä¸ªä¸‹å¡, è€Œæ˜¯ç»™ä»–ä¸€åŒä¸å¥½èµ°è·¯çš„é‹å­, ä½¿å¾—ä»–ä¸€æ‘‡æ™ƒç€èµ°è·¯å°±è„šç–¼, é‹å­æˆä¸ºäº†èµ°å¼¯è·¯çš„é˜»åŠ›, é€¼ç€ä»–å¾€å‰ç›´ç€èµ°. ä»–çš„æ•°å­¦å½¢å¼æ˜¯è¿™æ ·çš„. æ¥ä¸‹æ¥åˆæœ‰ä»€ä¹ˆæ–¹æ³•å‘¢? å¦‚æœæŠŠä¸‹å¡å’Œä¸å¥½èµ°è·¯çš„é‹å­åˆå¹¶èµ·æ¥, æ˜¯ä¸æ˜¯æ›´å¥½å‘¢? æ²¡é”™, è¿™æ ·æˆ‘ä»¬å°±æœ‰äº† RMSProp æ›´æ–°æ–¹æ³•.</p>
<h2 id="4-RMSProp-æ›´æ–°æ–¹æ³•"><a href="#4-RMSProp-æ›´æ–°æ–¹æ³•" class="headerlink" title="4. RMSProp æ›´æ–°æ–¹æ³•"></a>4. RMSProp æ›´æ–°æ–¹æ³•</h2><p><img src="/images/tensorflow/tf-3.4-speedup7.png" width="650"></p>
<p>æœ‰äº† momentum çš„æƒ¯æ€§åŸåˆ™ , åŠ ä¸Š adagrad çš„å¯¹é”™è¯¯æ–¹å‘çš„é˜»åŠ›, æˆ‘ä»¬å°±èƒ½åˆå¹¶æˆè¿™æ ·. è®© RMSPropåŒæ—¶å…·å¤‡ä»–ä»¬ä¸¤ç§æ–¹æ³•çš„ä¼˜åŠ¿. ä¸è¿‡ç»†å¿ƒçš„åŒå­¦ä»¬è‚¯å®šçœ‹å‡ºæ¥äº†, ä¼¼ä¹åœ¨ RMSProp ä¸­å°‘äº†äº›ä»€ä¹ˆ. åŸæ¥æ˜¯æˆ‘ä»¬è¿˜æ²¡æŠŠ Momentumåˆå¹¶å®Œå…¨, RMSProp è¿˜ç¼ºå°‘äº† momentum ä¸­çš„ è¿™ä¸€éƒ¨åˆ†. æ‰€ä»¥, æˆ‘ä»¬åœ¨ Adam æ–¹æ³•ä¸­è¡¥ä¸Šäº†è¿™ç§æƒ³æ³•.</p>
<h2 id="5-Adam-æ›´æ–°æ–¹æ³•"><a href="#5-Adam-æ›´æ–°æ–¹æ³•" class="headerlink" title="5. Adam æ›´æ–°æ–¹æ³•"></a>5. Adam æ›´æ–°æ–¹æ³•</h2><p><img src="/images/tensorflow/tf-3.4-speedup8.png" width="650"></p>
<p>è®¡ç®—m æ—¶æœ‰ momentum ä¸‹å¡çš„å±æ€§, è®¡ç®— v æ—¶æœ‰ adagrad é˜»åŠ›çš„å±æ€§, ç„¶åå†æ›´æ–°å‚æ•°æ—¶ æŠŠ m å’Œ V éƒ½è€ƒè™‘è¿›å». å®éªŒè¯æ˜, å¤§å¤šæ•°æ—¶å€™, ä½¿ç”¨ adam éƒ½èƒ½åˆå¿«åˆå¥½çš„è¾¾åˆ°ç›®æ ‡, è¿…é€Ÿæ”¶æ•›. æ‰€ä»¥è¯´, åœ¨åŠ é€Ÿç¥ç»ç½‘ç»œè®­ç»ƒçš„æ—¶å€™, ä¸€ä¸ªä¸‹å¡, ä¸€åŒç ´é‹å­, åŠŸä¸å¯æ²¡.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[numpy.random.normal å‡½æ•°]]></title>
      <url>http://shopee.ai/2018/09/11/python/numpy-pandas/py-numpy-9-numpy.random.normal/</url>
      <content type="html"><![CDATA[<p>numpy.random.normal å‡½æ•°ï¼Œæœ‰ä¸‰ä¸ªå‚æ•°ï¼ˆ<strong>loc, scale, size</strong>ï¼‰ï¼Œä»£è¡¨ç”Ÿæˆçš„é«˜æ–¯åˆ†å¸ƒéšæœºæ•°çš„å‡å€¼ã€æ–¹å·®ä»¥åŠè¾“å‡ºçš„ size. </p>
<a id="more"></a>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.random.normal(<span class="number">0</span>, <span class="number">0.05</span>, (<span class="number">7</span>,<span class="number">1</span>)).astype(np.float32)</span><br></pre></td></tr></table></figure>
<p>Output :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">array([[-0.05229944],</span><br><span class="line">       [ 0.01754326],</span><br><span class="line">       [ 0.01764081],</span><br><span class="line">       [-0.03058357],</span><br><span class="line">       [-0.05406121],</span><br><span class="line">       [-0.07284269],</span><br><span class="line">       [ 0.00289147]], dtype=float32)</span><br></pre></td></tr></table></figure>
<p><strong>Scipy Help</strong>: <strong>numpy.random.normal</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Parameters:	</span><br><span class="line">loc : float <span class="keyword">or</span> array_like of floats</span><br><span class="line">Mean (â€œcentreâ€) of the distribution.</span><br><span class="line"></span><br><span class="line">scale : float <span class="keyword">or</span> array_like of floats</span><br><span class="line">Standard deviation (spread <span class="keyword">or</span> â€œwidthâ€) of the distribution.</span><br><span class="line"></span><br><span class="line">size : int <span class="keyword">or</span> tuple of ints, optional</span><br><span class="line">Output shape. If the given shape <span class="keyword">is</span>, e.g., (m, n, k), then m * n * k samples are drawn. If size <span class="keyword">is</span> <span class="keyword">None</span> (default), a single value <span class="keyword">is</span> returned <span class="keyword">if</span> loc <span class="keyword">and</span> scale are both scalars. Otherwise, np.broadcast(loc, scale).size samples are drawn.</span><br><span class="line"></span><br><span class="line">Returns:	</span><br><span class="line">out : ndarray <span class="keyword">or</span> scalar</span><br><span class="line">Drawn samples <span class="keyword">from</span> the parameterized normal distribution.</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.normal.html" target="_blank" rel="external">numpy.random.normal</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[numpy.newaxis è½¬å˜çŸ©é˜µçš„å½¢ç‹€]]></title>
      <url>http://shopee.ai/2018/09/11/python/numpy-pandas/py-numpy-9-newaxis/</url>
      <content type="html"><![CDATA[<p>æœ‰ä¸€å€‹<strong>ä¸€ç¶­é™£åˆ— x1</strong>ï¼Œæˆ‘åˆ†åˆ¥æƒ³è¦æŠŠå®ƒè®Šæˆä¸€å€‹ 3*1 çš„çŸ©é™£ <strong>x2</strong>ï¼Œä»¥åŠ 1*3 çš„çŸ©é™£ <strong>x3</strong>ï¼Œä½œæ³•å¦‚ä¸‹ã€‚</p>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x1 = np.array([<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>], float)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ‰ä¸€å€‹ä¸€ç¶­é™£åˆ—x1ï¼Œæˆ‘åˆ†åˆ¥æƒ³è¦æŠŠå®ƒè®Šæˆä¸€å€‹ 3*1 çš„çŸ©é™£x2ï¼Œä»¥åŠ 1*3 çš„çŸ©é™£x3ï¼Œä½œæ³•å¦‚ä¸‹ã€‚</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"shape of x1 is "</span>, x1.shape)</span><br><span class="line">print(x1)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"-------------"</span>)</span><br><span class="line"></span><br><span class="line">x2 = x1[:, np.newaxis]</span><br><span class="line">print(<span class="string">"shape of x2 is "</span>, x2.shape)</span><br><span class="line">print(x2)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"-------------"</span>)</span><br><span class="line"></span><br><span class="line">x3 = x1[np.newaxis, :]</span><br><span class="line">print(<span class="string">"shape of x3 is "</span>, x3.shape)</span><br><span class="line">print(x3)</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shape of x1 is  (3,)</span><br><span class="line">[ 10.  20.  30.]</span><br><span class="line">-------------</span><br><span class="line">shape of x2 is  (3, 1)</span><br><span class="line">[[ 10.]</span><br><span class="line"> [ 20.]</span><br><span class="line"> [ 30.]]</span><br><span class="line">-------------</span><br><span class="line">shape of x3 is  (1, 3)</span><br><span class="line">[[ 10.  20.  30.]]</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.ben-do.github.io/2016/09/15/change-shape-of-matrix-by-numpy/" target="_blank" rel="external">åˆ©ç”¨numpyçš„newaxisè½‰è®ŠçŸ©é™£çš„å½¢ç‹€</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tensorflow ä¾‹å­3 ï¼š å»ºé€ ç¥ç»ç½‘ç»œ]]></title>
      <url>http://shopee.ai/2018/09/11/tensorflow/tf-3.2-create-NN/</url>
      <content type="html"><![CDATA[<p>è¿™æ¬¡æåˆ°äº†æ€æ ·å»ºé€ ä¸€ä¸ªå®Œæ•´çš„ç¥ç»ç½‘ç»œ, åŒ…æ‹¬æ·»åŠ  <strong>ç¥ç»å±‚</strong>, <strong>è®¡ç®—è¯¯å·®</strong>, <strong>è®­ç»ƒæ­¥éª¤</strong>, åˆ¤æ–­æ˜¯å¦åœ¨å­¦ä¹ .</p>
<a id="more"></a>
<h2 id="1-add-layer-åŠŸèƒ½"><a href="#1-add-layer-åŠŸèƒ½" class="headerlink" title="1. add_layer åŠŸèƒ½"></a>1. add_layer åŠŸèƒ½</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯¼å…¥æœ¬æ¬¡æ‰€éœ€çš„æ¨¡å—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„é€ æ·»åŠ ä¸€ä¸ªç¥ç»å±‚çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_layer</span><span class="params">(inputs, in_size, out_size, activation_function=None)</span>:</span></span><br><span class="line"></span><br><span class="line">    Weights = tf.Variable(tf.random_normal([in_size, out_size]))</span><br><span class="line">    biases = tf.Variable(tf.zeros([<span class="number">1</span>, out_size]) + <span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">    Wx_plus_b = tf.matmul(inputs, Weights) + biases</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> activation_function <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        outputs = Wx_plus_b</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        outputs = activation_function(Wx_plus_b)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> outputs</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-n7hl2gmf.html" target="_blank" rel="external">TensorFlowéšæœºå€¼: tf.random_normalå‡½æ•°ï¼š</a> å°†è¿”å›ä¸€ä¸ªæŒ‡å®šå½¢çŠ¶çš„å¼ é‡ï¼Œé€šè¿‡éšæœºçš„æ­£å¸¸å€¼å¡«å……</p>
<p>tf.random_normal(shape, mean=0.0, stddev=1.0, dtype=tf.float32, seed=None, name=None)</p>
</blockquote>
<h2 id="2-å¯¼å…¥æ•°æ®"><a href="#2-å¯¼å…¥æ•°æ®" class="headerlink" title="2. å¯¼å…¥æ•°æ®"></a>2. å¯¼å…¥æ•°æ®</h2><p>æ„å»ºæ‰€éœ€çš„æ•°æ®ã€‚ </p>
<p>è¿™é‡Œçš„ <code>x_data</code> å’Œ <code>y_data</code> å¹¶ä¸æ˜¯ä¸¥æ ¼çš„ä¸€å…ƒäºŒæ¬¡å‡½æ•°çš„å…³ç³»ï¼Œå› ä¸ºæˆ‘ä»¬å¤šåŠ äº†ä¸€ä¸ª <code>noise</code>, è¿™æ ·çœ‹èµ·æ¥ä¼šæ›´åƒçœŸå®æƒ…å†µ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x_data = np.linspace(<span class="number">-1</span>,<span class="number">1</span>,<span class="number">300</span>, dtype=np.float32)[:, np.newaxis]</span><br><span class="line"><span class="comment"># numpy.linspace(start, stop, num=50, endpoint=True, retstep=False, dtype=None)</span></span><br><span class="line"><span class="comment"># å¾—åˆ° 300 ä¸ªå¤§å°çš„ä¸€ç»´æ•°ç»„ï¼Œ é€šè¿‡ [:, np.newaxis] è¡Œå˜åˆ—ï¼Œå˜ä¸º 300 è¡Œï¼Œ1 åˆ— çš„äºŒç»´ æ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># numpy.random.normal(loc=0.0 å‡å€¼, scale=1.0 æ ‡å‡†å·®, size=None å½¢çŠ¶)</span></span><br><span class="line">noise = np.random.normal(<span class="number">0</span>, <span class="number">0.05</span>, x_data.shape).astype(np.float32)</span><br><span class="line"></span><br><span class="line">y_data = np.square(x_data) - <span class="number">0.5</span> + noise</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ©ç”¨å ä½ç¬¦å®šä¹‰æˆ‘ä»¬æ‰€éœ€çš„ç¥ç»ç½‘ç»œçš„è¾“å…¥ã€‚ `tf.placeholder()` å°±æ˜¯ä»£è¡¨å ä½ç¬¦</span></span><br><span class="line"><span class="comment"># è¿™é‡Œçš„ `None` ä»£è¡¨æ— è®ºè¾“å…¥æœ‰å¤šå°‘éƒ½å¯ä»¥ï¼Œå› ä¸ºè¾“å…¥åªæœ‰ä¸€ä¸ªç‰¹å¾ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ `1`ã€‚</span></span><br><span class="line"></span><br><span class="line">xs = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">1</span>])</span><br><span class="line">ys = tf.placeholder(tf.float32, [<span class="keyword">None</span>, <span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å®šä¹‰ç¥ç»å±‚äº†ã€‚ é€šå¸¸ç¥ç»å±‚éƒ½åŒ…æ‹¬ <strong>input</strong>è¾“å…¥å±‚ã€<strong>hide</strong>éšè—å±‚ å’Œ <strong>output</strong>è¾“å‡ºå±‚ã€‚è¿™é‡Œçš„è¾“å…¥å±‚åªæœ‰ä¸€ä¸ªå±æ€§ï¼Œ æ‰€ä»¥æˆ‘ä»¬å°±åªæœ‰ä¸€ä¸ªè¾“å…¥ï¼›éšè—å±‚æˆ‘ä»¬å¯ä»¥è‡ªå·±å‡è®¾ï¼Œè¿™é‡Œæˆ‘ä»¬å‡è®¾éšè—å±‚æœ‰<strong>10</strong>ä¸ªç¥ç»å…ƒï¼› è¾“å‡ºå±‚å’Œè¾“å…¥å±‚çš„ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è¾“å‡ºå±‚ä¹Ÿæ˜¯åªæœ‰ä¸€å±‚ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬æ„å»ºçš„æ˜¯â€”â€”è¾“å…¥å±‚1ä¸ªã€éšè—å±‚10ä¸ªã€è¾“å‡ºå±‚1ä¸ªçš„ç¥ç»ç½‘ç»œã€‚</p>
<h2 id="3-æ­å»ºç½‘ç»œ"><a href="#3-æ­å»ºç½‘ç»œ" class="headerlink" title="3. æ­å»ºç½‘ç»œ"></a>3. æ­å»ºç½‘ç»œ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ hideéšè—å±‚ï¼Œ åˆ©ç”¨ä¹‹å‰çš„ `add_layer()` å‡½æ•°ï¼Œè¿™é‡Œä½¿ç”¨ Tensorflow è‡ªå¸¦çš„æ¿€åŠ±å‡½æ•° `tf.nn.relu`ã€‚</span></span><br><span class="line">l1 = add_layer(xs, <span class="number">1</span>, <span class="number">10</span>, activation_function=tf.nn.relu)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¥ç€ï¼Œå®šä¹‰è¾“å‡ºå±‚ã€‚æ­¤æ—¶çš„è¾“å…¥å°±æ˜¯éšè—å±‚çš„è¾“å‡º â€”â€” `l1`ï¼Œè¾“å…¥æœ‰ 10 å±‚ï¼ˆéšè—å±‚çš„è¾“å‡ºå±‚ï¼‰ï¼Œè¾“å‡ºæœ‰ 1 å±‚ã€‚</span></span><br><span class="line">prediction = add_layer(l1, <span class="number">10</span>, <span class="number">1</span>, activation_function=<span class="keyword">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—é¢„æµ‹å€¼ `prediction` å’Œ çœŸå®å€¼çš„è¯¯å·®ï¼Œå¯¹äºŒè€…å·®çš„å¹³æ–¹æ±‚å’Œå†å–å¹³å‡ã€‚</span></span><br><span class="line">loss = tf.reduce_mean(tf.reduce_sum(tf.square(ys - prediction),</span><br><span class="line">                     reduction_indices=[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¥ä¸‹æ¥ï¼Œæ˜¯å¾ˆå…³é”®çš„ä¸€æ­¥ï¼Œå¦‚ä½•è®©æœºå™¨å­¦ä¹ æå‡å®ƒçš„å‡†ç¡®ç‡ã€‚</span></span><br><span class="line"><span class="comment"># `tf.train.GradientDescentOptimizer()` ä¸­çš„å€¼é€šå¸¸éƒ½å°äº `1`ï¼Œè¿™é‡Œå–çš„æ˜¯ `0.1`ï¼Œä»£è¡¨ä»¥ `0.1` çš„æ•ˆç‡æ¥æœ€å°åŒ–è¯¯å·® `loss`ã€‚</span></span><br><span class="line"></span><br><span class="line">train_step = tf.train.GradientDescentOptimizer(<span class="number">0.1</span>).minimize(loss)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨å˜é‡æ—¶ï¼Œéƒ½è¦å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</span></span><br><span class="line">init = tf.global_variables_initializer()  <span class="comment"># æ›¿æ¢æˆè¿™æ ·å°±å¥½</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ `Session`ï¼Œå¹¶ç”¨ `Session` æ¥æ‰§è¡Œ `init` åˆå§‹åŒ–æ­¥éª¤ã€‚ </span></span><br><span class="line"><span class="comment">#ï¼ˆæ³¨æ„ï¼šåœ¨ `tensorflow` ä¸­ï¼Œåªæœ‰session.run()æ‰ä¼šæ‰§è¡Œæˆ‘ä»¬å®šä¹‰çš„è¿ç®—ã€‚ï¼‰</span></span><br><span class="line">sess = tf.Session()</span><br><span class="line">sess.run(init)</span><br></pre></td></tr></table></figure>
<h2 id="4-è®­ç»ƒ"><a href="#4-è®­ç»ƒ" class="headerlink" title="4. è®­ç»ƒ"></a>4. è®­ç»ƒ</h2><p>ä¸‹é¢ï¼Œè®©æœºå™¨å¼€å§‹å­¦ä¹ ã€‚</p>
<p>æ¯”å¦‚è¿™é‡Œï¼Œæˆ‘ä»¬è®©æœºå™¨å­¦ä¹ 1000æ¬¡ã€‚æœºå™¨å­¦ä¹ çš„å†…å®¹æ˜¯ <code>train_step</code>, ç”¨ <code>Session</code> æ¥ <code>run</code> æ¯ä¸€æ¬¡ training çš„æ•°æ®ï¼Œé€æ­¥æå‡ç¥ç»ç½‘ç»œçš„é¢„æµ‹å‡†ç¡®æ€§ã€‚ (æ³¨æ„ï¼šå½“è¿ç®—è¦ç”¨åˆ° <code>placeholder</code> æ—¶ï¼Œå°±éœ€è¦ <code>feed_dict</code> è¿™ä¸ªå­—å…¸æ¥æŒ‡å®šè¾“å…¥ã€‚)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1000</span>):</span><br><span class="line">    <span class="comment"># training</span></span><br><span class="line">    sess.run(train_step, feed_dict=&#123;xs: x_data, ys: y_data&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¯ 50 æ­¥ æˆ‘ä»¬è¾“å‡ºä¸€ä¸‹æœºå™¨å­¦ä¹ çš„è¯¯å·®ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> i % <span class="number">50</span> == <span class="number">0</span>:</span><br><span class="line">        print(sess.run(loss, feed_dict=&#123;xs: x_data, ys: y_data&#125;))</span><br></pre></td></tr></table></figure>
<p>åœ¨ç”µè„‘ä¸Šè¿è¡Œæœ¬æ¬¡ä»£ç çš„ç»“æœä¸ºï¼š</p>
<p>0.0587868<br>0.00416427<br>0.00312624<br>0.00291327<br>0.00282026<br>0.0027577<br>0.00270546<br>0.00266943<br>0.00265278<br>0.00263559</p>
<p>é€šè¿‡ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œè¯¯å·®åœ¨é€æ¸å‡å°ï¼Œè¿™è¯´æ˜æœºå™¨å­¦ä¹ æ˜¯æœ‰ç§¯æçš„æ•ˆæœçš„</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python</a></li>
<li><a href="https://www.tensorflow.org/api_guides/python/nn" target="_blank" rel="external">Tensorflow æä¾›çš„ä¸€äº› æ¿€åŠ±å‡½æ•°</a></li>
<li><a href="http://www.ben-do.github.io/2016/09/15/change-shape-of-matrix-by-numpy/" target="_blank" rel="external">åˆ©ç”¨numpyçš„newaxisè½‰è®ŠçŸ©é™£çš„å½¢ç‹€</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tensorflow ä¾‹å­3 ï¼š æ·»åŠ å±‚ def add_layer()]]></title>
      <url>http://shopee.ai/2018/09/09/tensorflow/tf-3.1-add-layer/</url>
      <content type="html"><![CDATA[<p>åœ¨ Tensorflow é‡Œå®šä¹‰ä¸€ä¸ª æ·»åŠ å±‚çš„å‡½æ•°ï¼Œ å¯ä»¥å¾ˆå®¹æ˜“çš„ æ·»åŠ ç¥ç»å±‚, ä¸ºä¹‹åçš„æ·»åŠ çœä¸‹ä¸å°‘æ—¶é—´.</p>
<a id="more"></a>
<h2 id="å®šä¹‰-add-layer"><a href="#å®šä¹‰-add-layer" class="headerlink" title="å®šä¹‰ add_layer()"></a>å®šä¹‰ add_layer()</h2><p>ç¥ç»å±‚é‡Œå¸¸è§çš„å‚æ•°é€šå¸¸æœ‰ <code>weights</code>ã€<code>biases</code> å’Œæ¿€åŠ±å‡½æ•°ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥ <code>tensorflow</code> æ¨¡å—ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br></pre></td></tr></table></figure>
<p>ç„¶åå®šä¹‰æ·»åŠ ç¥ç»å±‚çš„å‡½æ•° <code>def add_layer()</code>, å®ƒæœ‰å››ä¸ªå‚æ•°ï¼šè¾“å…¥å€¼ã€è¾“å…¥çš„å¤§å°ã€è¾“å‡ºçš„å¤§å°å’Œæ¿€åŠ±å‡½æ•°ï¼Œæˆ‘ä»¬è®¾å®šé»˜è®¤çš„æ¿€åŠ±å‡½æ•°æ˜¯ <code>None</code>ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_layer</span><span class="params">(inputs, in_size, out_size, activation_function=None)</span>:</span></span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹å®šä¹‰ <code>weights</code> å’Œ <code>biases</code>ã€‚</p>
<p>å› ä¸ºåœ¨ç”Ÿæˆåˆå§‹å‚æ•°æ—¶ï¼Œéšæœºå˜é‡(<strong>normal distribution</strong>)ä¼šæ¯”å…¨éƒ¨ä¸º0è¦å¥½å¾ˆå¤šï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œçš„ <code>weights</code> ä¸ºä¸€ä¸ª <code>in_size</code> è¡Œ, <code>out_size</code> åˆ—çš„éšæœºå˜é‡çŸ©é˜µã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Weights = tf.Variable(tf.random_normal([in_size, out_size]))</span><br></pre></td></tr></table></figure>
<p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œ<code>biases</code> çš„æ¨èå€¼ä¸ä¸º0ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œæ˜¯åœ¨0å‘é‡çš„åŸºç¡€ä¸ŠåˆåŠ äº†0.1ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">biases = tf.Variable(tf.zeros([<span class="number">1</span>, out_size]) + <span class="number">0.1</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å®šä¹‰ Wx_plus_b, å³ç¥ç»ç½‘ç»œæœªæ¿€æ´»çš„å€¼ã€‚å…¶ä¸­ï¼Œtf.matmul() æ˜¯çŸ©é˜µçš„ä¹˜æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Wx_plus_b = tf.matmul(inputs, Weights) + biases</span><br></pre></td></tr></table></figure>
<p>å½“ activation_function ä¸º <code>None</code> æ—¶ï¼Œè¾“å‡ºå°±æ˜¯å½“å‰çš„é¢„æµ‹å€¼ <code>Wx_plus_b</code>ï¼Œä¸ä¸º <code>None</code> æ—¶ï¼Œå°±æŠŠ <code>Wx_plus_b</code> ä¼ åˆ° <code>activation_function()</code> å‡½æ•°ä¸­å¾—åˆ°è¾“å‡ºã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> activation_function <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">    outputs = Wx_plus_b</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    outputs = activation_function(Wx_plus_b)</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œè¿”å›è¾“å‡ºï¼Œæ·»åŠ ä¸€ä¸ªç¥ç»å±‚çš„å‡½æ•° <code>def add_layer()</code> å°±å®šä¹‰å¥½äº†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> outputs</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python</a></li>
<li><a href="https://www.tensorflow.org/api_guides/python/nn" target="_blank" rel="external">Tensorflow æä¾›çš„ä¸€äº› æ¿€åŠ±å‡½æ•°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CNN (week4) - Face recognition & Neural style transfer]]></title>
      <url>http://shopee.ai/2018/09/08/deeplearning/Convolutional-Neural-Networks-week4/</url>
      <content type="html"><![CDATA[<p>Face recognition &amp; Neural style transfer èƒ½å¤Ÿåœ¨å›¾åƒã€è§†é¢‘ä»¥åŠå…¶ä»– 2D æˆ– 3D æ•°æ®ä¸Šåº”ç”¨è¿™äº›ç®—æ³•ã€‚</p>
<a id="more"></a>
<h2 id="1-What-is-face-recognition"><a href="#1-What-is-face-recognition" class="headerlink" title="1. What is face recognition?"></a>1. What is face recognition?</h2><p>è¿™ä¸€èŠ‚ä¸­çš„äººè„¸è¯†åˆ«æŠ€æœ¯çš„æ¼”ç¤ºçš„ç¡®å¾ˆNBâ€¦, æ¼”æŠ€ä¸é”™ï¼ŒğŸ˜„</p>
<p><img src="/images/deeplearning/C4W4-1_1.png" width="750"></p>
<h2 id="2-One-Shot-Learning"><a href="#2-One-Shot-Learning" class="headerlink" title="2. One Shot Learning"></a>2. One Shot Learning</h2><p>ä½œä¸ºè€æ¿å¸Œæœ›ä¸æ—¶ä¿±è¿›ï¼Œæ‰€ä»¥æƒ³ä½¿ç”¨äººè„¸è¯†åˆ«æŠ€æœ¯æ¥å®ç°æ‰“å¡ã€‚</p>
<p>å‡å¦‚æˆ‘ä»¬å…¬å¸åªæœ‰4ä¸ªå‘˜å·¥ï¼ŒæŒ‰ç…§ä¹‹å‰çš„æ€è·¯æˆ‘ä»¬è®­ç»ƒçš„ç¥ç»ç½‘ç»œæ¨¡å‹åº”è¯¥å¦‚ä¸‹ï¼š</p>
<p><img src="/images/deeplearning/C4W4-2.jpg" width="550"></p>
<blockquote>
<p>å¦‚å›¾ç¤ºï¼Œè¾“å…¥ä¸€å¼ å›¾åƒï¼Œç»è¿‡CNNï¼Œæœ€åå†é€šè¿‡ Softmax è¾“å‡º 5 ä¸ªå¯èƒ½å€¼çš„å¤§å° (4ä¸ªå‘˜å·¥ä¸­çš„ä¸€ä¸ªï¼Œæˆ–è€…éƒ½ä¸æ˜¯ï¼Œæ‰€ä»¥å…±5ç§å¯èƒ½æ€§)ã€‚</p>
<p>çœ‹èµ·æ¥å¥½åƒæ²¡ä»€ä¹ˆæ¯›ç—…ï¼Œä½†æ˜¯æˆ‘ä»¬è¦ç›¸ä¿¡æˆ‘ä»¬çš„å…¬å¸ä¼šè¶Šæ¥è¶Šå¥½å•Šï¼Œæ‰€ä»¥éš¾é“å…¬å¸æ¯å¢åŠ ä¸€ä¸ªäººå°±è¦é‡æ–°è®­ç»ƒ<strong>CNN</strong> åŠ æœ€åä¸€å±‚çš„è¾“å‡ºæ•°é‡å— ï¼Ÿ</p>
</blockquote>
<p><strong>one-shotï¼š</strong></p>
<p>è¿™æ˜¾ç„¶æœ‰é—®é¢˜ï¼Œæ‰€ä»¥æœ‰äººæå‡ºäº†ä¸€æ¬¡å­¦ä¹ (one-shot)ï¼Œæ›´å…·ä½“åœ°è¯´æ˜¯é€šè¿‡ä¸€ä¸ªå‡½æ•°æ¥æ±‚å‡ºè¾“å…¥å›¾åƒä¸æ•°æ®åº“ä¸­çš„å›¾åƒçš„å·®å¼‚åº¦ï¼Œç”¨ $d(img1,img2)$ è¡¨ç¤ºã€‚</p>
<p><img src="/images/deeplearning/C4W4-3_1.png" width="750"></p>
<p>å¦‚ä¸Šå›¾ç¤ºï¼Œå¦‚æœä¸¤ä¸ªå›¾åƒä¹‹é—´çš„å·®å¼‚åº¦ä¸å¤§äºæŸä¸€ä¸ªé˜ˆå€¼ <strong>Ï„</strong>ï¼Œé‚£ä¹ˆåˆ™è®¤ä¸ºä¸¤å¼ å›¾åƒæ˜¯åŒä¸€ä¸ªäººã€‚åä¹‹ï¼Œäº¦ç„¶ã€‚</p>
<blockquote>
<p>ä¸‹ä¸€å°èŠ‚ä»‹ç»äº†å¦‚ä½•è®¡ç®—å·®å€¼ã€‚</p>
</blockquote>
<h2 id="3-Siamese-Network"><a href="#3-Siamese-Network" class="headerlink" title="3. Siamese Network"></a>3. Siamese Network</h2><p>æ³¨æ„ï¼šä¸‹å›¾ä¸­ä¸¤ä¸ªç½‘ç»œå‚æ•°æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>å…ˆçœ‹ä¸Šé¢çš„ç½‘ç»œã€‚è®°è¾“å…¥å›¾åƒä¸º $x^{(1)}$ï¼Œç»è¿‡å·ç§¯å±‚ï¼Œæ± åŒ–å±‚ å’Œ å…¨è¿æ¥å±‚ åå¾—åˆ°äº†ç®­å¤´æ‰€æŒ‡ä½ç½®çš„æ•°æ® (ä¸€èˆ¬åé¢è¿˜ä¼šæ¥ä¸Š $softmax$ å±‚ï¼Œä½†åœ¨è¿™é‡Œæš‚æ—¶ä¸ç”¨ç®¡)ï¼Œå‡è®¾æœ‰ <strong>128</strong> ä¸ªèŠ‚ç‚¹ï¼Œè¯¥å±‚ç”¨ $f(x^{(1)})$ è¡¨ç¤ºï¼Œå¯ä»¥ç†è§£ä¸ºè¾“å…¥ $x^{(1)}$ çš„ç¼–ç ã€‚</p>
<p>é‚£ä¹ˆä¸‹ä¸€ä¸ªç½‘ç»œåŒç†ï¼Œä¸å†èµ˜è¿°ã€‚</p>
<p>å› æ­¤ä¸Šä¸€èŠ‚ä¸­æ‰€è¯´çš„å·®å¼‚åº¦å‡½æ•°å³ä¸º</p>
<p>$$<br>d(x^{(1)},x^{(2)})=||f(x^{(1)})-f(x^{(2)})||^2<br>$$</p>
<p><img src="/images/deeplearning/C4W4-4_1.png" width="750"></p>
<p>é—®é¢˜çœ‹èµ·æ¥å¥½åƒè§£å†³äº†ï¼Œä½†æ„Ÿè§‰è¿˜æ¼äº†ç‚¹ä»€ä¹ˆã€‚ã€‚<strong>ç¥ç»ç½‘ç»œçš„å‚æ•°å’‹ç¡®å®šå•Šï¼Ÿä¹Ÿå°±æ˜¯è¯´ $f(x^{(i)})$ çš„å‚æ•°æ€ä¹ˆè®¡ç®—å‘¢ï¼Ÿ</strong></p>
<p>é¦–å…ˆå¯ä»¥å¾ˆæ˜ç¡®çš„æ˜¯å¦‚æœä¸¤ä¸ªå›¾åƒæ˜¯åŒä¸€ä¸ªäººï¼Œé‚£æ‰€å¾—åˆ°çš„å‚æ•°åº”è¯¥ä½¿å¾— $||f(x^{(1)})-f(x^{(2)})||^2$ çš„å€¼è¾ƒå°ï¼Œåä¹‹è¾ƒå¤§ã€‚</p>
<p><img src="/images/deeplearning/C4W4-5_1.png" width="750"></p>
<h2 id="4-Triplet-Loss"><a href="#4-Triplet-Loss" class="headerlink" title="4. Triplet Loss"></a>4. Triplet Loss</h2><h3 id="4-1-Learning-Objective"><a href="#4-1-Learning-Objective" class="headerlink" title="4.1 Learning Objective"></a>4.1 Learning Objective</h3><p>è¿™é‡Œé¦–å…ˆä»‹ç»ä¸€ä¸ªä¸‰å…ƒç»„ï¼Œå³ <strong>(Anchor, Positive, Negative)ï¼Œç®€å†™ä¸º(A,P,N)</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">(A,P,N)</th>
<th style="text-align:center">ä¸‰å…ƒç»„ å„ä¸ªå«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Anchor</td>
<td style="text-align:center">å¯ä»¥ç†è§£ä¸ºç”¨äºè¯†åˆ«çš„å›¾åƒ ï¼ˆé”šï¼‰</td>
</tr>
<tr>
<td style="text-align:center">Positive</td>
<td style="text-align:center">è¡¨ç¤ºæ˜¯è¿™ä¸ªäºº</td>
</tr>
<tr>
<td style="text-align:center">Negative</td>
<td style="text-align:center">è¡¨ç¤ºä¸æ˜¯åŒä¸€ä¸ªäºº</td>
</tr>
</tbody>
</table>
<p>ç”±ä¸Šä¸€èŠ‚ä¸­çš„æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹ä¸ç­‰å¼ï¼š</p>
<blockquote>
<p>$d(A,P)\leqq d(A,N)$, å³ $||f(A)-f(P)||^2-||f(A)-f(N)||^2\leqq0$ (å¦‚ä¸‹å›¾ç¤º)</p>
</blockquote>
<p><img src="/images/deeplearning/C4W4-6_1.png" width="750"></p>
<p>ä½†æ˜¯è¿™æ ·å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå³å¦‚æœç¥ç»ç½‘ç»œä»€ä¹ˆéƒ½æ²¡å­¦åˆ°ï¼Œè¿”å›çš„å€¼æ˜¯0ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœ $f(x)=\vec{0}$ çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸ç­‰å¼æ˜¯å§‹ç»ˆæˆç«‹çš„ã€‚(å¦‚ä¸‹å›¾ç¤º)</p>
<p><img src="/images/deeplearning/C4W4-7_1.png" width="750"></p>
<p>ä¸ºäº†é¿å…ä¸Šè¿°ç‰¹æ®Šæƒ…å†µï¼Œä¸”å·¦è¾¹å€¼å¿…é¡»å°äº0ï¼Œæ‰€ä»¥åœ¨å³è¾¹å‡å»ä¸€ä¸ªå˜é‡<strong>Î±</strong>ï¼Œä½†æŒ‰ç…§æƒ¯ä¾‹æ˜¯åŠ ä¸Šä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥å°†<strong>Î±</strong>åŠ åœ¨å·¦è¾¹ã€‚</p>
<p><img src="/images/deeplearning/C4W4-8_1.png" width="750"></p>
<p><img src="/images/deeplearning/C4W4-9_1.png" width="750"></p>
<p>ç»¼ä¸Šï¼Œæ‰€å¾—åˆ°çš„å‚æ•°éœ€è¦æ»¡è¶³å¦‚ä¸‹ä¸ç­‰å¼</p>
<p>$$<br>||f(A)-f(P)||^2-||f(A)-f(N)||^2+Î±\leqq0<br>$$</p>
<h3 id="4-2-Lost-function"><a href="#4-2-Lost-function" class="headerlink" title="4.2 Lost function"></a>4.2 Lost function</h3><p>ä»‹ç»å®Œä¸‰å…ƒç»„åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å•ä¸ªå›¾åƒå®šä¹‰å¦‚ä¸‹çš„æŸå¤±å‡½æ•°(å¦‚ä¸‹å›¾ç¤º)</p>
<p>$$<br>L(A,P,N)=max(||f(A)-f(P)||^2-||f(A)-f(N)||^2+Î±,0)<br>$$</p>
<blockquote>
<p>è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆç”¨<strong>max</strong>å‡½æ•°ï¼Œå› ä¸ºå¦‚æœåªè¦æ»¡è¶³ $||f(A)-f(P)||^2-||f(A)-f(N)||^2+Î±\leqq0$ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºå·²ç»æ­£ç¡®è¯†åˆ«å‡ºäº†å›¾åƒä¸­çš„äººï¼Œæ‰€ä»¥å¯¹äºè¯¥å›¾åƒçš„æŸå¤±å€¼æ˜¯ 0.</p>
</blockquote>
<p><img src="/images/deeplearning/C4W4-10_1.png" width="750"></p>
<p>æ‰€ä»¥æ€»çš„æŸå¤±å‡½æ•°æ˜¯ : $J=\sum{L(A^{(i)},P^{(i)},N^{(i)})}$</p>
<p>è¦æ³¨æ„çš„æ˜¯ä½¿ç”¨è¿™ç§æ–¹æ³•è¦ä¿è¯æ¯ä¸€ä¸ªäººä¸æ­¢æœ‰ä¸€å¼ å›¾åƒï¼Œå¦åˆ™æ— æ³•è®­ç»ƒã€‚å¦å¤–è¦æ³¨æ„ä¸å‰é¢çš„ <strong>One-shot</strong> åŒºåˆ†å¼€æ¥ï¼Œè¿™é‡Œæ˜¯åœ¨è®­ç»ƒæ¨¡å‹ï¼Œæ‰€ä»¥è®­ç»ƒé›†çš„æ•°é‡è¦å¤šä¸€äº›ï¼Œæ¯ä¸ªäººè¦æœ‰å¤šå¼ ç…§ç‰‡ã€‚è€ŒOne-shotæ˜¯è¿›è¡Œæµ‹è¯•äº†ï¼Œæ‰€ä»¥åªéœ€ä¸€å¼ ç”¨äºè¾“å…¥çš„ç…§ç‰‡å³å¯ã€‚</p>
<h3 id="4-3-Choosing-the-triplets-A-P-N"><a href="#4-3-Choosing-the-triplets-A-P-N" class="headerlink" title="4.3 Choosing the triplets(A,P,N)"></a>4.3 Choosing the triplets(A,P,N)</h3><p>è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜å°±æ˜¯å¦‚ä½•é€‰æ‹©ä¸‰å…ƒç»„ <strong>(A,P,N)</strong>ã€‚å› ä¸ºå®é™…ä¸Šè¦æ»¡è¶³ä¸ç­‰å¼ $d(A,P)+Î±\leqq d(A,N)$ æ˜¯æ¯”è¾ƒç®€å•çš„,å³åªè¦å°† Negative é€‰æ‹©çš„æ¯”è¾ƒæç«¯ä¾¿å¯ï¼Œæ¯”å¦‚ Anchor æ˜¯ä¸€ä¸ªå°å¥³å­©ï¼Œè€Œ Negative é€‰æ‹©ä¸€ä¸ªè€å¤§çˆ·ã€‚</p>
<p>æ‰€ä»¥è¿˜åº”è¯¥å°½é‡æ»¡è¶³ $d(A,N)\approx{d(A,N)}$</p>
<p><img src="/images/deeplearning/C4W4-11_1.png" width="750"></p>
<h2 id="5-Face-Verification-and-Binary-Classification"><a href="#5-Face-Verification-and-Binary-Classification" class="headerlink" title="5. Face Verification and Binary Classification"></a>5. Face Verification and Binary Classification</h2><p>é€šè¿‡ä»¥ä¸Šå†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šä¸‹å›¾ä¸­çš„ç½‘ç»œçš„å‚æ•°äº†ï¼Œé‚£ä¹ˆç°åœ¨å¼€å§‹è¿›è¡Œé¢éƒ¨éªŒè¯äº†ã€‚</p>
<p><strong>ä¸Šé¢çš„æ˜¯æµ‹è¯•å›¾ï¼Œä¸‹é¢çš„æ˜¯æ•°æ®åº“ä¸­çš„ä¸€å¼ ç…§ç‰‡</strong></p>
<p>å’Œä¹‹å‰ä¸€æ ·å‡è®¾ $f(x^{(i)})$ æœ‰ 128ä¸ªèŠ‚ç‚¹ï¼Œä¹‹åè¿™ä¸¤ä¸ªæ•°æ®ä½œä¸ºè¾“å…¥æ•°æ®è¾“å…¥åˆ°åé¢çš„é€»è¾‘å›å½’æ¨¡å‹ä¸­å»ï¼Œå³</p>
<p>$$<br>\hat{y} = Ïƒ(\sum_{k=1}^{128}w_i|f(x^{(i)})_k-f(x^{(j)})_k|+b_i)<br>$$</p>
<p>è‹¥ $\hat{y}=1$, ä¸ºåŒä¸€äººã€‚åä¹‹ï¼Œä¸æ˜¯ã€‚</p>
<p>å¦‚ä¸‹å›¾ç¤ºï¼Œç»¿è‰²ä¸‹åˆ’çº¿éƒ¨åˆ†å¯ä»¥ç”¨å…¶ä»–å…¬å¼æ›¿æ¢ï¼Œå³æœ‰</p>
<p>$$<br>\hat{y}=Ïƒ(\sum_{k=1}^{128}w_i \frac{(f(x^{(i)})_k-f(x^{(j)})_k)^2}{f(x^{(i)})_k+f(x^{(j)})_k}+b_i)<br>$$</p>
<p><img src="/images/deeplearning/C4W4-12_1.png" width="750"></p>
<p>å½“ç„¶æ•°æ®åº“ä¸­çš„å›¾åƒä¸ç”¨æ¯æ¬¡æ¥ä¸€å¼ éœ€è¦éªŒè¯çš„å›¾åƒéƒ½é‡æ–°è®¡ç®—ï¼Œå…¶å®å¯ä»¥æå‰è®¡ç®—å¥½ï¼Œå°†ç»“æœä¿å­˜èµ·æ¥ï¼Œè¿™æ ·å°±å¯ä»¥åŠ å¿«è¿ç®—çš„é€Ÿåº¦äº†ã€‚</p>
<p><img src="/images/deeplearning/C4W4-13_1.png" width="750"></p>
<h2 id="6-What-is-neural-style-transfer"><a href="#6-What-is-neural-style-transfer" class="headerlink" title="6. What is neural style transfer?"></a>6. What is neural style transfer?</h2><p><img src="/images/deeplearning/C4W4-14_1.png" width="750"></p>
<h2 id="7-What-are-deep-ConvNets-learning"><a href="#7-What-are-deep-ConvNets-learning" class="headerlink" title="7. What are deep ConvNets learning?"></a>7. What are deep ConvNets learning?</h2><p><img src="/images/deeplearning/C4W4-15_1.png" width="750"></p>
<blockquote>
<p>ç¬¬ä¸€å±‚åªèƒ½çœ‹åˆ°å°éƒ¨åˆ†å·ç§¯ç¥ç».</p>
<p>ä½ é€‰æ‹©ä¸€ä¸ªéšè—å•å…ƒï¼Œå‘ç°æœ‰9ä¸ªå›¾ç‰‡ï¼Œæœ€å¤§åŒ–äº†å•å…ƒæ¿€æ´»ï¼Œä½ å¯èƒ½æ‰¾åˆ°ç±»ä¼¼è¿™æ ·çš„å›¾ç‰‡æµ…å±‚åŒºåŸŸ.</p>
</blockquote>
<p><img src="/images/deeplearning/C4W4-16_1.png" width="750"></p>
<h2 id="8-Cost-Function"><a href="#8-Cost-Function" class="headerlink" title="8. Cost Function"></a>8. Cost Function</h2><p>å¦‚ä¸‹å›¾ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C4W4-17_1.png" width="750"></p>
<p>å·¦ä¸Šè§’çš„åŒ…å« Content çš„å›¾ç‰‡ç®€ç§°ä¸º Cï¼Œå³ä¸Šè§’åŒ…å« Style çš„ç®€ç§° Sï¼ŒäºŒè€…èåˆåå¾—åˆ°çš„å›¾ç‰‡ç®€ç§°ä¸º Gã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“è®¡ç®—é—®é¢˜é¡»æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥èåˆçš„æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Ÿä¹Ÿå°±æ˜¯è¯´ Content çš„ä¿ç•™ç¨‹åº¦å’Œ Style çš„è¿ç”¨ç¨‹åº¦å¦‚ä½•å–èˆå‘¢ï¼Ÿ</p>
<p>æ­¤æ—¶å¼•å…¥æŸå¤±å‡½æ•°ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæœ€ä¼˜åŒ–ï¼Œè¿™æ ·ä¾¿å¯å¾—åˆ°æœ€ä¼˜è§£ã€‚</p>
<p>$$<br>J(G)=Î±J_{Content}(C,G)+Î²J_{Style}(S,G)<br>$$</p>
<blockquote>
<p>$J(G)$ å®šä¹‰ç”¨æ¥ç”Ÿæˆå›¾åƒçš„å¥½åï¼Œ$J_{Content}(C,G)$ è¡¨ç¤º å›¾åƒ$C$ å’Œ å›¾åƒ$G$ ä¹‹é—´çš„å·®å¼‚ï¼Œ$J_{Style}(S,G)$ åŒç†ã€‚</p>
</blockquote>
<p><strong>è®¡ç®—è¿‡ç¨‹ç¤ºä¾‹</strong>ï¼š</p>
<blockquote>
<p>éšæœºåˆå§‹åŒ–å›¾åƒ $G$ï¼Œå‡è®¾ä¸º 100*100*3 ï¼ˆmaybe 500*500*3ï¼‰ (å¦‚ä¸‹å›¾å³è¾¹å››ä¸ªå›¾åƒæœ€ä¸Šé¢é‚£ä¸ªæ‰€ç¤º)</p>
<p>ä½¿ç”¨æ¢¯åº¦ä¸‹é™ä¸æ–­ä¼˜åŒ– $J(G)$ã€‚ (ä¼˜åŒ–è¿‡ç¨‹å¦‚ä¸‹å›¾å³è¾¹ä¸‹é¢3ä¸ªå›¾åƒæ‰€ç¤º)</p>
</blockquote>
<p><img src="/images/deeplearning/C4W4-18_1.png" width="750"></p>
<blockquote>
<p>ä¸‹é¢ä¸€å°èŠ‚å°†å…·ä½“ä»‹ç» <strong>Cost Function</strong> çš„è®¡ç®—ã€‚</p>
</blockquote>
<h2 id="9-Content-Cost-Function"><a href="#9-Content-Cost-Function" class="headerlink" title="9. Content Cost Function"></a>9. Content Cost Function</h2><p>é¦–å…ˆå‡è®¾æˆ‘ä»¬ä½¿ç”¨ <strong>ç¬¬ $l$ å±‚</strong> éšè—å±‚ æ¥è®¡ç®— $J_{Content}(C,G)$ï¼Œæ³¨æ„è¿™é‡Œçš„ <strong>$l$</strong> ä¸€èˆ¬å–åœ¨ä¸­é—´å±‚ï¼Œè€Œä¸æ˜¯æœ€å‰é¢çš„å±‚ï¼Œæˆ–è€…æœ€åå±‚</p>
<blockquote>
<p>åŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‡å¦‚å–<strong>ç¬¬1å±‚</strong>ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ $G$ å›¾åƒ å°†ä¼šä¸ å›¾åƒ$C$ åƒç´ çº§åˆ«çš„ç›¸ä¼¼ï¼Œè¿™æ˜¾ç„¶ä¸è¡Œã€‚</li>
<li>å‡å¦‚å–å¾ˆæ·±å±‚ï¼Œé‚£ä¹ˆè¯¥å±‚å·²ç»æå–å‡ºäº†æ¯”è¾ƒé‡è¦çš„ç‰¹å¾ï¼Œä¾‹å¦‚ å›¾åƒ$C$ ä¸­æœ‰ä¸€æ¡ç‹—ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ å›¾åƒ$G$ ä¼šè¿‡åº¦çš„ä¿ç•™è¿™ä¸ªç‰¹å¾ã€‚</li>
</ul>
</blockquote>
<ul>
<li>ç„¶åä½¿ç”¨é¢„å…ˆè®­ç»ƒå¥½çš„å·ç§¯ç¥ç»ç½‘ç»œï¼Œå¦‚ VGGç½‘ç»œã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ° å›¾åƒ$C$ å’Œ å›¾åƒ$G$ åœ¨ç¬¬$l$å±‚çš„æ¿€æ´»å‡½æ•°å€¼ï¼Œåˆ†åˆ«è®°ä¸º $a^{[l][C]},a^{[l][G]}$</li>
<li>å†…å®¹æŸå¤±å‡½æ•° $J_{Content}(C,G) = \frac{1}{2} || a^{[l][C]} - a^{[l][G]} ||^2$</li>
</ul>
<p><img src="/images/deeplearning/C4W4-19_1.png" width="750"></p>
<h2 id="10-Style-Cost-Function"><a href="#10-Style-Cost-Function" class="headerlink" title="10. Style Cost Function"></a>10. Style Cost Function</h2><h3 id="10-1-ä»€ä¹ˆæ˜¯â€œé£æ ¼â€"><a href="#10-1-ä»€ä¹ˆæ˜¯â€œé£æ ¼â€" class="headerlink" title="10.1 ä»€ä¹ˆæ˜¯â€œé£æ ¼â€"></a>10.1 ä»€ä¹ˆæ˜¯â€œé£æ ¼â€</h3><p>è¦è®¡ç®—é£æ ¼æŸå¤±å‡½æ•°ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“â€œé£æ ¼(Style)â€æ˜¯ä»€ä¹ˆã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ $l$ å±‚çš„æ¿€æ´»æ¥åº¦é‡â€œStyleâ€ï¼Œå°†â€œStyleâ€å®šä¹‰ä¸ºé€šé“é—´æ¿€æ´»å€¼ä¹‹é—´çš„<strong>ç›¸å…³ç³»æ•°</strong>ã€‚(<strong>Define style as correlation between activation across channels</strong>)</p>
<p><img src="/images/deeplearning/C4W4-20_1.png" width="750"></p>
<p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è®¡ç®—è¿™ä¸ªæ‰€è°“çš„ç›¸å…³ç³»æ•°å‘¢ï¼Ÿ</p>
<p>ä¸‹å›¾æ˜¯æˆ‘ä»¬ä»ä¸Šå›¾ä¸­æ‰€æ ‡è¯†çš„ç¬¬ $l$ å±‚ï¼Œä¸ºæ–¹ä¾¿è¯´æ˜ï¼Œå‡è®¾åªæœ‰ 5 å±‚é€šé“ã€‚</p>
<p><img src="/images/deeplearning/C4W4-21_1.png" width="350"></p>
<p>å¦‚ä¸Šå›¾ç¤ºï¼Œçº¢è‰²é€šé“å’Œé»„è‰²é€šé“å¯¹åº”ä½ç½®éƒ½æœ‰æ¿€æ´»é¡¹ï¼Œè€Œæˆ‘ä»¬è¦æ±‚çš„ä¾¿æ˜¯å®ƒä»¬ä¹‹é—´çš„<strong>ç›¸å…³ç³»æ•°</strong>ã€‚</p>
<p>ä½†æ˜¯ä¸ºä»€ä¹ˆè¿™ä¹ˆæ±‚å‡ºæ¥æ˜¯æœ‰æ•ˆçš„å‘¢ï¼Ÿä¸ºä»€ä¹ˆå®ƒä»¬èƒ½å¤Ÿåæ˜ å‡ºé£æ ¼å‘¢ï¼Ÿ</p>
<p>ç»§ç»­å¾€ä¸‹çœ‹â†“</p>
<h3 id="10-2-å›¾åƒé£æ ¼çš„ç›´è§‚ç†è§£"><a href="#10-2-å›¾åƒé£æ ¼çš„ç›´è§‚ç†è§£" class="headerlink" title="10.2 å›¾åƒé£æ ¼çš„ç›´è§‚ç†è§£"></a>10.2 å›¾åƒé£æ ¼çš„ç›´è§‚ç†è§£</h3><p>å¦‚å›¾é£æ ¼å›¾åƒæœ‰ <strong>5</strong> å±‚é€šé“ï¼Œä¸”è¯¥å›¾åƒçš„å¯è§†åŒ–ç‰¹å¾å¦‚ <font color="blue">å·¦ä¸‹è§’å›¾</font> æ‰€ç¤ºã€‚</p>
<p><img src="/images/deeplearning/C4W4-22_1.png" width="800"></p>
<p>å…¶ä¸­çº¢è‰²é€šé“å¯è§†åŒ–ç‰¹å¾å¦‚å›¾ä¸­<strong>ç®­å¤´</strong>æ‰€æŒ‡æ˜¯<strong>å‚ç›´æ¡çº¹</strong>ï¼Œè€Œ<strong>é»„è‰²é€šé“çš„ç‰¹å¾åˆ™æ˜¯æ©˜è‰²èƒŒæ™¯</strong>ã€‚<br><!--<img src="/images/deeplearning/C4W4-22_2.png" width="750" />
--><br>é‚£ä¹ˆé€šè¿‡è®¡ç®—è¿™ä¸¤å±‚é€šé“çš„ç›¸å…³ç³»æ•°æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p>
<blockquote>
<p>å…¶å®å¾ˆå¥½ç†è§£ï¼Œå¦‚æœ<strong>äºŒè€…ç›¸å…³ç³»æ•°æ€§å¼ºï¼Œé‚£ä¹ˆå¦‚æœå‡ºç°æ©˜è‰²èƒŒæ™¯ï¼Œé‚£ä¹ˆå°±åº”è¯¥å¾ˆå¤§æ¦‚ç‡å‡ºç°å‚ç›´æ¡çº¹</strong>ã€‚åä¹‹ï¼Œäº¦ç„¶ã€‚</p>
</blockquote>
<h3 id="10-3-é£æ ¼ç›¸å…³ç³»æ•°çŸ©é˜µ"><a href="#10-3-é£æ ¼ç›¸å…³ç³»æ•°çŸ©é˜µ" class="headerlink" title="10.3 é£æ ¼ç›¸å…³ç³»æ•°çŸ©é˜µ"></a>10.3 é£æ ¼ç›¸å…³ç³»æ•°çŸ©é˜µ</h3><p>ä»¤ $a_{i,j,k}^{[l]}$ è¡¨ç¤º <strong>(i,j,k)</strong> çš„æ¿€æ´»é¡¹ï¼Œå…¶ä¸­ <strong>i,j,k</strong> åˆ†åˆ«è¡¨ç¤ºé«˜åº¦å€¼(H)ï¼Œå®½åº¦å€¼(W) åŠ æ‰€åœ¨é€šé“å±‚æ¬¡(C)ã€‚</p>
<p>é£æ ¼çŸ©é˜µ(ä¹Ÿç§°ä¸ºâ€œ<strong>Gram Matrix</strong>â€)ç”¨ $G^{[l]}$ è¡¨ç¤ºï¼Œå…¶å¤§å°ä¸º $n_c^{l]}*n_c^{l]}$.</p>
<p>å› æ­¤é£æ ¼å›¾åƒçš„é£æ ¼çŸ©é˜µä¸ºï¼š</p>
<p>$$<br>G_{kkâ€™}^{<a href="S">l</a>}=\sum_{i=1}^{n_H^{[l]}}\sum_{j=1}^{n_W^{[l]}}a_{i,j,k}^{<a href="S">l</a>}a_{i,j,kâ€™}^{<a href="S">l</a>}<br>$$</p>
<p>ç”Ÿæˆå›¾åƒçš„ç›¸å…³ç³»æ•°çŸ©é˜µ</p>
<p>$$<br>G_{kkâ€™}^{<a href="G">l</a>}=\sum_{i=1}^{n_H^{[l]}}\sum_{j=1}^{n_W^{[l]}}a_{i,j,k}^{<a href="G">l</a>}a_{i,j,kâ€™}^{<a href="G">l</a>}<br>$$</p>
<p><img src="/images/deeplearning/C4W4-23_1.png" width="750"></p>
<h3 id="10-4-é£æ ¼æŸå¤±å‡½æ•°"><a href="#10-4-é£æ ¼æŸå¤±å‡½æ•°" class="headerlink" title="10.4 é£æ ¼æŸå¤±å‡½æ•°"></a>10.4 é£æ ¼æŸå¤±å‡½æ•°</h3><p><img src="/images/deeplearning/C4W4-24_1.png" width="750"></p>
<p>ç¬¬ $l$ å±‚çš„é£æ ¼æŸå¤±å‡½æ•°ä¸ºï¼š</p>
<p>$$<br>J_{Style}^{[l]} (S, G) = \frac {1} { (2n_H^{[l]} n_W^{[l]} n_C^{[l]})^2 } \sum_{k}\sum_{kâ€™} (G_{kkâ€™}^{[l](S)} - G_{kkâ€™}^{[l](G)})<br>$$</p>
<p>æ€»çš„é£æ ¼æŸå¤±å‡½æ•°ï¼š</p>
<p>$$<br>J_{Style}(S,G) = \sum_{l}Î»^{[l]}J_{Style}C4^{[l]}(S,G)<br>$$</p>
<h2 id="11-1D-and-3D-Generalizations"><a href="#11-1D-and-3D-Generalizations" class="headerlink" title="11. 1D and 3D Generalizations"></a>11. 1D and 3D Generalizations</h2><p>1D generalizations of models</p>
<p><img src="/images/deeplearning/C4W4-25_1.png" width="750"></p>
<p>3D generalizations of models</p>
<p><img src="/images/deeplearning/C4W4-26_1.png" width="750"></p>
<blockquote>
<p>åŒ»å­¦å›¾åƒ ä¸ è§†é¢‘æ£€æµ‹ éƒ½æ˜¯ 3D çš„.</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TensorFlow åŸºæœ¬ç”¨æ³•æ€»ç»“]]></title>
      <url>http://shopee.ai/2018/09/08/tensorflow/tf-2.8-tensorflow-basic-summary/</url>
      <content type="html"><![CDATA[<p>tensorflow ä¸­æ–‡æ–‡æ¡£å­¦ä¹  tensorflow çš„åŸºæœ¬ç”¨æ³•ã€‚</p>
<a id="more"></a>
<p>æŒ‰ç…§æ–‡æ¡£è¯´æ˜ï¼Œä¸€ç‚¹çŸ¥è¯†ç‚¹å°æ€»ç»“ï¼š</p>
<ol>
<li>å°±æ˜¯ Session() å’Œ InteractiveSession() çš„ç”¨æ³•ã€‚åè€…ç”¨ Tensor.eval() å’Œ Operation.run() æ¥æ›¿ä»£äº† Session.run(). å…¶ä¸­æ›´å¤šçš„æ˜¯ç”¨Tensor.eval()ï¼Œæ‰€æœ‰çš„è¡¨è¾¾å¼éƒ½å¯ä»¥çœ‹ä½œæ˜¯ Tensor. </li>
<li>tf è¡¨è¾¾å¼ä¸­æ‰€æœ‰çš„ <strong>varå˜é‡</strong> æˆ– <strong>constantå¸¸é‡</strong> éƒ½åº”è¯¥æ˜¯ <strong>tf</strong> çš„ç±»å‹ã€‚</li>
<li>åªè¦æ˜¯å£°æ˜äº† <strong>varå˜é‡</strong>ï¼Œå°±å¾—ç”¨ sess.run(tf.global_variables_initializer()) æ–¹æ³•æ¥åˆå§‹åŒ–æ‰èƒ½ç”¨ã€‚</li>
</ol>
<h2 id="1-å¹³é¢æ‹Ÿåˆ"><a href="#1-å¹³é¢æ‹Ÿåˆ" class="headerlink" title="1. å¹³é¢æ‹Ÿåˆ"></a>1. å¹³é¢æ‹Ÿåˆ</h2><p>é€šè¿‡æœ¬ä¾‹å¯ä»¥çœ‹åˆ°æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªé€šç”¨è¿‡ç¨‹ï¼š</p>
<ol>
<li>å‡†å¤‡æ•°æ®</li>
<li>æ„é€ æ¨¡å‹ï¼ˆè®¾ç½®æ±‚è§£ç›®æ ‡å‡½æ•°ï¼‰ </li>
<li>æ±‚è§£æ¨¡å‹</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.å‡†å¤‡æ•°æ®ï¼šä½¿ç”¨ NumPy ç”Ÿæˆå‡æ•°æ®(phony data), æ€»å…± 100 ä¸ªç‚¹.</span></span><br><span class="line">x_data = np.float32(np.random.rand(<span class="number">2</span>, <span class="number">100</span>)) <span class="comment"># éšæœºè¾“å…¥</span></span><br><span class="line">y_data = np.dot([<span class="number">0.100</span>, <span class="number">0.200</span>], x_data) + <span class="number">0.300</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æ„é€ ä¸€ä¸ªçº¿æ€§æ¨¡å‹</span></span><br><span class="line">b = tf.Variable(tf.zeros([<span class="number">1</span>]))</span><br><span class="line">W = tf.Variable(tf.random_uniform([<span class="number">1</span>, <span class="number">2</span>], <span class="number">-1.0</span>, <span class="number">1.0</span>))</span><br><span class="line">y = tf.matmul(W, x_data) + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.æ±‚è§£æ¨¡å‹</span></span><br><span class="line"><span class="comment"># è®¾ç½®æŸå¤±å‡½æ•°ï¼šè¯¯å·®çš„å‡æ–¹å·®</span></span><br><span class="line">loss = tf.reduce_mean(tf.square(y - y_data))</span><br><span class="line"><span class="comment"># é€‰æ‹©æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•</span></span><br><span class="line">optimizer = tf.train.GradientDescentOptimizer(<span class="number">0.5</span>)</span><br><span class="line"><span class="comment"># è¿­ä»£çš„ç›®æ ‡ï¼šæœ€å°åŒ–æŸå¤±å‡½æ•°</span></span><br><span class="line">train = optimizer.minimize(loss)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">############################################################</span></span><br><span class="line"><span class="comment"># ä»¥ä¸‹æ˜¯ç”¨ tf æ¥è§£å†³ä¸Šé¢çš„ä»»åŠ¡</span></span><br><span class="line"><span class="comment"># 1.åˆå§‹åŒ–å˜é‡ï¼štf çš„å¿…å¤‡æ­¥éª¤ï¼Œä¸»è¦å£°æ˜äº†å˜é‡ï¼Œå°±å¿…é¡»åˆå§‹åŒ–æ‰èƒ½ç”¨</span></span><br><span class="line">init = tf.global_variables_initializer()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®tensorflowå¯¹GPUçš„ä½¿ç”¨æŒ‰éœ€åˆ†é…</span></span><br><span class="line">config  = tf.ConfigProto()</span><br><span class="line">config.gpu_options.allow_growth = <span class="keyword">True</span></span><br><span class="line"><span class="comment"># 2.å¯åŠ¨å›¾ (graph)</span></span><br><span class="line">sess = tf.Session(config=config)</span><br><span class="line">sess.run(init)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.è¿­ä»£ï¼Œåå¤æ‰§è¡Œä¸Šé¢çš„æœ€å°åŒ–æŸå¤±å‡½æ•°è¿™ä¸€æ“ä½œï¼ˆtrain opï¼‰,æ‹Ÿåˆå¹³é¢</span></span><br><span class="line"><span class="keyword">for</span> step <span class="keyword">in</span> xrange(<span class="number">0</span>, <span class="number">201</span>):</span><br><span class="line">    sess.run(train)</span><br><span class="line">    <span class="keyword">if</span> step % <span class="number">20</span> == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">print</span> step, sess.run(W), sess.run(b)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾—åˆ°æœ€ä½³æ‹Ÿåˆç»“æœ W: [[0.100  0.200]], b: [0.300]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0 [[ 0.27467242  0.81889796]] [-0.13746099]</span><br><span class="line">20 [[ 0.1619305   0.39317462]] [ 0.18206716]</span><br><span class="line">40 [[ 0.11901411  0.25831661]] [ 0.2642329]</span><br><span class="line">60 [[ 0.10580806  0.21761954]] [ 0.28916073]</span><br><span class="line">80 [[ 0.10176832  0.20532639]] [ 0.29671678]</span><br><span class="line">100 [[ 0.10053726  0.20161074]] [ 0.29900584]</span><br><span class="line">120 [[ 0.100163    0.20048723]] [ 0.29969904]</span><br><span class="line">140 [[ 0.10004941  0.20014738]] [ 0.29990891]</span><br><span class="line">160 [[ 0.10001497  0.20004457]] [ 0.29997244]</span><br><span class="line">180 [[ 0.10000452  0.20001349]] [ 0.29999167]</span><br><span class="line">200 [[ 0.10000138  0.2000041 ]] [ 0.29999748]</span><br></pre></td></tr></table></figure>
<h2 id="2-ä¸¤ä¸ªæ•°æ±‚å’Œ"><a href="#2-ä¸¤ä¸ªæ•°æ±‚å’Œ" class="headerlink" title="2. ä¸¤ä¸ªæ•°æ±‚å’Œ"></a>2. ä¸¤ä¸ªæ•°æ±‚å’Œ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">input1 = tf.constant(<span class="number">2.0</span>)</span><br><span class="line">input2 = tf.constant(<span class="number">3.0</span>)</span><br><span class="line">input3 = tf.constant(<span class="number">5.0</span>)</span><br><span class="line"></span><br><span class="line">intermd = tf.add(input1, input2)</span><br><span class="line">mul = tf.multiply(input2, input3)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    result = sess.run([mul, intermd])  <span class="comment"># ä¸€æ¬¡æ‰§è¡Œå¤šä¸ªop</span></span><br><span class="line">    print(result)</span><br><span class="line">    print(type(result))</span><br><span class="line">    print(type(result[<span class="number">0</span>]))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[15.0, 5.0]</span><br><span class="line">&lt;class &apos;list&apos;&gt;</span><br><span class="line">&lt;class &apos;numpy.float32&apos;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3-å˜é‡ï¼Œå¸¸é‡"><a href="#3-å˜é‡ï¼Œå¸¸é‡" class="headerlink" title="3. å˜é‡ï¼Œå¸¸é‡"></a>3. å˜é‡ï¼Œå¸¸é‡</h2><h3 id="3-1-tensorflow-å®ç°è®¡æ•°å™¨"><a href="#3-1-tensorflow-å®ç°è®¡æ•°å™¨" class="headerlink" title="3.1 tensorflow å®ç°è®¡æ•°å™¨"></a>3.1 tensorflow å®ç°è®¡æ•°å™¨</h3><p>ä¸»è¦æ˜¯è®¾è®¡äº†åœ¨å¾ªç¯ä¸­è°ƒç”¨åŠ æ³•å®ç°è®¡æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå˜é‡ï¼Œåˆå§‹åŒ–ä¸º0</span></span><br><span class="line">state = tf.Variable(<span class="number">0</span>, name=<span class="string">"counter"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ª op , å…¶ä½œç”¨æ˜¯æ—¶ state å¢åŠ  1</span></span><br><span class="line">one = tf.constant(<span class="number">1</span>) <span class="comment"># ç›´æ¥ç”¨ 1 ä¹Ÿå°±è¡Œäº†</span></span><br><span class="line">new_value = tf.add(state, <span class="number">1</span>)</span><br><span class="line">update = tf.assign(state, new_value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨å›¾ä¹‹åï¼Œ è¿è¡Œ update op</span></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment"># åˆ›å»ºå¥½å›¾ä¹‹åï¼Œå˜é‡å¿…é¡»ç»è¿‡â€˜åˆå§‹åŒ–â€™ </span></span><br><span class="line">    sess.run(tf.global_variables_initializer())</span><br><span class="line">    <span class="comment"># æŸ¥çœ‹stateçš„åˆå§‹åŒ–å€¼</span></span><br><span class="line">    print(sess.run(state))</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        sess.run(update)  <span class="comment"># è¿™æ ·å­æ¯ä¸€æ¬¡è¿è¡Œstate éƒ½è¿˜æ˜¯1</span></span><br><span class="line">        print(sess.run(state))</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h3 id="3-2-ç”¨-tf-æ¥å®ç°å¯¹ä¸€ç»„æ•°æ±‚å’Œï¼Œå†è®¡ç®—å¹³å‡"><a href="#3-2-ç”¨-tf-æ¥å®ç°å¯¹ä¸€ç»„æ•°æ±‚å’Œï¼Œå†è®¡ç®—å¹³å‡" class="headerlink" title="3.2 ç”¨ tf æ¥å®ç°å¯¹ä¸€ç»„æ•°æ±‚å’Œï¼Œå†è®¡ç®—å¹³å‡"></a>3.2 ç”¨ tf æ¥å®ç°å¯¹ä¸€ç»„æ•°æ±‚å’Œï¼Œå†è®¡ç®—å¹³å‡</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">h_sum = tf.Variable(<span class="number">0.0</span>, dtype=tf.float32)</span><br><span class="line"><span class="comment"># h_vec = tf.random_normal(shape=([10]))</span></span><br><span class="line">h_vec = tf.constant([<span class="number">1.0</span>,<span class="number">2.0</span>,<span class="number">3.0</span>,<span class="number">4.0</span>])</span><br><span class="line"><span class="comment"># æŠŠ h_vec çš„æ¯ä¸ªå…ƒç´ åŠ åˆ° h_sum ä¸­ï¼Œç„¶åå†é™¤ä»¥ 10 æ¥è®¡ç®—å¹³å‡å€¼</span></span><br><span class="line"><span class="comment"># å¾…æ·»åŠ çš„æ•°</span></span><br><span class="line">h_add = tf.placeholder(tf.float32)</span><br><span class="line"><span class="comment"># æ·»åŠ ä¹‹åçš„å€¼</span></span><br><span class="line">h_new = tf.add(h_sum, h_add)</span><br><span class="line"><span class="comment"># æ›´æ–° h_new çš„ op</span></span><br><span class="line">update = tf.assign(h_sum, h_new)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.run(tf.global_variables_initializer())</span><br><span class="line">    <span class="comment"># æŸ¥çœ‹åŸå§‹å€¼</span></span><br><span class="line">    print(<span class="string">'s_sum ='</span>, sess.run(h_sum))</span><br><span class="line">    print(<span class="string">"vec = "</span>, sess.run(h_vec))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¾ªç¯æ·»åŠ </span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">        sess.run(update, feed_dict=&#123;h_add: sess.run(h_vec[_])&#125;)</span><br><span class="line">        print(<span class="string">'h_sum ='</span>, sess.run(h_sum))</span><br><span class="line"></span><br><span class="line"><span class="comment">#     print 'the mean is ', sess.run(sess.run(h_sum) / 4)  # è¿™æ ·å†™ 4  æ˜¯é”™è¯¯çš„ï¼Œ å¿…é¡»è½¬ä¸º tf å˜é‡æˆ–è€…å¸¸é‡</span></span><br><span class="line">    print(<span class="string">'the mean is '</span>, sess.run(sess.run(h_sum) / tf.constant(<span class="number">4.0</span>)))</span><br></pre></td></tr></table></figure>
<h3 id="3-3-åªç”¨ä¸€ä¸ªå˜é‡æ¥å®ç°è®¡æ•°å™¨"><a href="#3-3-åªç”¨ä¸€ä¸ªå˜é‡æ¥å®ç°è®¡æ•°å™¨" class="headerlink" title="3.3 åªç”¨ä¸€ä¸ªå˜é‡æ¥å®ç°è®¡æ•°å™¨"></a>3.3 åªç”¨ä¸€ä¸ªå˜é‡æ¥å®ç°è®¡æ•°å™¨</h3><p>ä¸Šé¢çš„è®¡æ•°å™¨æ˜¯ TensorFlow å®˜æ–¹æ–‡æ¡£çš„ä¾‹å­ï¼Œä½†æ˜¯è§‰å¾—å¥½è‡ƒè‚¿ï¼Œæ‰€ä»¥ä¸‹é¢è¿™ä¸ªæ˜¯æ›´åŠ ç®€å•çš„ï¼Œåªéœ€è¦å®šä¹‰ä¸€ä¸ªå˜é‡å’Œä¸€ä¸ª åŠ  1 çš„æ“ä½œï¼ˆopï¼‰ã€‚é€šè¿‡forå¾ªç¯å°±èƒ½å¤Ÿå®ç°äº†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœä¸æ˜¯ assign() é‡æ–°èµ‹å€¼çš„è¯ï¼Œæ¯ä¸€æ¬¡ sess.run()éƒ½ä¼šæŠŠ stateå†æ¬¡åˆå§‹åŒ–ä¸º 0.0</span></span><br><span class="line">state = tf.Variable(<span class="number">0.0</span>, tf.float32)</span><br><span class="line"><span class="comment"># é€šè¿‡ assign æ“ä½œæ¥æ”¹å˜stateçš„å€¼ã€‚</span></span><br><span class="line">add_op = tf.assign(state, state+<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line"><span class="keyword">print</span> <span class="string">'init state '</span>, sess.run(state)</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> xrange(<span class="number">3</span>):</span><br><span class="line">    sess.run(add_op)</span><br><span class="line">    print(sess.run(state))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">init state  0.0</span><br><span class="line">1.0</span><br><span class="line">2.0</span><br><span class="line">3.0</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™æ ·å­å’Œæˆ‘ä»¬å¹³æ—¶å®ç°è®¡æ•°å™¨çš„æ–¹æ³•åŸºæœ¬ä¸Šå°±ä¸€è‡´äº†ã€‚æˆ‘ä»¬è¦é‡ç‚¹ç†è§£çš„æ˜¯ï¼Œ TensorFlow ä¸­é€šè¿‡ tf.assign(ref, value) çš„æ–¹å¼æ¥æŠŠ value å€¼èµ‹ç»™ ref å˜é‡ã€‚è¿™æ ·å­ï¼Œæ¯ä¸€æ¬¡å¾ªç¯çš„æ—¶å€™ï¼Œref å˜é‡æ‰ä¸ä¼šå†åšå®šä¹‰æ—¶å€™çš„åˆå§‹åŒ–æ“ä½œã€‚</p>
</blockquote>
<h2 id="4-InteractiveSession-çš„ç”¨æ³•"><a href="#4-InteractiveSession-çš„ç”¨æ³•" class="headerlink" title="4. InteractiveSession() çš„ç”¨æ³•"></a>4. InteractiveSession() çš„ç”¨æ³•</h2><p>InteractiveSession() ä¸»è¦æ˜¯é¿å… Sessionï¼ˆä¼šè¯ï¼‰è¢«ä¸€ä¸ªå˜é‡æŒæœ‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = tf.constant(<span class="number">1.0</span>)</span><br><span class="line">b = tf.constant(<span class="number">2.0</span>)</span><br><span class="line">c = a + b</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹é¢çš„ä¸¤ç§æƒ…å†µæ˜¯ç­‰ä»·çš„</span></span><br><span class="line"><span class="keyword">with</span> tf.Session():  <span class="comment"># ä¸ç”¨ close()</span></span><br><span class="line">    print(c.eval())</span><br><span class="line"></span><br><span class="line">sess = tf.InteractiveSession()</span><br><span class="line">print(c.eval())</span><br><span class="line">sess.close()</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">3.0</span><br><span class="line">3.0</span><br></pre></td></tr></table></figure>
<h3 id="4-1-InteractiveSession-ã€evalã€init"><a href="#4-1-InteractiveSession-ã€evalã€init" class="headerlink" title="4.1 InteractiveSession()ã€evalã€init"></a>4.1 InteractiveSession()ã€evalã€init</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = tf.constant(<span class="number">1.0</span>)</span><br><span class="line">b = tf.constant(<span class="number">2.0</span>)</span><br><span class="line">c = tf.Variable(<span class="number">3.0</span>)</span><br><span class="line">d = a + b</span><br><span class="line"></span><br><span class="line">sess = tf.InteractiveSession()</span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line"></span><br><span class="line"><span class="comment">###################</span></span><br><span class="line"><span class="comment"># è¿™æ ·å†™æ˜¯é”™è¯¯çš„</span></span><br><span class="line"><span class="comment"># print(a.run())</span></span><br><span class="line"><span class="comment"># print(d.run())</span></span><br><span class="line"></span><br><span class="line"><span class="comment">####################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™æ ·æ‰æ˜¯æ­£ç¡®çš„</span></span><br><span class="line">print(a.eval())</span><br><span class="line">print(d.eval())</span><br><span class="line"></span><br><span class="line"><span class="comment"># run() æ–¹æ³•ä¸»è¦ç”¨æ¥</span></span><br><span class="line">x = tf.Variable(<span class="number">1.2</span>)</span><br><span class="line"><span class="comment"># print(x.eval())  # è¿˜æ²¡åˆå§‹åŒ–ï¼Œä¸èƒ½ç”¨</span></span><br><span class="line">x.initializer.run()  <span class="comment"># x.initializer å°±æ˜¯ä¸€ä¸ªåˆå§‹åŒ–çš„ opï¼Œ op æ‰è°ƒç”¨run() æ–¹æ³•</span></span><br><span class="line">print(x.eval())</span><br><span class="line"></span><br><span class="line">sess.close()</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1.0</span><br><span class="line">3.0</span><br><span class="line">1.2</span><br></pre></td></tr></table></figure>
<h3 id="4-2-ä½¿ç”¨-tf-InteractiveSession-æ¥å®Œæˆä¸Šé¢-æ±‚å’Œã€å¹³å‡-çš„æ“ä½œå‘¢"><a href="#4-2-ä½¿ç”¨-tf-InteractiveSession-æ¥å®Œæˆä¸Šé¢-æ±‚å’Œã€å¹³å‡-çš„æ“ä½œå‘¢" class="headerlink" title="4.2 ä½¿ç”¨ tf.InteractiveSession() æ¥å®Œæˆä¸Šé¢ æ±‚å’Œã€å¹³å‡ çš„æ“ä½œå‘¢?"></a>4.2 ä½¿ç”¨ tf.InteractiveSession() æ¥å®Œæˆä¸Šé¢ æ±‚å’Œã€å¹³å‡ çš„æ“ä½œå‘¢?</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">h_sum = tf.Variable(<span class="number">0.0</span>, dtype=tf.float32)</span><br><span class="line"><span class="comment"># h_vec = tf.random_normal(shape=([10]))</span></span><br><span class="line">h_vec = tf.constant([<span class="number">1.0</span>,<span class="number">2.0</span>,<span class="number">3.0</span>,<span class="number">4.0</span>])</span><br><span class="line"><span class="comment"># æŠŠ h_vec çš„æ¯ä¸ªå…ƒç´ åŠ åˆ° h_sum ä¸­ï¼Œç„¶åå†é™¤ä»¥ 10 æ¥è®¡ç®—å¹³å‡å€¼</span></span><br><span class="line"><span class="comment"># å¾…æ·»åŠ çš„æ•°</span></span><br><span class="line">h_add = tf.placeholder(tf.float32)</span><br><span class="line"><span class="comment"># æ·»åŠ ä¹‹åçš„å€¼</span></span><br><span class="line">h_new = tf.add(h_sum, h_add)</span><br><span class="line"><span class="comment"># æ›´æ–° h_new çš„ op</span></span><br><span class="line">update = tf.assign(h_sum, h_new)</span><br><span class="line"></span><br><span class="line">sess = tf.InteractiveSession()</span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line"></span><br><span class="line">print(<span class="string">'s_sum ='</span>, h_sum.eval())</span><br><span class="line">print(<span class="string">"vec = "</span>, h_vec.eval())</span><br><span class="line">print(<span class="string">"vec = "</span>, h_vec[<span class="number">0</span>].eval())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">    update.eval(feed_dict=&#123;h_add: h_vec[_].eval()&#125;)</span><br><span class="line">    print(<span class="string">'h_sum ='</span>, h_sum.eval())</span><br><span class="line">sess.close()</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">s_sum = 0.0</span><br><span class="line">vec =  [ 1.  2.  3.  4.]</span><br><span class="line">vec =  1.0</span><br><span class="line">h_sum = 1.0</span><br><span class="line">h_sum = 3.0</span><br><span class="line">h_sum = 6.0</span><br><span class="line">h_sum = 10.0</span><br></pre></td></tr></table></figure>
<h3 id="4-3-ä½¿ç”¨-feed-æ¥å¯¹å˜é‡èµ‹å€¼"><a href="#4-3-ä½¿ç”¨-feed-æ¥å¯¹å˜é‡èµ‹å€¼" class="headerlink" title="4.3 ä½¿ç”¨ feed æ¥å¯¹å˜é‡èµ‹å€¼"></a>4.3 ä½¿ç”¨ feed æ¥å¯¹å˜é‡èµ‹å€¼</h3><p>è¿™äº›éœ€è¦ç”¨åˆ° feed æ¥èµ‹å€¼çš„æ“ä½œå¯ä»¥é€šè¿‡ tf.placeholder() è¯´æ˜ï¼Œä»¥åˆ›å»ºå ä½ç¬¦ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹å‡º session.run([output], â€¦) å’Œ session.run(output, â€¦) çš„åŒºåˆ«ã€‚å‰è€…è¾“å‡ºäº† output çš„ç±»å‹ç­‰è¯¦ç»†ä¿¡æ¯ï¼Œåè€…åªè¾“å‡ºç®€å•ç»“æœã€‚</p>
<p><strong>ğŸŒ°ğŸŒ°1ï¼šfeed</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">input1 = tf.placeholder(tf.float32)</span><br><span class="line">input2 = tf.placeholder(tf.float32)</span><br><span class="line">output = tf.multiply(input1, input2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    print(sess.run([output], feed_dict=&#123;input1:[<span class="number">7.0</span>], input2:[<span class="number">2.0</span>]&#125;))</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[array([ 14.], dtype=<span class="built_in">float</span>32)]</span><br></pre></td></tr></table></figure>
<p><strong>ğŸŒ°ğŸŒ°2ï¼š input1:[7.0], input2:[2.0]</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    result = sess.run(output, feed_dict=&#123;input1:[<span class="number">7.0</span>], input2:[<span class="number">2.0</span>]&#125;)</span><br><span class="line">    print(type(result))</span><br><span class="line">    print(result)</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;type &apos;numpy.ndarray&apos;&gt;</span><br><span class="line">[ 14.]</span><br></pre></td></tr></table></figure>
<p><strong>ğŸŒ°ğŸŒ°3ï¼š input1:7.0, input2:2.0</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    result = sess.run(output, feed_dict=&#123;input1:<span class="number">7.0</span>, input2:<span class="number">2.0</span>&#125;)</span><br><span class="line">    print(type(result))</span><br><span class="line">    print(result)</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;type &apos;numpy.float32&apos;&gt;</span><br><span class="line">14.0</span><br></pre></td></tr></table></figure>
<p><strong>ğŸŒ°ğŸŒ°4ï¼š [output], output</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    print(sess.run([output], feed_dict=&#123;input1:[<span class="number">7.0</span>, <span class="number">3.0</span>], input2:[<span class="number">2.0</span>, <span class="number">1.0</span>]&#125;))</span><br><span class="line">    print()</span><br><span class="line">    print(sess.run(output, feed_dict=&#123;input1:[<span class="number">7.0</span>, <span class="number">3.0</span>], input2:[<span class="number">2.0</span>, <span class="number">1.0</span>]&#125;))</span><br></pre></td></tr></table></figure>
<p>output:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[array([ 14.,   3.], dtype=float32)]</span><br><span class="line"></span><br><span class="line">[ 14.   3.]</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://blog.csdn.net/jerr__y/article/details/57084008" target="_blank" rel="external">TensorFlowå…¥é—¨ï¼ˆä¸€ï¼‰åŸºæœ¬ç”¨æ³•</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Activation Function æ¿€åŠ±å‡½æ•°]]></title>
      <url>http://shopee.ai/2018/09/07/tensorflow/tf-2.6-B-activation-function/</url>
      <content type="html"><![CDATA[<p>Tensorflow æä¾›çš„ä¸€äº› Activation Function <a href="https://www.tensorflow.org/api_guides/python/nn" target="_blank" rel="external">tensorflow/api_guides/python/nn</a></p>
<a id="more"></a>
<p>æ¿€åŠ±å‡½æ•°è¿è¡Œæ—¶æ¿€æ´»ç¥ç»ç½‘ç»œä¸­æŸä¸€éƒ¨åˆ†ç¥ç»å…ƒï¼Œå°†æ¿€æ´»ä¿¡æ¯å‘åä¼ å…¥ä¸‹ä¸€å±‚çš„ç¥ç»ç³»ç»Ÿã€‚</p>
<p>æ¿€åŠ±å‡½æ•°çš„å®è´¨æ˜¯éçº¿æ€§æ–¹ç¨‹ã€‚ Tensorflow çš„ç¥ç»ç½‘ç»œ é‡Œé¢å¤„ç†è¾ƒä¸ºå¤æ‚çš„é—®é¢˜æ—¶éƒ½ä¼šéœ€è¦è¿ç”¨ activation function ã€‚ </p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª TensorFlow æ­å»ºçš„ ç®€å•ç‰ˆç¥ç»ç½‘ç»œ æ•°æ®æµå›¾ :</p>
<p><img src="/images/tensorflow/tf-2.6-active6_1.png" width="550"></p>
<p>Layer2 å±•å¼€éƒ¨åˆ†ï¼ŒLayer1 å‡ºæ¥çš„æ•°æ®ï¼Œå†è¾“å…¥åˆ° Layer2 ä¸­</p>
<p><img src="/images/tensorflow/tf-2.6-active7.jpg" width="550"></p>
<blockquote>
<p>è¯¦ç»†ä»‹ç»è¯·å‰å¾€ <a href="/2018/09/07/tensorflow-2-6-A-activation-function/">Whatâ€™s Activation Function</a></p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python</a></li>
<li><a href="https://www.tensorflow.org/api_guides/python/nn" target="_blank" rel="external">Tensorflow æä¾›çš„ä¸€äº› æ¿€åŠ±å‡½æ•°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[What's Activation Function]]></title>
      <url>http://shopee.ai/2018/09/07/tensorflow/tf-2.6-A-activation-function/</url>
      <content type="html"><![CDATA[<p>ç°ä»£ç¥ç»ç½‘ç»œä¸­ å¿…ä¸å¯å°‘çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†, æ¿€åŠ±å‡½æ•°, activation function.</p>
<a id="more"></a>
<p>æœ¬æ–‡å¤§éƒ¨åˆ†å†…å®¹è½¬è½½è‡ª <a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python /Tensorflow-Tutorial</a></p>
<h2 id="éçº¿æ€§æ–¹ç¨‹"><a href="#éçº¿æ€§æ–¹ç¨‹" class="headerlink" title="éçº¿æ€§æ–¹ç¨‹"></a>éçº¿æ€§æ–¹ç¨‹</h2><p>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¿€åŠ±å‡½æ•°? ç”¨ç®€å•çš„è¯­å¥æ¥æ¦‚æ‹¬. å°±æ˜¯å› ä¸º, <span style="TEXT-DECORATION: underline"><strong>ç°å®å¹¶æ²¡æœ‰æˆ‘ä»¬æƒ³è±¡çš„é‚£ä¹ˆç¾å¥½</strong></span>ã€‚æ¿€åŠ±å‡½æ•°ä¹Ÿå°±æ˜¯ä¸ºäº†è§£å†³æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­ <strong>ä¸èƒ½ç”¨çº¿æ€§æ–¹ç¨‹æ‰€æ¦‚æ‹¬çš„é—®é¢˜</strong>. </p>
<p><img src="/images/tensorflow/tf-2.6-active1.png" alt="Linear function and Nonlinear function"></p>
<p>è¯´åˆ°çº¿æ€§æ–¹ç¨‹, æˆ‘ä»¬ä¸å¾—ä¸æåˆ°å¦å¤–ä¸€ç§æ–¹ç¨‹, éçº¿æ€§æ–¹ç¨‹ (nonlinear function). æˆ‘ä»¬å‡è®¾, å¥³ç”Ÿé•¿å¾—è¶Šæ¼‚äº®, è¶Šå¤šç”·ç”Ÿçˆ±. è¿™å°±å¯ä»¥è¢«å½“åšä¸€ä¸ªçº¿æ€§é—®é¢˜. ä½†æ˜¯å¦‚æœæˆ‘ä»¬å‡è®¾è¿™ä¸ªåœºæ™¯æ˜¯å‘ç”Ÿåœ¨æ ¡å›­é‡Œ. æ ¡å›­é‡Œçš„ç”·ç”Ÿæ•°æ˜¯æœ‰é™çš„, å¥³ç”Ÿå†æ¼‚äº®, ä¹Ÿä¸å¯èƒ½ä¼šæœ‰æ— ç©·å¤šçš„ç”·ç”Ÿå–œæ¬¢å¥¹. æ‰€ä»¥è¿™å°±å˜æˆäº†ä¸€ä¸ªéçº¿æ€§é—®é¢˜.å†è¯´..å¥³ç”Ÿä¹Ÿä¸å¯èƒ½æ˜¯æ— ç©·æ¼‚äº®çš„. è¿™ä¸ªé—®é¢˜æˆ‘ä»¬ä»¥åæœ‰æ—¶é—´ç§ä¸‹è®¨è®º.</p>
<p><img src="/images/tensorflow/tf-2.6-active2.png" alt="Linear function -&gt; Activation Function"></p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥æ¥è®¨è®ºå¦‚ä½•åœ¨ç¥ç»ç½‘ç»œä¸­è¾¾æˆæè¿°éçº¿æ€§çš„ä»»åŠ¡äº†. æˆ‘ä»¬å¯ä»¥æŠŠæ•´ä¸ªç½‘ç»œç®€åŒ–æˆè¿™æ ·ä¸€ä¸ªå¼å­. $Y = WX$, $W$ å°±æ˜¯æˆ‘ä»¬è¦æ±‚çš„å‚æ•°, $y$ æ˜¯é¢„æµ‹å€¼, $x$ æ˜¯è¾“å…¥å€¼. ç”¨è¿™ä¸ªå¼å­, æˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½æè¿°åˆšåˆšçš„é‚£ä¸ªçº¿æ€§é—®é¢˜, å› ä¸º $W$ æ±‚å‡ºæ¥å¯ä»¥æ˜¯ä¸€ä¸ªå›ºå®šçš„æ•°. ä¸è¿‡è¿™ä¼¼ä¹å¹¶ä¸èƒ½è®©è¿™æ¡ç›´çº¿å˜å¾—æ‰­èµ·æ¥ , æ¿€åŠ±å‡½æ•°è§çŠ¶, æ‹”åˆ€ç›¸åŠ©, ç«™å‡ºæ¥è¯´é“: â€œè®©æˆ‘æ¥æ°å¼¯å®ƒ!â€.</p>
<h2 id="æ¿€åŠ±å‡½æ•°"><a href="#æ¿€åŠ±å‡½æ•°" class="headerlink" title="æ¿€åŠ±å‡½æ•°"></a>æ¿€åŠ±å‡½æ•°</h2><p><img src="/images/tensorflow/tf-2.6-active3.png" alt="Activation Function"></p>
<blockquote>
<p>è¿™é‡Œçš„ AF å°±æ˜¯æŒ‡æ¿€åŠ±å‡½æ•°. æ¿€åŠ±å‡½æ•°æ‹¿å‡ºè‡ªå·±æœ€æ“…é•¿çš„â€æ°å¼¯åˆ©å™¨â€, å¥—åœ¨åŸå‡½æ•°ä¸Šç”¨åŠ›ä¸€æ‰­, åŸæ¥çš„ $WX$ ç»“æœå°±è¢«æ‰­å¼¯äº†.</p>
<p>å…¶å®è¿™ä¸ª AF, æ°å¼¯åˆ©å™¨, ä¹Ÿä¸æ˜¯ä»€ä¹ˆè§¦ä¸å¯åŠçš„ä¸œè¥¿. å®ƒå…¶å®å°±æ˜¯å¦å¤–ä¸€ä¸ªéçº¿æ€§å‡½æ•°. æ¯”å¦‚è¯´<code>relu, sigmoid, tanh</code>. å°†è¿™äº›æ°å¼¯åˆ©å™¨åµŒå¥—åœ¨åŸæœ‰çš„ç»“æœä¹‹ä¸Š, å¼ºè¡ŒæŠŠåŸæœ‰çš„çº¿æ€§ç»“æœç»™æ‰­æ›²äº†. ä½¿å¾—è¾“å‡ºç»“æœ $y$ ä¹Ÿæœ‰äº†éçº¿æ€§çš„ç‰¹å¾. ä¸¾ä¸ªä¾‹å­, æ¯”å¦‚æˆ‘ä½¿ç”¨äº† <code>relu</code> è¿™ä¸ªæ°å¼¯åˆ©å™¨, å¦‚æœæ­¤æ—¶ $Wx$ çš„ç»“æœæ˜¯ 1, $y$ è¿˜å°†æ˜¯ 1, ä¸è¿‡ $WX$ ä¸º -1 çš„æ—¶å€™, $y$ ä¸å†æ˜¯ -1, è€Œä¼šæ˜¯ 0.</p>
</blockquote>
<p><img src="/images/tensorflow/tf-2.6-active5.jpg" width="550"></p>
<blockquote>
<p>ä½ ç”šè‡³å¯ä»¥åˆ›é€ è‡ªå·±çš„æ¿€åŠ±å‡½æ•°æ¥å¤„ç†è‡ªå·±çš„é—®é¢˜, ä¸è¿‡è¦ç¡®ä¿çš„æ˜¯è¿™äº›æ¿€åŠ±å‡½æ•°å¿…é¡»æ˜¯å¯ä»¥å¾®åˆ†çš„, å› ä¸ºåœ¨ backpropagation è¯¯å·®åå‘ä¼ é€’çš„æ—¶å€™, åªæœ‰è¿™äº›å¯å¾®åˆ†çš„æ¿€åŠ±å‡½æ•°æ‰èƒ½æŠŠè¯¯å·®ä¼ é€’å›å».</p>
</blockquote>
<h2 id="å¸¸ç”¨é€‰æ‹©"><a href="#å¸¸ç”¨é€‰æ‹©" class="headerlink" title="å¸¸ç”¨é€‰æ‹©"></a>å¸¸ç”¨é€‰æ‹©</h2><p><img src="/images/tensorflow/tf-2.6-active4.png" alt="Activation Function"></p>
<p>æƒ³è¦æ°å½“ä½¿ç”¨è¿™äº›æ¿€åŠ±å‡½æ•°, è¿˜æ˜¯æœ‰çªé—¨çš„. æ¯”å¦‚å½“ä½ çš„ç¥ç»ç½‘ç»œå±‚åªæœ‰ä¸¤ä¸‰å±‚, ä¸æ˜¯å¾ˆå¤šçš„æ—¶å€™, å¯¹äºéšè—å±‚, ä½¿ç”¨ä»»æ„çš„æ¿€åŠ±å‡½æ•°, éšä¾¿æ°å¼¯æ˜¯å¯ä»¥çš„, ä¸ä¼šæœ‰ç‰¹åˆ«å¤§çš„å½±å“. ä¸è¿‡, å½“ä½ ä½¿ç”¨ç‰¹åˆ«å¤šå±‚çš„ç¥ç»ç½‘ç»œ, åœ¨æ°å¼¯çš„æ—¶å€™, ç©ç©ä¸å¾—éšæ„é€‰æ‹©åˆ©å™¨. å› ä¸ºè¿™ä¼šæ¶‰åŠåˆ°æ¢¯åº¦çˆ†ç‚¸, æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜. å› ä¸ºæ—¶é—´çš„å…³ç³», æˆ‘ä»¬å¯èƒ½ä¼šåœ¨ä»¥åæ¥å…·ä½“è°ˆè°ˆè¿™ä¸ªé—®é¢˜.</p>
<p>æœ€åæˆ‘ä»¬è¯´è¯´, åœ¨å…·ä½“çš„ä¾‹å­ä¸­, æˆ‘ä»¬é»˜è®¤é¦–é€‰çš„æ¿€åŠ±å‡½æ•°æ˜¯å“ªäº›. åœ¨å°‘é‡å±‚ç»“æ„ä¸­, æˆ‘ä»¬å¯ä»¥å°è¯•å¾ˆå¤šç§ä¸åŒçš„æ¿€åŠ±å‡½æ•°. åœ¨å·ç§¯ç¥ç»ç½‘ç»œ Convolutional neural networks çš„å·ç§¯å±‚ä¸­, æ¨èçš„æ¿€åŠ±å‡½æ•°æ˜¯ <code>relu</code>. åœ¨å¾ªç¯ç¥ç»ç½‘ç»œä¸­ Recurrent neural networks, æ¨èçš„æ˜¯ <code>tanh</code> æˆ–è€…æ˜¯ <code>relu</code> (è¿™ä¸ªå…·ä½“æ€ä¹ˆé€‰, æˆ‘ä¼šåœ¨ä»¥å å¾ªç¯ç¥ç»ç½‘ç»œ çš„ä»‹ç»ä¸­åœ¨è¯¦ç»†è®²è§£).</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python</a></li>
<li><a href="https://github.com/MorvanZhou/Tensorflow-Tutorial" target="_blank" rel="external">Tensorflow æä¾›çš„ä¸€äº› æ¿€åŠ±å‡½æ•°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ·±åº¦å­¦ä¹ ä¸è®¡ç®—æœºè§†è§‰ - å†å²å›é¡¾ä¸ä»‹ç»]]></title>
      <url>http://shopee.ai/2018/09/01/deeplearning/deeplearning-CS231n-P1/</url>
      <content type="html"><![CDATA[<p>1966å¹´æ˜¯è®¡ç®—æœºè§†è§‰çš„è¯ç”Ÿå¹´</p>
<p>CVPRã€ICCV</p>
<a id="more"></a>
<p>ç¬¬ä¸€é¢†æ‚Ÿ : Hubel å’Œ Wiesel  ä»ç®€å•çš„å½¢çŠ¶å¼€å§‹<br>ç¬¬äºŒé¢†æ‚Ÿ : David Marr ã€Šè§†è§‰ã€‹ è§†è§‰æ˜¯åˆ†å±‚çš„</p>
<p>æ·±åº¦å­¦ä¹ æ¶æ„çš„åŸºçŸ³</p>
<p>æ„ŸçŸ¥åˆ†ç»„</p>
<p>ImageNet</p>
<p>2012å¹´æ˜¯å†å²æ€§æ—¶åˆ»çš„ä¸€å¹´ï¼Œæå‡ºäº† CNN .</p>
<p>ImageNet ç«èµ› 2010å¹´ å¼€å§‹ä¸¾åŠç«èµ›<br>ImageNet ç«èµ› 2012å¹´ 7å±‚ CNN è·èƒœ<br>ImageNet ç«èµ› 2015å¹´ 151å±‚ CNN è·èƒœï¼Œ MS æ·±åº¦æ®‹å·®ç½‘ç»œ.</p>
<p>è®¡ç®—æœºè§†è§‰æ™ºèƒ½æ¯”ç‰©ä½“è¯†åˆ«è¦æ›´ä¸ºä»»é‡è€Œé“è¿œ</p>
<p>è®¡ç®—æœºè§†è§‰çš„æ„¿æ™¯æ˜¯ ï¼š å¯ä»¥çœ‹å›¾è®²æ•…äº‹</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/21353567" target="_blank" rel="external">æ–¯å¦ç¦CS231Nè¯¾ç¨‹å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰.è¯¾ç¨‹ç®€ä»‹ä¸å‡†å¤‡</a></li>
<li><a href="https://blog.csdn.net/tMb8Z9Vdm66wH68VX1/article/details/78537000" target="_blank" rel="external">æé£é£CS231n2017è¯¾ç¨‹åŒè¯­å­—å¹•ç‰ˆä¸Šçº¿ !ï¼ˆé™„è¯¾ç¨‹é“¾æ¥ï¼‰</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Convolutional Neural Networks (week3) - Object detection]]></title>
      <url>http://shopee.ai/2018/09/01/deeplearning/Convolutional-Neural-Networks-week3/</url>
      <content type="html"><![CDATA[<p>çŸ¥é“å¦‚ä½•å°†å·ç§¯ç½‘ç»œåº”ç”¨åˆ°è§†è§‰æ£€æµ‹å’Œè¯†åˆ«ä»»åŠ¡ã€‚ çŸ¥é“å¦‚ä½•ä½¿ç”¨ç¥ç»é£æ ¼è¿ç§»ç”Ÿæˆè‰ºæœ¯ã€‚</p>
<a id="more"></a>
<h2 id="1-Object-Localization"><a href="#1-Object-Localization" class="headerlink" title="1. Object Localization"></a>1. Object Localization</h2><p>è¿™ä¸€å°èŠ‚è§†é¢‘ä¸»è¦ä»‹ç»äº†æˆ‘ä»¬åœ¨å®ç°ç›®æ ‡å®šä½æ—¶æ ‡ç­¾è¯¥å¦‚ä½•å®šä¹‰</p>
<p><img src="/images/deeplearning/C4W3-1_1.png" width="750"></p>
<p>è¾“å‡º softmax çš„åŒæ—¶ï¼Œåœ¨è¾“å‡º4ä¸ªå€¼ $b_x,b_y,b_w,b_h$, è¾¹ç•Œæ¡†çš„å…·ä½“ä½ç½® ï¼ˆå›¾ç‰‡å·¦ä¸Šè§’åæ ‡ä¸º (0, 0)ï¼Œ å³ä¸‹è§’ä¸º (1, 1) )</p>
<blockquote>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ$b_x$ çš„å€¼å¤§çº¦ä¸º 0.5ï¼Œ$b_y$ çš„å€¼å¤§çº¦ä¸º 0.7ï¼Œæœ€ä½³ä½ç½®.</p>
</blockquote>
<p><strong>how we define the target label $y$ for this as a supervised learning task.</strong></p>
<p><img src="/images/deeplearning/C4W3-2_1.png" width="750"></p>
<blockquote>
<p>ä¸Šå›¾å·¦ä¸‹è§’ç»™å‡ºäº†æŸå¤±å‡½æ•°çš„è®¡ç®—å…¬å¼ (è¿™é‡Œä½¿ç”¨çš„æ˜¯å¹³æ–¹å·®)</p>
<p>æ³¨æ„: æˆ‘ä»¬å‡è®¾å›¾åƒä¸­å­˜åœ¨è¿™ä¸‰è€… (<strong>pedestrian</strong>ï¼Œ<strong>car</strong>ï¼Œ<strong>motorcycles</strong>) ä¸­çš„ä¸€ç§ æˆ–è€… éƒ½ä¸å­˜åœ¨ï¼Œæ‰€ä»¥å…±æœ‰å››ç§å¯èƒ½.</p>
</blockquote>
<p>$P_c=1$ <strong>è¡¨ç¤ºæœ‰ä¸‰è€…ä¸­çš„ä¸€ç§</strong></p>
<ul>
<li><p>$C_1=1$ è¡¨ç¤ºæœ‰ pedestrianï¼Œåä¹‹æ²¡æœ‰</p>
</li>
<li><p>$C_2=1$ è¡¨ç¤ºæœ‰ car</p>
</li>
<li><p>$C_3=1$ è¡¨ç¤ºæœ‰ motorcycles</p>
</li>
</ul>
<p>$b_*$ <strong>ç”¨äºæ ‡è¯†æ‰€è¯†åˆ«é£Ÿç‰©çš„ä½ç½®</strong></p>
<ul>
<li><p>$b_x,b_y$: è¡¨ç¤ºè¯†åˆ«ç‰©ä½“çš„ä¸­å¿ƒåæ ‡</p>
</li>
<li><p>$b_w,b_h$: è¡¨ç¤ºè¯†åˆ«ç‰©ä½“çš„å®½å’Œé«˜</p>
</li>
</ul>
<p><img src="/images/deeplearning/C4W3-3.png" width="450"></p>
<blockquote>
<p>æ³¨æ„: $P_c=0$ è¡¨ç¤ºä¸‰è€…éƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥æ­¤æ—¶ $C_*,b_*$ çš„å€¼æˆ‘ä»¬å¹¶ä¸åœ¨ä¹äº†.</p>
<p>ä¸ºäº†è®©å¤§å®¶ä¾¿äºäº†è§£å¯¹è±¡å®šä½çš„ç»†èŠ‚ï¼Œè¿™é‡Œæˆ‘ç”¨å¹³æ–¹è¯¯å·®ç®€åŒ–äº†æè¿°è¿‡ç¨‹. (å®é™…åº”ç”¨ä¸­ $P_c$ æ›´å¤šæ˜¯åº”ç”¨é€»è¾‘å›å½’å‡½æ•°)</p>
</blockquote>
<h2 id="2-Landmark-Detection"><a href="#2-Landmark-Detection" class="headerlink" title="2. Landmark Detection"></a>2. Landmark Detection</h2><p>ç‰¹å¾ç‚¹æ£€æµ‹ï¼Œè¿™ä¸€èŠ‚çš„å†…å®¹å’Œä¸Šä¸€èŠ‚æ„Ÿè§‰å¾ˆç±»ä¼¼.</p>
<p><img src="/images/deeplearning/C4W3-4_1.png" width="750"></p>
<blockquote>
<p>è¦è¾“å‡ºçœ¼è§’çš„ä½ç½®ï¼Œä½ å¯ä»¥è®©ç¥ç»ç½‘ç»œè¾“å‡ºçš„æœ€åä¸€å±‚ï¼Œå¤šè¾“å‡º 2 ä¸ªæ•°å­— $l_x, l_y$.</p>
<p>å‡è®¾ è„¸éƒ¨ æœ‰ 64 ä¸ªç‰¹å¾ç‚¹. å…·ä½“åšæ³•æ˜¯å‡†å¤‡ä¸€ä¸ª CNN å’Œ ä¸€äº›å…³é”®ç‰¹å¾é›†. å°†äººè„¸å›¾ç‰‡è¾“å…¥ CNN. è¾“å‡º 1 æˆ–è€… 0. </p>
<p>1 è¡¨ç¤ºæœ‰ äººè„¸ã€‚ è¿™é‡Œä¸€å…±æœ‰ <strong>128 + 1</strong> ä¸ªè¾“å‡ºå•å…ƒï¼Œå› ä¸ºæœ‰ 64 ä¸ªç‰¹å¾ 64 * 2ï¼Œ æ¥å®ç°å¯¹äººè„¸çš„æ£€æµ‹å’Œå®šä½.</p>
<p>Snapchat åº”ç”¨ï¼ŒAR (Augmented Reality) å¢å¼ºç°å® Filter æœ‰æ‰€äº†è§£ï¼ŒSnapchat Filter å®ç°äº†åœ¨äººè„¸ä¸Šç”»çš‡å†  è¿˜æœ‰ä¸€äº›å…¶ä»–æ•ˆæœã€‚æ£€æµ‹è„¸éƒ¨ç‰¹å¾ä¹Ÿæ˜¯è®¡ç®—æœºå›¾å½¢å­¦çš„å…³é”®æ„é€ æ¨¡å—.</p>
<p>æœ€åä¸€ä¸ªä¾‹å­æ˜¯ï¼Œæ£€æµ‹äººä½“å§¿æ€.</p>
</blockquote>
<h2 id="3-Object-Detection"><a href="#3-Object-Detection" class="headerlink" title="3. Object Detection"></a>3. Object Detection</h2><p>å‡è®¾ä½ æƒ³æ„é€ ä¸€ä¸ªæ±½è½¦æ£€æµ‹ç®—æ³•:</p>
<ol>
<li>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ ‡ç­¾è®­ç»ƒé›† Training Setï¼Œ ä¹Ÿå°±æ˜¯ $x$ å’Œ $y$</li>
<li>é€‰å®šä¸€ä¸ªå¤§å°ç¡®å®šçš„çª—å£ï¼Œè¾“å…¥ CNNï¼ŒCNN å¼€å§‹é¢„æµ‹çº¢è‰²æ–¹æ¡†ä¸­æ˜¯å¦æœ‰æ±½è½¦.</li>
<li>ç„¶åï¼Œæ»‘åŠ¨çª—å£ç»§ç»­, çº¢è‰²æ–¹æ¡†ç¨å‘å³æ»‘åŠ¨ä¹‹åçš„åŒºåŸŸ, å¤„ç†ä¸‹ä¸€ä¸ªï¼Œè¾“å…¥ CNN..</li>
<li>ä¾æ¬¡é‡å¤æ“ä½œ.., çŸ¥é“è¿™ä¸ªçº¢è‰²çš„çª—å£æ»‘è¿‡æ¯ä¸€ä¸ªè§’è½ã€‚</li>
<li>å¦‚æœä¸Šé¢åˆ°æœ€åè§’è½è¿˜æ˜¯æ²¡æœ‰æ£€æµ‹åˆ°æ±½è½¦ï¼Œ é‚£ä¹ˆé€‰ç”¨æ›´å¤§çš„çª—å£ï¼Œç„¶åè¿˜æ˜¯ä»¥å›ºå®šæ­¥é•¿..ä¾æ¬¡é‡å¤..æ»‘è¿‡..æ£€æµ‹</li>
</ol>
<p>è¿™ä¸ªç®—æ³•å«åš : <strong>æ»‘åŠ¨çª—å£ç›®æ ‡æ£€æµ‹</strong></p>
<p><img src="/images/deeplearning/C4W3-5_1.png" width="750"></p>
<p>ç›®æ ‡æ£€æµ‹å¸¸ä½¿ç”¨çš„æ˜¯æ»‘åŠ¨çª—å£æŠ€æœ¯æ£€æµ‹ï¼Œå³ä½¿ç”¨ä¸€å®šå¤§å°çš„çª—å£æŒ‰ç…§æŒ‡å®šçš„æ­¥é•¿å¯¹å›¾åƒè¿›è¡Œéå†</p>
<p><img src="/images/deeplearning/C4W3-6.jpg" width="750"></p>
<p>å› ä¸ºå›¾åƒä¸­è½¦è¾†çš„å¤§å°æˆ‘ä»¬æ˜¯ä¸çŸ¥é“çš„ï¼Œæ‰€ä»¥å¯ä»¥æ›´æ”¹çª—å£å¤§å°ï¼Œä»è€Œè¯†åˆ«å¹¶å®šä½å‡ºè½¦è¾†çš„ä½ç½®ã€‚</p>
<p><img src="/images/deeplearning/C4W3-7_1.png" width="750"></p>
<p><img src="/images/deeplearning/C4W3-8_1.png" width="750"></p>
<blockquote>
<p><strong>æ»‘åŠ¨çª—å£ç›®æ ‡æ£€æµ‹</strong> ç®—æ³•çš„ç¼ºç‚¹å°±æ˜¯è®¡ç®—æˆæœ¬çš„é—®é¢˜.</p>
<ol>
<li>å¦‚æœä½ æŠŠçª—å£è°ƒå¤§ï¼Œæ˜¾ç„¶ä¼šå‡å°‘è¾“å…¥CNNçš„çª—å£ä¸ªæ•°ï¼Œä½†æ˜¯ç²—ç²’åº¦å¯èƒ½ä¼šå½±å“æ€§èƒ½.</li>
<li>å¦‚æœé‡‡ç”¨å°ç²’åº¦ï¼Œé‚£ä¹ˆè¾“å…¥ç»™CNNçš„çª—å£ä¸ªæ•°å°±ä¼šç‰¹åˆ«å¤šã€‚è¿™æ„å‘³ç€è¶…é«˜è®¡ç®—æˆæœ¬.</li>
</ol>
<p>äººä»¬é€šå¸¸é‡‡ç”¨æ›´ç®€å•çš„åˆ†ç±»å™¨åšå¯¹è±¡æ£€æµ‹. æ¯”å¦‚ç®€å•çš„çº¿æ€§åˆ†ç±»å™¨. è®¡ç®—æˆæœ¬å°±ä¼šå¾ˆä½. æ»‘åŠ¨çª—å£ç®—æ³•è¡¨ç°è‰¯å¥½. ç„¶è€Œ CNN è¿è¡Œå•ä¸ªåˆ†ç±»ä»»åŠ¡çš„æˆæœ¬ç¡®é«˜å¾—å¤šã€‚ è¿™æ ·çš„æ»‘åŠ¨çª—å£å¤ªæ…¢äº†ã€‚</p>
<p>åº†å¹¸çš„æ˜¯ï¼Œäººä»¬å·²ç»æ‰¾åˆ°äº†æ–¹æ³•è§£å†³è®¡ç®—æˆæœ¬ï¼Œä¸‹ä¸€èŠ‚è§.</p>
</blockquote>
<h2 id="4-Convolutional-Implementation-of-Sliding-Windows"><a href="#4-Convolutional-Implementation-of-Sliding-Windows" class="headerlink" title="4. Convolutional Implementation of Sliding Windows"></a>4. Convolutional Implementation of Sliding Windows</h2><blockquote>
<p>æ³¨æ„ï¼šè¯¥èŠ‚è§†é¢‘çš„ä¾‹å­å’Œä¸Šä¸€èŠ‚ä¸€æ ·ï¼Œéƒ½æ˜¯è¯†åˆ«å›¾åƒä¸­æ˜¯å¦æœ‰ pedestrianï¼Œcarï¼Œmotorcyclesï¼Œbackgroundï¼Œæ‰€ä»¥æœ€åè¾“å‡ºyæ˜¯ 4ä¸ªèŠ‚ç‚¹</p>
</blockquote>
<h3 id="4-1-å…¨è¿æ¥å±‚â†’å·ç§¯å±‚"><a href="#4-1-å…¨è¿æ¥å±‚â†’å·ç§¯å±‚" class="headerlink" title="4.1 å…¨è¿æ¥å±‚â†’å·ç§¯å±‚"></a>4.1 å…¨è¿æ¥å±‚â†’å·ç§¯å±‚</h3><p>åœ¨ä»‹ç»å·ç§¯æ»‘åŠ¨çª—å£ä¹‹å‰æˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“å¦‚ä½•æŠŠç¥ç»ç½‘ç»œçš„<strong>å…¨è¿æ¥å±‚</strong>è½¬åŒ–æˆ<strong>å·ç§¯å±‚</strong>ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨äº†å…¨è¿æ¥å±‚çš„ç½‘ç»œç»“æ„</p>
<p><img src="/images/deeplearning/C4W3-9_1.png" width="750"></p>
<p>é‚£ä¹ˆå¦‚ä½•å°†<strong>å…¨è¿æ¥å±‚è½¬åŒ–æˆå·ç§¯å±‚</strong>å‘¢ï¼Ÿå¦‚ä¸‹å›¾ç¤º</p>
<p><img src="/images/deeplearning/C4W3-10_1.png" width="750"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»è¿‡ Max Pooling ä¹‹åçš„æ•°æ®å¤§å°æ˜¯ (5, 5, 16), ç¬¬ä¸€ä¸ªFCå±‚æ˜¯ 400 ä¸ªèŠ‚ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ 400 ä¸ª 5*5 çš„è¿‡æ»¤å™¨è¿›è¡Œå·ç§¯è¿ç®—ï¼Œéšåæˆ‘ä»¬å°±å¾—åˆ°äº† (1, 1, 400) çš„çŸ©é˜µã€‚</p>
<p>ç¬¬äºŒä¸ª FCå±‚ ä¹Ÿæ˜¯ 400 ä¸ªèŠ‚ç‚¹ï¼Œç”±ä¹‹å‰çš„ 1*1 è¿‡æ»¤å™¨çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ 400 ä¸ª 1*1 çš„è¿‡æ»¤å™¨ï¼Œä¹Ÿå¯ä»¥å¾—åˆ° (1,1,400) çš„çŸ©é˜µã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸå°†å…¨è¿æ¥å±‚è½¬åŒ–æˆäº†å·ç§¯å±‚ã€‚</p>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯ç”¨å·ç§¯å±‚ä»£æ›¿å…¨è¿æ¥å±‚çš„è¿‡ç¨‹ï¼Œ ä¸‹é¢å†çœ‹å¦‚ä½•é€šè¿‡å·ç§¯å®ç°æ»‘åŠ¨çª—å£å¯¹è±¡æ£€æµ‹ç®—æ³•ï¼Œå€Ÿé‰´ OverFeat Paperã€‚</p>
</blockquote>
<h3 id="4-2-å·ç§¯æ»‘åŠ¨çª—å£å®ç°"><a href="#4-2-å·ç§¯æ»‘åŠ¨çª—å£å®ç°" class="headerlink" title="4.2 å·ç§¯æ»‘åŠ¨çª—å£å®ç°"></a>4.2 å·ç§¯æ»‘åŠ¨çª—å£å®ç°</h3><p>ç›®æ ‡æ£€æµ‹ä¸€èŠ‚ä¸­ä»‹ç»äº†æ»‘åŠ¨çª—å£ã€‚è¦å®ç°çª—å£éå†ï¼Œé‚£ä¹ˆå°±éœ€è¦å¾ˆå¤§çš„è®¡ç®—é‡ï¼ŒBut å¤§ç¥ä»¬è‡ªç„¶å·²ç»æœ‰äº†è§£å†³åŠæ³•ã€‚</p>
<p>æ³¨æ„: ä¸‹é¢çš„ç¬¬ä¸€å¹…å›¾ï¼ŒAndrew Ng ä¸ºäº†æ–¹ä¾¿åªèŠ±äº†å¹³é¢å›¾ï¼Œå°±æ²¡æœ‰ç”»å‡º3Dçš„æ•ˆæœäº†ã€‚</p>
<p><strong>é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹ä¸‹å›¾ï¼Œè¿™å°±æ˜¯ä¸Šé¢æåˆ°çš„å°†å…¨è¿æ¥å±‚è½¬åŒ–æˆå·ç§¯å±‚çš„ç¤ºæ„å›¾:</strong></p>
<p><img src="/images/deeplearning/C4W3-11_1.png" width="750"></p>
<p>ä¸‹é¢ï¼Œå‡è®¾æˆ‘ä»¬çš„æµ‹è¯•å›¾å¤§å°æ˜¯ 16*16ï¼Œå¹¶ä»¤æ»‘åŠ¨çª—å£å¤§å°æ˜¯ 14*14 çš„ (ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä¸‹å›¾ç”¨è“è‰²æ¸…æ¥šåœ°è¡¨æ˜äº† 14*14 çª—å£çš„å¤§å°), æ­¥é•¿æ˜¯ 2ï¼Œæ‰€ä»¥è¿™ä¸ªæµ‹è¯•å›¾å¯ä»¥è¢«çª—å£åˆ’åˆ†æˆ 4 ä¸ªéƒ¨åˆ†ã€‚éšåå’Œä¸Šé¢æ‰§è¡Œä¸€æ ·çš„æ“ä½œï¼Œæœ€åå¯ä»¥å¾—åˆ° (2,2,4) çš„çŸ©é˜µï¼ˆè¿™æ ·å‘ç°å¾ˆå¤šè®¡ç®—éƒ¨åˆ†æ˜¯é‡å¤çš„ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¸éš¾çœ‹å‡º<strong>æµ‹è¯•å›¾è¢«æ»‘åŠ¨çª—å£é€‰å–çš„å·¦ä¸Šè§’éƒ¨åˆ†å¯¹åº”çš„ç»“æœä¹Ÿæ˜¯è¾“å‡ºçŸ©é˜µçš„å·¦ä¸Šè§’éƒ¨åˆ†ï¼Œå…¶ä»–3ä¸ªéƒ¨åˆ†åŒç†</strong>ã€‚</p>
<p><img src="/images/deeplearning/C4W3-12_1.png" width="750"></p>
<blockquote>
<p>æ‰€ä»¥è¿™è¯´æ˜äº†ä»€ä¹ˆï¼Ÿ</p>
<p>è¯´æ˜æˆ‘ä»¬æ²¡æœ‰å¿…è¦ç”¨æ»‘åŠ¨çª—å£æˆªå–ä¸€éƒ¨åˆ†ï¼Œç„¶åå¸¦å…¥å·ç§¯ç½‘ç»œè¿ç®—ã€‚ç›¸åæˆ‘ä»¬å¯ä»¥æ•´ä½“è¿›è¡Œè¿ç®—ï¼Œè¿™æ ·é€Ÿåº¦å°±å¿«å¾ˆå¤šäº†ã€‚</p>
</blockquote>
<p>ä¸‹å›¾å¾ˆæ¸…æ¥šçš„å±•ç¤ºäº†å·ç§¯æ»‘åŠ¨çª—å£çš„å®ç°ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å›¾ç‰‡è¢«åˆ’åˆ†æˆäº† 64 å—</p>
<p><img src="/images/deeplearning/C4W3-13_1.png" width="750"></p>
<p><img src="/images/deeplearning/C4W3-14_1.png" width="750"></p>
<blockquote>
<p>ç›®å‰è¿™ä¸ªç®—æ³•è¿˜æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯è¾¹ç•Œæ¡†çš„ä½ç½®å¯èƒ½ä¸å¤Ÿå‡†ç¡®ï¼Œä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†å­¦ä¹ è§£å†³è¿™ä¸ªç¼ºç‚¹ã€‚</p>
</blockquote>
<h2 id="5-Bounding-Box-Predictions"><a href="#5-Bounding-Box-Predictions" class="headerlink" title="5. Bounding Box Predictions"></a>5. Bounding Box Predictions</h2><p>ä¸Šé¢ä»‹ç»çš„æ»‘åŠ¨çª—å£æ–¹æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¾ˆå¤šæƒ…å†µä¸‹æ»‘åŠ¨çª—å£å¹¶ä¸èƒ½å¾ˆå¥½çš„åˆ‡å‰²å‡ºè½¦ä½“ï¼Œå¦‚ä¸‹å›¾ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C4W3-15.png" width="400"></p>
<blockquote>
<p>ä¸Šé¢ä¸­çš„è“è‰²æ¡†å¯èƒ½æ˜¯æ»‘åŠ¨çª—å£çš„æ—¶å€™ï¼Œæœ€ä½³çš„åŒ¹é…ä½ç½®äº†ï¼Œä½†æ˜¯å…¶å®æˆ‘ä»¬äººçœ‹åï¼Œå…¶å®å¾ˆæ˜æ˜¾å‘ç°ï¼Œè¿™å¹¶ä¸æ˜¯ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜æ‰€åœ¨. å…¶å®æœ€ä½³çš„åŒ¹é…ä½ç½®åº”è¯¥æ˜¯çº¢è‰²çš„æ¡†ï¼Œç¨å¾®æœ‰ç‚¹é•¿æ–¹å½¢ï¼Œé•¿å®½æ¯”æœ‰ç‚¹å‘æ°´å¹³æ–¹å‘å»¶ä¼¸.</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±æœ‰äº† <strong>YOLO (you only look once)</strong> ç®—æ³•ï¼Œå³åªéœ€è¦è®¡ç®—ä¸€æ¬¡ä¾¿å¯ç¡®å®šéœ€è¦è¯†åˆ«ç‰©ä½“çš„ä½ç½®çš„å¤§å°ã€‚</p>
</blockquote>
<p><strong>åŸç†å¦‚ä¸‹ï¼š</strong></p>
<p>é¦–å…ˆå°†å›¾åƒåˆ’åˆ†æˆ 3*3 (å³9ä»½)ï¼Œæ¯ä¸€ä»½æœ€åç”±ä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œè¿™ä¸ªå‘é‡åœ¨æœ¬æ–‡æœ€å‰é¢ä»‹ç»è¿‡ï¼Œå³</p>
<p>$$<br>y=[P_c,b_x,b_y,b_h,b_w,c_1,c_2,c_3]<br>$$</p>
<p><img src="/images/deeplearning/C4W3-16.png" width="450"></p>
<blockquote>
<p>å¦‚æœä¸€ä¸ªæ ¼å­ä¸­æœ‰ä¸¤ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå°±å½“åšè¿™ä¸ªæ ¼å­ä¸­ä¸å­˜åœ¨å¯¹è±¡. æŒ‰ç…§ $P_c = 0$ å¤„ç†. </p>
<p>(å¦‚æœæ˜¯ 19 * 19 çš„æƒ…å†µï¼Œä¸¤ä¸ªå¯¹è±¡çš„ä¸­ç‚¹åˆ†é…åˆ°ä¸€ä¸ªæ ¼å­çš„æƒ…å†µï¼Œå…¶å®ç‰¹åˆ«ä½)</p>
</blockquote>
<p>å› ä¸ºæœ‰ 9 ä»½ï¼Œæ‰€ä»¥æœ€åè¾“å‡ºçŸ©é˜µå¤§å°æ˜¯ (3,3,8) , å¦‚ä¸‹å›¾ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C4W3-17_1.png" width="750"></p>
<p>é‚£ä¹ˆå¦‚ä½•æ„å»ºå·ç§¯ç½‘ç»œå‘¢ï¼Ÿ</p>
<p>è¾“å…¥çŸ©é˜µæ˜¯ (100, 100, 3), ç„¶åæ˜¯ Convï¼ŒMaxpool å±‚ï¼Œâ€¦â€¦ï¼Œæœ€ååªè¦ç¡®ä¿è¾“å‡ºçŸ©é˜µå¤§å°æ˜¯ (3,3,8) å³å¯ã€‚</p>
<p><img src="/images/deeplearning/C4W3-18_1.png" width="750"></p>
<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå·ç§¯å®ç°ï¼Œä½ å¹¶æ²¡æœ‰åœ¨ 3 * 3 ç½‘æ ¼ä¸Šè·‘ 9 æ¬¡ç®—æ³•ï¼Œ19 * 19 åŒæ ·ä½ ä¸éœ€è¦ç½‘æ ¼ä¸Šè·‘ 361 æ¬¡ï¼Œç›¸åè¿™æ˜¯å•æ¬¡å·ç§¯çš„å®ç°ï¼Œä½†ä½ <strong>ä½¿ç”¨äº†ä¸€ä¸ªå·ç§¯ç½‘ç»œ</strong>ï¼Œæœ‰å¾ˆå¤šå…±äº«è®¡ç®—æ­¥éª¤ï¼Œæ¯”å¦‚åœ¨å¤„ç†è¿™ 3 * 3 è®¡ç®—ä¸­å¾ˆå¤šè®¡ç®—æ­¥éª¤æ˜¯å…±äº«çš„. æ‰€ä»¥è¿™ä¸ªç®—æ³•çš„æ•ˆç‡å¾ˆé«˜.</p>
<p>YOLO ç®—æ³•æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå®ƒçš„è®¡ç®—ç‰¹åˆ«å¿«ï¼Œå¯ä»¥è¾¾åˆ°å®æ—¶è¯†åˆ«ã€‚</p>
</blockquote>
<p><strong>ä¸‹å›¾æ˜¯ä»¥å³è¾¹çš„è½¦è¾†ä½œä¸ºç¤º</strong>ä¾‹ä»‹ç»è¯¥è½¦è¾†æ‰€åœ¨æ¡†çš„è¾“å‡ºçŸ©é˜µ</p>
<blockquote>
<ul>
<li>å¾ˆæ˜¾ç„¶ $P_c=1$</li>
<li>ç„¶å $b_x,b_y$ çš„å€¼æ˜¯å³è¾¹è½¦è¾†çš„ä¸­å¿ƒç‚¹ç›¸å¯¹äºè¯¥æ¡†çš„ä½ç½®,æ‰€ä»¥å®ƒä»¬çš„å€¼æ˜¯ä¸€å®šå°äº 1 çš„ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å¾—åˆ°è¿‘ä¼¼å€¼ $b_x=0.4, b_y=0.3$</li>
<li>$b_h,b_w$ çš„å€¼åŒç†ä¹Ÿæ˜¯è½¦è¾†çš„å®½é«˜ç›¸å¯¹äºå…¶æ‰€åœ¨æ¡†çš„æ¯”ä¾‹ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯è¿™ä¸¤ä¸ªå€¼æ˜¯å¯ä»¥å¤§äº 1 çš„ï¼Œå› ä¸ºæœ‰å¯èƒ½éƒ¨åˆ†è½¦èº«åœ¨æ¡†å¤–ã€‚ä½†æ˜¯ä¹Ÿå¯ä»¥ä½¿ç”¨ sigmoidå‡½æ•° å°†å€¼æ§åˆ¶åœ¨ 1 ä»¥å†…ã€‚</li>
</ul>
</blockquote>
<p><img src="/images/deeplearning/C4W3-19_1.png" width="750"></p>
<blockquote>
<p>è¿™é‡Œæˆ‘ç”¨ 3 * 3 çš„ç½‘æ ¼è¯´æ˜ï¼Œåœ¨å®è·µä¸­å¯èƒ½ 19 * 19 çš„ç½‘æ ¼ä¼šç²¾ç»†çš„å¤š.</p>
<p>é¿å…æŠŠ å¤šä¸ª å¯¹è±¡åˆ†é…åˆ°åŒä¸€ä¸ªæ ¼å­ä¸­ï¼Œè§‚å¯Ÿè¿™ä¸ªå¯¹è±¡çš„ä¸­ç‚¹ï¼Œç„¶åå°†å›¾åƒå¯¹è±¡åˆ†é…åˆ°å…¶ä¸­ç‚¹æ‰€åœ¨çš„æ ¼å­. 19 * 19 çš„ç½‘æ ¼, ä¸¤ä¸ªå¯¹è±¡çš„ä¸­ç‚¹å¤„äºåŒä¸€ä¸ªæ ¼å­çš„æ¦‚ç‡ä¼šæ›´ä½.</p>
<p>ä¸Šé¢å´å¤§å¤§ç»™å‡ºçš„æ˜¯ä¸€ä¸ªåˆç†çš„çº¦å®šï¼Œä½¿ç”¨èµ·æ¥åº”è¯¥æ²¡ä»€ä¹ˆé—®é¢˜. å…¶å®è¿˜æœ‰å…¶ä»–æ›´å¤æ‚çš„å‚æ•°åŒ–å½¢å¼.</p>
<p>YOLO çš„è®ºæ–‡æ˜¯ç›¸å¯¹éš¾åº¦è¾ƒé«˜çš„è®ºæ–‡, Andrew Ng çœ‹çš„æ—¶å€™ä¹Ÿçœ‹ä¸æ‡‚å¾ˆå¤š.</p>
</blockquote>
<h2 id="6-Intersection-Over-Union"><a href="#6-Intersection-Over-Union" class="headerlink" title="6. Intersection Over Union"></a>6. Intersection Over Union</h2><p>å¦‚ä½•è¯„ä»·å¯¹è±¡æ£€æµ‹ç®—æ³•å‘¢ï¼ŒIOU äº¤å¹¶æ¯”å‡½æ•°å¯ä»¥ç”¨æ¥è¯„ä»·å¯¹è±¡æ£€æµ‹ç®—æ³•ã€‚</p>
<p>å‰é¢è¯´åˆ°äº†å®ç°ç›®æ ‡å®šä½æ—¶å¯èƒ½å­˜åœ¨ <strong>æ»‘åŠ¨çª—å£</strong> ä¸ <strong>çœŸå®è¾¹æ¡†</strong> å­˜åœ¨å‡ºå…¥ï¼Œå¦‚ä¸‹å›¾ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C4W3-20.jpg" width="340"></p>
<blockquote>
<p>çº¢è‰²æ¡†æ˜¯è½¦èº«è¾¹ç•Œï¼Œç´«è‰²æ¡†æ˜¯æ»‘åŠ¨çª—å£ï¼Œé‚£ä¹ˆæ­¤çª—å£è¿”å›çš„å€¼æ˜¯æœ‰è½¦è¿˜æ˜¯æ— è½¦å‘¢ï¼Ÿ</p>
<p>ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜å¼•å…¥äº†äº¤å¹¶æ¯”(IoU)ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªæ¡†ä¹‹é—´çš„äº¤é›†ä¸å¹¶é›†ä¹‹æ¯”ï¼Œä¾æ®è¿™ä¸ªå€¼å¯ä»¥è¯„ä»·å®šä½ç®—æ³•æ˜¯å¦ç²¾å‡†ã€‚</p>
</blockquote>
<p><img src="/images/deeplearning/C4W3-21_1.png" width="750"></p>
<blockquote>
<p>ä¸Šå›¾é»„è‰²åŒºåŸŸè¡¨ç¤ºç´«è‰²æ¡†å’Œçº¢è‰²æ¡†çš„äº¤é›†ï¼Œç»¿è‰²åŒºåŸŸè¡¨ç¤ºç´«è‰²æ¡†å’Œçº¢è‰²æ¡†çš„å¹¶é›†ï¼Œäº¤å¹¶æ¯”(IoU)å°±ç­‰äº é»„è‰²åŒºåŸŸå¤§å° æ¯”ä¸Š ç»¿è‰²åŒºåŸŸå¤§å°ã€‚</p>
<p>å¦‚æœ $IoU\geq0.5$ï¼Œåˆ™è¡¨ç¤ºç´«è‰²æ¡†ä¸­æœ‰è½¦è¾†ï¼Œåä¹‹æ²¡æœ‰ã€‚</p>
<p>å½“ç„¶ 0.5 è¿™ä¸ªé˜ˆå€¼æ˜¯äººä¸ºè®¾å®šçš„ï¼Œæ²¡æœ‰æ·±å…¥çš„ç§‘å­¦æ¢ç©¶ï¼Œæ‰€ä»¥å¦‚æœå¸Œæœ›ç»“æœæ›´åŠ ç²¾ç¡®ï¼Œä¹Ÿå¯ä»¥ç”¨ 0.6 æˆ– 0.7 è®¾ä¸ºé˜ˆå€¼ï¼Œä½†æ˜¯ä¸å»ºè®®ç”¨å°äº 0.5 çš„é˜ˆå€¼ã€‚</p>
<p>ä¸‹ä¸€èŠ‚è®¨è®ºè¿™ä¸ª Non-max Suppression å·¥å…·ï¼Œå¯ä»¥è®© YOLO å·¥ä½œçš„æ›´å¥½</p>
</blockquote>
<h2 id="7-Non-max-Suppression"><a href="#7-Non-max-Suppression" class="headerlink" title="7. Non-max Suppression"></a>7. Non-max Suppression</h2><blockquote>
<p><strong>éæå¤§å€¼æŠ‘åˆ¶å¯ä»¥ç¡®ä¿ä½ å¯¹æ¯ä¸ªå¯¹è±¡åªæ£€æµ‹ä¸€æ¬¡</strong>ã€‚</p>
</blockquote>
<p>ç®—æ³•å¤§è‡´æ€è·¯</p>
<p>å‰é¢ Bounding Box ä¸€èŠ‚ä¸­ä»‹ç»åˆ°å°†å›¾ç‰‡åˆ’åˆ†æˆè‹¥å¹²ç­‰åˆ†ï¼Œä¾‹å¦‚ 3*3ï¼Œé‚£ä¹ˆä¸€å…±å°±æœ‰9å—ï¼Œå¦‚ä¸‹å›¾ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°ç¬¬äºŒè¡Œç¬¬ä¸€å—å’Œç¬¬ä¸‰å—éƒ½æœ‰è½¦ï¼Œæ‰€ä»¥å¯ä»¥æ ‡å‡ºä¸€ä¸ªä¸­å¿ƒç‚¹åæ ‡ $(b_x,b_y)$ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½é€šè¿‡æœ€ç»ˆçš„è¾“å‡ºç»“æœçŸ¥é“è¿™ä¸¤ä¸ªæ¡†ä¸­æœ‰è½¦ã€‚</p>
<p><img src="/images/deeplearning/C4W3-22_1.png" width="550"></p>
<p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬åˆ’åˆ†çš„æ•°é‡å˜å¤šä¹‹åå‘¢ï¼Ÿå¦‚ä¸‹å›¾ç¤ºåˆ’åˆ†æˆäº† 19*19ï¼Œå›¾ä¸­æ ‡å‡ºçš„ 3 ä¸ªé»„æ¡†å’Œ 3 ä¸ªç»¿æ¡†æœ€ç»ˆç»“æœéƒ½ä¼šéƒ½ä¼šè¿”å›[$P_x=1,b_x=,b_y=â€¦â€¦$]ï¼Œä½†æ˜¯æœ€åæˆ‘ä»¬è¯¥ä¿¡è°çš„å‘¢ï¼Ÿæ˜¯è¿™ä¸‰ä¸ªæ¡†çœŸçš„æœ‰è½¦ï¼Œè€Œä¸”è¿˜ä¸æ˜¯åŒä¸€è¾†è½¦ï¼Ÿè¿˜æ˜¯åªæ˜¯åŒä¸€è¾†è½¦ï¼Ÿæ‰€ä»¥å°±æœ‰äº†éæå¤§å€¼æŠ‘åˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><img src="/images/deeplearning/C4W3-23_1.png" width="550"></p>
<blockquote>
<p>Non-max Suppression åšçš„å°±æ˜¯æ¸…ç†è¿™äº›æ£€æµ‹ç»“æœï¼Œè¿™æ ·ä¸€è¾†è½¦åªæ£€æµ‹ä¸€æ¬¡ï¼Œè€Œä¸æ˜¯æ¯è¾†è½¦éƒ½å‡ºå‘å¤šæ¬¡æ£€æµ‹ã€‚</p>
</blockquote>
<p>å…¶æ€è·¯å¤§è‡´å¦‚ä¸‹ (ä¸ºäº†æ–¹ä¾¿è¯´æ˜å’Œç†è§£ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨ 19*19 çš„æ–¹æ¡†)ï¼š</p>
<p>é¦–å…ˆæ¯ä¸ªæ¡†ä¼šå¯¹æ˜¯å¦æœ‰ç›®æ ‡è¿”å›ä¸€ä¸ª $P_c$ çš„æ¦‚ç‡å€¼ (ä¹Ÿå¯ä»¥æ˜¯ $P_c*C_1*C_2*C_3$ çš„æ¦‚ç‡ä¹‹ç§¯)ï¼Œå¦‚ä¸‹å›¾ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C4W3-24.png" width="550"></p>
<p>ç„¶åæ‰¾åˆ° $P_c$ æœ€å¤§çš„ä¸€ä¸ªæ¡†ï¼Œæ˜¾ç„¶ 0.9 çš„æ¡†æœ‰è½¦çš„æ¦‚ç‡æœ€å¤§ï¼Œæ‰€ä»¥è¯¥è¾¹æ¡†é¢œè‰²é«˜äº®</p>
<p><img src="/images/deeplearning/C4W3-25.jpg" width="550"></p>
<p><strong>ç„¶åç®—æ³•éå†å…¶ä»–è¾¹æ¡†ï¼Œæ‰¾å‡ºä¸ä¸Šä¸€ä¸ªè¾¹æ¡†çš„äº¤å¹¶æ¯”å¤§äº 0.5 çš„è¾¹æ¡†</strong>ï¼Œå¾ˆæ˜¾ç„¶å³è¾¹å‰©ä½™ä¸¤ä¸ªè¾¹æ¡†ç¬¦åˆæ¡ä»¶ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªè¾¹æ¡†å˜æš—</p>
<p><img src="/images/deeplearning/C4W3-26.jpg" width="550"></p>
<p>å·¦è¾¹çš„è½¦åŒç†ï¼Œä¸åŠ èµ˜è¿°</p>
<p><img src="/images/deeplearning/C4W3-27.jpg" width="550"></p>
<p>ä¸‹é¢ç»“åˆä¸€ä¸ªä¾‹å­æ€»ç»“ä¸€ä¸‹ <strong>éæå¤§å€¼æŠ‘åˆ¶</strong> ç®—æ³•çš„å®ç°æ­¥éª¤ï¼š</p>
<p>åœ¨è¿™é‡Œå‡è®¾åªéœ€è¦è¯†åˆ«å®šä½è½¦è¾†å³å¯ï¼Œæ‰€ä»¥è¾“å‡ºæ ¼å¼ä¸º $P_c,b_x,b_y,b_h,b_w$</p>
<p><img src="/images/deeplearning/C4W3-28.png" width="750"></p>
<p>è¿™ä¸ªä¾‹å­ä¸­å°†å›¾åƒåˆ’åˆ†æˆ 19*19 æ–¹æ ¼ï¼Œå‡è®¾æ¯ä¸ªæ–¹æ ¼éƒ½å·²ç»è®¡ç®—å‡º $P_c$ çš„æ¦‚ç‡å€¼</p>
<blockquote>
<ol>
<li>å»æ‰æ‰€æœ‰æ»¡è¶³ $P_c â‰¤ 0.6$ çš„æ–¹æ ¼ (0.6ä¹Ÿå¯ä»¥è¿›è¡Œäººä¸ºä¿®æ”¹)</li>
<li>å¯¹å‰©ä¸‹çš„æ–¹æ ¼è¿›è¡Œå¦‚ä¸‹å¾ªç¯æ“ä½œï¼š</li>
</ol>
<ul>
<li>ä»å‰©ä¸‹çš„æ–¹æ ¼ä¸­é€‰å– $P_c$ æœ€å¤§çš„ä¸€ä¸ªä½œä¸ºé¢„æµ‹å€¼è¾“å‡ºï¼Œå‡è®¾è¿™ä¸ªæ–¹æ ¼ä¸º $A$</li>
<li>å°†ä¸ $A$ æ–¹æ ¼äº¤å¹¶æ¯”å¤§äº 0.5 çš„å‰”é™¤</li>
</ul>
</blockquote>
<h2 id="8-Anchor-Boxes"><a href="#8-Anchor-Boxes" class="headerlink" title="8. Anchor Boxes"></a>8. Anchor Boxes</h2><p>å‰é¢ä»‹ç»äº†é‚£ä¹ˆå¤šï¼Œéƒ½åªæ˜¯è¯†åˆ«å•ä¸ªç‰©ä½“ï¼Œå¦‚æœè¦åŒæ—¶è¯†åˆ«å¤šä¸ªç‰©ä½“è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè€Œä¸”è¯†åˆ«çš„ä¸åŒç‰©ä½“çš„ä¸­å¿ƒç‚¹åœ¨åŒä¸€ä¸ªæ¡†ä¸­åˆè¯¥æ€ä¹ˆå‘¢ (å¦‚ä¸‹å›¾ç¤ºï¼Œäººå’Œè½¦çš„ä¸­å¿ƒéƒ½åœ¨çº¢ç‚¹ä½ç½®ï¼Œå¤„äºåŒä¸€ä¸ªæ¡†ä¸­)ï¼Ÿè¿™æ—¶å°±éœ€è¦ä½¿ç”¨ <strong>Anchor Boxes</strong> äº†ã€‚</p>
<p><img src="/images/deeplearning/C4W3-29.jpg" width="400"></p>
<p>Anchor Boxes æ€è·¯æ˜¯å¯¹äºä¸åŒç‰©ä½“äº‹å…ˆé‡‡ç”¨ä¸åŒçš„æ¡†ï¼Œä¾‹å¦‚äººç›¸å¯¹äºè½¦å±äºç˜¦é«˜çš„ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸‹å›¾ä¸­çš„ <strong>Anchor Box 1</strong>ï¼Œç›¸åè½¦è¾†å°±ä½¿ç”¨<strong> Anchor Box 2</strong>.</p>
<p>ä¹‹å‰çš„è¾“å‡ºå€¼çš„æ ¼å¼éƒ½æ˜¯ $y=[P_x,b_x,b]_y,b_h,b_w,C_1,C_2,C_3]$ï¼Œæœ€åè¾“å‡ºçš„çŸ©é˜µå¤§å°(ä»¥è¯¥å›¾ä¸ºä¾‹) æ˜¯ (3,3,8), ä½†æ˜¯è¿™æ ·åªèƒ½ç¡®å®šä¸€ä¸ªç‰©ä½“ã€‚</p>
<p>æ‰€ä»¥ä¸ºäº†åŒæ—¶æ£€æµ‹ä¸åŒç‰©ä½“ï¼Œå¾ˆè‡ªç„¶çš„æˆ‘ä»¬å¯ä»¥é‡å¤è¾“å‡ºè¿™ä¸ªä¸Šé¢çš„å€¼å³å¯ï¼Œå³ $y = [P_x, b_x, b_y, b_h, b_w, C_1, C_2, C_3, P_x, b_x, b_y, b_h, b_w, C_1, C_2, C_3]$, æ‰€ä»¥è¾“å‡ºçŸ©é˜µæ˜¯ (3,3,16), ä¹Ÿå¯ä»¥æ˜¯(3,3,2,8)ã€‚</p>
<blockquote>
<p>è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬éœ€è¦æå‰è®¾å®šå¥½è¾“å‡ºå€¼å‰é¢çš„å€¼å¯¹åº” <strong>Anchor Box 1</strong>ï¼Œåé¢çš„å¯¹åº” <strong>Anchor Box 2</strong>.</p>
<p>ä¾‹å¦‚æˆ‘ä»¬å¾—åˆ°äº†å›¾ä¸­äººçš„è¾¹æ¡†ä¿¡æ¯å€¼ï¼Œç„¶åç»è¿‡è®¡ç®—å‘ç°å…¶è¾¹æ¡†ä¸ Anchor Box 1æ›´ä¸ºæ¥è¿‘ï¼Œæ‰€ä»¥æœ€åå°†äººçš„è¾¹æ¡†ä¿¡æ¯å¯¹åº”åœ¨å‰é¢ï¼ŒåŒç†è½¦è¾†è¾¹æ¡†ä¿¡æ¯å¯¹åº”åœ¨åé¢ã€‚</p>
</blockquote>
<p><img src="/images/deeplearning/C4W3-30_1.png" width="750"></p>
<p>æ€»ç»“èµ·æ¥ <strong>Anchor Box</strong>ç®—æ³• å’Œ ä¹‹å‰çš„ç®—æ³•åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<p><strong>ä¹‹å‰çš„ç®—æ³•ï¼š</strong></p>
<blockquote>
<p>å¯¹äºè®­ç»ƒé›†å›¾åƒä¸­çš„æ¯ä¸ªå¯¹è±¡ï¼Œéƒ½æ ¹æ®é‚£ä¸ªå¯¹è±¡çš„ä¸­ç‚¹ä½ç½®åˆ†é…åˆ°å¯¹åº”çš„æ ¼å­ä¸­,æ‰€ä»¥åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­è¾“å‡ºyå°±æ˜¯(3,3,8)</p>
</blockquote>
<p><strong>Anchor Boxes ç®—æ³•</strong></p>
<blockquote>
<p>ç°åœ¨æ¯ä¸ªå¯¹è±¡éƒ½å’Œä¹‹å‰ä¸€æ ·åˆ†é…åˆ°åŒä¸€ä¸ªæ ¼å­ä¸­, å³å¯¹è±¡ä¸­å¿ƒæ‰€åœ¨çš„æ ¼å­ã€‚ä¸åŒçš„æ˜¯ä¹Ÿéœ€è¦åˆ†é…åˆ°å’Œå¯¹è±¡å½¢çŠ¶äº¤å¹¶æ¯”æœ€é«˜çš„ <strong>Anchor Box</strong>ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ä¸‹å›¾ä¸­çš„çº¢è‰²æ¡†ä¸ä»…è¦åˆ†é…åˆ°å…¶ä¸­å¿ƒæ‰€åœ¨çš„å›¾åƒä¸Šçš„æ ¼å­ä¸­ï¼Œè€Œä¸”è¿˜éœ€è¦åˆ†é…åˆ°ä¸å…¶äº¤å¹¶æ¯”æœ€å¤§çš„ <strong>Anchor Box</strong> ä¸­ï¼Œå³ç«–æ¡çš„ç´«è‰²æ–¹æ ¼ã€‚</p>
<p><img src="/images/deeplearning/C4W3-31_1.png" width="750"></p>
<p>å›åˆ°æœ¬å°èŠ‚æœ€å¼€å§‹çš„ä¾‹å­ï¼Œæœ€åçš„è¾“å‡ºå€¼å¦‚ä¸‹å›¾ç¤ºï¼š</p>
<p>å›¾ä¸­äººçš„å¯¹åº” <strong>Anchor Box 1</strong>ï¼Œ è¾“å‡ºå€¼å¯¹åº”å›¾ä¸­çš„é»„è‰²å­—ä½“ï¼›è½¦è¾†åŒç†ï¼Œå¯¹åº”ç»¿è‰²å­—ä½“</p>
<p><img src="/images/deeplearning/C4W3-32_1.png" width="750"></p>
<blockquote>
<p>å¦‚æœä¸¤ä¸ªå¯¹è±¡æ‰€åœ¨ä¸€ä¸ªæ ¼å­ï¼Œä¸”ä¸¤ä¸ªå¯¹è±¡åœˆå‡ºæ¥çš„æ¡†ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿™ç§æƒ…å†µéå¸¸éå¸¸å°‘è§ï¼Œæˆ‘ä»¬ç”¨å…¶ä»–æ–¹æ³•æ¥ç‰¹æ®Šå¤„ç†.</p>
</blockquote>
<h2 id="9-YOLO-Algorithm"><a href="#9-YOLO-Algorithm" class="headerlink" title="9. YOLO Algorithm"></a>9. YOLO Algorithm</h2><p><img src="/images/deeplearning/C4W3-33_1.png" width="750"></p>
<p><img src="/images/deeplearning/C4W3-34_1.png" width="750"></p>
<p><img src="/images/deeplearning/C4W3-35_1.png" width="750"></p>
<blockquote>
<p>YOLO Algorithm, that also encompasses many of the best ideas across the entire computer vision literature the relate to object detection.</p>
<p>YOLO è®¡ç®—æœºè§†è§‰å¯¹è±¡æ£€æµ‹é¢†åŸŸæ–‡çŒ®ä¸­æœ€ç²¾å¦™çš„æ€è·¯ã€‚</p>
</blockquote>
<h2 id="10-Region-Proposals-Optional"><a href="#10-Region-Proposals-Optional" class="headerlink" title="10. Region Proposals (Optional)"></a>10. Region Proposals (Optional)</h2><p>å€™é€‰åŒºåŸŸï¼Œè¿™äº›ç›®å‰å·¥ä½œå…¶å®ç”¨çš„å¾ˆå°‘ï¼Œä½†æ˜¯è¿˜æ˜¯éå¸¸æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥æˆ‘ä½œä¸ºå¯é€‰è§†é¢‘å¯å­¦ä¹ .â€‹â€‹â€‹â€‹</p>
<p><img src="/images/deeplearning/C4W3-36_1.png" width="750"> </p>
<p>å´å¤§å¤§è®¤ä¸º YOLO è¿™ç§åªçœ‹ä¸€æ¬¡çš„ç®—æ³•ï¼Œé•¿è¿œè€Œè¨€æ˜¯CVé¢†åŸŸæ›´æœ‰å¸Œæœ›çš„æ–¹å‘</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python ä¸­ 4 ä¸ªé­”æ³•æ–¹æ³•ï¼Œ __len__,__getitem__,__setitem__,__iter__]]></title>
      <url>http://shopee.ai/2018/09/01/python/language/py-language-9-class/</url>
      <content type="html"><![CDATA[<p>pythonä¸­é™¤äº†å¯ä»¥ä½¿ç”¨å†…å»ºçš„ç±»å‹ï¼Œå¦‚ list,tuple,dictï¼Œè¿˜å¯ä»¥åˆ›å»ºè‡ªå·±çš„å¯¹è±¡æ¥å®ç°åƒè¿™äº›å†…å»ºç±»å‹çš„è®¿é—®</p>
<p>ä¸è¿‡éœ€è¦åœ¨å®šä¹‰ç±»çš„æ—¶å€™å¯¹è¿™äº›é­”æ³•æ–¹æ³•å®ç°: __len__,  __getitem__, __setitem__, __iter__</p>
<a id="more"></a>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.zhihu.com/question/44015086" target="_blank" rel="external">pythonçš„è¿­ä»£å™¨ä¸ºä»€ä¹ˆä¸€å®šè¦å®ç°<strong>iter</strong>æ–¹æ³•ï¼Ÿ</a></li>
<li><a href="https://www.liaoxuefeng.com/" target="_blank" rel="external">python liaoxuefeng</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Placeholder ä¼ å…¥å€¼]]></title>
      <url>http://shopee.ai/2018/08/30/tensorflow/tf-2.5-placeholde/</url>
      <content type="html"><![CDATA[<p>placeholder æ˜¯ Tensorflow ä¸­çš„å ä½ç¬¦ï¼Œæš‚æ—¶å‚¨å­˜å˜é‡.</p>
<a id="more"></a>
<p>Tensorflow å¦‚æœæƒ³è¦ä»å¤–éƒ¨ä¼ å…¥data, é‚£å°±éœ€è¦ç”¨åˆ° <code>tf.placeholder()</code>, ç„¶åä»¥è¿™ç§å½¢å¼ä¼ è¾“æ•°æ® <code>sess.run(**, feed_dict={input: **})</code>.</p>
<p>ä¸¾ä¸ªğŸŒ°:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨ Tensorflow ä¸­éœ€è¦å®šä¹‰ placeholder çš„ type ï¼Œä¸€èˆ¬ä¸º float32 å½¢å¼</span></span><br><span class="line">input1 = tf.placeholder(tf.float32)</span><br><span class="line">input2 = tf.placeholder(tf.float32)</span><br><span class="line"></span><br><span class="line"><span class="comment"># mul = multiply æ˜¯å°†input1å’Œinput2 åšä¹˜æ³•è¿ç®—ï¼Œå¹¶è¾“å‡ºä¸º output </span></span><br><span class="line">ouput = tf.multiply(input1, input2)</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥, ä¼ å€¼çš„å·¥ä½œäº¤ç»™äº† <code>sess.run()</code> , éœ€è¦ä¼ å…¥çš„å€¼æ”¾åœ¨äº† <code>feed_dict={}</code> å¹¶ä¸€ä¸€å¯¹åº”æ¯ä¸€ä¸ª <code>input</code>. <code>placeholder</code> ä¸ <code>feed_dict={}</code> æ˜¯ç»‘å®šåœ¨ä¸€èµ·å‡ºç°çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    print(sess.run(ouput, feed_dict=&#123;input1: [<span class="number">7.</span>], input2: [<span class="number">2.</span>]&#125;))</span><br><span class="line"><span class="comment"># [ 14.]</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Variable å˜é‡]]></title>
      <url>http://shopee.ai/2018/08/29/tensorflow/tf-2.4-variable/</url>
      <content type="html"><![CDATA[<p>åœ¨ Tensorflow ä¸­ä½¿ç”¨ Variableã€‚ åœ¨ Tensorflow ä¸­ï¼Œå®šä¹‰äº†æŸå­—ç¬¦ä¸²æ˜¯å˜é‡ï¼Œå®ƒæ‰æ˜¯å˜é‡ï¼Œè¿™ä¸€ç‚¹æ˜¯ä¸ Python æ‰€ä¸åŒçš„ã€‚</p>
<a id="more"></a>
<p>å®šä¹‰è¯­æ³•ï¼š <code>state = tf.Variable()</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">state = tf.Variable(<span class="number">0</span>, name=<span class="string">'counter'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰å¸¸é‡ one</span></span><br><span class="line">one = tf.constant(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰åŠ æ³•æ­¥éª¤ (æ³¨: æ­¤æ­¥å¹¶æ²¡æœ‰ç›´æ¥è®¡ç®—)</span></span><br><span class="line">new_value = tf.add(state, one)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† State æ›´æ–°æˆ new_value</span></span><br><span class="line">update = tf.assign(state, new_value)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ åœ¨ Tensorflow ä¸­è®¾å®šäº†å˜é‡ï¼Œé‚£ä¹ˆåˆå§‹åŒ–å˜é‡æ˜¯æœ€é‡è¦çš„ï¼ï¼æ‰€ä»¥å®šä¹‰äº†å˜é‡ä»¥å, ä¸€å®šè¦å®šä¹‰ <code>init = tf.initialize_all_variables()</code>.</p>
<p>åˆ°è¿™é‡Œå˜é‡è¿˜æ˜¯æ²¡æœ‰è¢«æ¿€æ´»ï¼Œéœ€è¦å†åœ¨ <code>sess</code> é‡Œ, <code>sess.run(init)</code> , æ¿€æ´» <code>init</code> è¿™ä¸€æ­¥.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœå®šä¹‰ Variable, å°±ä¸€å®šè¦ initialize</span></span><br><span class="line"><span class="comment"># init = tf.initialize_all_variables() # tf é©¬ä¸Šå°±è¦åºŸå¼ƒè¿™ç§å†™æ³•</span></span><br><span class="line">init = tf.global_variables_initializer()  <span class="comment"># æ›¿æ¢æˆè¿™æ ·å°±å¥½</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># ä½¿ç”¨ Session</span></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    sess.run(init)</span><br><span class="line">    print(sess.run(new_value))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        sess.run(update) <span class="comment"># ç›¸å½“äºè¿è¡Œäº†ä¸€é tf.assign(state, new_value+100)ï¼Œ å› ä¸ºè¿™æ˜¯ update</span></span><br><span class="line">        print(sess.run(state))</span><br><span class="line">    print(<span class="string">"Sess Hello !"</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šç›´æ¥ print(state) ä¸èµ·ä½œç”¨ï¼ï¼</p>
<p>ä¸€å®šè¦æŠŠ <code>sess</code> çš„æŒ‡é’ˆæŒ‡å‘ <code>state</code> å†è¿›è¡Œ <code>print</code> æ‰èƒ½å¾—åˆ°æƒ³è¦çš„ç»“æœï¼</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python</a></li>
<li><a href="https://github.com/MorvanZhou/Tensorflow-Tutorial" target="_blank" rel="external">æ–°ç‰ˆå¯è§†åŒ–æ•™å­¦ä»£ç </a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Session ä¼šè¯æ§åˆ¶]]></title>
      <url>http://shopee.ai/2018/08/28/tensorflow/tf-2.3-session/</url>
      <content type="html"><![CDATA[<p>Session æ˜¯ Tensorflow ä¸ºäº†æ§åˆ¶,å’Œè¾“å‡ºæ–‡ä»¶çš„æ‰§è¡Œè¯­å¥. è¿è¡Œ session.run() å¯ä»¥è·å¾—ä½ è¦å¾—çŸ¥çš„è¿ç®—ç»“æœ.</p>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">a = tf.constant([<span class="number">1.0</span>, <span class="number">2.0</span>], name=<span class="string">"a"</span>)</span><br><span class="line">b = tf.constant([<span class="number">2.0</span>, <span class="number">3.0</span>], name=<span class="string">"b"</span>) <span class="comment"># a, b å®šä¹‰ä¸º 2 ä¸ªå¸¸é‡ å‘é‡</span></span><br><span class="line"></span><br><span class="line">result = a + b</span><br><span class="line"></span><br><span class="line">sess = tf.Session()</span><br><span class="line"></span><br><span class="line">sess.run(result) <span class="comment"># array([ 3.,  5.], dtype=float32)</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¦è¾“å‡ºç›¸åŠ å¾—åˆ°çš„ç»“æœï¼Œä¸èƒ½ç®€å•åœ°ç›´æ¥è¾“å‡º resultï¼Œè€Œéœ€è¦å…ˆç”Ÿæˆä¸€ä¸ª Sessionï¼Œå¹¶é€šè¿‡è¿™ä¸ª Session æ¥è®¡ç®—ç»“æœã€‚</p>
</blockquote>
<p>ğŸŒ°ğŸŒ°ğŸŒ°</p>
<p>  è¿™æ¬¡éœ€è¦åŠ è½½ Tensorflow ï¼Œç„¶åå»ºç«‹ä¸¤ä¸ª <code>matrix</code> , è¾“å‡ºä¸¤ä¸ª <code>matrix</code> çŸ©é˜µç›¸ä¹˜çš„ç»“æœã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="comment"># create two matrixes</span></span><br><span class="line"></span><br><span class="line">matrix1 = tf.constant([[<span class="number">3</span>,<span class="number">3</span>]])</span><br><span class="line">matrix2 = tf.constant([[<span class="number">2</span>],</span><br><span class="line">                       [<span class="number">2</span>]])</span><br><span class="line">product = tf.matmul(matrix1,matrix2)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¼šè¦ä½¿ç”¨ <code>Session</code> æ¥æ¿€æ´» <code>product</code> å¹¶å¾—åˆ°è®¡ç®—ç»“æœ. æœ‰ä¸¤ç§å½¢å¼ä½¿ç”¨ä¼šè¯æ§åˆ¶ <code>Session</code> ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># method 1</span></span><br><span class="line">sess = tf.Session()</span><br><span class="line">result = sess.run(product)</span><br><span class="line">print(result) <span class="comment"># [[12]]</span></span><br><span class="line">sess.close()</span><br><span class="line"><span class="comment"># [[12]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># method 2</span></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    result2 = sess.run(product)</span><br><span class="line">    print(result2)</span><br><span class="line"><span class="comment"># [[12]]</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬ä»Šå¤©æ‰€å­¦çš„ä¸¤ç§ <code>Session</code> æ‰“å¼€æ¨¡å¼ã€‚</p>
<p>è®©æˆ‘ä»¬å­¦ä¹ ä¸‹ä¸€èŠ‚ â€” Tensorflow ä¸­çš„ Variableã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python</a></li>
<li><a href="https://github.com/MorvanZhou/Tensorflow-Tutorial" target="_blank" rel="external">æ–°ç‰ˆå¯è§†åŒ–æ•™å­¦ä»£ç </a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tensorflow å…¥é—¨ä¾‹å­]]></title>
      <url>http://shopee.ai/2018/08/27/tensorflow/tf-2.2-example/</url>
      <content type="html"><![CDATA[<p>Tensorflow æ˜¯éå¸¸é‡è§†ç»“æ„çš„, æˆ‘ä»¬å»ºç«‹å¥½äº†ç¥ç»ç½‘ç»œçš„ç»“æ„, æ‰èƒ½å°†æ•°å­—æ”¾è¿›å», è¿è¡Œè¿™ä¸ªç»“æ„.</p>
<a id="more"></a>
<p>è¿™ä¸ªä¾‹å­ç®€å•çš„é˜è¿°äº† tensorflow å½“ä¸­å¦‚ä½•ç”¨ä»£ç æ¥è¿è¡Œæˆ‘ä»¬æ­å»ºçš„ç»“æ„.</p>
<h2 id="1-åˆ›å»ºæ•°æ®"><a href="#1-åˆ›å»ºæ•°æ®" class="headerlink" title="1. åˆ›å»ºæ•°æ®"></a>1. åˆ›å»ºæ•°æ®</h2><p>é¦–å…ˆ, æˆ‘ä»¬è¿™æ¬¡éœ€è¦åŠ è½½ tensorflow å’Œ numpy ä¸¤ä¸ªæ¨¡å—, å¹¶ä¸”ä½¿ç”¨ numpy æ¥åˆ›å»ºæˆ‘ä»¬çš„æ•°æ®.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># create data</span></span><br><span class="line">x_data = np.random.rand(<span class="number">100</span>).astype(np.float32)</span><br><span class="line">y_data = x_data*<span class="number">0.1</span> + <span class="number">0.3</span></span><br></pre></td></tr></table></figure>
<p>æ¥ç€, æˆ‘ä»¬ç”¨ <code>tf.Variable</code> æ¥åˆ›å»ºæè¿° <code>y</code> çš„å‚æ•°. æˆ‘ä»¬å¯ä»¥æŠŠ <code>y_data = x_data*0.1 + 0.3</code> æƒ³è±¡æˆ <code>y=Weights * x + biases</code>, ç„¶åç¥ç»ç½‘ç»œä¹Ÿå°±æ˜¯å­¦ç€æŠŠ Weights å˜æˆ 0.1, biases å˜æˆ 0.3.</p>
<h2 id="2-æ­å»ºæ¨¡å‹"><a href="#2-æ­å»ºæ¨¡å‹" class="headerlink" title="2. æ­å»ºæ¨¡å‹"></a>2. æ­å»ºæ¨¡å‹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Weights = tf.Variable(tf.random_uniform([<span class="number">1</span>], <span class="number">-1.0</span>, <span class="number">1.0</span>))</span><br><span class="line">biases = tf.Variable(tf.zeros([<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">y = Weights*x_data + biases</span><br></pre></td></tr></table></figure>
<h2 id="3-è®¡ç®—è¯¯å·®"><a href="#3-è®¡ç®—è¯¯å·®" class="headerlink" title="3. è®¡ç®—è¯¯å·®"></a>3. è®¡ç®—è¯¯å·®</h2><p>æ¥ç€å°±æ˜¯è®¡ç®— <code>y</code> å’Œ <code>y_data</code> çš„è¯¯å·®:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">loss = tf.reduce_mean(tf.square(y-y_data))</span><br></pre></td></tr></table></figure>
<h2 id="4-ä¼ æ’­è¯¯å·®"><a href="#4-ä¼ æ’­è¯¯å·®" class="headerlink" title="4. ä¼ æ’­è¯¯å·®"></a>4. ä¼ æ’­è¯¯å·®</h2><p>åå‘ä¼ é€’è¯¯å·®çš„å·¥ä½œå°±æ•™ç»™ <code>optimizer</code> äº†, æˆ‘ä»¬ä½¿ç”¨çš„è¯¯å·®ä¼ é€’æ–¹æ³•æ˜¯æ¢¯åº¦ä¸‹é™æ³•: Gradient Descent </p>
<p>ç„¶åæˆ‘ä»¬ä½¿ç”¨ <code>optimizer</code> æ¥è¿›è¡Œå‚æ•°çš„æ›´æ–°.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">optimizer = tf.train.GradientDescentOptimizer(<span class="number">0.5</span>)</span><br><span class="line">train = optimizer.minimize(loss)</span><br></pre></td></tr></table></figure>
<h2 id="5-è®­ç»ƒ"><a href="#5-è®­ç»ƒ" class="headerlink" title="5. è®­ç»ƒ"></a>5. è®­ç»ƒ</h2><p>åˆ°ç›®å‰ä¸ºæ­¢, æˆ‘ä»¬åªæ˜¯å»ºç«‹äº†ç¥ç»ç½‘ç»œçš„ç»“æ„, è¿˜æ²¡æœ‰ä½¿ç”¨è¿™ä¸ªç»“æ„. </p>
<p>åœ¨ä½¿ç”¨è¿™ä¸ªç»“æ„ä¹‹å‰, æˆ‘ä»¬å¿…é¡»å…ˆåˆå§‹åŒ–æ‰€æœ‰ä¹‹å‰å®šä¹‰çš„ <code>Variable</code>,  æ‰€ä»¥è¿™ä¸€æ­¥æ˜¯å¾ˆé‡è¦çš„!</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">init = tf.global_variables_initializer()  <span class="comment"># æ›¿æ¢æˆè¿™æ ·å°±å¥½</span></span><br></pre></td></tr></table></figure>
<p>æ¥ç€,æˆ‘ä»¬å†åˆ›å»ºä¼šè¯ <code>Session</code>. æˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€èŠ‚ä¸­è¯¦ç»†è®²è§£ Session. æˆ‘ä»¬ç”¨ <code>Session</code> æ¥æ‰§è¡Œ <code>init</code> åˆå§‹åŒ–æ­¥éª¤. å¹¶ä¸”, ç”¨ <code>Session</code> æ¥ <code>run</code> æ¯ä¸€æ¬¡ training çš„æ•°æ®. é€æ­¥æå‡ç¥ç»ç½‘ç»œçš„é¢„æµ‹å‡†ç¡®æ€§.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sess = tf.Session()</span><br><span class="line">sess.run(init)          <span class="comment"># Very important</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> step <span class="keyword">in</span> range(<span class="number">201</span>):</span><br><span class="line">    sess.run(train)</span><br><span class="line">    <span class="keyword">if</span> step % <span class="number">20</span> == <span class="number">0</span>:</span><br><span class="line">        print(step, sess.run(Weights), sess.run(biases))</span><br></pre></td></tr></table></figure>
<h2 id="6-Reference"><a href="#6-Reference" class="headerlink" title="6. Reference"></a>6. Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/" target="_blank" rel="external">è«çƒ¦Python</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tensorflow å¤„ç†ç»“æ„]]></title>
      <url>http://shopee.ai/2018/08/25/tensorflow/tf-2.1-structure/</url>
      <content type="html"><![CDATA[<p>Tensorflow é¦–å…ˆè¦å®šä¹‰ç¥ç»ç½‘ç»œçš„ç»“æ„, ç„¶åå†æŠŠæ•°æ®æ”¾å…¥ç»“æ„å½“ä¸­å»è¿ç®— å’Œ training.</p>
<a id="more"></a>
<h2 id="è®¡ç®—å›¾"><a href="#è®¡ç®—å›¾" class="headerlink" title="è®¡ç®—å›¾"></a>è®¡ç®—å›¾</h2><p><img src="/images/tensorflow/tf-1-why.gif" width="400"></p>
<p>å› ä¸º TensorFlow æ˜¯é‡‡ç”¨æ•°æ®æµå›¾ï¼ˆ<strong>dataã€€flowã€€graphs</strong>ï¼‰æ¥è®¡ç®—, æ‰€ä»¥é¦–å…ˆæˆ‘ä»¬å¾—åˆ›å»ºä¸€ä¸ª<strong>æ•°æ®æµå›¾</strong>, ç„¶åå†å°†æˆ‘ä»¬çš„æ•°æ®ï¼ˆæ•°æ®ä»¥å¼ é‡(<strong>tensor</strong>)çš„å½¢å¼å­˜åœ¨ï¼‰æ”¾åœ¨æ•°æ®æµå›¾ä¸­è®¡ç®—. </p>
<blockquote>
<ul>
<li>Nodes åœ¨å›¾ä¸­è¡¨ç¤ºæ•°å­¦æ“ä½œ</li>
<li>Edges åœ¨å›¾ä¸­åˆ™è¡¨ç¤ºåœ¨èŠ‚ç‚¹é—´ç›¸äº’è”ç³»çš„å¤šç»´æ•°æ®æ•°ç»„ï¼Œå³å¼ é‡ï¼ˆtensorï¼‰</li>
</ul>
</blockquote>
<p>è®­ç»ƒæ¨¡å‹æ—¶ <strong>tensor</strong> ä¼šä¸æ–­çš„ä»æ•°æ®æµå›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ <strong>flow</strong> åˆ°å¦ä¸€èŠ‚ç‚¹, è¿™å°±æ˜¯ TensorFlow åå­—çš„ç”±æ¥.</p>
<h2 id="Tensor-å¼ é‡æ„ä¹‰"><a href="#Tensor-å¼ é‡æ„ä¹‰" class="headerlink" title="Tensor å¼ é‡æ„ä¹‰"></a>Tensor å¼ é‡æ„ä¹‰</h2><p><strong>å¼ é‡ï¼ˆTensor)</strong>: å¼ é‡æœ‰å¤šç§. </p>
<ul>
<li>é›¶é˜¶å¼ é‡ä¸º çº¯é‡æˆ–æ ‡é‡ (scalar) ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ•°å€¼. æ¯”å¦‚ <code>[1]</code></li>
<li>ä¸€é˜¶å¼ é‡ä¸º å‘é‡ (vector), æ¯”å¦‚ ä¸€ç»´çš„ <code>[1, 2, 3]</code></li>
<li>äºŒé˜¶å¼ é‡ä¸º çŸ©é˜µ (matrix), æ¯”å¦‚ äºŒç»´çš„ <code>[[1, 2, 3],[4, 5, 6],[7, 8, 9]]</code></li>
</ul>
<blockquote>
<p>ä»¥æ­¤ç±»æ¨, è¿˜æœ‰ ä¸‰é˜¶ ä¸‰ç»´çš„ â€¦</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Convolutional Neural Networks (week2) - deep CNN]]></title>
      <url>http://shopee.ai/2018/08/24/deeplearning/Convolutional-Neural-Networks-week2/</url>
      <content type="html"><![CDATA[<p>ç†è§£å¦‚ä½•æ­å»ºä¸€ä¸ªç¥ç»ç½‘ç»œï¼ŒåŒ…æ‹¬æœ€æ–°çš„å˜ä½“ï¼Œä¾‹å¦‚æ®‹ä½™ç½‘ç»œã€‚</p>
<a id="more"></a>
<h2 id="1-Why-look-at-case-studies"><a href="#1-Why-look-at-case-studies" class="headerlink" title="1. Why look at case studies?"></a>1. Why look at case studies?</h2><p>é€šè¿‡ä»–äººçš„å®ä¾‹å¯ä»¥æ›´å¥½çš„ç†è§£å¦‚ä½•æ„å»ºå·ç§¯ç¥ç»ç½‘ç»œï¼Œæœ¬å‘¨è¯¾ç¨‹ä¸»è¦ä¼šä»‹ç»å¦‚ä¸‹ç½‘ç»œ</p>
<ul>
<li>LeNet-5</li>
<li>AlexNet</li>
<li>VGG</li>
<li>ResNet (æœ‰152å±‚)</li>
<li>Inception</li>
</ul>
<h2 id="2-Classic-networks"><a href="#2-Classic-networks" class="headerlink" title="2. Classic networks"></a>2. Classic networks</h2><h3 id="2-1-LeNet-5"><a href="#2-1-LeNet-5" class="headerlink" title="2.1 LeNet-5"></a>2.1 LeNet-5</h3><p>è¯¥ç½‘ç»œ 1980s æå‡ºï¼Œä¸»è¦é’ˆå¯¹ç°åº¦å›¾åƒè®­ç»ƒçš„ï¼Œç”¨äºè¯†åˆ«æ‰‹å†™æ•°å­—ã€‚</p>
<p><img src="/images/deeplearning/C4W2-1_1.png" width="750"></p>
<blockquote>
<ol>
<li>å½“æ—¶å¾ˆå°‘ç”¨åˆ° Paddingï¼Œæ‰€ä»¥çœ‹åˆ°éšç€ç½‘ç»œå±‚æ¬¡å¢åŠ ï¼Œå›¾åƒçš„é«˜åº¦å’Œå®½åº¦éƒ½æ˜¯é€æ¸å‡å°çš„ï¼Œæ·±åº¦åˆ™ä¸æ–­å¢åŠ .</li>
<li>å½“æ—¶äººä»¬ä¼šæ›´å€¾å‘äºä½¿ç”¨ Average Poolingï¼Œä½†æ˜¯ç°åœ¨åˆ™æ›´æ¨èä½¿ç”¨ Max Pooling.</li>
<li>æœ€åçš„é¢„æµ‹æ²¡æœ‰ä½¿ç”¨ softmaxï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸€èˆ¬çš„æ–¹æ³•.</li>
</ol>
<p>è®ºæ–‡ä¸­ä½ ä¼šå‘ç°ï¼Œè¿‡å»äººä»¬ä½¿ç”¨ Sigmoidå‡½æ•° å’Œ Tanhå‡½æ•°ï¼Œè€Œä¸æ˜¯ ReLuï¼Œ è¿™ç§ç½‘è·¯ç»“æ„çš„ç‰¹åˆ«ä¹‹å¤„è¿˜åœ¨äºå„ç½‘ç»œå±‚ä¹‹é—´æ˜¯æœ‰å…³è”çš„.</p>
</blockquote>
<h3 id="2-2-AlexNet"><a href="#2-2-AlexNet" class="headerlink" title="2.2 AlexNet"></a>2.2 AlexNet</h3><p>AlexNet å…¶å®å’Œ LetNet-5 æœ‰å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹ï¼Œå¦‚å¤§è‡´çš„ç½‘ç»œç»“æ„ã€‚ä¸åŒçš„åœ°æ–¹ä¸»è¦æœ‰å¦‚ä¸‹ï¼š</p>
<p><img src="/images/deeplearning/C4W2-2_1.png" width="750"></p>
<ul>
<li>æ¿€æ´»å‡½æ•°ä½¿ç”¨çš„æ˜¯ <strong>Relu</strong>ï¼Œæœ€åä¸€å±‚ä½¿ç”¨çš„æ˜¯ <strong>Softmax</strong></li>
<li>å‚æ•°æ›´å¤šï¼Œæœ‰6000ä¸‡ä¸ªå‚æ•°ï¼Œè€Œ LeNet-5 åªæœ‰6ä¸‡ä¸ªå·¦å³</li>
<li>ä½¿ç”¨ Max Pooling</li>
</ul>
<blockquote>
<p>Local Response Normalization å±€éƒ¨å“åº”å½’ä¸€åŒ– - LRNå±‚ï¼Œä¸é‡è¦åˆ’æ‰.</p>
<p>è¿™ç¯‡è®ºæ–‡ä¹‹åï¼Œæ·±åº¦å­¦ä¹ é€æ¸åœ¨ CV æ–¹é¢çš„å…³æ³¨ï¼Œä¸æ—¥ä¿±å¢. </p>
<p>AlexNet æ¯”è¾ƒå¤æ‚ï¼ŒåŒ…å«å¤§é‡è¶…å‚æ•°.</p>
</blockquote>
<h3 id="2-3-VGG-16"><a href="#2-3-VGG-16" class="headerlink" title="2.3 VGG-16"></a>2.3 VGG-16</h3><p><img src="/images/deeplearning/C4W2-3_1.png" width="750"></p>
<p>è¿™ä¸ªç½‘ç»œå¤ªç‰›äº†ï¼Œå› ä¸ºå®ƒæœ‰å°†è¿‘ 1.38äº¿ä¸ªå‚æ•°ï¼Œå³ä½¿æ”¾åˆ°ç°åœ¨ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ç½‘ç»œï¼Œä½†æ˜¯è¿™ä¸ªç½‘ç»œçš„ç»“æ„å¹¶ä¸å¤æ‚ã€‚ä¸‹é¢ä¸»è¦ä»‹ç»ä¸€ä¸‹ä¸Šå›¾ç½‘ç»œã€‚</p>
<p>é¦–å…ˆè¯¥ç½‘ç»œä½¿ç”¨çš„æ˜¯ Sameå·ç§¯ï¼Œå³ä¿è¯é«˜åº¦å’Œå®½åº¦ä¸å˜ï¼Œå¦å¤–å› ä¸ºæ€»å…±æœ‰16å±‚å·ç§¯æ“ä½œï¼Œæ‰€ä»¥å°±ä¸æŠŠæ¯ä¸€å±‚éƒ½ç”¨å›¾åƒçš„æ–¹å¼è¡¨ç°å‡ºæ¥äº†ï¼Œä¾‹å¦‚ [CONV 64 X2] è¡¨ç¤ºçš„æ˜¯ç”¨ 64ä¸ª è¿‡æ»¤å™¨è¿›è¡Œ Sameå·ç§¯ æ“ä½œ2æ¬¡ï¼Œå³å³ä¸Šè§’æ‰€ç”»çš„ç¤ºæ„å›¾ï¼Œ(224,224,3) -&gt; (224,224,64) -&gt; (224,224,64)</p>
<blockquote>
<p><strong>Andrew Ng</strong> : æˆ‘æœ€å–œæ¬¢å®ƒçš„ä¸€ç‚¹æ˜¯ï¼Œéšç€ç½‘ç»œçš„åŠ æ·±ï¼Œå›¾åƒçš„ Height å’Œ Width éƒ½åœ¨ä»¥ä¸€å®šçš„è§„å¾‹ä¸æ–­ç¼©å°ï¼Œæ¯æ¬¡æ± åŒ–ä¹‹ååˆšå¥½ç¼©å°ä¸€åŠï¼Œè€Œä¿¡é“æ•°é‡åœ¨ä¸æ–­å¢åŠ . è€Œåˆšå¥½ä¹Ÿæ˜¯åœ¨æ¯ç»„å·ç§¯æ“ä½œåå¢åŠ ä¸€å€. ä¹Ÿå°±æ˜¯è¯´ ï¼š å›¾åƒç¼©å°çš„æ¯”ä¾‹å’Œä¿¡é“å¢åŠ çš„æ¯”ä¾‹æ˜¯æœ‰è§„å¾‹çš„.</p>
<p>ä¸Šé¢ä¸‰ä¸ªæ˜¯æ¯”è¾ƒç»å…¸çš„ç½‘ç»œï¼Œå¯é˜…è¯»å…¶è®ºæ–‡ï¼ŒNg<strong>å´å¤§å¸ˆ</strong> å»ºè®®çš„é˜…è¯»é¡ºåºæ˜¯ AlexNet-&gt;VGG-&gt;LeNetã€‚</p>
</blockquote>
<h2 id="3-Residual-Network-ResNets"><a href="#3-Residual-Network-ResNets" class="headerlink" title="3. Residual Network (ResNets)"></a>3. Residual Network (ResNets)</h2><p>ResNets å‘æ˜è€…æ˜¯ ä½•æºæ˜ã€å¼ ç¿”å®‡ã€ä»»å°‘å¿ã€å­™å‰‘</p>
<p>å´å¤§å¸ˆè¡¨ç¤º â€œéå¸¸æ·±çš„ç½‘ç»œæ˜¯å¾ˆéš¾è®­ç»ƒçš„ï¼Œå› ä¸ºå­˜åœ¨æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸çš„é—®é¢˜â€ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº† <strong>Skip Connection</strong> (è·³è¿œé“¾æ¥)ï¼Œæ®‹å·®ç½‘ç»œæ­£æ˜¯ä½¿ç”¨äº†è¿™ä¸ªæ–¹æ³•ã€‚</p>
<h3 id="3-1-æ®‹å·®å—-Residual-Block"><a href="#3-1-æ®‹å·®å—-Residual-Block" class="headerlink" title="3.1 æ®‹å·®å— (Residual Block)"></a>3.1 æ®‹å·®å— (Residual Block)</h3><p>é¦–å…ˆä»‹ç»ç»„æˆæ®‹å·®ç½‘ç»œçš„å•å…ƒï¼šæ®‹å·®å—(<strong>Residual Block</strong>)ï¼Œå¦‚ä¸‹å›¾ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C4W2-4.png" width="550"></p>
<p>æ®‹å·®å—æ˜¯ç”±ä¸¤å±‚ç½‘ç»œèŠ‚ç‚¹ç»„æˆçš„, $a^{[l]}$ ç»è¿‡çº¿æ€§å˜åŒ–ï¼Œå†é€šè¿‡Reluæ¿€æ´»å‡½æ•°åå¾—åˆ° $a^{[l+1]}$ï¼Œ $a^{[l+2]}$ ä¹ŸåŒç†ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹å›¾ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C4W2-5_1.png" width="750"></p>
<p>ç‰¹åˆ«æ³¨æ„ä¸Šå›¾ä¸­çš„<strong>ç´«è‰²çº¿</strong>è¿æ¥ï¼Œ$a^{[{l}]}$ é€šè¿‡è¿™æ¡çº¿ç›´æ¥å°†æ•°æ®ä¼ é€’ç»™ $a^{[l+2]}$ï¼Œ æ‰€ä»¥ $a^{[l+2]}=g(z^{[l+1]}+a^{[l]})$ ï¼Œè¿™æ¡ç´«è‰²çº¿ä¹Ÿå«ä½œ<strong>short cut</strong>(æˆ–skip connection)</p>
<h3 id="3-2-æ®‹å·®ç½‘ç»œ"><a href="#3-2-æ®‹å·®ç½‘ç»œ" class="headerlink" title="3.2 æ®‹å·®ç½‘ç»œ"></a>3.2 æ®‹å·®ç½‘ç»œ</h3><p><img src="/images/deeplearning/C4W2-6_1.png" width="750"></p>
<p>å¦‚å›¾ç¤ºï¼Œæ®‹å·®ç½‘ç»œæ¯ä¸¤å±‚ç½‘ç»œèŠ‚ç‚¹ç»„æˆä¸€ä¸ªæ®‹å·®å—ï¼Œè¿™ä¹Ÿå°±æ˜¯å…¶ä¸æ™®é€šç½‘ç»œ(Plain Network)çš„å·®åˆ«ã€‚</p>
<p>éšç€ç½‘ç»œæ·±åº¦çš„åŠ æ·±ï¼Œä¼˜åŒ–ç®—æ³•ä¼šè¶Šæ¥è¶Šéš¾è®­ç»ƒï¼Œè®­ç»ƒé”™è¯¯ä¼šè¶Šæ¥è¶Šå¤šï¼Œä½†æ˜¯æœ‰äº† ResNets å°±ä¸ä¸€æ ·äº†. ä¹Ÿå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜. å¦ä¸€è§’åº¦ï¼Œç½‘ç»œè¶Šæ·±ä¼šæ¯”è¾ƒè‡ƒè‚¿ï¼Œä½†æ˜¯ ResNet ç¡®å®åœ¨è®­ç»ƒæ·±åº¦ç½‘ç»œæ–¹é¢éå¸¸æœ‰æ•ˆ.</p>
<p>ç»“åˆä¹‹å‰çš„è¯¾ç¨‹æˆ‘ä»¬çŸ¥é“å¦‚æœä½¿ç”¨æ™®é€šç½‘ç»œè®­ç»ƒæ¨¡å‹ï¼Œè®­ç»ƒè¯¯å·®ä¼šéšç€ç½‘ç»œå±‚æ¬¡åŠ æ·±å…ˆå‡å°ï¼Œè€Œåä¼šå¼€å§‹å¢åŠ ï¼Œè€Œæ®‹å·®ç½‘ç»œåˆ™ä¸ä¼šæœ‰è¿™ç§æƒ…å†µï¼Œåè€Œå®ƒä¼šéšç€å±‚æ¬¡å¢åŠ ï¼Œè¯¯å·®ä¹Ÿä¼šè¶Šæ¥è¶Šå°ï¼Œè¿™ä¸ç†è®ºç›¸ç¬¦ã€‚</p>
<p>éšç€ç½‘ç»œæ·±åº¦çš„åŠ æ·±ï¼Œä¼˜åŒ–ç®—æ³•ä¼šè¶Šæ¥è¶Šéš¾è®­ç»ƒï¼Œè®­ç»ƒé”™è¯¯ä¼šè¶Šæ¥è¶Šå¤šï¼Œä½†æ˜¯æœ‰äº† ResNets å°±ä¸ä¸€æ ·äº†. ä¹Ÿå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜. å¦ä¸€è§’åº¦ï¼Œç½‘ç»œè¶Šæ·±ä¼šæ¯”è¾ƒè‡ƒè‚¿ï¼Œä½†æ˜¯ ResNet ç¡®å®åœ¨è®­ç»ƒæ·±åº¦ç½‘ç»œæ–¹é¢éå¸¸æœ‰æ•ˆ.</p>
<h2 id="4-Why-ResNets-work"><a href="#4-Why-ResNets-work" class="headerlink" title="4. Why ResNets work"></a>4. Why ResNets work</h2><p>å´å¤§è¡¨ç¤º: ç½‘ç»œåœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°å¥½ï¼Œæ‰èƒ½ Hold-out äº¤å‰éªŒè¯é›† æˆ– devé›†ã€æµ‹è¯•é›†ä¸Šè¡¨ç°å¥½ï¼Œæ‰€ä»¥è®­ç»ƒé›†ä¸Šè¡¨ç°å¥½æ˜¯ç¬¬ä¸€æ­¥.</p>
<p>ä¸ºäº†ç›´è§‚è§£é‡Šæ®‹å·®ç½‘ç»œä¸ºä»€ä¹ˆæœ‰ç”¨ï¼Œå‡è®¾æˆ‘ä»¬å·²ç»é€šè¿‡ä¸€ä¸ªå¾ˆå¤§çš„ç¥ç»ç½‘ç»œå¾—åˆ°äº† $a^{[l]}$ã€‚ è€Œç°åœ¨æˆ‘ä»¬åˆéœ€è¦æ·»åŠ ä¸¤å±‚ç½‘ç»œè¿›å»ï¼Œæˆ‘ä»¬çœ‹çœ‹å¦‚æœæ·»åŠ çš„æ˜¯æ®‹å·®å—ä¼šæœ‰ä»€ä¹ˆæ•ˆæœã€‚å¦‚ä¸‹å›¾ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C4W2-7.jpg" width="650"></p>
<p>ç”± <strong>æ®‹å·®å—Residual Block</strong> çš„ç‰¹ç‚¹æˆ‘ä»¬çŸ¥é“ $a^{[l+2]}=g(z^{[l+1]}+a^{[l]})=g(W^{[l+1]}a^{[l]}+b^{[l+1]}+a^{[l]})$</p>
<p>æˆ‘ä»¬å…ˆè€ƒè™‘ä¸€ä¸ªæç«¯æƒ…å†µï¼Œå³ $W^{[l+1]}=0,b^{[l+1]}=0$ï¼Œ é‚£ä¹ˆ $a^{[l+2]}=g(a^{[l]})=a^{[l]}$ <strong>(å› ä¸ºæ¿€æ´»å‡½æ•°æ˜¯Relu)</strong>ï¼Œæ‰€ä»¥åœ¨æ·»åŠ äº†é¢å¤–çš„ä¸¤å±‚ç½‘ç»œåï¼Œå³ä½¿æœ€åæƒ…å†µä¹Ÿæ˜¯ä¿æŒå’Œä¹‹å‰ç»“æœä¸€æ ·ã€‚(è€Œå¦‚æœåªæ˜¯<strong>åŠ ä¸Šæ™®é€šçš„ä¸¤å±‚ç½‘ç»œ</strong>ï¼Œå¯èƒ½ç»“æœä¼šæ›´å¥½ï¼Œä½†æ˜¯ä¹Ÿå¾ˆæœ‰å¯èƒ½ç»“æœä¼šè¶Šæ¥è¶Šç³Ÿç³•, å› ä¸ºæ™®é€šç½‘ç»œå°±ç®—æ˜¯é€‰æ‹©ç”¨æ¥å­¦ä¹ æ’ç­‰å‡½æ•°çš„å‚æ•°éƒ½å¾ˆå›°éš¾)ï¼Œæ®‹å·®ç½‘ç»œèµ·ä½œç”¨çš„ä¸»è¦åŸå› æ˜¯è¿™äº›æ®‹å·®å—å­¦ä¹ æ’ç­‰å‡½æ•°éå¸¸å®¹æ˜“, è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæ®‹å·®ç½‘ç»œèƒ½å¤Ÿä¿è¯æ·±åº¦ç½‘ç»œä¾æ—§æœ‰ç”¨çš„åŸå› äº†ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong> ï¼š å„å±‚ç½‘ç»œçš„<strong>ç»´åº¦</strong>ï¼Œå› ä¸º $a^{[l+2]}=g(z^{[l+1]}+a^{[l]})$, é‚£ä¹ˆå°±è¦æ±‚ $z^{[l+1]}$ è¦å’Œ $a^{[l]}$ ä¿æŒç›¸åŒçš„ç»´åº¦æ‰€ä»¥æ®‹å·®ç½‘ç»œä½¿ç”¨çš„æ˜¯<strong>Sameå·ç§¯</strong>ã€‚</p>
<p>ä½†æ˜¯å¦‚æœå”¯ç‹¬ä¸ä¸€æ ·ä¹Ÿæ²¡å…³ç³»ï¼Œå¯ä»¥ç»™ $a^{[l]}$ ä¹˜ä¸Šä¸€ä¸ª $W_s$ æ¥ä¿æŒç›¸åŒç»´åº¦ã€‚ $W_s$ çš„å€¼å¯ä»¥é€šè¿‡å­¦ä¹ è·å¾—</p>
<p>æ™®é€šç½‘ç»œ å’Œ ResNets å¸¸ç”¨çš„ç»“æ„æ˜¯ Conv -&gt; Conv -&gt; Conv -&gt; Pool -&gt; Conv -&gt; Conv -&gt; Conv -&gt; Pool ä¾æ¬¡é‡å¤ä¹‹.. ç›´åˆ°æœ‰ä¸€ä¸ªé€šè¿‡ Softmax è¿›è¡Œé¢„æµ‹çš„å…¨è¿æ¥å±‚.</p>
</blockquote>
<h2 id="5-in-Network-and-1Ã—1-convolutions"><a href="#5-in-Network-and-1Ã—1-convolutions" class="headerlink" title="5. in Network and 1Ã—1 convolutions"></a>5. in Network and 1Ã—1 convolutions</h2><p>$1 * 1$ å·ç§¯ä¹çœ‹èµ·æ¥å¥½åƒå¾ˆæ²¡ç”¨ï¼Œå¦‚ä¸‹å›¾ä¸Šï¼Œâ€‹ä½†æ˜¯å¦‚æœè¿™ä¸ª $1 * 1$ çš„å·ç§¯æœ‰æ·±åº¦å‘¢ï¼Ÿâ€‹</p>
<p><img src="/images/deeplearning/C4W2-8.png" width="750"></p>
<p>è¯´ä¸ªæ›´åŠ ç›´è§‚çš„ç†è§£å°±æ˜¯ä½¿ç”¨ $1*1$ å·ç§¯å¯ä»¥å¾ˆæ–¹ä¾¿çš„å‡å°‘æ·±åº¦ï¼Œè€Œä¸æ”¹å˜é«˜åº¦å’Œå®½åº¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C4W2-9.png" width="700"></p>
<p>åªéœ€è¦ç”¨ 32 ä¸ª ($1*1*192$) çš„ Filter å³å¯, å¦‚æœä¸ç”¨ $1 * 1$ å·ç§¯ï¼Œä¾‹å¦‚é‡‡ç”¨ $2*2$ å·ç§¯,è¦æƒ³å®ç°åªæ”¹å˜æ·±åº¦ï¼Œé‚£ä¹ˆè¿˜éœ€è¦ä½¿ç”¨ paddingï¼Œç›¸æ¯”èµ·æ¥æ›´åŠ éº»çƒ¦äº†.</p>
<h2 id="6-Inception-network-motivation"><a href="#6-Inception-network-motivation" class="headerlink" title="6. Inception network motivation"></a>6. Inception network motivation</h2><p><img src="/images/deeplearning/C4W2-10.jpg" width="700"></p>
<p>å¦‚ä¸Šå›¾ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å„ç§è¿‡æ»¤å™¨ï¼Œä¹Ÿæ˜¯ç”¨äº† Max Poolingã€‚ä½†æ˜¯è¿™äº›å¹¶ä¸éœ€è¦äººå·¥çš„é€‰æ‹©å…¶ä¸ªæ•°ï¼Œè¿™äº›éƒ½å¯ä»¥é€šè¿‡å­¦ä¹ æ¥ç¡®å®šä¸‹æ¥ã€‚æ‰€ä»¥è¿™ç§æ–¹æ³•å¾ˆå¥½çš„å¸®åŠ©æˆ‘ä»¬é€‰æ‹©ä½•ç§ <strong>Filter</strong> çš„é—®é¢˜ï¼Œè¿™ä¹Ÿå°±æ˜¯ <strong>Inception</strong>ç½‘ç»œã€‚</p>
<h3 id="6-1-è®¡ç®—æˆæœ¬"><a href="#6-1-è®¡ç®—æˆæœ¬" class="headerlink" title="6.1 è®¡ç®—æˆæœ¬"></a>6.1 è®¡ç®—æˆæœ¬</h3><p>æ³¨æ„éšä¹‹è€Œæ¥çš„è®¡ç®—æˆæœ¬ï¼Œå°¤å…¶æ˜¯ $5*5$ çš„ Filterï¼Œä¸‹é¢ä»¥è¿™ä¸ª Filter ä¸¾ä¾‹è¿›è¡Œè¯´æ˜ï¼š</p>
<p><img src="/images/deeplearning/C4W2-11.jpg" width="700"></p>
<p>å¦‚ä¸Šå›¾ç¤ºï¼Œä½¿ç”¨ 32 ä¸ª $(5*5*192)$ çš„ <strong>Filter</strong>ï¼Œå¯¹ $(28,28,192)$ è¿›è¡Œ Sameå·ç§¯ è¿ç®—å¾—åˆ° $(28,28,32)$ çš„è¾“å‡ºçŸ©é˜µï¼Œè¯¥å·ç§¯éœ€è¦æ‰§è¡Œçš„ä¹˜æ³•è¿ç®—æœ‰å¤šå°‘æ¬¡å‘¢ï¼Ÿ</p>
<p>è¾“å‡ºçŸ©é˜µä¸­çš„ä¸€ä¸ªæ•°æ®æ˜¯ç»è¿‡ $(5*5*192)$ æ¬¡ä¹˜æ³•å¾—åˆ°çš„ï¼Œé‚£ä¹ˆæ€»å…±çš„ä¹˜æ³•è¿ç®—æ¬¡æ•°åˆ™æ˜¯ $(5*5*192*28*28*32=1.2)$ äº¿</p>
<h3 id="6-2-ç“¶é¢ˆå±‚-Bottleneck-layer"><a href="#6-2-ç“¶é¢ˆå±‚-Bottleneck-layer" class="headerlink" title="6.2 ç“¶é¢ˆå±‚(Bottleneck layer)"></a>6.2 ç“¶é¢ˆå±‚(Bottleneck layer)</h3><p>ä¸Šé¢è¿ç®—æ¬¡æ•°å¤šå¤§1.2äº¿æ¬¡ï¼Œè¿ç®—é‡ç›¸å½“å¤§ï¼Œå› æ­¤æœ‰å¦ä¸€ç§ç½‘ç»œç»“æ„å¯¹æ­¤è¿›è¡Œä¼˜åŒ–ï¼Œä¸”å¯ä»¥è¾¾åˆ°åŒæ ·æ•ˆæœï¼Œå³é‡‡ç”¨ 1 * 1 å·ç§¯</p>
<p><img src="/images/deeplearning/C4W2-12.png" width="700"></p>
<p>å¦‚å›¾ç¤ºè¿›è¡Œäº†ä¸¤æ¬¡å·ç§¯ï¼Œæˆ‘ä»¬è®¡ç®—ä¸€ä¸‹æ€»å…±çš„ä¹˜æ³•æ¬¡æ•°ã€‚</p>
<p>ç¬¬ä¸€æ¬¡å·ç§¯ï¼š28 * 28 * 16 * 192 = 2.4 million<br>ç¬¬äºŒæ¬¡å·ç§¯ï¼š28 * 28 * 32 * 5 * 5 * 16 = 10 million<br>æ€»å…±ä¹˜æ³•æ¬¡æ•°æ˜¯ 12.4 millionï¼Œè¿™ä¸ä¸Šé¢ç›´æ¥ç”¨ 5 * 5 Filter çš„è¿ç®—æ¬¡æ•°æ•´æ•´å°‘äº†åå€ã€‚</p>
<h2 id="7-Inception-network"><a href="#7-Inception-network" class="headerlink" title="7. Inception network"></a>7. Inception network</h2><p><img src="/images/deeplearning/C4W2-12_1.png" width="750"></p>
<p><img src="/images/deeplearning/C4W2-13_1.png" width="750"></p>
<blockquote>
<p>ä¸ºäº†å¯ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œè¿˜æœ‰ä¸ªç‰¹åˆ«çš„ inception networkï¼Œæ˜¯ä¸€ä¸ª Google å‘˜å·¥å¼€å‘çš„å«åš GoogLeNetï¼Œè¿™ä¸ªåå­—æ˜¯ä¸ºäº†å‘ LeNet è‡´æ•¬. è¿™æ ·éå¸¸å¥½ï¼Œæ·±åº¦å­¦ä¹ çš„ç ”ç©¶äººå‘˜å¦‚ä½•é‡è§†åä½œï¼Œæ·±åº¦å­¦ä¹ å·¥ä½œè€…å¯¹å½¼æ­¤çš„å·¥ä½œæˆæœï¼Œéƒ½æœ‰ä¸€ç§å¼ºçƒˆçš„æ•¬æ„.</p>
</blockquote>
<h2 id="8-Using-open-source-impl"><a href="#8-Using-open-source-impl" class="headerlink" title="8. Using open-source impl"></a>8. Using open-source impl</h2><p>Practical advice for using ConvNets</p>
<h2 id="9-Transfer-Learning"><a href="#9-Transfer-Learning" class="headerlink" title="9. Transfer Learning"></a>9. Transfer Learning</h2><p>ç®€å•è¯´å°±æ˜¯åœ¨ä»–äººçš„åŸºç¡€ä¸Šå®ç°è‡ªå·±æƒ³è¦çš„æ¨¡å‹ï¼Œä¸¾ä¸ªğŸŒ°ï¼Œå‡å¦‚æˆ‘ä»¬ç°åœ¨éœ€è¦è¯†åˆ«å®¶é‡Œå…»çš„ä¸¤åªçŒ«ï¼Œåˆ†åˆ«å« <strong>å°èŠ±</strong> å’Œ <strong>å°ç™½</strong>ï¼Œä½†æ˜¯æˆ‘ä»¬åªæœ‰æ¯”è¾ƒå°‘çš„å›¾ç‰‡ã€‚å¹¸è¿çš„æ˜¯ç½‘ä¸Šå·²ç»æœ‰ä¸€ä¸ªå·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œæ˜¯ç”¨æ¥åŒºåˆ†1000ä¸ªä¸åŒäº‹ç‰©çš„(åŒ…æ‹¬çŒ«)ï¼Œå…¶ç½‘ç»œæ¨¡å‹å¦‚ä¸‹ï¼š</p>
<p><img src="/images/deeplearning/C4W2-15.png" width="750"></p>
<p>æˆ‘ä»¬çš„éœ€æ±‚æ˜¯æœ€åç»“æœæœ‰ä¸‰ç§ï¼šæ˜¯ <strong>å°èŠ±</strong>ï¼Œor <strong>å°ç™½</strong>ï¼Œor <strong>éƒ½ä¸æ˜¯</strong>ã€‚â€‹æ‰€ä»¥éœ€è¦å¯¹ <strong>softmax</strong> åšå¦‚ä¸‹å›¾ä¿®æ”¹.</p>
<p>ç”±äºæ•°æ®è¾ƒå°‘ï¼Œæ‰€ä»¥å¯ä»¥å¯¹ä»–äººçš„æ¨¡å‹çš„å‰é¢çš„ç»“æ„ä¸­çš„å‚æ•°è¿›è¡Œå†»ç»“ï¼Œå³ <strong>æƒé‡ weight</strong> å’Œ <strong>åå·® bias</strong> ä¸åšæ”¹åŠ¨ã€‚</p>
<p><img src="/images/deeplearning/C4W2-16.png" width="750"></p>
<p>â€‹å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€å®šé‡çš„æ•°æ®ï¼Œé‚£ä¹ˆ <strong>freeze</strong> çš„èŒƒå›´ä¹Ÿå¯ä»¥éšä¹‹å‡å°‘ï¼Œå³æ‹¿æ¥è®­ç»ƒçš„å±‚æ¬¡å¯ä»¥å¢å¤š<br>â€‹<br>â€‹<img src="/images/deeplearning/C4W2-17.png" width="750"></p>
<blockquote>
<p>you find that for a lot of computer vision applications, you just do much better if you download someone elseâ€™s open source weights and use that as initialization for your problem.</p>
<p>I think that computer vision is one where transfer learning is something that you should almost always do. ï¼ˆunless you actually have a very very large data set..ï¼‰</p>
</blockquote>
<h2 id="10-Data-augmentation"><a href="#10-Data-augmentation" class="headerlink" title="10. Data augmentation"></a>10. Data augmentation</h2><h3 id="10-1-Common-augmentation"><a href="#10-1-Common-augmentation" class="headerlink" title="10.1 Common augmentation"></a>10.1 Common augmentation</h3><ul>
<li>æ—‹è½¬(rotation)</li>
<li>ä¿®å‰ª(shearing)</li>
<li>å±€éƒ¨å˜å½¢(local warping)</li>
<li>é•œåƒ(mirroring)</li>
</ul>
<p>â€‹<img src="/images/deeplearning/C4W2-18.jpg" width="750"></p>
<blockquote>
<p>ä»¥ä¸Šä»‹ç»çš„æ–¹æ³•ï¼ŒåŒæ—¶ä½¿ç”¨å¹¶æ²¡æœ‰ä»€ä¹ˆåå¤„ï¼Œä½†æ˜¯åœ¨å®è·µä¸­ï¼Œå› ä¸ºå¤ªå¤æ‚äº†ï¼Œæ‰€ä»¥ä½¿ç”¨çš„å¾ˆå°‘ã€‚</p>
<p>æ›´ç»å¸¸ä½¿ç”¨çš„æ–¹æ³•å¯èƒ½ä¸‹é¢è¦ä»‹ç»çš„ <strong>Color shifting</strong> ã€‚</p>
</blockquote>
<h3 id="10-2-Color-shifting"><a href="#10-2-Color-shifting" class="headerlink" title="10.2 Color shifting"></a>10.2 Color shifting</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“å›¾åƒæ˜¯ç”± <strong>RGB</strong> ä¸‰ç§é¢œè‰²æ„æˆçš„ï¼Œæ‰€ä»¥è¯¥æ•°æ®æ‰©å……æ–¹æ³•å¸¸é‡‡ç”¨ <strong>PCA color augmentation</strong>ï¼Œå³å‡å¦‚ä¸€ä¸ªå›¾ç‰‡çš„ <strong>R</strong> å’Œ <strong>G</strong> æˆåˆ†è¾ƒå¤šï¼Œé‚£ä¹ˆè¯¥ç®—æ³•åˆ™ <strong>R,G</strong> çš„å€¼ä¼šå‡å°‘å¾ˆå¤šï¼Œè€Œ B çš„å€¼å˜åŒ–ä¼šå°‘ä¸€äº›ï¼Œæ‰€ä»¥ä½¿å¾—æ€»ä½“çš„é¢œè‰²ä¿æŒä¸€è‡´.</p>
<p>â€‹<img src="/images/deeplearning/C4W2-19_2.png" width="750"></p>
<blockquote>
<p>å¦‚æœä½ çœ‹ä¸æ‡‚è¿™äº›ï¼Œé‚£ä¹ˆæ²¡å…³ç³»ï¼Œå¯ä»¥çœ‹çœ‹ AlexNet è®ºæ–‡ä¸­çš„ç»†èŠ‚ï¼Œä½ ä¹Ÿèƒ½æ‰¾åˆ° PCA é¢œè‰²å¢å¼ºçš„å¼€æºå®ç°æ–¹æ³•.</p>
</blockquote>
<h2 id="11-The-state-of-CV"><a href="#11-The-state-of-CV" class="headerlink" title="11. The state of CV"></a>11. The state of CV</h2><p>â€‹<img src="/images/deeplearning/C4W2-21_1.png" width="750"></p>
<p>â€‹<img src="/images/deeplearning/C4W2-22_1.png" width="750"></p>
<p>â€‹<img src="/images/deeplearning/C4W2-23_1.png" width="750"><br>â€‹</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Convolutional Neural Networks (week1) - CNN]]></title>
      <url>http://shopee.ai/2018/08/21/deeplearning/Convolutional-Neural-Networks-week1/</url>
      <content type="html"><![CDATA[<ul>
<li>ç†è§£å¦‚ä½•æ­å»ºä¸€ä¸ªç¥ç»ç½‘ç»œï¼ŒåŒ…æ‹¬æœ€æ–°çš„å˜ä½“ï¼Œä¾‹å¦‚æ®‹ä½™ç½‘ç»œã€‚</li>
<li>çŸ¥é“å¦‚ä½•å°†å·ç§¯ç½‘ç»œåº”ç”¨åˆ°è§†è§‰æ£€æµ‹å’Œè¯†åˆ«ä»»åŠ¡ã€‚</li>
<li>çŸ¥é“å¦‚ä½•ä½¿ç”¨ç¥ç»é£æ ¼è¿ç§»ç”Ÿæˆè‰ºæœ¯ã€‚</li>
<li>èƒ½å¤Ÿåœ¨å›¾åƒã€è§†é¢‘ä»¥åŠå…¶ä»–2Dæˆ–3Dæ•°æ®ä¸Šåº”ç”¨è¿™äº›ç®—æ³•ã€‚</li>
</ul>
<a id="more"></a>
<h2 id="1-Computer-vision"><a href="#1-Computer-vision" class="headerlink" title="1. Computer vision"></a>1. Computer vision</h2><p><img src="/images/deeplearning/C4W1-1_1.png" width="700"></p>
<p><img src="/images/deeplearning/C4W1-2_1.png" width="700"></p>
<blockquote>
<p>å¦‚å›¾ç¤ºï¼Œä¹‹å‰è¯¾ç¨‹ä¸­ä»‹ç»çš„éƒ½æ˜¯ 64 * 64 * 3çš„å›¾åƒ (<strong>3 ä»£è¡¨</strong>:å› ä¸ºæ¯ä¸ªå›¾ç‰‡éƒ½æœ‰3ä¸ªé¢œè‰²é€šé“ channels, 12288 So $X$, <strong>the input features has dimension 12288</strong>)ï¼Œè€Œä¸€æ—¦å›¾åƒè´¨é‡å¢åŠ ï¼Œä¾‹å¦‚å˜æˆ 1000 * 1000 * 3 çš„æ—¶å€™é‚£ä¹ˆæ­¤æ—¶çš„ç¥ç»ç½‘ç»œçš„è®¡ç®—é‡ä¼šå·¨å¤§ï¼Œæ˜¾ç„¶è¿™ä¸ç°å®ã€‚æ‰€ä»¥éœ€è¦å¼•å…¥å…¶ä»–çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜.</p>
</blockquote>
<h2 id="2-Edge-detection-example"><a href="#2-Edge-detection-example" class="headerlink" title="2. Edge detection example"></a>2. Edge detection example</h2><p>ä½¿ç”¨è¾¹ç¼˜æ£€æµ‹ä½œä¸ºå…¥é—¨æ ·ä¾‹, you see how the convolution operation works.</p>
<p><img src="/images/deeplearning/C4W1-3_1.png" width="700"></p>
<blockquote>
<p>è¾¹ç¼˜æ£€æµ‹å¯ä»¥æ˜¯å‚ç›´è¾¹ç¼˜æ£€æµ‹ï¼Œä¹Ÿå¯ä»¥æ˜¯æ°´å¹³è¾¹ç¼˜æ£€æµ‹ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤º.</p>
</blockquote>
<p>è‡³äºç®—æ³•å¦‚ä½•å®ç°ï¼Œä¸‹é¢ä¸¾ä¸€ä¸ªæ¯”è¾ƒç›´è§‚çš„ä¾‹å­ï¼š</p>
<p><img src="/images/deeplearning/C4W1-4_1.png" width="700"></p>
<blockquote>
<p>å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹å‡ºåŸæ¥ 6 * 6 çš„çŸ©é˜µæœ‰æ˜æ˜¾çš„å‚ç›´è¾¹ç¼˜ï¼Œé€šè¿‡ 3 * 3 çš„è¿‡æ»¤å™¨ <strong>filter</strong> (ä¹Ÿå«åš â€œæ ¸â€)å·ç§¯ä¹‹åï¼Œä»ç„¶ä¿ç•™äº†åŸæ¥çš„å‚ç›´è¾¹ç¼˜ç‰¹å¾ï¼Œè™½ç„¶è¿™ä¸ªè¾¹ç¼˜è²Œä¼¼æœ‰ç‚¹ç²—ï¼Œè¿™æ˜¯å› ä¸ºæ•°æ®ä¸å¤Ÿå¤§çš„åŸå› ï¼Œå¦‚æœè¾“å…¥æ•°æ®å¾ˆå¤§çš„è¯è¿™ä¸ªä¸æ˜¯å¾ˆæ˜æ˜¾äº†.</p>
<p>å…³äºç”¨ç¼–ç¨‹è¯­è¨€å®ç°ï¼špython / tensorflow / keras ç­‰ï¼Œéƒ½æœ‰ä¸€äº›å‡½æ•°æ¥å®ç°å·ç§¯è¿ç®—.</p>
</blockquote>
<h2 id="3-More-edge-detection"><a href="#3-More-edge-detection" class="headerlink" title="3. More edge detection"></a>3. More edge detection</h2><p><img src="/images/deeplearning/C4W1-5_1.png" width="700"></p>
<p>é™¤äº†ä¸Šé¢çš„å‚ç›´ï¼Œæ°´å¹³è¾¹ç¼˜æ£€æµ‹ï¼Œå…¶å®ä¹Ÿå¯ä»¥æ£€æµ‹åˆé¢œè‰²è¿‡åº¦å˜åŒ–ï¼Œä¾‹å¦‚æ˜¯äº®å˜æš—ï¼Œè¿˜æ˜¯æš—å˜äº®ï¼Ÿ</p>
<p><img src="/images/deeplearning/C4W1-5_2.png" width="600"></p>
<p><strong>åœ¨è®¡ç®—æœºè§†è§‰çš„å†å²ä¸Šï¼Œå±‚æ›¾ç»å…¬å¹³çš„äº‰è®ºè¿‡å“ªäº›ä»€ä¹ˆæ ·çš„ <code>filter</code> æ•°å­—ç»„åˆæ‰æ˜¯æœ€å¥½çš„:
</strong></p>
<blockquote>
<p><strong>ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„è¿‡æ»¤å™¨ï¼Œç¬¬äºŒä¸ªæ˜¯<code>Sobel filter</code>ï¼Œå…·æœ‰è¾ƒå¼ºçš„é²æ£’æ€§ï¼Œç¬¬ä¸‰ä¸ªæ˜¯<code>Schoss filter</code>.</strong></p>
</blockquote>
<p><img src="/images/deeplearning/C4W1-6_1.png" width="700"></p>
<table>
<thead>
<tr>
<th style="text-align:center">Filter</th>
<th style="text-align:center">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Sobel Filter</td>
<td style="text-align:center">it puts a little bit more weight to the central row <br> å¢åŠ äº†ä¸­é—´ä¸€è¡Œçš„æƒé‡</td>
</tr>
<tr>
<td style="text-align:center">Schoss Filter</td>
<td style="text-align:center">å®é™…å®ƒä¹Ÿæ˜¯ä¸€ç§å‚ç›´è¾¹ç¼˜æ£€æµ‹ <br> ç¿»è½¬90åº¦ï¼Œå®ƒå°±å˜ä¸ºæ°´å¹³è¾¹ç¼˜æ£€æµ‹ </td>
</tr>
<tr>
<td style="text-align:center">Other Filter</td>
<td style="text-align:center">9ä¸ªå‚æ•°ä¹Ÿå¯ä»¥é€šè¿‡å­¦ä¹ (åå‘ä¼ æ’­)çš„æ–¹å¼è·å¾— </td>
</tr>
</tbody>
</table>
<blockquote>
<p>å…¶å®è¿‡æ»¤å™¨çš„9ä¸ªå‚æ•°ä¹Ÿå¯ä»¥é€šè¿‡å­¦ä¹ (åå‘ä¼ æ’­)çš„æ–¹å¼è·å¾—ï¼Œè™½ç„¶æ¯”è¾ƒè´¹åŠ²ï¼Œä½†æ˜¯å¯èƒ½ä¼šå­¦åˆ°å¾ˆå¤šå…¶ä»–é™¤äº†å‚ç›´ï¼Œæ°´å¹³çš„è¾¹ç¼˜ç‰¹å¾ï¼Œä¾‹å¦‚  45Â°ï¼Œ70Â° ç­‰å„ç§ç‰¹å¾.</p>
</blockquote>
<h2 id="4-Padding"><a href="#4-Padding" class="headerlink" title="4. Padding"></a>4. Padding</h2><blockquote>
<p><strong>ç”±å‰é¢çš„ä¾‹å­, å·ç§¯çš„æ–¹æ³•ï¼Œæœ‰2ä¸ªç¼ºç‚¹:</strong></p>
<ol>
<li><p>æ¯ç»è¿‡ä¸€æ¬¡å·ç§¯è®¡ç®—ï¼ŒåŸæ•°æ®éƒ½ä¼šå‡å°ï¼Œä½†æœ‰æ—¶æˆ‘ä»¬å¹¶ä¸å¸Œæœ›è¿™æ ·ã€‚ä¸¾ä¸ªæ¯”è¾ƒæç«¯çš„ä¾‹å­ï¼šå‡è®¾åŸæ•°æ®æ˜¯ 30 * 30 çš„ä¸€åªçŒ«çš„å›¾åƒï¼Œç»è¿‡10æ¬¡å·ç§¯ (è¿‡æ»¤å™¨æ˜¯3 * 3) åï¼Œæœ€åå›¾åƒåªå‰©ä¸‹äº† 10 * 10 äº† ğŸ˜³ğŸ˜³</p>
</li>
<li><p>ç”±å·ç§¯çš„è®¡ç®—æ–¹æ³•å¯çŸ¥ï¼Œå›¾åƒè¾¹ç¼˜ç‰¹å¾è®¡ç®—æ¬¡æ•°æ˜¾ç„¶å°‘äºå›¾åƒä¸­é—´ä½ç½®çš„åƒç´ ç‚¹ï¼Œå¦‚ä¸‹å›¾ç¤º (ç»¿è‰²çš„ä½ç½®æ˜æ˜¾æ˜¯å†·å®«), å›¾åƒè¾¹ç¼˜çš„å¤§éƒ¨åˆ†ä¿¡æ¯éƒ½ä¸¢å¤±äº†.</p>
</li>
</ol>
</blockquote>
<h3 id="4-1-è¿ç”¨-Padding-çš„åŸå› "><a href="#4-1-è¿ç”¨-Padding-çš„åŸå› " class="headerlink" title="4.1 è¿ç”¨ Padding çš„åŸå› "></a>4.1 è¿ç”¨ Padding çš„åŸå› </h3><p><img src="/images/deeplearning/C4W1-7_1.png" width="500"></p>
<p>åŸæ¥çš„ 6 * 6 å¡«å……åå˜æˆäº† 8 * 8ï¼Œæ­¤æ—¶åœ¨ç»è¿‡ä¸€æ¬¡å·ç§¯å¾—åˆ°çš„ä»æ—§æ˜¯ 6 * 6 çš„çŸ©é˜µã€‚</p>
<p>ä¸‹é¢æ€»ç»“ä¸€ä¸‹å·ç§¯ä¹‹åå¾—åˆ°çŸ©é˜µå¤§å°çš„è®¡ç®—æ–¹æ³•ï¼Œå‡è®¾ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">Title</th>
<th style="text-align:center">Size</th>
<th style="text-align:center">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">åŸæ•°æ®</td>
<td style="text-align:center">$n * n$</td>
<td style="text-align:center">çŸ©é˜µ $n * n$ </td>
</tr>
<tr>
<td style="text-align:center">Filter</td>
<td style="text-align:center">$f * f$</td>
<td style="text-align:center">è¿‡æ»¤å™¨</td>
</tr>
<tr>
<td style="text-align:center">Padding</td>
<td style="text-align:center">$p * p$</td>
<td style="text-align:center">å¡«å……æ•°é‡</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><strong>ç»¼ä¸Šï¼š</strong></td>
<td style="text-align:center"><strong>$n+2p-f+1$</strong></td>
<td style="text-align:center">å¾—åˆ°çš„çŸ©é˜µå¤§å°</td>
</tr>
</tbody>
</table>
<blockquote>
<p>padding åï¼Œè™½ç„¶è¾¹ç¼˜åƒç´ ç‚¹ä»æ—§è®¡ç®—çš„æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯è¿™ä¸ªç¼ºç‚¹è‡³å°‘ä¸€å®šç¨‹åº¦ä¸Šè¢«å‰Šå¼±äº†.</p>
</blockquote>
<h3 id="4-2-å¦‚ä½•-padding-çš„å¤§å°"><a href="#4-2-å¦‚ä½•-padding-çš„å¤§å°" class="headerlink" title="4.2 å¦‚ä½• padding çš„å¤§å°"></a>4.2 å¦‚ä½• padding çš„å¤§å°</h3><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:center">desc</th>
<th style="text-align:center">Size</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Valid convolutions</td>
<td style="text-align:center">ä¸æ·»åŠ  padding</td>
<td style="text-align:center">$n - f + 1$</td>
</tr>
<tr>
<td style="text-align:center">Same convolutions</td>
<td style="text-align:center">Pad so that output size is the same as the input size. <br><br> ä¿æŒåŸå›¾åƒçŸ©é˜µçš„å¤§å°</td>
<td style="text-align:center">æ»¡è¶³ $n+2p-f+1 = n$ <br><br> å³ $p=\frac{f-1}{2}$, ä¸ºäº†æ»¡è¶³ä¸Šå¼ï¼Œ$f$ ä¸€èˆ¬å¥‡æ•°</td>
</tr>
</tbody>
</table>
<h2 id="5-Strided-convolutions"><a href="#5-Strided-convolutions" class="headerlink" title="5. Strided convolutions"></a>5. Strided convolutions</h2><p>è¿‡æ»¤å™¨ çºµå‘ã€æ¨ªå‘ éƒ½éœ€è¦æŒ‰ æ­¥é•¿ $S$ æ¥ç§»åŠ¨ï¼Œå¦‚å›¾ç¤º:</p>
<p><img src="/images/deeplearning/C4W1-8_1.png" width="700"></p>
<p>ç»“åˆä¹‹å‰çš„å†…å®¹ï¼Œè¾“å‡ºçŸ©é˜µå¤§å°è®¡ç®—å…¬å¼æ–¹æ³•ä¸ºï¼Œå‡è®¾ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">Title</th>
<th style="text-align:center">Size</th>
<th style="text-align:center">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">åŸæ•°æ®</td>
<td style="text-align:center">$n * n$</td>
<td style="text-align:center">çŸ©é˜µ $n * n$ </td>
</tr>
<tr>
<td style="text-align:center">Filter</td>
<td style="text-align:center">$f * f$</td>
<td style="text-align:center">è¿‡æ»¤å™¨</td>
</tr>
<tr>
<td style="text-align:center">Padding</td>
<td style="text-align:center">$p * p$</td>
<td style="text-align:center">å¡«å……æ•°é‡</td>
</tr>
<tr>
<td style="text-align:center">Stride</td>
<td style="text-align:center">$s * s$</td>
<td style="text-align:center">æ­¥é•¿</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><strong>ç»¼ä¸Šï¼š</strong></td>
<td style="text-align:center">å¾—åˆ°çš„çŸ©é˜µå¤§å°æ˜¯</td>
<td style="text-align:center"><strong>âŒŠ$\frac{n+2p-f}{s}$âŒ‹ * âŒŠ$\frac{n+2p-f}{s}$âŒ‹</strong></td>
</tr>
</tbody>
</table>
<blockquote>
<p>âŒŠâŒ‹: å‘ä¸‹å–æ•´ç¬¦å· âŒŠ59/60âŒ‹ = 0</p>
<p>âŒˆâŒ‰: å‘ä¸Šå–æ•´ç¬¦å· âŒˆ59/60âŒ‰ = 1</p>
</blockquote>
<h2 id="6-Convolutions-Over-Volumes"><a href="#6-Convolutions-Over-Volumes" class="headerlink" title="6. Convolutions Over Volumes"></a>6. Convolutions Over Volumes</h2><p>è¿™ä¸€èŠ‚ç”¨ç«‹ä½“å·ç§¯æ¥è§£é‡Š</p>
<p><img src="/images/deeplearning/C4W1-9_1.png" width="700"></p>
<blockquote>
<p><strong>å¦‚å›¾</strong>:</p>
<ul>
<li>è¾“å…¥çŸ©é˜µæ˜¯ $6 * 6 * 3$ (height * width * channels), è¿‡æ»¤å™¨æ˜¯ $3 * 3 * 3$ï¼Œè®¡ç®—æ–¹æ³•æ˜¯ä¸€ä¸€å¯¹åº”ç›¸ä¹˜ç›¸åŠ </li>
<li>æœ€åå¾—åˆ° $4 * 4$ çš„äºŒç»´çŸ©é˜µ.</li>
</ul>
<p>æœ‰æ—¶å¯èƒ½éœ€è¦æ£€æµ‹ æ°´å¹³è¾¹ç¼˜ æˆ– å‚ç›´è¾¹ç¼˜ï¼Œæˆ– å…¶ä»–ç‰¹å¾ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨ã€‚ä¸Šå›¾åˆ™ä½¿ç”¨äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ (é»„è‰²å’Œæ©˜é»„è‰²)ï¼Œå¾—åˆ°çš„ç‰¹å¾çŸ©é˜µå¤§å°ä¸º $4 * 4 * 2$.</p>
<p><strong>Filter</strong> æ•°å­—ç»„åˆå‚æ•°çš„é€‰æ‹©ä¸åŒï¼Œä½ å¯ä»¥å¾—åˆ°ä¸åŒçš„ç‰¹å¾æ£€æµ‹å™¨.</p>
</blockquote>
<h2 id="7-One-Layer-of-CNN-Example"><a href="#7-One-Layer-of-CNN-Example" class="headerlink" title="7. One Layer of CNN Example"></a>7. One Layer of CNN Example</h2><p><img src="/images/deeplearning/C4W1-10_1.png" width="700"></p>
<p>å¦‚å›¾ç¤ºå¾—åˆ° <strong>$4 * 4$</strong> çš„çŸ©é˜µåè¿˜éœ€è¦åŠ ä¸Šä¸€ä¸ªåå·® <strong>$b_n$</strong> (Python å¹¿æ’­æœºåˆ¶)ï¼Œä¹‹åè¿˜è¦è¿›è¡Œéçº¿æ€§è½¬æ¢ï¼Œå³ç”¨ ReLU å‡½æ•°.</p>
<p><img src="/images/deeplearning/C4W1-10_2.png" width="700"></p>
<p>å› æ­¤å‡å¦‚åœ¨æŸä¸€å·ç§¯å±‚ä¸­ä½¿ç”¨äº† 10 ä¸ª <strong>$3 * 3$</strong> çš„ <strong>Filter</strong> è¿‡æ»¤å™¨ï¼Œé‚£ä¹ˆä¸€å…±æœ‰ $(3*3+1)*10=280$ ä¸ªå‚æ•°.</p>
<p><img src="/images/deeplearning/C4W1-11_1.png" width="700"></p>
<p>ä¸‹é¢æ€»ç»“äº†å„é¡¹å‚æ•°çš„å¤§å°å’Œè¡¨ç¤ºæ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">Title</th>
<th style="text-align:center">Formula</th>
<th style="text-align:center">desc </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>è¾“å…¥çŸ©é˜µ</strong></td>
<td style="text-align:center">$n_H^{l-1} * n_W^{l-1} * n_c^{l-1}$</td>
<td style="text-align:center">$height * width * channels = 6 * 6 * 3$</td>
</tr>
<tr>
<td style="text-align:center">è¿‡æ»¤å™¨å¤§å°</td>
<td style="text-align:center">$f^{[l]}$</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Padding</td>
<td style="text-align:center">$p^{[l]}$</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Stride</td>
<td style="text-align:center">$s^l$</td>
<td style="text-align:center">æ­¥é•¿</td>
</tr>
<tr>
<td style="text-align:center">Each Filter is</td>
<td style="text-align:center">$f^{l} * f^{l} * n_c^{[l-1]}$</td>
<td style="text-align:center">$3 * 3 * 3$  ,  $n_c^{[l-1]} = 3$ <br><br> æ¯ä¸€å·ç§¯å±‚çš„è¿‡æ»¤å™¨çš„é€šé“çš„å¤§å° = è¾“å…¥å±‚çš„é€šé“å¤§å° $n_c^{[l-1]}$</td>
</tr>
<tr>
<td style="text-align:center">Activations æ¿€æ´»å‡½æ•°</td>
<td style="text-align:center">$a^{l}$ = $n_H^{l} * n_W^{l} * n_c^{l}$</td>
<td style="text-align:center">$A^{l}$ = $m * n_H^{l} * n_W^{l} * n_c^{l}$ï¼Œ($m$ä¸ªä¾‹å­)</td>
</tr>
<tr>
<td style="text-align:center">æƒé‡ weight</td>
<td style="text-align:center">$f^{l} * f^{l} * n_c^{[l-1]} * n_c^{[l]}$</td>
<td style="text-align:center">$Filter * è¿‡æ»¤å™¨ä¸ªæ•°$ <br><br> è¿‡æ»¤å™¨çš„ä¸ªæ•° = è¾“å‡ºå±‚çš„é€šé“çš„å¤§å° $n_c^{l}$</td>
</tr>
<tr>
<td style="text-align:center">åå·® bias</td>
<td style="text-align:center">$1 * 1 * 1 * n_c^{[l]}$</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><strong>è¾“å‡ºçŸ©é˜µ</strong></td>
<td style="text-align:center">$n_H^{l} * n_W^{l} * n_c^{l}$</td>
<td style="text-align:center">$height * width * channels$</td>
</tr>
<tr>
<td style="text-align:center">Output</td>
<td style="text-align:center">$n_{H/W}^{[l]}=[\frac{n_{H/W}^{[l-1]}+2p^{[l]}-f^{[l]}}{s^{[l]}}+1]$</td>
<td style="text-align:center">è¾“å‡ºå±‚ä¸è¾“å…¥å±‚è®¡ç®—å…¬å¼</td>
</tr>
</tbody>
</table>
<h2 id="8-A-Simple-Convolution-Network"><a href="#8-A-Simple-Convolution-Network" class="headerlink" title="8. A Simple Convolution Network"></a>8. A Simple Convolution Network</h2><p><img src="/images/deeplearning/C4W1-12_1.png" width="750"></p>
<p>ä¸Šå›¾ç®€å•ä»‹ç»äº†å·ç§¯ç½‘ç»œçš„è®¡ç®—è¿‡ç¨‹ï¼Œéœ€è¦å†ä»‹ç»çš„ä¸€ç‚¹æ˜¯æœ€åä¸€å±‚çš„å…¨è¿æ¥å±‚ï¼Œå³å°† $7 * 7 * 40$ çš„è¾“å‡ºçŸ©é˜µå±•å¼€ï¼Œå¾—åˆ° $1960$ ä¸ªèŠ‚ç‚¹ï¼Œç„¶åå†é‡‡ç”¨ <strong>Softmax</strong> æ¥è¿›è¡Œé¢„æµ‹.</p>
<blockquote>
<p>ä¸€èˆ¬çš„ <strong>CNN</strong> ä¸­ï¼Œæ¯ä¸€å±‚çŸ©é˜µçš„ <strong>height</strong> å’Œ <strong>width</strong> æ˜¯é€æ¸å‡å°çš„ï¼Œè€Œ <strong>channel</strong> åˆ™æ˜¯å¢åŠ çš„ ($n_c$ åœ¨å¢åŠ ï¼Œ$n_H$ å’Œ $n_W$ åœ¨å‡å°‘).</p>
</blockquote>
<p><strong>CNN ä¸­å¸¸è§çš„ 3 ç§ç±»å‹çš„ layerï¼š</strong></p>
<ol>
<li>Convolution (Conv å·ç§¯å±‚)</li>
<li>Pooling (Pool æ± åŒ–å±‚)</li>
<li>Fully connected (FC å…¨è¿æ¥å±‚)</li>
</ol>
<h2 id="9-Pooling-Layers"><a href="#9-Pooling-Layers" class="headerlink" title="9. Pooling Layers"></a>9. Pooling Layers</h2><p>ä½¿ç”¨æ± åŒ–å±‚æ¥ç¼©å‡æ¨¡å‹çš„å¤§å°ï¼Œæé«˜è®¡ç®—é€Ÿåº¦ï¼ŒåŒæ—¶æé«˜æå–ç‰¹å¾çš„é²æ£’æ€§.</p>
<p><img src="/images/deeplearning/C4W1-13_1.png" width="700"></p>
<p><strong><font color="wathet">æœ€å¤§æ± åŒ–çš„ç›´è§‚ç†è§£</font>:</strong></p>
<p>ä½ å¯ä»¥æŠŠä¸Šé¢ $4 * 4$ è¾“å…¥çœ‹åšæ˜¯æŸäº›ç‰¹å¾çš„é›†åˆ (ä¹Ÿè®¸ä¸æ˜¯)ï¼Œä¹Ÿå°±æ˜¯ç¥ç»ç½‘ç»œä¸­æŸä¸€å±‚çš„åæ¿€æ´»å€¼ï¼Œæ•°å­—å¤§æ„å‘³ç€å¯èƒ½æå–äº†æŸäº›ç‰¹å®šç‰¹å¾. å·¦ä¸Šè±¡é™å…·æœ‰è¿™ä¸ªç‰¹å¾ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªå‚ç›´è¾¹ç¼˜. or maybe an eyeï¼Œ æ˜¾ç„¶å·¦ä¸Šè±¡é™å…·æœ‰è¿™ä¸ªç‰¹å¾.</p>
<p>æœ€å¤§åŒ–æ“ä½œçš„åŠŸèƒ½å°±æ˜¯åªè¦åœ¨ä»»ä½•ä¸€ä¸ªè±¡é™å†…æå–åˆ°æŸä¸ªç‰¹å¾ï¼Œå®ƒå°±ä¼šä¿ç•™åœ¨æœ€å¤§æ± åŒ–çš„è¾“å‡ºé‡Œ. æœ€å¤§åŒ–æ“ä½œçš„å®é™…ä½œç”¨å°±æ˜¯ï¼šå¦‚æœåœ¨ <strong>Filter</strong> ä¸­æå–åˆ°æŸä¸ªç‰¹å¾ é‚£ä¹ˆä¿ç•™å…¶æœ€å¤§å€¼. å¦‚æœæ²¡æœ‰æå–åˆ°è¿™ä¸ªç‰¹å¾ï¼Œæ¯”å¦‚è¯´ å³ä¸Šè±¡é™ ä¸­ï¼Œé‚£ä¹ˆå…¶æœ€å¤§å€¼ä¹Ÿè¿˜æ˜¯å¾ˆå°. </p>
<blockquote>
<p><code>Max Pooling</code> çš„è¶…çº§å‚æ•° $f=2 / 3$ï¼Œ$s=2$ æ˜¯æœ€å¸¸ç”¨çš„ï¼Œæ•ˆæœç›¸å½“äºé«˜åº¦å’Œå®½åº¦ç¼©å‡ä¸€åŠ. <code>Max Pooling</code> å¾ˆå°‘ç”¨ paddingï¼Œ by far, is $p = 0$ï¼ŒAverage Pooling è¿™ä¸ªç”¨çš„ä¸å¤šï¼Œè¿™ä¸ªä¹Ÿä¼šåŠ å…¥æ›´å¤šçš„è®¡ç®—é‡.</p>
</blockquote>
<h2 id="10-A-CNN-Example"><a href="#10-A-CNN-Example" class="headerlink" title="10. A CNN Example"></a>10. A CNN Example</h2><p>åœ¨ Andrew Ng çš„è¯¾ä»¶ä¸­å°† Conv layer å’Œ Pooling layer åˆå¹¶åœ¨ä¸€èµ·è§†ä¸ºä¸€å±‚ï¼Œå› ä¸ºæ± åŒ–å±‚æ²¡æœ‰å‚æ•° (å› ä¸ºæ± åŒ–å±‚çš„è¿‡æ»¤å™¨ æ— å‚æ•°ï¼Œæœ‰è¶…å‚æ•°ï¼Œè€Œä¸”å…¶å¤§å°å¯ä»¥äº‹å…ˆç¡®å®šå¥½)ã€‚ ä½†æ˜¯åœ¨å…¶ä»–æ–‡çŒ®ä¸­æœ‰å¯èƒ½ä¼šæŠŠæ± åŒ–å±‚ç®—æˆå•ç‹¬çš„å±‚ï¼Œæ‰€ä»¥è§†æƒ…å†µè€Œå®šã€‚</p>
<p><img src="/images/deeplearning/C4W1-14_1.png" width="750"></p>
<p><img src="/images/deeplearning/C4W1-15.jpg" width="750"></p>
<blockquote>
<p>æ± åŒ–å±‚å‚æ•°ä¸ªæ•°ä¸º 0ï¼Œå·ç§¯å±‚å‚æ•°ä¸ªæ•°ä¸€èˆ¬å¤šï¼Œ<strong>fully connected layer</strong> å…¨è¿æ¥å±‚ å‚æ•°å¾ˆå¤š.</p>
</blockquote>
<h2 id="11-Why-Convolutions"><a href="#11-Why-Convolutions" class="headerlink" title="11. Why Convolutions ?"></a>11. Why Convolutions ?</h2><p><img src="/images/deeplearning/C4W1-16_1.png" width="750"></p>
<p>å·ç§¯ ç›¸æ¯”äº FCå…¨è¿æ¥ çš„å¥½å¤„æœ€ç›´è§‚çš„å°±æ˜¯ä½¿ç”¨çš„å‚æ•°æ›´å°‘ï¼Œ<strong>å‚æ•°å…±äº«</strong> å’Œ <strong>ç¨€ç–è¿æ¥</strong>ï¼š</p>
<h3 id="11-1-Parameter-sharing"><a href="#11-1-Parameter-sharing" class="headerlink" title="11.1 Parameter sharing"></a>11.1 Parameter sharing</h3><p>ç‰¹å¾æ£€æµ‹å¦‚å‚ç›´è¾¹ç¼˜æ£€æµ‹å¦‚æœé€‚ç”¨äºå›¾ç‰‡çš„æŸä¸ªåŒºåŸŸï¼Œé‚£ä¹ˆå®ƒä¹Ÿå¯èƒ½é€‚ç”¨äºå›¾ç‰‡çš„å…¶ä»–åŒºåŸŸï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ ç”¨ä¸€ä¸ª $3 * 3$ çš„ Filter æ£€æµ‹å‚ç›´è¾¹ç¼˜. é‚£ä¹ˆå›¾ç‰‡çš„å·¦ä¸Šè§’åŒºåŸŸä»¥åŠæ—è¾¹çš„å„ä¸ªåŒºåŸŸéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ª $3 * 3$ çš„è¿‡æ»¤å™¨. æ¯ä¸ªç‰¹å¾æ£€æµ‹å™¨ä»¥åŠè¾“å‡ºéƒ½å¯ä»¥åœ¨è¾“å…¥å›¾ç‰‡çš„ä¸åŒåŒºåŸŸä¸­ä½¿ç”¨åŒæ ·çš„å‚æ•°ï¼Œä»¥ä¾¿æå–å‚ç›´è¾¹ç¼˜æˆ–å…¶ä»–ç‰¹å¾ï¼Œå®ƒä¸ä»…é€‚ç”¨äºè¾¹ç¼˜ç‰¹å¾è¿™æ ·çš„ä½é˜¶ç‰¹å¾ï¼ŒåŒæ ·é€‚ç”¨äºé«˜é˜¶ç‰¹å¾. ä¾‹å¦‚ï¼šæå–è„¸ä¸Šçš„çœ¼ç› ç­‰æˆ–è€…å…¶ä»–å¯¹è±¡. è¿™ç§æ˜¯æ•´å¼ å›¾ç‰‡å…±äº«ç‰¹å¾æ£€æµ‹å™¨ æå–æ•ˆæœä¹Ÿå¾ˆå¥½</p>
<p><img src="/images/deeplearning/C4W1-17_1.png" width="750"></p>
<h3 id="11-2-Sparsity-of-Connections"><a href="#11-2-Sparsity-of-Connections" class="headerlink" title="11.2 Sparsity of Connections"></a>11.2 Sparsity of Connections</h3><p>å³è¾¹å›¾ çš„è¾¹ç¼˜ï¼Œä»…ä¸ 36 ä¸ªè¾“å…¥ç‰¹å¾ä¸­çš„ 9 ä¸ªç›¸è¿æ¥, è€Œä¸”å…¶ä»–åƒç´ å€¼éƒ½ä¸ä¼šå¯¹è¾“å‡ºäº§ç”Ÿä»»ä½•å½±å“, è¿™å°±æ˜¯ç¨€ç–è¿æ¥çš„æ¦‚å¿µ. æŸä¸ªè¾“å‡ºç‚¹ï¼Œçœ‹ä¸Šå»åªæœ‰è¿™ 9 ä¸ªè¾“å…¥ç‰¹å¾ä¸è¾“å‡ºç›¸è¿æ¥. å…¶ä»–åƒç´ å¯¹è¾“å‡ºæ²¡æœ‰ä»»ä½•å½±å“. ç¥ç»ç½‘ç»œå¯ä»¥é€šè¿‡è¿™ä¸¤ç§æœºåˆ¶å‡å°‘å‚æ•°. ä»¥ä¾¿äºæˆ‘ä»¬ç”¨æ›´å°çš„è®­ç»ƒé›†è®­ç»ƒå®ƒï¼Œä»è€Œé¢„é˜²è¿‡åº¦æ‹Ÿåˆ. (å·ç§¯æœ‰ä¸€ä¸ªå¹³ç§»ä¸å˜å±æ€§)</p>
<p>ç»¼ä¸Šè¿™äº›å°±æ˜¯å·ç§¯ç¥ç»ç½‘ç»œ CNN è¡¨ç°è‰¯å¥½çš„åŸå› .</p>
<p><img src="/images/deeplearning/C4W1-18_1.png" width="750"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/31657315" target="_blank" rel="external">CNNå…¥é—¨è®²è§£ï¼šå·ç§¯å±‚æ˜¯å¦‚ä½•æå–ç‰¹å¾çš„ï¼Ÿ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sequence Models (week3) - Attention mechanism]]></title>
      <url>http://shopee.ai/2018/08/14/deeplearning/Sequence-Models-week3/</url>
      <content type="html"><![CDATA[<p>èƒ½å¤Ÿå°†åºåˆ—æ¨¡å‹åº”ç”¨åˆ°è‡ªç„¶è¯­è¨€é—®é¢˜ã€éŸ³é¢‘åº”ç”¨ ç­‰ï¼ŒåŒ…æ‹¬æ–‡å­—åˆæˆã€è¯­éŸ³è¯†åˆ«å’ŒéŸ³ä¹åˆæˆã€‚</p>
<a id="more"></a>
<h2 id="1-Basic-models"><a href="#1-Basic-models" class="headerlink" title="1. Basic models"></a>1. Basic models</h2><p>å‡è®¾éœ€è¦ç¿»è¯‘ä¸‹é¢è¿™å¥è¯</p>
<blockquote>
<p>â€œç®€å°†è¦åœ¨ 9 æœˆè®¿é—®ä¸­å›½â€</p>
</blockquote>
<p>æˆ‘ä»¬å¸Œæœ›å¾—åˆ°çš„ç»“æœæ˜¯</p>
<blockquote>
<p>â€œ<strong>Jane is visiting China in September</strong>â€</p>
</blockquote>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­è¾“å…¥çš„æ•°é‡æ˜¯ 10 ä¸ªä¸­æ–‡æ±‰å­—ï¼Œè¾“å‡ºä¸º 6 ä¸ªå•è¯ï¼Œ $T_x$ ä¸ $T_y$ æ•°é‡ä¸ä¸€è‡´ï¼Œå°±éœ€è¦ç”¨åˆ° Sequence to sequence model <strong>RNN</strong></p>
<p><img src="/images/deeplearning/C5W3-1.jpg" width="750"></p>
<p>ç±»ä¼¼çš„ä¾‹å­è¿˜æœ‰ç”¨æœºå™¨ä¸ºä¸‹é¢è¿™å¼ å›¾ç‰‡ç”Ÿæˆæè¿°</p>
<p><img src="/images/deeplearning/C5W3-2.png" width="600"></p>
<p>åªéœ€è¦å°† encoder éƒ¨åˆ†ç”¨ä¸€ä¸ª CNNæ¨¡å‹ æ›¿æ¢å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ AlexNetï¼Œå°±å¯ä»¥å¾—åˆ°â€œä¸€åªï¼ˆå¯çˆ±çš„ï¼‰çŒ«èººåœ¨æ¥¼æ¢¯ä¸Šâ€</p>
<h2 id="2-Picking-the-most-likely-sentence"><a href="#2-Picking-the-most-likely-sentence" class="headerlink" title="2. Picking the most likely sentence"></a>2. Picking the most likely sentence</h2><p>ä¸‹é¢å°†ä¹‹å‰å­¦ä¹ çš„è¯­è¨€æ¨¡å‹å’Œæœºå™¨ç¿»è¯‘æ¨¡å‹åšä¸€ä¸ªå¯¹æ¯”, P ä¸ºæ¦‚ç‡</p>
<p>è¯­è¨€æ¨¡å‹:</p>
<p><img src="/images/deeplearning/C5W3-3.png" width="700"></p>
<p>æœºå™¨ç¿»è¯‘æ¨¡å‹:</p>
<p><img src="/images/deeplearning/C5W3-4.png" width="750"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæœºå™¨ç¿»è¯‘æ¨¡å‹çš„ååŠéƒ¨åˆ†å…¶å®å°±æ˜¯è¯­è¨€æ¨¡å‹ï¼ŒAndrew å°†å…¶ç§°ä¹‹ä¸º â€œ<strong>æ¡ä»¶è¯­è¨€æ¨¡å‹</strong>â€ï¼Œåœ¨è¯­è¨€æ¨¡å‹ä¹‹å‰æœ‰ä¸€ ä¸ªæ¡ä»¶ä¹Ÿå°±æ˜¯è¢«ç¿»è¯‘çš„å¥å­:</p>
<p>$$<br>P(y^{<1>},â€¦,y^{&lt;{T_y}&gt;}|x^{<1>},â€¦,x^{&lt;{T_x}&gt;})<br>$$</1></1></p>
<blockquote>
<p>ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ç¿»è¯‘æ˜¯æœ‰å¾ˆå¤šç§æ–¹å¼çš„ï¼ŒåŒä¸€å¥è¯å¯ä»¥ç¿»è¯‘æˆå¾ˆå¤šä¸åŒçš„å¥å­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­å“ªä¸€ä¸ªå¥å­æ˜¯æœ€å¥½çš„å‘¢ï¼Ÿ</p>
<p>è¿˜æ˜¯ç¿»è¯‘ä¸Šé¢é‚£å¥è¯ï¼Œæœ‰å¦‚ä¸‹å‡ ç§ç¿»è¯‘ç»“æœï¼š</p>
<ul>
<li>â€œJane is visiting China in September.â€</li>
<li>â€œJane is going to visit China in September.â€</li>
<li>â€œIn September, Jane will visit Chinaâ€</li>
<li>â€œJaneâ€™s Chinese friend welcomed her in September.â€</li>
<li>â€¦.</li>
</ul>
<p>ä¸è¯­è¨€æ¨¡å‹ä¸åŒçš„æ˜¯ï¼Œæœºå™¨æ¨¡å‹åœ¨è¾“å‡ºéƒ¨åˆ†ä¸å†ä½¿ç”¨ <strong>softmax</strong> éšæœºåˆ†å¸ƒçš„å½¢å¼è¿›è¡Œå–æ ·ï¼Œå› ä¸ºå¾ˆå®¹æ˜“å¾—åˆ°ä¸€ä¸ªä¸å‡†ç¡®çš„ç¿»è¯‘ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä½¿ç”¨ <code>Beam Search</code> åšæœ€ä¼˜åŒ–çš„é€‰æ‹©ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨åä¸‹ä¸€å°èŠ‚ä»‹ç»ï¼Œåœ¨æ­¤ä¹‹å‰å…ˆä»‹ç»ä¸€ä¸‹<strong>è´ªå©ªæœç´¢(Greedy Search)</strong>åŠå…¶å¼Šç«¯ï¼Œè¿™æ ·æ‰èƒ½æ›´å¥½åœ°äº†è§£ <code>Beam Search</code> çš„ä¼˜ç‚¹ã€‚</p>
</blockquote>
<h3 id="2-1-Greedy-Search"><a href="#2-1-Greedy-Search" class="headerlink" title="2.1 Greedy Search"></a>2.1 Greedy Search</h3><p>å¾—åˆ°æœ€å¥½çš„ç¿»è¯‘ç»“æœï¼Œè½¬æ¢æˆæ•°å­¦å…¬å¼å°±æ˜¯:</p>
<p>$$<br>argmax P(y^{<1>},â€¦,y^{&lt;{T_y}&gt;}|x^{<1>},â€¦,x^{&lt;{T_x}&gt;})<br>$$</1></1></p>
<p>é‚£ä¹ˆ Greedy Search æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>é€šä¿—è§£é‡Šå°±æ˜¯æ¯æ¬¡è¾“å‡ºçš„é‚£ä¸ªéƒ½å¿…é¡»æ˜¯æœ€å¥½çš„ã€‚è¿˜æ˜¯ä»¥ç¿»è¯‘é‚£å¥è¯ä¸ºä¾‹ã€‚</p>
<p>ç°åœ¨å‡è®¾é€šè¿‡è´ªå©ªæœç´¢å·²ç»ç¡®å®šæœ€å¥½çš„ç¿»è¯‘çš„å‰ä¸¤ä¸ªå•è¯æ˜¯ï¼šâ€Jane is â€œ</p>
<p>ç„¶åå› ä¸º â€œgoingâ€ è¿™ä¸ªå•è¯å‡ºç°é¢‘ç‡è¾ƒé«˜å’Œå…¶å®ƒåŸå› ï¼Œæ‰€ä»¥æ ¹æ®è´ªå©ªç®—æ³•å¾—å‡ºæ­¤æ—¶ç¬¬ä¸‰ä¸ªå•è¯çš„æœ€å¥½ç»“æœæ˜¯ â€œgoingâ€ã€‚</p>
<p>æ‰€ä»¥æ®è´ªå©ªç®—æ³•æœ€åçš„ç¿»è¯‘ç»“æœå¯èƒ½æ˜¯ä¸‹å›¾ä¸­çš„ç¬¬äºŒä¸ªå¥å­ï¼Œä½†ç¬¬ä¸€å¥å¯èƒ½ä¼šæ›´å¥½(ä¸æœæ°”çš„è¯ï¼Œæˆ‘ä»¬å°±å‡è®¾ç¬¬ä¸€å¥æ›´å¥½).</p>
<p><img src="/images/deeplearning/C5W3-5.png" width="700"></p>
<p>æ‰€ä»¥è´ªå©ªæœç´¢çš„ç¼ºç‚¹æ˜¯å±€éƒ¨æœ€ä¼˜å¹¶ä¸ä»£è¡¨å…¨å±€æœ€ä¼˜ï¼Œå°±å¥½åƒäº”é»‘ï¼Œä¸€é˜Ÿéƒ½æ˜¯å¾ˆç‰›é€¼çš„ï¼Œä½†æ˜¯å„ä¸ªéƒ½å¤ªä¼˜ç§€ï¼Œå°±æ˜¾å¾—æ²¡é‚£ä¹ˆä¼˜ç§€äº†ï¼Œè€Œå¦ä¸€é˜Ÿè™½ç„¶è¯´ä¸æ˜¯æ¯ä¸ªéƒ½æ˜¯æœ€ä¼˜ç§€ï¼Œä½†æ˜¯å‡‘åœ¨ä¸€èµ·å°±æ˜¯èƒ½ carry å…¨åœºã€‚</p>
<p>æ›´å½¢è±¡çš„ç†è§£å¯èƒ½å°±æ˜¯ <code>Greedy Search</code> æ›´åŠ çŸ­è§†ï¼Œçœ‹çš„ä¸é•¿è¿œï¼Œè€Œä¸”ä¹Ÿæ›´åŠ è€—æ—¶ã€‚å‡è®¾å­—å…¸ä¸­å…±æœ‰ 10000 ä¸ªå•è¯ï¼Œå¦‚æœä½¿ç”¨ <code>Greedy Search</code>ï¼Œé‚£ä¹ˆå¯èƒ½çš„ç»„åˆæœ‰ 1000010 ç§ï¼Œæ‰€ä»¥è¿˜æ˜¯æŒºææ€–çš„ 2333~~</p>
<h2 id="3-Beam-Search"><a href="#3-Beam-Search" class="headerlink" title="3. Beam Search"></a>3. Beam Search</h2><p><strong>Beam Search</strong> æ˜¯ greedy search çš„åŠ å¼ºç‰ˆæœ¬ï¼Œé¦–å…ˆè¦é¢„è®¾ä¸€ä¸ªå€¼ beam widthï¼Œè¿™é‡Œç­‰äº <code>3</code> (å¦‚æœç­‰äº <strong>1</strong> å°±æ˜¯ <strong>greedy search</strong>)ã€‚ç„¶ååœ¨æ¯ä¸€æ­¥ä¿å­˜æœ€ä½³çš„ 3 ä¸ªç»“æœè¿›è¡Œä¸‹ä¸€æ­¥çš„é€‰æ‹©ï¼Œä»¥æ­¤ç›´åˆ°é‡åˆ°å¥å­çš„ç»ˆç»“ç¬¦.</p>
<h3 id="3-1-æ­¥éª¤ä¸€"><a href="#3-1-æ­¥éª¤ä¸€" class="headerlink" title="3.1 æ­¥éª¤ä¸€"></a>3.1 æ­¥éª¤ä¸€</h3><p>å¦‚ä¸‹å›¾ç¤ºï¼Œå› ä¸ºbeam width=3ï¼Œæ‰€ä»¥æ ¹æ®è¾“å…¥çš„éœ€è¦ç¿»è¯‘çš„å¥å­é€‰å‡º 3 ä¸ª $y^{<1>}$æœ€å¯èƒ½çš„è¾“å‡ºå€¼ï¼Œå³é€‰å‡º$P(y^{<1>}|x)$æœ€å¤§çš„å‰3ä¸ªå€¼ã€‚å‡è®¾åˆ†åˆ«æ˜¯â€inâ€,â€janeâ€,â€septemberâ€</1></1></p>
<p><img src="/images/deeplearning/C5W3-6_1.png" width="700"></p>
<h3 id="3-2-æ­¥éª¤äºŒ"><a href="#3-2-æ­¥éª¤äºŒ" class="headerlink" title="3.2 æ­¥éª¤äºŒ"></a>3.2 æ­¥éª¤äºŒ</h3><p>ä»¥â€<strong>in</strong>â€œä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼Œå…¶ä»–åŒç†.</p>
<p>å¦‚ä¸‹å›¾ç¤ºï¼Œåœ¨ç»™å®šè¢«ç¿»è¯‘å¥å­ $x$ å’Œç¡®å®š $y^{<1>}$ = â€œ<strong>in</strong>â€œ çš„æ¡ä»¶ä¸‹ï¼Œä¸‹ä¸€ä¸ªè¾“å‡ºå€¼çš„æ¡ä»¶æ¦‚ç‡æ˜¯ $P(y^{<2>}|x,â€inâ€)$ã€‚æ­¤æ—¶éœ€è¦ä» 10000 ç§å¯èƒ½ä¸­æ‰¾å‡ºæ¡ä»¶æ¦‚ç‡æœ€é«˜çš„å‰ 3 ä¸ª.</2></1></p>
<p>åˆç”±å…¬å¼ $P(y^{<1>},y^{<2>}|x)=P(y^{<1>}|x) P(y^{<2>}|x, y^{<1>})$, æˆ‘ä»¬æ­¤æ—¶å·²ç»å¾—åˆ°äº†ç»™å®šè¾“å…¥æ•°æ®ï¼Œå‰ä¸¤ä¸ªè¾“å‡ºå€¼çš„è¾“å‡ºæ¦‚ç‡æ¯”è¾ƒå¤§çš„ç»„åˆäº†.</1></2></1></2></1></p>
<p><img src="/images/deeplearning/C5W3-7_1.png" width="700"></p>
<p>å¦å¤– 2 ä¸ªå•è¯ä¹ŸåšåŒæ ·çš„è®¡ç®—</p>
<p><img src="/images/deeplearning/C5W3-8_1.png" width="700"></p>
<p>æ­¤æ—¶æˆ‘ä»¬å¾—åˆ°äº† 9 ç»„ $P(y^{<1>},y^{<2>}|x)$, æ­¤æ—¶æˆ‘ä»¬å†ä»è¿™ 9ç»„ ä¸­é€‰å‡ºæ¦‚ç‡å€¼æœ€é«˜çš„å‰ 3 ä¸ªã€‚å¦‚ä¸‹å›¾ç¤ºï¼Œå‡è®¾æ˜¯è¿™3ä¸ªï¼š</2></1></p>
<ul>
<li>â€œin septemberâ€</li>
<li>â€œjane isâ€</li>
<li>â€œjane visitsâ€</li>
</ul>
<p><img src="/images/deeplearning/C5W3-9_1.png" width="550"></p>
<h3 id="3-3-æ­¥éª¤ä¸‰"><a href="#3-3-æ­¥éª¤ä¸‰" class="headerlink" title="3.3 æ­¥éª¤ä¸‰"></a>3.3 æ­¥éª¤ä¸‰</h3><p>ç»§ç»­æ­¥éª¤2çš„è¿‡ç¨‹ï¼Œæ ¹æ® $P(y^{<3>}|x,y^{<1>},y^{<2>})$ é€‰å‡º $P(y^{<1>},y^{<2>},y^{<3>}|x)$ æœ€å¤§çš„å‰3ä¸ªç»„åˆ.</3></2></1></2></1></3></p>
<p>åé¢é‡å¤ä¸Šè¿°æ­¥éª¤å¾—å‡ºç»“æœ.</p>
<h3 id="3-4-æ€»ç»“"><a href="#3-4-æ€»ç»“" class="headerlink" title="3.4 æ€»ç»“"></a>3.4 æ€»ç»“</h3><p>æ€»ç»“ä¸€ä¸‹ä¸Šé¢çš„æ­¥éª¤å°±æ˜¯ï¼š</p>
<blockquote>
<ul>
<li><p>(1). ç»è¿‡ encoder ä»¥åï¼Œdecoder ç»™å‡ºæœ€æœ‰å¯èƒ½çš„ä¸‰ä¸ªå¼€å¤´è¯ä¾æ¬¡ä¸º â€œinâ€, â€œjaneâ€, â€œseptemberâ€<br>$$P(y^{<1>}|x)$$</1></p>
</li>
<li><p>(2). ç»è¿‡å°†ç¬¬ä¸€æ­¥å¾—åˆ°çš„å€¼è¾“å…¥åˆ°ç¬¬äºŒæ­¥ä¸­ï¼Œæœ€æœ‰å¯èƒ½çš„ä¸‰ä¸ªç¿»è¯‘ä¸º â€œin septemberâ€, â€œjane isâ€, â€œjane visitsâ€ </p>
</li>
</ul>
<p>$$P(y^{<2>}|x,y^{<1>})$$</1></2></p>
<p>(è¿™é‡Œï¼Œseptemberå¼€å¤´çš„å¥å­ç”±äºæ¦‚ç‡æ²¡æœ‰å…¶ä»–çš„å¯èƒ½æ€§å¤§ï¼Œå·²ç»å¤±å»äº†ä½œä¸ºå¼€å¤´è¯èµ„æ ¼)</p>
<ul>
<li>(3). ç»§ç»­è¿™ä¸ªè¿‡ç¨‹â€¦ </li>
</ul>
<p>$$P(y^{<3>}|x,y^{<1>},y^{<2>})$$</2></1></3></p>
</blockquote>
<p><img src="/images/deeplearning/C5W3-10_1.png" width="750"></p>
<h2 id="4-Refinements-to-beam-search"><a href="#4-Refinements-to-beam-search" class="headerlink" title="4. Refinements to beam search"></a>4. Refinements to beam search</h2><p>$$<br>P(y^{<1>},â€¦.,P(y^{T_y})|x)=P(y^{<1>}|x)P(y^{<2>}|x,y^{<1>})â€¦P(y^{&lt;{T_y}&gt;}|x,y^{<1>},â€¦y^{&lt;{T_y-1}&gt;})<br>$$</1></1></2></1></1></p>
<p>æ‰€ä»¥è¦æ»¡è¶³ $argmax P(y^{<1>},â€¦.,P(y^{T_y})|x)$, ä¹Ÿå°±ç­‰åŒäºè¦æ»¡è¶³</1></p>
<p>$$<br>argmax \prod_{t=1}^{T_y}P(y^{&lt;{t}&gt;}|x,y^{<1>},â€¦y^{&lt;{t-1}&gt;})<br>$$</1></p>
<p>ä½†æ˜¯ä¸Šé¢çš„å…¬å¼å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºæ¦‚ç‡éƒ½æ˜¯å°äº1çš„ï¼Œç´¯ä¹˜ä¹‹åä¼šè¶Šæ¥è¶Šå°ï¼Œå¯èƒ½å°åˆ°è®¡ç®—æœºæ— æ³•ç²¾ç¡®å­˜å‚¨ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶è½¬å˜æˆ log å½¢å¼ï¼ˆå› ä¸º log æ˜¯å•è°ƒé€’å¢çš„ï¼Œæ‰€ä»¥å¯¹æœ€ç»ˆç»“æœä¸ä¼šæœ‰å½±å“ï¼‰ï¼Œå…¶å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>$$<br>argmax \sum_{t=1}^{T_y}logP(y^{&lt;{t}&gt;}|x,y^{<1>},â€¦y^{&lt;{t-1}&gt;})<br>$$</1></p>
<blockquote>
<p>Butï¼ï¼ï¼ä¸Šè¿°å…¬å¼ä»ç„¶å­˜åœ¨bugï¼Œè§‚å¯Ÿå¯ä»¥çŸ¥é“ï¼Œæ¦‚ç‡å€¼éƒ½æ˜¯å°äº1çš„ï¼Œé‚£ä¹ˆlogä¹‹åéƒ½æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥ä¸ºäº†ä½¿å¾—æœ€åçš„å€¼æœ€å¤§ï¼Œé‚£ä¹ˆåªè¦ä¿è¯ç¿»è¯‘çš„å¥å­è¶ŠçŸ­ï¼Œé‚£ä¹ˆå€¼å°±è¶Šå¤§ï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨è¿™ä¸ªå…¬å¼ï¼Œé‚£ä¹ˆæœ€åç¿»è¯‘çš„å¥å­é€šå¸¸éƒ½æ˜¯æ¯”è¾ƒçŸ­çš„å¥å­ï¼Œè¿™æ˜¾ç„¶ä¸è¡Œã€‚</p>
</blockquote>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡å½’ä¸€åŒ–çš„æ–¹å¼æ¥çº æ­£ï¼Œå³ä¿è¯å¹³å‡åˆ°æ¯ä¸ªå•è¯éƒ½èƒ½å¾—åˆ°æœ€å¤§å€¼ã€‚å…¶å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>$$<br>argmax \frac{1}{T_y}\sum_{t=1}^{T_y}logP(y^{&lt;{t}&gt;}|x,y^{<1>},â€¦y^{&lt;{t-1}&gt;})<br>$$</1></p>
<p>é€šè¿‡å½’ä¸€åŒ–çš„ç¡®èƒ½å¾ˆå¥½çš„è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä½†æ˜¯åœ¨å®é™…è¿ç”¨ä¸­ï¼Œä¼šé¢å¤–æ·»åŠ ä¸€ä¸ªå‚æ•° $Î±$, å…¶å¤§å°ä»‹äº 0 å’Œ 1 ä¹‹é—´ï¼Œå…¬å¼å¦‚ä¸‹:</p>
<p>$$<br>argmax \frac{1}{T_y^Î±}\sum_{t=1}^{T_y}logP(y^{&lt;{t}&gt;}|x,y^{<1>},â€¦y^{&lt;{t-1}&gt;})<br>$$</1></p>
<p><img src="/images/deeplearning/C5W3-11_1.png" width="700"></p>
<blockquote>
<p>$T_y$ ä¸ºè¾“å‡ºå¥å­ä¸­å•è¯çš„ä¸ªæ•°ï¼Œ$Î±$ æ˜¯ä¸€ä¸ªè¶…å‚æ•° (å¯ä»¥è®¾ç½®ä¸º 0.7)</p>
<p>$Î±$ == 1. åˆ™ä»£è¡¨ å®Œå…¨ç”¨å¥å­é•¿åº¦å½’ä¸€åŒ–<br>$Î±$ == 0. åˆ™ä»£è¡¨ æ²¡æœ‰å½’ä¸€åŒ–<br>$Î±$ == 0~1. åˆ™ä»£è¡¨ åœ¨ å¥å­é•¿åº¦å½’ä¸€åŒ– ä¸ æ²¡æœ‰å½’ä¸€åŒ– ä¹‹é—´çš„æŠ˜ä¸­ç¨‹åº¦.</p>
<p>beam width = B = 3~<strong>10</strong>~100 æ˜¯ä¼šæœ‰ä¸€ä¸ªæ˜æ˜¾çš„å¢é•¿ï¼Œä½†æ˜¯ B ä» 1000 ~ 3000 æ˜¯å¹¶æ²¡æœ‰ä¸€ä¸ªæ˜æ˜¾å¢é•¿çš„.</p>
</blockquote>
<h2 id="5-Error-analysis-on-beam-search"><a href="#5-Error-analysis-on-beam-search" class="headerlink" title="5. Error analysis on beam search"></a>5. Error analysis on beam search</h2><p>ä»”ç»†æƒ³æƒ³ <strong>beam search</strong>ï¼Œæˆ‘ä»¬ä¼šå‘ç°å…¶å®å®ƒæ˜¯è¿‘ä¼¼æœç´¢ï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½ä½¿ç”¨è¿™ç§æ–¹æ³•æœ€ç»ˆå¾—åˆ°çš„ç»“æœå¹¶ä¸æ˜¯æœ€å¥½çš„ã€‚å½“ç„¶ä¹Ÿæœ‰å¯èƒ½æ˜¯å› ä¸ºä½¿ç”¨çš„ <strong>RNN</strong> æ¨¡å‹æœ‰ç¼ºé™·å¯¼è‡´ç»“æœä¸æ˜¯æœ€å¥½çš„ã€‚</p>
<p><strong>æ‰€ä»¥æˆ‘ä»¬å¦‚ä½•åˆ¤æ–­è¯¯å·®æ˜¯å‡ºåœ¨å“ªä¸ªåœ°æ–¹å‘¢ï¼Ÿ</strong></p>
<blockquote>
<p>è¿˜æ˜¯ä»¥ç¿»è¯‘è¿™å¥è¯ä¸ºä¾‹ï¼šâ€œ<strong>ç®€åœ¨9æœˆè®¿é—®ä¸­å›½</strong>â€ã€‚</p>
<ul>
<li>å‡è®¾æŒ‰ç…§äººç±»çš„ä¹ æƒ¯ç¿»è¯‘æˆè‹±æ–‡æ˜¯â€œJane visits China in September.â€,è¯¥ç»“æœç”¨ $y^*$ è¡¨ç¤ºã€‚</li>
<li>å‡è®¾é€šè¿‡ç®—æ³•å¾—å‡ºçš„ç¿»è¯‘ç»“æœæ˜¯ï¼šâ€œJane visited China in September.â€,è¯¥ç»“æœç”¨ $\hat{y}$ è¡¨ç¤ºã€‚</li>
</ul>
<p>è¦åˆ¤æ–­è¯¯å·®å‡ºåœ¨å“ªï¼Œåªéœ€è¦æ¯”è¾ƒ $P(y^*|x)$ å’Œ $P(\hat{y}|x)$ çš„å¤§å°å³å¯.</p>
</blockquote>
<p>ä¸‹é¢åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š</p>
<p><img src="/images/deeplearning/C5W3-12_1.png" width="750"></p>
<blockquote>
<p>RNN å®é™…ä¸Šæ˜¯ encode å’Œ decode çš„è¿‡ç¨‹.</p>
</blockquote>
<p>ä¸¤ç§æƒ…å†µï¼š</p>
<p>(1). $<br>P(y^*|x)&gt;P(\hat{y}|x)<br>$</p>
<p>ä¸Šé¢çš„ä¸ç­‰å¼çš„å«ä¹‰æ˜¯ beam search æœ€åé€‰å‡ºçš„ç»“æœä¸å¦‚äººç±»ï¼Œä¹Ÿå°±æ˜¯ beam search å¹¶æ²¡æœ‰é€‰å‡ºæœ€å¥½çš„ç»“æœï¼Œæ‰€ä»¥é—®é¢˜å‡ºåœ¨ beam search</p>
<p>(2). $<br>P(y^*|x)â‰¤P(\hat{y}|x)<br>$</p>
<p>ä¸Šé¢ä¸ç­‰å¼è¡¨ç¤º beam search æœ€åé€‰å‡ºçš„ç»“æœè¦æ¯”äººç±»çš„æ›´å¥½ï¼Œä¹Ÿå°±æ˜¯è¯´ beam search å·²ç»é€‰å‡ºäº†æœ€å¥½çš„ç»“æœï¼Œä½†æ˜¯æ¨¡å‹å¯¹å„ä¸ªç»„åˆçš„é¢„æµ‹æ¦‚ç‡å€¼å¹¶ä¸ç¬¦åˆäººç±»çš„é¢„æœŸï¼Œæ‰€ä»¥ RNNæ¨¡å‹ at fault.</p>
<blockquote>
<p>ä¸Šé¢å·²ç»ä»‹ç»äº†è¯¯å·®åˆ†æçš„æ–¹å¼ï¼Œä½†æ—¶ä»…å‡­ä¸€æ¬¡è¯¯å·®åˆ†æå°±åˆ¤å®šè°è¯¥èƒŒé”…è‚¯å®šä¹Ÿä¸è¡Œï¼Œæ‰€ä»¥è¿˜éœ€è¦è¿›è¡Œå¤šæ¬¡è¯¯å·®åˆ†æå¤šæ¬¡ã€‚</p>
<p>å¦‚ä¸‹å›¾ç¤ºå·²ç»è¿›è¡Œäº†å¤šæ¬¡çš„è¯¯å·®åˆ†æï¼Œæ¯æ¬¡åˆ†æä¹‹åéƒ½åˆ¤å®šäº†é”…è¯¥è°èƒŒï¼Œæœ€åè®¡ç®—å‡ºbeam searchå’Œæ¨¡å‹èƒŒé”…çš„æ¯”ä¾‹ï¼Œæ ¹æ®æ¯”ä¾‹ä½œå‡ºç›¸åº”çš„è°ƒæ•´ã€‚</p>
<p>ä¾‹å¦‚:</p>
<ul>
<li>å¦‚æœ beam search æ›´é«˜ï¼Œå¯ä»¥ç›¸åº”è°ƒæ•´ beam width.</li>
<li>å¦‚æœæ¨¡å‹èƒŒé”…æ¯”ä¾‹æ›´é«˜ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘å¢åŠ æ­£åˆ™åŒ–ï¼Œå¢åŠ æ•°æ®ç­‰æ“ä½œ.</li>
</ul>
</blockquote>
<p><img src="/images/deeplearning/C5W3-13_1.png" width="750"></p>
<h2 id="6-Bleu-score-optional"><a href="#6-Bleu-score-optional" class="headerlink" title="6. Bleu score (optional)"></a>6. Bleu score (optional)</h2><p>ä¸»è¦ä»‹ç»äº†å¦‚ä½•ç»™æœºå™¨ç¿»è¯‘ç»“æœæ‰“åˆ†ï¼Œå› ä¸ºæ˜¯é€‰ä¿®å†…å®¹, æ‰€ä»¥ balabalaâ€¦</p>
<h2 id="7-Attention-model-intuition"><a href="#7-Attention-model-intuition" class="headerlink" title="7. Attention model intuition"></a>7. Attention model intuition</h2><p>ä¹‹å‰ä»‹ç»çš„ RNN ç¿»è¯‘æ¨¡å‹å­˜åœ¨ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„é—®é¢˜å°±æ˜¯:</p>
<blockquote>
<p>æœºå™¨ç¿»è¯‘çš„ç¿»è¯‘è¿‡ç¨‹æ˜¯é¦–å…ˆå°†æ‰€æœ‰éœ€è¦ç¿»è¯‘çš„å¥å­è¾“å…¥åˆ° <strong>Encoder</strong> ä¸­ï¼Œä¹‹åå†é€šè¿‡ <strong>Decoder</strong> è¾“å‡ºç¿»è¯‘è¯­å¥.</p>
</blockquote>
<h3 id="7-1-Why-Attention-model"><a href="#7-1-Why-Attention-model" class="headerlink" title="7.1 Why Attention model"></a>7.1 Why Attention model</h3><p>å¦‚ä¸‹å›¾ç¤ºæœºå™¨ç®—æ³•å°†æ³•è¯­ç¿»è¯‘æˆè‹±è¯­çš„æ¨¡å‹.</p>
<p><img src="/images/deeplearning/C5W3-14_1.png" width="750"></p>
<p>æœºå™¨ç¿»è¯‘ä¸äººç±»çš„ç¿»è¯‘è¿‡ç¨‹ä¸å¤ªç›¸åŒã€‚å› ä¸ºäººç±»ç¿»è¯‘ä¸€èˆ¬æ˜¯é€å¥ç¿»è¯‘ï¼Œæˆ–è€…æ˜¯è®²ä¸€æ®µå¾ˆé•¿çš„å¥å­åˆ†è§£å¼€æ¥è¿›è¡Œç¿»è¯‘ã€‚</p>
<p>æ‰€ä»¥ä¸Šè¿°æ¨¡å‹çš„ç¿»è¯‘ç»“æœçš„ Bleuè¯„åˆ† ä¸è¢«ç¿»è¯‘å¥å­çš„é•¿çŸ­æœ‰å¾ˆå¤§å…³ç³»ï¼Œå¥å­è¾ƒçŸ­æ—¶ï¼Œæ¨¡å‹å¯èƒ½æ— æ³•æ•æ‰åˆ°å…³é”®ä¿¡æ¯ï¼Œæ‰€ä»¥ç¿»è¯‘ç»“æœä¸æ˜¯å¾ˆé«˜ï¼›ä½†æ˜¯å½“å¥å­è¿‡é•¿æ—¶ï¼Œæ¨¡å‹åˆæŠ“ä¸åˆ°é‡ç‚¹ç­‰åŸå› ä½¿å¾—ç»“æœä¹Ÿä¸æ˜¯å¾ˆé«˜ã€‚</p>
<p><img src="/images/deeplearning/C5W3-15_1.png" width="750"></p>
<blockquote>
<p>â€‹è§ä¸Šå›¾ï¼Œå¦‚æœæœºå™¨èƒ½åƒäººä¸€æ ·é€å¥æˆ–è€…æ¯æ¬¡å°†æ³¨æ„åŠ›åªé›†ä¸­åœ¨ä¸€å°éƒ¨åˆ†è¿›è¡Œç¿»è¯‘ï¼Œé‚£ä¹ˆç¿»è¯‘ç»“æœå°†ä¸å—å¥å­é•¿åº¦çš„å½±å“ã€‚ä¸‹å›¾ä¸­çš„ç»¿è‰²çº¿å³ä¸ºä½¿ç”¨äº†æ³¨æ„åŠ›æ¨¡å‹åçš„ç¿»è¯‘å¥å­å¾—åˆ†ã€‚</p>
</blockquote>
<h3 id="7-2-Attention-model-intro"><a href="#7-2-Attention-model-intro" class="headerlink" title="7.2 Attention model intro"></a>7.2 Attention model intro</h3><p>ä¸‹å›¾å±•ç¤ºäº†æ™®é€šçš„ç¿»è¯‘æ¨¡å‹åŒå‘ RNN ç»“æ„ï¼Œè¯¥ç»“æ„å¯æ ¹æ®è¾“å…¥ $x^{&lt;{t}&gt;}$ ç›´æ¥å¾—åˆ°è¾“å‡º $y^{&lt;{t}&gt;}$.</p>
<p><img src="/images/deeplearning/C5W3-16_1.png" width="750"></p>
<p>Attention model åœ¨æ­¤åŸºç¡€ä¸Šåšè¿›ä¸€æ­¥å¤„ç†ã€‚</p>
<p>ä¸ºé¿å…è¯¯è§£ï¼Œä½¿ç”¨å¦ä¸€ä¸ªç¬¦å· $s$ æ¥è¡¨ç¤ºèŠ‚ç‚¹ã€‚</p>
<p>å¦‚ä¸‹å›¾ç¤ºï¼Œæ ¹æ®ä¸‹é¢ä¸€å±‚çš„ åŒå‘RNN è®¡ç®—ç»“æœå¯å¾—åˆ°èŠ‚ç‚¹ $s^{<1>}$ ä¸å…¶ä»–èŠ‚ç‚¹æƒé‡ $Î±^{<1,1>},Î±^{<1,2>},â€¦$ é€šè¿‡è¿™äº›æƒé‡å¯ä»¥çŸ¥é“è¯¥èŠ‚ç‚¹ä¸å…¶ä»–èŠ‚ç‚¹çš„ç›¸å…³è”ç¨‹åº¦ï¼Œä»è€Œå¯ä»¥è¾¾åˆ°å°†æ³¨æ„åŠ›é›†ä¸­åˆ°éƒ¨åˆ†åŒºåŸŸçš„æ•ˆæœã€‚</1,2></1,1></1></p>
<p><img src="/images/deeplearning/C5W3-17_1.png" width="750"></p>
<p>â€‹å…¶ä»–èŠ‚ç‚¹åŒç†ã€‚æ•´ä¸ªæ³¨æ„åŠ›æ¨¡å‹ç»“æ„å¦‚ä¸‹å›¾ç¤º</p>
<p><img src="/images/deeplearning/C5W3-18_1.png" width="750"></p>
<h2 id="8-Attention-model"><a href="#8-Attention-model" class="headerlink" title="8. Attention model"></a>8. Attention model</h2><p>ç‰¹åˆ«è¦åŒºåˆ† $a$ (å­—æ¯a) å’Œ $Î±$ (alpha)ã€‚å‰è€…è¡¨ç¤ºç‰¹å¾èŠ‚ç‚¹ï¼Œåè€…è¡¨ç¤ºæ³¨æ„åŠ›æƒé‡ã€‚</p>
<h3 id="8-1-å‚æ•°ä»‹ç»"><a href="#8-1-å‚æ•°ä»‹ç»" class="headerlink" title="8.1 å‚æ•°ä»‹ç»"></a>8.1 å‚æ•°ä»‹ç»</h3><p>å¦‚ä¸‹å›¾ç¤ºï¼Œæ³¨æ„åŠ›æ¨¡å‹é‡‡ç”¨åŒå‘ RNN ç»“æ„ï¼Œæ‰€ä»¥æ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ä¸ªå€¼ï¼Œç”¨ $\overrightarrow{a}^{&lt;{tâ€™}&gt;},\overleftarrow{a}^{&lt;{tâ€™}&gt;}$ è¡¨ç¤ºï¼Œä¸ºäº†ä½¿å…¬å¼æ›´ç®€åŒ–ï¼Œä»¤ $a^{&lt;{tâ€™}&gt;}=(\overrightarrow{a}^{&lt;{tâ€™}&gt;},\overleftarrow{a}^{&lt;{tâ€™}&gt;})$ ã€‚å…¶ä¸­ $tâ€™$ è¡¨ç¤ºè¾“å…¥æ•°æ®çš„ç´¢å¼•ã€‚</p>
<p><img src="/images/deeplearning/C5W3-19_1.png" width="750"></p>
<p>ä¸Šä¸€èŠ‚å·²ç»ä»‹ç»äº†æ³¨æ„åŠ›æƒé‡ $Î±^{&lt;{t,tâ€™}&gt;}$ï¼Œä»¥ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸ºä¾‹ï¼Œå®ƒçš„æƒé‡å€¼å¯ä»¥ç”¨ $Î±^{&lt;{1,tâ€™}&gt;}$ è¡¨ç¤ºï¼Œä¸”æ‰€æœ‰æƒé‡å€¼æ»¡è¶³ $\sum{Î±^{&lt;{1,tâ€™}&gt;}}=1$</p>
<p>æ‰€æœ‰æƒé‡ä¸å¯¹åº”èŠ‚ç‚¹çš„çº¿æ€§ä¹‹å’Œç”¨ $c^{&lt;{tâ€™}&gt;}$ è¡¨ç¤ºï¼ˆä¸ºæ–¹ä¾¿ä¹¦å†™ï¼Œç”¨ $c$ è¡¨ç¤ºï¼‰,$c$ è¡¨ç¤º contextï¼Œå³ä¸Šä¸‹æ–‡å˜é‡.</p>
<p>è¿˜æ˜¯ä»¥ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸ºä¾‹ï¼Œc çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>$$<br>c^{<1>}=\sum_{tâ€™}Î±^{&lt;{1,tâ€™}&gt;}a^{&lt;{tâ€™}&gt;}<br>$$</1></p>
<p><img src="/images/deeplearning/C5W3-20_1.png" width="750"></p>
<h3 id="8-2-æ³¨æ„åŠ›æƒå€¼è®¡ç®—å…¬å¼"><a href="#8-2-æ³¨æ„åŠ›æƒå€¼è®¡ç®—å…¬å¼" class="headerlink" title="8.2 æ³¨æ„åŠ›æƒå€¼è®¡ç®—å…¬å¼"></a>8.2 æ³¨æ„åŠ›æƒå€¼è®¡ç®—å…¬å¼</h3><p>$$<br>\alpha^{&lt;{t,tâ€™}&gt;}=\frac{exp(e^{&lt;{t,tâ€™}&gt;})}{\sum_{tâ€™â€™=1}^{T_x}{exp(e^{t,tâ€™â€™})}}<br>$$</p>
<p>ä¸Šé¢å…¬å¼ä¸­çš„ $e^{&lt;{t,tâ€™}&gt;}$ è®¡ç®—å›¾å¦‚ä¸‹ï¼š</p>
<p>å…¶ä¸­ $s^{&lt;{t-1}&gt;}$ è¡¨ç¤ºä¸Šä¸€ä¸ªçŠ¶æ€çš„å€¼, $a^{&lt;{tâ€™}&gt;}$ è¡¨ç¤ºç¬¬ $tâ€™$ ä¸ªç‰¹å¾èŠ‚ç‚¹.</p>
<p><img src="/images/deeplearning/C5W3-21_1.png" width="500"></p>
<blockquote>
<p><strong>Andrew Ng</strong> å¹¶æ²¡æœ‰è¯¦ç»†çš„ä»‹ç»ä¸Šé¢çš„ç½‘ç»œï¼Œåªæ˜¯ä¸€ç¬”å¸¦è¿‡ï¼Œè¯´åå‘ä¼ æ’­å’Œæ¢¯åº¦ä¸‹é™ä¼šè‡ªåŠ¨å­¦ä¹ ï¼Œemmmã€‚ã€‚é‚£å°±è¿™æ ·å§ã€‚</p>
<p>ç»“åˆä¸‹å›¾å¯ä»¥ç‹¬è‡ªå‚è€ƒä¸€ä¸‹ä¸Šé¢çš„å…¬å¼æ˜¯ä»€ä¹ˆæ„æ€.</p>
</blockquote>
<p><img src="/images/deeplearning/C5W3-22_1.png" width="600"></p>
<h3 id="8-3-å¤§æ•°æ®æ–‡æ‘˜"><a href="#8-3-å¤§æ•°æ®æ–‡æ‘˜" class="headerlink" title="8.3 å¤§æ•°æ®æ–‡æ‘˜"></a>8.3 å¤§æ•°æ®æ–‡æ‘˜</h3><p>ä¸‹é¢çš„ç¬”è®°æ˜¯ã€Šå¤§æ•°æ®æ–‡æ‘˜ã€‹çš„ç¬”è®°ï¼Œæ„Ÿè§‰ä»–å†™çš„æ¸…æ¥šä¸€äº›:</p>
<p>é€šè¿‡ä¹‹å‰çš„å­¦ä¹ å¯ä»¥çœ‹åˆ°æœºå™¨ç¿»è¯‘æ˜¯å°†æ‰€æœ‰è¦ç¿»è¯‘çš„å†…å®¹ç»Ÿä¸€è¾“å…¥ç„¶åå†å¼€å§‹ç”Ÿæˆç»“æœï¼Œä½†è¿™æ ·æœ‰ä¸€ä¸ªå¼Šç«¯å°±æ˜¯åœ¨å¥å­ç‰¹åˆ«é•¿çš„æ—¶å€™åé¢çš„å†…å®¹æœ‰çš„æ—¶å€™æ— æ³•ç¿»è¯‘çš„ç‰¹åˆ«çš„å‡†ç¡®ã€‚é€šè¿‡æ­å»º attention model å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜:</p>
<p><img src="/images/deeplearning/C5W3-23_1.png" width="800"></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ª BRNNï¼Œå¹¶ä¸”åœ¨æ™®é€š RNN çš„åŸºç¡€ä¸Šå¢åŠ  attentionå±‚ï¼Œå°†é˜¶æ®µæ€§çš„è¾“å…¥éƒ¨åˆ†è½¬åŒ–ä¸ºè¾“å‡ºï¼Œè¿™æ ·çš„æ–¹å¼ä¹Ÿæ›´ç¬¦åˆäººç±»çš„ç¿»è¯‘è¿‡ç¨‹ã€‚</p>
<p>è®©æˆ‘ä»¬æ‹¿å‡ºç»†èŠ‚éƒ¨åˆ†ä»”ç»†çš„ç†è§£ä¸€ä¸‹ï¼Œé¦–å…ˆæ˜¯ <strong>attention</strong> å±‚ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾ä¸­ $context^{&lt;{t}&gt;}$ ï¼Œæ¯ä¸€ä¸ª attention å•å…ƒæ¥å— ä¸‰ä¸ªå•è¯çš„è¾“å…¥æ‰€ä»¥ä¹Ÿç§°ä½œè¯­å¢ƒå•å…ƒï¼ˆcontextï¼‰ï¼Œ Î± æ˜¯æ¯å•ä¸ªè¾“å…¥è¯åœ¨è¯­å¢ƒå•å…ƒä¸­å å¾—æƒé‡ã€‚å¯¹æ¯ä¸€ä¸ªè¯­å¢ƒå•å…ƒ t æ¥è¯´ï¼Œå› ä¸º Î± æ˜¯é€šè¿‡ softmax å†³å®šçš„ï¼Œæ‰€ä»¥ $\sum_{i=1}^{T_x}Î±^{t,i}=1$. è¿™é‡Œå†³å®šç»ˆæ¯ä¸€ä¸ªå•è¯å å¾—è¯­å¢ƒæƒé‡ä»ç„¶æ˜¯é€šè¿‡ä¸€ ä¸ªå°å‹çš„ç¥ç»ç½‘ç»œæ¥è¿›è¡Œè®¡ç®—å¹¶ä¸”åå¾—åˆ°çš„ã€‚ </p>
<p><img src="/images/deeplearning/C5W3-24_1.png" width="800"></p>
<p>è¾“å‡ºçš„ $context^{&lt;{t}&gt;}$ è¿›å…¥åˆ°ä¸‹ä¸€å±‚ Post LSTM è¿™ä¸€æ­¥å°±å’Œä¹‹å‰å­¦ä¹ è¿‡çš„é‚£æ ·å­ï¼Œå°†å‰ä¸€æ­¥çš„è¾“å‡ºä¸è¿™ä¸€æ­¥ç»è¿‡é‡é‡åˆ†æçš„è¾“å…¥ç»¼åˆåˆ°ä¸€èµ·äº§ç”Ÿè¿™ä¸€æ­¥çš„è¾“å‡ºã€‚</p>
<p>è®©æˆ‘ä»¬è¯„ä¼°ä¸€ä¸‹ attention modelï¼š ç”±äºç»“æ„çš„å¤æ‚ï¼Œè®¡ç®—é‡ä¸æ—¶é—´æ¯”æ™®é€šçš„è¯­è¨€æ¨¡å‹è¦å¤šå’Œæ…¢è®¸å¤šã€‚ä¸è¿‡å¯¹äºæœºå™¨ç¿»è¯‘æ¥è¯´ï¼Œç”±äºæ¯ä¸€å¥è¯å¹¶ä¸ä¼šç‰¹åˆ«ç‰¹æ¯”çš„é•¿ï¼Œæ‰€ä»¥æœ‰çš„æ—¶å€™ç¨å¾®æ…¢ä¸€ç‚¹ä¹Ÿä¸æ˜¯å®Œå…¨æ— æ³•æ¥å—.</p>
<blockquote>
<p>ä¸€ä¸ªé‡è¦ attention model åº”ç”¨å°±æ˜¯è¯­éŸ³è¯†åˆ«ï¼Œäººé€šè¿‡éº¦å…‹é£è¾“å…¥ä¸€å¥è¯è®©æœºå™¨æ¥ç¿»è¯‘è¾“å…¥çš„å†…å®¹ï¼Œæ¥çœ‹ä¸€ä¸‹æ˜¯å¦‚ä½•å®ç°çš„</p>
</blockquote>
<h2 id="9-Speech-recognition"><a href="#9-Speech-recognition" class="headerlink" title="9. Speech recognition"></a>9. Speech recognition</h2><p>ä¸€èˆ¬è¯­éŸ³è¯†åˆ«è¿‡ç¨‹æ˜¯å¦‚ä¸‹å›¾ç¤ºçš„ï¼Œå³é¦–å…ˆå°†åŸéŸ³é¢‘ (é»‘ç™½çš„ï¼Œçºµè½´è¡¨ç¤ºæŒ¯å¹…) è½¬åŒ–æˆçºµè½´ä¸ºé¢‘ç‡çš„éŸ³è°±å›¾ï¼Œå¹¶ä¸”é€šè¿‡äººå·¥é¢„å…ˆè®¾å®šçš„éŸ³ç´ (phonemes)å†æ¥è¯†åˆ«.</p>
<p><img src="/images/deeplearning/C5W3-25_1.png" width="750"></p>
<p>å½“äººå¯¹ç€éº¦å…‹é£å½•å…¥ä¸€å¥è¯ï¼Œéº¦å…‹é£è®°å½•ä¸‹æ¥çš„æ˜¯ç©ºæ°”ç»†å¾®çš„éœ‡åŠ¨çš„å¼ºåº¦ï¼Œä»¥åŠé¢‘ç‡ã€‚äººè€³åœ¨å¬åˆ°ä¸€å¥è¯çš„æ—¶å€™å…¶ å®åšçš„æ˜¯ç±»ä¼¼çš„å¤„ç†ã€‚åœ¨æ·±åº¦å­¦ä¹ æ²¡æœ‰ç‰¹åˆ«æµè¡Œä¹‹å‰ï¼Œæ¯”è¾ƒæµè¡Œçš„æ˜¯ç”¨éŸ³èŠ‚åšè¯­éŸ³è¯†åˆ«ï¼Œä½†ç°åœ¨å› ä¸ºæœ‰äº†å¼ºå¤§çš„ <strong>attention model</strong>ï¼Œå¾—åˆ°çš„ç»“æœæ¯”éŸ³èŠ‚çš„æ•ˆæœæ›´å¥½ã€‚</p>
<p><img src="/images/deeplearning/C5W3-26_1.png" width="750"></p>
<p>CTC(connectionist temporal classiï¬cation)æ˜¯ä¹‹å‰è¾ƒä¸ºå¸¸ç”¨çš„æ–¹æ³•ã€‚</p>
<p>å…·ä½“åŸç†å¦‚ä¸‹ï¼š</p>
<p>å‡è®¾æ¯ç§’éŸ³é¢‘å¯ä»¥æå–å‡º 100 ä¸ªç‰¹å¾å€¼ï¼Œé‚£ä¹ˆå‡è®¾ 10ç§’ çš„éŸ³é¢‘å°±æœ‰ 1000 ä¸ªç‰¹å¾å€¼ï¼Œé‚£ä¹ˆè¾“å‡ºå€¼ä¹Ÿæœ‰ 1000 ä¸ªï¼Œä½†æ˜¯è¯´å‡ºçš„è¯å¹¶æ²¡æœ‰è¿™ä¹ˆå¤šå•Šï¼Œé‚£è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<p>æ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦æŠŠâ€œ<em>â€è¿›è¡Œå‹ç¼©å³å¯ï¼Œæ³¨æ„éœ€è¦å°† â€œ</em>â€œå’Œç©ºé¢åŒºåˆ†å¼€æ¥ï¼Œå› ä¸ºç©ºæ ¼ä¹Ÿæ˜¯å ä¸€ä¸ªå­—ç¬¦çš„ã€‚</p>
<p><img src="/images/deeplearning/C5W3-27_1.png" width="750"></p>
<h2 id="10-Trigger-word-detection"><a href="#10-Trigger-word-detection" class="headerlink" title="10. Trigger word detection"></a>10. Trigger word detection</h2><p><img src="/images/deeplearning/C5W3-28_1.png" width="700"></p>
<p>å‡è®¾ä¸‹å›¾å¼è®­ç»ƒé›†ä¸­çš„ä¸€æ®µéŸ³é¢‘ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤æ¬¡å”¤é†’è¯:</p>
<p><img src="/images/deeplearning/C5W3-29_1.png" width="750"></p>
<p>æ­å»ºä¸€ä¸ª attention modelï¼Œåœ¨å¬åˆ°å”¤é†’è¯ä¹‹å‰ä¸€ç›´è¾“å‡ºçš„æ˜¯ 0ï¼Œåœ¨å¬åˆ°å”¤é†’è¯ä»¥åè¾“å‡º 1ï¼Œä½†å› ä¸ºä¸€ä¸ªå”¤é†’è¯ä¼šæŒç»­åŠç§’å·¦å³æ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¸ä»…ä»…åªè¾“å‡ºä¸€æ¬¡ 1ï¼Œè€Œæ˜¯å°†è¾“å‡ºçš„ 1 æŒç»­ä¸€æ®µæ—¶é—´ï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼è®­ç»ƒå‡ºçš„ RNN å°±å¯ä»¥å¾ˆ æœ‰æ•ˆçš„æ£€æµ‹åˆ°å”¤é†’è¯äº†ã€‚</p>
<h2 id="11-Summary-and-thank-you"><a href="#11-Summary-and-thank-you" class="headerlink" title="11. Summary and thank you"></a>11. Summary and thank you</h2><p>ç»ˆäºå­¦å®Œäº†ã€‚è™½ç„¶å¹¶ä¸èƒ½è¯´æ˜ä»€ä¹ˆ~~~233333</p>
<p>æ„Ÿè°¢å´æ©è¾¾å’Œä»–çš„å›¢é˜Ÿç»™æˆ‘ä»¬å¸¦æ¥è¿™ä¹ˆå¥½çš„æ•™ç¨‹</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
<li><a href="https://www.ctolib.com/Yukong-Deeplearning-ai-Solutions.html" target="_blank" rel="external">deeplearning.aiæ·±åº¦å­¦ä¹ è¯¾ç¨‹å­—å¹•ç¿»è¯‘é¡¹ç›®</a></li>
<li><a href="https://blog.csdn.net/Jerr__y/article/details/53749693" target="_blank" rel="external">seq2seqå­¦ä¹ ç¬”è®°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sequence Models (week2) - NLP - Word Embeddings]]></title>
      <url>http://shopee.ai/2018/08/02/deeplearning/Sequence-Models-week2/</url>
      <content type="html"><![CDATA[<p>èƒ½å¤Ÿå°†åºåˆ—æ¨¡å‹åº”ç”¨åˆ°è‡ªç„¶è¯­è¨€é—®é¢˜ä¸­ï¼ŒåŒ…æ‹¬æ–‡å­—åˆæˆã€‚</p>
<a id="more"></a>
<h2 id="1-Word-Representation"><a href="#1-Word-Representation" class="headerlink" title="1. Word Representation"></a>1. Word Representation</h2><p>ä¸Šå‘¨çš„å­¦ä¹ ä¸­ï¼Œå­¦ä¹ äº†å¦‚ä½•ç”¨ç‹¬çƒ­ç¼–ç æ¥ä»£è¡¨ä¸€ä¸ªè¯ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬æ¥æ¢ç©¶ä¸€ä¸‹è¯å’Œè¯ä¹‹é—´çš„è”ç³»ã€‚æ¯”å¦‚æœ‰ä¸‹é¢è¿™å¥è¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â€œI want a glass of orange ________â€</span><br></pre></td></tr></table></figure>
<p>å‡å¦‚æˆ‘ä»¬çš„ RNN çš„æ¨¡å‹é€šè¿‡è®­ç»ƒå·²ç»å­¦ä¼šäº†çŸ­è¯­ â€œorange juiceâ€ï¼Œå¹¶å‡†ç¡®çš„é¢„æµ‹äº†è¿™å¥è¯çš„ç©ºæ ¼éƒ¨åˆ†ï¼Œé‚£ä¹ˆå¦‚æœé‡åˆ°äº†å¦ä¸€å¥è¯æ—¶ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â€œI want a glass of apple _________â€</span><br></pre></td></tr></table></figure>
<p>æ˜¯å¦éœ€è¦ä»å¤´å­¦ä¹ çŸ­è¯­ â€œapple juiceâ€ å‘¢ï¼Ÿèƒ½å¦é€šè¿‡æ„å»º â€œ<code>apple</code>â€ ä¸ â€œ<code>orange</code>â€ çš„è”ç³»è®©å®ƒä¸éœ€è¦é‡å­¦å°±èƒ½è¿›è¡Œåˆ¤æ–­å‘¢ï¼Ÿ</p>
<blockquote>
<p>èƒ½å¦é€šè¿‡æ„å»º â€œappleâ€ ä¸ â€œorangeâ€ çš„è”ç³»è®©å®ƒä¸éœ€è¦é‡å­¦å°±èƒ½è¿›è¡Œåˆ¤æ–­å‘¢ï¼Ÿ<br>æ‰€ä»¥ä¸‹é¢ç»™å‡ºäº†ä¸€ç§æ”¹è¿›çš„è¡¨ç¤ºæ–¹æ³•ï¼Œç§°ä¹‹ä¸ºâ€œè¯åµŒå…¥(<strong>Word Embedding</strong>)â€</p>
</blockquote>
<h3 id="1-1-è¯æ±‡çš„ç‰¹æ€§"><a href="#1-1-è¯æ±‡çš„ç‰¹æ€§" class="headerlink" title="1.1 è¯æ±‡çš„ç‰¹æ€§"></a>1.1 è¯æ±‡çš„ç‰¹æ€§</h3><p>å•è¯ä¸å•è¯ä¹‹é—´æ˜¯æœ‰å¾ˆå¤šå…±æ€§çš„ï¼Œæˆ–åœ¨æŸä¸€ç‰¹æ€§ä¸Šç›¸è¿‘ï¼Œæ¯”å¦‚â€œè‹¹æœâ€å’Œâ€œæ©™å­â€éƒ½æ˜¯æ°´æœï¼›æˆ–è€…åœ¨æŸä¸€ç‰¹æ€§ä¸Šç›¸åï¼Œæ¯”å¦‚â€œçˆ¶äº²â€åœ¨æ€§åˆ«ä¸Šæ˜¯ç”·æ€§ï¼Œâ€œæ¯äº²â€åœ¨æ€§åˆ«ä¸Šæ˜¯å¥³æ€§ï¼Œé€šè¿‡æ„å»ºä»–ä»¬å…¶ä¸­çš„è”ç³»å¯ä»¥å°†åœ¨ä¸€ä¸ªå•è¯å­¦ä¹ åˆ°çš„å†…å®¹åº”ç”¨åˆ°å…¶ä»–çš„å•è¯ä¸Šæ¥æé«˜æ¨¡å‹çš„å­¦ä¹ çš„æ•ˆç‡ï¼Œè¿™é‡Œç”¨ä¸€ä¸ªç®€åŒ–çš„è¡¨æ ¼è¯´æ˜:</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">Man (5391)</th>
<th style="text-align:center">Woman (9853)</th>
<th style="text-align:center">Apple (456)</th>
<th style="text-align:center">Orange (6257)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">æ€§åˆ«</td>
<td style="text-align:center">-1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0.1</td>
</tr>
<tr>
<td style="text-align:center">å¹´é¾„</td>
<td style="text-align:center">0.01</td>
<td style="text-align:center">0.02</td>
<td style="text-align:center">-0.01</td>
<td style="text-align:center">0.00</td>
</tr>
<tr>
<td style="text-align:center">é£Ÿç‰©</td>
<td style="text-align:center">0.04</td>
<td style="text-align:center">0.01</td>
<td style="text-align:center">0.95</td>
<td style="text-align:center">0.97</td>
</tr>
<tr>
<td style="text-align:center">é¢œè‰²</td>
<td style="text-align:center">0.03</td>
<td style="text-align:center">0.01</td>
<td style="text-align:center">0.70</td>
<td style="text-align:center">0.30</td>
</tr>
</tbody>
</table>
<p>åœ¨è¡¨æ ¼ä¸­å¯ä»¥çœ‹åˆ°ä¸åŒçš„è¯è¯­å¯¹åº”ç€ä¸åŒçš„ç‰¹æ€§æœ‰ä¸åŒçš„ç³»æ•°å€¼ï¼Œä»£è¡¨ç€è¿™ä¸ªè¯è¯­ä¸å½“å‰ç‰¹æ€§çš„å…³ç³»ã€‚æ‹¬å·é‡Œçš„æ•°å­—ä»£è¡¨è¿™ä¸ªå•è¯åœ¨ç‹¬çƒ­ç¼–ç ä¸­çš„ä½ç½®ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ•°å­—ä»£è¡¨è¿™ä¸ªå•è¯æ¯”å¦‚ Man = ï¼ŒMan çš„ç‰¹æ€§ç”¨ ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸€çºµåˆ—ã€‚</p>
<p>åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œç‰¹æ€§çš„æ•°é‡è¿œä¸æ­¢ 4 ç§ï¼Œå¯èƒ½æœ‰å‡ ç™¾ç§ï¼Œç”šè‡³æ›´å¤šã€‚å¯¹äºå•è¯ â€œorangeâ€ å’Œ â€œappleâ€ æ¥è¯´ä»–ä»¬ä¼šå…±äº«å¾ˆå¤šçš„ç‰¹æ€§ï¼Œæ¯”å¦‚éƒ½æ˜¯æ°´æœï¼Œéƒ½æ˜¯åœ†å½¢ï¼Œéƒ½å¯ä»¥åƒï¼Œä¹Ÿæœ‰äº›ä¸åŒçš„ç‰¹æ€§æ¯”å¦‚é¢œè‰²ä¸åŒï¼Œå‘³é“ä¸åŒï¼Œä½†å› ä¸ºè¿™äº›ç‰¹æ€§è®© RNN æ¨¡å‹ç†è§£äº†ä»–ä»¬çš„å…³ç³»ï¼Œä¹Ÿå°±å¢åŠ äº†é€šè¿‡å­¦ä¹ ä¸€ä¸ªå•è¯å»é¢„æµ‹å¦ä¸€ä¸ªçš„å¯èƒ½æ€§ã€‚</p>
<blockquote>
<p>è¿™é‡Œè¿˜ä»‹ç»äº†ä¸€ä¸ª <code>t-SNE</code> ç®—æ³•ï¼Œå› ä¸ºè¯æ€§è¡¨æœ¬èº«æ˜¯ä¸€ä¸ªå¾ˆé«˜ç»´åº¦çš„ç©ºé—´ï¼Œé€šè¿‡è¿™ä¸ªç®—æ³•å‹ç¼©åˆ°äºŒç»´çš„å¯è§†åŒ–å¹³é¢ä¸Šï¼Œæ¯ä¸€ä¸ªå•è¯ åµŒå…¥ å±äºè‡ªå·±çš„ä¸€ä¸ªä½ç½®ï¼Œç›¸ä¼¼çš„å•è¯ç¦»çš„è¿‘ï¼Œæ²¡æœ‰å…±æ€§çš„å•è¯ç¦»å¾—è¿œï¼Œè¿™ä¸ªå°±æ˜¯ â€œWord Embeddingsâ€ çš„æ¦‚å¿µ.</p>
</blockquote>
<p><img src="/images/deeplearning/C5W2-2.png" width="500"></p>
<blockquote>
<p>ä¸Šå›¾é€šè¿‡èšç±»å°†è¯æ€§ç›¸ç±»ä¼¼çš„å•è¯åœ¨äºŒç»´ç©ºé—´èšä¸ºä¸€ç±».</p>
</blockquote>
<h2 id="2-Using-Word-Embeddings"><a href="#2-Using-Word-Embeddings" class="headerlink" title="2. Using Word Embeddings"></a>2. Using Word Embeddings</h2><p>å…ˆä¸‹ä¸€ä¸ªéæ­£è§„å®šä¹‰ â€œè¯åµŒ - æè¿°äº†è¯æ€§ç‰¹å¾çš„æ€»é‡ï¼Œä¹Ÿæ˜¯åœ¨é«˜ç»´è¯æ€§ç©ºé—´ä¸­åµŒå…¥çš„ä½ç½®ï¼Œæ‹¥æœ‰è¶Šå¤šå…±æ€§çš„è¯ï¼Œè¯åµŒç¦»å¾—è¶Šè¿‘ï¼Œåä¹‹åˆ™è¶Šè¿œâ€ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¡¨è¾¾è¿™ä¸ªâ€œä½ç½®â€ï¼Œéœ€è¦ä½¿ç”¨æ‰€æœ‰è®¾å®šçš„è¯æ€§ç‰¹å¾ï¼Œå‡å¦‚æœ‰ 300 ä¸ªç‰¹å¾ï¼ˆæ€§åˆ«ï¼Œé¢œè‰²ï¼Œâ€¦ï¼‰ï¼Œé‚£ä¹ˆè¯åµŒçš„ç©ºé—´ç»´åº¦å°±æ˜¯ 300.</p>
<h3 id="2-1-ä½¿ç”¨è¯åµŒä¸‰æ­¥"><a href="#2-1-ä½¿ç”¨è¯åµŒä¸‰æ­¥" class="headerlink" title="2.1 ä½¿ç”¨è¯åµŒä¸‰æ­¥"></a>2.1 ä½¿ç”¨è¯åµŒä¸‰æ­¥</h3><ol>
<li>è·å¾—è¯åµŒï¼šè·å¾—çš„æ–¹å¼å¯ä»¥é€šè¿‡è®­ç»ƒå¤§çš„æ–‡æœ¬é›†æˆ–è€…ä¸‹è½½å¾ˆå¤šå¼€æºçš„è¯åµŒåº“</li>
<li>åº”ç”¨è¯åµŒï¼šå°†è·å¾—çš„è¯åµŒåº”ç”¨åœ¨æˆ‘ä»¬çš„è®­ç»ƒä»»åŠ¡ä¸­</li>
<li>å¯é€‰ï¼šé€šè¿‡æˆ‘ä»¬çš„è®­ç»ƒä»»åŠ¡æ›´æ–°è¯åµŒåº“ï¼ˆå¦‚æœè®­ç»ƒé‡å¾ˆå°å°±ä¸è¦æ›´æ–°äº†ï¼‰</li>
</ol>
<h3 id="2-2-è¯åµŒå®ç”¨åœºæ™¯"><a href="#2-2-è¯åµŒå®ç”¨åœºæ™¯" class="headerlink" title="2.2 è¯åµŒå®ç”¨åœºæ™¯"></a>2.2 è¯åµŒå®ç”¨åœºæ™¯</h3><table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">sencentce</th>
<th style="text-align:center">replace word</th>
<th style="text-align:center">target</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">Sally Johnson is an <code>orange</code> farmer.</td>
<td style="text-align:center">orange</td>
<td style="text-align:center">Sally Johnson</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">Robert Lin is an <code>apple</code> farmer.</td>
<td style="text-align:center">apple</td>
<td style="text-align:center">Robert Lin</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">Robert Lin is a <code>durian cultivator</code>.</td>
<td style="text-align:center">durian cultivator</td>
<td style="text-align:center">Robert Lin</td>
</tr>
</tbody>
</table>
<blockquote>
<p>æˆ‘ä»¬ç»§ç»­æ›¿æ¢ï¼Œæˆ‘ä»¬å°† apple farmer æ›¿æ¢æˆä¸å¤ªå¸¸è§çš„ durian cultivator (æ¦´è²ç¹æ®–å‘˜)ã€‚æ­¤æ—¶è¯åµŒå…¥ä¸­å¯èƒ½å¹¶æ²¡æœ‰ durian è¿™ä¸ªè¯ï¼Œcultivator ä¹Ÿæ˜¯ä¸å¸¸ç”¨çš„è¯æ±‡ã€‚è¿™ä¸ªæ—¶å€™æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç”¨åˆ°è¿ç§»å­¦ä¹ ã€‚</p>
</blockquote>
<p><strong>è¯åµŒå…¥è¿ç§»å­¦ä¹ æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<blockquote>
<ol>
<li>å­¦ä¹ å«æœ‰å¤§é‡æ–‡æœ¬è¯­æ–™åº“çš„è¯åµŒå…¥ (ä¸€èˆ¬å«æœ‰ 10äº¿ åˆ° 1000äº¿ å•è¯)ï¼Œæˆ–è€…ä¸‹è½½é¢„è®­ç»ƒå¥½çš„è¯åµŒå…¥</li>
<li>å°†å­¦åˆ°çš„è¯åµŒå…¥è¿ç§»åˆ°ç›¸å¯¹è¾ƒå°è§„æ¨¡çš„è®­ç»ƒé›† (ä¾‹å¦‚ 10ä¸‡ è¯æ±‡).</li>
<li>(å¯é€‰) è¿™ä¸€æ­¥éª¤å°±æ˜¯å¯¹æ–°çš„æ•°æ®è¿›è¡Œ fine-tuneã€‚</li>
</ol>
</blockquote>
<h2 id="3-Properties-of-Word-Embeddings"><a href="#3-Properties-of-Word-Embeddings" class="headerlink" title="3. Properties of Word Embeddings"></a>3. Properties of Word Embeddings</h2><p><strong>å‡è®¾æœ‰å¦‚ä¸‹çš„é—®é¢˜ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;Man&quot; -&gt; &quot;Woman&quot; é‚£ä¹ˆ &quot;King&quot; -&gt; ï¼Ÿ</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªé—®é¢˜è¢«ç§°ä½œè¯æ±‡çš„ç±»æ¯”é—®é¢˜ï¼Œé€šè¿‡ç ”ç©¶è¯åµŒçš„ç‰¹å¾å¯ä»¥è§£å†³è¿™æ ·çš„é—®é¢˜.</p>
<p><img src="/images/deeplearning/C5W2-3_1.png" width="750"></p>
<p>æ•°å­¦çš„è¡¨è¾¾å¼ä¸ºï¼š</p>
<p>$$<br>e_{man} - e_{woman} \, \approx \, e_{king}-e_w<br>$$</p>
<p>$e_w$ æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ åœ¨é«˜çº¬åº¦ç©ºé—´ä¸­ï¼ˆ300Dï¼‰</p>
<p>$$<br>argmax_w \;\, Similarity(e_w, e_{king}-e_{man}+e_{woman})<br>$$</p>
<p>è¿™ä¸ªå…¬å¼ç›¸å½“äºåœ¨ç®—ä¸¤ä¸ªå‘é‡(vector)çš„cosç›¸ä¼¼åº¦</p>
<p>$$<br>Similarity(u,v) = \frac {u^Tv} {||u||_2||v||_2}<br>$$</p>
<blockquote>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ç”¨å…¶ä»–è·ç¦»å…¬å¼, ä½†æ˜¯å¤šæ•°æ˜¯ç”¨è¿™ä¸ªä½™å¼¦ç›¸ä¼¼åº¦.</p>
</blockquote>
<p>å¦‚ä¸‹å›¾ç”¨å‡ ä½•æ–¹å¼èƒ½å¤Ÿæ›´å®¹æ˜“ç†è§£ï¼Œå³åªè¦æ‰¾åˆ°ä¸å‘é‡ $\vec{AB}$ æœ€æ¥è¿‘å¹³è¡Œçš„å‘é‡ $\vec{CD}$ å³å¯.</p>
<p><img src="/images/deeplearning/C5W2-4_1.png" width="750"></p>
<h2 id="4-Embedding-Matrix"><a href="#4-Embedding-Matrix" class="headerlink" title="4. Embedding Matrix"></a>4. Embedding Matrix</h2><p>è¿™ä¸€èŠ‚ä¸­ä¸»è¦è®²äº†è¯åµŒçŸ©é˜µçš„shapeï¼Œå¦‚æœè¯åµŒï¼ˆè¯æ€§ç‰¹å¾çš„æ€»é‡ï¼‰æ˜¯300ï¼Œç‹¬çƒ­ç¼–ç çš„é•¿åº¦æ˜¯10000ï¼Œé‚£ä¹ˆè¯åµŒçŸ©é˜µçš„çš„shapeå°±æ˜¯ <code>300 * 10000</code> ã€‚æ‰€ä»¥å°±æœ‰äº†ä¸‹é¢çš„å¼å­ï¼š</p>
<blockquote>
<p>è¯åµŒçŸ©é˜µ * å•è¯çš„ç‹¬çƒ­ç¼–ç  = å•è¯çš„è¯åµŒ</p>
<p>(300, 10000) * (10000, 1) = (300, 1)</p>
</blockquote>
<h2 id="5-Learning-Word-Embeddings"><a href="#5-Learning-Word-Embeddings" class="headerlink" title="5. Learning Word Embeddings"></a>5. Learning Word Embeddings</h2><p>å¯ä»¥é€šè¿‡è®­ç»ƒç¥ç»ç½‘ç»œçš„æ–¹å¼æ„å»ºè¯åµŒè¡¨ <code>E</code> .</p>
<p>ä¸‹å›¾å±•ç¤ºäº†é¢„æµ‹å•è¯çš„æ–¹æ³•ï¼Œå³ç»™å‡ºç¼ºå°‘ä¸€ä¸ªå•è¯çš„å¥å­ï¼š</p>
<p>â€œ<strong>I want a glass of orange ___</strong>â€</p>
<blockquote>
<p>è®¡ç®—æ–¹æ³•æ˜¯å°†å·²çŸ¥å•è¯çš„ç‰¹å¾å‘é‡éƒ½ä½œä¸ºè¾“å…¥æ•°æ®é€åˆ°ç¥ç»ç½‘ç»œä¸­å»ï¼Œç„¶åç»è¿‡ä¸€ç³»åˆ—è®¡ç®—åˆ°è¾¾ Softmaxåˆ†ç±»å±‚ï¼Œåœ¨è¯¥ä¾‹ä¸­è¾“å‡ºèŠ‚ç‚¹æ•°ä¸º10000ä¸ªã€‚ç»è¿‡è®¡ç®—juiceæ¦‚ç‡æœ€é«˜ï¼Œæ‰€ä»¥é¢„æµ‹ä¸º</p>
<p>â€œI want a glass of orange <code>juice</code>â€</p>
</blockquote>
<p><img src="/images/deeplearning/C5W2-5_1.png" width="750"></p>
<p>åœ¨è¿™ä¸ªè®­ç»ƒæ¨¡å¼ä¸­ï¼Œæ˜¯é€šè¿‡å…¨éƒ¨çš„å•è¯å»é¢„æµ‹æœ€åä¸€ä¸ªå•è¯ç„¶ååå‘ä¼ æ’­æ›´æ–°è¯åµŒè¡¨ $E$</p>
<blockquote>
<p>å‡è®¾è¦é¢„æµ‹çš„å•è¯ä¸º $W$ï¼Œè¯åµŒè¡¨ä»ç„¶ä¸º $E$ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è®­ç»ƒè¯åµŒè¡¨å’Œé¢„æµ‹ $W$ æ˜¯ä¸¤ä¸ªä¸åŒçš„ä»»åŠ¡ã€‚</p>
<p>å¦‚æœä»»åŠ¡æ˜¯é¢„æµ‹ $W$ï¼Œæœ€ä½³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ $W$ å‰é¢ $n$ ä¸ªå•è¯æ„å»ºè¯­å¢ƒã€‚</p>
<p>å¦‚æœä»»åŠ¡æ˜¯è®­ç»ƒ $E$ï¼Œé™¤äº†ä½¿ç”¨ $W$ å‰å…¨éƒ¨å•è¯è¿˜å¯ä»¥é€šè¿‡ï¼šå‰åå„4ä¸ªå•è¯ã€å‰é¢å•ç‹¬çš„ä¸€ä¸ªè¯ã€å‰é¢è¯­å¢ƒä¸­éšæœºçš„ä¸€ä¸ªè¯ï¼ˆè¿™ä¸ªæ–¹å¼ä¹Ÿå«åš Skip Gram ç®—æ³•ï¼‰ï¼Œè¿™äº›æ–¹æ³•éƒ½èƒ½æä¾›å¾ˆå¥½çš„ç»“æœã€‚</p>
</blockquote>
<h2 id="6-Word2Vec"><a href="#6-Word2Vec" class="headerlink" title="6. Word2Vec"></a>6. Word2Vec</h2><p>è§†é¢‘ä¸­ä¸€ç›´æ²¡æœ‰ç»™ Word2Vec ä¸‹ä¸€ä¸ªæ˜ç¡®çš„å®šä¹‰ï¼Œæˆ‘ä»¬å†æ¬¡ä¸‹ä¸€ä¸ªéæ­£å¼å®šä¹‰ä¾¿äºç†è§£:</p>
<p>â€œ<strong>word2vec</strong>â€ æ˜¯æŒ‡å°†è¯è¯­ word å˜æˆå‘é‡vector çš„è¿‡ç¨‹ï¼Œè¿™ä¸€è¿‡ç¨‹é€šå¸¸é€šè¿‡æµ…å±‚çš„ç¥ç»ç½‘ç»œå®Œæˆï¼Œä¾‹å¦‚ CBOW æˆ–è€…skip gramï¼Œè¿™ä¸€è¿‡ç¨‹åŒæ ·å¯ä»¥è§†ä¸ºæ„å»ºè¯åµŒè¡¨ $E$ çš„è¿‡ç¨‹â€ã€‚</p>
<h3 id="6-1-Skip-grams"><a href="#6-1-Skip-grams" class="headerlink" title="6.1 Skip-grams"></a>6.1 Skip-grams</h3><p>è¿™é‡Œç€é‡ä»‹ç»äº†<strong>skip gram model</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨ä¸€ä¸ªéšæœºè¯é¢„æµ‹å…¶ä»–è¯çš„æ–¹æ³•ã€‚æ¯”å¦‚ä¸‹é¢è¿™å¥è¯ä¸­</p>
<blockquote>
<p>â€œI want a glass of orange juice.â€</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥é€‰ <strong>orange</strong>ä½œä¸ºéšæœºè¯ c(<strong>Context</strong>)ï¼Œé€šè¿‡è®¾ç½®çª—å£å€¼ä¾‹å¦‚å‰å 5 ä¸ªå•è¯ä»¥ç›‘ç£å­¦ä¹ çš„æ–¹å¼å»é¢„æµ‹å…¶ä¸­çš„è¯t(<strong>Target</strong>) ä¾‹å¦‚ â€œjuice, glass, a, ofâ€ ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ä»ç„¶æ˜¯ä¸ºäº†æ­å»ºï¼ˆæ›´æ–°ï¼‰è¯åµŒè¡¨ $E$ è€Œä¸æ˜¯ä¸ºäº†çœŸæ­£<br>çš„å»é¢„æµ‹ï¼Œæ‰€ä»¥å¦‚æœé¢„æµ‹æ•ˆæœä¸å¥½å¹¶ä¸ç”¨æ‹…å¿ƒï¼Œè¡¨è¾¾å¼ï¼š</p>
<p>$$<br>O_{c}\rightarrow E \rightarrow e_{c} \rightarrow \underset{Softmax}{Output} \rightarrow \hat{y}<br>$$</p>
<p><strong>Softmax</strong>å…¬å¼ä¸º(å‡è®¾è¾“å‡ºèŠ‚ç‚¹æ•°ä¸º10000)ï¼š</p>
<p>$$<br>p(t|c)=\frac{e^{Î¸_t^Te_c}}{\sum_{j=1}^{10000}e^{Î¸_j^Te_c}}<br>$$</p>
<blockquote>
<p>$Î¸_t$ è¡¨ç¤ºä¸$t$æœ‰å…³çš„å‚æ•°</p>
</blockquote>
<p>æŸå¤±å‡½æ•°ï¼š</p>
<p>$$<br>l(\hat{y},y)=\sum_{i=1}^{10000}y_ilog\hat{y_i}<br>$$</p>
<p><img src="/images/deeplearning/C5W2-6_1.png" width="750"></p>
<p>åœ¨skip gramä¸­æœ‰ä¸€ä¸ªä¸è¶³æ˜¯ <strong>softmax</strong> ä½œä¸ºæ¿€æ´»å‡½æ•°éœ€è¦çš„è¿ç®—é‡å¤ªå¤§ï¼Œåœ¨ä¸Šé™ä¸º10000ä¸ªå•è¯çš„è¯åº“ä¸­å°±å·²ç»æ¯”è¾ƒæ…¢äº†ã€‚ä¸€ç§è¡¥æ•‘çš„åŠæ³•æ˜¯ç”¨ä¸€ä¸ªå®ƒçš„å˜ç§ â€œ<strong>Hierachical Softmax</strong> (åˆ†å±‚çš„Softmax)â€ï¼Œé€šè¿‡ç±»ä¼¼äºŒå‰æ ‘çš„æ–¹æ³•æé«˜è®­ç»ƒçš„æ•ˆç‡</p>
<p>ä¾‹å¦‚ä¸€äº›å¸¸è§çš„å•è¯ï¼Œå¦‚<strong>the</strong>ã€<strong>of</strong>ç­‰å°±å¯ä»¥åœ¨å¾ˆæµ…çš„å±‚æ¬¡å¾—åˆ°ï¼Œè€Œåƒ<strong>durian</strong>è¿™ç§å°‘ç”¨çš„å•è¯åˆ™åœ¨è¾ƒæ·±çš„å±‚æ¬¡å¾—åˆ°</p>
<p><img src="/images/deeplearning/C5W2-7_1.png" width="750"></p>
<h2 id="7-Negative-Sampling-è´Ÿé‡‡æ ·"><a href="#7-Negative-Sampling-è´Ÿé‡‡æ ·" class="headerlink" title="7. Negative Sampling è´Ÿé‡‡æ ·"></a>7. Negative Sampling è´Ÿé‡‡æ ·</h2><p>å¯¹äºskip gram modelè€Œè¨€ï¼Œè¿˜è¦è§£å†³çš„ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚ä½•å–æ ·ï¼ˆé€‰æ‹©ï¼‰æœ‰æ•ˆçš„éšæœºè¯ $c$ å’Œç›®æ ‡è¯ $t$ å‘¢ï¼Ÿå¦‚æœçœŸçš„æŒ‰ç…§è‡ªç„¶éšæœºåˆ†å¸ƒçš„æ–¹å¼å»é€‰æ‹©ï¼Œå¯èƒ½ä¼šå¤§é‡é‡å¤çš„é€‰æ‹©åˆ°å‡ºç°æ¬¡æ•°é¢‘ç‡å¾ˆé«˜çš„å•è¯æ¯”å¦‚è¯´ â€œthe, of, a, it, I, â€¦â€ é‡å¤çš„è®­ç»ƒè¿™æ ·çš„å•è¯æ²¡æœ‰ç‰¹åˆ«å¤§çš„æ„ä¹‰.</p>
<p>å¦‚ä½•æœ‰æ•ˆçš„å»è®­ç»ƒé€‰å®šçš„è¯å¦‚ orange å‘¢ï¼Ÿåœ¨è®¾ç½®è®­ç»ƒé›†æ—¶å¯ä»¥é€šè¿‡â€œè´Ÿå–æ ·â€çš„æ–¹æ³•, ä¸‹è¡¨ä¸­ç¬¬ä¸€è¡Œæ˜¯é€šè¿‡å’Œä¸Šé¢ä¸€æ ·çš„çª—å£æ³•å¾—åˆ°çš„â€œæ­£â€ï¼ˆ1ï¼‰ç»“æœï¼Œå…¶ä»–ä¸‰è¡Œæ˜¯ä»å­—å…¸ä¸­éšæœºå¾—åˆ°çš„è¯è¯­ï¼Œç»“æœä¸ºâ€œè´Ÿâ€ï¼ˆ0ï¼‰ã€‚é€šè¿‡è¿™æ ·çš„è´Ÿå–æ ·æ³•å¯ä»¥æ›´æœ‰æ•ˆåœ°å»è®­ç»ƒ skip gram model.</p>
<table>
<thead>
<tr>
<th style="text-align:center">context</th>
<th style="text-align:center">word</th>
<th style="text-align:center">target?</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">orange</td>
<td style="text-align:center">juice</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">orange</td>
<td style="text-align:center">king</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">orange</td>
<td style="text-align:center">book</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">orange</td>
<td style="text-align:center">the</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p><img src="/images/deeplearning/C5W2-8_1.png" width="700"></p>
<p>è´Ÿå–æ ·çš„ä¸ªæ•° <strong>k</strong> ç”±æ•°æ®é‡çš„å¤§å°è€Œå®šï¼Œä¸Šè¿°ä¾‹å­ä¸­ä¸º3. å®é™…ä¸­æ•°æ®é‡å¤§åˆ™ k = 2 ~ 5ï¼Œæ•°æ®é‡å°åˆ™å¯ä»¥ç›¸å¯¹å¤§ä¸€äº› k = 5 ~ 20</p>
<blockquote>
<p>é€šè¿‡è´Ÿå–æ ·ï¼Œæˆ‘ä»¬çš„ç¥ç»ç½‘ç»œè®­ç»ƒä» <strong>softmax</strong> é¢„æµ‹æ¯ä¸ªè¯å‡ºç°çš„é¢‘ç‡å˜æˆäº†ç»å…¸ binary logistic regression é—®é¢˜ï¼Œæ¦‚ç‡å…¬å¼ç”¨ <strong>sigmoid</strong> ä»£æ›¿ <strong>softmax</strong> ä»è€Œå¤§å¤§æé«˜äº†é€Ÿåº¦.</p>
</blockquote>
<p>$$<br>x_1=(orange, juice) \rightarrow y_1=1 \\<br>x_2=(orange, king) \rightarrow y_2=0 \\<br>â€¦ \\<br>P(y=1|c,t)=\sigma(\theta_t^Te_c)<br>$$</p>
<p>æœ€åæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå¹¶æ²¡æœ‰è¢«ç†è®ºéªŒè¯ä½†æ˜¯å®é™…æ•ˆæœå¾ˆå¥½çš„æ–¹å¼æ¥ç¡®å®šæ¯ä¸ªè¢«è´Ÿé€‰æ ·é€‰ä¸­çš„æ¦‚ç‡ä¸ºï¼š</p>
<p>$$<br>P(w_i)=\frac{f(w_i^{\frac{3}{4}})} {\sum_{j=1}^{10000}f(w_j^{\frac{3}{4}})}<br>$$</p>
<p><img src="/images/deeplearning/C5W2-9_1.png" width="750"></p>
<h2 id="8-GloVe-Word-Vectors"><a href="#8-GloVe-Word-Vectors" class="headerlink" title="8. GloVe Word Vectors"></a>8. GloVe Word Vectors</h2><p>GloVe(Global vectors for word representation)è™½ä¸åƒWord2Vecæ¨¡å‹é‚£æ ·æµè¡Œï¼Œä½†æ˜¯å®ƒä¹Ÿæœ‰è‡ªèº«çš„ä¼˜ç‚¹.</p>
<h2 id="9-Sentiment-Classification"><a href="#9-Sentiment-Classification" class="headerlink" title="9. Sentiment Classification"></a>9. Sentiment Classification</h2><p>å¹³æ—¶ä¸Šæ·˜å®æˆ‘ä»¬éƒ½ä¼šå¯¹ä¹°çš„ä¸œè¥¿ç»™å‡ºæ–‡å­—è¯„ä»·å’Œå¯¹åº”çš„æ˜Ÿçº§è¯„ä»·ï¼Œå¦‚ä¸‹å›¾ç¤ºã€‚</p>
<p>å•†å®¶å¯ä»¥é€šè¿‡å¯¹è¿™äº›æ•°æ®æ¥æ„å»ºä¸€ä¸ªæƒ…ç»ªåˆ†ç±»å™¨ï¼Œä»è€Œå¯ä»¥åœ¨ä¸€äº›ç¤¾äº¤å¹³å°ä¸Šå¦‚å¾®åšã€QQç­‰å¤§å®¶çš„æ–‡å­—è¯„è®ºç„¶åå¯¹åº”è¾“å‡ºç›¸åº”çš„æ˜Ÿçº§ç­‰çº§ï¼Œè¿™æ ·å°±å¯ä»¥æ›´å®¹æ˜“çŸ¥é“è‡ªå®¶åº—æ˜¯è’¸è’¸æ—¥ä¸Šè¿˜æ˜¯æ—¥è½è¥¿å±±äº†,heheheã€‚</p>
<p><img src="/images/deeplearning/C5W2-10_1.png" width="750"></p>
<p>å¯ä»¥çœ‹åˆ°ä¸‹å›¾ä¸­çš„æ¨¡å‹å…ˆå°†è¯„è¯­ä¸­å„ä¸ªå•è¯é€šè¿‡ è¯åµŒè¡¨(æ•°æ®é‡ä¸€èˆ¬æ¯”è¾ƒå¤§ï¼Œä¾‹å¦‚æœ‰100Billionçš„å•è¯æ•°) è½¬åŒ–æˆå¯¹åº”çš„ç‰¹å¾å‘é‡ï¼Œç„¶åå¯¹æ‰€æœ‰çš„å•è¯å‘é‡åšæ±‚å’Œæˆ–è€…åšå¹³å‡ï¼Œç„¶åæ„å»ºSoftmaxåˆ†ç±»å™¨ï¼Œæœ€åè¾“å‡ºæ˜Ÿçº§è¯„çº§ã€‚</p>
<p><img src="/images/deeplearning/C5W2-11_1.png" width="750"></p>
<p>ä½†æ˜¯ä¸Šé¢çš„æ¨¡å‹å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬è€Œè¨€å¦‚æœè¯„è¯­ä¸­æœ‰åƒâ€goodã€excellentâ€è¿™æ ·çš„å•è¯ï¼Œä¸€èˆ¬éƒ½æ˜¯æ˜Ÿçº§è¯„åˆ†è¾ƒé«˜çš„è¯„è¯­ï¼Œä½†æ˜¯è¯¥æ¨¡å‹å¯¹ä¸‹é¢è¿™å¥è¯„è¯­å°±æ˜¾å¾—æ— èƒ½ä¸ºåŠ›äº†ï¼š</p>
<p>â€œ<strong>Completely lacking in good taste, good service, and good ambience</strong>.â€</p>
<p>è¯¥è¯„è¯­ä¸­å‡ºç°å¤§é‡çš„goodï¼Œå¦‚æœç›´æ¥åšæ±‚å’Œæˆ–è€…å¹³å‡è¿ç®—ï¼Œç»è¿‡åˆ†ç±»å™¨å¾—åˆ°çš„è¾“å‡ºå¾ˆå¤§æ¦‚ç‡ä¸Šæ˜¯é«˜æ˜Ÿçº§è¯„åˆ†çš„ï¼Œä½†è¿™æ˜¾ç„¶ä¸è¯¥è¯„è¯­çš„æœ¬æ„ä¸ç¬¦.</p>
<p><img src="/images/deeplearning/C5W2-12_1.png" width="750"></p>
<p>ä¹‹æ‰€ä»¥ä¸Šé¢çš„æ¨¡å‹å­˜åœ¨é‚£æ ·çš„ç¼ºç‚¹ï¼Œå°±æ˜¯å› ä¸ºå®ƒæ²¡æœ‰æŠŠå•è¯çš„æ—¶åºè€ƒè™‘è¿›å»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨RNNæ„å»ºæ¨¡å‹æ¥è§£å†³è¿™ç§é—®é¢˜ã€‚RNNæ¨¡å‹å¦‚ä¸‹å›¾ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C5W2-13_1.png" width="750"></p>
<p>å¦å¤–ä½¿ç”¨RNNæ¨¡å‹è¿˜æœ‰å¦ä¸€ä¸ªå¥½å¤„ï¼Œå‡è®¾æµ‹è¯•é›†ä¸­çš„è¯„è¯­æ˜¯è¿™æ ·çš„</p>
<p>â€œCompletely absent of good taste, good service, and good ambience.â€</p>
<p>è¯¥è¯„è¯­åªæ˜¯å°†<strong>lacking in</strong>æ›¿æ¢æˆäº†<strong>absent of</strong>ï¼Œè€Œä¸”æˆ‘ä»¬å³ä½¿å‡è®¾<strong>absent</strong>å¹¶æ²¡æœ‰å‡ºç°åœ¨è®­ç»ƒé›†ä¸­ï¼Œä½†æ˜¯å› ä¸ºè¯åµŒè¡¨å¾ˆåºå¤§ï¼Œæ‰€ä»¥è¯åµŒè¡¨ä¸­åŒ…å«<strong>absent</strong>ï¼Œæ‰€ä»¥ç®—æ³•ä¾æ—§å¯ä»¥çŸ¥é“<strong>absent</strong>å’Œ<strong>lacking</strong>æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œæœ€åè¾“å‡ºçš„ç»“æœä¹Ÿä¾ç„¶å¯ä»¥ä¿æŒæ­£ç¡®ã€‚</p>
<p><img src="/images/deeplearning/C5W2-14_1.png" width="750"></p>
<h2 id="10-Debiasing-Word-Embeddings"><a href="#10-Debiasing-Word-Embeddings" class="headerlink" title="10. Debiasing Word Embeddings"></a>10. Debiasing Word Embeddings</h2><p>ç°å¦‚ä»Šæœºå™¨å­¦ä¹ å·²ç»è¢«ç”¨åˆ°äº†å¾ˆå¤šé¢†åŸŸï¼Œä¾‹å¦‚é“¶è¡Œè´·æ¬¾å†³ç­–ï¼Œç®€å†ç­›é€‰ã€‚ä½†æ˜¯å› ä¸ºæœºå™¨æ˜¯å‘äººä»¬å­¦ä¹ ï¼Œæ‰€ä»¥å¥½çš„åçš„éƒ½ä¼šå­¦åˆ°. å› ä¸º <strong>RNN</strong> é€šå¸¸æ˜¯é€šè¿‡å¤§é‡çš„ç½‘ç»œæ•°æ®æ–‡æœ¬é›†è¿›è¡Œè®­ç»ƒå¾—åˆ°çš„ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æ–‡æœ¬é›†ä¸­çš„åè§ä¼šåæ˜ åœ¨è¯åµŒä»¥åŠæœ€ç»ˆ çš„ç»“æœä¸­ï¼Œä¾‹å¦‚</p>
<blockquote>
<p>å½“è¯´åˆ°Manï¼šç¨‹åºå‘˜çš„æ—¶å€™ï¼Œç®—æ³•å¾—å‡ºWomanï¼šå®¶åº­ä¸»å¦‡ï¼Œè¿™æ˜¾ç„¶å­˜åœ¨åè§ã€‚</p>
<p>åˆå¦‚Manï¼šDoctorï¼Œç®—æ³•è®¤ä¸ºWomanï¼šNurseã€‚è¿™æ˜¾ç„¶ä¹Ÿå­˜åœ¨å…¶å®å’Œåè§ã€‚</p>
</blockquote>
<p>è¿™ç§å¸¦æœ‰åè§çš„ç»“æœæ˜¯åº”è¯¥å°½åŠ›é¿å…çš„ï¼Œè¿™ç±»åè§å¤§é‡å­˜åœ¨äºç½‘ç»œæ•°æ®æ–‡æœ¬ä¸­ï¼ŒåŒ…æ‹¬ æ€§åˆ«åè§ï¼Œç§æ—åè§ï¼Œå¹´é¾„åè§ï¼Œç­‰ç­‰â€¦ äººç±»åœ¨è¿™æ–¹é¢å·²ç»åšçš„ä¸å¯¹äº†ï¼Œæ‰€ä»¥æœºå™¨åº”å½“åšå‡ºç›¸åº”çš„è°ƒæ•´æ¥å‡å°‘æ­§è§†.  </p>
<p><strong>ç»™è¯åµŒå»åè§ä¸»è¦åˆ†ä¸‰æ­¥</strong>(åœ¨è¯åµŒçš„é«˜ç»´ç©ºé—´ä¸­å®Œæˆ):</p>
<ol>
<li>æ‰¾åˆ°åè§çš„æ–¹å‘(ç¡®å®šåè§çš„xï¼Œyè½´)</li>
<li>å°†éå®šä¹‰åŒ–çš„è¯å¹³ç§»åˆ°x=0(çˆ¶äº²ï¼Œæ¯äº²è¿™ç±»è¯å°±æ˜¯å®šä¹‰åŒ–çš„è¯ï¼Œæœ¬èº«å°±å¸¦æœ‰äº†æ€§åˆ«çš„æš—ç¤º) </li>
<li>ä½¿å®šä¹‰åŒ–çš„è¯æ®ç¦»ç§»åŠ¨çš„è¯è·ç¦»ç›¸ç­‰</li>
</ol>
<blockquote>
<p>So word embeddings can reflect the gender, ethnicity, age, sexual, orientation, and other biases of the text used to train the model. One that Iâ€™m especially passionate about is bias relating to socioeconomic status. I think that every person, whether you come from a wealthy family, or a low income family, or anywhere in between, I think everyone should have a great opportunities.</p>
</blockquote>
<p><img src="/images/deeplearning/C5W2-15_1.png" width="750"></p>
<p>ä¸‹é¢å°†ä¸»è¦ä»æ€§åˆ«æ­§è§†ä¸Šæ¥ä¸¾ä¾‹è¯´æ˜å¦‚ä½•è®©æœºå™¨å­¦ä¹ æ¶ˆé™¤åè§ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†ä¸€äº›å•è¯ï¼Œä½ å¯ä»¥åœ¨å¿ƒé‡Œå…ˆæƒ³æƒ³ä½ çœ‹åˆ°è¿™äº›å•è¯çš„ç¬¬ä¸€æ—¶é—´è®¤ä¸ºä»–ä»¬æ‰€å¯¹åº”çš„æ€§åˆ«æ˜¯ä»€ä¹ˆå§~~~</p>
<p><img src="/images/deeplearning/C5W2-16_1.png" width="450"></p>
<h3 id="1-è¯†åˆ«åè§æ–¹å‘"><a href="#1-è¯†åˆ«åè§æ–¹å‘" class="headerlink" title="1. è¯†åˆ«åè§æ–¹å‘"></a>1. è¯†åˆ«åè§æ–¹å‘</h3><p>å› ä¸ºè¯¥ä¾‹å­æ˜¯ä»¥æ¶ˆé™¤æ€§åˆ«æ­§è§†ä¸ºç›®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¡ç®—å‡ºå›¾ä¸­è¿™äº›å•è¯ä¹‹é—´çš„è·ç¦»çš„å¹³å‡å€¼ï¼Œè¿›è€Œä½œä¸ºåè§æ–¹å‘(bias direction)</p>
<p>$$<br>e_{he}-e_{she} \\<br>e_{boy}-e_{girl} \\<br>e_{grandmother}-e_{grandfather}<br>$$</p>
<p>å°†ä¸Šé¢æ‰€æ±‚åšå¹³å‡è¿ç®—ï¼Œå¾—åˆ°çš„å‘é‡æ–¹å‘å³ä¸ºåè§æ–¹å‘</p>
<p>ä¸ºæ–¹ä¾¿ç†è§£ï¼Œå·²åœ¨å›¾ä¸­ç”»å‡ºåè§æ–¹å‘ï¼Œå…¶ä½™299D(é™¤genderä»¥å¤–çš„å…¶ä»–å•è¯ç‰¹å¾)å‘é‡ä¸åè§æ–¹å‘æ­£äº¤ï¼Œä¹Ÿåœ¨ä¸‹å›¾ä¸­ç”»å‡º.</p>
<p><img src="/images/deeplearning/C5W2-17_1.png" width="700"></p>
<h3 id="2-è¯æ€§ä¸­å’Œ"><a href="#2-è¯æ€§ä¸­å’Œ" class="headerlink" title="2. è¯æ€§ä¸­å’Œ"></a>2. è¯æ€§ä¸­å’Œ</h3><p>åƒâ€œ <strong>boy, girl</strong> â€è¿™ç±»è¯åœ¨æ€§åˆ«è¯æ€§ä¸Šæ˜¯å¾ˆæ˜ç¡®çš„ï¼Œè€Œä¸”ä¸å­˜åœ¨æ­§è§†ï¼Œæ‰€ä»¥æ— éœ€ä¸­å’Œ(Neutralize).</p>
<p>è€Œå›¾ä¸­çš„ <strong>babysisterã€doctor</strong> åˆ™éœ€è¦ä¸­å’Œï¼Œå…·ä½“æ–¹æ³•å°±æ˜¯å°†è¯¥è¯åƒéåè§æ–¹å‘æŠ•å½±å¾—åˆ°ä¸€ä¸ªæ–°çš„åæ ‡.</p>
<p><img src="/images/deeplearning/C5W2-18_1.png" width="700"></p>
<h3 id="3-å•è¯å¯¹ç­‰è·ç¦»åŒ–"><a href="#3-å•è¯å¯¹ç­‰è·ç¦»åŒ–" class="headerlink" title="3. å•è¯å¯¹ç­‰è·ç¦»åŒ–"></a>3. å•è¯å¯¹ç­‰è·ç¦»åŒ–</h3><p>å¦‚ä¸‹å›¾ç¤ºï¼Œè™½ç„¶ <strong>babysister</strong> ä¸­å’ŒåŒ–ï¼Œä½†æ˜¯å®ƒè¿˜æ˜¯ç¦» <strong>grandmother</strong> æ›´è¿‘ï¼Œæ‰€ä»¥ä¾æ—§å¸¦æœ‰åè§</p>
<p><img src="/images/deeplearning/C5W2-19_1.png" width="700"></p>
<p>æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å°†grandmotherã€grandfatherè¿™ç±»ä¸æ€§åˆ«æœ‰å…³çš„å¯¹åº”è¯ç­‰è·åˆ†å¸ƒåœ¨éåè§æ–¹å‘çš„ä¸¤ä¾§(çº¢è‰²å‰ªå¤´è¡¨ç¤ºç§»åŠ¨æ–¹å‘ï¼Œçº¢è‰²ç‚¹è¡¨ç¤ºç§»åŠ¨åçš„æ–°åæ ‡)ï¼Œå¦‚ä¸‹å›¾ç¤ºã€‚</p>
<p><img src="/images/deeplearning/C5W2-20_1.png" width="700"></p>
<h2 id="11-Reference"><a href="#11-Reference" class="headerlink" title="11. Reference"></a>11. Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
<li><a href="https://www.ctolib.com/Yukong-Deeplearning-ai-Solutions.html" target="_blank" rel="external">deeplearning.aiæ·±åº¦å­¦ä¹ è¯¾ç¨‹å­—å¹•ç¿»è¯‘é¡¹ç›®</a></li>
<li><a href="https://blog.csdn.net/Jerr__y/article/details/53749693" target="_blank" rel="external">seq2seqå­¦ä¹ ç¬”è®°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sequence Models (week1) - Recurrent Neural Networks]]></title>
      <url>http://shopee.ai/2018/07/26/deeplearning/Sequence-Models-week1/</url>
      <content type="html"><![CDATA[<p>è¿™æ¬¡æˆ‘ä»¬è¦å­¦ä¹ ä¸“é¡¹è¯¾ç¨‹ä¸­ç¬¬äº”é—¨è¯¾ <strong>Sequence Models</strong>.</p>
<p><strong>ç¬¬ä¸€å‘¨:  Recurrent Neural Networks</strong> å·²è¢«è¯æ˜åœ¨æ—¶é—´æ•°æ®ä¸Šè¡¨ç°å¥½ï¼Œå®ƒæœ‰å‡ ä¸ªå˜ä½“ï¼ŒåŒ…æ‹¬ LSTMã€GRU å’ŒåŒå‘ç¥ç»ç½‘ç»œ.</p>
<a id="more"></a>
<h2 id="1-Why-sequence-models"><a href="#1-Why-sequence-models" class="headerlink" title="1. Why sequence models?"></a>1. Why sequence models?</h2><p>ä¸ºä»€ä¹ˆè¦å­¦ä¹ åºåˆ—æ¨¡å‹å‘¢? åºåˆ—æ¨¡å‹, æ™®éç§°ä¸º RNN (é€’å½’ç¥ç»ç½‘ç»œ - Recurrent Neural Network), åšä¸ºæ·±åº¦å­¦ä¹ ä¸­éå¸¸é‡è¦çš„ä¸€ç¯ï¼Œæœ‰ç€æ¯”æ™®é€šç¥ç»ç½‘ç»œæ›´å¹¿çš„å®½åº¦ä¸æ›´å¤šçš„å¯èƒ½æ€§ï¼Œå…¶åº”ç”¨é¢†åŸŸåŒ…æ‹¬ä½†ä¸é™äºâ€œè¯­éŸ³è¯†åˆ«â€ï¼Œ â€œNLPâ€ï¼Œ â€œDNAåºåˆ—åˆ†æâ€ï¼Œâ€œMachine Translationâ€ï¼Œ â€œè§†é¢‘åŠ¨ä½œåˆ†æâ€ï¼Œç­‰ç­‰â€¦ æœ‰è¿™æ ·ä¸€ç§è¯´æ³•ï¼Œä¹Ÿè®¸å¹¶ä¸ä¸¥è°¨ï¼Œä½†æœ‰åŠ©äºæˆ‘ä»¬ç†è§£RNNï¼Œå¤§æ„æ˜¯è¿™æ ·çš„:</p>
<blockquote>
<p>æ™®é€šç¥ç»ç½‘ç»œå¤„ç†çš„æ˜¯ä¸€ç»´çš„æ•°æ®ï¼ŒCNN å¤„ç†çš„æ˜¯äºŒç»´çš„æ•°æ®ï¼ŒRNN å¤„ç†çš„æ˜¯ä¸‰ç»´çš„æ•°æ®</p>
<p>æœ€ç›´è§‚çš„ç†è§£æ˜¯åœ¨ CNN å¯¹å›¾ç‰‡çš„åˆ†æåŸºç¡€ä¸Šï¼ŒRNN å¯ä»¥å¯¹è§†é¢‘è¿›è¡Œåˆ†æï¼Œè¿™é‡Œä¹Ÿå°±å¼•å…¥äº†ç¬¬ä¸‰ç»´â€œæ—¶é—´â€çš„æ¦‚å¿µ</p>
</blockquote>
<p><img src="/images/deeplearning/C5W1-1_1.png" width="700"></p>
<p>è¿™ä¸€å°èŠ‚é€šè¿‡ä¸€ä¸ªå°ä¾‹å­ä¸ºæˆ‘ä»¬æ‰“å¼€åºåˆ—æ¨¡å‹çš„å¤§é—¨ï¼Œä¾‹å­å¦‚ä¸‹:</p>
<blockquote>
<p>ç»™å‡ºè¿™æ ·ä¸€ä¸ªå¥å­ â€œHarry Potter and Herminone Granger invented a new spell.â€(å“ˆåˆ©æ³¢ç‰¹ä¸èµ«æ•æ ¼å…°æ°å‘æ˜äº† ä¸€ä¸ªæ–°çš„å’’è¯­ã€‚)ï¼Œ æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯åœ¨è¿™ä¸ªå¥å­ä¸­å‡†ç¡®çš„å®šä½åˆ°äººå Harry Potter å’Œ Herminone Granger. ç”¨æ·±åº¦å­¦ä¹ çš„è¯­è¨€æ¥æè¿°å¦‚ä¸‹å›¾ - æ¯ä¸€ä¸ªå•è¯å¯¹åº”ä¸€ä¸ªè¾“å‡º 0 æˆ–è€… 1ï¼Œ1 ä»£è¡¨ç€æ˜¯äººåï¼Œ0 ä»£è¡¨ä¸æ˜¯ã€‚</p>
</blockquote>
<p><img src="/images/deeplearning/C5W1-2_2.png" width="750"></p>
<blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦è§£å†³çš„ä¸€ä¸ªé—®é¢˜æ˜¯<code>å¦‚ä½•æ‰èƒ½ä»£è¡¨ä¸€ä¸ªå•è¯?</code>ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¾‹å­ä¸­çš„ â€œHarryâ€ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ç§æ–°çš„ç¼–ç æ–¹å¼ï¼Œ å°±æ˜¯ç”¨å¦ä¸€ç§æ–¹å¼æ¥ä»£è¡¨æ¯ä¸€ä¸ªå•è¯ - ç‹¬çƒ­ç¼–ç ï¼ˆ<strong>One-Hot Encoding</strong>ï¼‰ã€‚ å…·ä½“æµç¨‹æ˜¯è¿™æ ·ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ 10000 ä¸ªå¸¸ç”¨è¯ï¼Œä¸ºå…¶æ„å»ºä¸€ä¸ª10000*1 çš„çŸ©é˜µ(column matrix)ï¼Œå‡å¦‚ç¬¬ä¸€ä¸ªè¯æ˜¯è‹¹æœ(apple), é‚£ä¹ˆå¯¹åº”çš„ç¬¬ä¸€ä¸ªä½ç½®ä¸º 1ï¼Œå…¶ä»–éƒ½ä¸º 0ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºç‹¬çƒ­ã€‚è¿™æ ·æ¯ä¸ªå•è¯éƒ½æœ‰å¯¹åº”çš„çŸ©é˜µè¿›è¡Œè¡¨ç¤ºï¼Œå¦‚æœè¿™ä¸ªè¯æ²¡æœ‰å‡ºç°åœ¨æˆ‘ä»¬çš„å­—å…¸ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç»™ä¸€ä¸ªç‰¹æ®Šçš„ç¬¦å·ä»£æ›¿ï¼Œå¸¸ç”¨çš„æ˜¯ <unk> (unknown)</unk></p>
</blockquote>
<h2 id="2-Notation"><a href="#2-Notation" class="headerlink" title="2. Notation"></a>2. Notation</h2><p>ä¸ºäº†åé¢æ–¹ä¾¿è¯´æ˜ï¼Œå…ˆå°†ä¼šç”¨åˆ°çš„æ•°å­¦ç¬¦å·è¿›è¡Œä»‹ç». ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦å®šä½ä¸€å¥è¯ä¸­äººåå‡ºç°çš„ä½ç½®.</p>
<p><img src="/images/deeplearning/C5W1-2_1.png" width="750"></p>
<blockquote>
<ul>
<li>çº¢è‰²æ¡†ä¸­çš„ä¸ºè¾“å…¥ã€è¾“å‡ºå€¼ã€‚å¯ä»¥çœ‹åˆ°äººåè¾“å‡ºç”¨ 1 è¡¨ç¤ºï¼Œåä¹‹ç”¨ 0 è¡¨ç¤ºï¼›</li>
<li><p>ç»¿è‰²æ¡†ä¸­çš„ $x^{&lt; t >}$,$y^{&lt; t >}$ è¡¨ç¤ºå¯¹åº”çº¢è‰²æ¡†ä¸­çš„è¾“å…¥è¾“å‡ºå€¼çš„æ•°å­¦è¡¨ç¤ºï¼Œæ³¨æ„ä» 1 å¼€å§‹.</p>
</li>
<li><p>ç°è‰²æ¡†ä¸­çš„ $T_x,T_y$ åˆ†åˆ«è¡¨ç¤ºè¾“å…¥è¾“å‡ºåºåˆ—çš„é•¿åº¦ï¼Œåœ¨è¯¥ä¾‹ä¸­ï¼Œ$T_x=9,T_y=9$</p>
</li>
<li><p>é»„è‰²æ¡†ä¸­ $X^{(i)&lt; t >}$ ä¸Šçš„è¡¨ç¤º<strong>ç¬¬ $i$ ä¸ªè¾“å…¥æ ·æœ¬çš„ç¬¬ $t$ ä¸ªè¾“å…¥å€¼</strong>ï¼Œ$T_x^{ (i) }$ åˆ™è¡¨ç¤ºç¬¬ <strong>$i$</strong> ä¸ªè¾“å…¥æ ·æœ¬çš„é•¿åº¦ã€‚è¾“å‡º <strong>$y$</strong> ä¹ŸåŒç†.</p>
</li>
</ul>
</blockquote>
<p>è¾“å…¥å€¼ä¸­æ¯ä¸ªå•è¯ä½¿ç”¨ <strong>One-Hot</strong> æ¥è¡¨ç¤ºã€‚å³é¦–å…ˆä¼šæ„å»ºä¸€ä¸ªå­—å…¸(Dictionary), å‡è®¾è¯¥ä¾‹ä¸­çš„å­—å…¸ç»´åº¦æ˜¯ 10000*1 (å¦‚å›¾ç¤º)ã€‚ç¬¬ä¸€ä¸ªå•è¯ â€œHarryâ€ çš„æ•°å­¦è¡¨ç¤ºå½¢å¼å³ä¸º [0,0,0,â€¦â€¦,1 (åœ¨ç¬¬4075ä½) ,0,â€¦â€¦,0]ï¼Œå…¶ä»–å•è¯åŒç†ã€‚</p>
<p>ä½†æ˜¯å¦‚æœæŸä¸€ä¸ªå•è¯å¹¶æ²¡æœ‰è¢«åŒ…å«åœ¨å­—å…¸ä¸­æ€ä¹ˆåŠå‘¢ï¼Ÿæ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–°çš„æ ‡è®°ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå«åš Unknown Word çš„ä¼ªé€ å•è¯ï¼Œç”¨ &lt;<strong>UNK</strong>&gt; è¡¨ç¤ºã€‚å…·ä½“çš„ç»†èŠ‚ä¼šåœ¨åé¢ä»‹ç»ã€‚</p>
<p><img src="/images/deeplearning/C5W1-3_1.png" width="750"></p>
<h2 id="3-Recurrent-Neural-Network-Model"><a href="#3-Recurrent-Neural-Network-Model" class="headerlink" title="3. Recurrent Neural Network Model"></a>3. Recurrent Neural Network Model</h2><p>åœ¨ä»‹ç» RNN ä¹‹å‰ï¼Œé¦–å…ˆè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆä¹‹å‰çš„æ ‡å‡†ç½‘ç»œä¸å†é€‚ç”¨äº†ã€‚å› ä¸ºå®ƒæœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼š</p>
<ul>
<li>è¾“å…¥å’Œè¾“å‡ºçš„é•¿åº¦ä¸å°½ç›¸åŒ</li>
<li>æ— æ³•å…±äº«ä»å…¶ä»–ä½ç½®å­¦æ¥çš„ç‰¹å¾<blockquote>
<p>ä¾‹å¦‚ä¸Šä¸€èŠ‚ä¸­çš„ <strong>Harry</strong> è¿™ä¸ªè¯æ˜¯ç”¨ $x^{<1>}$ è¡¨ç¤ºçš„ï¼Œç½‘ç»œä»è¯¥ä½ç½®å­¦ä¹ äº†å®ƒæ˜¯ä¸€ä¸ªäººåã€‚ä½†æˆ‘ä»¬å¸Œæœ›æ— è®º <strong>Harry</strong> åœ¨å“ªä¸ªä½ç½®å‡ºç°ç½‘ç»œéƒ½èƒ½è¯†åˆ«å‡ºè¿™æ˜¯ä¸€ä¸ªäººåçš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ ‡å‡†ç½‘ç»œæ— æ³•åšåˆ°è¿™ä¸€ç‚¹.</1></p>
</blockquote>
</li>
</ul>
<p><img src="/images/deeplearning/C5W1-4_1.png" width="750"></p>
<blockquote>
<p>è¾“å…¥å±‚ï¼Œæ¯”å¦‚æ¯ä¸ª $x^{<1>}$ éƒ½æ˜¯ä¸€ä¸ª 1000 ç»´çš„å‘é‡ï¼Œè¿™æ ·è¾“å…¥å±‚å¾ˆåºå¤§, é‚£ä¹ˆç¬¬ä¸€å±‚çš„æƒé‡çŸ©é˜µå°±æœ‰ç€å·¨å¤§çš„å‚æ•°.</1></p>
</blockquote>
<h3 id="3-1-RNN-ç»“æ„"><a href="#3-1-RNN-ç»“æ„" class="headerlink" title="3.1 RNN ç»“æ„"></a>3.1 RNN ç»“æ„</h3><p><img src="/images/deeplearning/C5W1-50_1.png" width="550"></p>
<p>è¿˜æ˜¯ä»¥è¯†åˆ«äººåä¸ºä¾‹,ç¬¬ä¸€ä¸ªå•è¯ $x^{<1>}$ è¾“å…¥ç¥ç»ç½‘ç»œå¾—åˆ°è¾“å‡º $y^{<1>}$</1></1></p>
<p><img src="/images/deeplearning/C5W1-5_1.png" width="90"></p>
<p>åŒç†, ç”± $x^{<2>}$ å°†å¾—åˆ° $y^{<2>}$,ä»¥æ­¤ç±»æ¨ã€‚ä½†æ˜¯è¿™å°±æ˜¯ä¼ ç»Ÿç½‘ç»œå­˜åœ¨çš„é—®é¢˜ï¼Œå³å•è¯ä¹‹é—´æ²¡æœ‰è”ç³»</2></2></p>
<p><img src="/images/deeplearning/C5W1-6_1.png" width="90"></p>
<p>ä¸ºäº†å°†å•è¯ä¹‹é—´å…³è”èµ·æ¥ï¼Œæ‰€ä»¥å°†å‰ä¸€å±‚çš„ç»“æœä¹Ÿä½œä¸ºä¸‹ä¸€å±‚çš„è¾“å…¥æ•°æ®ã€‚å¦‚ä¸‹å›¾ç¤º</p>
<p><img src="/images/deeplearning/C5W1-7_1.png" width="250"></p>
<p>æ•´ä½“çš„ RNN ç»“æ„æœ‰ä¸¤ç§è¡¨ç¤ºå½¢å¼ï¼Œå¦‚ä¸‹å›¾ç¤º, å·¦è¾¹æ˜¯å®Œæ•´çš„è¡¨è¾¾å½¢å¼ï¼Œæ³¨æ„ç¬¬ä¸€å±‚çš„ $a^{<0>}$ ä¸€èˆ¬è®¾ç½®ä¸º 0å‘é‡.</0></p>
<p><img src="/images/deeplearning/C5W1-8_1.png" width="750"></p>
<blockquote>
<p>è¦å¼€å§‹æ•´ä¸ªæµç¨‹, éœ€è¦ç¼–é€ ä¸€ä¸ªæ¿€æ´»å€¼, è¿™é€šå¸¸æ˜¯ 0å‘é‡, æœ‰äº›ç ”ç©¶äººå‘˜ä¼šç”¨å…¶ä»–æ–¹æ³•éšæœºåˆå§‹åŒ– $a^{<0>}=\vec{0}$. ä¸è¿‡ä½¿ç”¨ 0å‘é‡ï¼Œä½œä¸º 0æ—¶åˆ» çš„ä¼ªæ¿€æ´»å€¼ æ˜¯æœ€å¸¸è§çš„é€‰æ‹©. å› æ­¤æˆ‘ä»¬æŠŠå®ƒè¾“å…¥ç¥ç»ç½‘ç»œ.</0></p>
<p>(å³è¾¹çš„ç¤ºæ„å›¾æ˜¯ RNN çš„ç®€å†™ç¤ºæ„å›¾)</p>
</blockquote>
<hr>
<p>ä»‹ç»å®Œç»“æ„ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“ç½‘ç»œä¸­å‚æ•°çš„è¡¨è¾¾æ–¹å¼åŠå…¶å«ä¹‰ã€‚å¦‚ä¸‹å›¾ç¤ºï¼Œ$x^{&lt;{i}&gt;}$ åˆ°ç½‘ç»œçš„å‚æ•°ç”¨ $W_{ax}$ è¡¨ç¤ºï¼Œ$a^{&lt;{i}&gt;}$ åˆ°ç½‘ç»œçš„å‚æ•°ç”¨ $W_{aa}$ è¡¨ç¤ºï¼Œ$y^{&lt;{i}&gt;}$ åˆ°ç½‘ç»œçš„å‚æ•°ç”¨ $W_{ya}$ è¡¨ç¤ºï¼Œå…·ä½“å«ä¹‰å°†åœ¨ä¸‹é¢è¿›è¡Œè¯´æ˜.</p>
<p><img src="/images/deeplearning/C5W1-9_1.png" width="750"></p>
<blockquote>
<p>$x^{<1>}$ é€šè¿‡ç½‘ç»œå¯ä»¥ä¼ é€’åˆ° $y^{<3>}$</3></1></p>
<p>ä½†æ˜¯è¿™å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå³æ¯ä¸ªè¾“å‡ºåªä¸å‰é¢çš„è¾“å…¥æœ‰å…³ï¼Œè€Œä¸åé¢çš„æ— å…³ã€‚è¿™ä¸ªé—®é¢˜ä¼šåœ¨åç»­å†…å®¹ä¸­è¿›è¡Œæ”¹è¿›. </p>
<p>ä¸¾ä¸ªğŸŒ°: He said, â€œTeddy Roosevelt was a great President.â€</p>
<p>å¯¹äºè¿™å¥è¯ï¼ŒåªçŸ¥é“ <strong>He said</strong> å‰é¢ä¸¤ä¸ªè¯ï¼Œæ¥åˆ¤æ–­ Teddy æ˜¯å¦æ˜¯äººåæ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€åé¢çš„ä¿¡æ¯.ï¼ˆBRNN å¯å¤„ç†è¿™é—®é¢˜ï¼‰</p>
</blockquote>
<h3 id="3-2-RNN-Forward-Propagation"><a href="#3-2-RNN-Forward-Propagation" class="headerlink" title="3.2 RNN Forward Propagation"></a>3.2 RNN Forward Propagation</h3><p>çœ‹ RNN Forward Propagation ä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹åŸºæœ¬çš„æ ‡å‡†ç½‘ç»œ</p>
<p><img src="/images/deeplearning/C1W3-1_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W3-4_1.png" width="750"></p>
<p>RNN åœ¨æ­£å‘ä¼ æ’­çš„è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ° <code>a</code> çš„å€¼éšç€æ—¶é—´çš„æ¨ç§»è¢«ä¼ æ’­äº†å‡ºå»ï¼Œä¹Ÿå°±ä¸€å®šç¨‹åº¦ä¸Šä¿å­˜äº†å•è¯ä¹‹é—´çš„ç‰¹æ€§:</p>
<p><img src="/images/deeplearning/C5W1-10_1.png" width="750"></p>
<blockquote>
<p>$a^{<0>}=\vec{0}$</0></p>
<p>$a^{<1>}=g_1(W_{aa}a^{<0>}+W_{ax}x^{<1>}+b_a)$</1></0></1></p>
<p>$y^{<1>}=g_2(W_{ya}a^{<1>}+b_y)$</1></1></p>
<p>$a^{&lt;{t}&gt;}=g_1(W_{aa}a^{&lt;{t-1}&gt;}+W_{ax}x^{&lt;{t}&gt;}+b_a)$</p>
<p>$y^{&lt;{t}&gt;}=g_2(W_{ya}a^{&lt;{t}&gt;}+b_y)$</p>
<p>æ¿€æ´»å‡½æ•°ï¼š<strong>$g_1$</strong> ä¸€èˆ¬ä¸º <strong><code>tanh</code>å‡½æ•°</strong> (æˆ–è€…æ˜¯ <strong><code>Relu</code>å‡½æ•°</strong>)ï¼Œ<strong>$g_2$</strong> ä¸€èˆ¬æ˜¯ <strong><code>Sigmod</code>å‡½æ•°</strong>.</p>
<p>æ³¨æ„: å‚æ•°çš„ä¸‹æ ‡æ˜¯æœ‰é¡ºåºå«ä¹‰çš„ï¼Œå¦‚ $W_{ax}$ ä¸‹æ ‡çš„ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºè¦è®¡ç®—çš„é‡çš„ç±»å‹ï¼Œå³è¦è®¡ç®— $a$ çŸ¢é‡ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºè¦è¿›è¡Œä¹˜æ³•è¿ç®—çš„æ•°æ®ç±»å‹ï¼Œå³éœ€è¦ä¸ $x$ çŸ¢é‡åšè¿ç®—ã€‚å¦‚ $W_{ax} x^{t}\rightarrow{a}$</p>
</blockquote>
<p><img src="/images/deeplearning/C5W1-19_1.png" width="750"></p>
<p><strong>Tx</strong> ï¼Œ <strong>Ty</strong> æ˜¯æ—¶é—´å•ä½, è¿™é‡Œç»Ÿç§°ä¸ºâ€œæ—¶åˆ»â€ï¼Œåœ¨è¿™ä¾‹å­ä¸­å¯¹åº”ä¸åŒæ—¶åˆ»æ˜¯è¾“å…¥çš„ç¬¬å‡ ä¸ªå•è¯ï¼Œ <strong>x</strong> æ˜¯â€œè¾“å…¥å€¼â€ï¼Œä¾‹å­ä¸­æ˜¯å½“å‰æ—¶åˆ»çš„å•è¯ï¼ˆä»¥ç‹¬çƒ­ç¼–ç çš„å½¢å¼ï¼‰ï¼Œ <strong>y</strong> æ˜¯â€œè¾“å‡ºå€¼â€ <strong>0</strong> æˆ–è€… <strong>1</strong>ï¼Œ <strong>a</strong> ç§°ä¸ºæ¿€æ´»å€¼ç”¨äºå°†å‰ä¸€ä¸ªå•å…ƒçš„è¾“å‡ºç»“æœä¼ é€’åˆ°ä¸‹ä¸€ä¸ªå•å…ƒï¼Œ <strong>Wax</strong> <strong>Way</strong> <strong>Waa</strong> æ˜¯ä¸åŒçš„â€œæƒé‡çŸ©é˜µâ€ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç¥ç»ç½‘ç»œ update çš„å€¼ã€‚æ¯ä¸€ä¸ªå•å…ƒæœ‰ä¸¤ä¸ªè¾“å…¥ï¼Œ$a^{&lt;{T_x-1}&gt;}$ å’Œ <strong>x</strong> ï¼Œæœ‰ä¸¤ä¸ªè¾“å‡º $a^{&lt;{T_x}&gt;}$ å’Œ <strong>y</strong> . å›¾ä¸­æ²¡æœ‰å‡ºç°çš„ g æ˜¯â€œæ¿€æ´»å‡½æ•°â€ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">ç¬¦å·</th>
<th style="text-align:center">åå­—</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$x$</td>
<td style="text-align:center">è¾“å…¥å€¼</td>
</tr>
<tr>
<td style="text-align:center">$a$</td>
<td style="text-align:center">æ¿€æ´»å€¼</td>
</tr>
<tr>
<td style="text-align:center">$T_x$, $T_y$</td>
<td style="text-align:center">$x$,$y$ æ—¶åˆ»</td>
</tr>
<tr>
<td style="text-align:center">Wax, Way, Waa</td>
<td style="text-align:center">æƒé‡çŸ©é˜µ</td>
</tr>
</tbody>
</table>
<h3 id="3-3-Simplified-RNN-notation"><a href="#3-3-Simplified-RNN-notation" class="headerlink" title="3.3 Simplified RNN notation"></a>3.3 Simplified RNN notation</h3><p>ä¸‹é¢å°†å¯¹å¦‚ä¸‹å…¬å¼è¿›è¡ŒåŒ–ç®€ï¼š</p>
<p><img src="/images/deeplearning/C5W1-11_1.png" width="400"></p>
<p><strong>1. ç®€åŒ– $a^{&lt;{t}&gt;}$</strong></p>
<p>$$<br>\begin{align}<br>a^{&lt;{t}&gt;}&amp;= g(W_{aa}a^{&lt;{t-1}&gt;}+W_{ax}x^{&lt;{t}&gt;}+b_a) \notag \\<br>&amp;= g(W_a [a^{&lt;{t-1}&gt;},x^{&lt;{t}&gt;}]^{T}+b_a) \notag<br>\end{align}<br>$$</p>
<p><img src="/images/deeplearning/C5W1-12_1.png" width="750"></p>
<blockquote>
<p>æ³¨æ„ï¼Œå…¬å¼ä¸­ä½¿ç”¨äº†ä¸¤ä¸ªçŸ©é˜µè¿›è¡ŒåŒ–ç®€ï¼Œåˆ†åˆ«æ˜¯ $W_a$ å’Œ $[a^{&lt;{t-1}&gt;},x^{&lt;{t}&gt;}]^T$ (ä½¿ç”¨è½¬ç½®ç¬¦å·æ›´æ˜“ç†è§£),ä¸‹é¢åˆ†åˆ«è¿›è¡Œè¯´æ˜ï¼š</p>
</blockquote>
<p>$W_a = [ W_{aa}, W_{ax} ]$, å‡è®¾ $W_{aa}$ æ˜¯ (100,100) çš„çŸ©é˜µï¼Œ$W_{ax}$ æ˜¯ (100,10000) çš„çŸ©é˜µ,é‚£ä¹ˆ $W$ åˆ™æ˜¯ (100,10100) çš„çŸ©é˜µ.</p>
<p><img src="/images/deeplearning/C5W1-13_1.png" width="550"></p>
<p>$[a^{&lt;{t-1}&gt;},x^{&lt;{t}&gt;}]^T$ æ˜¯ä¸‹å›¾ç¤ºæ„:</p>
<p><img src="/images/deeplearning/C5W1-14_1.png" width="550"></p>
<p>æ•… $W_a [a^{&lt;{t-1}&gt;},x^{&lt;{t}&gt;}]^{T}$ çŸ©é˜µè®¡ç®—å¦‚ä¸‹å›¾ç¤º:</p>
<p><img src="/images/deeplearning/C5W1-15_1.png" width="550"></p>
<p><strong>2. ç®€åŒ– $y^{&lt;{t}&gt;}$</strong></p>
<p><img src="/images/deeplearning/C5W1-16_1.png" width="550"></p>
<p>è¯¥èŠ‚PPTå†…å®¹ï¼š</p>
<p><img src="/images/deeplearning/C5W1-17_1.png" width="750"></p>
<p>å†å›é¡¾ä¸‹å¹²å‡€çš„å‰å‘ä¼ æ’­æ¦‚è§ˆå›¾:</p>
<p><img src="/images/deeplearning/C5W1-20_1.png" width="750"></p>
<h2 id="4-Backpropagation-through-time"><a href="#4-Backpropagation-through-time" class="headerlink" title="4. Backpropagation through time"></a>4. Backpropagation through time</h2><p>RNN çš„åå‘ä¼ æ’­é€šå¸¸éƒ½ç”±ç±»ä¼¼ Tensorflowã€Torch ä¹‹ç±»çš„åº“æˆ–è€…æ¡†æ¶å¸®ä½ å®Œæˆï¼Œä¸è¿‡æ„Ÿå®˜ä¸Šå’Œæ™®é€šç¥ç»ç½‘ç»œç±»ä¼¼ï¼Œç®—æ¢¯åº¦å€¼ç„¶åæ›´æ–°æƒé‡çŸ©é˜µ.</p>
<p>ä½†æ˜¯ä¸‹é¢è¿™é‡Œä¾ç„¶ä¼šå¯¹<strong>åå‘ä¼ æ’­</strong>è¿›è¡Œè¯¦ç»†çš„ä»‹ç»ï¼Œè·Ÿç€ä¸‹é¢ä¸€å¼ ä¸€å¼ çš„å›¾ç‰‡èµ°èµ·æ¥ ğŸ˜„ğŸ˜„:</p>
<h3 id="4-1-æ•´ä½“æ„Ÿå—"><a href="#4-1-æ•´ä½“æ„Ÿå—" class="headerlink" title="4.1 æ•´ä½“æ„Ÿå—"></a>4.1 æ•´ä½“æ„Ÿå—</h3><p>é¦–å…ˆå†å›é¡¾ä¸€ä¸‹ RNN çš„æ•´ä½“ç»“æ„:</p>
<p><img src="/images/deeplearning/C5W1-20_1.png" width="750"></p>
<p>è¦è¿›è¡Œåå‘ä¼ æ’­ï¼Œé¦–å…ˆéœ€è¦å‰å‘ä¼ æ’­ï¼Œä¼ æ’­æ–¹å‘å¦‚è“è‰²ç®­å¤´æ‰€ç¤ºï¼Œå…¶æ¬¡å†æŒ‰ç…§çº¢è‰²ç®­å¤´è¿›è¡Œåå‘ä¼ æ’­</p>
<p><img src="/images/deeplearning/C5W1-18_1.png" width="750"></p>
<h3 id="4-2-å‰å‘ä¼ æ’­"><a href="#4-2-å‰å‘ä¼ æ’­" class="headerlink" title="4.2 å‰å‘ä¼ æ’­"></a>4.2 å‰å‘ä¼ æ’­</h3><p>é¦–å…ˆç»™å‡ºæ‰€æœ‰è¾“å…¥æ•°æ®ï¼Œå³ä» $x^{<1>}$ åˆ° $x^{&lt;{T_x}&gt;}$, $T_x$ è¡¨ç¤ºè¾“å…¥æ•°æ®çš„æ•°é‡.</1></p>
<p><img src="/images/deeplearning/C5W1-21_1.png" width="650"></p>
<p>åˆå§‹åŒ–å‚æ•° $W_a$, $b_a$ï¼Œå°†è¾“å…¥æ•°æ®è¾“å…¥ç½‘ç»œå¾—åˆ°å¯¹åº”çš„ $a^{&lt;{t}&gt;}$</p>
<p><img src="/images/deeplearning/C5W1-22_1.png" width="650"></p>
<p>å†é€šè¿‡ä¸åˆå§‹åŒ–å‚æ•° $W_y$, $b_y$ å¾—åˆ° $y^{&lt;{t}&gt;}$</p>
<p><img src="/images/deeplearning/C5W1-23_1.png" width="650"></p>
<h3 id="4-3-æŸå¤±å‡½æ•°å®šä¹‰"><a href="#4-3-æŸå¤±å‡½æ•°å®šä¹‰" class="headerlink" title="4.3 æŸå¤±å‡½æ•°å®šä¹‰"></a>4.3 æŸå¤±å‡½æ•°å®šä¹‰</h3><p>è¦è¿›è¡Œåå‘ä¼ æ’­ï¼Œå¿…é¡»å¾—æœ‰æŸå¤±å‡½æ•°å˜›ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†æŸå¤±å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p><strong>æ¯ä¸ªèŠ‚ç‚¹çš„æŸå¤±å‡½æ•°:</strong></p>
<p>$$<br>L^{&lt;{t}&gt;}(\hat{y}^{&lt;{t}&gt;},y^{&lt;{t}&gt;})=y^{&lt;{t}&gt;}log(y^{&lt;{t}&gt;})-(1-y^{&lt;{t}&gt;})log(1-\hat{y}^{&lt;{t}&gt;})<br>$$</p>
<p><strong>æ•´ä¸ªç½‘ç»œçš„æŸå¤±å‡½æ•°:</strong></p>
<p>$$<br>L(\hat{y}^{&lt;{t}&gt;},y^{&lt;{t}&gt;)}) = \sum_{t=1}^{T_y}L^{&lt;{t}&gt;}(\hat{y}^{&lt;{t}&gt;},y^{&lt;{t}&gt;})<br>$$</p>
<p><img src="/images/deeplearning/C5W1-24_1.png" width="750"></p>
<h3 id="4-4-åå‘ä¼ æ’­"><a href="#4-4-åå‘ä¼ æ’­" class="headerlink" title="4.4 åå‘ä¼ æ’­"></a>4.4 åå‘ä¼ æ’­</h3><p><img src="/images/deeplearning/C5W1-25_1.png" width="750"></p>
<h3 id="4-5-æ•´ä¸ªæµç¨‹å›¾"><a href="#4-5-æ•´ä¸ªæµç¨‹å›¾" class="headerlink" title="4.5 æ•´ä¸ªæµç¨‹å›¾"></a>4.5 æ•´ä¸ªæµç¨‹å›¾</h3><p><img src="/images/deeplearning/C5W1-26_1.png" width="750"></p>
<h2 id="5-Different-types-of-RNNs"><a href="#5-Different-types-of-RNNs" class="headerlink" title="5. Different types of RNNs"></a>5. Different types of RNNs</h2><p><strong>RNN çš„ä¸åŒåº”ç”¨é¢†åŸŸ:</strong></p>
<p>åºåˆ—æ¨¡å‹å¯¹è¾“å…¥ä¸è¾“å‡ºçš„é•¿åº¦æ²¡æœ‰è¦æ±‚ï¼Œåœ¨å¸¸è§çš„ä¾‹å­ä¸­ï¼Œæœºå™¨ç¿»è¯‘å°±æ˜¯å¤šä¸ªè¾“å…¥ä¸å¤šä¸ªè¾“å‡ºï¼Œç®€ç§°â€œå¤šå¯¹å¤šâ€ï¼Œ è¯­éŸ³è¯†åˆ«å¯è§†ä¸ºâ€œå•å¯¹å¤šâ€ï¼Œ å®ƒçš„åä¾‹æ˜¯éŸ³ä¹ç”Ÿæˆ-â€œå¤šå¯¹å•â€ã€‚è¯¾ç¨‹ä¸­ä»‹ç»äº†å¤šç§å¯èƒ½çš„ RNN æ¨¡å¼ï¼Œæˆ‘ä»¬ç”¨ä¸‹é¢ä¸€å¼ å›¾æ¦‚æ‹¬ï¼š</p>
<p><img src="/images/deeplearning/C5W1-27_1.png" width="800"></p>
<p>RNN ä¸åŒçš„ç»“æ„ç»™äº†æˆ‘ä»¬æ›´å¤šçš„å¯èƒ½æ€§.</p>
<h2 id="6-Language-model-and-sequence-generation"><a href="#6-Language-model-and-sequence-generation" class="headerlink" title="6. Language model and sequence generation"></a>6. Language model and sequence generation</h2><p>è¯­è¨€æ¨¡å‹å’Œåºåˆ—ç”Ÿæˆ</p>
<h3 id="6-1-ä»€ä¹ˆæ˜¯è¯­è¨€æ¨¡å‹"><a href="#6-1-ä»€ä¹ˆæ˜¯è¯­è¨€æ¨¡å‹" class="headerlink" title="6.1 ä»€ä¹ˆæ˜¯è¯­è¨€æ¨¡å‹"></a>6.1 ä»€ä¹ˆæ˜¯è¯­è¨€æ¨¡å‹</h3><p>å‡¡äº‹å¼€å¤´ä¸¾ä¸ªğŸŒ°ï¼Œä¸€åˆ‡éƒ½å¥½è¯´ï¼š</p>
<p>å‡è®¾ä¸€ä¸ªè¯­éŸ³è¯†åˆ«ç³»ç»Ÿå¬ä¸€å¥è¯å¾—åˆ°äº†å¦‚ä¸‹ä¸¤ç§é€‰æ‹©ï¼Œä½œä¸ºæ­£å¸¸äººè‚¯å®šä¼šé€‰æ‹©ç¬¬äºŒç§ã€‚ä½†æ˜¯æœºå™¨æ‰å¦‚ä½•åšåˆ¤æ–­å‘¢ï¼Ÿ</p>
<p><img src="/images/deeplearning/C5W1-28_1.png" width="600"></p>
<p>æ­¤æ—¶å°±éœ€è¦é€šè¿‡è¯­è¨€æ¨¡å‹æ¥é¢„æµ‹æ¯å¥è¯çš„æ¦‚ç‡ï¼š</p>
<p><img src="/images/deeplearning/C5W1-29_1.png" width="600"></p>
<h3 id="6-2-å¦‚ä½•ä½¿ç”¨-RNN-æ„å»ºè¯­è¨€æ¨¡å‹"><a href="#6-2-å¦‚ä½•ä½¿ç”¨-RNN-æ„å»ºè¯­è¨€æ¨¡å‹" class="headerlink" title="6.2 å¦‚ä½•ä½¿ç”¨ RNN æ„å»ºè¯­è¨€æ¨¡å‹"></a>6.2 å¦‚ä½•ä½¿ç”¨ RNN æ„å»ºè¯­è¨€æ¨¡å‹</h3><ol>
<li>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¾ˆå¤§çš„è¯­æ–™åº“ (<strong>Corpus</strong>)</li>
<li>å°†æ¯ä¸ªå•è¯å­—ç¬¦åŒ– (<strong>Tokenize</strong>ï¼Œ<strong>å³ä½¿ç”¨One-shotç¼–ç </strong>) å¾—åˆ°è¯å…¸,ï¼Œå‡è®¾æœ‰ 10000 ä¸ªå•è¯</li>
<li>è¿˜éœ€è¦æ·»åŠ ä¸¤ä¸ªç‰¹æ®Šçš„å•è¯<blockquote>
<ul>
<li>end of sentence. ç»ˆæ­¢ç¬¦ï¼Œè¡¨ç¤ºå¥å­ç»“æŸ.<br><img src="/images/deeplearning/C5W1-30_1.png" width="600"></li>
<li>UNknown, ä¹‹å‰çš„ç¬”è®°å·²ä»‹ç»è¿‡<br><img src="/images/deeplearning/C5W1-31_1.png" width="600"></li>
</ul>
</blockquote>
</li>
</ol>
<h3 id="6-3-æ„å»ºè¯­è¨€æ¨¡å‹ç¤ºä¾‹"><a href="#6-3-æ„å»ºè¯­è¨€æ¨¡å‹ç¤ºä¾‹" class="headerlink" title="6.3 æ„å»ºè¯­è¨€æ¨¡å‹ç¤ºä¾‹"></a>6.3 æ„å»ºè¯­è¨€æ¨¡å‹ç¤ºä¾‹</h3><p>å‡è®¾è¦å¯¹è¿™å¥è¯è¿›è¡Œå»ºæ¨¡ï¼š<strong>Cats average 15 hours of sleep a day. <eos></eos></strong></p>
<p><strong>1. åˆå§‹åŒ–</strong></p>
<blockquote>
<p>è¿™ä¸€æ­¥æ¯”è¾ƒç‰¹æ®Šï¼Œå³ $x^{<1>}$ å’Œ $a^{<0>}$ éƒ½éœ€è¦åˆå§‹åŒ–ä¸º $\vec{0}$ .<br>æ­¤æ—¶ $\hat{y}^{<1>}$ å°†ä¼šå¯¹ç¬¬ä¸€ä¸ªå­—å¯èƒ½å‡ºç°çš„æ¯ä¸€ä¸ªå¯èƒ½è¿›è¡Œæ¦‚ç‡çš„åˆ¤æ–­,å³ $\hat{y}^{<1>}=[p(a),â€¦,p(cats),â€¦]$.</1></1></0></1></p>
<p>å½“ç„¶åœ¨æœ€å¼€å§‹çš„æ—¶å€™æ²¡æœ‰ä»»ä½•çš„ä¾æ®ï¼Œå¯èƒ½å¾—åˆ°çš„æ˜¯å®Œå…¨ä¸ç›¸å¹²çš„å­—ï¼Œå› ä¸ºåªæ˜¯æ ¹æ®åˆå§‹çš„å€¼å’Œæ¿€æ´»å‡½æ•°åšå‡ºçš„å–æ ·ã€‚</p>
<p><img src="/images/deeplearning/C5W1-32_1.png" width="500"></p>
</blockquote>
<p><strong>2. å°†çœŸå®å€¼ä½œä¸ºè¾“å…¥å€¼:</strong></p>
<blockquote>
<p>ä¹‹æ‰€ä»¥å°†çœŸå®å€¼ä½œä¸ºè¾“å…¥å€¼å¾ˆå¥½ç†è§£ï¼Œå¦‚æœæˆ‘ä»¬ä¸€ç›´ä¼ é”™è¯¯çš„å€¼ï¼Œå°†æ°¸è¿œä¹Ÿæ— æ³•å¾—åˆ°å­—ä¸å­—ä¹‹é—´çš„å…³ç³»</p>
</blockquote>
<p>å¦‚ä¸‹å›¾ç¤ºï¼Œå°† $y^{<1>}$ æ‰€è¡¨ç¤ºçš„çœŸå®å€¼ Cats ä½œä¸ºè¾“å…¥ï¼Œå³ $x^{<2>}=y^{<1>}$ å¾—åˆ° $\hat{y}^{<2>}$</2></1></2></1></p>
<p>æ­¤æ—¶çš„ $\hat{y}^{<2>}=[p(a|cats),â€¦,p(average|cats),â€¦]$</2></p>
<p>åŒç†æœ‰ $\hat{y}^{<3>}=[p(a|cats\, average),â€¦,p(average|cats\,average),â€¦]$</3></p>
<p>å¦å¤–è¾“å…¥å€¼æ»¡è¶³ï¼š $x^{&lt;{t}&gt;}=y^{&lt;{t-1}&gt;}$</p>
<p><img src="/images/deeplearning/C5W1-33_1.png" width="600"></p>
<p><strong>3. è®¡ç®—å‡ºæŸå¤±å€¼:</strong></p>
<p>ä¸‹å›¾ç»™å‡ºäº†æ„å»ºæ¨¡å‹çš„è¿‡ç¨‹ä»¥åŠæŸå¤±å€¼è®¡ç®—å…¬å¼:</p>
<p><img src="/images/deeplearning/C5W1-34_1.png" width="700"></p>
<blockquote>
<p>éšç€è®­ç»ƒçš„æ¬¡æ•°çš„å¢å¤šï¼Œæˆ–è€…å¸¸ç”¨è¯å‡ºç°çš„é¢‘ç‡çš„å¢å¤šï¼Œè¯­è¨€æ¨¡å‹ä¾¿æ…¢æ…¢çš„ä¼šå¼€å§‹æŒæ¡ç®€å•çš„è¯è¯­æ¯”å¦‚â€œå¹³å‡â€ï¼Œâ€œæ¯å¤©â€ï¼Œâ€œå°æ—¶â€ã€‚ä¸€ä¸ªå®Œå–„çš„è¯­è¨€æ¨¡å‹çœ‹åˆ°ç±»ä¼¼â€œ 10 ä¸ªå°â€çš„æ—¶å€™ï¼Œåº”è¯¥å°±èƒ½å‡†ç¡®çš„åˆ¤å®šä¸‹ä¸€ä¸ªå­—æ˜¯â€œæ—¶â€ã€‚</p>
<p>ï¼ˆå½“ç„¶ä¹Ÿè®¸å®é™…æƒ…å†µæ˜¯â€œ 10 ä¸ªå°æœ‹å‹â€ï¼Œæ‰€ä»¥é€šå¸¸ä¼šæœ‰æ›´å¤šçš„åˆ¤æ–­å› ç´ ï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªä¾‹å­ï¼‰</p>
</blockquote>
<h2 id="7-Sampling-novel-sequences"><a href="#7-Sampling-novel-sequences" class="headerlink" title="7. Sampling novel sequences"></a>7. Sampling novel sequences</h2><p>å½“è®­ç»ƒå¾—åˆ°äº†ä¸€ä¸ªæ¨¡å‹ä¹‹åï¼Œå¦‚æƒ³çŸ¥é“è¿™ä¸ª<strong>æ¨¡å‹å­¦åˆ°äº†äº›ä»€ä¹ˆ</strong>ï¼Œä¸€ä¸ªéæ­£å¼çš„æ–¹æ³•å°±æ˜¯å¯¹æ–°åºåˆ—è¿›è¡Œé‡‡æ ·ã€‚å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>åœ¨æ¯ä¸€æ­¥è¾“å‡º $\hat{y}$ æ—¶ï¼Œé€šå¸¸ä½¿ç”¨ softmax ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œç„¶åæ ¹æ®è¾“å‡ºçš„åˆ†å¸ƒï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªå€¼ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”çš„ä¸€ä¸ªå­— æˆ– è‹±æ–‡å•è¯ã€‚ ç„¶åå°†è¿™ä¸ªå€¼ä½œä¸ºä¸‹ä¸€ä¸ªå•å…ƒçš„ $x$ è¾“å…¥è¿›å» (å³ $x^{&lt;{t}&gt;}=\hat{y}^{&lt;{t-1}&gt;}$, ç›´åˆ°æˆ‘ä»¬è¾“å‡ºäº†ç»ˆç»“ç¬¦ï¼Œæˆ–è€…è¾“å‡ºé•¿åº¦è¶…è¿‡äº†æå‰çš„é¢„è®¾å€¼ n æ‰åœæ­¢é‡‡æ ·.</p>
<p>ä¸Šè¿°æ­¥éª¤å…·ä½“å¦‚å›¾ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C5W1-35_1.png" width="700"></p>
<p>ä¸‹å›¾ç»™å‡ºäº†é‡‡æ ·ä¹‹åå¾—åˆ°çš„æ•ˆæœï¼š</p>
<blockquote>
<ul>
<li>å·¦è¾¹æ˜¯å¯¹è®­ç»ƒå¾—åˆ°æ–°é—»ä¿¡æ¯æ¨¡å‹è¿›è¡Œé‡‡æ ·å¾—åˆ°çš„å†…å®¹ï¼›</li>
<li>å³è¾¹æ˜¯èå£«æ¯”äºšæ¨¡å‹é‡‡æ ·å¾—åˆ°çš„å†…å®¹.</li>
</ul>
</blockquote>
<p><img src="/images/deeplearning/C5W1-36_1.png" width="750"></p>
<h2 id="8-Vanishing-gradients-with-RNNs"><a href="#8-Vanishing-gradients-with-RNNs" class="headerlink" title="8. Vanishing gradients with RNNs"></a>8. Vanishing gradients with RNNs</h2><blockquote>
<p>ç°åœ¨ä½ å·²ç»å­¦ä¼šäº† åŸºæœ¬çš„ RNN å¦‚ä½•åº”ç”¨åœ¨ æ¯”å¦‚ è¯­è¨€æ¨¡å‹ è¿˜æœ‰ å¦‚ä½•ç”¨åå‘ä¼ æ’­æ¥è®­ç»ƒä½ çš„ RNN æ¨¡å‹, ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ æ¢¯åº¦æ¶ˆå¤± ä¸ æ¢¯åº¦çˆ†ç‚¸ é—®é¢˜.</p>
<p>ç›®å‰è¿™ç§åŸºæœ¬çš„ RNN ä¹Ÿä¸æ“…é•¿æ•è·è¿™ç§é•¿æœŸä¾èµ–æ•ˆåº”. </p>
<p>æ¢¯åº¦çˆ†ç‚¸å¯ä»¥ç”¨æ¢¯åº¦æ¶ˆå‡è§£å†³ã€æ¢¯åº¦æ¶ˆå¤±å°±æœ‰ç‚¹éº»çƒ¦äº†ï¼Œéœ€è¦ç”¨ GRU æ¥è§£å†³.</p>
</blockquote>
<p><strong>RNN çš„æ¢¯åº¦æ¶ˆå¤±ã€çˆ†ç‚¸é—®é¢˜:</strong></p>
<p>æ¢¯åº¦å€¼åœ¨ RNN ä¸­ä¹Ÿå¯èƒ½å› ä¸ºåå‘ä¼ æ’­çš„å±‚æ¬¡å¤ªå¤šå¯¼è‡´è¿‡å° æˆ– è¿‡å¤§</p>
<blockquote>
<ul>
<li>å½“æ¢¯åº¦å€¼è¿‡å°çš„æ—¶å€™ï¼Œç¥ç»ç½‘ç»œå°†æ— æ³•æœ‰æ•ˆåœ°è°ƒæ•´è‡ªå·±çš„æƒé‡çŸ©é˜µå¯¼è‡´è®­ç»ƒæ•ˆæœä¸ä½³ï¼Œç§°ä¹‹ä¸º<strong>â€œæ¢¯åº¦æ¶ˆå¤±é—®é¢˜â€(gradient vanishing problem)</strong>ï¼›</li>
<li>è¿‡å¤§æ—¶å¯èƒ½ç›´æ¥å½±å“åˆ°ç¨‹åºçš„è¿ä½œå› ä¸ºç¨‹åºå·²ç»æ— æ³•å­˜å‚¨é‚£ä¹ˆå¤§çš„å€¼ï¼Œç›´æ¥è¿”å› NaN ï¼Œç§°ä¹‹ä¸º<strong>â€œæ¢¯åº¦çˆ†ç‚¸é—®é¢˜â€(gradient exploding problem)</strong></li>
</ul>
</blockquote>
<p>å½“æ¢¯åº¦å€¼è¿‡å¤§çš„æ—¶å€™æœ‰ä¸€ä¸ªæ¯”è¾ƒç®€ä¾¿çš„è§£å†³æ–¹æ³•ï¼Œæ¯æ¬¡å°†è¿”å›çš„æ¢¯åº¦å€¼è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœè¶…å‡ºäº†é¢„å®šçš„èŒƒå›´ï¼Œåˆ™æ‰‹åŠ¨è®¾ç½®ä¸ºèŒƒå›´çš„è¾¹ç•Œå€¼.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if (gradient &gt; max) &#123;</span><br><span class="line">    gradient = max</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ¢¯åº¦å€¼è¿‡å°çš„è§£å†³æ–¹æ¡ˆè¦ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæ¯”å¦‚ä¸‹é¢ä¸¤å¥è¯ï¼š</p>
<blockquote>
<p>â€œThe <strong>cat</strong>ï¼Œwhich already ate appleï¼Œyogurtï¼Œbananaï¼Œâ€¦, <strong>was</strong> full.â€<br>â€œThe <strong>cats</strong>ï¼Œwhich already ate appleï¼Œyogurtï¼Œbananaï¼Œâ€¦, <strong>were</strong> full.â€</p>
</blockquote>
<p>é‡ç‚¹æ ‡å‡ºçš„ <strong>cat(s)</strong> å’Œ be åŠ¨è¯ï¼ˆ<strong>was, were</strong>ï¼‰ æ˜¯æœ‰å¾ˆé‡è¦çš„å…³è”çš„ï¼Œä½†æ˜¯ä¸­é—´éš”äº†ä¸€ä¸ª which å¼•å¯¼çš„å®šè¯­ä»å¥ï¼Œå¯¹äºå‰é¢æ‰€ä»‹ç»çš„åŸºç¡€çš„ RNNç½‘ç»œ å¾ˆéš¾å­¦ä¹ åˆ°è¿™ä¸ªä¿¡æ¯ï¼Œå°¤å…¶æ˜¯å½“å‡ºç°æ¢¯åº¦æ¶ˆå¤±æ—¶ï¼Œè€Œä¸”è¿™ç§æƒ…å†µå¾ˆå®¹æ˜“å‘ç”Ÿ.</p>
<p>æˆ‘ä»¬çŸ¥é“ä¸€æ—¦ç¥ç»ç½‘ç»œå±‚æ¬¡å¾ˆå¤šæ—¶ï¼Œåå‘ä¼ æ’­å¾ˆéš¾å½±å“å‰é¢å±‚æ¬¡çš„å‚æ•°ã€‚æ‰€ä»¥ä¸ºäº† <strong>è§£å†³æ¢¯åº¦æ¶ˆå¤±</strong> é—®é¢˜ï¼Œæå‡ºäº† <strong>GRU</strong>å•å…ƒï¼Œä¸‹é¢ä¸€èŠ‚å…·ä½“ä»‹ç».</p>
<blockquote>
<p>å°†åœ¨æ¥ä¸‹æ¥çš„ä¸¤ä¸ªç« èŠ‚ä»‹ç»ä¸¤ç§æ–¹æ³•æ¥è§£å†³ <strong>æ¢¯åº¦è¿‡å°</strong> é—®é¢˜ï¼Œç›®æ ‡æ˜¯å½“ä¸€äº›é‡è¦çš„å•è¯ç¦»å¾—å¾ˆè¿œçš„æ—¶å€™ï¼Œæ¯”å¦‚ä¾‹å­ä¸­çš„ â€œ<strong>cat</strong>â€ å’Œ â€œ<strong>was</strong>â€ï¼Œèƒ½è®©è¯­è¨€æ¨¡å‹å‡†ç¡®çš„è¾“å‡ºå•æ•°äººç§°è¿‡å»æ—¶çš„ â€œ<strong>was</strong>â€ï¼Œè€Œä¸æ˜¯ â€œ<strong>is</strong>â€ æˆ–è€… â€œ<strong>were</strong>â€. ä¸¤ä¸ªæ–¹æ³•éƒ½å°†å¼•å…¥â€œè®°å¿†â€çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯ä¸º RNN èµ‹äºˆä¸€ä¸ªè®°å¿†çš„åŠŸèƒ½.</p>
</blockquote>
<h2 id="9-GRU-Gated-Recurrent-Unit"><a href="#9-GRU-Gated-Recurrent-Unit" class="headerlink" title="9. GRU - Gated Recurrent Unit"></a>9. GRU - Gated Recurrent Unit</h2><p>GRUï¼ˆGated Recurrent Unitï¼‰æ˜¯ä¸€ç§ç”¨æ¥è§£å†³æ¢¯åº¦å€¼è¿‡å°çš„æ–¹æ³•ï¼Œé¦–å…ˆæ¥çœ‹ä¸‹åœ¨ä¸€ä¸ªæ—¶åˆ»ä¸‹çš„ RNNå•å…ƒï¼Œæ¿€æ´»å‡½æ•°ä¸º tanh</p>
<h3 id="9-1-å›é¡¾æ™®é€š-RNNå•å…ƒ-çš„ç»“æ„"><a href="#9-1-å›é¡¾æ™®é€š-RNNå•å…ƒ-çš„ç»“æ„" class="headerlink" title="9.1 å›é¡¾æ™®é€š RNNå•å…ƒ çš„ç»“æ„"></a>9.1 å›é¡¾æ™®é€š RNNå•å…ƒ çš„ç»“æ„</h3><p>å¦‚å›¾ç¤ºï¼Œè¾“å…¥æ•°æ®ä¸º $a^{&lt;{t-1}&gt;}$ å’Œ $x^{&lt;{t}&gt;}$, ä¸å‚æ•° $W_a$ è¿›è¡Œçº¿æ€§è¿ç®—åå†ä½¿ç”¨ $tanh$ å‡½æ•° è½¬åŒ–å¾—åˆ° $a^{&lt;{t}&gt;}$. å½“ç„¶å†ä½¿ç”¨ softmax å‡½æ•°å¤„ç†å¯ä»¥å¾—åˆ°é¢„æµ‹å€¼.</p>
<p><img src="/images/deeplearning/C5W1-37_1.png" width="750"></p>
<h3 id="9-2-GRUç»“æ„"><a href="#9-2-GRUç»“æ„" class="headerlink" title="9.2 GRUç»“æ„"></a>9.2 GRUç»“æ„</h3><p><strong>è®°å¿†ç»†èƒ:</strong></p>
<p>åœ¨ GRUä¸­ ä¼šç”¨åˆ° â€œè®°å¿†ç»†èƒ(Memory cell)â€ è¿™ä¸ªæ¦‚å¿µ, æˆ‘ä»¬ç”¨å˜é‡<code>C</code>è¡¨ç¤ºã€‚è¿™ä¸ªè®°å¿†ç»†èƒæä¾›äº†è®°å¿†åŠŸèƒ½ï¼Œä¾‹å¦‚å®ƒèƒ½å¤Ÿå¸®åŠ©è®°ä½ cat å¯¹åº” was, cats å¯¹åº” were.</p>
<p>è€Œåœ¨ $t$ æ—¶åˆ»ï¼Œè®°å¿†ç»†èƒæ‰€åŒ…å«çš„å€¼å…¶å®å°±æ˜¯ Activation function å€¼ï¼Œå³ $c^{&lt;{t}&gt;}=a^{&lt;{t}&gt;}$</p>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨è¿™é‡Œä¸¤ä¸ªå˜é‡çš„å€¼è™½ç„¶ä¸€æ ·ï¼Œä½†æ˜¯å«ä¹‰ä¸åŒã€‚</p>
<p>å¦å¤–åœ¨ä¸‹èŠ‚å°†ä»‹ç»çš„ LSTM ä¸­ï¼ŒäºŒè€…å€¼çš„å¤§å°æœ‰å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æœ‰å¿…è¦ä½¿ç”¨è¿™ä¸¤ç§å˜é‡è¿›è¡ŒåŒºåˆ†</p>
</blockquote>
<p>ä¸ºäº†æ›´æ–°è®°å¿†ç»†èƒçš„å€¼ï¼Œæˆ‘ä»¬å¼•å…¥ $\tilde{c}$ æ¥ä½œä¸ºå€™é€‰å€¼ä»è€Œæ¥æ›´æ–° $c^{&lt;{t}&gt;}$ï¼Œå…¶å…¬å¼ä¸ºï¼š</p>
<p>$$<br>\tilde{c}=tanh(W_c [c^{&lt;{t-1}&gt;}, x^{&lt;{t}&gt;}]+b_c)<br>$$</p>
<p><strong>æ›´æ–°é—¨ (update gate):</strong></p>
<p>æ›´æ–°é—¨æ˜¯ GRU çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒçš„ä½œç”¨æ˜¯ç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œæ›´æ–°.</p>
<p>æ›´æ–°é—¨ç”¨ $\Gamma_u$ è¡¨ç¤ºï¼Œå…¶å…¬å¼ä¸ºï¼š</p>
<p>$$<br>\Gamma_u=Ïƒ(W_u [c^{&lt;{t-1}&gt;}, x^{&lt;{t}&gt;}]+b_u)<br>$$</p>
<p><img src="/images/deeplearning/C5W1-38_1.png" width="550"></p>
<p>å¦‚ä¸Šå›¾ç¤ºï¼Œ$\Gamma_u$ å€¼çš„å¤§å°å¤§å¤šåˆ†å¸ƒåœ¨ 0 æˆ–è€… 1ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶å€¼çš„å¤§å°ç²—ç•¥çš„è§†ä¸º 0 æˆ–è€… 1ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†å…¶ç†è§£ä¸ºä¸€æ‰‡é—¨ï¼Œå¦‚æœ $\Gamma_u=1$ , å°±è¡¨ç¤ºæ­¤æ—¶éœ€è¦æ›´æ–°å€¼ï¼Œåä¹‹ä¸ç”¨.</p>
<p><strong>$t$ æ—¶åˆ»è®°å¿†ç»†èƒ:</strong></p>
<p>æœ‰äº†æ›´æ–°é—¨å…¬å¼åï¼Œæˆ‘ä»¬åˆ™å¯ä»¥ç»™å‡º $t$ æ—¶åˆ» <code>Memory cell</code> çš„å€¼çš„è®¡ç®—å…¬å¼äº†:</p>
<p>$$<br>c^{&lt;{t}&gt;} =  \Gamma_u * \tilde{c} + (1-\Gamma_u) * c^{&lt;{t-1}&gt;}<br>$$</p>
<blockquote>
<p>æ³¨æ„ï¼šä¸Šé¢å…¬å¼ä¸­çš„ * è¡¨ç¤ºå…ƒç´ ä¹‹é—´è¿›è¡Œä¹˜æ³•è¿ç®—ï¼Œè€Œå…¶ä»–å…¬å¼æ˜¯ çŸ©é˜µè¿ç®—</p>
</blockquote>
<p>å…¬å¼å¾ˆå¥½ç†è§£ï¼Œå¦‚æœ $\Gamma_u=1$ï¼Œé‚£ä¹ˆ $t$ æ—¶åˆ» è®°å¿†ç»†èƒçš„å€¼å°±ç­‰äºå€™é€‰å€¼ $\tilde{c}$, åä¹‹ç­‰äºå‰ä¸€æ—¶åˆ»è®°å¿†ç»†èƒçš„å€¼.</p>
<p>ä¸‹å›¾ç»™å‡ºäº†è¯¥å…¬å¼å¾ˆç›´è§‚çš„è§£é‡Šï¼š</p>
<p>åœ¨è¯»åˆ° â€œcatâ€ çš„æ—¶å€™ ï¼Œå…¶ä»–æ—¶å€™ä¸€ç›´ä¸º 0ï¼ŒçŸ¥é“è¦ è¾“å‡º â€œwasâ€ çš„æ—¶åˆ»æˆ‘ä»¬ä»ç„¶çŸ¥é“ â€œcatâ€ çš„å­˜åœ¨ï¼Œä¹Ÿå°±çŸ¥é“å®ƒä¸ºå•æ•°äº†</p>
<p><img src="/images/deeplearning/C5W1-39_1.png" width="550"></p>
<p><strong>GRU ç»“æ„ç¤ºæ„å›¾</strong></p>
<p><img src="/images/deeplearning/C5W1-40_1.png" width="550"></p>
<h3 id="9-3-å®Œæ•´ç‰ˆ-GRU"><a href="#9-3-å®Œæ•´ç‰ˆ-GRU" class="headerlink" title="9.3 å®Œæ•´ç‰ˆ GRU"></a>9.3 å®Œæ•´ç‰ˆ GRU</h3><p>ä¸Šç®€åŒ–äº†çš„ GRUï¼Œåœ¨å®Œæ•´ç‰ˆä¸­è¿˜å­˜åœ¨å¦ä¸€ä¸ªç¬¦å· ï¼Œè¿™ç¬¦å·çš„æ„ä¹‰æ˜¯æ§åˆ¶ $\tilde{c}$ å’Œ $c^{&lt;{t-1}&gt;}$ ä¹‹é—´çš„è”ç³»å¼ºå¼±ï¼Œå®Œæ•´ç‰ˆå…¬å¼å¦‚ä¸‹ï¼š</p>
<p><img src="/images/deeplearning/C5W1-41_1.png" width="550"></p>
<blockquote>
<p>æ³¨æ„ï¼Œå®Œæ•´å…¬å¼ä¸­å¤šå‡ºäº†ä¸€ä¸ª $\Gamma_r$, è¿™ä¸ªç¬¦å·çš„ä½œç”¨æ˜¯æ§åˆ¶ $\tilde{c}^{&lt;{t}&gt;}$ å’Œ $c^{&lt;{t}&gt;}$ ä¹‹é—´è”ç³»çš„å¼ºå¼±.</p>
</blockquote>
<h2 id="10-LSTMï¼ˆlong-short-term-memoryï¼‰unit"><a href="#10-LSTMï¼ˆlong-short-term-memoryï¼‰unit" class="headerlink" title="10. LSTMï¼ˆlong short term memoryï¼‰unit"></a>10. LSTMï¼ˆlong short term memoryï¼‰unit</h2><p>ä»‹ç»å®Œ GRU åï¼Œå†ä»‹ç» LSTM ä¼šæ›´åŠ å®¹æ˜“ç†è§£ã€‚ä¸‹å›¾æ˜¯äºŒè€…å…¬å¼å¯¹æ¯”ï¼š</p>
<p>GRU åªæœ‰ä¸¤ä¸ªé—¨ï¼Œè€Œ LSTM æœ‰ä¸‰ä¸ªé—¨ï¼Œåˆ†åˆ«æ˜¯æ›´æ–°é—¨ $\Gamma_u$ (æ˜¯å¦éœ€è¦æ›´æ–°ä¸º $\tilde{c}^{&lt;{t}&gt;}$ï¼Œé—å¿˜é—¨ $\Gamma_f$ (æ˜¯å¦éœ€è¦ä¸¢å¼ƒä¸Šä¸€ä¸ªæ—¶åˆ»çš„å€¼)ï¼Œè¾“å‡ºé—¨ $\Gamma_o$ (æ˜¯å¦éœ€è¦è¾“å‡ºæœ¬æ—¶åˆ»çš„å€¼)</p>
<p><img src="/images/deeplearning/C5W1-42_1.png" width="650"></p>
<p><img src="/images/deeplearning/C5W1-43_1.png" width="650"></p>
<p>è™½ç„¶ LSTM æ¯” GRU æ›´å¤æ‚ï¼Œä½†æ˜¯å®ƒæ¯” GRU æ›´æ—©æå‡ºå“‡ğŸ˜„ã€‚å¦å¤–ä¸€èˆ¬è€Œè¨€ LSTM çš„è¡¨ç°è¦æ›´å¥½ï¼Œä½†æ˜¯è®¡ç®—é‡æ›´å¤§ï¼Œæ¯•ç«Ÿå¤šäº†ä¸€ä¸ªé—¨å˜›ã€‚è€Œ GRU å®é™…ä¸Šæ˜¯å¯¹ LSTM çš„ç®€åŒ–ï¼Œå®ƒçš„è¡¨ç°ä¹Ÿä¸é”™ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°æ‰©å±•åˆ°æ·±å±‚ç½‘ç»œã€‚æ‰€ä»¥äºŒè€…å„æœ‰ä¼˜åŠ¿ã€‚</p>
<p>ä¸‹å›¾æ˜¯ LSTM çš„ç»“æ„ç¤ºæ„å›¾ï¼š</p>
<p><img src="/images/deeplearning/C5W1-44_1.png" width="700"></p>
<h2 id="11-Bidirectional-RNN"><a href="#11-Bidirectional-RNN" class="headerlink" title="11. Bidirectional RNN"></a>11. Bidirectional RNN</h2><p>å‰é¢ä»‹ç»çš„éƒ½æ˜¯å•å‘çš„ RNN ç»“æ„ï¼Œåœ¨å¤„ç†æŸäº›é—®é¢˜ä¸Šå¾—åˆ°çš„æ•ˆæœä¸å°½äººæ„</p>
<p>å¦‚ä¸‹é¢ä¸¤å¥è¯ï¼Œæˆ‘ä»¬è¦ä»ä¸­æ ‡å‡ºäººåï¼š</p>
<blockquote>
<p><code>He</code> said, â€œTeddy Roosevelt was a great Presidentâ€.<br><code>He</code> said, â€œTeddy bears are on saleâ€.</p>
</blockquote>
<ol>
<li>ç¬¬ä¸€å¥ä¸­çš„ Teddy Roosevelt æ˜¯äººå</li>
<li>ç¬¬äºŒå¥ä¸­çš„ Teddy bears æ˜¯æ³°è¿ªç†Šï¼ŒåŒæ ·éƒ½æ˜¯å•è¯ <strong>Teddy</strong> å¯¹åº”çš„è¾“å‡ºåœ¨ç¬¬ä¸€å¥ä¸­åº”è¯¥æ˜¯ 1ï¼Œç¬¬äºŒå¥ä¸­åº”è¯¥æ˜¯ 0</li>
</ol>
<p>åƒè¿™æ ·çš„ä¾‹å­å¦‚æœæƒ³è®©æˆ‘ä»¬çš„åºåˆ—æ¨¡å‹æ˜ç™½å°±éœ€è¦å€ŸåŠ©ä¸åŒçš„ç»“æ„æ¯”å¦‚ - åŒå‘é€’å½’ç¥ç»ç½‘ç»œ(Bidirectional RNN).<br>è¯¥ç¥ç»ç½‘ç»œé¦–å…ˆä»æ­£é¢ç†è§£ä¸€éè¿™å¥è¯ï¼Œå†ä»åæ–¹å‘ç†è§£ä¸€é.</p>
<p>åŒå‘é€’å½’ç¥ç»ç½‘ç»œç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="/images/deeplearning/C5W1-45_1.png" width="750"></p>
<p>ä¸‹å›¾æ‘˜è‡ªå¤§æ•°æ®æ–‡æ‘˜æ•´ç†</p>
<p><img src="/images/deeplearning/C5W1-46_1.png" width="750"></p>
<h2 id="12-Deep-RNNs"><a href="#12-Deep-RNNs" class="headerlink" title="12. Deep RNNs"></a>12. Deep RNNs</h2><p>æ·±å±‚ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å±‚æ¬¡å¢åŠ ã€‚å¦‚ä¸‹å›¾æ˜¯æ·±å±‚å¾ªç¯ç¥ç»ç½‘ç»œçš„ç¤ºæ„å›¾</p>
<p>æ¨ªå‘è¡¨ç¤ºæ—¶é—´å±•å¼€ï¼Œçºµå‘åˆ™æ˜¯å±‚æ¬¡å±•å¼€ã€‚</p>
<p><img src="/images/deeplearning/C5W1-47_1.png" width="750"></p>
<p>æ³¨æ„æ¿€æ´»å€¼çš„è¡¨è¾¾å½¢å¼æœ‰æ‰€æ”¹å˜ï¼Œä»¥ $a^{[1]<0>}$ ä¸ºä¾‹è¿›è¡Œè§£é‡Šï¼š</0></p>
<ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">1</a> è¡¨ç¤ºç¬¬ä¸€å±‚</li>
<li><0> è¡¨ç¤ºç¬¬ä¸€ä¸ªæ¿€æ´»å€¼</0></li>
</ul>
<p>å¦å¤–å„ä¸ªæ¿€æ´»å€¼çš„è®¡ç®—å…¬å¼ä¹Ÿç•¥æœ‰ä¸åŒï¼Œä»¥ $a^{[2]<3>}$ ä¸ºä¾‹ï¼Œå…¶è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</3></p>
<p><img src="/images/deeplearning/C5W1-48_1.png" width="550"></p>
<h2 id="13-Reference"><a href="#13-Reference" class="headerlink" title="13. Reference"></a>13. Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/tag/DeepLearning/" target="_blank" rel="external">DeepLearning.ai å­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
<li><a href="https://github.com/theBigDataDigest/Andrew-Ng-deeplearning-part-5-Course-notes-in-Chinese/blob/master/Andrew-Ng-deeplearning.ai-part-5-Course%20notes.pdf" target="_blank" rel="external">å¤§æ•°æ®æ–‡æ‘˜ DeepLearning.ai å­¦ä¹ ç¬”è®°</a></li>
<li><a href="https://kulbear.github.io/pdf/sequence-models.pdf" target="_blank" rel="external">Sequence Models è‹±æ–‡ç‰ˆç¬”è®°</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Structured Machine Learning Projects (week2) - ML Strategy 2]]></title>
      <url>http://shopee.ai/2018/07/25/deeplearning/Structured-Machine-Learning-Projects-week2/</url>
      <content type="html"><![CDATA[<p>å¦‚ä½•è¿›è¡Œ è¯¯å·®åˆ†æã€æ ‡æ³¨é”™è¯¯æ•°æ®ã€å®šä½æ•°æ®ä¸åŒ¹é…åå·®ä¸æ–¹å·®</p>
<p>çŸ¥é“å¦‚ä½•åº”ç”¨ç«¯åˆ°ç«¯å­¦ä¹ ã€è¿ç§»å­¦ä¹ ä»¥åŠå¤šä»»åŠ¡å­¦ä¹ </p>
<a id="more"></a>
<h2 id="1-Carrying-out-error-analysis"><a href="#1-Carrying-out-error-analysis" class="headerlink" title="1. Carrying out error analysis"></a>1. Carrying out error analysis</h2><blockquote>
<p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å‘ç°è®­ç»ƒå‡ºæ¥çš„æ¨¡å‹æœ‰è¯¯å·®åï¼Œå°±ä¼šä¸€è‚¡è„‘çš„æƒ³ç€æ³•å­å»å‡å°‘è¯¯å·®ã€‚æƒ³æ³•å›ºç„¶å¥½ï¼Œä½†æ˜¯æœ‰ç‚¹ headlong ã€‚ã€‚</p>
<p>è¿™èŠ‚è§†é¢‘ä¸­ Andrew Ng ä»‹ç»äº†ä¸€ä¸ªæ¯”è¾ƒç§‘å­¦çš„æ–¹æ³•ï¼Œå…·ä½“çš„çœ‹ä¸‹é¢çš„ä¾‹å­</p>
</blockquote>
<p>è¿˜æ˜¯ä»¥çŒ«åˆ†ç±»å™¨ä¸ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬çš„æ¨¡å‹è¡¨ç°çš„è¿˜ä¸é”™ï¼Œä½†æ˜¯ä¾æ—§å­˜åœ¨è¯¯å·®ï¼Œé¢„æµ‹åé”™è¯¯æ ‡è®°çš„æ•°æ®ä¸­æœ‰ä¸€éƒ¨åˆ†ç‹—å›¾ç‰‡è¢«é”™è¯¯çš„æ ‡è®°æˆäº†çŒ«ã€‚è¿™ä¸ªæ—¶å€™æŒ‰ç…§ä¸€èˆ¬çš„æ€è·¯å¯èƒ½æ˜¯æƒ³é€šè¿‡è®­ç»ƒå‡ºç‹—åˆ†ç±»å™¨æ¨¡å‹æ¥æé«˜çŒ«åˆ†ç±»å™¨ï¼Œæˆ–è€…å…¶ä»–çš„åŠæ³•ï¼Œåæ­£å°±æ˜¯è¦è®©åˆ†ç±»å™¨æ›´å¥½åœ°åŒºåˆ†ç‹—å’ŒçŒ«ã€‚</p>
<p>ä½†æ˜¯ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œå‡å¦‚é”™è¯¯åˆ†ç±»çš„100ä¸ªæ ·æœ¬ä¸­ï¼Œåªæœ‰5ä¸ªç‹—æ ·æœ¬è¢«é”™è¯¯çš„æ ‡è®°æˆäº†çŒ«ï¼Œé‚£ä¹ˆä½ è´¹å°½åƒè¾›ä¸‡è‹¦ä¹Ÿæœ€å¤šåªèƒ½æé«˜ä¸€ä¸¢ä¸¢çš„å‡†ç¡®åº¦ã€‚æ‰€ä»¥å¯¹è¯¯å·®è¿›è¡Œåˆ†æå°±æ˜¾å¾—æ¯”è¾ƒé‡è¦ï¼Œè€Œä¸”å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨æœªæ¥çš„å·¥ä½œä¸­æŒ‡æ˜ä¼˜åŒ–æ–¹å‘ï¼ŒèŠ‚çœæ—¶é—´ã€‚å…·ä½“çš„æ–¹æ³•æŒ‰å´å¤§å¤§çš„è¯´æ³•æ˜¯å¯ä»¥äººå·¥çš„å¯¹é”™è¯¯æ ‡è®°çš„æ ·æœ¬è¿›è¡Œå†å¤„ç†ã€åˆ†æã€‚</p>
<p>ä¸‹é¢ä»¥ä¸€ä¸ªä¾‹å­æ¥ä»‹ç»ä¸€ä¸‹æ“ä½œæ­¥éª¤</p>
<p><strong>1. äººå·¥æ ‡è®°</strong></p>
<blockquote>
<p>å°†é”™è¯¯æ ‡è®°æ ·æœ¬ä»¥è¡¨æ ¼çš„å½¢å¼åˆ—ä¸¾å‡ºæ¥ï¼Œç„¶åäººå·¥çš„æ ‡è®°å¤„æ ·æœ¬çš„åˆ†ç±»ï¼Œç»Ÿè®¡å„åˆ†ç±»(æˆ–è€…è¯´é”™è¯¯æ ‡è®°çš„åŸå› )æ‰€å æ¯”ä¾‹.</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">Image</th>
<th style="text-align:center">Dog</th>
<th style="text-align:center">Great cats(å¤§å‹çŒ«ç§‘åŠ¨ç‰©ï¼Œå¦‚ç‹®å­)</th>
<th style="text-align:center">Blurry(å›¾ç‰‡æ¨¡ç³Š)</th>
<th style="text-align:center">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center"></td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center"></td>
<td style="text-align:center">çœ¯ç€çœ¼</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"></td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">åœ¨åŠ¨ç‰©å›­ï¼Œä¸”ä¸‹ç€é›¨</td>
</tr>
<tr>
<td style="text-align:center">â€¦â€¦</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">% of total</td>
<td style="text-align:center">8%</td>
<td style="text-align:center">43%</td>
<td style="text-align:center">61%</td>
<td style="text-align:center">-</td>
</tr>
</tbody>
</table>
<blockquote>
<p>æ³¨æ„:ä¸Šé¢çš„åˆ†ç±»å¹¶ä¸æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œåªæ˜¯ä¸¾ä¸ªä¾‹å­ã€‚ã€‚ã€‚æŠ„ä¸‹ Andrew Ng çš„PPT</p>
</blockquote>
<p><strong>2. åˆ†æè¯¯å·®</strong></p>
<p>ä¸Šé¢çš„ç»“æœå¯ä»¥çŸ¥é“ï¼Œè¯¯å·®æ ·æœ¬ä¸­åªæœ‰8%æ˜¯ç‹—ç‹—çš„å›¾ç‰‡ï¼Œè€Œ43%æ˜¯å¤§å‹çŒ«ç§‘åŠ¨ç‰©ï¼Œ61%æ˜¯å› ä¸ºå›¾ç‰‡æ¨¡ç³Šã€‚å¾ˆæ˜¾ç„¶æ­¤æ—¶ä½ å³ä½¿ç”¨æ¯•ç”Ÿæ‰€å­¦å»ä¼˜åŒ–åŒºåˆ«ç‹—å’ŒçŒ«çš„ç®—æ³•ï¼Œæ•´ä¸ªæ¨¡å‹çš„å‡†ç¡®ç‡æå‡çš„ç©ºé—´ä¹Ÿè¿œä¸å¦‚åä¸¤ä¸ªç‰¹å¾é«˜ã€‚æ‰€ä»¥å¦‚æœäººæ‰‹å¤Ÿçš„è¯ï¼Œä¹Ÿæ˜¯å¯ä»¥é€‰æ‹©å‡ ä¸ªç‰¹å¾è¿›è¡Œä¼˜åŒ–çš„ã€‚</p>
<h2 id="2-Cleaning-up-Incorrectly-labeled-data"><a href="#2-Cleaning-up-Incorrectly-labeled-data" class="headerlink" title="2. Cleaning up Incorrectly labeled data"></a>2. Cleaning up Incorrectly labeled data</h2><p>æœºå™¨é¢„æµ‹å¯èƒ½ä¼šå‡ºé”™ï¼Œé‚£ä¹ˆäººå½“ç„¶ä¹Ÿæœ‰å¯èƒ½ä¼šå‡ºé”™ã€‚æ‰€ä»¥å¦‚æœè®­ç»ƒé›†å’ŒéªŒè¯é›†ä¸­è®¤ä¸ºæ·»åŠ çš„æ ‡ç­¾Yå‡ºç°è¯¯å·®è¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<p><img src="/images/deeplearning/C3W2-2_1.png" width="700"></p>
<p>è¿™é‡Œåˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<p><strong>1.éšæœºè¯¯å·®</strong></p>
<p>è¿™ç§æƒ…å†µæ¯”è¾ƒå¥½ï¼Œå› ä¸ºå¦‚æœäººä¸ºè¯¯å·®æ¯”è¾ƒæ¥è¿‘éšæœºè¯¯å·®ï¼Œé‚£ä¹ˆå¯ä»¥çä¸€åªçœ¼é—­ä¸€åªçœ¼ï¼Œå› ä¸ºæ·±åº¦å­¦ä¹ ç®—æ³•å¯¹äºéšæœºè¯¯å·®è¿˜æ˜¯æœ‰ä¸€å®šçš„å¥å£®æ€§çš„</p>
<p><strong>2.ééšæœºè¯¯å·®</strong></p>
<p>PS:ä¸çŸ¥é“æœ‰æ²¡æœ‰ééšæœºè¯¯å·®è¿™ä¸ªè¯ã€‚ã€‚æˆ‘åªæ˜¯ä¸ºäº†è¡Œæ–‡æ–¹ä¾¿å–çš„ä¸€ä¸ªåå­—ã€‚</p>
<p>å¯¹äº<strong>éšæœºè¯¯å·®</strong>æ­£å¸¸äººå¯èƒ½éƒ½ä¼šé—®â€œwhatï¼Ÿæˆ‘æ€ä¹ˆçŸ¥é“æ˜¯ä¸æ˜¯æ¥è¿‘éšæœºè¯¯å·®â€ï¼Œæ‰€ä»¥è§†é¢‘é‡Œ Andrew Ng ä¹Ÿç»™å’±ä»¬æä¾›äº†ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å’Œä¸Šä¸€èŠ‚ä¸­çš„è¡¨æ ¼æ³•ä¸€æ ·ä¸€æ ·çš„ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">Image</th>
<th style="text-align:center">Dog</th>
<th style="text-align:center">Great cats(å¤§å‹çŒ«ç§‘åŠ¨ç‰©ï¼Œå¦‚ç‹®å­)</th>
<th style="text-align:center">Blurry(å›¾ç‰‡æ¨¡ç³Š)</th>
<th style="text-align:center">Incorrectly labeled</th>
<th style="text-align:center">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center"></td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center"></td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">åªæ˜¯ä¸€åªæ‰‹ç”»çš„çš„çŒ«ï¼Œä¸æ˜¯çœŸçš„çŒ«</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">âˆš</td>
<td style="text-align:center">èƒŒæ™¯çš„è§’è½é‡Œæœ‰ä¸€åªçŒ«</td>
</tr>
<tr>
<td style="text-align:center">â€¦â€¦</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">% of total</td>
<td style="text-align:center">8%</td>
<td style="text-align:center">43%</td>
<td style="text-align:center">61%</td>
<td style="text-align:center">6%</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>æœ‰äº†ä¸Šé¢è¿™ä¸ªè¡¨æ ¼ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ­¤æ—¶æˆ‘è¿˜éœ€è¦ä¿®æ­£è¿™6%æ ‡è®°é”™è¯¯çš„æ ·æœ¬å—ï¼Ÿè¿˜æ˜¯ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹æ•°æ®ï¼š</p>
<blockquote>
<ul>
<li>æ€»ä½“éªŒè¯é›†è¯¯å·®ï¼š10%</li>
<li>ç”±äººå·¥é”™è¯¯æ ‡è®°å¼•èµ·çš„é”™è¯¯æ ·æœ¬æ¯”ä¾‹ï¼š 0.6%</li>
<li>ç”±å…¶ä»–åŸå› å¼•èµ·çš„é”™è¯¯æ ·æœ¬æ¯”ä¾‹ï¼š10%-0.6%=9.4%</li>
</ul>
<p>æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬åº”è¯¥é›†ä¸­ç²¾åŠ›æ‰¾å‡ºå¼•èµ·9.4%è¯¯å·®çš„åŸå› ï¼Œå¹¶è¿›è¡Œä¿®æ­£ï¼Œå½“ç„¶å¦‚æœæœ‰ä½™åŠ›ä¹Ÿè¿˜æ˜¯å¯ä»¥ä¼‘æ•´ä¸€ä¸‹äººå·¥é”™è¯¯æ ‡è®°çš„æ•°æ®çš„ã€‚</p>
<p>å‡å¦‚ä½ é€šè¿‡ä¼˜åŒ–ç®—æ³•ï¼Œå‡å°‘äº†å› å…¶ä»–åŸå› å¼•èµ·çš„è¯¯å·®ï¼Œå¹¶ä¸”ä½¿å¾—æ€»ä½“éªŒè¯é›†è¯¯å·®é™åˆ°äº†2%ï¼Œæ­¤æ—¶æˆ‘ä»¬å†åˆ†æä¸€ä¸‹ï¼š</p>
<p>å¾ˆæ˜¾ç„¶ï¼Œå› ä¸ºå¹¶æ²¡æœ‰å¯¹äººå·¥è¯¯å·®è¿›è¡Œä¼˜åŒ–ï¼Œ<strong>æ‰€ä»¥ç”±äººå·¥é”™è¯¯æ ‡è®°å¼•èµ·çš„é”™è¯¯æ ·æœ¬æ¯”ä¾‹ä¾æ—§æ˜¯0.6%(è¿™ä¸ªæ•°æ®å¯èƒ½æœ‰ç‚¹ä¸èƒ½ç†è§£ï¼Œè¦æ³¨æ„è¿™ä¸ª0.6%æ˜¯ç›¸å¯¹äºæ•´ä½“éªŒè¯é›†è€Œè¨€çš„ï¼Œæ‰€ä»¥ä¸ä¼šå˜)</strong>, é‚£ä¹ˆäººå·¥è¯¯å·®åœ¨æ€»è¯¯å·®ä¸­æ‰€å çš„æ¯”ä¾‹åˆ™è¾¾åˆ°äº†0.6%/2%=30%,ç›¸æ¯”äºä¹‹å‰çš„6%å½±å“åŠ›æ‰“äº†ä¸å°å“¦ï¼Œæ‰€ä»¥æ­¤æ—¶åˆ™åº”è¯¥è€ƒè™‘å¯¹äººå·¥è¯¯å·®åŠ¨æ‰‹äº†.</p>
</blockquote>
<h2 id="3-Build-your-first-system-quickly-then-iterate"><a href="#3-Build-your-first-system-quickly-then-iterate" class="headerlink" title="3. Build your first system quickly, then iterate"></a>3. Build your first system quickly, then iterate</h2><p>è¿˜æ˜¯æœ‰ä¸€ä¸ªæ­¥éª¤æµç¨‹çš„ï¼š</p>
<blockquote>
<ol>
<li>å»ºç«‹è®­ç»ƒé›†ï¼ŒéªŒè¯é›†ï¼Œæµ‹è¯•é›†</li>
<li>è¿…é€Ÿæ­å»ºåˆå§‹åŒ–ç³»ç»Ÿ</li>
<li>ä½¿ç”¨å‰é¢æåˆ°çš„Bias/Varianceåˆ†æå’Œè¯¯å·®åˆ†ææ¥ç¡®å®šæ¥ä¸‹æ¥çš„ä¼˜åŒ–æ–¹å‘</li>
</ol>
</blockquote>
<h2 id="4-Training-and-testing-on-different-distributions"><a href="#4-Training-and-testing-on-different-distributions" class="headerlink" title="4. Training and testing on different distributions"></a>4. Training and testing on different distributions</h2><p><img src="/images/deeplearning/C3W2-3_1.png" width="700"></p>
<h2 id="5-Bias-and-Variance-with-mismatched-data-distributions"><a href="#5-Bias-and-Variance-with-mismatched-data-distributions" class="headerlink" title="5. Bias and Variance with mismatched data distributions"></a>5. Bias and Variance with mismatched data distributions</h2><p><img src="/images/deeplearning/C3W2-4_1.png" width="700"></p>
<p>å¯¹ä¸Šé¢çš„PPTæˆªå›¾è¿›è¡Œè§£é‡Šï¼š</p>
<p><strong>å·¦è¾¹:</strong></p>
<blockquote>
<p>é¦–å…ˆè¿˜æ˜¯ä»¥å–µå’ªåˆ†ç±»å™¨ä½œä¸ºä¾‹å­ï¼Œå‡è®¾äººç±»çš„è¯¯å·®æ¥è¿‘è´å¶æ–¯è¯¯å·®0%ã€‚è€Œè®­ç»ƒé›†è¯¯å·®å’Œå¼€å‘é›†è¯¯å·®åˆ†åˆ«ä¸º1%å’Œ10%ï¼ŒäºŒè€…ç›¸å·®9%ï¼Œè€Œä¸”<strong>å¦‚æœä¸¤ä¸ªæ•°æ®é›†æ¥è‡ªåŒä¸€ä¸ªåˆ†å¸ƒ</strong>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è¯´æ¨¡å‹è®­ç»ƒç»“æœæ–¹å·®è¾ƒå¤§ã€‚<br><strong>ä½†æ˜¯å½“ä¸¤ä¸ªæ•°æ®é›†æ¥è‡ªä¸åŒçš„åˆ†å¸ƒæ—¶ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å¾—å‡ºä¸Šé¢çš„ç»“è®ºäº†</strong>ã€‚å¦å¤–ï¼Œè¿™9%çš„æ–¹å·®å¯èƒ½æœ‰ä¸¤ä¸ªåŸå› å¯¼è‡´çš„.</p>
<ol>
<li>æ˜¯æˆ‘ä»¬è‡ªå·±å®ç°çš„ä»£ç æœ‰é—®é¢˜</li>
<li>æ˜¯æ•°æ®åˆ†å¸ƒä¸åŒï¼Œæ‰€ä»¥ä½ å¾ˆéš¾ç¡®å®šå“ªä¸ªæ˜¯æ›´ä¸»è¦çš„åŸå› .</li>
</ol>
<p>å› æ­¤ä¸ºäº†æ‰¾å‡ºæ˜¯å“ªä¸ªåŸå› æˆ‘ä»¬åšå¦‚ä¸‹çš„äº‹æƒ…ï¼š</p>
<p>  åˆ›å»º<strong>Training-dev set(è®­ç»ƒ-å¼€å‘é›†)</strong>ï¼Œå…¶å®å°±æ˜¯ä»åŸæ¥çš„è®­ç»ƒé›†ä¸­æŠ½å–ä¸€éƒ¨åˆ†æ•°æ®å‡ºæ¥ï¼Œä½†æ˜¯ä¸å–‚ç»™æ¨¡å‹ã€‚ï¼ˆå¦‚ä¸Šå›¾æ‰€ç¤ºï¼‰</p>
</blockquote>
<p><strong>å³è¾¹:</strong></p>
<p>é‚£æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œä¸‹é¢ä»¥å‡ ä¸ªä¾‹å­æ¥è¯´æ˜ï¼š</p>
<blockquote>
<p>1.å› ä¸ºTraining-dev set(è®­ç»ƒ-å¼€å‘é›†)å’ŒTraining setåŒåˆ†å¸ƒï¼Œæ‰€ä»¥å‡è®¾è®­ç»ƒå‡ºæ¥çš„ç»“æœå¦‚ä¸‹ï¼š </p>
<ul>
<li>training error: 1%</li>
<li>training-dev error: 9%</li>
<li>dev error: 10%</li>
</ul>
<p>æ­¤æ—¶å¯ä»¥çœ‹åˆ°æ¥è‡ªåŒåˆ†å¸ƒæ•°æ®çš„è®­ç»ƒè¯¯å·®å’Œè®­ç»ƒ-å¼€å‘è¯¯å·®å­˜åœ¨è¾ƒå¤§çš„æ–¹å·®ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ç¡®å®šè‚¯å®šæ˜¯æˆ‘ä»¬æ»´ä»£ç è¿˜éœ€è¦å®Œå–„.</p>
<p>2.å‡è®¾è®­ç»ƒå‡ºæ¥çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<ul>
<li>training error: 1%</li>
<li>training-dev error: 1.5%</li>
<li>dev error: 10%</li>
</ul>
<p>æ­¤æ—¶å°±å¯ä»¥è¯´ä¸æ˜¯æˆ‘ç¨‹åºå‘˜çš„é—®é¢˜äº†ï¼Œè€Œæ˜¯å‘ç”Ÿäº†data mismatch(æ•°æ®ä¸åŒ¹é…é—®é¢˜)</p>
</blockquote>
<p><strong>ä¸Šå›¾å³ä¸‹è§’ï¼š</strong></p>
<blockquote>
<p>1.å‡è®¾äººç±»çš„è¯¯å·®æ¥è¿‘è´å¶æ–¯è¯¯å·®0ï¼Œä¸”è®­ç»ƒè¯¯å·®å¦‚ä¸‹ï¼š</p>
<ul>
<li>training error: 10%</li>
<li>training-dev error: 11%</li>
<li>dev error: 12%</li>
</ul>
<p>æ­¤æ—¶æˆ‘ä»¬ä¼šè®¤ä¸ºæ¨¡å‹ä¸äººç±»è¯¯å·®ç›¸æ¯”å­˜åœ¨è¾ƒå¤§çš„åå·®ã€‚æ‰€ä»¥å°±æœç€ <strong>å‡å°åå·®çš„æ–¹å‘åŠªåŠ›</strong> å§å°‘å¹´.</p>
<p>2.åŒæ ·å‡è®¾äººç±»çš„è¯¯å·®æ¥è¿‘è´å¶æ–¯è¯¯å·®0ï¼Œä¸”è®­ç»ƒè¯¯å·®å¦‚ä¸‹ï¼š</p>
<p>training error: 10%<br>training-dev error: 11%<br>dev error: 20%</p>
<p>æ­¤æ—¶æˆ‘ä»¬ä¼šè®¤ä¸ºå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>é«˜åå·®</li>
<li>æ•°æ®ä¸åŒ¹é…é—®é¢˜</li>
</ol>
<p>ç¥ç¦ä½ ï¼Œç»§ç»­ä¿®æ”¹ä»£ç å§..</p>
</blockquote>
<h2 id="6-Addressing-data-mismatch"><a href="#6-Addressing-data-mismatch" class="headerlink" title="6. Addressing data mismatch"></a>6. Addressing data mismatch</h2><p><img src="/images/deeplearning/C3W2-5_1.png" width="700"></p>
<blockquote>
<p>è™½ç„¶æˆ‘ä»¬ä½¿ç”¨æ•°æ®åˆæˆå·²ç»åœ¨è¯­éŸ³è¯†åˆ«æ–¹é¢å–å¾—äº†ä¸é”™çš„æ•ˆæœæå‡</p>
<p>å¯ä»¥ä½¿ç”¨æ•°æ®åˆæˆï¼Œä½†æ˜¯è¦æ³¨æ„ä½ çš„ç¥ç»ç½‘ç»œå¯èƒ½è¿‡æ‹Ÿåˆï¼Œè¿‡åˆ†å­¦ä¹ äº†ä½ è¿™å°éƒ¨åˆ†æ•°æ®é›†äº†ã€‚</p>
</blockquote>
<h2 id="7-Transfer-learning"><a href="#7-Transfer-learning" class="headerlink" title="7. Transfer learning"></a>7. Transfer learning</h2><p>ç®€å•çš„è§£é‡Šå°±æ˜¯å‡å¦‚æˆ‘ä»¬ä¹‹å‰è®­ç»ƒå¥½äº†ä¸€ä¸ªå–µå’ªåˆ†ç±»å™¨ï¼Œåæ¥æˆ‘ä»¬æœ‰äº†æ–°ä»»åŠ¡ â€” åšä¸€ä¸ªæµ·è±šåˆ†ç±»å™¨ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†ä¹‹å‰åˆ›å»ºçš„å–µå’ªåˆ†ç±»å™¨æ¨¡å‹è¿ç”¨åˆ°æ–°ä»»åŠ¡ä¸­å»</p>
<p>ä¸¾ä¸ªæ —å­ï¼Œå‡è®¾æˆ‘ä»¬å¯¹ä¿¡å·ç¯çš„çº¢ã€ç»¿ç¯è¿›è¡Œäº†å¤§é‡æ•°æ®çš„å­¦ä¹ ï¼Œç°åœ¨æœ‰äº†æ–°ä»»åŠ¡ï¼Œå³éœ€è¦è¯†åˆ«é»„ç¯,æ­¤æ—¶æˆ‘ä»¬å°±ä¸éœ€è¦ä»å¤´æ­å»ºæ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ä½¿ç”¨çº¢ç»¿ç¯ç½‘ç»œæ¡†æ¶ï¼Œåªéœ€ä¿®æ”¹ç¥ç»ç½‘ç»œæœ€åä¸€å±‚ï¼Œå³è¾“å‡ºå±‚ï¼Œç„¶åç”¨å·²ç»è®­ç»ƒå¥½çš„æƒé‡å‚æ•°åˆå§‹åŒ–è¿™ä¸ªæ¨¡å‹ï¼Œå¯¹é»„ç¯æ•°æ®è¿›è¡Œè®­ç»ƒå­¦ä¹ ã€‚</p>
<p>ä¸ºä»€ä¹ˆå¯ä»¥è¿™ä¹ˆåšå‘¢ï¼Ÿå› ä¸ºå°½ç®¡æœ€åçš„æ ‡ç­¾ä¸ä¸€è‡´ï¼Œä½†æ˜¯ä¹‹å‰å­¦ä¹ çš„çº¢ç»¿ç¯æ¨¡å‹å·²ç»æ•æ‰å’Œå­¦ä¹ äº†å¾ˆå¤šæœ‰ç”¨çš„ç‰¹å¾å’Œç»†èŠ‚ï¼Œè¿™å¯¹äºé»„ç¯çš„å­¦ä¹ ååˆ†æœ‰å¸®åŠ©ï¼Œè€Œä¸”è¿™ä¹ˆåšä¹Ÿå¯ä»¥å¤§å¤§çš„åŠ å¿«æ¨¡å‹çš„æ„å»ºé€Ÿåº¦ã€‚</p>
<blockquote>
<p><strong>æƒ³å°†<code>A</code>æ¨¡å‹è¿ç”¨åˆ°<code>B</code>æ¨¡å‹, ä¸€èˆ¬æ¥è¯´æ˜¯æœ‰æ¡ä»¶é™åˆ¶çš„ï¼Œå¦‚ä¸‹ï¼š</strong> </p>
<ol>
<li>A å’Œ B éœ€è¦æœ‰ç›¸ç±»ä¼¼çš„è¾“å…¥æ•°æ®é›†ï¼Œä¾‹å¦‚è¦ä¹ˆéƒ½æ˜¯å›¾åƒè¯†åˆ«ï¼Œè¦ä¹ˆæ˜¯è¯­éŸ³è¯†åˆ«</li>
<li>A çš„æ•°æ®é›†è¦è¶³å¤Ÿå¤šï¼Œå³è¿œå¤šäºB</li>
<li>A ä¸­å­¦åˆ°ä¸€äº› <strong>low level features</strong> è¦å¯¹ B æœ‰æ‰€å¸®åŠ©</li>
</ol>
</blockquote>
<h2 id="8-Multi-task-learning"><a href="#8-Multi-task-learning" class="headerlink" title="8. Multi-task learning"></a>8. Multi-task learning</h2><p>åœ¨ <strong>Transfer learning</strong> ä¸­ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸²è¡Œçš„ï¼Œå³å’±ä»¬é¦–å…ˆå¾—å®ç°Aæ¨¡å‹ï¼Œç„¶ååœ¨è¿ç”¨åˆ°Bæ¨¡å‹ã€‚</p>
<p>åœ¨ <strong>Multi-task learning</strong> ä¸­ï¼Œå¯ä»¥æ˜¯åŒæ—¶å¼€å§‹å­¦ä¹ .</p>
<blockquote>
<p><strong>ä¸¾ä¸ªğŸŒ°ï¼š</strong></p>
<p>ç°åœ¨å¾ˆç«çš„æ— äººé©¾é©¶æ±½è½¦ï¼Œåœ¨è¡Œé©¶è·¯ä¸Šéœ€è¦è¯†åˆ«å¾ˆå¤šç±»å‹çš„ç‰©ä½“ï¼Œå¦‚è¡Œäººã€çº¢ç»¿ç¯ã€æŒ‡è·¯æ ‡å¿—ç­‰ç­‰ï¼Œæ‰€ä»¥æ­¤æ—¶å¯ä»¥ä½¿ç”¨ <strong>Multi-task learning</strong> æ¥å®ç°ã€‚ç¥ç»ç½‘ç»œç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img src="/images/deeplearning/C3W2-6_2.png" width="750"></p>
<blockquote>
<p>å¦‚å›¾ç¤ºï¼Œæœ€åçš„ $\hat{y}$ æ˜¯ä¸€ä¸ªæœ‰4å…ƒç´ çš„å‘é‡ï¼Œå‡è®¾åˆ†åˆ«æ˜¯è¡Œäººã€æ±½è½¦ã€åœè½¦æ ‡å¿—ã€ä¿¡å·ç¯ã€‚å¦‚æœè¯†åˆ«å‡ºå›¾ç‰‡ä¸­æœ‰å“ªä¸€ä¸ªå…ƒç´ ï¼Œå¯¹åº”ä½ç½®åˆ™è¾“å‡º1ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šè¿™è¦ä¸softmaxè¿›è¡ŒåŒºåˆ†ï¼Œsoftmax åªæ˜¯ä¸€æ¬¡è¯†åˆ«ä¸€ç§ç‰©ä½“ï¼Œæ¯”å¦‚è¯´è¯†åˆ«å‡ºæ˜¯è¡Œäººï¼Œåˆ™è¾“å‡º[1,0,0,0],è€Œä¸ä¼šè¯´åŒæ—¶è¯†åˆ«å‡ºè¡Œäººå’Œä¿¡å·ç¯.</p>
</blockquote>
<p><strong>é€‚ç”¨æƒ…å†µï¼š</strong></p>
<p><img src="/images/deeplearning/C3W2-7_1.png" width="750"></p>
<blockquote>
<p>æœ€åï¼ŒAndrew Ng è¯´åœ¨å®é™…ä¸­è¿ç§»å­¦ä¹ ä½¿ç”¨é¢‘ç‡è¦è¿œé«˜äºå¤šä»»åŠ¡å­¦ä¹ ï¼Œæœ‰ä¸ªä¾‹å¤–å°±æ˜¯è§†è§‰æ£€æµ‹é¡¹ç›®ä¸­å¤šä»»åŠ¡å­¦ä¹ æ¯”è¾ƒå¤š.</p>
</blockquote>
<h2 id="9-End-to-end-deep-learning"><a href="#9-End-to-end-deep-learning" class="headerlink" title="9. End-to-end deep learning"></a>9. End-to-end deep learning</h2><p>é¦–å…ˆä»¥ç°åœ¨å¹¿æ³›ä½¿ç”¨çš„äººè„¸è¯†åˆ«æŠ€æœ¯è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯ç«¯åˆ°ç«¯çš„æ·±åº¦å­¦ä¹ .</p>
<p><strong>What is end-to-end learning?</strong></p>
<blockquote>
<p>å‡å¦‚å’±ä»¬èµ°è¿›ä¸€ä¸ªæ‘„åƒå¤´ï¼Œæœ€å¼€å§‹ç¦»å¾—è¾ƒè¿œçš„æ—¶å€™æ‘„åƒå¤´æ•æ‰åˆ°çš„æ˜¯æˆ‘ä»¬çš„å…¨èº«ï¼Œæ­¤æ—¶ç³»ç»Ÿä¸ä¼šå°†è¿™ç§ç…§ç‰‡å–‚ç»™æ¨¡å‹ï¼Œè€Œæ˜¯é€šè¿‡ç®—æ³•æ‰¾åˆ°äººè„¸çš„ä½ç½®ï¼Œç„¶ååˆ‡å‰²æ”¾å¤§ï¼Œæœ€åå–‚ç»™æ¨¡å‹è¿›è¡Œè¯†åˆ«.</p>
</blockquote>
<p><img src="/images/deeplearning/C3W2-8_1.png" width="700"></p>
<blockquote>
<p><strong>æ€»ç»“èµ·æ¥å°±æ˜¯ï¼š</strong></p>
<ol>
<li>æ‰¾äººè„¸ä½ç½®</li>
<li>å°†äººè„¸å›¾åƒåˆ‡å‰²æ”¾å¤§ï¼Œå¹¶å–‚ç»™æ¨¡å‹</li>
</ol>
<p>Notes: ç«¯åˆ°ç«¯çš„æ·±åº¦å­¦ä¹ å…¶å®å°±ä¸æ˜¯åƒå°†é—®é¢˜ç»†åˆ†åŒ–ï¼Œæµæ°´çº¿åŒ–ï¼Œæ¯ä¸ªæ­¥éª¤å„å¸å…¶èŒï¼Œä¸‹ä¸€å±‚ä¾èµ–ä¸Šä¸€å±‚</p>
<p>And you need a large data set before the end-to-end approach really shines. ï¼ˆä½ éœ€è¦å¤§é‡çš„æ•°æ®ï¼Œç«¯åˆ°ç«¯çš„æ·±åº¦å­¦ä¹ ï¼Œæ‰èƒ½å‘æŒ¥è€€çœ¼çš„å…‰èŠ’.ï¼‰</p>
</blockquote>
<h2 id="10-Reference"><a href="#10-Reference" class="headerlink" title="10. Reference"></a>10. Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Structured Machine Learning Projects (week1) - ML Strategy 1]]></title>
      <url>http://shopee.ai/2018/07/24/deeplearning/Structured-Machine-Learning-Projects-week1/</url>
      <content type="html"><![CDATA[<p>è¿™æ¬¡æˆ‘ä»¬è¦å­¦ä¹ ä¸“é¡¹è¯¾ç¨‹ä¸­ç¬¬ä¸‰é—¨è¯¾ <strong>Structured Machine Learning Projects</strong></p>
<p>å­¦å®Œè¿™é—¨è¯¾ä¹‹åï¼Œä½ å°†ä¼š:</p>
<blockquote>
<ul>
<li>ç†è§£å¦‚ä½•è¯Šæ–­æœºå™¨å­¦ä¹ ç³»ç»Ÿä¸­çš„é”™è¯¯</li>
<li>èƒ½å¤Ÿä¼˜å…ˆå‡å°è¯¯å·®æœ€æœ‰æ•ˆçš„æ–¹å‘</li>
<li>ç†è§£å¤æ‚MLè®¾å®šï¼Œä¾‹å¦‚è®­ç»ƒ/æµ‹è¯•é›†ä¸åŒ¹é…ï¼Œæ¯”è¾ƒå¹¶/æˆ–è¶…è¿‡äººçš„è¡¨ç°</li>
<li>çŸ¥é“å¦‚ä½•åº”ç”¨ç«¯åˆ°ç«¯å­¦ä¹ ã€è¿ç§»å­¦ä¹ ä»¥åŠå¤šä»»åŠ¡å­¦ä¹ </li>
</ul>
</blockquote>
<p>å¾ˆå¤šå›¢é˜Ÿæµªè´¹æ•°æœˆç”šè‡³æ•°å¹´æ¥ç†è§£è¿™é—¨è¯¾æ‰€æ•™æˆçš„å‡†åˆ™ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™é—¨ä¸¤å‘¨çš„è¯¾å¯ä»¥ä¸ºä½ èŠ‚çº¦æ•°æœˆçš„æ—¶é—´</p>
<a id="more"></a>
<h2 id="1-Why-ML-Strategy"><a href="#1-Why-ML-Strategy" class="headerlink" title="1. Why ML Strategy?"></a>1. Why ML Strategy?</h2><p><img src="/images/deeplearning/C3W1-1_1.png" width="700"></p>
<blockquote>
<p>å¦‚ä¸Šå›¾ç¤ºï¼Œå‡å¦‚æˆ‘ä»¬åœ¨æ„å»ºä¸€ä¸ªå–µå’ªåˆ†ç±»å™¨ï¼Œæ•°æ®é›†å°±æ˜¯ä¸Šé¢å‡ ä¸ªå›¾ï¼Œè®­ç»ƒä¹‹åå‡†ç¡®ç‡è¾¾åˆ°90%ã€‚è™½ç„¶çœ‹èµ·æ¥æŒºé«˜çš„ï¼Œä½†æ˜¯è¿™æ˜¾ç„¶å¹¶ä¸å…·ä¸€èˆ¬æ€§ï¼Œå› ä¸ºæ•°æ®é›†å¤ªå°‘äº†ã€‚é‚£ä¹ˆæ­¤æ—¶å¯ä»¥æƒ³åˆ°çš„MLç­–ç•¥æœ‰å“ªäº›å‘¢ï¼Ÿæ€»ç»“å¦‚ä¸Šå›¾ä¸­ <strong><code>Ideas</code></strong>.</p>
</blockquote>
<h2 id="2-Orthogonalization"><a href="#2-Orthogonalization" class="headerlink" title="2. Orthogonalization"></a>2. Orthogonalization</h2><blockquote>
<p>Orthogonalization [É”:Î¸É’É¡É™nÉ™laÉªâ€™zeÉªÊƒn] æ­£äº¤åŒ–</p>
</blockquote>
<p><img src="/images/deeplearning/C3W1-2_1.png" width="600"></p>
<blockquote>
<p>And when I train a neural networkï¼ŒI tend not to use early shopping.</p>
<p>å› ä¸º Early Stroppingï¼Œè¿™ä¸ªæŒ‰é’®èƒ½åŒæ—¶å½±å“ä¸¤ä»¶äº‹æƒ…. å°±åƒä¸€ä¸ªæŒ‰é’®åŒæ—¶å½±å“ç”µè§†æœºçš„å®½åº¦å’Œé«˜åº¦. å¦‚æœä½ æœ‰æ›´å¤šçš„æ­£äº¤åŒ–(Orthogonalization)çš„æ‰‹æ®µï¼Œç”¨è¿™äº›æ‰‹æ®µè°ƒç½‘ç»œä¼šç®€å•ä¸å°‘.<br>When a supervised learning system is design, these are the 4 assumptions that needs to be true and orthogonal.</p>
</blockquote>
<p><img src="/images/deeplearning/C3W1-3_1.png" width="600"></p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">strategy</th>
<th style="text-align:center">solutions</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1.</td>
<td style="text-align:center">Fit training set well in cost function</td>
<td style="text-align:center">If it doesnâ€™t fit well, the use of a bigger neural network or switching to a better optimization algorithm might help.</td>
</tr>
<tr>
<td style="text-align:center">2.</td>
<td style="text-align:center">Fit development set well on cost function</td>
<td style="text-align:center">If it doesnâ€™t fit well, regularization or using bigger training set might help.</td>
</tr>
<tr>
<td style="text-align:center">3.</td>
<td style="text-align:center">Fit test set well on cost function</td>
<td style="text-align:center">If it doesnâ€™t fit well, the use of a bigger development set might help</td>
</tr>
<tr>
<td style="text-align:center">4.</td>
<td style="text-align:center">Performs well in real world</td>
<td style="text-align:center">If it doesnâ€™t perform well, the development test set is not set correctly or the cost function is not evaluating the right thing</td>
</tr>
</tbody>
</table>
<h2 id="3-Single-number-evaluation-metric"><a href="#3-Single-number-evaluation-metric" class="headerlink" title="3. Single number evaluation metric"></a>3. Single number evaluation metric</h2><p><img src="/images/deeplearning/C3W1-4_1.png" width="700"></p>
<blockquote>
<p>å¤§è‡´çš„æ€æƒ³å°±æ˜¯é¦–å…ˆæŒ‰ç…§å•ä¸€æ•°å­—è¯„ä¼°æŒ‡æ ‡å¯¹æ¨¡å‹è¿›è¡Œè¯„ä»·å’Œä¼˜åŒ–ã€‚ä»¥ç²¾ç¡®ç‡å’Œå¬å›ç‡ä¸ºä¾‹ï¼Œè¿™äºŒè€…ä¸€èˆ¬æ¥è¯´æ˜¯ä¸€ä¸ªä¸å¯å…¼å¾—çš„æŒ‡æ ‡ï¼Œæ‰€ä»¥ä¸ºäº†æ›´å¥½çš„è¡¡é‡æ¨¡å‹çš„å¥½åï¼Œå¼•å…¥F1ç®—æ³•æ¥ç»¼åˆç²¾ç¡®ç‡å’Œå¬å›ç‡å¯¹æ¨¡å‹è¿›è¡Œè¯„ä¼°.</p>
</blockquote>
<!--<img src="/images/deeplearning/C3W1-6_1.png" width="700" />
-->
<p><img src="/images/deeplearning/C3W1-7_1.png" width="700"></p>
<p><a href="https://www.cnblogs.com/techengin/p/8962024.html" target="_blank" rel="external">Ref: sklearnä¸­ F1-micro ä¸ F1-macroåŒºåˆ«å’Œè®¡ç®—åŸç†</a></p>
<h2 id="4-Satisficing-and-optimizing-metrics"><a href="#4-Satisficing-and-optimizing-metrics" class="headerlink" title="4. Satisficing and optimizing metrics"></a>4. Satisficing and optimizing metrics</h2><p>Itâ€™s not always easy into a single real number evaluation metric</p>
<p><img src="/images/deeplearning/C3W1-9_1.png" width="750"></p>
<blockquote>
<p>So more generally, if you have N metrics that you care about, itâ€™s sometimes reasonable to pick one of them to be optimizing. So you want to do as well as is possible on that one. And then N minus 1 to be satisficing.</p>
<p>æ»¡è¶³å’Œä¼˜åŒ–æŒ‡æ ‡æ˜¯å¾ˆé‡è¦çš„</p>
</blockquote>
<h2 id="5-Train-dev-test-distributions"><a href="#5-Train-dev-test-distributions" class="headerlink" title="5. Train/dev/test distributions"></a>5. Train/dev/test distributions</h2><p><img src="/images/deeplearning/C3W1-10_1.png" width="700"></p>
<p><strong>Training, development and test distributions</strong></p>
<blockquote>
<p>Setting up the training, development and test sets have a huge impact on productivity. It is important to<br>choose the development and test sets from the same distribution and it must be taken randomly from all<br>the data.</p>
</blockquote>
<p><strong>Guideline</strong></p>
<blockquote>
<p>Choose a development set and test set to reflect data you expect to get in the future and consider important to do well.</p>
</blockquote>
<p><strong>æ‰€ä»¥ä¸ºäº†å®ç°æœä»åŒä¸€åˆ†å¸ƒï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åš:</strong></p>
<blockquote>
<p>é¦–å…ˆå°†æ‰€æœ‰å›½å®¶å’Œåœ°åŒºçš„æ•°æ®æ‰“æ•£ï¼Œæ··åˆ, æŒ‰ç…§ä¸€å®šçš„æ¯”ä¾‹å°†ä¸Šé¢æ··åˆæ‰“æ•£åçš„æ•°æ®åˆ’åˆ†ä¸º <strong>development and test sets</strong></p>
</blockquote>
<h2 id="6-Size-of-dev-and-test-sets"><a href="#6-Size-of-dev-and-test-sets" class="headerlink" title="6. Size of dev and test sets"></a>6. Size of dev and test sets</h2><p><img src="/images/deeplearning/C3W1-11_1.png" width="750"></p>
<h2 id="7-When-to-change-dev-test-sets-and-metrics"><a href="#7-When-to-change-dev-test-sets-and-metrics" class="headerlink" title="7. When to change dev/test sets and metrics"></a>7. When to change dev/test sets and metrics</h2><p><strong>ä¸¾ä¸ªğŸŒ°:</strong> å‡è®¾ç°åœ¨ä¸€ä¸ªå…¬å¸åœ¨åšä¸€ä¸ªå–µå’ªå›¾ç‰‡æ¨é€æœåŠ¡ï¼ˆå³ç»™ç”¨æˆ·æ¨é€å–µå’ªçš„ç…§ç‰‡ï¼‰ï¼Œéƒ¨ç½²çš„æœ‰ä¸¤ä¸ªç®—æ³•:</p>
<blockquote>
<ul>
<li>ç®—æ³•A: å–µå’ªå›¾ç‰‡è¯†åˆ«è¯¯å·®æ˜¯3%ï¼Œä½†æ˜¯å¯èƒ½ä¼šä¸€ä¸å°å¿ƒå°±ç»™ç”¨æˆ·å‘äº†ä¸€äº›å°‘å„¿ä¸å®œçš„å›¾ç‰‡</li>
<li>ç®—æ³•Bï¼šè¯¯å·®æ˜¯5%ï¼Œä½†æ˜¯ä¸ä¼šç»™ç”¨æˆ·æ¨é€ä¸å¥åº·çš„å›¾ç‰‡</li>
</ul>
<p>æ‰€ä»¥å¯¹äºæŠ€æœ¯äººå‘˜æ¥è¯´å¯èƒ½å¸Œæœ›å‡†ç¡®æ€§é«˜ä¸€äº›çš„ç®—æ³•Aï¼Œè€Œç”¨æˆ·å¯èƒ½ä¼šéå¸¸åœ¨æ„ä½ ç»™ä»–æ¨é€äº†æŸäº›ä¸æƒ³çœ‹çš„ä¸œè¥¿, ä¹Ÿè®¸æ›´å–œæ¬¢ç®—æ³•Bã€‚æ‰€ä»¥æ€»çš„æ¥è¯´å°±æ˜¯æ ¹æ®å®é™…éœ€è¦æ¥ æ”¹å˜å¼€å‘/æµ‹è¯•é›†åˆæŒ‡æ ‡.</p>
</blockquote>
<p><img src="/images/deeplearning/C3W1-12_1.png" width="750"></p>
<h2 id="8-Why-human-level-performance"><a href="#8-Why-human-level-performance" class="headerlink" title="8. Why human-level performance?"></a>8. Why human-level performance?</h2><p><img src="/images/deeplearning/C3W1-14_1.png" width="750"></p>
<blockquote>
<p>å¦‚å›¾ç¤ºï¼š</p>
<ul>
<li>è“è‰²è™šçº¿ï¼šè¡¨ç¤ºäººç±»è¯†åˆ«çš„å‡†ç¡®ç‡</li>
<li>ç´«è‰²æ›²çº¿ï¼šè¡¨ç¤ºæœºå™¨å­¦ä¹ ä¸æ–­è®­ç»ƒè¿‡ç¨‹ä¸­å‡†ç¡®ç‡çš„å˜åŒ–</li>
<li>ç»¿è‰²è™šçº¿ï¼šè¡¨ç¤ºæœ€é«˜çš„å‡†ç¡®ç‡ï¼Œå³100%</li>
</ul>
<p>å…¶ä¸­ç´«è‰²æ›²çº¿åœ¨æœ«å°¾æ”¶æ•›åä¸ç»¿è‰²è™šçº¿ä¹‹é—´çš„å·®è·ç§°ä¸ºè´å¶æ–¯ä¼˜åŒ–è¯¯å·®(Bayse Optima Error)</p>
</blockquote>
<!--<img src="/images/deeplearning/C3W1-13_1.png" width="750" />-->
<p>å› æ­¤åœ¨å®é™…æ“ä½œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥äººç±»å‡†ç¡®ç‡ä¸ºæŒ‡æ ‡æ¥è¯„åˆ¤æˆ‘ä»¬è®­ç»ƒçš„æ¨¡å‹å¥½åç¨‹åº¦</p>
<p><img src="/images/deeplearning/C3W1-15_1.png" width="750"></p>
<h2 id="9-Avoidable-bias"><a href="#9-Avoidable-bias" class="headerlink" title="9. Avoidable bias"></a>9. Avoidable bias</h2><p><img src="/images/deeplearning/C3W1-16_1.png" width="750"></p>
<blockquote>
<p>Humans error ä¸ Training Error ä¹‹é—´çš„å·®è·æˆ‘ä»¬æˆä¸º Avoidable bias<br>Training Error ä¸ Dev Error ä¹‹é—´çš„å·®è·æˆ‘ä»¬æˆä¸º Variance</p>
</blockquote>
<h2 id="10-Understanding-human-level-performance"><a href="#10-Understanding-human-level-performance" class="headerlink" title="10. Understanding human-level performance"></a>10. Understanding human-level performance</h2><p><img src="/images/deeplearning/C3W1-18_1.png" width="750"></p>
<blockquote>
<p><strong>è§£é‡Šè¯´æ˜ Example 1</strong>:</p>
<p>å‡å¦‚ä¸€ä¸ªåŒ»é™¢éœ€è¦å¯¹ä¸€ä¸ªåŒ»å­¦å½±åƒè¿›è¡Œåˆ†ç±»è¯†åˆ«ï¼Œæ™®é€šäººï¼Œæ™®é€šåŒ»ç”Ÿï¼Œæœ‰ç»éªŒçš„åŒ»ç”Ÿå’Œä¸€ç¾¤æœ‰ç»éªŒçš„åŒ»ç”Ÿè¯†åˆ«é”™è¯¯ç‡åˆ†åˆ«ä¸º3%ï¼Œ1%ï¼Œ0.7%ï¼Œ0.5%ã€‚ä¸Šä¸€èŠ‚ä¸­æåˆ°è¿‡Human Errorï¼Œé‚£æ­¤æ—¶çš„è¯¥å¦‚ä½•ç¡®å®šHuman Errorå‘¢ï¼Ÿä½ å¯èƒ½ä¼šè¯´å–å¹³å‡å€¼ï¼Œåªèƒ½è¯´Too Naiveï¼å½“ç„¶æ˜¯å–æœ€å¥½çš„ç»“æœå•¦ï¼Œä¹Ÿå°±æ˜¯ç”±ä¸€ç¾¤ç»éªŒä¸°å¯Œçš„åŒ»ç”Ÿç»„æˆçš„å›¢ä½“å¾—åˆ°çš„ç»“æœä½œä¸ºHuman Errorã€‚å¦å¤–è´å¶æ–¯è¯¯å·®ä¸€å®šå°äº0.5%ã€‚</p>
</blockquote>
<p><img src="/images/deeplearning/C3W1-19_1.png" width="750"></p>
<blockquote>
<p><strong>è§£é‡Šè¯´æ˜ Example 2</strong>:</p>
<p>è¿˜æ˜¯ä»¥åŒ»å­¦å½±åƒåˆ†ç±»è¯†åˆ«ä¸ºä¾‹ï¼Œå‡å¦‚ç°åœ¨åˆ†æˆäº†ä¸‰ç§æƒ…å†µï¼š</p>
<p>Scenario A<br>è®©ä¸‰ç±»äººç¾¤æ¥åˆ’åˆ†åå¾—åˆ°çš„è¯¯å·®åˆ†åˆ«ä¸º1%ï¼Œ0.7%ï¼Œ0.5%ï¼Œè€Œè®­ç»ƒé›†å’Œæµ‹è¯•é›†è¯¯å·®åˆ†åˆ«ä¸º5%ï¼Œ6%ã€‚å¾ˆæ˜¾ç„¶æ­¤æ—¶çš„Avoidable Bias=4%~4.5%ï¼ŒVariance=1%ï¼Œbiasæ˜æ˜¾å¤§äºvarianceï¼Œæ‰€ä»¥æ­¤æ—¶åº”è¯¥å°†é‡å¿ƒæ”¾åˆ°å‡å°biasä¸Šå»ã€‚</p>
<p>Scenario Bayse<br>åŒç†æ­¤æƒ…å†µä¸‹çš„Avoidable Bias=0%~0.5%ï¼ŒVariance=4%ï¼Œæ‰€ä»¥éœ€è¦å‡å°varianceã€‚</p>
<p>Scenario C<br>Avoidable Bias=0.2%ï¼ŒVariance=0.1%ï¼ŒäºŒè€…ç›¸å·®æ— å‡ ï¼Œä½†æ˜¯æ­¤æ—¶è®­ç»ƒçš„æ¨¡å‹å‡†ç¡®ç‡è¿˜æ˜¯ä¸åŠäººç±»ï¼Œæ‰€ä»¥æ²¡åŠæ³•å’±ä»¬è¿˜å¾—ç»§ç»­ä¼˜åŒ–ï¼Œéƒ½è¯´æªæ‰“å‡ºå¤´é¸Ÿï¼Œæ‰€ä»¥ç»§ç»­ä¼˜åŒ–bias~</p>
</blockquote>
<h2 id="11-Surpassing-human-level-performance"><a href="#11-Surpassing-human-level-performance" class="headerlink" title="11. Surpassing human-level performance"></a>11. Surpassing human-level performance</h2><p><img src="/images/deeplearning/C3W1-20_1.png" width="750"></p>
<blockquote>
<p><strong>Scenario A</strong></p>
<ul>
<li>Avoidable Bias=0.1%ï¼ŒVariance=0.2%ï¼Œæ‰€ä»¥æ­¤æ—¶åº”è¯¥å°†é‡å¿ƒæ”¾åˆ°å‡å°Varianceä¸Šå»</li>
</ul>
<p><strong>Scenario B</strong></p>
<ul>
<li>Avoidable Bias=-0.2%ï¼ŒVariance=0.1%.ä¹ä¸€çœ‹å¯èƒ½ä¼šæœ‰ç‚¹ä¸çŸ¥æ‰€æªï¼Œè€Œä¸”è®­ç»ƒé›†å‡†ç¡®åº¦ä¹Ÿè¶…è¿‡äº†äººçš„æœ€å¥½æˆç»©ï¼Œä¸çŸ¥é“åº”è¯¥é€‰æ‹©ä¼˜åŒ–å“ªä¸€é¡¹äº†ï¼Œæˆ–è€…è¯´è¿™æ˜¯ä¸æ˜¯å°±è¯´æ˜å¯ä»¥ä¸ç”¨å†ä¼˜åŒ–äº†å‘¢ï¼Ÿ</li>
</ul>
<p>ï¼ˆè¿˜æ˜¯å¯ä»¥ç»§ç»­ä¼˜åŒ–çš„ã€‚ä¸å¯å¦è®¤åœ¨å›¾åƒè¯†åˆ«æ–¹é¢äººç±»çš„ç¡®å…¶ä¼˜äºæœºå™¨çš„æ–¹é¢ï¼Œä½†æ˜¯åœ¨å…¶ä»–æ–¹é¢ï¼Œå¦‚åœ¨çº¿å¹¿å‘Šæ¨é€ï¼Œè´·æ¬¾ç”³è¯·è¯„æµ‹ç­‰æ–¹é¢æœºå™¨äººè¦è¿œè¿œæ¯”äººç±»ä¼˜ç§€ï¼Œæ‰€ä»¥å¦‚æœæ˜¯åœ¨ä¸Šé¢è¯¾ä»¶ä¸­æåˆ°çš„ä¸€äº›é¢†åŸŸï¼Œå³ä½¿æœºå™¨å‡†ç¡®åº¦è¶…è¿‡äº†äººç±»ï¼Œä¹Ÿè¿˜æœ‰å¾ˆå¤§çš„ä¼˜åŒ–ç©ºé—´ã€‚å…·ä½“æ€ä¹ˆä¼˜åŒ–ã€‚ã€‚ã€‚ä»¥åå†æ¢ç´¢ã€‚ã€‚ã€‚ï¼‰</p>
</blockquote>
<h2 id="12-Improving-your-model-performance"><a href="#12-Improving-your-model-performance" class="headerlink" title="12. Improving your model performance"></a>12. Improving your model performance</h2><p><img src="/images/deeplearning/C3W1-21_1.png" width="750"></p>
<h2 id="13-Reference"><a href="#13-Reference" class="headerlink" title="13. Reference"></a>13. Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7681619.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ç»“æ„åŒ–æœºå™¨å­¦ä¹ é¡¹ç›®â€“week1 æœºå™¨å­¦ä¹ ç­–ç•¥</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Improving DNN (week3) - Hyperparameterã€Batch Regularization]]></title>
      <url>http://shopee.ai/2018/07/23/deeplearning/Improving-Deep-Neural-Networks-week3/</url>
      <content type="html"><![CDATA[<p>Hyperparameter Tuning processã€Normalizing Activations in a network</p>
<p>Fitting Batch Norm into a neural networkã€Why does Batch Norm work?ã€Batch Norm at test time</p>
<p>Softmax regressionã€TensorFlow</p>
<a id="more"></a>
<h2 id="1-Hyperparameter-Tuning-process"><a href="#1-Hyperparameter-Tuning-process" class="headerlink" title="1. Hyperparameter Tuning process"></a>1. Hyperparameter Tuning process</h2><p>æ­£å¸¸æƒ…å†µæœ‰å¦‚ä¸‹è¶…å‚æ•°:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Hyperparameter</th>
<th style="text-align:center">Desc</th>
<th style="text-align:center">Importance level</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><font color="red">Î±</font></td>
<td style="text-align:center">æœ€é‡è¦</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center"><font color="orange">hidden units</font></td>
<td style="text-align:center"></td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center"><font color="orange">mini-batch size</font></td>
<td style="text-align:center"></td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center"><font color="orange">Î²</font></td>
<td style="text-align:center"></td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center"><font color="purple">layers</font></td>
<td style="text-align:center"></td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center"><font color="purple">learning rate decay</font></td>
<td style="text-align:center"></td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">$Î²_1,Î²_2,Îµ$</td>
<td style="text-align:center">æœ€ä¸é‡è¦</td>
<td style="text-align:center">4</td>
</tr>
</tbody>
</table>
<blockquote>
<p>é¢œè‰²è¡¨ç¤ºé‡è¦æ€§ï¼Œä»¥åŠè°ƒè¯•è¿‡ç¨‹ä¸­å¯èƒ½ä¼šéœ€è¦ä¿®æ”¹çš„ç¨‹åº¦.</p>
</blockquote>
<h3 id="é‚£ä¹ˆå¦‚ä½•é€‰æ‹©è¶…å‚æ•°çš„å€¼å‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆå¦‚ä½•é€‰æ‹©è¶…å‚æ•°çš„å€¼å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆå¦‚ä½•é€‰æ‹©è¶…å‚æ•°çš„å€¼å‘¢ï¼Ÿ:"></a>é‚£ä¹ˆå¦‚ä½•é€‰æ‹©è¶…å‚æ•°çš„å€¼å‘¢ï¼Ÿ:</h3><ul>
<li>é¦–å…ˆæ˜¯ç²—ç•¥åœ°éšæœºåœ°å¯»æ‰¾æœ€ä¼˜å‚æ•°</li>
</ul>
<p><img src="/images/deeplearning/C2W3-1_1.png" width="700"></p>
<p><strong>å»ºè®®ä½¿ç”¨å›¾å³çš„æ–¹å¼ï¼ŒåŸå› å¦‚ä¸‹ï¼š</strong></p>
<blockquote>
<p>å¯¹äºå›¾å·¦çš„è¶…å‚æ•°åˆ†å¸ƒè€Œè¨€ï¼Œå¯èƒ½ä¼šä½¿å¾—å‚è€ƒæ€§é™ä½ï¼Œæˆ‘ä»¬å‡è®¾è¶…å‚1æ˜¯å­¦ä¹ ç‡Î±ï¼Œè¶…å‚2æ˜¯Îµï¼Œæ ¹æ®week2ä¸­Adamç®—æ³•çš„ä»‹ç»ï¼Œæˆ‘ä»¬çŸ¥é“Îµçš„ä½œç”¨å‡ ä¹å¯ä»¥å¿½ç•¥ï¼Œæ‰€ä»¥å¯¹äºå›¾å·¦25ä¸­å‚æ•°åˆ†å¸ƒæ¥è¯´ï¼Œå…¶æœ¬è´¨åªæœ‰5ç§å‚æ•°åˆ†å¸ƒã€‚è€Œå³è¾¹åˆ™æ˜¯25ç§éšæœºåˆ†å¸ƒï¼Œæ›´èƒ½å¸®åŠ©æˆ‘ä»¬é€‰æ‹©åˆé€‚çš„è¶…å‚æ•°.</p>
</blockquote>
<p><strong>å…¶æ¬¡åœ¨ä¸Šé¢æ‰¾åˆ°çš„æœ€ä¼˜å‚æ•°åˆ†å¸ƒå‘¨å›´å†éšæœºåœ°å¯»æ‰¾æœ€æœ‰å‚æ•°</strong></p>
<p><img src="/images/deeplearning/C2W3-2_1.png" width="700"></p>
<h2 id="2-Using-an-appropriate-scale-to-pick-hyperparameters"><a href="#2-Using-an-appropriate-scale-to-pick-hyperparameters" class="headerlink" title="2. Using an appropriate scale to pick hyperparameters"></a>2. Using an appropriate scale to pick hyperparameters</h2><p>ä¸Šä¸€èŠ‚æåˆ°çš„çš„éšæœºé‡‡æ ·è™½ç„¶èƒ½å¸®åŠ©æˆ‘ä»¬å¯»æ‰¾æœ€ä¼˜å‚æ•°åˆ†å¸ƒï¼Œä½†æ˜¯è¿™æœ‰ç‚¹åƒå¤§æµ·æé’ˆï¼Œå¦‚æœèƒ½å¤ŸæŒ‡å‡ºå‚æ•°å–å€¼çš„èŒƒå›´ï¼Œç„¶åå†å»å¯»æ‰¾æœ€ä¼˜çš„å‚æ•°åˆ†å¸ƒå²‚ä¸æ˜¯æ›´åŠ çš„ç¾æ»‹æ»‹ï¼Ÿé‚£å¦‚ä½•ä¸ºè¶…å‚æ•°é€‰æ‹©åˆé€‚çš„èŒƒå›´å‘¢ï¼Ÿ</p>
<blockquote>
<p>$n^{[l]}=50,â€¦â€¦,100$</p>
<p>$layers=2~4$</p>
<p>$Î±=0.0001ï¼Œâ€¦â€¦,1$</p>
</blockquote>
<p>æ­¤æ—¶æ³¨æ„: å¦‚æŒ‰ç…§çº¿æ€§åˆ’åˆ†çš„è¯(å¦‚ä¸‹å›¾)ï¼Œé‚£ä¹ˆéšæœºé‡‡æ ·çš„å€¼ 90% çš„æ•°æ®æ¥è‡ª [0.1,1] è¿™ä¸ªåŒºé—´, è¿™æ˜¾ç„¶ä¸ä¸å¤ªç¬¦åˆéšæœºæ€§.</p>
<p><img src="/images/deeplearning/C2W3-3_1.png" width="700"></p>
<blockquote>
<p>æ‰€ä»¥ä¸ºäº†æ”¹è¿›è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å°†åŒºé—´å¯¹æ•°åŒ–æ¥é‡‡æ ·.</p>
<p><strong>ä¸¾ä¸ªğŸŒ°ï¼š</strong> æˆ‘ä»¬å°† [0.0001,1] è½¬åŒ–æˆå››ä¸ªåŒºé—´ [0.0001,0.001], [0.001,0.01], [0.01,0.1], [0.1,1], å†è½¬åŒ–æˆå¯¹æ•°å°±æ˜¯ [-4,-3], [-3,-2], [-2,-1], [-1,0].</p>
<p>($10^{âˆ’4}=0.0001$ï¼Œå…¶ä»–åŒç†å–æŒ‡æ•°).</p>
</blockquote>
<p>ç„¶åæˆ‘ä»¬å¯ä»¥ç”¨ Python ä¸­æä¾›çš„æ–¹æ³•æ¥å®ç°éšæœºé‡‡æ ·ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r = <span class="number">-4</span>*np.random.rand() <span class="comment"># rand()è¡¨ç¤ºåœ¨[0,1]ä¸Šå‡åŒ€é‡‡æ ·, æœ€åçš„é‡‡æ ·åŒºé—´æ˜¯[-4, 0]</span></span><br><span class="line">a = pow(<span class="number">10</span>, r)</span><br></pre></td></tr></table></figure>
<p><img src="/images/deeplearning/C2W3-4_1.png" width="700"></p>
<p><strong>$Î²=0.9,â€¦â€¦,0.999$</strong></p>
<p>åŒç†è¿™é‡Œä¹Ÿä¸èƒ½ä½¿ç”¨çº¿æ€§è½´æ¥é‡‡æ ·æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹ <strong>1-Î²=0.1,â€¦â€¦,0.001</strong> æ¥é—´æ¥é‡‡æ ·ã€‚è½¬åŒ–æˆ [0.1, 0.01], [0.01,0.001], è½¬åŒ–æˆå¯¹æ•°æŒ‡æ•° [-1,-2],[-2,-3]ã€‚</p>
<p>å³: $râˆˆ[-3,-1], 1-Î²=10^r, Î²=1-10^r$</p>
<blockquote>
<p>å½“ Î² æ¥è¿‘ 1 æ—¶, Î² å°±ä¼šå¯¹ç»†å¾®çš„å˜åŒ–å˜å¾—å¾ˆæ•æ„Ÿ.</p>
<p>for example : 0.999, 0.9995 =&gt; 1000 -&gt; 2000</p>
<p>æ‰€ä»¥ä½ éœ€è¦æ›´åŠ å¯†é›†çš„å–å€¼ï¼Œåœ¨ Î² æ¥è¿‘ 1 çš„æ—¶å€™.</p>
</blockquote>
<h2 id="3-Hyperparameters-tuning-in-practice-Pandas-vs-Caviar"><a href="#3-Hyperparameters-tuning-in-practice-Pandas-vs-Caviar" class="headerlink" title="3. Hyperparameters tuning in practice: Pandas vs Caviar"></a>3. Hyperparameters tuning in practice: Pandas vs Caviar</h2><p><img src="/images/deeplearning/C2W3-5_1.png" width="700"></p>
<p><strong>Babysitting one model:</strong></p>
<p>è¿™ç§æ–¹æ³•é€‚ç”¨äºæœ‰è¶³å¤Ÿçš„æ•°æ®é›†ï¼Œä½†æ˜¯ GPUï¼ŒCPU èµ„æºæœ‰é™çš„æƒ…å†µï¼Œæ‰€ä»¥å¯èƒ½åªèƒ½è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œç„¶åæ¯å¤©å¯¹æ¨¡å‹åšæŸä¸€é¡¹è¶…å‚æ•°çš„ä¿®æ”¹ï¼ŒæŸ¥çœ‹æ•ˆæœæ˜¯å¦å˜å¾—æ›´å¥½.</p>
<blockquote>
<p>ä¾‹å¦‚ç¬¬ä¸€å¤©ä»¤æ‰€æœ‰è¶…å‚æ•°éšæœºåˆå§‹åŒ–ã€‚åˆ°äº†ç¬¬äºŒå¤©å‘ç°æ•ˆæœè¿˜ä¸é”™ï¼Œæ­¤æ—¶å¯ä»¥å»å¢åŠ å­¦ä¹ ç‡(ä¹Ÿå¯ä»¥ä¿®æ”¹å…¶ä»–å‚æ•°)ã€‚â€¦â€¦ï¼Œåˆ°äº†æŸä¸€å¤©åŠ å…¥ä¿®æ”¹äº†mini-batch sizeï¼Œç»“æœæ•ˆæœæ˜æ˜¾å‡å¼±ï¼Œè¿™æ—¶åˆ™éœ€è¦é‡æ–°æ¢å¤åˆ°å‰ä¸€å¤©çš„çŠ¶æ€ã€‚</p>
<p>æ€»çš„æ¥è¯´è¿™ä¸€è¿‡ç¨‹å°±åƒç†ŠçŒ«ä¸€æ ·ï¼Œåªç…§é¡¾ä¸€ä¸ªå®å®ï¼Œå¤šçš„ç…§é¡¾ä¸è¿‡æ¥.</p>
</blockquote>
<p><strong>Train many models in parallel:</strong></p>
<blockquote>
<p>è¿™ç§æ–¹æ³•é€‚ç”¨äºè´¢å¤§æ°”ç²—çš„æƒ…å†µï¼Œå³å¹¶è¡Œè®­ç»ƒå¤šä¸ªæ¨¡å‹ï¼Œæœ€åé€‰å‡ºæ•ˆæœæœ€å¥½çš„ä¸€ä¸ªå³å¯ã€‚è¿™å°±åƒé±¼å­é…±ä¸€æ ·ï¼Œä¸€ä¸‹ç”Ÿå¤šå¤§ä¸€äº¿çš„å­©å­.</p>
</blockquote>
<h2 id="4-Normalizing-Activations-in-a-network"><a href="#4-Normalizing-Activations-in-a-network" class="headerlink" title="4. Normalizing Activations in a network"></a>4. Normalizing Activations in a network</h2><p>ä¸ä»…è¦å½’ä¸€åŒ–è¾“å…¥æ•°æ® <strong>$X$</strong>,éšè—å±‚çš„æ•°æ®ä¹Ÿæ˜¯è¦å½’ä¸€åŒ–çš„. ä¸€èˆ¬æ¥è¯´éšè—å±‚æ•°æ®æœ‰ $Z$ å’Œ $a$ ä¸¤ç§ï¼ŒAndrew Ng æ¨èå½’ä¸€åŒ– <strong>$z$</strong>.</p>
<blockquote>
<p>Batch å½’ä¸€åŒ– ç”± Sergey loffe å’Œ Christian Szegedy ä¸¤ä½ç ”ç©¶è€…åˆ›é€ .</p>
</blockquote>
<p>Batch å½’ä¸€åŒ–ï¼Œä¼šä½¿ä½ çš„å‚æ•°æœç´¢å˜å¾—å®¹æ˜“, ä½¿ç¥ç»ç½‘ç»œå¯¹è¶…å‚æ•°çš„æœç´¢æ›´åŠ ç¨³å®š. è¿™æ ·ä¹Ÿä¼šä½¿å¾—ä½ å®¹æ˜“è®­ç»ƒæ·±å±‚ç¥ç»ç½‘ç»œã€‚</p>
<p><strong>è¾“å…¥æ•°æ® $X$ å½’ä¸€åŒ–æ–¹æ³•:</strong></p>
<p>$$<br>Î¼=\frac{1}{m}\sum_{i}{x^{(i)}}<br>$$</p>
<p>$$<br>Ïƒ^2=\frac{1}{m}\sum_{i}x^{(i)^2}<br>$$</p>
<p>$$<br>x=\frac{x-Î¼}{Ïƒ^2}<br>$$</p>
<blockquote>
<p>m ä¸º mini-batch ä¸­çš„ mï¼Œ è€Œä¸æ˜¯æ•´ä¸ªè®­ç»ƒé›†</p>
</blockquote>
<p><strong>éšè—å±‚æ•°æ®å½’ä¸€åŒ–æ–¹æ³•:</strong></p>
<p>$$<br>Î¼=\frac{1}{m}\sum_{i}{z^{(i)}-Î¼}<br>$$</p>
<p>$$<br>Ïƒ^2=\frac{1}{m}\sum_{i}(z^{(i)^2}-Î¼)^2<br>$$</p>
<p>$$<br>z^{(i)}_{norm}=\frac{z^{(i)}-Î¼}{\sqrt{Ïƒ^2+Îµ}}<br>$$</p>
<p>ä¸Šé¢çš„å½’ä¸€åŒ–åçš„æ•°æ® $z$ éƒ½æ˜¯æœä»å‡å€¼ä¸º 0ï¼Œæ–¹å·®ä¸º 1 çš„ï¼Œæ˜¾ç„¶è¿™æ ·ä¸èƒ½æ»¡è¶³å’±ä»¬çš„éœ€æ±‚ï¼Œæ‰€ä»¥è¿˜éœ€è¦åšè¿›ä¸€æ­¥å¤„ç†ï¼Œå¦‚ä¸‹ï¼š</p>
<p>$$<br>\tilde{z}^{(i)}=Î³z^{(i)} + Î²<br>$$</p>
<p>ä¸Šå¼ä¸­çš„ $Î³$ å¯ä»¥è®¾ç½®æ–¹å·®ï¼Œ$Î²$ å¯ä»¥è®¾ç½®å‡å€¼.</p>
<blockquote>
<p>ä½ ä¹Ÿè®¸ä¸æƒ³éšå±‚å•å…ƒå€¼å¿…é¡»æ˜¯å¹³å‡å€¼0 å’Œ æ–¹å·®1, æ¯”å¦‚ä½ æœ‰ä¸€ä¸ª sigmoid å‡½æ•°ï¼Œä½ ä¸æƒ³è®©å®ƒçš„å€¼å®Œå…¨é›†ä¸­åœ¨è¿™é‡Œ, ä½ ä¸æƒ³ä½¿ä»–ä»¬å¹³å‡å€¼å’Œæ–¹å·®ä¸€ç›´æ˜¯0å’Œ1ï¼Œ è¿™æ ·å¯ä»¥æ›´å¥½çš„åˆ©ç”¨éçº¿æ€§çš„ Sigmoid å‡½æ•°ï¼Œ è€Œä¸æ˜¯æ‰€æœ‰å€¼éƒ½é›†ä¸­åœ¨çº¿æ€§çš„åŒºåŸŸ, $Î³$ å’Œ $Î²$ å¯ä»¥ç¡®ä¿æ‰€æœ‰çš„ $Z^{(i)}$ å€¼ï¼Œå¯ä»¥æ˜¯ä½ æƒ³èµ‹äºˆçš„ä»»æ„å€¼. æˆ–è€… å®ƒçš„ä½œç”¨æ˜¯ä¿è¯éšè—çš„å•å…ƒå·²ä½¿å‡å€¼å’Œæ–¹å·®æ ‡å‡†åŒ–. é‚£é‡Œå‡å€¼å’Œæ–¹å·®ç”±ä¸¤å‚æ•°æ§åˆ¶. $Î³$ å’Œ $Î²$ å­¦ä¹ ç®—æ³•å¯ä»¥è®¾ç½®ä¸ºä»»ä½•å€¼. æ‰€ä»¥å®ƒçš„çœŸæ­£ä½œç”¨æ˜¯ä½¿å‡å€¼å’Œæ–¹å·®æ ‡å‡†åŒ–. $Z^{(i)}$ æœ‰å›ºå®šçš„å‡å€¼å’Œæ–¹å·®ï¼Œå‡å€¼å’Œæ–¹å·®å¯ä»¥æ˜¯0å’Œ1ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å€¼ï¼Œç”± $Î³$ å’Œ $Î²$ ç¡®å®š.</p>
<p>In practiceï¼Œ normlizing $Z^{[2]}$ is done much more often.</p>
</blockquote>
<h2 id="5-Fitting-Batch-Norm-into-a-neural-network"><a href="#5-Fitting-Batch-Norm-into-a-neural-network" class="headerlink" title="5. Fitting Batch Norm into a neural network"></a>5. Fitting Batch Norm into a neural network</h2><p><strong>adding batch Norm to a network</strong></p>
<p><img src="/images/deeplearning/C2W3-6_1.png" width="750"></p>
<p><strong>working with mini-batches</strong></p>
<p>ä¸€èˆ¬çš„æ–¹æ³•ä¸­</p>
<p>$$<br>z^{[l]}=w^{[l]}a^{[l-1]}+b^{[l]}<br>$$</p>
<p>åœ¨ä¸Šé¢å½’ä¸€åŒ–æ•°æ®è¿‡ç¨‹ä¸­éœ€è¦å‡å»å‡å€¼ï¼Œæ‰€ä»¥ $b^{[l]}$ è¿™ä¸€é¡¹å¯ä»¥çœç•¥æ‰,æ‰€ä»¥å½’ä¸€åŒ–åæ˜¯</p>
<p>$$<br>z_{norm}^{[l]}=w^{[l]}a^{[l-1]}<br>$$</p>
<p>ä¸ºäº†èƒ½å¤Ÿä½¿æ•°æ®åˆ†å¸ƒæ›´åŠ æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å…¬å¼</p>
<p>$$<br>\tilde{z}^{[l]}=Î³^{[l]}z_{norm}^{[l]}+Î²^{[l]}<br>$$</p>
<p><strong>Implementing gradient descent</strong></p>
<p>for t= 1,â€¦â€¦,numMinBatches</p>
<ul>
<li>è®¡ç®—åŸºäºç¬¬ $t$ æ‰¹æ•°æ®çš„å‰å‘ä¼ æ’­</li>
<li>åœ¨è®¡ç®—åå‘ä¼ æ’­æ—¶ä½¿ç”¨ $\tilde{z}^{[l]}$, å¾—åˆ° $dw^{[l]},dÎ²^{[l]},dÎ³^{[l]}$</li>
<li>æ›´æ–°å‚æ•°</li>
</ul>
<p>$$<br>w^{[l]}=w^{[l]}-Î±dw^{[l]} \\<br>Î²^{[l]}=Î²^{[l]}-Î±dÎ²^{[l]} \\<br>Î³^{[l]}=Î³^{[l]}-Î±dÎ³^{[l]}<br>$$</p>
<h2 id="6-Why-does-Batch-Norm-work"><a href="#6-Why-does-Batch-Norm-work" class="headerlink" title="6. Why does Batch Norm work?"></a>6. Why does Batch Norm work?</h2><p><strong>åŸå› ä¸€:</strong></p>
<p><strong>batch norm</strong> å¯ä»¥ä½¿å¾—æƒé‡æ¯”ä½ çš„ç½‘ç»œæ›´æ»åæˆ–æ›´æ·±å±‚ï¼Œä¸ºäº†æ›´å¥½åœ°ç†è§£å¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­:</p>
<p><img src="/images/deeplearning/C2W3-7_1.png" width="700"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨è¦è®¡ç®—ç¬¬ä¸‰å±‚éšè—å±‚çš„å€¼ï¼Œå¾ˆæ˜¾ç„¶è¯¥å±‚çš„è®¡ç®—ç»“æœä¾èµ–ç¬¬äºŒå±‚çš„æ•°æ®ï¼Œä½†æ˜¯ç¬¬äºŒå±‚çš„æ•°æ®å¦‚æœæœªå½’ä¸€åŒ–ä¹‹å‰æ˜¯ä¸å¯çŸ¥çš„ï¼Œåˆ†å¸ƒæ˜¯éšæœºçš„ã€‚è€Œå¦‚æœè¿›è¡Œå½’ä¸€åŒ–åï¼Œå³ $\tilde{z}^{[2]}=Î³^{[2]}z_{norm}^{[2]}+Î²^{[2]}$ å¯ä»¥å°†ç¬¬äºŒå±‚æ•°æ®é™åˆ¶ä¸ºå‡å€¼ä¸º $Î²^{[2]}$, æ–¹å·®ä¸º $Î³^{[2]}$ çš„åˆ†å¸ƒ,æ³¨æ„è¿™ä¸¤ä¸ªå‚æ•°å¹¶ä¸éœ€è¦äººä¸ºè®¾ç½®ï¼Œå®ƒä¼šè‡ªåŠ¨å­¦ä¹ çš„ã€‚æ‰€ä»¥å³ä½¿è¾“å…¥æ•°æ®åƒå˜ä¸‡åŒ–ï¼Œä½†æ˜¯ç»è¿‡å½’ä¸€åŒ–ååˆ†å¸ƒéƒ½æ˜¯å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚çš„ï¼Œæ›´ç®€å•åœ°è¯´å°±æ˜¯å½’ä¸€åŒ–æ•°æ®å¯ä»¥å‡å¼±å‰å±‚å‚æ•°çš„ä½œç”¨ä¸åå±‚å‚æ•°çš„ä½œç”¨ä¹‹é—´çš„è”ç³»ï¼Œå®ƒä½¿å¾—ç½‘ç»œæ¯å±‚éƒ½å¯ä»¥è‡ªå·±å­¦ä¹ ã€‚</p>
<p><strong>åŸå› äºŒ:</strong></p>
<p>batch norm å¥æ•ˆçš„å¦ä¸€ä¸ªåŸå› åˆ™æ˜¯å®ƒå…·æœ‰æ­£åˆ™åŒ–çš„æ•ˆæœã€‚å…¶ä¸dropoutæœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œæˆ‘ä»¬çŸ¥é“dropoutä¼šéšæœºçš„ä¸¢æ‰ä¸€äº›èŠ‚ç‚¹ï¼Œå³æ•°æ®ï¼Œè¿™æ ·ä½¿å¾—æ¨¡å‹è®­ç»ƒä¸ä¼šè¿‡åˆ†ä¾èµ–æŸä¸€ä¸ªèŠ‚ç‚¹æˆ–æŸä¸€å±‚æ•°æ®ã€‚batch normä¹Ÿæ˜¯å¦‚æ­¤ï¼Œé€šè¿‡å½’ä¸€åŒ–ä½¿å¾—å„å±‚ä¹‹é—´çš„ä¾èµ–æ€§é™ä½ï¼Œå¹¶ä¸”ä¼šç»™æ¯å±‚éƒ½åŠ å…¥ä¸€äº›å™ªå£°ï¼Œä»è€Œè¾¾åˆ°æ­£åˆ™åŒ–çš„ç›®çš„</p>
<blockquote>
<p>Batch å®ƒé™åˆ¶äº†åœ¨å‰å±‚çš„å‚æ•°æ›´æ–°ï¼Œä¼šå½±å“æ•°å€¼åˆ†å¸ƒçš„ç¨‹åº¦ï¼Œç¬¬ä¸‰å±‚çœ‹åˆ°çš„è¿™ç§æƒ…å†µï¼Œå› æ­¤å¾—å­¦ä¹ . <strong>batch å½’ä¸€åŒ–å‡å°‘äº†è¾“å…¥å€¼æ”¹å˜çš„é—®é¢˜</strong>, å®ƒçš„ç¡®æ˜¯è¿™äº›å€¼å˜å¾—æ›´ç¨³å®š. ç¥ç»ç½‘ç»œçš„ä¹‹åå±‚å°±ä¼šæœ‰æ›´åšå®çš„åŸºç¡€. å³ä½¿è¾“å…¥åˆ†å¸ƒæ”¹å˜äº†ä¸€äº›ï¼Œå®ƒä¼šæ”¹å˜å¾—æ›´å°‘ï¼Œå®ƒåšçš„æ˜¯ å½“å‰å±‚ä¿æŒå­¦ä¹ ï¼Œå½“å±‚æ”¹å˜æ—¶ï¼Œè¿«ä½¿åå±‚, é€‚åº”çš„ç¨‹åº¦å‡å°‘äº†ï¼Œä½ å¯ä»¥è¿™æ ·æƒ³ï¼Œå®ƒå‡å¼±äº†å‰å±‚å‚æ•°çš„ä½œç”¨ï¼Œä¸åå±‚å‚æ•°çš„ä½œç”¨ä¹‹é—´çš„è”ç³»ï¼Œå®ƒä½¿å¾—ç½‘ç»œæ¯å±‚éƒ½å¯ä»¥è‡ªå·±å­¦ä¹ . ç¨ç¨ç‹¬ç«‹äºå…¶å®ƒå±‚ï¼Œè¿™æœ‰åŠ©äºåŠ é€Ÿæ•´ä¸ªç½‘ç»œçš„å­¦ä¹ .</p>
<p>batch norm ä¸­æœ‰ä¸€ä¸ªä½œç”¨ï¼Œå¯ä»¥èµ·åˆ°è½»å¾® æ­£åˆ™åŒ– çš„ä½œç”¨. (å› ä¸ºæ·»åŠ çš„å™ªéŸ³å¾ˆå¾®å°ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯å·¨å¤§çš„æ­£åˆ™åŒ–)ï¼Œ ä½ å¯ä»¥å°† batch norm å’Œ dropout ä¸€èµ·ä½¿ç”¨.</p>
<p>dropout, ä½ åº”ç”¨è¾ƒå¤§çš„ mini-batch æ¯”å¦‚ 512ï¼Œé‚£ä¹ˆå¯ä»¥å‡å°‘å™ªéŸ³ä¹Ÿ, å› æ­¤å‡å°‘äº†æ­£åˆ™åŒ–çš„æ•ˆæœ. è¿™æ˜¯ dropout çš„ä¸€ä¸ªå¥‡æ€ªçš„æ€§è´¨.</p>
<p>batch norm æ˜¯ä¸€ä¸ªæ­£åˆ™åŒ–çš„è§„åˆ™ï¼Œè€Œä¸è¦æŠŠå®ƒå½“åšç›®çš„. ä½†æ˜¯æœ‰æ—¶å€™ï¼Œå®ƒä¼šå¯¹ä½ çš„ç®—æ³•æœ‰é¢å¤–çš„æœŸæœ›å’ŒéæœŸæœ›æ•ˆæœ.</p>
<p>batch norm ä¸€æ¬¡åªèƒ½å¤„ç† ä¸€ä¸ª mini-batch çš„æ•°æ®. å®ƒåœ¨ mini-batch ä¸Šè®¡ç®—æœŸæœ›ä¸æ–¹å·®.</p>
</blockquote>
<h2 id="7-Batch-Norm-at-test-time"><a href="#7-Batch-Norm-at-test-time" class="headerlink" title="7. Batch Norm at test time"></a>7. Batch Norm at test time</h2><p>å‰é¢æåˆ°çš„ batch norm éƒ½æ˜¯åŸºäºè®­ç»ƒé›†çš„ï¼Œä½†æ˜¯åœ¨æµ‹è¯•é›†ä¸Šï¼Œæœ‰æ—¶å€™å¯èƒ½æˆ‘ä»¬çš„æµ‹è¯•æ•°æ®å¾ˆå°‘ï¼Œä¾‹å¦‚åªæœ‰1ä¸ªï¼Œåœ¨è¿™ä¸ªæ—¶å€™è¿›è¡Œå½’ä¸€åŒ–åˆ™æ˜¾å¾—æ²¡å¤šå¤§æ„ä¹‰äº†ã€‚é‚£ä¹ˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå‡å€¼$Î¼$ å’Œ æ–¹å·®$Ïƒ^2$è¯¥å¦‚ä½•ç¡®å®šå‘¢ï¼Ÿ</p>
<blockquote>
<p>æ–¹æ³•è¿˜æ˜¯æœ‰çš„ï¼Œè€Œä¸”å·²ç»åœ¨ä¸Šé¢æåˆ°è¿‡äº†, å°±æ˜¯ç¬¬ä¸‰èŠ‚æ‰€ä»‹ç»çš„<strong>æŒ‡æ•°åŠ æƒå¹³å‡</strong>å•¦ï¼ŒåŸç†æ˜¯ç±»ä¼¼çš„</p>
</blockquote>
<p>å‡è®¾ä¸€å…±æœ‰å¦‚ä¸‹ $x^1,x^2,â€¦â€¦,x^5000$ çš„æ‰¹é‡æ•°æ®ï¼Œæ¯ç»„mini-batch éƒ½å¾—åˆ°äº†å¯¹åº”çš„å‡å€¼$Î¼$, (æ–¹å·®åŒç†ï¼Œä¸è¯¦ç»†è¯´æ˜äº†)ï¼Œå³ $Î¼^1,Î¼^2,â€¦â€¦,Î¼^5000$, å¦‚æœæµ‹è¯•é›†æ•°æ®å¾ˆå°‘ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨æŒ‡æ•°åŠ æƒå¹³å‡çš„æ–¹æ³•æ¥å¾—åˆ°æµ‹è¯•é›†çš„å‡å€¼å’Œæ–¹å·®ã€‚</p>
<p>ä¹‹åå°±æ ¹æ®<strong>æŒ‡æ•°åŠ æƒå¹³å‡</strong>è®¡ç®—å¾—åˆ°çš„å€¼æ¥è®¡ç®—å½’ä¸€åŒ–åçš„è¾“å…¥å€¼å³å¯.</p>
<p><img src="/images/deeplearning/C2W3-8_1.png" width="750"></p>
<blockquote>
<p><strong>Andrew Ng è¯­å½•:</strong></p>
<p>å¦‚æœå°†ä½ çš„ç¥ç»ç½‘ç»œç”¨äº<strong>æµ‹è¯•</strong>ï¼Œä½ éœ€è¦å•ç‹¬ä¼°ç®— $Î¼$ å’Œ $Ïƒ^2$, åœ¨å…¸å‹çš„ Batch å½’ä¸€åŒ–è¿ç”¨ä¸­ï¼Œä½ éœ€è¦ç”¨ä¸€ä¸ªæŒ‡æ•°åŠ æƒå¹³å‡æ¥ä¼°ç®—ï¼Œæ•´ä¸ªå¹³å‡æ•°è¦†ç›–äº†æ‰€æœ‰çš„ mini-batch .</p>
<p>$$<br>z^{(i)}_{norm}=\frac{z^{(i)}-Î¼}{\sqrt{Ïƒ^2+Îµ}}<br>$$</p>
<p>ä¸Šä¸ªå¼å­ $z^{(i)}_{norm}$ ä¸­çš„ï¼Œ$Î¼$, $Ïƒ^2$ æ˜¯ç±»ä¼¼åŠ æƒå¹³å‡å‡ºæ¥çš„å€¼.</p>
<p>æ³¨æ„ï¼šæµ‹è¯•é›†çš„å‡å€¼å’Œæ–¹å·®ç”Ÿæˆçš„æ–¹å¼ä¸ä¸€å®šéå¾—æ˜¯ä¸Šé¢æåˆ°çš„æŒ‡æ•°åŠ æƒå¹³å‡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç®€å•ç²—æš´çš„è®¡ç®—æ‰€æœ‰è®­ç»ƒé›†çš„å‡å€¼å’Œæ–¹å·®ï¼Œè§†é¢‘ä¸­ Andrew Ng è¯´è¿™ä¹Ÿæ˜¯å¯è¡Œçš„.</p>
</blockquote>
<h2 id="8-Softmax-regression"><a href="#8-Softmax-regression" class="headerlink" title="8. Softmax regression"></a>8. Softmax regression</h2><p><img src="/images/deeplearning/C2W3-9_1.png" width="750"></p>
<p>å‡è®¾ç¬¬ $l$ å±‚æœ‰ $z^{[l]}=w^{[l]}a^{[l-1]}+b^{[l]}$, æ¿€æ´»å‡½æ•°ä¸º $a^{[l]}=\frac{e^{z^{[l]}}}{\sum_{j=1}^{n_l}e^{z^{[l]}_j}}$</p>
<p>è¯¥èŠ‚è§†é¢‘ä¸­ Andrew Ng å¹¶æ²¡æœ‰å¾ˆè¯¦ç»†çš„ä»‹ç» softmax çš„åŸç†å’Œå…¬å¼æ¨å¯¼ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æˆ³å¦‚ä¸‹é“¾æ¥è¿›è¡Œè¿›ä¸€æ­¥äº†è§£ï¼š</p>
<ul>
<li><a href="http://ufldl.stanford.edu/wiki/index.php/Softmaxå›å½’" target="_blank" rel="external">ufldl: Softmax å›å½’</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/21485970" target="_blank" rel="external">softmax å…¬å¼æ¨å¯¼&amp;ç®—æ³•å®ç°</a></li>
</ul>
<h2 id="9-Trying-a-softmax-classifier"><a href="#9-Trying-a-softmax-classifier" class="headerlink" title="9. Trying a softmax classifier"></a>9. Trying a softmax classifier</h2><blockquote>
<p><a href="http://www.cnblogs.com/marsggbo/p/7467347.html" target="_blank" rel="external">è½¬è½½: å…·ä½“å®è·µé¡¹ç›®å¯å‚è§softmaxåˆ†ç±»ç®—æ³•åŸç†(ç”¨pythonå®ç°)</a></p>
<p>ä¸Šé¢çš„è½¬è½½å®ç° softmax éœ€è¦å†ä»”ç»†ç ”ç©¶.</p>
</blockquote>
<h2 id="10-Deep-learning-frameworks"><a href="#10-Deep-learning-frameworks" class="headerlink" title="10. Deep learning frameworks"></a>10. Deep learning frameworks</h2><p><img src="/images/deeplearning/C2W3-9_1.png" width="750"></p>
<h2 id="11-TensorFlow-Example"><a href="#11-TensorFlow-Example" class="headerlink" title="11. TensorFlow Example"></a>11. TensorFlow Example</h2><p>Andrew Ng æ¼”ç¤ºäº† TensorFlow ä½¿ç”¨æ–¹æ³•.</p>
<blockquote>
<p>æˆ‘æ¨èä¸€ä¸ªæ¯”è¾ƒå¥½çš„ TensorFlow çš„ç»ƒæ‰‹é¡¹ç›®ï¼š<a href="https://github.com/aymericdamien/TensorFlow-Examples" target="_blank" rel="external">TensorFlow Example</a></p>
</blockquote>
<h2 id="12-Reference"><a href="#12-Reference" class="headerlink" title="12. Reference"></a>12. Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="https://daniellaah.github.io/2017/deeplearning-ai-Improving-Deep-Neural-Networks-week1.html" target="_blank" rel="external">deeplearning.ai ä¸“é¡¹è¯¾ç¨‹äºŒç¬¬ä¸€å‘¨</a></li>
<li><a href="https://www.coursera.org/specializations/deep-learning" target="_blank" rel="external">Coursera - Deep Learning Specialization</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
<li><a href="https://github.com/aymericdamien/TensorFlow-Examples" target="_blank" rel="external">TensorFlow-Examples</a></li>
<li><a href="https://github.com/fengdu78/deeplearning_ai_books" target="_blank" rel="external">å´æ©è¾¾è€å¸ˆçš„æ·±åº¦å­¦ä¹ è¯¾ç¨‹ç¬”è®°åŠèµ„æº</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Improving Deep Neural Networks (week2) - Optimization Algorithm]]></title>
      <url>http://shopee.ai/2018/07/21/deeplearning/Improving-Deep-Neural-Networks-week2/</url>
      <content type="html"><![CDATA[<p>Mini-batchã€æŒ‡æ•°åŠ æƒå¹³å‡-åå·®ä¿®æ­£ã€Momentumã€RMSpropã€Adamã€å­¦ä¹ ç‡è¡°å‡ã€å±€éƒ¨æœ€ä¼˜</p>
<p>è¿™èŠ‚è¯¾æ¯ä¸€èŠ‚çš„çŸ¥è¯†ç‚¹éƒ½å¾ˆé‡è¦ï¼Œæ‰€ä»¥æœ¬æ¬¡ç¬”è®°å‡ ä¹æ¶µç›–äº†å…¨éƒ¨å°è§†é¢‘è¯¾ç¨‹çš„è®°å½•</p>
<a id="more"></a>
<h2 id="1-Mini-batch"><a href="#1-Mini-batch" class="headerlink" title="1. Mini-batch"></a>1. Mini-batch</h2><blockquote>
<p>éšæœºæ¢¯åº¦ä¸‹é™æ³•çš„ä¸€å¤§ç¼ºç‚¹æ˜¯, ä½ ä¼šå¤±å»æ‰€æœ‰å‘é‡åŒ–å¸¦ç»™ä½ çš„åŠ é€Ÿï¼Œå› ä¸ºä¸€æ¬¡æ€§åªå¤„ç†äº†ä¸€ä¸ªæ ·æœ¬ï¼Œè¿™æ ·æ•ˆç‡è¿‡äºä½ä¸‹, æ‰€ä»¥å®è·µä¸­æœ€å¥½ é€‰æ‹©ä¸å¤§ä¸å° çš„ Mini-batch å°ºå¯¸. å®é™…ä¸Šå­¦ä¹ ç‡è¾¾åˆ°æœ€å¿«ï¼Œä½ ä¼šå‘ç°2ä¸ªå¥½å¤„ï¼Œä½ å¾—åˆ°äº†å¤§é‡å‘é‡åŒ–ï¼Œå¦ä¸€æ–¹é¢ ä½ ä¸éœ€è¦ç­‰å¾…æ•´ä¸ªè®­ç»ƒé›†è¢«å¤„ç†å®Œï¼Œä½ å°±å¯ä»¥å¼€å§‹è¿›è¡Œåç»­å·¥ä½œ.</p>
<p>å®ƒä¸ä¼šæ€»æœç€æœ€å°å€¼é è¿‘ï¼Œä½†å®ƒæ¯”éšæœºæ¢¯åº¦ä¸‹é™è¦æ›´æŒç»­åœ°é è¿‘æœ€å°å€¼çš„æ–¹å‘. å®ƒä¹Ÿä¸ä¸€å®šåœ¨å¾ˆå°çš„èŒƒå›´å†…æ”¶æ•›ï¼Œå¦‚å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥å‡å° å­¦ä¹ ç‡.</p>
<p>æ ·æœ¬é›†æ¯”è¾ƒå°ï¼Œå°±æ²¡å¿…è¦ä½¿ç”¨ mini-batch.</p>
<p><strong>ç»éªŒå€¼</strong> ï¼š å¦‚æœ m &lt;= 2000, å¯ä»¥ä½¿ç”¨ batchï¼Œ ä¸ç„¶æ ·æœ¬æ•°ç›® m è¾ƒå¤§ï¼Œä¸€èˆ¬ mini-batch å¤§å°è®¾ç½®ä¸º 64 or 128 or.. or 512..</p>
</blockquote>
<p><strong>ç®—æ³•åˆæ­¥</strong></p>
<blockquote>
<p>å¯¹æ•´ä¸ªè®­ç»ƒé›†è¿›è¡Œæ¢¯åº¦ä¸‹é™æ³•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»å¤„ç†æ•´ä¸ªè®­ç»ƒæ•°æ®é›†ï¼Œç„¶åæ‰èƒ½è¿›è¡Œä¸€æ­¥æ¢¯åº¦ä¸‹é™ï¼Œå³æ¯ä¸€æ­¥æ¢¯åº¦ä¸‹é™æ³•éœ€è¦å¯¹æ•´ä¸ªè®­ç»ƒé›†è¿›è¡Œä¸€æ¬¡å¤„ç†ï¼Œå¦‚æœè®­ç»ƒæ•°æ®é›†å¾ˆå¤§çš„æ—¶å€™ï¼Œå¦‚æœ‰ 500ä¸‡ æˆ– 5000ä¸‡ çš„è®­ç»ƒæ•°æ®ï¼Œå¤„ç†é€Ÿåº¦å°±ä¼šæ¯”è¾ƒæ…¢ã€‚</p>
<p>ä½†æ˜¯å¦‚æœæ¯æ¬¡å¤„ç†è®­ç»ƒæ•°æ®çš„ä¸€éƒ¨åˆ†å³è¿›è¡Œæ¢¯åº¦ä¸‹é™æ³•ï¼Œåˆ™æˆ‘ä»¬çš„ç®—æ³•é€Ÿåº¦ä¼šæ‰§è¡Œçš„æ›´å¿«ã€‚è€Œå¤„ç†çš„è¿™äº›ä¸€å°éƒ¨åˆ†è®­ç»ƒå­é›†å³ç§°ä¸º Mini-batchã€‚</p>
</blockquote>
<p><img src="/images/deeplearning/C2W2-1_1.png" width="700"></p>
<blockquote>
<p>å¦‚å›¾ï¼Œä»¥ 1000 ä¸ºå•ä½ï¼Œå°†æ•°æ®åˆ’åˆ†ï¼Œä»¤ $x^{\{1\}}=\{x^{(1)},x^{(2)}â€¦â€¦x^{(1000)}\}$, ä¸€èˆ¬ç”¨ $x^{ \{ t \} }$, $y^{ \{t\} }$ è¡¨ç¤ºåˆ’åˆ†åçš„ mini-batch.</p>
<p>æ³¨æ„åŒºåˆ†è¯¥ç³»åˆ—æ•™å­¦è§†é¢‘çš„ç¬¦å·æ ‡è®°ï¼š</p>
<ul>
<li>å°æ‹¬å·() è¡¨ç¤ºå…·ä½“çš„æŸä¸€ä¸ªå…ƒç´ ï¼ŒæŒ‡ä¸€ä¸ªå…·ä½“çš„å€¼ï¼Œä¾‹å¦‚ $x^{(i)}$</li>
<li>ä¸­æ‹¬å·[] è¡¨ç¤ºç¥ç»ç½‘ç»œä¸­çš„æŸä¸€å±‚, ä¾‹å¦‚ $Z^{[l]}$</li>
<li>å¤§æ‹¬å·{} è¡¨ç¤ºå°†æ•°æ®ç»†åˆ†åçš„ä¸€ä¸ªé›†åˆ, ä¾‹å¦‚ $x^{\{1\}} = \{x^{(1)},x^{(2)}â€¦â€¦x^{(1000)}\}$</li>
</ul>
</blockquote>
<p><strong>ç®—æ³•æ ¸å¿ƒ</strong></p>
<p><img src="/images/deeplearning/C2W2-2_1.png" width="700"></p>
<blockquote>
<p>å‡è®¾æˆ‘ä»¬æœ‰ 5,000,000 ä¸ªæ•°æ®ï¼Œæ¯ 1000 ä½œä¸ºä¸€ä¸ªé›†åˆï¼Œè®¡å…¥ä¸Šé¢æ‰€æåˆ°çš„ $x^{\{1\}}=\{x^{(1)},x^{(2)}â€¦â€¦x^{(5000)}\},â€¦â€¦$</p>
<ol>
<li>éœ€è¦è¿­ä»£è¿è¡Œ 5000æ¬¡ ç¥ç»ç½‘ç»œè¿ç®—.</li>
<li>æ¯ä¸€æ¬¡è¿­ä»£å…¶å®ä¸ä¹‹å‰ç¬”è®°ä¸­æ‰€æåˆ°çš„è®¡ç®—è¿‡ç¨‹ä¸€æ ·ï¼Œé¦–å…ˆæ˜¯å‰å‘ä¼ æ’­ï¼Œä½†æ˜¯æ¯æ¬¡è®¡ç®—çš„æ•°é‡æ˜¯ 1000.</li>
<li>è®¡ç®—æŸå¤±å‡½æ•°ï¼Œå¦‚æœæœ‰ Regularization ï¼Œåˆ™è®°å¾—åŠ ä¸Š Regularization Item</li>
<li>Backward propagation</li>
</ol>
<p>æ³¨æ„ï¼Œmini-batch ç›¸æ¯”äºä¹‹å‰ä¸€æ¬¡æ€§è®¡ç®—æ‰€æœ‰æ•°æ®ä¸ä»…é€Ÿåº¦å¿«ï¼Œè€Œä¸”åå‘ä¼ æ’­éœ€è¦è®¡ç®— 5000æ¬¡ï¼Œæ‰€ä»¥æ•ˆæœä¹Ÿæ›´å¥½.</p>
</blockquote>
<p>epoch</p>
<blockquote>
<ul>
<li>å¯¹äºæ™®é€šçš„æ¢¯åº¦ä¸‹é™æ³•ï¼Œä¸€ä¸ª epoch åªèƒ½è¿›è¡Œä¸€æ¬¡æ¢¯åº¦ä¸‹é™ï¼›</li>
<li>å¯¹äº Mini-batch æ¢¯åº¦ä¸‹é™æ³•ï¼Œä¸€ä¸ª epoch å¯ä»¥è¿›è¡Œ Mini-batch çš„ä¸ªæ•°æ¬¡æ¢¯åº¦ä¸‹é™;</li>
</ul>
<p><strong>epoch</strong> : å½“ä¸€ä¸ª<code>å®Œæ•´çš„æ•°æ®é›†</code>é€šè¿‡äº†ç¥ç»ç½‘ç»œä¸€æ¬¡å¹¶ä¸”è¿”å›äº†ä¸€æ¬¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºä¸€ä¸ª epochã€‚</p>
<p>æ¯”å¦‚å¯¹äºä¸€ä¸ªæœ‰ 2000 ä¸ªè®­ç»ƒæ ·æœ¬çš„æ•°æ®é›†ã€‚å°† 2000 ä¸ªæ ·æœ¬åˆ†æˆå¤§å°ä¸º 500 çš„ batchï¼Œé‚£ä¹ˆå®Œæˆä¸€ä¸ª epoch éœ€è¦ 4 ä¸ª iterationã€‚</p>
</blockquote>
<h3 id="ä¸åŒ-size-å¤§å°çš„æ¯”è¾ƒ"><a href="#ä¸åŒ-size-å¤§å°çš„æ¯”è¾ƒ" class="headerlink" title="ä¸åŒ size å¤§å°çš„æ¯”è¾ƒ"></a>ä¸åŒ size å¤§å°çš„æ¯”è¾ƒ</h3><p>æ™®é€šçš„ batch æ¢¯åº¦ä¸‹é™æ³• å’Œ Mini-batchæ¢¯åº¦ä¸‹é™æ³• ä»£ä»·å‡½æ•°çš„å˜åŒ–è¶‹åŠ¿ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/images/deeplearning/C2W2-3_1.png" width="700"></p>
<p><strong>Batchæ¢¯åº¦ä¸‹é™</strong> ï¼ˆå¦‚ä¸‹å›¾ä¸­è“è‰²ï¼‰:</p>
<blockquote>
<ul>
<li>å¯¹æ‰€æœ‰ m ä¸ªè®­ç»ƒæ ·æœ¬æ‰§è¡Œä¸€æ¬¡æ¢¯åº¦ä¸‹é™ï¼Œæ¯ä¸€æ¬¡è¿­ä»£æ—¶é—´è¾ƒé•¿ï¼›</li>
<li>Cost function æ€»æ˜¯å‘å‡å°çš„æ–¹å‘ä¸‹é™ã€‚</li>
</ul>
<p>è¯´æ˜: mini-batch size = mï¼Œæ­¤æ—¶å³ä¸º Batch gradient descent $(x^,y^)=(X,Y)$</p>
</blockquote>
<p><strong>éšæœºæ¢¯åº¦ä¸‹é™</strong> ï¼ˆå¦‚ä¸‹å›¾ä¸­ç´«è‰²ï¼‰:</p>
<blockquote>
<p>-å¯¹æ¯ä¸€ä¸ªè®­ç»ƒæ ·æœ¬æ‰§è¡Œä¸€æ¬¡æ¢¯åº¦ä¸‹é™ï¼Œä½†æ˜¯ä¸¢å¤±äº†å‘é‡åŒ–å¸¦æ¥çš„è®¡ç®—åŠ é€Ÿï¼›</p>
<ul>
<li>Cost function æ€»ä½“çš„è¶‹åŠ¿å‘æœ€å°å€¼çš„æ–¹å‘ä¸‹é™ï¼Œä½†æ˜¯æ— æ³•åˆ°è¾¾å…¨å±€æœ€å°å€¼ç‚¹ï¼Œå‘ˆç°æ³¢åŠ¨çš„å½¢å¼.</li>
</ul>
<p>è¯´æ˜: mini-batch size = 1ï¼Œæ­¤æ—¶å³ä¸º Stochastic gradient descent $(x^{\{t\}},y^{\{t\}})=(x^{(i)},y^{(i)})$</p>
</blockquote>
<p><strong>Mini-batchæ¢¯åº¦ä¸‹é™</strong> ï¼ˆå¦‚ä¸‹å›¾ä¸­ç»¿è‰²ï¼‰:</p>
<blockquote>
<ul>
<li>é€‰ä¸€ä¸ª $1&lt;size&lt;m$ çš„åˆé€‚çš„ size è¿›è¡Œ Mini-batch æ¢¯åº¦ä¸‹é™ï¼Œå¯å®ç°å¿«é€Ÿå­¦ä¹ ï¼Œä¹Ÿåº”ç”¨äº†å‘é‡åŒ–å¸¦æ¥çš„å¥½å¤„</li>
<li>Cost function çš„ä¸‹é™å¤„äºå‰ä¸¤è€…ä¹‹é—´</li>
</ul>
</blockquote>
<p><img src="/images/deeplearning/C2W2-4_1.png" width="700"></p>
<h3 id="Mini-batch-å¤§å°çš„é€‰æ‹©"><a href="#Mini-batch-å¤§å°çš„é€‰æ‹©" class="headerlink" title="Mini-batch å¤§å°çš„é€‰æ‹©"></a>Mini-batch å¤§å°çš„é€‰æ‹©</h3><blockquote>
<ul>
<li>å¦‚æœè®­ç»ƒæ ·æœ¬çš„å¤§å°æ¯”è¾ƒå°æ—¶ï¼Œå¦‚ $mâ©½2000$ æ—¶ â€” é€‰æ‹© batch æ¢¯åº¦ä¸‹é™æ³•ï¼›</li>
<li>å¦‚æœè®­ç»ƒæ ·æœ¬çš„å¤§å°æ¯”è¾ƒå¤§æ—¶ï¼Œå…¸å‹çš„å¤§å°ä¸ºï¼š$2^{6}ã€2^{7}ã€\cdotsã€2^{10}$</li>
<li>Mini-batch çš„å¤§å°è¦ç¬¦åˆ CPU/GPU å†…å­˜ï¼Œ è¿ç®—èµ·æ¥ä¼šæ›´å¿«ä¸€äº›.</li>
</ul>
</blockquote>
<h2 id="2-Exponentially-weighted-averages"><a href="#2-Exponentially-weighted-averages" class="headerlink" title="2. Exponentially weighted averages"></a>2. Exponentially weighted averages</h2><p>ä¸ºäº†ç†è§£åé¢ä¼šæåˆ°çš„å„ç§ä¼˜åŒ–ç®—æ³•ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°æŒ‡æ•°åŠ æƒå¹³å‡ï¼Œåœ¨ç»Ÿè®¡å­¦ä¸­ä¹Ÿå«åšæŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡.</p>
<p>æŒ‡æ•°åŠ æƒå¹³å‡çš„å…³é”®å‡½æ•°ï¼š </p>
<p>$$<br>v_{t} = \beta v_{t-1}+(1-\beta)\theta_{t}<br>$$</p>
<p>é¦–å…ˆæˆ‘ä»¬å‡è®¾æœ‰ä¸€å¹´çš„æ¸©åº¦æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="/images/deeplearning/C2W2-5_0.jpg" width="500"></p>
<p>æˆ‘ä»¬ç°åœ¨éœ€è¦è®¡ç®—å‡ºä¸€ä¸ªæ¸©åº¦è¶‹åŠ¿æ›²çº¿ï¼Œè®¡ç®—æ–¹æ³•(<code>æŒ‡æ•°åŠ æƒå¹³å‡å®ç°</code>)å¦‚ä¸‹ï¼š</p>
<p>$$<br>v_{0} =0 \\<br>v_{1}= \beta v_{0}+(1-\beta)\theta_{1} \\<br>v_{2}= \beta v_{1}+(1-\beta)\theta_{2} \\<br>v_{3}= \beta v_{2}+(1-\beta)\theta_{3} \\<br>\ldots<br>$$</p>
<blockquote>
<p>ä¸Šé¢çš„ $Î¸_t$ è¡¨ç¤ºç¬¬ $t$ å¤©çš„æ¸©åº¦ï¼ŒÎ² æ˜¯å¯è°ƒèŠ‚çš„å‚æ•°ï¼Œ$V_t$ è¡¨ç¤º $\frac{1}{1-Î²}$ å¤©çš„æ¯æ—¥æ¸©åº¦</p>
</blockquote>
<!--ä¸‹å›¾æ˜¯ä¸€ä¸ªå…³äºå¤©æ•°å’Œæ¸©åº¦çš„æ•£ç‚¹å›¾ï¼š
<img src="/images/deeplearning/C2W2-5_1.png" width="600" />
-->
<h3 id="å½“-Î²-0-9ã€0-98ã€0-5-çš„æƒ…å†µ"><a href="#å½“-Î²-0-9ã€0-98ã€0-5-çš„æƒ…å†µ" class="headerlink" title="å½“ Î²=0.9ã€0.98ã€0.5 çš„æƒ…å†µ"></a>å½“ Î²=0.9ã€0.98ã€0.5 çš„æƒ…å†µ</h3><p>å½“ Î²=0.9 æ—¶ï¼ŒæŒ‡æ•°åŠ æƒå¹³å‡æœ€åçš„ç»“æœå¦‚ä¸‹å›¾ä¸­<strong>çº¢è‰²</strong>çº¿æ‰€ç¤ºï¼›</p>
<p><img src="/images/deeplearning/C2W2-5_2.jpg" width="600"></p>
<p>å½“ Î²=0.98 æ—¶ï¼ŒæŒ‡æ•°åŠ æƒå¹³å‡æœ€åçš„ç»“æœå¦‚ä¸‹å›¾ä¸­<strong>ç»¿è‰²</strong>çº¿æ‰€ç¤º, ç»¿çº¿ç›¸æ¯”è¾ƒçº¢çº¿è¦å¹³æ»‘ä¸€äº›ï¼Œæ˜¯å› ä¸ºå¯¹è¿‡å»æ¸©åº¦çš„æƒé‡æ›´å¤§ï¼Œæ‰€ä»¥å½“å¤©å¤©æ°”æ¸©åº¦çš„å½±å“é™ä½ï¼Œåœ¨æ¸©åº¦å˜åŒ–æ—¶ï¼Œé€‚åº”å¾—æ›´ç¼“æ…¢ä¸€äº›ï¼›</p>
<p><img src="/images/deeplearning/C2W2-5_3.jpg" width="600"></p>
<p>å½“ Î²=0.5 æ—¶ï¼ŒæŒ‡æ•°åŠ æƒå¹³å‡æœ€åçš„ç»“æœå¦‚ä¸‹å›¾ä¸­<strong>é»„è‰²</strong>çº¿æ‰€ç¤ºï¼›</p>
<p><img src="/images/deeplearning/C2W2-5_4.jpg" width="600"></p>
<!--<img src="/images/deeplearning/C2W2-6_1.png" width="700" />
-->
<blockquote>
<p> Notes: The most common value for $\beta$ is 0.9.</p>
</blockquote>
<h3 id="ç†è§£æŒ‡æ•°åŠ æƒå¹³å‡"><a href="#ç†è§£æŒ‡æ•°åŠ æƒå¹³å‡" class="headerlink" title="ç†è§£æŒ‡æ•°åŠ æƒå¹³å‡"></a>ç†è§£æŒ‡æ•°åŠ æƒå¹³å‡</h3><p>ä¾‹å­ï¼Œå½“ Î²=0.9 æ—¶ï¼š </p>
<p>$$<br>v_{100} = 0.9v_{99}+0.1\theta_{100} \\ v_{99} = 0.9v_{98}+0.1\theta_{99} \\ v_{98} = 0.9v_{97}+0.1\theta_{98} \\<br>\ldots<br>$$</p>
<p>å±•å¼€ï¼š</p>
<p>$$<br>v_{100}=0.1\theta_{100}+0.9(0.1\theta_{99}+0.9(0.1\theta_{98}+0.9v_{97})) \\ v_{100}=0.1\theta_{100}+0.1\times0.9\theta_{99}+0.1\times(0.9)^{2}\theta_{98}+0.1\times(0.9)^{3}\theta_{97}+\cdots<br>$$</p>
<p>ä¸Šå¼ä¸­æ‰€æœ‰ $Î¸$ å‰é¢çš„ç³»æ•°ç›¸åŠ èµ·æ¥ä¸º 1 æˆ–è€… æ¥è¿‘äº 1ï¼Œç§°ä¹‹ä¸ºåå·®ä¿®æ­£.</p>
<blockquote>
<p>æ€»ä½“æ¥è¯´å­˜åœ¨ï¼Œ$(1-\varepsilon)^{1/\varepsilon}=\dfrac{1}{e}$, åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œ$1-\varepsilon=\beta=0.9$, å³ $0.9^{10}\approx 0.35\approx\dfrac{1}{e}$ . ç›¸å½“äºå¤§çº¦10å¤©åï¼Œç³»æ•°çš„å³°å€¼ï¼ˆè¿™é‡Œæ˜¯0.1ï¼‰ä¸‹é™åˆ°åŸæ¥çš„ $\dfrac{1}{e}$ï¼Œåªå…³æ³¨äº†è¿‡å»10å¤©çš„å¤©æ°”.</p>
</blockquote>
<h3 id="æŒ‡æ•°åŠ æƒå¹³å‡çš„åå·®ä¿®æ­£-Bias-correction"><a href="#æŒ‡æ•°åŠ æƒå¹³å‡çš„åå·®ä¿®æ­£-Bias-correction" class="headerlink" title="æŒ‡æ•°åŠ æƒå¹³å‡çš„åå·®ä¿®æ­£ Bias correction"></a>æŒ‡æ•°åŠ æƒå¹³å‡çš„åå·®ä¿®æ­£ Bias correction</h3><p>åœ¨æˆ‘ä»¬æ‰§è¡ŒæŒ‡æ•°åŠ æƒå¹³å‡çš„å…¬å¼æ—¶ï¼Œå½“ Î²=0.98 æ—¶ï¼Œå¾—åˆ°çš„å¹¶ä¸æ˜¯å›¾ä¸­çš„<strong>ç»¿è‰²</strong>æ›²çº¿ï¼Œè€Œæ˜¯ä¸‹å›¾ä¸­çš„<strong>ç´«è‰²</strong>æ›²çº¿ï¼Œå…¶èµ·ç‚¹æ¯”è¾ƒä½ã€‚</p>
<p><img src="/images/deeplearning/C2W2-7.png" width="650"></p>
<p><strong>åŸå› </strong>ï¼š </p>
<blockquote>
<p>$$<br>v_{0}=0\\v_{1}=0.98v_{0}+0.02\theta_{1}=0.02\theta_{1}\\v_{2}=0.98v_{1}+0.02\theta_{2}=0.98\times0.02\theta_{1}+0.02\theta_{2}=0.0196\theta_{1}+0.02\theta_{2}<br>$$</p>
<p>å¦‚æœç¬¬ä¸€å¤©çš„å€¼ä¸ºå¦‚40ï¼Œåˆ™å¾—åˆ°çš„ v1=0.02Ã—40=0.8ï¼Œåˆ™å¾—åˆ°çš„å€¼è¦è¿œå°äºå®é™…å€¼ï¼Œåé¢å‡ å¤©çš„æƒ…å†µä¹Ÿä¼šç”±äºåˆå€¼å¼•èµ·çš„å½±å“ï¼Œå‡ä½äºå®é™…å‡å€¼.</p>
</blockquote>
<p><strong>åå·®ä¿®æ­£</strong>ï¼š </p>
<blockquote>
<p>ä½¿ç”¨ $\dfrac{v_{t}}{1-\beta^{t}}$</p>
<ul>
<li>å½“ t=2 æ—¶ï¼š</li>
</ul>
<p>$$<br>1-\beta^{t}=1-(0.98)^{2}=0.0396<br>$$</p>
<p>$$<br>\dfrac{v_{2}}{0.0396}=\dfrac{0.0196\theta_{1}+0.02\theta_{2}}{0.0396}<br>$$</p>
<p>åå·®ä¿®æ­£å¾—åˆ°äº†ç»¿è‰²çš„æ›²çº¿ï¼Œåœ¨å¼€å§‹çš„æ—¶å€™ï¼Œèƒ½å¤Ÿå¾—åˆ°æ¯”ç´«è‰²æ›²çº¿æ›´å¥½çš„è®¡ç®—å¹³å‡çš„æ•ˆæœã€‚éšç€ t é€æ¸å¢å¤§ï¼Œ$\beta^{t}$ æ¥è¿‘äº 0ï¼Œæ‰€ä»¥åé¢ç»¿è‰²çš„æ›²çº¿å’Œç´«è‰²çš„æ›²çº¿é€æ¸é‡åˆäº†.</p>
<p>è™½ç„¶å­˜åœ¨è¿™ç§é—®é¢˜ï¼Œä½†æ˜¯åœ¨å®é™…è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬ä¼šå¿½ç•¥å‰æœŸå‡å€¼åå·®çš„å½±å“</p>
</blockquote>
<p><strong>åå·®ä¿®æ­£ ä¸¾ä¸ªğŸŒ°, ä»¥ä¾¿äºå¤§å®¶ç†è§£:</strong></p>
<blockquote>
<p>é¦–å…ˆæˆ‘ä»¬å‡è®¾çš„æ˜¯ $Î²=0.98, V_0=0$, ç„¶åç”± $V_t=Î²V_{t-1}+(1-Î²)Î¸_t$ å¯çŸ¥</p>
<ul>
<li><p>$V_1=0.98V_0+0.02Î¸_1=0.02Î¸_1$</p>
</li>
<li><p>$V_2=0.98V_1+0.02Î¸_2=0.0196Î¸_1+0.02Î¸_2$</p>
</li>
</ul>
<p>å½“è¿›è¡ŒæŒ‡æ•°åŠ æƒå¹³å‡è®¡ç®—æ—¶ï¼Œç¬¬ä¸€ä¸ªå€¼ $v_0$ è¢«åˆå§‹åŒ–ä¸º 0ï¼Œè¿™æ ·å°†åœ¨å‰æœŸçš„è¿ç®—ç”¨äº§ç”Ÿä¸€å®šçš„åå·®ã€‚ä¸ºäº†çŸ«æ­£åå·®ï¼Œéœ€è¦åœ¨æ¯ä¸€æ¬¡è¿­ä»£åè¿›è¡Œåå·®ä¿®æ­£ï¼ˆBias Correctionï¼‰</p>
<p>å‡è®¾ $Î¸_1=40â„ƒ$,é‚£ä¹ˆ $V_1=0.02*40=0.8â„ƒ$ï¼Œè¿™æ˜¾ç„¶ç›¸å·®å¤ªå¤§ï¼ŒåŒç†å¯¹äºåé¢çš„æ¸©åº¦çš„è®¡ç®—ä¹Ÿåªä¼šæ˜¯å˜å·®è¶Šæ¥è¶Šå¤§. æ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›è¡Œåå·®ä¿®æ­£ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>$$<br>V_t=\frac{Î²V_{t-1}+(1-Î²)Î¸_t}{1-Î²^t}<br>$$</p>
<p>æ³¨æ„ ï¼šï¼ï¼ï¼ä¸Šé¢å…¬å¼ä¸­çš„ $V_{t-1}$ æ˜¯æœªä¿®æ­£çš„å€¼.</p>
<p>ä¸ºæ–¹ä¾¿è¯´æ˜ï¼Œä»¤ $Î²=0.98,Î¸_1=40â„ƒ,Î¸_2=39â„ƒ$, åˆ™</p>
<ul>
<li>å½“ $t=1,Î¸_1=40â„ƒ$ æ—¶ï¼Œ$V_1=\frac{0.02*40}{1-0.98}=40$ ,å“‡å“¦, æœ‰æ²¡æœ‰å¾ˆå·§çš„æ„Ÿè§‰ï¼Œå†çœ‹</li>
<li>å½“ $t=2,Î¸_2=39â„ƒ$ æ—¶ï¼Œ$V_2 = \frac{0.98*V_{t-1} + 0.02*Î¸_2}{1-0.98^2}$ $=\frac{0.98*(0 + 0.02*Î¸_1)+0.02*39}{1-0.98^2}=39.49$</li>
</ul>
<p><code>æ³¨æ„ç‚¹</code> : æ‰€ä»¥ï¼Œ<strong>è®°ä½ä½ å¦‚æœç›´æ¥ç”¨ä¿®æ­£åçš„ $V_{tâˆ’1}$ å€¼ä»£å…¥è®¡ç®—å°±å¤§é”™ç‰¹é”™äº†</strong>.</p>
</blockquote>
<h2 id="3-Momentum"><a href="#3-Momentum" class="headerlink" title="3. Momentum"></a>3. Momentum</h2><p>åŠ¨é‡æ¢¯åº¦ä¸‹é™çš„åŸºæœ¬æ€æƒ³å°±æ˜¯<code>è®¡ç®—æ¢¯åº¦çš„æŒ‡æ•°åŠ æƒå¹³å‡æ•°</code>ï¼Œå¹¶åˆ©ç”¨è¯¥æ¢¯åº¦æ¥æ›´æ–°æƒé‡</p>
<h3 id="Momentum-è§£é‡Šç‰ˆ"><a href="#Momentum-è§£é‡Šç‰ˆ" class="headerlink" title="Momentum è§£é‡Šç‰ˆ"></a>Momentum è§£é‡Šç‰ˆ</h3><p>é€šå¸¸æƒ…å†µæˆ‘ä»¬åœ¨è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œçš„æ—¶å€™æŠŠæ•°æ®æ‹†è§£æˆä¸€å°æ‰¹ä¸€å°æ‰¹åœ°è¿›è¡Œè®­ç»ƒï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ mini-batch SGD è®­ç»ƒç®—æ³•ï¼Œç„¶è€Œè™½ç„¶è¿™ç§ç®—æ³•èƒ½å¤Ÿå¸¦æ¥å¾ˆå¥½çš„è®­ç»ƒé€Ÿåº¦ï¼Œä½†æ˜¯åœ¨åˆ°è¾¾æœ€ä¼˜ç‚¹çš„æ—¶å€™å¹¶ä¸èƒ½å¤Ÿæ€»æ˜¯çœŸæ­£åˆ°è¾¾æœ€ä¼˜ç‚¹ï¼Œè€Œæ˜¯åœ¨æœ€ä¼˜ç‚¹é™„è¿‘å¾˜å¾Šã€‚å¦ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯è¿™ç§ç®—æ³•éœ€è¦æˆ‘ä»¬æŒ‘é€‰ä¸€ä¸ªåˆé€‚çš„å­¦ä¹ ç‡ï¼Œå½“æˆ‘ä»¬é‡‡ç”¨å°çš„å­¦ä¹ ç‡çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´ç½‘ç»œåœ¨è®­ç»ƒçš„æ—¶å€™æ”¶æ•›å¤ªæ…¢ï¼›å½“æˆ‘ä»¬é‡‡ç”¨å¤§çš„å­¦ä¹ ç‡çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¼˜åŒ–çš„å¹…åº¦è·³è¿‡å‡½æ•°çš„èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯å¯èƒ½è·³è¿‡æœ€ä¼˜ç‚¹ã€‚æˆ‘ä»¬æ‰€å¸Œæœ›çš„ä»…ä»…æ˜¯ç½‘ç»œåœ¨ä¼˜åŒ–çš„æ—¶å€™ç½‘ç»œçš„æŸå¤±å‡½æ•°æœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ”¶æ•›é€Ÿåº¦åŒæ—¶åˆä¸è‡³äºæ‘†åŠ¨å¹…åº¦å¤ªå¤§ã€‚</p>
<p>æ‰€ä»¥ Momentum ä¼˜åŒ–å™¨ åˆšå¥½å¯ä»¥è§£å†³æˆ‘ä»¬æ‰€é¢ä¸´çš„é—®é¢˜ï¼Œå®ƒä¸»è¦æ˜¯åŸºäºæ¢¯åº¦çš„ç§»åŠ¨æŒ‡æ•°åŠ æƒå¹³å‡ã€‚å‡è®¾åœ¨å½“å‰çš„è¿­ä»£æ­¥éª¤ç¬¬ t æ­¥ä¸­ï¼Œé‚£ä¹ˆåŸºäº Momentum ä¼˜åŒ–ç®—æ³• å¯ä»¥å†™æˆä¸‹é¢çš„å…¬å¼ï¼š </p>
<p>$$<br>{v_{dw}} = \beta {v_{dw}} + (1 - \beta )dW \\ {v_{db}} = \beta {v_{db}} + (1 - \beta )db \\ W = W - \alpha {v_{dw}} \\ b = b - \alpha {v_{db}}<br>$$</p>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/30743067" target="_blank" rel="external">å¼•ç”¨çŸ¥ä¹æœºå™¨å­¦ä¹ å°èœé¸Ÿçš„æµæ°´è´¦</a> ï¼š</p>
<p>åŠ¨é‡æ¢¯åº¦ä¸‹é™ä¸æ¢¯åº¦ä¸‹é™ç›¸æ¯”ï¼Œå°±æ˜¯å¯¹æ¢¯åº¦ä½¿ç”¨æŒ‡æ•°åŠ æƒå¹³å‡ï¼Œå…¶ä»–çš„éƒ½ä¿å­˜ä¸€è‡´ã€‚</p>
<p>dw ä¸ db è¡¨ç¤ºæœ¬æ¬¡è¿­ä»£çš„æ¢¯åº¦ï¼ŒVdw å’Œ Vdb è¡¨ç¤ºæŒ‡æ•°åŠ æƒå¹³å‡çš„æ¢¯åº¦ã€‚</p>
<p>å¦‚æœä¸ç”¨æŒ‡æ•°åŠ æƒå¹³å‡çš„è¯ï¼Œæ¯æ¬¡è¿­ä»£æ›´æ–°ä½¿ç”¨çš„æ¢¯åº¦éƒ½åªä¸æœ¬æ¬¡è¿­ä»£çš„æ ·æœ¬æœ‰å…³ï¼Œæ¯æ¬¡è¿­ä»£çš„æ ·æœ¬æœ‰å¥½æœ‰åï¼Œä¼šä½¿è¿­ä»£æ¥è¿‘æœ€å°å€¼çš„ä¸æ–­æ³¢åŠ¨ï¼Œå¯¼è‡´ä¸‹é™é€Ÿåº¦æ…¢ã€‚åŠ å…¥æŒ‡æ•°åŠ æƒå¹³å‡åï¼Œæœ¬æ¬¡æ¢¯åº¦å½±å“å‡å°‘ï¼Œæ³¢åŠ¨æƒ…å†µä¹Ÿå°±ä¼šå‡å°ï¼Œç›´è§‚ä¸Šé¢ç†è§£å°±æ˜¯å·¦å³æ³¢åŠ¨æŠµæ¶ˆï¼Œé‚£ä¹ˆä¸‹é™é€Ÿåº¦ä¹Ÿå°±è‡ªç„¶æ›´å¿«ã€‚åŠ¨é‡æ¢¯åº¦ä¸‹é™æ¯”æ¢¯åº¦ä¸‹é™æ”¶æ•›é€Ÿåº¦è¦å¿«ã€‚</p>
<p>ç‰©ç†æ„ä¹‰ç†è§£ï¼šåœ¨ä¸‹é™çš„è¿‡ç¨‹ä¸­ï¼Œ $(1 - \beta )dW$ ç›¸å½“äºåŠ é€Ÿåº¦ï¼Œ $\beta {v_{dw}}$ ç›¸å½“äºæ‘©æ“¦ï¼ŒåŠ é€Ÿåº¦å¯ä»¥æ˜¯ä¸‹é™åŠ å¿«ï¼Œè€Œæ‘©æ“¦ä¸ä¼šè®©åŠ é€Ÿä¸€ç›´è¿›è¡Œä¸‹å»ã€‚ï¼ˆä¸æ˜¯å¾ˆç†è§£ï¼‰</p>
</blockquote>
<hr>
<blockquote>
<p>åœ¨ä¸Šé¢çš„å…¬å¼ä¸­ ${v_{dw}}$ å’Œ ${v_{db}}$ åˆ†åˆ«æ˜¯æŸå¤±å‡½æ•°åœ¨å‰ $tâˆ’1$ è½®è¿­ä»£è¿‡ç¨‹ä¸­ç´¯ç§¯çš„æ¢¯åº¦æ¢¯åº¦åŠ¨é‡ï¼Œ$\beta$ æ˜¯æ¢¯åº¦ç´¯ç§¯çš„ä¸€ä¸ªæŒ‡æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸€èˆ¬è®¾ç½®å€¼ä¸º 0.9ã€‚æ‰€ä»¥ Momentum ä¼˜åŒ–å™¨ çš„ä¸»è¦æ€æƒ³å°±æ˜¯åˆ©ç”¨äº†ç±»ä¼¼ä¸ç§»åŠ¨æŒ‡æ•°åŠ æƒå¹³å‡çš„æ–¹æ³•æ¥å¯¹ç½‘ç»œçš„å‚æ•°è¿›è¡Œå¹³æ»‘å¤„ç†çš„ï¼Œè®©æ¢¯åº¦çš„æ‘†åŠ¨å¹…åº¦å˜å¾—æ›´å°ã€‚ </p>
<p>dW å’Œ db åˆ†åˆ«æ˜¯æŸå¤±å‡½æ•°åå‘ä¼ æ’­æ—¶å€™æ‰€æ±‚å¾—çš„æ¢¯åº¦ï¼Œä¸‹é¢ä¸¤ä¸ªå…¬å¼æ˜¯ç½‘ç»œæƒé‡å‘é‡å’Œåç½®å‘é‡çš„æ›´æ–°å…¬å¼ï¼ŒÎ± æ˜¯ç½‘ç»œçš„å­¦ä¹ ç‡ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ Momentumä¼˜åŒ–ç®—æ³•çš„æ—¶å€™ï¼Œå¯ä»¥è§£å†³ mini-batch SGD ä¼˜åŒ–ç®—æ³•æ›´æ–°å¹…åº¦æ‘†åŠ¨å¤§çš„é—®é¢˜ï¼ŒåŒæ—¶å¯ä»¥ä½¿å¾—ç½‘ç»œçš„æ”¶æ•›é€Ÿåº¦æ›´å¿«ã€‚</p>
</blockquote>
<h3 id="Momentum-è¯¦ç»†ç‰ˆ"><a href="#Momentum-è¯¦ç»†ç‰ˆ" class="headerlink" title="Momentum è¯¦ç»†ç‰ˆ"></a>Momentum è¯¦ç»†ç‰ˆ</h3><p>åœ¨æˆ‘ä»¬ä¼˜åŒ– Cost function çš„æ—¶å€™ï¼Œä»¥ä¸‹å›¾æ‰€ç¤ºçš„å‡½æ•°å›¾ä¸ºä¾‹ï¼š</p>
<p>é¦–å…ˆä»‹ç»ä¸€ä¸‹ä¸€èˆ¬çš„æ¢¯åº¦ç®—æ³•æ”¶æ•›æƒ…å†µæ˜¯è¿™æ ·çš„</p>
<p><img src="/images/deeplearning/C2W2-8_1.png" width="750"></p>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å‰è¿›çš„é“è·¯ä¸Šååˆ†æ›²æŠ˜ï¼Œèµ°äº†ä¸å°‘å¼¯è·¯ï¼Œåœ¨çºµå‘æˆ‘ä»¬å¸Œæœ›èµ°å¾—æ…¢ä¸€ç‚¹ï¼Œæ¨ªå‘åˆ™å¸Œæœ›èµ°å¾—å¿«ä¸€ç‚¹ï¼Œæ‰€ä»¥æ‰æœ‰äº†åŠ¨é‡æ¢¯åº¦ä¸‹é™ç®—æ³•.</p>
</blockquote>
<p><strong>Momentumç®—æ³•çš„ç¬¬ t æ¬¡è¿­ä»£ï¼š</strong></p>
<blockquote>
<ul>
<li>è®¡ç®—å‡º dw, db</li>
<li>è¿™ä¸ªè®¡ç®—å¼å­ä¸ä¸Šä¸€å±Šæåˆ°çš„æŒ‡æ•°åŠ æƒå¹³å‡æœ‰ç‚¹ç±»ä¼¼ï¼Œå³<br>$ V_{dw}=Î²V_{dw}+(1-Î²)dw \\ V_{db}=Î²V_{db}+(1-Î²)db $</li>
<li>$W=W-Î±V_{dw},b=b-Î±V_{db}$</li>
</ul>
</blockquote>
<p><img src="/images/deeplearning/C2W2-10_1.png" width="600"></p>
<p>æœ€ç»ˆå¾—åˆ°æ”¶æ•›çš„æ•ˆæœå¦‚ä¸‹å›¾çš„çº¢è‰²æ›²çº¿æ‰€ç¤º.</p>
<p><img src="/images/deeplearning/C2W2-9_1.png" width="750"></p>
<p>åœ¨åˆ©ç”¨æ¢¯åº¦ä¸‹é™æ³•æ¥æœ€å°åŒ–è¯¥å‡½æ•°çš„æ—¶å€™ï¼Œæ¯ä¸€æ¬¡è¿­ä»£æ‰€æ›´æ–°çš„ä»£ä»·å‡½æ•°å€¼å¦‚å›¾ä¸­è“è‰²çº¿æ‰€ç¤ºåœ¨ä¸Šä¸‹æ³¢åŠ¨ï¼Œè€Œè¿™ç§å¹…åº¦æ¯”è¾ƒå¤§æ³¢åŠ¨ï¼Œå‡ç¼“äº†æ¢¯åº¦ä¸‹é™çš„é€Ÿåº¦ï¼Œè€Œä¸”æˆ‘ä»¬åªèƒ½ä½¿ç”¨ä¸€ä¸ªè¾ƒå°çš„å­¦ä¹ ç‡æ¥è¿›è¡Œè¿­ä»£.</p>
<p>å¦‚æœç”¨è¾ƒå¤§çš„å­¦ä¹ ç‡ï¼Œç»“æœå¯èƒ½ä¼šå¦‚ç´«è‰²çº¿ä¸€æ ·åç¦»å‡½æ•°çš„èŒƒå›´ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œåªèƒ½ç”¨è¾ƒå°çš„å­¦ä¹ ç‡.</p>
<blockquote>
<p>è¯¥ç®—æ³•ä¸­æ¶‰åŠåˆ°çš„è¶…å‚æ•°æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ Î±ï¼ŒÎ²ï¼Œå…¶ä¸­ä¸€èˆ¬ Î²=0.9 æ˜¯æ¯”è¾ƒå¸¸å–çš„å€¼</p>
<ul>
<li>ä¸€èˆ¬å°†å‚æ•°è®¾ä¸º 0.5, 0.9ï¼Œæˆ–è€… 0.99ï¼Œåˆ†åˆ«è¡¨ç¤ºæœ€å¤§é€Ÿåº¦ 2å€ï¼Œ10å€ï¼Œ100å€ äº SGD çš„ç®—æ³•;</li>
<li>é€šè¿‡é€Ÿåº¦vï¼Œæ¥ç§¯ç´¯äº†ä¹‹é—´æ¢¯åº¦æŒ‡æ•°çº§è¡°å‡çš„å¹³å‡ï¼Œå¹¶ä¸”ç»§ç»­å»¶è¯¥æ–¹å‘ç§»åŠ¨;</li>
</ul>
</blockquote>
<p>å†çœ‹çœ‹ç®—æ³•ï¼š </p>
<p><img src="/images/deeplearning/C2W2-11.png" width="700"></p>
<h2 id="4-RMSprop-Root-Mean-Square-Prop"><a href="#4-RMSprop-Root-Mean-Square-Prop" class="headerlink" title="4. RMSprop (Root Mean Square Prop)"></a>4. RMSprop (Root Mean Square Prop)</h2><p>RMSProp ç®—æ³•çš„å…¨ç§°å« Root Mean Square Propï¼Œæ˜¯ Geoffrey E. Hinton åœ¨ Coursera è¯¾ç¨‹ä¸­æå‡ºçš„ä¸€ç§ä¼˜åŒ–ç®—æ³•ï¼Œåœ¨ä¸Šé¢çš„ Momentum ä¼˜åŒ–ç®—æ³•ä¸­ï¼Œè™½ç„¶åˆæ­¥è§£å†³äº†ä¼˜åŒ–ä¸­æ‘†åŠ¨å¹…åº¦å¤§çš„é—®é¢˜ã€‚æ‰€è°“çš„æ‘†åŠ¨å¹…åº¦å°±æ˜¯åœ¨ä¼˜åŒ–ä¸­ç»è¿‡æ›´æ–°ä¹‹åå‚æ•°çš„å˜åŒ–èŒƒå›´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ<strong>è“è‰²çš„ä¸º Momentum ä¼˜åŒ–ç®—æ³•æ‰€èµ°çš„è·¯çº¿</strong>ï¼Œ<strong>ç»¿è‰²çš„ä¸º RMSProp ä¼˜åŒ–ç®—æ³•æ‰€èµ°çš„è·¯çº¿</strong>ã€‚</p>
<p><img src="/images/deeplearning/C2W2-12_1.png" width="700"></p>
<p>ä¸ºäº†è¿›ä¸€æ­¥ä¼˜åŒ–æŸå¤±å‡½æ•°åœ¨æ›´æ–°ä¸­å­˜åœ¨æ‘†åŠ¨å¹…åº¦è¿‡å¤§çš„é—®é¢˜ï¼Œå¹¶ä¸”è¿›ä¸€æ­¥åŠ å¿«å‡½æ•°çš„æ”¶æ•›é€Ÿåº¦ï¼ŒRMSProp ç®—æ³•å¯¹æƒé‡ W å’Œåç½® b çš„æ¢¯åº¦ä½¿ç”¨äº†å¾®åˆ†å¹³æ–¹åŠ æƒå¹³å‡æ•°ã€‚ </p>
<p>å…¶ä¸­ï¼Œå‡è®¾åœ¨ç¬¬ t è½®è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå„ä¸ªå…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>$$<br>{s_{dw}} = \beta {s_{dw}} + (1 - \beta )d{W^2} \\<br>{s_{db}} = \beta {s_{db}} + (1 - \beta )d{b^2}<br>$$</p>
<p>$$<br>W = W - \alpha \frac {dW} { \sqrt {s_{dw}} + \varepsilon } \\<br>b = b - \alpha \frac {db} { \sqrt{s_{db}}  + \varepsilon }<br>$$</p>
<blockquote>
<p>è¿™æ ·åšï¼Œèƒ½ç»™ä¿ç•™å¾®åˆ†å¹³æ–¹çš„åŠ æƒå¹³å‡æ•°</p>
<p>ç®—æ³•çš„ä¸»è¦æ€æƒ³å°±ç”¨ä¸Šé¢çš„å…¬å¼è¡¨è¾¾å®Œæ¯•äº†ã€‚åœ¨ä¸Šé¢çš„å…¬å¼ä¸­ ${s_{dw}}$ å’Œ ${s_{db}}$ åˆ†åˆ«æ˜¯æŸå¤±å‡½æ•°åœ¨å‰ tâˆ’1 è½®è¿­ä»£è¿‡ç¨‹ä¸­ç´¯ç§¯çš„æ¢¯åº¦æ¢¯åº¦åŠ¨é‡ï¼ŒÎ² æ˜¯æ¢¯åº¦ç´¯ç§¯çš„ä¸€ä¸ªæŒ‡æ•°ã€‚æ‰€ä¸åŒçš„æ˜¯ï¼ŒRMSProp ç®—æ³•å¯¹æ¢¯åº¦è®¡ç®—äº†<strong>å¾®åˆ†å¹³æ–¹åŠ æƒå¹³å‡æ•°</strong>ã€‚è¿™ç§åšæ³•æœ‰åˆ©äºæ¶ˆé™¤äº†æ‘†åŠ¨å¹…åº¦å¤§çš„æ–¹å‘ï¼Œç”¨æ¥ä¿®æ­£æ‘†åŠ¨å¹…åº¦ï¼Œä½¿å¾—å„ä¸ªç»´åº¦çš„æ‘†åŠ¨å¹…åº¦éƒ½è¾ƒå°ã€‚å¦ä¸€æ–¹é¢ä¹Ÿä½¿å¾—ç½‘ç»œå‡½æ•°æ”¶æ•›æ›´å¿«ã€‚ï¼ˆæ¯”å¦‚å½“ dW æˆ–è€… db ä¸­æœ‰ä¸€ä¸ªå€¼æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ›´æ–°æƒé‡æˆ–è€…åç½®çš„æ—¶å€™é™¤ä»¥å®ƒä¹‹å‰ç´¯ç§¯çš„æ¢¯åº¦çš„å¹³æ–¹æ ¹ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿å¾—æ›´æ–°å¹…åº¦å˜å°ï¼‰ã€‚ä¸ºäº†é˜²æ­¢åˆ†æ¯ä¸ºé›¶ï¼Œä½¿ç”¨äº†ä¸€ä¸ªå¾ˆå°çš„æ•°å€¼ $\epsilon$ æ¥è¿›è¡Œå¹³æ»‘ï¼Œä¸€èˆ¬å–å€¼ä¸º $10^{-8}$ã€‚</p>
</blockquote>
<h2 id="5-Adam-Adaptive-Moment-Estimation"><a href="#5-Adam-Adaptive-Moment-Estimation" class="headerlink" title="5. Adam (Adaptive Moment Estimation)"></a>5. Adam (Adaptive Moment Estimation)</h2><p>æœ‰äº†ä¸Šé¢ä¸¤ç§ä¼˜åŒ–ç®—æ³•ï¼Œä¸€ç§å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºç‰©ç†ä¸­çš„åŠ¨é‡æ¥ç´¯ç§¯æ¢¯åº¦ï¼Œå¦ä¸€ç§å¯ä»¥ä½¿å¾—æ”¶æ•›é€Ÿåº¦æ›´å¿«åŒæ—¶ä½¿å¾—æ³¢åŠ¨çš„å¹…åº¦æ›´å°ã€‚é‚£ä¹ˆè®²ä¸¤ç§ç®—æ³•ç»“åˆèµ·æ¥æ‰€å–å¾—çš„è¡¨ç°ä¸€å®šä¼šæ›´å¥½ã€‚Adamï¼ˆAdaptive Moment Estimationï¼‰ç®—æ³•æ˜¯å°† Momentumç®—æ³• å’Œ RMSPropç®—æ³• ç»“åˆèµ·æ¥ä½¿ç”¨çš„ä¸€ç§ç®—æ³•ï¼Œæˆ‘ä»¬æ‰€ä½¿ç”¨çš„å‚æ•°åŸºæœ¬å’Œä¸Šé¢è®²çš„ä¸€è‡´ï¼Œåœ¨è®­ç»ƒçš„æœ€å¼€å§‹æˆ‘ä»¬éœ€è¦åˆå§‹åŒ–æ¢¯åº¦çš„ç´¯ç§¯é‡å’Œå¹³æ–¹ç´¯ç§¯é‡ã€‚ </p>
<p>$$<br>{v_{dw}} = 0,{v_{db}} = 0;{s_{dw}} = 0,{s_{db}} = 0<br>$$</p>
<p>å‡è®¾åœ¨è®­ç»ƒçš„ç¬¬ $t$ è½®è®­ç»ƒä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯ä»¥è®¡ç®—å¾—åˆ° Momentum å’Œ RMSProp çš„å‚æ•°æ›´æ–°ï¼š </p>
<p>$$<br>{v_{dw}} = {\beta _1}{v_{dw}} + (1 - {\beta _1})dW \\<br>{v_{db}} = {\beta _1}{v_{db}} + (1 - {\beta _1})db \\<br>{s_{dw}} = {\beta _2}{s_{dw}} + (1 - {\beta _2})d{W^2} \\<br>{s_{db}} = {\beta _2}{s_{db}} + (1 - {\beta _2})d{b^2} \\<br>$$</p>
<p>ç”±äºç§»åŠ¨æŒ‡æ•°å¹³å‡åœ¨è¿­ä»£å¼€å§‹çš„åˆæœŸä¼šå¯¼è‡´å’Œå¼€å§‹çš„å€¼æœ‰è¾ƒå¤§çš„å·®å¼‚ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ä¸Šé¢æ±‚å¾—çš„å‡ ä¸ªå€¼åšåå·®ä¿®æ­£</p>
<p>$$<br>v_{dw}^c = \frac {v_{dw}} {1 - \beta _1^t} \\<br>v_{db}^c = \frac {v_{db}} {1 - \beta _1^t} \\<br>s_{dw}^c = \frac {s_{dw}} {1 - \beta _2^t} \\<br>s_{db}^c = \frac {s_{db}} {1 - \beta _2^t}<br>$$</p>
<p>é€šè¿‡ä¸Šé¢çš„å…¬å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ±‚å¾—åœ¨ç¬¬ $t$ è½®è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå‚æ•°æ¢¯åº¦ç´¯ç§¯é‡çš„ä¿®æ­£å€¼ï¼Œä»è€Œæ¥ä¸‹æ¥å°±å¯ä»¥æ ¹æ® Momentum å’Œ RMSProp ç®—æ³•çš„ç»“åˆæ¥å¯¹æƒé‡å’Œåç½®è¿›è¡Œæ›´æ–°.</p>
<p>$$<br>W = W - \alpha \frac {v_{dw}^c} {\sqrt {s_{dw}^c}  + \varepsilon } \\<br>b = b - \alpha \frac {v_{db}^c} {\sqrt {s_{db}^c}  + \varepsilon }<br>$$</p>
<p>ä¸Šé¢çš„æ‰€æœ‰æ­¥éª¤å°±æ˜¯Momentumç®—æ³•å’ŒRMSPropç®—æ³•ç»“åˆèµ·æ¥ä»è€Œå½¢æˆAdamç®—æ³•ã€‚åœ¨Adamç®—æ³•ä¸­ï¼Œå‚æ•° ${\beta_1}$ æ‰€å¯¹åº”çš„å°±æ˜¯Momentumç®—æ³•ä¸­çš„ ${\beta}$ å€¼ï¼Œä¸€èˆ¬å–0.9ï¼Œå‚æ•° ${\beta_2}$ æ‰€å¯¹åº”çš„å°±æ˜¯RMSPropç®—æ³•ä¸­çš„ ${\beta}$ å€¼ï¼Œä¸€èˆ¬æˆ‘ä»¬å–0.999ï¼Œè€Œ $\epsilon$ æ˜¯ä¸€ä¸ªå¹³æ»‘é¡¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬å–å€¼ä¸º ${10^{ - 8}}$ï¼Œè€Œå­¦ä¹ ç‡ $\alpha$ åˆ™éœ€è¦æˆ‘ä»¬åœ¨è®­ç»ƒçš„æ—¶å€™è¿›è¡Œå¾®è°ƒã€‚</p>
<blockquote>
<p>é€šè¿‡ä¸Šé¢çš„ä¸‰ä¸ªç®—æ³•åŸºæœ¬è®²è¿°äº†ç¥ç»ç½‘ç»œä¸­çš„ä¼˜åŒ–å™¨ï¼Œç†è§£äº†è¿™ä¸‰ä¸ªç®—æ³•å…¶ä»–çš„ç®—æ³•ä¹Ÿå°±å¼•åˆƒè€Œè§£äº†.</p>
<p>Adam ä¼˜åŒ–ç®—æ³• æˆ‘ä¼šæ¯«ä¸çŠ¹è±«çš„æ¨èç»™ä½ ï¼Œ å®ƒæ˜¯ Momentum å’Œ RMSprop çš„ç»“åˆ. äº‹å®è¯æ˜ï¼Œå®ƒå…¶å®è§£å†³äº†å¾ˆå¤šé—®é¢˜. </p>
<p>Adam ä¸­çš„è¶…å‚æ•° ${\beta_1}$ ã€${\beta_2}$  ä¸€èˆ¬ä¸éœ€è¦è°ƒæ•´ï¼Œä¸šå†…ç»å¸¸å¾ˆå°‘æœ‰äººä¼šè°ƒæ•´ä»–ä»¬.  $\epsilon$ æ˜¯ä¸€ä¸ªå¹³æ»‘é¡¹ï¼Œä¸€èˆ¬å–å€¼ä¸º ${10^{ - 8}}$, åŸºæœ¬æ›´ä¸éœ€è¦è°ƒæ•´.</p>
</blockquote>
<p>Adaptive Moment Estimation</p>
<blockquote>
<p>${\beta_1}$ ç”¨äºè®¡ç®—è¿™ä¸ªå¾®åˆ† (computing the mean of the derivatives, this is called the first moment).</p>
<p>${\beta_2}$ ç”¨äºè®¡ç®—å¹³æ–¹æ•°çš„æŒ‡æ•°åŠ æƒå¹³å‡æ•° (compute exponentially weighted average of the squares. this is called the second moment)</p>
<p>So that gives rise to the name <code>Adaptive Moment Estimation</code>.</p>
</blockquote>
<h2 id="6-Learning-rate-decay"><a href="#6-Learning-rate-decay" class="headerlink" title="6. Learning rate decay"></a>6. Learning rate decay</h2><p>ä¹‹å‰ç®—æ³•ä¸­æåˆ°çš„å­¦ä¹ ç‡Î±éƒ½æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œè¿™æ ·æœ‰å¯èƒ½ä¼šä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åˆšå¼€å§‹æ”¶æ•›é€Ÿåº¦åˆšåˆšå¥½ï¼Œå¯æ˜¯åœ¨åé¢æ”¶æ•›è¿‡ç¨‹ä¸­å­¦ä¹ ç‡åå¤§ï¼Œå¯¼è‡´ä¸èƒ½å®Œå…¨æ”¶æ•›ï¼Œè€Œæ˜¯åœ¨æœ€ä½ç‚¹æ¥å›æ³¢åŠ¨ã€‚æ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦è®©å­¦ä¹ ç‡èƒ½å¤Ÿéšç€è¿­ä»£æ¬¡æ•°çš„å¢åŠ è¿›è¡Œè¡°å‡ï¼Œå¸¸è§çš„è®¡ç®—å…¬å¼æœ‰å¦‚ä¸‹å‡ ç§:</p>
<p>$$<br>Î± = \frac {1} {1+decay_rate*epoch_num} Î±_0<br>$$</p>
<blockquote>
<p>å¯¹æˆ‘è€Œè¨€ï¼Œå­¦ä¹ ç‡è¡°å‡å¹¶ä¸æ˜¯æˆ‘å°è¯•çš„è¦ç‚¹, è®¾ç½®ä¸€ä¸ªå›ºå®šçš„ Î±ï¼Œ ç„¶åå¥½å¥½è°ƒæ•´ï¼Œä¼šæœ‰å¾ˆå¤§å½±å“ï¼Œ å­¦ä¹ ç‡è¡°å‡çš„ç¡®å¤§æœ‰è£¨ç›Š, æœ‰æ—¶å€™å®ƒå¯ä»¥åŠ å¿«è®­ç»ƒ, ä½†è¿™å¹¶ä¸æ˜¯æˆ‘ä¼šç‡å…ˆå°è¯•çš„å†…å®¹. ä¸‹å‘¨æˆ‘ä»¬ä¼šé‡ç‚¹ä»‹ç» å¦‚ä½•ç®¡ç†å’Œé«˜æ•ˆæœç´¢ è¶…å‚æ•°.</p>
<p>For meï¼ŒI would say that learning rate decay usually lower down on the list of things I try. learning rate decay does help. Sometimes it can really help speed up training. it is a little bit lower down my list in terms of the thingsI would try.</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="https://blog.csdn.net/u014595019/article/details/52989301" target="_blank" rel="external">æ·±åº¦å­¦ä¹ ç¬”è®°ï¼šä¼˜åŒ–æ–¹æ³•æ€»ç»“(BGD,SGD,Momentum,AdaGrad,RMSProp,Adam)</a></li>
<li><a href="https://blog.csdn.net/BVL10101111/article/details/72614711" target="_blank" rel="external">Deep Learning ä¹‹ æœ€ä¼˜åŒ–æ–¹æ³•</a></li>
<li><a href="https://blog.csdn.net/willduan1/article/details/78070086" target="_blank" rel="external">æ·±åº¦å­¦ä¹ ä¼˜åŒ–ç®—æ³•è§£æ(Momentum, RMSProp, Adam)</a></li>
<li><a href="https://www.jiqizhixin.com/articles/2017-09-25-3" target="_blank" rel="external">æœºå™¨ä¹‹å¿ƒ - ç¥ç»ç½‘ç»œè®­ç»ƒä¸­ï¼Œå‚»å‚»åˆ†ä¸æ¸…Epochã€Batch Sizeå’Œè¿­ä»£</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Improving Deep Neural Networks (week1) - æ·±åº¦å­¦ä¹ çš„å®ç”¨å±‚é¢]]></title>
      <url>http://shopee.ai/2018/07/19/deeplearning/Improving-Deep-Neural-Networks-week1/</url>
      <content type="html"><![CDATA[<p>è¿™æ¬¡æˆ‘ä»¬è¦å­¦ä¹ ä¸“é¡¹è¯¾ç¨‹ä¸­ç¬¬äºŒé—¨è¯¾ Improving Deep Neural Networks</p>
<p>å­¦å®Œè¿™é—¨è¯¾ä¹‹åï¼Œä½ å°†ä¼š:</p>
<blockquote>
<ul>
<li>èƒ½å¤Ÿé«˜æ•ˆåœ°ä½¿ç”¨ç¥ç»ç½‘ç»œ<strong>é€šç”¨</strong>çš„æŠ€å·§ï¼ŒåŒ…æ‹¬ <code>åˆå§‹åŒ–ã€L2å’Œdropoutæ­£åˆ™åŒ–ã€Batchå½’ä¸€åŒ–ã€æ¢¯åº¦æ£€éªŒ</code>ã€‚</li>
<li>èƒ½å¤Ÿå®ç°å¹¶åº”ç”¨å„ç§<strong>ä¼˜åŒ–</strong>ç®—æ³•ï¼Œä¾‹å¦‚ <code>Mini-batchã€Momentumã€RMSpropã€Adamï¼Œå¹¶æ£€æŸ¥å®ƒä»¬çš„æ”¶æ•›ç¨‹åº¦</code>ã€‚</li>
<li>ç†è§£æ·±åº¦å­¦ä¹ æ—¶ä»£å…³äºå¦‚ä½• <strong>æ„å»ºè®­ç»ƒ/å¼€å‘/æµ‹è¯•é›†</strong> ä»¥åŠ <strong>åå·®/æ–¹å·®åˆ†æ</strong> æœ€æ–°æœ€æœ‰æ•ˆçš„æ–¹æ³•.</li>
<li>èƒ½å¤Ÿç”¨TensorFlowå®ç°ä¸€ä¸ªç¥ç»ç½‘ç»œ</li>
</ul>
</blockquote>
<p>è¿™é—¨è¯¾å°†ä¼šè¯¦å°½åœ°ä»‹ç»æ·±åº¦å­¦ä¹ çš„åŸºæœ¬åŸç†ï¼Œè€Œä¸ä»…ä»…åªè¿›è¡Œç†è®ºæ¦‚è¿°.</p>
<a id="more"></a>
<p>æœ¬å‘¨ä¸»è¦å†…å®¹åŒ…æ‹¬:</p>
<blockquote>
<ol>
<li>Data set partition</li>
<li>Bias / Variance</li>
<li>Regularization</li>
<li>Normalization</li>
<li>Gradient Checking</li>
</ol>
</blockquote>
<h2 id="1-Train-dev-test"><a href="#1-Train-dev-test" class="headerlink" title="1. Train/dev/test"></a>1. Train/dev/test</h2><p>åœ¨ä¸Šä¸€å‘¨çš„å†…å®¹ä¸­, ä»‹ç»äº†ç¥ç»ç½‘ç»œä¸­çš„å¸¸ç”¨ç¬¦å·ä»¥åŠå„ç§å˜é‡çš„ç»´åº¦. ä¸æ¸…æ¥šçš„å¯ä»¥å›é¡¾ä¸Šå‘¨çš„ç¬”è®°å†…å®¹.</p>
<h3 id="1-1-Data-set-partition"><a href="#1-1-Data-set-partition" class="headerlink" title="1.1 Data set partition"></a>1.1 Data set partition</h3><p>åœ¨è®­ç»ƒå®Œä¸€ä¸ªæ¨¡å‹æ—¶, æˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸ªæ¨¡å‹é¢„æµ‹çš„æ•ˆæœ. æ­¤æ—¶å°±éœ€è¦ä¸€ä¸ªé¢å¤–çš„æ•°æ®é›†, æˆ‘ä»¬ç§°ä¸º dev/hold out/validation set, è¿™é‡Œæˆ‘ä»¬å°±ç»Ÿä¸€ç§°ä¹‹ä¸º<code>éªŒè¯é›†</code>. </p>
<blockquote>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦çŸ¥é“æ¨¡å‹æœ€ç»ˆæ•ˆæœçš„æ— åä¼°è®¡, é‚£ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªæµ‹è¯•é›†. </p>
<p>åœ¨ä»¥å¾€ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ ä¸­, æˆ‘ä»¬é€šå¸¸æŒ‰ç…§ 70/30 æ¥æ•°æ®é›†åˆ†ä¸º <code>Train set</code>/<code>Validation set</code>, æˆ–è€…æŒ‰ç…§ 60/20/20 çš„æ¯”ä¾‹åˆ†ä¸º <code>Train/Validation/Test</code>. </p>
<p>ä½†åœ¨ä»Šå¤©æœºå™¨å­¦ä¹ é—®é¢˜ä¸­, æˆ‘ä»¬å¯ç”¨çš„<strong>æ•°æ®é›†çš„é‡çº§éå¸¸å¤§</strong> (ä¾‹å¦‚æœ‰ 100W ä¸ªæ ·æœ¬). è¿™æ—¶æˆ‘ä»¬å°±<strong>ä¸éœ€è¦ç»™éªŒè¯é›†å’Œæµ‹è¯•é›†å¤ªå¤§çš„æ¯”ä¾‹, ä¾‹å¦‚ 98/1/1</strong>.</p>
</blockquote>
<p><img src="/images/deeplearning/C2W1-1_1.png" width="750"></p>
<h3 id="1-2-Data-src-distribution"><a href="#1-2-Data-src-distribution" class="headerlink" title="1.2 Data src distribution"></a>1.2 Data src distribution</h3><p>åœ¨åˆ’åˆ†æ•°æ®é›†ä¸­, æœ‰ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„é”™è¯¯å°±æ˜¯ä¸å°å¿ƒä½¿å¾—åœ¨<code>è®­ç»ƒé›†</code>ä¸­çš„æ•°æ®å’Œ<code>éªŒè¯</code>æˆ–<code>æµ‹è¯•</code>é›†ä¸­çš„æ•°æ®æ¥è‡ªäºä¸åŒçš„åˆ†å¸ƒ. ä¾‹å¦‚æˆ‘ä»¬æƒ³è¦åšä¸€ä¸ªçŒ«çš„åˆ†ç±»å™¨, åœ¨åˆ’åˆ†æ•°æ®çš„æ—¶å€™å‘ç°<code>è®­ç»ƒé›†</code>ä¸­çš„å›¾ç‰‡å…¨éƒ½æ˜¯æ¥è‡ªäºç½‘é¡µ, è€Œ<code>éªŒè¯é›†</code>å’Œ<code>æµ‹è¯•é›†</code>ä¸­çš„æ•°æ®å…¨éƒ½æ¥è‡ªäºç”¨æˆ·. è¿™æ˜¯ä¸€ç§å®Œå…¨é”™è¯¯çš„åšæ³•, åœ¨å®é™…ä¸­ä¸€å®šè¦æœç».</p>
<p><img src="/images/deeplearning/C2W1-2_1.png" width="750"></p>
<h2 id="2-Bias-Variance"><a href="#2-Bias-Variance" class="headerlink" title="2. Bias / Variance"></a>2. Bias / Variance</h2><p>å…³äº Bias / Variance ç›¸æ¯”å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰äº†, åœ¨æœºå™¨å­¦ä¹ çš„è¯¾ç¨‹ä¸­ä¹Ÿå·²ç»å­¦ä¹ åˆ°. ä¸‹é¢ç¥­å‡º Andrew Ng ç»å…¸çš„å›¾ä¾‹è§£é‡Š:</p>
<p><img src="/images/deeplearning/C2W1-3_1.png" width="750"></p>
<p>æˆ‘ä»¬è¯¥å¦‚ä½•å®šä½æ¨¡å‹æ‰€å¤„çš„é—®é¢˜? å¦‚ä¸‹å›¾æ‰€ç¤º, è¿™é‡Œä¸¾äº†å››ä¸­æƒ…å†µä¸‹çš„è®­ç»ƒé›†å’ŒéªŒè¯é›†è¯¯å·®.</p>
<ul>
<li>å½“ è®­ç»ƒè¯¯å·®å¾ˆå°, éªŒè¯è¯¯å·®å¾ˆå¤§æ—¶ ä¸º High Variance</li>
<li>å½“ è®­ç»ƒè¯¯å·® å’Œ éªŒè¯è¯¯å·® æ¥è¿‘ ä¸” éƒ½å¾ˆå¤§ æ—¶ä¸º High Bias</li>
<li>å½“ è®­ç»ƒè¯¯å·®å¾ˆå¤§, éªŒè¯è¯¯å·®æ›´å¤§æ—¶ä¸º High Variance &amp;&amp; High Bias</li>
<li>å½“ è®­ç»ƒè¯¯å·® å’Œ éªŒè¯è¯¯å·®æ¥è¿‘ä¸”éƒ½å¾ˆå°æ—¶ä¸º Low Variance &amp;&amp; Low Bias</li>
</ul>
<p><img src="/images/deeplearning/C2W1-4_1.png" width="750"></p>
<p>å…³äºé«˜æ–¹å·®é«˜åå·®å¯èƒ½æ˜¯ç¬¬ä¸€æ¬¡å¬è¿‡, å¦‚ä¸‹å›¾æ‰€ç¤º, æ•´ä½“ä¸Šæ¨¡å‹å¤„äºé«˜åå·®, ä½†æ˜¯å¯¹äºä¸€äº›å™ªå£°åˆæ‹Ÿåˆåœ°å¾ˆå¥½. æ­¤æ—¶å°±å¤„äºé«˜åå·®é«˜æ–¹å·®çš„çŠ¶æ€.</p>
<p><img src="/images/deeplearning/C2W1-5_1.png" width="750"></p>
<p>å½“æˆ‘ä»¬å­¦ä¼šå®šä½æ¨¡å‹çš„é—®é¢˜å, é‚£ä¹ˆè¯¥æ€æ ·è§£å†³å¯¹åº”çš„é—®é¢˜å‘¢? è§ä¸‹å›¾:</p>
<p><img src="/images/deeplearning/C2W1-6_1.png" width="750"></p>
<blockquote>
<p>è‹¥ <strong>High bias</strong>, æˆ‘ä»¬å¯ä»¥å¢åŠ æ¨¡å‹çš„å¤æ‚åº¦<strong>ä¾‹å¦‚ä½¿ç”¨ä¸€ä¸ªâ€æ›´å¤§â€çš„ç½‘ç»œç»“æ„æˆ–è€…è®­ç»ƒæ›´ä¹…ä¸€ç‚¹</strong>.<br>å¦‚ <strong>High variance</strong>, æˆ‘ä»¬å¯ä»¥æƒ³åŠæ³• <strong>get more data</strong>, æˆ–è€…ä½¿ç”¨æ¥ä¸‹æ¥æˆ‘ä»¬è¦è®²çš„ <code>Regularization</code>.</p>
</blockquote>
<h2 id="3-Regularization"><a href="#3-Regularization" class="headerlink" title="3. Regularization"></a>3. Regularization</h2><p>ä¸ºä»€ä¹ˆæ­£åˆ™åŒ–æ²¡æœ‰åŠ  $\frac{\lambda}{2m} b^2$:</p>
<blockquote>
<p>å› ä¸º $w$ é€šå¸¸æ˜¯ä¸€ä¸ªé«˜ç»´å‚æ•°çŸ¢é‡, å·²ç»å¯ä»¥è¡¨è¾¾ <strong>High bias</strong> çš„é—®é¢˜, $w$ å¯èƒ½å«æœ‰å¾ˆå¤šå‚æ•°ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ‹Ÿåˆæ‰€æœ‰å‚æ•°, è€Œ $b$ åªæ˜¯å•ä¸ªæ•°å­—, æ‰€ä»¥ $w$ å‡ ä¹è¦†ç›–äº†æ‰€æœ‰å‚æ•°ï¼Œè€Œä¸æ˜¯ $b$, å¦‚æœåŠ äº† $b$ ä¹Ÿæ²¡æœ‰å½±å“ï¼Œå› ä¸º $b$ åªæ˜¯ä¼—å¤šå‚æ•°ä¸­çš„ä¸€ä¸ª.</p>
</blockquote>
<p>å…³äº L1 regularization :</p>
<blockquote>
<p>å¦‚æœç”¨çš„æ˜¯ L1 regularization, then $w$ will end up being sprase ç¨€ç–çš„, ä¹Ÿå°±æ˜¯è¯´ $w$ å‘é‡ä¸­æœ‰å¾ˆå¤š 0. æœ‰äººè¯´è¿™æ ·æœ‰åˆ©äºå‹ç¼©æ¨¡å‹ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ä¸æ˜¯å¾ˆåˆé€‚. è¶Šæ¥è¶Šå¤šçš„äººä½¿ç”¨ L2.</p>
<p>Notes: ä¸ç§°ä¸º:çŸ©é˜µ L2 èŒƒæ•°ï¼Œ æŒ‰ç…§æƒ¯ä¾‹æˆ‘ä»¬ç§°ä¸º: <strong>Frobenius norm of a matrix</strong>, å…¶å®å°±æ˜¯ : çŸ©é˜µ L2 èŒƒæ•°ã€‚</p>
</blockquote>
<h3 id="3-1-L2-regularization"><a href="#3-1-L2-regularization" class="headerlink" title="3.1 L2 regularization"></a>3.1 L2 regularization</h3><blockquote>
<p>L2 regularization ä¸‹çš„ Cost Function å¦‚ä¸‹æ‰€ç¤º, åªéœ€è¦æ·»åŠ æ­£åˆ™é¡¹ <strong>$\frac{\lambda}{2m}\sum_{l=1}^L||w^{[l]}||^2_F$</strong>, å…¶ä¸­ F ä»£è¡¨ Frobenius Norm. åœ¨æ·»åŠ äº†æ­£åˆ™é¡¹ä¹‹å, ç›¸åº”çš„æ¢¯åº¦ä¹Ÿè¦å˜åŒ–, æ‰€ä»¥åœ¨æ›´æ–°å‚æ•°çš„æ—¶å€™éœ€è¦åŠ ä¸Šå¯¹åº”çš„é¡¹. è¿™é‡Œæ³¨æ„ä¸€ç‚¹, æˆ‘ä»¬åªå¯¹å‚æ•° $w$ æ­£åˆ™, è€Œä¸å¯¹ $b$. å› ä¸ºå¯¹äºæ¯ä¸€å±‚æ¥è¯´, $w$ æœ‰å¾ˆé«˜çš„ç»´åº¦, è€Œ $b$ åªæ˜¯ä¸€ä¸ªæ ‡é‡. $w$ å¯¹æ•´ä¸ªæ¨¡å‹çš„å½±å“è¿œå¤§äº $b$.</p>
</blockquote>
<p><img src="/images/deeplearning/C2W1-7_1.png" width="750"></p>
<p>ä¸‹é¢ç»™å‡ºæ·»åŠ  regularization ä¸ºä»€ä¹ˆèƒ½é˜²æ­¢è¿‡æ‹Ÿåˆç»™å‡ºç›´è§‚çš„è§£é‡Š. å¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<blockquote>
<p>å½“æˆ‘ä»¬çš„ Î» æ¯”è¾ƒå¤§çš„æ—¶å€™, æ¨¡å‹å°±ä¼šåŠ å¤§å¯¹ w çš„æƒ©ç½š, è¿™æ ·æœ‰äº› w å°±ä¼šå˜å¾—å¾ˆå° (L2 Regularization ä¹Ÿå«æƒé‡è¡°å‡, <strong>weights decay</strong>). ä»ä¸‹å›¾å·¦è¾¹çš„ç¥ç»ç½‘ç»œæ¥çœ‹, æ•ˆæœå°±æ˜¯æ•´ä¸ªç¥ç»ç½‘ç»œå˜å¾—ç®€å•äº†(ä¸€äº›éšè—å±‚ç”šè‡³ $w$ è¶‹å‘äº 0), ä»è€Œé™ä½äº†è¿‡æ‹Ÿåˆçš„é£é™©.</p>
<p>é‚£äº› éšè—å±‚ å¹¶æ²¡æœ‰è¢«æ¶ˆé™¤ï¼Œåªæ˜¯å½±å“å˜å¾—æ›´å°äº†ï¼Œç¥ç»ç½‘ç»œå˜å¾—ç®€å•äº†.</p>
</blockquote>
<p><img src="/images/deeplearning/C2W1-8_1.png" width="750"></p>
<blockquote>
<p>ä»å¦ä¸€ä¸ªè§’åº¦æ¥çœ‹. ä»¥ tanhæ¿€æ´»å‡½æ•° ä¸ºä¾‹, å½“ $Î»$ å¢åŠ æ—¶, $w$ ä¼šåå°, è¿™æ · $z = wa +b$ ä¹Ÿä¼šåå°, æ­¤æ—¶çš„æ¿€æ´»å‡½æ•°å¤§è‡´æ˜¯çº¿æ€§çš„. è¿™æ ·æ¨¡å‹çš„å¤æ‚åº¦ä¹Ÿå°±é™ä½äº†, å³é™ä½äº†è¿‡æ‹Ÿåˆçš„é£é™©.</p>
<p>å¦‚æœç¥ç»ç½‘ç»œæ¯å±‚éƒ½æ˜¯çº¿æ€§çš„ï¼Œå…¶å®æ•´ä¸ªè¿˜æ˜¯ä¸€ä¸ªçº¿æ€§çš„, å³ä½¿æ˜¯ä¸€ä¸ªå¾ˆæ·±çš„ç½‘ç»œï¼Œå› ä¸ºçº¿æ€§æ¿€æ´»å‡½æ•°çš„ç‰¹å¾ï¼Œæœ€ç»ˆæˆ‘ä»¬åªèƒ½è®¡ç®—çº¿æ€§å‡½æ•°.</p>
</blockquote>
<p><img src="/images/deeplearning/C2W1-9_1.png" width="750"></p>
<h3 id="3-2-Dropout"><a href="#3-2-Dropout" class="headerlink" title="3.2 Dropout"></a>3.2 Dropout</h3><p>dropout ä¹Ÿæ˜¯ä¸€ç§æ­£åˆ™åŒ–çš„æ‰‹æ®µ, åœ¨è®­ç»ƒæ—¶ä»¥ 1-keep_prob éšæœºåœ°â€ä¸¢å¼ƒâ€ä¸€äº›èŠ‚ç‚¹. å¦‚ä¸‹å›¾æ‰€ç¤º.</p>
<p><img src="/images/deeplearning/C2W1-10_1.png" width="600"></p>
<blockquote>
<p>å…·ä½“å¯å‚è€ƒå¦‚ä¸‹å®ç°æ–¹å¼, åœ¨å‰å‘ä¼ æ’­æ—¶å°† $a$ ä¸­çš„æŸäº›å€¼ç½®ä¸º0, ä¸ºäº†ä¿è¯å¤§æ¦‚çš„å¤§å°ä¸å—æ·»åŠ  dropout å½±å“, å†å°†å¤„ç†åçš„ $a$ é™¤ä»¥ keep_prob.</p>
</blockquote>
<p><img src="/images/deeplearning/C2W1-11_1.png" width="750"></p>
<blockquote>
<p>dropout å°†äº§ç”Ÿæ”¶ç¼©æƒé‡çš„å¹³æ–¹èŒƒæ•°çš„æ•ˆæœ, å’Œ L2 ç±»ä¼¼ï¼Œå®æ–½ dropout çš„ç»“æœæ˜¯å®ƒä¼šå‹ç¼©æƒé‡ï¼Œå¹¶å®Œæˆä¸€äº›é¢„é˜²è¿‡æ‹Ÿåˆçš„å¤–å±‚æ­£åˆ™åŒ–ï¼Œäº‹å®è¯æ˜ dropout è¢«æ­£å¼åœ°ä½œä¸ºä¸€ç§æ­£åˆ™åŒ–çš„æ›¿ä»£å½¢å¼</p>
<p>L2 å¯¹ä¸åŒæƒé‡çš„è¡°å‡æ˜¯ä¸åŒçš„ï¼Œå®ƒå–å†³äºå€å¢çš„æ¿€æ´»å‡½æ•°çš„å¤§å°.</p>
<p>dropout çš„åŠŸèƒ½ç±»ä¼¼äº L2 æ­£åˆ™åŒ–. ç”šè‡³ dropout æ›´é€‚ç”¨äºä¸åŒçš„è¾“å…¥èŒƒå›´.</p>
</blockquote>
<p><img src="/images/deeplearning/C2W1-11_2.png" width="700"></p>
<blockquote>
<p>Notes: æ¯ä¸€å±‚çš„ keep_prob å¯èƒ½æ˜¯ä¸åŒçš„, keep_prob å– 1ï¼Œ åˆ™æ˜¯è¯¥å±‚ä¿ç•™æ‰€æœ‰å•å…ƒ. </p>
<p>è¾“å‡ºå±‚çš„ keep_prob ç»å¸¸è®¾ç½®ä¸º 1ï¼Œæœ‰æ—¶å€™ä¹Ÿå¯ä»¥è®¾ç½®ä¸º 1.9 (&gt;1). &lt; 1 é€šå¸¸åœ¨è¾“å‡ºå±‚æ˜¯ä¸å¤ªå¯èƒ½çš„. </p>
<p>è¾“å…¥å±‚çš„ keep_prob ç»å¸¸è®¾ç½®ä¸º 1ï¼Œæœ‰æ—¶å€™ä¹Ÿå¯ä»¥è®¾ç½®ä¸º 0.9ï¼Œ å¦‚æœæ˜¯ 0.5 æ¶ˆå‡ä¸€åŠï¼Œé€šå¸¸æ˜¯ä¸å¯èƒ½çš„.</p>
<p>å…¶ä»– : è®¡ç®—æœºè§†è§‰çš„äººå‘˜éå¸¸é’Ÿæƒ… dropout å‡½æ•°.</p>
<p>Notes: dropout çš„ä¸€å¤§ç¼ºç‚¹å°±æ˜¯ J ä¸ä¼šè¢«æ˜ç¡®å®šä¹‰. æ¯æ¬¡è¿­ä»£éƒ½ä¼šè¢«éšæœºåˆ é™¤ä¸€äº›èŠ‚ç‚¹. å¦‚æœå†ä¸‰æ£€æŸ¥æ¢¯åº¦ä¸‹é™çš„æ€§èƒ½ï¼Œå®é™…ä¸Šæ˜¯å¾ˆéš¾å¤æŸ¥çš„.</p>
<p>å®šä¹‰æ˜ç¡®çš„ä»£ä»·å‡½æ•°ï¼Œæ¯æ¬¡è¿­ä»£éƒ½ä¼šä¸‹é™. å› ä¸º dropout ä½¿å¾— J æ²¡æœ‰è¢«æ˜ç¡®å®šä¹‰ï¼Œæˆ–è€…åœ¨æŸç§ç¨‹åº¦ä¸Šå¾ˆéš¾è®¡ç®—. æ‰€ä»¥æˆ‘ä»¬å¤±å»äº†è°ƒè¯•å·¥å…·ï¼Œæˆ‘é€šå¸¸ä¼šå…³é—­ dropout. keep_prob è®¾ç½®ä¸º 1ï¼Œ è¿è¡Œä»£ç ï¼Œç¡®ä¿ J å‡½æ•°å•è°ƒé€’å‡, ç„¶ååœ¨æ‰“å¼€ dropout, åœ¨ dropout çš„è¿‡ç¨‹ä¸­ï¼Œä»£ç å¹¶æœªå¼•å…¥bug.</p>
</blockquote>
<p>å®ç°ä»£ç (æœªå®Œæˆ)</p>
<h3 id="3-3-Other-Regularization"><a href="#3-3-Other-Regularization" class="headerlink" title="3.3 Other Regularization"></a>3.3 Other Regularization</h3><ul>
<li>Data augmentation</li>
</ul>
<p><img src="/images/deeplearning/C2W1-12_1.png" width="600"></p>
<ul>
<li>Early stopping</li>
</ul>
<p><img src="/images/deeplearning/C2W1-13_1.png" width="600"></p>
<blockquote>
<p>W å¼€å§‹æ˜¯å˜å°çš„ï¼Œä¹‹åä¼šéšç€è¿­ä»£è¶Šæ¥è¶Šå¤§. early stopping å°±æ˜¯åœ¨ä¸­é—´ç‚¹åœæ­¢è¿­ä»£è¿‡ç¨‹.</p>
<p>Notes: </p>
<ol>
<li>early stopping  ç¼ºç‚¹æ˜¯ ææ—©åœæ­¢ï¼Œw æ˜¯é˜²æ­¢äº†è¿‡æ‹Ÿåˆï¼Œä½†æ˜¯ J æ²¡æœ‰è¢«ç»§ç»­ä¸‹é™.</li>
<li>L2 æ­£åˆ™åŒ– çš„ç¼ºç‚¹æ˜¯ï¼Œè¦ç”¨å¤§é‡ç²¾åŠ›æœç´¢åˆé€‚çš„ Î» .</li>
</ol>
<p>æˆ‘ä¸ªäººä¹Ÿæ˜¯æ›´å€¾å‘äºä½¿ç”¨ L2ï¼Œå¦‚æœä½ å¯ä»¥è´Ÿæ‹…å¤§é‡çš„è®¡ç®—ä»£ä»·.</p>
</blockquote>
<h2 id="4-Normalization"><a href="#4-Normalization" class="headerlink" title="4. Normalization"></a>4. Normalization</h2><p><img src="/images/deeplearning/C2W1-14_1.png" width="600"></p>
<blockquote>
<ol>
<li>0 å‡å€¼åŒ– </li>
<li>å½’ä¸€åŒ– æ–¹å·®</li>
</ol>
<p>ä¸Šå›¾2ï¼Œ ç‰¹å¾ x1 çš„æ–¹å·® æ¯” ç‰¹å¾ x2 çš„æ–¹å·® å¤§å¾ˆå¤š<br>ä¸Šå›¾3ï¼Œ ç‰¹å¾ x1 å’Œ ç‰¹å¾ x2 çš„ æ–¹å·® éƒ½æ˜¯ 1</p>
<p>æ³¨æ„: ä¸è®º è®­ç»ƒé›† å’Œ æµ‹è¯•é›†ï¼Œéƒ½æ˜¯é€šè¿‡ç›¸åŒçš„ $\mu$ å’Œ ${\sigma}^2$ å®šä¹‰çš„ç›¸åŒæ•°æ®è½¬æ¢, å…¶ä¸­ $\mu$ å’Œ ${\sigma}^2$ æ˜¯ç”±è®­ç»ƒæ•°æ®è®¡ç®—è€Œæ¥.</p>
</blockquote>
<p><img src="/images/deeplearning/C2W1-15_1.png" width="700"></p>
<h2 id="5-Vanishing-Exploding-gradients"><a href="#5-Vanishing-Exploding-gradients" class="headerlink" title="5. Vanishing/Exploding gradients"></a>5. Vanishing/Exploding gradients</h2><p>Vanishing/Exploding gradients æŒ‡çš„æ˜¯éšç€å‰å‘ä¼ æ’­ä¸æ–­åœ°è¿›è¡Œ, æ¿€æ´»å•å…ƒçš„å€¼ä¼šé€å±‚æŒ‡æ•°çº§åœ°å¢åŠ æˆ–å‡å°, ä»è€Œå¯¼è‡´æ¢¯åº¦æ— é™å¢å¤§æˆ–è€…è¶‹è¿‘äºé›¶, è¿™æ ·ä¼šä¸¥é‡å½±å“ç¥ç»ç½‘ç»œçš„è®­ç»ƒ. å¦‚ä¸‹å›¾.</p>
<p><img src="/images/deeplearning/C2W1-16_1.png" width="650"></p>
<p>ä¸ºäº†ç›´è§‚ç†è§£æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸ï¼Œæˆ‘ä»¬å‡è®¾æ‰€æœ‰æ¿€æ´»å‡½æ•°ä¸ºçº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œå³ $g(z)=z$ã€‚ å¹¶å‡è®¾å‰ Lâˆ’1 ä¸ªæƒé‡çŸ©é˜µéƒ½ç›¸ç­‰, å³ä¸º $W_{linear}$ï¼Œæ‰€ä»¥å¯ä»¥å¾—åˆ° $y_{hat}=W_{linear}^{L-1}W_{L}X$</p>
<p>å‡è®¾ $W_{linear}$ éƒ½ç­‰äºè¿™ä¸ª: <img src="/images/deeplearning/C2W1-16_2.jpg" alt=""></p>
<p>é‚£ä¹ˆåˆ™æœ‰ $y_{hat}=1.5^{L-1}W_LX$ï¼Œå¾ˆæ˜¾ç„¶å½“ L å¾ˆå¤§æ—¶åˆ™ä¼šå‡ºç°æ¢¯åº¦çˆ†ç‚¸ã€‚</p>
<p>åŒç†è‹¥å°†æƒé‡çš„å€¼è®¾ç½®ä¸ºå°äº1ï¼Œé‚£ä¹ˆåˆ™ä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±ã€‚</p>
<blockquote>
<p>ä¸€ä¸ªå¯ä»¥å‡å°è¿™ç§æƒ…å†µå‘ç”Ÿçš„æ–¹æ³•, å°±æ˜¯ç”¨æœ‰æ•ˆçš„å‚æ•°åˆå§‹åŒ– (è¯¥æ–¹æ³•å¹¶ä¸èƒ½å®Œå…¨è§£å†³è¿™ä¸ªé—®é¢˜). ä½†æ˜¯ä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„</p>
</blockquote>
<p><img src="/images/deeplearning/C2W1-17_1.png" width="750"></p>
<blockquote>
<p>è®¾ç½®åˆç†çš„æƒé‡ï¼Œå¸Œæœ›ä½ è®¾ç½®çš„æƒé‡çŸ©é˜µï¼Œæ—¢ä¸ä¼šå¢é•¿è¿‡å¿«ï¼Œä¹Ÿä¸ä¼šä¸‹é™è¿‡å¿«åˆ° 0.</p>
<p>æƒ³æ›´åŠ äº†è§£å¦‚ä½•åˆå§‹åŒ–æƒé‡å¯ä»¥çœ‹ä¸‹è¿™ç¯‡æ–‡ç«  <a href="http://www.cnblogs.com/marsggbo/p/7462682.html" target="_blank" rel="external">ç¥ç»ç½‘ç»œæƒé‡åˆå§‹åŒ–é—®é¢˜</a>ï¼Œå…¶ä¸­å¾ˆè¯¦ç»†çš„ä»‹ç»äº†æƒé‡åˆå§‹åŒ–é—®é¢˜ã€‚</p>
</blockquote>
<h2 id="6-Gradient-checking-implementation"><a href="#6-Gradient-checking-implementation" class="headerlink" title="6. Gradient checking implementation"></a>6. Gradient checking implementation</h2><p><img src="/images/deeplearning/C2W1-18_1.png" width="700"></p>
<p><img src="/images/deeplearning/C2W1-19_1.png" width="700"></p>
<p><img src="/images/deeplearning/C2W1-20_1.png" width="700"></p>
<blockquote>
<p>å¾ˆéš¾ç”¨æ¢¯åº¦æ£€éªŒæ¥åŒé‡æ£€éªŒ dropout çš„è®¡ç®—ï¼Œ æ‰€ä»¥æˆ‘ä¸åŒæ—¶ä½¿ç”¨æ¢¯åº¦æ£€éªŒå’Œ dropoutï¼Œé™¤é dropout keep.prob è®¾ç½®ä¸º 1.</p>
<p>æˆ‘å»ºè®®å…³é—­ dropout ç”¨æ¢¯åº¦æ£€éªŒè¿›è¡ŒåŒé‡æ£€æŸ¥.</p>
<p>åœ¨æ²¡æœ‰ dropout çš„æƒ…å†µä¸‹ï¼Œç¡®ä¿ä½ çš„ç®—æ³•æ˜¯æ­£ç¡®çš„ï¼Œç„¶åå†æ‰“å¼€ dropout.</p>
<p>ç°å®ä¸­ å‡ ä¹ä¸ä¼šå‡ºç°, å½“ w å’Œ b æ¥è¿‘ 0 æ—¶ï¼Œæ¢¯åº¦ä¸‹é™çš„å®æ–½æ˜¯æ­£ç¡®çš„.</p>
</blockquote>
<h2 id="8-Reference"><a href="#8-Reference" class="headerlink" title="8. Reference"></a>8. Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="https://daniellaah.github.io/2017/deeplearning-ai-Improving-Deep-Neural-Networks-week1.html" target="_blank" rel="external">deeplearning.ai ä¸“é¡¹è¯¾ç¨‹äºŒç¬¬ä¸€å‘¨</a></li>
<li><a href="https://www.coursera.org/specializations/deep-learning" target="_blank" rel="external">Coursera - Deep Learning Specialization</a></li>
<li><a href="http://www.cnblogs.com/marsggbo/p/7470989.html" target="_blank" rel="external">DeepLearning.aiå­¦ä¹ ç¬”è®°æ±‡æ€»</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Neural Networks and Deep Learning (week4) - Deep Neural Networks]]></title>
      <url>http://shopee.ai/2018/07/15/deeplearning/Neural-Networks-and-Deep-Learning-week4/</url>
      <content type="html"><![CDATA[<p>æœ¬å‘¨é‡ç‚¹ä»»åŠ¡æ˜¯ä½¿ç”¨Pythonè¦å®ç°ä¸€ä¸ªä»»æ„å±‚çš„ç¥ç»ç½‘ç»œ, å¹¶åœ¨catæ•°æ®ä¸Šæµ‹è¯•.</p>
<a id="more"></a>
<h2 id="1-æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„å¸¸ç”¨ç¬¦å·å›é¡¾"><a href="#1-æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„å¸¸ç”¨ç¬¦å·å›é¡¾" class="headerlink" title="1. æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„å¸¸ç”¨ç¬¦å·å›é¡¾"></a>1. æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„å¸¸ç”¨ç¬¦å·å›é¡¾</h2><p>åœ¨ä¸Šä¸€å‘¨çš„å†…å®¹ä¸­, ä»‹ç»äº†ç¥ç»ç½‘ç»œä¸­çš„å¸¸ç”¨ç¬¦å·ä»¥åŠå„ç§å˜é‡çš„ç»´åº¦. ä¸æ¸…æ¥šçš„å¯ä»¥å›é¡¾ä¸Šå‘¨çš„ç¬”è®°å†…å®¹.</p>
<p><img src="/images/deeplearning/C1W4-1_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W4-2_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W4-3_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W4-4_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W4-5_1.png" width="750"></p>
<h2 id="2-Intuition-about-deep-representation"><a href="#2-Intuition-about-deep-representation" class="headerlink" title="2. Intuition about deep representation"></a>2. Intuition about deep representation</h2><p>å…³äºæ·±åº¦ç¥ç»ç½‘ç»œç›´è§‚åœ°è§£é‡Šè¿™éƒ¨åˆ†ç¬”è®°æš‚ç•¥, è¯·ç›´æ¥è§‚çœ‹è¯¾ç¨‹è§†é¢‘å†…å®¹: Why deep representation?.</p>
<p><img src="/images/deeplearning/C1W4-6_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W4-7_1.png" width="750"></p>
<h2 id="3-æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„å‰å‘-åå‘ä¼ æ’­"><a href="#3-æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„å‰å‘-åå‘ä¼ æ’­" class="headerlink" title="3. æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„å‰å‘/åå‘ä¼ æ’­"></a>3. æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„å‰å‘/åå‘ä¼ æ’­</h2><p>åœ¨ç¬¬ä¸‰å‘¨çš„ç¬”è®°ä¸­è¯¦ç»†ä»‹ç»äº†ç¥ç»ç½‘ç»œçš„å‰å‘/åå‘ä¼ æ’­, è¿™é‡Œå®Œå…¨å¥—ç”¨, åªæ˜¯å¤šäº†å±‚æ•°è€Œå·². </p>
<blockquote>
<p>éœ€è¦å†è¯¦ç»†äº†è§£æ‰‹æ¨çš„åŒå­¦å¯ä»¥ä»”ç»†ç ”ç©¶ä¸Šå‘¨çš„ç¬”è®°å†…å®¹</p>
</blockquote>
<p><img src="/images/deeplearning/C1W4-8_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W4-9_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W4-10_1.png" width="750"></p>
<h2 id="4-å‚æ•°ä¸è¶…å‚æ•°"><a href="#4-å‚æ•°ä¸è¶…å‚æ•°" class="headerlink" title="4. å‚æ•°ä¸è¶…å‚æ•°"></a>4. å‚æ•°ä¸è¶…å‚æ•°</h2><p>åœ¨ç¥ç»ç½‘ç»œä¸­å‚æ•°æŒ‡çš„æ˜¯ $W$, $b$, è¿™ä¸¤ä¸ªå‚æ•°æ˜¯é€šè¿‡æ¢¯åº¦ä¸‹é™ç®—æ³•ä¸æ–­ä¼˜åŒ–çš„. è€Œè¶…å‚æ•°æŒ‡çš„æ˜¯å­¦ä¹ ç‡, è¿­ä»£æ¬¡æ•°, å†³å®šç¥ç»ç½‘ç»œç»“æ„çš„å‚æ•°ä»¥åŠæ¿€æ´»å‡½æ•°çš„é€‰æ‹©ç­‰ç­‰, åœ¨åé¢æˆ‘ä»¬è¿˜ä¼šæåˆ° momentum, minibatch size, regularizationç­‰ç­‰. è¿™äº›éƒ½å±äºè¶…å‚æ•°, éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è®¾å®š.</p>
<p><img src="/images/deeplearning/C1W4-11_1.png" width="750"></p>
<blockquote>
<p>è¿™äº›è¶…å‚æ•°ä¹Ÿå†³å®šäº†æœ€ç»ˆçš„å‚æ•° $W$, $b$. ä¸åŒçš„è¶…å‚æ•°çš„é€‰æ‹©ä¼šå¯¼è‡´æ¨¡å‹å¾ˆå¤§çš„å·®åˆ«. </p>
<p>æ‰€ä»¥è¶…å‚æ•°çš„é€‰æ‹©ä¹Ÿéå¸¸é‡è¦ (åé¢çš„è¯¾ç¨‹ä¼šè®²è§£å¦‚ä½•é€‰æ‹©è¶…å‚æ•°).</p>
</blockquote>
<p><img src="/images/deeplearning/C1W4-12_1.png" width="750"></p>
<h2 id="5-ä½¿ç”¨Pythonå®ç°æ·±åº¦ç¥ç»ç½‘ç»œ"><a href="#5-ä½¿ç”¨Pythonå®ç°æ·±åº¦ç¥ç»ç½‘ç»œ" class="headerlink" title="5. ä½¿ç”¨Pythonå®ç°æ·±åº¦ç¥ç»ç½‘ç»œ"></a>5. ä½¿ç”¨Pythonå®ç°æ·±åº¦ç¥ç»ç½‘ç»œ</h2><p>DeepNeuralNetwork.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid</span><span class="params">(z)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.</span> / (<span class="number">1.</span>+np.exp(-z))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">relu</span><span class="params">(Z)</span>:</span></span><br><span class="line">    A = np.maximum(<span class="number">0</span>,Z)</span><br><span class="line">    <span class="keyword">return</span> A</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">leaky_relu</span><span class="params">(Z)</span>:</span></span><br><span class="line">    A = np.maximum(<span class="number">0</span>,Z)</span><br><span class="line">    A[Z &lt; <span class="number">0</span>] = <span class="number">0.01</span> * Z</span><br><span class="line">    <span class="keyword">return</span> A</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DeepNeuralNetwork</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, layers_dim, activations)</span>:</span></span><br><span class="line">        <span class="comment"># assert (layers_dim[-1] == 1)</span></span><br><span class="line">        <span class="comment"># assert (activations[-1] == 'sigmoid')</span></span><br><span class="line">        <span class="comment"># assert (len(activations) == len(layers_dims)-1)</span></span><br><span class="line">        np.random.seed(<span class="number">1</span>)</span><br><span class="line">        self.layers_dim = layers_dim</span><br><span class="line">        self.__num_layers = len(layers_dim)</span><br><span class="line">        self.activations = activations</span><br><span class="line">        self.input_size = layers_dim[<span class="number">0</span>]</span><br><span class="line">        self.parameters = self.__parameters_initializer(layers_dim)</span><br><span class="line">        self.output_size = layers_dim[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__parameters_initializer</span><span class="params">(self, layers_dim)</span>:</span></span><br><span class="line">        <span class="comment"># special initialzer with np.sqrt(layers_dims[l-1])</span></span><br><span class="line">        L = len(layers_dim)</span><br><span class="line">        parameters = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> range(<span class="number">1</span>, L):</span><br><span class="line">            parameters[<span class="string">'W'</span>+str(l)] = np.random.randn(layers_dim[l], layers_dim[l<span class="number">-1</span>]) / np.sqrt(layers_dims[l<span class="number">-1</span>])</span><br><span class="line">            parameters[<span class="string">'b'</span>+str(l)] = np.zeros((layers_dim[l], <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">return</span> parameters</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__one_layer_forward</span><span class="params">(self, A_prev, W, b, activation)</span>:</span></span><br><span class="line">        Z = np.dot(W, A_prev) + b</span><br><span class="line">        <span class="keyword">if</span> activation == <span class="string">'sigmoid'</span>:</span><br><span class="line">            A = sigmoid(Z)</span><br><span class="line">        <span class="keyword">if</span> activation == <span class="string">'relu'</span>:</span><br><span class="line">            A = relu(Z)</span><br><span class="line">        <span class="keyword">if</span> activation == <span class="string">'leaky_relu'</span>:</span><br><span class="line">            A = leaky_relu(Z)</span><br><span class="line">        <span class="keyword">if</span> activation == <span class="string">'tanh'</span>:</span><br><span class="line">            A = np.tanh(Z)</span><br><span class="line">        cache = &#123;<span class="string">'Z'</span>: Z, <span class="string">'A'</span>: A&#125;</span><br><span class="line">        <span class="keyword">return</span> A, cache</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__forward_propagation</span><span class="params">(self, X)</span>:</span></span><br><span class="line">        caches = []</span><br><span class="line">        A_prev = X</span><br><span class="line">        caches.append(&#123;<span class="string">'A'</span>: A_prev&#125;)</span><br><span class="line">        <span class="comment"># forward propagation by laryer</span></span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> range(<span class="number">1</span>, len(self.layers_dim)):</span><br><span class="line">            W, b = self.parameters[<span class="string">'W'</span>+str(l)], self.parameters[<span class="string">'b'</span>+str(l)]</span><br><span class="line">            A_prev, cache = self.__one_layer_forward(A_prev, W, b, self.activations[l<span class="number">-1</span>])</span><br><span class="line">            caches.append(cache)</span><br><span class="line">        AL = caches[<span class="number">-1</span>][<span class="string">'A'</span>]</span><br><span class="line">        <span class="keyword">return</span> AL, caches</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__compute_cost</span><span class="params">(self, AL, Y)</span>:</span></span><br><span class="line">        m = Y.shape[<span class="number">1</span>]</span><br><span class="line">        cost = -np.sum(Y*np.log(AL) + (<span class="number">1</span>-Y)*np.log(<span class="number">1</span>-AL)) / m</span><br><span class="line">        <span class="keyword">return</span> cost</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cost_function</span><span class="params">(self, X, Y)</span>:</span></span><br><span class="line">        <span class="comment"># use the result from forward propagation and the label Y to compute cost</span></span><br><span class="line">        <span class="keyword">assert</span> (self.input_size == X.shape[<span class="number">0</span>])</span><br><span class="line">        AL, _ = self.__forward_propagation(X)</span><br><span class="line">        <span class="keyword">return</span> self.__compute_cost(AL, Y)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sigmoid_backward</span><span class="params">(self, dA, Z)</span>:</span></span><br><span class="line">        s = sigmoid(Z)</span><br><span class="line">        dZ = dA * s*(<span class="number">1</span>-s)</span><br><span class="line">        <span class="keyword">return</span> dZ</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">relu_backward</span><span class="params">(self, dA, Z)</span>:</span></span><br><span class="line">        dZ = np.array(dA, copy=<span class="keyword">True</span>)</span><br><span class="line">        dZ[Z &lt;= <span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> dZ</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">leaky_relu_backward</span><span class="params">(self, dA, Z)</span>:</span></span><br><span class="line">        dZ = np.array(dA, copy=<span class="keyword">True</span>)</span><br><span class="line">        dZ[Z &lt;= <span class="number">0</span>] = <span class="number">0.01</span></span><br><span class="line">        <span class="keyword">return</span> dZ</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tanh_backward</span><span class="params">(self, dA, Z)</span>:</span></span><br><span class="line">        s = np.tanh(Z)</span><br><span class="line">        dZ = <span class="number">1</span> - s*s</span><br><span class="line">        <span class="keyword">return</span> dZ</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__linear_backward</span><span class="params">(self, dZ, A_prev, W)</span>:</span></span><br><span class="line">        <span class="comment"># assert(dZ.shape[0] == W.shape[0])</span></span><br><span class="line">        <span class="comment"># assert(W.shape[1] == A_prev.shape[0])</span></span><br><span class="line">        m = A_prev.shape[<span class="number">1</span>]</span><br><span class="line">        dW = np.dot(dZ, A_prev.T) / m</span><br><span class="line">        db = np.sum(dZ, axis=<span class="number">1</span>, keepdims=<span class="keyword">True</span>) / m</span><br><span class="line">        dA_prev = np.dot(W.T, dZ)</span><br><span class="line">        <span class="keyword">return</span> dA_prev, dW, db</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__activation_backward</span><span class="params">(self, dA, Z, activation)</span>:</span></span><br><span class="line">        <span class="keyword">assert</span> (dA.shape == Z.shape)</span><br><span class="line">        <span class="keyword">if</span> activation == <span class="string">'sigmoid'</span>:</span><br><span class="line">            dZ = self.sigmoid_backward(dA, Z)</span><br><span class="line">        <span class="keyword">if</span> activation == <span class="string">'relu'</span>:</span><br><span class="line">            dZ = self.relu_backward(dA, Z)</span><br><span class="line">        <span class="keyword">if</span> activation == <span class="string">'leaky_relu'</span>:</span><br><span class="line">            dZ = self.leaky_relu_backward(dA, Z)</span><br><span class="line">        <span class="keyword">if</span> activation == <span class="string">'tanh'</span>:</span><br><span class="line">            dZ = self.tanh_backward(dA, Z)</span><br><span class="line">        <span class="keyword">return</span> dZ</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__backward_propagation</span><span class="params">(self, caches, Y)</span>:</span></span><br><span class="line">        m = Y.shape[<span class="number">1</span>]</span><br><span class="line">        L = self.__num_layers</span><br><span class="line">        grads = &#123;&#125;</span><br><span class="line">        <span class="comment"># backward propagate last layer</span></span><br><span class="line">        AL, A_prev = caches[L<span class="number">-1</span>][<span class="string">'A'</span>], caches[L<span class="number">-2</span>][<span class="string">'A'</span>]</span><br><span class="line">        dAL =  - (Y/AL - (<span class="number">1</span>-Y)/(<span class="number">1</span>-AL))</span><br><span class="line">        grads[<span class="string">'dZ'</span>+str(L<span class="number">-1</span>)] = self.__activation_backward(dAL, caches[L<span class="number">-1</span>][<span class="string">'Z'</span>], self.activations[<span class="number">-1</span>])</span><br><span class="line">        grads[<span class="string">'dA'</span>+str(L<span class="number">-2</span>)], \</span><br><span class="line">        grads[<span class="string">'dW'</span>+str(L<span class="number">-1</span>)], \</span><br><span class="line">        grads[<span class="string">'db'</span>+str(L<span class="number">-1</span>)] = self.__linear_backward(grads[<span class="string">'dZ'</span>+str(L<span class="number">-1</span>)],</span><br><span class="line">                                                      A_prev, self.parameters[<span class="string">'W'</span>+str(L<span class="number">-1</span>)])</span><br><span class="line">        <span class="comment"># backward propagate by layer</span></span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> reversed(range(<span class="number">1</span>, L<span class="number">-1</span>)):</span><br><span class="line">            grads[<span class="string">'dZ'</span>+str(l)] = self.__activation_backward(grads[<span class="string">'dA'</span>+str(l)],</span><br><span class="line">                                                            caches[l][<span class="string">'Z'</span>],</span><br><span class="line">                                                            self.activations[l<span class="number">-1</span>])</span><br><span class="line">            A_prev = caches[l<span class="number">-1</span>][<span class="string">'A'</span>]</span><br><span class="line">            grads[<span class="string">'dA'</span>+str(l<span class="number">-1</span>)], \</span><br><span class="line">            grads[<span class="string">'dW'</span>+str(l)], \</span><br><span class="line">            grads[<span class="string">'db'</span>+str(l)] = self.__linear_backward(grads[<span class="string">'dZ'</span>+str(l)], A_prev, self.parameters[<span class="string">'W'</span>+str(l)])</span><br><span class="line">        <span class="keyword">return</span> grads</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__update_parameters</span><span class="params">(self, grads, learning_rate)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> range(<span class="number">1</span>, self.__num_layers):</span><br><span class="line">            <span class="comment"># assert (self.parameters['W'+str(l)].shape == grads['dW'+str(l)].shape)</span></span><br><span class="line">            <span class="comment"># assert (self.parameters['b'+str(l)].shape == grads['db'+str(l)].shape)</span></span><br><span class="line">            self.parameters[<span class="string">'W'</span>+str(l)] -= learning_rate * grads[<span class="string">'dW'</span>+str(l)]</span><br><span class="line">            self.parameters[<span class="string">'b'</span>+str(l)] -= learning_rate * grads[<span class="string">'db'</span>+str(l)]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span><span class="params">(self, X, Y, num_iterations, learning_rate, print_cost=False, print_num=<span class="number">100</span>)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(num_iterations):</span><br><span class="line">            <span class="comment"># forward propagation</span></span><br><span class="line">            AL, caches = self.__forward_propagation(X)</span><br><span class="line">            <span class="comment"># compute cost</span></span><br><span class="line">            cost = self.__compute_cost(AL, Y)</span><br><span class="line">            <span class="comment"># backward propagation</span></span><br><span class="line">            grads = self.__backward_propagation(caches, Y)</span><br><span class="line">            <span class="comment"># update parameters</span></span><br><span class="line">            self.__update_parameters(grads, learning_rate)</span><br><span class="line">            <span class="comment"># print cost</span></span><br><span class="line">            <span class="keyword">if</span> i % print_num == <span class="number">0</span> <span class="keyword">and</span> print_cost:</span><br><span class="line">                    <span class="keyword">print</span> (<span class="string">"Cost after iteration %i: %f"</span> %(i, cost))</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict_prob</span><span class="params">(self, X)</span>:</span></span><br><span class="line">        A, _ = self.__forward_propagation(X)</span><br><span class="line">        <span class="keyword">return</span> A</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(self, X, threshold=<span class="number">0.5</span>)</span>:</span></span><br><span class="line">        pred_prob = self.predict_prob(X)</span><br><span class="line">        threshold_func = np.vectorize(<span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x &gt; threshold <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line">        Y_prediction = threshold_func(pred_prob)</span><br><span class="line">        <span class="keyword">return</span> Y_prediction</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">accuracy_score</span><span class="params">(self, X, Y)</span>:</span></span><br><span class="line">        pred = self.predict(X)</span><br><span class="line">        <span class="keyword">return</span> len(Y[pred == Y]) / Y.shape[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>main.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> h5py</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> scipy</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> ndimage</span><br><span class="line"><span class="keyword">from</span> dnn_app_utils_v2 <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br><span class="line">plt.rcParams[<span class="string">'figure.figsize'</span>] = (<span class="number">5.0</span>, <span class="number">4.0</span>) <span class="comment"># set default size of plots</span></span><br><span class="line">plt.rcParams[<span class="string">'image.interpolation'</span>] = <span class="string">'nearest'</span></span><br><span class="line">plt.rcParams[<span class="string">'image.cmap'</span>] = <span class="string">'gray'</span></span><br><span class="line"></span><br><span class="line">%load_ext autoreload</span><br><span class="line">%autoreload <span class="number">2</span></span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">train_x_orig, train_y, test_x_orig, test_y, classes = load_data()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Explore your dataset</span></span><br><span class="line">m_train = train_x_orig.shape[<span class="number">0</span>]</span><br><span class="line">num_px = train_x_orig.shape[<span class="number">1</span>]</span><br><span class="line">m_test = test_x_orig.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Number of training examples: "</span> + str(m_train))</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Number of testing examples: "</span> + str(m_test))</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"Each image is of size: ("</span> + str(num_px) + <span class="string">", "</span> + str(num_px) + <span class="string">", 3)"</span>)</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"train_x_orig shape: "</span> + str(train_x_orig.shape))</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"train_y shape: "</span> + str(train_y.shape))</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"test_x_orig shape: "</span> + str(test_x_orig.shape))</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"test_y shape: "</span> + str(test_y.shape))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reshape the training and test examples</span></span><br><span class="line">train_x_flatten = train_x_orig.reshape(train_x_orig.shape[<span class="number">0</span>], <span class="number">-1</span>).T   <span class="comment"># The "-1" makes reshape flatten the remaining dimensions</span></span><br><span class="line">test_x_flatten = test_x_orig.reshape(test_x_orig.shape[<span class="number">0</span>], <span class="number">-1</span>).T</span><br><span class="line"></span><br><span class="line"><span class="comment"># Standardize data to have feature values between 0 and 1.</span></span><br><span class="line">train_x = train_x_flatten/<span class="number">255.</span></span><br><span class="line">test_x = test_x_flatten/<span class="number">255.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"train_x's shape: "</span> + str(train_x.shape))</span><br><span class="line"><span class="keyword">print</span> (<span class="string">"test_x's shape: "</span> + str(test_x.shape))</span><br><span class="line"><span class="comment"># Please note that the above code is from the programming assignment</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> DeepNeuralNetwork</span><br><span class="line">layers_dims = (<span class="number">12288</span>, <span class="number">20</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># layers_dims = (12288, 10, 1)</span></span><br><span class="line"><span class="comment"># layers_dims = [12288, 20, 7, 5, 1] #  5-layer model</span></span><br><span class="line">activations = [<span class="string">'relu'</span>, <span class="string">'relu'</span>, <span class="string">'relu'</span>,<span class="string">'sigmoid'</span>]</span><br><span class="line">num_iter = <span class="number">2500</span></span><br><span class="line">learning_rate = <span class="number">0.0075</span></span><br><span class="line"></span><br><span class="line">clf = DeepNeuralNetwork(layers_dims, activations)\</span><br><span class="line">            .fit(train_x, train_y, num_iter, learning_rate, <span class="keyword">True</span>, <span class="number">100</span>)</span><br><span class="line">print(<span class="string">'train accuracy: &#123;:.2f&#125;%'</span>.format(clf.accuracy_score(train_x, train_y)*<span class="number">100</span>))</span><br><span class="line">print(<span class="string">'test accuracy: &#123;:.2f&#125;%'</span>.format(clf.accuracy_score(test_x, test_y)*<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="comment"># Cost after iteration 0: 0.771749</span></span><br><span class="line"><span class="comment"># Cost after iteration 100: 0.672053</span></span><br><span class="line"><span class="comment"># Cost after iteration 200: 0.648263</span></span><br><span class="line"><span class="comment"># Cost after iteration 300: 0.611507</span></span><br><span class="line"><span class="comment"># Cost after iteration 400: 0.567047</span></span><br><span class="line"><span class="comment"># Cost after iteration 500: 0.540138</span></span><br><span class="line"><span class="comment"># Cost after iteration 600: 0.527930</span></span><br><span class="line"><span class="comment"># Cost after iteration 700: 0.465477</span></span><br><span class="line"><span class="comment"># Cost after iteration 800: 0.369126</span></span><br><span class="line"><span class="comment"># Cost after iteration 900: 0.391747</span></span><br><span class="line"><span class="comment"># Cost after iteration 1000: 0.315187</span></span><br><span class="line"><span class="comment"># Cost after iteration 1100: 0.272700</span></span><br><span class="line"><span class="comment"># Cost after iteration 1200: 0.237419</span></span><br><span class="line"><span class="comment"># Cost after iteration 1300: 0.199601</span></span><br><span class="line"><span class="comment"># Cost after iteration 1400: 0.189263</span></span><br><span class="line"><span class="comment"># Cost after iteration 1500: 0.161189</span></span><br><span class="line"><span class="comment"># Cost after iteration 1600: 0.148214</span></span><br><span class="line"><span class="comment"># Cost after iteration 1700: 0.137775</span></span><br><span class="line"><span class="comment"># Cost after iteration 1800: 0.129740</span></span><br><span class="line"><span class="comment"># Cost after iteration 1900: 0.121225</span></span><br><span class="line"><span class="comment"># Cost after iteration 2000: 0.113821</span></span><br><span class="line"><span class="comment"># Cost after iteration 2100: 0.107839</span></span><br><span class="line"><span class="comment"># Cost after iteration 2200: 0.102855</span></span><br><span class="line"><span class="comment"># Cost after iteration 2300: 0.100897</span></span><br><span class="line"><span class="comment"># Cost after iteration 2400: 0.092878</span></span><br><span class="line"><span class="comment"># train accuracy: 98.56%</span></span><br><span class="line"><span class="comment"># test accuracy: 80.00%</span></span><br></pre></td></tr></table></figure>
<h2 id="6-æœ¬å‘¨å†…å®¹å›é¡¾"><a href="#6-æœ¬å‘¨å†…å®¹å›é¡¾" class="headerlink" title="6. æœ¬å‘¨å†…å®¹å›é¡¾"></a>6. æœ¬å‘¨å†…å®¹å›é¡¾</h2><ul>
<li>æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„å‰å‘/åå‘ä¼ æ’­</li>
<li>å‚æ•°ä¸è¶…å‚æ•°</li>
<li>ä½¿ç”¨Pythonå®ç°æ·±åº¦ç¥ç»ç½‘ç»œ</li>
</ul>
<h2 id="7-Reference"><a href="#7-Reference" class="headerlink" title="7. Reference"></a>7. Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://daniellaah.github.io/2017/deeplearning-ai-Neural-Networks-and-Deep-Learning-week4.html" target="_blank" rel="external">deeplearning.ai ä¸“é¡¹è¯¾ç¨‹ä¸€ç¬¬å››å‘¨</a></li>
<li><a href="https://www.coursera.org/specializations/deep-learning" target="_blank" rel="external">Coursera - Deep Learning Specialization</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Neural Networks and Deep Learning (week3) - Shallow Neural Networks]]></title>
      <url>http://shopee.ai/2018/07/14/deeplearning/Neural-Networks-and-Deep-Learning-week3/</url>
      <content type="html"><![CDATA[<p>æ­£å¼è¿›å…¥ç¥ç»ç½‘ç»œçš„å­¦ä¹ . å½“ç„¶, æˆ‘ä»¬å…ˆä»ç®€å•çš„åªæœ‰ä¸€ä¸ªéšè—å±‚çš„ç¥ç»ç½‘ç»œå¼€å§‹ã€‚</p>
<p>åœ¨å­¦ä¹ å®Œæœ¬å‘¨å†…å®¹ä¹‹å, æˆ‘ä»¬å°†ä¼šä½¿ç”¨ Python å®ç°ä¸€ä¸ªå•ä¸ªéšè—å±‚çš„ç¥ç»ç½‘ç»œã€‚</p>
<a id="more"></a>
<h2 id="1-å¸¸ç”¨ç¬¦å·ä¸åŸºæœ¬æ¦‚å¿µ"><a href="#1-å¸¸ç”¨ç¬¦å·ä¸åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. å¸¸ç”¨ç¬¦å·ä¸åŸºæœ¬æ¦‚å¿µ"></a>1. å¸¸ç”¨ç¬¦å·ä¸åŸºæœ¬æ¦‚å¿µ</h2><p><img src="/images/deeplearning/C1W3-1_1.png" width="750"></p>
<blockquote>
<p>è¯¥ç¥ç»ç½‘ç»œå®Œå…¨å¯ä»¥ä½¿ç”¨ä¸Šä¸€å‘¨æ‰€è®²çš„è®¡ç®—å›¾æ¥è¡¨ç¤º, å’Œ $LR$ è®¡ç®—å›¾çš„åŒºåˆ«ä»…ä»…åœ¨äºå¤šäº†ä¸€ä¸ª $z$ å’Œ $a$ çš„è®¡ç®—è€Œå·². </p>
<p>å¦‚æœä½ å·²ç»å®Œå…¨æŒæ¡äº†ä¸Šä¸€å‘¨çš„å†…å®¹, é‚£ä¹ˆå…¶å®ä½ å·²ç»çŸ¥é“äº†ç¥ç»ç½‘ç»œçš„å‰å‘ä¼ æ’­, åå‘ä¼ æ’­(æ¢¯åº¦è®¡ç®—)ç­‰ç­‰.</p>
<p>è¦æ³¨æ„çš„æ˜¯å„ç§å‚æ•°, ä¸­é—´å˜é‡ $(a, z)$ çš„ç»´åº¦é—®é¢˜. å…³äºç¥ç»ç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µ, è¿™é‡Œå°±ä¸èµ˜è¿°äº†. è§ä¸‹å›¾å›é¡¾ä¸€ä¸‹:</p>
</blockquote>
<p><img src="/images/deeplearning/C1W3-2_1.png" width="750"></p>
<h2 id="2-ç¥ç»ç½‘ç»œä¸­çš„å‰å‘ä¼ æ’­"><a href="#2-ç¥ç»ç½‘ç»œä¸­çš„å‰å‘ä¼ æ’­" class="headerlink" title="2. ç¥ç»ç½‘ç»œä¸­çš„å‰å‘ä¼ æ’­"></a>2. ç¥ç»ç½‘ç»œä¸­çš„å‰å‘ä¼ æ’­</h2><blockquote>
<p>æˆ‘ä»¬å…ˆä»¥ä¸€ä¸ªè®­ç»ƒæ ·æœ¬æ¥çœ‹ç¥ç»ç½‘ç»œä¸­çš„å‰å‘ä¼ æ’­.<br>æˆ‘ä»¬åªçœ‹è¿™ä¸ªç¥ç»ç½‘ç»œä¸­çš„è¾“å…¥å±‚å’Œéšè—å±‚çš„ç¬¬ä¸€ä¸ªæ¿€æ´»å•å…ƒ(å¦‚ä¸‹å›¾å³è¾¹æ‰€ç¤º). å…¶å®è¿™å°±æ˜¯ä¸€ä¸ªLogistic Regression. </p>
<ol>
<li>ç¥ç»ç½‘ç»œä¸­è¾“å…¥å±‚å’Œéšè—å±‚ (ä¸çœ‹è¾“å‡ºå±‚), è¿™å°±ä¸å°±æ˜¯å››ä¸ªLRæ”¾åœ¨ä¸€èµ·å—? </li>
<li>åœ¨ LR ä¸­ $z$ å’Œ $a$ çš„è®¡ç®—æˆ‘ä»¬å·²ç»æŒæ¡äº†, é‚£ä¹ˆåœ¨ç¥ç»ç½‘ç»œä¸­ $z$ å’Œ $a$ åˆæ˜¯ä»€ä¹ˆå‘¢? </li>
</ol>
<p><strong>æˆ‘ä»¬è®°éšè—å±‚ç¬¬ä¸€ä¸ª $z$ ä¸º $z_1$, ç¬¬äºŒä¸ª $z$ è®°ä¸º $z_2$ ä»¥æ­¤ç±»æ¨</strong>.<br>åªè¦å°†è¿™å››ä¸ª $z$ çºµå‘å åŠ åœ¨ä¸€èµ·ç§°ä¸ºä¸€ä¸ª<strong><code>åˆ—å‘é‡</code> å³å¯å¾—åˆ°ç¥ç»ç½‘ç»œä¸­è¿™ä¸€å±‚çš„ $z$</strong> ($a$åŒç†).</p>
</blockquote>
<p><img src="/images/deeplearning/C1W3-3_1.png" width="750"></p>
<p>é‚£ä¹ˆè¿™ä¸€å±‚çš„ $w, b$ åˆæ˜¯å¦‚ä½•å¾—åˆ°çš„? åˆ«å¿˜äº†, å¯¹äºå‚æ•° $w$ æ¥è¯´, å®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªåˆ—é¡¹é‡, é‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•åšçºµå‘å åŠ çš„å‘¢? æˆ‘ä»¬åªéœ€è¦å°†å…¶è½¬ç½®å˜æˆä¸€ä¸ªæ¨ªå‘é‡, å†çºµå‘å åŠ å³å¯.</p>
<p><img src="/images/deeplearning/C1W3-4_1.png" width="750"></p>
<p>å¾—åˆ°éšè—å±‚çš„ $a$ ä¹‹å, æˆ‘ä»¬å¯ä»¥å°†å…¶è§†ä¸ºè¾“å…¥, ç°åªçœ‹ç¥ç»ç½‘ç»œçš„éšè—å±‚å’Œè¾“å‡ºå±‚, æˆ‘ä»¬å‘ç°è¿™ä¸å°±æ˜¯ä¸ª $LR$ å˜›.</p>
<p><img src="/images/deeplearning/C1W3-5_1.png" width="750"></p>
<p>è¿™é‡Œæ€»ç»“ä¸€ä¸‹å„ç§å˜é‡çš„ç»´åº¦ (æ³¨æ„: è¿™é‡Œæ˜¯é’ˆå¯¹ä¸€ä¸ªè®­ç»ƒæ ·æœ¬æ¥è¯´çš„, $n_L$ ä»£è¡¨çš„ $L$ å±‚çš„èŠ‚ç‚¹ä¸ªæ•°):</p>
<ul>
<li>$w.shape : (n_L, n_{(L-1)})$</li>
<li>$b.shape : (n_L, 1)$</li>
<li>$z.shape : (n_L, 1)$</li>
<li>$a.shape : (n_L, 1)$</li>
</ul>
<p>é‚£ä¹ˆå¦‚æœæœ‰ $m$ ä¸ªè®­ç»ƒæ ·æœ¬è¿™äº›å˜é‡çš„ç»´åº¦åˆæ˜¯æ€æ ·çš„å‘¢. æˆ‘ä»¬æ€è€ƒå“ªäº›å˜é‡çš„ç»´åº¦ä¼šéšç€æ ·æœ¬æ•°çš„å˜åŒ–è€Œå˜åŒ–. $w$ æ˜¯å‚æ•°æ˜¾ç„¶å®ƒçš„ç»´åº¦æ˜¯ä¸ä¼šå˜çš„. è€Œè¾“å…¥æ¯ä¸€ä¸ªæ ·æœ¬éƒ½ä¼šæœ‰ä¸€ä¸ª $z$ å’Œ $a$, è¿˜è®°å¾— $X$ çš„å½¢å¼å—? åŒæ ·åœ°, $Z$ å°±æ˜¯å°†æ¯ä¸ªæ ·æœ¬ç®—å‡ºæ¥çš„ $z$ æ¨ªå‘å åŠ (AåŒç†). å…·ä½“è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹å›¾:</p>
<p><img src="/images/deeplearning/C1W3-6_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W3-7_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W3-8_1.png" width="750"></p>
<h2 id="3-ç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°"><a href="#3-ç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°" class="headerlink" title="3. ç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°"></a>3. ç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°</h2><p>å››ç§å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°: Sigmoid, Tanh, ReLU, Leaky ReLU.</p>
<p>å…¶ä¸­ sigmoid æˆ‘ä»¬å·²ç»è§è¿‡äº†, å®ƒçš„è¾“å‡ºå¯ä»¥çœ‹æˆä¸€ä¸ªæ¦‚ç‡å€¼, å¾€å¾€ç”¨åœ¨è¾“å‡ºå±‚. <strong>å¯¹äºä¸­é—´å±‚æ¥è¯´, å¾€å¾€æ˜¯<code>ReLU</code>çš„æ•ˆæœæœ€å¥½.</strong></p>
<blockquote>
<p>Tanh æ•°æ®å¹³å‡å€¼ä¸º 0ï¼Œå…·æœ‰æ•°æ®ä¸­å¿ƒåŒ–çš„æ•ˆæœï¼Œå‡ ä¹åœ¨ä»»ä½•åœºåˆéƒ½ä¼˜äº Sigmoid</p>
</blockquote>
<p><img src="/images/deeplearning/C1W3-9_1.png" width="750"></p>
<p>ä»¥ä¸Šæ¿€æ´»å‡½æ•°çš„å¯¼æ•°è¯·è‡ªè¡Œåœ¨è‰ç¨¿çº¸ä¸Šæ¨å¯¼.</p>
<p><img src="/images/deeplearning/C1W3-10_1.png" width="750"></p>
<blockquote>
<p>derivative of <strong><code>sigmoid</code></strong> activation function</p>
</blockquote>
<p><img src="/images/deeplearning/C1W3-11_1.png" width="750"></p>
<blockquote>
<p>derivative of <strong><code>tanh</code></strong> activation function</p>
</blockquote>
<p><img src="/images/deeplearning/C1W3-12_1.png" width="750"></p>
<blockquote>
<p>derivative of <strong><code>ReLU and Leaky ReLU</code></strong> activation function</p>
</blockquote>
<p>ä¸ºä»€ä¹ˆéœ€è¦æ¿€æ´»å‡½æ•°? å¦‚æœæ²¡æœ‰æ¿€æ´»å‡½æ•°, é‚£ä¹ˆä¸è®ºå¤šå°‘å±‚çš„ç¥ç»ç½‘ç»œéƒ½åªç›¸å½“äºä¸€ä¸ªLR. è¯æ˜å¦‚ä¸‹:</p>
<blockquote>
<p><strong>it turns out that if you use a linear activation function or alternatively if you donâ€™t have an activation function, then no matter how many layers your neural network has, always doing just computing a linear activation function, so you might as well not have any hidden layers.</strong></p>
<p>so unless you throw a non-linearity in there, then youâ€™re not computing more interesting functions.</p>
</blockquote>
<p><img src="/images/deeplearning/C1W3-13_1.png" width="750"></p>
<blockquote>
<p>ä½ å¯ä»¥åœ¨éšè—å±‚ç”¨ tanhï¼Œè¾“å‡ºå±‚ç”¨ sigmoidï¼Œè¯´æ˜ä¸åŒå±‚çš„æ¿€æ´»å‡½æ•°å¯ä»¥ä¸ä¸€æ ·ã€‚</p>
<p>ç°å®æƒ…å†µæ˜¯ : <strong>the tanh is pretty much stricly superior. never use sigmoid</strong></p>
</blockquote>
<p><strong>ReLU</strong> (rectified linear unit çŸ«æ­£çº¿æ€§å•å…ƒ)</p>
<blockquote>
<p>tanh å’Œ sigmoid éƒ½æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯ z éå¸¸å¤§æˆ–è€…éå¸¸å°ï¼Œå‡½æ•°çš„æ–œç‡(å¯¼æ•°æ¢¯åº¦)å°±ä¼šéå¸¸å°, æ¢¯åº¦ä¸‹é™å¾ˆæ…¢.</p>
<p><strong>the slope of the function you know ends up being close to zero, and so this can slow down gradient descent</strong></p>
<p><strong>ReLU (rectified linear unit) is well</strong>, z = 0 çš„æ—¶å€™ï¼Œä½ å¯ä»¥ç»™å¯¼æ•°èµ‹å€¼ä¸º 0 or 1ï¼Œè™½ç„¶è¿™ä¸ªç‚¹æ˜¯ä¸å¯å¾®çš„. ä½†<strong>å®ç°</strong>æ²¡æœ‰å½±å“.</p>
<p>è™½ç„¶ z &lt; 0, çš„æ—¶å€™ï¼Œæ–œç‡ä¸º0ï¼Œ ä½†åœ¨å®è·µä¸­ï¼Œæœ‰è¶³å¤Ÿå¤šçš„éšè—å•å…ƒ ä»¤ z &gt; 0, å¯¹å¤§å¤šæ•°è®­ç»ƒæ ·æœ¬æ¥è¯´æ˜¯å¾ˆå¿«çš„.</p>
</blockquote>
<p>Notes:</p>
<blockquote>
<p>so the one place you might use as linear activation function, others usually in the output layer.</p>
</blockquote>
<h2 id="4-ç¥ç»ç½‘ç»œä¸­çš„åå‘ä¼ æ’­-back-propagation"><a href="#4-ç¥ç»ç½‘ç»œä¸­çš„åå‘ä¼ æ’­-back-propagation" class="headerlink" title="4. ç¥ç»ç½‘ç»œä¸­çš„åå‘ä¼ æ’­ back propagation"></a>4. ç¥ç»ç½‘ç»œä¸­çš„åå‘ä¼ æ’­ back propagation</h2><blockquote>
<p>åå‘ä¼ æ’­æœ€ä¸»è¦çš„å°±æ˜¯è®¡ç®—æ¢¯åº¦, åœ¨ä¸Šä¸€å‘¨çš„å†…å®¹ä¸­, æˆ‘ä»¬å·²ç»çŸ¥é“äº†LRæ¢¯åº¦çš„è®¡ç®—. </p>
<p>åŒæ ·çš„æ–¹å¼, æˆ‘ä»¬ä½¿ç”¨<strong>è®¡ç®—å›¾</strong>æ¥è®¡ç®—<strong>ç¥ç»ç½‘ç»œä¸­çš„å„ç§æ¢¯åº¦</strong>.</p>
</blockquote>
<p><img src="/images/deeplearning/C1W3-14.png" width="750"></p>
<p>$$<br>dz^{[2]} = \frac{dL}{dz}= \frac{dL}{da^{[2]}}\frac{da^{[2]}}{dz^{[2]}}=a^{[2]}-y<br>$$</p>
<p>$$<br>dW^{[2]}=\frac{dL}{dW^{[2]}}=\frac{dL}{dz^{[2]}}\frac{dz^{[2]}}{dW^{[2]}}=dz^{[2]}a^{[1]}<br>$$</p>
<p>$$<br>db^{[2]}=\frac{dL}{db^{[2]}}=\frac{dL}{dz^{[2]}}\frac{dz^{[2]}}{db^{[2]}}=dz^{[2]}<br>$$</p>
<blockquote>
<p><strong>backward propagation :</strong></p>
</blockquote>
<p>$$<br>dz^{[1]} = \frac{dL}{dz^{[2]}}\frac{dz^{[2]}}{da^{[1]}}\frac{da^{[1]}}{dz^{[1]}}=W^{[2]T}dz^{[2]}*g^{[1]â€™}(z^{[1]})<br>$$</p>
<p>$$<br>dW^{[1]}=\frac{dL}{dW^{[1]}}=\frac{dL}{dz^{[1]}}\frac{dz^{[1]}}{dW^{[1]}}=dz^{[1]}x^T<br>$$</p>
<p>$$<br>db^{[1]}=\frac{dL}{db^{[1]}}=\frac{dL}{dz^{[1]}}\frac{dz^{[1]}}{db^{[1]}}=dz^{[1]}<br>$$</p>
<blockquote>
<p>Notes: $\frac{dL}{dz^{[2]}} = dz^{[2]}$ ï¼Œ $\frac{dz^{[2]}}{da^{[1]}} = W^{[2]}$ ï¼Œ $\frac{da^{[1]}}{dz^{[1]}}=g^{[1]â€™}(z^{[1]})$</p>
</blockquote>
<p>ä¸‹å›¾å³è¾¹ä¸ºåœ¨$m$ä¸ªè®­ç»ƒæ ·æœ¬ä¸Šçš„å‘é‡åŒ–è¡¨è¾¾:</p>
<p><img src="/images/deeplearning/C1W3-15_1.png" width="750"></p>
<blockquote>
<p>Notes: </p>
<ul>
<li>$n^[0]$ = input features</li>
<li>$n^[1]$ = hidden units</li>
<li>$n^[2]$ = output units</li>
</ul>
</blockquote>
<h2 id="5-ç¥ç»ç½‘ç»œä¸­çš„å‚æ•°åˆå§‹åŒ–"><a href="#5-ç¥ç»ç½‘ç»œä¸­çš„å‚æ•°åˆå§‹åŒ–" class="headerlink" title="5. ç¥ç»ç½‘ç»œä¸­çš„å‚æ•°åˆå§‹åŒ–"></a>5. ç¥ç»ç½‘ç»œä¸­çš„å‚æ•°åˆå§‹åŒ–</h2><p>åœ¨ LR ä¸­æˆ‘ä»¬çš„å‚æ•° $w$ åˆå§‹åŒ–ä¸º 0, å¦‚æœåœ¨ç¥ç»ç½‘ç»œä¸­ä¹Ÿæ˜¯ç”¨ç›¸åŒçš„åˆå§‹åŒ–, é‚£ä¹ˆä¸€ä¸ªéšè—å±‚çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ç›¸åŒçš„, ä¸è®ºè¿­ä»£å¤šå°‘æ¬¡. è¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„, æ‰€ä»¥æˆ‘ä»¬åº”è¯¥<font color="red"> <strong>éšæœºåœ°åˆå§‹åŒ–</strong></font> $w$ ä»è€Œè§£å†³è¿™ä¸ª sysmmetry breaking problem. ç ´åå¯¹ç§°é—®é¢˜</p>
<p><img src="/images/deeplearning/C1W3-16_1.png" width="750"></p>
<blockquote>
<p>å…·ä½“åˆå§‹åŒ–ä»£ç å¯å‚è§ä¸‹å›¾, å…¶ä¸­ <strong>ä¹˜ä»¥ 0.01</strong> æ˜¯ä¸ºäº†è®©å‚æ•° $w$ è¾ƒå°, åŠ é€Ÿæ¢¯åº¦ä¸‹é™ </p>
<p>å¦‚æ¿€æ´»å‡½æ•°ä¸º tanh æ—¶, è‹¥å‚æ•°è¾ƒå¤§åˆ™ $z$ ä¹Ÿè¾ƒå¤§, æ­¤æ—¶çš„æ¢¯åº¦æ¥è¿‘äº 0, æ›´æ–°ç¼“æ…¢. å¦‚ä¸æ˜¯ tanh or sigmoid åˆ™é—®é¢˜ä¸å¤§.</p>
<p>this is a relatively shallow neural network without too many hidden layers, so 0.01 maybe work ok.</p>
<p>finally it turns out that sometimes there can be better constants than 0.01.</p>
</blockquote>
<p><img src="/images/deeplearning/C1W3-17_1.png" width="750"></p>
<blockquote>
<p>$b$ å¹¶æ²¡æœ‰è¿™ä¸ª sysmmetry breaking problem, æ‰€ä»¥å¯ä»¥ $np.zeros((2, 1))$</p>
</blockquote>
<h2 id="6-ç”¨Pythonæ­å»ºç®€å•ç¥ç»ç½‘ç»œ"><a href="#6-ç”¨Pythonæ­å»ºç®€å•ç¥ç»ç½‘ç»œ" class="headerlink" title="6. ç”¨Pythonæ­å»ºç®€å•ç¥ç»ç½‘ç»œ"></a>6. ç”¨Pythonæ­å»ºç®€å•ç¥ç»ç½‘ç»œ</h2><p>ä½¿ç”¨Python+Numpyå®ç°ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œ. ä»¥ä¸‹ä¸ºå‚è€ƒä»£ç </p>
<p>SimpleNeuralNetwork.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid</span><span class="params">(z)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.</span> / (<span class="number">1.</span>+np.exp(-z))</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleNeuralNetwork</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># simple neural network with one hidden layer</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, input_size, hidden_layer_size)</span>:</span></span><br><span class="line">        self.paramters = self.__parameter_initailizer(input_size, hidden_layer_size)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__parameter_initailizer</span><span class="params">(self, n_x, n_h)</span>:</span></span><br><span class="line">        <span class="comment"># W cannot be initialized with zeros</span></span><br><span class="line">        W1 = np.random.randn(n_h, n_x) * <span class="number">0.01</span></span><br><span class="line">        b1 = np.zeros((n_h, <span class="number">1</span>))</span><br><span class="line">        W2 = np.random.randn(<span class="number">1</span>, n_h) * <span class="number">0.01</span></span><br><span class="line">        b2 = np.zeros((<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">'W1'</span>: W1,<span class="string">'b1'</span>: b1,<span class="string">'W2'</span>: W2,<span class="string">'b2'</span>: b2&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__forward_propagation</span><span class="params">(self, X)</span>:</span></span><br><span class="line">        W1 = self.paramters[<span class="string">'W1'</span>]</span><br><span class="line">        b1 = self.paramters[<span class="string">'b1'</span>]</span><br><span class="line">        W2 = self.paramters[<span class="string">'W2'</span>]</span><br><span class="line">        b2 = self.paramters[<span class="string">'b2'</span>]</span><br><span class="line">        <span class="comment"># forward propagation</span></span><br><span class="line">        Z1 = np.dot(W1, X) + b1</span><br><span class="line">        A1 = np.tanh(Z1)</span><br><span class="line">        Z2 = np.dot(W2, A1) + b2</span><br><span class="line">        A2 = sigmoid(Z2)</span><br><span class="line">        cache = &#123;<span class="string">'Z1'</span>: Z1,<span class="string">'A1'</span>: A1,<span class="string">'Z2'</span>: Z2,<span class="string">'A2'</span>: A2&#125;</span><br><span class="line">        <span class="keyword">return</span> A2, cache</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__compute_cost</span><span class="params">(self, A2, Y)</span>:</span></span><br><span class="line">        m = A2.shape[<span class="number">1</span>]</span><br><span class="line">        cost = -np.sum(Y*np.log(A2) + (<span class="number">1</span>-Y)*np.log(<span class="number">1</span>-A2)) / m</span><br><span class="line">        <span class="keyword">return</span> cost</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cost_function</span><span class="params">(self, X, Y)</span>:</span></span><br><span class="line">        <span class="comment"># use the result from forward propagation and the label Y to compute cost</span></span><br><span class="line">        A2, cache = self.__forward_propagation(X)</span><br><span class="line">        cost = self.__compute_cost(A2, Y)</span><br><span class="line">        <span class="keyword">return</span> cost</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__backward_propagation</span><span class="params">(self, cache, Y)</span>:</span></span><br><span class="line">        A1, A2 = cache[<span class="string">'A1'</span>], cache[<span class="string">'A2'</span>]</span><br><span class="line">        W2 = self.paramters[<span class="string">'W2'</span>]</span><br><span class="line">        m = X.shape[<span class="number">1</span>]</span><br><span class="line">        <span class="comment"># backward propagation computes gradients</span></span><br><span class="line">        dZ2 = A2 - Y</span><br><span class="line">        dW2 = np.dot(dZ2, A1.T) / m</span><br><span class="line">        db2 = np.sum(dZ2, axis=<span class="number">1</span>, keepdims=<span class="keyword">True</span>) / m</span><br><span class="line">        dZ1 = np.dot(W2.T, dZ2) * (<span class="number">1</span> - np.power(A1, <span class="number">2</span>))</span><br><span class="line">        dW1 = np.dot(dZ1, X.T) / m</span><br><span class="line">        db1 = np.sum(dZ1, axis=<span class="number">1</span>, keepdims=<span class="keyword">True</span>) / m</span><br><span class="line">        grads = &#123;<span class="string">'dW1'</span>: dW1,<span class="string">'db1'</span>: db1,<span class="string">'dW2'</span>: dW2,<span class="string">'db2'</span>: db2&#125;</span><br><span class="line">        <span class="keyword">return</span> grads</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__update_parameters</span><span class="params">(self, grads, learning_rate)</span>:</span></span><br><span class="line">        self.paramters[<span class="string">'W1'</span>] -= learning_rate * grads[<span class="string">'dW1'</span>]</span><br><span class="line">        self.paramters[<span class="string">'b1'</span>] -= learning_rate * grads[<span class="string">'db1'</span>]</span><br><span class="line">        self.paramters[<span class="string">'W2'</span>] -= learning_rate * grads[<span class="string">'dW2'</span>]</span><br><span class="line">        self.paramters[<span class="string">'b2'</span>] -= learning_rate * grads[<span class="string">'db2'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span><span class="params">(self, X, Y, num_iterations, learning_rate, print_cost=False, print_num=<span class="number">100</span>)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(num_iterations):</span><br><span class="line">            <span class="comment"># forward propagation</span></span><br><span class="line">            A2, cache = self.__forward_propagation(X)</span><br><span class="line">            <span class="comment"># compute cost</span></span><br><span class="line">            cost = self.cost_function(X, Y)</span><br><span class="line">            <span class="comment"># backward propagation</span></span><br><span class="line">            grads = self.__backward_propagation(cache, Y)</span><br><span class="line">            <span class="comment"># update parameters</span></span><br><span class="line">            self.__update_parameters(grads, learning_rate)</span><br><span class="line">            <span class="comment"># print cost</span></span><br><span class="line">            <span class="keyword">if</span> i % print_num == <span class="number">0</span> <span class="keyword">and</span> print_cost:</span><br><span class="line">                <span class="keyword">print</span> (<span class="string">"Cost after iteration %i: %f"</span> %(i, cost))</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict_prob</span><span class="params">(self, X)</span>:</span></span><br><span class="line">        <span class="comment"># result of forward_propagation is the probability</span></span><br><span class="line">        A2, _ = self.__forward_propagation(X)</span><br><span class="line">        <span class="keyword">return</span> A2</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(self, X, threshold=<span class="number">0.5</span>)</span>:</span></span><br><span class="line">        pred_prob = self.predict_prob(X)</span><br><span class="line">        threshold_func = np.vectorize(<span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x &gt; threshold <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line">        Y_prediction = threshold_func(pred_prob)</span><br><span class="line">        <span class="keyword">return</span> Y_prediction</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">accuracy_score</span><span class="params">(self, X, Y)</span>:</span></span><br><span class="line">        pred = self.predict(X)</span><br><span class="line">        <span class="keyword">return</span> len(Y[pred == Y]) / Y.shape[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>main.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Package imports</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> testCases <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> sklearn</span><br><span class="line"><span class="keyword">import</span> sklearn.datasets</span><br><span class="line"><span class="keyword">import</span> sklearn.linear_model</span><br><span class="line"><span class="keyword">from</span> planar_utils <span class="keyword">import</span> plot_decision_boundary, sigmoid, load_planar_dataset, load_extra_datasets</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">1</span>) <span class="comment"># set a seed so that the results are consistent</span></span><br><span class="line">X, Y = load_planar_dataset()</span><br><span class="line"><span class="comment"># Please note that the above code is from the programming assignment</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> SimpleNeuralNetwork</span><br><span class="line">np.random.seed(<span class="number">3</span>)</span><br><span class="line">num_iter = <span class="number">10001</span></span><br><span class="line">learning_rate = <span class="number">1.2</span></span><br><span class="line">input_size = X.shape[<span class="number">0</span>]</span><br><span class="line">hidden_layer_size = <span class="number">4</span></span><br><span class="line">clf = SimpleNeuralNetwork(input_size=input_size,</span><br><span class="line">                          hidden_layer_size=hidden_layer_size)\</span><br><span class="line">        .fit(X, Y, num_iter, learning_rate, <span class="keyword">True</span>, <span class="number">1000</span>)</span><br><span class="line">train_acc = clf.accuracy_score(X, Y)</span><br><span class="line">print(<span class="string">'training accuracy: &#123;&#125;%'</span>.format(train_acc*<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="comment"># Cost after iteration 0: 0.693162</span></span><br><span class="line"><span class="comment"># Cost after iteration 1000: 0.258625</span></span><br><span class="line"><span class="comment"># Cost after iteration 2000: 0.239334</span></span><br><span class="line"><span class="comment"># Cost after iteration 3000: 0.230802</span></span><br><span class="line"><span class="comment"># Cost after iteration 4000: 0.225528</span></span><br><span class="line"><span class="comment"># Cost after iteration 5000: 0.221845</span></span><br><span class="line"><span class="comment"># Cost after iteration 6000: 0.219094</span></span><br><span class="line"><span class="comment"># Cost after iteration 7000: 0.220628</span></span><br><span class="line"><span class="comment"># Cost after iteration 8000: 0.219400</span></span><br><span class="line"><span class="comment"># Cost after iteration 9000: 0.218482</span></span><br><span class="line"><span class="comment"># Cost after iteration 10000: 0.217738</span></span><br><span class="line"><span class="comment"># training accuracy: 90.5%</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> hidden_layer_size <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">20</span>, <span class="number">50</span>]:</span><br><span class="line">    clf = SimpleNeuralNetwork(input_size=input_size,</span><br><span class="line">                               hidden_layer_size=hidden_layer_size)\</span><br><span class="line">            .fit(X, Y, num_iter, learning_rate, <span class="keyword">False</span>)</span><br><span class="line">    print(<span class="string">'&#123;&#125; hidden units, cost: &#123;&#125;, accuracy: &#123;&#125;%'</span></span><br><span class="line">           .format(hidden_layer_size,</span><br><span class="line">                   clf.cost_function(X, Y),</span><br><span class="line">                   clf.accuracy_score(X, Y)))</span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="comment"># 1 hidden units, cost: 0.6315593779798304, accuracy: 67.5%</span></span><br><span class="line"><span class="comment"># 2 hidden units, cost: 0.5727606525435293, accuracy: 67.25%</span></span><br><span class="line"><span class="comment"># 3 hidden units, cost: 0.2521014374551156, accuracy: 91.0%</span></span><br><span class="line"><span class="comment"># 4 hidden units, cost: 0.24703039056643344, accuracy: 91.25%</span></span><br><span class="line"><span class="comment"># 5 hidden units, cost: 0.17206481441467936, accuracy: 91.5%</span></span><br><span class="line"><span class="comment"># 20 hidden units, cost: 0.16003869681611513, accuracy: 92.25%</span></span><br><span class="line"><span class="comment"># 50 hidden units, cost: 0.16000569403994763, accuracy: 92.5%</span></span><br></pre></td></tr></table></figure>
<h2 id="7-æœ¬å‘¨å†…å®¹å›é¡¾"><a href="#7-æœ¬å‘¨å†…å®¹å›é¡¾" class="headerlink" title="7. æœ¬å‘¨å†…å®¹å›é¡¾"></a>7. æœ¬å‘¨å†…å®¹å›é¡¾</h2><ul>
<li>å­¦ä¹ äº†ç¥ç»ç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µ</li>
<li>æŒæ¡äº†ç¥ç»ç½‘ç»œä¸­å„ç§å˜é‡çš„ç»´åº¦</li>
<li>æŒæ¡äº†ç¥ç»ç½‘ç»œä¸­çš„å‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­</li>
<li>äº†è§£äº†ç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°</li>
<li>å­¦ä¹ äº†ç¥ç»ç½‘ç»œä¸­å‚æ•°åˆå§‹åŒ–çš„é‡è¦æ€§</li>
<li>æŒæ¡äº†ä½¿ç”¨Pythonå®ç°ç®€å•çš„ç¥ç»ç½‘ç»œ</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://daniellaah.github.io/2017/deeplearning-ai-Neural-Networks-and-Deep-Learning-week3.html" target="_blank" rel="external">deeplearning.ai ä¸“é¡¹è¯¾ç¨‹ä¸€ç¬¬ä¸‰å‘¨</a></li>
<li><a href="https://www.coursera.org/specializations/deep-learning" target="_blank" rel="external">Coursera - Deep Learning Specialization</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Neural Networks and Deep Learning (week2) - Neural Networks Basics]]></title>
      <url>http://shopee.ai/2018/07/07/deeplearning/Neural-Networks-and-Deep-Learning-week2/</url>
      <content type="html"><![CDATA[<p>æœ¬å‘¨æˆ‘ä»¬å°†è¦å­¦ä¹  Logistic Regression, å®ƒæ˜¯ç¥ç»ç½‘ç»œçš„åŸºç¡€. </p>
<p>Logistic Regression å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§åªæœ‰è¾“å…¥å±‚å’Œè¾“å‡ºå±‚(æ²¡æœ‰éšè—å±‚)çš„ç¥ç»ç½‘ç»œ. </p>
<a id="more"></a>
<!--## Binary Classification
-->
<!--<img src="/images/deeplearning/C1W2-1.jpg" width="750" />

<img src="/images/deeplearning/C1W2-2.jpg" width="750" />
-->
<h2 id="ä¸€-åŸºæœ¬æ¦‚å¿µå›é¡¾"><a href="#ä¸€-åŸºæœ¬æ¦‚å¿µå›é¡¾" class="headerlink" title="ä¸€. åŸºæœ¬æ¦‚å¿µå›é¡¾"></a>ä¸€. åŸºæœ¬æ¦‚å¿µå›é¡¾</h2><p>è¿™æ¬¡ Andrew ç³»åˆ—è¯¾ç¨‹åœ¨ç¬¦å·ä¸Šæœ‰æ‰€æ”¹åŠ¨ (å’Œæœºå™¨å­¦ä¹ è¯¾ç¨‹ä¸­æœ‰æ‰€åŒºåˆ«, ä¸»è¦æ˜¯ä¸ºäº†åé¢ä»£ç å®ç°æ–¹ä¾¿), å¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<p><img src="/images/deeplearning/C1W2-3_1.jpg" width="700"></p>
<h2 id="1-Notation"><a href="#1-Notation" class="headerlink" title="1. Notation"></a>1. Notation</h2><p>æ›´å¤šå…³äºæœ¬ç³»åˆ—è¯¾ç¨‹çš„ç¬¦å·ç‚¹<a href="http://7xrrje.com1.z0.glb.clouddn.com/deeplearningnotation.pdf" target="_blank" rel="external">è¿™é‡Œ</a>åŒæ ·åœ°, å‚æ•°ä¹Ÿæœ‰æ‰€å˜åŒ– ($bias$ å•ç‹¬æ‹¿å‡ºæ¥ä½œä¸º$b$, è€Œä¸æ˜¯æ·»åŠ  $\theta_0$)</p>
<h2 id="2-Logistic-Regression"><a href="#2-Logistic-Regression" class="headerlink" title="2. Logistic Regression"></a>2. Logistic Regression</h2><p><img src="/images/deeplearning/C1W2-4_1.jpg" width="750"></p>
<ul>
<li>ä¸€ä¸ªæ˜¯ <strong>Loss function</strong>, å³æŸå¤±å‡½æ•°, å®ƒä»£è¡¨äº†å¯¹äºä¸€ä¸ªæ ·æœ¬ä¼°è®¡å€¼ä¸çœŸå®å€¼ä¹‹é—´çš„è¯¯å·®; </li>
<li>ä¸€ä¸ªæ˜¯ <strong>Cost function</strong>, å®ƒä»£è¡¨äº†æ‰€æœ‰æ ·æœ¬lossçš„å¹³å‡å€¼.</li>
</ul>
<p><img src="/images/deeplearning/C1W2-6_1.jpg" width="750"></p>
<h2 id="3-Logistic-Regression-Cost-Function"><a href="#3-Logistic-Regression-Cost-Function" class="headerlink" title="3. Logistic Regression Cost Function"></a>3. Logistic Regression Cost Function</h2><p><img src="/images/deeplearning/C1W2-8_1.jpg" width="750"></p>
<h2 id="4-Gradient-Descent"><a href="#4-Gradient-Descent" class="headerlink" title="4. Gradient Descent"></a>4. Gradient Descent</h2><p><img src="/images/deeplearning/C1W2-9_1.jpg" width="750"></p>
<p><img src="/images/deeplearning/C1W2-10_1.jpg" width="750"></p>
<h2 id="5-Derivatives"><a href="#5-Derivatives" class="headerlink" title="5. Derivatives"></a>5. Derivatives</h2><p><img src="/images/deeplearning/C1W2-11_1.png" width="750"></p>
<p><img src="/images/deeplearning/C1W2-12_1.png" width="750"></p>
<h2 id="7-Computation-Graph"><a href="#7-Computation-Graph" class="headerlink" title="7. Computation Graph"></a>7. Computation Graph</h2><p>ç¥ç»ç½‘ç»œä¸­, forward propagation ç”¨æ¥è®¡ç®—è¾“å‡º, backward propagation ç”¨æ¥è®¡ç®—æ¢¯åº¦, å¾—åˆ°æ¢¯åº¦åå°±å¯æ›´æ–°å¯¹åº”çš„å‚æ•°äº†. </p>
<p><img src="/images/deeplearning/C1W2-13_1.jpg" width="750"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºé€šè¿‡å‰å‘ä¼ æ’­, æˆ‘ä»¬å¾—åˆ° $J = 33$. </p>
<blockquote>
<p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹, åœ¨åé¢ä»£ç å®ç°ä¸­, è¿™äº›å¯¼æ•°éƒ½å¯ä»¥ç”¨ $dvar$ æ¥è¡¨ç¤º, ä¾‹å¦‚ dw1, db1 ç­‰ç­‰.</p>
</blockquote>
<h2 id="8-Computation-Graph-Derivatives"><a href="#8-Computation-Graph-Derivatives" class="headerlink" title="8. Computation Graph Derivatives"></a>8. Computation Graph Derivatives</h2><p>åå‘ä¼ æ’­æœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡é“¾å¼æ³•åˆ™ä¸æ–­æ±‚å‡ºå‰é¢å„ä¸ªå˜é‡çš„å¯¼æ•°çš„è¿‡ç¨‹.</p>
<p><img src="/images/deeplearning/C1W2-14_1.png" width="750"></p>
<h2 id="9-Logistic-regression-recap"><a href="#9-Logistic-regression-recap" class="headerlink" title="9. Logistic regression recap"></a>9. Logistic regression recap</h2><p>æœ‰äº†è®¡ç®—å›¾çš„æ¦‚å¿µä¹‹å, æˆ‘ä»¬å°†å…¶è¿ç”¨åˆ° Logistic Regression ä¸Š. </p>
<p><img src="/images/deeplearning/C1W2-16_1.png" width="700"></p>
<p>ä¸Šé¢çš„å¼å­å¯ä»¥ç”¨ä¸‹é¢çš„è®¡ç®—å›¾æ¥è¡¨è¾¾:</p>
<p><img src="/images/deeplearning/C1W2-16_2.png" width="700"></p>
<p>æœ‰äº†ä¸Šé¢çš„å›¾ä¹‹å, æˆ‘ä»¬ç°åœ¨æ¥è®¡ç®—åå‘ä¼ æ’­.</p>
<p>é¦–å…ˆæˆ‘ä»¬æ¥è®¡ç®— $\frac{dL}{da}$:</p>
<p>$$<br>\begin{align} \frac{dL}{da} &amp; = - (\frac{y}{a} - \frac{(1-y)}{(1-a)}) \end{align}<br>$$</p>
<p>é€šè¿‡é“¾å¼æ³•åˆ™, è®¡ç®— $\frac{dL}{dz}$:</p>
<p>$$<br>\begin{align} \frac{dL}{dz} &amp; = \frac{dL}{da}\frac{da}{dz} \\ \\ &amp; = - (\frac{y}{a} - \frac{(1-y)}{(1-a)})\sigma(z)(1-\sigma(z)) \\ \\ &amp; = - (\frac{y}{a} - \frac{(1-y)}{(1-a)})a(1-a)) \\ \\ &amp; = -y(1-a) + (1-y)a \\ \\ &amp; = a - y \end{align}<br>$$</p>
<p>æœ€åè®¡ç®— $\frac{dL}{dw1}, \frac{dL}{dw2}, \frac{dL}{db}$:</p>
<p>$$<br>\frac{dL}{dw_1} = \frac{dL}{dz}\frac{dz}{dw_1} = (a - y)x_1<br>$$</p>
<p>$$<br>\frac{dL}{dw_2} = \frac{dL}{dz}\frac{dz}{dw_2} = (a - y)x_2<br>$$</p>
<p>$$<br>\frac{dL}{db} = \frac{dL}{dz}\frac{dz}{db} = a - y<br>$$</p>
<p>æ€ä¹ˆæ ·? æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢? è¿™é‡Œæˆ‘ä»¬æ‰€æœ‰çš„è®¡ç®—éƒ½æ˜¯é’ˆå¯¹ä¸€ä¸ªè®­ç»ƒæ ·æœ¬çš„. å½“ç„¶æˆ‘ä»¬ä¸å¯èƒ½åªæœ‰ä¸€ä¸ªæ ·æœ¬, é‚£ä¹ˆå¯¹äºæ•´ä¸ªè®­ç»ƒé›†, æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢? å…¶å®å¾ˆç®€å•, æˆ‘ä»¬åªéœ€è¦å°† $J(w, b)$ æ‹†å¼€æ¥å†™å°±å¾ˆæ¸…æ™°.</p>
<p>$$<br>J(w, b) = \frac{1}{m}(L(a^{(1)}, y^{(1)}) + L(a^{(2)}, y^{(2)}) + â€¦ + L(a^{(m)}, y^{m)}))<br>$$</p>
<p><img src="/images/deeplearning/C1W2-17_1.jpg" width="750"></p>
<p>å¯¹äºæ¯ä¸€ä¸ªæ ·æœ¬éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ $dz^{(i)}$, è€Œå¯¹äº $dw, db$ æ¥è¯´æ˜¯å¯¹äºæ‰€æœ‰æ±‚å¹³å‡.</p>
<p><img src="/images/deeplearning/C1W2-18_1.png" width="750"></p>
<blockquote>
<p>å¦‚æœç”¨ä»¥ä¸ŠèŠ‚çš„ä¼ªä»£ç æ¥å®ç°æ¢¯åº¦è®¡ç®—çš„è¯, æ•ˆç‡ä¼šéå¸¸ä½. éœ€è¦ä¸¤ä¸ªæ˜¾å¼çš„ for å¾ªç¯.<br>ä¸‹ä¸€èŠ‚ä»‹ç» å‘é‡åŒ–. å‘é‡åŒ–å°±æ˜¯ç”¨æ¥è§£å†³è®¡ç®—æ•ˆç‡é—®é¢˜. </p>
</blockquote>
<h2 id="11-Vectorization"><a href="#11-Vectorization" class="headerlink" title="11. Vectorization"></a>11. Vectorization</h2><p>è¿™æ¬¡çš„æ·±åº¦å­¦ä¹ ç³»åˆ—è¯¾ç¨‹ä½œä¸š, ä¸€å¾‹è¦æ±‚ä½¿ç”¨å‘é‡åŒ–æ¥å®ç°ä»£ç . é…åˆå¼ºå¤§çš„Numpy, å‘é‡åŒ–å…¶å®å¾ˆç®€å•. æ¥çœ‹ä¸€ä¸ªä¾‹å­:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">x = <span class="number">1000000</span></span><br><span class="line"><span class="comment">#x = 10</span></span><br><span class="line"></span><br><span class="line">a = np.random.rand(x)</span><br><span class="line">b = np.random.rand(x)</span><br><span class="line"></span><br><span class="line">tic = time.time() <span class="comment"># Python time time() è¿”å›å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ï¼ˆ1970çºªå…ƒåç»è¿‡çš„æµ®ç‚¹ç§’æ•°ï¼‰</span></span><br><span class="line"></span><br><span class="line">c = np.dot(a, b)</span><br><span class="line">toc = time.time()</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Vectorized version:&#123;&#125;ms'</span>.format(<span class="number">1000</span>*(toc-tic)))</span><br><span class="line"></span><br><span class="line">c = <span class="number">0</span></span><br><span class="line">tic = time.time()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(x):</span><br><span class="line">    c += a[i] * b[i]</span><br><span class="line">toc = time.time()</span><br><span class="line"></span><br><span class="line">print(<span class="string">'For loop:&#123;&#125;ms'</span>.format(<span class="number">1000</span>*(toc-tic)))</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Vectorized version:<span class="number">0.881195068359375</span>ms</span><br><span class="line">For loop:<span class="number">363.94405364990234</span>ms</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸¤ä¸ªç‰ˆæœ¬æ•ˆç‡ä¸Šå·®äº†400å¤šå€. ç¥ç»ç½‘ç»œæœ¬èº«è®¡ç®—å°±æ¯”è¾ƒå¤æ‚, åŠ ä¹‹æ·±åº¦å­¦ä¹ è®­ç»ƒæ ·æœ¬å¾€å¾€éƒ½å¾ˆå¤§, æ•ˆç‡å°¤ä¸ºé‡è¦. ä»»ä½•æ—¶å€™éƒ½è¦å°½å¯èƒ½é¿å…ä½¿ç”¨forå¾ªç¯.</p>
</blockquote>
<p>é¦–å…ˆæˆ‘ä»¬è¿›è¡Œç¬¬ä¸€æ­¥ä¼˜åŒ–, å°† $w$ å†™æˆå‘é‡çš„å½¢å¼ $dw=np.zeros((n_x, 1))$, è¿™æ ·å°±çœå»äº†å†…å±‚å…³äº $w$ çš„å¾ªç¯.</p>
<p><img src="/images/deeplearning/C1W2-19_1.png" width="750"></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä¼˜åŒ–å…³äº$m$ä¸ªè®­ç»ƒæ ·æœ¬çš„å¾ªç¯. å›é¡¾ä¸‹ç¬¬ä¸€èŠ‚ä¸­æ‰€è¯´çš„$X$:</p>
<p><img src="/images/deeplearning/C1W2-3_1.jpg" width="600"></p>
<blockquote>
<p>å°†$X$ç”¨å¦‚ä¸Šçš„çŸ©é˜µè¡¨è¾¾å, é€šè¿‡ $W^T+b$ ä¹Ÿå°±å¾—åˆ°äº† $z$ çš„å‘é‡åŒ–è¡¨è¾¾. $a$ çš„å‘é‡åŒ–è¡¨è¾¾ä¹Ÿå°±æ˜¯ $z$ æ¯ä¸ªå…ƒç´ è¿›è¡Œ $\sigma$æ“ä½œäº†.<br>ç®€å•å§. æƒ³è¦æŠŠæ¡ä½å‘é‡åŒ–ä¸€å®šè¦æ¸…æ¥šæ¯ä¸ªå˜é‡çš„ç»´åº¦(å³pythonä»£ç é‡Œndarrayçš„shape), é‚£äº›æ˜¯<strong>çŸ©é˜µæ“ä½œ</strong>, é‚£äº›æ˜¯<strong>element-wise</strong>æ“ä½œç­‰ç­‰. </p>
<p>æŠŠæ¡ä½ä¸Šé¢çš„ä¹‹å, åœ¨ä»£ç å®ç°é‡Œè¿˜è¦æ³¨æ„å“ªé‡Œä¼šäº§ç”Ÿ <code>broadcasting</code>. ä¾‹å¦‚è¿™é‡Œçš„ $b$ å®é™…ä¸Šæ˜¯ä¸€ä¸ªscalar, ä½†åœ¨è¿›è¡Œ $W^T+b$ æ“ä½œçš„æ—¶å€™, $b$ è¢«numpyè‡ªåŠ¨<code>broadcasting</code> æˆå’Œ $W^T$ ç»´åº¦ä¸€æ ·çš„æ¨ªå‘é‡.</p>
</blockquote>
<p><img src="/images/deeplearning/C1W2-20_1.png" width="750"></p>
<blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹æ¢¯åº¦çš„å‘é‡åŒ–. å‰é¢æˆ‘ä»¬çŸ¥é“ $dz^{(1)}, dz^{(2)}, â€¦, dz^{(m)}$, è¿™æ ·å¾—åˆ° $dZ$ .</p>
<p>$A$ã€$Y$ çš„å‘é‡åŒ–å‰é¢å·²çŸ¥äº†ï¼Œè¿™æ ·å…³äº $z$ çš„æ¢¯åº¦å¦‚ä¸‹æ‰€ç¤º. æœ‰äº† $dZ$ä¹‹å $db$ å°±å¾ˆç®€å•äº†, å®ƒæ˜¯æ‰€æœ‰ $dZ$ ä¸­å…ƒç´ çš„å‡å€¼. åœ¨pythonä¸­çš„ä»£ç è¡¨ç¤ºä¸º <code>np.mean(dZ)</code> æˆ–è€… <code>1/m * np.sum(a)</code>. $dW$ é€šè¿‡è§‚å¯Ÿå‘é‡çš„ç»´åº¦å¾—åˆ°. $X$ ä¸º $(n, m)$, $dZ$ ä¸º $(1, m)$, è€Œ $dW$ çš„ç»´åº¦å’Œ $W$ çš„ç»´åº¦ä¸€æ ·ä¸º $(n,1)$, è¿™æ ·å°±å¾—åˆ°äº† $dW=\frac{1}{m}XdZ^T$.</p>
<p>db æ˜¯ä¸€ä¸ªå‡å€¼ï¼Ÿ</p>
</blockquote>
<p><img src="/images/deeplearning/C1W2-21_1.png" width="750"></p>
<p>é€šè¿‡ä¸Šé¢çš„åŠªåŠ›, æˆ‘ä»¬å°†ä¹‹å‰forå¾ªç¯çš„ç‰ˆæœ¬æ”¹æˆäº†å®Œå…¨å‘é‡åŒ–çš„è¡¨ç¤º, è¿™æ ·å‘é‡åŒ–å®ç°çš„ä»£ç æ•ˆç‡ä¼šå¤§å¤§æé«˜. </p>
<blockquote>
<p>(æ³¨æ„: ppté‡Œçš„for iter in range(1000) æ˜¯è¿­ä»£æ¬¡æ•°, è¿™ä¸ªå¾ªç¯æ˜¯ä¸å¯é¿å…çš„)</p>
</blockquote>
<p><img src="/images/deeplearning/C1W2-22_1.png" width="750"></p>
<h2 id="ä½¿ç”¨Pythonå®ç°Logistic-Regressionè¿›è¡ŒçŒ«å’ªè¯†åˆ«"><a href="#ä½¿ç”¨Pythonå®ç°Logistic-Regressionè¿›è¡ŒçŒ«å’ªè¯†åˆ«" class="headerlink" title="ä½¿ç”¨Pythonå®ç°Logistic Regressionè¿›è¡ŒçŒ«å’ªè¯†åˆ«"></a>ä½¿ç”¨Pythonå®ç°Logistic Regressionè¿›è¡ŒçŒ«å’ªè¯†åˆ«</h2><p>LogisticRegression.py:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sigmoid</span><span class="params">(z)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.</span> / (<span class="number">1.</span>+np.exp(-z))</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LogisticRegression</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__parameters_initializer</span><span class="params">(self, input_size)</span>:</span></span><br><span class="line">        <span class="comment"># initial parameters with zeros</span></span><br><span class="line">        w = np.zeros((input_size, <span class="number">1</span>), dtype=float)</span><br><span class="line">        b = <span class="number">0.0</span></span><br><span class="line">        <span class="keyword">return</span> w, b</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__forward_propagation</span><span class="params">(self, X)</span>:</span></span><br><span class="line">        m = X.shape[<span class="number">1</span>]</span><br><span class="line">        A = sigmoid(np.dot(self.w.T, X) + self.b)</span><br><span class="line">        <span class="keyword">return</span> A</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__compute_cost</span><span class="params">(self, A, Y)</span>:</span></span><br><span class="line">        m = A.shape[<span class="number">1</span>]</span><br><span class="line">        cost = -np.sum(Y*np.log(A) + (<span class="number">1</span>-Y)*(np.log(<span class="number">1</span>-A))) / m</span><br><span class="line">        <span class="keyword">return</span> cost</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cost_function</span><span class="params">(self, X, Y)</span>:</span></span><br><span class="line">        <span class="comment"># use the result from forward propagation and the label Y to compute cost</span></span><br><span class="line">        A = self.__forward_propagation(X)</span><br><span class="line">        cost = self.__compute_cost(A, Y)</span><br><span class="line">        <span class="keyword">return</span> cost</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__backward_propagation</span><span class="params">(self, A, X, Y)</span>:</span></span><br><span class="line">        m = X.shape[<span class="number">1</span>]</span><br><span class="line">        <span class="comment"># backward propagation computes gradients</span></span><br><span class="line">        dw = np.dot(X, (A-Y).T) / m</span><br><span class="line">        db = np.sum(A-Y) / m</span><br><span class="line">        grads = &#123;<span class="string">"dw"</span>: dw, <span class="string">"db"</span>: db&#125;</span><br><span class="line">        <span class="keyword">return</span> grads</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__update_parameters</span><span class="params">(self, grads, learning_rate)</span>:</span></span><br><span class="line">        self.w -= learning_rate * grads[<span class="string">'dw'</span>]</span><br><span class="line">        self.b -= learning_rate * grads[<span class="string">'db'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span><span class="params">(self, X, Y, num_iterations, learning_rate, print_cost=False, print_num=<span class="number">100</span>)</span>:</span></span><br><span class="line">        self.w, self.b = self.__parameters_initializer(X.shape[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(num_iterations):</span><br><span class="line">            <span class="comment"># forward_propagation</span></span><br><span class="line">            A = self.__forward_propagation(X)</span><br><span class="line">            <span class="comment"># compute cost</span></span><br><span class="line">            cost = self.__compute_cost(A, Y)</span><br><span class="line">            <span class="comment"># backward_propagation</span></span><br><span class="line">            grads = self.__backward_propagation(A, X, Y)</span><br><span class="line">            dw = grads[<span class="string">"dw"</span>]</span><br><span class="line">            db = grads[<span class="string">"db"</span>]</span><br><span class="line">            <span class="comment"># update parameters</span></span><br><span class="line">            self.__update_parameters(grads, learning_rate)</span><br><span class="line">            <span class="comment"># print cost</span></span><br><span class="line">            <span class="keyword">if</span> i % print_num == <span class="number">0</span> <span class="keyword">and</span> print_cost:</span><br><span class="line">                <span class="keyword">print</span> (<span class="string">"Cost after iteration &#123;&#125;: &#123;:.6f&#125;"</span>.format(i, cost))</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict_prob</span><span class="params">(self, X)</span>:</span></span><br><span class="line">        <span class="comment"># result of forward_propagation is the probability</span></span><br><span class="line">        A = self.__forward_propagation(X)</span><br><span class="line">        <span class="keyword">return</span> A</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(self, X, threshold=<span class="number">0.5</span>)</span>:</span></span><br><span class="line">        pred_prob = self.predict_prob(X)</span><br><span class="line">        threshold_func = np.vectorize(<span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x &gt; threshold <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line">        Y_prediction = threshold_func(pred_prob)</span><br><span class="line">        <span class="keyword">return</span> Y_prediction</span><br><span class="line">	</span><br><span class="line">     // åˆ†ç±»å‡†ç¡®ç‡åˆ†æ•°æ˜¯æŒ‡æ‰€æœ‰åˆ†ç±»æ­£ç¡®çš„ç™¾åˆ†æ¯”, åˆ†ç±»å‡†ç¡®ç‡è¿™ä¸€è¡¡é‡åˆ†ç±»å™¨çš„æ ‡å‡†æ¯”è¾ƒå®¹æ˜“ç†è§£</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">accuracy_score</span><span class="params">(self, X, Y)</span>:</span></span><br><span class="line">        pred = self.predict(X)</span><br><span class="line">        <span class="keyword">return</span> len(Y[pred == Y]) / Y.shape[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>æœ¬å‘¨è¯¾ç¨‹å‰©ä¸‹éƒ¨åˆ†å››ä¸ªè§†é¢‘åˆ†åˆ«è®²è§£Broadcasting, Numpy Vector, Jupyter Notebookä»¥åŠLogistic Regressionçš„æ¦‚ç‡è§£é‡Š. å¦‚æœå¯¹äºNumpyä»¥åŠJupyter Notebookä¸ç†Ÿæ‚‰çš„åŒå­¦éœ€è¦å¥½å¥½çœ‹çœ‹è¿™ä¸‰ä¸ªè§†é¢‘</p>
<p><strong>Python Broadcasting example:</strong></p>
<p><img src="/images/deeplearning/C1W2-23_1.png" width="500"></p>
<blockquote>
<p>Notes: å¤šä½¿ç”¨ reshape æ¥ä¿è¯ä½ ç”¨çš„å‘é‡æˆ–çŸ©é˜µæ˜¯æ­£ç¡®çš„ï¼Œä¸è¦å®³æ€•ä½¿ç”¨ reshape.</p>
</blockquote>
<p><img src="/images/deeplearning/C1W2-24_1.png" width="400"></p>
<blockquote>
<p>Notes: å¤šä½¿ç”¨ assert(a.shape == (5,1)) </p>
<h2 id="æœ¬å‘¨å†…å®¹å›é¡¾"><a href="#æœ¬å‘¨å†…å®¹å›é¡¾" class="headerlink" title="æœ¬å‘¨å†…å®¹å›é¡¾"></a>æœ¬å‘¨å†…å®¹å›é¡¾</h2></blockquote>
<ul>
<li>äº†è§£äº†æ·±åº¦å­¦ä¹ ç³»åˆ—è¯¾ç¨‹ä¸­ä½¿ç”¨åˆ°çš„å„ç§ç¬¦å·.</li>
<li>å›é¡¾äº†Logistic Regression.</li>
<li>æŒæ¡äº†losså’Œcostçš„åŒºåˆ«ä¸è”ç³».</li>
<li>é‡æ–°è®¤è¯†äº†å‰å‘åå‘ä¼ æ’­, å³è®¡ç®—å›¾.</li>
<li>å­¦ä¹ äº†æ·±åº¦å­¦ä¹ ä¸­å¿…è¦çš„æ±‚å¯¼çŸ¥è¯†.</li>
<li>ç†Ÿæ‚‰äº†Numpy, Jupyter Notebookçš„ä½¿ç”¨</li>
<li>æŒæ¡äº†ä½¿ç”¨Pythonä»¥ç¥ç»ç½‘ç»œçš„æ–¹å¼å®ç°Logistic Regressionæ¨¡å‹, å¹¶ä½¿ç”¨å¼ºå¤§çš„Numpyæ¥å‘é‡åŒ–.</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://study.163.com/my#/smarts" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - deeplearning</a></li>
<li><a href="http://daniellaah.github.io/2017/deeplearning-ai-Neural-Networks-and-Deep-Learning-week2.html" target="_blank" rel="external">deeplearning.ai ä¸“é¡¹è¯¾ç¨‹ä¸€ç¬¬äºŒå‘¨</a></li>
<li><a href="https://blog.csdn.net/dcrmg/article/details/52416832" target="_blank" rel="external">å‘é‡ç‚¹ä¹˜ï¼ˆå†…ç§¯ï¼‰å’Œå‰ä¹˜ï¼ˆå¤–ç§¯ã€å‘é‡ç§¯ï¼‰æ¦‚å¿µåŠå‡ ä½•æ„ä¹‰è§£è¯»</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/31914064" target="_blank" rel="external">CPUä¼šè¢«GPUæ›¿ä»£å—ï¼ŸSIMDå’ŒSIMTè°æ›´å¥½ï¼Ÿ</a></li>
<li><a href="https://www.cnblogs.com/pinard/p/5970503.html" target="_blank" rel="external">åˆ˜å»ºå¹³Pinard - æ¢¯åº¦ä¸‹é™ï¼ˆGradient Descentï¼‰å°ç»“</a></li>
<li><a href="https://github.com/daniellaah/deeplearning.ai-step-by-step-guide/tree/master/01-Neural-Networks-and-Deep-Learning/week2" target="_blank" rel="external">Github 01-Neural-Networks-and-Deep-Learning/week2</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ensumble é›†æˆå­¦ä¹ å°è®°]]></title>
      <url>http://shopee.ai/2018/07/03/ml/ensumble-part1/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦åŸºäºå‘¨å¿—åã€Šæœºå™¨å­¦ä¹ ã€‹ä¸€ä¹¦ç¬¬å…«ç«  é›†æˆå­¦ä¹ å†…å®¹åšçš„æ•´ç†ç¬”è®°ï¼Œæ­¤å¤–æŸ¥é˜…äº†ç½‘ä¸Šçš„ä¸€äº›åšå®¢å’Œé—®ç­”ç½‘ç«™</p>
<a id="more"></a>
<h2 id="1-Ensumble-æ¦‚å¿µ"><a href="#1-Ensumble-æ¦‚å¿µ" class="headerlink" title="1. Ensumble æ¦‚å¿µ"></a>1. Ensumble æ¦‚å¿µ</h2><p>Ensumble æ˜¯é€šè¿‡æ„å»ºå¹¶ç»“åˆå¤šä¸ª<code>å­¦ä¹ å™¨</code>æ¥å®Œæˆå­¦ä¹ ä»»åŠ¡ã€‚</p>
<blockquote>
<p>æ›¾ç»å¬è¿‡ä¸€å¥è¯ï¼Œâ€Featureä¸ºä¸»ï¼ŒEnsembleä¸ºåâ€ã€‚</p>
</blockquote>
<p>Feature å†³å®šäº†æ¨¡å‹æ•ˆæœçš„ä¸Šé™ï¼Œè€Œ Ensemble å°±æ˜¯è®©ä½ æ›´æ¥è¿‘è¿™ä¸ªä¸Šé™ã€‚</p>
<blockquote>
<p>Ensemble è®²ç©¶â€œå¥½è€Œä¸åŒâ€ï¼Œä¸åŒæ˜¯æŒ‡æ¨¡å‹çš„å­¦ä¹ åˆ°çš„ä¾§é‡é¢ä¸ä¸€æ ·ã€‚</p>
<p>ä¸¾ä¸ªç›´è§‚çš„ä¾‹å­ï¼Œæ¯”å¦‚æ•°å­¦è€ƒè¯•ï¼ŒAçš„å‡½æ•°é¢˜åšçš„æ¯”Bå¥½ï¼ŒBçš„å‡ ä½•é¢˜åšçš„æ¯”Aå¥½ï¼Œé‚£ä¹ˆä»–ä»¬åˆä½œå®Œæˆçš„åˆ†æ•°é€šå¸¸æ¯”ä»–ä»¬å„è‡ªå•ç‹¬å®Œæˆçš„è¦é«˜ã€‚</p>
<p>å¸¸è§çš„Ensembleæ–¹æ³•æœ‰Baggingã€Boostingã€Stackingã€Blending.</p>
<p>Notes:  Stacking ä¸ Blending ç±»ä¼¼ï¼Œ<a href="https://mlwave.com/kaggle-ensembling-guide/" target="_blank" rel="external">åŒºåˆ«å¯å‚è§</a></p>
</blockquote>
<p><strong>ensumble ä¸­çš„ å¥½è€Œä¸åŒ</strong></p>
<blockquote>
<p>å¦‚ä½•ä½¿å¾—é›†æˆå­¦ä¹ æ€§èƒ½æ¯”æœ€å¥½çš„å•ä¸€å­¦ä¹ å™¨æ›´å¥½ï¼Ÿ</p>
<ul>
<li>å‡†ç¡®æ€§</li>
<li>å¤šæ ·æ€§</li>
</ul>
<p>å¥½è€Œä¸åŒ</p>
<p>å¦‚ä½•äº§ç”Ÿå¹¶ç»“åˆ â€œå¥½è€Œä¸åŒâ€ çš„ä¸ªä½“å­¦ä¹ å™¨ ?</p>
</blockquote>
<p>é›†æˆå­¦ä¹ ç ”ç©¶çš„æ ¸å¿ƒ, å½“å‰æŒ‰ç…§ä¸ªä½“å­¦ä¹ å™¨çš„ç”Ÿæˆæ–¹å¼åˆ’åˆ†:</p>
<blockquote>
<p>baggingï¼ˆåŠå…¶å˜ä½“éšæœºæ£®æ—ï¼‰â€” ä¸ªä½“å­¦ä¹ å™¨é—´ä¸å­˜åœ¨å¼ºä¾èµ–å…³ç³»ï¼Œå¯åŒæ—¶ç”Ÿæˆçš„å¹¶è¡ŒåŒ–æ–¹æ³•<br>boosting - ä¸ªä½“å­¦ä¹ å™¨é—´å­˜åœ¨å¼ºä¾èµ–å…³ç³»ï¼Œå¿…é¡»ä¸²è¡Œç”Ÿæˆçš„åºåˆ—åŒ–æ–¹æ³•</p>
</blockquote>
<p>ä»åå·®-æ–¹å·®åˆ†è§£çš„è§’åº¦: </p>
<blockquote>
<p>bagging å…³æ³¨é™ä½æ–¹å·®<br>boosting å…³æ³¨é™ä½åå·®</p>
</blockquote>
<p>ä¹Ÿå¯ä»¥æŒ‰ç…§æœºå™¨å­¦ä¹ æŠ€æ³•çš„ä¸¤å¼ å›¾æ¥ç†è§£</p>
<p><img src="/images/ml/ensumble/under_over.png" width="750"></p>
<p>ç¬¬ä¸€å¹…å›¾(å¯¹åº”boosting)å¯çœ‹ä½œè¿›è¡Œäº†ä¸€ä¸ªç‰¹å¾è½¬æ¢æ¥é˜²æ­¢æ¬ æ‹Ÿåˆï¼Œç¬¬äºŒå¹…å›¾(å¯¹åº”bagging)åˆ™è¿›è¡Œäº†ä¸€ä¸ªæ­£åˆ™åŒ–æ¥é˜²æ­¢è¿‡æ‹Ÿåˆ</p>
<h2 id="2-Boosting"><a href="#2-Boosting" class="headerlink" title="2. Boosting"></a>2. Boosting</h2><blockquote>
<p>é¦–å…ˆä»åˆå§‹è®­ç»ƒé›†è®­ç»ƒå‡ºä¸€ä¸ªåŸºå­¦ä¹ å™¨ï¼Œå†æ ¹æ®åŸºå­¦ä¹ å™¨çš„è¡¨ç°å¯¹è®­ç»ƒæ ·æœ¬åˆ†å¸ƒè¿›è¡Œè°ƒæ•´ï¼Œä½¿å¾—å…ˆå‰åŸºå­¦ä¹ å™¨åšé”™çš„è®­ç»ƒæ ·æœ¬åœ¨åç»­å—åˆ°æ›´å¤šçš„å…³æ³¨ï¼Œç„¶ååŸºäºè°ƒæ•´åçš„æ ·æœ¬åˆ†å¸ƒæ¥è®­ç»ƒä¸‹ä¸€ä¸ªåŸºå­¦ä¹ å™¨ï¼›å¦‚æ­¤é‡å¤è¿›è¡Œï¼Œç›´è‡³åŸºå­¦ä¹ å™¨æ•°ç›®è¾¾åˆ°äº‹å…ˆæŒ‡å®šçš„å€¼T,æœ€ç»ˆå°†è¿™Tä¸ªåŸºå­¦ä¹ å™¨è¿›è¡ŒåŠ æƒç»„åˆ.</p>
</blockquote>
<h3 id="2-1-adaboost"><a href="#2-1-adaboost" class="headerlink" title="2.1 adaboost"></a>2.1 adaboost</h3><blockquote>
<p>æ¨å¯¼æ–¹å¼ï¼ŒåŸºäºâ€œåŠ æ€§æ¨¡å‹â€ï¼Œå³åŸºäºåŸºå­¦ä¹ å™¨çš„çº¿æ€§ç»„åˆ<br>å¦‚ä½•åœ¨æ¯ä¸€è½®ä¿®æ”¹æ ·æœ¬åˆ†å¸ƒ</p>
<ul>
<li>é‡èµ‹æƒæ³•ï¼šåœ¨æ¯ä¸€è½®è®­ç»ƒä¸­ï¼Œæ ¹æ®æ ·æœ¬åˆ†å¸ƒä¸ºæ¯ä¸€ä¸ªè®­ç»ƒæ ·æœ¬é‡æ–°èµ‹äºˆä¸€ä¸ªæƒé‡ï¼ˆæ¯”å¦‚ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ä¸€ä¹¦ä¸­å°±æ˜¯åˆ©ç”¨è¿™ç§æ–¹æ³•æ„å»ºæå‡æ ‘ç®—æ³•ï¼Œé€šè¿‡ä¿®æ”¹æƒé‡æ¥è®¡ç®—æ¯ä¸€è½®çš„æŸå¤±ï¼‰</li>
<li>é‡é‡‡æ ·æ³•ï¼šåˆ©ç”¨é‡é‡‡æ ·çš„è®­ç»ƒé›†æ¥å¯¹åŸºå­¦ä¹ å™¨è¿›è¡Œè®­ç»ƒâ€“&gt;é‡å¯åŠ¨ï¼šé¿å…è®­ç»ƒè¿‡ç¨‹è¿‡æ—©åœæ­¢</li>
</ul>
</blockquote>
<p>Notes:</p>
<blockquote>
<p>è¥¿ç“œä¹¦ä¸Šçš„ç®—æ³•è¿˜æåˆ°è®­ç»ƒçš„æ¯ä¸€è½®å¼€å§‹éƒ½è¦æ£€æŸ¥å½“å‰å­¦ä¹ å™¨æ˜¯å¦æ¯”éšæœºçŒœæµ‹å¥½ï¼Œè‹¥æ¡ä»¶ä¸æ»¡è¶³åˆ™æŠ›å¼ƒå½“å‰å­¦ä¹ å™¨ï¼Œè¿™ç§æƒ…å½¢å¯èƒ½ä¼šå¯¼è‡´å­¦ä¹ è¿‡ç¨‹æœªè¾¾åˆ°Tè½®å³åœæ­¢ï¼Œæ‰€ä»¥æœ‰é‡é‡‡æ ·çš„æ–¹æ³•æ¥è¿›è¡Œé‡å¯åŠ¨é¿å…å‡ºç°æ­¤ç§æƒ…å†µï¼›ä½†æ˜¯å¦ä¸€æ–¹é¢ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹ä»¥åŠã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹ä¸­çš„ç®—æ³•å¹¶æœªæœ‰è¿™æ¡åˆ¤æ–­è¯­å¥ï¼›</p>
<p>ã€Šæœºå™¨å­¦ä¹ ã€‹ä¸€ä¹¦ä¸­æåˆ°ï¼Œä»ç»Ÿè®¡å­¦çš„å‡ºå‘è®¤ä¸ºAdaBoostå®è´¨ä¸Šæ˜¯åŸºäºåŠ æ€§æ¨¡å‹ï¼ˆåç»­æŒ‡å‡ºè¿™ä¸€è§†è§’é˜é‡Šçš„æ˜¯ä¸€ä¸ªä¸AdaBoostå¾ˆç›¸ä¼¼çš„è¿‡ç¨‹è€Œéå…¶æœ¬èº«ï¼‰ï¼Œä»¥ç±»ä¼¼ç‰›é¡¿è¿­ä»£æ³•æ¥ä¼˜åŒ–æŒ‡æ•°æŸå¤±å‡½æ•°ï¼Œé€šè¿‡å°†è¿­ä»£ä¼˜åŒ–è¿‡ç¨‹æ›¿æ¢ä¸ºå…¶ä»–ä¼˜åŒ–æ–¹æ³•äº§ç”Ÿäº†GradientBoostingã€LPBoostç­‰ï¼›è€Œè¿™é‡Œä¹Ÿæåˆ°æ¯ä¸€ç§å˜ä½“é’ˆå¯¹ä¸åŒçš„é—®é¢˜ï¼ˆå™ªå£°ã€æ•°æ®ä¸å¹³è¡¡ç­‰ï¼‰è€Œæ‹¥æœ‰ä¸åŒçš„æƒé‡æ›´æ–°è§„åˆ™.</p>
</blockquote>
<h3 id="2-2-ç‰¹ç‚¹"><a href="#2-2-ç‰¹ç‚¹" class="headerlink" title="2.2 ç‰¹ç‚¹"></a>2.2 ç‰¹ç‚¹</h3><blockquote>
<p>ä»bias-varianceåˆ†è§£çš„è§’åº¦æ¥çœ‹ï¼ŒBoostingä¸»è¦å…³æ³¨é™ä½ biasï¼Œå› æ­¤Boostingèƒ½åŸºäºæ³›åŒ–æ€§èƒ½ç›¸å½“å¼±çš„å­¦ä¹ å™¨æ„å»ºå‡ºå¾ˆå¼ºçš„é›†æˆï¼ˆä¸baggingä¸åŒï¼‰</p>
</blockquote>
<p>Notes: boosting å¯¹äºå™ªéŸ³æ•°æ®è¾ƒä¸ºæ•æ„Ÿ</p>
<h2 id="3-Bagging-Bootstrap-aggregating"><a href="#3-Bagging-Bootstrap-aggregating" class="headerlink" title="3. Bagging (Bootstrap aggregating )"></a>3. Bagging (Bootstrap aggregating )</h2><p>å‡ºå‘ç‚¹ä¾ç„¶æ˜¯â€œå¥½è€Œä¸åŒâ€</p>
<blockquote>
<ul>
<li>â€œä¸åŒâ€ â€” ä¸åŒåŸºå­¦ä¹ å™¨åŸºäºä¸åŒçš„æ ·æœ¬å­é›†</li>
<li>â€œå¥½â€ â€” ä½¿ç”¨ç›¸äº’æœ‰äº¤å çš„é‡‡æ ·å­é›†</li>
</ul>
</blockquote>
<h3 id="3-1-å·¥ä½œæœºåˆ¶"><a href="#3-1-å·¥ä½œæœºåˆ¶" class="headerlink" title="3.1 å·¥ä½œæœºåˆ¶"></a>3.1 å·¥ä½œæœºåˆ¶</h3><p>åŸºäºè‡ªåŠ©é‡‡æ ·æ³•ï¼ˆbootstrap samplingï¼‰â€” â€œæœ‰æ”¾å›åœ°å…¨æŠ½â€</p>
<blockquote>
<p>ä»è®­ç»ƒé›†ä»è¿›è¡Œ<strong>å­æŠ½æ ·ç»„æˆæ¯ä¸ªåŸºæ¨¡å‹æ‰€éœ€è¦çš„å­è®­ç»ƒé›†</strong>ï¼Œå¯¹æ‰€æœ‰åŸºæ¨¡å‹é¢„æµ‹çš„ç»“æœè¿›è¡Œç»¼åˆäº§ç”Ÿæœ€ç»ˆçš„é¢„æµ‹ç»“æœ,è‡³äºä¸ºä»€ä¹ˆå«bootstrap aggregationï¼Œå› ä¸ºå®ƒæŠ½å–è®­ç»ƒæ ·æœ¬çš„æ—¶å€™é‡‡ç”¨çš„å°±æ˜¯bootstrapçš„æ–¹æ³•ï¼</p>
</blockquote>
<h3 id="3-2-ä¼˜ç‚¹ï¼ˆç›¸å¯¹äºboostingï¼‰"><a href="#3-2-ä¼˜ç‚¹ï¼ˆç›¸å¯¹äºboostingï¼‰" class="headerlink" title="3.2 ä¼˜ç‚¹ï¼ˆç›¸å¯¹äºboostingï¼‰"></a>3.2 ä¼˜ç‚¹ï¼ˆç›¸å¯¹äºboostingï¼‰</h3><ul>
<li>é«˜æ•ˆ - è®­ç»ƒä¸€ä¸ªbaggingé›†æˆä¸ç›´æ¥ä½¿ç”¨åŸºå­¦ä¹ å™¨ç®—æ³•è®­ç»ƒä¸€ä¸ªå­¦ä¹ å™¨çš„å¤æ‚åº¦åŒé˜¶</li>
<li>baggignèƒ½ä¸ç»ä¿®æ”¹åœ°ç”¨äºå¤šåˆ†ç±»ã€å›å½’ä»»åŠ¡ï¼ˆæ ‡å‡†AdaBoostingåªèƒ½é€‚ç”¨äºäºŒåˆ†ç±»ä»»åŠ¡ï¼‰</li>
<li>åŒ…å¤–ä¼°è®¡â€”â€”è‡ªåŠ©é‡‡æ ·è¿‡ç¨‹ä¸­å‰©ä½™çš„æ ·æœ¬å¯ä»¥ä½œä¸ºéªŒè¯é›†æ¥å¯¹æ³›åŒ–æ€§èƒ½è¿›è¡Œâ€œåŒ…å¤–ä¼°è®¡â€</li>
</ul>
<h3 id="3-3-ç‰¹ç‚¹"><a href="#3-3-ç‰¹ç‚¹" class="headerlink" title="3.3 ç‰¹ç‚¹"></a>3.3 ç‰¹ç‚¹</h3><blockquote>
<p>ä»åå·®-æ–¹å·®è§’åº¦çœ‹ï¼ŒBaggingä¸»è¦å…³æ³¨é™ä½æ–¹å·®ï¼Œå› æ­¤å®ƒåœ¨ä¸å‰ªæå†³ç­–æ ‘ã€ç¥ç»ç½‘ç»œç­‰æ˜“å—æ ·æœ¬æ‰°åŠ¨çš„å­¦ä¹ å™¨ä¸Šæ•ˆç”¨æ˜æ˜¾.</p>
</blockquote>
<h2 id="4-Random-Forest-éšæœºæ£®æ—"><a href="#4-Random-Forest-éšæœºæ£®æ—" class="headerlink" title="4. Random Forest éšæœºæ£®æ—"></a>4. Random Forest éšæœºæ£®æ—</h2><p>Bagging çš„ä¸€ä¸ªæ‰©å±•å˜ä½“</p>
<h3 id="4-1-æ¦‚è¿°"><a href="#4-1-æ¦‚è¿°" class="headerlink" title="4.1 æ¦‚è¿°"></a>4.1 æ¦‚è¿°</h3><ul>
<li>ä»¥å†³ç­–æ ‘ä¸ºåŸºå­¦ä¹ å™¨æ„å»ºBaggingé›†æˆ</li>
<li>åœ¨å†³ç­–æ ‘çš„è®­ç»ƒè¿‡ç¨‹ä¸­å¼•å…¥äº†éšæœºå±æ€§é€‰æ‹©</li>
</ul>
<blockquote>
<p>ä¼ ç»Ÿå†³ç­–æ ‘åœ¨é€‰æ‹©åˆ’åˆ†å±æ€§æ—¶æ˜¯åœ¨å½“å‰ç»“ç‚¹çš„å±æ€§é›†åˆä¸­é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜å±æ€§ï¼›è€Œåœ¨éšæœºæ£®æ—ä¸­ï¼Œå¯¹åŸºå†³ç­–æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œ<strong>å…ˆä»è¯¥èŠ‚ç‚¹å±æ€§é›†åˆä¸­éšæœºé€‰æ‹©ä¸€ä¸ªåŒ…å«kä¸ªå±æ€§çš„å­é›†</strong>ï¼Œç„¶åå†ä»è¿™ä¸ªå­é›†ä¸­é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜å±æ€§ç”¨äºåˆ’åˆ†ï¼Œå…¶ä¸­<code>k</code>æ§åˆ¶äº†éšæœºæ€§çš„å¼•å…¥ç¨‹åº¦</p>
</blockquote>
<h3 id="4-2-ç‰¹ç‚¹"><a href="#4-2-ç‰¹ç‚¹" class="headerlink" title="4.2 ç‰¹ç‚¹"></a>4.2 ç‰¹ç‚¹</h3><blockquote>
<ul>
<li>ç®€å•ã€æ˜“äºå®ç°ã€è®¡ç®—å¼€é”€å°</li>
<li>æ ·æœ¬æ‰°åŠ¨+å±æ€§æ‰°åŠ¨</li>
</ul>
</blockquote>
<h3 id="4-3-bagging-vs-éšæœºæ£®æ—"><a href="#4-3-bagging-vs-éšæœºæ£®æ—" class="headerlink" title="4.3 bagging vs. éšæœºæ£®æ—"></a>4.3 bagging vs. éšæœºæ£®æ—</h3><ul>
<li>ä¸¤è€…æ”¶æ•›æ€§ç›¸ä¼¼ï¼Œéšæœºæ£®æ—çš„èµ·å§‹æ€§èƒ½å¾€å¾€ç›¸å¯¹è¾ƒå·®ï¼Œä½†ä¼šæ”¶æ•›åˆ°æ›´ä½çš„æ³›åŒ–è¯¯å·®</li>
<li>éšæœºæ£®æ—çš„è®­ç»ƒæ•ˆç‡å¸¸ä¼˜äºBaggingï¼Œä¸»è¦æ˜¯å†³ç­–æ ‘åˆ’åˆ†å±æ€§æ—¶ï¼ŒåŸå§‹bagginéœ€è¦å¯¹å±æ€§å…¨é›†è¿›è¡Œè€ƒè™‘ï¼Œè€Œ <strong>RF</strong> æ˜¯é’ˆå¯¹ä¸€ä¸ªå­é›†</li>
</ul>
<h2 id="5-ç»“åˆç­–ç•¥"><a href="#5-ç»“åˆç­–ç•¥" class="headerlink" title="5. ç»“åˆç­–ç•¥"></a>5. ç»“åˆç­–ç•¥</h2><h3 id="5-1-å­¦ä¹ å™¨ç»“åˆçš„å¥½å¤„"><a href="#5-1-å­¦ä¹ å™¨ç»“åˆçš„å¥½å¤„" class="headerlink" title="5.1 å­¦ä¹ å™¨ç»“åˆçš„å¥½å¤„"></a>5.1 å­¦ä¹ å™¨ç»“åˆçš„å¥½å¤„</h3><blockquote>
<ul>
<li>ç»Ÿè®¡çš„è§’åº¦ï¼šå‡è®¾ç©ºé—´å¾ˆå¤§æ—¶ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªå‡è®¾åœ¨è®­ç»ƒé›†ä¸Šè¾¾åˆ°åŒç­‰æ€§èƒ½ï¼Œä½†å­¦ä¹ å…¶å¯èƒ½è¯¯é€‰å¯¼è‡´æ³›åŒ–æ€§èƒ½ä¸ä½³ï¼Œç»“åˆå¤šä¸ªå­¦ä¹ å™¨å¯ä»¥å‡å°è¯¥é£é™©</li>
<li>è®¡ç®—çš„è§’åº¦ï¼šé™ä½é™·å…¥ç³Ÿç³•å±€éƒ¨æå°ç‚¹çš„é£é™©</li>
<li>è¡¨ç¤ºçš„è§’åº¦ï¼šç»“åˆå¤šä¸ªå­¦ä¹ å™¨å¯æ‰©å¤§å‡è®¾ç©ºé—´ï¼Œå¯¹äºçœŸå®å‡è®¾åœ¨å‡è®¾ç©ºé—´ä¹‹å¤–çš„æƒ…å½¢å¯èƒ½å­¦å¾—æ›´å¥½çš„è¿‘ä¼¼</li>
</ul>
</blockquote>
<h3 id="5-2-ç­–ç•¥"><a href="#5-2-ç­–ç•¥" class="headerlink" title="5.2 ç­–ç•¥"></a>5.2 ç­–ç•¥</h3><p><strong>å¹³å‡æ³•(Averaging)</strong></p>
<blockquote>
<ul>
<li>ç®€å•å¹³å‡æ³•</li>
<li>åŠ æƒå¹³å‡æ³•</li>
</ul>
</blockquote>
<p><strong>æŠ•ç¥¨æ³•(Voting)</strong></p>
<blockquote>
<ul>
<li>å¤šæ•°æŠ•ç¥¨æ³•</li>
<li>åŠ æƒæŠ•ç¥¨æ³•</li>
<li>è‹¥æŒ‰ä¸ªä½“å­¦ä¹ å™¨è¾“å‡ºå€¼ç±»å‹åˆ’åˆ† (ç¡¬æŠ•ç¥¨ï¼šé¢„æµ‹ä¸º0/1 | è½¯æŠ•ç¥¨ï¼šç›¸å½“äºå¯¹åéªŒæ¦‚ç‡çš„ä¸€ä¸ªä¼°è®¡)</li>
</ul>
</blockquote>
<p><strong>å­¦ä¹ æ³•</strong></p>
<blockquote>
<p>Stacking:å…ˆä»åˆå§‹æ•°æ®é›†è®­ç»ƒå‡ºåˆçº§å­¦ä¹ å™¨ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°æ®é›†ç”¨äºè®­ç»ƒå…ƒå­¦ä¹ å™¨ï¼Œåœ¨è¿™ä¸ªæ–°æ•°æ®é›†ä¸­ï¼Œåˆçº§å­¦ä¹ å™¨çš„è¾“å‡ºè¢«å½“ä½œæ ·ä¾‹è¾“å…¥ç‰¹å¾ï¼Œè€Œåˆå§‹æ ·æœ¬çš„æ ‡è®°ä»è¢«å½“ä½œæ ·ä¾‹æ ‡è®°ï¼›ä¸€èˆ¬ä½¿ç”¨äº¤å‰éªŒè¯æ³•æˆ–ç•™ä¸€æ³•æ¥ç”¨è®­ç»ƒåˆçº§å­¦ä¹ å™¨æœªä½¿ç”¨çš„æ ·æœ¬æ¥äº§ç”Ÿå…ƒå­¦ä¹ å™¨çš„è®­ç»ƒæ ·æœ¬</p>
</blockquote>
<p><strong>Notes</strong>: å…³äºStacking</p>
<blockquote>
<p>-ã€Šæœºå™¨å­¦ä¹ ã€‹ä½œè€…ä¹ŸæŒ‡å‡ºStackingæœ¬èº«æ˜¯ä¸€ç§è‘—åçš„é›†æˆæ–¹æ³•ï¼Œä¸”æœ‰ä¸å°‘å˜ä½“å’Œç‰¹ä¾‹ï¼Œä½†ä»–è¿™é‡Œæ˜¯ä½œä¸ºä¸€ç§ç‰¹æ®Šçš„ç»“åˆç­–ç•¥çœ‹å¾…</p>
<ul>
<li>å…³äºStackingçš„ç»†èŠ‚è¯¦è¿°ï¼Œ<a href="https://dnc1994.com/2016/04/rank-10-percent-in-first-kaggle-competition/" target="_blank" rel="external">å¦‚ä½•åœ¨ Kaggle é¦–æˆ˜ä¸­è¿›å…¥å‰ 10%</a> ä»¥ä¸€å¹…å›¾æ¥è¯´è¯´æ˜5æŠ˜Stackingçš„è¿‡ç¨‹</li>
<li>æ¨èä¸€ä¸ªPythonçš„å®ç°äº†Stackingé›†æˆçš„åº“mlxtend</li>
</ul>
</blockquote>
<p><img src="/images/ml/ensumble/stacking-1.jpg" width="800"></p>
<p>åŸä½œè€…ä¸¾äº†ä¸€ä¸ª5æŠ˜stackingçš„ä¾‹å­ï¼ŒåŸºæœ¬æ–¹æ³•æ˜¯ï¼Œ</p>
<ul>
<li>æ¯ä¸€æŠ˜å–è®­ç»ƒé›†80%çš„æ•°æ®è®­ç»ƒä¸€ä¸ªåŸºæ¨¡å‹å¹¶å¯¹å‰©ä¸‹çš„20%çš„æ•°æ®è¿›è¡Œé¢„æµ‹ï¼ŒåŒæ—¶å°†è¯¥æ¨¡å‹å¯¹æµ‹è¯•é›†åšå‡ºé¢„æµ‹ï¼Œä¿ç•™è®­ç»ƒå­é›†çš„é¢„æµ‹ç»“æœå’Œæµ‹è¯•é›†çš„é¢„æµ‹ç»“æœ</li>
<li>å°†5æŠ˜çš„è®­ç»ƒå­é›†é¢„æµ‹ç»“æœç»“åˆèµ·æ¥æ„æˆç¬¬äºŒå±‚å…ƒæ¨¡å‹çš„è¾“å…¥ç‰¹å¾è¿›è¡Œè®­ç»ƒå¾—åˆ°å…ƒåˆ†ç±»å™¨</li>
<li>å°†å‰é¢æ¯ä¸€æŠ˜åœ¨æµ‹è¯•é›†é¢„æµ‹å¾—åˆ°çš„ç»“æœå–å‡å€¼ä½œä¸ºæœ€ç»ˆå…ƒåˆ†ç±»å™¨çš„é¢„æµ‹è¾“å…¥(æœ€ç»ˆçš„æµ‹è¯•æ•°æ®)ï¼Œå¹¶ä½¿ç”¨è®­ç»ƒå¥½çš„å…ƒåˆ†ç±»å™¨åœ¨è¯¥æ•°æ®ä¸Šä½œå‡ºæœ€ç»ˆé¢„æµ‹</li>
</ul>
<p>æ­¤å¤–<a href="https://zhuanlan.zhihu.com/p/27424282" target="_blank" rel="external">çŸ¥ä¹ä¸Šçš„ä¸€ç¯‡æ–‡ç« è¿˜æåˆ°</a></p>
<blockquote>
<p>å¯ä»¥å°†Kä¸ªæ¨¡å‹å¯¹Test Dataçš„é¢„æµ‹ç»“æœæ±‚å¹³å‡ï¼Œä¹Ÿå¯ä»¥ç”¨æ‰€æœ‰çš„Train Dataé‡æ–°è®­ç»ƒä¸€ä¸ªæ–°æ¨¡å‹æ¥é¢„æµ‹Test Data</p>
</blockquote>
<h2 id="6-å¤šæ ·æ€§"><a href="#6-å¤šæ ·æ€§" class="headerlink" title="6. å¤šæ ·æ€§"></a>6. å¤šæ ·æ€§</h2><h3 id="6-1-è¯¯å·®-åˆ†æ­§åˆ†è§£"><a href="#6-1-è¯¯å·®-åˆ†æ­§åˆ†è§£" class="headerlink" title="6.1 è¯¯å·®-åˆ†æ­§åˆ†è§£"></a>6.1 è¯¯å·®-åˆ†æ­§åˆ†è§£</h3><ul>
<li>é›†æˆå­¦ä¹ â€œå¥½è€Œä¸åŒâ€çš„ç†è®ºåˆ†æï¼Œè§ã€Šæœºå™¨å­¦ä¹ ã€‹P185~186</li>
<li>å¯»æ‰¾ é›†æˆæ³›åŒ–è¯¯å·®ã€ä¸ªä½“å­¦ä¹ å™¨æ³›åŒ–è¯¯å·®ã€ä¸ªä½“å­¦ä¹ å™¨é—´ çš„åˆ†æ­§ä¸‰è€…ä¹‹é—´çš„å…³ç³»</li>
</ul>
<h3 id="6-2-å¤šæ ·æ€§åº¦é‡"><a href="#6-2-å¤šæ ·æ€§åº¦é‡" class="headerlink" title="6.2 å¤šæ ·æ€§åº¦é‡"></a>6.2 å¤šæ ·æ€§åº¦é‡</h3><blockquote>
<p>å¤šæ ·æ€§åº¦é‡æ˜¯ç”¨äºåº¦é‡é›†æˆä¸­ä¸ªä½“åˆ†ç±»å™¨çš„å¤šæ ·æ€§ï¼Œå³ä¼°ç®—ä¸ªä½“å­¦ä¹ å™¨çš„å¤šæ ·åŒ–ç¨‹åº¦ï¼Œå…¸å‹åšæ³•æ˜¯è€ƒè™‘ä¸ªä½“åˆ†ç±»å™¨çš„ä¸¤ä¸¤ç›¸ä¼¼/ä¸ç›¸ä¼¼æ€§</p>
<p>åº¦é‡æ–¹æ³• {ä¸åˆåº¦é‡ã€ç›¸å…³ç³»æ•°ã€Q-ç»Ÿè®¡é‡ã€k-ç»Ÿè®¡é‡} </p>
<p>Notes: ç›®å‰æˆ‘è¿˜æ²¡æœ‰åšè¿‡è¿™ç§ç±»ä¼¼æµ‹è¯• ğŸ˜¢</p>
</blockquote>
<h3 id="6-3-å¤šæ ·æ€§å¢å¼º"><a href="#6-3-å¤šæ ·æ€§å¢å¼º" class="headerlink" title="6.3 å¤šæ ·æ€§å¢å¼º"></a>6.3 å¤šæ ·æ€§å¢å¼º</h3><p>å¦‚ä½•å¢å¼ºå¤šæ ·æ€§ï¼Ÿâ€” åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­å¼•å…¥éšæœºæ€§</p>
<ol>
<li>æ•°æ®æ ·æœ¬æ‰°åŠ¨</li>
<li>è¾“å…¥å±æ€§æ‰°åŠ¨</li>
<li>è¾“å‡ºè¡¨ç¤ºæ‰°åŠ¨</li>
<li>ç®—æ³•å‚æ•°æ‰°åŠ¨</li>
</ol>
<p><strong>æ•°æ®æ ·æœ¬æ‰°åŠ¨</strong></p>
<blockquote>
<p>ç»™å®šåˆå§‹æ•°æ®é›†ï¼Œå¯ä»ä¸­äº§ç”Ÿä¸åŒçš„æ•°æ®å­é›†ï¼Œå†åˆ©ç”¨ä¸åŒçš„æ•°æ®å­é›†è®­ç»ƒå‡ºä¸åŒçš„ä¸ªä½“å­¦ä¹ å™¨ï¼Œé€šå¸¸åŸºäºé‡‡æ ·æ³•</p>
</blockquote>
<p><strong>è¾“å…¥å±æ€§æ‰°åŠ¨</strong></p>
<blockquote>
<p>ä»åˆå§‹å±æ€§é›†ä¸­æŠ½å–è‹¥å¹²ä¸ªå±æ€§å­é›†ã€åŸºäºæ¯ä¸ªå±æ€§å­é›†è®­ç»ƒä¸€ä¸ªåŸºå­¦ä¹ å™¨ï¼ˆå¦‚éšæœºå­ç©ºé—´ç®—æ³•ï¼‰ï¼Œæœ€åç»“åˆ</p>
</blockquote>
<p><strong>ç®—æ³•å‚æ•°æ‰°åŠ¨</strong></p>
<p>é€šå¸¸å¯ä»¥é€šè¿‡éšæœºè®¾ç½®ä¸åŒçš„å‚æ•°ï¼Œä»è€Œäº§ç”Ÿå·®åˆ«è¾ƒå¤§çš„ä¸ªä½“å­¦ä¹ å™¨ã€‚</p>
<p><strong>Notes:</strong></p>
<blockquote>
<ul>
<li><p>æ•°æ®æ ·æœ¬æ‰°åŠ¨ä¸­ç›¸å¯¹çš„ç¨³å®šåŸºå­¦ä¹ å™¨åŒ…æ‹¬ï¼šçº¿æ€§å­¦ä¹ å™¨ã€æ”¯æŒå‘é‡æœºã€æœ´ç´ è´å¶æ–¯ã€kè¿‘é‚»å­¦ä¹ å™¨ç­‰</p>
</li>
<li><p>è¾“å…¥å±æ€§æ‰°åŠ¨ : æ„Ÿè§‰å…¸å‹çš„æ˜¯ Random Forest å°±åšäº†è¿™ä»¶äº‹.</p>
</li>
<li><p>å¯¹äºç®—æ³•å‚æ•°æ‰°åŠ¨ï¼Œä¸äº¤å‰éªŒè¯åšæ¯”è¾ƒï¼Œäº¤å‰éªŒè¯å¸¸å¸¸æ˜¯åœ¨ä¸åŒå‚æ•°ç»„åˆæ¨¡å‹é‡Œé€‰æ‹©æœ€ä¼˜å‚æ•°ç»„åˆæ¨¡å‹ï¼Œè€Œé›†æˆåˆ™æ˜¯å°†è¿™äº›ä¸åŒå‚æ•°ç»„åˆçš„æ¨¡å‹ç»“åˆèµ·æ¥ï¼Œæ‰€ä»¥é›†æˆå­¦ä¹ æŠ€æœ¯çš„å®é™…è®¡ç®—å¼€é”€å¹¶ä¸æ¯”ä½¿ç”¨å•ä¸€å­¦ä¹ å™¨å¤§å¾ˆå¤š</p>
</li>
</ul>
</blockquote>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><ul>
<li>å‘¨å¿—åã€Šæœºå™¨å­¦ä¹ ã€‹</li>
<li><a href="https://mlwave.com/kaggle-ensembling-guide/" target="_blank" rel="external">kaggle-ensembling-guide</a></li>
<li><a href="https://www.quora.com/What-are-the-differences-between-the-three-commonly-ensemble-learning-techniques-stacking-boosting-and-bagging" target="_blank" rel="external">Bagging, Boosting &amp; Stacking</a></li>
<li><a href="https://stats.stackexchange.com/questions/18891/bagging-boosting-and-stacking-in-machine-learning/19053#19053" target="_blank" rel="external">stackexchangeåŠè¯„è®ºåŒº</a></li>
<li><a href="https://dnc1994.com/2016/04/rank-10-percent-in-first-kaggle-competition/" target="_blank" rel="external">å¦‚ä½•åœ¨ Kaggle é¦–æˆ˜ä¸­è¿›å…¥å‰ 10%</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/27424282" target="_blank" rel="external">åˆ†åˆ†é’Ÿå¸¦ä½ æ€å…¥Kaggle Top 1%</a></li>
<li><a href="http://izhaoyi.top/2017/07/03/ensemble/" target="_blank" rel="external">æ‡’æ­»éª†é©¼</a></li>
<li>æœºå™¨å­¦ä¹ æŠ€æ³•</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Decision Tree part2]]></title>
      <url>http://shopee.ai/2018/06/27/ml/decisionTree-part2/</url>
      <content type="html"><![CDATA[<p><img src="/images/ml/decision-tree/decision-tree-2.png" width="330" img=""></p>
<a id="more"></a>
<h2 id="1-å†³ç­–æ ‘æ¨¡å‹"><a href="#1-å†³ç­–æ ‘æ¨¡å‹" class="headerlink" title="1. å†³ç­–æ ‘æ¨¡å‹"></a>1. å†³ç­–æ ‘æ¨¡å‹</h2><p>å†³ç­–æ ‘ï¼ˆdecision treeï¼‰æ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼ˆå¯ä»¥æ˜¯äºŒå‰æ ‘æˆ–éäºŒå‰æ ‘ï¼‰</p>
<blockquote>
<p>å…³äº ID3 ä¸ C4.5 çš„å…·ä½“è®¡ç®—æµç¨‹ç¤ºä¾‹ï¼Œè¯·å‚è§ <a href="/2016/08/16/ml-5-decisionTree-part1/">desicion tree (part1)</a></p>
</blockquote>
<h3 id="1-1-å®šä¹‰"><a href="#1-1-å®šä¹‰" class="headerlink" title="1.1. å®šä¹‰"></a>1.1. å®šä¹‰</h3><p>åˆ†ç±»å†³ç­–æ ‘æ¨¡å‹æ˜¯ä¸€ç§æè¿°å¯¹å®ä¾‹è¿›è¡Œåˆ†ç±»çš„æ ‘å½¢ç»“æ„ï¼Œå…¶ä¸­åŒ…å«ä¸¤ç§ç±»å‹çš„èŠ‚ç‚¹</p>
<ol>
<li>å†…éƒ¨èŠ‚ç‚¹: è¡¨ç¤ºä¸€ä¸ª featureï¼ˆå±æ€§ï¼‰</li>
<li>å¶èŠ‚ç‚¹: è¡¨ç¤ºä¸€ä¸ª class</li>
</ol>
<blockquote>
<p>ä¸€èˆ¬å†³ç­–æ ‘å¯ä»¥æ ¹æ®ä»¥ä¸‹å››ä¸ªæ–¹é¢åˆ’åˆ†å½’ç±» :</p>
<ol>
<li>åˆ†æ”¯æ•°</li>
<li>åˆ’åˆ†ç­–ç•¥</li>
<li>ç»ˆæ­¢ç­–ç•¥</li>
<li>åŸºåˆ†ç±»å™¨</li>
</ol>
</blockquote>
<h3 id="1-2-if-thenè§„åˆ™é›†åˆ"><a href="#1-2-if-thenè§„åˆ™é›†åˆ" class="headerlink" title="1.2. if-thenè§„åˆ™é›†åˆ"></a>1.2. if-thenè§„åˆ™é›†åˆ</h3><blockquote>
<ol>
<li>ä¸€æ¡ç”±æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯å¾„ â€“&gt; <strong>ä¸€æ¡è§„åˆ™</strong></li>
<li>è·¯å¾„ä¸Šå†…éƒ¨èŠ‚ç‚¹çš„ç‰¹å¾ â€“&gt; è§„åˆ™çš„æ¡ä»¶</li>
<li>å¶èŠ‚ç‚¹çš„ç±» â€“&gt; è§„åˆ™çš„ç»“è®º class</li>
<li>æ€§è´¨ï¼šäº’æ–¥ä¸”å®Œå¤‡</li>
</ol>
</blockquote>
<h3 id="1-3-æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ"><a href="#1-3-æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ" class="headerlink" title="1.3. æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ"></a>1.3. æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ</h3><blockquote>
<p>ç»™å®š feature æ¡ä»¶ä¸‹ class çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ</p>
</blockquote>
<h2 id="2-å†³ç­–æ ‘çš„å­¦ä¹ "><a href="#2-å†³ç­–æ ‘çš„å­¦ä¹ " class="headerlink" title="2. å†³ç­–æ ‘çš„å­¦ä¹ "></a>2. å†³ç­–æ ‘çš„å­¦ä¹ </h2><p>å†³ç­–æ ‘å­¦ä¹ æœ¬è´¨æ˜¯ä» train datasets ä¸­å½’çº³å‡ºä¸€ç»„åˆ†ç±»è§„åˆ™ï¼Œå¦ä¸€ä¸ªè§’åº¦ï¼Œå­¦ä¹ æ˜¯ç”± train datasets ä¼°è®¡æ¡ä»¶æ¦‚ç‡æ¨¡å‹</p>
<h3 id="2-1-ç›®çš„"><a href="#2-1-ç›®çš„" class="headerlink" title="2.1 ç›®çš„"></a>2.1 ç›®çš„</h3><blockquote>
<p>å¾—åˆ°ä¸€ä¸ªä¸è®­ç»ƒæ•°æ®çŸ›ç›¾è¾ƒå°çš„å†³ç­–æ ‘ï¼ŒåŒæ—¶å…·æœ‰å¾ˆå¥½çš„æ³›åŒ–èƒ½åŠ›</p>
</blockquote>
<h3 id="2-2-ç­–ç•¥"><a href="#2-2-ç­–ç•¥" class="headerlink" title="2.2 ç­–ç•¥"></a>2.2 ç­–ç•¥</h3><blockquote>
<p>ä»¥æŸå¤±å‡½æ•°ï¼ˆé€šå¸¸ä¸ºæ­£åˆ™åŒ–çš„æå¤§ä¼¼ç„¶å‡½æ•°ï¼‰ä¸ºç›®æ ‡å‡½æ•°çš„æœ€å°åŒ–ï¼Œå¹¶åœ¨æŸå¤±å‡½æ•°ç¡®å®šåï¼Œé€‰æ‹©æœ€ä¼˜å†³ç­–æ ‘</p>
</blockquote>
<h3 id="2-3-å­¦ä¹ ç®—æ³•"><a href="#2-3-å­¦ä¹ ç®—æ³•" class="headerlink" title="2.3 å­¦ä¹ ç®—æ³•"></a>2.3 å­¦ä¹ ç®—æ³•</h3><blockquote>
<ol>
<li>ç†è®ºä¸Šï¼š<del>ä»æ‰€æœ‰å¯èƒ½çš„å†³ç­–æ ‘ä¸­é€‰å–æœ€ä¼˜å†³ç­–æ ‘ï¼ŒNPå®Œå…¨é—®é¢˜</del></li>
<li>å®é™…ä¸­ï¼šé‡‡ç”¨å¯å‘å¼æ–¹æ³•ï¼Œè¿‘ä¼¼æ±‚è§£ï¼ˆå¾—åˆ°æ¬¡æœ€ä¼˜å†³ç­–æ ‘ï¼‰â€“&gt; é€’å½’çš„é€‰æ‹©æœ€ä¼˜ç‰¹å¾ï¼Œå¹¶æ ¹æ®è¯¥æœ€ä¼˜ç‰¹å¾å¯¹è®­ç»ƒæ•°æ®è¿›è¡Œåˆ†å‰²ï¼Œä½¿å¾—å¯¹å„ä¸ªå­æ•°æ®é›†æœ‰ä¸€ä¸ªæœ€å¥½çš„åˆ†ç±»çš„è¿‡ç¨‹ã€‚</li>
<li>ä¸»è¦æ­¥éª¤ï¼š (1). ç‰¹å¾é€‰æ‹© (2). å†³ç­–æ ‘çš„ç”Ÿæˆ (3). å†³ç­–æ ‘çš„å‰ªæ</li>
</ol>
</blockquote>
<p>Notes: å†³ç­–æ ‘çš„ç”Ÿæˆå¯¹åº”äºæ¨¡å‹çš„å±€éƒ¨é€‰æ‹©ï¼Œå†³ç­–æ ‘çš„å‰ªæå¯¹åº”äºæ¨¡å‹çš„å…¨å±€é€‰æ‹©ã€‚</p>
<h2 id="3-ç‰¹å¾é€‰æ‹©"><a href="#3-ç‰¹å¾é€‰æ‹©" class="headerlink" title="3. ç‰¹å¾é€‰æ‹©"></a>3. ç‰¹å¾é€‰æ‹©</h2><ul>
<li><p>å®è´¨ ï¼š é€‰å–å¯¹äºè®­ç»ƒæ•°æ®å…·æœ‰åˆ†ç±»èƒ½åŠ›çš„ç‰¹å¾ï¼ˆå†³å®šç”¨å“ªä¸ª <strong>feature</strong> æ¥åˆ’åˆ† <strong>feature space</strong>ï¼‰</p>
</li>
<li><p>å¸¸ç”¨å‡†åˆ™</p>
</li>
</ul>
<blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">Algorithm</th>
<th style="text-align:center">Feature é€‰æ‹©æ–¹æ³•</th>
<th style="text-align:center">Author</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ID3</td>
<td style="text-align:center">Information gain</td>
<td style="text-align:center">Quinlan. 1986</td>
</tr>
<tr>
<td style="text-align:center">C4.5</td>
<td style="text-align:center">Gain ratio</td>
<td style="text-align:center">Quinlan. 1993.</td>
</tr>
<tr>
<td style="text-align:center">CART</td>
<td style="text-align:center">å›å½’æ ‘ï¼š æœ€å°äºŒä¹˜<br>åˆ†ç±»æ ‘ï¼š åŸºå°¼æŒ‡æ•° Gini index</td>
<td style="text-align:center">Breiman. 1984<br>(Classification and Regression Tree åˆ†ç±»ä¸å›å½’æ ‘)</td>
</tr>
</tbody>
</table>
</blockquote>
<h3 id="3-1-ä¿¡æ¯å¢ç›Š-Information-gain"><a href="#3-1-ä¿¡æ¯å¢ç›Š-Information-gain" class="headerlink" title="3.1 ä¿¡æ¯å¢ç›Š Information gain"></a>3.1 ä¿¡æ¯å¢ç›Š Information gain</h3><p>$$<br>g(D, A)=H(D)-H(D|A)<br>$$</p>
<blockquote>
<p>$g(D, A)$å³ä¿¡æ¯å¢ç›Šï¼Œè¡¨ç¤ºå¾—çŸ¥ç‰¹å¾$A$çš„ä¿¡æ¯è€Œä½¿å¾—ç±»$D$çš„ä¿¡æ¯çš„ä¸ç¡®å®šæ€§å‡å°‘çš„ç¨‹åº¦</p>
<p>$H(D)$ ä¸ºé›†åˆ $D$ çš„ä¿¡æ¯ç†µ</p>
<ul>
<li><p>å…¶ä¸­å‡è®¾ $D$ æ˜¯ä¸€ä¸ªå–æœ‰é™ä¸ªå€¼çš„ç¦»æ•£éšæœºå˜é‡ï¼Œæ¦‚ç‡åˆ†å¸ƒä¸º $P(X=x_i)=p_i, i=1, 2,â€¦,n$</p>
</li>
<li><p>ç†µæ˜¯è¡¨ç¤ºéšæœºå˜é‡ä¸ç¡®å®šæ€§çš„åº¦é‡ï¼Œå®šä¹‰ $H(D)=- \sum_{i=1}^n p_ilogp_i$ï¼Œç†µè¶Šå¤§ï¼Œéšæœºå˜é‡çš„ä¸ç¡®å®šæ€§å°±è¶Šå¤§ï¼Œ$0 \leq H(D) \leq logn$</p>
</li>
<li><p>$H(D|A)$ ç»éªŒæ¡ä»¶ç†µåœ¨å·²çŸ¥éšæœºå˜é‡$A$ï¼ˆç‰¹å¾ï¼‰çš„æ¡ä»¶ä¸‹éšæœºå˜é‡ $D$ çš„ä¸ç¡®å®šæ€§$H(D|A)= \sum_{i=1}^{n}p_iH(D|A=a_i)$</p>
</li>
<li><p>ä¸€èˆ¬å°†ç†µ $H(D)$ ä¸æ¡ä»¶ç†µ $H(D|A)$ ä¹‹å·®ç§°ä¸ºäº’ä¿¡æ¯ï¼Œå†³ç­–æ ‘å­¦ä¹ ä¸­çš„ä¿¡æ¯å¢ç›Šç­‰ä»·äºç±»ä¸ç‰¹å¾çš„äº’ä¿¡æ¯</p>
</li>
</ul>
</blockquote>
<p><strong>å°ç»“:</strong></p>
<blockquote>
<ul>
<li><p>ç»™å®šè®­ç»ƒæ•°æ®é›† $D$ å’Œç‰¹å¾ $A$ï¼Œç»éªŒç†µ $H(D)$ è¡¨ç¤ºå¯¹æ•°æ®é›† $D$ è¿›è¡Œåˆ†ç±»çš„ä¸ç¡®å®šæ€§ï¼Œè€Œç»éªŒæ¡ä»¶ç†µ $H(D|A)$ è¡¨ç¤ºåœ¨ç‰¹å¾ $A$ ç»™å®šçš„æ¡ä»¶ä¸‹å¯¹æ•°æ®é›†è¿›è¡Œåˆ†ç±»çš„ä¸ç¡®å®šæ€§ï¼Œå› æ­¤ä¸¤è€…ä¹‹å·®å³<code>ä¿¡æ¯å¢ç›Š</code>è¡¨ç¤ºç”±äºç‰¹å¾ $A$ è€Œä½¿å¾—æ•°æ®é›† $D$ çš„åˆ†ç±»çš„ä¸ç¡®å®šæ€§å‡å°‘çš„ç¨‹åº¦.</p>
</li>
<li><p>å¯¹äºæ•°æ®é›† $D$ è€Œè¨€ï¼Œä¿¡æ¯å¢ç›Šä¾èµ–äºç‰¹å¾ï¼Œ<code>ä¸åŒç‰¹å¾å…·æœ‰ä¸åŒçš„ä¿¡æ¯å¢ç›Šï¼Œä¿¡æ¯å¢ç›Šå¤§çš„ç‰¹å¾å…·æœ‰æ›´å¼ºçš„åˆ†ç±»èƒ½åŠ›</code>ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦æŒ‘é€‰çš„ç›®æ ‡ï¼‰</p>
</li>
</ul>
</blockquote>
<h3 id="3-2-ä¿¡æ¯å¢ç›Šæ¯”-Gain-ratio"><a href="#3-2-ä¿¡æ¯å¢ç›Šæ¯”-Gain-ratio" class="headerlink" title="3.2 ä¿¡æ¯å¢ç›Šæ¯” Gain ratio"></a>3.2 ä¿¡æ¯å¢ç›Šæ¯” Gain ratio</h3><blockquote>
<p>ä»¥ä¿¡æ¯å¢ç›Šä½œä¸ºåˆ’åˆ†è®­ç»ƒæ•°æ®é›†çš„ç‰¹å¾ï¼Œå­˜åœ¨åå‘äº<strong>é€‰æ‹©å–å€¼è¾ƒå¤š</strong>çš„ç‰¹å¾çš„é—®é¢˜ï¼Œä½¿ç”¨ä¿¡æ¯å¢ç›Šæ¯”å¯ä»¥å¯¹è¿™é—®é¢˜è¿›è¡Œæ ¡æ­£.</p>
</blockquote>
<p>ç‰¹å¾$A$å¯¹è®­ç»ƒæ•°æ®é›†$D$çš„ä¿¡æ¯å¢ç›Šæ¯”$g_R(D,A)$å®šä¹‰ä¸ºå…¶ä¿¡æ¯å¢ç›Š$g(D,A)$ä¸è®­ç»ƒæ•°æ®é›†$D$å…³äºç‰¹å¾$A$çš„å€¼çš„ç†µ$H_A(D)$ä¹‹æ¯”ï¼š</p>
<p>$$<br>g_R(D,A)= \frac{g(D,A)}{H_A(D)}<br>$$</p>
<p>å…¶ä¸­</p>
<p>$$<br>H_A(D)=- \sum_{i=1}^{n} \frac{|D_{i}|}{|D|}log_2 \frac{|D_{i}|}{|D|}<br>$$</p>
<blockquote>
<p>$n$ ä¸ºç‰¹å¾ $A$ çš„å–å€¼ä¸ªæ•°ï¼Œ$D_i$ è¡¨ç¤ºæ®ç‰¹å¾ $A$ çš„å–å€¼å°† $D$ åˆ†æˆçš„å­é›†</p>
</blockquote>
<h2 id="4-å†³ç­–æ ‘çš„ç”Ÿæˆ"><a href="#4-å†³ç­–æ ‘çš„ç”Ÿæˆ" class="headerlink" title="4. å†³ç­–æ ‘çš„ç”Ÿæˆ"></a>4. å†³ç­–æ ‘çš„ç”Ÿæˆ</h2><h3 id="4-1-ID3"><a href="#4-1-ID3" class="headerlink" title="4.1 ID3"></a>4.1 ID3</h3><p><strong>æ ¸å¿ƒæ€æƒ³:</strong></p>
<blockquote>
<ul>
<li>åœ¨å†³ç­–æ ‘çš„å„ä¸ªç»“ç‚¹ä¸Šåº”ç”¨ä¿¡æ¯å¢ç›Šå‡†åˆ™é€‰æ‹©ç‰¹å¾ï¼Œé€’å½’åœ°æ„å»ºå†³ç­–æ ‘ã€‚</li>
<li>é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼šæ‰€æœ‰ç‰¹å¾çš„ä¿¡æ¯å¢ç›Šï¼ˆè®¾ç½®ä¿¡æ¯å¢ç›Šçš„é˜ˆå€¼æ¥åˆ¤æ–­æ˜¯å¦è¿›ä¸€æ­¥åˆ’åˆ†ï¼‰å‡å¾ˆå°æˆ–æ²¡ç‰¹å¾å¯é€‰ä¸ºæ­¢.</li>
</ul>
<p>ï¼ˆæ¯é€‰ä¸€ä¸ª<code>ç‰¹å¾</code>åˆ™åæœŸåˆ’åˆ†å­æ ‘ä¸å†ä½¿ç”¨å‰é¢ç”¨è¿‡çš„<code>ç‰¹å¾</code>ï¼Œå› ä¸ºå­æ ‘å·²ç»æ˜¯åœ¨è¯¥ç‰¹å¾ä¸‹å±äºåŒä¸€å–å€¼çš„å®ä¾‹é›†åˆï¼‰</p>
</blockquote>
<p><strong>å†³ç­–æ ‘çš„ç”Ÿæˆ:</strong></p>
<blockquote>
<p>è¾“å…¥ï¼šè®­ç»ƒæ•°æ®é›† $D$ å’Œç‰¹å¾é›† $A$ï¼Œé˜ˆå€¼ $Îµ$ï¼›<br>è¾“å‡ºï¼šå†³ç­–æ ‘ $T$</p>
<p> (1) ï¼ˆå¶å­ç»“ç‚¹ï¼‰è‹¥ $D$ ä¸­æ‰€æœ‰å®ä¾‹å±äºåŒä¸€ç±» $C_k$, åˆ™ $T$ ä¸ºå•èŠ‚ç‚¹æ ‘ï¼Œå¹¶å°†ç±»$C_k$ ä½œä¸ºè¯¥ç»“ç‚¹çš„ç±»æ ‡è®°ï¼Œè¿”å› $T$<br> (2) ï¼ˆç»ˆæ­¢æ¡ä»¶ä¹‹æ²¡æœ‰ç‰¹å¾å¯ä¾›é€‰æ‹©ï¼‰ è‹¥ $A=âˆ…$, åˆ™ $T$ä¸ºå•èŠ‚ç‚¹æ ‘ï¼Œå¹¶å°† $D$ ä¸­å®ä¾‹æ•°æœ€å¤§çš„ç±» $C_k$ ä½œä¸ºè¯¥ç»“ç‚¹çš„ class æ ‡è®°ï¼ˆå¤šæ•°è¡¨å†³è§„åˆ™ï¼‰ï¼Œè¿”å› $T$</p>
<p> (3) ï¼ˆè®¡ç®— $A$ ä¸­å„ç‰¹å¾å¯¹ $D$ çš„<strong>ä¿¡æ¯å¢ç›Š</strong>ï¼Œé€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„ç‰¹å¾ $A_g$<br> (4) ï¼ˆç»ˆæ­¢æ¡ä»¶ä¹‹é˜ˆå€¼) è‹¥ $A_g$ çš„ä¿¡æ¯å¢ç›Šå°äºé˜ˆå€¼ $Îµ$ï¼Œåˆ™ç½® $T$ ä¸ºå•èŠ‚ç‚¹æ ‘ï¼Œå¹¶å°† $D$ ä¸­å®ä¾‹æ•°æœ€å¤§çš„ç±» $C_k$ ä½œä¸ºè¯¥ç»“ç‚¹çš„ç±»æ ‡è®°ï¼Œè¿”å› $T$</p>
<p>(5) å¦åˆ™ï¼Œå¯¹ $A_g$ çš„æ¯ä¸€å¯èƒ½å€¼ $a_i$ï¼Œä¾ $A_g=a_i$ å°† $D$ åˆ’åˆ†ä¸ºè‹¥å¹²éç©ºå­é›† $D_i$ï¼Œå¹¶å°† $D_i$ ä¸­å®ä¾‹æ•°æœ€å¤§çš„ç±»ä½œä¸ºæ ‡è®°æ„å»ºå­èŠ‚ç‚¹ï¼Œè¿”å› $T_i$<br>(6) å¯¹ç¬¬ $i$ ä¸ªå­èŠ‚ç‚¹ï¼Œä»¥ $D_i$ ä¸ºè®­ç»ƒé›†ï¼Œ$A âˆ’ {A_g}$ ä¸ºç‰¹å¾é›†ï¼Œé€’å½’åœ°è°ƒç”¨(1)~(5)å¾—åˆ°å­æ ‘ $T_i$ å¹¶è¿”å›.</p>
</blockquote>
<h3 id="4-2-C4-5"><a href="#4-2-C4-5" class="headerlink" title="4.2 C4.5"></a>4.2 C4.5</h3><p>C4.5ç®—æ³•ä¸ID3ç®—æ³•ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºï¼ŒC4.5åœ¨ç”Ÿæˆçš„è¿‡ç¨‹ä¸­ï¼Œç”¨<code>Gain ratio</code>æ¥é€‰æ‹©ç‰¹å¾ã€‚</p>
<blockquote>
<p>Notes: ä¸Šè¿°å†³ç­–æ ‘çš„ç”Ÿæˆç®—æ³•åªæœ‰æ ‘çš„ç”Ÿæˆï¼Œè€Œä¸”æ˜¯é’ˆå¯¹è®­ç»ƒé›†æ„é€ çš„æ ‘ï¼Œå®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆã€‚</p>
</blockquote>
<h2 id="5-CART-classification-and-regression-tree"><a href="#5-CART-classification-and-regression-tree" class="headerlink" title="5. CART(classification and regression tree)"></a>5. CART(classification and regression tree)</h2><ul>
<li>CART å‡è®¾å†³ç­–æ ‘æ˜¯äºŒå‰æ ‘ï¼Œè€Œ ID3,C4.5 ç”Ÿæˆçš„è¿‡ç¨‹ä¸­å¹¶æ— æ­¤å‡è®¾ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†ä¸¤è€…çš„æ ¹æœ¬ä¸åŒï¼ŒID3,C4.5 æ¯æ¬¡é€‰æ‹©å‡ºæœ€ä½³ç‰¹å¾ä¹‹åï¼Œæ˜¯æŒ‰ç…§è¯¥ç‰¹å¾çš„æ¯ä¸€ä¸ªå–å€¼åˆ’åˆ†å­æ ‘ï¼›</li>
<li>CART åˆ™æ˜¯å¯¹æ¯ä¸€ä¸ªç‰¹å¾ã€æ¯ä¸€ä¸ªç‰¹å¾çš„æ¯ä¸€ä¸ªå–å€¼è®¡ç®—åŸºå°¼æŒ‡æ•°ï¼ˆåˆ†ç±»æ ‘ï¼‰ç„¶åä»æ‰€æœ‰ç‰¹å¾å¯¹åº”çš„å–å€¼è®¡ç®—æ‰€å¾—çš„åŸºå°¼æŒ‡æ•°ä¸­æœ€å°çš„ç‰¹å¾åŠç‰¹å¾å€¼ä½œä¸º<code>åˆ‡åˆ†ç‚¹</code>æ¥åˆ’åˆ†å­æ ‘ï¼Œå¹¶åœ¨è¿™äº›å­ç©ºé—´ä¸Šç¡®å®šé¢„æµ‹çš„æ¦‚ç‡åˆ†å¸ƒï¼Œä¹Ÿå°±æ˜¯åœ¨è¾“å…¥ç»™å®šçš„æ¡ä»¶ä¸‹è¾“å‡ºå¯¹åº”çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ.</li>
</ul>
<h3 id="5-1-CART-çº¯åº¦åº¦é‡"><a href="#5-1-CART-çº¯åº¦åº¦é‡" class="headerlink" title="5.1 CART çº¯åº¦åº¦é‡"></a>5.1 CART çº¯åº¦åº¦é‡</h3><p>CART ä¸­ç”¨äºé€‰æ‹©å˜é‡çš„ä¸çº¯æ€§åº¦é‡æ˜¯ <strong>Gini index</strong>ï¼›å¦‚æœç›®æ ‡å˜é‡æ˜¯æ ‡ç§°çš„ï¼Œå¹¶ä¸”æ˜¯å…·æœ‰ä¸¤ä¸ªä»¥ä¸Šçš„ç±»åˆ«ï¼Œåˆ™ CART å¯èƒ½è€ƒè™‘å°†ç›®æ ‡ç±»åˆ«åˆå¹¶æˆä¸¤ä¸ªè¶…ç±»åˆ«ï¼ˆåŒåŒ–ï¼‰ï¼›å¦‚æœç›®æ ‡å˜é‡æ˜¯è¿ç»­çš„ï¼Œåˆ™ CART æ‰¾å‡ºä¸€ç»„åŸºäºæ ‘çš„å›å½’æ–¹ç¨‹æ¥é¢„æµ‹ç›®æ ‡å˜é‡ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">Algorithm</th>
<th style="text-align:center">Feature Selection</th>
<th style="text-align:center">Author</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CART</td>
<td style="text-align:center">å›å½’æ ‘ï¼š æœ€å°äºŒä¹˜<br>åˆ†ç±»æ ‘ï¼š åŸºå°¼æŒ‡æ•° Gini index</td>
<td style="text-align:center">Breiman. 1984<br>(Classification and Regression Tree åˆ†ç±»ä¸å›å½’æ ‘)</td>
</tr>
</tbody>
</table>
<h3 id="5-2-CART-æ­¥éª¤"><a href="#5-2-CART-æ­¥éª¤" class="headerlink" title="5.2 CART æ­¥éª¤"></a>5.2 CART æ­¥éª¤</h3><p><code>build decision tree</code>æ—¶é€šå¸¸é‡‡ç”¨è‡ªä¸Šè€Œä¸‹çš„æ–¹æ³•ï¼Œåœ¨æ¯ä¸€æ­¥é€‰æ‹©ä¸€ä¸ªæœ€å¥½çš„å±æ€§æ¥åˆ†è£‚ã€‚ â€œæœ€å¥½â€ çš„å®šä¹‰æ˜¯ä½¿å¾—å­èŠ‚ç‚¹ä¸­çš„è®­ç»ƒé›†å°½é‡çš„çº¯ã€‚ä¸åŒçš„ç®—æ³•ä½¿ç”¨ä¸åŒçš„æŒ‡æ ‡æ¥å®šä¹‰â€æœ€å¥½â€ã€‚</p>
<p><strong>CART</strong> æ˜¯åœ¨ç»™å®šè¾“å…¥éšæœºå˜é‡ $X$ æ¡ä»¶ä¸‹æ±‚å¾—è¾“å‡ºéšæœºå˜é‡ $Y$ çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒçš„å­¦ä¹ æ–¹æ³•ã€‚</p>
<blockquote>
<p>å¯ä»¥çœ‹å‡ºCARTç®—æ³•åœ¨å¶èŠ‚ç‚¹è¡¨ç¤ºä¸Šä¸åŒäºID3ã€C4.5æ–¹æ³•ï¼ŒåäºŒè€…å¶èŠ‚ç‚¹å¯¹åº”æ•°æ®å­é›†é€šè¿‡â€œå¤šæ•°è¡¨å†³â€çš„æ–¹å¼æ¥ç¡®å®šä¸€ä¸ªç±»åˆ«ï¼ˆå›ºå®šä¸€ä¸ªå€¼ï¼‰ï¼›è€ŒCARTç®—æ³•çš„å¶èŠ‚ç‚¹å¯¹åº”ç±»åˆ«çš„æ¦‚ç‡åˆ†å¸ƒã€‚å¦‚æ­¤çœ‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ç”¨ CART æ¥å­¦ä¹ ä¸€ä¸ª <code>multi-label</code> çš„åˆ†ç±»ä»»åŠ¡ã€‚</p>
</blockquote>
<p><strong>CART</strong> ç®—æ³•ä¹Ÿä¸»è¦ç”±ä¸¤æ­¥ç»„æˆ:</p>
<ul>
<li>å†³ç­–æ ‘çš„ç”Ÿæˆï¼šåŸºäºè®­ç»ƒæ•°æ®é›†ç”Ÿæˆä¸€æ£µäºŒåˆ†å†³ç­–æ ‘ï¼›</li>
<li>å†³ç­–æ ‘çš„å‰ªæï¼šç”¨éªŒè¯é›†å¯¹å·²ç”Ÿæˆçš„äºŒå‰å†³ç­–æ ‘è¿›è¡Œå‰ªæï¼Œå‰ªæçš„æ ‡å‡†ä¸ºæŸå¤±å‡½æ•°æœ€å°åŒ–ã€‚</li>
</ul>
<p>ç”±äºåˆ†ç±»æ ‘ä¸å›å½’æ ‘åœ¨é€’å½’åœ°æ„å»ºäºŒå‰å†³ç­–æ ‘çš„è¿‡ç¨‹ä¸­ï¼Œé€‰æ‹©ç‰¹å¾åˆ’åˆ†çš„å‡†åˆ™ä¸åŒã€‚</p>
<ul>
<li>äºŒå‰åˆ†ç±»æ ‘æ„å»ºè¿‡ç¨‹ä¸­é‡‡ç”¨<code>åŸºå°¼æŒ‡æ•°ï¼ˆGini Indexï¼‰</code>ä¸ºç‰¹å¾é€‰æ‹©æ ‡å‡†ï¼›</li>
<li>äºŒå‰å›å½’æ ‘é‡‡ç”¨<code>å¹³æ–¹è¯¯å·®æœ€å°åŒ–</code>ä½œä¸ºç‰¹å¾é€‰æ‹©æ ‡å‡†ã€‚</li>
</ul>
<h3 id="5-3-æ ‘çš„æ„å»º"><a href="#5-3-æ ‘çš„æ„å»º" class="headerlink" title="5.3 æ ‘çš„æ„å»º"></a>5.3 æ ‘çš„æ„å»º</h3><h4 id="5-3-1-äºŒå‰å›å½’æ ‘"><a href="#5-3-1-äºŒå‰å›å½’æ ‘" class="headerlink" title="5.3.1 äºŒå‰å›å½’æ ‘"></a>5.3.1 äºŒå‰å›å½’æ ‘</h4><p>è®¾ $X$, $Y$ åˆ†åˆ«ä¸ºè¾“å…¥å’Œè¾“å‡ºå˜é‡ï¼Œå…¶ä¸­ $Y$ ä¸ºè¿ç»­å˜é‡ï¼Œç»™å®šè®­ç»ƒæ•°æ®é›† $D= \lbrace (x_1, y_1), (x_2, y_2),â€¦,(x_N, y_N) \rbrace$</p>
<blockquote>
<p>å†³ç­–æ ‘çš„ç”Ÿæˆå°±æ˜¯é€’å½’åœ°æ„å»ºäºŒå‰å†³ç­–æ ‘çš„è¿‡ç¨‹ï¼Œå¯¹å›å½’æ ‘ç”¨å¹³æ–¹è¯¯å·®æœ€å°åŒ–å‡†åˆ™ï¼Œå¯¹åˆ†ç±»æ ‘ç”¨åŸºå°¼æŒ‡æ•°æœ€å°åŒ–å‡†åˆ™ï¼Œè¿›è¡Œç‰¹å¾é€‰æ‹©ï¼Œç”ŸæˆäºŒå‰æ ‘</p>
</blockquote>
<p>ä¸€ä¸ªå›å½’æ ‘å¯¹åº”ç€è¾“å…¥ç©ºé—´ï¼ˆå³ç‰¹å¾ç©ºé—´ï¼‰çš„ä¸€ä¸ªåˆ’åˆ†ä»¥åŠåœ¨åˆ’åˆ†çš„å•å…ƒä¸Šçš„è¾“å‡ºå€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ä¸»è¦ç›®çš„æ˜¯è¦æ„å»ºå›å½’æ ‘ï¼Œä¹Ÿå°±æ˜¯<strong>å¦‚ä½•åˆ’åˆ†è¾“å…¥ç©ºé—´</strong>ï¼Œå› ä¸ºä¸€æ—¦åˆ’åˆ†å¥½è¾“å…¥ç©ºé—´ï¼Œå¦‚å°†è¾“å…¥ç©ºé—´åˆ’åˆ†ä¸º $M$ ä¸ªå•å…ƒ, $R_1, R_2, â€¦ , R_M$ , å¹¶ä¸”åœ¨æ¯ä¸ªå•å…ƒ $R_m$ ä¸Šæœ‰ä¸€ä¸ªå›ºå®šçš„è¾“å‡ºå€¼ $c_m$ï¼Œé‚£ä¹ˆå›å½’æ ‘çš„æ¨¡å‹å°±å¯ä»¥è¡¨ç¤ºä¸º</p>
<p>$$<br>f(x)=\sum_{m=1}^Mc_mI(x \in R_m)<br>$$</p>
<p><strong>æ¦‚å¿µå¼ºè°ƒ</strong></p>
<p><code>é¦–å…ˆè¦å¼ºè°ƒçš„æ˜¯ CARTå‡è®¾å†³ç­–æ ‘æ˜¯äºŒå‰æ ‘ï¼Œå†…éƒ¨ç»“ç‚¹ç‰¹å¾çš„å–å€¼åªæœ‰â€œæ˜¯â€å’Œâ€œå¦â€ï¼Œå·¦åˆ†æ”¯æ˜¯å–å€¼ä¸ºâ€œæ˜¯â€çš„åˆ†æ”¯ï¼Œæœ‰åˆ†æ”¯åˆ™ç›¸åã€‚è¿™æ ·çš„å†³ç­–æ ‘ç­‰ä»·äºé€’å½’åœ°äºŒåˆ†æ¯ä¸ªç‰¹å¾</code>.</p>
<p><strong>æœ€å°äºŒå‰å›å½’æ ‘ç”Ÿæˆç®—æ³•</strong></p>
<blockquote>
<p>è¾“å…¥ï¼šè®­ç»ƒæ•°æ®é›†$D$ï¼›<br>è¾“å‡ºï¼šå›å½’æ ‘ $f(x)$</p>
<p>ç®—æ³•ï¼šåœ¨è®­ç»ƒé›†æ‰€åœ¨çš„è¾“å…¥ç©ºé—´ä¸­ï¼Œé€’å½’åœ°å°†æ¯ä¸ªåŒºåŸŸåˆ’åˆ†ä¸ºä¸¤ä¸ªå­åŒºåŸŸå¹¶å†³å®šæ¯ä¸ªå­åŒºåŸŸä¸Šè¾“å‡ºå€¼ï¼Œæ„å»ºäºŒå‰å†³ç­–æ ‘</p>
</blockquote>
<p>(1). æ‹©æœ€ä¼˜åˆ‡åˆ†å˜é‡$j$ä¸åˆ‡åˆ†ç‚¹$s$ï¼Œæ±‚è§£</p>
<p>$$<br>\min_{j,s}[\min_{c_1} \sum_{x_i\in R_1(j,s)}(y_i-c_1)^2 + \min_{c_2} \sum_{x_i\in R_2(j,s)}(y_i-c_2)^2]<br>$$</p>
<blockquote>
<p>éå†å˜é‡$j$ï¼Œå¯¹å›ºå®šçš„åˆ‡åˆ†å˜é‡$j$æ‰«æåˆ‡åˆ†ç‚¹$s$ï¼Œé€‰æ‹©ä½¿ä¸Šå¼æœ€å°å€¼çš„å¯¹$(j,s)$ã€‚å…¶ä¸­$R_m$æ˜¯è¢«åˆ’åˆ†çš„è¾“å…¥ç©ºé—´ï¼Œ$c_m$æ˜¯ç©ºé—´$R_m$å¯¹åº”çš„å›ºå®šè¾“å‡ºå€¼ã€‚</p>
</blockquote>
<p>(2). ç”¨é€‰å®šçš„å¯¹$(j,s)$åˆ’åˆ†åŒºåŸŸå¹¶å†³å®šç›¸åº”çš„è¾“å‡ºå€¼ï¼š</p>
<p>$$<br>R_1(j,s)=\lbrace x\mid x^{(j)} \le s \rbrace , \quad R_2(j,s)=\lbrace x \mid x^{(j)} \gt s \rbrace<br>$$</p>
<p>$$<br> \hat c_m = {1\over N_m}\sum_{x_i\in R_m(j,s)}y_i , \quad x\in R_m , m=1,2<br>$$</p>
<p>(3). ç»§ç»­å¯¹ä¸¤ä¸ªå­åŒºåŸŸè°ƒç”¨æ­¥éª¤ï¼ˆ1ï¼‰ï¼Œï¼ˆ2ï¼‰ï¼Œç›´è‡³æ»¡è¶³åœæ­¢æ¡ä»¶ã€‚</p>
<p>(4). å°†è¾“å…¥ç©ºé—´åˆ’åˆ†ä¸º$M$ä¸ªåŒºåŸŸ$R_1$,$R_2$ , â€¦ , $R_M$ï¼Œç”Ÿæˆå†³ç­–æ ‘ï¼š</p>
<p>$$<br>f(x) = \sum_{m=1}^M\hat c_m I(x\in R)<br>$$</p>
<p>ä¸¾ä¸ªğŸŒ°ğŸŒ°ğŸŒ°:</p>
<p>è®­ç»ƒæ•°æ®è§ä¸‹è¡¨ï¼Œ$x$ çš„å–å€¼èŒƒå›´ä¸ºåŒºé—´ $[0.5,10.5]$, $y$ çš„å–å€¼èŒƒå›´ä¸ºåŒºé—´$[5.0,10.0]$ ,å­¦ä¹ è¿™ä¸ªå›å½’é—®é¢˜çš„æœ€å°äºŒå‰å›å½’æ ‘ã€‚</p>
<table>
<thead>
<tr>
<th>$x_i$</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
</tr>
</thead>
<tbody>
<tr>
<td>$y_i$</td>
<td>5.56</td>
<td>5.70</td>
<td>5.91</td>
<td>6.40</td>
<td>6.80</td>
<td>7.05</td>
<td>8.90</td>
<td>8.70</td>
<td>9.00</td>
<td>9.05</td>
</tr>
</tbody>
</table>
<p><strong>é¦–å…ˆæ¥çœ‹è¿™ä¸ªä¼˜åŒ–é—®é¢˜</strong></p>
<p>$$<br>\min_{j,s}[\min_{c_1} \sum_{x_i\in R_1(j,s)}(y_i-c_1)^2 + \min_{c_2} \sum_{x_i\in R_2(j,s)}(y_i-c_2)^2]<br>$$</p>
<p>æ±‚è§£è®­ç»ƒæ•°æ®çš„åˆ‡åˆ†ç‚¹s:</p>
<p>$$<br>R_1(j,s)=\lbrace x\mid x^{(j)} \le s \rbrace , \quad R_2(j,s)=\lbrace x \mid x^{(j)} \gt s \rbrace<br>$$</p>
<p>å®¹æ˜“æ±‚å¾—åœ¨ $R_1$,$R_2$ å†…éƒ¨ä½¿å¾—å¹³æ–¹æŸå¤±è¯¯å·®è¾¾åˆ°æœ€å°å€¼çš„ $c_1$,$c_2$ ä¸ºï¼š</p>
<p>$$<br>c_1={1\over N_1}\sum_{x_i \in R_1}y_i , \quad c_2={1\over N_2}\sum_{x_i \in R_2}y_i<br>$$</p>
<p>è¿™é‡Œ $N_1$,$N_2$ æ˜¯ $R_1$,$R_2$çš„æ ·æœ¬ç‚¹æ•°ã€‚</p>
<p>æ±‚è®­ç»ƒæ•°æ®çš„åˆ‡åˆ†ç‚¹ï¼Œæ ¹æ®æ‰€ç»™æ•°æ®ï¼Œè€ƒè™‘å¦‚ä¸‹åˆ‡åˆ†ç‚¹ï¼š</p>
<p>$$1.5,2.5,3.5,4.5,5.5,6.5,7.5,8.5,9.5$$</p>
<p>å¯¹å„åˆ‡åˆ†ç‚¹ï¼Œä¸éš¾æ±‚å‡ºç›¸åº”çš„ $R_1$ , $R_2$ , $c_1$ , $c_2$ åŠ</p>
<p>$$<br>m(s)=\min_{j,s}[\min_{c_1} \sum_{x_i\in R_1(j,s)}(y_i-c_1)^2 + \min_{c_2} \sum_{x_i\in R_2(j,s)}(y_i-c_2)^2]<br>$$</p>
<p>ä¾‹å¦‚ï¼Œå½“ $s=1.5$ æ—¶ï¼Œ$R_1 = \lbrace 1\rbrace$, $R_2 = \lbrace 2, 3 , \ldots , 10\rbrace$, $c_1 = 5.56$, $c_2 = 7.50$, </p>
<p>$$<br>m(s)=\min_{j,s}[\min_{c_1} \sum_{x_i\in R_1(j,s)}(y_i-c_1)^2 + \min_{c_2} \sum_{x_i\in R_2(j,s)}(y_i-c_2)^2] = 0+15.72 = 15.72<br>$$</p>
<p>ç°å°†$s$åŠ$m(s)$çš„è®¡ç®—ç»“æœåˆ—è¡¨å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>s</th>
<th>1.5</th>
<th>2.5</th>
<th>3.5</th>
<th>4.5</th>
<th>5.5</th>
<th>6.5</th>
<th>7.5</th>
<th>8.5</th>
<th>9.5</th>
</tr>
</thead>
<tbody>
<tr>
<td>m(s)</td>
<td>15.72</td>
<td>12.07</td>
<td>8.36</td>
<td>5.78</td>
<td>3.91</td>
<td>1.93</td>
<td>8.01</td>
<td>11.73</td>
<td>15.74</td>
</tr>
</tbody>
</table>
<p>ç”±ä¸Šè¡¨å¯çŸ¥ï¼Œå½“$x=6.5$çš„æ—¶å€™è¾¾åˆ°æœ€å°å€¼ï¼Œæ­¤æ—¶ $R_1 = \lbrace 1 ,2 , \ldots , 6\rbrace$, $R_2 ={7 ,8 ,9 , 10}$, $c_1 = 6.24$, $c_2 = 8.9$</p>
<p>æ‰€ä»¥å›å½’æ ‘ $T_1(x)$ ä¸ºï¼š</p>
<p>$$<br>T_1(x) =<br>\begin{cases}<br>6.24, &amp; x\lt 6.5 \\<br>8.91, &amp; x \ge 6.5 \\<br>\end{cases}<br>$$</p>
<p>$$<br>f_1(x) = T_1(x)<br>$$</p>
<p>ç”¨ $f_1(x)$ æ‹Ÿåˆè®­ç»ƒæ•°æ®çš„æ®‹å·®è§ä¸‹è¡¨ï¼Œè¡¨ä¸­ $r_{2i} = y_i - f_1(x_i),i=1,2,\ldots , 10$</p>
<table>
<thead>
<tr>
<th>$x_i$</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
</tr>
</thead>
<tbody>
<tr>
<td>$y_i$</td>
<td>-0.68</td>
<td>-0.54</td>
<td>-0.33</td>
<td>0.16</td>
<td>0.56</td>
<td>0.81</td>
<td>-0.01</td>
<td>-0.21</td>
<td>0.09</td>
<td>0.14</td>
</tr>
</tbody>
</table>
<p>ç”¨$f_1(x)$æ‹Ÿåˆè®­ç»ƒæ•°æ®çš„å¹³æ–¹è¯¯å·®ï¼š</p>
<p>$$<br>L(y,f_1(x)) = \sum_{i=1}^{10}(y_i-f_1(x_i))^2 = 1.93<br>$$</p>
<p>ç¬¬2æ­¥æ±‚ $T_2(x)$.æ–¹æ³•ä¸æ±‚ $T_1(x)$ ä¸€æ ·ï¼Œåªæ˜¯æ‹Ÿåˆçš„æ•°æ®æ˜¯ä¸Šè¡¨çš„æ®‹å·®ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p>
<p>$$<br>T_2(x) =<br>\begin{cases}<br>-0.52, &amp; x\lt 3.5 \\<br>0.22, &amp; x \ge 3.5 \\<br>\end{cases}<br>$$</p>
<p>$$<br>f_2(x) = f_1(x) + T_2(x)=<br>\begin{cases}<br>5.72, &amp; x\lt 3.5 \\<br>6.46, &amp; 3.5\le x \lt 6.5 \\<br>9.13, &amp; x\ge 6.5 \\<br>\end{cases}<br>$$</p>
<p>ç”¨$f_2(x)$æ‹Ÿåˆè®­ç»ƒæ•°æ®çš„å¹³æ–¹è¯¯å·®æ˜¯ï¼š</p>
<p>$$<br>L(y,f_2(x)) = \sum_{i=1}^{10}(y_i-f_2(x_i))^2 = 0.79<br>$$</p>
<p>ç»§ç»­æ±‚å¾—</p>
<p>$$<br>T_3(x) =<br>\begin{cases}<br>0.15, &amp; x\lt 6.5 \\<br>-0.22, &amp; x \ge 6.5 \\<br>\end{cases}<br>\quad L(y,f_3(x)) = 0.47 ,<br>$$</p>
<p>$$<br>T_4(x) =<br>\begin{cases}<br>-0.16, &amp; x\lt 4.5 \\<br>0.11, &amp; x \ge 4.5 \\<br>\end{cases}<br>\quad L(y,f_3(x)) = 0.30 ,<br>$$</p>
<p>$$<br>T_5(x) =<br>\begin{cases}<br>0.07, &amp; x\lt 6.5 \\<br>-0.11, &amp; x \ge 6.5 \\<br>\end{cases}<br>\quad L(y,f_3(x)) = 0.23 ,<br>$$</p>
<p>$$<br>T_6(x) =<br>\begin{cases}<br>-0.15, &amp; x\lt 2.5 \<br>0.04, &amp; x \ge 2.5 \<br>\end{cases}<br>$$</p>
<p>$$<br>f_6(x) = f_5(x)+T_6(x) =T_1(x)+ \ldots + T_5(x) + T_6(x)=<br>\begin{cases}<br>5.63, &amp; x\lt 2.5 \\<br>5.82, &amp; 2.5 \le x\lt 3.5 \\<br>6.56, &amp; 3.5 \le x\lt 4.5 \\<br>6.83, &amp; 4.5 \le x\lt 6.5 \\<br>8.95, &amp; x\ge 6.5 \\<br>\end{cases}<br>$$</p>
<p>ç”¨$f_6(x)$æ‹Ÿåˆè®­ç»ƒæ•°æ®çš„å¹³æ–¹æŸå¤±è¯¯å·®æ˜¯</p>
<p>$$<br>L(y,f_6(x)) = \sum_{i=1}^{10}(y_i-f_6(x_i))^2 = 0.71<br>$$</p>
<p>å‡è®¾æ­¤æ—¶å·²ç»æ»¡è¶³è¯¯å·®è¦æ±‚ï¼Œé‚£ä¹ˆ $f(x) = f_6(x)$ å³ä¸ºæ‰€æ±‚çš„å›å½’æ ‘ã€‚</p>
<h4 id="5-3-2-äºŒå‰åˆ†ç±»æ ‘"><a href="#5-3-2-äºŒå‰åˆ†ç±»æ ‘" class="headerlink" title="5.3.2 äºŒå‰åˆ†ç±»æ ‘"></a>5.3.2 äºŒå‰åˆ†ç±»æ ‘</h4><p>äºŒå‰åˆ†ç±»æ ‘ä¸­ç”¨åŸºå°¼æŒ‡æ•°ï¼ˆGini Indexï¼‰ä½œä¸ºæœ€ä¼˜ç‰¹å¾é€‰æ‹©çš„åº¦é‡æ ‡å‡†ã€‚åŸºå°¼æŒ‡æ•°å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p><strong>Gini Index :</strong></p>
<ol>
<li>æ˜¯ä¸€ç§ä¸ç­‰æ€§åº¦é‡ï¼›</li>
<li>é€šå¸¸ç”¨æ¥åº¦é‡æ”¶å…¥ä¸å¹³è¡¡ï¼Œå¯ä»¥ç”¨æ¥åº¦é‡ä»»ä½•ä¸å‡åŒ€åˆ†å¸ƒï¼›</li>
<li>æ˜¯ä»‹äº0~1ä¹‹é—´çš„æ•°ï¼Œ0-å®Œå…¨ç›¸ç­‰ï¼Œ1-å®Œå…¨ä¸ç›¸ç­‰ï¼›</li>
<li>æ€»ä½“å†…åŒ…å«çš„ç±»åˆ«è¶Šæ‚ä¹±ï¼ŒGINIæŒ‡æ•°å°±è¶Šå¤§ï¼ˆè·Ÿç†µçš„æ¦‚å¿µå¾ˆç›¸ä¼¼ï¼‰</li>
</ol>
<p><strong>Gini Index :</strong></p>
<p>åŒæ ·ä»¥åˆ†ç±»ç³»ç»Ÿä¸ºä¾‹ï¼Œæ•°æ®é›† $D$ ä¸­ç±»åˆ« $C$ å¯èƒ½çš„å–å€¼ä¸º$c_1, c_2, \cdots, c_k$ ï¼ˆ$k$æ˜¯ç±»åˆ«æ•°ï¼‰ï¼Œä¸€ä¸ªæ ·æœ¬å±äºç±»åˆ« $c_i$ çš„æ¦‚ç‡ä¸º$p(i)$ã€‚é‚£ä¹ˆæ¦‚ç‡åˆ†å¸ƒçš„ Gini index å…¬å¼è¡¨ç¤ºä¸ºï¼š</p>
<p>$$<br>Gini(D) = 1 - \sum_{i=1}^{k} {p_i}^2    \qquad(fmt.2.1.1)<br>$$</p>
<blockquote>
<p>å…¶ä¸­$p_i = \frac{ç±»åˆ«å±äºc_içš„æ ·æœ¬æ•°}{æ€»æ ·æœ¬æ•°}$ã€‚å¦‚æœæ‰€æœ‰çš„æ ·æœ¬ Category ç›¸åŒï¼Œåˆ™ $p_1 = 1, p_2 = p_3 = \cdots = p_k = 0$ï¼Œåˆ™æœ‰$p_1 = 1, p_2 = p_3 = \cdots = p_k = 0$ï¼Œæ­¤æ—¶æ•°æ®ä¸çº¯åº¦æœ€ä½ã€‚$Gini(D)$ çš„ç‰©ç†å«ä¹‰æ˜¯è¡¨ç¤ºæ•°æ®é›† $D$ çš„ä¸ç¡®å®šæ€§ã€‚æ•°å€¼è¶Šå¤§ï¼Œè¡¨æ˜å…¶ä¸ç¡®å®šæ€§è¶Šå¤§ï¼ˆè¿™ä¸€ç‚¹ä¸ <a href="https://en.wikipedia.org/wiki/Heuristic_(computer_science)" target="_blank" rel="external">Info Entropy</a> ç›¸ä¼¼ï¼‰ã€‚<br>å¦‚æœ $k=2$ï¼ˆäºŒåˆ†ç±»é—®é¢˜ï¼Œç±»åˆ«å‘½åä¸ºæ­£ç±»å’Œè´Ÿç±»ï¼‰ï¼Œè‹¥æ ·æœ¬å±äºæ­£ç±»çš„æ¦‚ç‡æ˜¯ $p$ï¼Œé‚£ä¹ˆå¯¹åº”åŸºå°¼æŒ‡æ•°ä¸ºï¼š</p>
<p>$$<br>\begin{align} Gini(D) &amp; = 1 - [p^2 + {(1-p)}^2] \\ &amp; = \underline {2p (1-p)} \qquad\qquad (fmt.2.1.2)<br>\end{align}<br>$$</p>
</blockquote>
<p>å¦‚æœæ•°æ®é›† $D$ æ ¹æ®ç‰¹å¾ $f$ æ˜¯å¦å–æŸä¸€å¯èƒ½å€¼ $f_âˆ—$ï¼Œå°† $D$ åˆ’åˆ†ä¸º $D_1={(x, y) \in D | f(x) = f_{\ast}}, D_2=D-D_1$ã€‚é‚£ä¹ˆç‰¹å¾ $f$ åœ¨æ•°æ®é›† $D$ ä¸Šçš„ Gini index å®šä¹‰ä¸ºï¼š</p>
<p>$$<br>Gini(D, f=f_{\ast}) = \frac{\vert D_1 \vert}{\vert D \vert} Gini(D_1) + \frac{\vert D_2 \vert}{\vert D \vert} Gini(D_2) \qquad\qquad (fmt.2.1.3)<br>$$</p>
<p>ä»£è¡¨æ€§çš„ä¾‹å­è¯´æ˜ :</p>
<table>
<thead>
<tr>
<th style="text-align:center">ID</th>
<th style="text-align:center">é˜´æ™´(F)</th>
<th style="text-align:center">æ¸©åº¦(F)</th>
<th style="text-align:center">æ¹¿åº¦(F)</th>
<th style="text-align:center">åˆ®é£(F)</th>
<th style="text-align:center">æ˜¯å¦ç©ï¼ˆCï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">sunny</td>
<td style="text-align:center">hot</td>
<td style="text-align:center">high</td>
<td style="text-align:center">false</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">sunny</td>
<td style="text-align:center">hot</td>
<td style="text-align:center">high</td>
<td style="text-align:center">true</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">overcast</td>
<td style="text-align:center">hot</td>
<td style="text-align:center">high</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">rainy</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">high</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">rainy</td>
<td style="text-align:center">cool</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">rainy</td>
<td style="text-align:center">cool</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">true</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">overcast</td>
<td style="text-align:center">cool</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">true</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">sunny</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">high</td>
<td style="text-align:center">false</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">sunny</td>
<td style="text-align:center">cool</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">rainy</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">11</td>
<td style="text-align:center">sunny</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">true</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">overcast</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">high</td>
<td style="text-align:center">true</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">13</td>
<td style="text-align:center">overcast</td>
<td style="text-align:center">hot</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">14</td>
<td style="text-align:center">rainy</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">high</td>
<td style="text-align:center">true</td>
<td style="text-align:center">å¦</td>
</tr>
</tbody>
</table>
<p><strong>ä¸‹å›¾æ˜¯ IG çš„å†³ç­–æ ‘ï¼Œå¹¶ä¸æ˜¯ äºŒåˆ†åˆ†ç±»æ ‘ ${Gini}$ ${index}$ å†³ç­–æ ‘, æ”¾è¿™é‡Œä»…ä»…æ˜¯ä¸ºäº†æ„ŸçŸ¥ä¸€ä¸‹</strong></p>
<p><img src="/images/ml/decision-tree/decision-tree-2.png" width="530" img=""></p>
<p>åœ¨å®é™…æ“ä½œä¸­ï¼Œé€šè¿‡éå†æ‰€æœ‰ç‰¹å¾ï¼ˆå¦‚æœæ˜¯è¿ç»­å€¼ï¼Œéœ€åšç¦»æ•£åŒ–ï¼‰åŠå…¶å–å€¼ï¼Œé€‰æ‹© $Min_{gini-index}$ æ‰€å¯¹åº”çš„ç‰¹å¾å’Œç‰¹å¾å€¼ã€‚</p>
<p>è¿™é‡Œä»ç„¶ä»¥å¤©æ°”æ•°æ®ä¸ºä¾‹ï¼Œç»™å‡ºç‰¹å¾<strong>é˜´æ™´</strong>çš„ Gini index è®¡ç®—è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>(1). å½“ç‰¹å¾â€œé˜´æ™´â€å–å€¼ä¸ºâ€sunnyâ€æ—¶ï¼Œ$D_1 = {1,2,8,9,11}, |D_1|=5$ï¼›$D_2={3,4,5,6,7,10,12,13,14}, |D_2|=9$. æ•°æ®è‡ªå·±å¯¹åº”çš„ç±»åˆ«æ•°åˆ†åˆ«ä¸º $(+2,-3)ã€(+7,-2)$ã€‚å› æ­¤ $Gini(D_1) = 2 \cdot \frac{3}{5} \cdot \frac{2}{5} = \frac{12}{25}$ï¼›$Gini(D_2) = 2 \cdot \frac{7}{9} \cdot \frac{2}{9} = \frac{28}{81}$. å¯¹åº”çš„åŸºå°¼æŒ‡æ•°ä¸ºï¼š<br>$$<br>Gini(C, â€œé˜´æ™´â€=â€sunnyâ€) = \frac{5}{14} Gini(D_1) + \frac{9}{14} Gini(D_2) = \frac{5}{14} \frac{12}{25} + \frac{9}{14} \frac{28}{81} = 0.394 \quad(exp.2.2.1)<br>$$<br>(2). å½“ç‰¹å¾â€œé˜´æ™´â€å–å€¼ä¸ºâ€overcastâ€æ—¶ï¼Œ$D_1 = {2,7,12,13}, |D_1|=4$ï¼›$D_2={1,2,4,5,6,8,9,10,11,14}, |D_2|=10$ã€‚$D_1$ã€$D_2$ æ•°æ®è‡ªå·±å¯¹åº”çš„ç±»åˆ«æ•°åˆ†åˆ«ä¸º $(+4,-0)ã€(+5,-5)$ã€‚å› æ­¤ $Gini(D_1) = 2 \cdot 1 \cdot 0 = 0ï¼›Gini(D_2) = 2 \cdot \frac{5}{10} \cdot \frac{5}{10} = \frac{1}{2}$ å¯¹åº”çš„åŸºå°¼æŒ‡æ•°ä¸ºï¼š<br>$$<br>Gini(C, â€œé˜´æ™´â€=â€overcastâ€) = \frac{4}{14} Gini(D_1) + \frac{10}{14} Gini(D_2) = 0 + \frac{10}{14} \cdot \frac{1}{2} = \frac{5}{14} = 0.357 \quad(exp.2.2.2)<br>$$</p>
<p>(3). å½“ç‰¹å¾â€œé˜´æ™´â€å–å€¼ä¸ºâ€rainyâ€æ—¶ï¼Œ$D_1 = {4,5,6,10,14}, |D_1|=5$; $D_2={1,2,3,7,8,9,11,12,13}, |D_2|=9$ã€‚ $D_1$ã€$D_2$ æ•°æ®è‡ªå·±å¯¹åº”çš„ç±»åˆ«æ•°åˆ†åˆ«ä¸º $(+3,âˆ’2)ã€(+6,âˆ’3)$ã€‚å› æ­¤ $Gini(D_1) = 2 \cdot \frac{3}{5} \cdot \frac{2}{5} = \frac{12}{25}$ï¼›$Gini(D_2) = 2 \cdot \frac{6}{9} \cdot \frac{3}{9} = \frac{4}{9}$ã€‚ å¯¹åº”çš„åŸºå°¼æŒ‡æ•°ä¸ºï¼š<br>$$<br>Gini(C, â€œé˜´æ™´â€=â€rainyâ€) = \frac{5}{14} Gini(D_1) + \frac{9}{14} Gini(D_2) = \frac{5}{14} \frac{12}{25} + \frac{9}{14} \frac{4}{9} = \frac{4}{7} = 0.457 \quad(exp.2.2.3)<br>$$</p>
</blockquote>
<p>å¦‚æœç‰¹å¾â€é˜´æ™´â€æ˜¯æœ€ä¼˜ç‰¹å¾çš„è¯ï¼Œé‚£ä¹ˆç‰¹å¾å–å€¼ä¸ºâ€overcastâ€åº”ä½œä¸ºåˆ’åˆ†èŠ‚ç‚¹ã€‚</p>
<h2 id="6-å†³ç­–æ ‘æ¨¡å‹çš„ä¼˜ç¼ºç‚¹"><a href="#6-å†³ç­–æ ‘æ¨¡å‹çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="6. å†³ç­–æ ‘æ¨¡å‹çš„ä¼˜ç¼ºç‚¹"></a>6. å†³ç­–æ ‘æ¨¡å‹çš„ä¼˜ç¼ºç‚¹</h2><h3 id="6-1-ä¼˜ç‚¹"><a href="#6-1-ä¼˜ç‚¹" class="headerlink" title="6.1 ä¼˜ç‚¹"></a>6.1 ä¼˜ç‚¹</h3><ul>
<li>å¯è§£é‡Šæ€§â€“æ¨¡æ‹Ÿäººç±»å†³ç­–è¿‡ç¨‹</li>
<li>è®­ç»ƒã€é¢„æµ‹æ•ˆç‡è¾ƒé«˜â€“å…³äºå…¶åˆ‡åˆ†æ–¹å¼ï¼Œæ¯æ¬¡æ˜¯åœ¨ä¸€ä¸ªæ¡ä»¶ä¸‹çš„å±€éƒ¨ç©ºé—´åˆ’åˆ†æ ·æœ¬ï¼Œè€Œç±»ä¼¼Adabooståˆ™æ˜¯æ¯æ¬¡åœ¨æ•´ä¸ªç©ºé—´åˆ’åˆ†æ ·æœ¬ï¼Œæ‰€ä»¥å°±å†³ç­–æ ‘è€Œè¨€ç›¸å¯¹é«˜æ•ˆ</li>
<li>é€‚ç”¨äºç±»åˆ«ç±»å‹æ•°æ®â€“decision set(ç©·ä¸¾ç±»åˆ«ç‰¹å¾å€¼ç„¶åæŒ‰ç…§ç‰¹å¾å€¼çš„å­é›†é›†åˆæ¥åˆ’åˆ†æ ·æœ¬)</li>
<li>èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„ç”±äºŒåˆ†ç±»æ¨¡å‹è½¬æ¢ä¸ºå¤šåˆ†ç±»æ¨¡å‹â€“ä¸»è¦ä¿®æ”¹ä¸çº¯åº¦è®¡ç®—ä»¥åŠè¿”å›å€¼çš„è®¾ç½®</li>
<li>èƒ½å¤Ÿå¤„ç†ç¼ºå¤±ç‰¹å¾å€¼â€“ç”¨å…¶ä»–çš„ç‰¹å¾å€¼æ¥æ›¿ä»£è¿›è¡Œåˆ’åˆ†(ä¸€èˆ¬è¦æ±‚æ›¿ä»£ç‰¹å¾åˆ’åˆ†ç»“æœæ¥è¿‘ç¼ºå¤±ç‰¹å¾å€¼)</li>
<li>æ˜“äºå®ç°</li>
</ul>
<h3 id="6-2-ç¼ºç‚¹"><a href="#6-2-ç¼ºç‚¹" class="headerlink" title="6.2 ç¼ºç‚¹"></a>6.2 ç¼ºç‚¹</h3><ul>
<li>ç»éªŒå¤šäºç†è®ºï¼Œå¤§å¤šæ•°å†³ç­–æ ‘æ¨¡å‹æ˜¯æ ¹æ®ç»éªŒæ¥åˆ¤æ–­çš„ï¼Œæ•ˆæœå¥½åå°šæ— è¾ƒå¥½çš„ç†è®ºæ”¯æ’‘</li>
</ul>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><ul>
<li><a href="http://www.cnblogs.com/fengfenggirl/p/classsify_decision_tree.html" target="_blank" rel="external">é€—æ¯”ç®—æ³•å·¥ç¨‹å¸ˆ</a>ã€<a href="http://www.52caml.com/" target="_blank" rel="external">ç®—æ³•æ‚è´§é“º</a></li>
<li><a href="http://www.cnblogs.com/leoo2sk/archive/2010/09/19/decision-tree.html" target="_blank" rel="external">52caml</a>ã€<a href="http://izhaoyi.top/2017/06/19/Decision-Tree" target="_blank" rel="external">æ‡’æ­»éª†é©¼</a></li>
<li><a href="http://blog.csdn.net/ljp812184246/article/details/47402639" target="_blank" rel="external">å†³ç­–æ ‘ID3ã€C4.5ã€CARTç®—æ³•ï¼šä¿¡æ¯ç†µï¼ŒåŒºåˆ«ï¼Œå‰ªæç†è®ºæ€»ç»“</a></li>
<li><a href="https://www.zybuluo.com/mdeditor" target="_blank" rel="external">Markdown å­¦ä¹ å¥½æ•™æ</a>ã€<a href="https://cethik.vip/2016/09/21/machineCAST/" target="_blank" rel="external">CARTä¹‹å›å½’æ ‘æ„å»º</a></li>
<li>ã€Šæœºå™¨å­¦ä¹ å¯¼è®ºã€‹ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Support Vecor Machine (å…­éƒ¨æ›²)]]></title>
      <url>http://shopee.ai/2018/06/20/ml/svm-hanxiaoyang/</url>
      <content type="html"><![CDATA[<p>Support Vecor Machine, è‡ªä¸€è¯ç”Ÿä¾¿ç”±äºå®ƒè‰¯å¥½çš„åˆ†ç±»æ€§èƒ½å¸­å·äº†æœºå™¨å­¦ä¹ é¢†åŸŸï¼Œå¹¶ç‰¢ç‰¢å‹åˆ¶äº†ç¥ç»ç½‘ç»œé¢†åŸŸå¥½å¤šå¹´ã€‚ å¦‚æœä¸è€ƒè™‘é›†æˆå­¦ä¹ çš„ç®—æ³•ï¼Œä¸è€ƒè™‘ç‰¹å®šçš„è®­ç»ƒæ•°æ®é›†ï¼Œåœ¨åˆ†ç±»ç®—æ³•ä¸­çš„è¡¨ç°SVMè¯´æ˜¯æ’ç¬¬ä¸€ä¼°è®¡æ˜¯æ²¡æœ‰ä»€ä¹ˆå¼‚è®®çš„.</p>
<a id="more"></a>
<h2 id="1-SVM-é—´éš”-Margin"><a href="#1-SVM-é—´éš”-Margin" class="headerlink" title="1. SVM é—´éš” Margin"></a>1. SVM é—´éš” Margin</h2><ol>
<li>æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯åˆ†ç¦»è¶…å¹³é¢ï¼Œ Margin</li>
</ol>
<p>è¯¦æƒ…å¯å‚ : <a href="https://blog.csdn.net/han_xiaoyang/article/details/52678373" target="_blank" rel="external">æœºå™¨å­¦ä¹ ç³»åˆ—(13)_SVMç¢ç¢å¿µpart1ï¼šé—´éš”</a></p>
<blockquote>
<p>è®¤è¯†ä¸€ä¸‹SVMä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µï¼šMarginï¼Œä¹Ÿå°±æ˜¯é—´éš”ã€‚</p>
</blockquote>
<h2 id="2-SVM-å‘é‡ä¸ç©ºé—´è·ç¦»"><a href="#2-SVM-å‘é‡ä¸ç©ºé—´è·ç¦»" class="headerlink" title="2. SVM å‘é‡ä¸ç©ºé—´è·ç¦»"></a>2. SVM å‘é‡ä¸ç©ºé—´è·ç¦»</h2><ol>
<li>ä»å‘é‡åˆ°è·ç¦»è®¡ç®— (å‘é‡å®šä¹‰ã€è®¡ç®—æ–¹å‘å‘é‡ã€å‘é‡çš„å’Œä¸å·®ã€å‘é‡å†…ç§¯ã€å‘é‡æ­£äº¤æŠ•å½±)</li>
<li>SVMçš„è¶…å¹³é¢ (1 è®¡ç®—ç‚¹åˆ°è¶…å¹³é¢è·ç¦»ã€2 è®¡ç®—è¶…å¹³é¢çš„é—´éš”)</li>
</ol>
<p>è¯¦æƒ…å¯å‚ : <a href="https://blog.csdn.net/han_xiaoyang/article/details/52679559" target="_blank" rel="external">æœºå™¨å­¦ä¹ ç³»åˆ—(14)_SVMç¢ç¢å¿µpart2ï¼šSVMä¸­çš„å‘é‡ä¸ç©ºé—´è·ç¦»</a></p>
<blockquote>
<p>å›é¡¾äº†ä¸€ä¸‹å‘é‡ä¸­çš„ä¸€äº›æ¦‚å¿µï¼Œä¾ç”¨å‘é‡çš„çŸ¥è¯†ï¼Œæ€ä¹ˆå¸®åŠ©æˆ‘ä»¬å»è®¡ç®—è¶…å¹³é¢é—´éš”ï¼Œæœ‰å…´è¶£çš„åŒå­¦è¯·æ¥ç€çœ‹part3</p>
<p>$ w^{T}X = 0 $ï¼Œ w</p>
</blockquote>
<h2 id="3-SVM-å¦‚ä½•æ‰¾åˆ°æœ€ä¼˜åˆ†ç¦»è¶…å¹³é¢"><a href="#3-SVM-å¦‚ä½•æ‰¾åˆ°æœ€ä¼˜åˆ†ç¦»è¶…å¹³é¢" class="headerlink" title="3. SVM å¦‚ä½•æ‰¾åˆ°æœ€ä¼˜åˆ†ç¦»è¶…å¹³é¢"></a>3. SVM å¦‚ä½•æ‰¾åˆ°æœ€ä¼˜åˆ†ç¦»è¶…å¹³é¢</h2><ol>
<li>å¦‚ä½•æ‰¾åˆ°æœ€ä¼˜è¶…å¹³é¢</li>
<li>å¦‚ä½•è®¡ç®—ä¸¤è¶…å¹³é¢é—´çš„è·ç¦»</li>
<li>SVMçš„æœ€ä¼˜åŒ–é—®é¢˜æ˜¯ä»€ä¹ˆ</li>
</ol>
<blockquote>
<p>æ‰¾åˆ°ä¸¤ä¸ªå¹³è¡Œè¶…å¹³é¢ï¼Œå¯ä»¥åˆ’åˆ†æ•°æ®å¹¶ä¸”ä¸¤å¹³é¢ä¹‹é—´æ²¡æœ‰æ•°æ®ç‚¹<br>ä¸¤ä¸ªè¶…å¹³é¢ä¹‹é—´çš„è·ç¦»æœ€å¤§åŒ–</p>
</blockquote>
<p>è¯¦æƒ…å¯å‚ : <a href="https://blog.csdn.net/han_xiaoyang/article/details/52683653" target="_blank" rel="external">æœºå™¨å­¦ä¹ ç³»åˆ—(15)_SVMç¢ç¢å¿µpart3ï¼šå¦‚ä½•æ‰¾åˆ°æœ€ä¼˜åˆ†ç¦»è¶…å¹³é¢</a></p>
<h2 id="4-SVM-æ— çº¦æŸæœ€å°åŒ–é—®é¢˜"><a href="#4-SVM-æ— çº¦æŸæœ€å°åŒ–é—®é¢˜" class="headerlink" title="4. SVM æ— çº¦æŸæœ€å°åŒ–é—®é¢˜"></a>4. SVM æ— çº¦æŸæœ€å°åŒ–é—®é¢˜</h2><p>è¯¦æƒ…å¯å‚ : <a href="https://blog.csdn.net/han_xiaoyang/article/details/79079540" target="_blank" rel="external">æœºå™¨å­¦ä¹ ç³»åˆ—(21)_SVMç¢ç¢å¿µpart4ï¼šæ— çº¦æŸæœ€å°åŒ–é—®é¢˜</a></p>
<h2 id="5-SVM-å‡¸å‡½æ•°ä¸ä¼˜åŒ–"><a href="#5-SVM-å‡¸å‡½æ•°ä¸ä¼˜åŒ–" class="headerlink" title="5. SVM å‡¸å‡½æ•°ä¸ä¼˜åŒ–"></a>5. SVM å‡¸å‡½æ•°ä¸ä¼˜åŒ–</h2><p>è¯¦æƒ…å¯å‚ : <a href="https://blog.csdn.net/yaoqiang2011/article/details/79080100" target="_blank" rel="external">æœºå™¨å­¦ä¹ ç³»åˆ—(22)_SVMç¢ç¢å¿µpart5ï¼šå‡¸å‡½æ•°ä¸ä¼˜åŒ–</a></p>
<h2 id="6-SVM-å¯¹å¶å’Œæ‹‰æ ¼æœ—æ—¥ä¹˜å­"><a href="#6-SVM-å¯¹å¶å’Œæ‹‰æ ¼æœ—æ—¥ä¹˜å­" class="headerlink" title="6. SVM å¯¹å¶å’Œæ‹‰æ ¼æœ—æ—¥ä¹˜å­"></a>6. SVM å¯¹å¶å’Œæ‹‰æ ¼æœ—æ—¥ä¹˜å­</h2><p>è¯¦æƒ…å¯å‚ : <a href="https://blog.csdn.net/yaoqiang2011/article/details/79080123" target="_blank" rel="external">æœºå™¨å­¦ä¹ ç³»åˆ—(23)_SVMç¢ç¢å¿µpart6ï¼šå¯¹å¶å’Œæ‹‰æ ¼æœ—æ—¥ä¹˜å­</a></p>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[é˜¿æ»´è‹±æ–‡ï½œæœƒè®“ä½ å¢œå…¥æ„›æ²³çš„é›»å½±! æµªæ¼«æ„›æƒ…é›»å½±å°è©åˆ†äº«!]]></title>
      <url>http://shopee.ai/2018/05/06/English/english-RD-moives-1/</url>
      <content type="html"><![CDATA[<p><img src="/images/english/RD-moive-1-0.jpg" width="400"></p>
<a id="more"></a>
<h2 id="1-The-Lucky-One"><a href="#1-The-Lucky-One" class="headerlink" title="1. The Lucky One"></a>1. The Lucky One</h2><p><img src="/images/english/RD-moive-1-2.jpg" width="650"></p>
<h3 id="classical-lines"><a href="#classical-lines" class="headerlink" title="classical lines"></a>classical lines</h3><p><img src="/images/english/RD-moive-1-3.jpg" width="650"></p>
<h2 id="2-Safe-Haven"><a href="#2-Safe-Haven" class="headerlink" title="2. Safe Haven"></a>2. Safe Haven</h2><p><img src="/images/english/RD-moive-1-4.jpg" width="650"></p>
<h3 id="classical-lines-1"><a href="#classical-lines-1" class="headerlink" title="classical lines"></a>classical lines</h3><p><img src="/images/english/RD-moive-1-5.jpg" width="650"></p>
<h2 id="3-The-Choice"><a href="#3-The-Choice" class="headerlink" title="3. The Choice"></a>3. The Choice</h2><p><img src="/images/english/RD-moive-1-6.jpg" width="650"></p>
<h3 id="classical-lines-2"><a href="#classical-lines-2" class="headerlink" title="classical lines"></a>classical lines</h3><p><img src="/images/english/RD-moive-1-7.jpg" width="650"></p>
<p><img src="/images/english/RD-moive-1-8.jpg" width="650"></p>
<h2 id="4-The-Notebook"><a href="#4-The-Notebook" class="headerlink" title="4. The Notebook"></a>4. The Notebook</h2><p><img src="/images/english/RD-moive-1-9.jpg" width="650"></p>
<h3 id="leading-actor-and-actress"><a href="#leading-actor-and-actress" class="headerlink" title="leading actor and actress"></a>leading actor and actress</h3><p><img src="/images/english/RD-moive-1-10.jpg" width="650"></p>
<h3 id="classical-lines-3"><a href="#classical-lines-3" class="headerlink" title="classical lines"></a>classical lines</h3><p><img src="/images/english/RD-moive-1-12.jpg" width="650"></p>
<h3 id="the-wedding"><a href="#the-wedding" class="headerlink" title="the wedding"></a>the wedding</h3><p><img src="/images/english/RD-moive-1-11.jpg" width="650"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://nicholassparks.com/" target="_blank" rel="external">Nicholas Sparks</a></li>
</ul>
<div class="video-container"><iframe src="//www.youtube.com/embed/rpizH_ZNIy8" frameborder="0" allowfullscreen></iframe></div>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[äº’è”ç½‘é‡‘èé£æ§ä¸­çš„æ•°æ®ç§‘å­¦ (part3) ï¼š Lending Club çš„æ•°æ®è¯•éªŒ]]></title>
      <url>http://shopee.ai/2018/04/23/datascience/internet-finance-3/</url>
      <content type="html"><![CDATA[<p>ç”¨æˆ·å…¨æµç¨‹æ¬ºè¯ˆâ»›é™©è¯„åˆ†ä½“ç³»</p>
<a id="more"></a>
<h2 id="åæ¬ºè¯ˆæ˜¯ä¸€ç§æœºå™¨å­¦ä¹ è¿‡ç¨‹"><a href="#åæ¬ºè¯ˆæ˜¯ä¸€ç§æœºå™¨å­¦ä¹ è¿‡ç¨‹" class="headerlink" title="åæ¬ºè¯ˆæ˜¯ä¸€ç§æœºå™¨å­¦ä¹ è¿‡ç¨‹"></a>åæ¬ºè¯ˆæ˜¯ä¸€ç§æœºå™¨å­¦ä¹ è¿‡ç¨‹</h2><blockquote>
<p>å¯¹äºåšäº’è”ç½‘é‡‘èä¸€èˆ¬æƒ…å†µæ˜¯ æ­£è´Ÿæ ·æœ¬ æ˜¯æåº¦ä¸å¹³è¡¡çš„(æœ€é«˜å¯ä»¥è¾¾åˆ° 100 : 1), è¿™æ ·çš„æƒ…å†µå¯¹äº SVM è¿™ç§åˆ†ç±»å™¨æ˜¯ä¸åˆé€‚çš„ï¼Œæ‰€ä»¥åœ¨åšé‡‘èçš„<strong>è¯„åˆ†å¡æ¨¡å‹</strong> æˆ– <strong>æ¬ºè¯ˆæ¨¡å‹</strong> ä¹Ÿå¥½ï¼Œè¿™æ ·å¯¹ç‰¹å¾çš„å¤„ç† å’Œ æ ·æœ¬çš„éå¹³è¡¡å¤„ç†æ˜¯æ¯”è¾ƒé«˜çš„.</p>
<p>å¥½åç”¨æˆ·çš„å®šä¹‰ï¼Œä¸€èˆ¬æ˜¯æ ¹æ®ç”¨æˆ·çš„è´·åè¡¨ç°ï¼Œæ¥å®šä¹‰å¥½åç”¨æˆ·çš„.</p>
</blockquote>
<p>ä¸¾ä¸ªæ —å­ğŸŒ° :</p>
<blockquote>
<p>ç”¨æˆ·å€Ÿæ¬¾ 5W å…ƒï¼Œå¯èƒ½æ˜¯åˆ†æœŸè¿˜æ¬¾ 12ä¸ªæœˆï¼Œè¿™æ ·æ¯ä¸ªæœˆéƒ½ä¼šè¿˜ä¸€ç¬”å›ºå®šçš„é¢åº¦.</p>
<p><strong>ä¿¡ç”¨é£é™©</strong> : åœ¨æŒºé•¿çš„æ—¶é—´å¯ä»¥æŒ‰æ—¶è¿˜æ¬¾.</p>
<p><strong>æ¬ºè¯ˆé£é™©</strong> : </p>
<ol>
<li>ç”¨æˆ·å¯èƒ½ ç¬¬ 1ã€2 æœŸ æ˜¯è¿˜çš„ï¼Œä¹‹åæ˜¯ä¸è¿˜çš„.<br> (å› ä¸ºä¸­ä»‹ä¹Ÿè¶Šæ¥è¶Šèªæ˜ï¼Œç»™ä»–è‡ªå·±ç•™å‡ºæ—¶é—´ï¼Œèº²é¿å‚¬æ”¶çš„æ‰‹æ®µï¼Œä¹Ÿèº²é¿è¿½è¸ªç­‰ç­‰)</li>
<li>è´·å‰å®¡æ ¸ ï¼ˆè§¦ç¢°åˆ°æ‹’è´·è§„åˆ™ï¼‰</li>
<li>é€ å‡è¡Œä¸º ï¼ˆä¿¡æ¯èµ„æ–™é€ å‡ï¼‰</li>
<li>è°ƒæŸ¥å‘˜ è°ƒæŸ¥å‡ºæ¥æ˜¯ <strong>ä¸­ä»‹</strong> æˆ–è€… <strong>æœ‰æ¬ºè¯ˆé£å‘çš„</strong>ï¼Œè¿›å…¥é»‘åå•çš„.</li>
<li>â€¦</li>
</ol>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨å®šä¹‰æ¨¡å‹è´Ÿæ ·æœ¬çš„è¯ï¼Œæˆ‘ä»¬å¯èƒ½å®šä¹‰ä¸º m1+ ä¿¡ç”¨é£é™©ã€m3+ (90å¤©ä»¥ä¸Šä¸è¿˜æ¬¾çš„è¯)ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸ºæ¬ºè¯ˆé£é™©</p>
<p><code>åç”¨æˆ·</code> ï¼š æ¬ºè¯ˆé£é™©ç”¨æˆ·<br><code>å¥½ç”¨æˆ·</code> ï¼š ä¸€å¤©éƒ½ä¸é€¾æœŸè¿˜æ¬¾<br><code>ç°ç”¨æˆ·</code> ï¼š m1+ æœªè¿˜æ¬¾ï¼Œä½†æ˜¯90å¤©ä¹‹å†…å¯ä»¥è¿˜æ¬¾çš„ (ä¸æ”¾åœ¨è®­ç»ƒä¸­ï¼Œå¦åˆ™ä¼šç»™æ¨¡å‹å¸¦æ¥å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ï¼Œå½±å“æ•ˆæœ)</p>
<p>ç°ç”¨æˆ·ä¸æ”¾åœ¨æ¨¡å‹ä¸­ï¼Œè¿™æ ·è®­ç»ƒå‡ºçš„æ¨¡å‹å¯¹å¥½åç”¨æˆ·çš„åŒºåˆ†ç¨‹åº¦ä¹Ÿè¶Šé«˜.</p>
</blockquote>
<p>é‡‘èæ¨¡å‹ å’Œ CTRé¢„ä¼° ç›¸æ¯”æ˜¯ æœ‰ä¸€ä¸ªå‘¨æœŸæ€§è´¨çš„</p>
<blockquote>
<ol>
<li>å¹¿å‘Šç‚¹å‡»çš„è¯ï¼Œç”¨æˆ·ç‚¹å‡»ï¼Œç«‹é©¬æœ‰ä¸€ä¸ªæ ·æœ¬å‡ºç°</li>
<li>åšé•¿æœŸç°é‡‘è´·ï¼Œé€‰æ‹©æ ·æœ¬æ˜¯é€‰æ‹©åŠå¹´ä¹‹å‰çš„ç”¨æˆ·ï¼Œä½œä¸ºæ ·æœ¬</li>
</ol>
</blockquote>
<h2 id="æ­£è´Ÿæ ·æœ¬"><a href="#æ­£è´Ÿæ ·æœ¬" class="headerlink" title="æ­£è´Ÿæ ·æœ¬"></a>æ­£è´Ÿæ ·æœ¬</h2><p>çœŸå®åœºæ™¯æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹ <code>(10~30) ï¼š1</code> ï¼ˆæˆç†Ÿå¹³å°çš„é£é™©æ˜¯è¶Šæ¥è¶Šå°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹¿åˆ°çš„ <code>æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹</code>æ˜¯é€æ­¥å¢åŠ çš„ï¼‰.</p>
<p>æ•°æ®çš„ä¸å¹³è¡¡å¤„ç† ï¼š <strong>é™é‡‡æ ·</strong>ã€<strong>è¿‡é‡‡æ ·</strong>ã€<strong>SMOTE</strong></p>
<ul>
<li><strong>é™é‡‡æ ·</strong> ï¼š æ­£è´Ÿæ ·æœ¬æˆ 3:1ï¼Œ 5:1 æ¥åšä¸€ä¸ªæ¨¡å‹,  åæ ·æœ¬æ˜¯å…¨éƒ¨å–çš„, (ä¸€èˆ¬è¿™ç§æƒ…å†µ åšè¯„åˆ†å¡çš„æ—¶å€™æ˜¯éœ€è¦åšçš„)</li>
<li><strong>è¿‡é‡‡æ ·</strong> ï¼š å®é™…ç”¨çš„ä¸å¤šï¼Œå¦‚æœè´Ÿæ ·æœ¬å®åœ¨æ˜¯è¿‡å°‘ éƒ½ &lt;100 ä¸ªï¼Œ é‚£ä¹ˆå¯ä»¥è€ƒè™‘ å‡ä½æˆ‘ä»¬çš„è§‚å¯Ÿå‘¨æœŸï¼Œ æˆ–è€… æ¬ºè¯ˆå®šä¹‰çš„å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆä¸¥æ ¼ æ¥æ”¾è¿›æ¥å¤šä¸€äº›çš„ è´Ÿæ ·æœ¬è¿‡æ¥æ¥åšè®­ç»ƒï¼Œæˆ–è€…åœ¨æ‹’è´·é‡Œé¢æ‰¾ä¸€äº›äººè¿‡æ¥.</li>
<li><strong>SMOTE</strong> ï¼š åœ¨åˆ†å¸ƒä¸Šæ¨¡æ‹Ÿä¸€äº›æ•°æ®ï¼Œæ¨¡æ‹Ÿå®Œçš„æ•°æ®å¯åšè®­ç»ƒï¼Œæ¯”è¾ƒç»å…¸æ‹¿çœŸå®çš„æ•°æ®åšè®­ç»ƒæ˜¯æ›´è´´è¿‘çœŸå®çš„æƒ…å†µ.<blockquote>
<p>åšæ¨¡å‹ å¦‚ GBRTã€RF ç­‰ï¼Œä»–ä»¬å¯¹ä¸å¹³è¡¡çš„æ•°æ®æ˜¯æœ‰å®¹å¿çš„ï¼Œè¿™ç§ç›´æ¥ç”¨çœŸå®æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œä¹Ÿèƒ½å¾—åˆ°å¾ˆå¥½çš„æ•ˆæœ.</p>
</blockquote>
</li>
</ul>
<h2 id="æ¨¡å‹é€‰å‹"><a href="#æ¨¡å‹é€‰å‹" class="headerlink" title="æ¨¡å‹é€‰å‹"></a>æ¨¡å‹é€‰å‹</h2><p>å¯¹äºåšè¯„åˆ†å¡çš„æ¨¡å‹ æˆ–è€… LR çš„è¯ï¼Œæ ·æœ¬çš„å¹³è¡¡è¦åœ¨ 10:1 èŒƒå›´å†…ï¼Œ LR å¯¹å˜é‡ç›¸å…³æ€§çš„ç­›é€‰ å’Œ æ•°æ®å¹³è¡¡ æœ‰è¦æ±‚</p>
<p>åšæ¨¡å‹ï¼Œè‡³å°‘è¦ç”¨ RF æ¥åšæ¨¡å‹ï¼Œ æˆ–è€… GBDTã€GBRTï¼Œè¿™ç§ Boosting çš„æ¨¡å‹ï¼Œå¯¹äºæ ·æœ¬çš„ä¸å¹³è¡¡å®¹å¿åº¦æ›´é«˜ä¸€äº›ï¼Œä»–ä»¬å¯¹äºå­¦ä¹  æ›´å°è€Œç»†å¾® çš„ç‰¹å¾å’Œå˜é‡ å¯ä»¥å­¦ä¹ çš„æ›´æ·±ä¸€äº›.</p>
<h2 id="Lending-Club"><a href="#Lending-Club" class="headerlink" title="Lending Club"></a>Lending Club</h2><p>Lending Club åˆ›ç«‹äº 2016å¹´ï¼Œ ä¸»è¦åšä¸€ä¸ªæä¾› P2P è´·æ¬¾çš„å¹³å°ä¸­ä»‹æœåŠ¡ï¼Œ2016å¹´åº•åœ¨ çº½äº¤æ‰€ä¸Šå¸‚ï¼Œåæ¥çˆ†å‡ºæ¥å¾ˆå¤šä¸‘é—»ï¼Œåˆ›å§‹äººç¦»èŒï¼Œè‚¡ä»·ä¸‹è·Œ. ä½†æ˜¯ä¸ç®¡æ€ä¹ˆæ ·ï¼Œå®ƒçš„æ•°æ®åœ¨æˆ‘ä»¬åšåæ¬ºè¯ˆç­‰æ˜¯éå¸¸æœ‰é‡è¦çš„.</p>
<blockquote>
<p>Lending Club 2016 çš„å€Ÿè´·æ•°æ®ï¼ŒQ3ï¼ŒQ4 å¯ä»¥ä¸€èµ·åšä¸€ä¸‹ï¼ŒåŠå¹´çš„æ•°æ®åšè®­ç»ƒæ˜¯æ›´å¥½çš„.</p>
</blockquote>
<h3 id="1-Data"><a href="#1-Data" class="headerlink" title="1. Data"></a>1. Data</h3><p>Lending Club 2016å¹´Q3æ•°æ®ï¼š<a href="https://www.lendingclub.com/info/download-data.action" target="_blank" rel="external">https://www.lendingclub.com/info/download-data.action</a></p>
<p>å‚è€ƒï¼š<a href="http://kldavenport.com/lending-club-data-analysis-revisted-with-python/" target="_blank" rel="external">http://kldavenport.com/lending-club-data-analysis-revisted-with-python/</a></p>
<p><img src="/images/datascience/finance-LC-18.jpg" width="900"></p>
<p>çœ‹ä¸‹æ•°æ®ï¼Œå…¶å®æˆ‘ä¹Ÿä¸èƒ½å®Œå…¨äº†è§£è¿™äº›æ‰€æœ‰å­—æ®µçš„å«ä¹‰</p>
<blockquote>
<ol>
<li>int_rate åˆ©ç‡</li>
<li>term å¾…å¤šå°‘æœŸ</li>
<li>grade ç­‰çº§ Cã€Bã€Dï¼Œ7ä¸ªç­‰çº§å§</li>
<li>sub_grade ä¼šåˆ†ä¸ºæ›´ç»†çš„ç­‰çº§.</li>
<li>åé¢è¿™äº›æ˜¯ä» FICO è·å–çš„æ•°æ®å§â€¦</li>
</ol>
</blockquote>
<p>æˆ‘ä»¬çš„ç›®çš„æ˜¯åˆ¤æ–­ï¼Œæ¥äº†ä¸€ä¸ªç”¨æˆ·ï¼Œä¹‹åè¾“å…¥è¯¥ç”¨æˆ·çš„è¿™äº›ç‰¹å¾ï¼Œæˆ‘ä»¬åˆ¤æ–­ä»–æ˜¯ä¸æ˜¯ä¸€ä¸ªæ¬ºè¯ˆç”¨æˆ·</p>
<p><strong>å¦‚æœç”¨æˆ·å¡«å†™å‡èµ„æ–™</strong></p>
<blockquote>
<p>ç”¨æˆ·è´·æ¬¾ä¹‹åçš„è¡¨ç°ï¼Œå¦‚æœå¡«çš„çœŸå‡æˆ‘ä»¬ä¸äº†è§£ï¼Œå¡«å†™çš„æ˜¯å‡èµ„æ–™ï¼Œä½†æ˜¯ä¹‹åè¿˜æ¬¾è¡¨ç°å¥½é‚£ä¹ˆå®ƒè¿˜æ˜¯ä¸€ä¸ªå¥½ç”¨æˆ·.</p>
</blockquote>
<p><strong>æ•°æ®ä¸Š</strong> </p>
<blockquote>
<p>æˆ‘åªå–äº†2016å¹´Q3æ•°æ®ï¼Œ9W+ çš„æ•°æ®ï¼Œåˆ—æ•° 122 åˆ—ã€‚æ•°æ®æœ‰ 99124è¡Œï¼Œ å»æ‰è¡¨å¤´ï¼Œæœ‰ 99123 è¡Œ</p>
</blockquote>
<h2 id="2-Keep-what-we-need"><a href="#2-Keep-what-we-need" class="headerlink" title="2. Keep what we need"></a>2. Keep what we need</h2><blockquote>
<p>æˆ‘ä»¬åˆæ­¥åšç‰¹å¾ç­›é€‰â€¦, æˆ‘ä»¬åœ¨çœ‹çš„æ—¶å€™ï¼Œå¯ä»¥åˆ†ç‰‡åˆ†ç‰‡çš„çœ‹è¿™ 122 ä¸ªåˆ—â€¦</p>
</blockquote>
<h3 id="2-1-ç‰¹å¾åˆ†æ-part1"><a href="#2-1-ç‰¹å¾åˆ†æ-part1" class="headerlink" title="2.1 ç‰¹å¾åˆ†æ part1"></a>2.1 ç‰¹å¾åˆ†æ part1</h3><p><img src="/images/datascience/finance-LC-19.jpg" width="850"></p>
<blockquote>
<p>id å’Œ member_id ä¸ä½œä¸ºç‰¹å¾ï¼Œå¯ä»¥ç›´æ¥å»æ‰, int_rate å¸¦ % çš„å¯ä»¥ç›´æ¥å»æ‰ %ï¼Œ å˜ä¸º float çš„</p>
</blockquote>
<p><strong>Loan Amount Requested Verus the Funded Amount</strong></p>
<p><img src="/images/datascience/finance-LC-20.png" width="850"></p>
<h3 id="2-2-ç‰¹å¾åˆ†æ-part2"><a href="#2-2-ç‰¹å¾åˆ†æ-part2" class="headerlink" title="2.2 ç‰¹å¾åˆ†æ part2"></a>2.2 ç‰¹å¾åˆ†æ part2</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df.ix[:<span class="number">5</span>,<span class="number">8</span>:<span class="number">15</span>]</span><br><span class="line"></span><br><span class="line">print(df.emp_title.value_counts().head())</span><br><span class="line">print(df.emp_title.value_counts().tail())</span><br><span class="line">df.emp_title.unique().shape </span><br><span class="line"><span class="comment"># 37421 emp_titleï¼Œ å¤ªå¤šäº†ï¼Œå¯ä¿¡åº¦ä¸é«˜ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•åš emp_title éæ•°å€¼å‹å˜é‡çš„ one-hot enconding</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">df.drop([&apos;emp_title&apos;],1, inplace=True)</span><br></pre></td></tr></table></figure>
<p>employment title</p>
<hr>
<ul>
<li><a href="https://github.com/blair101/machine-learning-action/blob/master/LC/LC.ipynb" target="_blank" rel="external">LC code</a></li>
</ul>
<h2 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h2><p>åˆ ä¸åˆ é™¤å˜é‡ï¼Œéœ€è¦çœ‹æ¨¡å‹ï¼ŒLR éœ€è¦åˆ é™¤ï¼ŒGBRT ä¸ç”¨åˆ é™¤ä¹Ÿå¯ä»¥.</p>
<p>LR åšè¯„åˆ†å¡æ¨¡å‹ï¼Œå˜é‡ ä¸€å®šæ˜¯å¼ºå˜é‡ï¼Œ20ä¸ªå·¦å³ï¼Œä¸ä¼šå‡ ç™¾ä¸ªï¼Œæœ‰ä¸ªå˜é‡å¯ä»¥è®­ç»ƒå¤„ç³»æ•°</p>
<p>å‡ºæ¥ 0 ~ 1 æ¦‚ç‡ï¼Œæ‹‰ä¸€ä¸‹æ©¡çš®ç­‹ï¼Œ åˆ†æ•°æ˜ å°„ï¼Œæ‹‰åˆ° 300 ~ 900 åˆ†ï¼Œå¯ä»¥åšä¸€ä¸ªè¯„åˆ†å¡ï¼Œ600åˆ† å¯èƒ½æ˜¯å¥½ç”¨æˆ·:åç”¨æˆ·ï¼Œå¯èƒ½æ˜¯ 50:1</p>
<p>è¯„åˆ†å¡çš„é˜¶æ¢¯å¯èƒ½æ˜¯å¢åŠ ã€‚</p>
<p>æ¨¡å‹ä¸åŒ 0 ~ 1 çš„æ¦‚ç‡å¯èƒ½æ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆæˆ‘å¢åŠ 50åˆ†ï¼Œé£é™©æ°´å¹³ä¼šé™ä½ä¸€åŠ</p>
<p>550 25:1</p>
<p>è¯„åˆ†å¡åˆ†çš„æ˜ å°„å’Œæ¨¡å‹æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œæ˜¯æ ·æœ¬é‡Œäººç¾¤çš„å¥½åæ˜¯æœ‰å…³ç³»çš„ï¼Œæ‰€ä»¥æ¨¡å‹çš„å‚æ•°åšæ˜ å°„ï¼Œæ˜¯ä¸éœ€è¦é‡æ–°è®­ç»ƒçš„ã€‚</p>
<p>lending club è¦æ±‚ FICO æ˜¯ä¸ªç‰¹å®šçš„è¯„åˆ†æ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ªå›ºå®šçš„è¯„åˆ†æ–¹æ³•ã€‚</p>
<p>æ¯”å¦‚ èŠéº»ä¿¡ç”¨éƒ½æ˜¯ç”¨è‡ªå·±çš„æ¨¡å‹ï¼Œè‡ªå·±ç®—å‡ºæ¥çš„</p>
<p>å¦‚æœäººç¾¤å˜äº†</p>
<p>æ¨¡å‹çš„ç¨³å®šæ€§éå¸¸é‡è¦ï¼Œå½“å‰è¦è¯„ä¼°çš„äººç¾¤å·²ç»å’Œå»å¹´ä¸‹åŠå¹´çš„ç”¨æˆ·å·²ç»ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥è®­ç»ƒçš„æ—¶å€™è¦å°½å¯èƒ½æå‡æ¨¡å‹çš„ç¨³å®šæ€§ï¼Œå¦‚æœè®­ç»ƒæ—¶æ¨¡å‹ç¨³å®šæ€§éå¸¸å·®ï¼Œé‚£ä¹ˆä¸€ä¸Šçº¿å°±å´©æºƒäº†ã€‚</p>
<p>å¦‚ä½•æé«˜æ¨¡å‹ç¨³å®šæ€§ï¼Œ2ç§æ–¹æ³•</p>
<ol>
<li><p>ç‰¹å¾ç­›é€‰çš„æ—¶å€™ï¼Œæˆ‘ä¼šå»æŠŠç‰¹å¾ä»æ ·æœ¬çš„æ—¶é—´å¼€å§‹ï¼Œ2016.06 å¼€å§‹æ¯ä¸ªæœˆæˆ‘ä¸€ç›´åœ¨çœ‹å®ƒçš„å‡å€¼å’Œæ–¹å·®çš„å˜åŒ–æ˜¯å¦åœ¨å®¹å¿çš„èŒƒå›´å†…ï¼Œæ¯”å¦‚æˆ‘å»å¹´è¿™ä¸ªæœˆè¿™ä¸ªç‰¹å¾æ˜¯30ï¼Œå½“å‰ 2017.06 è¿™ä¸ªç‰¹å¾å˜ä¸ºäº† 100ï¼Œé‚£ä¹ˆè¿™ä¸ªç‰¹å¾å˜åŒ–å¤ªå¤§ï¼Œæ˜¯ä¸èƒ½ç”¨çš„ï¼Œè¶…è¿‡50%ï¼Œ å¤ªä¸ç¨³å®šäº†ï¼Œå…¶å®è¿™ä¸ªå˜é‡ï¼Œæˆ–è€…åšè¯„åˆ†å¡ï¼Œåæ¬ºè¯ˆç­‰æ˜¯ä¸åˆé€‚çš„ï¼Œç›´æ¥æ‰”æ‰ã€‚</p>
</li>
<li><p>å°½é‡åšæ¨¡å‹èåˆï¼Œå•æ¨¡å‹çš„æ¨¡å‹ç¨³å®šæ€§æ˜¯ä¸å¥½çš„ï¼Œéšç€æœˆä»½çš„å˜åŒ–ï¼Œä½ çš„é¢„æµ‹æ˜¯æœ‰å˜åŒ–çš„ï¼Œæ³¢åŠ¨çš„èŒƒå›´æ˜¯æœ‰ç‚¹ä½ï¼Œensemble é›†æˆå­¦ä¹ ï¼Œ</p>
<p>ä¸‰ç§æ–¹æ³• (baggingã€boostingï¼ŒStackingï¼‰</p>
</li>
</ol>
<p>2.1 Bagging æ¯”å¦‚ RFï¼Œæ¯ä¸ªæ¨¡å‹å–ä¸€æ ·çš„æƒé‡ï¼Œè¿›è¡Œè¯„ä¼°<br>2.2 Boosting æ ¹æ®æ¨¡å‹è®­ç»ƒå‡ºä¸åŒæƒé‡ï¼Œç»™äºˆä¸åŒçš„æƒé‡<br>2.3 Stacking æˆ‘åœ¨ç”¨ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œå»å¤„ç†æˆ‘è¦é›†æˆçš„è¿™3ï¼Œ4ç§æ¨¡å‹ï¼Œè®­ç»ƒå‡ºä¸€ä¸ªå‚æ•°</p>
<p>è¿™ä¸‰ç§æ–¹æ³•ï¼Œéƒ½èƒ½æé«˜æ¨¡å‹çš„ç¨³å®šæ€§</p>
<p>è®©ä½ åœ¨çº¿ä¸Šè¿è¡Œ 3~6 ä¸ªæœˆï¼Œä¿¡è´·äº§å“æ¯”è¾ƒé•¿çš„è¯ï¼Œ2ä¸ªæœˆæ›´æ–°ä¸€æ¬¡æ¯”è¾ƒå¥½ï¼Œè´·æ¬¾å‘¨æœŸçŸ­çš„è¯ï¼Œå‘¨æ›´æ–°éƒ½å¯ä»¥</p>
<blockquote>
<p>æœ‰åš KS æ¯”è¾ƒé«˜çš„è¯ï¼Œä¼šé€å¤§å®¶å°ç¤¼å“ï¼Œ</p>
</blockquote>
<p>æˆ‘ä»¬çº¿ä¸Šæœ‰ç”¨ spark streaming ä¹Ÿæœ‰å¤„ç†å®æ—¶ç‰¹å¾ï¼Œä½†æ˜¯ç›®å‰ä½“é‡ï¼Œä¸€èˆ¬å•æœºå’Œç¦»çº¿å¤„ç†å°±å¤Ÿäº†ã€‚</p>
<p>9W ä¸ªç”¨æˆ·ï¼Œ100å¤šä¸ªå˜é‡ï¼Œé‚£æ ¹æœ¬ä¸éœ€è¦ç”¨åˆ†å¸ƒå¼æ¥è®¡ç®—äº†ã€‚</p>
<p>åŠå¹´çš„æ ·æœ¬æ•°æ®ï¼ŒæŠŠæ•°æ®å–å‡ºæ¥ä¹‹åï¼Œä½ è¦å®šä¹‰ä½ çš„<code>å¥½å</code>æ ·æœ¬,ä¼šæŠŠä¸€äº›ç°è‰²åœ°æ®µçš„ç”¨æˆ·ç»™ä»–æ‘˜é™¤æ‰ï¼Œåªç•™ä¸‹æœ€å¥½æˆ–è€…æœ€åçš„ç”¨æˆ·ï¼Œè¿™äº›ç”¨æˆ·æç‰¹å¾ä¹‹åï¼Œåœ¨åšè®­ç»ƒï¼Œ<code>æ ·æœ¬å†…çš„éªŒè¯</code>å’Œ<code>è·¨æ—¶é—´çš„éªŒè¯</code> ï¼Œå°±æ˜¯è¯´æˆ‘çš„æ—¶é—´æ®µæ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ï¼Œé‚£ä¹ˆèƒ½å¤ŸéªŒè¯æ¨¡å‹çš„ç¨³å®šæ€§ï¼Œé‚£ä¹ˆæœ€å¥½å°±è¦æ‹¿ 2017å¹´ï¼Œ1å’Œ2æœˆçš„æ•°æ®ï¼Œåœ¨åšä¸€ä¸ªè·¨æ—¶é—´çš„éªŒè¯ï¼Œè·¨æ—¶é—´çš„éªŒè¯æ‰æ˜¯ä½ çœŸæ­£ä¸Šçº¿ä¹‹åçš„æ•ˆæœï¼Œå› ä¸ºä½ åœ¨æ—¶é—´çª—å£å†…è®­ç»ƒæˆ–è€…testçš„è¯ï¼Œå®ƒçš„ ks å¯èƒ½ 30 å¤šï¼Œå¦‚æœè·¨æ—¶é—´éªŒè¯çš„è¯ï¼Œä½ çš„äººç¾¤å¯èƒ½ä¼šåç§»ï¼Œé‚£ä¹ˆkså¯èƒ½ä¼šä¸‹é™ï¼Œkså°±å˜ä¸º20ï¼Œå¦‚æœå·®åˆ«æ§åˆ¶åœ¨ 15%ï¼Œå·®åˆ«å¤§ç¨³å®šæ€§å°±å¾ˆä¸å¥½ï¼Œæ˜¯ä¸èƒ½ä¸Šçº¿çš„ã€‚</p>
<p>æ¨¡å‹çš„è¯ï¼Œä½ ç°åœ¨å¼€å§‹åšæ¨¡å‹ï¼Œä½ ä¸€å®šå–çš„æ˜¯ å»å¹´ ä¸‹åŠå¹´çš„æ˜¯æ•°æ®ï¼ŒåšéªŒè¯çš„è¯æ˜¯æ‹¿å»å¹´1æœˆä»½çš„æ•°æ®ï¼Œä¸€ä¸ªæœˆçš„æ•°æ®è¿˜æœ‰5ï¼Œ6ï¼Œ7ä¸ªè¿˜æ¬¾è¡¨ç°ï¼ŒåŸºæœ¬ä¸Šç­‰ä½ åšå®Œæ¨¡å‹ï¼Œä½ åšè·¨æ—¶é—´éªŒè¯çš„è¯ï¼Œåˆšåˆšå¥½ï¼Œä½ èŠ±2ä¸ªç¤¼æ‹œåšä¸€ä¸ªæ¨¡å‹ï¼Œä¸Šçº¿çš„æ—¶å€™ï¼Œä½ å°±ä¸éœ€è¦é‡æ–°è®­ç»ƒäº†ã€‚é™¤éä½ åˆ°9æœˆä»½ä¸Šçº¿ï¼Œé‚£ä¹ˆæ—¶é—´ä¹…äº†ï¼Œå°±éœ€è¦é‡æ–°è®­ç»ƒï¼Œä¸€èˆ¬æ˜¯ä¸éœ€è¦é‡æ–°è®­ç»ƒçš„ã€‚</p>
<p>æ¬ºè¯ˆæ¨¡å‹çš„ç¨³å®šæ€§è¯„ä»·æŒ‡æ ‡ï¼š 1. å¯¹æ¯”è®­ç»ƒé›† ä¸ è·¨æ—¶é—´éªŒè¯é›† çš„ KS åå·®ï¼Œä¸€èˆ¬åå·®å¤§ä¸å¤§çš„è¯ï¼Œè§‰å¾—è¿™ä¸ªæ¨¡å‹æ˜¯å¯ä»¥åœ¨æ—¶é—´ç»´åº¦ä¸Šholdä½çš„ï¼Œé‚£ä¹ˆå¯ä»¥æ¨¡å‹ä¸Šçº¿ã€‚å¦å¤–æŒ‡æ ‡é‡‘èä¸Šæ¯”è¾ƒå¸¸ç”¨çš„æŒ‡æ ‡æ˜¯ psiï¼Œè¿™ä¸ªæ˜¯éªŒè¯ä¸åŒäººç¾¤çš„åç§»ç¨‹åº¦ï¼Œä»¥åå¯ä»¥è‡ªå·±æŸ¥æŸ¥èµ„æ–™ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://myslide.cn/slides/3199" target="_blank" rel="external">é‡‘èåæ¬ºè¯ˆåœºæ™¯ä¸‹çš„Sparkå®è·µ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[äº’è”ç½‘é‡‘èé£æ§ä¸­çš„æ•°æ®ç§‘å­¦ (part2)  ï¼š æ¨¡å‹ç­–ç•¥]]></title>
      <url>http://shopee.ai/2018/04/21/datascience/internet-finance-2/</url>
      <content type="html"><![CDATA[<p>åæ¬ºè¯ˆä¹Ÿæ˜¯ä¸€ç§æœºå™¨å­¦ä¹ è¿‡ç¨‹ï¼Œ åæ¬ºè¯ˆå»ºæ¨¡ä¸­çš„æ•°æ®ç§‘å­¦</p>
<a id="more"></a>
<p><img src="/images/datascience/finance-8.jpg" width="850"></p>
<h2 id="åæ¬ºè¯ˆä¹Ÿæ˜¯ä¸€ç§æœºå™¨å­¦ä¹ è¿‡ç¨‹"><a href="#åæ¬ºè¯ˆä¹Ÿæ˜¯ä¸€ç§æœºå™¨å­¦ä¹ è¿‡ç¨‹" class="headerlink" title="åæ¬ºè¯ˆä¹Ÿæ˜¯ä¸€ç§æœºå™¨å­¦ä¹ è¿‡ç¨‹"></a>åæ¬ºè¯ˆä¹Ÿæ˜¯ä¸€ç§æœºå™¨å­¦ä¹ è¿‡ç¨‹</h2><p><img src="/images/datascience/finance-9.jpg" width="850"></p>
<blockquote>
<p>å¯¹äºåšäº’è”ç½‘é‡‘èä¸€èˆ¬æƒ…å†µæ˜¯ æ­£è´Ÿæ ·æœ¬ æ˜¯æåº¦ä¸å¹³è¡¡çš„(æœ€é«˜å¯ä»¥è¾¾åˆ° 100 : 1), è¿™æ ·çš„æƒ…å†µå¯¹äº SVM è¿™ç§åˆ†ç±»å™¨æ˜¯ä¸åˆé€‚çš„ï¼Œæ‰€ä»¥åœ¨åšé‡‘èçš„<strong>è¯„åˆ†å¡æ¨¡å‹</strong> æˆ– <strong>æ¬ºè¯ˆæ¨¡å‹</strong> ä¹Ÿå¥½ï¼Œè¿™æ ·å¯¹ç‰¹å¾çš„å¤„ç† å’Œ æ ·æœ¬çš„éå¹³è¡¡å¤„ç†æ˜¯æ¯”è¾ƒé«˜çš„.</p>
<p>å¥½åç”¨æˆ·çš„å®šä¹‰ï¼Œä¸€èˆ¬æ˜¯æ ¹æ®ç”¨æˆ·çš„è´·åè¡¨ç°ï¼Œæ¥å®šä¹‰å¥½åç”¨æˆ·çš„.</p>
</blockquote>
<p>ä¸¾ä¸ªæ —å­ğŸŒ° :</p>
<blockquote>
<p>ç”¨æˆ·å€Ÿæ¬¾ 5W å…ƒï¼Œå¯èƒ½æ˜¯åˆ†æœŸè¿˜æ¬¾ 12ä¸ªæœˆï¼Œè¿™æ ·æ¯ä¸ªæœˆéƒ½ä¼šè¿˜ä¸€ç¬”å›ºå®šçš„é¢åº¦.</p>
<p><strong>ä¿¡ç”¨é£é™©</strong> : åœ¨æŒºé•¿çš„æ—¶é—´å¯ä»¥æŒ‰æ—¶è¿˜æ¬¾.</p>
<p><strong>æ¬ºè¯ˆé£é™©</strong> : </p>
<ol>
<li>ç”¨æˆ·å¯èƒ½ ç¬¬ 1ã€2 æœŸ æ˜¯è¿˜çš„ï¼Œä¹‹åæ˜¯ä¸è¿˜çš„.<br> (å› ä¸ºä¸­ä»‹ä¹Ÿè¶Šæ¥è¶Šèªæ˜ï¼Œç»™ä»–è‡ªå·±ç•™å‡ºæ—¶é—´ï¼Œèº²é¿å‚¬æ”¶çš„æ‰‹æ®µï¼Œä¹Ÿèº²é¿è¿½è¸ªç­‰ç­‰)</li>
<li>è´·å‰å®¡æ ¸ ï¼ˆè§¦ç¢°åˆ°æ‹’è´·è§„åˆ™ï¼‰</li>
<li>é€ å‡è¡Œä¸º ï¼ˆä¿¡æ¯èµ„æ–™é€ å‡ï¼‰</li>
<li>è°ƒæŸ¥å‘˜ è°ƒæŸ¥å‡ºæ¥æ˜¯ <strong>ä¸­ä»‹</strong> æˆ–è€… <strong>æœ‰æ¬ºè¯ˆé£å‘çš„</strong>ï¼Œè¿›å…¥é»‘åå•çš„.</li>
<li>â€¦</li>
</ol>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨å®šä¹‰æ¨¡å‹è´Ÿæ ·æœ¬çš„è¯ï¼Œæˆ‘ä»¬å¯èƒ½å®šä¹‰ä¸º m1+ ä¿¡ç”¨é£é™©ã€m3+ (90å¤©ä»¥ä¸Šä¸è¿˜æ¬¾çš„è¯)ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸ºæ¬ºè¯ˆé£é™©</p>
<p><code>åç”¨æˆ·</code> ï¼š æ¬ºè¯ˆé£é™©ç”¨æˆ·<br><code>å¥½ç”¨æˆ·</code> ï¼š ä¸€å¤©éƒ½ä¸é€¾æœŸè¿˜æ¬¾<br><code>ç°ç”¨æˆ·</code> ï¼š m1+ æœªè¿˜æ¬¾ï¼Œä½†æ˜¯90å¤©ä¹‹å†…å¯ä»¥è¿˜æ¬¾çš„ (ä¸æ”¾åœ¨è®­ç»ƒä¸­ï¼Œå¦åˆ™ä¼šç»™æ¨¡å‹å¸¦æ¥å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ï¼Œå½±å“æ•ˆæœ)</p>
</blockquote>
<p>é‡‘èæ¨¡å‹ å’Œ CTR é¢„ä¼°çš„ç›¸æ¯”æ˜¯ æœ‰ä¸€ä¸ªå‘¨æœŸæ€§è´¨çš„</p>
<blockquote>
<ol>
<li>å¹¿å‘Šç‚¹å‡»çš„è¯ï¼Œç”¨æˆ·ç‚¹å‡»ï¼Œç«‹é©¬æœ‰ä¸€ä¸ªæ ·æœ¬å‡ºç°</li>
<li>åšé•¿æœŸç°é‡‘è´·ï¼Œé€‰æ‹©æ ·æœ¬æ˜¯é€‰æ‹©åŠå¹´ä¹‹å‰çš„ç”¨æˆ·ï¼Œä½œä¸ºæ ·æœ¬</li>
</ol>
</blockquote>
<h2 id="æ¨¡å‹ç­–ç•¥"><a href="#æ¨¡å‹ç­–ç•¥" class="headerlink" title="æ¨¡å‹ç­–ç•¥"></a>æ¨¡å‹ç­–ç•¥</h2><p><img src="/images/datascience/finance-10.jpg" width="800"></p>
<h3 id="1-Linear-Regression"><a href="#1-Linear-Regression" class="headerlink" title="1. Linear Regression"></a>1. Linear Regression</h3><p><img src="/images/datascience/finance-11.jpg" width="800"></p>
<h3 id="2-Logistic-Regression"><a href="#2-Logistic-Regression" class="headerlink" title="2 Logistic Regression"></a>2 Logistic Regression</h3><p><img src="/images/datascience/finance-12.jpg" width="800"></p>
<h3 id="3-Decision-Tree"><a href="#3-Decision-Tree" class="headerlink" title="3. Decision Tree"></a>3. Decision Tree</h3><p><img src="/images/datascience/finance-13.jpg" width="850"></p>
<h3 id="4-Random-Forest"><a href="#4-Random-Forest" class="headerlink" title="4. Random Forest"></a>4. Random Forest</h3><p><img src="/images/datascience/finance-14.png" width="850"></p>
<h3 id="5-Gradient-Boosting-RT"><a href="#5-Gradient-Boosting-RT" class="headerlink" title="5. Gradient Boosting RT"></a>5. Gradient Boosting RT</h3><p><img src="/images/datascience/finance-15.png" width="850"></p>
<blockquote>
<hr>
</blockquote>
<p><img src="/images/datascience/finance-16.png" width="850"></p>
<h2 id="ç»“æœè¯„ä¼°-æ··æ·†çŸ©é˜µ"><a href="#ç»“æœè¯„ä¼°-æ··æ·†çŸ©é˜µ" class="headerlink" title="ç»“æœè¯„ä¼°-æ··æ·†çŸ©é˜µ"></a>ç»“æœè¯„ä¼°-æ··æ·†çŸ©é˜µ</h2><ul>
<li>Precision: è¯„ä¼°è®¤å®šåç”¨æˆ·çš„ç²¾ç¡®åº¦</li>
<li>Recall: è¯„ä¼°åç”¨æˆ·çš„å¬å›ç‡</li>
<li>F-Measure: ç»„åˆåˆ¤æ–­</li>
</ul>
<p><img src="/images/datascience/finance-17.png" width="830"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://myslide.cn/slides/3199" target="_blank" rel="external">é‡‘èåæ¬ºè¯ˆåœºæ™¯ä¸‹çš„Sparkå®è·µ</a></li>
<li><a href="http://www.itdks.com/dakalive/detail/442" target="_blank" rel="external">å¤§å’–è¯´ ç‹å©·</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[äº’è”ç½‘é‡‘èé£æ§ä¸­çš„æ•°æ®ç§‘å­¦ (part1) ï¼š é‡‘èç§‘æŠ€ä¼ä¸šé¢ä¸´çš„æ¬ºè¯ˆâ»›é™©]]></title>
      <url>http://shopee.ai/2018/04/20/datascience/internet-finance-1/</url>
      <content type="html"><![CDATA[<p>é‡‘èç§‘æŠ€ä¼ä¸šé¢ä¸´çš„æ¬ºè¯ˆâ»›é™©ä»‹ç» , äº’è”ç½‘é‡‘è ä¸»è¦æ˜¯é€šè¿‡äº’è”ç½‘å¹³å°ï¼Œè¿æ¥ å‡ºå€Ÿæ–¹ å’Œ å€Ÿæ¬¾æ–¹</p>
<a id="more"></a>
<h2 id="1-é‡‘èä¸ç§‘æŠ€çš„ç»“æ™¶"><a href="#1-é‡‘èä¸ç§‘æŠ€çš„ç»“æ™¶" class="headerlink" title="1. é‡‘èä¸ç§‘æŠ€çš„ç»“æ™¶"></a>1. é‡‘èä¸ç§‘æŠ€çš„ç»“æ™¶</h2><ul>
<li>é‡‘èçš„æœ¬è´¨ : èµ„æºçš„æœ€åˆç†åŒ–åº”ç”¨</li>
<li>äº’è”ç½‘æŠ€æœ¯ : äº¤æ˜“çš„è¾¹ç•Œæˆæœ¬è¶‹å‘â€œé›¶â€</li>
<li>é‡‘èç§‘æŠ€ : ç”¨å¤§æ•°æ®ã€äº‘è®¡ç®—ç­‰æŠ€æœ¯å®ç°çš„èµ„é‡‘èé€šã€æ”¯ä»˜ã€æŠ•èµ„å’Œä¿¡æ¯ä¸­ä»‹æœåŠ¡</li>
</ul>
<p><img src="/images/datascience/finance-1.jpg" width="520"></p>
<blockquote>
<p>æˆ‘ä»¬å›½å®¶æ²¡æœ‰è¦†ç›–åº¦å¾ˆå…¨çš„æ‰€æœ‰äººçš„å¾ä¿¡ï¼Œè™½ç„¶æœ‰å¤®è¡Œï¼Œä½†æ˜¯è¿˜è¿œè¿œä¸å¤Ÿâ€¦</p>
<p>æˆæƒæŠ“å–çš„ç”¨æˆ·çš„æ•°æ®ï¼Œ(ç™¾èã€åŒç›¾ã€èŠéº»ä¿¡ç”¨ ç­‰ï¼Œå·¥ä½œä¸­å¯èƒ½éƒ½ä¼šå¯¹æ¥åˆ°è¿™äº›å¹³å°)ï¼Œè¿™äº›å¹³å°ä¼šé€šè¿‡å¾ˆå¤šæ¸ é“æ”¶é›†ç”¨æˆ·ï¼Œç„¶åç»™ç”¨æˆ·æ‰“ä¸€äº›é£é™©æ ‡ç­¾å’Œæ¬ºè¯ˆçš„è¯„åˆ†.</p>
</blockquote>
<h2 id="2-ä¸­å›½ä¿¡ç”¨è´·æ¬¾è¡Œä¸š"><a href="#2-ä¸­å›½ä¿¡ç”¨è´·æ¬¾è¡Œä¸š" class="headerlink" title="2. ä¸­å›½ä¿¡ç”¨è´·æ¬¾è¡Œä¸š"></a>2. ä¸­å›½ä¿¡ç”¨è´·æ¬¾è¡Œä¸š</h2><p>&nbsp;&nbsp;&nbsp; ç½‘è´·ä¹‹å®¶ æ”¶é›†P2Pç½‘è´·å¹³å°çš„è¿è¥æ•°æ®ï¼Œå¹¶ä¸ºè¡Œä¸šæ’è¡Œ, ä»¥ä¸‹ä¸º 2018å¹´3æœˆæ•°æ®åšçš„è¡Œä¸šæ’è¡Œ :</p>
<p><img src="/images/datascience/finance-3.jpg" width="800"></p>
<blockquote>
<p>ç½‘è´·ä¹‹å®¶ : <a href="http://www.wdzj.com/pingji.html" target="_blank" rel="external">http://www.wdzj.com/pingji.html</a></p>
<p>ç°åœ¨æ¶ˆäº¡çš„ P2P å…¬å¸é€æ¸æ¶ˆäº¡çš„ä¹Ÿå¾ˆå¤šï¼Œä¹‹å‰ 3000 å¤šå®¶ï¼Œè¡Œä¸šå¤§æ´—ç‰Œä¹‹åï¼Œç°åœ¨ 2000 å¤šå®¶â€¦</p>
<p>åœ¨æ•´ä¸ªè¡Œä¸šçš„ä½“é‡ä¸Šï¼Œé™†é‡‘æ‰€ ä¸€å®šæ˜¯ä½“é‡éå¸¸å¤§çš„ï¼Œæ•´ä¸ªç½‘è´·çš„å¸‚åœºå¤§æ¦‚æœ‰ä¸‡äº¿çº§åˆ«.</p>
</blockquote>
<h2 id="3-ä¸­å›½ä¿¡ç”¨è´·æ¬¾è¡Œä¸šåˆ†å±‚"><a href="#3-ä¸­å›½ä¿¡ç”¨è´·æ¬¾è¡Œä¸šåˆ†å±‚" class="headerlink" title="3. ä¸­å›½ä¿¡ç”¨è´·æ¬¾è¡Œä¸šåˆ†å±‚"></a>3. ä¸­å›½ä¿¡ç”¨è´·æ¬¾è¡Œä¸šåˆ†å±‚</h2><p><img src="/images/datascience/finance-4.jpg" width="800"></p>
<blockquote>
<p>APR (Annual Percentage Rate) å¹´åˆ©ç‡, å¯¹é“¶è¡Œä¿¡ç”¨å¡æ¥è¯´ï¼Œä¸€èˆ¬ APR åœ¨ 16% ~ 18%, é‚£ä¹ˆæ—¥åˆ©ç‡ä¸º 0.04%~0.05% ä¹‹é—´</p>
</blockquote>
<p>ä¸¾ä¸ªæ —å­ğŸŒ° :</p>
<blockquote>
<p>é“¶è¡Œæ˜¯æŒ‰æ—¥æ”¶åˆ©æ¯çš„ã€‚ç®€å•ä»‹ç»ä¸€ä¸‹åˆ©æ¯æ˜¯å¦‚ä½•è®¡ç®—çš„ :</p>
<p>å‡è®¾ç”¨ä¿¡ç”¨å¡æç°1000åˆ€ï¼Œ20å¤©åè¿˜æ¸…ï¼Œè¿™å¼ å¡çš„Cash Advance APRæ˜¯25.49%.<br>ä¸€å¹´æœ‰365å¤©ï¼ˆéƒ¨åˆ†é“¶è¡ŒæŒ‰360å¤©ç®—ï¼ˆä¸è¦é—®æˆ‘é—°å¹´æ€ä¹ˆç®—Orzï¼‰ï¼‰æ—¥åˆ©ç‡åº”è¯¥æ˜¯25.49%/365=0.07%.<br>20å¤©åäº§ç”Ÿçš„åˆ©æ¯ä¸º1000 * 20 * 0.07% = 14åˆ€</p>
</blockquote>
<p>APR å¯ä»¥åˆ’åˆ†äººç¾¤ï¼ŒAPR ä¸åŒçº§åˆ«ï¼Œè´·å‰è´·åçš„å®¡æ ¸ï¼Œå‚¬æ”¶çš„åˆ¶åº¦ ä¹Ÿæ˜¯ä¸åŒçš„</p>
<blockquote>
<p>APRè¶Šä½ï¼Œäººç¾¤æ˜¯è¶Šå¥½çš„. åœ¨ APR ä½çš„äººç¾¤ï¼Œæ˜¯åŸºæœ¬ä¸éœ€è¦å‚¬æ”¶çš„ï¼Œåœ¨ APR é«˜çš„äººç¾¤ï¼Œæ˜¯è¦å‚¬æ”¶çš„.</p>
</blockquote>
<p>é«˜ APR äººç¾¤:</p>
<blockquote>
<p>å¯¹äº APR åœ¨ 40% ~ 80% çš„ï¼Œæ¯”å¦‚ æ‹æ‹è´·ï¼Œè¿™ç§å°é¢çš„ç°é‡‘è´·ï¼Œ5000 ä»¥ä¸‹ï¼Œ7å¤©~1ä¸ªæœˆï¼Œè´·æ¬¾çš„æ—¶é—´ä¹ŸçŸ­ï¼Œå¤šè¿˜çš„åˆ©æ¯ç”¨æˆ·æ˜¯ä¸æ„ŸçŸ¥çš„ï¼Œä½†æ˜¯å¦‚æœå˜æˆå¹´åŒ–ï¼ŒAPR å°±ä¼šéå¸¸é«˜</p>
<p>åœ¨ APR &gt; 80%, æ˜¯ ç°é‡‘å·´å£«ï¼Œç”¨é’±å®ï¼Œè¿™äº›å­˜åœ¨ä¹Ÿæ˜¯æœ‰äººä»¬çš„éœ€æ±‚å­˜åœ¨çš„<br>APR ä½çš„ç”¨æˆ·ï¼Œå°±æ˜¯ä¿¡ç”¨å¥½ï¼ŒAPRé«˜çš„è¯ï¼Œå°±æ˜¯ä¿¡ç”¨æ²¡æœ‰é‚£ä¹ˆå¥½ï¼Œæˆ–è€…è¿˜æ¬¾èƒ½åŠ›æ²¡æœ‰é‚£ä¹ˆå¥½</p>
</blockquote>
<p><strong>åšé‡‘èæœ€å¤§çš„æœ¬è´¨å°±æ˜¯åœ¨æ§åˆ¶é£é™©ï¼Œåœ¨é£é™©å¯æ§çš„æƒ…å†µä¸‹è·å¾—æœ€å¤§çš„åˆ©æ¶¦</strong>.</p>
<h2 id="4-ä¸ªäººå¯¹ä¸ªäººçš„ä¿¡ç”¨è´·æ¬¾"><a href="#4-ä¸ªäººå¯¹ä¸ªäººçš„ä¿¡ç”¨è´·æ¬¾" class="headerlink" title="4. ä¸ªäººå¯¹ä¸ªäººçš„ä¿¡ç”¨è´·æ¬¾"></a>4. ä¸ªäººå¯¹ä¸ªäººçš„ä¿¡ç”¨è´·æ¬¾</h2><p><img src="/images/datascience/finance-5.jpg" width="800"></p>
<h2 id="5-æ€¥é€Ÿä¿¡ä»»-è‡ªåŠ¨åŒ–ä¿¡ç”¨è¯„ä¼°"><a href="#5-æ€¥é€Ÿä¿¡ä»»-è‡ªåŠ¨åŒ–ä¿¡ç”¨è¯„ä¼°" class="headerlink" title="5. æ€¥é€Ÿä¿¡ä»»-è‡ªåŠ¨åŒ–ä¿¡ç”¨è¯„ä¼°"></a>5. æ€¥é€Ÿä¿¡ä»»-è‡ªåŠ¨åŒ–ä¿¡ç”¨è¯„ä¼°</h2><p><img src="/images/datascience/finance-6.jpg" width="800"></p>
<p>å›½å†…å¤– P2P ç½‘è´·çš„æ¯”è¾ƒ :</p>
<blockquote>
<p>å›½å®¶é‡‘èç¯å¢ƒå­˜åœ¨è¾ƒå¤§åŒºåˆ«,åœ¨ä¿¡ç”¨ä½“ç³»å»ºè®¾ç­‰æ–¹é¢ä¹Ÿéƒ½å­˜åœ¨å¾ˆå¤§çš„å·®å¼‚ï¼Œå›½å¤–æ‹¥æœ‰è¾ƒä¸ºå®Œå–„çš„ä¿¡ç”¨è¯„ä¼°ä½“åˆ¶,ä¸­å›½åœ¨è¿™æ–¹é¢å´éå¸¸ç¼ºå¤±ï¼Œæ‰€ä»¥å›½å†…çš„å€Ÿè´·å¹³å°åœ¨ç”¨æˆ·ä¿¡ç”¨è¯„ä¼°æ–¹é¢éƒ½åšå‡ºè‡ªå·±çš„åŠªåŠ›ï¼Œæ„å»ºäº†ä¸åŒå½¢å¼çš„è¯„ä»·æ–¹æ³•.</p>
<p>å›½å¤–æœ‰å®Œå–„çš„ä¿¡ç”¨è¯„ä¼°ä½“è´¨ï¼Œæœ‰ <a href="https://xueqiu.com/k?q=FICO#/" target="_blank" rel="external">FICO</a>å®˜æ–¹çš„è¯„åˆ†. å›½å¤–80%éƒ½æ˜¯ä¿¡ç”¨é£é™©ï¼Œ20%æ˜¯æ¬ºè¯ˆé£é™©. <code>ä¸­å›½æ›´å¤šçš„æ˜¯æ¬ºè¯ˆé£é™©</code>.</p>
<p><a href="https://xueqiu.com/k?q=FICO#/" target="_blank" rel="external">FICO</a> æˆç«‹äº1956å¹´ï¼Œä¸ºçº½äº¤æ‰€ä¸Šå¸‚å…¬å¸ï¼Œå¸‚å€¼52äº¿ç¾é‡‘ï¼Œæä¾›è·¨å¤šä¸ªè¡Œä¸šçš„åˆ†æè½¯ä»¶å’Œå·¥å…·.</p>
</blockquote>
<p>å›½å†…é»‘äº§ä¸šé“¾ :</p>
<blockquote>
<p>å›½å†…ä¸è¿˜é’±çš„è¯æƒ©ç½šçš„æªæ–½è·Ÿä¸ä¸Šï¼Œå›½å†…æœ‰äº›ä¸­ä»‹æˆ‘ä¸è¿˜é’±çš„è¯ï¼Œä½ æ‰¾ä¸åˆ°æˆ‘çš„è¯ï¼Œè¿™ä¸ªé’±å°±æ˜¯æˆ‘ç©ºæ‰‹å¥—ç™½ç‹¼çš„åˆ©æ¶¦ï¼Œè¿™æ ·å‚¬ç”Ÿäº†è¶Šæ¥è¶Šå¤šè´·æ¬¾çš„æ¬ºè¯ˆçš„æƒ…å†µï¼Œä»–ä»¬æœ‰ä¸€ä¸ªé»‘äº§ä¸šé“¾ï¼Œä»è´¦å·çš„è·å–åˆ°æ¶æ„çš„æ³¨å†Œï¼Œå†åˆ°äº’è”ç½‘é‡‘èå…¬å¸çš„å¹³å°ç”³è¯·è´·æ¬¾ï¼Œæœ‰çš„ä¸­ä»‹ä¼šæœ‰ä¸€äº›ç°è±¡. </p>
</blockquote>
<p>ä¸¾ä¸ªæ —å­ğŸŒ°: </p>
<blockquote>
<p>ä»–ä»¬ä¼šåˆ°ç‡•éƒŠæ‰¾ä¸€æ‰¹è€äººå¦‡å¥³ï¼Œç„¶åè¯´æˆ‘ç»™ä½ 3000å…ƒé’±ï¼Œä½ è·Ÿç€æˆ‘èµ°ä¸€è¶Ÿã€‚è¿˜æœ‰ä¸€äº›å®¢æˆ·å¯¹è‡ªå·±çš„èµ„è´¨æ²¡æœ‰ä¿¡å¿ƒï¼Œç„¶åæ‰¾ä¸­ä»‹åŒ…è£…ä¸€äº›ææ–™ã€‚æœ‰å¥½ä¸­ä»‹ï¼Œæœ‰åä¸­ä»‹ï¼Œå¦‚æœåä¸­ä»‹å¸¦ä½ è´·äº†5Wå…ƒé’±ï¼Œç„¶åç»™ä½ 2.5Wå‘Šè¯‰ä½ çˆ±è¿˜ä¸è¿˜ï¼Œç„¶åè¿˜å¯ä»¥å¸¦ä½ çš„ä¿¡æ¯å†å»å…¶ä»–å®¶å¹³å°å†è´·æ¬¾ï¼Œè¿™æ ·ç”¨æˆ·åœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ä¼šèƒŒè´Ÿå¾ˆå¤šå€ºåŠ¡ä¿¡æ¯.</p>
<p>ä¸­ä»‹åšçš„äº‹ï¼Œå°±æ˜¯ä¸åœçš„å»è¯•å„ä¸ªP2På¹³å°äº§å“ï¼Œå‘ç°å…¶ä¸­æ¼æ´ï¼Œè¿™äº›ä¸­ä»‹æ¯”äº§å“ç»ç†è¿˜è¦äº†è§£è¿™ä¸ªäº§å“ï¼Œç„¶åä»–å¸®åŠ©ä»–çš„å®¢æˆ·å»åšåŒ…è£…ï¼Œè¿™æ ·æ¯”å¦‚ä¸€ä¸‹å­å¯èƒ½è¿›æ¥ 100 ä¸ªæ¬ºè¯ˆç”¨æˆ·ï¼Œæ¯ä¸ªç”¨æˆ·5Wï¼Œè¿™æ ·ä¸€ä¸‹å­å°±æ˜¯500Wï¼Œå¯¹ä¼ä¸šæ¥è¯´æŸå¤±å¾ˆå¤§ï¼Œç„¶ååœ¨è¿™ç§é«˜é¢æ”¶å…¥çš„è¯±æƒ‘ä¸‹ï¼Œè¿™äº›ä¸­ä»‹ä¼šå‡çº§ä¸æ–­è‡ªå·±çš„ä¼ªé€ æŠ€æœ¯.</p>
</blockquote>
<h2 id="6-é‡‘èç§‘æŠ€ä¼ä¸šé¢ä¸´çš„æ¬ºè¯ˆé£é™©"><a href="#6-é‡‘èç§‘æŠ€ä¼ä¸šé¢ä¸´çš„æ¬ºè¯ˆé£é™©" class="headerlink" title="6. é‡‘èç§‘æŠ€ä¼ä¸šé¢ä¸´çš„æ¬ºè¯ˆé£é™©"></a>6. é‡‘èç§‘æŠ€ä¼ä¸šé¢ä¸´çš„æ¬ºè¯ˆé£é™©</h2><p><img src="/images/datascience/finance-7.jpg" width="800"></p>
<blockquote>
<p>å¯¹äºçº¿ä¸Šåæ¬ºè¯ˆæ¥è¯´ï¼Œä½ çœ‹ä¸è§ç”¨æˆ·ï¼Œåªé¢å¯¹æ•°æ®ï¼Œè¦å‘ç°æ•°æ®ä¹‹é—´çš„å¼‚å¸¸ã€ç”¨æˆ·ä¸ç”¨æˆ·ä¹‹é—´æœ‰æ²¡æœ‰å¼‚å¸¸ç›¸ä¼¼åº¦è”ç³»ç­‰.</p>
</blockquote>
<h2 id="7-Reference"><a href="#7-Reference" class="headerlink" title="7. Reference"></a>7. Reference</h2><ul>
<li><a href="https://myslide.cn/slides/3199" target="_blank" rel="external">å®œäººè´·æ•°æ®ç§‘å­¦å®¶ç‹å©·: é‡‘èåæ¬ºè¯ˆåœºæ™¯ä¸‹çš„Sparkå®è·µ</a></li>
<li><a href="http://www.itdks.com/dakalive/detail/442" target="_blank" rel="external">å¤§å’–è¯´ ç‹å©·</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ensemble Learning (part2)]]></title>
      <url>http://shopee.ai/2018/04/11/ml/ensumble-boosting-2/</url>
      <content type="html"><![CDATA[<p>æå‡ï¼ˆboostingï¼‰æ–¹æ³•æ˜¯ä¸€ç±»åº”ç”¨å¹¿æ³›ä¸”éå¸¸æœ‰æ•ˆçš„ç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‚</p>
<ul>
<li>Boosting æ¦‚å¿µ</li>
<li>ä»£è¡¨æ€§ Boosting ç®—æ³• AbaBoost ä»‹ç»</li>
</ul>
<a id="more"></a>
<blockquote>
<p>ã€ŠAn Empirical Comparison of Supervised Learning Algorithmsã€‹ICML2006.</p>
</blockquote>
<p>Adaboost åœ¨å¤„ç†äºŒç±»åˆ†ç±»é—®é¢˜æ—¶ï¼Œéšç€å¼±åˆ†ç±»å™¨çš„ä¸ªæ•°å¢åŠ ï¼Œè®­ç»ƒè¯¯å·®ä¸æµ‹è¯•è¯¯å·®çš„æ›²çº¿å›¾ã€‚</p>
<div class="limg1"><br><img src="/images/ml/ensumble/ml_boosting_adaboost_binary_classification.png" width="400"><br></div>

<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒAdaboostç®—æ³•éšç€æ¨¡å‹å¤æ‚åº¦çš„å¢åŠ ï¼Œæµ‹è¯•è¯¯å·®ï¼ˆçº¢è‰²ç‚¹çº¿ï¼‰åŸºæœ¬ä¿æŒç¨³å®šï¼Œå¹¶æ²¡æœ‰å‡ºç°è¿‡æ‹Ÿåˆçš„ç°è±¡ã€‚</p>
<p>å…¶å®ä¸ä»…æ˜¯Adaboostç®—æ³•æœ‰è¿™ç§è¡¨ç°ï¼ŒBoostingæ–¹æ³•çš„å­¦ä¹ æ€æƒ³å’Œæ¨¡å‹ç»“æ„ä¸Šå¯ä»¥ä¿è¯å…¶ä¸å®¹æ˜“äº§ç”Ÿè¿‡æ‹Ÿåˆï¼ˆé™¤éWeak Learneræœ¬èº«å‡ºç°è¿‡æ‹Ÿåˆï¼‰ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä¸»è¦æ˜¯ä»æŸå¤±å‡½æ•°çš„å·®å¼‚ï¼Œæ¥ä»‹ç»Boostingçš„å®¶æ—æˆå‘˜ï¼›ç„¶åæˆ‘ä»¬é’ˆå¯¹æ¯ä¸ªå…·ä½“çš„å®¶æ—æˆå‘˜ï¼Œè¯¦ç»†ä»‹ç»å…¶å­¦ä¹ è¿‡ç¨‹å’Œæ ¸å¿ƒå…¬å¼ï¼›æœ€åä»ç®—æ³•åº”ç”¨åœºæ™¯å’Œå·¥å…·æ–¹æ³•ç»™å‡ºç®€å•çš„ä»‹ç»ã€‚</p>
<p><strong>Boosting</strong></p>
<p>Boostingæ–¹æ³•åŸºäºè¿™æ ·ä¸€ç§æ€æƒ³ï¼š</p>
<blockquote>
<p>å¯¹äºä¸€ä¸ªå¤æ‚ä»»åŠ¡æ¥è¯´ï¼Œå°†å¤šä¸ªä¸“å®¶çš„åˆ¤å®šè¿›è¡Œé€‚å½“çš„ç»¼åˆå¾—å‡ºçš„åˆ¤æ–­ï¼Œè¦æ¯”å…¶ä¸­ä»»ä½•ä¸€ä¸ªä¸“å®¶å•ç‹¬çš„åˆ¤æ–­å¥½ã€‚</p>
<p>å°±æ˜¯ â€œä¸‰ä¸ªè‡­çš®åŒ é¡¶ä¸ªè¯¸è‘›äº®â€ â€¦ğŸ˜„ğŸ˜„ğŸ˜„</p>
</blockquote>
<h2 id="1-æ¦‚ç‡å¯å­¦ä¹ æ€§-PAC"><a href="#1-æ¦‚ç‡å¯å­¦ä¹ æ€§-PAC" class="headerlink" title="1. æ¦‚ç‡å¯å­¦ä¹ æ€§ (PAC)"></a>1. æ¦‚ç‡å¯å­¦ä¹ æ€§ (PAC)</h2><p>PACç†è®ºæ˜¯ç”±2010å¹´å›¾çµå¥–çš„å¾—ä¸»Valiantå’ŒKearnsæå‡ºçš„ä¸€å¥—ç†è®ºä½“ç³»ï¼Œä¸»è¦è®¨è®ºä»€ä¹ˆæ—¶å€™ï¼Œä¸€ä¸ªé—®é¢˜æ˜¯å¯ä»¥è¢«å­¦ä¹ çš„ã€‚</p>
<blockquote>
<p>PACä½“ç³»å®šä¹‰äº†å­¦ä¹ ç®—æ³•çš„å¼ºå¼±ï¼š</p>
<p>(1) å¼±å­¦ä¹ ç®—æ³• : å¦‚æœå­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼çš„å­¦ä¹ ç®—æ³•èƒ½å¤Ÿå­¦ä¹ å®ƒï¼Œå­¦ä¹ çš„æ­£ç¡®ç‡ä»…æ¯”éšæœºçŒœæµ‹ç•¥å¥½ï¼Œ<br>(2) å¼ºå­¦ä¹ ç®—æ³• : å­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼çš„å­¦ä¹ ç®—æ³•èƒ½å¤Ÿå­¦ä¹ å®ƒï¼Œå¹¶ä¸”æ­£ç¡®ç‡å¾ˆé«˜</p>
</blockquote>
<p>åœ¨æ¦‚ç‡è¿‘ä¼¼æ­£ç¡®ï¼ˆprobably approximately correctï¼ŒPACï¼‰å­¦ä¹ æ¡†æ¶ä¸­ï¼š</p>
<blockquote>
<p>â‘ . ä¸€ä¸ªæ¦‚å¿µï¼ˆä¸€ä¸ªç±»ï¼Œlabelï¼‰ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼çš„å­¦ä¹ ç®—æ³•èƒ½å¤Ÿå­¦ä¹ å®ƒï¼Œå¹¶ä¸”æ­£ç¡®ç‡å¾ˆé«˜ï¼Œé‚£ä¹ˆå°±ç§°è¿™ä¸ªæ¦‚å¿µæ˜¯å¼ºå¯å­¦ä¹ çš„ï¼›</p>
<p>â‘¡. ä¸€ä¸ªæ¦‚å¿µï¼ˆä¸€ä¸ªç±»ï¼Œlabelï¼‰ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼çš„å­¦ä¹ ç®—æ³•èƒ½å¤Ÿå­¦ä¹ å®ƒï¼Œå­¦ä¹ çš„æ­£ç¡®ç‡ä»…æ¯”éšæœºçŒœæµ‹ç•¥å¥½ï¼Œé‚£ä¹ˆå°±ç§°è¿™ä¸ªæ¦‚å¿µæ˜¯å¼±å¯å­¦ä¹ çš„ã€‚</p>
</blockquote>
<p>Valiantå’Œ Kearnsæå‡ºPACå­¦ä¹ æ¨¡å‹ä¸­å¼±å­¦ä¹ ç®—æ³•å’Œå¼ºå­¦ä¹ ç®—æ³•çš„ç­‰ä»·æ€§çŒœæƒ³ï¼š</p>
<blockquote>
<p>è¯¥çŒœæƒ³æœ€é‡è¦çš„å«ä¹‰æ˜¯ï¼Œå¦‚æœäºŒè€…ç­‰ä»· ,é‚£ä¹ˆåªéœ€æ‰¾åˆ°ä¸€ä¸ªæ¯”éšæœºçŒœæµ‹ç•¥å¥½çš„å¼±å­¦ä¹ ç®—æ³•å°±å¯ä»¥å°†å…¶æå‡ä¸ºå¼ºå­¦ä¹ ç®—æ³•ï¼Œè€Œä¸å¿…å¯»æ‰¾å¾ˆéš¾è·å¾—çš„å¼ºå­¦ä¹ ç®—æ³•ã€‚</p>
<p>è¯¥é—®é¢˜çš„é‡è¦æ€§éšå³å¼•èµ·æ–¹æ³•è®ºå¤§å¸ˆçš„è¿½æ§ï¼Œå¤§å®¶éƒ½åœ¨è¯•å›¾è®¾è®¡ç®—æ³•æ¥éªŒè¯PACç†è®ºçš„æ­£ç¡®æ€§ã€‚</p>
<p>1996ï¼ŒSchapireæå‡ºä¸€ç§æ–°çš„åå«AdaBoostçš„ç®—æ³•è¯æ˜äº†ä¸Šè¿°çŒœæƒ³ã€‚AdaBoostæŠŠå¤šä¸ªä¸åŒçš„å†³ç­–æ ‘ç”¨ä¸€ç§<strong>ééšæœºçš„æ–¹å¼ç»„åˆ</strong>èµ·æ¥ï¼Œè¡¨ç°å‡ºæƒŠäººçš„æ€§èƒ½ã€‚åŒæ—¶ï¼ŒSchapireè¯æ˜å¼ºå¯å­¦ä¹ ä¸å¼±å¯å­¦ä¹ æ˜¯ç­‰ä»·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>åœ¨PACå­¦ä¹ çš„æ¡†æ¶ä¸‹ï¼Œä¸€ä¸ªæ¦‚å¿µæ˜¯å¼ºå¯å­¦ä¹ çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯è¿™ä¸ªæ¦‚å¿µæ˜¯å¼±å¯å­¦ä¹ çš„</strong>ã€‚</p>
</blockquote>
<p>Summary : <code>å¼ºå¯å­¦ä¹ â‡”å¼±å¯å­¦ä¹ </code></p>
<h2 id="Boosting"><a href="#Boosting" class="headerlink" title="Boosting"></a>Boosting</h2><p>å¯¹äºä¸€ä¸ªå­¦ä¹ é—®é¢˜æ¥è¯´ï¼ˆä»¥åˆ†ç±»é—®é¢˜ä¸ºä¾‹ï¼‰ï¼Œç»™å®šè®­ç»ƒæ•°æ®é›†ï¼Œæ±‚ä¸€ä¸ªå¼±å­¦ä¹ ç®—æ³•è¦æ¯”æ±‚ä¸€ä¸ªå¼ºå­¦ä¹ ç®—æ³•è¦å®¹æ˜“çš„å¤šã€‚Boostingæ–¹æ³•å°±æ˜¯ä»å¼±å­¦ä¹ ç®—æ³•å‡ºå‘ï¼Œåå¤å­¦ä¹ ï¼Œå¾—åˆ°ä¸€ç³»åˆ—å¼±åˆ†ç±»å™¨ï¼Œç„¶å<strong>ç»„åˆå¼±åˆ†ç±»å™¨ï¼Œå¾—åˆ°ä¸€ä¸ªå¼ºåˆ†ç±»å™¨</strong>ã€‚Boostingæ–¹æ³•åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é€šè¿‡<strong>æ”¹å˜è®­ç»ƒæ•°æ®çš„æƒå€¼åˆ†å¸ƒ</strong>ï¼Œé’ˆå¯¹ä¸åŒçš„æ•°æ®åˆ†å¸ƒè°ƒç”¨å¼±å­¦ä¹ ç®—æ³•å¾—åˆ°ä¸€ç³»åˆ—å¼±åˆ†ç±»å™¨ã€‚</p>
<blockquote>
<p>è¿˜æœ‰å°±æ˜¯ï¼ŒBoostingç®—æ³•æ›´åŠ å…³æ³¨é”™åˆ†çš„æ ·æœ¬ï¼Œè¿™ç‚¹å’ŒActive Learningçš„å¯»æ‰¾æœ€æœ‰ä»·å€¼çš„è®­ç»ƒæ ·æœ¬æœ‰ç‚¹é¥ç›¸å‘¼åº”çš„æ„Ÿè§‰</p>
<p>å¾ˆæŠ½è±¡å¯¹ä¸å¯¹ï¼Œä½†æ˜¯è¿‡ä¸€ä¼šå„¿æˆ‘ä»¬é€šè¿‡Adaboostæ¥ç†è§£è¿™ä¸ªæ ¸å¿ƒæ€æƒ³</p>
</blockquote>
<p><strong>å›ç­”ä¸¤ä¸ªé—®é¢˜</strong> ï¼š</p>
<ol>
<li>åœ¨æ¯ä¸€è½®å­¦ä¹ ä¹‹å‰ï¼Œå¦‚ä½•æ”¹å˜è®­ç»ƒæ•°æ®çš„æƒå€¼åˆ†å¸ƒï¼Ÿ</li>
<li>å¦‚ä½•å°†ä¸€ç»„å¼±åˆ†ç±»å™¨ç»„åˆæˆä¸€ä¸ªå¼ºåˆ†ç±»å™¨ï¼Ÿ</li>
</ol>
<blockquote>
<p>å…·ä½“ä¸åŒçš„boostingå®ç°ï¼Œä¸»è¦åŒºåˆ«åœ¨å¼±å­¦ä¹ ç®—æ³•æœ¬èº«å’Œä¸Šé¢ä¸¤ä¸ªé—®é¢˜çš„å›ç­”ä¸Šã€‚</p>
</blockquote>
<p>é—®é¢˜1ï¼ŒAdaboostç®—æ³•çš„åšæ³•æ˜¯ ï¼š</p>
<blockquote>
<p>æé«˜é‚£äº›è¢«å‰ä¸€è½®å¼±åˆ†ç±»å™¨é”™è¯¯åˆ†ç±»æ ·æœ¬çš„æƒå€¼ï¼Œè€Œé™ä½é‚£äº›è¢«æ­£ç¡®åˆ†ç±»æ ·æœ¬çš„æƒå€¼ã€‚</p>
<p>å¦‚æ­¤ï¼Œé‚£äº›æ²¡æœ‰å¾—åˆ°æ­£ç¡®åˆ†ç±»çš„æ ·æœ¬ï¼Œç”±äºå…¶æƒå€¼åŠ å¤§è€Œå—åˆ°åä¸€è½®çš„å¼±åˆ†ç±»å™¨çš„æ›´å¤§å…³æ³¨ã€‚</p>
</blockquote>
<p>é—®é¢˜2ï¼ŒAdaBoosté‡‡å–åŠ æƒå¤šæ•°è¡¨å†³çš„æ–¹æ³• ï¼š</p>
<blockquote>
<p>(1). åŠ å¤§ åˆ†ç±»è¯¯å·®ç‡å° çš„å¼±åˆ†ç±»å™¨çš„æƒå€¼ï¼Œä½¿å…¶åœ¨è¡¨å†³ä¸­èµ·è¾ƒå¤§çš„ä½œç”¨ï¼›<br>(2). å‡å°åˆ†ç±»è¯¯å·®ç‡å¤§çš„å¼±åˆ†ç±»å™¨çš„æƒå€¼ï¼Œä½¿å…¶åœ¨è¡¨å†³ä¸­èµ·è¾ƒå°çš„ä½œç”¨ã€‚</p>
</blockquote>
<p>AdaBoostç®—æ³•çš„å·§å¦™ä¹‹å¤„å°±åœ¨äºå®ƒå°†è¿™äº›å­¦ä¹ æ€è·¯è‡ªç„¶å¹¶ä¸”æœ‰æ•ˆåœ°åœ¨ä¸€ä¸ªç®—æ³•é‡Œé¢å®ç°ã€‚</p>
<h3 id="Boostingç®—æ³•ä»£è¡¨-ï¼šAdaboost-Adaptive-Boosting"><a href="#Boostingç®—æ³•ä»£è¡¨-ï¼šAdaboost-Adaptive-Boosting" class="headerlink" title="Boostingç®—æ³•ä»£è¡¨ ï¼šAdaboost(Adaptive Boosting)"></a>Boostingç®—æ³•ä»£è¡¨ ï¼šAdaboost(Adaptive Boosting)</h3><blockquote>
<p>æ ¸å¿ƒæ€æƒ³ï¼šä¸€ç§è¿­ä»£ç®—æ³•ï¼Œé’ˆå¯¹åŒä¸€ä¸ªè®­ç»ƒé›†è®­ç»ƒä¸åŒçš„åˆ†ç±»å™¨(å¼±åˆ†ç±»å™¨)ï¼Œç„¶åè¿›è¡Œåˆ†ç±»ï¼Œå¯¹äºåˆ†ç±»æ­£ç¡®çš„æ ·æœ¬æƒå€¼ä½ï¼Œåˆ†ç±»é”™è¯¯çš„æ ·æœ¬æƒå€¼é«˜ï¼ˆé€šå¸¸æ˜¯è¾¹ç•Œé™„è¿‘çš„æ ·æœ¬ï¼‰ï¼Œæœ€åçš„åˆ†ç±»å™¨æ˜¯å¾ˆå¤šå¼±åˆ†ç±»å™¨çš„çº¿æ€§å åŠ ï¼ˆåŠ æƒç»„åˆï¼‰ï¼Œåˆ†ç±»å™¨ç›¸å½“ç®€å•ã€‚å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç®€å•çš„å¼±åˆ†ç±»ç®—æ³•æå‡(boost)çš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<p><strong>çœ‹å›¾å½¢æ¥è¿‡ä¸€éAdaboostç®—æ³•</strong></p>
<p><img src="/images/ml/ensumble/ml-ensumble-4-adaboost.jpeg" width="600"></p>
<blockquote>
<p>ç®—æ³•å¼€å§‹å‰ï¼Œéœ€è¦å°†æ¯ä¸ªæ ·æœ¬çš„æƒé‡åˆå§‹åŒ–ä¸º 1/m, è¿™æ ·ä¸€å¼€å§‹æ¯ä¸ªæ ·æœ¬éƒ½æ˜¯ç­‰æ¦‚ç‡çš„åˆ†å¸ƒï¼Œæ¯ä¸ªåˆ†ç±»å™¨éƒ½ä¼šå…¬æ­£å¯¹å¾….</p>
</blockquote>
<p><img src="/images/ml/ensumble/ml-ensumble-5-adaboost.jpeg" width="600"></p>
<blockquote>
<p>Round1ï¼Œå› ä¸ºæ ·æœ¬æƒé‡éƒ½ä¸€æ ·ï¼Œæ‰€ä»¥åˆ†ç±»å™¨å¼€å§‹åˆ’åˆ†ï¼Œæ ¹æ®è‡ªå·±åˆ†ç±»å™¨çš„æƒ…å†µï¼Œåªå’Œåˆ†ç±»å™¨æœ‰å…³ã€‚åˆ’åˆ†ä¹‹åå‘ç°åˆ†é”™äº†ä¸‰ä¸ªâ€+â€å·ï¼Œé‚£ä¹ˆè¿™äº›åˆ†é”™çš„æ ·æœ¬ï¼Œåœ¨ç»™ä¸‹ä¸€ä¸ªåˆ†ç±»å™¨çš„æ—¶å€™æƒé‡å°±å¾—åˆ°æé«˜,ä¹Ÿå°±æ˜¯ä¼šå½±å“åˆ°ä¸‹æ¬¡å–è®­ç»ƒæ ·æœ¬çš„åˆ†å¸ƒï¼Œå°±æ˜¯æé†’ä¸‹ä¸€ä¸ªåˆ†ç±»å™¨ï¼Œâ€œè¯¶ï¼ä½ æ³¨æ„ç‚¹è¿™å‡ ä¸ªå°å­ï¼Œæˆ‘ä¸Šæ¬¡æ ½åœ¨ä»–ä»¬æ‰‹é‡Œäº†ï¼â€</p>
</blockquote>
<p><img src="/images/ml/ensumble/ml-ensumble-6-adaboost.jpeg" width="600"></p>
<blockquote>
<p>Round2,ç¬¬äºŒä»£åˆ†ç±»å™¨ä¿¡èª“æ—¦æ—¦çš„å¯¹ä¸Šä¸€ä»£åˆ†ç±»å™¨è¯´â€æˆ‘çŸ¥é“äº†ï¼Œå¤§å“¥ï¼æˆ‘ä¸€å®šçå¤§çœ¼ç›å¥½å¥½åˆ†ç€ä¸‰ä¸ªç©æ„ï¼â€okï¼Œè¿™æ¬¡ä¸‰ä¸ªä¸Šæ¬¡åˆ†é”™çš„éƒ½è¢«åˆ†å‡ºæ¥äº†ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å…¨éƒ¨æ­£ç¡®ï¼Œè¿™æ¬¡åˆæ ½å€’åœ¨å·¦ä¸‹è§’ä¸‰ä¸ªâ€-â€œä¸Šäº†ï¼Œç„¶åä¸´æ­»å‰ï¼Œç¬¬äºŒä»£åˆ†ç±»å™¨å¯¹ä¸‹ä¸€ä»£åˆ†ç±»å™¨è¯´â€è¿™æ¬¡æˆ‘å’Œä¸Šä¸€ä»£åˆ†ç±»å™¨å·²ç»æŠŠä»–ä»¬æ‘¸å¾—å·®ä¸å¤šäº†ï¼Œä½ å†ç¨å¾®æ³¨æ„ä¸‹å·¦ä¸‹è§’é‚£ä¸‰ä¸ªå°å­ï¼Œä¹Ÿåˆ«å¿˜äº†ä¸Šé¢é‚£ä¸‰ä¸ª(ä¸€ä»£é”™åˆ†çš„é‚£ä¸‰ä¸ªâ€+â€)ï¼â€</p>
</blockquote>
<p><img src="/images/ml/ensumble/ml-ensumble-7-adaboost.jpeg" width="600"></p>
<blockquote>
<p>Round3:æœ‰äº†ä¸Šé¢ä¸¤ä½å¤§å“¥çš„æé†’ï¼Œç¬¬ä¸‰ä»£åˆ†ç±»å™¨è¡¨ç¤ºï¼Œæˆ‘å·®ä¸å¤šéƒ½çŸ¥é“ä¸Šæ¬¡å¤§å“¥ä»¬éƒ½é”™å“ªäº†ï¼Œæˆ‘åªè¦å°å¿ƒè¿™å‡ ä¸ªï¼Œåº”è¯¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼åªè¦æŠŠä»–ä»¬å¼„é”™çš„æˆ‘ç»™æ•´å¯¹äº†ï¼Œç„¶åæŠŠæˆ‘ä»¬æ”¶é›†çš„ä¿¡æ¯ä¸€å¯¹ï¼Œè¿™ä¸å°±è¡Œäº†ä¹ˆï¼okï¼Œç¬¬ä¸‰ä»£åˆ†ç±»å™¨ä¸è´Ÿä¼—æœ›ï¼ŒæˆåŠŸåˆ†å¯¹ä¸Šé¢ä¸¤ä»£åˆ†ç±»å™¨é‡ç‚¹å…³æ³¨çš„å¯¹è±¡ï¼Œè‡³äºåˆ†é”™çš„é‚£å‡ ä¸ªå°çš„ï¼Œä»¥å‰å¤§å“¥ä»¬éƒ½åˆ†å¯¹äº†ï¼Œæˆ‘ä»¬åä¸‹æ¥æ ¸å¯¹ä¸€ä¸‹å°±è¡Œäº†ï¼</p>
</blockquote>
<p><img src="/images/ml/ensumble/ml-ensumble-8-adaboost.jpeg" width="600"></p>
<blockquote>
<p>æœ€åï¼Œä¸‰ä¸ªåˆ†ç±»å™¨åä¸‹æ¥ï¼Œå„è‡ªè°ˆäº†è°ˆå¿ƒå¾—ï¼Œåˆ†é…äº†ä¸‹æƒé‡ï¼Œç„¶åä¸€ä¸ªè¯¸è‘›äº®å°±è¯ç”Ÿå•¦ï¼è¿™ä¹Ÿå°±æ˜¯ â€œä¸‰ä¸ªè‡­çš®åŒ é¡¶ä¸ªè¯¸è‘›äº®çš„æ•…äº‹â€ â€¦ğŸ˜„ğŸ˜„ğŸ˜„, æ˜¯ä¸æ˜¯é“ç†å¾ˆç®€å•ï¼è‡³äºæƒé‡å¦‚ä½•è®¡ç®—ï¼Œæš‚ä¸åœ¨æœ¬æ–‡è®¨è®º.</p>
</blockquote>
<p><strong>Adaboost ä¼˜ç‚¹</strong></p>
<blockquote>
<ol>
<li>å¯ä»¥ä½¿ç”¨å„ç§æ–¹æ³•æ„é€ å­åˆ†ç±»å™¨ï¼ŒAdaboostç®—æ³•æä¾›çš„æ˜¯æ¡†æ¶</li>
<li>ç®€å•ï¼Œä¸ç”¨åšç‰¹å¾ç­›é€‰</li>
<li>ç›¸æ¯”è¾ƒäºRFï¼Œæ›´ä¸ç”¨æ‹…å¿ƒè¿‡æ‹Ÿåˆé—®é¢˜</li>
</ol>
</blockquote>
<p><strong>Adaboost ç¼ºç‚¹</strong></p>
<blockquote>
<ol>
<li>Adaboostå¯¹äº<strong>å™ªå£°æ˜¯ååˆ†æ•æ„Ÿ</strong>çš„ã€‚Boostingæ–¹æ³•æœ¬èº«å¯¹å™ªå£°ç‚¹å¼‚å¸¸ç‚¹å¾ˆæ•æ„Ÿï¼Œå› æ­¤åœ¨æ¯æ¬¡è¿­ä»£æ—¶å€™ä¼šç»™å™ªå£°ç‚¹è¾ƒå¤§çš„æƒé‡ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬ç³»ç»Ÿæ‰€æœŸæœ›çš„ã€‚</li>
<li>è¿è¡Œé€Ÿåº¦æ…¢ï¼Œå‡¡æ˜¯æ¶‰åŠè¿­ä»£çš„åŸºæœ¬ä¸Šéƒ½æ— æ³•é‡‡ç”¨å¹¶è¡Œè®¡ç®—ï¼ŒAdaboostæ˜¯ä¸€ç§â€ä¸²è¡Œâ€ç®—æ³•.æ‰€ä»¥GBDT(Gradient Boosting Decision Tree)ä¹Ÿéå¸¸æ…¢ã€‚</li>
</ol>
</blockquote>
<p><strong>Pay Attention</strong></p>
<blockquote>
<ol>
<li>Bagging æ ‘â€å¹¶è¡Œâ€ç”Ÿæˆ,å¦‚ Random Forest ; Boostingï¼šæ ‘â€ä¸²è¡Œâ€ç”Ÿæˆ,å¦‚Adaboost</li>
<li>Boosting ä¸­åŸºæ¨¡å‹ä¸ºå¼±æ¨¡å‹ï¼Œè€Œ Random Forest ä¸­çš„åŸºæ ‘æ˜¯å¼ºæ¨¡å‹(å¤§å¤šæ•°æƒ…å†µ)</li>
<li><p>Boosting é‡é‡‡æ ·çš„ä¸æ˜¯æ ·æœ¬ï¼Œè€Œæ˜¯æ ·æœ¬çš„åˆ†å¸ƒï¼Œæ¯æ¬¡è¿­ä»£ä¹‹åï¼Œæ ·æœ¬çš„åˆ†å¸ƒä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¢«åˆ†é”™çš„æ ·æœ¬ä¼šæ›´å¤šçš„å‡ºç°åœ¨ä¸‹ä¸€æ¬¡è®­ç»ƒé›†ä¸­</p>
</li>
<li><p>æ˜ç¡®ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¿­ä»£ä¹Ÿå¥½(Adaboost), å¹¶è¡Œ(RF)ä¹Ÿå¥½ï¼Œåªå’Œè®­ç»ƒé›†æœ‰å…³ï¼Œå’Œæµ‹è¯•é›†çœŸçš„ä¸€æ¯›é’±å…³ç³»éƒ½æ²¡æœ‰å¥½ä¹ˆï¼æˆ‘ä»¬å…ˆæŠŠåŸå§‹æ•°æ®åˆ†ç±»æµ‹è¯•é›†å’Œè®­ç»ƒé›†ï¼Œç„¶åæµ‹è¯•é›†æ”¾ä¸€è¾¹ï¼Œè®­ç»ƒé›†é‡Œé¢å†æŒ‘å­é›†ä½œä¸ºè¿­ä»£ç®—æ³•ç”¨çš„è®­ç»ƒé›†ï¼è¿™ä¸ªå’Œ<a href="http://statweb.stanford.edu/~tibs/sta306bfiles/cvwrong.pdf" target="_blank" rel="external">K-Fold Cross-Validation</a>æ€æƒ³ç±»ä¼¼.</p>
</li>
</ol>
</blockquote>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><ul>
<li><a href="https://www.jianshu.com/p/708dff71df3a" target="_blank" rel="external">æ€»ç»“ï¼šBootstrap(è‡ªåŠ©æ³•)ï¼ŒBaggingï¼ŒBoosting(æå‡)</a></li>
<li><a href="https://blog.csdn.net/xlinsist/article/details/51475345" target="_blank" rel="external">Baggingï¼ˆBootstrap aggregatingï¼‰ã€éšæœºæ£®æ—ï¼ˆrandom forestsï¼‰ã€AdaBoost</a></li>
<li><a href="http://bbs.quanttech.cn/article/524" target="_blank" rel="external">æœºå™¨å­¦ä¹ é€‰è®²ï¼šAdaBoostæ–¹æ³•è¯¦è§£</a></li>
<li><a href="http://www.52caml.com/head_first_ml/ml-chapter6-boosting-family/" target="_blank" rel="external">52caml</a></li>
<li><a href="https://www.zhihu.com/question/49386395" target="_blank" rel="external">ç»Ÿè®¡å­¦ä¹ æ–¹æ³•</a></li>
<li><a href="https://blog.csdn.net/u010859707/article/details/78677989" target="_blank" rel="external">Scikit-Learn ä¸­æ–‡æ–‡æ¡£ æ¦‚ç‡æ ¡å‡† - ç›‘ç£å­¦ä¹ </a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ensemble Learning (part1)]]></title>
      <url>http://shopee.ai/2018/04/07/ml/ensumble-boosting-1/</url>
      <content type="html"><![CDATA[<p>Ensemble learningï¼ˆé›†æˆå­¦ä¹ ï¼‰ï¼šæ˜¯ç›®å‰æœºå™¨å­¦ä¹ çš„ä¸€å¤§çƒ­é—¨æ–¹å‘ï¼Œæ‰€è°“é›†æˆå­¦ä¹ ç®€å•ç†è§£å°±æ˜¯æŒ‡é‡‡ç”¨å¤šä¸ªåˆ†ç±»å™¨å¯¹æ•°æ®é›†è¿›è¡Œé¢„æµ‹ï¼Œä»è€Œæé«˜æ•´ä½“åˆ†ç±»å™¨çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
<a id="more"></a>
<ol>
<li>Bootstraping</li>
<li>Baggingã€Boostingã€Stacking</li>
</ol>
<h2 id="Bootstraping"><a href="#Bootstraping" class="headerlink" title="Bootstraping"></a>Bootstraping</h2><p>Bootstrapingçš„åç§°æ¥è‡ªæˆè¯­ â€œpull up by your own bootstrapsâ€ï¼Œæ„æ€æ˜¯ä¾é ä½ è‡ªå·±çš„èµ„æºï¼Œå®ƒæ˜¯ä¸€ç§æœ‰æ”¾å›çš„æŠ½æ ·æ–¹æ³•.</p>
<blockquote>
<p>æ³¨:Bootstrapæœ¬ä¹‰æ˜¯æŒ‡é«˜é´å­å£åé¢çš„æ‚¬æŒ‚ç‰©ã€å°ç¯ã€å¸¦å­ï¼Œæ˜¯ç©¿é´å­æ—¶ç”¨æ‰‹å‘ä¸Šæ‹‰çš„å·¥å…·ã€‚â€œpull up by your own bootstrapsâ€å³â€œé€šè¿‡æ‹‰é´å­è®©è‡ªå·±ä¸Š å‡â€ï¼Œæ„æ€æ˜¯â€œä¸å¯èƒ½å‘ç”Ÿçš„äº‹æƒ…â€ã€‚åæ¥æ„æ€å‘ ç”Ÿäº†è½¬å˜ï¼Œéšå–»â€œä¸éœ€è¦å¤–ç•Œå¸®åŠ©ï¼Œä»…ä¾é è‡ªèº«åŠ› é‡è®©è‡ªå·±å˜å¾—æ›´å¥½â€</p>
</blockquote>
<p>bootstraping çš„æ€æƒ³å’Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼šæˆ‘è¦ç»Ÿè®¡é±¼å¡˜é‡Œé¢çš„é±¼çš„æ¡æ•°ï¼Œæ€ä¹ˆç»Ÿè®¡å‘¢ï¼Ÿå‡è®¾é±¼å¡˜æ€»å…±æœ‰é±¼1000æ¡ï¼Œæˆ‘æ˜¯å¼€äº†ä¸Šå¸è§†è§’çš„ï¼Œä½†æ˜¯ä½ æ˜¯ä¸çŸ¥é“é‡Œé¢æœ‰å¤šå°‘ã€‚</p>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li>æ‰¿åŒ…é±¼å¡˜ï¼Œä¸è®©åˆ«äººæé±¼(è§„å®šæ€»ä½“åˆ†å¸ƒä¸å˜)ã€‚</li>
<li>è‡ªå·±æé±¼ï¼Œæ100æ¡ï¼Œéƒ½æ‰“ä¸Šæ ‡ç­¾(æ„é€ æ ·æœ¬)</li>
<li>æŠŠé±¼æ”¾å›é±¼å¡˜ï¼Œä¼‘æ¯ä¸€æ™š(ä½¿ä¹‹æ··å…¥æ•´ä¸ªé±¼ç¾¤ï¼Œç¡®ä¿ä¹‹åæŠ½æ ·éšæœº)</li>
<li>å¼€å§‹æé±¼ï¼Œæ¯æ¬¡æ100æ¡ï¼Œæ•°ä¸€ä¸‹ï¼Œè‡ªå·±æ˜¨å¤©æ ‡è®°çš„é±¼æœ‰å¤šå°‘æ¡ï¼Œå æ¯”å¤šå°‘(ä¸€æ¬¡é‡é‡‡æ ·å–åˆ†å¸ƒ)ã€‚</li>
<li>é‡å¤3ï¼Œ4æ­¥éª¤næ¬¡ã€‚å»ºç«‹åˆ†å¸ƒã€‚</li>
</ol>
<blockquote>
<p>å‡è®¾ä¸€ä¸‹ï¼Œç¬¬ä¸€æ¬¡é‡æ–°æ•é±¼100æ¡ï¼Œå‘ç°é‡Œé¢æœ‰æ ‡è®°çš„é±¼12æ¡ï¼Œè®°ä¸‹ä¸º12%ï¼Œæ”¾å›å»ï¼Œå†æ•é±¼100æ¡ï¼Œå‘ç°æ ‡è®°çš„ä¸º9æ¡ï¼Œè®°ä¸‹9%ï¼Œé‡å¤é‡å¤å¥½å¤šæ¬¡ä¹‹åï¼Œå‡è®¾å–ç½®ä¿¡åŒºé—´95%ï¼Œä½ ä¼šå‘ç°ï¼Œæ¯æ¬¡æ•é±¼å¹³å‡åœ¨10æ¡å·¦å³æœ‰æ ‡è®°ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å¤§è‡´æ¨æµ‹å‡ºé±¼å¡˜æœ‰1000æ¡å·¦å³ã€‚å…¶å®æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„ç±»ä¼¼äºä¸€ä¸ªæ¯”ä¾‹é—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯å› ä¸ºæå‡ºè€…Efronç»™ç»Ÿè®¡å­¦é¡¶çº§æœŸåˆŠæŠ•ç¨¿çš„æ—¶å€™è¢«æ‹’ç»çš„ç†ç”±â€“â€å¤ªç®€å•â€ã€‚è¿™ä¹Ÿå°±è§£é‡Šäº†ï¼Œä¸ºä»€ä¹ˆåœ¨å°æ ·æœ¬çš„æ—¶å€™ï¼Œbootstrapæ•ˆæœè¾ƒå¥½ï¼Œä½ è¿™æ ·æƒ³ï¼Œå¦‚æœæˆ‘æƒ³ç»Ÿè®¡å¤§æµ·é‡Œæœ‰å¤šå°‘é±¼ï¼Œä½ æ ‡è®°100000æ¡ä¹Ÿæ²¡ç”¨å•Šï¼Œå› ä¸ºå®é™…æ•°é‡å¤ªè¿‡åºå¤§ï¼Œä½ å–çš„æ ·æœ¬ç›¸æ¯”äºå¤ªè¿‡æ¸ºå°ï¼Œæœ€å®é™…çš„å°±æ˜¯ï¼Œä½ ä¸‹æ¬¡å†æ•100000çš„æ—¶å€™ï¼Œå‘ç°ä¸€æ¡éƒ½æ²¡æœ‰æ ‡è®°ï¼Œï¼Œï¼Œè¿™TMå°±å°´å°¬äº†ã€‚ã€‚</p>
</blockquote>
<p><strong>Bootstrap ç»å…¸è¯­å½•</strong></p>
<blockquote>
<p>Bootstrapæ˜¯ç°ä»£ç»Ÿè®¡å­¦è¾ƒä¸ºæµè¡Œçš„ä¸€ç§ç»Ÿè®¡æ–¹æ³•ï¼Œåœ¨å°æ ·æœ¬æ—¶æ•ˆæœå¾ˆå¥½ã€‚é€šè¿‡æ–¹å·®çš„ä¼°è®¡å¯ä»¥æ„é€ ç½®ä¿¡åŒºé—´ç­‰ï¼Œå…¶è¿ç”¨èŒƒå›´å¾—åˆ°è¿›ä¸€æ­¥å»¶ä¼¸ã€‚<br>å°±æ˜¯ä¸€ä¸ªåœ¨è‡ªèº«æ ·æœ¬é‡é‡‡æ ·çš„æ–¹æ³•æ¥ä¼°è®¡çœŸå®åˆ†å¸ƒçš„é—®é¢˜</p>
<p>å½“æˆ‘ä»¬ä¸çŸ¥é“æ ·æœ¬åˆ†å¸ƒçš„æ—¶å€™ï¼Œbootstrapæ–¹æ³•æœ€æœ‰ç”¨ã€‚</p>
</blockquote>
<h2 id="Ensemble-learning"><a href="#Ensemble-learning" class="headerlink" title="Ensemble learning"></a>Ensemble learning</h2><p>äº†è§£ boosting å’Œ bagging ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ ensembleï¼Œä¸€å¥è¯ï¼Œä¸‰ä¸ªè‡­çš®åŒ é¡¶ä¸ªè¯¸è‘›äº®ï¼Œä¸€ç®­æ˜“æŠ˜åç®­éš¾æŠ˜ï¼Œåƒé‡Œä¹‹å ¤æºƒäºèšç©´ â€¦ğŸ˜„ğŸ˜„ğŸ˜„ ï¼Œåœ¨åˆ†ç±»çš„è¡¨ç°ä¸Šå°±æ˜¯ï¼Œå¤šä¸ªå¼±åˆ†ç±»å™¨ç»„åˆå˜æˆå¼ºåˆ†ç±»å™¨ã€‚</p>
<p><img src="/images/ml/ensumble/ml-ensemble-1.png" width="500"></p>
<blockquote>
<p>å‡è®¾å„å¼±åˆ†ç±»å™¨é—´å…·æœ‰ä¸€å®šå·®å¼‚æ€§ï¼ˆå¦‚ä¸åŒçš„ç®—æ³•ï¼Œæˆ–ç›¸åŒç®—æ³•ä¸åŒå‚æ•°é…ç½®ï¼‰ï¼Œè¿™ä¼šå¯¼è‡´ç”Ÿæˆçš„åˆ†ç±»å†³ç­–è¾¹ç•Œä¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬åœ¨å†³ç­–æ—¶ä¼šçŠ¯ä¸åŒçš„é”™è¯¯ã€‚å°†å®ƒä»¬ç»“åˆåèƒ½å¾—åˆ°æ›´åˆç†çš„è¾¹ç•Œï¼Œå‡å°‘æ•´ä½“é”™è¯¯ï¼Œå®ç°æ›´å¥½çš„åˆ†ç±»æ•ˆæœã€‚</p>
</blockquote>
<h3 id="Bagging-bootstrap-aggregation"><a href="#Bagging-bootstrap-aggregation" class="headerlink" title="Bagging (bootstrap aggregation)"></a>Bagging (bootstrap aggregation)</h3><blockquote>
<p>baggingï¼šä»è®­ç»ƒé›†ä»è¿›è¡Œå­æŠ½æ ·ç»„æˆæ¯ä¸ªåŸºæ¨¡å‹æ‰€éœ€è¦çš„å­è®­ç»ƒé›†ï¼Œå¯¹æ‰€æœ‰åŸºæ¨¡å‹é¢„æµ‹çš„ç»“æœè¿›è¡Œç»¼åˆäº§ç”Ÿæœ€ç»ˆçš„é¢„æµ‹ç»“æœ,è‡³äºä¸ºä»€ä¹ˆå«bootstrap aggregationï¼Œå› ä¸ºå®ƒæŠ½å–è®­ç»ƒæ ·æœ¬çš„æ—¶å€™é‡‡ç”¨çš„å°±æ˜¯bootstrapçš„æ–¹æ³•ï¼</p>
</blockquote>
<p>Bagging ç­–ç•¥è¿‡ç¨‹ ğŸ˜„ :</p>
<ol>
<li>ä»æ ·æœ¬é›†ä¸­é‡é‡‡æ ·(æœ‰é‡å¤çš„)é€‰å‡ºnä¸ªæ ·æœ¬</li>
<li>åœ¨æ‰€æœ‰å±æ€§ä¸Šï¼Œå¯¹è¿™nä¸ªæ ·æœ¬å»ºç«‹åˆ†ç±»å™¨ (ID3ã€C4.5ã€CARTã€SVMã€Logisticå›å½’ç­‰)</li>
<li>é‡å¤ä»¥ä¸Šä¸¤æ­¥mæ¬¡ï¼Œå³è·å¾—äº†mä¸ªåˆ†ç±»å™¨</li>
<li>å°†æ•°æ®æ”¾åœ¨è¿™mä¸ªåˆ†ç±»å™¨ä¸Šï¼Œæœ€åæ ¹æ®è¿™mä¸ªåˆ†ç±»å™¨çš„æŠ•ç¥¨ç»“æœï¼Œå†³å®šæ•°æ®å±äºå“ªä¸€ç±».</li>
<li>æŠ•ç¥¨æœºåˆ¶ (å¤šæ•°æœä»å°‘æ•°, æ°‘ä¸»æ”¿æ²») çœ‹åˆ°åº•åˆ†åˆ°å“ªä¸€ç±»(åˆ†ç±»é—®é¢˜)</li>
</ol>
<p><img src="/images/ml/ensumble/ml-ensemble-2-bagging.jpeg" width="600"></p>
<p><strong>Bagging ä»£è¡¨ç®—æ³• - Random Forest</strong></p>
<p>éšæœºæ£®æ—ï¼Œå®ƒä¸ä»…å¯ä»¥ç”¨æ¥åšåˆ†ç±»ï¼Œä¹Ÿå¯ç”¨æ¥åšå›å½’å³é¢„æµ‹ï¼Œä¸€èˆ¬éšæœºæ£®æ—æœºç”±å¤šä¸ªå†³ç­–æ ‘æ„æˆï¼Œç›¸æ¯”äºå•ä¸ªå†³ç­–æ ‘ç®—æ³•ï¼Œå®ƒåˆ†ç±»ã€é¢„æµ‹æ•ˆæœæ›´å¥½ï¼Œä¸å®¹æ˜“å‡ºç°è¿‡åº¦æ‹Ÿåˆçš„æƒ…å†µã€‚</p>
<p>1.è®­ç»ƒæ ·æœ¬é€‰æ‹©æ–¹é¢çš„Randomï¼š</p>
<blockquote>
<p>Bootstrapæ–¹æ³•éšæœºé€‰æ‹©å­æ ·æœ¬</p>
</blockquote>
<p>2.ç‰¹å¾é€‰æ‹©æ–¹é¢çš„Randomï¼š</p>
<blockquote>
<p>å±æ€§é›†ä¸­éšæœºé€‰æ‹©kä¸ªå±æ€§ï¼Œæ¯ä¸ªæ ‘èŠ‚ç‚¹åˆ†è£‚æ—¶ï¼Œä»è¿™éšæœºçš„kä¸ªå±æ€§ï¼Œé€‰æ‹©æœ€ä¼˜çš„(å¦‚ä½•é€‰æ‹©æœ€ä¼˜åˆæœ‰å„ç§æœ€å¤§å¢ç›Šçš„æ–¹æ³•ï¼Œä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´å†…)ã€‚</p>
</blockquote>
<p><strong>å†³ç­–æ ‘</strong></p>
<p>å†³ç­–æ ‘å¯¹è®­ç»ƒæ ·æœ¬æœ‰è‰¯å¥½çš„åˆ†ç±»èƒ½åŠ›ï¼Œåªè¦æˆ‘ä»¬çš„å±‚æ•°ä¸åŠ é™åˆ¶ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æŠŠå®ƒåˆ†çš„æ²¡æœ‰ä»»ä½•è¯¯å·®ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´ä½ çš„æ³›åŒ–èƒ½åŠ›å¾ˆå¼±ã€‚ ç¼“è§£çš„æ–¹æ³•å°±æ˜¯ 1. å‰ªæ 2. éšæœºæ£®æ—</p>
<p>å‰ªæ æˆ‘è¿˜æ²¡ç”¨è¿‡ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹å¸¸ç”¨çš„ éšæœºæ£®æ— Romdom Forest</p>
<p>å†³ç­–æ ‘ ï¼š ç‰¹å¾é€‰æ‹©</p>
<ol>
<li>ID3 ä»…å…·æœ‰æ•™å­¦ä»·å€¼</li>
<li>gini ç³»æ•°ï¼Œä½œä¸ºæŒ‡æ ‡æ¯”è¾ƒå¤šï¼Œåœ¨å®è·µå½“ä¸­</li>
</ol>
<p><strong>Random Forest æ„é€ æµç¨‹</strong></p>
<p><img src="/images/ml/ensumble/ml-ensemble-3-bagging.jpeg" width="600"></p>
<blockquote>
<ol>
<li>ç”¨ Random(è®­ç»ƒæ ·æœ¬ç”¨Bootstrapæ–¹æ³•ï¼Œé€‰æ‹©åˆ†ç¦»å¶å­èŠ‚ç‚¹ç”¨ä¸Šé¢çš„2)çš„æ–¹å¼æ„é€ ä¸€æ£µå†³ç­–æ ‘(CART)</li>
<li>ç”¨1çš„æ–¹æ³•æ„é€ å¾ˆå¤šå†³ç­–æ ‘, ä¸å‰ªæ, è®¸å¤šå†³ç­–æ ‘æ„æˆä¸€ç‰‡æ£®æ—ï¼Œå†³ç­–æ ‘ä¹‹é—´æ²¡æœ‰è”ç³»</li>
<li>æµ‹è¯•æ•°æ®è¿›å…¥æ¯ä¸€æ£µå†³ç­–æ ‘ï¼Œæ¯æ£µæ ‘åšå‡ºè‡ªå·±çš„åˆ¤æ–­ï¼Œç„¶åæŠ•ç¥¨é€‰å‡ºæœ€ç»ˆæ‰€å±ç±»åˆ«(é»˜è®¤æ¯æ£µæ ‘æƒé‡ä¸€è‡´)</li>
</ol>
</blockquote>
<p><strong>Random Forest ä¼˜ç‚¹</strong></p>
<blockquote>
<ol>
<li>ä¸å®¹æ˜“å‡ºç°è¿‡æ‹Ÿåˆï¼Œå› ä¸ºé€‰æ‹©è®­ç»ƒæ ·æœ¬çš„æ—¶å€™å°±ä¸æ˜¯å…¨éƒ¨æ ·æœ¬ã€‚</li>
<li>æ—¢å¯å¤„ç†å±æ€§ä¸ºç¦»æ•£å€¼çš„é‡ï¼Œæ¯”å¦‚ID3ç®—æ³•æ¥æ„é€ æ ‘ï¼Œä¹Ÿå¯ä»¥å¤„ç†å±æ€§ä¸ºè¿ç»­å€¼çš„é‡ï¼Œæ¯”å¦‚C4.5ç®—æ³•æ¥æ„é€ æ ‘</li>
<li>å¯¹äºé«˜ç»´æ•°æ®é›†çš„å¤„ç†èƒ½åŠ›ä»¤äººå…´å¥‹ï¼Œå®ƒå¯ä»¥å¤„ç†æˆåƒä¸Šä¸‡çš„è¾“å…¥å˜é‡ï¼Œå¹¶ç¡®å®šæœ€é‡è¦çš„å˜é‡ï¼Œå› æ­¤è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªä¸é”™çš„é™ç»´æ–¹æ³•ã€‚è¯¥æ¨¡å‹èƒ½å¤Ÿè¾“å‡ºå˜é‡çš„é‡è¦æ€§ç¨‹åº¦ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ä¾¿åˆ©çš„åŠŸèƒ½ã€‚</li>
<li>åˆ†ç±»ä¸å¹³è¡¡çš„æƒ…å†µæ—¶ï¼Œéšæœºæ£®æ—èƒ½å¤Ÿæä¾›å¹³è¡¡æ•°æ®é›†è¯¯å·®çš„æœ‰æ•ˆæ–¹æ³•</li>
</ol>
</blockquote>
<p><strong>Random Forest ç¼ºç‚¹</strong></p>
<blockquote>
<ol>
<li>éšæœºæ£®æ—åœ¨è§£å†³å›å½’é—®é¢˜æ—¶å¹¶æ²¡æœ‰åƒå®ƒåœ¨åˆ†ç±»ä¸­è¡¨ç°çš„é‚£ä¹ˆå¥½ï¼Œè¿™æ˜¯å› ä¸ºå®ƒå¹¶ä¸èƒ½ç»™å‡ºä¸€ä¸ªè¿ç»­å‹çš„è¾“å‡ºã€‚å½“è¿›è¡Œå›å½’æ—¶ï¼Œéšæœºæ£®æ—ä¸èƒ½å¤Ÿä½œå‡ºè¶…è¶Šè®­ç»ƒé›†æ•°æ®èŒƒå›´çš„é¢„æµ‹ï¼Œè¿™å¯èƒ½å¯¼è‡´åœ¨å¯¹æŸäº›è¿˜æœ‰ç‰¹å®šå™ªå£°çš„æ•°æ®è¿›è¡Œå»ºæ¨¡æ—¶å‡ºç°è¿‡åº¦æ‹Ÿåˆã€‚</li>
<li>å¯¹äºè®¸å¤šç»Ÿè®¡å»ºæ¨¡è€…æ¥è¯´ï¼Œéšæœºæ£®æ—ç»™äººçš„æ„Ÿè§‰åƒæ˜¯ä¸€ä¸ªé»‘ç›’å­â€”â€”ä½ å‡ ä¹æ— æ³•æ§åˆ¶æ¨¡å‹å†…éƒ¨çš„è¿è¡Œï¼Œåªèƒ½åœ¨ä¸åŒçš„å‚æ•°å’Œéšæœºç§å­ä¹‹é—´è¿›è¡Œå°è¯•ã€‚</li>
</ol>
<p>ä¼˜ç¼ºç‚¹ï¼Œéœ€è¦ä¸æ°ç¥å•†è®¨å†?</p>
</blockquote>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><ul>
<li><a href="https://www.jianshu.com/p/708dff71df3a" target="_blank" rel="external">Baggingï¼ˆBootstrap aggregatingï¼‰ã€éšæœºæ£®æ—ï¼ˆrandom forestsï¼‰ã€AdaBoost</a></li>
<li><a href="https://blog.csdn.net/xlinsist/article/details/51475345" target="_blank" rel="external">Bootstrap(è‡ªåŠ©æ³•)ï¼ŒBaggingï¼ŒBoosting(æå‡)</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ä¸€èˆ¬è‹±æ–‡è½åŠ›ç·´ç¿’æ–¹æ³•]]></title>
      <url>http://shopee.ai/2018/01/28/English/english-cindy-listening-duoyi/</url>
      <content type="html"><![CDATA[<p>å¤šç›Š ä»¥åŠ ä¸€èˆ¬è‹±æ–‡è½åŠ›åŠ å¼· | å’ŒCindyå­¸è‹±æ–‡ ç¬”è®°</p>
<a id="more"></a>
<h2 id="ç·´ç¿’è½åŠ›"><a href="#ç·´ç¿’è½åŠ›" class="headerlink" title="ç·´ç¿’è½åŠ›"></a>ç·´ç¿’è½åŠ›</h2><p>Useful Websites</p>
<ul>
<li><p><a href="http://www.newsinlevels.com/" target="_blank" rel="external">News In Levels</a></p>
</li>
<li><p><a href="https://umano.me/" target="_blank" rel="external">Umano</a></p>
</li>
<li><p><a href="http://lyricstraining.com/" target="_blank" rel="external">Lyrics Training</a></p>
</li>
</ul>
<p>Listen to Music</p>
<ul>
<li><p><a href="http://lyricstraining.com/" target="_blank" rel="external">Lyrics Training</a></p>
</li>
<li><p><a href="https://www.youtube.com/results?search_query=Taylor+Swift" target="_blank" rel="external">Taylor Swiftã€Miley Cyrusã€Blake Sheltonâ€¦</a></p>
</li>
</ul>
<p>Sitcom and Movies</p>
<ul>
<li><p><a href="http://www.livesinabox.com/friends/scripts.shtml" target="_blank" rel="external">Friends</a></p>
</li>
<li><p><a href="https://www.springfieldspringfield.co.uk/episode_scripts.php?tv-show=how-i-met-your-mother" target="_blank" rel="external">How I met your Mother</a></p>
</li>
<li><p><a href="http://www.imsdb.com/scripts/Titanic.html" target="_blank" rel="external">Titanic</a></p>
</li>
<li><p><a href="https://www.springfieldspringfield.co.uk/movie_script.php?movie=the-hobbit-an-unexpected-journey" target="_blank" rel="external">Hobbit</a></p>
</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.youtube.com/watch?v=D8gdg1zdM7U" target="_blank" rel="external">å¤šç›Š è‹±æ–‡è½åŠ›åŠ å¼· å’ŒCindyå­¸è‹±æ–‡</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python copy & deepcopy]]></title>
      <url>http://shopee.ai/2018/01/24/python/language/py-language-13-copy/</url>
      <content type="html"><![CDATA[<p>å¯¹è±¡çš„èµ‹å€¼ï¼Œæ‹·è´ï¼ˆæ·±/æµ…æ‹·è´ï¼‰ä¹‹é—´æ˜¯æœ‰å·®å¼‚çš„ï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼Œå¯èƒ½äº§ç”Ÿæ„å¤–çš„ç»“æœ.</p>
<a id="more"></a>
<h2 id="id"><a href="#id" class="headerlink" title="id"></a>id</h2><p>ä»€ä¹ˆæ˜¯<code>id</code>ï¼Ÿä¸€ä¸ªå¯¹è±¡çš„<code>id</code>å€¼åœ¨<code>CPython</code>è§£é‡Šå™¨é‡Œå°±ä»£è¡¨å®ƒåœ¨å†…å­˜ä¸­çš„`åœ°å€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">b=a</span><br><span class="line"></span><br><span class="line">print(id(a))</span><br><span class="line"></span><br><span class="line">print(id(b))</span><br><span class="line"></span><br><span class="line">print(id(a)==id(b))    <span class="comment">#é™„å€¼åï¼Œä¸¤è€…çš„idç›¸åŒï¼Œä¸ºtrueã€‚</span></span><br><span class="line"></span><br><span class="line">b[<span class="number">0</span>]=<span class="number">222222</span>  <span class="comment"># æ­¤æ—¶ï¼Œæ”¹å˜bçš„ç¬¬ä¸€ä¸ªå€¼ï¼Œä¹Ÿä¼šå¯¼è‡´aå€¼æ”¹å˜ã€‚</span></span><br><span class="line">print(a,b)</span><br></pre></td></tr></table></figure>
<pre><code>4449594888
4449594888
True
[222222, 2, 3] [222222, 2, 3]
</code></pre><h2 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h2><p>å½“ä½¿ç”¨æµ…æ‹·è´æ—¶ï¼Œpython åªæ˜¯æ‹·è´äº†æœ€å¤–å›´çš„å¯¹è±¡æœ¬èº«ï¼Œå†…éƒ¨çš„å…ƒç´ éƒ½åªæ˜¯æ‹·è´äº†ä¸€ä¸ªå¼•ç”¨è€Œå·²</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">c=copy.copy(a)  <span class="comment">#æ‹·è´äº†açš„å¤–å›´å¯¹è±¡æœ¬èº«,</span></span><br><span class="line">print(id(c))</span><br><span class="line"></span><br><span class="line">print(id(a)==id(c))  <span class="comment">#id æ”¹å˜ ä¸ºfalse</span></span><br><span class="line"></span><br><span class="line">c[<span class="number">1</span>]=<span class="number">22222</span>   <span class="comment">#æ­¤æ—¶ï¼Œæˆ‘å»æ”¹å˜cçš„ç¬¬äºŒä¸ªå€¼æ—¶ï¼Œaä¸ä¼šè¢«æ”¹å˜ã€‚</span></span><br><span class="line">print(a,c)</span><br><span class="line"><span class="comment"># [1, 2, 3] [1, 22222, 3] #aå€¼ä¸å˜,cçš„ç¬¬äºŒä¸ªå€¼å˜äº†ï¼Œè¿™å°±æ˜¯copyå’Œâ€˜==â€™çš„ä¸åŒ</span></span><br></pre></td></tr></table></figure>
<pre><code>4449594440
False
[1, 2, 3] [1, 22222, 3]
</code></pre><h2 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h2><p><code>deepcopy</code> å¯¹å¤–å›´å’Œå†…éƒ¨å…ƒç´ éƒ½è¿›è¡Œäº†æ‹·è´å¯¹è±¡æœ¬èº«ï¼Œè€Œä¸æ˜¯å¯¹è±¡çš„å¼•ç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#copy.copy()</span></span><br><span class="line"></span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,[<span class="number">3</span>,<span class="number">4</span>]]  <span class="comment">#ç¬¬ä¸‰ä¸ªå€¼ä¸ºåˆ—è¡¨[3,4],å³å†…éƒ¨å…ƒç´ </span></span><br><span class="line">d=copy.copy(a) <span class="comment">#æµ…æ‹·è´aä¸­çš„[3ï¼Œ4]å†…éƒ¨å…ƒç´ çš„å¼•ç”¨ï¼Œéå†…éƒ¨å…ƒç´ å¯¹è±¡çš„æœ¬èº«</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(a)==id(d)</span><br><span class="line"><span class="keyword">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>id(a[<span class="number">2</span>])==id(d[<span class="number">2</span>])</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">2</span>][<span class="number">0</span>]=<span class="number">3333</span>  <span class="comment">#æ”¹å˜aä¸­å†…éƒ¨åŸå±åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d             <span class="comment">#è¿™æ—¶dä¸­çš„åˆ—è¡¨å…ƒç´ ä¹Ÿä¼šè¢«æ”¹å˜</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3333</span>, <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#copy.deepcopy()</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e=copy.deepcopy(a) <span class="comment">#eä¸ºæ·±æ‹·è´äº†a</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">2</span>][<span class="number">0</span>]=<span class="number">333</span> <span class="comment">#æ”¹å˜aä¸­å†…éƒ¨å…ƒç´ åˆ—è¡¨ç¬¬ä¸€ä¸ªçš„å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3333</span>, <span class="number">4</span>]] <span class="comment">#å› ä¸ºæ—¶æ·±æ‹·è´ï¼Œè¿™æ—¶eä¸­å†…éƒ¨å…ƒç´ []åˆ—è¡¨çš„å€¼ä¸ä¼šå› ä¸ºaä¸­çš„å€¼æ”¹å˜è€Œæ”¹å˜</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://docs.python.org/" target="_blank" rel="external">docs.python.org</a></li>
<li><a href="https://morvanzhou.github.io/" target="_blank" rel="external">python morvanzhou</a></li>
<li><a href="https://www.liaoxuefeng.com/" target="_blank" rel="external">python liaoxuefeng</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python try â€¦ except â€¦ as â€¦]]></title>
      <url>http://shopee.ai/2018/01/24/python/language/py-language-12-try-exception/</url>
      <content type="html"><![CDATA[<p>try:, except â€¦ as â€¦:</p>
<a id="more"></a>
<h2 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h2><p>è¾“å‡ºé”™è¯¯ï¼š<code>try:, except ... as ...</code>: çœ‹å¦‚ä¸‹ä»£ç </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    file=open(<span class="string">'eeee.txt'</span>,<span class="string">'r'</span>)  <span class="comment">#ä¼šæŠ¥é”™çš„ä»£ç </span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:  <span class="comment"># å°†æŠ¥é”™å­˜å‚¨åœ¨ e ä¸­</span></span><br><span class="line">    print(e)</span><br></pre></td></tr></table></figure>
<pre><code>[Errno 2] No such file or directory: &apos;eeee.txt&apos;
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    file=open(<span class="string">'eeee.txt'</span>,<span class="string">'r+'</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br><span class="line">    response = input(<span class="string">'do you want to create a new file:'</span>)</span><br><span class="line">    <span class="keyword">if</span> response==<span class="string">'y'</span>:</span><br><span class="line">        file=open(<span class="string">'eeee.txt'</span>,<span class="string">'w'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    file.write(<span class="string">'ssss'</span>)</span><br><span class="line">    file.close()</span><br></pre></td></tr></table></figure>
<pre><code>[Errno 2] No such file or directory: &apos;eeee.txt&apos;
do you want to create a new file:y
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://docs.python.org/" target="_blank" rel="external">docs.python.org</a></li>
<li><a href="https://morvanzhou.github.io/" target="_blank" rel="external">python morvanzhou</a></li>
<li><a href="https://www.liaoxuefeng.com/" target="_blank" rel="external">python liaoxuefeng</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python å‡½æ•°å¼ç¼–ç¨‹ zipã€lambdaã€map...]]></title>
      <url>http://shopee.ai/2018/01/24/python/language/py-language-11-zip-lambda-map/</url>
      <content type="html"><![CDATA[<p>zipã€lambdaã€mapâ€¦</p>
<a id="more"></a>
<h2 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h2><p><code>zip</code> å‡½æ•°æ¥å—ä»»æ„å¤šä¸ªï¼ˆåŒ…æ‹¬0ä¸ªå’Œ1ä¸ªï¼‰åºåˆ—ä½œä¸ºå‚æ•°ï¼Œåˆå¹¶åè¿”å›ä¸€ä¸ªtupleåˆ—è¡¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">b=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">ab=zip(a,b)</span><br><span class="line">print(list(ab))  <span class="comment">#éœ€è¦åŠ listæ¥å¯è§†åŒ–è¿™ä¸ªåŠŸèƒ½</span></span><br></pre></td></tr></table></figure>
<pre><code>[(1, 4), (2, 5), (3, 6)]
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">b=[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">ab=zip(a,b)</span><br><span class="line"></span><br><span class="line">print(list(ab))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i,j <span class="keyword">in</span> zip(a,b):</span><br><span class="line">     print(i/<span class="number">2</span>,j*<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<pre><code>[(1, 4), (2, 5), (3, 6)]
0.5 8
1.0 10
1.5 12
</code></pre><h2 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h2><p><code>lambda</code> å®šä¹‰ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå®ç°ç®€åŒ–ä»£ç çš„åŠŸèƒ½ï¼Œçœ‹ä»£ç ä¼šæ›´å¥½ç†è§£ã€‚</p>
<p><code>fun = lambda x,y : x+y</code>, å†’å·å‰çš„<code>x</code>,<code>y</code>ä¸ºè‡ªå˜é‡ï¼Œå†’å·å<code>x+y</code>ä¸ºå…·ä½“è¿ç®—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">fun= <span class="keyword">lambda</span> x,y:x+y</span><br><span class="line">x=int(input(<span class="string">'x='</span>))    <span class="comment">#è¿™é‡Œè¦å®šä¹‰intæ•´æ•°ï¼Œå¦åˆ™ä¼šé»˜è®¤ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">y=int(input(<span class="string">'y='</span>))</span><br><span class="line">print(fun(x,y))</span><br></pre></td></tr></table></figure>
<pre><code>x=4
y=6
10
</code></pre><h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p><code>map</code> æ˜¯æŠŠ <code>å‡½æ•°</code> å’Œ <code>å‚æ•°</code> ç»‘å®šåœ¨ä¸€èµ·.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">(x,y)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> (x+y)</span><br><span class="line"></span><br><span class="line">print(list(map(fun,[<span class="number">1</span>],[<span class="number">2</span>])))</span><br><span class="line"></span><br><span class="line">list(map(fun,[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]))</span><br></pre></td></tr></table></figure>
<pre><code>[3]
[4, 6]
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://docs.python.org/" target="_blank" rel="external">docs.python.org</a></li>
<li><a href="https://morvanzhou.github.io/" target="_blank" rel="external">python morvanzhou</a></li>
<li><a href="https://www.liaoxuefeng.com/" target="_blank" rel="external">python liaoxuefeng</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Matplotlib Bar]]></title>
      <url>http://shopee.ai/2018/01/24/python/matplotlib/py-matplotlib-9-bar/</url>
      <content type="html"><![CDATA[<p>ä¸Šç¯‡å­¦ä¹ äº†å¦‚ä½• plot Scatterï¼Œä»Šå¤©æˆ‘ä»¬è®²è¿°å¦‚ä½• plot <code>Bar</code></p>
<a id="more"></a>
<p>ä»Šæ—¥ç›®æ ‡ : æŸ±çŠ¶å›¾åˆ†æˆä¸Šä¸‹ä¸¤éƒ¨åˆ†ï¼Œæ¯ä¸€ä¸ªæŸ±ä½“ä¸Šéƒ½æœ‰ç›¸åº”çš„æ•°å€¼æ ‡æ³¨ï¼Œå¹¶ä¸”å–æ¶ˆåæ ‡è½´çš„æ˜¾ç¤º.</p>
<h2 id="ç”ŸæˆåŸºæœ¬å›¾å½¢"><a href="#ç”ŸæˆåŸºæœ¬å›¾å½¢" class="headerlink" title="ç”ŸæˆåŸºæœ¬å›¾å½¢"></a>ç”ŸæˆåŸºæœ¬å›¾å½¢</h2><p>å‘ä¸Šå‘ä¸‹ç”Ÿæˆ<code>12ä¸ªæ•°æ®</code>ï¼Œ<code>X</code> ä¸º [0,11] çš„æ•´æ•° ï¼Œ<code>Y</code>æ˜¯å‡åŒ€åˆ†å¸ƒçš„éšæœºæ•°æ®ã€‚ ä½¿ç”¨çš„å‡½æ•°æ˜¯<code>plt.bar</code>ï¼Œå‚æ•°ä¸º<code>X</code>å’Œ<code>Y</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">n = <span class="number">12</span></span><br><span class="line"></span><br><span class="line">X = np.arange(n)</span><br><span class="line"></span><br><span class="line">Y1 = (<span class="number">1</span> - X / float(n)) * np.random.uniform(<span class="number">0.5</span>, <span class="number">1.0</span>, n)</span><br><span class="line">Y2 = (<span class="number">1</span> - X / float(n)) * np.random.uniform(<span class="number">0.5</span>, <span class="number">1.0</span>, n)</span><br><span class="line"></span><br><span class="line">plt.bar(X, +Y1)</span><br><span class="line">plt.bar(X, -Y2)</span><br><span class="line"></span><br><span class="line">plt.xlim(<span class="number">-.5</span>, n)</span><br><span class="line">plt.xticks(())</span><br><span class="line"></span><br><span class="line">plt.ylim(<span class="number">-1.25</span>, <span class="number">1.25</span>)</span><br><span class="line">plt.yticks(())</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-9-bar-1-output_1_0.png" height="100" width="550"><br></div>

<h2 id="åŠ é¢œè‰²å’Œæ•°æ®"><a href="#åŠ é¢œè‰²å’Œæ•°æ®" class="headerlink" title="åŠ é¢œè‰²å’Œæ•°æ®"></a>åŠ é¢œè‰²å’Œæ•°æ®</h2><p>ç”¨<code>facecolor</code>è®¾ç½®ä¸»ä½“é¢œè‰²ï¼Œ<code>edgecolor</code>è®¾ç½®è¾¹æ¡†é¢œè‰²ä¸ºç™½è‰²ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.bar(X, +Y1, facecolor=<span class="string">'#9999ff'</span>, edgecolor=<span class="string">'white'</span>)</span><br><span class="line">plt.bar(X, -Y2, facecolor=<span class="string">'#ff9999'</span>, edgecolor=<span class="string">'white'</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-9-bar-2-output_3_0.png" height="100" width="550"><br></div>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨å‡½æ•°<code>plt.text</code>åˆ†åˆ«åœ¨æŸ±ä½“ä¸Šæ–¹ï¼ˆä¸‹æ–¹ï¼‰åŠ ä¸Šæ•°å€¼ï¼Œç”¨<code>%.2f</code>ä¿ç•™ä¸¤ä½å°æ•°ï¼Œæ¨ªå‘å±…ä¸­å¯¹é½<code>ha=&#39;center&#39;</code>ï¼Œçºµå‘åº•éƒ¨ï¼ˆé¡¶éƒ¨ï¼‰å¯¹é½<code>va=&#39;bottom&#39;</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.bar(X, +Y1, facecolor=<span class="string">'#9999ff'</span>, edgecolor=<span class="string">'white'</span>)</span><br><span class="line">plt.bar(X, -Y2, facecolor=<span class="string">'#ff9999'</span>, edgecolor=<span class="string">'white'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x, y <span class="keyword">in</span> zip(X, Y1):</span><br><span class="line">    <span class="comment"># ha: horizontal alignment</span></span><br><span class="line">    <span class="comment"># va: vertical alignment</span></span><br><span class="line">    plt.text(x + <span class="number">0.4</span>, y + <span class="number">0.05</span>, <span class="string">'%.2f'</span> % y, ha=<span class="string">'center'</span>, va=<span class="string">'bottom'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x, y <span class="keyword">in</span> zip(X, Y2):</span><br><span class="line">    <span class="comment"># ha: horizontal alignment</span></span><br><span class="line">    <span class="comment"># va: vertical alignment</span></span><br><span class="line">    plt.text(x + <span class="number">0.4</span>, -y - <span class="number">0.05</span>, <span class="string">'%.2f'</span> % y, ha=<span class="string">'center'</span>, va=<span class="string">'top'</span>)</span><br><span class="line">    </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-9-bar-3-output_5_0.png" height="100" width="550"><br></div>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://matplotlib.org/" target="_blank" rel="external">matplotlib.org</a></li>
<li><a href="https://matplotlib.org/contents.html" target="_blank" rel="external">matplotlib docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Matplotlib Scatter]]></title>
      <url>http://shopee.ai/2018/01/24/python/matplotlib/py-matplotlib-8-scatter/</url>
      <content type="html"><![CDATA[<p>ä¸Šç¯‡å­¦ä¹ äº†å¦‚ä½• plot çº¿ï¼Œä»Šå¤©å­¦ä¹ å¦‚ä½• plot <code>Scatter</code> æ•£ç‚¹å›¾</p>
<a id="more"></a>
<p>å¼•å…¥æ¨¡å—<code>numpy</code>ç”¨æ¥äº§ç”Ÿä¸€äº›éšæœºæ•°æ®ã€‚ç”Ÿæˆ<code>1024</code>ä¸ªå‘ˆæ ‡å‡†æ­£æ€åˆ†å¸ƒçš„äºŒç»´æ•°æ®ç»„ (å¹³å‡æ•°æ˜¯<code>0</code>ï¼Œæ–¹å·®ä¸º<code>1</code>) ä½œä¸ºä¸€ä¸ªæ•°æ®é›†ï¼Œå¹¶å›¾åƒåŒ–è¿™ä¸ªæ•°æ®é›†ã€‚æ¯ä¸€ä¸ªç‚¹çš„é¢œè‰²å€¼ç”¨<code>T</code>æ¥è¡¨ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">n = <span class="number">1024</span>    <span class="comment"># data size</span></span><br><span class="line"></span><br><span class="line">X = np.random.normal(<span class="number">0</span>, <span class="number">1</span>, n) <span class="comment"># æ¯ä¸€ä¸ªç‚¹çš„Xå€¼</span></span><br><span class="line">Y = np.random.normal(<span class="number">0</span>, <span class="number">1</span>, n) <span class="comment"># æ¯ä¸€ä¸ªç‚¹çš„Yå€¼</span></span><br><span class="line"></span><br><span class="line">T = np.arctan2(Y,X) <span class="comment"># for color value</span></span><br></pre></td></tr></table></figure>
<p>æ•°æ®é›†ç”Ÿæˆå®Œæ¯•ï¼Œç°åœ¨æ¥ç”¨ <code>scatter</code> <code>plot</code> è¿™ä¸ªç‚¹é›†</p>
<p>è¾“å…¥<code>X</code>å’Œ<code>Y</code>ä½œä¸ºlocationï¼Œ<code>size=75</code>ï¼Œé¢œè‰²ä¸º<code>T</code>ï¼Œ<code>color map</code> ç”¨é»˜è®¤å€¼ï¼Œé€æ˜åº¦<code>alpha</code> ä¸º 50%ã€‚ xè½´æ˜¾ç¤ºèŒƒå›´å®šä½(-1.5ï¼Œ1.5)ï¼Œå¹¶ç”¨<code>xtick()</code> å‡½æ•°æ¥éšè—<code>x</code>åæ ‡è½´ï¼Œ<code>y</code>è½´åŒç†ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.scatter(X, Y, s=<span class="number">75</span>, c=T, alpha=<span class="number">.5</span>)</span><br><span class="line"></span><br><span class="line">plt.xlim(<span class="number">-1.5</span>, <span class="number">1.5</span>)</span><br><span class="line">plt.xticks(())  <span class="comment"># ignore xticks</span></span><br><span class="line">plt.ylim(<span class="number">-1.5</span>, <span class="number">1.5</span>)</span><br><span class="line">plt.yticks(())  <span class="comment"># ignore yticks</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-8-scatter-1.png" height="100" width="700"><br></div>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://matplotlib.org/" target="_blank" rel="external">matplotlib.org</a></li>
<li><a href="https://matplotlib.org/contents.html" target="_blank" rel="external">matplotlib docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Matplotlib Tick bbox]]></title>
      <url>http://shopee.ai/2018/01/23/python/matplotlib/py-matplotlib-7-tick/</url>
      <content type="html"><![CDATA[<p>å›¾ä¸­çš„å†…å®¹è¾ƒå¤šï¼Œå¯é€šè¿‡è®¾ç½®ç›¸å…³å†…å®¹çš„<code>é€æ˜åº¦</code>æ¥ä½¿å›¾ç‰‡æ›´æ˜“äºè§‚å¯Ÿï¼Œä¹Ÿå³æ˜¯æœ¬èŠ‚ä¸­çš„<code>bbox</code>å‚æ•°è®¾ç½®æ¥è°ƒèŠ‚å›¾åƒä¿¡æ¯.</p>
<a id="more"></a>
<h2 id="ç”Ÿæˆå›¾å½¢"><a href="#ç”Ÿæˆå›¾å½¢" class="headerlink" title="ç”Ÿæˆå›¾å½¢"></a>ç”Ÿæˆå›¾å½¢</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">-3</span>, <span class="number">3</span>, <span class="number">50</span>)</span><br><span class="line">y = <span class="number">0.1</span>*x</span><br><span class="line"></span><br><span class="line">plt.figure()</span><br><span class="line"><span class="comment"># åœ¨ plt 2.0.2 æˆ–æ›´é«˜çš„ç‰ˆæœ¬ä¸­, è®¾ç½® zorder ç»™ plot åœ¨ z è½´æ–¹å‘æ’åº</span></span><br><span class="line">plt.plot(x, y, linewidth=<span class="number">10</span>, zorder=<span class="number">1</span>)</span><br><span class="line">plt.ylim(<span class="number">-2</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">ax = plt.gca()</span><br><span class="line"></span><br><span class="line">ax.spines[<span class="string">'right'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line">ax.spines[<span class="string">'top'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line"></span><br><span class="line">ax.xaxis.set_ticks_position(<span class="string">'bottom'</span>)</span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">ax.yaxis.set_ticks_position(<span class="string">'left'</span>)</span><br><span class="line">ax.spines[<span class="string">'left'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-7-tick-output_1_0.png" height="100" width="700"><br></div>

<h2 id="è°ƒæ•´åæ ‡-bbox"><a href="#è°ƒæ•´åæ ‡-bbox" class="headerlink" title="è°ƒæ•´åæ ‡ bbox"></a>è°ƒæ•´åæ ‡ bbox</h2><p>ç„¶åå¯¹è¢«é®æŒ¡çš„å›¾åƒè°ƒèŠ‚ç›¸å…³é€æ˜åº¦ï¼Œæœ¬ä¾‹ä¸­è®¾ç½® xè½´ å’Œ yè½´ çš„åˆ»åº¦æ•°å­—è¿›è¡Œé€æ˜åº¦è®¾ç½®</p>
<p>å…¶ä¸­<code>label.set_fontsize(12)</code>é‡æ–°è°ƒèŠ‚å­—ä½“å¤§å°ï¼Œ<code>bbox</code>è®¾ç½®ç›®çš„å†…å®¹çš„é€æ˜åº¦ç›¸å…³å‚æ•°ï¼Œ<code>facecolor</code>è°ƒèŠ‚ <code>box</code> å‰æ™¯è‰²ï¼Œ<code>edgecolor</code> è®¾ç½®è¾¹æ¡†ï¼Œ æœ¬å¤„è®¾ç½®è¾¹æ¡†ä¸ºæ— ï¼Œ<code>alpha</code>è®¾ç½®é€æ˜åº¦. </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> label <span class="keyword">in</span> ax.get_xticklabels() + ax.get_yticklabels():</span><br><span class="line">    label.set_fontsize(<span class="number">12</span>)</span><br><span class="line">    <span class="comment"># åœ¨ plt 2.0.2 æˆ–æ›´é«˜çš„ç‰ˆæœ¬ä¸­, è®¾ç½® zorder ç»™ plot åœ¨ z è½´æ–¹å‘æ’åº</span></span><br><span class="line">    label.set_bbox(dict(facecolor=<span class="string">'white'</span>, edgecolor=<span class="string">'None'</span>, alpha=<span class="number">0.7</span>, zorder=<span class="number">2</span>))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-7-tick-output_3_0.png" height="100" width="700"><br></div>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://matplotlib.org/" target="_blank" rel="external">matplotlib.org</a></li>
<li><a href="https://matplotlib.org/contents.html" target="_blank" rel="external">matplotlib docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Matplotlib Annotation]]></title>
      <url>http://shopee.ai/2018/01/23/python/matplotlib/py-matplotlib-6-Annotation/</url>
      <content type="html"><![CDATA[<p>å½“å›¾çº¿ä¸­æŸäº›ç‰¹æ®Šåœ°æ–¹éœ€è¦æ ‡æ³¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>annotation</code>.  </p>
<p>matplotlib ä¸­çš„ <code>annotation</code> æœ‰ä¸¤ç§æ–¹æ³•ï¼Œ ä¸€ç§æ˜¯ç”¨ plt é‡Œé¢çš„ <code>annotate</code>ï¼Œä¸€ç§æ˜¯ç›´æ¥ç”¨ plt é‡Œé¢çš„ <code>text</code> æ¥å†™æ ‡æ³¨.</p>
<a id="more"></a>
<h2 id="ç”»å‡ºåŸºæœ¬å›¾"><a href="#ç”»å‡ºåŸºæœ¬å›¾" class="headerlink" title="ç”»å‡ºåŸºæœ¬å›¾"></a>ç”»å‡ºåŸºæœ¬å›¾</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨åæ ‡è½´ä¸­ç»˜åˆ¶ä¸€æ¡ç›´çº¿.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">-3</span>, <span class="number">3</span>, <span class="number">50</span>)</span><br><span class="line">y = <span class="number">2</span>*x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">plt.figure(num=<span class="number">1</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>),)</span><br><span class="line">plt.plot(x, y,)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-6-annotation-output_1_0.png" height="100" width="500"><br></div>

<h2 id="ç§»åŠ¨åæ ‡"><a href="#ç§»åŠ¨åæ ‡" class="headerlink" title="ç§»åŠ¨åæ ‡"></a>ç§»åŠ¨åæ ‡</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">-3</span>, <span class="number">3</span>, <span class="number">50</span>)</span><br><span class="line">y = <span class="number">2</span>*x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">plt.figure(num=<span class="number">1</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>),)</span><br><span class="line">plt.plot(x, y,)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»åŠ¨åæ ‡</span></span><br><span class="line">ax = plt.gca()</span><br><span class="line">ax.spines[<span class="string">'right'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line">ax.spines[<span class="string">'top'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line"></span><br><span class="line">ax.xaxis.set_ticks_position(<span class="string">'bottom'</span>)</span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">ax.yaxis.set_ticks_position(<span class="string">'left'</span>)</span><br><span class="line">ax.spines[<span class="string">'left'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-6-annotation-output_3_0.png" height="100" width="550"><br></div>

<p>ç„¶åæ ‡æ³¨å‡ºç‚¹<code>(x0, y0)</code>çš„ä½ç½®ä¿¡æ¯. ç”¨ <code>plt.plot([x0, x0,], [0, y0,], &#39;k--&#39;, linewidth=2.5)</code> ç”»å‡ºä¸€æ¡å‚ç›´äºxè½´çš„è™šçº¿.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">-3</span>, <span class="number">3</span>, <span class="number">50</span>)</span><br><span class="line">y = <span class="number">2</span>*x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">plt.figure(num=<span class="number">1</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>),)</span><br><span class="line">plt.plot(x, y,)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»åŠ¨åæ ‡</span></span><br><span class="line">ax = plt.gca()</span><br><span class="line">ax.spines[<span class="string">'right'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line">ax.spines[<span class="string">'top'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line"></span><br><span class="line">ax.xaxis.set_ticks_position(<span class="string">'bottom'</span>)</span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">ax.yaxis.set_ticks_position(<span class="string">'left'</span>)</span><br><span class="line">ax.spines[<span class="string">'left'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">x0 = <span class="number">1</span></span><br><span class="line">y0 = <span class="number">2</span>*x0 + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###   plt.plot([x0, x0,], [0, y0,], 'k--', linewidth=2.5) ç”»å‡ºä¸€æ¡å‚ç›´äºxè½´çš„è™šçº¿.  ###</span></span><br><span class="line"></span><br><span class="line">plt.plot([x0, x0,], [<span class="number">0</span>, y0,], <span class="string">'k--'</span>, linewidth=<span class="number">2.5</span>)</span><br><span class="line"><span class="comment"># set dot styles</span></span><br><span class="line">plt.scatter([x0, ], [y0, ], s=<span class="number">50</span>, color=<span class="string">'b'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-6-annotation-output_5_0.png" height="100" width="550"><br></div>

<h2 id="åŠ æ³¨é‡Š-annotate"><a href="#åŠ æ³¨é‡Š-annotate" class="headerlink" title="åŠ æ³¨é‡Š annotate"></a>åŠ æ³¨é‡Š annotate</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯¹<code>(x0, y0)</code>è¿™ä¸ªç‚¹è¿›è¡Œæ ‡æ³¨.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">-4</span>, <span class="number">4</span>, <span class="number">50</span>)</span><br><span class="line">y = <span class="number">2</span>*x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">plt.figure(num=<span class="number">1</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>),)</span><br><span class="line">plt.plot(x, y,)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»åŠ¨åæ ‡</span></span><br><span class="line">ax = plt.gca()</span><br><span class="line">ax.spines[<span class="string">'right'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line">ax.spines[<span class="string">'top'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line"></span><br><span class="line">ax.xaxis.set_ticks_position(<span class="string">'bottom'</span>)</span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">ax.yaxis.set_ticks_position(<span class="string">'left'</span>)</span><br><span class="line">ax.spines[<span class="string">'left'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">x0 = <span class="number">1</span></span><br><span class="line">y0 = <span class="number">2</span>*x0 + <span class="number">1</span></span><br><span class="line">plt.plot([x0, x0,], [<span class="number">0</span>, y0,], <span class="string">'k--'</span>, linewidth=<span class="number">2.5</span>)</span><br><span class="line"><span class="comment"># set dot styles</span></span><br><span class="line">plt.scatter([x0, ], [y0, ], s=<span class="number">50</span>, color=<span class="string">'b'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">############## æ·»åŠ æ³¨é‡Š annotate ###############</span></span><br><span class="line"></span><br><span class="line">plt.annotate(<span class="string">r'$2x+1=%s$'</span> % y0, xy=(x0, y0), xycoords=<span class="string">'data'</span>, xytext=(+<span class="number">30</span>, <span class="number">-30</span>),</span><br><span class="line">             textcoords=<span class="string">'offset points'</span>, fontsize=<span class="number">16</span>,</span><br><span class="line">             arrowprops=dict(arrowstyle=<span class="string">'-&gt;'</span>, connectionstyle=<span class="string">"arc3,rad=.2"</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-6-annotation-output_7_0.png" height="100" width="550"><br></div>

<p>å…¶ä¸­å‚æ•° <code>xycoords=&#39;data&#39;</code> æ˜¯è¯´åŸºäºæ•°æ®çš„å€¼æ¥é€‰ä½ç½®, <code>xytext=(+30, -30)</code> å’Œ <code>textcoords=&#39;offset points&#39;</code> å¯¹äºæ ‡æ³¨ä½ç½®çš„æè¿° å’Œ <code>xy</code> åå·®å€¼, <code>arrowprops</code>æ˜¯å¯¹å›¾ä¸­ç®­å¤´ç±»å‹çš„ä¸€äº›è®¾ç½®.</p>
<h2 id="åŠ æ³¨é‡Š-text"><a href="#åŠ æ³¨é‡Š-text" class="headerlink" title="åŠ æ³¨é‡Š text"></a>åŠ æ³¨é‡Š text</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.text(<span class="number">-3.7</span>, <span class="number">3</span>, <span class="string">r'$This\ is\ the\ some\ text. \mu\ \sigma_i\ \alpha_t$'</span>,</span><br><span class="line">         fontdict=&#123;<span class="string">'size'</span>: <span class="number">16</span>, <span class="string">'color'</span>: <span class="string">'r'</span>&#125;)</span><br></pre></td></tr></table></figure>
<pre><code>Text(-3.7,3,&apos;$This\\ is\\ the\\ some\\ text. \\mu\\ \\sigma_i\\ \\alpha_t$&apos;)
</code></pre><p>å…¶ä¸­<code>-3.7, 3,</code>æ˜¯é€‰å–textçš„ä½ç½®, ç©ºæ ¼éœ€è¦ç”¨åˆ°è½¬å­—ç¬¦<code>\</code> ,<code>fontdict</code>è®¾ç½®æ–‡æœ¬å­—ä½“.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">-4</span>, <span class="number">4</span>, <span class="number">50</span>)</span><br><span class="line">y = <span class="number">2</span>*x + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">plt.figure(num=<span class="number">1</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>),)</span><br><span class="line">plt.plot(x, y,)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»åŠ¨åæ ‡</span></span><br><span class="line">ax = plt.gca()</span><br><span class="line">ax.spines[<span class="string">'right'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line">ax.spines[<span class="string">'top'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line"></span><br><span class="line">ax.xaxis.set_ticks_position(<span class="string">'bottom'</span>)</span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">ax.yaxis.set_ticks_position(<span class="string">'left'</span>)</span><br><span class="line">ax.spines[<span class="string">'left'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">x0 = <span class="number">1</span></span><br><span class="line">y0 = <span class="number">2</span>*x0 + <span class="number">1</span></span><br><span class="line">plt.plot([x0, x0,], [<span class="number">0</span>, y0,], <span class="string">'k--'</span>, linewidth=<span class="number">2.5</span>)</span><br><span class="line"><span class="comment"># set dot styles</span></span><br><span class="line">plt.scatter([x0, ], [y0, ], s=<span class="number">50</span>, color=<span class="string">'b'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">############## æ·»åŠ æ³¨é‡Š annotate ###############</span></span><br><span class="line"></span><br><span class="line">plt.annotate(<span class="string">r'$2x+1=%s$'</span> % y0, xy=(x0, y0), xycoords=<span class="string">'data'</span>, xytext=(+<span class="number">30</span>, <span class="number">-30</span>),</span><br><span class="line">             textcoords=<span class="string">'offset points'</span>, fontsize=<span class="number">16</span>,</span><br><span class="line">             arrowprops=dict(arrowstyle=<span class="string">'-&gt;'</span>, connectionstyle=<span class="string">"arc3,rad=.2"</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">############# æ·»åŠ æ³¨é‡Š text #################</span></span><br><span class="line"></span><br><span class="line">plt.text(<span class="number">-3.7</span>, <span class="number">3</span>, <span class="string">r'$This\ is\ the\ some\ text. \mu\ \sigma_i\ \alpha_t$'</span>,</span><br><span class="line">         fontdict=&#123;<span class="string">'size'</span>: <span class="number">16</span>, <span class="string">'color'</span>: <span class="string">'r'</span>&#125;)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-6-annotation-output_11_0.png" height="100" width="500"><br></div>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://matplotlib.org/" target="_blank" rel="external">matplotlib.org</a></li>
<li><a href="https://matplotlib.org/contents.html" target="_blank" rel="external">matplotlib docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Matplotlib Legend]]></title>
      <url>http://shopee.ai/2018/01/23/python/matplotlib/py-matplotlib-5-legend/</url>
      <content type="html"><![CDATA[<p>matplotlib ä¸­çš„ <code>legend</code> å›¾ä¾‹å°±æ˜¯ä¸ºäº†å±•ç¤ºå‡ºæ¯ä¸ªæ•°æ®å¯¹åº”çš„<code>å›¾åƒåç§°</code>,å¯è¯»æ€§æ›´å¥½.</p>
<a id="more"></a>
<h2 id="æ·»åŠ å›¾ä¾‹-legend"><a href="#æ·»åŠ å›¾ä¾‹-legend" class="headerlink" title="æ·»åŠ å›¾ä¾‹ legend"></a>æ·»åŠ å›¾ä¾‹ legend</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x = np.linspace(<span class="number">-3</span>, <span class="number">3</span>, <span class="number">50</span>)</span><br><span class="line">y1 = <span class="number">2</span>*x + <span class="number">1</span></span><br><span class="line">y2 = x**<span class="number">2</span></span><br><span class="line"></span><br><span class="line">plt.figure()</span><br><span class="line"><span class="comment">#set x limits</span></span><br><span class="line">plt.xlim((<span class="number">-1</span>, <span class="number">2</span>))</span><br><span class="line">plt.ylim((<span class="number">-2</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># set new sticks</span></span><br><span class="line">new_sticks = np.linspace(<span class="number">-1</span>, <span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line">plt.xticks(new_sticks)</span><br><span class="line"><span class="comment"># set tick labels</span></span><br><span class="line">plt.yticks([<span class="number">-2</span>, <span class="number">-1.8</span>, <span class="number">-1</span>, <span class="number">1.22</span>, <span class="number">3</span>],</span><br><span class="line">           [<span class="string">r'$really\ bad$'</span>, <span class="string">r'$bad$'</span>, <span class="string">r'$normal$'</span>, <span class="string">r'$good$'</span>, <span class="string">r'$really\ good$'</span>])</span><br></pre></td></tr></table></figure>
<pre><code>([&lt;matplotlib.axis.YTick at 0x1195c3358&gt;,
  &lt;matplotlib.axis.YTick at 0x112681080&gt;,
  &lt;matplotlib.axis.YTick at 0x1195ce710&gt;,
  &lt;matplotlib.axis.YTick at 0x1195f5240&gt;,
  &lt;matplotlib.axis.YTick at 0x1195fc550&gt;],
 &lt;a list of 5 Text yticklabel objects&gt;)
</code></pre><p>å¯¹å›¾ä¸­çš„ä¸¤æ¡çº¿ç»˜åˆ¶å›¾ä¾‹ï¼Œé¦–å…ˆæˆ‘ä»¬è®¾ç½®ä¸¤æ¡çº¿çš„ç±»å‹ç­‰ä¿¡æ¯ï¼ˆè“è‰²å®çº¿ä¸çº¢è‰²è™šçº¿).</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># set line syles</span></span><br><span class="line">l1, = plt.plot(x, y1, label=<span class="string">'linear line'</span>)</span><br><span class="line">l2, = plt.plot(x, y2, color=<span class="string">'red'</span>, linewidth=<span class="number">1.0</span>, linestyle=<span class="string">'--'</span>, label=<span class="string">'square line'</span>)</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ <code>l1,</code> <code>l2,</code> è¦ä»¥<code>é€—å·</code>ç»“å°¾, å› ä¸º <code>plt.plot()</code> è¿”å›çš„æ˜¯ä¸€ä¸ªlist.</p>
<p><code>legend</code> å°†è¦æ˜¾ç¤ºçš„ä¿¡æ¯æ¥è‡ªäºä¸Šé¢ä»£ç ä¸­çš„ <code>label</code>. æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç®€å•å†™ä¸€ä¸‹ä»£ç , <code>plt</code> å°±èƒ½è‡ªåŠ¨çš„ä¸ºæˆ‘ä»¬æ·»åŠ å›¾ä¾‹.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.legend(loc=<span class="string">'upper right'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-5-legend-1.png" height="100" width="650"><br></div>

<p>å‚æ•° <code>loc=&#39;upper right&#39;</code> è¡¨ç¤ºå›¾ä¾‹å°†æ·»åŠ åœ¨å›¾ä¸­çš„å³ä¸Šè§’.</p>
<h2 id="è°ƒæ•´ä½ç½®å’Œåç§°"><a href="#è°ƒæ•´ä½ç½®å’Œåç§°" class="headerlink" title="è°ƒæ•´ä½ç½®å’Œåç§°"></a>è°ƒæ•´ä½ç½®å’Œåç§°</h2><p>å¦‚æœæˆ‘ä»¬æƒ³å•ç‹¬ä¿®æ”¹ä¹‹å‰çš„ <code>label</code> ä¿¡æ¯, ç»™ä¸åŒç±»å‹çš„çº¿æ¡è®¾ç½®å›¾ä¾‹ä¿¡æ¯. æˆ‘ä»¬å¯ä»¥åœ¨ <code>plt.legend</code> è¾“å…¥æ›´å¤šå‚æ•°. å¦‚æœä»¥ä¸‹é¢è¿™ç§å½¢å¼æ·»åŠ  <code>legend</code>, æˆ‘ä»¬éœ€è¦ç¡®ä¿, åœ¨ä¸Šé¢çš„ä»£ç  <code>plt.plot(x, y2, label=&#39;linear line&#39;)</code> å’Œ <code>plt.plot(x, y1, label=&#39;square line&#39;)</code> ä¸­æœ‰ç”¨å˜é‡ l1 å’Œ l2 åˆ†åˆ«å­˜å‚¨èµ·æ¥. </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.legend(handles=[l1, l2], labels=[<span class="string">'up'</span>, <span class="string">'down'</span>],  loc=<span class="string">'best'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-5-legend-2.png" height="100" width="650"><br></div>

<p>è¿™æ ·æˆ‘ä»¬å°±èƒ½åˆ†åˆ«é‡æ–°è®¾ç½®çº¿æ¡å¯¹åº”çš„ <code>label</code> äº†.</p>
<p>å…¶ä¸­â€™locâ€™å‚æ•°æœ‰å¤šç§ï¼Œâ€™bestâ€™è¡¨ç¤ºè‡ªåŠ¨åˆ†é…æœ€ä½³ä½ç½®ï¼Œå…¶ä½™çš„å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">'best'</span> : <span class="number">0</span>,          </span><br><span class="line"><span class="string">'upper right'</span>  : <span class="number">1</span>,</span><br><span class="line"><span class="string">'upper left'</span>   : <span class="number">2</span>,</span><br><span class="line"><span class="string">'lower left'</span>   : <span class="number">3</span>,</span><br><span class="line"><span class="string">'lower right'</span>  : <span class="number">4</span>,</span><br><span class="line"><span class="string">'right'</span>        : <span class="number">5</span>,</span><br><span class="line"><span class="string">'center left'</span>  : <span class="number">6</span>,</span><br><span class="line"><span class="string">'center right'</span> : <span class="number">7</span>,</span><br><span class="line"><span class="string">'lower center'</span> : <span class="number">8</span>,</span><br><span class="line"><span class="string">'upper center'</span> : <span class="number">9</span>,</span><br><span class="line"><span class="string">'center'</span>       : <span class="number">10</span>,</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://matplotlib.org/" target="_blank" rel="external">matplotlib.org</a></li>
<li><a href="https://matplotlib.org/contents.html" target="_blank" rel="external">matplotlib docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Matplotlib Coordinate axis]]></title>
      <url>http://shopee.ai/2018/01/23/python/matplotlib/py-matplotlib-4-coordinate_axis/</url>
      <content type="html"><![CDATA[<p>å¦‚ä½•ç§»åŠ¨ matplotlib ä¸­ axis åæ ‡è½´çš„ä½ç½®.</p>
<a id="more"></a>
<h2 id="è®¾ç½®åå­—å’Œä½ç½®"><a href="#è®¾ç½®åå­—å’Œä½ç½®" class="headerlink" title="è®¾ç½®åå­—å’Œä½ç½®"></a>è®¾ç½®åå­—å’Œä½ç½®</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>np.linspace</code> å®šä¹‰ <code>x</code> ï¼šèŒƒå›´æ˜¯(-3,3);ä¸ªæ•°æ˜¯50.<br>ä»¿çœŸä¸€ç»´æ•°æ®ç»„(<code>x</code> ,<code>y1</code>)è¡¨ç¤ºæ›²çº¿1.  ä»¿çœŸä¸€ç»´æ•°æ®ç»„(<code>x</code> ,<code>y2</code>)è¡¨ç¤ºæ›²çº¿2.  </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = np.linspace(<span class="number">-3</span>, <span class="number">3</span>, <span class="number">50</span>)</span><br><span class="line">y1 = <span class="number">2</span>*x + <span class="number">1</span></span><br><span class="line">y2 = x**<span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>plt.figure</code>å®šä¹‰ä¸€ä¸ªå›¾åƒçª—å£. </p>
<p>ä½¿ç”¨<code>plt.plot</code>ç”»(<code>x</code> ,<code>y2</code>)æ›²çº¿. ä½¿ç”¨<code>plt.plot</code>ç”»(<code>x</code> ,<code>y1</code>)æ›²çº¿ï¼Œæ›²çº¿çš„é¢œè‰²å±æ€§(<code>color</code>)ä¸ºçº¢è‰²; æ›²çº¿çš„å®½åº¦(<code>linewidth</code>) ä¸º 1.0; æ›²çº¿çš„ç±»å‹(<code>linestyle</code>)ä¸ºè™šçº¿.   </p>
<p>ä½¿ç”¨<code>plt.xlim</code>è®¾ç½®<code>x</code>åæ ‡è½´èŒƒå›´: (-1, 2); ä½¿ç”¨<code>plt.ylim</code>è®¾ç½®<code>y</code>åæ ‡è½´èŒƒå›´: (-2, 3);   </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.figure()</span><br><span class="line">plt.plot(x, y2)</span><br><span class="line">plt.plot(x, y1, color=<span class="string">'red'</span>, linewidth=<span class="number">1.0</span>, linestyle=<span class="string">'--'</span>)</span><br><span class="line">plt.xlim((<span class="number">-1</span>, <span class="number">2</span>))</span><br><span class="line">plt.ylim((<span class="number">-2</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<pre><code>(-2, 3)
</code></pre><p>ä½¿ç”¨<code>np.linspace</code>å®šä¹‰èŒƒå›´ä»¥åŠä¸ªæ•°ï¼šèŒƒå›´æ˜¯(-1,2);ä¸ªæ•°æ˜¯5. </p>
<p>ä½¿ç”¨<code>plt.xticks</code>è®¾ç½®<code>x</code>è½´åˆ»åº¦ï¼šèŒƒå›´æ˜¯(-1,2);ä¸ªæ•°æ˜¯5.<br>ä½¿ç”¨<code>plt.yticks</code>è®¾ç½®<code>y</code>è½´åˆ»åº¦ä»¥åŠåç§°: åˆ»åº¦ä¸º[-2, -1.8, -1, 1.22, 3]; å¯¹åº”åˆ»åº¦çš„åç§°ä¸º[â€˜really badâ€™,â€™badâ€™,â€™normalâ€™,â€™goodâ€™, â€˜really goodâ€™].</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">new_ticks = np.linspace(<span class="number">-1</span>, <span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line">plt.xticks(new_ticks)</span><br><span class="line">plt.yticks([<span class="number">-2</span>, <span class="number">-1.8</span>, <span class="number">-1</span>, <span class="number">1.22</span>, <span class="number">3</span>],[<span class="string">'$really\ bad$'</span>, <span class="string">'$bad$'</span>, <span class="string">'$normal$'</span>, <span class="string">'$good$'</span>, <span class="string">'$really\ good$'</span>])</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>function</th>
<th>desc</th>
<th>è®¾ç½®æ•ˆæœ</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>plt.gca</code></td>
<td>è·å–å½“å‰åæ ‡è½´ä¿¡æ¯</td>
<td>-</td>
</tr>
<tr>
<td><code>.spines</code></td>
<td>è®¾ç½®è¾¹æ¡†</td>
<td>å³ä¾§è¾¹æ¡† &amp; ä¸Šè¾¹æ¡†</td>
</tr>
<tr>
<td><code>.set_color</code></td>
<td>è®¾ç½®è¾¹æ¡†é¢œè‰²</td>
<td>é»˜è®¤ç™½è‰²</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax = plt.gca()</span><br><span class="line">ax.spines[<span class="string">'right'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line">ax.spines[<span class="string">'top'</span>].set_color(<span class="string">'none'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-4-ax-4_1.png" height="100" width="700"><br></div>

<h2 id="è°ƒæ•´åæ ‡è½´"><a href="#è°ƒæ•´åæ ‡è½´" class="headerlink" title="è°ƒæ•´åæ ‡è½´"></a>è°ƒæ•´åæ ‡è½´</h2><p>ä½¿ç”¨ <code>.xaxis.set_ticks_position</code>è®¾ç½®<code>x</code>åæ ‡åˆ»åº¦æ•°å­—æˆ–åç§°çš„ä½ç½®ï¼š<code>bottom</code>.ï¼ˆæ‰€æœ‰ä½ç½®ï¼š<code>top</code>ï¼Œ<code>bottom</code>ï¼Œ<code>both</code>ï¼Œ<code>default</code>ï¼Œ<code>none</code>ï¼‰<br>ä½¿ç”¨ <code>.spines</code> è®¾ç½®è¾¹æ¡†ï¼š<code>x</code>è½´ï¼›<br>ä½¿ç”¨ <code>.set_position</code> è®¾ç½®è¾¹æ¡†ä½ç½®ï¼š<code>y=0</code> çš„ä½ç½®ï¼›ï¼ˆä½ç½®æ‰€æœ‰å±æ€§ï¼š<code>outward</code>ï¼Œ<code>axes</code>ï¼Œ<code>data</code>ï¼‰  </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax.xaxis.set_ticks_position(<span class="string">'bottom'</span>)</span><br><span class="line"></span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'data'</span>, <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-4-ax-4_2.png" height="100" width="700"><br></div>

<p>ä½¿ç”¨<code>.yaxis.set_ticks_position</code>è®¾ç½®<code>y</code>åæ ‡åˆ»åº¦æ•°å­—æˆ–åç§°çš„ä½ç½®ï¼š<code>left</code>.ï¼ˆæ‰€æœ‰ä½ç½®ï¼š<code>left</code>ï¼Œ<code>right</code>ï¼Œ<code>both</code>ï¼Œ<code>default</code>ï¼Œ<code>none</code>ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax.yaxis.set_ticks_position(<span class="string">'left'</span>)</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>.spines</code>è®¾ç½®è¾¹æ¡†ï¼š<code>y</code>è½´;<br>ä½¿ç”¨<code>.set_position</code>è®¾ç½®è¾¹æ¡†ä½ç½®ï¼š<code>x=0</code>çš„ä½ç½®ï¼›ï¼ˆä½ç½®æ‰€æœ‰å±æ€§ï¼š<code>outward</code>ï¼Œ<code>axes</code>ï¼Œ<code>data</code>ï¼‰<br>ä½¿ç”¨<code>plt.show</code>æ˜¾ç¤ºå›¾åƒ.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax.spines[<span class="string">'left'</span>].set_position((<span class="string">'data'</span>,<span class="number">0</span>))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-4-ax-4_3.png" height="100" width="700"><br></div>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://matplotlib.org/" target="_blank" rel="external">matplotlib.org</a></li>
<li><a href="https://matplotlib.org/contents.html" target="_blank" rel="external">matplotlib docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[pickle]]></title>
      <url>http://shopee.ai/2018/01/19/python/language/py-language-14-pickle/</url>
      <content type="html"><![CDATA[<p>Python è¯­è¨€ç‰¹å®šçš„åºåˆ—åŒ–æ¨¡å—æ˜¯pickleï¼Œä½†å¦‚æœè¦æŠŠåºåˆ—åŒ–æå¾—æ›´é€šç”¨ã€æ›´ç¬¦åˆWebæ ‡å‡†ï¼Œå¯ä»¥ä½¿ç”¨jsonæ¨¡å—</p>
<a id="more"></a>
<p>pickle æ˜¯ä¸€ä¸ª python ä¸­, å‹ç¼©/ä¿å­˜/æå– æ–‡ä»¶çš„æ¨¡å—. æœ€ä¸€èˆ¬çš„ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•. </p>
<h2 id="pickle-ä¿å­˜"><a href="#pickle-ä¿å­˜" class="headerlink" title="pickle ä¿å­˜"></a>pickle ä¿å­˜</h2><p>å­—å…¸å’Œåˆ—è¡¨éƒ½æ˜¯èƒ½è¢«ä¿å­˜çš„.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line">a_dict = &#123;<span class="string">'da'</span>: <span class="number">111</span>, <span class="number">2</span>: [<span class="number">23</span>,<span class="number">1</span>,<span class="number">4</span>], <span class="string">'23'</span>: &#123;<span class="number">1</span>:<span class="number">2</span>,<span class="string">'d'</span>:<span class="string">'sad'</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># pickle a variable to a file</span></span><br><span class="line">file = open(<span class="string">'pickle_example.pickle'</span>, <span class="string">'wb'</span>)</span><br><span class="line">pickle.dump(a_dict, file)</span><br><span class="line">file.close()</span><br></pre></td></tr></table></figure>
<p><code>pickle.dump</code> ä½ è¦ä¿å­˜çš„ä¸œè¥¿å»è¿™ä¸ªæ‰“å¼€çš„ <code>file</code>. </p>
<p>æœ€åå…³é—­ <code>file</code> ä½ å°±ä¼šå‘ç°ä½ çš„æ–‡ä»¶ç›®å½•é‡Œå¤šäº†ä¸€ä¸ª <code>pickle_example.pickle</code> æ–‡ä»¶, è¿™å°±æ˜¯é‚£ä¸ªå­—å…¸äº†.</p>
<h2 id="pickle-æå–"><a href="#pickle-æå–" class="headerlink" title="pickle æå–"></a>pickle æå–</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># reload a file to a variable</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'pickle_example.pickle'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    a_dict1 =pickle.load(file)</span><br><span class="line"></span><br><span class="line">print(a_dict1)</span><br></pre></td></tr></table></figure>
<pre><code>{&apos;da&apos;: 111, 2: [23, 1, 4], &apos;23&apos;: {1: 2, &apos;d&apos;: &apos;sad&apos;}}
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://docs.python.org/" target="_blank" rel="external">docs.python.org</a></li>
<li><a href="https://morvanzhou.github.io/" target="_blank" rel="external">python morvanzhou</a></li>
<li><a href="https://www.liaoxuefeng.com/" target="_blank" rel="external">python liaoxuefeng</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sklearn Save Model]]></title>
      <url>http://shopee.ai/2018/01/10/python/sklearn/py-sklearn-7-save-model/</url>
      <content type="html"><![CDATA[<p>æˆ‘ä»¬è®­ç»ƒå¥½äº†ä¸€ä¸ª <code>Model</code> ä»¥åæ€»éœ€è¦ä¿å­˜å’Œå†æ¬¡é¢„æµ‹, æ‰€ä»¥ä¿å­˜å’Œè¯»å–æˆ‘ä»¬çš„sklearn modelä¹Ÿæ˜¯åŒæ ·é‡è¦çš„ä¸€æ­¥ã€‚<br>è¿™æ¬¡ä¸»è¦ä»‹ç»ä¸¤ç§ä¿å­˜Modelçš„æ¨¡å— <code>pickle</code> ä¸ <code>joblib</code></p>
<a id="more"></a>
<h2 id="pickle-ä¿å­˜"><a href="#pickle-ä¿å­˜" class="headerlink" title="pickle ä¿å­˜"></a>pickle ä¿å­˜</h2><p>é¦–å…ˆç®€å•å»ºç«‹ä¸è®­ç»ƒä¸€ä¸ª <code>SVC</code> Model</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"></span><br><span class="line">clf = svm.SVC()</span><br><span class="line">iris = datasets.load_iris()</span><br><span class="line">X, y = iris.data, iris.target</span><br><span class="line">clf.fit(X,y)</span><br></pre></td></tr></table></figure>
<pre><code>SVC(C=1.0, cache_size=200, class_weight=None, coef0=0.0,
  decision_function_shape=&apos;ovr&apos;, degree=3, gamma=&apos;auto&apos;, kernel=&apos;rbf&apos;,
  max_iter=-1, probability=False, random_state=None, shrinking=True,
  tol=0.001, verbose=False)
</code></pre><p>ä½¿ç”¨ <code>pickle</code> æ¥ä¿å­˜ä¸è¯»å–è®­ç»ƒå¥½çš„ <code>Model</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle <span class="comment">#pickleæ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿å­˜Model(æ³¨:saveæ–‡ä»¶å¤¹è¦é¢„å…ˆå»ºç«‹ï¼Œå¦åˆ™ä¼šæŠ¥é”™)</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'save/clf.pickle'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    pickle.dump(clf, f)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¯»å–Model</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'save/clf.pickle'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    clf2 = pickle.load(f)</span><br><span class="line">    <span class="comment">#æµ‹è¯•è¯»å–åçš„Model</span></span><br><span class="line">    print(clf2.predict(X[<span class="number">0</span>:<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [0]</span></span><br></pre></td></tr></table></figure>
<pre><code>[0]
</code></pre><h2 id="joblib-ä¿å­˜"><a href="#joblib-ä¿å­˜" class="headerlink" title="joblib ä¿å­˜"></a>joblib ä¿å­˜</h2><p><code>joblib</code> æ˜¯ sklearnçš„å¤–éƒ¨æ¨¡å—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.externals <span class="keyword">import</span> joblib <span class="comment">#jbolibæ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿å­˜Model(æ³¨:saveæ–‡ä»¶å¤¹è¦é¢„å…ˆå»ºç«‹ï¼Œå¦åˆ™ä¼šæŠ¥é”™)</span></span><br><span class="line">joblib.dump(clf, <span class="string">'save/clf.pkl'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¯»å–Model</span></span><br><span class="line">clf3 = joblib.load(<span class="string">'save/clf.pkl'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æµ‹è¯•è¯»å–åçš„Model</span></span><br><span class="line">print(clf3.predict(X[<span class="number">0</span>:<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [0]</span></span><br></pre></td></tr></table></figure>
<pre><code>[0]
</code></pre><p><code>joblib</code> åœ¨ä½¿ç”¨ä¸Šæ¯”è¾ƒå®¹æ˜“ï¼Œè¯»å–é€Ÿåº¦ä¹Ÿç›¸å¯¹<code>pickle</code>å¿«</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://scikit-learn.org/" target="_blank" rel="external">scikit-learn.org</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/basic/tutorial.html" target="_blank" rel="external">scikit-learn docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">scikit-learn morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sklearn Cross-validation 3]]></title>
      <url>http://shopee.ai/2018/01/09/python/sklearn/py-sklearn-6-cross-validation-3/</url>
      <content type="html"><![CDATA[<p>äº¤å‰éªŒè¯(cross validation)è®©æˆ‘ä»¬çŸ¥é“åœ¨æœºå™¨å­¦ä¹ ä¸­éªŒè¯æ˜¯æœ‰å¤šä¹ˆçš„é‡è¦, è¿™ä¸€æ¬¡çš„ sklearn ä¸­æˆ‘ä»¬ç”¨åˆ°äº†<code>sklearn.learning_curve</code>å½“ä¸­çš„å¦å¤–ä¸€ç§, å«åš<code>validation_curve</code>,ç”¨è¿™ä¸€ç§æ›²çº¿æˆ‘ä»¬å°±èƒ½æ›´åŠ ç›´è§‚çœ‹å‡ºæ”¹å˜æ¨¡å‹ä¸­çš„å‚æ•°çš„æ—¶å€™æœ‰æ²¡æœ‰è¿‡æ‹Ÿåˆ(overfitting)çš„é—®é¢˜äº†. è¿™ä¹Ÿæ˜¯å¯ä»¥è®©æˆ‘ä»¬æ›´å¥½çš„é€‰æ‹©å‚æ•°çš„æ–¹æ³•.</p>
<a id="more"></a>
<h2 id="validation-curve-æ£€è§†è¿‡æ‹Ÿåˆ"><a href="#validation-curve-æ£€è§†è¿‡æ‹Ÿåˆ" class="headerlink" title="validation_curve æ£€è§†è¿‡æ‹Ÿåˆ"></a>validation_curve æ£€è§†è¿‡æ‹Ÿåˆ</h2><p>éªŒè¯<code>SVC</code>ä¸­çš„ä¸€ä¸ªå‚æ•° <code>gamma</code> åœ¨ä»€ä¹ˆèŒƒå›´å†…èƒ½ä½¿ <code>model</code> äº§ç”Ÿå¥½çš„ç»“æœ. ä»¥åŠè¿‡æ‹Ÿåˆå’Œ <code>gamma</code> å–å€¼çš„å…³ç³».</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.learning_curve <span class="keyword">import</span> validation_curve <span class="comment">#validation_curveæ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_digits </span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC </span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#digitsæ•°æ®é›†</span></span><br><span class="line">digits = load_digits()</span><br><span class="line">X = digits.data</span><br><span class="line">y = digits.target</span><br><span class="line"></span><br><span class="line"><span class="comment">#å»ºç«‹å‚æ•°æµ‹è¯•é›†</span></span><br><span class="line">param_range = np.logspace(<span class="number">-6</span>, <span class="number">-2.3</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨validation_curveå¿«é€Ÿæ‰¾å‡ºå‚æ•°å¯¹æ¨¡å‹çš„å½±å“</span></span><br><span class="line">train_loss, test_loss = validation_curve(</span><br><span class="line">    SVC(), X, y, param_name=<span class="string">'gamma'</span>, param_range=param_range, cv=<span class="number">10</span>, scoring=<span class="string">'mean_squared_error'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¹³å‡æ¯ä¸€è½®çš„å¹³å‡æ–¹å·®</span></span><br><span class="line">train_loss_mean = -np.mean(train_loss, axis=<span class="number">1</span>)</span><br><span class="line">test_loss_mean = -np.mean(test_loss, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯è§†åŒ–å›¾å½¢</span></span><br><span class="line">plt.plot(param_range, train_loss_mean, <span class="string">'o-'</span>, color=<span class="string">"r"</span>,</span><br><span class="line">         label=<span class="string">"Training"</span>)</span><br><span class="line">plt.plot(param_range, test_loss_mean, <span class="string">'o-'</span>, color=<span class="string">"g"</span>,</span><br><span class="line">        label=<span class="string">"Cross-validation"</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">"gamma"</span>)</span><br><span class="line">plt.ylabel(<span class="string">"Loss"</span>)</span><br><span class="line">plt.legend(loc=<span class="string">"best"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/sklearn-6-cross-validation-3-output_1_1.png" width="400"><br></div>

<p>ç”±å›¾ä¸­å¯ä»¥æ˜æ˜¾çœ‹åˆ° <code>gamma</code> å€¼å¤§äº <code>0.001</code>ï¼Œæ¨¡å‹å°±ä¼šæœ‰è¿‡æ‹Ÿåˆ(<code>Overfitting</code>)çš„é—®é¢˜ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://scikit-learn.org/" target="_blank" rel="external">scikit-learn.org</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/basic/tutorial.html" target="_blank" rel="external">scikit-learn docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">scikit-learn morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sklearn Cross-validation 2]]></title>
      <url>http://shopee.ai/2018/01/09/python/sklearn/py-sklearn-6-cross-validation-2/</url>
      <content type="html"><![CDATA[<p>Sklearn ä¸­çš„ <code>learning curve</code> å¯ä»¥å¾ˆç›´è§‚çš„çœ‹å‡ºæˆ‘ä»¬çš„ <code>model</code> å­¦ä¹ çš„è¿›åº¦, å¯¹æ¯”å‘ç°æœ‰æ²¡æœ‰ <code>overfitting</code> çš„é—®é¢˜. ç„¶åæˆ‘ä»¬å¯ä»¥å¯¹æˆ‘ä»¬çš„ <code>model</code> è¿›è¡Œè°ƒæ•´, å…‹æœ <code>overfitting</code> çš„é—®é¢˜.</p>
<a id="more"></a>
<h2 id="Learning-curve-æ£€è§†è¿‡æ‹Ÿåˆ"><a href="#Learning-curve-æ£€è§†è¿‡æ‹Ÿåˆ" class="headerlink" title="Learning curve æ£€è§†è¿‡æ‹Ÿåˆ"></a>Learning curve æ£€è§†è¿‡æ‹Ÿåˆ</h2><p>åŠ è½½å¯¹åº”æ¨¡å—:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.learning_curve <span class="keyword">import</span> learning_curve <span class="comment">#å­¦ä¹ æ›²çº¿æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_digits <span class="comment">#digitsæ•°æ®é›†</span></span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC <span class="comment">#Support Vector Classifier</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt <span class="comment">#å¯è§†åŒ–æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<p>åŠ è½½digitsæ•°æ®é›†ï¼Œå…¶åŒ…å«çš„æ˜¯æ‰‹å†™ä½“çš„æ•°å­—ï¼Œä»0åˆ°9ã€‚<br>æ•°æ®é›†æ€»å…±æœ‰1797ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬ç”±64ä¸ªç‰¹å¾ç»„æˆï¼Œ åˆ†åˆ«ä¸ºå…¶æ‰‹å†™ä½“å¯¹åº”çš„8Ã—8åƒç´ è¡¨ç¤ºï¼Œæ¯ä¸ªç‰¹å¾å–å€¼0~16ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">digits = load_digits()</span><br><span class="line">X = digits.data</span><br><span class="line">y = digits.target</span><br><span class="line"></span><br><span class="line"><span class="comment">#print(len(X[0]))</span></span><br></pre></td></tr></table></figure>
<p>è§‚å¯Ÿæ ·æœ¬ç”±å°åˆ°å¤§çš„å­¦ä¹ æ›²çº¿å˜åŒ–, é‡‡ç”¨KæŠ˜äº¤å‰éªŒè¯ <code>cv=10</code>, é€‰æ‹©å¹³å‡æ–¹å·®æ£€è§†æ¨¡å‹æ•ˆèƒ½ <code>scoring=&#39;mean_squared_error&#39;</code>, æ ·æœ¬ç”±å°åˆ°å¤§åˆ†æˆ5è½®æ£€è§†å­¦ä¹ æ›²çº¿(<code>10%</code>, <code>25%</code>, <code>50%</code>, <code>75%</code>, <code>100%</code>):</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train_sizes, train_loss, test_loss = learning_curve(</span><br><span class="line">    SVC(gamma=<span class="number">0.001</span>), X, y, cv=<span class="number">10</span>, scoring=<span class="string">'mean_squared_error'</span>,</span><br><span class="line">    train_sizes=[<span class="number">0.1</span>, <span class="number">0.25</span>, <span class="number">0.5</span>, <span class="number">0.75</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¹³å‡æ¯ä¸€è½®æ‰€å¾—åˆ°çš„å¹³å‡æ–¹å·®(å…±5è½®ï¼Œåˆ†åˆ«ä¸ºæ ·æœ¬10%ã€25%ã€50%ã€75%ã€100%)</span></span><br><span class="line">train_loss_mean = -np.mean(train_loss, axis=<span class="number">1</span>)</span><br><span class="line">test_loss_mean = -np.mean(test_loss, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>å¯è§†åŒ–å›¾å½¢:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.plot(train_sizes, train_loss_mean, <span class="string">'o-'</span>, color=<span class="string">"r"</span>,</span><br><span class="line">         label=<span class="string">"Training"</span>)</span><br><span class="line">plt.plot(train_sizes, test_loss_mean, <span class="string">'o-'</span>, color=<span class="string">"g"</span>,</span><br><span class="line">        label=<span class="string">"Cross-validation"</span>)</span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">"Training examples"</span>)</span><br><span class="line">plt.ylabel(<span class="string">"Loss"</span>)</span><br><span class="line">plt.legend(loc=<span class="string">"best"</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/sklearn-6-cross-validation-2-output_7_0.png" width="400"><br></div>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://scikit-learn.org/" target="_blank" rel="external">scikit-learn.org</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/basic/tutorial.html" target="_blank" rel="external">scikit-learn docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">scikit-learn morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sklearn Cross-validation 1]]></title>
      <url>http://shopee.ai/2018/01/08/python/sklearn/py-sklearn-6-cross-validation-1/</url>
      <content type="html"><![CDATA[<p>Sklearn ä¸­çš„ <code>Cross-validation</code> å¯¹äºæˆ‘ä»¬é€‰æ‹©æ­£ç¡®çš„ <code>Model</code> å’Œ <code>Model çš„å‚æ•°</code>æ˜¯éå¸¸æœ‰ç”¨ï¼Œ æœ‰äº†å®ƒæˆ‘ä»¬èƒ½ç›´è§‚çš„çœ‹å‡ºä¸åŒ Model æˆ–è€…å‚æ•°å¯¹ç»“æ„å‡†ç¡®åº¦çš„å½±å“ã€‚</p>
<a id="more"></a>
<h2 id="Model-åŸºç¡€éªŒè¯æ³•"><a href="#Model-åŸºç¡€éªŒè¯æ³•" class="headerlink" title="Model åŸºç¡€éªŒè¯æ³•"></a>Model åŸºç¡€éªŒè¯æ³•</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris <span class="comment"># irisæ•°æ®é›†</span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split <span class="comment"># åˆ†å‰²æ•°æ®æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier <span class="comment"># Kæœ€è¿‘é‚»(kNNï¼Œk-NearestNeighbor)åˆ†ç±»ç®—æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŠ è½½irisæ•°æ®é›†</span></span><br><span class="line">iris = load_iris()</span><br><span class="line">X = iris.data</span><br><span class="line">y = iris.target</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ†å‰²æ•°æ®å¹¶</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, random_state=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å»ºç«‹æ¨¡å‹</span></span><br><span class="line">knn = KNeighborsClassifier()</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®­ç»ƒæ¨¡å‹</span></span><br><span class="line">knn.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†å‡†ç¡®ç‡æ‰“å°å‡º</span></span><br><span class="line">print(knn.score(X_test, y_test))</span><br></pre></td></tr></table></figure>
<pre><code>0.973684210526
</code></pre><p>å¯ä»¥çœ‹åˆ°åŸºç¡€éªŒè¯çš„å‡†ç¡®ç‡ä¸º <code>0.973684210526</code></p>
<h2 id="Model-Cross-Validation"><a href="#Model-Cross-Validation" class="headerlink" title="Model Cross Validation"></a>Model Cross Validation</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.cross_validation <span class="keyword">import</span> cross_val_score <span class="comment"># KæŠ˜äº¤å‰éªŒè¯æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨KæŠ˜äº¤å‰éªŒè¯æ¨¡å—</span></span><br><span class="line">scores = cross_val_score(knn, X, y, cv=<span class="number">5</span>, scoring=<span class="string">'accuracy'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†5æ¬¡çš„é¢„æµ‹å‡†ç¡®ç‡æ‰“å°å‡º</span></span><br><span class="line">print(scores)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†5æ¬¡çš„é¢„æµ‹å‡†ç¡®å¹³å‡ç‡æ‰“å°å‡º</span></span><br><span class="line">print(scores.mean())</span><br></pre></td></tr></table></figure>
<pre><code>[ 0.96666667  1.          0.93333333  0.96666667  1.        ]
0.973333333333
</code></pre><p>å¯ä»¥çœ‹åˆ°äº¤å‰éªŒè¯çš„å‡†ç¡®å¹³å‡ç‡ä¸º <code>0.973333333333</code></p>
<h2 id="Aaccuracy-å‡†ç¡®ç‡åˆ¤æ–­"><a href="#Aaccuracy-å‡†ç¡®ç‡åˆ¤æ–­" class="headerlink" title="Aaccuracy å‡†ç¡®ç‡åˆ¤æ–­"></a>Aaccuracy å‡†ç¡®ç‡åˆ¤æ–­</h2><p>ä¸€èˆ¬æ¥è¯´ <code>å‡†ç¡®ç‡(accuracy)</code> ä¼šç”¨äºåˆ¤æ–­åˆ†ç±»(Classification)æ¨¡å‹çš„å¥½å</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt <span class="comment">#å¯è§†åŒ–æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å»ºç«‹æµ‹è¯•å‚æ•°é›†</span></span><br><span class="line">k_range = range(<span class="number">1</span>, <span class="number">31</span>)</span><br><span class="line"></span><br><span class="line">k_scores = []</span><br><span class="line"></span><br><span class="line"><span class="comment">#è—‰ç”±è¿­ä»£çš„æ–¹å¼æ¥è®¡ç®—ä¸åŒå‚æ•°å¯¹æ¨¡å‹çš„å½±å“ï¼Œå¹¶è¿”å›äº¤å‰éªŒè¯åçš„å¹³å‡å‡†ç¡®ç‡</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> k_range:</span><br><span class="line">    knn = KNeighborsClassifier(n_neighbors=k)</span><br><span class="line">    scores = cross_val_score(knn, X, y, cv=<span class="number">10</span>, scoring=<span class="string">'accuracy'</span>)</span><br><span class="line">    k_scores.append(scores.mean())</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯è§†åŒ–æ•°æ®</span></span><br><span class="line">plt.plot(k_range, k_scores)</span><br><span class="line">plt.xlabel(<span class="string">'Value of K for KNN'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Cross-Validated Accuracy'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/sklearn-6-cross-validation-1-output_6_0.png" width="400"><br></div>

<p>ä»å›¾ä¸­å¾—çŸ¥ï¼Œé€‰æ‹© <code>12~18</code> çš„ <code>k</code> å€¼æœ€å¥½ã€‚é«˜è¿‡ <code>18</code> ä¹‹åï¼Œå‡†ç¡®ç‡å¼€å§‹ä¸‹é™åˆ™æ˜¯å› ä¸ºè¿‡æ‹Ÿåˆ(<code>Over fitting</code>)çš„é—®é¢˜ã€‚</p>
<h2 id="Mean-squared-error"><a href="#Mean-squared-error" class="headerlink" title="Mean squared error"></a>Mean squared error</h2><p>ä¸€èˆ¬æ¥è¯´å¹³å‡æ–¹å·®(<code>Mean squared error</code>)ä¼šç”¨äºåˆ¤æ–­å›å½’(<code>Regression</code>)æ¨¡å‹çš„å¥½å</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">k_range = range(<span class="number">1</span>, <span class="number">31</span>)</span><br><span class="line">k_scores = []</span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> k_range:</span><br><span class="line">    knn = KNeighborsClassifier(n_neighbors=k)</span><br><span class="line">    loss = -cross_val_score(knn, X, y, cv=<span class="number">10</span>, scoring=<span class="string">'mean_squared_error'</span>)</span><br><span class="line">    k_scores.append(loss.mean())</span><br><span class="line"></span><br><span class="line">plt.plot(k_range, k_scores)</span><br><span class="line">plt.xlabel(<span class="string">'Value of K for KNN'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Cross-Validated MSE'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/sklearn-6-cross-validation-1-output_8_1.png" width="400"><br></div>

<p>ç”±å›¾å¯ä»¥å¾—çŸ¥ï¼Œå¹³å‡æ–¹å·®è¶Šä½è¶Šå¥½ï¼Œå› æ­¤é€‰æ‹©<code>13~18</code>å·¦å³çš„<code>K</code>å€¼ä¼šæœ€å¥½</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://scikit-learn.org/" target="_blank" rel="external">scikit-learn.org</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/basic/tutorial.html" target="_blank" rel="external">scikit-learn docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">scikit-learn morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sklearn Normalization]]></title>
      <url>http://shopee.ai/2018/01/06/python/sklearn/py-sklearn-5-normalization/</url>
      <content type="html"><![CDATA[<p>Data Normalization å¯ä»¥æå‡æœºå™¨å­¦ä¹ çš„æˆæ•ˆ</p>
<a id="more"></a>
<h2 id="Normalization"><a href="#Normalization" class="headerlink" title="Normalization"></a>Normalization</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing <span class="comment">#æ ‡å‡†åŒ–æ•°æ®æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹Array</span></span><br><span class="line">a = np.array([[<span class="number">10</span>, <span class="number">2.7</span>, <span class="number">3.6</span>],</span><br><span class="line">              [<span class="number">-100</span>, <span class="number">5</span>, <span class="number">-2</span>],</span><br><span class="line">              [<span class="number">120</span>, <span class="number">20</span>, <span class="number">40</span>]], dtype=np.float64)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†normalizedåçš„aæ‰“å°å‡º</span></span><br><span class="line">print(preprocessing.scale(a))</span><br></pre></td></tr></table></figure>
<pre><code>[[ 0.         -0.85170713 -0.55138018]
 [-1.22474487 -0.55187146 -0.852133  ]
 [ 1.22474487  1.40357859  1.40351318]]
</code></pre><h2 id="Normalization-å¯¹ç»“æœçš„å½±å“"><a href="#Normalization-å¯¹ç»“æœçš„å½±å“" class="headerlink" title="Normalization å¯¹ç»“æœçš„å½±å“"></a>Normalization å¯¹ç»“æœçš„å½±å“</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ‡å‡†åŒ–æ•°æ®æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†èµ„æ–™åˆ†å‰²æˆtrainä¸testçš„æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆé€‚åˆåšclassificationèµ„æ–™çš„æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> sklearn.datasets.samples_generator <span class="keyword">import</span> make_classification </span><br><span class="line"></span><br><span class="line"><span class="comment"># Support Vector Machineä¸­çš„Support Vector Classifier</span></span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC </span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯è§†åŒ–æ•°æ®çš„æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure>
<h3 id="ç”Ÿæˆé€‚åˆåš-Classification-æ•°æ®"><a href="#ç”Ÿæˆé€‚åˆåš-Classification-æ•°æ®" class="headerlink" title="ç”Ÿæˆé€‚åˆåš Classification æ•°æ®"></a>ç”Ÿæˆé€‚åˆåš Classification æ•°æ®</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆå…·æœ‰2ç§å±æ€§çš„300ç¬”æ•°æ®</span></span><br><span class="line">X, y = make_classification(</span><br><span class="line">    n_samples=<span class="number">300</span>, n_features=<span class="number">2</span>,</span><br><span class="line">    n_redundant=<span class="number">0</span>, n_informative=<span class="number">2</span>, </span><br><span class="line">    random_state=<span class="number">22</span>, n_clusters_per_class=<span class="number">1</span>, </span><br><span class="line">    scale=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># n_features ç‰¹å¾ä¸ªæ•° = n_informativeï¼ˆï¼‰ + n_redundant + n_repeated</span></span><br><span class="line"><span class="comment"># n_informative å¤šä¿¡æ¯ç‰¹å¾çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment"># n_redundant å†—ä½™ä¿¡æ¯ï¼Œinformative ç‰¹å¾çš„éšæœºçº¿æ€§ç»„åˆ</span></span><br><span class="line"><span class="comment"># n_classes åˆ†ç±»ç±»åˆ«</span></span><br><span class="line"><span class="comment"># n_clusters_per_class æŸä¸€ä¸ªç±»åˆ«æ˜¯ç”±å‡ ä¸ª cluster æ„æˆçš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯è§†åŒ–æ•°æ®</span></span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], c=y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/sklearn-5-normalization-output_5_0.png" width="400"><br></div>

<h3 id="data-normalization-before"><a href="#data-normalization-before" class="headerlink" title="data normalization before"></a>data normalization before</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.3</span>)</span><br><span class="line">clf = SVC()</span><br><span class="line">clf.fit(X_train, y_train)</span><br><span class="line">print(clf.score(X_test, y_test))</span><br></pre></td></tr></table></figure>
<pre><code>0.477777777778
</code></pre><h3 id="data-normalization-after"><a href="#data-normalization-after" class="headerlink" title="data normalization after"></a>data normalization after</h3><p>æ•°æ®çš„å•ä½å‘ç”Ÿäº†å˜åŒ–, <code>X</code> æ•°æ®ä¹Ÿè¢«å‹ç¼©åˆ°å·®ä¸å¤šå¤§å°èŒƒå›´.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X = preprocessing.scale(X)</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.3</span>)</span><br><span class="line">clf = SVC()</span><br><span class="line">clf.fit(X_train, y_train)</span><br><span class="line">print(clf.score(X_test, y_test))</span><br><span class="line"><span class="comment"># 0.9</span></span><br></pre></td></tr></table></figure>
<pre><code>0.933333333333
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://scikit-learn.org/" target="_blank" rel="external">scikit-learn.org</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/basic/tutorial.html" target="_blank" rel="external">scikit-learn docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">scikit-learn morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sklearn General Learning Model]]></title>
      <url>http://shopee.ai/2018/01/05/python/sklearn/py-sklearn-2-general-learning-model/</url>
      <content type="html"><![CDATA[<p>Sklearn æŠŠæ‰€æœ‰æœºå™¨å­¦ä¹ çš„æ¨¡å¼æ•´åˆç»Ÿä¸€èµ·æ¥äº†ï¼Œå­¦ä¼šäº†ä¸€ä¸ªæ¨¡å¼å°±å¯ä»¥é€šåƒå…¶ä»–ä¸åŒç±»å‹çš„å­¦ä¹ æ¨¡å¼</p>
<a id="more"></a>
<h2 id="ä½¿ç”¨åˆ†ç±»å™¨"><a href="#ä½¿ç”¨åˆ†ç±»å™¨" class="headerlink" title="ä½¿ç”¨åˆ†ç±»å™¨"></a>ä½¿ç”¨åˆ†ç±»å™¨</h2><p>Sklearn æœ¬èº«å°±æœ‰å¾ˆå¤šæ•°æ®åº“ï¼Œå¯ä»¥ç”¨æ¥ç»ƒä¹ ã€‚ ä»¥ Iris çš„æ•°æ®ä¸ºä¾‹ï¼Œè¿™ç§èŠ±æœ‰å››ä¸ªå±æ€§ï¼ŒèŠ±ç“£çš„é•¿å®½ï¼ŒèŒçš„é•¿å®½ï¼Œæ ¹æ®è¿™äº›å±æ€§æŠŠèŠ±åˆ†ä¸ºä¸‰ç±»ã€‚</p>
<p>æˆ‘ä»¬è¦ç”¨ åˆ†ç±»å™¨ å»æŠŠå››ç§ç±»å‹çš„èŠ±åˆ†å¼€ã€‚</p>
<p><img src="/images/python/sklearn-2-general-learning-model.png" alt=""></p>
<p>ä»Šå¤©ç”¨ <code>KNN classifier</code>ï¼Œå°±æ˜¯é€‰æ‹©å‡ ä¸ªä¸´è¿‘ç‚¹ï¼Œç»¼åˆå®ƒä»¬åšä¸ªå¹³å‡æ¥ä½œä¸ºé¢„æµ‹å€¼</p>
<h2 id="å¯¼å…¥æ¨¡å—"><a href="#å¯¼å…¥æ¨¡å—" class="headerlink" title="å¯¼å…¥æ¨¡å—"></a>å¯¼å…¥æ¨¡å—</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºæ•°æ®"><a href="#åˆ›å»ºæ•°æ®" class="headerlink" title="åˆ›å»ºæ•°æ®"></a>åˆ›å»ºæ•°æ®</h2><p>åŠ è½½ <code>iris</code> çš„æ•°æ®ï¼ŒæŠŠå±æ€§å­˜åœ¨ <code>X</code>ï¼Œç±»åˆ«æ ‡ç­¾å­˜åœ¨ <code>y</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">iris = datasets.load_iris()</span><br><span class="line"></span><br><span class="line">iris_X = iris.data</span><br><span class="line">iris_y = iris.target</span><br></pre></td></tr></table></figure>
<p>è§‚å¯Ÿä¸€ä¸‹æ•°æ®é›†ï¼Œ<code>X</code> æœ‰å››ä¸ªå±æ€§ï¼Œ<code>y</code> æœ‰ <code>0</code>ï¼Œ<code>1</code>ï¼Œ<code>2</code> ä¸‰ç±»ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(iris_X[:<span class="number">2</span>, :])</span><br><span class="line">print(iris_y)</span><br></pre></td></tr></table></figure>
<pre><code>[[ 5.1  3.5  1.4  0.2]
 [ 4.9  3.   1.4  0.2]]
[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2
 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
 2 2]
</code></pre><p>æŠŠæ•°æ®é›†åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå…¶ä¸­ <code>test_size=0.3</code>ï¼Œå³æµ‹è¯•é›†å æ€»æ•°æ®çš„ 30%ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X_train, X_test, y_train, y_test = train_test_split(iris_X, iris_y, test_size=<span class="number">0.3</span>)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°åˆ†å¼€åçš„æ•°æ®é›†ï¼Œé¡ºåºä¹Ÿè¢«æ‰“ä¹±ï¼Œè¿™æ ·æ›´æœ‰åˆ©äºå­¦ä¹ æ¨¡å‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(y_train)</span><br></pre></td></tr></table></figure>
<pre><code>[0 0 2 2 1 0 2 0 1 1 0 2 1 2 2 0 0 1 0 1 0 2 1 1 1 2 2 1 0 0 2 2 2 2 2 1 0
 0 0 0 1 2 1 2 1 0 2 1 2 2 2 1 0 1 2 1 0 0 2 1 1 0 2 2 0 2 1 0 0 2 0 0 0 1
 2 0 1 1 2 2 0 1 0 2 2 0 1 0 0 1 2 1 1 2 2 1 1 0 0 2 0 0 1 1 0]
</code></pre><h2 id="å»ºç«‹æ¨¡å‹ï¼è®­ç»ƒï¼é¢„æµ‹"><a href="#å»ºç«‹æ¨¡å‹ï¼è®­ç»ƒï¼é¢„æµ‹" class="headerlink" title="å»ºç«‹æ¨¡å‹ï¼è®­ç»ƒï¼é¢„æµ‹"></a>å»ºç«‹æ¨¡å‹ï¼è®­ç»ƒï¼é¢„æµ‹</h2><p>å®šä¹‰æ¨¡å—æ–¹å¼ <code>KNeighborsClassifier()</code>ï¼Œ ç”¨ <code>fit</code> æ¥è®­ç»ƒ <code>training data</code>ï¼Œè¿™ä¸€æ­¥å°±å®Œæˆäº†è®­ç»ƒçš„æ‰€æœ‰æ­¥éª¤ï¼Œ åé¢çš„ <code>knn</code> å°±å·²ç»æ˜¯è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œå¯ä»¥ç›´æ¥ç”¨æ¥ <code>predict</code> æµ‹è¯•é›†çš„æ•°æ®ï¼Œ å¯¹æ¯”ç”¨æ¨¡å‹é¢„æµ‹çš„å€¼ä¸çœŸå®çš„å€¼ï¼Œå¯ä»¥çœ‹åˆ°å¤§æ¦‚æ¨¡æ‹Ÿå‡ºäº†æ•°æ®ï¼Œä½†æ˜¯æœ‰è¯¯å·®ï¼Œæ˜¯ä¸ä¼šå®Œå®Œå…¨å…¨é¢„æµ‹æ­£ç¡®çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">knn = KNeighborsClassifier()</span><br><span class="line">knn.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line">print(knn.predict(X_test))</span><br><span class="line">print(y_test)</span><br></pre></td></tr></table></figure>
<pre><code>[1 0 1 0 1 2 0 1 0 1 2 1 1 1 2 2 1 2 0 1 2 0 0 2 1 2 1 1 0 1 1 0 2 2 2 0 1
 0 2 0 2 0 1 2 1]
[1 0 1 0 1 2 0 1 0 1 2 1 1 1 2 2 1 2 0 1 2 0 0 2 1 2 1 1 0 1 1 0 2 2 2 0 1
 0 2 0 2 0 2 2 1]
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://scikit-learn.org/" target="_blank" rel="external">scikit-learn.org</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/basic/tutorial.html" target="_blank" rel="external">scikit-learn docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">scikit-learn morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sklearn Common Attributes and Functions]]></title>
      <url>http://shopee.ai/2018/01/05/python/sklearn/py-sklearn-4-common-attributes/</url>
      <content type="html"><![CDATA[<p>ä»Šå¤©æ¥çœ‹ <code>Model</code> çš„å±æ€§å’ŒåŠŸèƒ½, è¿™é‡Œä»¥ <code>LinearRegressor</code> ä¸ºä¾‹ï¼Œæ‰€ä»¥å…ˆå¯¼å…¥åŒ…ï¼Œæ•°æ®ï¼Œè¿˜æœ‰æ¨¡å‹</p>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"></span><br><span class="line">loaded_data = datasets.load_boston()</span><br><span class="line"></span><br><span class="line">data_X = loaded_data.data</span><br><span class="line">data_y = loaded_data.target</span><br><span class="line"></span><br><span class="line">model = LinearRegression()</span><br></pre></td></tr></table></figure>
<h2 id="è®­ç»ƒå’Œé¢„æµ‹"><a href="#è®­ç»ƒå’Œé¢„æµ‹" class="headerlink" title="è®­ç»ƒå’Œé¢„æµ‹"></a>è®­ç»ƒå’Œé¢„æµ‹</h2><p>æ¥ä¸‹æ¥ <code>model.fit</code> å’Œ <code>model.predict</code> å°±å±äº <code>Model</code> çš„åŠŸèƒ½ï¼Œç”¨æ¥è®­ç»ƒæ¨¡å‹ï¼Œç”¨è®­ç»ƒå¥½çš„æ¨¡å‹é¢„æµ‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model.fit(data_X, data_y)</span><br><span class="line"></span><br><span class="line">print(model.predict(data_X[:<span class="number">4</span>, :]))</span><br></pre></td></tr></table></figure>
<pre><code>[ 30.00821269  25.0298606   30.5702317   28.60814055]
</code></pre><h2 id="å‚æ•°å’Œåˆ†æ•°"><a href="#å‚æ•°å’Œåˆ†æ•°" class="headerlink" title="å‚æ•°å’Œåˆ†æ•°"></a>å‚æ•°å’Œåˆ†æ•°</h2><p><code>model.coef_</code> å’Œ <code>model.intercept_</code> å±äº <code>Model</code> çš„å±æ€§ï¼Œ ä¾‹å¦‚å¯¹äº <code>LinearRegressor</code> è¿™ä¸ªæ¨¡å‹ï¼Œè¿™ä¸¤ä¸ªå±æ€§åˆ†åˆ«è¾“å‡ºæ¨¡å‹çš„æ–œç‡å’Œæˆªè·ï¼ˆä¸yè½´çš„äº¤ç‚¹ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(model.coef_)</span><br><span class="line">print(model.intercept_)</span><br></pre></td></tr></table></figure>
<pre><code>[ -1.07170557e-01   4.63952195e-02   2.08602395e-02   2.68856140e+00
  -1.77957587e+01   3.80475246e+00   7.51061703e-04  -1.47575880e+00
   3.05655038e-01  -1.23293463e-02  -9.53463555e-01   9.39251272e-03
  -5.25466633e-01]
36.4911032804
</code></pre><p><code>model.get_params()</code> ä¹Ÿæ˜¯åŠŸèƒ½ï¼Œå®ƒå¯ä»¥å–å‡ºä¹‹å‰å®šä¹‰çš„å‚æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(model.get_params())</span><br></pre></td></tr></table></figure>
<pre><code>{&apos;copy_X&apos;: True, &apos;fit_intercept&apos;: True, &apos;n_jobs&apos;: 1, &apos;normalize&apos;: False}
</code></pre><p><code>model.score(data_X, data_y)</code> å®ƒå¯ä»¥å¯¹ <code>Model</code> ç”¨ <code>R^2</code> çš„æ–¹å¼è¿›è¡Œæ‰“åˆ†ï¼Œè¾“å‡ºç²¾ç¡®åº¦ã€‚<br>å…³äº <code>R^2 coefficient of determination</code> å¯ä»¥æŸ¥çœ‹ <a href="https://en.wikipedia.org/wiki/Coefficient_of_determination" target="_blank" rel="external">Coefficient_of_determination</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(model.score(data_X, data_y)) <span class="comment"># R^2 coefficient of determination</span></span><br></pre></td></tr></table></figure>
<pre><code>0.740607742865
</code></pre><blockquote>
<p>æŒ‰æ ‡å‡†çš„æ¥è¯´, æ˜¯è¦å°†æ•°æ®åˆ†æˆè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®, è¿™é‡Œä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•, åªæ˜¯å±•ç¤º model é‡Œé¢çš„ä¸€äº›å±æ€§. æ­£ç¡®ç‡å¾ˆå°‘èƒ½çœŸæ­£100%, å–å†³äºæ‹Ÿåˆåº¦æ€ä¹ˆæ ·. æ‹Ÿåˆåº¦å¥½, æ­£ç¡®ç‡é«˜</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://scikit-learn.org/" target="_blank" rel="external">scikit-learn.org</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/basic/tutorial.html" target="_blank" rel="external">scikit-learn docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">scikit-learn morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sklearn DataSets]]></title>
      <url>http://shopee.ai/2018/01/03/python/sklearn/py-sklearn-3-database/</url>
      <content type="html"><![CDATA[<p>Sklearn ä¸­çš„ <a href="http://scikit-learn.org/stable/modules/classes.html#module-sklearn.datasets" target="_blank" rel="external">data sets</a>ï¼Œå¾ˆå¤šè€Œä¸”æœ‰ç”¨ï¼Œå¯ä»¥ç”¨æ¥å­¦ä¹ ç®—æ³•æ¨¡å‹</p>
<a id="more"></a>
<h2 id="è¦ç‚¹"><a href="#è¦ç‚¹" class="headerlink" title="è¦ç‚¹"></a>è¦ç‚¹</h2><p>eg: boston æˆ¿ä»·, ç³–å°¿ç—…, æ•°å­—, Iris èŠ±ã€‚</p>
<p>ä¹Ÿå¯ä»¥ç”Ÿæˆè™šæ‹Ÿçš„æ•°æ®ï¼Œä¾‹å¦‚ç”¨æ¥è®­ç»ƒçº¿æ€§å›å½’æ¨¡å‹çš„æ•°æ®ï¼Œå¯ä»¥ç”¨å‡½æ•°æ¥ç”Ÿæˆ</p>
<div class="limg1"><br><img src="/images/python/sklearn-3-datasets-1.png" width="400"><br></div><br><!--![][img-1]--><br><br>ä¾‹å¦‚ï¼Œç‚¹å‡»è¿›å…¥ boston æˆ¿ä»·çš„æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ° <code>sample</code> çš„æ€»æ•°ï¼Œå±æ€§ï¼Œä»¥åŠ <code>label</code> ç­‰ä¿¡æ¯<br><br><div class="limg1"><br><img src="/images/python/sklearn-3-datasets-2.png" width="650"><br></div>

<p>å¦‚æœæ˜¯è‡ªå·±ç”Ÿæˆæ•°æ®ï¼ŒæŒ‰ç…§å‡½æ•°çš„å½¢å¼ï¼Œè¾“å…¥ <code>sample</code>ï¼Œ<code>feature</code>ï¼Œ<code>target</code> çš„ä¸ªæ•°ç­‰ç­‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sklearn.datasets.make_regression(n_samples=<span class="number">100</span>, n_features=<span class="number">100</span>, n_informative=<span class="number">10</span>, n_targets=<span class="number">1</span>, bias=<span class="number">0.0</span>, effective_rank=<span class="keyword">None</span>, tail_strength=<span class="number">0.5</span>, noise=<span class="number">0.0</span>, shuffle=<span class="keyword">True</span>, coef=<span class="keyword">False</span>, random_state=<span class="keyword">None</span>)[source]</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ç”¨ä»£ç ç»ƒä¹ â€¦</p>
<h2 id="å¯¼å…¥æ¨¡å—"><a href="#å¯¼å…¥æ¨¡å—" class="headerlink" title="å¯¼å…¥æ¨¡å—"></a>å¯¼å…¥æ¨¡å—</h2><p>å¯¼å…¥ <code>datasets</code> åŒ…ï¼Œä»¥ Linear Regression ä¸ºä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure>
<h2 id="å¯¼å…¥æ•°æ®ï¼è®­ç»ƒæ¨¡å‹"><a href="#å¯¼å…¥æ•°æ®ï¼è®­ç»ƒæ¨¡å‹" class="headerlink" title="å¯¼å…¥æ•°æ®ï¼è®­ç»ƒæ¨¡å‹"></a>å¯¼å…¥æ•°æ®ï¼è®­ç»ƒæ¨¡å‹</h2><p>ç”¨ <code>datasets.load_boston()</code> çš„å½¢å¼åŠ è½½æ•°æ®ï¼Œå¹¶ç»™ <code>X</code> å’Œ <code>y</code> èµ‹å€¼ï¼Œè¿™ç§å½¢å¼åœ¨ Sklearn ä¸­éƒ½æ˜¯é«˜åº¦ç»Ÿä¸€çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">loaded_data = datasets.load_boston()</span><br><span class="line"></span><br><span class="line">data_X = loaded_data.data</span><br><span class="line">data_y = loaded_data.target</span><br><span class="line"></span><br><span class="line">print(data_X[:<span class="number">4</span>, <span class="number">0</span>]) <span class="comment"># == print(data_X[:4][0])</span></span><br><span class="line">print(data_y[:<span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<pre><code>[ 0.00632  0.02731  0.02729  0.03237]
[ 24.   21.6  34.7  33.4]
</code></pre><p>å®šä¹‰æ¨¡å‹</p>
<p>å¯ä»¥ç›´æ¥ç”¨é»˜è®¤å€¼å»å»ºç«‹ <code>model</code>ï¼Œé»˜è®¤å€¼ä¹Ÿä¸é”™ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ”¹å˜å‚æ•°ä½¿æ¨¡å‹æ›´å¥½ã€‚ ç„¶åç”¨ <code>training data</code> è®­ç»ƒæ¨¡å‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = LinearRegression()</span><br><span class="line">model.fit(data_X, data_y)</span><br></pre></td></tr></table></figure>
<pre><code>LinearRegression(copy_X=True, fit_intercept=True, n_jobs=1, normalize=False)
</code></pre><p>å†æ‰“å°å‡ºé¢„æµ‹å€¼ï¼Œè¿™é‡Œç”¨ <code>X</code> çš„å‰ 4 ä¸ªæ¥é¢„æµ‹ï¼ŒåŒæ—¶æ‰“å°çœŸå®å€¼ï¼Œä½œä¸ºå¯¹æ¯”ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯æœ‰äº›è¯¯å·®çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(model.predict(data_X[:<span class="number">4</span>, :]))</span><br><span class="line">print(data_y[:<span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<pre><code>[ 30.00821269  25.0298606   30.5702317   28.60814055]
[ 24.   21.6  34.7  33.4]
</code></pre><p>ä¸ºäº†æé«˜å‡†ç¡®åº¦ï¼Œå¯ä»¥é€šè¿‡å°è¯•ä¸åŒçš„ <code>model</code>ï¼Œä¸åŒçš„å‚æ•°ï¼Œä¸åŒçš„é¢„å¤„ç†ç­‰æ–¹æ³•ï¼Œå…¥é—¨çš„è¯å¯ä»¥ç›´æ¥ç”¨é»˜è®¤å€¼</p>
<h2 id="åˆ›å»ºè™šæ‹Ÿæ•°æ®ï¼å¯è§†åŒ–"><a href="#åˆ›å»ºè™šæ‹Ÿæ•°æ®ï¼å¯è§†åŒ–" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿæ•°æ®ï¼å¯è§†åŒ–"></a>åˆ›å»ºè™šæ‹Ÿæ•°æ®ï¼å¯è§†åŒ–</h2><p>ä¸‹é¢æ˜¯åˆ›é€ æ•°æ®çš„ä¾‹å­ã€‚</p>
<p>ç”¨å‡½æ•°æ¥å»ºç«‹ 100 ä¸ª <code>sample</code>ï¼Œæœ‰ä¸€ä¸ª <code>feature</code>ï¼Œå’Œä¸€ä¸ª <code>target</code>ï¼Œè¿™æ ·æ¯”è¾ƒæ–¹ä¾¿å¯è§†åŒ–ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X, y = datasets.make_regression(n_samples=<span class="number">100</span>, n_features=<span class="number">1</span>, n_targets=<span class="number">1</span>, noise=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>ç”¨ scatter çš„å½¢å¼æ¥è¾“å‡ºç»“æœ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.scatter(X, y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/sklearn-3-datasets-output_11_0.png"><br></div>

<p>å¯ä»¥çœ‹åˆ°ç”¨å‡½æ•°ç”Ÿæˆçš„ <code>Linear Regression</code> ç”¨çš„æ•°æ®ã€‚</p>
<p><code>noise</code> è¶Šå¤§çš„è¯ï¼Œç‚¹å°±ä¼šè¶Šæ¥è¶Šç¦»æ•£ï¼Œä¾‹å¦‚ <code>noise</code> ç”± 10 å˜ä¸º 50.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X, y = datasets.make_regression(n_samples=<span class="number">100</span>, n_features=<span class="number">1</span>, n_targets=<span class="number">1</span>, noise=<span class="number">50</span>)</span><br><span class="line">plt.scatter(X, y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/sklearn-3-datasets-output_13_0.png"><br></div>

<!--![output_13_0][img-4]-->
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://scikit-learn.org/" target="_blank" rel="external">scikit-learn.org</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/basic/tutorial.html" target="_blank" rel="external">scikit-learn docs</a></li>
<li><a href="http://scikit-learn.org/stable/modules/classes.html#module-sklearn.datasets" target="_blank" rel="external">scikit-learn machine_learning_map</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sklearn Choosing The Right Estimator]]></title>
      <url>http://shopee.ai/2018/01/03/python/sklearn/py-sklearn-1-choosing-estimator/</url>
      <content type="html"><![CDATA[<p>Sciki-learn é€‰æ‹©å­¦ä¹ æ–¹æ³•ï¼Œé€‰æ‹©æ¨¡å‹ <a href="http://scikit-learn.org/stable/tutorial/machine_learning_map/index.html" target="_blank" rel="external">æµç¨‹å›¾</a></p>
<a id="more"></a>
<p>Sklearn å®˜ç½‘æä¾›äº†ä¸€ä¸ªæµç¨‹å›¾ï¼Œè“è‰²åœ†åœˆå†…æ˜¯åˆ¤æ–­æ¡ä»¶ï¼Œç»¿è‰²æ–¹æ¡†å†…æ˜¯å¯ä»¥é€‰æ‹©çš„ç®—æ³•ï¼š<a href="http://scikit-learn.org/stable/tutorial/machine_learning_map/index.html" target="_blank" rel="external">è¯¦æƒ…</a></p>
<p><img src="/images/python/sklearn-1-model-choosing.png" alt="http://scikit-learn.org/stable/tutorial/machine_learning_map/index.html]"></p>
<p>ä» START å¼€å§‹ï¼Œé¦–å…ˆçœ‹æ•°æ®çš„æ ·æœ¬æ˜¯å¦ <code>&gt;50</code>ï¼Œå°äºåˆ™éœ€è¦æ”¶é›†æ›´å¤šçš„æ•°æ®ã€‚</p>
<p>ç”±å›¾ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ç®—æ³•æœ‰å››ç±»ï¼Œ<code>åˆ†ç±»</code>ï¼Œ<code>å›å½’</code>ï¼Œ<code>èšç±»</code>ï¼Œ<code>é™ç»´</code>ã€‚</p>
<table>
<thead>
<tr>
<th>algorithm</th>
<th>desc</th>
</tr>
</thead>
<tbody>
<tr>
<td>åˆ†ç±»</td>
<td>ç›‘ç£å¼å­¦ä¹ ï¼Œå³æ¯ä¸ªæ•°æ®å¯¹åº”ä¸€ä¸ª label </td>
</tr>
<tr>
<td>å›å½’</td>
<td>ç›‘ç£å¼å­¦ä¹ ï¼Œå³æ¯ä¸ªæ•°æ®å¯¹åº”ä¸€ä¸ª label </td>
</tr>
<tr>
<td>èšç±»</td>
<td>éç›‘ç£å¼å­¦ä¹ ï¼Œå³æ²¡æœ‰ labelã€‚ </td>
</tr>
<tr>
<td>é™ç»´</td>
<td>å½“æ•°æ®é›†æœ‰å¾ˆå¤šå¾ˆå¤šå±æ€§çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ é™ç»´ ç®—æ³•æŠŠå±æ€§å½’çº³èµ·æ¥ã€‚<br><br> ä¾‹å¦‚ 20 ä¸ªå±æ€§åªå˜æˆ 2 ä¸ªï¼Œæ³¨æ„ï¼Œè¿™ä¸æ˜¯æŒ‘å‡º 2 ä¸ªï¼Œè€Œæ˜¯å‹ç¼©æˆä¸º 2 ä¸ªï¼Œ<br>å®ƒä»¬é›†åˆäº† 20 ä¸ªå±æ€§çš„æ‰€æœ‰ç‰¹å¾ï¼Œç›¸å½“äºæŠŠé‡è¦çš„ä¿¡æ¯æå–çš„æ›´å¥½ï¼Œä¸é‡è¦çš„ä¿¡æ¯å°±ä¸è¦äº†</td>
</tr>
</tbody>
</table>
<p>ç„¶åçœ‹é—®é¢˜å±äºå“ªä¸€ç±»é—®é¢˜ï¼Œæ˜¯åˆ†ç±»è¿˜æ˜¯å›å½’ï¼Œè¿˜æ˜¯èšç±»ï¼Œå°±é€‰æ‹©ç›¸åº”çš„ç®—æ³•ã€‚ å½“ç„¶è¿˜è¦è€ƒè™‘æ•°æ®çš„å¤§å°ï¼Œä¾‹å¦‚ <code>100K</code> æ˜¯ä¸€ä¸ªé˜ˆå€¼ã€‚</p>
<p>å¯ä»¥å‘ç°æœ‰äº›æ–¹æ³•æ˜¯æ—¢å¯ä»¥ä½œä¸ºåˆ†ç±»ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå›å½’ï¼Œä¾‹å¦‚ <code>SGD</code>ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://scikit-learn.org/" target="_blank" rel="external">scikit-learn.org</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/basic/tutorial.html" target="_blank" rel="external">scikit-learn docs</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/machine_learning_map/index.html" target="_blank" rel="external">scikit-learn machine_learning_map</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sklearn Why ?]]></title>
      <url>http://shopee.ai/2018/01/03/python/sklearn/py-sklearn-0-why/</url>
      <content type="html"><![CDATA[<p>Scikit learn ä¹Ÿç®€ç§° sklearn, æ˜¯æœºå™¨å­¦ä¹ é¢†åŸŸå½“ä¸­æœ€çŸ¥åçš„ python æ¨¡å—ä¹‹ä¸€.</p>
<a id="more"></a>
<p>Sklearn åŒ…å«äº†å¾ˆå¤šç§æœºå™¨å­¦ä¹ çš„æ–¹å¼:</p>
<ul>
<li>Classification åˆ†ç±»</li>
<li>Regression å›å½’</li>
<li>Clustering éç›‘ç£åˆ†ç±»</li>
<li>Dimensionality reduction æ•°æ®é™ç»´</li>
<li>Model Selection æ¨¡å‹é€‰æ‹©</li>
<li>Preprocessing æ•°æ®é¢„å¤„ç†</li>
</ul>
<p>æˆ‘ä»¬æ€»èƒ½å¤Ÿä»è¿™äº›æ–¹æ³•ä¸­æŒ‘é€‰å‡ºä¸€ä¸ªé€‚åˆäºè‡ªå·±é—®é¢˜çš„, ç„¶åè§£å†³è‡ªå·±çš„é—®é¢˜.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://scikit-learn.org/" target="_blank" rel="external">scikit-learn.org</a></li>
<li><a href="http://scikit-learn.org/stable/tutorial/basic/tutorial.html" target="_blank" rel="external">scikit-learn docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Lucyåœ°é“ç¾è¯­ è‹±è¯­å›½é™…éŸ³æ ‡]]></title>
      <url>http://shopee.ai/2018/01/03/English/english-ielts-lucy-speaking/</url>
      <content type="html"><![CDATA[<ul>
<li>ä¸€å®šè¦ä¸æ–­é‡å¤ï¼Œä¸è¦ç›¸ä¿¡è‡ªå·±çš„è€³æœµï¼Œè¦ç›¸ä¿¡éŸ³æ ‡</li>
<li>æœ€å¼€å§‹ç»ƒä¹ ï¼Œä¸€å®šè¦è¶…çº§å¤¸å¼ ï¼Œä¸€ä¸ªéŸ³ä¸€ä¸ªéŸ³è¯»</li>
</ul>
<a id="more"></a>
<h2 id="1-åˆ†ç»„å…ƒéŸ³"><a href="#1-åˆ†ç»„å…ƒéŸ³" class="headerlink" title="1. åˆ†ç»„å…ƒéŸ³"></a>1. åˆ†ç»„å…ƒéŸ³</h2><table>
<thead>
<tr>
<th>å…ƒéŸ³ 1</th>
<th>desc</th>
<th>sample</th>
<th>å…ƒéŸ³ 2</th>
<th>desc</th>
<th>sample</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><em>i:</em></strong></td>
<td>å¾®ç¬‘éŸ³ï¼Œå˜´å·´æ‹‰é•¿</td>
<td>pleaseã€sleep</td>
<td><strong><em>i</em></strong></td>
<td>å†›è®­éŸ³</td>
<td>bigã€pig</td>
</tr>
<tr>
<td><strong><em>e</em></strong></td>
<td>ä¸€ä¸ªæ‰‹æŒ‡éŸ³</td>
<td>eggã€bed</td>
<td><strong><em>Ã¦</em></strong></td>
<td>å¤§å˜´å·´éŸ³ /É›/+/a:/</td>
<td>badã€dad</td>
</tr>
<tr>
<td><strong><em>a:</em></strong></td>
<td>å°¾éƒ¨å„¿è¯~</td>
<td>car, star</td>
<td><strong><em>É’</em></strong></td>
<td>å˜´å¼ å¼€ã€æ— å˜åŒ–</td>
<td>notã€lostã€job </td>
</tr>
<tr>
<td><strong><em>É”:</em></strong></td>
<td>æœ‰ç‚¹åƒ â€˜æ²ƒâ€™,å¤šå„¿è¯</td>
<td>horseã€short</td>
<td><strong><em>ÊŠ</em></strong></td>
<td>å‘éŸ³é åï¼Œè„–å­ä¸‹</td>
<td>goodã€shouldã€wouldã€could</td>
</tr>
<tr>
<td><strong><em>u:</em></strong></td>
<td>æ‚Ÿç©ºçš„â€˜æ‚Ÿâ€™æ‹‰é•¿</td>
<td>sch<code>oo</code>lã€r<code>oo</code>m</td>
<td><strong><em>ÊŒ</em></strong></td>
<td>çŸ­å…ƒéŸ³</td>
<td>l<code>o</code>veã€c<code>o</code>me</td>
</tr>
<tr>
<td><strong><em>Éœ:</em></strong></td>
<td>-</td>
<td>b<code>ir</code>dã€f<code>ir</code>st</td>
<td><strong><em>É™</em></strong></td>
<td>-</td>
<td><code>a</code>boutã€<code>a</code>sleepã€Chin<code>a</code></td>
</tr>
<tr>
<td><strong><em>eÉª</em></strong></td>
<td>-</td>
<td>b<code>a</code>byã€f<code>a</code>ce</td>
<td><strong><em>aÉª</em></strong></td>
<td>-</td>
<td>h<code>i</code></td>
</tr>
<tr>
<td><strong><em>aÊŠ</em></strong></td>
<td>-</td>
<td>c<code>ow</code>ã€h<code>ow</code></td>
<td><strong><em>ÉªÉ™(r)</em></strong></td>
<td>-</td>
<td>earã€dear</td>
</tr>
<tr>
<td><strong><em>eÉ™</em></strong></td>
<td>-</td>
<td><code>air</code>ã€h<code>air</code></td>
<td><strong><em>É™ÊŠ</em></strong></td>
<td>-</td>
<td>b<code>oa</code>tã€c<code>oa</code>t</td>
</tr>
<tr>
<td><strong><em>É”Éª</em></strong></td>
<td>-</td>
<td>b<code>oy</code>ã€j<code>oy</code></td>
<td><strong><em>ÊŠÉ™</em></strong></td>
<td>-</td>
<td>sure /[ÊƒÊŠÉ™(r)]/</td>
</tr>
</tbody>
</table>
<blockquote>
<p>China <strong><em>É™</em></strong> è¯å°¾å˜éŸ³</p>
</blockquote>
<h2 id="2-æ¸…æµŠè¾…éŸ³"><a href="#2-æ¸…æµŠè¾…éŸ³" class="headerlink" title="2. æ¸…æµŠè¾…éŸ³"></a>2. æ¸…æµŠè¾…éŸ³</h2><table>
<thead>
<tr>
<th>æ¸…è¾…éŸ³</th>
<th>desc</th>
<th>sample</th>
<th>æµŠè¾…éŸ³</th>
<th>desc</th>
<th>sample</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><em>p</em></strong></td>
<td></td>
<td>penã€map</td>
<td><strong><em>b</em></strong></td>
<td></td>
<td>bigã€job</td>
</tr>
<tr>
<td><strong><em>k</em></strong></td>
<td></td>
<td>bookã€week</td>
<td><strong><em>g</em></strong></td>
<td></td>
<td>eggã€dog</td>
</tr>
<tr>
<td><strong><em>f</em></strong></td>
<td></td>
<td>wifeã€knife</td>
<td><strong><em>v</em></strong></td>
<td></td>
<td>loveã€give</td>
</tr>
<tr>
<td><strong><em>s</em></strong></td>
<td>èˆŒå¤´æ”¾å˜´é‡Œ</td>
<td>sinkã€sickã€monthã€niceã€rice</td>
<td><strong><em>z</em></strong></td>
<td></td>
<td>hisã€size</td>
</tr>
<tr>
<td><strong><em>Êƒ</em></strong></td>
<td></td>
<td>wishã€dish</td>
<td><strong><em>Ê’</em></strong></td>
<td></td>
<td>usuallyã€vision</td>
</tr>
<tr>
<td><strong><em>Î¸</em></strong></td>
<td>ç”¨åŠ›åèˆŒå¤´</td>
<td>thinkã€thickã€mouthã€monthã€bath</td>
<td><strong><em>Ã°</em></strong></td>
<td></td>
<td>withã€smooth</td>
</tr>
<tr>
<td><strong><em>r</em></strong></td>
<td></td>
<td>sorryã€story</td>
<td><strong><em>h</em></strong></td>
<td></td>
<td>handã€home</td>
</tr>
<tr>
<td><strong><em>tÊƒ</em></strong></td>
<td></td>
<td>teachã€lunch</td>
<td><strong><em>dÊ’</em></strong></td>
<td></td>
<td>pageã€large</td>
</tr>
<tr>
<td><strong><em>tr</em></strong></td>
<td></td>
<td>treeã€trip</td>
<td><strong><em>dr</em></strong></td>
<td></td>
<td>dressã€dry</td>
</tr>
<tr>
<td><strong><em>ts</em></strong></td>
<td></td>
<td>catsã€hats</td>
<td><strong><em>dz</em></strong></td>
<td></td>
<td>bedsã€cards</td>
</tr>
<tr>
<td><strong><em>m</em></strong></td>
<td></td>
<td>momã€some</td>
<td><strong><em>n</em></strong></td>
<td></td>
<td>penã€sonã€sun</td>
</tr>
<tr>
<td><strong><em>Å‹</em></strong></td>
<td></td>
<td>drink</td>
<td><strong><em>l</em></strong></td>
<td></td>
<td>letã€ball</td>
</tr>
<tr>
<td><strong><em>w</em></strong></td>
<td></td>
<td>whyã€water</td>
<td><strong><em>j</em></strong></td>
<td></td>
<td>yearã€yellow</td>
</tr>
</tbody>
</table>
<blockquote>
<p>clothes [klÉ™ÊŠÃ°z] </p>
</blockquote>
<div class="limg1"><br><img src="/images/english/ielts-phonetic-symbol.jpg" height="100" width="650"><br></div>

<h2 id="3-Part-of-Speech"><a href="#3-Part-of-Speech" class="headerlink" title="3. Part of Speech"></a>3. Part of Speech</h2><p><img src="/images/english/ielts-lucy-8-part-of-speech.png" height="100" width="680"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Matplotlib Figure]]></title>
      <url>http://shopee.ai/2018/01/01/python/matplotlib/py-matplotlib-3-figure-image/</url>
      <content type="html"><![CDATA[<p>matplotlib çš„ figure å°±æ˜¯ä¸€ä¸ª å•ç‹¬çš„ figure å°çª—å£, å°çª—å£é‡Œé¢è¿˜å¯ä»¥æœ‰æ›´å¤šçš„å°å›¾ç‰‡</p>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>np.linspace</code>å®šä¹‰<code>x</code>ï¼šèŒƒå›´æ˜¯(-3,3);ä¸ªæ•°æ˜¯50. ä»¿çœŸä¸€ç»´æ•°æ®ç»„(<code>x</code> ,<code>y1</code>)è¡¨ç¤ºæ›²çº¿1. ä»¿çœŸä¸€ç»´æ•°æ®ç»„(<code>x</code> ,<code>y2</code>)è¡¨ç¤ºæ›²çº¿2.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = np.linspace(<span class="number">-3</span>, <span class="number">3</span>, <span class="number">50</span>)</span><br><span class="line">y1 = <span class="number">2</span>*x + <span class="number">1</span></span><br><span class="line">y2 = x**<span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>plt.figure</code>å®šä¹‰ä¸€ä¸ªå›¾åƒçª—å£. ä½¿ç”¨<code>plt.plot</code>ç”»(<code>x</code> ,<code>y1</code>)æ›²çº¿.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.figure()</span><br><span class="line">plt.plot(x, y1)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-2-figure-1.png" height="100" width="450"><br></div>

<p>ä½¿ç”¨<code>plt.figure</code>å®šä¹‰ä¸€ä¸ªå›¾åƒçª—å£ï¼šç¼–å·ä¸º3ï¼›å¤§å°ä¸º(8, 5). </p>
<p>ä½¿ç”¨<code>plt.plot</code>ç”»(<code>x</code> ,<code>y2</code>)æ›²çº¿.<br>ä½¿ç”¨<code>plt.plot</code>ç”»(<code>x</code> ,<code>y1</code>)æ›²çº¿ï¼Œæ›²çº¿çš„é¢œè‰²å±æ€§(<code>color</code>)ä¸ºçº¢è‰²;æ›²çº¿çš„å®½åº¦(<code>linewidth</code>)ä¸º1.0ï¼›æ›²çº¿çš„ç±»å‹(<code>linestyle</code>)ä¸ºè™šçº¿. ä½¿ç”¨<code>plt.show</code>æ˜¾ç¤ºå›¾åƒ.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.figure(num=<span class="number">3</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>),)</span><br><span class="line">plt.plot(x, y2)</span><br><span class="line">plt.plot(x, y1, color=<span class="string">'red'</span>, linewidth=<span class="number">1.0</span>, linestyle=<span class="string">'--'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-2-figure-2.png" height="100" width="450"><br></div>

<h2 id="Set-Coordinate-axis"><a href="#Set-Coordinate-axis" class="headerlink" title="Set Coordinate axis"></a>Set Coordinate axis</h2><p>ä½¿ç”¨<code>plt.xlim</code>è®¾ç½®xåæ ‡è½´èŒƒå›´ï¼š(-1, 2)ï¼› ä½¿ç”¨<code>plt.ylim</code>è®¾ç½®yåæ ‡è½´èŒƒå›´ï¼š(-2, 3)ï¼›<br>ä½¿ç”¨<code>plt.xlabel</code>è®¾ç½®xåæ ‡è½´åç§°ï¼šâ€™I am xâ€™ï¼› ä½¿ç”¨<code>plt.ylabel</code>è®¾ç½®yåæ ‡è½´åç§°ï¼šâ€™I am yâ€™ï¼›</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.figure(num=<span class="number">3</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>),)</span><br><span class="line">plt.plot(x, y2)</span><br><span class="line">plt.plot(x, y1, color=<span class="string">'red'</span>, linewidth=<span class="number">1.0</span>, linestyle=<span class="string">'--'</span>)</span><br><span class="line"></span><br><span class="line">plt.xlim((<span class="number">-1</span>, <span class="number">2</span>))</span><br><span class="line">plt.ylim((<span class="number">-2</span>, <span class="number">3</span>))</span><br><span class="line">plt.xlabel(<span class="string">'I am x'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'I am y'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/images/python/matplotlib-2-figure-3-output_9_0.png" alt="output_9_0.png"></p>
<p>ä½¿ç”¨ <code>np.linspace</code> å®šä¹‰èŒƒå›´ä»¥åŠä¸ªæ•°ï¼šèŒƒå›´æ˜¯(-1,2);ä¸ªæ•°æ˜¯5.<br>ä½¿ç”¨ <code>print</code> æ‰“å°å‡ºæ–°å®šä¹‰çš„èŒƒå›´.<br>ä½¿ç”¨ <code>plt.xticks</code> è®¾ç½®xè½´åˆ»åº¦ï¼šèŒƒå›´æ˜¯(-1,2);ä¸ªæ•°æ˜¯5.   </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.figure(num=<span class="number">3</span>, figsize=(<span class="number">8</span>, <span class="number">5</span>),)</span><br><span class="line">plt.plot(x, y2)</span><br><span class="line">plt.plot(x, y1, color=<span class="string">'red'</span>, linewidth=<span class="number">1.0</span>, linestyle=<span class="string">'--'</span>)</span><br><span class="line"></span><br><span class="line">plt.xlim((<span class="number">-1</span>, <span class="number">2</span>))</span><br><span class="line">plt.ylim((<span class="number">-2</span>, <span class="number">3</span>))</span><br><span class="line">plt.xlabel(<span class="string">'I am x'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'I am y'</span>)</span><br><span class="line"></span><br><span class="line">new_ticks = np.linspace(<span class="number">-1</span>, <span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line">print(new_ticks)</span><br><span class="line">plt.xticks(new_ticks)</span><br></pre></td></tr></table></figure>
<pre><code>[-1.   -0.25  0.5   1.25  2.  ]

([&lt;matplotlib.axis.XTick at 0x11dd68ba8&gt;,
  &lt;matplotlib.axis.XTick at 0x11dd68a58&gt;,
  &lt;matplotlib.axis.XTick at 0x11dd7d5c0&gt;,
  &lt;matplotlib.axis.XTick at 0x11e04af28&gt;,
  &lt;matplotlib.axis.XTick at 0x11e0515c0&gt;],
 &lt;a list of 5 Text xticklabel objects&gt;)
</code></pre><p>ä½¿ç”¨<code>plt.yticks</code>è®¾ç½®yè½´åˆ»åº¦ä»¥åŠåç§°ï¼šåˆ»åº¦ä¸º[-2, -1.8, -1, 1.22, 3]ï¼›å¯¹åº”åˆ»åº¦çš„åç§°ä¸º[â€˜really badâ€™,â€™badâ€™,â€™normalâ€™,â€™goodâ€™, â€˜really goodâ€™]. ä½¿ç”¨plt.showæ˜¾ç¤ºå›¾åƒ.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.yticks([<span class="number">-2</span>, <span class="number">-1.8</span>, <span class="number">-1</span>, <span class="number">1.22</span>, <span class="number">3</span>],[<span class="string">r'$really\ bad$'</span>, <span class="string">r'$bad$'</span>, <span class="string">r'$normal$'</span>, <span class="string">r'$good$'</span>, <span class="string">r'$really\ good$'</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/images/python/matplotlib-2-figure-4-output_13_0.png" alt="output_13_0.png"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://matplotlib.org/" target="_blank" rel="external">matplotlib.org</a></li>
<li><a href="https://matplotlib.org/contents.html" target="_blank" rel="external">matplotlib docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Matplotlib Basic Use]]></title>
      <url>http://shopee.ai/2018/01/01/python/matplotlib/py-matplotlib-2-basic-use/</url>
      <content type="html"><![CDATA[<p>Matplotlib æœ€åŸºæœ¬çš„ä½¿ç”¨ä»‹ç»</p>
<a id="more"></a>
<h2 id="åŸºç¡€åº”ç”¨"><a href="#åŸºç¡€åº”ç”¨" class="headerlink" title="åŸºç¡€åº”ç”¨"></a>åŸºç¡€åº”ç”¨</h2><p>ä½¿ç”¨<code>import</code>å¯¼å…¥æ¨¡å—<code>matplotlib.pyplot</code>ï¼Œå¹¶ç®€å†™æˆ<code>plt</code> ä½¿ç”¨<code>import</code>å¯¼å…¥æ¨¡å—<code>numpy</code>ï¼Œå¹¶ç®€å†™æˆ<code>np</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.linspace(<span class="number">-1</span>, <span class="number">1</span>, <span class="number">50</span>)</span><br></pre></td></tr></table></figure>
<pre><code>array([-1.        , -0.95918367, -0.91836735, -0.87755102, -0.83673469,
       -0.79591837, -0.75510204, -0.71428571, -0.67346939, -0.63265306,
       -0.59183673, -0.55102041, -0.51020408, -0.46938776, -0.42857143,
       -0.3877551 , -0.34693878, -0.30612245, -0.26530612, -0.2244898 ,
       -0.18367347, -0.14285714, -0.10204082, -0.06122449, -0.02040816,
        0.02040816,  0.06122449,  0.10204082,  0.14285714,  0.18367347,
        0.2244898 ,  0.26530612,  0.30612245,  0.34693878,  0.3877551 ,
        0.42857143,  0.46938776,  0.51020408,  0.55102041,  0.59183673,
        0.63265306,  0.67346939,  0.71428571,  0.75510204,  0.79591837,
        0.83673469,  0.87755102,  0.91836735,  0.95918367,  1.        ])
</code></pre><p>ä½¿ç”¨ <a href="https://docs.scipy.org/doc/numpy-1.12.0/reference/generated/numpy.linspace.html" target="_blank" rel="external">np.linspace</a> å®šä¹‰<code>x</code>ï¼šèŒƒå›´æ˜¯(-1,1); ä¸ªæ•°æ˜¯50. ä»¿çœŸä¸€ç»´æ•°æ®ç»„(<code>x</code> ,<code>y</code>)è¡¨ç¤ºæ›²çº¿1.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = np.linspace(<span class="number">-1</span>, <span class="number">1</span>, <span class="number">50</span>)</span><br><span class="line">y = <span class="number">2</span>*x + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>plt.figure</code>å®šä¹‰ä¸€ä¸ªå›¾åƒçª—å£. ä½¿ç”¨<code>plt.plot</code>ç”»(<code>x</code> ,<code>y</code>)æ›²çº¿. ä½¿ç”¨<code>plt.show</code>æ˜¾ç¤ºå›¾åƒ.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.figure()</span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<div class="limg1"><br><img src="/images/python/matplotlib-1-basic-use-1.png" height="100" width="450"><br></div>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://matplotlib.org/" target="_blank" rel="external">matplotlib.org</a></li>
<li><a href="https://matplotlib.org/contents.html" target="_blank" rel="external">matplotlib docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Matplotlib Why ?]]></title>
      <url>http://shopee.ai/2018/01/01/python/matplotlib/py-matplotlib-1-why/</url>
      <content type="html"><![CDATA[<p>Matplotlib æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ Python ç”»å›¾å·¥å…·</p>
<a id="more"></a>
<p>Matplotlib å®ƒèƒ½å¸®ä½ ç”»å‡ºç¾ä¸½çš„:</p>
<ul>
<li>çº¿å›¾;</li>
<li>æ•£ç‚¹å›¾;</li>
<li>ç­‰é«˜çº¿å›¾;</li>
<li>æ¡å½¢å›¾;</li>
<li>æŸ±çŠ¶å›¾;</li>
<li>3D å›¾å½¢,</li>
<li>ç”šè‡³æ˜¯å›¾å½¢åŠ¨ç”»ç­‰ç­‰.</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å›¾:</p>
<div class="limg1"><br><img src="/images/python/matplotlib-0-why-1.png" height="100" width="650"><br></div>

<div class="limg1"><br><img src="/images/python/matplotlib-0-why-3.png" height="100" width="650"><br></div>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://matplotlib.org/" target="_blank" rel="external">matplotlib.org</a></li>
<li><a href="https://matplotlib.org/contents.html" target="_blank" rel="external">matplotlib docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pandas Matplotlib Intro]]></title>
      <url>http://shopee.ai/2017/12/31/python/numpy-pandas/py-pandas-8-matplotlib/</url>
      <content type="html"><![CDATA[<p>matplotlib å°†æ•°æ®å¯è§†åŒ–. ä»…ä»…æ˜¯ç”¨æ¥ show å›¾ç‰‡çš„, å³ plt.show()</p>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure>
<h2 id="åˆ›å»ºä¸€ä¸ªSeries"><a href="#åˆ›å»ºä¸€ä¸ªSeries" class="headerlink" title="åˆ›å»ºä¸€ä¸ªSeries"></a>åˆ›å»ºä¸€ä¸ªSeries</h2><p>è¿™æ˜¯ä¸€ä¸ªçº¿æ€§çš„æ•°æ®ï¼Œæˆ‘ä»¬éšæœºç”Ÿæˆ1000ä¸ªæ•°æ®ï¼Œ<code>Series</code> é»˜è®¤çš„ <code>index</code> å°±æ˜¯ä»0å¼€å§‹çš„æ•´æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># éšæœºç”Ÿæˆ1000ä¸ªæ•°æ®</span></span><br><span class="line">data = pd.Series(np.random.randn(<span class="number">1000</span>),index=np.arange(<span class="number">1000</span>))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># pandas æ•°æ®å¯ä»¥ç›´æ¥è§‚çœ‹å…¶å¯è§†åŒ–å½¢å¼</span></span><br><span class="line">data.plot()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/images/python/pandas-output_3_0.png" alt="png"></p>
<p>å¯ä»¥ä½¿ç”¨ <code>plt.plot(x=, y=)</code>ï¼ŒæŠŠ<code>x</code>,<code>y</code>çš„æ•°æ®ä½œä¸ºå‚æ•°å­˜è¿›å»ï¼Œä½†æ˜¯<code>data</code>æœ¬æ¥å°±æ˜¯ä¸€ä¸ªæ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥<code>plot</code></p>
<h2 id="Dataframe-å¯è§†åŒ–"><a href="#Dataframe-å¯è§†åŒ–" class="headerlink" title="Dataframe å¯è§†åŒ–"></a>Dataframe å¯è§†åŒ–</h2><p>æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ª 1000*4 çš„ <code>DataFrame</code>ï¼Œå¹¶å¯¹ä»–ä»¬ç´¯åŠ </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = pd.DataFrame(</span><br><span class="line">    np.random.randn(<span class="number">1000</span>,<span class="number">4</span>),</span><br><span class="line">    index=np.arange(<span class="number">1000</span>),</span><br><span class="line">    columns=list(<span class="string">"ABCD"</span>)</span><br><span class="line">    )</span><br><span class="line"><span class="comment">#data.cumsum()</span></span><br><span class="line">print(data)</span><br><span class="line">data.plot()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<pre><code>            A         B         C         D
0    1.163604 -0.689103  1.958018  0.241444
1    0.595765  0.816026  1.573164 -0.443003
2   -0.101446  0.768321 -0.203069 -0.638841
3   -0.439233 -0.161273  0.398774  1.309622
4   -0.524647 -0.180073 -1.499978  0.628436
5   -0.305683  0.668840  0.243668 -1.386839
..        ...       ...       ...       ...
998 -0.243955 -0.190122 -0.299633  3.350200
999 -0.055184  0.936187  0.146156  0.604271

[1000 rows x 4 columns]
</code></pre><p><img src="/images/python/pandas-output_5_1.png" alt="png"></p>
<p>è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬åˆšåˆšç”Ÿæˆçš„4ä¸ª<code>column</code>çš„æ•°æ®ï¼Œå› ä¸ºæœ‰4ç»„æ•°æ®ï¼Œæ‰€ä»¥4ç»„æ•°æ®ä¼šåˆ†åˆ«<code>plot</code>å‡ºæ¥ã€‚</p>
<p>plot å¯ä»¥æŒ‡å®šå¾ˆå¤šå‚æ•°ï¼Œå…·ä½“å‚è§<a href="http://pandas.pydata.org/pandas-docs/version/0.18.1/visualization.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a></p>
<p>é™¤äº†plotï¼Œæˆ‘ç»å¸¸ä¼šç”¨åˆ°è¿˜æœ‰scatterï¼Œè¿™ä¸ªä¼šæ˜¾ç¤ºæ•£ç‚¹å›¾ï¼Œé¦–å…ˆè¯´ä¸€ä¸‹åœ¨ pandas ä¸­æœ‰å¤šå°‘ç§æ–¹æ³•</p>
<ul>
<li>bar</li>
<li>hist</li>
<li>box</li>
<li>kde</li>
<li>area</li>
<li>scatter</li>
<li>hexbin</li>
</ul>
<p>ä¸»è¦è¯´ä¸€ä¸‹ <code>plot</code> å’Œ <code>scatter</code>. å› ä¸º <code>scatter</code> åªæœ‰ <code>x</code>ï¼Œ<code>y</code> ä¸¤ä¸ªå±æ€§ï¼Œå¯ä»¥åˆ†åˆ«ç»™ <code>x</code>, <code>y</code> æŒ‡å®šæ•°æ®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ax = data.plot.scatter(x=<span class="string">'A'</span>,y=<span class="string">'B'</span>,color=<span class="string">'DarkBlue'</span>,label=<span class="string">'Class1'</span>)</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬åœ¨å¯ä»¥å†ç”»ä¸€ä¸ªåœ¨åŒä¸€ä¸ª<code>ax</code>ä¸Šé¢ï¼Œé€‰æ‹©ä¸ä¸€æ ·çš„æ•°æ®åˆ—ï¼Œä¸åŒçš„ <code>color</code> å’Œ <code>label</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å°†ä¹‹ä¸‹è¿™ä¸ª data ç”»åœ¨ä¸Šä¸€ä¸ª ax ä¸Šé¢</span></span><br><span class="line">data.plot.scatter(x=<span class="string">'A'</span>,y=<span class="string">'C'</span>,color=<span class="string">'LightGreen'</span>,label=<span class="string">'Class2'</span>,ax=ax)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p><img src="/images/python/pandas-output_9_0.png" alt="png"></p>
<p>ä¸¤ç§å‘ˆç°æ–¹å¼ï¼Œä¸€ç§æ˜¯<strong>çº¿æ€§çš„æ–¹å¼</strong>ï¼Œä¸€ç§æ˜¯<strong>æ•£ç‚¹å›¾</strong></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://pandas.pydata.org/" target="_blank" rel="external">pandas.pydata.org</a></li>
<li><a href="http://pandas.pydata.org/pandas-docs/version/0.21/" target="_blank" rel="external">pandas docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pandas Merge]]></title>
      <url>http://shopee.ai/2017/12/31/python/numpy-pandas/py-pandas-7-merge/</url>
      <content type="html"><![CDATA[<p><code>pandas</code>ä¸­çš„<code>merge</code>å’Œ<code>concat</code>ç±»ä¼¼,ä½†ä¸»è¦æ˜¯ç”¨äºä¸¤ç»„æœ‰<strong>key column</strong>çš„æ•°æ®,ç»Ÿä¸€ç´¢å¼•çš„æ•°æ®.</p>
<a id="more"></a>
<h2 id="ä¾æ®ä¸€ç»„keyåˆå¹¶"><a href="#ä¾æ®ä¸€ç»„keyåˆå¹¶" class="headerlink" title="ä¾æ®ä¸€ç»„keyåˆå¹¶"></a>ä¾æ®ä¸€ç»„keyåˆå¹¶</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰èµ„æ–™é›†å¹¶æ‰“å°å‡º</span></span><br><span class="line">left = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>, <span class="string">'K3'</span>],</span><br><span class="line">                             <span class="string">'A'</span>: [<span class="string">'A0'</span>, <span class="string">'A1'</span>, <span class="string">'A2'</span>, <span class="string">'A3'</span>],</span><br><span class="line">                             <span class="string">'B'</span>: [<span class="string">'B0'</span>, <span class="string">'B1'</span>, <span class="string">'B2'</span>, <span class="string">'B3'</span>]&#125;)</span><br><span class="line">right = pd.DataFrame(&#123;<span class="string">'key'</span>: [<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>, <span class="string">'K3'</span>],</span><br><span class="line">                              <span class="string">'C'</span>: [<span class="string">'C0'</span>, <span class="string">'C1'</span>, <span class="string">'C2'</span>, <span class="string">'C3'</span>],</span><br><span class="line">                              <span class="string">'D'</span>: [<span class="string">'D0'</span>, <span class="string">'D1'</span>, <span class="string">'D2'</span>, <span class="string">'D3'</span>]&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(left)</span></span><br><span class="line"><span class="comment">#    A   B key</span></span><br><span class="line"><span class="comment"># 0  A0  B0  K0</span></span><br><span class="line"><span class="comment"># 1  A1  B1  K1</span></span><br><span class="line"><span class="comment"># 2  A2  B2  K2</span></span><br><span class="line"><span class="comment"># 3  A3  B3  K3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(right)</span></span><br><span class="line"><span class="comment">#    C   D key</span></span><br><span class="line"><span class="comment"># 0  C0  D0  K0</span></span><br><span class="line"><span class="comment"># 1  C1  D1  K1</span></span><br><span class="line"><span class="comment"># 2  C2  D2  K2</span></span><br><span class="line"><span class="comment"># 3  C3  D3  K3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¾æ®key columnåˆå¹¶ï¼Œå¹¶æ‰“å°å‡º</span></span><br><span class="line">res = pd.merge(left, right, on=<span class="string">'key'</span>)</span><br><span class="line"></span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
<pre><code>    A   B key   C   D
0  A0  B0  K0  C0  D0
1  A1  B1  K1  C1  D1
2  A2  B2  K2  C2  D2
3  A3  B3  K3  C3  D3
</code></pre><h2 id="ä¾æ®ä¸¤ç»„keyåˆå¹¶"><a href="#ä¾æ®ä¸¤ç»„keyåˆå¹¶" class="headerlink" title="ä¾æ®ä¸¤ç»„keyåˆå¹¶"></a>ä¾æ®ä¸¤ç»„keyåˆå¹¶</h2><p>åˆå¹¶æ—¶æœ‰4ç§æ–¹æ³•<code>how = [&#39;left&#39;, &#39;right&#39;, &#39;outer&#39;, &#39;inner&#39;]</code>ï¼Œé¢„è®¾å€¼<code>how=&#39;inner&#39;</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰èµ„æ–™é›†å¹¶æ‰“å°å‡º</span></span><br><span class="line">left = pd.DataFrame(&#123;<span class="string">'key1'</span>: [<span class="string">'K0'</span>, <span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>],</span><br><span class="line">                      <span class="string">'key2'</span>: [<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K0'</span>, <span class="string">'K1'</span>],</span><br><span class="line">                      <span class="string">'A'</span>: [<span class="string">'A0'</span>, <span class="string">'A1'</span>, <span class="string">'A2'</span>, <span class="string">'A3'</span>],</span><br><span class="line">                      <span class="string">'B'</span>: [<span class="string">'B0'</span>, <span class="string">'B1'</span>, <span class="string">'B2'</span>, <span class="string">'B3'</span>]&#125;)</span><br><span class="line">right = pd.DataFrame(&#123;<span class="string">'key1'</span>: [<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>],</span><br><span class="line">                       <span class="string">'key2'</span>: [<span class="string">'K0'</span>, <span class="string">'K0'</span>, <span class="string">'K0'</span>, <span class="string">'K0'</span>],</span><br><span class="line">                       <span class="string">'C'</span>: [<span class="string">'C0'</span>, <span class="string">'C1'</span>, <span class="string">'C2'</span>, <span class="string">'C3'</span>],</span><br><span class="line">                       <span class="string">'D'</span>: [<span class="string">'D0'</span>, <span class="string">'D1'</span>, <span class="string">'D2'</span>, <span class="string">'D3'</span>]&#125;)</span><br><span class="line"></span><br><span class="line">print(left)</span><br><span class="line"><span class="comment">#    A   B key1 key2</span></span><br><span class="line"><span class="comment"># 0  A0  B0   K0   K0</span></span><br><span class="line"><span class="comment"># 1  A1  B1   K0   K1</span></span><br><span class="line"><span class="comment"># 2  A2  B2   K1   K0</span></span><br><span class="line"><span class="comment"># 3  A3  B3   K2   K1</span></span><br><span class="line"></span><br><span class="line">print(right)</span><br><span class="line"><span class="comment">#    C   D key1 key2</span></span><br><span class="line"><span class="comment"># 0  C0  D0   K0   K0</span></span><br><span class="line"><span class="comment"># 1  C1  D1   K1   K0</span></span><br><span class="line"><span class="comment"># 2  C2  D2   K1   K0</span></span><br><span class="line"><span class="comment"># 3  C3  D3   K2   K0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¾æ®key1ä¸key2 columnsè¿›è¡Œåˆå¹¶ï¼Œå¹¶æ‰“å°å‡ºå››ç§ç»“æœ['left', 'right', 'outer', 'inner']</span></span><br><span class="line">res = pd.merge(left, right, on=[<span class="string">'key1'</span>, <span class="string">'key2'</span>], how=<span class="string">'inner'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#    A   B key1 key2   C   D</span></span><br><span class="line"><span class="comment"># 0  A0  B0   K0   K0  C0  D0</span></span><br><span class="line"><span class="comment"># 1  A2  B2   K1   K0  C1  D1</span></span><br><span class="line"><span class="comment"># 2  A2  B2   K1   K0  C2  D2</span></span><br><span class="line"></span><br><span class="line">res = pd.merge(left, right, on=[<span class="string">'key1'</span>, <span class="string">'key2'</span>], how=<span class="string">'outer'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#     A    B key1 key2    C    D</span></span><br><span class="line"><span class="comment"># 0   A0   B0   K0   K0   C0   D0</span></span><br><span class="line"><span class="comment"># 1   A1   B1   K0   K1  NaN  NaN</span></span><br><span class="line"><span class="comment"># 2   A2   B2   K1   K0   C1   D1</span></span><br><span class="line"><span class="comment"># 3   A2   B2   K1   K0   C2   D2</span></span><br><span class="line"><span class="comment"># 4   A3   B3   K2   K1  NaN  NaN</span></span><br><span class="line"><span class="comment"># 5  NaN  NaN   K2   K0   C3   D3</span></span><br><span class="line"></span><br><span class="line">res = pd.merge(left, right, on=[<span class="string">'key1'</span>, <span class="string">'key2'</span>], how=<span class="string">'left'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#    A   B key1 key2    C    D</span></span><br><span class="line"><span class="comment"># 0  A0  B0   K0   K0   C0   D0</span></span><br><span class="line"><span class="comment"># 1  A1  B1   K0   K1  NaN  NaN</span></span><br><span class="line"><span class="comment"># 2  A2  B2   K1   K0   C1   D1</span></span><br><span class="line"><span class="comment"># 3  A2  B2   K1   K0   C2   D2</span></span><br><span class="line"><span class="comment"># 4  A3  B3   K2   K1  NaN  NaN</span></span><br><span class="line"></span><br><span class="line">res = pd.merge(left, right, on=[<span class="string">'key1'</span>, <span class="string">'key2'</span>], how=<span class="string">'right'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#     A    B key1 key2   C   D</span></span><br><span class="line"><span class="comment"># 0   A0   B0   K0   K0  C0  D0</span></span><br><span class="line"><span class="comment"># 1   A2   B2   K1   K0  C1  D1</span></span><br><span class="line"><span class="comment"># 2   A2   B2   K1   K0  C2  D2</span></span><br><span class="line"><span class="comment"># 3  NaN  NaN   K2   K0  C3  D3</span></span><br></pre></td></tr></table></figure>
<h2 id="Indicator"><a href="#Indicator" class="headerlink" title="Indicator"></a>Indicator</h2><p><code>indicator=True</code>ä¼šå°†åˆå¹¶çš„è®°å½•æ”¾åœ¨æ–°çš„ä¸€åˆ—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰èµ„æ–™é›†å¹¶æ‰“å°å‡º</span></span><br><span class="line">df1 = pd.DataFrame(&#123;<span class="string">'col1'</span>:[<span class="number">0</span>,<span class="number">1</span>], <span class="string">'col_left'</span>:[<span class="string">'a'</span>,<span class="string">'b'</span>]&#125;)</span><br><span class="line">df2 = pd.DataFrame(&#123;<span class="string">'col1'</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>],<span class="string">'col_right'</span>:[<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]&#125;)</span><br><span class="line"></span><br><span class="line">print(df1)</span><br><span class="line"><span class="comment">#   col1 col_left</span></span><br><span class="line"><span class="comment"># 0     0        a</span></span><br><span class="line"><span class="comment"># 1     1        b</span></span><br><span class="line"></span><br><span class="line">print(df2)</span><br><span class="line"><span class="comment">#   col1  col_right</span></span><br><span class="line"><span class="comment"># 0     1          2</span></span><br><span class="line"><span class="comment"># 1     2          2</span></span><br><span class="line"><span class="comment"># 2     2          2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¾æ®col1è¿›è¡Œåˆå¹¶ï¼Œå¹¶å¯ç”¨indicator=Trueï¼Œæœ€åæ‰“å°å‡º</span></span><br><span class="line">res = pd.merge(df1, df2, on=<span class="string">'col1'</span>, how=<span class="string">'outer'</span>, indicator=<span class="keyword">True</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#   col1 col_left  col_right      _merge</span></span><br><span class="line"><span class="comment"># 0   0.0        a        NaN   left_only</span></span><br><span class="line"><span class="comment"># 1   1.0        b        2.0        both</span></span><br><span class="line"><span class="comment"># 2   2.0      NaN        2.0  right_only</span></span><br><span class="line"><span class="comment"># 3   2.0      NaN        2.0  right_only</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªå®šindicator columnçš„åç§°ï¼Œå¹¶æ‰“å°å‡º</span></span><br><span class="line">res = pd.merge(df1, df2, on=<span class="string">'col1'</span>, how=<span class="string">'outer'</span>, indicator=<span class="string">'indicator_column'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#   col1 col_left  col_right indicator_column</span></span><br><span class="line"><span class="comment"># 0   0.0        a        NaN        left_only</span></span><br><span class="line"><span class="comment"># 1   1.0        b        2.0             both</span></span><br><span class="line"><span class="comment"># 2   2.0      NaN        2.0       right_only</span></span><br><span class="line"><span class="comment"># 3   2.0      NaN        2.0       right_only</span></span><br></pre></td></tr></table></figure>
<pre><code>   col1 col_left
0     0        a
1     1        b
   col1  col_right
0     1          2
1     2          2
2     2          2
   col1 col_left  col_right      _merge
0     0        a        NaN   left_only
1     1        b        2.0        both
2     2      NaN        2.0  right_only
3     2      NaN        2.0  right_only
   col1 col_left  col_right indicator_column
0     0        a        NaN        left_only
1     1        b        2.0             both
2     2      NaN        2.0       right_only
3     2      NaN        2.0       right_only
</code></pre><h2 id="ä¾æ®indexåˆå¹¶"><a href="#ä¾æ®indexåˆå¹¶" class="headerlink" title="ä¾æ®indexåˆå¹¶"></a>ä¾æ®indexåˆå¹¶</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰èµ„æ–™é›†å¹¶æ‰“å°å‡º</span></span><br><span class="line">left = pd.DataFrame(&#123;<span class="string">'A'</span>: [<span class="string">'A0'</span>, <span class="string">'A1'</span>, <span class="string">'A2'</span>],</span><br><span class="line">                     <span class="string">'B'</span>: [<span class="string">'B0'</span>, <span class="string">'B1'</span>, <span class="string">'B2'</span>]&#125;,</span><br><span class="line">                     index=[<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>])</span><br><span class="line">right = pd.DataFrame(&#123;<span class="string">'C'</span>: [<span class="string">'C0'</span>, <span class="string">'C2'</span>, <span class="string">'C3'</span>],</span><br><span class="line">                      <span class="string">'D'</span>: [<span class="string">'D0'</span>, <span class="string">'D2'</span>, <span class="string">'D3'</span>]&#125;,</span><br><span class="line">                     index=[<span class="string">'K0'</span>, <span class="string">'K2'</span>, <span class="string">'K3'</span>])</span><br><span class="line"></span><br><span class="line">print(left)</span><br><span class="line"><span class="comment">#     A   B</span></span><br><span class="line"><span class="comment"># K0  A0  B0</span></span><br><span class="line"><span class="comment"># K1  A1  B1</span></span><br><span class="line"><span class="comment"># K2  A2  B2</span></span><br><span class="line"></span><br><span class="line">print(right)</span><br><span class="line"><span class="comment">#     C   D</span></span><br><span class="line"><span class="comment"># K0  C0  D0</span></span><br><span class="line"><span class="comment"># K2  C2  D2</span></span><br><span class="line"><span class="comment"># K3  C3  D3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¾æ®å·¦å³èµ„æ–™é›†çš„indexè¿›è¡Œåˆå¹¶ï¼Œhow='outer',å¹¶æ‰“å°å‡º</span></span><br><span class="line">res = pd.merge(left, right, left_index=<span class="keyword">True</span>, right_index=<span class="keyword">True</span>, how=<span class="string">'outer'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#      A    B    C    D</span></span><br><span class="line"><span class="comment"># K0   A0   B0   C0   D0</span></span><br><span class="line"><span class="comment"># K1   A1   B1  NaN  NaN</span></span><br><span class="line"><span class="comment"># K2   A2   B2   C2   D2</span></span><br><span class="line"><span class="comment"># K3  NaN  NaN   C3   D3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¾æ®å·¦å³èµ„æ–™é›†çš„indexè¿›è¡Œåˆå¹¶ï¼Œhow='inner',å¹¶æ‰“å°å‡º</span></span><br><span class="line">res = pd.merge(left, right, left_index=<span class="keyword">True</span>, right_index=<span class="keyword">True</span>, how=<span class="string">'inner'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#     A   B   C   D</span></span><br><span class="line"><span class="comment"># K0  A0  B0  C0  D0</span></span><br><span class="line"><span class="comment"># K2  A2  B2  C2  D2</span></span><br></pre></td></tr></table></figure>
<pre><code>     A   B
K0  A0  B0
K1  A1  B1
K2  A2  B2
     C   D
K0  C0  D0
K2  C2  D2
K3  C3  D3
      A    B    C    D
K0   A0   B0   C0   D0
K1   A1   B1  NaN  NaN
K2   A2   B2   C2   D2
K3  NaN  NaN   C3   D3
     A   B   C   D
K0  A0  B0  C0  D0
K2  A2  B2  C2  D2
</code></pre><h2 id="è§£å†³overlappingçš„é—®é¢˜"><a href="#è§£å†³overlappingçš„é—®é¢˜" class="headerlink" title="è§£å†³overlappingçš„é—®é¢˜"></a>è§£å†³overlappingçš„é—®é¢˜</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰èµ„æ–™é›†</span></span><br><span class="line">boys = pd.DataFrame(&#123;<span class="string">'k'</span>: [<span class="string">'K0'</span>, <span class="string">'K1'</span>, <span class="string">'K2'</span>], <span class="string">'age'</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;)</span><br><span class="line">girls = pd.DataFrame(&#123;<span class="string">'k'</span>: [<span class="string">'K0'</span>, <span class="string">'K0'</span>, <span class="string">'K3'</span>], <span class="string">'age'</span>: [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]&#125;)</span><br><span class="line"></span><br><span class="line">print(boys)</span><br><span class="line"></span><br><span class="line">print(girls)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä½¿ç”¨suffixesè§£å†³overlappingçš„é—®é¢˜</span></span><br><span class="line">res = pd.merge(boys, girls, on=<span class="string">'k'</span>, suffixes=[<span class="string">'_boy'</span>, <span class="string">'_girl'</span>], how=<span class="string">'inner'</span>)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
<pre><code>   age   k
0    1  K0
1    2  K1
2    3  K2
   age   k
0    4  K0
1    5  K0
2    6  K3
   age_boy   k  age_girl
0        1  K0         4
1        1  K0         5
</code></pre><p>pandas ä¹Ÿæœ‰ <code>join</code> å’Œ <code>merge</code> æ˜¯ç±»ä¼¼çš„ï¼Œå¦‚éœ€è¦ä½¿ç”¨ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://pandas.pydata.org/" target="_blank" rel="external">pandas.pydata.org</a></li>
<li><a href="http://pandas.pydata.org/pandas-docs/version/0.21/" target="_blank" rel="external">pandas docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pandas Concatã€Joinã€join_axesã€append]]></title>
      <url>http://shopee.ai/2017/12/31/python/numpy-pandas/py-pandas-6-concat-join-append/</url>
      <content type="html"><![CDATA[<p><code>pandas</code> å¤„ç†å¤šç»„æ•°æ®çš„æ—¶å€™å¾€å¾€ä¼šè¦ç”¨åˆ°æ•°æ®çš„åˆå¹¶å¤„ç†,ä½¿ç”¨ <code>concat</code> æ˜¯ä¸€ç§åŸºæœ¬çš„åˆå¹¶æ–¹å¼.è€Œä¸” <code>concat</code> ä¸­æœ‰å¾ˆå¤šå‚æ•°å¯ä»¥è°ƒæ•´,åˆå¹¶æˆä½ æƒ³è¦çš„æ•°æ®å½¢å¼.</p>
<a id="more"></a>
<h2 id="axis-åˆå¹¶æ–¹å‘"><a href="#axis-åˆå¹¶æ–¹å‘" class="headerlink" title="axis (åˆå¹¶æ–¹å‘)"></a>axis (åˆå¹¶æ–¹å‘)</h2><p><code>axis=0</code> æ˜¯é¢„è®¾å€¼ï¼Œå› æ­¤æœªè®¾å®šä»»ä½•å‚æ•°æ—¶ï¼Œé»˜è®¤axis=0</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰èµ„æ–™é›†</span></span><br><span class="line">df1 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">0</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">df2 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">1</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">df3 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">2</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#concatçºµå‘åˆå¹¶</span></span><br><span class="line">res = pd.concat([df1, df2, df3], axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰“å°ç»“æœ</span></span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
<pre><code>     a    b    c    d
0  0.0  0.0  0.0  0.0
1  0.0  0.0  0.0  0.0
2  0.0  0.0  0.0  0.0
0  1.0  1.0  1.0  1.0
1  1.0  1.0  1.0  1.0
2  1.0  1.0  1.0  1.0
0  2.0  2.0  2.0  2.0
1  2.0  2.0  2.0  2.0
2  2.0  2.0  2.0  2.0
</code></pre><p>ä»”ç»†è§‚å¯Ÿä¼šå‘ç°ç»“æœçš„<code>index</code>æ˜¯0, 1, 2, 0, 1, 2, 0, 1, 2ï¼Œè‹¥è¦å°†<code>index</code>é‡ç½®ï¼Œè¯·çœ‹ä¾‹å­äºŒã€‚</p>
<h2 id="ignore-index-é‡ç½®-index"><a href="#ignore-index-é‡ç½®-index" class="headerlink" title="ignore_index (é‡ç½® index)"></a>ignore_index (é‡ç½® index)</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ‰¿ä¸Šä¸€ä¸ªä¾‹å­ï¼Œå¹¶å°†index_ignoreè®¾å®šä¸ºTrue</span></span><br><span class="line">res = pd.concat([df1, df2, df3], axis=<span class="number">0</span>, ignore_index=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰“å°ç»“æœ</span></span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
<pre><code>     a    b    c    d
0  0.0  0.0  0.0  0.0
1  0.0  0.0  0.0  0.0
2  0.0  0.0  0.0  0.0
3  1.0  1.0  1.0  1.0
4  1.0  1.0  1.0  1.0
5  1.0  1.0  1.0  1.0
6  2.0  2.0  2.0  2.0
7  2.0  2.0  2.0  2.0
8  2.0  2.0  2.0  2.0
</code></pre><p>ç»“æœçš„<code>index</code>å˜ 0, 1, 2, 3, 4, 5, 6, 7, 8</p>
<h2 id="join-åˆå¹¶æ–¹å¼"><a href="#join-åˆå¹¶æ–¹å¼" class="headerlink" title="join (åˆå¹¶æ–¹å¼)"></a>join (åˆå¹¶æ–¹å¼)</h2><p><code>join=&#39;outer&#39;</code> ä¸ºé¢„è®¾å€¼ï¼Œæœªè®¾å®šä»»ä½•å‚æ•°æ—¶ï¼Œå‡½æ•°é»˜è®¤ <code>join=&#39;outer&#39;</code>ã€‚æ­¤æ–¹å¼æ˜¯ä¾ç…§<code>column</code>æ¥åšçºµå‘åˆå¹¶ï¼Œæœ‰ç›¸åŒçš„<code>column</code>ä¸Šä¸‹åˆå¹¶åœ¨ä¸€èµ·ï¼Œå…¶ä»–ç‹¬è‡ªçš„<code>column</code>ä¸ªè‡ªæˆåˆ—ï¼ŒåŸæœ¬æ²¡æœ‰å€¼çš„ä½ç½®çš†ä»¥<code>NaN</code>å¡«å……ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰èµ„æ–™é›†</span></span><br><span class="line">df1 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">0</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>], index=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">df2 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">1</span>, columns=[<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>], index=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#çºµå‘"å¤–"åˆå¹¶df1ä¸df2</span></span><br><span class="line">res = pd.concat([df1, df2], axis=<span class="number">0</span>, join=<span class="string">'outer'</span>)</span><br><span class="line"></span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
<pre><code>     a    b    c    d    e
1  0.0  0.0  0.0  0.0  NaN
2  0.0  0.0  0.0  0.0  NaN
3  0.0  0.0  0.0  0.0  NaN
2  NaN  1.0  1.0  1.0  1.0
3  NaN  1.0  1.0  1.0  1.0
4  NaN  1.0  1.0  1.0  1.0
</code></pre><p>åªæœ‰ç›¸åŒçš„<code>column</code>åˆå¹¶åœ¨ä¸€èµ·ï¼Œå…¶ä»–çš„ä¼šè¢«æŠ›å¼ƒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ‰¿ä¸Šä¸€ä¸ªä¾‹å­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#çºµå‘"å†…"åˆå¹¶df1ä¸df2</span></span><br><span class="line">res = pd.concat([df1, df2], axis=<span class="number">0</span>, join=<span class="string">'inner'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#é‡ç½®indexå¹¶æ‰“å°ç»“æœ</span></span><br><span class="line">res = pd.concat([df1, df2], axis=<span class="number">0</span>, join=<span class="string">'inner'</span>, ignore_index=<span class="keyword">True</span>)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
<pre><code>     b    c    d
0  0.0  0.0  0.0
1  0.0  0.0  0.0
2  0.0  0.0  0.0
3  1.0  1.0  1.0
4  1.0  1.0  1.0
5  1.0  1.0  1.0
</code></pre><h2 id="join-axes-ä¾ç…§-axes-åˆå¹¶"><a href="#join-axes-ä¾ç…§-axes-åˆå¹¶" class="headerlink" title="join_axes (ä¾ç…§ axes åˆå¹¶)"></a>join_axes (ä¾ç…§ axes åˆå¹¶)</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰èµ„æ–™é›†</span></span><br><span class="line">df1 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">0</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>], index=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">df2 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">1</span>, columns=[<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>], index=[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¾ç…§`df1.index`è¿›è¡Œæ¨ªå‘åˆå¹¶</span></span><br><span class="line">res = pd.concat([df1, df2], axis=<span class="number">1</span>, join_axes=[df1.index])</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰“å°ç»“æœ</span></span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#     a    b    c    d    b    c    d    e</span></span><br><span class="line"><span class="comment"># 1  0.0  0.0  0.0  0.0  NaN  NaN  NaN  NaN</span></span><br><span class="line"><span class="comment"># 2  0.0  0.0  0.0  0.0  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="comment"># 3  0.0  0.0  0.0  0.0  1.0  1.0  1.0  1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç§»é™¤join_axesï¼Œå¹¶æ‰“å°ç»“æœ</span></span><br><span class="line">res = pd.concat([df1, df2], axis=<span class="number">1</span>)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>
<pre><code>     a    b    c    d    b    c    d    e
1  0.0  0.0  0.0  0.0  NaN  NaN  NaN  NaN
2  0.0  0.0  0.0  0.0  1.0  1.0  1.0  1.0
3  0.0  0.0  0.0  0.0  1.0  1.0  1.0  1.0
     a    b    c    d    b    c    d    e
1  0.0  0.0  0.0  0.0  NaN  NaN  NaN  NaN
2  0.0  0.0  0.0  0.0  1.0  1.0  1.0  1.0
3  0.0  0.0  0.0  0.0  1.0  1.0  1.0  1.0
4  NaN  NaN  NaN  NaN  1.0  1.0  1.0  1.0
</code></pre><h2 id="append-æ·»åŠ æ•°æ®"><a href="#append-æ·»åŠ æ•°æ®" class="headerlink" title="append (æ·»åŠ æ•°æ®)"></a>append (æ·»åŠ æ•°æ®)</h2><p><code>append</code>åªæœ‰çºµå‘åˆå¹¶ï¼Œæ²¡æœ‰æ¨ªå‘åˆå¹¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰èµ„æ–™é›†</span></span><br><span class="line">df1 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">0</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">df2 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">1</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">df3 = pd.DataFrame(np.ones((<span class="number">3</span>,<span class="number">4</span>))*<span class="number">1</span>, columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line">s1 = pd.Series([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], index=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†df2åˆå¹¶åˆ°df1çš„ä¸‹é¢ï¼Œä»¥åŠé‡ç½®indexï¼Œå¹¶æ‰“å°å‡ºç»“æœ</span></span><br><span class="line">res = df1.append(df2, ignore_index=<span class="keyword">True</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#     a    b    c    d</span></span><br><span class="line"><span class="comment"># 0  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="comment"># 1  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="comment"># 2  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="comment"># 3  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="comment"># 4  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="comment"># 5  1.0  1.0  1.0  1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆå¹¶å¤šä¸ªdfï¼Œå°†df2ä¸df3åˆå¹¶è‡³df1çš„ä¸‹é¢ï¼Œä»¥åŠé‡ç½®indexï¼Œå¹¶æ‰“å°å‡ºç»“æœ</span></span><br><span class="line">res = df1.append([df2, df3], ignore_index=<span class="keyword">True</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#     a    b    c    d</span></span><br><span class="line"><span class="comment"># 0  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="comment"># 1  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="comment"># 2  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="comment"># 3  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="comment"># 4  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="comment"># 5  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="comment"># 6  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="comment"># 7  1.0  1.0  1.0  1.0</span></span><br><span class="line"><span class="comment"># 8  1.0  1.0  1.0  1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆå¹¶seriesï¼Œå°†s1åˆå¹¶è‡³df1ï¼Œä»¥åŠé‡ç½®indexï¼Œå¹¶æ‰“å°å‡ºç»“æœ</span></span><br><span class="line">res = df1.append(s1, ignore_index=<span class="keyword">True</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="comment">#     a    b    c    d</span></span><br><span class="line"><span class="comment"># 0  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="comment"># 1  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="comment"># 2  0.0  0.0  0.0  0.0</span></span><br><span class="line"><span class="comment"># 3  1.0  2.0  3.0  4.0</span></span><br></pre></td></tr></table></figure>
<pre><code>     a    b    c    d
0  0.0  0.0  0.0  0.0
1  0.0  0.0  0.0  0.0
2  0.0  0.0  0.0  0.0
3  1.0  1.0  1.0  1.0
4  1.0  1.0  1.0  1.0
5  1.0  1.0  1.0  1.0
     a    b    c    d
0  0.0  0.0  0.0  0.0
1  0.0  0.0  0.0  0.0
2  0.0  0.0  0.0  0.0
3  1.0  1.0  1.0  1.0
4  1.0  1.0  1.0  1.0
5  1.0  1.0  1.0  1.0
6  1.0  1.0  1.0  1.0
7  1.0  1.0  1.0  1.0
8  1.0  1.0  1.0  1.0
     a    b    c    d
0  0.0  0.0  0.0  0.0
1  0.0  0.0  0.0  0.0
2  0.0  0.0  0.0  0.0
3  1.0  2.0  3.0  4.0
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://pandas.pydata.org/" target="_blank" rel="external">pandas.pydata.org</a></li>
<li><a href="http://pandas.pydata.org/pandas-docs/version/0.21/" target="_blank" rel="external">pandas docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pandas IO]]></title>
      <url>http://shopee.ai/2017/12/30/python/numpy-pandas/py-pandas-5-import-output/</url>
      <content type="html"><![CDATA[<p><code>pandas</code> å¯ä»¥è¯»å–ä¸å­˜å–çš„èµ„æ–™æ ¼å¼æœ‰å¾ˆå¤šç§ï¼Œåƒ <code>csv</code>ã€<code>excel</code>ã€<code>json</code>ã€<code>html</code> ä¸ <code>pickle</code> ç­‰â€¦</p>
<p>è¯¦ç»†è¯·çœ‹<a href="http://pandas.pydata.org/pandas-docs/stable/io.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a></p>
<a id="more"></a>
<h2 id="è¯»å–csv"><a href="#è¯»å–csv" class="headerlink" title="è¯»å–csv"></a>è¯»å–csv</h2><p>ç¤ºèŒƒæ¡£æ¡ˆä¸‹è½½ - student.csv</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment">#åŠ è½½æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¯»å–csv</span></span><br><span class="line">data = pd.read_csv(<span class="string">'students.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰“å°å‡ºdata</span></span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>
<pre><code>    Student ID  name   age  gender
0         1100  Kelly   22  Female
1         1101    Clo   21  Female
2         1102  Tilly   22  Female
3         1103   Tony   24    Male
4         1104  David   20    Male
5         1105  Catty   22  Female
6         1106      M    3  Female
7         1107      N   43    Male
8         1108      A   13    Male
9         1109      S   12    Male
10        1110  David   33    Male
11        1111     Dw    3  Female
12        1112      Q   23    Male
13        1113      W   21  Female
</code></pre><h2 id="å°†èµ„æ–™å­˜å–æˆpickle"><a href="#å°†èµ„æ–™å­˜å–æˆpickle" class="headerlink" title="å°†èµ„æ–™å­˜å–æˆpickle"></a>å°†èµ„æ–™å­˜å–æˆpickle</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data.to_pickle(<span class="string">'student.pickle'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://pandas.pydata.org/" target="_blank" rel="external">pandas.pydata.org</a></li>
<li><a href="http://pandas.pydata.org/pandas-docs/version/0.21/" target="_blank" rel="external">pandas docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
<li><a href="http://pandas.pydata.org/pandas-docs/stable/io.html" target="_blank" rel="external">pandas IO Tools</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pandas Deal NaN Value]]></title>
      <url>http://shopee.ai/2017/12/30/python/numpy-pandas/py-pandas-4-deal-NaN-value/</url>
      <content type="html"><![CDATA[<p>å¤„ç† <code>NaN</code> æ•°æ®, ä¸€äº› ç©º æˆ–è€… <code>NaN</code> æ•°æ®, å¦‚ä½•åˆ é™¤æˆ–è€…å¡«è¡¥è¿™äº› <code>NaN</code> æ•°æ®.</p>
<a id="more"></a>
<h2 id="åˆ›å»ºå«-NaN-çš„çŸ©é˜µ"><a href="#åˆ›å»ºå«-NaN-çš„çŸ©é˜µ" class="headerlink" title="åˆ›å»ºå« NaN çš„çŸ©é˜µ"></a>åˆ›å»ºå« NaN çš„çŸ©é˜µ</h2><p>å»ºç«‹äº†ä¸€ä¸ª6X4çš„çŸ©é˜µæ•°æ®å¹¶ä¸”æŠŠä¸¤ä¸ªä½ç½®ç½®ä¸ºç©º.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">dates = pd.date_range(<span class="string">'20130101'</span>, periods=<span class="number">6</span>)</span><br><span class="line">df = pd.DataFrame(np.arange(<span class="number">24</span>).reshape((<span class="number">6</span>,<span class="number">4</span>)),index=dates, columns=[<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>])</span><br><span class="line">df.iloc[<span class="number">0</span>,<span class="number">1</span>] = np.nan</span><br><span class="line">df.iloc[<span class="number">1</span>,<span class="number">2</span>] = np.nan</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
<pre><code>             A     B     C   D
2013-01-01   0   NaN   2.0   3
2013-01-02   4   5.0   NaN   7
2013-01-03   8   9.0  10.0  11
2013-01-04  12  13.0  14.0  15
2013-01-05  16  17.0  18.0  19
2013-01-06  20  21.0  22.0  23
</code></pre><h2 id="pd-dropna"><a href="#pd-dropna" class="headerlink" title="pd.dropna()"></a>pd.dropna()</h2><p>å¦‚æœæƒ³ç›´æ¥å»æ‰æœ‰ <code>NaN</code> çš„è¡Œæˆ–åˆ—, å¯ä»¥ä½¿ç”¨ <code>dropna</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df1 = df.dropna(</span><br><span class="line">    axis=<span class="number">0</span>,     <span class="comment"># 0: å¯¹è¡Œè¿›è¡Œæ“ä½œ; 1: å¯¹åˆ—è¿›è¡Œæ“ä½œ</span></span><br><span class="line">    how=<span class="string">'any'</span>   <span class="comment"># 'any': åªè¦å­˜åœ¨ NaN å°± drop æ‰; 'all': å¿…é¡»å…¨éƒ¨æ˜¯ NaN æ‰ drop </span></span><br><span class="line">    ) </span><br><span class="line">print(df1)</span><br></pre></td></tr></table></figure>
<pre><code>             A     B     C   D
2013-01-03   8   9.0  10.0  11
2013-01-04  12  13.0  14.0  15
2013-01-05  16  17.0  18.0  19
2013-01-06  20  21.0  22.0  23
</code></pre><h2 id="pd-fillna"><a href="#pd-fillna" class="headerlink" title="pd.fillna()"></a>pd.fillna()</h2><p>å¦‚æœæ˜¯å°† <code>NaN</code> çš„å€¼ç”¨å…¶ä»–å€¼ä»£æ›¿, æ¯”å¦‚ä»£æ›¿æˆ <code>0</code>:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df2 = df.fillna(value=<span class="number">0</span>)</span><br><span class="line">print(df2)</span><br></pre></td></tr></table></figure>
<pre><code>             A     B     C   D
2013-01-01   0   0.0   2.0   3
2013-01-02   4   5.0   0.0   7
2013-01-03   8   9.0  10.0  11
2013-01-04  12  13.0  14.0  15
2013-01-05  16  17.0  18.0  19
2013-01-06  20  21.0  22.0  23
</code></pre><h2 id="pd-isnull"><a href="#pd-isnull" class="headerlink" title="pd.isnull()"></a>pd.isnull()</h2><p>åˆ¤æ–­æ˜¯å¦æœ‰ç¼ºå¤±æ•°æ® <code>NaN</code>, ä¸º <code>True</code> è¡¨ç¤ºç¼ºå¤±æ•°æ®:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df.isnull())</span><br></pre></td></tr></table></figure>
<pre><code>                A      B      C      D
2013-01-01  False   True  False  False
2013-01-02  False  False   True  False
2013-01-03  False  False  False  False
2013-01-04  False  False  False  False
2013-01-05  False  False  False  False
2013-01-06  False  False  False  False
</code></pre><p>æ£€æµ‹åœ¨æ•°æ®ä¸­æ˜¯å¦å­˜åœ¨ <code>NaN</code>, å¦‚æœå­˜åœ¨å°±è¿”å› <code>True</code>:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.any(df.isnull()) == <span class="keyword">True</span>  </span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<pre><code>True
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://pandas.pydata.org/" target="_blank" rel="external">pandas.pydata.org</a></li>
<li><a href="http://pandas.pydata.org/pandas-docs/version/0.21/" target="_blank" rel="external">pandas docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pandas Set Value]]></title>
      <url>http://shopee.ai/2017/12/30/python/numpy-pandas/py-pandas-3-set-value/</url>
      <content type="html"><![CDATA[<p>æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚, ç”¨ pandas è¿›è¡Œæ›´æ”¹æ•°æ®é‡Œé¢çš„å€¼, æˆ–è€…åŠ ä¸Šä¸€äº›ç©ºçš„,æˆ–è€…æœ‰æ•°å€¼çš„åˆ—.</p>
<a id="more"></a>
<h2 id="åˆ›å»ºæ•°æ®"><a href="#åˆ›å»ºæ•°æ®" class="headerlink" title="åˆ›å»ºæ•°æ®"></a>åˆ›å»ºæ•°æ®</h2><p>é¦–å…ˆå»ºç«‹äº†ä¸€ä¸ª 6X4 çš„çŸ©é˜µæ•°æ®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">dates = pd.date_range(<span class="string">'20130101'</span>, periods=<span class="number">6</span>) <span class="comment"># 2013-01-01 ç»“æœä¸€æ ·</span></span><br><span class="line">df = pd.DataFrame(np.arange(<span class="number">24</span>).reshape((<span class="number">6</span>,<span class="number">4</span>)),index=dates, columns=[<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>])</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
<pre><code>             A   B   C   D
2013-01-01   0   1   2   3
2013-01-02   4   5   6   7
2013-01-03   8   9  10  11
2013-01-04  12  13  14  15
2013-01-05  16  17  18  19
2013-01-06  20  21  22  23
</code></pre><h2 id="è®¾ç½®-loc-å’Œ-iloc"><a href="#è®¾ç½®-loc-å’Œ-iloc" class="headerlink" title="è®¾ç½® loc å’Œ iloc"></a>è®¾ç½® loc å’Œ iloc</h2><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç´¢å¼•æˆ–è€…æ ‡ç­¾ç¡®å®šéœ€è¦ä¿®æ”¹å€¼çš„ä½ç½®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df.iloc[<span class="number">2</span>,<span class="number">2</span>] = <span class="number">1111</span></span><br><span class="line">df.loc[<span class="string">'2013-01-01'</span>,<span class="string">'B'</span>] = <span class="number">2222</span></span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
<pre><code>             A     B     C   D
2013-01-01   0  2222     2   3
2013-01-02   4     5     6   7
2013-01-03   8     0  1111  11
2013-01-04  12     0    14  15
2013-01-05  16     0    18  19
2013-01-06  20     0    22  23
</code></pre><h2 id="æ ¹æ®æ¡ä»¶è®¾ç½®"><a href="#æ ¹æ®æ¡ä»¶è®¾ç½®" class="headerlink" title="æ ¹æ®æ¡ä»¶è®¾ç½®"></a>æ ¹æ®æ¡ä»¶è®¾ç½®</h2><p>å¦‚æœç°åœ¨çš„åˆ¤æ–­æ¡ä»¶æ˜¯è¿™æ ·, æˆ‘ä»¬æƒ³è¦æ›´æ”¹Bä¸­çš„æ•°, è€Œæ›´æ”¹çš„ä½ç½®æ˜¯å–å†³äº A çš„. å¯¹äºAå¤§äº4çš„ä½ç½®. æ›´æ”¹Båœ¨ç›¸åº”ä½ç½®ä¸Šçš„æ•°ä¸º0</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df.B[df.A&gt;<span class="number">4</span>] = <span class="number">0</span></span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
<pre><code>             A     B     C   D
2013-01-01   0  2222     2   3
2013-01-02   4     5     6   7
2013-01-03   8     0  1111  11
2013-01-04  12     0    14  15
2013-01-05  16     0    18  19
2013-01-06  20     0    22  23
</code></pre><h2 id="æŒ‰è¡Œæˆ–åˆ—è®¾ç½®"><a href="#æŒ‰è¡Œæˆ–åˆ—è®¾ç½®" class="headerlink" title="æŒ‰è¡Œæˆ–åˆ—è®¾ç½®"></a>æŒ‰è¡Œæˆ–åˆ—è®¾ç½®</h2><p>å¦‚æœå¯¹æ•´åˆ—åšæ‰¹å¤„ç†, åŠ ä¸Šä¸€åˆ— â€˜Fâ€™, å¹¶å°† F åˆ—å…¨æ”¹ä¸º NaN, å¦‚ä¸‹:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df[<span class="string">'F'</span>] = np.nan</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
<pre><code>             A     B     C   D   F
2013-01-01   0  2222     2   3 NaN
2013-01-02   4     5     6   7 NaN
2013-01-03   8     0  1111  11 NaN
2013-01-04  12     0    14  15 NaN
2013-01-05  16     0    18  19 NaN
2013-01-06  20     0    22  23 NaN
</code></pre><h2 id="æ·»åŠ æ•°æ®"><a href="#æ·»åŠ æ•°æ®" class="headerlink" title="æ·»åŠ æ•°æ®"></a>æ·»åŠ æ•°æ®</h2><p>ç”¨ä¸Šé¢çš„æ–¹æ³•ä¹Ÿå¯ä»¥åŠ ä¸Š Series åºåˆ—ï¼ˆä½†æ˜¯é•¿åº¦å¿…é¡»å¯¹é½ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df[<span class="string">'E'</span>] = pd.Series([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], index=pd.date_range(<span class="string">'20130101'</span>,periods=<span class="number">6</span>)) </span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
<pre><code>             A     B     C   D   F  E
2013-01-01   0  2222     2   3 NaN  1
2013-01-02   4     5     6   7 NaN  2
2013-01-03   8     0  1111  11 NaN  3
2013-01-04  12     0    14  15 NaN  4
2013-01-05  16     0    18  19 NaN  5
2013-01-06  20     0    22  23 NaN  6
</code></pre><p>è¿™æ ·æˆ‘ä»¬å¤§æ¦‚å­¦ä¼šäº†å¦‚ä½•å¯¹ <code>DataFrame</code> ä¸­åœ¨è‡ªå·±æƒ³è¦çš„åœ°æ–¹èµ‹å€¼æˆ–è€…å¢åŠ æ•°æ®ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://pandas.pydata.org/" target="_blank" rel="external">pandas.pydata.org</a></li>
<li><a href="http://pandas.pydata.org/pandas-docs/version/0.21/" target="_blank" rel="external">pandas docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pandas Select Data]]></title>
      <url>http://shopee.ai/2017/12/28/python/numpy-pandas/py-pandas-2-select-data/</url>
      <content type="html"><![CDATA[<p>pandas é€‰æ‹©æ•°æ®, é¦–å…ˆæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ª 6X4 çš„çŸ©é˜µæ•°æ®</p>
<a id="more"></a>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">dates = pd.date_range(<span class="string">'20130101'</span>, periods=<span class="number">6</span>)</span><br><span class="line">df = pd.DataFrame(np.arange(<span class="number">24</span>).reshape((<span class="number">6</span>,<span class="number">4</span>)),index=dates, columns=[<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>])</span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
<pre><code>             A   B   C   D
2013-01-01   0   1   2   3
2013-01-02   4   5   6   7
2013-01-03   8   9  10  11
2013-01-04  12  13  14  15
2013-01-05  16  17  18  19
2013-01-06  20  21  22  23
</code></pre><h2 id="ç®€å•çš„ç­›é€‰"><a href="#ç®€å•çš„ç­›é€‰" class="headerlink" title="ç®€å•çš„ç­›é€‰"></a>ç®€å•çš„ç­›é€‰</h2><p>å¦‚æœæˆ‘ä»¬æƒ³é€‰å– DataFrame ä¸­çš„æ•°æ®ï¼Œä¸‹é¢æè¿°äº†ä¸¤ç§é€”å¾„, ä»–ä»¬éƒ½èƒ½è¾¾åˆ°åŒä¸€ä¸ªç›®çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df[<span class="string">'A'</span>])</span><br><span class="line">print(df.A)</span><br></pre></td></tr></table></figure>
<pre><code>2013-01-01     0
2013-01-02     4
2013-01-03     8
2013-01-04    12
2013-01-05    16
2013-01-06    20
Freq: D, Name: A, dtype: int64

2013-01-01     0
2013-01-02     4
2013-01-03     8
2013-01-04    12
2013-01-05    16
2013-01-06    20
Freq: D, Name: A, dtype: int64
</code></pre><p>è®©é€‰æ‹©è·¨è¶Šå¤šè¡Œæˆ–å¤šåˆ—:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df[<span class="number">0</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<pre><code>            A  B   C   D
2013-01-01  0  1   2   3
2013-01-02  4  5   6   7
2013-01-03  8  9  10  11
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df[<span class="number">3</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<pre><code>Empty DataFrame
Columns: [A, B, C, D]
Index: []
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df[<span class="string">'20130102'</span>:<span class="string">'20130104'</span>])</span><br></pre></td></tr></table></figure>
<pre><code>             A   B   C   D
2013-01-02   4   5   6   7
2013-01-03   8   9  10  11
2013-01-04  12  13  14  15
</code></pre><p>å¦‚æœ <code>df[3:3]</code> å°†ä¼šæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ã€‚åè€…é€‰æ‹© <code>20130102</code> åˆ° <code>20130104</code> æ ‡ç­¾ä¹‹é—´çš„æ•°æ®ï¼Œå¹¶ä¸”åŒ…æ‹¬è¿™ä¸¤ä¸ªæ ‡ç­¾</p>
<h2 id="æ ¹æ®æ ‡ç­¾-loc"><a href="#æ ¹æ®æ ‡ç­¾-loc" class="headerlink" title="æ ¹æ®æ ‡ç­¾ loc"></a>æ ¹æ®æ ‡ç­¾ loc</h2><p>å¯ä»¥ä½¿ç”¨æ ‡ç­¾æ¥é€‰æ‹©æ•°æ® <code>loc</code>, æœ¬ä¾‹å­ä¸»è¦é€šè¿‡æ ‡ç­¾åå­—é€‰æ‹©æŸä¸€è¡Œæ•°æ®ï¼Œ æˆ–è€…é€šè¿‡é€‰æ‹©æŸè¡Œæˆ–è€…æ‰€æœ‰è¡Œï¼ˆ<code>:</code>ä»£è¡¨æ‰€æœ‰è¡Œï¼‰ç„¶åé€‰å…¶ä¸­æŸä¸€åˆ—æˆ–å‡ åˆ—æ•°æ® :</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df.loc[<span class="string">'20130102'</span>])</span><br></pre></td></tr></table></figure>
<pre><code>A    4
B    5
C    6
D    7
Name: 2013-01-02 00:00:00, dtype: int64
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df.loc[:,[<span class="string">'A'</span>,<span class="string">'B'</span>]])</span><br></pre></td></tr></table></figure>
<pre><code>             A   B
2013-01-01   0   1
2013-01-02   4   5
2013-01-03   8   9
2013-01-04  12  13
2013-01-05  16  17
2013-01-06  20  21
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df.loc[<span class="string">'20130102'</span>,[<span class="string">'A'</span>,<span class="string">'B'</span>]])</span><br></pre></td></tr></table></figure>
<pre><code>A    4
B    5
Name: 2013-01-02 00:00:00, dtype: int64
</code></pre><h2 id="æ ¹æ®åºåˆ—-iloc"><a href="#æ ¹æ®åºåˆ—-iloc" class="headerlink" title="æ ¹æ®åºåˆ— iloc"></a>æ ¹æ®åºåˆ— iloc</h2><p>å¯ä»¥é‡‡ç”¨ä½ç½®è¿›è¡Œé€‰æ‹© <code>iloc</code>, åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½ç½®é€‰æ‹©åœ¨ä¸åŒæƒ…å†µä¸‹æ‰€éœ€è¦çš„æ•°æ®ä¾‹å¦‚é€‰æŸä¸€ä¸ªï¼Œè¿ç»­é€‰æˆ–è€…è·¨è¡Œé€‰ç­‰æ“ä½œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df.iloc[<span class="number">3</span>,<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<pre><code>13
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df.iloc[<span class="number">3</span>:<span class="number">5</span>,<span class="number">1</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<pre><code>             B   C
2013-01-04  13  14
2013-01-05  17  18
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df.iloc[[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>],<span class="number">1</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<pre><code>             B   C
2013-01-02   5   6
2013-01-04  13  14
2013-01-06  21  22
</code></pre><p>åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½ç½®é€‰æ‹©åœ¨ä¸åŒæƒ…å†µä¸‹æ‰€éœ€è¦çš„æ•°æ®, ä¾‹å¦‚é€‰æŸä¸€ä¸ªï¼Œè¿ç»­é€‰æˆ–è€…è·¨è¡Œé€‰ç­‰æ“ä½œã€‚</p>
<h2 id="æ ¹æ®æ··åˆä¸¤ç§-ix"><a href="#æ ¹æ®æ··åˆä¸¤ç§-ix" class="headerlink" title="æ ¹æ®æ··åˆä¸¤ç§ ix"></a>æ ¹æ®æ··åˆä¸¤ç§ ix</h2><p>å½“ç„¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ··åˆé€‰æ‹© <code>ix</code>, å…¶ä¸­é€‰æ‹©â€™Aâ€™å’Œâ€™Câ€™çš„ä¸¤åˆ—ï¼Œå¹¶é€‰æ‹©å‰ä¸‰è¡Œçš„æ•°æ®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df.ix[:<span class="number">3</span>,[<span class="string">'A'</span>,<span class="string">'C'</span>]])</span><br></pre></td></tr></table></figure>
<pre><code>            A   C
2013-01-01  0   2
2013-01-02  4   6
2013-01-03  8  10


/Users/blair/.pyenv/versions/anaconda3/lib/python3.6/site-packages/ipykernel_launcher.py:1: DeprecationWarning: 
.ix is deprecated. Please use
.loc for label based indexing or
.iloc for positional indexing

See the documentation here:
http://pandas.pydata.org/pandas-docs/stable/indexing.html#ix-indexer-is-deprecated
  &quot;&quot;&quot;Entry point for launching an IPython kernel.
</code></pre><h2 id="é€šè¿‡åˆ¤æ–­çš„ç­›é€‰"><a href="#é€šè¿‡åˆ¤æ–­çš„ç­›é€‰" class="headerlink" title="é€šè¿‡åˆ¤æ–­çš„ç­›é€‰"></a>é€šè¿‡åˆ¤æ–­çš„ç­›é€‰</h2><p>æœ€åæˆ‘ä»¬å¯ä»¥é‡‡ç”¨åˆ¤æ–­æŒ‡ä»¤ (Boolean indexing) è¿›è¡Œé€‰æ‹©. æˆ‘ä»¬å¯ä»¥çº¦æŸæŸé¡¹æ¡ä»¶ç„¶åé€‰æ‹©å‡ºå½“å‰æ‰€æœ‰æ•°æ®.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df[df.A&gt;<span class="number">8</span>])</span><br><span class="line">df.A&gt;<span class="number">8</span></span><br></pre></td></tr></table></figure>
<pre><code>             A   B   C   D
2013-01-04  12  13  14  15
2013-01-05  16  17  18  19
2013-01-06  20  21  22  23

2013-01-01    False
2013-01-02    False
2013-01-03    False
2013-01-04     True
2013-01-05     True
2013-01-06     True
Freq: D, Name: A, dtype: bool
</code></pre><p>ä¸‹èŠ‚æˆ‘ä»¬å°†ä¼šè®²åˆ°Pandasä¸­å¦‚ä½•è®¾ç½®å€¼ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://pandas.pydata.org/" target="_blank" rel="external">pandas.pydata.org</a></li>
<li><a href="http://pandas.pydata.org/pandas-docs/version/0.21/" target="_blank" rel="external">pandas docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pandas Basic Intro]]></title>
      <url>http://shopee.ai/2017/12/27/python/numpy-pandas/py-pandas-1-intro/</url>
      <content type="html"><![CDATA[<p>å¦‚æœç”¨åˆ—è¡¨å’Œå­—å…¸æ¥ä½œæ¯”è¾ƒ, é‚£ä¹ˆå¯ä»¥è¯´ Numpy æ˜¯åˆ—è¡¨å½¢å¼çš„ï¼Œæ²¡æœ‰æ•°å€¼æ ‡ç­¾ï¼Œè€Œ Pandas å°±æ˜¯å­—å…¸å½¢å¼</p>
<a id="more"></a>
<p>Pandasæ˜¯åŸºäºNumpyæ„å»ºçš„ï¼Œè®©Numpyä¸ºä¸­å¿ƒçš„åº”ç”¨å˜å¾—æ›´åŠ ç®€å•ã€‚</p>
<p>è¦ä½¿ç”¨pandasï¼Œé¦–å…ˆéœ€è¦äº†è§£ä»–ä¸»è¦ä¸¤ä¸ªæ•°æ®ç»“æ„ï¼šSeries å’Œ DataFrameã€‚</p>
<h2 id="Series"><a href="#Series" class="headerlink" title="Series"></a>Series</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">s = pd.Series([<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>,np.nan,<span class="number">44</span>,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure>
<pre><code>0     1.0
1     3.0
2     6.0
3     NaN
4    44.0
5     1.0
dtype: float64
</code></pre><p><code>Series</code> çš„å­—ç¬¦ä¸²è¡¨ç°å½¢å¼ä¸ºï¼šç´¢å¼•åœ¨å·¦è¾¹ï¼Œå€¼åœ¨å³è¾¹ã€‚<br>ç”±äºæˆ‘ä»¬æ²¡æœ‰ä¸ºæ•°æ®æŒ‡å®šç´¢å¼•ã€‚äºæ˜¯ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª0åˆ°N-1ï¼ˆNä¸ºé•¿åº¦ï¼‰çš„æ•´æ•°å‹ç´¢å¼•ã€‚</p>
<h2 id="DataFrame-çŸ©é˜µåˆ›å»º"><a href="#DataFrame-çŸ©é˜µåˆ›å»º" class="headerlink" title="DataFrame çŸ©é˜µåˆ›å»º"></a>DataFrame çŸ©é˜µåˆ›å»º</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dates = pd.date_range(<span class="string">'20160101'</span>,periods=<span class="number">6</span>)</span><br><span class="line">df = pd.DataFrame(np.random.randn(<span class="number">6</span>,<span class="number">4</span>),index=dates,columns=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>])</span><br><span class="line"></span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
<pre><code>                   a         b         c         d
2016-01-01 -0.186992  0.228857  0.572464 -0.842974
2016-01-02 -0.689623 -1.491299  0.647805  0.819846
2016-01-03 -1.294425  0.138935  1.729793 -1.270880
2016-01-04  0.088744  0.745256  0.380425  0.048070
2016-01-05  0.003135 -2.240388  0.188038 -0.069044
2016-01-06 -1.358217 -0.820133  1.606467 -1.622589
</code></pre><p><code>DataFrame</code> æ˜¯ä¸€ä¸ªè¡¨æ ¼å‹çš„æ•°æ®ç»“æ„ï¼Œå®ƒåŒ…å«æœ‰ä¸€ç»„æœ‰åºçš„åˆ—ï¼Œæ¯åˆ—å¯ä»¥æ˜¯ä¸åŒçš„å€¼ç±»å‹ï¼ˆæ•°å€¼ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ç­‰ï¼‰ã€‚<br><code>DataFrame</code> æ—¢æœ‰è¡Œç´¢å¼•ä¹Ÿæœ‰åˆ—ç´¢å¼•ï¼Œ å®ƒå¯ä»¥è¢«çœ‹åšç”± <code>Series</code> ç»„æˆçš„å¤§å­—å…¸ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ ¹æ®æ¯ä¸€ä¸ªä¸åŒçš„ç´¢å¼•æ¥æŒ‘é€‰æ•°æ®, æ¯”å¦‚æŒ‘é€‰ <code>b</code> çš„å…ƒç´ :</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df[<span class="string">'b'</span>])</span><br></pre></td></tr></table></figure>
<pre><code>2016-01-01    0.228857
2016-01-02   -1.491299
2016-01-03    0.138935
2016-01-04    0.745256
2016-01-05   -2.240388
2016-01-06   -0.820133
Freq: D, Name: b, dtype: float64
</code></pre><p>æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ç»„æ²¡æœ‰ç»™å®šè¡Œæ ‡ç­¾å’Œåˆ—æ ‡ç­¾çš„æ•°æ® <code>df1</code>:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df1 = pd.DataFrame(np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>,<span class="number">4</span>)))</span><br><span class="line">print(df1)</span><br></pre></td></tr></table></figure>
<pre><code>   0  1   2   3
0  0  1   2   3
1  4  5   6   7
2  8  9  10  11
</code></pre><p>è¿™æ ·,ä»–å°±ä¼šé‡‡å–é»˜è®¤çš„ä»0å¼€å§‹ index.</p>
<h2 id="DataFrame-å­—å…¸åˆ›å»º"><a href="#DataFrame-å­—å…¸åˆ›å»º" class="headerlink" title="DataFrame å­—å…¸åˆ›å»º"></a>DataFrame å­—å…¸åˆ›å»º</h2><p>è¿˜æœ‰ä¸€ç§ç”Ÿæˆ <code>df</code> çš„æ–¹æ³•, å¦‚ä¸‹ <code>df2</code>:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df2 = pd.DataFrame(&#123;<span class="string">'A'</span> : [<span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">5</span>],</span><br><span class="line">                    <span class="string">'B'</span> : pd.Timestamp(<span class="string">'20130102'</span>),</span><br><span class="line">                    <span class="string">'C'</span> : pd.Series(<span class="number">1</span>,index=list(range(<span class="number">4</span>)),dtype=<span class="string">'float32'</span>),</span><br><span class="line">                    <span class="string">'D'</span> : np.array([<span class="number">3</span>] * <span class="number">4</span>,dtype=<span class="string">'int32'</span>),</span><br><span class="line">                    <span class="string">'E'</span> : pd.Categorical([<span class="string">"test"</span>,<span class="string">"train"</span>,<span class="string">"test"</span>,<span class="string">"train"</span>]),</span><br><span class="line">                    <span class="string">'F'</span> : <span class="string">'foo'</span>&#125;)</span><br><span class="line">                    </span><br><span class="line">print(df2)</span><br></pre></td></tr></table></figure>
<pre><code>   A          B    C  D      E    F
0  1 2013-01-02  1.0  3   test  foo
1  3 2013-01-02  1.0  3  train  foo
2  7 2013-01-02  1.0  3   test  foo
3  5 2013-01-02  1.0  3  train  foo
</code></pre><p>è¿™ç§æ–¹æ³•èƒ½å¯¹æ¯ä¸€åˆ—çš„æ•°æ®è¿›è¡Œç‰¹æ®Šå¯¹å¾…. å¦‚æœæƒ³è¦æŸ¥çœ‹æ•°æ®ä¸­çš„ç±»å‹, æˆ‘ä»¬å¯ä»¥ç”¨ <code>dtype</code> è¿™ä¸ªå±æ€§:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df2.dtypes)</span><br></pre></td></tr></table></figure>
<pre><code>A             int64
B    datetime64[ns]
C           float32
D             int32
E          category
F            object
dtype: object
</code></pre><p>å¦‚æœæƒ³çœ‹å¯¹åˆ—çš„åºå·:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df2.index)</span><br></pre></td></tr></table></figure>
<pre><code>Int64Index([0, 1, 2, 3], dtype=&apos;int64&apos;)
</code></pre><p>åŒæ ·, æ¯ç§æ•°æ®çš„åç§°ä¹Ÿèƒ½çœ‹åˆ°:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df2.columns)</span><br></pre></td></tr></table></figure>
<pre><code>Index([&apos;A&apos;, &apos;B&apos;, &apos;C&apos;, &apos;D&apos;, &apos;E&apos;, &apos;F&apos;], dtype=&apos;object&apos;)
</code></pre><p>å¦‚æœåªæƒ³çœ‹æ‰€æœ‰ <code>df2</code> çš„å€¼:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df2.values)</span><br></pre></td></tr></table></figure>
<pre><code>[[1 Timestamp(&apos;2013-01-02 00:00:00&apos;) 1.0 3 &apos;test&apos; &apos;foo&apos;]
 [3 Timestamp(&apos;2013-01-02 00:00:00&apos;) 1.0 3 &apos;train&apos; &apos;foo&apos;]
 [7 Timestamp(&apos;2013-01-02 00:00:00&apos;) 1.0 3 &apos;test&apos; &apos;foo&apos;]
 [5 Timestamp(&apos;2013-01-02 00:00:00&apos;) 1.0 3 &apos;train&apos; &apos;foo&apos;]]
</code></pre><p>æƒ³çŸ¥é“æ•°æ®çš„æ€»ç»“, å¯ä»¥ç”¨ <code>describe()</code>:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">df2.describe()</span><br></pre></td></tr></table></figure>
<pre><code>    A    C    D
count    4.000000    4.0    4.0
mean    4.000000    1.0    3.0
std    2.581989    0.0    0.0
min    1.000000    1.0    3.0
25%    2.500000    1.0    3.0
50%    4.000000    1.0    3.0
75%    5.500000    1.0    3.0
max    7.000000    1.0    3.0
</code></pre><p>å¦‚æœæƒ³ç¿»è½¬æ•°æ®, <code>transpose</code>:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df2.T)</span><br></pre></td></tr></table></figure>
<pre><code>                     0                    1                    2  \
A                    1                    3                    7   
B  2013-01-02 00:00:00  2013-01-02 00:00:00  2013-01-02 00:00:00   
C                    1                    1                    1   
D                    3                    3                    3   
E                 test                train                 test   
F                  foo                  foo                  foo   

                     3  
A                    5  
B  2013-01-02 00:00:00  
C                    1  
D                    3  
E                train  
F                  foo  
</code></pre><p>å¦‚æœæƒ³å¯¹æ•°æ®çš„ <code>index</code> è¿›è¡Œæ’åºå¹¶è¾“å‡º:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df2.sort_index(axis=<span class="number">1</span>, ascending=<span class="keyword">False</span>)) <span class="comment"># å¯¹åˆ—åç§°è¿›è¡Œæ’åºï¼Œç´¢å¼•åï¼Œå€’æ’åº</span></span><br><span class="line"></span><br><span class="line">print(df2.sort_index(axis=<span class="number">0</span>, ascending=<span class="keyword">False</span>)) <span class="comment"># å¯¹åˆ—åç§°è¿›è¡Œæ’åºï¼Œç´¢å¼•åï¼Œå€’æ’åº</span></span><br></pre></td></tr></table></figure>
<pre><code>     F      E  D    C          B  A
0  foo   test  3  1.0 2013-01-02  1
1  foo  train  3  1.0 2013-01-02  3
2  foo   test  3  1.0 2013-01-02  7
3  foo  train  3  1.0 2013-01-02  5
   A          B    C  D      E    F
3  5 2013-01-02  1.0  3  train  foo
2  7 2013-01-02  1.0  3   test  foo
1  3 2013-01-02  1.0  3  train  foo
0  1 2013-01-02  1.0  3   test  foo
</code></pre><p>å¦‚æœæ˜¯å¯¹æ•°æ® å€¼ æ’åºè¾“å‡º:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(df2.sort_values(by=<span class="string">'E'</span>))</span><br></pre></td></tr></table></figure>
<pre><code>   A          B    C  D      E    F
0  1 2013-01-02  1.0  3   test  foo
2  7 2013-01-02  1.0  3   test  foo
1  3 2013-01-02  1.0  3  train  foo
3  5 2013-01-02  1.0  3  train  foo
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://pandas.pydata.org/" target="_blank" rel="external">pandas.pydata.org</a></li>
<li><a href="http://pandas.pydata.org/pandas-docs/version/0.21/" target="_blank" rel="external">pandas docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Numpy copy & deep copy]]></title>
      <url>http://shopee.ai/2017/12/27/python/numpy-pandas/py-numpy-8-copy-deep-copy/</url>
      <content type="html"><![CDATA[<p>numpy copy &amp; deep copy</p>
<a id="more"></a>
<h2 id="çš„èµ‹å€¼æ–¹å¼ä¼šå¸¦æœ‰å…³è”æ€§"><a href="#çš„èµ‹å€¼æ–¹å¼ä¼šå¸¦æœ‰å…³è”æ€§" class="headerlink" title="= çš„èµ‹å€¼æ–¹å¼ä¼šå¸¦æœ‰å…³è”æ€§"></a>= çš„èµ‹å€¼æ–¹å¼ä¼šå¸¦æœ‰å…³è”æ€§</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">a = np.arange(<span class="number">4</span>)</span><br><span class="line"><span class="comment"># array([0, 1, 2, 3])</span></span><br><span class="line"></span><br><span class="line">b = a</span><br><span class="line">c = a</span><br><span class="line">d = b</span><br></pre></td></tr></table></figure>
<p>æ”¹å˜<code>a</code>çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œ<code>b</code>ã€<code>c</code>ã€<code>d</code>çš„ç¬¬ä¸€ä¸ªå€¼ä¹Ÿä¼šåŒæ—¶æ”¹å˜ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a[<span class="number">0</span>] = <span class="number">11</span></span><br><span class="line">print(a)</span><br><span class="line"><span class="comment"># array([11,  1,  2,  3])</span></span><br></pre></td></tr></table></figure>
<pre><code>[11  1  2  3]
</code></pre><p>ç¡®è®¤<code>b</code>ã€<code>c</code>ã€<code>d</code>æ˜¯å¦ä¸<code>a</code>ç›¸åŒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b <span class="keyword">is</span> a  <span class="comment"># True</span></span><br><span class="line">c <span class="keyword">is</span> a  <span class="comment"># True</span></span><br><span class="line">d <span class="keyword">is</span> a  <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h2 id="copy-çš„èµ‹å€¼æ–¹å¼æ²¡æœ‰å…³è”æ€§"><a href="#copy-çš„èµ‹å€¼æ–¹å¼æ²¡æœ‰å…³è”æ€§" class="headerlink" title="copy() çš„èµ‹å€¼æ–¹å¼æ²¡æœ‰å…³è”æ€§"></a>copy() çš„èµ‹å€¼æ–¹å¼æ²¡æœ‰å…³è”æ€§</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">b = a.copy()    <span class="comment"># deep copy</span></span><br><span class="line">print(b)        <span class="comment"># array([11, 22, 33,  3])</span></span><br><span class="line">a[<span class="number">3</span>] = <span class="number">44</span></span><br><span class="line">print(a)        <span class="comment"># array([11, 22, 33, 44])</span></span><br><span class="line">print(b)        <span class="comment"># array([11, 22, 33,  3])</span></span><br></pre></td></tr></table></figure>
<pre><code>[11  1  2  3]
[11  1  2 44]
[11  1  2  3]
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.numpy.org/" target="_blank" rel="external">numpy.org</a></li>
<li><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">numpy docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Numpy Array Split]]></title>
      <url>http://shopee.ai/2017/12/27/python/numpy-pandas/py-numpy-7-Split/</url>
      <content type="html"><![CDATA[<p>Numpy array æ¨ªå‘åˆ†å‰²ã€çºµå‘åˆ†å‰²ã€ç­‰é‡åˆ†å‰²ã€éç­‰é‡åˆ†å‰²</p>
<a id="more"></a>
<h2 id="åˆ›å»ºæ•°æ®"><a href="#åˆ›å»ºæ•°æ®" class="headerlink" title="åˆ›å»ºæ•°æ®"></a>åˆ›å»ºæ•°æ®</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">A = np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span><br><span class="line">array([[ 0,  1,  2,  3],</span><br><span class="line">    [ 4,  5,  6,  7],</span><br><span class="line">    [ 8,  9, 10, 11]])</span><br><span class="line">"""</span></span><br><span class="line"></span><br><span class="line">print(A)</span><br></pre></td></tr></table></figure>
<pre><code>[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
</code></pre><h2 id="çºµå‘åˆ†å‰²"><a href="#çºµå‘åˆ†å‰²" class="headerlink" title="çºµå‘åˆ†å‰²"></a>çºµå‘åˆ†å‰²</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(np.split(A, <span class="number">2</span>, axis=<span class="number">1</span>))</span><br><span class="line"><span class="string">"""</span><br><span class="line">[array([[0, 1],</span><br><span class="line">        [4, 5],</span><br><span class="line">        [8, 9]]), array([[ 2,  3],</span><br><span class="line">        [ 6,  7],</span><br><span class="line">        [10, 11]])]</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¨ªå‘åˆ†å‰²"><a href="#æ¨ªå‘åˆ†å‰²" class="headerlink" title="æ¨ªå‘åˆ†å‰²"></a>æ¨ªå‘åˆ†å‰²</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(np.split(A, <span class="number">3</span>, axis=<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [array([[0, 1, 2, 3]]), array([[4, 5, 6, 7]]), array([[ 8,  9, 10, 11]])]</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¸ç­‰é‡çš„åˆ†å‰²"><a href="#ä¸ç­‰é‡çš„åˆ†å‰²" class="headerlink" title="ä¸ç­‰é‡çš„åˆ†å‰²"></a>ä¸ç­‰é‡çš„åˆ†å‰²</h2><p>åœ¨æœºå™¨å­¦ä¹ æ—¶ç»å¸¸ä¼šéœ€è¦å°†æ•°æ®åšä¸ç­‰é‡çš„åˆ†å‰²ï¼Œå› æ­¤è§£å†³åŠæ³•ä¸º<code>np.array_split()</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(np.array_split(A, <span class="number">3</span>, axis=<span class="number">1</span>))</span><br><span class="line"><span class="string">"""</span><br><span class="line">[array([[0, 1],</span><br><span class="line">        [4, 5],</span><br><span class="line">        [8, 9]]), array([[ 2],</span><br><span class="line">        [ 6],</span><br><span class="line">        [10]]), array([[ 3],</span><br><span class="line">        [ 7],</span><br><span class="line">        [11]])]</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<p>æˆåŠŸå°†Arrayä¸ç­‰é‡åˆ†å‰²!</p>
<h2 id="å…¶ä»–çš„åˆ†å‰²æ–¹å¼"><a href="#å…¶ä»–çš„åˆ†å‰²æ–¹å¼" class="headerlink" title="å…¶ä»–çš„åˆ†å‰²æ–¹å¼"></a>å…¶ä»–çš„åˆ†å‰²æ–¹å¼</h2><p>åœ¨Numpyé‡Œè¿˜æœ‰<code>np.vsplit()</code>ä¸æ¨ª<code>np.hsplit()</code>æ–¹å¼å¯ç”¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(np.vsplit(A, <span class="number">3</span>)) <span class="comment">#ç­‰äº print(np.split(A, 3, axis=0))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [array([[0, 1, 2, 3]]), array([[4, 5, 6, 7]]), array([[ 8,  9, 10, 11]])]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(np.hsplit(A, <span class="number">2</span>)) <span class="comment">#ç­‰äº print(np.split(A, 2, axis=1))</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">[array([[0, 1],</span><br><span class="line">       [4, 5],</span><br><span class="line">       [8, 9]]), array([[ 2,  3],</span><br><span class="line">        [ 6,  7],</span><br><span class="line">        [10, 11]])]</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.numpy.org/" target="_blank" rel="external">numpy.org</a></li>
<li><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">numpy docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Numpy Array Merge]]></title>
      <url>http://shopee.ai/2017/12/26/python/numpy-pandas/py-numpy-6-Array-Merge/</url>
      <content type="html"><![CDATA[<p>å¯¹äºä¸€ä¸ª<code>array</code>çš„åˆå¹¶ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°æŒ‰è¡Œã€æŒ‰åˆ—ç­‰å¤šç§æ–¹å¼è¿›è¡Œåˆå¹¶</p>
<a id="more"></a>
<h2 id="np-vstack"><a href="#np-vstack" class="headerlink" title="np.vstack()"></a>np.vstack()</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">A = np.array([<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>])</span><br><span class="line">B = np.array([<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>])</span><br><span class="line">         </span><br><span class="line">print(np.vstack((A,B)))    <span class="comment"># vertical stack</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span><br><span class="line">[[1,1,1]</span><br><span class="line"> [2,2,2]]</span><br><span class="line">"""</span></span><br><span class="line"></span><br><span class="line">np.vstack((A,B))</span><br></pre></td></tr></table></figure>
<pre><code>[[1 1 1]
 [2 2 2]]

array([[1, 1, 1],
       [2, 2, 2]])
</code></pre><p>vertical stack æœ¬èº«å±äºä¸€ç§ä¸Šä¸‹åˆå¹¶ï¼Œå³å¯¹æ‹¬å·ä¸­çš„ä¸¤ä¸ªæ•´ä½“è¿›è¡Œå¯¹åº”æ“ä½œã€‚æ­¤æ—¶æˆ‘ä»¬å¯¹ç»„åˆè€Œæˆçš„çŸ©é˜µè¿›è¡Œå±æ€§æ¢ç©¶ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">C = np.vstack((A,B))      </span><br><span class="line">print(A.shape,C.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># (3,) (2,3) # A æ˜¯åºåˆ—, åºåˆ—åˆå¹¶å C ä¸ºçŸ©é˜µ</span></span><br></pre></td></tr></table></figure>
<pre><code>(3,) (2, 3)
</code></pre><p>åˆ©ç”¨shapeå‡½æ•°å¯ä»¥è®©æˆ‘ä»¬å¾ˆå®¹æ˜“åœ°çŸ¥é“Aå’ŒCçš„å±æ€§ï¼Œä»æ‰“å°å‡ºçš„ç»“æœæ¥çœ‹ï¼ŒAä»…ä»…æ˜¯ä¸€ä¸ªæ‹¥æœ‰3é¡¹å…ƒç´ çš„æ•°ç»„ï¼ˆæ•°åˆ—ï¼‰ï¼Œè€Œåˆå¹¶åå¾—åˆ°çš„Cæ˜¯ä¸€ä¸ª2è¡Œ3åˆ—çš„çŸ©é˜µã€‚</p>
<h2 id="np-hstack-å·¦å³åˆå¹¶ï¼š"><a href="#np-hstack-å·¦å³åˆå¹¶ï¼š" class="headerlink" title="np.hstack() å·¦å³åˆå¹¶ï¼š"></a>np.hstack() å·¦å³åˆå¹¶ï¼š</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">D = np.hstack((A,B))       <span class="comment"># horizontal stack</span></span><br><span class="line"></span><br><span class="line">print(D)</span><br><span class="line"><span class="comment"># [1,1,1,2,2,2]</span></span><br><span class="line"></span><br><span class="line">print(A.shape,D.shape)</span><br><span class="line"><span class="comment"># (3,) (6,)</span></span><br></pre></td></tr></table></figure>
<pre><code>[1 1 1 2 2 2]
(3,) (6,)
</code></pre><p>ä¸èƒ½ç”¨ A.T è¿™æ ·çš„æ–¹æ³•ï¼Œå°†ä¸€ä¸ªåºåˆ—å˜ä¸ºçŸ©é˜µ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(A.T)</span><br><span class="line">print(A.T.shape)</span><br></pre></td></tr></table></figure>
<pre><code>[1 1 1]
(3,)
</code></pre><p>é€šè¿‡æ‰“å°å‡ºçš„ç»“æœå¯ä»¥çœ‹å‡ºï¼šDæœ¬èº«æ¥æºäºAï¼ŒBä¸¤ä¸ªæ•°åˆ—çš„å·¦å³åˆå¹¶ï¼Œè€Œä¸”æ–°ç”Ÿæˆçš„Dæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå«æœ‰6é¡¹å…ƒç´ çš„åºåˆ—ã€‚</p>
<h2 id="np-newaxis"><a href="#np-newaxis" class="headerlink" title="np.newaxis()"></a>np.newaxis()</h2><p>å¦‚æœé¢å¯¹å¦‚åŒå‰æ–‡æ‰€è¿°çš„Aåºåˆ—ï¼Œ è½¬ç½®æ“ä½œä¾¿å¾ˆæœ‰å¯èƒ½æ— æ³•å¯¹å…¶è¿›è¡Œè½¬ç½®ï¼ˆå› ä¸ºAå¹¶ä¸æ˜¯çŸ©é˜µçš„å±æ€§ï¼‰ï¼Œæ­¤æ—¶å°±éœ€è¦æˆ‘ä»¬å€ŸåŠ©å…¶ä»–çš„å‡½æ•°æ“ä½œè¿›è¡Œè½¬ç½®ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(A[np.newaxis,:])</span><br><span class="line"><span class="comment"># [[1 1 1]]</span></span><br><span class="line"></span><br><span class="line">print(A[np.newaxis,:].shape)</span><br><span class="line"><span class="comment"># (1,3)</span></span><br><span class="line"></span><br><span class="line">print(A[:,np.newaxis])</span><br><span class="line"><span class="string">"""</span><br><span class="line">[[1]</span><br><span class="line">[1]</span><br><span class="line">[1]]</span><br><span class="line">"""</span></span><br><span class="line"></span><br><span class="line">print(A[:,np.newaxis].shape)</span><br><span class="line"><span class="comment"># (3,1)</span></span><br></pre></td></tr></table></figure>
<pre><code>[[1 1 1]]
(1, 3)
[[1]
 [1]
 [1]]
(3, 1)
</code></pre><p>æ­¤æ—¶æˆ‘ä»¬ä¾¿å°†å…·æœ‰3ä¸ªå…ƒç´ çš„<code>array</code>è½¬æ¢ä¸ºäº†1è¡Œ3åˆ—ä»¥åŠ3è¡Œ1åˆ—çš„çŸ©é˜µäº†ã€‚</p>
<h2 id="ç»¼åˆæ€»ç»“"><a href="#ç»¼åˆæ€»ç»“" class="headerlink" title="ç»¼åˆæ€»ç»“"></a>ç»¼åˆæ€»ç»“</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">A = np.array([<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>])[:,np.newaxis]</span><br><span class="line">B = np.array([<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>])[:,np.newaxis]</span><br><span class="line">         </span><br><span class="line">C = np.vstack((A,B))   <span class="comment"># vertical stack</span></span><br><span class="line">D = np.hstack((A,B))   <span class="comment"># horizontal stack</span></span><br><span class="line"></span><br><span class="line">print(D)</span><br><span class="line"><span class="string">"""</span><br><span class="line">[[1 2]</span><br><span class="line">[1 2]</span><br><span class="line">[1 2]]</span><br><span class="line">"""</span></span><br><span class="line"></span><br><span class="line">print(A.shape,D.shape)</span><br><span class="line"><span class="comment"># (3,1) (3,2)</span></span><br></pre></td></tr></table></figure>
<pre><code>[[1 2]
 [1 2]
 [1 2]]
(3, 1) (3, 2)
</code></pre><h2 id="np-concatenate"><a href="#np-concatenate" class="headerlink" title="np.concatenate()"></a>np.concatenate()</h2><p>å½“ä½ çš„åˆå¹¶æ“ä½œéœ€è¦é’ˆå¯¹å¤šä¸ªçŸ©é˜µæˆ–åºåˆ—æ—¶ï¼Œå€ŸåŠ©concatenateå‡½æ•°å¯èƒ½ä¼šè®©ä½ ä½¿ç”¨èµ·æ¥æ¯”å‰è¿°çš„å‡½æ•°æ›´åŠ æ–¹ä¾¿ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">C = np.concatenate((A,B,B,A),axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">print(C)</span><br><span class="line"><span class="string">"""</span><br><span class="line">array([[1],</span><br><span class="line">       [1],</span><br><span class="line">       [1],</span><br><span class="line">       [2],</span><br><span class="line">       [2],</span><br><span class="line">       [2],</span><br><span class="line">       [2],</span><br><span class="line">       [2],</span><br><span class="line">       [2],</span><br><span class="line">       [1],</span><br><span class="line">       [1],</span><br><span class="line">       [1]])</span><br><span class="line">"""</span></span><br><span class="line"></span><br><span class="line">D = np.concatenate((A,B,B,A),axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">print(D)</span><br><span class="line"><span class="string">"""</span><br><span class="line">array([[1, 2, 2, 1],</span><br><span class="line">       [1, 2, 2, 1],</span><br><span class="line">       [1, 2, 2, 1]])</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<pre><code>[[1 2 2 1]
 [1 2 2 1]
 [1 2 2 1]]
</code></pre><p><code>axis</code> å‚æ•°å¾ˆå¥½çš„æ§åˆ¶äº†çŸ©é˜µçš„çºµå‘æˆ–æ˜¯æ¨ªå‘æ‰“å°ï¼Œç›¸æ¯”è¾ƒ <code>vstack</code> å’Œ <code>hstack</code> å‡½æ•°æ˜¾å¾—æ›´åŠ æ–¹ä¾¿ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.numpy.org/" target="_blank" rel="external">numpy.org</a></li>
<li><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">numpy docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Numpy Index]]></title>
      <url>http://shopee.ai/2017/12/26/python/numpy-pandas/py-numpy-5-Index/</url>
      <content type="html"><![CDATA[<p>åœ¨å…ƒç´ åˆ—è¡¨æˆ–è€…æ•°ç»„ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚åŒ <code>a[2]</code> ä¸€æ ·çš„è¡¨ç¤ºæ–¹æ³•ï¼ŒåŒæ ·çš„ï¼ŒNumpyä¸­ä¹Ÿæœ‰ç›¸åº”çš„è¡¨ç¤ºæ–¹æ³•</p>
<a id="more"></a>
<h2 id="ä¸€ç»´ç´¢å¼•"><a href="#ä¸€ç»´ç´¢å¼•" class="headerlink" title="ä¸€ç»´ç´¢å¼•"></a>ä¸€ç»´ç´¢å¼•</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">A = np.arange(<span class="number">3</span>,<span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># array([3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14])</span></span><br><span class="line">         </span><br><span class="line">print(A[<span class="number">3</span>])    <span class="comment"># 6</span></span><br></pre></td></tr></table></figure>
<pre><code>6
</code></pre><p>è®©æˆ‘ä»¬å°†çŸ©é˜µè½¬æ¢ä¸ºäºŒç»´çš„ï¼Œæ­¤æ—¶è¿›è¡ŒåŒæ ·çš„æ“ä½œï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A = np.arange(<span class="number">3</span>,<span class="number">15</span>).reshape((<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="string">"""</span><br><span class="line">array([[ 3,  4,  5,  6]</span><br><span class="line">       [ 7,  8,  9, 10]</span><br><span class="line">       [11, 12, 13, 14]])</span><br><span class="line">"""</span></span><br><span class="line">         </span><br><span class="line">print(A[<span class="number">2</span>])         </span><br><span class="line"><span class="comment"># [11 12 13 14]</span></span><br></pre></td></tr></table></figure>
<pre><code>[11 12 13 14]
</code></pre><p>å®é™…ä¸Šè¿™æ—¶çš„ <code>A[2]</code> å¯¹åº”çš„å°±æ˜¯ çŸ©é˜µA ä¸­ç¬¬ä¸‰è¡Œ(ä»0å¼€å§‹ç®—ç¬¬ä¸€è¡Œ)çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
<h2 id="äºŒç»´ç´¢å¼•"><a href="#äºŒç»´ç´¢å¼•" class="headerlink" title="äºŒç»´ç´¢å¼•"></a>äºŒç»´ç´¢å¼•</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(A[<span class="number">1</span>][<span class="number">1</span>])      <span class="comment"># 8</span></span><br><span class="line">print(A[<span class="number">1</span>, <span class="number">1</span>])      <span class="comment"># 8</span></span><br></pre></td></tr></table></figure>
<pre><code>8
8
</code></pre><p>åœ¨Pythonçš„ list ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨:å¯¹ä¸€å®šèŒƒå›´å†…çš„å…ƒç´ è¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œåœ¨Numpyä¸­æˆ‘ä»¬ä¾ç„¶å¯ä»¥ç»™å‡ºç›¸åº”çš„æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(A[<span class="number">1</span>, <span class="number">1</span>:<span class="number">3</span>])    <span class="comment"># [8 9]</span></span><br></pre></td></tr></table></figure>
<pre><code>[8 9]
</code></pre><p>è¿™ä¸€è¡¨ç¤ºå½¢å¼å³é’ˆå¯¹ç¬¬äºŒè¡Œä¸­ç¬¬2åˆ°ç¬¬4åˆ—å…ƒç´ è¿›è¡Œåˆ‡ç‰‡è¾“å‡ºï¼ˆä¸åŒ…å«ç¬¬4åˆ—ï¼‰ã€‚ æ­¤æ—¶æˆ‘ä»¬é€‚å½“çš„åˆ©ç”¨forå‡½æ•°è¿›è¡Œæ‰“å°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> A:</span><br><span class="line">    print(row)</span><br><span class="line"><span class="string">"""    </span><br><span class="line">[ 3,  4,  5, 6]</span><br><span class="line">[ 7,  8,  9, 10]</span><br><span class="line">[11, 12, 13, 14]</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å®ƒä¼šé€è¡Œè¿›è¡Œæ‰“å°æ“ä½œã€‚å¦‚æœæƒ³è¿›è¡Œé€åˆ—æ‰“å°ï¼Œå°±éœ€è¦ç¨ç¨å˜åŒ–ä¸€ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> column <span class="keyword">in</span> A.T:</span><br><span class="line">    print(column)</span><br><span class="line"><span class="string">"""  </span><br><span class="line">[ 3,  7,  11]</span><br><span class="line">[ 4,  8,  12]</span><br><span class="line">[ 5,  9,  13]</span><br><span class="line">[ 6, 10,  14]</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<p>è¯´ä¸€äº›å…³äºè¿­ä»£è¾“å‡ºçš„é—®é¢˜ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">A = np.arange(<span class="number">3</span>,<span class="number">15</span>).reshape((<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">         </span><br><span class="line">print(A.flatten())   </span><br><span class="line"><span class="comment"># array([3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14])</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> A.flat:</span><br><span class="line">    print(item)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line"><span class="comment"># â€¦â€¦</span></span><br><span class="line"><span class="comment"># 14</span></span><br></pre></td></tr></table></figure>
<pre><code>[ 3  4  5  6  7  8  9 10 11 12 13 14]
3
4
5
6
7
8
9
10
11
12
13
14
</code></pre><p>è¿™ä¸€è„šæœ¬ä¸­çš„flattenæ˜¯ä¸€ä¸ªå±•å¼€æ€§è´¨çš„å‡½æ•°ï¼Œå°†å¤šç»´çš„çŸ©é˜µè¿›è¡Œå±•å¼€æˆ1è¡Œçš„æ•°åˆ—ã€‚è€Œflatæ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªobjectå±æ€§ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.numpy.org/" target="_blank" rel="external">numpy.org</a></li>
<li><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">numpy docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Numpy Basic Operation 2]]></title>
      <url>http://shopee.ai/2017/12/25/python/numpy-pandas/py-numpy-4-basic-operation-2/</url>
      <content type="html"><![CDATA[<p>numpy çŸ©é˜µçš„åŸºæœ¬æ“ä½œï¼Œargmin/argmaxã€mean/averageã€cumsumã€sortã€transpose/A.Tã€clip</p>
<a id="more"></a>
<h2 id="argmin-amp-argmax"><a href="#argmin-amp-argmax" class="headerlink" title="argmin &amp; argmax"></a>argmin &amp; argmax</h2><p>çŸ©é˜µå¯¹åº”å…ƒç´ çš„ç´¢å¼•ä¹Ÿæ˜¯éå¸¸é‡è¦çš„</p>
<p>å…¶ä¸­çš„ <code>argmin()</code> å’Œ <code>argmax()</code> ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«å¯¹åº”ç€æ±‚çŸ©é˜µä¸­æœ€å°å…ƒç´ å’Œæœ€å¤§å…ƒç´ çš„ç´¢å¼•ã€‚ç›¸åº”çš„ï¼Œåœ¨çŸ©é˜µçš„12ä¸ªå…ƒç´ ä¸­ï¼Œæœ€å°å€¼å³2ï¼Œå¯¹åº”ç´¢å¼•0ï¼Œæœ€å¤§å€¼ä¸º13ï¼Œå¯¹åº”ç´¢å¼•ä¸º11ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">A = np.arange(<span class="number">2</span>,<span class="number">14</span>).reshape((<span class="number">3</span>,<span class="number">4</span>)) </span><br><span class="line"></span><br><span class="line"><span class="comment"># array([[ 2, 3, 4, 5]</span></span><br><span class="line"><span class="comment">#        [ 6, 7, 8, 9]</span></span><br><span class="line"><span class="comment">#        [10,11,12,13]])</span></span><br><span class="line">         </span><br><span class="line">print(np.argmin(A))    <span class="comment"># 0</span></span><br><span class="line">print(np.argmax(A))    <span class="comment"># 11</span></span><br></pre></td></tr></table></figure>
<pre><code>0
11
</code></pre><h2 id="mean-amp-average"><a href="#mean-amp-average" class="headerlink" title="mean &amp; average"></a>mean &amp; average</h2><p>ç»Ÿè®¡ä¸­çš„å‡å€¼ï¼Œå¯ä»¥åˆ©ç”¨ä¸‹é¢çš„æ–¹å¼ï¼Œå°†æ•´ä¸ªçŸ©é˜µçš„å‡å€¼æ±‚å‡ºæ¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(np.mean(A))        <span class="comment"># 7.5</span></span><br><span class="line">print(np.average(A))     <span class="comment"># 7.5</span></span><br></pre></td></tr></table></figure>
<pre><code>7.5
7.5
</code></pre><p>ä»¿ç…§ç€å‰ä¸€èŠ‚ä¸­dot() çš„ä½¿ç”¨æ³•åˆ™ï¼Œmean()å‡½æ•°è¿˜æœ‰å¦å¤–ä¸€ç§å†™æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(A.mean())          <span class="comment"># 7.5</span></span><br></pre></td></tr></table></figure>
<pre><code>7.5
</code></pre><h2 id="cumsum"><a href="#cumsum" class="headerlink" title="cumsum"></a>cumsum</h2><p>å’Œmatlabä¸­çš„cumsum()ç´¯åŠ å‡½æ•°ç±»ä¼¼ï¼ŒNumpyä¸­ä¹Ÿå…·æœ‰cumsum()å‡½æ•°ï¼Œå…¶ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(np.cumsum(A)) </span><br><span class="line"></span><br><span class="line"><span class="comment"># [2 5 9 14 20 27 35 44 54 65 77 90]</span></span><br></pre></td></tr></table></figure>
<pre><code>[ 2  5  9 14 20 27 35 44 54 65 77 90]
</code></pre><p>åœ¨cumsum()å‡½æ•°ä¸­ï¼šç”Ÿæˆçš„æ¯ä¸€é¡¹çŸ©é˜µå…ƒç´ å‡æ˜¯ä»åŸçŸ©é˜µé¦–é¡¹ç´¯åŠ åˆ°å¯¹åº”é¡¹çš„å…ƒç´ ä¹‹å’Œã€‚æ¯”å¦‚å…ƒç´ 9ï¼Œåœ¨cumsum()ç”Ÿæˆçš„çŸ©é˜µä¸­åºå·ä¸º3ï¼Œå³åŸçŸ©é˜µä¸­2ï¼Œ3ï¼Œ4ä¸‰ä¸ªå…ƒç´ çš„å’Œã€‚</p>
<h2 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h2><p>ç›¸åº”çš„æœ‰ç´¯å·®è¿ç®—å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(np.diff(A))    </span><br><span class="line"></span><br><span class="line"><span class="comment"># [[1 1 1]</span></span><br><span class="line"><span class="comment">#  [1 1 1]</span></span><br><span class="line"><span class="comment">#  [1 1 1]]</span></span><br></pre></td></tr></table></figure>
<pre><code>[[1 1 1]
 [1 1 1]
 [1 1 1]]
</code></pre><p>è¯¥å‡½æ•°è®¡ç®—çš„ä¾¿æ˜¯æ¯ä¸€è¡Œä¸­åä¸€é¡¹ä¸å‰ä¸€é¡¹ä¹‹å·®ã€‚æ•…ä¸€ä¸ª3è¡Œ4åˆ—çŸ©é˜µé€šè¿‡å‡½æ•°è®¡ç®—å¾—åˆ°çš„çŸ©é˜µä¾¿æ˜¯3è¡Œ3åˆ—çš„çŸ©é˜µã€‚</p>
<blockquote>
<p><code>nonzero()</code> å‡½æ•°, è§‰å¾—ç”¨å¤„ä¸å¤§æœªå­¦ã€‚</p>
</blockquote>
<h2 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">A = np.arange(<span class="number">14</span>,<span class="number">2</span>, <span class="number">-1</span>).reshape((<span class="number">3</span>,<span class="number">4</span>)) </span><br><span class="line"></span><br><span class="line"><span class="comment"># array([[14, 13, 12, 11],</span></span><br><span class="line"><span class="comment">#       [10,  9,  8,  7],</span></span><br><span class="line"><span class="comment">#       [ 6,  5,  4,  3]])</span></span><br><span class="line"></span><br><span class="line">print(np.sort(A))    </span><br><span class="line"></span><br><span class="line"><span class="comment"># array([[11,12,13,14]</span></span><br><span class="line"><span class="comment">#        [ 7, 8, 9,10]</span></span><br><span class="line"><span class="comment">#        [ 3, 4, 5, 6]])</span></span><br></pre></td></tr></table></figure>
<pre><code>[[11 12 13 14]
 [ 7  8  9 10]
 [ 3  4  5  6]]
</code></pre><h2 id="transpose-amp-A-T"><a href="#transpose-amp-A-T" class="headerlink" title="transpose &amp; A.T"></a>transpose &amp; A.T</h2><p>çŸ©é˜µçš„è½¬ç½®æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(np.transpose(A))    </span><br><span class="line">print(A.T)</span><br><span class="line"></span><br><span class="line"><span class="comment"># array([[14,10, 6]</span></span><br><span class="line"><span class="comment">#        [13, 9, 5]</span></span><br><span class="line"><span class="comment">#        [12, 8, 4]</span></span><br><span class="line"><span class="comment">#        [11, 7, 3]])</span></span><br><span class="line"><span class="comment"># array([[14,10, 6]</span></span><br><span class="line"><span class="comment">#        [13, 9, 5]</span></span><br><span class="line"><span class="comment">#        [12, 8, 4]</span></span><br><span class="line"><span class="comment">#        [11, 7, 3]])</span></span><br></pre></td></tr></table></figure>
<pre><code>[[14 10  6]
 [13  9  5]
 [12  8  4]
 [11  7  3]]
[[14 10  6]
 [13  9  5]
 [12  8  4]
 [11  7  3]]
</code></pre><h2 id="clip"><a href="#clip" class="headerlink" title="clip"></a>clip</h2><p>ç‰¹åˆ«çš„ï¼Œåœ¨Numpyä¸­å…·æœ‰clip()å‡½æ•°ï¼Œä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(A)</span><br><span class="line"><span class="comment"># array([[14,13,12,11]</span></span><br><span class="line"><span class="comment">#        [10, 9, 8, 7]</span></span><br><span class="line"><span class="comment">#        [ 6, 5, 4, 3]])</span></span><br><span class="line"></span><br><span class="line">print(np.clip(A,<span class="number">5</span>,<span class="number">9</span>))    </span><br><span class="line"><span class="comment"># array([[ 9, 9, 9, 9]</span></span><br><span class="line"><span class="comment">#        [ 9, 9, 8, 7]</span></span><br><span class="line"><span class="comment">#        [ 6, 5, 5, 5]])</span></span><br></pre></td></tr></table></figure>
<pre><code>[[14 13 12 11]
 [10  9  8  7]
 [ 6  5  4  3]]
[[9 9 9 9]
 [9 9 8 7]
 [6 5 5 5]]
</code></pre><p>è¿™ä¸ªå‡½æ•°çš„æ ¼å¼æ˜¯clip(Array,Array_min,Array_max)ï¼Œé¡¾åæ€ä¹‰ï¼ŒArrayæŒ‡çš„æ˜¯å°†è¦è¢«æ‰§è¡Œç”¨çš„çŸ©é˜µï¼Œè€Œåé¢çš„æœ€å°å€¼æœ€å¤§å€¼åˆ™ç”¨äºè®©å‡½æ•°åˆ¤æ–­çŸ©é˜µä¸­å…ƒç´ æ˜¯å¦æœ‰æ¯”æœ€å°å€¼å°çš„æˆ–è€…æ¯”æœ€å¤§å€¼å¤§çš„å…ƒç´ ï¼Œå¹¶å°†è¿™äº›æŒ‡å®šçš„å…ƒç´ è½¬æ¢ä¸ºæœ€å°å€¼æˆ–è€…æœ€å¤§å€¼ã€‚</p>
<p>å®é™…ä¸Šæ¯ä¸€ä¸ªNumpyä¸­å¤§å¤šæ•°å‡½æ•°å‡å…·æœ‰å¾ˆå¤šå˜é‡å¯ä»¥æ“ä½œï¼Œä½ å¯ä»¥æŒ‡å®šè¡Œã€åˆ—ç”šè‡³æŸä¸€èŒƒå›´ä¸­çš„å…ƒç´ ã€‚æ›´å¤šå…·ä½“çš„ä½¿ç”¨ç»†èŠ‚è¯·è®°å¾—æŸ¥é˜…Numpyå®˜æ–¹æ–‡æ¡£ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.numpy.org/" target="_blank" rel="external">numpy.org</a></li>
<li><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">numpy docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Numpy Basic Operation 1]]></title>
      <url>http://shopee.ai/2017/12/25/python/numpy-pandas/py-numpy-3-basic-operation-1/</url>
      <content type="html"><![CDATA[<p>numpy çŸ©é˜µçš„åŸºæœ¬è¿ç®—ï¼ŒåŠ å‡ä¹˜é™¤ã€æ•°å­¦å‡½æ•°ã€æœ€å¤§æœ€å°å€¼ã€axis æŸ¥æ‰¾ ç­‰</p>
<a id="more"></a>
<h2 id="numpy-ç”ŸæˆçŸ©é˜µ"><a href="#numpy-ç”ŸæˆçŸ©é˜µ" class="headerlink" title="numpy ç”ŸæˆçŸ©é˜µ"></a>numpy ç”ŸæˆçŸ©é˜µ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a=np.array([<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>])   <span class="comment"># array([10, 20, 30, 40])</span></span><br><span class="line">b=np.arange(<span class="number">4</span>)              <span class="comment"># array([0, 1, 2, 3])</span></span><br><span class="line">b</span><br></pre></td></tr></table></figure>
<pre><code>array([0, 1, 2, 3])
</code></pre><h2 id="numpy-åŠ å‡ä¹˜é™¤"><a href="#numpy-åŠ å‡ä¹˜é™¤" class="headerlink" title="numpy åŠ å‡ä¹˜é™¤"></a>numpy åŠ å‡ä¹˜é™¤</h2><p>ä¸Šè¿°ä»£ç ä¸­çš„ <code>a</code> å’Œ <code>b</code> æ˜¯ä¸¤ä¸ªå±æ€§ä¸º array ä¹Ÿå°±æ˜¯çŸ©é˜µçš„å˜é‡ï¼Œè€Œä¸”äºŒè€…éƒ½æ˜¯1è¡Œ4åˆ—çš„çŸ©é˜µï¼Œ å…¶ä¸­bçŸ©é˜µä¸­çš„å…ƒç´ åˆ†åˆ«æ˜¯ä»0åˆ°3ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">c=a-b  <span class="comment"># array([10, 19, 28, 37])</span></span><br><span class="line">print(c)</span><br><span class="line">c=a+b   <span class="comment"># array([10, 21, 32, 43])</span></span><br><span class="line">print(c)</span><br><span class="line">c=a*b   <span class="comment"># array([  0,  20,  60, 120])</span></span><br><span class="line">print(c)</span><br><span class="line"></span><br><span class="line">c=b**<span class="number">2</span>  <span class="comment"># array([0, 1, 4, 9])</span></span><br><span class="line">print(c)</span><br></pre></td></tr></table></figure>
<pre><code>[10 19 28 37]
[10 21 32 43]
[  0  20  60 120]
[0 1 4 9]
</code></pre><h2 id="numpy-æ•°å­¦å‡½æ•°"><a href="#numpy-æ•°å­¦å‡½æ•°" class="headerlink" title="numpy æ•°å­¦å‡½æ•°"></a>numpy æ•°å­¦å‡½æ•°</h2><p>numpy ä¸‰è§’å‡½æ•°ç­‰ï¼Œå½“æˆ‘ä»¬éœ€è¦å¯¹çŸ©é˜µä¸­æ¯ä¸€é¡¹å…ƒç´ è¿›è¡Œå‡½æ•°è¿ç®—æ—¶ï¼Œå¯ä»¥å¾ˆç®€ä¾¿çš„è°ƒç”¨å®ƒä»¬ï¼ˆä»¥sinå‡½æ•°ä¸ºä¾‹ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">c=<span class="number">10</span>*np.sin(a)  </span><br><span class="line"><span class="comment"># array([-5.44021111,  9.12945251, -9.88031624,  7.4511316 ])</span></span><br><span class="line">print(c)</span><br></pre></td></tr></table></figure>
<pre><code>[-5.44021111  9.12945251 -9.88031624  7.4511316 ]
</code></pre><h2 id="print-å‡½æ•°è¿›è¡Œé€»è¾‘åˆ¤æ–­"><a href="#print-å‡½æ•°è¿›è¡Œé€»è¾‘åˆ¤æ–­" class="headerlink" title="print å‡½æ•°è¿›è¡Œé€»è¾‘åˆ¤æ–­"></a>print å‡½æ•°è¿›è¡Œé€»è¾‘åˆ¤æ–­</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(b&lt;<span class="number">3</span>)  </span><br><span class="line"><span class="comment"># array([ True,  True,  True, False], dtype=bool)</span></span><br></pre></td></tr></table></figure>
<pre><code>[ True  True  True False]
</code></pre><p>ä¸Šè¿°è¿ç®—å‡æ˜¯å»ºç«‹åœ¨ä¸€ç»´çŸ©é˜µï¼Œå³åªæœ‰ä¸€è¡Œçš„çŸ©é˜µä¸Šé¢çš„è®¡ç®—ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å¯¹å¤šè¡Œå¤šç»´åº¦çš„çŸ©é˜µè¿›è¡Œæ“ä½œï¼Œéœ€è¦å¯¹å¼€å§‹çš„è„šæœ¬è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=np.array([[<span class="number">1</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">1</span>]])</span><br><span class="line">b=np.arange(<span class="number">4</span>).reshape((<span class="number">2</span>,<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">print(a)</span><br><span class="line"><span class="comment"># array([[1, 1],</span></span><br><span class="line"><span class="comment">#       [0, 1]])</span></span><br><span class="line"></span><br><span class="line">print(b)</span><br><span class="line"><span class="comment"># array([[0, 1],</span></span><br><span class="line"><span class="comment">#       [2, 3]])</span></span><br><span class="line"></span><br><span class="line">print(b &gt; <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<pre><code>[[1 1]
 [0 1]]
[[0 1]
 [2 3]]
[[False False]
 [False  True]]
</code></pre><h2 id="numpy-ä¸¤ç§çŸ©é˜µä¹˜æ³•"><a href="#numpy-ä¸¤ç§çŸ©é˜µä¹˜æ³•" class="headerlink" title="numpy ä¸¤ç§çŸ©é˜µä¹˜æ³•"></a>numpy ä¸¤ç§çŸ©é˜µä¹˜æ³•</h2><p>æ­¤æ—¶æ„é€ å‡ºæ¥çš„çŸ©é˜µaå’Œbä¾¿æ˜¯2è¡Œ2åˆ—çš„ï¼Œå…¶ä¸­ reshape æ“ä½œæ˜¯å¯¹çŸ©é˜µçš„å½¢çŠ¶è¿›è¡Œé‡æ„ï¼Œ å…¶é‡æ„çš„å½¢çŠ¶ä¾¿æ˜¯æ‹¬å·ä¸­ç»™å‡ºçš„æ•°å­—ã€‚ ç¨æ˜¾ä¸åŒçš„æ˜¯ï¼ŒNumpy ä¸­çš„çŸ©é˜µä¹˜æ³•åˆ†ä¸ºä¸¤ç§ï¼Œ å…¶ä¸€æ˜¯å‰æ–‡ä¸­çš„å¯¹åº”å…ƒç´ ç›¸ä¹˜ï¼Œå…¶äºŒæ˜¯æ ‡å‡†çš„çŸ©é˜µä¹˜æ³•è¿ç®—ï¼Œå³å¯¹åº”è¡Œä¹˜å¯¹åº”åˆ—å¾—åˆ°ç›¸åº”å…ƒç´ ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(a)</span><br><span class="line">print(b)</span><br><span class="line"></span><br><span class="line">c_dot = np.dot(a,b)</span><br><span class="line"><span class="comment"># array([[2, 4],</span></span><br><span class="line"><span class="comment">#       [2, 3]])</span></span><br><span class="line">print(<span class="string">"========"</span>)</span><br><span class="line">print(c_dot)</span><br></pre></td></tr></table></figure>
<pre><code>[[1 1]
 [0 1]]
[[0 1]
 [2 3]]
========
[[2 4]
 [2 3]]
</code></pre><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¦å¤–çš„ä¸€ç§å…³äº<code>dot</code>çš„è¡¨ç¤ºæ–¹æ³•ï¼Œå³ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">c_dot_2 = a.dot(b)</span><br><span class="line"><span class="comment"># array([[2, 4],</span></span><br><span class="line"><span class="comment">#       [2, 3]])</span></span><br></pre></td></tr></table></figure>
<h2 id="sum-min-max"><a href="#sum-min-max" class="headerlink" title="sum(), min(), max()"></a>sum(), min(), max()</h2><p>ä¸‹é¢æˆ‘ä»¬å°†é‡æ–°å®šä¹‰ä¸€ä¸ªè„šæœ¬, æ¥çœ‹çœ‹å…³äº <code>sum()</code>, <code>min()</code>, <code>max()</code> çš„ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a=np.random.random((<span class="number">2</span>,<span class="number">4</span>))</span><br><span class="line">print(a)</span><br><span class="line"><span class="comment"># array([[ 0.94692159,  0.20821798,  0.35339414,  0.2805278 ],</span></span><br><span class="line"><span class="comment">#       [ 0.04836775,  0.04023552,  0.44091941,  0.21665268]])</span></span><br></pre></td></tr></table></figure>
<pre><code>[[ 0.38281924  0.40654978  0.69744113  0.90707595]
 [ 0.40572074  0.652105    0.24226191  0.95931459]]
</code></pre><p>å› ä¸ºæ˜¯éšæœºç”Ÿæˆæ•°å­—, æ‰€ä»¥ä½ çš„ç»“æœå¯èƒ½ä¼šä¸ä¸€æ ·. åœ¨ç¬¬äºŒè¡Œä¸­å¯¹açš„æ“ä½œæ˜¯ä»¤aä¸­ç”Ÿæˆä¸€ä¸ª2è¡Œ4åˆ—çš„çŸ©é˜µï¼Œä¸”æ¯ä¸€å…ƒç´ å‡æ˜¯æ¥è‡ªä»0åˆ°1çš„éšæœºæ•°ã€‚ åœ¨è¿™ä¸ªéšæœºç”Ÿæˆçš„çŸ©é˜µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…ƒç´ è¿›è¡Œæ±‚å’Œä»¥åŠå¯»æ‰¾æå€¼çš„æ“ä½œï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.sum(a)   <span class="comment"># 4.6532883360785817</span></span><br><span class="line">np.min(a)   <span class="comment"># 0.24226191007863129</span></span><br><span class="line">np.max(a)   <span class="comment"># 0.95931458707579575</span></span><br></pre></td></tr></table></figure>
<pre><code>0.95931458707579575
</code></pre><h2 id="axis-è¿›è¡Œèµ‹å€¼"><a href="#axis-è¿›è¡Œèµ‹å€¼" class="headerlink" title="axis è¿›è¡Œèµ‹å€¼"></a>axis è¿›è¡Œèµ‹å€¼</h2><p>å¯¹åº”çš„ä¾¿æ˜¯å¯¹çŸ©é˜µä¸­æ‰€æœ‰å…ƒç´ è¿›è¡Œæ±‚å’Œï¼Œå¯»æ‰¾æœ€å°å€¼ï¼Œå¯»æ‰¾æœ€å¤§å€¼çš„æ“ä½œã€‚ å¯ä»¥é€šè¿‡print()å‡½æ•°å¯¹ç›¸åº”å€¼è¿›è¡Œæ‰“å°æ£€éªŒã€‚</p>
<p>å¦‚æœä½ éœ€è¦å¯¹è¡Œæˆ–è€…åˆ—è¿›è¡ŒæŸ¥æ‰¾è¿ç®—ï¼Œå°±éœ€è¦åœ¨ä¸Šè¿°ä»£ç ä¸­ä¸º axis è¿›è¡Œèµ‹å€¼ã€‚ </p>
<p>å½“axisçš„å€¼ä¸º0çš„æ—¶å€™ï¼Œå°†ä¼šä»¥åˆ—ä½œä¸ºæŸ¥æ‰¾å•å…ƒï¼Œ å½“axisçš„å€¼ä¸º1çš„æ—¶å€™ï¼Œå°†ä¼šä»¥è¡Œä½œä¸ºæŸ¥æ‰¾å•å…ƒã€‚</p>
<p>ä¸ºäº†æ›´åŠ æ¸…æ™°ï¼Œåœ¨åˆšæ‰çš„ä¾‹å­ä¸­æˆ‘ä»¬ç»§ç»­è¿›è¡ŒæŸ¥æ‰¾ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">"a ="</span>,a)</span><br><span class="line"><span class="comment"># a = [[ 0.23651224  0.41900661  0.84869417  0.46456022]</span></span><br><span class="line"><span class="comment"># [ 0.60771087  0.9043845   0.36603285  0.55746074]]</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"sum ="</span>,np.sum(a,axis=<span class="number">1</span>))</span><br><span class="line"><span class="comment"># sum = [ 1.96877324  2.43558896]</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"min ="</span>,np.min(a,axis=<span class="number">0</span>))</span><br><span class="line"><span class="comment"># min = [ 0.23651224  0.41900661  0.36603285  0.46456022]</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"max ="</span>,np.max(a,axis=<span class="number">1</span>))</span><br><span class="line"><span class="comment"># max = [ 0.84869417  0.9043845 ]</span></span><br></pre></td></tr></table></figure>
<pre><code>a = [[ 0.38281924  0.40654978  0.69744113  0.90707595]
 [ 0.40572074  0.652105    0.24226191  0.95931459]]
sum = [ 2.3938861   2.25940224]
min = [ 0.38281924  0.40654978  0.24226191  0.90707595]
max = [ 0.90707595  0.95931459]
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.numpy.org/" target="_blank" rel="external">numpy.org</a></li>
<li><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">numpy docs</a></li>
<li><a href="https://morvanzhou.github.io" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Numpy Array]]></title>
      <url>http://shopee.ai/2017/12/22/python/numpy-pandas/py-numpy-2-array/</url>
      <content type="html"><![CDATA[<p>åˆ›å»º array æœ‰å¾ˆå¤š å½¢å¼</p>
<a id="more"></a>
<h2 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h2><ul>
<li><code>array</code>ï¼šåˆ›å»ºæ•°ç»„</li>
<li><code>dtype</code>ï¼šæŒ‡å®šæ•°æ®ç±»å‹</li>
<li><code>zeros</code>ï¼šæ•°æ®å…¨ä¸º0</li>
<li><code>ones</code>ï¼šæ•°æ®å…¨ä¸º1</li>
<li><code>arrange</code>ï¼šæŒ‰æŒ‡å®šèŒƒå›´åˆ›å»ºæ•°æ®</li>
<li><code>linspace</code>ï¼šåˆ›å»ºçº¿æ®µ</li>
</ul>
<blockquote>
<p>ä¸ List åŒºåˆ«ä¹‹ä¸€ : æ²¡æœ‰é€—å·åˆ†éš”</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.array([<span class="number">2</span>,<span class="number">23</span>,<span class="number">4</span>])</span><br><span class="line">print(a)</span><br><span class="line"><span class="comment"># [ 2 23  4]</span></span><br></pre></td></tr></table></figure>
<pre><code>[ 2 23  4]
int64
</code></pre><h2 id="æŒ‡å®šæ•°æ®"><a href="#æŒ‡å®šæ•°æ®" class="headerlink" title="æŒ‡å®šæ•°æ®"></a>æŒ‡å®šæ•°æ®</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.array([<span class="number">2</span>,<span class="number">23</span>,<span class="number">4</span>], dtype=np.int) <span class="comment"># é»˜è®¤ int ä¸º int64</span></span><br><span class="line">print(a.dtype) </span><br><span class="line"><span class="comment">#int64</span></span><br><span class="line"></span><br><span class="line">a = np.array([<span class="number">2</span>,<span class="number">23</span>,<span class="number">4</span>],dtype=np.int32)</span><br><span class="line">print(a.dtype)</span><br><span class="line"><span class="comment"># int32</span></span><br><span class="line"></span><br><span class="line">a = np.array([<span class="number">2</span>,<span class="number">23.1</span>,<span class="number">4.0</span>], dtype=np.float) <span class="comment"># é»˜è®¤ float ä¸º float64</span></span><br><span class="line">print(a)</span><br><span class="line">print(a.dtype)</span><br><span class="line"><span class="comment"># float64</span></span><br><span class="line"></span><br><span class="line">a = np.array([<span class="number">2</span>,<span class="number">23</span>,<span class="number">4</span>],dtype=np.float32)</span><br><span class="line">print(a.dtype)</span><br><span class="line"><span class="comment"># float32</span></span><br></pre></td></tr></table></figure>
<pre><code>int64
int32
[  2.   23.1   4. ]
float64
float32
</code></pre><h2 id="åˆ›å»ºç‰¹å®šæ•°æ®"><a href="#åˆ›å»ºç‰¹å®šæ•°æ®" class="headerlink" title="åˆ›å»ºç‰¹å®šæ•°æ®"></a>åˆ›å»ºç‰¹å®šæ•°æ®</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.array(</span><br><span class="line">    [</span><br><span class="line">        [<span class="number">2</span>,<span class="number">23</span>,<span class="number">4</span>],</span><br><span class="line">        [<span class="number">2</span>,<span class="number">23</span>,<span class="number">4</span>]</span><br><span class="line">    ]</span><br><span class="line">)  <span class="comment"># 2d çŸ©é˜µ 2è¡Œ3åˆ—</span></span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span><br><span class="line">[[ 2 23  4]</span><br><span class="line"> [ 2 32  4]]</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<h3 id="å…¨é›¶æ•°ç»„"><a href="#å…¨é›¶æ•°ç»„" class="headerlink" title="å…¨é›¶æ•°ç»„"></a>å…¨é›¶æ•°ç»„</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå…¨é›¶æ•°ç»„</span></span><br><span class="line">a = np.zeros((<span class="number">3</span>,<span class="number">4</span>))  <span class="comment"># æ•°æ®å…¨ä¸º0ï¼Œ3è¡Œ4åˆ—</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">array([[ 0.,  0.,  0.,  0.],</span><br><span class="line">       [ 0.,  0.,  0.,  0.],</span><br><span class="line">       [ 0.,  0.,  0.,  0.]])</span><br><span class="line">"""</span></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>
<h3 id="å…¨ä¸€æ•°ç»„"><a href="#å…¨ä¸€æ•°ç»„" class="headerlink" title="å…¨ä¸€æ•°ç»„"></a>å…¨ä¸€æ•°ç»„</h3><blockquote>
<p>åŒæ—¶ä¹Ÿèƒ½æŒ‡å®šè¿™äº›ç‰¹å®šæ•°æ®çš„ <code>dtype</code>:</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.ones((<span class="number">3</span>,<span class="number">4</span>),dtype = np.int)   <span class="comment"># æ•°æ®ä¸º1ï¼Œ3è¡Œ4åˆ—</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">array([[1, 1, 1, 1],</span><br><span class="line">       [1, 1, 1, 1],</span><br><span class="line">       [1, 1, 1, 1]])</span><br><span class="line">"""</span></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>
<h3 id="å…¨ç©ºæ•°ç»„"><a href="#å…¨ç©ºæ•°ç»„" class="headerlink" title="å…¨ç©ºæ•°ç»„"></a>å…¨ç©ºæ•°ç»„</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np.empty( (<span class="number">2</span>,<span class="number">3</span>) ) <span class="comment"># è¿™ä¸ªæ–¹æ³•æœ€å¤§çš„å¥½å¤„å°±æ˜¯é€Ÿåº¦å¿«ï¼Œå› ä¸ºå°‘äº†åˆå§‹åŒ–ç©ºé—´çš„æ“ä½œ</span></span><br></pre></td></tr></table></figure>
<pre><code>array([[  9.88131292e-324,   1.13635099e-322,   1.97626258e-323],
       [  9.88131292e-324,   1.13635099e-322,   1.97626258e-323]])
</code></pre><h3 id="è¿ç»­æ•°ç»„arange"><a href="#è¿ç»­æ•°ç»„arange" class="headerlink" title="è¿ç»­æ•°ç»„arange"></a>è¿ç»­æ•°ç»„<code>arange</code></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.arange(<span class="number">10</span>,<span class="number">20</span>,<span class="number">2</span>) <span class="comment"># 10-19 çš„æ•°æ®ï¼Œ2æ­¥é•¿</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">array([10, 12, 14, 16, 18])</span><br><span class="line">"""</span></span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line">b = np.arange(<span class="number">12</span>)</span><br><span class="line">b</span><br></pre></td></tr></table></figure>
<pre><code>[10 12 14 16 18]
array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])
</code></pre><h3 id="æ”¹å˜æ•°æ®çš„å½¢çŠ¶reshape"><a href="#æ”¹å˜æ•°æ®çš„å½¢çŠ¶reshape" class="headerlink" title="æ”¹å˜æ•°æ®çš„å½¢çŠ¶reshape"></a>æ”¹å˜æ•°æ®çš„å½¢çŠ¶<code>reshape</code></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>,<span class="number">4</span>))    <span class="comment"># 3è¡Œ4åˆ—ï¼Œ0åˆ°11</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">array([[ 0,  1,  2,  3],</span><br><span class="line">       [ 4,  5,  6,  7],</span><br><span class="line">       [ 8,  9, 10, 11]])</span><br><span class="line">"""</span></span><br><span class="line">a</span><br></pre></td></tr></table></figure>
<h3 id="çº¿æ®µå‹æ•°æ®linspace"><a href="#çº¿æ®µå‹æ•°æ®linspace" class="headerlink" title="çº¿æ®µå‹æ•°æ®linspace"></a>çº¿æ®µå‹æ•°æ®<code>linspace</code></h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.linspace(<span class="number">1</span>,<span class="number">10</span>,<span class="number">20</span>)    <span class="comment"># å¼€å§‹ç«¯1ï¼Œç»“æŸç«¯10ï¼Œä¸”åˆ†å‰²æˆ20ä¸ªæ•°æ®ï¼Œç”Ÿæˆçº¿æ®µ</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">array([  1.        ,   1.47368421,   1.94736842,   2.42105263,</span><br><span class="line">         2.89473684,   3.36842105,   3.84210526,   4.31578947,</span><br><span class="line">         4.78947368,   5.26315789,   5.73684211,   6.21052632,</span><br><span class="line">         6.68421053,   7.15789474,   7.63157895,   8.10526316,</span><br><span class="line">         8.57894737,   9.05263158,   9.52631579,  10.        ])</span><br><span class="line">"""</span></span><br><span class="line">a</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿèƒ½è¿›è¡Œ <code>reshape</code> å·¥ä½œ:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = np.linspace(<span class="number">1</span>,<span class="number">10</span>,<span class="number">20</span>).reshape((<span class="number">5</span>,<span class="number">4</span>)) <span class="comment"># æ›´æ”¹shape</span></span><br><span class="line"><span class="string">"""</span><br><span class="line">array([[  1.        ,   1.47368421,   1.94736842,   2.42105263],</span><br><span class="line">       [  2.89473684,   3.36842105,   3.84210526,   4.31578947],</span><br><span class="line">       [  4.78947368,   5.26315789,   5.73684211,   6.21052632],</span><br><span class="line">       [  6.68421053,   7.15789474,   7.63157895,   8.10526316],</span><br><span class="line">       [  8.57894737,   9.05263158,   9.52631579,  10.        ]])</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.numpy.org/" target="_blank" rel="external">numpy.org</a></li>
<li><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">numpy docs</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/data-manipulation/np-pd/2-2-np-array/" target="_blank" rel="external">morvanzhou</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Numpy Attribute]]></title>
      <url>http://shopee.ai/2017/12/21/python/numpy-pandas/py-numpy-1-attribute/</url>
      <content type="html"><![CDATA[<p>numpy çš„å‡ ç§å±æ€§ ç»´åº¦ã€è¡Œåˆ—ä¸ªæ•°ã€å…ƒç´ ä¸ªæ•°</p>
<a id="more"></a>
<ul>
<li><code>ndim</code>ï¼šç»´åº¦</li>
<li><code>shape</code>ï¼šè¡Œæ•°å’Œåˆ—æ•°</li>
<li><code>size</code>ï¼šå…ƒç´ ä¸ªæ•°</li>
</ul>
<p>åˆ—è¡¨è½¬åŒ–ä¸ºçŸ©é˜µï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">array1 = np.array(</span><br><span class="line">    [</span><br><span class="line">        [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">        [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line">print(array1)</span><br><span class="line">print(<span class="string">'number of dim:'</span>, array1.ndim)</span><br><span class="line">print(<span class="string">'shape:'</span>, array1.shape)</span><br><span class="line">print(<span class="string">'size:'</span>, array1.size)</span><br><span class="line"></span><br><span class="line"><span class="string">"""</span><br><span class="line">    [[1 2 3]</span><br><span class="line">     [2 3 4]]</span><br><span class="line">    number of dim: 2</span><br><span class="line">    shape: (2, 3)</span><br><span class="line">    size: 6</span><br><span class="line">"""</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.numpy.org/" target="_blank" rel="external">numpy.org</a></li>
<li><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="external">numpy docs</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ¨å¸…å®Œç¾å‘éŸ³ç­(2)]]></title>
      <url>http://shopee.ai/2017/12/10/English/english-ielts-speaking-yangshuai-2/</url>
      <content type="html"><![CDATA[<ul>
<li>ä¸€å®šè¦ä¸æ–­é‡å¤ï¼Œä¸è¦ç›¸ä¿¡è‡ªå·±çš„è€³æœµï¼Œè¦ç›¸ä¿¡éŸ³æ ‡</li>
<li>æœ€å¼€å§‹ç»ƒä¹ ï¼Œä¸€å®šè¦è¶…çº§å¤¸å¼ ï¼Œä¸€ä¸ªéŸ³ä¸€ä¸ªéŸ³è¯»</li>
</ul>
<a id="more"></a>
<table>
<thead>
<tr>
<th>éŸ³æ ‡</th>
<th>è¯»æ³•</th>
<th>å¸¸è§ç»„åˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>/i:/</strong></td>
<td>é•¿å…ƒç´§å¼ éŸ³</td>
<td>ee, ea, e, ie, ei </td>
</tr>
<tr>
<td><strong>/i/</strong></td>
<td>çŸ­å…ƒæ”¾æ¾éŸ³</td>
<td>i, y, e</td>
</tr>
<tr>
<td><strong>/É›/</strong></td>
<td>/i/ å˜´å‹ç¨å¾®å¤§äº›</td>
<td>eã€eaã€aã€ai </td>
</tr>
<tr>
<td><strong>/Ã¦/</strong></td>
<td>/É›/+/a:/</td>
<td>a</td>
</tr>
<tr>
<td><strong>/É’/</strong></td>
<td>å˜´å¼ å¼€ã€æ— å˜åŒ–</td>
<td>oã€a</td>
</tr>
<tr>
<td><strong>/É”:/</strong></td>
<td>æœ‰ç‚¹åƒ â€˜æ²ƒâ€™</td>
<td>orã€ourã€arã€alã€auã€ou</td>
</tr>
<tr>
<td><strong>/aÊŠ/</strong></td>
<td>/Ã¦/+/u/</td>
<td>ouã€ow</td>
</tr>
</tbody>
</table>
<!--more-->
<table>
<thead>
<tr>
<th>&emsp;&emsp;&emsp;</th>
<th>i:ã€iã€u:ã€uã€É›ã€Ã¦ã€É’ã€É”:ã€aÊŠ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>i:</code></strong></td>
<td><em>seatã€deedã€leastã€feetã€colleague [ËˆkÉ’li:g]ã€eatã€beatã€leaveã€steelã€steal</em></td>
</tr>
<tr>
<td><strong><code>i</code></strong></td>
<td><em>sitã€didã€listã€fitã€collegeã€itã€bitã€liveã€still</em></td>
</tr>
<tr>
<td><strong><code>u:</code></strong></td>
<td><em>foodã€poolã€foolã€moodã€moonã€roomã€schoolã€loseã€trueã€blueã€glue</em></td>
</tr>
<tr>
<td><strong><code>ÊŠ</code></strong></td>
<td><em>lookã€goodã€footã€bookã€cookã€fullã€pullã€pushã€putã€shouldã€wouldã€could</em></td>
</tr>
<tr>
<td><strong><code>É›</code></strong></td>
<td><strong><em>bedã€betterã€getã€internetã€lessonã€deskã€sellã€sleptã€thenã€helpã€veryã€neverã€headã€breadã€pleasureã€treasureã€healthã€breathã€saidã€thereã€theirã€whereã€everywhereã€anyã€manyã€guess</em></strong></td>
</tr>
<tr>
<td><strong><code>Ã¦</code></strong></td>
<td><strong><em>flagã€catã€backã€thatã€haveã€activityã€naturalã€travelã€relaxã€attractiveã€casualã€magazineã€fancy</em></strong></td>
</tr>
<tr>
<td><strong><code>É’</code></strong></td>
<td><strong><em>notã€lostã€lossã€boxã€mopã€collarã€shopã€jobã€topã€soccerã€biographyã€psychologyã€novelã€want</em></strong></td>
</tr>
<tr>
<td><strong><code>É”:</code></strong></td>
<td><em>horseã€moreã€shortã€storeã€courtã€courseã€mournã€warmã€quarterã€smallã€wallã€ballã€talkã€walkã€autumnã€caughtã€taughtã€boughtã€thoughtã€brought</em></td>
</tr>
<tr>
<td><strong><code>aÊŠ</code></strong></td>
<td><em>houseã€outã€aboutã€loudã€downã€townã€cowã€howeverã€nowã€howã€mouseã€mouthã€aroundã€groundã€foundã€accountingã€sound</em></td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pyenv Install Anaconda3]]></title>
      <url>http://shopee.ai/2017/12/07/devops/ops-pyenv-Anaconda3-note/</url>
      <content type="html"><![CDATA[<p>pyenv install anaconda3-5.0.0 æ— æ³•ä¸‹è½½åŒ…çš„æƒ…å†µä¸‹ä½¿ç”¨çš„ï¼Œå› ä¸ºç½‘é€Ÿå®åœ¨å¤ªæ…¢äº†T T</p>
<a id="more"></a>
<h2 id="Anaconda3"><a href="#Anaconda3" class="headerlink" title="Anaconda3"></a>Anaconda3</h2><p><a href="https://repo.continuum.io/archive/Anaconda3-5.0.1-MacOSX-x86_64.sh" target="_blank" rel="external">å®˜ç½‘</a> ä¸‹è½½äº†.shæ–‡ä»¶ï¼Œåœ¨è¯¥.shæ–‡ä»¶ç›®å½•ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…è¯¥æ–‡ä»¶</p>
<p>Anaconda3-5.0.1-MacOSX-x86_64.sh</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ  mv Anaconda3-5.0.1-MacOSX-x86_64.sh ~/.pyenv/cache/</span><br><span class="line">âœ  cache git:(master) sh Anaconda3-5.0.1-MacOSX-x86_64.sh</span><br></pre></td></tr></table></figure>
<p>å®‰è£…è¿‡ç¨‹éœ€è¦æ“ä½œçš„åœ°æ–¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Please, press ENTER to continue</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">...</span><br><span class="line">Do you accept the license terms? [yes|no]</span><br><span class="line">[no] &gt;&gt;&gt; yes</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Anaconda3 will now be installed into this location:</span><br><span class="line">/Users/blair/anaconda3	</span><br><span class="line">- Press ENTER to confirm the location</span><br><span class="line">- Press CTRL-C to abort the installation</span><br><span class="line">- Or specify a different location below</span><br></pre></td></tr></table></figure>
<blockquote>
<p>[/Users/blair/anaconda3] æ”¹ä¸º /Users/blair/.pyenv/versions/anaconda3</p>
<p>è¾“å…¥éœ€è¦å®‰è£…çš„ç›®å½•ï¼Œå› ä¸ºè¦æ·»åŠ åˆ°pyenvç®¡ç†å™¨ä¸­ï¼Œæ‰€ä»¥ä¸å…¶ä»–ä»¥å®‰è£…çš„Pythonç‰ˆæœ¬æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ã€‚</p>
</blockquote>
<p>å¼€å§‹è¾“å‡ºå®‰è£…ä¿¡æ¯ï¼Œä¼šå®‰è£…è®¸å¤šåŒ…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[/Users/blair/anaconda3] &gt;&gt;&gt; /Users/blair/.pyenv/versions/anaconda3</span><br><span class="line">PREFIX=/Users/blair/.pyenv/versions/anaconda3</span><br><span class="line">installing: python-3.6.3-h6804ab2_0 ...</span><br><span class="line">Python 3.6.3 :: Anaconda, Inc.</span><br><span class="line">installing: bzip2-1.0.6-h92991f9_1 ...</span><br><span class="line">installing: ca-certificates-2017.08.26-ha1e5d58_0 ...</span><br><span class="line">installing: conda-env-2.6.0-h36134e3_0 ...</span><br><span class="line">â€¦â€¦</span><br></pre></td></tr></table></figure>
<p>ç„¶åå‡ºç°æç¤ºï¼Œè¾“å…¥yeså³å¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">installation finished.</span><br><span class="line">Do you wish the installer to prepend the Anaconda3 install location</span><br><span class="line">to PATH in your /Users/blair/.bash_profile ? [yes|no]</span><br><span class="line">[yes] &gt;&gt;&gt; yes</span><br></pre></td></tr></table></figure>
<p>å®‰è£…æˆåŠŸï¼</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ pyenv versions</span><br><span class="line">  system</span><br><span class="line">  2.7.14</span><br><span class="line">  2.7.14/envs/vpy2</span><br><span class="line">  3.5.4</span><br><span class="line">  3.5.4/envs/vpy3.5</span><br><span class="line">* anaconda3 (<span class="built_in">set</span> by /Users/blair/.pyenv/version)</span><br><span class="line">  anaconda3/envs/vconda3</span><br><span class="line">  vconda3</span><br><span class="line">  vpy2</span><br><span class="line">  vpy3.5</span><br><span class="line">(anaconda3)</span><br><span class="line"><span class="comment"># ~/ghome [10:34:54]</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºanaconda3åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ  cache git:(master) pyenv virtualenv vconda3</span><br></pre></td></tr></table></figure>
<p>å¯èƒ½ä¼šè£…ä¸€äº›æ›´æ–°åŒ…ï¼Œä¼šæœ‰æç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#</span><br><span class="line"># To activate this environment, use:</span><br><span class="line"># &gt; source activate vconda3</span><br><span class="line">#</span><br><span class="line"># To deactivate an active environment, use:</span><br><span class="line"># &gt; source deactivate</span><br></pre></td></tr></table></figure>
<p>æ ¹æ®æç¤ºæ¿€æ´»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ  cache git:(master) source activate vconda3</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ¨å¸…å®Œç¾å‘éŸ³ç­(1)]]></title>
      <url>http://shopee.ai/2017/12/03/English/english-ielts-speaking-yangshuai-1/</url>
      <content type="html"><![CDATA[<p>æŠŠå‘éŸ³ç»ƒå¥½çš„æ–¹æ³•å°±æ˜¯é‡å¤, è¯­è¨€å­¦ä¹ çš„æœ¬è´¨å°±æ˜¯æ¨¡ä»¿</p>
<p>but youâ€™re oldâ€¦</p>
<p>0 ~ 6 years å¯ä»¥é€šè¿‡è€³æœµè¯†åˆ« 140 ä¸ªä¸åŒçš„éŸ³, ä¹Ÿå¯ä»¥é©¬ä¸Šæ¨¡ä»¿</p>
<p>6 å²ä¹‹åï¼Œè¿™ç§èƒ½åŠ›é€æ¸ä¸‹é™â€¦ï¼Œ æ‰€ä»¥ä½ å¤©å¤©å¬å‰‘æ¡¥è‹±è¯­ï¼Œæˆ–è€…ä½ å»å¤–å›½10å‡ å¹´ï¼Œè¿˜æ˜¯ä¸­å¼å‘éŸ³</p>
<a id="more"></a>
<h2 id="1-ç†è®º-æ¨¡ä»¿"><a href="#1-ç†è®º-æ¨¡ä»¿" class="headerlink" title="1. ç†è®º + æ¨¡ä»¿"></a>1. ç†è®º + æ¨¡ä»¿</h2><p>Less is more. </p>
<p>Practice makes progress</p>
<blockquote>
<p>å°‘è€Œç²¾ï¼Œèå…¥è¡€æ¶²ï¼Œèå…¥éª¨é«“</p>
<p>ç†è®º - ä¸ç”¨å¤©å¤© (è®©æ¨¡ä»¿æ›´åŠ æœ‰æ•ˆæœ)<br>æ¨¡ä»¿ - æ˜¯å¤©å¤©éœ€è¦çš„</p>
</blockquote>
<h2 id="2-å‘éŸ³å­¦ä¹ çš„å‡ å¤§æ³¨æ„"><a href="#2-å‘éŸ³å­¦ä¹ çš„å‡ å¤§æ³¨æ„" class="headerlink" title="2. å‘éŸ³å­¦ä¹ çš„å‡ å¤§æ³¨æ„:"></a>2. å‘éŸ³å­¦ä¹ çš„å‡ å¤§æ³¨æ„:</h2><ul>
<li>æ‡‚éŸ³æ ‡ (è‡ªå­¦)</li>
<li>ä¸€å®šè¦ä¸æ–­é‡å¤</li>
<li>ä¸è¦ç›¸ä¿¡è‡ªå·±çš„è€³æœµï¼Œè¦ç›¸ä¿¡éŸ³æ ‡</li>
<li>æœ€å¼€å§‹ç»ƒä¹ ï¼Œä¸€å®šè¦è¶…çº§å¤¸å¼ </li>
<li>ä¸€ä¸ªéŸ³ä¸€ä¸ªéŸ³è¯»</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">experience [ÉªkËˆspÉªriÉ™ns]</span><br><span class="line">serious [ËˆsÉªriÉ™s]</span><br><span class="line">series [ËˆsÉªri:z]</span><br><span class="line">down [daÊŠn]</span><br></pre></td></tr></table></figure>
<h3 id="æ¨èå­—å…¸"><a href="#æ¨èå­—å…¸" class="headerlink" title="æ¨èå­—å…¸"></a>æ¨èå­—å…¸</h3><p><a href="http://www.ox.ac.uk/" target="_blank" rel="external">Oxford</a> (è‹±éŸ³)<br><a href="https://www.merriam-webster.com/" target="_blank" rel="external">Merriam Webster</a> (ç¾éŸ³)</p>
<ol>
<li>æœ€æ˜“é”™å…ƒéŸ³ â€“ ä¿6</li>
<li>è¾…éŸ³ + è¯­è°ƒ (é‡è¯»ã€è¿è¯») â€“ äº‰7</li>
<li>ç•¥è¯» + è‹±ç¾éŸ³ä¸»è¦åŒºåˆ« â€“ å¸¦ä½ è£…å¸¦ä½ é£</li>
</ol>
<h3 id="ä»è‹±åˆ°ç¾"><a href="#ä»è‹±åˆ°ç¾" class="headerlink" title="ä»è‹±åˆ°ç¾"></a>ä»è‹±åˆ°ç¾</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">flat [flÃ¦t]ã€cat [kÃ¦t]</span><br><span class="line">kite [kaÉªt]ã€ dog [dÉ’g] [dÉ”:g] </span><br><span class="line">bed [bed]ã€[bÉ›d]</span><br><span class="line">bought [bÉ”:t]ã€[bÉ”t]</span><br><span class="line">usually [Ëˆju:Ê’uÉ™li]ã€ [ËˆjuËÊ’uÉ™li] </span><br><span class="line">garage [ËˆgÃ¦rÉ‘:Ê’]ã€[gÉ™ËˆrÉ‘:Ê’] </span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h3 id="ä¸­å›½äººé—®é¢˜æœ€å¤§çš„ä¸‰ä¸ªå…ƒéŸ³"><a href="#ä¸­å›½äººé—®é¢˜æœ€å¤§çš„ä¸‰ä¸ªå…ƒéŸ³" class="headerlink" title="ä¸­å›½äººé—®é¢˜æœ€å¤§çš„ä¸‰ä¸ªå…ƒéŸ³"></a>ä¸­å›½äººé—®é¢˜æœ€å¤§çš„ä¸‰ä¸ªå…ƒéŸ³</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/ai/ /Ã¦/ /É›/</span><br></pre></td></tr></table></figure>
<p><strong>/ai/ = /a:/-/i/</strong></p>
<ul>
<li>å­—æ¯ç»„åˆ: ä¸»è¦ <strong><em>iï¼Œieï¼Œyï¼Œighï¼Œuy</em></strong></li>
</ul>
<blockquote>
<p><strong><em>t<font color="#c7254e">i</font>meï¼Œwh<font color="#c7254e">i</font>teï¼Œd<font color="#c7254e">ie</font>ï¼Œt<font color="#c7254e">ie</font>d<br>dryï¼Œwhyï¼ŒJuly<br>h<font color="blue">igh</font>tï¼Œn<font color="blue">igh</font>tã€r<font color="blue">igh</font>t<br>bu<font color="#c7254e">y</font>ï¼Œgu<font color="#c7254e">y</font><br>k<font color="#c7254e">i</font>ndï¼Œm<font color="#c7254e">i</font>ndï¼Œw<font color="#c7254e">i</font>nd<br>all kinds ofï¼Œspring to mindï¼Œwind downï¼Œunwind</em></strong></p>
</blockquote>
<table>
<thead>
<tr>
<th>word</th>
<th>phonetic symbol</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>die</td>
<td>[dai]</td>
<td>I donâ€™t want to die.</td>
</tr>
<tr>
<td>died</td>
<td>[daid]</td>
<td>My dog died yesterday.</td>
</tr>
<tr>
<td>dying</td>
<td>[ËˆdaÉªÉªÅ‹]</td>
<td>The man is dying.</td>
</tr>
<tr>
<td>dead</td>
<td>[ded]ï¼Œ[dÉ›d]</td>
<td>Her cat is dead.</td>
</tr>
</tbody>
</table>
<h3 id="é•¿çŸ­éŸ³çš„åŒºåˆ†"><a href="#é•¿çŸ­éŸ³çš„åŒºåˆ†" class="headerlink" title="é•¿çŸ­éŸ³çš„åŒºåˆ†"></a>é•¿çŸ­éŸ³çš„åŒºåˆ†</h3><ul>
<li>é•¿éŸ³: <code>tense</code>(ç´§å¼ éŸ³) â€“ é•¿å…ƒç´§å¼ éŸ³ - beach</li>
<li>çŸ­éŸ³: <code>lax</code> (æ”¾æ¾éŸ³) â€“ çŸ­å…ƒæ”¾æ¾éŸ³ - bitch</li>
</ul>
<p><strong>/i:/</strong> ä¸æ”¾æ¾éŸ³ , å­—æ¯ç»„åˆ: ä¸»è¦ <strong><em>eeï¼Œeaï¼Œeï¼Œieï¼Œei</em></strong></p>
<blockquote>
<p><strong><em>w<font color="#c7254e">ee</font>kï¼Œw<font color="#c7254e">ea</font>kï¼Œtr<font color="#c7254e">ee</font>ï¼Œm<font color="#c7254e">ee</font>tï¼Œthr<font color="#c7254e">ee</font>ï¼Œs<font color="#c7254e">ee</font>ï¼Œs<font color="#c7254e">ee</font>kï¼Œm<font color="#c7254e">ea</font>tï¼Œl<font color="#c7254e">ea</font>veï¼Œ<font color="#c7254e">ea</font>tï¼Œb<font color="#c7254e">ea</font>t<br>l<font color="#c7254e">ea</font>dï¼Œ<font color="#c7254e">ea</font>chï¼Œcoll<font color="#c7254e">ea</font>gueï¼Œt<font color="#c7254e">ea</font>mï¼Œr<font color="#c7254e">ea</font>dï¼Œsp<font color="#c7254e">ea</font>kï¼Œpl<font color="#c7254e">ea</font>seï¼Œp<font color="#c7254e">ie</font>ceï¼Œrec<font color="#c7254e">ei</font>ve<br>extr<font color="#c7254e">e</font>melyï¼Œm<font color="#c7254e">e</font>dia</em></strong></p>
</blockquote>
<p><strong>/ei/</strong> ä¸€å®šè¦é¥±æ»¡ , å­—æ¯ç»„åˆ: ä¸»è¦ <strong><em>ayï¼Œa</em></strong></p>
<blockquote>
<p><strong><em>tree. tray <font color="#c7254e">[trei]</font><br>see. say <font color="#c7254e">[sei]</font><br>week. wake <font color="#c7254e">[weik]</font><br>piece. pace <font color="#c7254e">[peis]</font></em></strong></p>
</blockquote>
<p><strong>/i/ æ˜¯ /i:/</strong> çš„æ”¾æ¾ä¸ç”¨åŠ›éŸ³ , å­—æ¯ç»„åˆ: ä¸»è¦ <strong><em>iï¼Œy</em></strong></p>
<blockquote>
<p><strong><em>sitï¼Œitï¼Œisï¼Œliveï¼Œdidï¼Œthisï¼Œkidï¼Œlistï¼Œsix<br>fixï¼Œfitï¼Œclickï¼Œifï¼Œbigï¼Œgiveï¼Œgiftï¼Œtrip<br>stillï¼Œmissï¼Œfinishï¼Œhabitï¼Œm<font color="#c7254e">y</font>stery [ËˆmÉªstÉ™ri]ï¼Œcoll<font color="#c7254e">e</font>ge [ËˆkÉ‘:lÉªdÊ’]</em></strong></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[mac å®‰è£… mysql ä¸ å¸¸ç”¨å‘½ä»¤]]></title>
      <url>http://shopee.ai/2017/12/03/devops/ops-mac-mysql/</url>
      <content type="html"><![CDATA[<p>ä»‹ç» Mac å®‰è£… Mysql ä¸ mysql åœ¨ mac åœ¨çš„å‘½ä»¤</p>
<a id="more"></a>
<h2 id="1-brew-install"><a href="#1-brew-install" class="headerlink" title="1. brew install"></a>1. brew install</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install mysql</span><br></pre></td></tr></table></figure>
<p><strong>åœ¨macä¸‹ä½¿ç”¨ brew å®‰è£… mysqlï¼Œä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œä»Šå¤©å¯åŠ¨çš„æ—¶å€™å‘ç°å¯åŠ¨ä¸äº†</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># /usr/local/bin [9:31:54]</span></span><br><span class="line">âœ mysql</span><br><span class="line">ERROR 2002 (HY000): Can<span class="string">'t connect to local MySQL server through socket '</span>/tmp/mysql.sock<span class="string">' (2)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ brew info mysql</span><br><span class="line">mysql: stable 8.0.12 (bottled)</span><br></pre></td></tr></table></figure>
<h2 id="2-å¯åŠ¨mysql"><a href="#2-å¯åŠ¨mysql" class="headerlink" title="2. å¯åŠ¨mysql"></a>2. å¯åŠ¨mysql</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ mysql.server start</span><br></pre></td></tr></table></figure>
<h2 id="3-è®¾ç½®å¯†ç "><a href="#3-è®¾ç½®å¯†ç " class="headerlink" title="3. è®¾ç½®å¯†ç "></a>3. è®¾ç½®å¯†ç </h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql_secure_installation</span><br></pre></td></tr></table></figure>
<h2 id="4-è¿›å…¥mysql"><a href="#4-è¿›å…¥mysql" class="headerlink" title="4. è¿›å…¥mysql"></a>4. è¿›å…¥mysql</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure>
<h2 id="5-å¸¸ç”¨å‘½ä»¤"><a href="#5-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="5. å¸¸ç”¨å‘½ä»¤"></a>5. å¸¸ç”¨å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mysql.server start</span><br><span class="line">$ mysql.server restart</span><br><span class="line">$ mysql.server stop</span><br><span class="line">$ mysql.server status</span><br><span class="line">$ mysql -u root -p</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/plpldog/article/details/80761646" target="_blank" rel="external">macç”¨brewå®‰è£…mysql,è®¾ç½®åˆå§‹å¯†ç </a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Neural Networks and Deep Learning (week1) - Introduction to Deep Learning]]></title>
      <url>http://shopee.ai/2017/12/01/deeplearning/Neural-Networks-and-Deep-Learning-week1/</url>
      <content type="html"><![CDATA[<ol>
<li>Introduction to Deep Learning</li>
<li>What is a Neural Network ?</li>
<li>Why is Deep Learning taking off ?</li>
</ol>
<a id="more"></a>
<h2 id="1-Introduction-to-Deep-Learning"><a href="#1-Introduction-to-Deep-Learning" class="headerlink" title="1. Introduction to Deep Learning"></a>1. Introduction to Deep Learning</h2><p><img src="/images/deeplearning/light.jpg" width="420"></p>
<h3 id="Whatâ€™s-youâ€™ll-learn"><a href="#Whatâ€™s-youâ€™ll-learn" class="headerlink" title="Whatâ€™s youâ€™ll learn"></a>Whatâ€™s youâ€™ll learn</h3><div class="limg0"><br><img src="/images/deeplearning/deeplearning-ai-w1-6.jpg" width="720"><br></div>

<h2 id="2-What-is-a-Neural-Network"><a href="#2-What-is-a-Neural-Network" class="headerlink" title="2. What is a Neural Network ?"></a>2. What is a Neural Network ?</h2><h3 id="Housing-Price-Prediction"><a href="#Housing-Price-Prediction" class="headerlink" title="Housing Price Prediction"></a>Housing Price Prediction</h3><p><img src="/images/deeplearning/deeplearning-ai-w1-3-housing.jpg" width="720"></p>
<h2 id="3-Why-is-Deep-Learning-taking-off"><a href="#3-Why-is-Deep-Learning-taking-off" class="headerlink" title="3. Why is Deep Learning taking off ?"></a>3. Why is Deep Learning taking off ?</h2><p><img src="/images/deeplearning/deeplearning-ai-w1-4.jpg" width="720"></p>
<ul>
<li><strong>Data</strong> ã€ <strong>Computation</strong> ã€ <strong>Algorithms</strong></li>
</ul>
<p><img src="/images/deeplearning/deeplearning-ai-w1-5.jpg" width="720"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.deeplearning.ai/" target="_blank" rel="external">Andrew Ng - deeplearning.ai</a></li>
<li><a href="https://mooc.study.163.com/learn/2001281002?tid=2001392029#/learn/content?type=detail&amp;id=2001702004&amp;cid=2001694006" target="_blank" rel="external">ç½‘æ˜“äº‘è¯¾å ‚ - ç¬¬ä¸€å‘¨æ·±åº¦å­¦ä¹ æ¦‚è®º</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 11 - Chatbot çš„ç¬¬äºŒä¸ªç‰ˆæœ¬ (æ–°APIå®ç°)]]></title>
      <url>http://shopee.ai/2017/11/29/chatbot/chatbot-research11/</url>
      <content type="html"><![CDATA[<!-- 2018 -->
<p>æˆ‘ä»¬ä½¿ç”¨ tf.contrib.legacy_seq2seq ä¸‹çš„ API æ„å»ºäº†ä¸€ä¸ªç®€å•çš„ chatbot å¯¹è¯ç³»ç»Ÿ. ä»£ç æ˜¯1.0ä¹‹å‰æ—§ç‰ˆ.</p>
<p>æœ¬ç¯‡æˆ‘ä»¬å­¦ä¹ æ–°ç‰ˆæœ¬çµæ´»çš„çš„APIï¼Œè¿™é‡Œå…ˆæ¥è¯´ä¸€ä¸‹äºŒè€…çš„ä¸åŒï¼š</p>
<a id="more"></a>
<p><strong>æ–°ç‰ˆæœ¬APIï¼š</strong></p>
<blockquote>
<ul>
<li><p>ç”¨ dynamic_rnn æ¥æ„é€  RNNæ¨¡å‹ï¼Œè¿™æ ·å°±é¿å…äº†æ•°æ®é•¿åº¦ä¸åŒæ‰€å¸¦æ¥çš„å›°æ‰°ï¼Œä¸éœ€è¦å†ä½¿ç”¨ model_with_buckets è¿™ç§æ–¹æ³•æ¥æ„å»ºæ¨¡å‹ï¼Œä½¿å¾—æˆ‘ä»¬æ•°æ®å¤„ç†å’Œæ¨¡å‹ä»£ç éƒ½ç®€æ´å¾ˆå¤šã€‚</p>
</li>
<li><p>æ–°ç‰ˆæœ¬å°† Attentionã€ Decoder ç­‰å‡ ä¸ªä¸»è¦çš„åŠŸèƒ½éƒ½åˆ†åˆ«è¿›è¡Œå°è£…ï¼Œç›´æ¥è°ƒç”¨ç›¸åº”çš„ Wapperå‡½æ•° è¿›è¡Œå°è£…å³å¯ï¼Œæ›´åŠ çµæ´»æ–¹ä¾¿ï¼Œè€Œä¸”åªéœ€è¦å†™å‡ ä¸ªç®€å•çš„å‡½æ•°æ—¢å¯ä»¥è‡ªå®šä¹‰çš„å„ä¸ªæ¨¡å—ä»¥æ»¡è¶³æˆ‘ä»¬ä¸ªæ€§åŒ–çš„éœ€æ±‚ã€‚</p>
</li>
</ul>
<ul>
<li>å®ç°äº†beam_searchåŠŸèƒ½ï¼Œå¯ç›´æ¥è°ƒç”¨ã€‚</li>
</ul>
<p><a href="https://www.zhihu.com/question/52200883" target="_blank" rel="external">tensor flow dynamic_rnn ä¸rnnæœ‰å•¥åŒºåˆ«ï¼Ÿ</a></p>
<p>dynamic_rnn åªåœ¨ä¸€ä¸ª batch å†…éƒ¨è¿›è¡Œè‡ªåŠ¨ paddingï¼Œ ä¸åŒ batch padding é•¿åº¦å¯ä»¥ä¸åŒ</p>
</blockquote>
<h2 id="1-æ•°æ®å¤„ç†"><a href="#1-æ•°æ®å¤„ç†" class="headerlink" title="1. æ•°æ®å¤„ç†"></a>1. æ•°æ®å¤„ç†</h2><blockquote>
<p> word2id is :  { â€˜decorationsâ€™: 12002, â€˜scrapsâ€™: 4599, â€¦}</p>
<p>id2word is :  { 0: â€˜<pad>â€˜, 1: â€˜<go>â€˜, 2: â€˜<eos>â€˜, 3: â€˜<unknown>â€˜, 4: â€˜canâ€™, 5: â€˜weâ€™, 6: â€˜makeâ€™, â€¦ }</unknown></eos></go></pad></p>
<p>trainingSamples is :<br> [<br>    [ [793, 138, 65], [35, 209, 110, 9016, 208, 382, 35, 22] ],<br>    [ [35, 209, 110, 9016, 208, 382, 35, 22], [26, 92, 1906, 47, 254, 65] ],<br>    â€¦<br> ]</p>
</blockquote>
<h2 id="2-æ¨¡å‹æ„å»º"><a href="#2-æ¨¡å‹æ„å»º" class="headerlink" title="2. æ¨¡å‹æ„å»º"></a>2. æ¨¡å‹æ„å»º</h2><p>ä»£ç ä¸»è¦æ˜¯ä» tensorflowå®˜ç½‘ ç»™å‡ºçš„nmtä¾‹å­çš„ä»£ç ç®€åŒ–è€Œæ¥ï¼Œå®ç°äº†æœ€åŸºæœ¬çš„ <strong>attention</strong> å’Œ <strong>beam_search</strong> ç­‰åŠŸèƒ½ï¼ŒåŒæ—¶æœ‰å°†nmtä»£ç ä¸­ç¹æ‚çš„ä»£ç é€»è¾‘è¿›è¡Œç®€åŒ–ã€‚è¿™é‡Œå‚è€ƒnmtä¸­æ‰€æåˆ°çš„æ„å»º<code>train</code>ã€<code>eval</code>ã€<code>inference</code> , ä¸‰ä¸ªå›¾è¿›è¡Œæ¨¡å‹æ„å»ºï¼Œå¥½å¤„åœ¨äº <a href="https://github.com/tensorflow/nmt#building-training-eval-and-inference-graphs" target="_blank" rel="external">nmtå®˜æ–¹æ–‡æ¡£ Building Training, Eval, and Inference Graphs </a></p>
<blockquote>
<ul>
<li>inferenceå›¾ å¾€å¾€ä¸ train å’Œ evalç»“æ„ å­˜åœ¨è¾ƒå¤§å·®å¼‚ï¼Œæ‰€ä»¥å¾€å¾€éœ€è¦å•ç‹¬è¿›è¡Œæ„å»º<br>.   ï¼ˆæ²¡æœ‰decoderè¾“å…¥å’Œç›®æ ‡ï¼Œéœ€è¦ä½¿ç”¨ greedy æˆ– beam_search è¿›è¡Œ decodeï¼Œbatch_size ä¹Ÿä¸åŒç­‰ç­‰ï¼‰</li>
<li>evalå›¾ï¼Œä¸éœ€è¦è¿›è¡Œåå‘ä¼ æ’­ï¼Œåªéœ€è¦å¾—åˆ°ä¸€ä¸ª <strong>loss</strong> å’Œ <strong>acc</strong>å€¼</li>
<li>æ•°æ®è¿›è¡Œ <code>feed</code>ï¼Œç®€åŒ–æ•°æ®æ“ä½œ</li>
<li>å˜é‡é‡ç”¨å˜å¾—ç®€å•ï¼Œå› ä¸º trainã€eval å­˜åœ¨ä¸€äº›å…¬ç”¨å˜é‡å’Œä»£ç å—ï¼Œå°±ä¸éœ€è¦æˆ‘ä»¬é‡å¤å®šä¹‰</li>
<li>åªéœ€è¦åœ¨ train æ—¶ä¸æ–­ä¿å­˜æ¨¡å‹å‚æ•°ï¼Œç„¶ååœ¨ eval å’Œ infer çš„æ—¶å€™ restoreå‚æ•° å³å¯</li>
</ul>
</blockquote>
<p>ä»¥ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬æ„å»ºäº† trainã€evalã€infer ä¸‰ä¸ªå‡½æ•°æ¥å®ç°ä¸Šé¢çš„åŠŸèƒ½ã€‚åœ¨çœ‹ä»£ç ä¹‹å‰æˆ‘ä»¬å…ˆæ¥ç®€å•è¯´ä¸€ä¸‹æ–°ç‰ˆAPIå‡ ä¸ªä¸»è¦çš„æ¨¡å—ä»¥åŠç›¸äº’ä¹‹é—´çš„è°ƒç”¨å…³ç³»ã€‚tf.contrib.seq2seqæ–‡ä»¶å¤¹ä¸‹é¢ä¸»è¦æœ‰ä¸‹é¢6ä¸ªæ–‡ä»¶ï¼Œé™¤äº†lossæ–‡ä»¶å’Œä¹‹å‰çš„sequence_losså‡½æ•°æ²¡æœ‰å¾ˆå¤§åŒºåˆ«ï¼Œè¿™é‡Œä¸ä»‹ç»ä¹‹å¤–ï¼Œå…¶ä»–å‡ ä¸ªæ–‡ä»¶éƒ½ä¼šç®€å•çš„è¯´ä¸€ä¸‹ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»å‡½æ•°å’Œç±»çš„åŠŸèƒ½ï¼Œæºç ä¼šæ”¾åœ¨ä¸‹ç¯‡æ–‡ç« ä¸­ä»‹ç»ã€‚</p>
<blockquote>
<ul>
<li>decoder</li>
<li>basic_decoder</li>
<li>helper</li>
<li>attention_wrapper</li>
<li>beam_search_decoder</li>
<li>loss</li>
</ul>
</blockquote>
<h3 id="2-1-BasicDecoder-ç±»å’Œ-dynamic-decode"><a href="#2-1-BasicDecoder-ç±»å’Œ-dynamic-decode" class="headerlink" title="2.1 BasicDecoder ç±»å’Œ dynamic_decode"></a>2.1 BasicDecoder ç±»å’Œ dynamic_decode</h3><p>decoderæ–‡ä»¶ä¸­å®šä¹‰äº†</p>
<ul>
<li>DecoderæŠ½è±¡ç±»</li>
<li>dynamic_decodeå‡½æ•°</li>
</ul>
<blockquote>
<p>dynamic_decode å¯ä»¥è§†ä¸ºæ•´ä¸ªè§£ç è¿‡ç¨‹çš„å…¥å£ï¼Œéœ€è¦ä¼ å…¥çš„å‚æ•°å°±æ˜¯ Decoder çš„ä¸€ä¸ªå®ä¾‹ï¼Œä»–ä¼šåŠ¨æ€çš„è°ƒç”¨ Decoder çš„ <code>step</code>å‡½æ•° æŒ‰æ­¥æ‰§è¡Œ decodeï¼Œå¯ä»¥ç†è§£ä¸ºDecoderç±»å®šä¹‰äº†å•æ­¥è§£ç ï¼ˆæ ¹æ®è¾“å…¥æ±‚å‡ºè¾“å‡ºï¼Œå¹¶å°†è¯¥è¾“å‡ºå½“åšä¸‹ä¸€æ—¶åˆ»è¾“å…¥ï¼‰ï¼Œè€Œdynamic_decodeåˆ™ä¼šè°ƒç”¨control_flow_ops.while_loopè¿™ä¸ªå‡½æ•°æ¥å¾ªç¯æ‰§è¡Œç›´åˆ°è¾“å‡º<eos>ç»“æŸç¼–ç è¿‡ç¨‹.</eos></p>
</blockquote>
<h3 id="2-2-cellç±»å‹ï¼ˆAttentionç±»å‹ï¼‰"><a href="#2-2-cellç±»å‹ï¼ˆAttentionç±»å‹ï¼‰" class="headerlink" title="2.2 cellç±»å‹ï¼ˆAttentionç±»å‹ï¼‰"></a>2.2 cellç±»å‹ï¼ˆAttentionç±»å‹ï¼‰</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ†ä¸º3æ­¥ï¼Œ</span></span><br><span class="line"><span class="comment">#.  1. å®šä¹‰attentionæœºåˆ¶</span></span><br><span class="line"><span class="comment">#.  2. å®šä¹‰è¦æ˜¯ç”¨çš„åŸºç¡€çš„RNNCell</span></span><br><span class="line"><span class="comment">#.  3. ä½¿ç”¨AttentionWrapperè¿›è¡Œå°è£…</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. å®šä¹‰è¦ä½¿ç”¨çš„attentionæœºåˆ¶ã€‚</span></span><br><span class="line">attention_mechanism = tf.contrib.seq2seq.BahdanauAttention(num_units=self.rnn_size, memory=encoder_outputs, memory_sequence_length=encoder_inputs_length)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å®šä¹‰decoderé˜¶æ®µè¦æ˜¯ç”¨çš„LSTMCellï¼Œç„¶åä¸ºå…¶å°è£…attention wrapper</span></span><br><span class="line">decoder_cell = self._create_rnn_cell()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. ä½¿ç”¨AttentionWrapperè¿›è¡Œå°è£…</span></span><br><span class="line">decoder_cell = tf.contrib.seq2seq.AttentionWrapper(cell=decoder_cell, attention_mechanism=attention_mechanism, attention_layer_size=self.rnn_size, name=<span class="string">'Attention_Wrapper'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="2-3-helperç±»å‹"><a href="#2-3-helperç±»å‹" class="headerlink" title="2.3 helperç±»å‹"></a>2.3 helperç±»å‹</h3><p>helperå…¶å®å°±æ˜¯decodeé˜¶æ®µå¦‚ä½•æ ¹æ®é¢„æµ‹ç»“æœå¾—åˆ°ä¸‹ä¸€æ—¶åˆ»çš„è¾“å…¥ï¼Œæ¯”å¦‚trainè®­ç»ƒè¿‡ç¨‹ä¸­åº”è¯¥ç›´æ¥ä½¿ç”¨ä¸Šä¸€æ—¶åˆ»çš„çœŸå®å€¼ä½œä¸ºä¸‹ä¸€æ—¶åˆ»è¾“å…¥ï¼Œé¢„æµ‹è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨è´ªå©ªçš„æ–¹æ³•é€‰æ‹©æ¦‚ç‡æœ€å¤§çš„é‚£ä¸ªå€¼ä½œä¸ºä¸‹ä¸€æ—¶åˆ»ç­‰ç­‰ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://blog.csdn.net/thriving_fcl/article/details/74165062" target="_blank" rel="external">Tensorflowæ–°ç‰ˆSeq2Seqæ¥å£ä½¿ç”¨</a></li>
<li><a href="https://www.tensorflow.org/api_docs/python/tf/contrib/legacy_seq2seq" target="_blank" rel="external">tensorflowå®˜ç½‘APIæŒ‡å¯¼</a></li>
<li><a href="https://github.com/Conchylicultor/DeepQA#chatbot" target="_blank" rel="external">DeepQA</a></li>
<li><a href="https://github.com/pbhatia243/Neural_Conversation_Models" target="_blank" rel="external">Neural_Conversation_Models</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 8 - ç†è®º seq2seq+Attention æœºåˆ¶æ¨¡å‹è¯¦è§£]]></title>
      <url>http://shopee.ai/2017/11/17/chatbot/chatbot-research8/</url>
      <content type="html"><![CDATA[<p>ä»å…·ä½“çš„æ¨¡å‹ç»†èŠ‚ã€å…¬å¼æ¨å¯¼ã€ç»“æ„å›¾ä»¥åŠå˜å½¢ç­‰å‡ ä¸ªæ–¹å‘è¯¦ç»†ä»‹ç»ä¸€ä¸‹ Seq-to-Seq æ¨¡å‹ã€‚</p>
<a id="more"></a>
<ul>
<li>Seq-to-Seq æ¡†æ¶1</li>
<li>Seq-to-Seq æ¡†æ¶2ï¼ˆteacher forcingï¼‰</li>
<li>Seq-to-Seq with Attentionï¼ˆNMTï¼‰</li>
<li>Seq-to-Seq with Attention å„ç§å˜å½¢</li>
<li>Seq-to-Seq with Beam-Search</li>
</ul>
<p>å½“è¾“å…¥è¾“å‡ºéƒ½æ˜¯ä¸å®šé•¿åºåˆ—æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¼–ç å™¨â€”è§£ç å™¨ï¼ˆencoder-decoderï¼‰<a href="https://www.youtube.com/watch?v=GQh7wDQDc0Y&amp;index=18&amp;list=PLLbeS1kM6teJqdFzw1ICHfa4a1y0hg8Ax" target="_blank" rel="external">1</a> æˆ–è€… seq2seq æ¨¡å‹ <a href="https://zh.gluon.ai/chapter_recurrent-neural-networks/gru.html" target="_blank" rel="external">2</a>ã€‚è¿™ä¸¤ä¸ªæ¨¡å‹æœ¬è´¨ä¸Šéƒ½ç”¨åˆ°äº†ä¸¤ä¸ªå¾ªç¯ç¥ç»ç½‘ç»œï¼Œåˆ†åˆ«å«åšç¼–ç å™¨å’Œè§£ç å™¨ã€‚ç¼–ç å™¨ç”¨æ¥åˆ†æè¾“å…¥åºåˆ—ï¼Œè§£ç å™¨ç”¨æ¥ç”Ÿæˆè¾“å‡ºåºåˆ—ã€‚</p>
<h2 id="1-Seq2Seq-æ¡†æ¶1"><a href="#1-Seq2Seq-æ¡†æ¶1" class="headerlink" title="1. Seq2Seq æ¡†æ¶1"></a>1. Seq2Seq æ¡†æ¶1</h2><p><img src="/images/chatbot/seq2seq-1.jpg" width="300"></p>
<p><a href="https://arxiv.org/pdf/1406.1078.pdf" target="_blank" rel="external">Learning Phrase Representations using RNN Encoderâ€“Decoder for Statistical Machine Translation</a></p>
<h3 id="1-1-encode-ç¼–ç å™¨"><a href="#1-1-encode-ç¼–ç å™¨" class="headerlink" title="1.1 encode ç¼–ç å™¨"></a>1.1 encode ç¼–ç å™¨</h3><p>ç¼–ç å™¨çš„ä½œç”¨æ˜¯æŠŠä¸€ä¸ªä¸å®šé•¿çš„è¾“å…¥åºåˆ—å˜æ¢æˆä¸€ä¸ªå®šé•¿çš„èƒŒæ™¯å˜é‡ $c$ï¼Œå¹¶åœ¨è¯¥èƒŒæ™¯å˜é‡ä¸­ç¼–ç è¾“å…¥åºåˆ—ä¿¡æ¯ã€‚å¸¸ç”¨çš„ç¼–ç å™¨æ˜¯å¾ªç¯ç¥ç»ç½‘ç»œã€‚</p>
<p>è®©æˆ‘ä»¬è€ƒè™‘æ‰¹é‡å¤§å°ä¸º 1 çš„æ—¶åºæ•°æ®æ ·æœ¬ã€‚å‡è®¾è¾“å…¥åºåˆ—æ˜¯ $x_1,\ldots,x_T$, ä¾‹å¦‚ $x_i$ æ˜¯è¾“å…¥å¥å­ä¸­çš„ç¬¬ $i$ ä¸ªè¯ã€‚åœ¨æ—¶é—´æ­¥ $t$ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œå°†è¾“å…¥ $x_t$ çš„ç‰¹å¾å‘é‡ $x_t$ å’Œä¸Šä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_{t-1}$ å˜æ¢ä¸ºå½“å‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $h_t$ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•° $f$ è¡¨è¾¾å¾ªç¯ç¥ç»ç½‘ç»œéšè—å±‚çš„å˜æ¢ï¼š</p>
<p>$$<br>\boldsymbol{h}_t = f(\boldsymbol{x}_t, \boldsymbol{h}_{t-1}).<br>$$</p>
<p>æ¥ä¸‹æ¥ç¼–ç å™¨é€šè¿‡è‡ªå®šä¹‰å‡½æ•° $q$ å°†å„ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€å˜æ¢ä¸ºèƒŒæ™¯å˜é‡</p>
<p>$$<br>\boldsymbol{c} =  q(\boldsymbol{h}_1, \ldots, \boldsymbol{h}_T).<br>$$</p>
<p>ä¾‹å¦‚ï¼Œå½“é€‰æ‹© $q(\boldsymbol{h}_1, \ldots, \boldsymbol{h}_T) = \boldsymbol{h}_T$ æ—¶ï¼ŒèƒŒæ™¯å˜é‡æ˜¯è¾“å…¥åºåˆ—æœ€ç»ˆæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_T$ã€‚</p>
<p>ä»¥ä¸Šæè¿°çš„ç¼–ç å™¨æ˜¯ä¸€ä¸ªå•å‘çš„ RNNï¼Œæ¯ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€åªå–å†³äºè¯¥æ—¶é—´æ­¥åŠä¹‹å‰çš„è¾“å…¥å­åºåˆ—ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Bi-RNN æ„é€ ç¼–ç å™¨ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–ç å™¨æ¯ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€åŒæ—¶å–å†³äºè¯¥æ—¶é—´æ­¥ä¹‹å‰å’Œä¹‹åçš„å­åºåˆ—ï¼ˆåŒ…æ‹¬å½“å‰æ—¶é—´æ­¥çš„è¾“å…¥ï¼‰ï¼Œå¹¶ç¼–ç äº†æ•´ä¸ªåºåˆ—çš„ä¿¡æ¯ã€‚</p>
<p><img src="/images/chatbot/seq2seq-5.jpeg" width="800"></p>
<h3 id="1-2-decode-è§£ç å™¨"><a href="#1-2-decode-è§£ç å™¨" class="headerlink" title="1.2 decode è§£ç å™¨"></a>1.2 decode è§£ç å™¨</h3><p>Encode ç¼–ç å™¨è¾“å‡ºçš„èƒŒæ™¯å˜é‡ $c$ ç¼–ç äº†æ•´ä¸ªè¾“å…¥åºåˆ— $x_1, \ldots, x_T$ çš„ä¿¡æ¯ã€‚ç»™å®šè®­ç»ƒæ ·æœ¬ä¸­çš„è¾“å‡ºåºåˆ— $y_1, y_2, \ldots, y_{Tâ€™}$ï¼Œå¯¹æ¯ä¸ªæ—¶é—´æ­¥ $tâ€™$ï¼ˆç¬¦å·ä¸è¾“å…¥åºåˆ—æˆ–ç¼–ç å™¨çš„æ—¶é—´æ­¥ $t$ æœ‰åŒºåˆ«ï¼‰ï¼Œ è§£ç å™¨è¾“å‡º $y_{tâ€™}$ çš„æ¡ä»¶æ¦‚ç‡å°†åŸºäºä¹‹å‰çš„è¾“å‡ºåºåˆ— $y_1,\ldots,y_{tâ€™-1}$ å’ŒèƒŒæ™¯å˜é‡ $c$ï¼Œ<strong>å³</strong> $\mathbb{P}(y_{tâ€™} \mid y_1, \ldots, y_{tâ€™-1}, \boldsymbol{c})$ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>å¦ä¸€ä¸ªRNN</code>ä½œä¸ºè§£ç å™¨ã€‚ åœ¨è¾“å‡ºåºåˆ—çš„æ—¶é—´æ­¥ $t^\prime$ï¼Œè§£ç å™¨å°†ä¸Šä¸€æ—¶é—´æ­¥çš„è¾“å‡º $y_{t^\prime-1}$ ä»¥åŠèƒŒæ™¯å˜é‡ $c$ ä½œä¸ºè¾“å…¥ï¼Œå¹¶å°†å®ƒä»¬ä¸ä¸Šä¸€æ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_{t^\prime-1}$ å˜æ¢ä¸ºå½“å‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_{t^\prime}$ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•° $g$ è¡¨è¾¾è§£ç å™¨éšè—å±‚çš„å˜æ¢ï¼š</p>
<p>$$<br>\boldsymbol{h}_{t^\prime} = g(y_{t^\prime-1}, \boldsymbol{c}, \boldsymbol{h}_{t^\prime-1}).<br>$$</p>
<p>æœ‰äº†decodeçš„éšè—çŠ¶æ€åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„è¾“å‡ºå±‚å’Œ softmax è¿ç®—æ¥è®¡ç®— $\mathbb{P}(y_{t^\prime} \mid y_1, \ldots, y_{t^\prime-1}, \boldsymbol{c})$ï¼Œä¾‹å¦‚åŸºäºå½“å‰æ—¶é—´æ­¥çš„è§£ç å™¨éšè—çŠ¶æ€ $\boldsymbol{h}_{t^\prime}$ã€ä¸Šä¸€æ—¶é—´æ­¥çš„è¾“å‡º $y_{t^\prime-1}$ ä»¥åŠèƒŒæ™¯å˜é‡ $c$ æ¥è®¡ç®—å½“å‰æ—¶é—´æ­¥è¾“å‡º $y_{t^\prime}$ çš„æ¦‚ç‡åˆ†å¸ƒã€‚</p>
<h3 id="1-3-train-æ¨¡å‹è®­ç»ƒ"><a href="#1-3-train-æ¨¡å‹è®­ç»ƒ" class="headerlink" title="1.3 train æ¨¡å‹è®­ç»ƒ"></a>1.3 train æ¨¡å‹è®­ç»ƒ</h3><p>æ ¹æ®æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œæˆ‘ä»¬å¯ä»¥æœ€å¤§åŒ–è¾“å‡ºåºåˆ—åŸºäºè¾“å…¥åºåˆ—çš„æ¡ä»¶æ¦‚ç‡</p>
<p>$$<br>\begin{split}\begin{aligned}<br>\mathbb{P}(y_1, \ldots, y_{Tâ€™} \mid x_1, \ldots, x_T)<br>&amp;= \prod_{tâ€™=1}^{Tâ€™} \mathbb{P}(y_{tâ€™} \mid y_1, \ldots, y_{tâ€™-1}, x_1, \ldots, x_T)\\<br>&amp;= \prod_{tâ€™=1}^{Tâ€™} \mathbb{P}(y_{tâ€™} \mid y_1, \ldots, y_{tâ€™-1}, \boldsymbol{c}),<br>\end{aligned}\end{split}<br>$$</p>
<p>å¹¶å¾—åˆ°è¯¥è¾“å‡ºåºåˆ—çš„æŸå¤±</p>
<p>$$ - \log\mathbb{P}(y_1, \ldots, y_{Tâ€™} \mid x_1, \ldots, x_T) = -\sum_{tâ€™=1}^{Tâ€™} \log \mathbb{P}(y_{tâ€™} \mid y_1,  \ldots, y_{tâ€™-1}, \boldsymbol{c}),<br>$$</p>
<p><img src="/images/chatbot/seq2seq-6.png" width="800"></p>
<p>åœ¨æ¨¡å‹è®­ç»ƒä¸­ï¼Œæ‰€æœ‰è¾“å‡ºåºåˆ—æŸå¤±çš„å‡å€¼é€šå¸¸ä½œä¸ºéœ€è¦æœ€å°åŒ–çš„æŸå¤±å‡½æ•°ã€‚åœ¨å›¾ä¸­æ‰€æè¿°çš„æ¨¡å‹é¢„æµ‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†decodeåœ¨ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºä½œä¸ºå½“å‰æ—¶é—´æ­¥çš„è¾“å…¥ã€‚ä¸æ­¤ä¸åŒï¼Œåœ¨è®­ç»ƒä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ ‡ç­¾åºåˆ—åœ¨ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„æ ‡ç­¾ä½œä¸ºdecodeåœ¨å½“å‰æ—¶é—´æ­¥çš„è¾“å…¥ã€‚è¿™å«åšå¼ºåˆ¶æ•™å­¦ï¼ˆteacher forcingï¼‰ã€‚</p>
<h3 id="1-4-å°ç»“"><a href="#1-4-å°ç»“" class="headerlink" title="1.4 å°ç»“"></a>1.4 å°ç»“</h3><ul>
<li>ç¼–ç å™¨ - è§£ç å™¨ï¼ˆseq2seqï¼‰å¯ä»¥è¾“å…¥å¹¶è¾“å‡ºä¸å®šé•¿çš„åºåˆ—ã€‚</li>
<li>ç¼–ç å™¨â€”è§£ç å™¨ä½¿ç”¨äº†ä¸¤ä¸ªå¾ªç¯ç¥ç»ç½‘ç»œã€‚</li>
<li>åœ¨ç¼–ç å™¨â€”è§£ç å™¨çš„è®­ç»ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¼ºåˆ¶æ•™å­¦ã€‚ ï¼ˆè¿™ä¹Ÿæ˜¯ Seq2Seq 2 çš„å†…å®¹ï¼‰</li>
</ul>
<h2 id="2-Seq2Seq-æ¡†æ¶2"><a href="#2-Seq2Seq-æ¡†æ¶2" class="headerlink" title="2. Seq2Seq æ¡†æ¶2"></a>2. Seq2Seq æ¡†æ¶2</h2><p>ç¬¬äºŒä¸ªè¦è®²çš„Seq-to-Seqæ¨¡å‹æ¥è‡ªäº â€œ<a href="https://arxiv.org/pdf/1409.3215.pdf" target="_blank" rel="external">Sequence to Sequence Learning with Neural Networks</a>â€ï¼Œå…¶æ¨¡å‹ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/images/chatbot/seq2seq-2.jpg" width="600"></p>
<p>ä¸ä¸Šé¢æ¨¡å‹æœ€å¤§çš„åŒºåˆ«åœ¨äºå…¶sourceç¼–ç åçš„ å‘é‡$C$ ç›´æ¥ä½œä¸ºDecoderé˜¶æ®µRNNçš„åˆå§‹åŒ–stateï¼Œè€Œä¸æ˜¯åœ¨æ¯æ¬¡decodeæ—¶éƒ½ä½œä¸º<code>RNN cell</code>çš„è¾“å…¥ã€‚æ­¤å¤–ï¼Œdecodeæ—¶RNNçš„è¾“å…¥æ˜¯ç›®æ ‡å€¼ï¼Œè€Œä¸æ˜¯å‰ä¸€æ—¶åˆ»çš„è¾“å‡ºã€‚é¦–å…ˆçœ‹ä¸€ä¸‹ç¼–ç é˜¶æ®µï¼š</p>
<p><img src="/images/chatbot/seq2seq-3.jpg" width="500"></p>
<p>å°±æ˜¯ç®€å•çš„RNNæ¨¡å‹ï¼Œæ¯ä¸ªè¯ç»è¿‡RNNä¹‹åéƒ½ä¼šç¼–ç ä¸ºhidden stateï¼ˆe0,e1,e2ï¼‰ï¼Œå¹¶ä¸”sourceåºåˆ—çš„ç¼–ç å‘é‡eå°±æ˜¯æœ€ç»ˆçš„hidden state e2ã€‚æ¥ä¸‹æ¥å†çœ‹ä¸€ä¸‹è§£ç é˜¶æ®µï¼š</p>
<p><img src="/images/chatbot/seq2seq-4.jpg" width="500"></p>
<p>eå‘é‡ä»…ä½œä¸ºRNNçš„åˆå§‹åŒ–çŠ¶æ€ä¼ å…¥decodeæ¨¡å‹ã€‚æ¥ä¸‹æ¥å°±æ˜¯æ ‡å‡†çš„å¾ªç¯ç¥ç»ç½‘ç»œï¼Œæ¯ä¸€æ—¶åˆ»è¾“å…¥éƒ½æ˜¯å‰ä¸€æ—¶åˆ»çš„æ­£ç¡®labelã€‚ç›´åˆ°æœ€ç»ˆè¾“å…¥<eos>ç¬¦å·æˆªæ­¢æ»šåŠ¨ã€‚</eos></p>
<h2 id="3-Seq2Seq-Attention"><a href="#3-Seq2Seq-Attention" class="headerlink" title="3. Seq2Seq Attention"></a>3. Seq2Seq Attention</h2><p><strong>decode</strong> åœ¨å„ä¸ªæ—¶é—´æ­¥ä¾èµ–ç›¸åŒçš„ <strong>èƒŒæ™¯å˜é‡ $c$</strong> æ¥è·å–è¾“å…¥åºåˆ—ä¿¡æ¯ã€‚å½“ <strong>encode</strong> ä¸º RNN æ—¶ï¼Œ<strong>èƒŒæ™¯å˜é‡$c$</strong> æ¥è‡ªå®ƒæœ€ç»ˆæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ã€‚</p>
<blockquote>
<p>è‹±è¯­è¾“å…¥ï¼šâ€œTheyâ€ã€â€œareâ€ã€â€œwatchingâ€ã€â€œ.â€<br>æ³•è¯­è¾“å‡ºï¼šâ€œIlsâ€ã€â€œregardentâ€ã€â€œ.â€</p>
<p>ç¿»è¯‘ä¾‹å­ï¼šè¾“å…¥ä¸ºè‹±è¯­åºåˆ—â€œTheyâ€ã€â€œareâ€ã€â€œwatchingâ€ã€â€œ.â€ï¼Œè¾“å‡ºä¸ºæ³•è¯­åºåˆ—â€œIlsâ€ã€â€œregardentâ€ã€â€œ.â€ã€‚ï¼Œ<strong>decode</strong> åœ¨ç”Ÿæˆè¾“å‡ºåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªè¯æ—¶å¯èƒ½åªéœ€åˆ©ç”¨è¾“å…¥åºåˆ—æŸä¸€éƒ¨åˆ†çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨è¾“å‡ºåºåˆ—çš„æ—¶é—´æ­¥ 1ï¼Œè§£ç å™¨å¯ä»¥ä¸»è¦ä¾èµ–â€œTheyâ€ã€â€œareâ€çš„ä¿¡æ¯æ¥ç”Ÿæˆâ€œIlsâ€ï¼Œåœ¨æ—¶é—´æ­¥ 2 åˆ™ä¸»è¦ä½¿ç”¨æ¥è‡ªâ€œwatchingâ€çš„ç¼–ç ä¿¡æ¯ç”Ÿæˆâ€œregardentâ€ï¼Œæœ€ååœ¨æ—¶é—´æ­¥ 3 åˆ™ç›´æ¥æ˜ å°„å¥å·â€œ.â€ã€‚è¿™çœ‹ä¸Šå»å°±åƒæ˜¯åœ¨ <strong>decode</strong> çš„æ¯ä¸€æ—¶é—´æ­¥å¯¹è¾“å…¥åºåˆ—ä¸­ä¸åŒæ—¶é—´æ­¥çš„ç¼–ç ä¿¡æ¯åˆ†é…ä¸åŒçš„æ³¨æ„åŠ›ä¸€æ ·ã€‚è¿™ä¹Ÿæ˜¯æ³¨æ„åŠ›æœºåˆ¶çš„ç”±æ¥ <a href="https://www.youtube.com/watch?v=GQh7wDQDc0Y&amp;index=18&amp;list=PLLbeS1kM6teJqdFzw1ICHfa4a1y0hg8Ax" target="_blank" rel="external">1</a>ã€‚</p>
<p>ä»ä»¥ RNN ä¸ºä¾‹ï¼ŒAttention é€šè¿‡å¯¹ Encode æ‰€æœ‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€åš<strong>åŠ æƒå¹³å‡</strong>æ¥å¾—åˆ°èƒŒæ™¯å˜é‡$c$ã€‚Decode åœ¨æ¯ä¸€æ—¶é—´æ­¥è°ƒæ•´è¿™äº›æƒé‡ï¼Œå³ Attention weightï¼Œä»è€Œèƒ½å¤Ÿåœ¨ä¸åŒæ—¶é—´æ­¥åˆ†åˆ«å…³æ³¨è¾“å…¥åºåˆ—ä¸­çš„ä¸åŒéƒ¨åˆ†å¹¶ç¼–ç è¿›ç›¸åº”æ—¶é—´æ­¥çš„èƒŒæ™¯å˜é‡$c$ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†è®¨è®º Attentionæœºåˆ¶ æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p>
</blockquote>
<p>åœ¨â€œç¼–ç å™¨â€”è§£ç å™¨ï¼ˆseq2seqï¼‰â€, è§£ç å™¨åœ¨æ—¶é—´æ­¥ $tâ€™$ çš„éšè—çŠ¶æ€</p>
<p>$$<br>\boldsymbol{s}_{tâ€™} = g(\boldsymbol{y}_{tâ€™-1}, \boldsymbol{c}, \boldsymbol{s}_{tâ€™-1})<br>$$</p>
<p>åœ¨ Attentionæœºåˆ¶ ä¸­, è§£ç å™¨çš„æ¯ä¸€æ—¶é—´æ­¥å°†ä½¿ç”¨å¯å˜çš„èƒŒæ™¯å˜é‡$c$</p>
<p>$$<br>\boldsymbol{s}_{tâ€™} = g(\boldsymbol{y}_{tâ€™-1}, \boldsymbol{c}_{tâ€™}, \boldsymbol{s}_{tâ€™-1}).<br>$$</p>
<p>å…³é”®æ˜¯å¦‚ä½•è®¡ç®—èƒŒæ™¯å˜é‡ $\boldsymbol{c}_{tâ€™}$ å’Œå¦‚ä½•åˆ©ç”¨å®ƒæ¥æ›´æ–°éšè—çŠ¶æ€ $\boldsymbol{s}_{tâ€™}$ã€‚ä»¥ä¸‹å°†åˆ†åˆ«æè¿°è¿™ä¸¤ä¸ªå…³é”®ç‚¹ã€‚</p>
<h3 id="3-1-è®¡ç®—èƒŒæ™¯å˜é‡-c"><a href="#3-1-è®¡ç®—èƒŒæ™¯å˜é‡-c" class="headerlink" title="3.1 è®¡ç®—èƒŒæ™¯å˜é‡ c"></a>3.1 è®¡ç®—èƒŒæ™¯å˜é‡ c</h3><p>$$<br>\boldsymbol{c}_{tâ€™} = \sum_{t=1}^T \alpha_{tâ€™ t} \boldsymbol{h}_t,<br>$$</p>
<p>å…¶ä¸­ç»™å®š $tâ€™$ æ—¶ï¼Œæƒé‡ $\alpha_{tâ€™ t}$ åœ¨ $t=1,\ldots,T$ çš„å€¼æ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒã€‚ä¸ºäº†å¾—åˆ°æ¦‚ç‡åˆ†å¸ƒï¼Œå¯ä»¥ä½¿ç”¨ softmax è¿ç®—:</p>
<p>$$<br>\alpha_{tâ€™ t} = \frac{\exp(e_{tâ€™ t})}{ \sum_{k=1}^T \exp(e_{tâ€™ k}) },\quad t=1,\ldots,T.<br>$$</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å¦‚ä½•è®¡ç®—ä¸Šå¼ä¸­ softmax è¿ç®—çš„è¾“å…¥ $e_{tâ€™ t}$ã€‚ç”±äº $e_{tâ€™ t}$ åŒæ—¶å–å†³äºdecodeçš„æ—¶é—´æ­¥ $tâ€™$ å’Œencodeçš„æ—¶é—´æ­¥ $t$ï¼Œæˆ‘ä»¬ä¸å¦¨ä»¥è§£ç å™¨åœ¨æ—¶é—´æ­¥ $tâ€™âˆ’1$ çš„éšè—çŠ¶æ€ $\boldsymbol{s}_{tâ€™ - 1}$ ä¸ç¼–ç å™¨åœ¨æ—¶é—´æ­¥ $t$ çš„éšè—çŠ¶æ€ $h_t$ ä¸ºè¾“å…¥ï¼Œå¹¶é€šè¿‡å‡½æ•° $a$ è®¡ç®— $e_{tâ€™ t}$ï¼š</p>
<p>$$<br>e_{tâ€™ t} = a(\boldsymbol{s}_{tâ€™ - 1}, \boldsymbol{h}_t).<br>$$</p>
<p>è¿™é‡Œå‡½æ•° a æœ‰å¤šç§é€‰æ‹©ï¼Œå¦‚æœä¸¤ä¸ªè¾“å…¥å‘é‡é•¿åº¦ç›¸åŒï¼Œä¸€ä¸ªç®€å•çš„é€‰æ‹©æ˜¯è®¡ç®—å®ƒä»¬çš„å†…ç§¯ $a(\boldsymbol{s}, \boldsymbol{h})=\boldsymbol{s}^\top \boldsymbol{h}$ã€‚è€Œæœ€æ—©æå‡ºAttentionæœºåˆ¶çš„è®ºæ–‡åˆ™å°†è¾“å…¥è¿ç»“åé€šè¿‡å«å•éšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºMLP å˜æ¢ </p>
<p>$$<br>a(\boldsymbol{s}, \boldsymbol{h}) = \boldsymbol{v}^\top \tanh(\boldsymbol{W}_s \boldsymbol{s} + \boldsymbol{W}_h \boldsymbol{h}),<br>$$</p>
<p>å…¶ä¸­ $vã€W_sã€W_h$ éƒ½æ˜¯å¯ä»¥å­¦ä¹ çš„æ¨¡å‹å‚æ•°ã€‚</p>
<h3 id="3-2-æ›´æ–°éšè—çŠ¶æ€"><a href="#3-2-æ›´æ–°éšè—çŠ¶æ€" class="headerlink" title="3.2 æ›´æ–°éšè—çŠ¶æ€"></a>3.2 æ›´æ–°éšè—çŠ¶æ€</h3><p>ä»¥é—¨æ§å¾ªç¯å•å…ƒä¸ºä¾‹ï¼Œåœ¨è§£ç å™¨ä¸­æˆ‘ä»¬å¯ä»¥å¯¹é—¨æ§å¾ªç¯å•å…ƒçš„è®¾è®¡ç¨ä½œä¿®æ”¹ã€‚è§£ç å™¨åœ¨æ—¶é—´æ­¥ $tâ€™$ çš„éšè—çŠ¶æ€ä¸º</p>
<p>$$<br>\boldsymbol{s}_{tâ€™} = \boldsymbol{z}_{tâ€™} \odot \boldsymbol{s}_{tâ€™-1}  + (1 - \boldsymbol{z}_{tâ€™}) \odot \tilde{\boldsymbol{s}}_{tâ€™},<br>$$</p>
<p>å…¶ä¸­çš„é‡ç½®é—¨ã€æ›´æ–°é—¨å’Œå€™é€‰éšå«çŠ¶æ€åˆ†åˆ«ä¸º :</p>
<p>$$<br>\begin{split}\begin{aligned}<br>\boldsymbol{r}_{tâ€™} &amp;= \sigma(\boldsymbol{W}_{yr} \boldsymbol{y}_{tâ€™-1} + \boldsymbol{W}_{sr} \boldsymbol{s}_{tâ€™ - 1} + \boldsymbol{W}_{cr} \boldsymbol{c}_{tâ€™} + \boldsymbol{b}_r),\\<br>\boldsymbol{z}_{tâ€™} &amp;= \sigma(\boldsymbol{W}_{yz} \boldsymbol{y}_{tâ€™-1} + \boldsymbol{W}_{sz} \boldsymbol{s}_{tâ€™ - 1} + \boldsymbol{W}_{cz} \boldsymbol{c}_{tâ€™} + \boldsymbol{b}_z),\\<br>\tilde{\boldsymbol{s}}_{tâ€™} &amp;= \text{tanh}(\boldsymbol{W}_{ys} \boldsymbol{y}_{tâ€™-1} + \boldsymbol{W}_{ss} (\boldsymbol{s}_{tâ€™ - 1} \odot \boldsymbol{r}_{tâ€™}) + \boldsymbol{W}_{cs} \boldsymbol{c}_{tâ€™} + \boldsymbol{b}_s),<br>\end{aligned}\end{split}<br>$$</p>
<p>å…¶ä¸­å«ä¸‹æ ‡çš„ W å’Œ b åˆ†åˆ«ä¸ºé—¨æ§å¾ªç¯å•å…ƒçš„æƒé‡å‚æ•°å’Œåå·®å‚æ•°ã€‚</p>
<p><img src="/images/chatbot/seq2seq-7.jpeg" width="800"></p>
<h3 id="3-3-å°ç»“"><a href="#3-3-å°ç»“" class="headerlink" title="3.3 å°ç»“"></a>3.3 å°ç»“</h3><ul>
<li>å¯ä»¥åœ¨decodeçš„æ¯ä¸ªæ—¶é—´æ­¥ä½¿ç”¨ä¸åŒçš„èƒŒæ™¯å˜é‡ï¼Œå¹¶å¯¹è¾“å…¥åºåˆ—ä¸­ä¸åŒæ—¶é—´æ­¥ç¼–ç çš„ä¿¡æ¯åˆ†é…ä¸åŒçš„æ³¨æ„åŠ›ã€‚</li>
<li>Attentionæœºåˆ¶å¯ä»¥é‡‡ç”¨æ›´ä¸ºé«˜æ•ˆçš„çŸ¢é‡åŒ–è®¡ç®—ã€‚</li>
</ul>
<h2 id="4-Seq2Seq-Attentionå„ç§å˜å½¢"><a href="#4-Seq2Seq-Attentionå„ç§å˜å½¢" class="headerlink" title="4. Seq2Seq Attentionå„ç§å˜å½¢"></a>4. Seq2Seq Attentionå„ç§å˜å½¢</h2><p>ç¬¬å››ä¸ªSeq-to-Seqæ¨¡å‹ï¼Œæ¥è‡ªäºè®ºæ–‡ <a href="http://link.zhihu.com/?target=http%3A//aclweb.org/anthology/D15-1166" target="_blank" rel="external">Effective Approaches to Attention-based Neural Machine Translation</a> è¿™ç¯‡è®ºæ–‡æå‡ºäº†ä¸¤ç§ Seq2Seqæ¨¡å‹ åˆ†åˆ«æ˜¯global Attention å’Œ local Attentionã€‚</p>
<h2 id="5-Seq2Seq-with-Beam-Search"><a href="#5-Seq2Seq-with-Beam-Search" class="headerlink" title="5. Seq2Seq with Beam-Search"></a>5. Seq2Seq with Beam-Search</h2><p>ä¸Šé¢è®²çš„å‡ ç§Seq2Seqæ¨¡å‹éƒ½æ˜¯ä»æ¨¡å‹ç»“æ„ä¸Šè¿›è¡Œçš„æ”¹è¿›ï¼Œä¹Ÿå°±è¯´ä¸ºäº†ä»è®­ç»ƒçš„å±‚é¢ä¸Šæ”¹å–„æ¨¡å‹çš„æ•ˆæœï¼Œä½†è¿™é‡Œè¦ä»‹ç»çš„beam-searchæ˜¯åœ¨æµ‹è¯•çš„æ—¶å€™æ‰ç”¨åˆ°çš„æŠ€æœ¯ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.youtube.com/watch?v=GQh7wDQDc0Y&amp;index=18&amp;list=PLLbeS1kM6teJqdFzw1ICHfa4a1y0hg8Ax" target="_blank" rel="external">åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ç¬¬åå…«è¯¾ï¼šseq2seqï¼ˆç¼–ç å™¨å’Œè§£ç å™¨ï¼‰å’Œæ³¨æ„åŠ›æœºåˆ¶</a></li>
<li><a href="https://zh.gluon.ai/chapter_recurrent-neural-networks/gru.html" target="_blank" rel="external">é—¨æ§å¾ªç¯å•å…ƒï¼ˆGRUï¼‰</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/32092871" target="_blank" rel="external">seq2seq+Attentionæœºåˆ¶æ¨¡å‹è¯¦è§£</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/38064637" target="_blank" rel="external">ä¸‰åˆ†é’Ÿå¸¦ä½ å¯¹ Softmax åˆ’é‡ç‚¹</a></li>
<li><a href="https://zh.gluon.ai/chapter_deep-learning-basics/softmax-regression.html" target="_blank" rel="external">Softmax å›å½’</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ç†è®º seq2seq+Attention æœºåˆ¶æ¨¡å‹è¯¦è§£]]></title>
      <url>http://shopee.ai/2017/11/17/nlp/seq2seq+Attention/</url>
      <content type="html"><![CDATA[<p>ä»å…·ä½“çš„æ¨¡å‹ç»†èŠ‚ã€å…¬å¼æ¨å¯¼ã€ç»“æ„å›¾ä»¥åŠå˜å½¢ç­‰å‡ ä¸ªæ–¹å‘è¯¦ç»†ä»‹ç»ä¸€ä¸‹ Seq-to-Seq æ¨¡å‹ã€‚</p>
<a id="more"></a>
<ul>
<li>Seq-to-Seq æ¡†æ¶1</li>
<li>Seq-to-Seq æ¡†æ¶2ï¼ˆteacher forcingï¼‰</li>
<li>Seq-to-Seq with Attentionï¼ˆNMTï¼‰</li>
<li>Seq-to-Seq with Attention å„ç§å˜å½¢</li>
<li>Seq-to-Seq with Beam-Search</li>
</ul>
<p>å½“è¾“å…¥è¾“å‡ºéƒ½æ˜¯ä¸å®šé•¿åºåˆ—æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¼–ç å™¨â€”è§£ç å™¨ï¼ˆencoder-decoderï¼‰<a href="https://www.youtube.com/watch?v=GQh7wDQDc0Y&amp;index=18&amp;list=PLLbeS1kM6teJqdFzw1ICHfa4a1y0hg8Ax" target="_blank" rel="external">1</a> æˆ–è€… seq2seq æ¨¡å‹ <a href="https://zh.gluon.ai/chapter_recurrent-neural-networks/gru.html" target="_blank" rel="external">2</a>ã€‚è¿™ä¸¤ä¸ªæ¨¡å‹æœ¬è´¨ä¸Šéƒ½ç”¨åˆ°äº†ä¸¤ä¸ªå¾ªç¯ç¥ç»ç½‘ç»œï¼Œåˆ†åˆ«å«åšç¼–ç å™¨å’Œè§£ç å™¨ã€‚ç¼–ç å™¨ç”¨æ¥åˆ†æè¾“å…¥åºåˆ—ï¼Œè§£ç å™¨ç”¨æ¥ç”Ÿæˆè¾“å‡ºåºåˆ—ã€‚</p>
<h2 id="1-Seq2Seq-æ¡†æ¶1"><a href="#1-Seq2Seq-æ¡†æ¶1" class="headerlink" title="1. Seq2Seq æ¡†æ¶1"></a>1. Seq2Seq æ¡†æ¶1</h2><p><img src="/images/chatbot/seq2seq-1.jpg" width="300"></p>
<p><a href="https://arxiv.org/pdf/1406.1078.pdf" target="_blank" rel="external">Learning Phrase Representations using RNN Encoderâ€“Decoder for Statistical Machine Translation</a></p>
<h3 id="1-1-encode-ç¼–ç å™¨"><a href="#1-1-encode-ç¼–ç å™¨" class="headerlink" title="1.1 encode ç¼–ç å™¨"></a>1.1 encode ç¼–ç å™¨</h3><p>ç¼–ç å™¨çš„ä½œç”¨æ˜¯æŠŠä¸€ä¸ªä¸å®šé•¿çš„è¾“å…¥åºåˆ—å˜æ¢æˆä¸€ä¸ªå®šé•¿çš„èƒŒæ™¯å˜é‡ $c$ï¼Œå¹¶åœ¨è¯¥èƒŒæ™¯å˜é‡ä¸­ç¼–ç è¾“å…¥åºåˆ—ä¿¡æ¯ã€‚å¸¸ç”¨çš„ç¼–ç å™¨æ˜¯å¾ªç¯ç¥ç»ç½‘ç»œã€‚</p>
<p>è®©æˆ‘ä»¬è€ƒè™‘æ‰¹é‡å¤§å°ä¸º 1 çš„æ—¶åºæ•°æ®æ ·æœ¬ã€‚å‡è®¾è¾“å…¥åºåˆ—æ˜¯ $x_1,\ldots,x_T$, ä¾‹å¦‚ $x_i$ æ˜¯è¾“å…¥å¥å­ä¸­çš„ç¬¬ $i$ ä¸ªè¯ã€‚åœ¨æ—¶é—´æ­¥ $t$ï¼Œå¾ªç¯ç¥ç»ç½‘ç»œå°†è¾“å…¥ $x_t$ çš„ç‰¹å¾å‘é‡ $x_t$ å’Œä¸Šä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_{t-1}$ å˜æ¢ä¸ºå½“å‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $h_t$ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•° $f$ è¡¨è¾¾å¾ªç¯ç¥ç»ç½‘ç»œéšè—å±‚çš„å˜æ¢ï¼š</p>
<p>$$<br>\boldsymbol{h}_t = f(\boldsymbol{x}_t, \boldsymbol{h}_{t-1}).<br>$$</p>
<p>æ¥ä¸‹æ¥ç¼–ç å™¨é€šè¿‡è‡ªå®šä¹‰å‡½æ•° $q$ å°†å„ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€å˜æ¢ä¸ºèƒŒæ™¯å˜é‡</p>
<p>$$<br>\boldsymbol{c} =  q(\boldsymbol{h}_1, \ldots, \boldsymbol{h}_T).<br>$$</p>
<p>ä¾‹å¦‚ï¼Œå½“é€‰æ‹© $q(\boldsymbol{h}_1, \ldots, \boldsymbol{h}_T) = \boldsymbol{h}_T$ æ—¶ï¼ŒèƒŒæ™¯å˜é‡æ˜¯è¾“å…¥åºåˆ—æœ€ç»ˆæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_T$ã€‚</p>
<p>ä»¥ä¸Šæè¿°çš„ç¼–ç å™¨æ˜¯ä¸€ä¸ªå•å‘çš„ RNNï¼Œæ¯ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€åªå–å†³äºè¯¥æ—¶é—´æ­¥åŠä¹‹å‰çš„è¾“å…¥å­åºåˆ—ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Bi-RNN æ„é€ ç¼–ç å™¨ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–ç å™¨æ¯ä¸ªæ—¶é—´æ­¥çš„éšè—çŠ¶æ€åŒæ—¶å–å†³äºè¯¥æ—¶é—´æ­¥ä¹‹å‰å’Œä¹‹åçš„å­åºåˆ—ï¼ˆåŒ…æ‹¬å½“å‰æ—¶é—´æ­¥çš„è¾“å…¥ï¼‰ï¼Œå¹¶ç¼–ç äº†æ•´ä¸ªåºåˆ—çš„ä¿¡æ¯ã€‚</p>
<p><img src="/images/chatbot/seq2seq-5.jpeg" width="800"></p>
<h3 id="1-2-decode-è§£ç å™¨"><a href="#1-2-decode-è§£ç å™¨" class="headerlink" title="1.2 decode è§£ç å™¨"></a>1.2 decode è§£ç å™¨</h3><p>Encode ç¼–ç å™¨è¾“å‡ºçš„èƒŒæ™¯å˜é‡ $c$ ç¼–ç äº†æ•´ä¸ªè¾“å…¥åºåˆ— $x_1, \ldots, x_T$ çš„ä¿¡æ¯ã€‚ç»™å®šè®­ç»ƒæ ·æœ¬ä¸­çš„è¾“å‡ºåºåˆ— $y_1, y_2, \ldots, y_{Tâ€™}$ï¼Œå¯¹æ¯ä¸ªæ—¶é—´æ­¥ $tâ€™$ï¼ˆç¬¦å·ä¸è¾“å…¥åºåˆ—æˆ–ç¼–ç å™¨çš„æ—¶é—´æ­¥ $t$ æœ‰åŒºåˆ«ï¼‰ï¼Œ è§£ç å™¨è¾“å‡º $y_{tâ€™}$ çš„æ¡ä»¶æ¦‚ç‡å°†åŸºäºä¹‹å‰çš„è¾“å‡ºåºåˆ— $y_1,\ldots,y_{tâ€™-1}$ å’ŒèƒŒæ™¯å˜é‡ $c$ï¼Œ<strong>å³</strong> $\mathbb{P}(y_{tâ€™} \mid y_1, \ldots, y_{tâ€™-1}, \boldsymbol{c})$ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>å¦ä¸€ä¸ªRNN</code>ä½œä¸ºè§£ç å™¨ã€‚ åœ¨è¾“å‡ºåºåˆ—çš„æ—¶é—´æ­¥ $t^\prime$ï¼Œè§£ç å™¨å°†ä¸Šä¸€æ—¶é—´æ­¥çš„è¾“å‡º $y_{t^\prime-1}$ ä»¥åŠèƒŒæ™¯å˜é‡ $c$ ä½œä¸ºè¾“å…¥ï¼Œå¹¶å°†å®ƒä»¬ä¸ä¸Šä¸€æ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_{t^\prime-1}$ å˜æ¢ä¸ºå½“å‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€ $\boldsymbol{h}_{t^\prime}$ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•° $g$ è¡¨è¾¾è§£ç å™¨éšè—å±‚çš„å˜æ¢ï¼š</p>
<p>$$<br>\boldsymbol{h}_{t^\prime} = g(y_{t^\prime-1}, \boldsymbol{c}, \boldsymbol{h}_{t^\prime-1}).<br>$$</p>
<p>æœ‰äº†decodeçš„éšè—çŠ¶æ€åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„è¾“å‡ºå±‚å’Œ softmax è¿ç®—æ¥è®¡ç®— $\mathbb{P}(y_{t^\prime} \mid y_1, \ldots, y_{t^\prime-1}, \boldsymbol{c})$ï¼Œä¾‹å¦‚åŸºäºå½“å‰æ—¶é—´æ­¥çš„è§£ç å™¨éšè—çŠ¶æ€ $\boldsymbol{h}_{t^\prime}$ã€ä¸Šä¸€æ—¶é—´æ­¥çš„è¾“å‡º $y_{t^\prime-1}$ ä»¥åŠèƒŒæ™¯å˜é‡ $c$ æ¥è®¡ç®—å½“å‰æ—¶é—´æ­¥è¾“å‡º $y_{t^\prime}$ çš„æ¦‚ç‡åˆ†å¸ƒã€‚</p>
<h3 id="1-3-train-æ¨¡å‹è®­ç»ƒ"><a href="#1-3-train-æ¨¡å‹è®­ç»ƒ" class="headerlink" title="1.3 train æ¨¡å‹è®­ç»ƒ"></a>1.3 train æ¨¡å‹è®­ç»ƒ</h3><p>æ ¹æ®æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼Œæˆ‘ä»¬å¯ä»¥æœ€å¤§åŒ–è¾“å‡ºåºåˆ—åŸºäºè¾“å…¥åºåˆ—çš„æ¡ä»¶æ¦‚ç‡</p>
<p>$$<br>\begin{split}\begin{aligned}<br>\mathbb{P}(y_1, \ldots, y_{Tâ€™} \mid x_1, \ldots, x_T)<br>&amp;= \prod_{tâ€™=1}^{Tâ€™} \mathbb{P}(y_{tâ€™} \mid y_1, \ldots, y_{tâ€™-1}, x_1, \ldots, x_T)\\<br>&amp;= \prod_{tâ€™=1}^{Tâ€™} \mathbb{P}(y_{tâ€™} \mid y_1, \ldots, y_{tâ€™-1}, \boldsymbol{c}),<br>\end{aligned}\end{split}<br>$$</p>
<p>å¹¶å¾—åˆ°è¯¥è¾“å‡ºåºåˆ—çš„æŸå¤±</p>
<p>$$ - \log\mathbb{P}(y_1, \ldots, y_{Tâ€™} \mid x_1, \ldots, x_T) = -\sum_{tâ€™=1}^{Tâ€™} \log \mathbb{P}(y_{tâ€™} \mid y_1,  \ldots, y_{tâ€™-1}, \boldsymbol{c}),<br>$$</p>
<p><img src="/images/chatbot/seq2seq-6.png" width="800"></p>
<p>åœ¨æ¨¡å‹è®­ç»ƒä¸­ï¼Œæ‰€æœ‰è¾“å‡ºåºåˆ—æŸå¤±çš„å‡å€¼é€šå¸¸ä½œä¸ºéœ€è¦æœ€å°åŒ–çš„æŸå¤±å‡½æ•°ã€‚åœ¨å›¾ä¸­æ‰€æè¿°çš„æ¨¡å‹é¢„æµ‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†decodeåœ¨ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºä½œä¸ºå½“å‰æ—¶é—´æ­¥çš„è¾“å…¥ã€‚ä¸æ­¤ä¸åŒï¼Œåœ¨è®­ç»ƒä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†æ ‡ç­¾åºåˆ—åœ¨ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„æ ‡ç­¾ä½œä¸ºdecodeåœ¨å½“å‰æ—¶é—´æ­¥çš„è¾“å…¥ã€‚è¿™å«åšå¼ºåˆ¶æ•™å­¦ï¼ˆteacher forcingï¼‰ã€‚</p>
<h3 id="1-4-å°ç»“"><a href="#1-4-å°ç»“" class="headerlink" title="1.4 å°ç»“"></a>1.4 å°ç»“</h3><ul>
<li>ç¼–ç å™¨ - è§£ç å™¨ï¼ˆseq2seqï¼‰å¯ä»¥è¾“å…¥å¹¶è¾“å‡ºä¸å®šé•¿çš„åºåˆ—ã€‚</li>
<li>ç¼–ç å™¨â€”è§£ç å™¨ä½¿ç”¨äº†ä¸¤ä¸ªå¾ªç¯ç¥ç»ç½‘ç»œã€‚</li>
<li>åœ¨ç¼–ç å™¨â€”è§£ç å™¨çš„è®­ç»ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¼ºåˆ¶æ•™å­¦ã€‚ ï¼ˆè¿™ä¹Ÿæ˜¯ Seq2Seq 2 çš„å†…å®¹ï¼‰</li>
</ul>
<h2 id="2-Seq2Seq-æ¡†æ¶2"><a href="#2-Seq2Seq-æ¡†æ¶2" class="headerlink" title="2. Seq2Seq æ¡†æ¶2"></a>2. Seq2Seq æ¡†æ¶2</h2><p>ç¬¬äºŒä¸ªè¦è®²çš„Seq-to-Seqæ¨¡å‹æ¥è‡ªäº â€œ<a href="https://arxiv.org/pdf/1409.3215.pdf" target="_blank" rel="external">Sequence to Sequence Learning with Neural Networks</a>â€ï¼Œå…¶æ¨¡å‹ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/images/chatbot/seq2seq-2.jpg" width="600"></p>
<p>ä¸ä¸Šé¢æ¨¡å‹æœ€å¤§çš„åŒºåˆ«åœ¨äºå…¶sourceç¼–ç åçš„ å‘é‡$C$ ç›´æ¥ä½œä¸ºDecoderé˜¶æ®µRNNçš„åˆå§‹åŒ–stateï¼Œè€Œä¸æ˜¯åœ¨æ¯æ¬¡decodeæ—¶éƒ½ä½œä¸º<code>RNN cell</code>çš„è¾“å…¥ã€‚æ­¤å¤–ï¼Œdecodeæ—¶RNNçš„è¾“å…¥æ˜¯ç›®æ ‡å€¼ï¼Œè€Œä¸æ˜¯å‰ä¸€æ—¶åˆ»çš„è¾“å‡ºã€‚é¦–å…ˆçœ‹ä¸€ä¸‹ç¼–ç é˜¶æ®µï¼š</p>
<p><img src="/images/chatbot/seq2seq-3.jpg" width="500"></p>
<p>å°±æ˜¯ç®€å•çš„RNNæ¨¡å‹ï¼Œæ¯ä¸ªè¯ç»è¿‡RNNä¹‹åéƒ½ä¼šç¼–ç ä¸ºhidden stateï¼ˆe0,e1,e2ï¼‰ï¼Œå¹¶ä¸”sourceåºåˆ—çš„ç¼–ç å‘é‡eå°±æ˜¯æœ€ç»ˆçš„hidden state e2ã€‚æ¥ä¸‹æ¥å†çœ‹ä¸€ä¸‹è§£ç é˜¶æ®µï¼š</p>
<p><img src="/images/chatbot/seq2seq-4.jpg" width="500"></p>
<p>eå‘é‡ä»…ä½œä¸ºRNNçš„åˆå§‹åŒ–çŠ¶æ€ä¼ å…¥decodeæ¨¡å‹ã€‚æ¥ä¸‹æ¥å°±æ˜¯æ ‡å‡†çš„å¾ªç¯ç¥ç»ç½‘ç»œï¼Œæ¯ä¸€æ—¶åˆ»è¾“å…¥éƒ½æ˜¯å‰ä¸€æ—¶åˆ»çš„æ­£ç¡®labelã€‚ç›´åˆ°æœ€ç»ˆè¾“å…¥<eos>ç¬¦å·æˆªæ­¢æ»šåŠ¨ã€‚</eos></p>
<h2 id="3-Seq2Seq-Attention"><a href="#3-Seq2Seq-Attention" class="headerlink" title="3. Seq2Seq Attention"></a>3. Seq2Seq Attention</h2><p><strong>decode</strong> åœ¨å„ä¸ªæ—¶é—´æ­¥ä¾èµ–ç›¸åŒçš„ <strong>èƒŒæ™¯å˜é‡ $c$</strong> æ¥è·å–è¾“å…¥åºåˆ—ä¿¡æ¯ã€‚å½“ <strong>encode</strong> ä¸º RNN æ—¶ï¼Œ<strong>èƒŒæ™¯å˜é‡$c$</strong> æ¥è‡ªå®ƒæœ€ç»ˆæ—¶é—´æ­¥çš„éšè—çŠ¶æ€ã€‚</p>
<blockquote>
<p>è‹±è¯­è¾“å…¥ï¼šâ€œTheyâ€ã€â€œareâ€ã€â€œwatchingâ€ã€â€œ.â€<br>æ³•è¯­è¾“å‡ºï¼šâ€œIlsâ€ã€â€œregardentâ€ã€â€œ.â€</p>
<p>ç¿»è¯‘ä¾‹å­ï¼šè¾“å…¥ä¸ºè‹±è¯­åºåˆ—â€œTheyâ€ã€â€œareâ€ã€â€œwatchingâ€ã€â€œ.â€ï¼Œè¾“å‡ºä¸ºæ³•è¯­åºåˆ—â€œIlsâ€ã€â€œregardentâ€ã€â€œ.â€ã€‚ï¼Œ<strong>decode</strong> åœ¨ç”Ÿæˆè¾“å‡ºåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªè¯æ—¶å¯èƒ½åªéœ€åˆ©ç”¨è¾“å…¥åºåˆ—æŸä¸€éƒ¨åˆ†çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨è¾“å‡ºåºåˆ—çš„æ—¶é—´æ­¥ 1ï¼Œè§£ç å™¨å¯ä»¥ä¸»è¦ä¾èµ–â€œTheyâ€ã€â€œareâ€çš„ä¿¡æ¯æ¥ç”Ÿæˆâ€œIlsâ€ï¼Œåœ¨æ—¶é—´æ­¥ 2 åˆ™ä¸»è¦ä½¿ç”¨æ¥è‡ªâ€œwatchingâ€çš„ç¼–ç ä¿¡æ¯ç”Ÿæˆâ€œregardentâ€ï¼Œæœ€ååœ¨æ—¶é—´æ­¥ 3 åˆ™ç›´æ¥æ˜ å°„å¥å·â€œ.â€ã€‚è¿™çœ‹ä¸Šå»å°±åƒæ˜¯åœ¨ <strong>decode</strong> çš„æ¯ä¸€æ—¶é—´æ­¥å¯¹è¾“å…¥åºåˆ—ä¸­ä¸åŒæ—¶é—´æ­¥çš„ç¼–ç ä¿¡æ¯åˆ†é…ä¸åŒçš„æ³¨æ„åŠ›ä¸€æ ·ã€‚è¿™ä¹Ÿæ˜¯æ³¨æ„åŠ›æœºåˆ¶çš„ç”±æ¥ <a href="https://www.youtube.com/watch?v=GQh7wDQDc0Y&amp;index=18&amp;list=PLLbeS1kM6teJqdFzw1ICHfa4a1y0hg8Ax" target="_blank" rel="external">1</a>ã€‚</p>
<p>ä»ä»¥ RNN ä¸ºä¾‹ï¼ŒAttention é€šè¿‡å¯¹ Encode æ‰€æœ‰æ—¶é—´æ­¥çš„éšè—çŠ¶æ€åš<strong>åŠ æƒå¹³å‡</strong>æ¥å¾—åˆ°èƒŒæ™¯å˜é‡$c$ã€‚Decode åœ¨æ¯ä¸€æ—¶é—´æ­¥è°ƒæ•´è¿™äº›æƒé‡ï¼Œå³ Attention weightï¼Œä»è€Œèƒ½å¤Ÿåœ¨ä¸åŒæ—¶é—´æ­¥åˆ†åˆ«å…³æ³¨è¾“å…¥åºåˆ—ä¸­çš„ä¸åŒéƒ¨åˆ†å¹¶ç¼–ç è¿›ç›¸åº”æ—¶é—´æ­¥çš„èƒŒæ™¯å˜é‡$c$ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†è®¨è®º Attentionæœºåˆ¶ æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p>
</blockquote>
<p>åœ¨â€œç¼–ç å™¨â€”è§£ç å™¨ï¼ˆseq2seqï¼‰â€, è§£ç å™¨åœ¨æ—¶é—´æ­¥ $tâ€™$ çš„éšè—çŠ¶æ€</p>
<p>$$<br>\boldsymbol{s}_{tâ€™} = g(\boldsymbol{y}_{tâ€™-1}, \boldsymbol{c}, \boldsymbol{s}_{tâ€™-1})<br>$$</p>
<p>åœ¨ Attentionæœºåˆ¶ ä¸­, è§£ç å™¨çš„æ¯ä¸€æ—¶é—´æ­¥å°†ä½¿ç”¨å¯å˜çš„èƒŒæ™¯å˜é‡$c$</p>
<p>$$<br>\boldsymbol{s}_{tâ€™} = g(\boldsymbol{y}_{tâ€™-1}, \boldsymbol{c}_{tâ€™}, \boldsymbol{s}_{tâ€™-1}).<br>$$</p>
<p>å…³é”®æ˜¯å¦‚ä½•è®¡ç®—èƒŒæ™¯å˜é‡ $\boldsymbol{c}_{tâ€™}$ å’Œå¦‚ä½•åˆ©ç”¨å®ƒæ¥æ›´æ–°éšè—çŠ¶æ€ $\boldsymbol{s}_{tâ€™}$ã€‚ä»¥ä¸‹å°†åˆ†åˆ«æè¿°è¿™ä¸¤ä¸ªå…³é”®ç‚¹ã€‚</p>
<h3 id="3-1-è®¡ç®—èƒŒæ™¯å˜é‡-c"><a href="#3-1-è®¡ç®—èƒŒæ™¯å˜é‡-c" class="headerlink" title="3.1 è®¡ç®—èƒŒæ™¯å˜é‡ c"></a>3.1 è®¡ç®—èƒŒæ™¯å˜é‡ c</h3><p>$$<br>\boldsymbol{c}_{tâ€™} = \sum_{t=1}^T \alpha_{tâ€™ t} \boldsymbol{h}_t,<br>$$</p>
<p>å…¶ä¸­ç»™å®š $tâ€™$ æ—¶ï¼Œæƒé‡ $\alpha_{tâ€™ t}$ åœ¨ $t=1,\ldots,T$ çš„å€¼æ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒã€‚ä¸ºäº†å¾—åˆ°æ¦‚ç‡åˆ†å¸ƒï¼Œå¯ä»¥ä½¿ç”¨ softmax è¿ç®—:</p>
<p>$$<br>\alpha_{tâ€™ t} = \frac{\exp(e_{tâ€™ t})}{ \sum_{k=1}^T \exp(e_{tâ€™ k}) },\quad t=1,\ldots,T.<br>$$</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å¦‚ä½•è®¡ç®—ä¸Šå¼ä¸­ softmax è¿ç®—çš„è¾“å…¥ $e_{tâ€™ t}$ã€‚ç”±äº $e_{tâ€™ t}$ åŒæ—¶å–å†³äºdecodeçš„æ—¶é—´æ­¥ $tâ€™$ å’Œencodeçš„æ—¶é—´æ­¥ $t$ï¼Œæˆ‘ä»¬ä¸å¦¨ä»¥è§£ç å™¨åœ¨æ—¶é—´æ­¥ $tâ€™âˆ’1$ çš„éšè—çŠ¶æ€ $\boldsymbol{s}_{tâ€™ - 1}$ ä¸ç¼–ç å™¨åœ¨æ—¶é—´æ­¥ $t$ çš„éšè—çŠ¶æ€ $h_t$ ä¸ºè¾“å…¥ï¼Œå¹¶é€šè¿‡å‡½æ•° $a$ è®¡ç®— $e_{tâ€™ t}$ï¼š</p>
<p>$$<br>e_{tâ€™ t} = a(\boldsymbol{s}_{tâ€™ - 1}, \boldsymbol{h}_t).<br>$$</p>
<p>è¿™é‡Œå‡½æ•° a æœ‰å¤šç§é€‰æ‹©ï¼Œå¦‚æœä¸¤ä¸ªè¾“å…¥å‘é‡é•¿åº¦ç›¸åŒï¼Œä¸€ä¸ªç®€å•çš„é€‰æ‹©æ˜¯è®¡ç®—å®ƒä»¬çš„å†…ç§¯ $a(\boldsymbol{s}, \boldsymbol{h})=\boldsymbol{s}^\top \boldsymbol{h}$ã€‚è€Œæœ€æ—©æå‡ºAttentionæœºåˆ¶çš„è®ºæ–‡åˆ™å°†è¾“å…¥è¿ç»“åé€šè¿‡å«å•éšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºMLP å˜æ¢ </p>
<p>$$<br>a(\boldsymbol{s}, \boldsymbol{h}) = \boldsymbol{v}^\top \tanh(\boldsymbol{W}_s \boldsymbol{s} + \boldsymbol{W}_h \boldsymbol{h}),<br>$$</p>
<p>å…¶ä¸­ $vã€W_sã€W_h$ éƒ½æ˜¯å¯ä»¥å­¦ä¹ çš„æ¨¡å‹å‚æ•°ã€‚</p>
<h3 id="3-2-æ›´æ–°éšè—çŠ¶æ€"><a href="#3-2-æ›´æ–°éšè—çŠ¶æ€" class="headerlink" title="3.2 æ›´æ–°éšè—çŠ¶æ€"></a>3.2 æ›´æ–°éšè—çŠ¶æ€</h3><p>ä»¥é—¨æ§å¾ªç¯å•å…ƒä¸ºä¾‹ï¼Œåœ¨è§£ç å™¨ä¸­æˆ‘ä»¬å¯ä»¥å¯¹é—¨æ§å¾ªç¯å•å…ƒçš„è®¾è®¡ç¨ä½œä¿®æ”¹ã€‚è§£ç å™¨åœ¨æ—¶é—´æ­¥ $tâ€™$ çš„éšè—çŠ¶æ€ä¸º</p>
<p>$$<br>\boldsymbol{s}_{tâ€™} = \boldsymbol{z}_{tâ€™} \odot \boldsymbol{s}_{tâ€™-1}  + (1 - \boldsymbol{z}_{tâ€™}) \odot \tilde{\boldsymbol{s}}_{tâ€™},<br>$$</p>
<p>å…¶ä¸­çš„é‡ç½®é—¨ã€æ›´æ–°é—¨å’Œå€™é€‰éšå«çŠ¶æ€åˆ†åˆ«ä¸º :</p>
<p>$$<br>\begin{split}\begin{aligned}<br>\boldsymbol{r}_{tâ€™} &amp;= \sigma(\boldsymbol{W}_{yr} \boldsymbol{y}_{tâ€™-1} + \boldsymbol{W}_{sr} \boldsymbol{s}_{tâ€™ - 1} + \boldsymbol{W}_{cr} \boldsymbol{c}_{tâ€™} + \boldsymbol{b}_r),\\<br>\boldsymbol{z}_{tâ€™} &amp;= \sigma(\boldsymbol{W}_{yz} \boldsymbol{y}_{tâ€™-1} + \boldsymbol{W}_{sz} \boldsymbol{s}_{tâ€™ - 1} + \boldsymbol{W}_{cz} \boldsymbol{c}_{tâ€™} + \boldsymbol{b}_z),\\<br>\tilde{\boldsymbol{s}}_{tâ€™} &amp;= \text{tanh}(\boldsymbol{W}_{ys} \boldsymbol{y}_{tâ€™-1} + \boldsymbol{W}_{ss} (\boldsymbol{s}_{tâ€™ - 1} \odot \boldsymbol{r}_{tâ€™}) + \boldsymbol{W}_{cs} \boldsymbol{c}_{tâ€™} + \boldsymbol{b}_s),<br>\end{aligned}\end{split}<br>$$</p>
<p>å…¶ä¸­å«ä¸‹æ ‡çš„ W å’Œ b åˆ†åˆ«ä¸ºé—¨æ§å¾ªç¯å•å…ƒçš„æƒé‡å‚æ•°å’Œåå·®å‚æ•°ã€‚</p>
<p><img src="/images/chatbot/seq2seq-7.jpeg" width="800"></p>
<h3 id="3-3-å°ç»“"><a href="#3-3-å°ç»“" class="headerlink" title="3.3 å°ç»“"></a>3.3 å°ç»“</h3><ul>
<li>å¯ä»¥åœ¨decodeçš„æ¯ä¸ªæ—¶é—´æ­¥ä½¿ç”¨ä¸åŒçš„èƒŒæ™¯å˜é‡ï¼Œå¹¶å¯¹è¾“å…¥åºåˆ—ä¸­ä¸åŒæ—¶é—´æ­¥ç¼–ç çš„ä¿¡æ¯åˆ†é…ä¸åŒçš„æ³¨æ„åŠ›ã€‚</li>
<li>Attentionæœºåˆ¶å¯ä»¥é‡‡ç”¨æ›´ä¸ºé«˜æ•ˆçš„çŸ¢é‡åŒ–è®¡ç®—ã€‚</li>
</ul>
<h2 id="4-Seq2Seq-Attentionå„ç§å˜å½¢"><a href="#4-Seq2Seq-Attentionå„ç§å˜å½¢" class="headerlink" title="4. Seq2Seq Attentionå„ç§å˜å½¢"></a>4. Seq2Seq Attentionå„ç§å˜å½¢</h2><p>ç¬¬å››ä¸ªSeq-to-Seqæ¨¡å‹ï¼Œæ¥è‡ªäºè®ºæ–‡ <a href="http://link.zhihu.com/?target=http%3A//aclweb.org/anthology/D15-1166" target="_blank" rel="external">Effective Approaches to Attention-based Neural Machine Translation</a> è¿™ç¯‡è®ºæ–‡æå‡ºäº†ä¸¤ç§ Seq2Seqæ¨¡å‹ åˆ†åˆ«æ˜¯global Attention å’Œ local Attentionã€‚</p>
<h2 id="5-Seq2Seq-with-Beam-Search"><a href="#5-Seq2Seq-with-Beam-Search" class="headerlink" title="5. Seq2Seq with Beam-Search"></a>5. Seq2Seq with Beam-Search</h2><p>ä¸Šé¢è®²çš„å‡ ç§Seq2Seqæ¨¡å‹éƒ½æ˜¯ä»æ¨¡å‹ç»“æ„ä¸Šè¿›è¡Œçš„æ”¹è¿›ï¼Œä¹Ÿå°±è¯´ä¸ºäº†ä»è®­ç»ƒçš„å±‚é¢ä¸Šæ”¹å–„æ¨¡å‹çš„æ•ˆæœï¼Œä½†è¿™é‡Œè¦ä»‹ç»çš„beam-searchæ˜¯åœ¨æµ‹è¯•çš„æ—¶å€™æ‰ç”¨åˆ°çš„æŠ€æœ¯ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.youtube.com/watch?v=GQh7wDQDc0Y&amp;index=18&amp;list=PLLbeS1kM6teJqdFzw1ICHfa4a1y0hg8Ax" target="_blank" rel="external">åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ç¬¬åå…«è¯¾ï¼šseq2seqï¼ˆç¼–ç å™¨å’Œè§£ç å™¨ï¼‰å’Œæ³¨æ„åŠ›æœºåˆ¶</a></li>
<li><a href="https://zh.gluon.ai/chapter_recurrent-neural-networks/gru.html" target="_blank" rel="external">é—¨æ§å¾ªç¯å•å…ƒï¼ˆGRUï¼‰</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/32092871" target="_blank" rel="external">seq2seq+Attentionæœºåˆ¶æ¨¡å‹è¯¦è§£</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/38064637" target="_blank" rel="external">ä¸‰åˆ†é’Ÿå¸¦ä½ å¯¹ Softmax åˆ’é‡ç‚¹</a></li>
<li><a href="https://zh.gluon.ai/chapter_deep-learning-basics/softmax-regression.html" target="_blank" rel="external">Softmax å›å½’</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ¬ç“¦å·¥VPS é…ç½® SSH ä¸ OpenVpn]]></title>
      <url>http://shopee.ai/2017/11/12/devops/ops-bandwagonhost-ssh-openvpn/</url>
      <content type="html"><![CDATA[<p>æ¬ç“¦å·¥VPS é…ç½® ssh ç™»å½• ä¸ iphone é…ç½®ä½¿ç”¨ openvpn</p>
<a id="more"></a>
<h2 id="SSH-é…ç½®"><a href="#SSH-é…ç½®" class="headerlink" title="SSH é…ç½®"></a>SSH é…ç½®</h2><blockquote>
<p>ssh ç™»å½•æ¬ç“¦å·¥æœºå™¨</p>
<ol>
<li>stop server @Main controls</li>
<li>Root password modification</li>
<li>start Server</li>
<li>Root shell - interactive</li>
<li><p>vi /etc/ssh/sshd_config, add </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PermitRootLogin yes</span><br><span class="line">Port 22</span><br></pre></td></tr></table></figure>
</li>
<li><p>/etc/init.d/sshd restart</p>
</li>
<li>ssh root@ip</li>
</ol>
</blockquote>
<h2 id="OpenVpn-é…ç½®"><a href="#OpenVpn-é…ç½®" class="headerlink" title="OpenVpn é…ç½®"></a>OpenVpn é…ç½®</h2><blockquote>
<ol>
<li>åœ¨iOSè®¾å¤‡ä¸Šæ‰“å¼€app storeï¼Œæœç´¢openvpnï¼Œinstall</li>
<li>æ‰“å¼€ <a href="https://bandwagonhost.com/clientarea.php?action=products" target="_blank" rel="external">bandwagon my service pandel</a><br><code>My Service Pandel</code> -&gt; <code>KiwiVM Control Pandel</code> -&gt; <code>OpenVPN Server</code> -&gt; <code>install OpenVPN</code> -&gt; <code>Download Key Files</code></li>
<li><p>æŠŠ ca.crtã€client1.crtã€client1.key è¯ä¹¦æ”¾å…¥ .ovpn é…ç½®æ–‡ä»¶</p>
<p>åœ¨ .ovpn æ–‡ä»¶å°¾éƒ¨ä¸­æ–°å¢ æ ‡ç­¾ <code>&lt;ca&gt;ã€&lt;cert&gt;ã€&lt;key&gt;</code> æ ‡ç­¾</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ca.crt æ–‡ä»¶å†…å®¹å¤åˆ¶åˆ° &lt;ca&gt;å’Œ&lt;/ca&gt; çš„ä¸­é—´ï¼Œ</span><br><span class="line">client1.crt æ–‡ä»¶å†…å®¹å¤åˆ¶åˆ° &lt;cert&gt;å’Œ&lt;/cert&gt; çš„ä¸­é—´ï¼Œ</span><br><span class="line">client1.key æ–‡ä»¶å†…å®¹å¤åˆ¶åˆ° &lt;key&gt;å’Œ&lt;/key&gt; çš„ä¸­é—´ï¼Œ</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹å®Œæˆååˆ é™¤ .ovpn é…ç½®æ–‡ä»¶ä¸­ç±»ä¼¼</span><br><span class="line"></span><br><span class="line">ca ca.crt</span><br><span class="line">cert client1.crt</span><br><span class="line">key client1.key</span><br></pre></td></tr></table></figure>
</li>
<li><p>.ovpn é€šè¿‡ Airdrop ä¼ åˆ° iphone æ‰‹æœºé‡Œ</p>
</li>
<li>æ‰“å¼€OpenVPNï¼Œç‚¹é‚£äº›ç»¿è‰²åŠ å·ï¼Œå°†é…ç½®æ–‡ä»¶å¯¼å…¥</li>
<li>å‘å³æ»‘åŠ¨æœ€ä¸‹é¢é‚£ä¸ªç™½è‰²æ»‘å—è‡³è“è‰²ï¼Œè¿æ¥æœåŠ¡å™¨ã€‚</li>
<li>è¿æ¥æˆåŠŸã€‚å¦‚æœæ˜¾ç¤º Connectedï¼Œè¡¨ç¤ºè¿æ¥æˆåŠŸäº†ã€‚</li>
</ol>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.yuntionly.com/" target="_blank" rel="external">www.yuntionly.com</a></li>
<li><a href="https://www.wisevpn.net/" target="_blank" rel="external">www.wisevpn.net</a></li>
<li><a href="https://www.banwago.com/797.html" target="_blank" rel="external">www.banwago.com</a></li>
<li><a href="https://www.godaddy.com/" target="_blank" rel="external">www.godaddy.com</a></li>
<li><a href="https://www.cnbanwagong.com/4.html" target="_blank" rel="external">æ¬ç“¦å·¥ä¸­æ–‡ç½‘</a></li>
<li><a href="https://bwh1.net/" target="_blank" rel="external">æ¬ç“¦å·¥è´­ä¹°é¡µé¢</a></li>
<li><a href="http://ulis.me/archives/5909" target="_blank" rel="external">æ¬ç“¦å·¥VPSç»­è´¹çš„é‚£äº›äº‹</a></li>
<li><a href="https://www.igfw.net/archives/13042" target="_blank" rel="external">OpenVPNæ”¯æŒiOSå•¦</a></li>
<li><a href="https://www.igfw.net/archives/1974" target="_blank" rel="external">ç»¿è‰²ä¾¿æºæ±‰åŒ–å¯ä¿å­˜å¯†ç çš„OpenVPNå®¢æˆ·ç«¯</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ–‡å­—å’Œè¯­è¨€ vs æ•°å­—å’Œä¿¡æ¯]]></title>
      <url>http://shopee.ai/2017/11/08/nlp/word-language-number-info-history/</url>
      <content type="html"><![CDATA[<p>æ•°å­—ã€æ–‡å­—ã€è‡ªç„¶è¯­è¨€ ä¸€æ ·ï¼Œéƒ½æ˜¯ä¿¡æ¯çš„è½½ä½“ã€‚<a id="more"></a><br>è¯­è¨€å’Œæ•°å­—çš„äº§ç”Ÿä¸ºçš„æ˜¯åŒä¸€ä¸ªç›®çš„ ï¼šè®°å½•å’Œä¼ æ’­ä¿¡æ¯ã€‚</p>
<blockquote>
<p>1948å¹´ï¼Œ<a href="https://zh.wikipedia.org/wiki/å…‹åŠ³å¾·Â·é¦™å†œ" target="_blank" rel="external">é¦™å†œ</a>æå‡ºä¿¡æ¯è®ºï¼Œäººä»¬æ‰æŠŠ æ•°å­¦å’Œè¯­è¨€ è”ç³»èµ·æ¥ã€‚</p>
</blockquote>
<h2 id="1-ä¿¡æ¯"><a href="#1-ä¿¡æ¯" class="headerlink" title="1. ä¿¡æ¯"></a>1. ä¿¡æ¯</h2><p><img src="/images/nlp/history-info-1.jpg" width="480" height="400" align="middle" img=""></p>
<blockquote>
<p>äººç±»æœ€æ—©åˆ©ç”¨ voice è¿›è¡Œ é€šä¿¡</p>
</blockquote>
<p><img src="/images/nlp/history-info-2.png" width="650" height="100" align="middle" img=""></p>
<blockquote>
<p>äººç±»æ–‡æ˜çš„è¿›æ­¥ï¼Œéœ€è¦è¡¨è¾¾çš„ä¿¡æ¯é‡è¶Šæ¥è¶Šå¤šï¼Œäººç±»å‘æ˜çš„è‡ªç„¶è¯­è¨€</p>
<p>è¯­è¨€çš„å‡ºç°æ˜¯ä¸ºäº†äººç±»ä¹‹é—´çš„é€šä¿¡ã€‚å­—æ¯ã€æ–‡å­—ã€æ•°å­— æ˜¯ä¿¡æ¯ç¼–ç çš„ä¸åŒå•ä½ã€‚ä»»ä½•ä¸€ç§è¯­è¨€éƒ½æ˜¯ä¸€ç§ç¼–ç æ–¹å¼ï¼Œè¯­è¨€çš„è¯­æ³•è§„åˆ™æ˜¯ç¼–è§£ç çš„ç®—æ³•ã€‚</p>
</blockquote>
<h2 id="2-æ–‡å­—å’Œæ•°å­—"><a href="#2-æ–‡å­—å’Œæ•°å­—" class="headerlink" title="2. æ–‡å­—å’Œæ•°å­—"></a>2. æ–‡å­—å’Œæ•°å­—</h2><p>å½“è¯­è¨€å’Œè¯æ±‡å¤šåˆ°ä¸€å®šç¨‹åº¦ï¼Œäººç±»å¤§è„‘è®°ä¸ä½æ‰€æœ‰è¯æ±‡ï¼Œé«˜æ•ˆè®°å½•ä¿¡æ¯çš„å½¢å¼å‡ºç°ï¼Œäººç±»ä¾¿å‘æ˜äº† <strong>æ–‡å­—</strong></p>
<h3 id="æ–‡å­—"><a href="#æ–‡å­—" class="headerlink" title="æ–‡å­—"></a>æ–‡å­—</h3><p>å¤åŸƒåŠï¼Œè¯»éŸ³ç›¸åŒçš„è¯ç”¨åŒä¸€ä¸ªç¬¦å·æ¥è®°å½•ã€‚</p>
<p>æ–‡å­—æŒ‰ç…§<strong>èšç±»</strong>ä¼šå¸¦æ¥æ­§ä¹‰æ€§ï¼Œå¼„ä¸æ¸…å¤šä¹‰å­—åœ¨ç‰¹å®šç¯å¢ƒçš„å«ä¹‰ï¼Œå°±è¦ä¾é <strong>ä¸Šä¸‹æ–‡</strong>ã€‚</p>
<p>ä¸åŒçš„æ–‡æ˜ï¼Œç”±äºåœ°åŸŸåŸå› ï¼Œå†å²ä¸Šäº’ç›¸éš”ç»ï¼Œä¾¿ä¼šæœ‰ä¸åŒçš„æ–‡å­—ã€‚æ–‡æ˜çš„èåˆä¸å†²çªï¼Œä¸åŒæ–‡æ˜ä¸‹çš„äººä»¬è¿›è¡Œäº¤æµ(é€šä¿¡)ï¼Œé‚£ä¹ˆ<strong>ç¿»è¯‘</strong>çš„éœ€æ±‚ä¾¿äº§ç”Ÿäº†ã€‚ä¸åŒçš„æ–‡å­—ç³»ç»Ÿåœ¨è®°å½•ä¿¡æ¯ä¸Šçš„èƒ½åŠ›æ˜¯ç­‰ä»·çš„ã€‚</p>
<p>ç½—å¡å¡” Rosetta Stone çŸ³ç¢‘ [å¤åŸƒåŠè±¡å½¢æ–‡å­—ã€åŸƒåŠæ‹¼éŸ³æ–‡å­—ã€å¤å¸Œè…Šæ–‡] çš„ç ´è¯‘å¯¹äº NLP å­¦è€…çš„ä¸¤ç‚¹æŒ‡å¯¼æ„ä¹‰ :</p>
<ol>
<li>ä¿¡æ¯çš„å†—ä½™æ˜¯ä¿¡æ¯å®‰å…¨çš„ä¿éšœ</li>
<li>è¯­è¨€çš„æ•°æ®ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º è¯­æ–™</li>
</ol>
<blockquote>
<p>Rosetta Stone, Googleæ¨å‡ºçš„ç¿»è¯‘è½¯ä»¶</p>
</blockquote>
<h3 id="æ•°å­—"><a href="#æ•°å­—" class="headerlink" title="æ•°å­—"></a>æ•°å­—</h3><p>ç¥–å…ˆéœ€è¦è®°å½•ç‰©ä»¶çš„ä¸ªæ•°è¶Šæ¥è¶Šå¤šï¼Œæ‰€ä»¥å¼€å§‹å‘æ˜äº†è®¡æ•°ç³»ç»Ÿï¼Œä¹Ÿå°±æœ‰äº† æ•°å­—ã€‚å› ä¸º 10 ä¸ªæ‰‹æŒ‡å¤´ï¼Œæ‰€ä»¥å‘æ˜äº† 10 è¿›åˆ¶ã€‚</p>
<p>æè¿°æ•°å­—æœ€æœ‰æ•ˆçš„æ˜¯ å¤å°åº¦äººï¼Œä»–ä»¬å‘æ˜äº† 10ä¸ª é˜¿æ‹‰ä¼¯æ•°å­—ã€‚æ•°å­—çš„é©å‘½æ€§åœ¨äºå®ƒçš„ç®€å•æœ‰æ•ˆï¼Œè€Œä¸” æ ‡å¿—ç€æ•°å­—å’Œæ–‡å­—çš„åˆ†ç¦»ã€‚è¿™åœ¨å®¢è§‚ä¸Šè®© è‡ªç„¶è¯­è¨€çš„ç ”ç©¶ å’Œ æ•°å­¦çš„ç ”ç©¶ åœ¨å‡ åƒå¹´é‡Œæ²¡æœ‰é‡åˆçš„è½¨è¿¹ã€‚</p>
<h2 id="3-æ–‡å­—å’Œè¯­è¨€èƒŒåçš„æ•°å­¦"><a href="#3-æ–‡å­—å’Œè¯­è¨€èƒŒåçš„æ•°å­¦" class="headerlink" title="3. æ–‡å­—å’Œè¯­è¨€èƒŒåçš„æ•°å­¦"></a>3. æ–‡å­—å’Œè¯­è¨€èƒŒåçš„æ•°å­¦</h2><p>ä» <code>è±¡å½¢æ–‡å­—</code> åˆ° <code>æ‹¼éŸ³æ–‡å­—</code> æ˜¯ä¸€ä¸ªé£è·ƒï¼Œæè¿°ç‰©ä½“æ–¹å¼ä¸Šï¼Œä»å¤–è¡¨è¿›åŒ–åˆ°äº†æŠ½è±¡çš„æ¦‚å¿µï¼ŒåŒæ—¶ä¸è‡ªè§‰çš„é‡‡ç”¨äº†å¯¹ ä¿¡æ¯çš„ç¼–ç ã€‚åŒæ—¶ç¥–å…ˆå¯¹æ–‡å­—çš„ç¼–ç è¿˜éå¸¸åˆç†ï¼Œ<strong>å¸¸ç”¨å­—çŸ­ï¼Œç”Ÿåƒ»å­—é•¿</strong>ã€‚è¿™å®Œå…¨ç¬¦åˆä¿¡æ¯è®ºä¸­çš„ æœ€çŸ­ç¼–ç ç†è®ºã€‚  </p>
<p>è¿™ç§æ–‡å­—è®¾è®¡(å…¶å®æ˜¯ä¸€ç§ç¼–ç æ–¹æ³•)å¸¦æ¥çš„å¥½å¤„æ˜¯å†™èµ·æ¥çœæ—¶é—´ã€çœææ–™ã€‚</p>
<blockquote>
<p>å…¬å…ƒå‰26ä¸–çºª,çº¦4700å¹´å‰ï¼Œå‡ºç°äº†æ¥”å½¢æ–‡å­—(ä¸€ç§æ‹¼éŸ³æ–‡å­—)</p>
</blockquote>
<p>åœ¨å¤ä»£ï¼Œåœ¨é€ çº¸æœ¯å‘æ˜ä¹‹å‰ï¼Œäººä»¬è¯´è¯è¿˜æ˜¯ç±»ä¼¼ç™½è¯æ–‡ï¼Œæ–‡å­—ä¹¦å†™è¦åˆ»åœ¨ é¾Ÿå£³ã€çŸ³ç¢‘ã€ç«¹ç®€ ç­‰ä¸Šï¼Œå¾ˆè´¹æ—¶é—´å’Œææ–™ï¼Œæ‰€ä»¥æƒœå¢¨å¦‚é‡‘ï¼Œä½¿å¾—å¤æ–‡éå¸¸ç®€æ´ã€‚ </p>
<p>ç±»æ¯”ä¿¡æ¯ç§‘å­¦ ï¼š</p>
<ul>
<li>é€šä¿¡æ—¶: å¦‚æœä¿¡é“è¾ƒå®½ï¼Œä¿¡æ¯ä¸å¿…å‹ç¼©ï¼Œå¯ç›´æ¥ä¼ é€’;    </li>
<li>é€šä¿¡æ—¶: å¦‚æœä¿¡é“è¾ƒçª„ï¼Œä¿¡æ¯åœ¨ä¼ é€’å‰éœ€è¦å°½å¯èƒ½å‹ç¼©ï¼Œç„¶ååœ¨æ¥æ”¶ç«¯è¿›è¡Œè§£å‹ç¼©ã€‚</li>
</ul>
<p><code>è¯è¯­</code> ï¼š æ˜¯æœ‰é™å’Œå°é—­çš„é›†åˆ (å…¶å®å¯è®¾ç½®å®Œå¤‡çš„ç¼–ç è§„åˆ™)<br><code>è¯­è¨€</code> ï¼š æ˜¯æ— é™å’Œå¼€æ”¾çš„é›†åˆ (ä¸å¯ä»¥è®¾ç½®å®Œå¤‡çš„ç¼–ç è§„åˆ™)</p>
<p>ä»»ä½•è¯­è¨€çš„éƒ½æœ‰è¯­æ³•è§„åˆ™è¦†ç›–ä¸åˆ°çš„åœ°æ–¹ï¼Œè¿™äº›ä¸ç²¾ç¡®æ€§ï¼Œä¹Ÿé€ å°±äº†è¯­è¨€çš„ä¸°å¯Œå¤šå½©ã€‚</p>
<h2 id="4-å°ç»“"><a href="#4-å°ç»“" class="headerlink" title="4. å°ç»“"></a>4. å°ç»“</h2><p>äº†è§£ æ–‡å­—ã€æ•°å­—ã€è¯­è¨€ çš„å†å²</p>
<ul>
<li>é€šä¿¡çš„åŸç†å’Œä¿¡æ¯ä¼ æ’­çš„æ¨¡å‹</li>
<li>(ä¿¡æº) ç¼–ç  å’Œ æœ€çŸ­ç¼–ç </li>
<li>è§£ç çš„è§„åˆ™ : è¯­æ³•</li>
<li>èšç±»çš„æ¦‚å¿µ</li>
<li>åŒè¯­å¯¹ç…§æ–‡æœ¬ï¼Œè¯­æ–™åº“ å’Œ æœºå™¨ç¿»è¯‘</li>
<li>å¤šä¹‰æ€§å’Œåˆ©ç”¨ä¸Šä¸‹æ–‡æ¶ˆé™¤æ­§ä¹‰æ€§</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li>ã€Šæ•°å­¦ä¹‹ç¾ã€‹ è¯»ä¹¦ç¬”è®° </li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[python ç»“æ„åŒ–æ‚¨çš„å·¥ç¨‹]]></title>
      <url>http://shopee.ai/2017/11/04/python/language/py-language-structure-project/</url>
      <content type="html"><![CDATA[<p>å¦‚ä½•åˆ©ç”¨Pythonçš„ç‰¹æ€§æ¥åˆ›é€ ç®€æ´ã€é«˜æ•ˆçš„ä»£ç ã€‚ â€œ<strong>ç»“æ„åŒ–</strong>â€ æ„å‘³ç€é€šè¿‡ç¼–å†™ç®€æ´çš„ä»£ç ï¼Œä½¿é€»è¾‘å’Œä¾èµ–æ¸…æ™°.</p>
<a id="more"></a>
<h2 id="ä»“åº“çš„ç»“æ„"><a href="#ä»“åº“çš„ç»“æ„" class="headerlink" title="ä»“åº“çš„ç»“æ„"></a>ä»“åº“çš„ç»“æ„</h2><p>åœ¨ä¸€ä¸ªå¥åº·çš„å¼€å‘å‘¨æœŸä¸­ï¼Œä»£ç é£æ ¼ï¼ŒAPIè®¾è®¡å’Œè‡ªåŠ¨åŒ–æ˜¯éå¸¸å…³é”®çš„ã€‚åŒæ ·çš„ï¼Œå¯¹äºå·¥ç¨‹çš„ æ¶æ„ ,ä»“åº“çš„ç»“æ„ä¹Ÿæ˜¯å…³é”®çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>å½“ä¸€ä¸ªæ½œåœ¨çš„ç”¨æˆ·å’Œè´¡çŒ®è€…ç™»å½•åˆ°æ‚¨çš„ä»“åº“é¡µé¢æ—¶ï¼Œä»–ä»¬ä¼šçœ‹åˆ°è¿™äº›:</p>
<ul>
<li>å·¥ç¨‹çš„åå­—</li>
<li>å·¥ç¨‹çš„æè¿°</li>
<li>ä¸€ç³»åˆ—çš„æ–‡ä»¶</li>
</ul>
<blockquote>
<p>æ‹¥æœ‰è‰¯å¥½çš„å¸ƒå±€ï¼Œäº‹åŠåŠŸå€ã€‚</p>
</blockquote>
<h2 id="ä»“åº“æ ·ä¾‹"><a href="#ä»“åº“æ ·ä¾‹" class="headerlink" title="ä»“åº“æ ·ä¾‹"></a>ä»“åº“æ ·ä¾‹</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">README.rst</span><br><span class="line">LICENSE</span><br><span class="line">setup.py</span><br><span class="line">requirements.txt</span><br><span class="line">sample/__init__.py</span><br><span class="line">sample/core.py</span><br><span class="line">sample/helpers.py</span><br><span class="line">docs/conf.py</span><br><span class="line">docs/index.rst</span><br><span class="line">tests/<span class="built_in">test</span>_basic.py</span><br><span class="line">tests/<span class="built_in">test</span>_advanced.py</span><br></pre></td></tr></table></figure>
<h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>é™¤äº†æºä»£ç æœ¬èº«ä»¥å¤–ï¼Œè¿™ä¸ªæ¯«æ— ç–‘é—®æ˜¯æ‚¨ä»“åº“æœ€é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­è¦æœ‰å®Œæ•´çš„è®¸å¯è¯´æ˜å’Œæˆæƒã€‚</p>
<p>å¦‚æœæ‚¨ä¸å¤ªæ¸…æ¥šæ‚¨åº”è¯¥ä½¿ç”¨å“ªç§è®¸å¯æ–¹å¼ï¼Œè¯·æŸ¥çœ‹ choosealicense.com.</p>
<h2 id="Setup-py"><a href="#Setup-py" class="headerlink" title="Setup.py"></a>Setup.py</h2><p>â€¦</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://pythonguidecn.readthedocs.io/zh/latest/writing/structure.html" target="_blank" rel="external">ç»“æ„åŒ–ä½ çš„å·¥ç¨‹</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Taking care of your pet DOG!]]></title>
      <url>http://shopee.ai/2017/11/02/English/engvid-Taking-care-of-your-pet/</url>
      <content type="html"><![CDATA[<p>Do you have a dog? Do you want a dog? </p>
<a id="more"></a>
<p>Here in North America, we have specific rules, laws, and cultural customs that every dog owner must know. And if youâ€™re not a dog owner, you need to know this stuff, too, because youâ€™ll be around a lot of dogs here! In this video, Iâ€™ll teach you English vocabulary for the dog-related people youâ€™ll meet: breeders, vets, and groomers; as well as the doggie things you must have, such as a leash, dish, and treats. The best part? Dog owners love to talk about dogs. So you can practice your English by talking to other dog owners. Want more? Check out my friend Emmaâ€™s video about pets and animals here!</p>
<div class="video-container"><iframe src="//www.youtube.com/embed/CgGicK1q1eg" frameborder="0" allowfullscreen></iframe></div>
<blockquote>
<p>&amp;t=171s</p>
</blockquote>
<p>Ruff. Hi. Iâ€™m Ronnie. Iâ€™m not a dog, but I have a dog, and I like dogs. Not: I like dog. I donâ€™t want to eat a dog. No, actually I would eat a dog if you gave it to me. If you barbequed it, Iâ€™d eat it. But, oh, weâ€™re not talking about eating dogs. Weâ€™re going to talk about how to actually not eat your dog, how to care for your dog. In English and in our society we call our dog our best friends, although it really has no choice. Even if your dog doesnâ€™t like you, it has to hang out with you a lot because you have to care for your dog. So, Iâ€™m going to teach you English vocabulary, English verbs for caring for your dog. Hopefully you can learn some stuff. You probably know it in your language, but now youâ€™re going to learn English with me because thatâ€™s what I do.</p>
<p>So, the first thing that we should talk about is someone called a â€œbreederâ€. Okay? A breeder is a person who breeds dogs. So, Iâ€™ve written the word â€œbreedsâ€ here as a verb. Now, to breed a dog means that you get the boy dog whoâ€™s called a stud and you get the girl dog whoâ€™s called a bitch, and you make them have sex. I donâ€™t know how they do this, maybe they give them some doggy wine, play some nice doggy music, but anyways, the boy dog and the girl dog have dog sex, doggy style - and they have puppies. Woo-hoo. So the breeder is the person who cares for the dogs and makes more dogs. Theyâ€™re magical.</p>
<p>It is a really, really bad idea, almost illegal in Canada to buy a dog from the â€œpet shopâ€. We have really tried to cut down on dogs who are for sale in pet shops. Just the treatment of the dogs, thereâ€™s been a lot of controversy. Also, you can find a dog on the internet, you can go to Kijiji or you can go to many websites where you can buy a dog. Thereâ€™s also dog rescue sites where maybe a dog doesnâ€™t have a house, a dog is homeless, and you can rescue the dog and make him yourâ€¦ Or her your best friend. So thereâ€™s many options. I do not recommend the pet shop option, but make sure that your dog is going to beâ€¦ Youâ€™re going to be able to take care of a dog before you get one.</p>
<p>So, the place where the dogs or the puppies live and where they have all their doggy sex is called a â€œkennelâ€. So the kennel is the place, and the breeder is the person. You can use both of these words interchangeably, but a breeder is always a person. Itâ€™s important that you go and look at the kennel when youâ€™re buying a dog to make sure that itâ€™s clean and the dogs are well taken care of. Thereâ€™s some terrible-looking kennels I imagine.</p>
<p>The next person that youâ€™re not going to want to go to and your dog is going to hate more than the mailman is the â€œveterinarianâ€. Now, in English we donâ€™t need to bother saying: â€œVeterinarianâ€, which is an animal doctor. What we need to say is: â€œVetâ€. So youâ€™re going to say: â€œUh-oh, I have to take my dog to the vetâ€, because maybe your dog is sick. Vets in Canada and probably around the world, America as well, are very, very expensive. So we donâ€™t want our dogs to be sick because it costs us a lot of money.</p>
<p>But there is one thing that people or breeders really encourage you to do if you have gotten a puppy and youâ€™re not going to breed the dog, youâ€™re not going to haveâ€¦ Make more baby dogs with this. Thatâ€™s a whole other business. So, for this youâ€™re going to do what we call â€œget your dog fixedâ€. Your dog is not broken, donâ€™t worry, itâ€™s not a toy. So: â€œGet your dog fixedâ€, youâ€™re going to go to the vet, youâ€™re going to go to the animal doctor and whatâ€™s happenedâ€¦ Whatâ€™s going to happen is youâ€™re going to get your animal neutered. â€œNeuteredâ€ meansâ€¦ We have two different meaningâ€¦ Two different words we use for this. For the boys or for the studs, neutered means â€œcastratedâ€. Oh, gentlemen, gentlemen, this means theyâ€™re going to remove the dogâ€™s testicles so the dog cannot produce sperm to have little puppies. Donâ€™t worry, Iâ€™m sure the dog doesnâ€™t feel anything, and when he wakes up he is very happy because he has less balls to lick. So, â€œcastratedâ€ is only for boys and they remove the testicles. The word that we use for women, or sorry, girls or bitches, mm-hmm, is â€œspayedâ€.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux Search Cmd]]></title>
      <url>http://shopee.ai/2017/10/24/devops/linux-cmd-file-search/</url>
      <content type="html"><![CDATA[<p>whichï¼Œwhereisï¼Œlocateï¼Œfindï¼Œfind execï¼Œfind xargsï¼Œfindâ€¦</p>
<a id="more"></a>
<p>which   æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ã€‚<br>whereis æŸ¥çœ‹æ–‡ä»¶çš„ä½ç½®ã€‚<br>locate  é…åˆæ•°æ®åº“æŸ¥çœ‹æ–‡ä»¶ä½ç½®ã€‚<br>find    å®é™…æœå¯»ç¡¬ç›˜æŸ¥è¯¢æ–‡ä»¶åç§°ã€‚  </p>
<h2 id="1-which"><a href="#1-which" class="headerlink" title="1. which"></a>1. which</h2><p>whichå‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Œåœ¨PATHå˜é‡æŒ‡å®šçš„è·¯å¾„ä¸­ï¼Œæœç´¢æŸä¸ªç³»ç»Ÿå‘½ä»¤çš„ä½ç½®ï¼Œå¹¶ä¸”è¿”å›ç¬¬ä¸€ä¸ªæœç´¢ç»“æœã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># which pwd</span></span><br><span class="line">/bin/<span class="built_in">pwd</span></span><br><span class="line">[root@localhost ~]<span class="comment">#  which adduser</span></span><br><span class="line">/usr/sbin/adduser</span><br><span class="line">[root@localhost ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p>cd æ˜¯bash å†…å»ºçš„å‘½ä»¤ï¼</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ <span class="built_in">which</span> <span class="built_in">cd</span></span><br><span class="line"><span class="built_in">cd</span>: shell built-in <span class="built_in">command</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>which é»˜è®¤æ˜¯æ‰¾ PATH å†…æ‰€è§„èŒƒçš„ç›®å½•ï¼Œæ‰€ä»¥å½“ç„¶ä¸€å®šæ‰¾ä¸åˆ°çš„ï¼</p>
</blockquote>
<h2 id="2-whereis"><a href="#2-whereis" class="headerlink" title="2. whereis"></a>2. whereis</h2><p>whereiså‘½ä»¤åªèƒ½ç”¨äºç¨‹åºåçš„æœç´¢ï¼Œè€Œä¸”åªæœç´¢äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå‚æ•°-bï¼‰ã€manè¯´æ˜æ–‡ä»¶ï¼ˆå‚æ•°-mï¼‰å’Œæºä»£ç æ–‡ä»¶ï¼ˆå‚æ•°-sï¼‰ã€‚å¦‚æœçœç•¥å‚æ•°ï¼Œåˆ™è¿”å›æ‰€æœ‰ä¿¡æ¯ã€‚</p>
<p>å’Œfindç›¸æ¯”ï¼ŒwhereisæŸ¥æ‰¾çš„é€Ÿåº¦éå¸¸å¿«ï¼Œè¿™æ˜¯å› ä¸ºlinuxç³»ç»Ÿä¼šå°† ç³»ç»Ÿå†…çš„æ‰€æœ‰æ–‡ä»¶éƒ½è®°å½•åœ¨ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶ä¸­ï¼Œå½“ä½¿ç”¨whereiså’Œä¸‹é¢å³å°†ä»‹ç»çš„locateæ—¶ï¼Œä¼šä»æ•°æ®åº“ä¸­æŸ¥æ‰¾æ•°æ®ï¼Œè€Œä¸æ˜¯åƒfindå‘½ä»¤é‚£æ ·ï¼Œé€š è¿‡éå†ç¡¬ç›˜æ¥æŸ¥æ‰¾ï¼Œæ•ˆç‡è‡ªç„¶ä¼šå¾ˆé«˜ã€‚ </p>
<p>ä½†æ˜¯è¯¥æ•°æ®åº“æ–‡ä»¶å¹¶ä¸æ˜¯å®æ—¶æ›´æ–°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ—¶ä¸€æ˜ŸæœŸæ›´æ–°ä¸€æ¬¡ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åœ¨ç”¨whereiså’Œlocate æŸ¥æ‰¾æ–‡ä»¶æ—¶ï¼Œæœ‰æ—¶ä¼šæ‰¾åˆ°å·²ç»è¢«åˆ é™¤çš„æ•°æ®ï¼Œæˆ–è€…åˆšåˆšå»ºç«‹æ–‡ä»¶ï¼Œå´æ— æ³•æŸ¥æ‰¾åˆ°ï¼ŒåŸå› å°±æ˜¯å› ä¸ºæ•°æ®åº“æ–‡ä»¶æ²¡æœ‰è¢«æ›´æ–°ã€‚</p>
<h2 id="3-locate"><a href="#3-locate" class="headerlink" title="3. locate"></a>3. locate</h2><p>locateå‘½ä»¤å¯ä»¥åœ¨æœå¯»æ•°æ®åº“æ—¶å¿«é€Ÿæ‰¾åˆ°æ¡£æ¡ˆï¼Œæ•°æ®åº“ç”±updatedbç¨‹åºæ¥æ›´æ–°ï¼Œupdatedbæ˜¯ç”±cron daemonå‘¨æœŸæ€§å»ºç«‹çš„ï¼Œlocateå‘½ä»¤åœ¨æœå¯»æ•°æ®åº“æ—¶æ¯”ç”±æ•´ä¸ªç”±ç¡¬ç›˜èµ„æ–™æ¥æœå¯»èµ„æ–™æ¥å¾—å¿«ï¼Œä½†è¾ƒå·®åŠ²çš„æ˜¯locateæ‰€æ‰¾åˆ°çš„æ¡£æ¡ˆè‹¥æ˜¯æœ€è¿‘æ‰å»ºç«‹æˆ– åˆšæ›´åçš„ï¼Œå¯èƒ½ä¼šæ‰¾ä¸åˆ°ï¼Œåœ¨å†…å®šå€¼ä¸­ï¼Œupdatedbæ¯å¤©ä¼šè·‘ä¸€æ¬¡ï¼Œå¯ä»¥ç”±ä¿®æ”¹crontabæ¥æ›´æ–°è®¾å®šå€¼ã€‚(etc/crontab)</p>
<p>locateæŒ‡å®šç”¨åœ¨æœå¯»ç¬¦åˆæ¡ä»¶çš„æ¡£æ¡ˆï¼Œå®ƒä¼šå»å‚¨å­˜æ¡£æ¡ˆä¸ç›®å½•åç§°çš„æ•°æ®åº“å†…ï¼Œå¯»æ‰¾åˆä¹èŒƒæœ¬æ ·å¼æ¡ä»¶çš„æ¡£æ¡ˆæˆ–ç›®å½•å½•ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹æ®Šå­—å…ƒï¼ˆå¦‚â€<em>â€ æˆ–â€?â€ç­‰ï¼‰æ¥æŒ‡å®šèŒƒæœ¬æ ·å¼ï¼Œå¦‚æŒ‡å®šèŒƒæœ¬ä¸ºkcpa</em>ner, locateä¼šæ‰¾å‡ºæ‰€æœ‰èµ·å§‹å­—ä¸²ä¸ºkcpaä¸”ç»“å°¾ä¸ºnerçš„æ¡£æ¡ˆæˆ–ç›®å½•ï¼Œå¦‚åç§°ä¸ºkcpartnerè‹¥ç›®å½•å½•åç§°ä¸ºkcpa_neråˆ™ä¼šåˆ—å‡ºè¯¥ç›®å½•ä¸‹åŒ…æ‹¬ å­ç›®å½•åœ¨å†…çš„æ‰€æœ‰æ¡£æ¡ˆã€‚</p>
<p>locateæŒ‡ä»¤å’Œfindæ‰¾å¯»æ¡£æ¡ˆçš„åŠŸèƒ½ç±»ä¼¼ï¼Œä½†locateæ˜¯é€è¿‡updateç¨‹åºå°†ç¡¬ç›˜ä¸­çš„æ‰€æœ‰æ¡£æ¡ˆå’Œç›®å½•èµ„æ–™å…ˆå»ºç«‹ä¸€ä¸ªç´¢å¼•æ•°æ®åº“ï¼Œåœ¨ æ‰§è¡Œloacteæ—¶ç›´æ¥æ‰¾è¯¥ç´¢å¼•ï¼ŒæŸ¥è¯¢é€Ÿåº¦ä¼šè¾ƒå¿«ï¼Œç´¢å¼•æ•°æ®åº“ä¸€èˆ¬æ˜¯ç”±æ“ä½œç³»ç»Ÿç®¡ç†ï¼Œä½†ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è¾¾updateå¼ºè¿«ç³»ç»Ÿç«‹å³ä¿®æ”¹ç´¢å¼•æ•°æ®åº“ã€‚</p>
<blockquote>
<p>mac é»˜è®¤æ²¡å¯åŠ¨ locate</p>
</blockquote>
<h2 id="4-find"><a href="#4-find" class="headerlink" title="4. find"></a>4. find</h2><h3 id="4-1-æŸ¥æ‰¾æŒ‡å®šæ—¶é—´å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶"><a href="#4-1-æŸ¥æ‰¾æŒ‡å®šæ—¶é—´å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶" class="headerlink" title="4.1 æŸ¥æ‰¾æŒ‡å®šæ—¶é—´å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶"></a>4.1 æŸ¥æ‰¾æŒ‡å®šæ—¶é—´å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@peidachang ~]<span class="comment"># find -atime -2</span></span><br><span class="line">.</span><br><span class="line">./logs/monitor</span><br><span class="line">./.bashrc</span><br><span class="line">./.bash_profile</span><br><span class="line">./.bash_<span class="built_in">history</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼šè¶…æ‰¾48å°æ—¶å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶ </p>
</blockquote>
<h3 id="4-2-æ ¹æ®å…³é”®å­—æŸ¥æ‰¾"><a href="#4-2-æ ¹æ®å…³é”®å­—æŸ¥æ‰¾" class="headerlink" title="4.2 æ ¹æ®å…³é”®å­—æŸ¥æ‰¾"></a>4.2 æ ¹æ®å…³é”®å­—æŸ¥æ‰¾</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find . -name <span class="string">"*.log"</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-æŸ¥æ‰¾å½“å‰æ‰€æœ‰ç›®å½•å¹¶æ’åº"><a href="#4-3-æŸ¥æ‰¾å½“å‰æ‰€æœ‰ç›®å½•å¹¶æ’åº" class="headerlink" title="4.3 æŸ¥æ‰¾å½“å‰æ‰€æœ‰ç›®å½•å¹¶æ’åº"></a>4.3 æŸ¥æ‰¾å½“å‰æ‰€æœ‰ç›®å½•å¹¶æ’åº</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find . -type d | sort</span><br></pre></td></tr></table></figure>
<h3 id="4-4-æŒ‰ç±»å‹æŸ¥æ‰¾"><a href="#4-4-æŒ‰ç±»å‹æŸ¥æ‰¾" class="headerlink" title="4.4 æŒ‰ç±»å‹æŸ¥æ‰¾"></a>4.4 æŒ‰ç±»å‹æŸ¥æ‰¾</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find . -type f -name <span class="string">"*.log"</span></span><br></pre></td></tr></table></figure>
<h3 id="4-5-æŸ¥æ‰¾å½“å‰æ‰€æœ‰ç›®å½•å¹¶æ’åº"><a href="#4-5-æŸ¥æ‰¾å½“å‰æ‰€æœ‰ç›®å½•å¹¶æ’åº" class="headerlink" title="4.5 æŸ¥æ‰¾å½“å‰æ‰€æœ‰ç›®å½•å¹¶æ’åº"></a>4.5 æŸ¥æ‰¾å½“å‰æ‰€æœ‰ç›®å½•å¹¶æ’åº</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find . -type d | sort</span><br></pre></td></tr></table></figure>
<h3 id="4-6-æŒ‰å¤§å°æŸ¥æ‰¾æ–‡ä»¶"><a href="#4-6-æŒ‰å¤§å°æŸ¥æ‰¾æ–‡ä»¶" class="headerlink" title="4.6 æŒ‰å¤§å°æŸ¥æ‰¾æ–‡ä»¶"></a>4.6 æŒ‰å¤§å°æŸ¥æ‰¾æ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">find . -size +1000c -print</span><br></pre></td></tr></table></figure>
<h2 id="5-findå‘½ä»¤ä¹‹exec"><a href="#5-findå‘½ä»¤ä¹‹exec" class="headerlink" title="5. findå‘½ä»¤ä¹‹exec"></a>5. findå‘½ä»¤ä¹‹exec</h2><p>findæ˜¯æˆ‘ä»¬å¾ˆå¸¸ç”¨çš„ä¸€ä¸ªLinuxå‘½ä»¤ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬æŸ¥æ‰¾å‡ºæ¥çš„å¹¶ä¸ä»…ä»…æ˜¯çœ‹çœ‹è€Œå·²ï¼Œè¿˜ä¼šæœ‰è¿›ä¸€æ­¥çš„æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™execçš„ä½œç”¨å°±æ˜¾ç°å‡ºæ¥äº†ã€‚ </p>
<p><strong>execè§£é‡Šï¼š</strong></p>
<p>-exec  å‚æ•°åé¢è·Ÿçš„æ˜¯commandå‘½ä»¤ï¼Œå®ƒçš„ç»ˆæ­¢æ˜¯ä»¥;ä¸ºç»“æŸæ ‡å¿—çš„ï¼Œæ‰€ä»¥è¿™å¥å‘½ä»¤åé¢çš„åˆ†å·æ˜¯ä¸å¯ç¼ºå°‘çš„ï¼Œè€ƒè™‘åˆ°å„ä¸ªç³»ç»Ÿä¸­åˆ†å·ä¼šæœ‰ä¸åŒçš„æ„ä¹‰ï¼Œæ‰€ä»¥å‰é¢åŠ åæ–œæ ã€‚  </p>
<p>{}   èŠ±æ‹¬å·ä»£è¡¨å‰é¢findæŸ¥æ‰¾å‡ºæ¥çš„æ–‡ä»¶åã€‚  </p>
<p>ä½¿ç”¨findæ—¶ï¼Œåªè¦æŠŠæƒ³è¦çš„æ“ä½œå†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå°±å¯ä»¥ç”¨execæ¥é…åˆfindæŸ¥æ‰¾ï¼Œå¾ˆæ–¹ä¾¿çš„ã€‚åœ¨æœ‰äº›æ“ä½œç³»ç»Ÿä¸­åªå…è®¸-execé€‰é¡¹æ‰§è¡Œè¯¸å¦‚l sæˆ–ls -lè¿™æ ·çš„å‘½ä»¤ã€‚å¤§å¤šæ•°ç”¨æˆ·ä½¿ç”¨è¿™ä¸€é€‰é¡¹æ˜¯ä¸ºäº†æŸ¥æ‰¾æ—§æ–‡ä»¶å¹¶åˆ é™¤å®ƒä»¬ã€‚å»ºè®®åœ¨çœŸæ­£æ‰§è¡Œrmå‘½ä»¤åˆ é™¤æ–‡ä»¶ä¹‹å‰ï¼Œæœ€å¥½å…ˆç”¨lså‘½ä»¤çœ‹ä¸€ä¸‹ï¼Œç¡®è®¤å®ƒä»¬æ˜¯æ‰€è¦åˆ é™¤çš„æ–‡ä»¶ã€‚ execé€‰é¡¹åé¢è·Ÿéšç€æ‰€è¦æ‰§è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬ï¼Œç„¶åæ˜¯ä¸€å¯¹å„¿{ }ï¼Œä¸€ä¸ªç©ºæ ¼å’Œä¸€ä¸ª\ï¼Œæœ€åæ˜¯ä¸€ä¸ªåˆ†å·ã€‚ä¸ºäº†ä½¿ç”¨execé€‰é¡¹ï¼Œå¿…é¡»è¦åŒæ—¶ä½¿ç”¨printé€‰é¡¹ã€‚å¦‚æœéªŒè¯ä¸€ä¸‹findå‘½ä»¤ï¼Œä¼šå‘ç°è¯¥å‘½ä»¤åªè¾“å‡ºä»å½“å‰è·¯å¾„èµ·çš„ç›¸å¯¹è·¯å¾„åŠæ–‡ä»¶åã€‚</p>
<h3 id="5-1-ls-lå‘½ä»¤æ”¾findå‘½ä»¤çš„-exec"><a href="#5-1-ls-lå‘½ä»¤æ”¾findå‘½ä»¤çš„-exec" class="headerlink" title="5.1 ls -lå‘½ä»¤æ”¾findå‘½ä»¤çš„-exec"></a>5.1 ls -lå‘½ä»¤æ”¾findå‘½ä»¤çš„-exec</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ~/ghome/github/test [15:45:03]</span></span><br><span class="line">âœ ll</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r--  1 blair  staff     0B Oct 28 15:44 <span class="built_in">log</span>1</span><br><span class="line">-rw-r--r--  1 blair  staff     0B Oct 28 15:45 <span class="built_in">log</span>2</span><br><span class="line">-rw-r--r--  1 blair  staff     0B Oct 28 15:45 <span class="built_in">log</span>3</span><br><span class="line">-rw-r--r--  1 blair  staff     0B Oct 28 15:45 <span class="built_in">log</span>4</span><br><span class="line">(vpy2)</span><br><span class="line"><span class="comment"># ~/ghome/github/test [15:45:03]</span></span><br><span class="line">âœ find . -type f -exec ls <span class="_">-l</span> &#123;&#125; \;</span><br><span class="line">-rw-r--r--  1 blair  staff  0 Oct 28 15:45 ./<span class="built_in">log</span>4</span><br><span class="line">-rw-r--r--  1 blair  staff  0 Oct 28 15:45 ./<span class="built_in">log</span>3</span><br><span class="line">-rw-r--r--  1 blair  staff  0 Oct 28 15:45 ./<span class="built_in">log</span>2</span><br><span class="line">-rw-r--r--  1 blair  staff  0 Oct 28 15:44 ./<span class="built_in">log</span>1</span><br><span class="line">(vpy2)</span><br><span class="line"><span class="comment"># ~/ghome/github/test [15:45:04]</span></span><br><span class="line">âœ</span><br></pre></td></tr></table></figure>
<h3 id="5-2-æ›´æ”¹æ—¶é—´åœ¨næ—¥ä»¥å‰çš„æ–‡ä»¶å¹¶åˆ é™¤"><a href="#5-2-æ›´æ”¹æ—¶é—´åœ¨næ—¥ä»¥å‰çš„æ–‡ä»¶å¹¶åˆ é™¤" class="headerlink" title="5.2 æ›´æ”¹æ—¶é—´åœ¨næ—¥ä»¥å‰çš„æ–‡ä»¶å¹¶åˆ é™¤"></a>5.2 æ›´æ”¹æ—¶é—´åœ¨næ—¥ä»¥å‰çš„æ–‡ä»¶å¹¶åˆ é™¤</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">find . -type f -mtime +14 -exec rm &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<h3 id="5-3-æ›´æ”¹æ—¶é—´åœ¨næ—¥å‰æ–‡ä»¶å¹¶æç¤ºåˆ é™¤"><a href="#5-3-æ›´æ”¹æ—¶é—´åœ¨næ—¥å‰æ–‡ä»¶å¹¶æç¤ºåˆ é™¤" class="headerlink" title="5.3 æ›´æ”¹æ—¶é—´åœ¨næ—¥å‰æ–‡ä»¶å¹¶æç¤ºåˆ é™¤"></a>5.3 æ›´æ”¹æ—¶é—´åœ¨næ—¥å‰æ–‡ä»¶å¹¶æç¤ºåˆ é™¤</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ~/ghome/github/test [15:47:35]</span><br><span class="line">âœ ll</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r--  1 blair  staff     0B Oct 28 15:44 log1</span><br><span class="line">-rw-r--r--  1 blair  staff     0B Oct 28 15:45 log2</span><br><span class="line">-rw-r--r--  1 blair  staff     0B Oct 28 15:45 log3</span><br><span class="line">-rw-r--r--  1 blair  staff     0B Oct 28 15:45 log4</span><br><span class="line">(vpy2)</span><br><span class="line"># ~/ghome/github/test [15:47:38]</span><br><span class="line">âœ find . -name &quot;*log*&quot; -mtime -1 -ok rm &#123;&#125; \;</span><br><span class="line">&quot;rm ./log4&quot;?</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ç›®å½•ä¸­æŸ¥æ‰¾æ›´æ”¹æ—¶é—´åœ¨næ—¥ä»¥å‰çš„æ–‡ä»¶å¹¶åˆ é™¤å®ƒä»¬ï¼Œåœ¨åˆ é™¤ä¹‹å‰å…ˆç»™å‡ºæç¤º</p>
</blockquote>
<h3 id="5-4-execä¸­ä½¿ç”¨grepå‘½ä»¤"><a href="#5-4-execä¸­ä½¿ç”¨grepå‘½ä»¤" class="headerlink" title="5.4 -execä¸­ä½¿ç”¨grepå‘½ä»¤"></a>5.4 -execä¸­ä½¿ç”¨grepå‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find /etc -name <span class="string">"passwd*"</span> -exec grep <span class="string">"root"</span> &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<h3 id="5-5-æŸ¥æ‰¾æ–‡ä»¶ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•"><a href="#5-5-æŸ¥æ‰¾æ–‡ä»¶ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•" class="headerlink" title="5.5 æŸ¥æ‰¾æ–‡ä»¶ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•"></a>5.5 æŸ¥æ‰¾æ–‡ä»¶ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find . -name <span class="string">"*.log"</span> -exec mv &#123;&#125; .. \;</span><br></pre></td></tr></table></figure>
<h3 id="5-6-execé€‰é¡¹æ‰§è¡Œcpå‘½ä»¤"><a href="#5-6-execé€‰é¡¹æ‰§è¡Œcpå‘½ä»¤" class="headerlink" title="5.6 execé€‰é¡¹æ‰§è¡Œcpå‘½ä»¤"></a>5.6 execé€‰é¡¹æ‰§è¡Œcpå‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">find . -name &quot;*.log&quot; -exec cp &#123;&#125; test3 \;</span><br></pre></td></tr></table></figure>
<h2 id="6-findå‘½ä»¤ä¹‹xargs"><a href="#6-findå‘½ä»¤ä¹‹xargs" class="headerlink" title="6. findå‘½ä»¤ä¹‹xargs"></a>6. findå‘½ä»¤ä¹‹xargs</h2><p>åœ¨ä½¿ç”¨ findå‘½ä»¤çš„-execé€‰é¡¹å¤„ç†åŒ¹é…åˆ°çš„æ–‡ä»¶æ—¶ï¼Œ findå‘½ä»¤å°†æ‰€æœ‰åŒ¹é…åˆ°çš„æ–‡ä»¶ä¸€èµ·ä¼ é€’ç»™execæ‰§è¡Œã€‚ä½†æœ‰äº›ç³»ç»Ÿå¯¹èƒ½å¤Ÿä¼ é€’ç»™execçš„å‘½ä»¤é•¿åº¦æœ‰é™åˆ¶ï¼Œè¿™æ ·åœ¨findå‘½ä»¤è¿è¡Œå‡ åˆ†é’Ÿä¹‹åï¼Œå°±ä¼šå‡ºç°æº¢å‡ºé”™è¯¯ã€‚é”™è¯¯ä¿¡æ¯é€šå¸¸æ˜¯â€œå‚æ•°åˆ—å¤ªé•¿â€æˆ–â€œå‚æ•°åˆ—æº¢å‡ºâ€ã€‚è¿™å°±æ˜¯xargså‘½ä»¤çš„ç”¨å¤„æ‰€åœ¨ï¼Œç‰¹åˆ«æ˜¯ä¸findå‘½ä»¤ä¸€èµ·ä½¿ç”¨ã€‚  </p>
<p>findå‘½ä»¤æŠŠåŒ¹é…åˆ°çš„æ–‡ä»¶ä¼ é€’ç»™xargså‘½ä»¤ï¼Œè€Œxargså‘½ä»¤æ¯æ¬¡åªè·å–ä¸€éƒ¨åˆ†æ–‡ä»¶è€Œä¸æ˜¯å…¨éƒ¨ï¼Œä¸åƒ-execé€‰é¡¹é‚£æ ·ã€‚è¿™æ ·å®ƒå¯ä»¥å…ˆå¤„ç†æœ€å…ˆè·å–çš„ä¸€éƒ¨åˆ†æ–‡ä»¶ï¼Œç„¶åæ˜¯ä¸‹ä¸€æ‰¹ï¼Œå¹¶å¦‚æ­¤ç»§ç»­ä¸‹å»ã€‚  </p>
<p>åœ¨æœ‰äº›ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨-execé€‰é¡¹ä¼šä¸ºå¤„ç†æ¯ä¸€ä¸ªåŒ¹é…åˆ°çš„æ–‡ä»¶è€Œå‘èµ·ä¸€ä¸ªç›¸åº”çš„è¿›ç¨‹ï¼Œå¹¶éå°†åŒ¹é…åˆ°çš„æ–‡ä»¶å…¨éƒ¨ä½œä¸ºå‚æ•°ä¸€æ¬¡æ‰§è¡Œï¼›è¿™æ ·åœ¨æœ‰äº›æƒ…å†µä¸‹å°±ä¼šå‡ºç°è¿›ç¨‹è¿‡å¤šï¼Œç³»ç»Ÿæ€§èƒ½ä¸‹é™çš„é—®é¢˜ï¼Œå› è€Œæ•ˆç‡ä¸é«˜ï¼› è€Œä½¿ç”¨xargså‘½ä»¤åˆ™åªæœ‰ä¸€ä¸ªè¿›ç¨‹ã€‚å¦å¤–ï¼Œåœ¨ä½¿ç”¨xargså‘½ä»¤æ—¶ï¼Œç©¶ç«Ÿæ˜¯ä¸€æ¬¡è·å–æ‰€æœ‰çš„å‚æ•°ï¼Œè¿˜æ˜¯åˆ†æ‰¹å–å¾—å‚æ•°ï¼Œä»¥åŠæ¯ä¸€æ¬¡è·å–å‚æ•°çš„æ•°ç›®éƒ½ä¼šæ ¹æ®è¯¥å‘½ä»¤çš„é€‰é¡¹åŠç³»ç»Ÿå†…æ ¸ä¸­ç›¸åº”çš„å¯è°ƒå‚æ•°æ¥ç¡®å®šã€‚</p>
<h3 id="6-1-find-type-f-print-xargs-file"><a href="#6-1-find-type-f-print-xargs-file" class="headerlink" title="6.1 find . -type f -print | xargs file"></a>6.1 find . -type f -print | xargs file</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ~/ghome/github/test [7:41:40]</span></span><br><span class="line">âœ find . -type f -print | xargs file</span><br><span class="line">./<span class="built_in">log</span>4: empty</span><br><span class="line">./<span class="built_in">log</span>3: empty</span><br><span class="line">./<span class="built_in">log</span>2: empty</span><br><span class="line">./<span class="built_in">log</span>1: ASCII text</span><br><span class="line">(vpy2)</span><br></pre></td></tr></table></figure>
<h3 id="6-2-ç”¨æˆ·å…·æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™çš„æ–‡ä»¶ï¼Œå¹¶æ”¶å›ç›¸åº”çš„å†™æƒé™"><a href="#6-2-ç”¨æˆ·å…·æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™çš„æ–‡ä»¶ï¼Œå¹¶æ”¶å›ç›¸åº”çš„å†™æƒé™" class="headerlink" title="6.2 ç”¨æˆ·å…·æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™çš„æ–‡ä»¶ï¼Œå¹¶æ”¶å›ç›¸åº”çš„å†™æƒé™"></a>6.2 ç”¨æˆ·å…·æœ‰è¯»ã€å†™å’Œæ‰§è¡Œæƒé™çš„æ–‡ä»¶ï¼Œå¹¶æ”¶å›ç›¸åº”çš„å†™æƒé™</h3><p>find . -perm -7 -print | xargs chmod o-w</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ~/ghome/github/test [7:44:26]</span></span><br><span class="line">âœ find . -perm -7 -print</span><br><span class="line">./<span class="built_in">log</span>3</span><br><span class="line">(vpy2)</span><br><span class="line"><span class="comment"># ~/ghome/github/test [7:44:27]</span></span><br><span class="line">âœ find . -perm -7 -print | xargs chmod o-w</span><br><span class="line">(vpy2)</span><br><span class="line"><span class="comment"># ~/ghome/github/test [7:44:49]</span></span><br><span class="line">âœ ll</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--  1 blair  staff    32B Oct 28 15:54 <span class="built_in">log</span>1</span><br><span class="line">-rw-r--r--  1 blair  staff     0B Oct 28 15:45 <span class="built_in">log</span>2</span><br><span class="line">-rwxrwxr-x  1 blair  staff     0B Oct 28 15:45 <span class="built_in">log</span>3</span><br><span class="line">-rw-r--r--  1 blair  staff     0B Oct 28 15:45 <span class="built_in">log</span>4</span><br><span class="line">(vpy2)</span><br><span class="line"><span class="comment"># ~/ghome/github/test [7:44:50]</span></span><br></pre></td></tr></table></figure>
<h3 id="6-3-grepå‘½ä»¤åœ¨æ‰€æœ‰çš„æ™®é€šæ–‡ä»¶ä¸­æœç´¢hostnameè¿™ä¸ªè¯"><a href="#6-3-grepå‘½ä»¤åœ¨æ‰€æœ‰çš„æ™®é€šæ–‡ä»¶ä¸­æœç´¢hostnameè¿™ä¸ªè¯" class="headerlink" title="6.3 grepå‘½ä»¤åœ¨æ‰€æœ‰çš„æ™®é€šæ–‡ä»¶ä¸­æœç´¢hostnameè¿™ä¸ªè¯"></a>6.3 grepå‘½ä»¤åœ¨æ‰€æœ‰çš„æ™®é€šæ–‡ä»¶ä¸­æœç´¢hostnameè¿™ä¸ªè¯</h3><p>find . -type f -print | xargs grep â€œhostnameâ€</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># find . -type f -print | xargs grep "hostname"</span></span><br><span class="line">./<span class="built_in">log</span>2013.log:hostnamebaidu=baidu.com</span><br><span class="line">./<span class="built_in">log</span>2013.log:hostnamesina=sina.com</span><br><span class="line">./<span class="built_in">log</span>2013.log:hostnames=<span class="literal">true</span>[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<h3 id="6-4-ä½¿ç”¨xargsæ‰§è¡Œmv"><a href="#6-4-ä½¿ç”¨xargsæ‰§è¡Œmv" class="headerlink" title="6.4 ä½¿ç”¨xargsæ‰§è¡Œmv"></a>6.4 ä½¿ç”¨xargsæ‰§è¡Œmv</h3><p>find . -name â€œ*.logâ€ | xargs -i mv {} test4</p>
<blockquote>
<p>ä½¿ç”¨-iå‚æ•°é»˜è®¤çš„å‰é¢è¾“å‡ºç”¨{}ä»£æ›¿ï¼Œ-Iå‚æ•°å¯ä»¥æŒ‡å®šå…¶ä»–ä»£æ›¿å­—ç¬¦</p>
</blockquote>
<h3 id="6-5-xargsçš„-på‚æ•°çš„ä½¿ç”¨"><a href="#6-5-xargsçš„-på‚æ•°çš„ä½¿ç”¨" class="headerlink" title="6.5 xargsçš„-på‚æ•°çš„ä½¿ç”¨"></a>6.5 xargsçš„-på‚æ•°çš„ä½¿ç”¨</h3><p>find . -name â€œ*.logâ€ | xargs -p -i mv {} ..</p>
<blockquote>
<p>-på‚æ•°ä¼šæç¤ºè®©ä½ ç¡®è®¤æ˜¯å¦æ‰§è¡Œåé¢çš„å‘½ä»¤,yæ‰§è¡Œï¼Œnä¸æ‰§è¡Œã€‚</p>
</blockquote>
<h2 id="7-find-å‘½ä»¤çš„å‚æ•°è¯¦è§£"><a href="#7-find-å‘½ä»¤çš„å‚æ•°è¯¦è§£" class="headerlink" title="7. find å‘½ä»¤çš„å‚æ•°è¯¦è§£"></a>7. <a href="http://www.cnblogs.com/peida/archive/2012/11/16/2773289.html" target="_blank" rel="external">find å‘½ä»¤çš„å‚æ•°è¯¦è§£</a></h2><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.cnblogs.com/peida/archive/2012/12/05/2803591.html" target="_blank" rel="external">æ¯å¤©ä¸€ä¸ªlinuxå‘½ä»¤ç›®å½•</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux File Basic Cmd]]></title>
      <url>http://shopee.ai/2017/10/23/devops/linux-cmd-1-file-directory-operation/</url>
      <content type="html"><![CDATA[<p>ls, cd, pwd, mkdir, rm, rmdir, mv, cp, touch, cat, nl, more, less, head, tail</p>
<a id="more"></a>
<h2 id="1-ls"><a href="#1-ls" class="headerlink" title="1. ls"></a>1. ls</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ls -l -R /home/blair/ghome</span><br><span class="line">ls -ctrl s*</span><br></pre></td></tr></table></figure>
<p>åˆ—å‡º /opt/soft æ–‡ä»¶ä¸‹é¢çš„å­ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ls -F /opt/soft |grep /$</span><br></pre></td></tr></table></figure>
<p>ç›®å½•äºåç§°ååŠ â€/â€œ, å¯æ‰§è¡Œæ¡£äºåç§°ååŠ â€*â€ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ls -AFl</span><br></pre></td></tr></table></figure>
<p>åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰çš„ç»å¯¹è·¯å¾„ï¼Œ å¯¹ç›®å½•ä¸åšé€’å½’</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find <span class="variable">$PWD</span> -maxdepth 1 | xargs ls -ld</span><br></pre></td></tr></table></figure>
<p>é€’å½’åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰çš„ç»å¯¹è·¯å¾„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find <span class="variable">$PWD</span> | xargs ls -ld</span><br></pre></td></tr></table></figure>
<h2 id="2-cd"><a href="#2-cd" class="headerlink" title="2. cd"></a>2. cd</h2><blockquote>
<p><code>cd -</code> or <code>cd</code> or <code>cd ~</code></p>
</blockquote>
<h2 id="3-pwd"><a href="#3-pwd" class="headerlink" title="3. pwd"></a>3. pwd</h2><p><code>pwd -P</code> æ˜¾ç¤ºå‡ºå®é™…è·¯å¾„ï¼Œè€Œéä½¿ç”¨è¿æ¥ï¼ˆlinkï¼‰è·¯å¾„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># /usr/local/xsoft/software/scala [22:17:59]</span><br><span class="line">âœ pwd</span><br><span class="line">/usr/local/xsoft/software/scala</span><br><span class="line">(vpy3)</span><br><span class="line"># /usr/local/xsoft/software/scala [22:17:59]</span><br><span class="line">âœ pwd -P</span><br><span class="line">/usr/local/xsoft/deploy/scala-2.11.7</span><br><span class="line">(vpy3)</span><br><span class="line"># /usr/local/xsoft/software/scala [22:18:02]</span><br><span class="line">âœ</span><br></pre></td></tr></table></figure>
<h2 id="4-mkdir"><a href="#4-mkdir" class="headerlink" title="4. mkdir"></a>4. mkdir</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir <span class="built_in">test</span>1</span><br><span class="line">mkdir -p <span class="built_in">test</span>2/<span class="built_in">test</span>22</span><br><span class="line">mkdir -m 777 <span class="built_in">test</span>3</span><br><span class="line">mkdir -v <span class="built_in">test</span>4</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªå‘½ä»¤åˆ›å»ºé¡¹ç›®çš„ç›®å½•ç»“æ„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ~/ghome/seek/test2 [22:23:06]</span></span><br><span class="line">âœ mkdir -vp scf/&#123;lib/,bin/,doc/&#123;info,product&#125;,logs/&#123;info,product&#125;,service/deploy/&#123;info,product&#125;&#125;</span><br><span class="line">(vpy3)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ~/ghome/seek/test2 [22:23:08]</span><br><span class="line">âœ tree</span><br><span class="line">.</span><br><span class="line">â””â”€â”€ scf</span><br><span class="line">    â”œâ”€â”€ bin</span><br><span class="line">    â”œâ”€â”€ doc</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ info</span><br><span class="line">    â”‚Â Â  â””â”€â”€ product</span><br><span class="line">    â”œâ”€â”€ lib</span><br><span class="line">    â”œâ”€â”€ logs</span><br><span class="line">    â”‚Â Â  â”œâ”€â”€ info</span><br><span class="line">    â”‚Â Â  â””â”€â”€ product</span><br><span class="line">    â””â”€â”€ service</span><br><span class="line">        â””â”€â”€ deploy</span><br><span class="line">            â”œâ”€â”€ info</span><br><span class="line">            â””â”€â”€ product</span><br><span class="line"></span><br><span class="line">13 directories, 0 files</span><br><span class="line">(vpy3)</span><br><span class="line"># ~/ghome/seek/test2 [22:23:10]</span><br></pre></td></tr></table></figure>
<h2 id="5-rm"><a href="#5-rm" class="headerlink" title="5. rm"></a>5. rm</h2><p>-f, â€“force    å¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä»ä¸ç»™å‡ºæç¤ºã€‚<br>-i, â€“interactive è¿›è¡Œäº¤äº’å¼åˆ é™¤<br>-r, -R, â€“recursive   æŒ‡ç¤ºrmå°†å‚æ•°ä¸­åˆ—å‡ºçš„å…¨éƒ¨ç›®å½•å’Œå­ç›®å½•å‡é€’å½’åœ°åˆ é™¤ã€‚<br>-v, â€“verbose    è¯¦ç»†æ˜¾ç¤ºè¿›è¡Œçš„æ­¥éª¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ~/ghome/seek/test2 [22:29:28]</span></span><br><span class="line">âœ rm -i f1</span><br><span class="line">remove f1?</span><br></pre></td></tr></table></figure>
<p><strong>è‡ªå®šä¹‰å›æ”¶ç«™åŠŸèƒ½</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">myrm</span></span>()&#123; D=/tmp/$(date +%Y%m%d%H%M%S); mkdir -p <span class="variable">$D</span>; mv <span class="string">"<span class="variable">$@</span>"</span> <span class="variable">$D</span> &amp;&amp; <span class="built_in">echo</span> <span class="string">"moved to <span class="variable">$D</span> ok"</span>; &#125;</span><br></pre></td></tr></table></figure>
<p><strong>for example</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost test]# myrm()&#123; D=/tmp/$(date +%Y%m%d%H%M%S); mkdir -p $D; mv &quot;$@&quot; $D &amp;&amp; echo &quot;moved to $D ok&quot;; &#125;</span><br><span class="line">[root@localhost test]# alias rm=&apos;myrm&apos;</span><br><span class="line">[root@localhost test]# touch 1.log 2.log 3.log</span><br><span class="line">[root@localhost test]# ll</span><br><span class="line">æ€»è®¡ 16</span><br><span class="line">-rw-r--r-- 1 root root    0 10-26 15:08 1.log</span><br><span class="line">-rw-r--r-- 1 root root    0 10-26 15:08 2.log</span><br><span class="line">-rw-r--r-- 1 root root    0 10-26 15:08 3.log</span><br><span class="line">drwxr-xr-x 7 root root 4096 10-25 18:07 scf</span><br><span class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</span><br><span class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</span><br><span class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</span><br><span class="line">[root@localhost test]# rm [123].log</span><br><span class="line">moved to /tmp/20121026150901 ok</span><br><span class="line">[root@localhost test]# ll</span><br><span class="line">æ€»è®¡ 16drwxr-xr-x 7 root root 4096 10-25 18:07 scf</span><br><span class="line">drwxrwxrwx 2 root root 4096 10-25 17:46 test3</span><br><span class="line">drwxr-xr-x 2 root root 4096 10-25 17:56 test4</span><br><span class="line">drwxr-xr-x 3 root root 4096 10-25 17:56 test5</span><br><span class="line">[root@localhost test]# ls /tmp/20121026150901/</span><br><span class="line">1.log  2.log  3.log</span><br><span class="line">[root@localhost test]#</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Reference: </strong> <a href="http://www.cnblogs.com/peida/archive/2012/10/26/2740521.html" target="_blank" rel="external">æ¯å¤©ä¸€ä¸ªlinuxå‘½ä»¤ï¼ˆ5ï¼‰ï¼šrm å‘½ä»¤</a></p>
</blockquote>
<h2 id="6-rmdir"><a href="#6-rmdir" class="headerlink" title="6. rmdir"></a>6. rmdir</h2><blockquote>
<p>åˆ é™¤ç©ºç›®å½•</p>
<p>rmdir -p å½“å­ç›®å½•è¢«åˆ é™¤åä½¿å®ƒä¹Ÿæˆä¸ºç©ºç›®å½•çš„è¯ï¼Œåˆ™é¡ºä¾¿ä¸€å¹¶åˆ é™¤ </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost scf]<span class="comment"># rmdir -p logs</span></span><br><span class="line">rmdir: logs: ç›®å½•éç©º</span><br><span class="line"></span><br><span class="line">[root@localhost scf]<span class="comment"># tree</span></span><br><span class="line">.</span><br><span class="line">|-- bin</span><br><span class="line">|-- doc</span><br><span class="line">|-- lib</span><br><span class="line">|-- logs</span><br><span class="line">|   `-- product</span><br><span class="line">`-- service</span><br><span class="line">    `-- deploy</span><br><span class="line">        |-- info</span><br><span class="line">        `-- product</span><br><span class="line"> </span><br><span class="line">9 directories, 0 files</span><br></pre></td></tr></table></figure>
<p>[root@localhost scf]# rmdir -p logs/product</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost scf]<span class="comment"># tree</span></span><br><span class="line">.</span><br><span class="line">|-- bin</span><br><span class="line">|-- doc</span><br><span class="line">|-- lib</span><br><span class="line">`-- service</span><br><span class="line">`-- deploy</span><br><span class="line">        |-- info</span><br><span class="line">        `-- product</span><br></pre></td></tr></table></figure>
<h2 id="7-mv"><a href="#7-mv" class="headerlink" title="7. mv"></a>7. mv</h2><p>-i ï¼šè‹¥ç›®æ ‡æ–‡ä»¶ (destination) å·²ç»å­˜åœ¨æ—¶ï¼Œå°±ä¼šè¯¢é—®æ˜¯å¦è¦†ç›–ï¼<br>-t  ï¼š â€“target-directory=DIRECTORY move all SOURCE arguments into DIRECTORYï¼Œå³æŒ‡å®šmvçš„ç›®æ ‡ç›®å½•ï¼Œè¯¥é€‰é¡¹é€‚ç”¨äºç§»åŠ¨å¤šä¸ªæºæ–‡ä»¶åˆ°ä¸€ä¸ªç›®å½•çš„æƒ…å†µï¼Œæ­¤æ—¶ç›®æ ‡ç›®å½•åœ¨å‰ï¼Œæºæ–‡ä»¶åœ¨åã€‚</p>
<h2 id="8-cp"><a href="#8-cp" class="headerlink" title="8. cp"></a>8. cp</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cp -a test3 test4</span><br><span class="line">cp -s log.log log_link.log</span><br></pre></td></tr></table></figure>
<h2 id="9-touch"><a href="#9-touch" class="headerlink" title="9. touch"></a>9. touch</h2><p>è®¾å®šæ–‡ä»¶çš„æ—¶é—´æˆ³</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">touch -t 201211142234.50 log.log</span><br></pre></td></tr></table></figure>
<p>æ›´æ–° log2012.log çš„æ—¶é—´å’Œ log.log æ—¶é—´æˆ³ç›¸åŒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">touch -r log.log log2012.log</span><br></pre></td></tr></table></figure>
<h2 id="10-cat"><a href="#10-cat" class="headerlink" title="10. cat"></a>10. cat</h2><ol>
<li>ä¸€æ¬¡æ˜¾ç¤ºæ•´ä¸ªæ–‡ä»¶:cat filename</li>
<li>ä»é”®ç›˜åˆ›å»ºä¸€ä¸ªæ–‡ä»¶:cat &gt; filename åªèƒ½åˆ›å»ºæ–°æ–‡ä»¶,ä¸èƒ½ç¼–è¾‘å·²æœ‰æ–‡ä»¶.</li>
<li>å°†å‡ ä¸ªæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶:cat file1 file2 &gt; file</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ cat -n log.log <span class="built_in">log</span>2012.log</span><br><span class="line">     1	asd</span><br><span class="line">     2</span><br><span class="line">     3	asd</span><br><span class="line">     1	k1</span><br><span class="line">     2	k2</span><br><span class="line">     3</span><br><span class="line">     4	k3</span><br><span class="line">(vpy3)</span><br><span class="line"><span class="comment"># ~/ghome/seek/test2 [23:02:19]</span></span><br><span class="line">âœ</span><br></pre></td></tr></table></figure>
<blockquote>
<p>tac (åå‘åˆ—ç¤º).<br>tac log.txt</p>
</blockquote>
<h2 id="11-nl"><a href="#11-nl" class="headerlink" title="11. nl"></a>11. nl</h2><p>nlå‘½ä»¤åœ¨linuxç³»ç»Ÿä¸­ç”¨æ¥è®¡ç®—æ–‡ä»¶ä¸­è¡Œå·ã€‚nl å¯ä»¥å°†è¾“å‡ºçš„æ–‡ä»¶å†…å®¹è‡ªåŠ¨çš„åŠ ä¸Šè¡Œå·ï¼</p>
<p>å‘½ä»¤å‚æ•°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-b  ï¼šæŒ‡å®šè¡Œå·æŒ‡å®šçš„æ–¹å¼ï¼Œä¸»è¦æœ‰ä¸¤ç§ï¼š</span><br><span class="line">-b a ï¼šè¡¨ç¤ºä¸è®ºæ˜¯å¦ä¸ºç©ºè¡Œï¼Œä¹ŸåŒæ ·åˆ—å‡ºè¡Œå·(ç±»ä¼¼ cat -n)ï¼›</span><br><span class="line">-b t ï¼šå¦‚æœæœ‰ç©ºè¡Œï¼Œç©ºçš„é‚£ä¸€è¡Œä¸è¦åˆ—å‡ºè¡Œå·(é»˜è®¤å€¼)ï¼›</span><br><span class="line">-n  ï¼šåˆ—å‡ºè¡Œå·è¡¨ç¤ºçš„æ–¹æ³•ï¼Œä¸»è¦æœ‰ä¸‰ç§ï¼š</span><br><span class="line">-n ln ï¼šè¡Œå·åœ¨è¤å¹•çš„æœ€å·¦æ–¹æ˜¾ç¤ºï¼›</span><br><span class="line">-n rn ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”ä¸åŠ  0 ï¼›</span><br><span class="line">-n rz ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”åŠ  0 ï¼›</span><br><span class="line">-w  ï¼šè¡Œå·æ ä½çš„å ç”¨çš„ä½æ•°ã€‚</span><br><span class="line">-p åœ¨é€»è¾‘å®šç•Œç¬¦å¤„ä¸é‡æ–°å¼€å§‹è®¡ç®—ã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># nl log2012.log </span></span><br><span class="line">     1  2012-01</span><br><span class="line">     2  2012-02</span><br><span class="line">       </span><br><span class="line">       </span><br><span class="line">     3  ======[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost test]# nl -b a log2012.log </span><br><span class="line">     1  2012-01</span><br><span class="line">     2  2012-02</span><br><span class="line">     3</span><br><span class="line">     4</span><br><span class="line">     5  ======[root@localhost test]#</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># nl -b a -n rz log2014.log </span></span><br><span class="line">000001  2014-01</span><br><span class="line">000002  2014-02</span><br><span class="line">000003  2014-03</span><br><span class="line">000004  2014-04</span><br><span class="line">000005  2014-05</span><br><span class="line">000006  2014-06</span><br><span class="line">000007  2014-07</span><br><span class="line">000008  2014-08</span><br><span class="line">000009  2014-09</span><br><span class="line">000010  2014-10</span><br><span class="line">000011  2014-11</span><br><span class="line">000012  2014-12</span><br><span class="line">000013  =======</span><br><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># nl -b a -n rz -w 3 log2014.log </span></span><br><span class="line">001     2014-01</span><br><span class="line">002     2014-02</span><br><span class="line">003     2014-03</span><br><span class="line">004     2014-04</span><br><span class="line">005     2014-05</span><br><span class="line">006     2014-06</span><br><span class="line">007     2014-07</span><br><span class="line">008     2014-08</span><br><span class="line">009     2014-09</span><br><span class="line">010     2014-10</span><br><span class="line">011     2014-11</span><br><span class="line">012     2014-12</span><br><span class="line">013     =======</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼š nl -b a -n rz å‘½ä»¤è¡Œå·é»˜è®¤ä¸ºå…­ä½ï¼Œè¦è°ƒæ•´ä½æ•°å¯ä»¥åŠ ä¸Šå‚æ•° -w 3 è°ƒæ•´ä¸º3ä½ã€‚</p>
</blockquote>
<h2 id="12-more"><a href="#12-more" class="headerlink" title="12. more"></a>12. more</h2><p>å‘½ä»¤å‚æ•°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+n       ä»ç¬«nè¡Œå¼€å§‹æ˜¾ç¤º</span><br><span class="line">-n       å®šä¹‰å±å¹•å¤§å°ä¸ºnè¡Œ</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost test]# cat log2012.log </span><br><span class="line">2012-01</span><br><span class="line">2012-02</span><br><span class="line">2012-03</span><br><span class="line">2012-04-day1</span><br><span class="line">2012-04-day2</span><br><span class="line">2012-04-day3</span><br><span class="line">======[root@localhost test]# more +3 log2012.log </span><br><span class="line">2012-03</span><br><span class="line">2012-04-day1</span><br><span class="line">2012-04-day2</span><br><span class="line">2012-04-day3</span><br><span class="line">======[root@localhost test]#</span><br></pre></td></tr></table></figure>
<p>è®¾å®šæ¯å±æ˜¾ç¤ºè¡Œæ•°   more -5 log2012.log. </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># more -5 log2012.log </span></span><br><span class="line">2012-01</span><br><span class="line">2012-02</span><br><span class="line">2012-03</span><br><span class="line">2012-04-day1</span><br><span class="line">2012-04-day2</span><br></pre></td></tr></table></figure>
<p>åˆ—ä¸€ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œç”±äºå†…å®¹å¤ªå¤šï¼Œæˆ‘ä»¬åº”è¯¥å­¦ä¼šç”¨moreæ¥åˆ†é¡µæ˜¾ç¤ºã€‚è¿™å¾—å’Œç®¡é“ | ç»“åˆèµ·æ¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ls <span class="_">-l</span>  | more -5</span><br></pre></td></tr></table></figure>
<h2 id="13-less"><a href="#13-less" class="headerlink" title="13. less"></a>13. less</h2><p>less å·¥å…·ä¹Ÿæ˜¯å¯¹æ–‡ä»¶æˆ–å…¶å®ƒè¾“å‡ºè¿›è¡Œåˆ†é¡µæ˜¾ç¤ºçš„å·¥å…·ï¼Œåº”è¯¥è¯´æ˜¯linuxæ­£ç»ŸæŸ¥çœ‹æ–‡ä»¶å†…å®¹çš„å·¥å…·ï¼ŒåŠŸèƒ½æå…¶å¼ºå¤§ã€‚</p>
<p>less çš„ç”¨æ³•æ¯”èµ· more æ›´åŠ çš„æœ‰å¼¹æ€§ã€‚åœ¨ more çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åŠæ³•å‘å‰é¢ç¿»ï¼Œ åªèƒ½å¾€åé¢çœ‹ï¼Œä½†è‹¥ä½¿ç”¨äº† less æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ [pageup] [pagedown] ç­‰æŒ‰é”®çš„åŠŸèƒ½æ¥å¾€å‰å¾€åç¿»çœ‹æ–‡ä»¶ï¼Œæ›´å®¹æ˜“ç”¨æ¥æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼</p>
<p>åœ¨ less é‡Œå¤´å¯ä»¥æ‹¥æœ‰æ›´å¤šçš„æœç´¢åŠŸèƒ½ï¼Œä¸æ­¢å¯ä»¥å‘ä¸‹æœï¼Œä¹Ÿå¯ä»¥å‘ä¸Šæœã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">less <span class="built_in">log</span>2013.log</span><br><span class="line"></span><br><span class="line">ps -ef |less</span><br><span class="line"></span><br><span class="line"><span class="built_in">history</span> | less</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºæ–‡ä»¶é™¤äº†æœ€ånè¡Œçš„å…¨éƒ¨å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">head -n -6 <span class="built_in">log</span>2014.log</span><br></pre></td></tr></table></figure>
<h2 id="14-head"><a href="#14-head" class="headerlink" title="14. head"></a>14. head</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@localhost test]# head -n 5 log2014.log </span><br><span class="line">2014-01</span><br><span class="line">2014-02</span><br><span class="line">2014-03</span><br><span class="line">2014-04</span><br><span class="line">2014-05[root@localhost test]#</span><br></pre></td></tr></table></figure>
<p>æ˜¾ç¤ºæ–‡ä»¶å‰nä¸ªå­—èŠ‚  head -c 20 log2014.log</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># head -c 20 log2014.log</span></span><br><span class="line">2014-01</span><br><span class="line">2014-02</span><br><span class="line">2014</span><br><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºæ–‡ä»¶é™¤äº†æœ€ånè¡Œçš„å…¨éƒ¨å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">head -n -6 log2014.log</span><br></pre></td></tr></table></figure>
<h2 id="15-tail"><a href="#15-tail" class="headerlink" title="15. tail"></a>15. tail</h2><p>æ˜¾ç¤ºæ–‡ä»¶æœ«å°¾å†…å®¹. tail -n 5 log2014.log</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># tail -n 5 log2014.log </span></span><br><span class="line">2014-09</span><br><span class="line">2014-10</span><br><span class="line">2014-11</span><br><span class="line">2014-12</span><br><span class="line">==============================[root@localhost <span class="built_in">test</span>]<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p>å¾ªç¯æŸ¥çœ‹æ–‡ä»¶å†…å®¹ tail -f test.log</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.cnblogs.com/peida/tag/æ¯æ—¥ä¸€linuxå‘½ä»¤/" target="_blank" rel="external">æ¯æ—¥ä¸€linuxå‘½ä»¤</a></li>
<li><a href="http://www.cnblogs.com/peida/archive/2012/12/05/2803591.html" target="_blank" rel="external">æ¯å¤©ä¸€ä¸ªlinuxå‘½ä»¤ç›®å½•</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Tensorflow å¿«é€Ÿå­¦ä¹  & æ–‡æ¡£]]></title>
      <url>http://shopee.ai/2017/10/23/tensorflow/tf-doc/</url>
      <content type="html"><![CDATA[<p>ä»‹ç» Tensorflow çš„å­¦ä¹ æµç¨‹ ä¸ <a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-bm7y28si.html" target="_blank" rel="external">W3C shchool Tensorflow</a> çš„ä¸­æ–‡æ–‡æ¡£ã€‚</p>
<a id="more"></a>
<h2 id="1-ç»“æ„ç›®å½•"><a href="#1-ç»“æ„ç›®å½•" class="headerlink" title="1. ç»“æ„ç›®å½•"></a>1. ç»“æ„ç›®å½•</h2><h3 id="1-1-Tensorflow-å…¥é—¨ä»‹ç»"><a href="#1-1-Tensorflow-å…¥é—¨ä»‹ç»" class="headerlink" title="1.1 Tensorflow å…¥é—¨ä»‹ç»"></a>1.1 Tensorflow å…¥é—¨ä»‹ç»</h3><h3 id="1-2-Tensorflow-ä½¿ç”¨æŒ‡å—"><a href="#1-2-Tensorflow-ä½¿ç”¨æŒ‡å—" class="headerlink" title="1.2 Tensorflow ä½¿ç”¨æŒ‡å—"></a>1.2 Tensorflow ä½¿ç”¨æŒ‡å—</h3><p>TensorFlow <a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-85v22c69.html" target="_blank" rel="external">å¼ é‡å˜æ¢</a></p>
<p>TensorFlow <a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-y6p82c6e.html" target="_blank" rel="external">Trainingå‡½æ•°</a> ï¼š tf.train æä¾›äº†ä¸€ç»„å¸®åŠ©è®­ç»ƒæ¨¡å‹çš„ç±»å’Œå‡½æ•°ã€‚</p>
<h3 id="1-3-Tensorflow-å‡½æ•°ä»‹ç»"><a href="#1-3-Tensorflow-å‡½æ•°ä»‹ç»" class="headerlink" title="1.3 Tensorflow å‡½æ•°ä»‹ç»"></a>1.3 Tensorflow å‡½æ•°ä»‹ç»</h3><p>å‡½æ•°æ¨¡å— : tf</p>
<p>TensorFlow <a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-58lx2coj.html" target="_blank" rel="external">appæ¨¡å— : å®šä¹‰é€šç”¨å…¥å£ç‚¹è„šæœ¬</a></p>
<p>TensorFlow contribæ¨¡å—</p>
<p>TensorFlow çš„ errorsæ¨¡å—</p>
<p>estimator æ¨¡å— <a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-xp3r2dl5.html" target="_blank" rel="external">ä¼°ç®—å™¨ï¼ˆEstimatorï¼‰</a> ï¼š ç”¨äºå¤„ç†æ¨¡å‹çš„é«˜çº§å·¥å…·ã€‚</p>
<blockquote>
<ul>
<li>TensorFlowçš„estimatorç±»å‡½æ•°ï¼š<a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-hd9a2oyb.html" target="_blank" rel="external">tf.estimator.Estimator</a></li>
</ul>
</blockquote>
<p>TensorFlow çš„ imageæ¨¡å—</p>
<p>TensorFlow ä½¿ç”¨ä¹‹ <strong>tf.initializers</strong></p>
<p>TensorFlow ä½¿ç”¨ä¹‹ tf.keras</p>
<p>TensorFlow <a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-59ay2s9i.html" target="_blank" rel="external">ä½¿ç”¨ä¹‹ tf.layers</a></p>
<p>TensorFlow ä½¿ç”¨ä¹‹ <strong>tf.losses</strong></p>
<p>TensorFlow <a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-ke8y2yhg.html" target="_blank" rel="external">ä½¿ç”¨ä¹‹ tf.metrics</a></p>
<h3 id="1-4-TensorFlow-åŠŸèƒ½å‡½æ•°"><a href="#1-4-TensorFlow-åŠŸèƒ½å‡½æ•°" class="headerlink" title="1.4 TensorFlow åŠŸèƒ½å‡½æ•°"></a>1.4 TensorFlow åŠŸèƒ½å‡½æ•°</h3><p><strong>tf.get_variable</strong> å‡½æ•°</p>
<p>TensorFlowèŒƒæ•°ï¼š<code>tf.norm</code>å‡½æ•°</p>
<p>TensorFlowå‡½æ•°ï¼š<code>tf.ones</code></p>
<p>tf.one_hotå‡½æ•°ï¼šè¿”å›one-hotå¼ é‡</p>
<p>TensorFlowéšæœºå€¼ï¼štf.random_normalå‡½æ•°</p>
<p>tf.random_normal_initializerï¼šTensorFlowåˆå§‹åŒ–å™¨</p>
<p>TensorFlowå‡½æ•°ï¼štf.ones_initializer</p>
<p>TensorFlowå ä½ç¬¦ï¼š<code>tf.placeholder</code></p>
<p>TensorFlowå‡½æ•°ï¼š <a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-hckq2htb.html" target="_blank" rel="external">tf.reduce_mean</a></p>
<p>TensorFlowå‡½æ•°ï¼š<code>tf.reduce_sum</code></p>
<blockquote>
<p>axis = 0ï¼Œ ä¸ºçºµå‘<br>axis = 1ï¼Œ ä¸ºæ¨ªå‘</p>
</blockquote>
<h3 id="1-5-TensorFlow-æ‰‹å†™æ•°å­—åˆ†ç±»é—®é¢˜"><a href="#1-5-TensorFlow-æ‰‹å†™æ•°å­—åˆ†ç±»é—®é¢˜" class="headerlink" title="1.5 TensorFlow æ‰‹å†™æ•°å­—åˆ†ç±»é—®é¢˜"></a>1.5 TensorFlow æ‰‹å†™æ•°å­—åˆ†ç±»é—®é¢˜</h3><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://www.w3cschool.cn/tensorflow_python/tensorflow_python-bm7y28si.html" target="_blank" rel="external">TensorFlow å…¥é—¨åŸºç¡€ W3C school</a></li>
<li><a href="https://blog.csdn.net/jerr__y/article/category/6747409" target="_blank" rel="external">å¤§å­¦ä¹‹é“ï¼Œåœ¨æ˜æ˜å¾· - æˆ‘çš„Tensorflowå­¦ä¹ ä¹‹è·¯</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[My Zsh Config Files]]></title>
      <url>http://shopee.ai/2017/10/21/devops/oh-my-zsh-config/</url>
      <content type="html"><![CDATA[<p>æˆ‘çš„é…ç½®æ–‡ä»¶ <strong>~/.zprofile</strong> å’Œ <strong>~/.zshrc</strong></p>
<a id="more"></a>
<h2 id="zprofile"><a href="#zprofile" class="headerlink" title="zprofile"></a>zprofile</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">###################################################</span></span><br><span class="line"><span class="comment">###       blair custom config @2020.07.07      ###</span></span><br><span class="line"><span class="comment">###################################################</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> ipython=<span class="string">'python -m IPython'</span></span><br><span class="line"></span><br><span class="line">MS=/usr/<span class="built_in">local</span>/xsoft</span><br><span class="line"></span><br><span class="line"><span class="comment">### JAVA ###</span></span><br><span class="line">JAVA_HOME=<span class="variable">$MS</span>/jdk/Contents/Home</span><br><span class="line">JAVA_BIN=<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/jre/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/jre/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME JAVA_BIN PATH CLASSPATH</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/<span class="built_in">local</span>/Cellar/hadoop/3.2.1_1</span><br><span class="line"><span class="built_in">export</span> HADOOP_COMMON_HOME=<span class="variable">$HADOOP_HOME</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/sbin:<span class="variable">$HADOOP_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> start-hp=<span class="string">'/usr/local/Cellar/hadoop/3.2.1_1/sbin/start-all.sh'</span></span><br><span class="line"><span class="built_in">alias</span> stop-hp=<span class="string">'/usr/local/Cellar/hadoop/3.2.1_1/sbin/stop-all.sh'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> SCALA_HOME=/usr/<span class="built_in">local</span>/Cellar/scala/2.13.3</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$SCALA_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> SPARK_HOME=<span class="variable">$MS</span>/spark</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$SPARK_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> start-sk=<span class="string">'/usr/local/xsoft/spark/sbin/start-all.sh'</span></span><br><span class="line"><span class="built_in">alias</span> stop-sk=<span class="string">'/usr/local/xsoft/spark/sbin/stop-all.sh'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Maven ###</span></span><br><span class="line">M2_HOME=/usr/<span class="built_in">local</span>/xsoft/software/apache-maven</span><br><span class="line">MAVEN_HOME=<span class="variable">$M2_HOME</span></span><br><span class="line">M3_HOME=<span class="variable">$M2_HOME</span></span><br><span class="line">PATH=<span class="variable">$M3_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="comment">#MAVEN_OPTS="-Xms128m -Xmx512m"</span></span><br><span class="line"><span class="built_in">export</span> MAVEN_HOME M2_HOME PATH</span><br><span class="line"></span><br><span class="line"><span class="comment">### Tomcat ###</span></span><br><span class="line">CATALINA_HOME=/usr/<span class="built_in">local</span>/xsoft/software/apache-tomcat</span><br><span class="line">PATH=<span class="variable">$CATALINA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> CATALINA_HOME PATH</span><br><span class="line"></span><br><span class="line"><span class="comment">### Node.js ###</span></span><br><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">"<span class="variable">$HOME</span>/.nvm"</span></span><br><span class="line"><span class="comment">#[ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; \. "$NVM_DIR/nvm.sh"  # This loads nvm</span></span><br><span class="line"><span class="comment">#[ -s "$NVM_DIR/bash_completion" ] &amp;&amp; \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### LANG ###</span></span><br><span class="line"><span class="built_in">export</span> LC_ALL=en_US.UTF-8</span><br><span class="line"><span class="built_in">export</span> LANG=en_US.UTF-8</span><br><span class="line"></span><br><span class="line"><span class="comment">### Fast Function ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># show ip</span></span><br><span class="line"><span class="built_in">alias</span> ip=<span class="string">'ipconfig getifaddr en0'</span></span><br><span class="line"><span class="built_in">alias</span> ip0=<span class="string">'ipconfig getifaddr en0'</span></span><br><span class="line"><span class="built_in">alias</span> ip1=<span class="string">'ipconfig getifaddr en1'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shutdown</span></span><br><span class="line"><span class="built_in">alias</span> shuth=<span class="string">'sudo shutdown -h now'</span></span><br><span class="line"><span class="built_in">alias</span> shutr=<span class="string">'sudo shutdown -r now'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># grep</span></span><br><span class="line"><span class="built_in">alias</span> fgstr=<span class="string">'find . | xargs grep -ri'</span></span><br><span class="line"><span class="comment">#find .|xargs grep -ri "IBM" </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pip list</span></span><br><span class="line"><span class="built_in">alias</span> pipl=<span class="string">'pip list --format=columns'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># lsof -i:port</span></span><br><span class="line"><span class="built_in">alias</span> lsofi=<span class="string">'lsof -i:'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo</span></span><br><span class="line"><span class="built_in">alias</span> hs=<span class="string">'cd ~/ghome/blog &amp;&amp; hexo clean &amp;&amp; hexo s -p 5000 &amp;'</span></span><br><span class="line"><span class="built_in">alias</span> hsy=<span class="string">'cd ~/ghome/blogyih &amp;&amp; hexo clean &amp;&amp; hexo s -p 5001 &amp;'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> cpost=<span class="string">'cd ~/ghome/blog/source/_posts'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># deploy blog</span></span><br><span class="line"><span class="built_in">alias</span> db=<span class="string">'~/ghome/blog &amp;&amp; sh dp.sh'</span></span><br><span class="line"><span class="built_in">alias</span> dby=<span class="string">'cd ~/ghome/blogyih &amp;&amp; sh dp.sh'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gp=<span class="string">'cd ~/ghome/blog/source &amp;&amp; git pull &amp;&amp; cd ~/ghome/blog/52binge.github.io &amp;&amp; git pull &amp;&amp; cd .. &amp;&amp; clear'</span></span><br><span class="line"><span class="built_in">alias</span> gpy=<span class="string">'cd ~/ghome/blogyih/source &amp;&amp; git pull &amp;&amp; cd ~/ghome/blogyih/52binge.github.io &amp;&amp; git pull &amp;&amp; cd .. &amp;&amp; clear'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Docker</span></span><br><span class="line"><span class="built_in">alias</span> dis=<span class="string">'docker images'</span></span><br><span class="line"><span class="built_in">alias</span> dri=<span class="string">'docker rmi'</span></span><br><span class="line"><span class="built_in">alias</span> dpa=<span class="string">'docker ps -a'</span></span><br><span class="line"><span class="built_in">alias</span> dks=<span class="string">'docker stop'</span></span><br><span class="line"><span class="built_in">alias</span> dck=<span class="string">'docker container kill'</span></span><br><span class="line"><span class="built_in">alias</span> dcr=<span class="string">'docker container rm'</span></span><br><span class="line"><span class="built_in">alias</span> dlog=<span class="string">'docker logs'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># k8s</span></span><br><span class="line"><span class="built_in">alias</span> kb=<span class="string">'kubectl'</span></span><br><span class="line"><span class="built_in">alias</span> kbg=<span class="string">'kubectl get'</span></span><br><span class="line"><span class="built_in">alias</span> kbd=<span class="string">'kubectl delete'</span></span><br><span class="line"><span class="built_in">alias</span> kbgdps=<span class="string">'kbg deploy,po,svc'</span></span><br><span class="line"><span class="built_in">alias</span> kbdev=<span class="string">'export KUBECONFIG=~/kube/dev-kubeconfig'</span></span><br><span class="line"><span class="built_in">alias</span> kbtest=<span class="string">'export KUBECONFIG=~/kube/test-kubeconfig'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># work</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##  download</span></span><br><span class="line">rqh=<span class="string">'rsync -v --progress qh:'</span></span><br><span class="line"><span class="comment"># rsync -v --progress qh:/home/clb/Cyberduck-7.1.0.31395.zip .</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##  upload</span></span><br><span class="line"><span class="comment"># rsync -z -P demo.zip qh:/data/Libin/work_project/</span></span><br><span class="line"><span class="built_in">alias</span> cpysk=<span class="string">"/Users/blair/ghome/github/spark3.0/pyspark"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> cwk=<span class="string">'cd ~/ghome/6E/work_project'</span></span><br><span class="line"><span class="built_in">alias</span> csf=<span class="string">'cd ~/ghome/6E/self_project'</span></span><br><span class="line"><span class="built_in">alias</span> cmlsearch=<span class="string">'cd ~/ghome/6E/work_project/mlsearch'</span></span><br><span class="line"><span class="built_in">alias</span> cmlar=<span class="string">'cd ~/ghome/6E/work_project/mlar'</span></span><br><span class="line"><span class="built_in">alias</span> sqh=<span class="string">'ssh -L 8889:localhost:8888 -CN qh'</span></span><br><span class="line"><span class="built_in">alias</span> sqh-mlsearch=<span class="string">'ssh -L 8001:localhost:8001 -CN qh'</span></span><br><span class="line"><span class="built_in">alias</span> sqh-mlar=<span class="string">'ssh -L 8003:localhost:8003 -CN qh'</span></span><br><span class="line"><span class="built_in">alias</span> sqh-mlar-cs=<span class="string">'ssh -L 8300:localhost:8300 -CN qh'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">local</span>_to_es=<span class="string">'ssh -L 9200:192.168.x.xxx:9200 -CN onenorth'</span></span><br><span class="line"><span class="built_in">alias</span> kibana=<span class="string">"ssh -D 1080 -CN onenorth"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> catma=<span class="string">'conda activate mlar'</span></span><br><span class="line"><span class="built_in">alias</span> catms=<span class="string">'conda activate mlsearch'</span></span><br><span class="line"><span class="built_in">alias</span> catnn=<span class="string">'conda activate nn_framework'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> catsk=<span class="string">'conda activate spark'</span></span><br><span class="line"><span class="built_in">alias</span> cata=<span class="string">'conda activate anaconda3'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> doc=<span class="string">'~/ghome/6E/chenlibin/data-doc/source/weekly'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Pyenv ###</span></span><br><span class="line"><span class="comment">#export PATH="/Users/blair/.pyenv/bin:$PATH"</span></span><br><span class="line"><span class="comment">#alias pyenv_init='eval "$(pyenv init -)" &amp;&amp; eval "$(pyenv virtualenv-init -)"'</span></span><br><span class="line"><span class="comment">#pyenv_init</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#export PYENV_VIRTUALENV_DISABLE_PROMPT=1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ph</span></span><br><span class="line"><span class="built_in">alias</span> gitph=<span class="string">'vim ~/.oh-my-zsh/plugins/git/git.plugin.zsh'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># zshrc</span></span><br><span class="line"><span class="built_in">alias</span> vzp=<span class="string">'vim ~/.zprofile'</span></span><br><span class="line"><span class="built_in">alias</span> szp=<span class="string">'source ~/.zprofile'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#docker run --publish=7474:7474 --publish=7687:7687 --volume=$HOME/neo4j/data:/data neo4j</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#pyenv-virtualenv: prompt changing will be removed from future release. configure `export PYENV_VIRTUALENV_DISABLE_PROMPT=1' to simulate the behavior.</span></span><br></pre></td></tr></table></figure>
<h2 id="â€”"><a href="#â€”" class="headerlink" title="â€”"></a>â€”</h2><hr>
<p><strong>ä»¥ä¸‹å†…å®¹æ˜¯ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„å†…å®¹ï¼Œè¯·å¿½ç•¥â€¦</strong></p>
<h2 id="â€”-1"><a href="#â€”-1" class="headerlink" title="â€”"></a>â€”</h2><hr>
<h2 id="1-python"><a href="#1-python" class="headerlink" title="1. python"></a>1. python</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### IPython ###</span></span><br><span class="line"><span class="built_in">alias</span> ipython=<span class="string">'python -m IPython'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Pyenv ###</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">"/Users/blair/.pyenv/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line"><span class="built_in">alias</span> pyenv_init=<span class="string">'eval "$(pyenv init -)" &amp;&amp; eval "$(pyenv virtualenv-init -)"'</span></span><br><span class="line">pyenv_init</span><br><span class="line"><span class="comment">#export PYENV_VIRTUALENV_DISABLE_PROMPT=1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pip list</span></span><br><span class="line"><span class="built_in">alias</span> pipl=<span class="string">'pip list --format=columns'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pyenv</span></span><br><span class="line"><span class="built_in">alias</span> pyenv_install_python_pre=<span class="string">'source $MS/custom-machine/pyenv-install.sh'</span></span><br><span class="line"><span class="built_in">alias</span> py2=<span class="string">'pyenv_init &amp;&amp; pyenv activate vpy2 &amp;&amp; clear &amp;&amp; python -V'</span></span><br><span class="line"><span class="built_in">alias</span> py3=<span class="string">'pyenv_init &amp;&amp; pyenv activate vpy3.5 &amp;&amp; clear &amp;&amp; python -V'</span></span><br><span class="line"><span class="built_in">alias</span> vca3=<span class="string">'pyenv activate vconda3 &amp;&amp; clear &amp;&amp; python -V'</span></span><br><span class="line"><span class="built_in">alias</span> pyde=<span class="string">'pyenv deactivate'</span></span><br><span class="line"><span class="built_in">alias</span> pys=<span class="string">'pyenv activate vpy3 &amp;&amp; pyenv global system &amp;&amp; pyde &amp;&amp; python -V'</span></span><br></pre></td></tr></table></figure>
<h2 id="2-hexo-blog"><a href="#2-hexo-blog" class="headerlink" title="2. hexo blog"></a>2. hexo blog</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># hexo</span></span><br><span class="line"><span class="built_in">alias</span> hs=<span class="string">'cd ~/ghome/blog &amp;&amp; hexo clean &amp;&amp; hexo s -p 5000 &amp;'</span></span><br><span class="line"><span class="built_in">alias</span> hsy=<span class="string">'cd ~/ghome/blogyih &amp;&amp; hexo clean &amp;&amp; hexo s -p 5001 &amp;'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># deploy blog</span></span><br><span class="line"><span class="built_in">alias</span> db=<span class="string">'~/ghome/blog &amp;&amp; sh dp.sh'</span></span><br><span class="line"><span class="built_in">alias</span> dby=<span class="string">'~/ghome/blogyih &amp;&amp; sh dp.sh'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> gp=<span class="string">'cd ~/ghome/blog/source &amp;&amp; git pull &amp;&amp; cd ~/ghome/blog/52binge.github.io &amp;&amp; git pull &amp;&amp; cd .. &amp;&amp; clear'</span></span><br><span class="line"><span class="built_in">alias</span> gpy=<span class="string">'cd ~/ghome/blogyih/source &amp;&amp; git pull &amp;&amp; cd ~/ghome/blogyih/52binge.github.io &amp;&amp; git pull &amp;&amp; cd .. &amp;&amp; clear'</span></span><br></pre></td></tr></table></figure>
<h2 id="3-shortcut-approach"><a href="#3-shortcut-approach" class="headerlink" title="3. shortcut approach"></a>3. shortcut approach</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### Fast Function ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># show ip</span></span><br><span class="line"><span class="built_in">alias</span> ip=<span class="string">'ipconfig getifaddr en0'</span></span><br><span class="line"><span class="built_in">alias</span> ip0=<span class="string">'ipconfig getifaddr en0'</span></span><br><span class="line"><span class="built_in">alias</span> ip1=<span class="string">'ipconfig getifaddr en1'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shutdown</span></span><br><span class="line"><span class="built_in">alias</span> shuth=<span class="string">'sudo shutdown -h now'</span></span><br><span class="line"><span class="built_in">alias</span> shutr=<span class="string">'sudo shutdown -r now'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># grep</span></span><br><span class="line"><span class="built_in">alias</span> fgstr=<span class="string">'find . | xargs grep -ri'</span></span><br><span class="line"><span class="comment">#find .|xargs grep -ri "IBM" </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># lsof -i:port</span></span><br><span class="line"><span class="built_in">alias</span> lsofi=<span class="string">'lsof -i:'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># zshrc</span></span><br><span class="line"><span class="built_in">alias</span> vzp=<span class="string">'vim ~/.zprofile'</span></span><br><span class="line"><span class="built_in">alias</span> szp=<span class="string">'source ~/.zprofile'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#pyenv-virtualenv: prompt changing will be removed from future release. configure `export PYENV_VIRTUALENV_DISABLE_PROMPT=1' to simulate the behavior.</span></span><br></pre></td></tr></table></figure>
<h2 id="4-docker-k8s"><a href="#4-docker-k8s" class="headerlink" title="4. docker, k8s"></a>4. docker, k8s</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Docker</span></span><br><span class="line"><span class="built_in">alias</span> dis=<span class="string">'docker images'</span></span><br><span class="line"><span class="built_in">alias</span> dri=<span class="string">'docker rmi'</span></span><br><span class="line"><span class="built_in">alias</span> dpa=<span class="string">'docker ps -a'</span></span><br><span class="line"><span class="built_in">alias</span> dks=<span class="string">'docker stop'</span></span><br><span class="line"><span class="built_in">alias</span> dck=<span class="string">'docker container kill'</span></span><br><span class="line"><span class="built_in">alias</span> dcr=<span class="string">'docker container rm'</span></span><br><span class="line"><span class="built_in">alias</span> dlog=<span class="string">'docker logs'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># k8s</span></span><br><span class="line"><span class="built_in">alias</span> kb=<span class="string">'kubectl'</span></span><br><span class="line"><span class="built_in">alias</span> kbg=<span class="string">'kubectl get'</span></span><br><span class="line"><span class="built_in">alias</span> kbd=<span class="string">'kubectl delete'</span></span><br><span class="line"><span class="built_in">alias</span> kbgdps=<span class="string">'kbg deploy,po,svc'</span></span><br><span class="line"><span class="built_in">alias</span> kbdev=<span class="string">'export KUBECONFIG=~/kube/dev-kubeconfig'</span></span><br><span class="line"><span class="built_in">alias</span> kbtest=<span class="string">'export KUBECONFIG=~/kube/test-kubeconfig'</span></span><br></pre></td></tr></table></figure>
<h2 id="5-work"><a href="#5-work" class="headerlink" title="5. work"></a>5. work</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># work</span></span><br><span class="line"><span class="built_in">alias</span> rqh=<span class="string">'rsync -v --progress qh:'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> cw=<span class="string">'cd ~/ghome/6E/work_project'</span></span><br><span class="line"><span class="built_in">alias</span> cs=<span class="string">'cd ~/ghome/6E/self_project'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> cmlar=<span class="string">'cd ~/ghome/6E/work_project/mlar'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> sqh=<span class="string">'ssh -L 8889:localhost:8888 -CN qh'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> catm=<span class="string">'conda activate mlar'</span></span><br><span class="line"><span class="built_in">alias</span> catn=<span class="string">'conda activate nn_framework'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> cata=<span class="string">'conda activate anaconda3'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> doc=<span class="string">'~/ghome/6E/chenlibin/data-doc'</span></span><br></pre></td></tr></table></figure>
<h2 id="6-node-js"><a href="#6-node-js" class="headerlink" title="6. node.js"></a>6. node.js</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### Node.js ###</span></span><br><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">"<span class="variable">$HOME</span>/.nvm"</span></span><br><span class="line"><span class="comment">#[ -s "$NVM_DIR/nvm.sh" ] &amp;&amp; \. "$NVM_DIR/nvm.sh"  # This loads nvm</span></span><br><span class="line"><span class="comment">#[ -s "$NVM_DIR/bash_completion" ] &amp;&amp; \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion</span></span><br></pre></td></tr></table></figure>
<h2 id="7-mac-env"><a href="#7-mac-env" class="headerlink" title="7. mac env"></a>7. mac env</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### LANG ###</span></span><br><span class="line"><span class="built_in">export</span> LC_ALL=en_US.UTF-8</span><br><span class="line"><span class="built_in">export</span> LANG=en_US.UTF-8</span><br></pre></td></tr></table></figure>
<h2 id="8-Java"><a href="#8-Java" class="headerlink" title="8. Java"></a>8. Java</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### JAVA ###</span></span><br><span class="line">JAVA_HOME=/Library/Java/JavaVirtualMachines/Contents/Home</span><br><span class="line">JAVA_BIN=<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/jre/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/jre/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME JAVA_BIN PATH CLASSPATH</span><br><span class="line"></span><br><span class="line"><span class="comment">### Maven ###</span></span><br><span class="line">M2_HOME=/usr/<span class="built_in">local</span>/xsoft/software/apache-maven</span><br><span class="line">MAVEN_HOME=<span class="variable">$M2_HOME</span></span><br><span class="line">M3_HOME=<span class="variable">$M2_HOME</span></span><br><span class="line">PATH=<span class="variable">$M3_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line">MAVEN_OPTS=<span class="string">"-Xms128m -Xmx512m"</span></span><br><span class="line"><span class="built_in">export</span> MAVEN_HOME M2_HOME PATH</span><br><span class="line"></span><br><span class="line"><span class="comment">### Tomcat ###</span></span><br><span class="line">CATALINA_HOME=/usr/<span class="built_in">local</span>/xsoft/software/apache-tomcat</span><br><span class="line">PATH=<span class="variable">$CATALINA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> CATALINA_HOME PATH</span><br></pre></td></tr></table></figure>
<h2 id="9-Scala"><a href="#9-Scala" class="headerlink" title="9. Scala"></a>9. Scala</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### Scala ###</span></span><br><span class="line"><span class="built_in">export</span> SCALA_HOME=/usr/<span class="built_in">local</span>/xsoft/software/scala</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;SCALA_HOME&#125;</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="comment">#export SCALA_HOME=/usr/local/Cellar/scala/2.11.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Kafka</span></span><br><span class="line">KAFKA_HOME=/usr/<span class="built_in">local</span>/Cellar/kafka/2.1.0</span><br><span class="line">PATH=<span class="variable">$KAFKA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> KAFKA_HOME PATH</span><br><span class="line"></span><br><span class="line"><span class="comment">### Spark ###</span></span><br><span class="line"><span class="built_in">export</span> SPARK_HOME=/usr/<span class="built_in">local</span>/xsoft/software/spark</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$SPARK_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure>
<h2 id="10-zshrc"><a href="#10-zshrc" class="headerlink" title="10. zshrc"></a>10. zshrc</h2><figure class="highlight zsh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># If you come from bash you might have to change your $PATH.</span></span><br><span class="line"><span class="comment"># export PATH=$HOME/bin:/usr/local/bin:$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Path to your oh-my-zsh installation.</span></span><br><span class="line"><span class="built_in">export</span> ZSH=/Users/blair/.oh-my-zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set name of the theme to load. Optionally, if you set this to "random"</span></span><br><span class="line"><span class="comment"># it'll load a random theme each time that oh-my-zsh is loaded.</span></span><br><span class="line"><span class="comment"># See https://github.com/robbyrussell/oh-my-zsh/wiki/Themes</span></span><br><span class="line">ZSH_THEME=<span class="string">"robbyrussell"</span></span><br><span class="line">ZSH_THEME=<span class="string">"astro"</span> </span><br><span class="line"></span><br><span class="line">plugins=(git)</span><br><span class="line">plugins=(git autojump) <span class="comment"># by blair add @2017-10-10</span></span><br><span class="line"><span class="comment">#[[ -s $(brew --prefix)/etc/profile.d/autojump.sh ]] &amp;&amp; . $(brew --prefix)/etc/profile.d/autojump.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> <span class="variable">$ZSH</span>/oh-my-zsh.sh</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Macos Terminal Set Shadowsocks]]></title>
      <url>http://shopee.ai/2017/10/19/devops/ops-mac-for-shadowsocks/</url>
      <content type="html"><![CDATA[<ol>
<li>first, you need to have vps</li>
<li>second, you need to have shadowsocks app</li>
</ol>
<a id="more"></a>
<p><img src="/images/ops/ops-vpn-shadowsocks.png" width="520" height="300" align="middle" img="">  </p>
<h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install polipo</span><br></pre></td></tr></table></figure>
<h2 id="config"><a href="#config" class="headerlink" title="config"></a>config</h2><p>è®¾ç½®æ¯æ¬¡ç™»é™†å¯åŠ¨polipo</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ln -sfv /usr/local/opt/polipo/*.plist ~/Library/LaunchAgents</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹æ–‡ä»¶ <code>/usr/local/opt/polipo/homebrew.mxcl.polipo.plist</code> è®¾ç½®parentProxy</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span><br><span class="line">&lt;plist version=&quot;1.0&quot;&gt;</span><br><span class="line">  &lt;dict&gt;</span><br><span class="line">    &lt;key&gt;Label&lt;/key&gt;</span><br><span class="line">    &lt;string&gt;homebrew.mxcl.polipo&lt;/string&gt;</span><br><span class="line">    &lt;key&gt;RunAtLoad&lt;/key&gt;</span><br><span class="line">    &lt;true/&gt;</span><br><span class="line">    &lt;key&gt;KeepAlive&lt;/key&gt;</span><br><span class="line">    &lt;true/&gt;</span><br><span class="line">    &lt;key&gt;ProgramArguments&lt;/key&gt;</span><br><span class="line">    &lt;array&gt;</span><br><span class="line">        &lt;string&gt;/usr/local/opt/polipo/bin/polipo&lt;/string&gt;</span><br><span class="line">        &lt;string&gt;socksParentProxy=localhost:1080&lt;/string&gt;</span><br><span class="line">    &lt;/array&gt;</span><br><span class="line">    &lt;!-- Set `ulimit -n 20480`. The default OS X limit is 256, that&apos;s</span><br><span class="line">         not enough for Polipo (displays &apos;too many files open&apos; errors).</span><br><span class="line">         It seems like you have no reason to lower this limit</span><br><span class="line">         (and unlikely will want to raise it). --&gt;</span><br><span class="line">    &lt;key&gt;SoftResourceLimits&lt;/key&gt;</span><br><span class="line">    &lt;dict&gt;</span><br><span class="line">      &lt;key&gt;NumberOfFiles&lt;/key&gt;</span><br><span class="line">      &lt;integer&gt;20480&lt;/integer&gt;</span><br><span class="line">    &lt;/dict&gt;</span><br><span class="line">  &lt;/dict&gt;</span><br><span class="line">&lt;/plist&gt;</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹çš„åœ°æ–¹æ˜¯å¢åŠ äº† <code>&lt;string&gt;socksParentProxy=localhost:1080&lt;/string&gt;</code></p>
<h2 id="start-stop"><a href="#start-stop" class="headerlink" title="start / stop"></a>start / stop</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">launchctl unload ~/Library/LaunchAgents/homebrew.mxcl.polipo.plist</span><br><span class="line">launchctl load ~/Library/LaunchAgents/homebrew.mxcl.polipo.plist</span><br></pre></td></tr></table></figure>
<h2 id="setting-profile"><a href="#setting-profile" class="headerlink" title="setting profile"></a>setting profile</h2><p>vim ~/.zshrc</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#export http_proxy=http://localhost:8123</span><br><span class="line">alias hp=&quot;http_proxy=http://localhost:8123&quot;</span><br></pre></td></tr></table></figure>
<p>source ~/.zshrc</p>
<h2 id="test"><a href="#test" class="headerlink" title="test"></a>test</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ hp curl ip.cn</span><br><span class="line">å½“å‰ IPï¼š97.64.**.** æ¥è‡ªï¼šç¾å›½</span><br></pre></td></tr></table></figure>
<h2 id="reference-article"><a href="#reference-article" class="headerlink" title="reference article"></a>reference article</h2><ul>
<li><a href="http://droidyue.com/blog/2016/04/04/set-shadowsocks-proxy-for-terminal/" target="_blank" rel="external">æŠ€æœ¯å°é»‘å±‹</a></li>
<li><a href="https://segmentfault.com/a/1190000008449046" target="_blank" rel="external">Mac+shadowsocks+polipoå¿«æ·å®ç°ç»ˆç«¯ç§‘å­¦ä¸Šç½‘</a></li>
<li><a href="http://blog.liujiangbei.com/14532622130324.html" target="_blank" rel="external">VPS-install-shadowsocks-proxy</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Macos Sierra Uninstall App & Solve Allow apps Anywhere]]></title>
      <url>http://shopee.ai/2017/10/19/devops/ops-mac-sierra-some-tips/</url>
      <content type="html"><![CDATA[<p>Here are some tips to help you fun macos sierra</p>
<a id="more"></a>
<h2 id="MacOS-Sierra-amp-High-Sierra-Complete-Uninstall-App"><a href="#MacOS-Sierra-amp-High-Sierra-Complete-Uninstall-App" class="headerlink" title="MacOS Sierra &amp; High Sierra Complete Uninstall App"></a>MacOS Sierra &amp; High Sierra Complete Uninstall App</h2><blockquote>
<p>About This Mac -&gt; Storage -&gt; Manage -&gt; Applications -&gt; Delete</p>
</blockquote>
<h2 id="How-to-Allow-Apps-from-Anywhere-in-Gatekeeper-for-macOS-High-Sierra"><a href="#How-to-Allow-Apps-from-Anywhere-in-Gatekeeper-for-macOS-High-Sierra" class="headerlink" title="How to Allow Apps from Anywhere in Gatekeeper for macOS High Sierra"></a>How to Allow Apps from Anywhere in Gatekeeper for macOS High Sierra</h2><p>1). Open the Terminal app from the /Applications/Utilities/ folder and then enter the following command syntax:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo spctl --master-disable</span><br></pre></td></tr></table></figure>
<p>Hit return and authenticate with an admin password</p>
<p>2). Relaunch System Preferences and go to â€œSecurity &amp; Privacyâ€ and the â€œGeneralâ€ tab</p>
<p>3). You will now see the â€œAnywhereâ€ option under â€˜Allow apps downloaded from:â€™ Gatekeeper options</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Pyenv Install For Virtual Multi Python Version Switch]]></title>
      <url>http://shopee.ai/2017/10/18/devops/ops-pyenv-install/</url>
      <content type="html"><![CDATA[<p>It needs to be used in both python2 and python3 environments, or different packages need to be installed in different projects.</p>
<a id="more"></a>
<p>we hope that the packages installed between different projects do not interfere with each other, and then you can configure the virtual environment of Python using pyenv.</p>
<h2 id="installation-pyenv"><a href="#installation-pyenv" class="headerlink" title="installation pyenv"></a>installation pyenv</h2><p><a href="https://github.com/pyenv/pyenv-installer" target="_blank" rel="external">Official Pyenv Install</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">"~/.pyenv/bin:<span class="variable">$PATH</span>"</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv init -)</span>"</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">"<span class="variable">$(pyenv virtualenv-init -)</span>"</span></span><br><span class="line"><span class="comment">#export PYENV_VIRTUALENV_DISABLE_PROMPT=1</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£é…ç½®å³å¯ï¼Œmac zsh ç”¨æˆ·ï¼Œå°† ä»¥ä¸Šä¸‰å¥æ”¾å…¥åˆ° .zshrc å³å¯ã€‚</p>
</blockquote>
<h2 id="see-available-versions"><a href="#see-available-versions" class="headerlink" title="see available versions"></a>see available versions</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pyenv install -l</span><br></pre></td></tr></table></figure>
<h2 id="install-python-in-virtual-env"><a href="#install-python-in-virtual-env" class="headerlink" title="install python in virtual env"></a>install python in virtual env</h2><p>install python 2.7.14</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pyenv install 2.7.14</span><br></pre></td></tr></table></figure>
<p>install python 3.6.3</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pyenv install 3.6.3</span><br></pre></td></tr></table></figure>
<blockquote>
<p> <a href="https://github.com/pyenv/pyenv/issues/993" target="_blank" rel="external">solve macOS High Sierra: ERROR: The Python ssl extension was not compiled. Missing the OpenSSL lib?</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># about zlib</span><br><span class="line">export CFLAGS=&quot;-I$(xcrun --show-sdk-path)/usr/include&quot;</span><br><span class="line"># about readline</span><br><span class="line">export CFLAGS=&quot;-I$(brew --prefix readline)/include $CFLAGS&quot;</span><br><span class="line">export LDFLAGS=&quot;-L$(brew --prefix readline)/lib $LDFLAGS&quot;</span><br><span class="line"># about openssl</span><br><span class="line">export CFLAGS=&quot;-I$(brew --prefix openssl)/include $CFLAGS&quot;</span><br><span class="line">export LDFLAGS=&quot;-L$(brew --prefix openssl)/lib $LDFLAGS&quot;</span><br><span class="line"># about SQLite (maybe not necessary)</span><br><span class="line">export CFLAGS=&quot;-I$(brew --prefix sqlite)/include $CFLAGS&quot;</span><br><span class="line">export LDFLAGS=&quot;-L$(brew --prefix sqlite)/lib $LDFLAGS&quot;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>Set or show the global Python version</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pyenv global 3.6.3 or system</span><br></pre></td></tr></table></figure>
<blockquote>
<p>system stands for this mac</p>
</blockquote>
<p>show list all Python versions available to pyenv</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pyenv versions</span><br></pre></td></tr></table></figure>
<h2 id="create-virtual-env"><a href="#create-virtual-env" class="headerlink" title="create virtual env"></a>create virtual env</h2><p>create current <code>3.6.3 version python</code> virtual env</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pyenv virtualenv vpy3</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>vpy3</strong> is this virtual env alias</p>
</blockquote>
<h2 id="pyenv-activate-amp-deactivate"><a href="#pyenv-activate-amp-deactivate" class="headerlink" title="pyenv activate &amp; deactivate"></a>pyenv activate &amp; deactivate</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ pyenv activate vpy3</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™æ˜¯æ—¶å€™å°±å¯ä»¥å¼€å§‹pipå®‰è£…ä¾èµ–åŒ…äº†</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ pyenv activate vpy3</span><br><span class="line">pyenv-virtualenv: prompt changing will be removed from future release. configure `export PYENV_VIRTUALENV_DISABLE_PROMPT=1&apos; to simulate the behavior.</span><br><span class="line">(vpy3)</span><br><span class="line"># ~ [12:25:44]</span><br><span class="line">âœ python -V</span><br><span class="line">Python 3.6.3</span><br><span class="line">(vpy3)</span><br><span class="line"># ~ [12:25:49]</span><br><span class="line">âœ pyenv deactivate vpy3</span><br><span class="line"># ~ [12:25:57]</span><br><span class="line">âœ python -V</span><br><span class="line">Python 2.7.10</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Common Useful Links]]></title>
      <url>http://shopee.ai/2017/10/14/devops/ops-common-links/</url>
      <content type="html"><![CDATA[<p>Here are some useful links</p>
<a id="more"></a>
<h2 id="Deep-Learning-Coursera"><a href="#Deep-Learning-Coursera" class="headerlink" title="Deep Learning Coursera"></a>Deep Learning Coursera</h2><ul>
<li><a href="http://daniellaah.github.io/" target="_blank" rel="external">daniellaah.github.io</a></li>
<li><a href="https://www.ctolib.com/Yukong-Deeplearning-ai-Solutions.html" target="_blank" rel="external">deeplearning.aiæ·±åº¦å­¦ä¹ è¯¾ç¨‹å­—å¹•ç¿»è¯‘é¡¹ç›®</a></li>
<li><a href="https://www.cnblogs.com/marsggbo/" target="_blank" rel="external">äº’é“æ™šå®‰ï¼Œç‹è€…å³¡è°·è§ æœºå™¨å­¦ä¹  &amp; æ·±åº¦å­¦ä¹  NG ç¬”è®°</a></li>
<li><a href="https://github.com/fengdu78/deeplearning_ai_books" target="_blank" rel="external">deeplearning.aiï¼ˆå´æ©è¾¾è€å¸ˆçš„æ·±åº¦å­¦ä¹ è¯¾ç¨‹ç¬”è®°åŠèµ„æºï¼‰</a></li>
<li><a href="https://github.com/theBigDataDigest/Andrew-Ng-deeplearning-part-5-Course-notes-in-Chinese/blob/master/Andrew-Ng-deeplearning.ai-part-5-Course%20notes.pdf" target="_blank" rel="external">å¤§æ•°æ®æ–‡æ‘˜ deeplearning.ai Sequence Models ä¸­æ–‡ç¬”è®°</a></li>
<li><a href="https://kulbear.github.io/pdf/sequence-models.pdf" target="_blank" rel="external">Sequence Models è‹±æ–‡ç‰ˆç¬”è®°</a></li>
<li><a href="https://blog.csdn.net/column/details/dl-nlp.html" target="_blank" rel="external">å¯’å°é˜³ - æ·±åº¦å­¦ä¹ ä¸è‡ªç„¶è¯­è¨€å¤„ç†</a></li>
<li><a href="https://blog.csdn.net/han_xiaoyang/article/category/5877239" target="_blank" rel="external">å¯’å°é˜³ä¸»é¡µ</a></li>
<li><a href="http://people.csail.mit.edu/bzhou/" target="_blank" rel="external">Bolei Zhou @Assistant Professor CUHK</a></li>
<li><a href="https://www.zhihu.com/question/49432647/answer/144958145" target="_blank" rel="external">è®¡ç®—æœºè§†è§‰å’Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼Œå“ªä¸ªæ›´å…·æœ‰å‘å±•å‰æ™¯å‘¢ï¼Œè¿˜æ˜¯å„æœ‰åƒç§‹å‘¢ï¼Ÿ</a></li>
</ul>
<h2 id="Recommend"><a href="#Recommend" class="headerlink" title="Recommend"></a>Recommend</h2><ul>
<li><a href="https://blog.csdn.net/bvl10101111/article/details/78822739" target="_blank" rel="external">æ¨èç³»ç»Ÿç»å…¸è®ºæ–‡æ–‡çŒ®åŠä¸šç•Œåº”ç”¨</a></li>
</ul>
<h2 id="NLP"><a href="#NLP" class="headerlink" title="NLP"></a>NLP</h2><ul>
<li><a href="https://github.com/explosion/sense2vec" target="_blank" rel="external">sense2vec</a></li>
<li><a href="https://www.zybuluo.com/hanxiaoyang/note/472184" target="_blank" rel="external">zybuluo hanxiaoyang</a></li>
<li><a href="https://radimrehurek.com/gensim/" target="_blank" rel="external">gensim</a></li>
<li><a href="https://yq.aliyun.com/articles/158691" target="_blank" rel="external">è‡ªç„¶è¯­è¨€ç†è§£-ä»è§„åˆ™åˆ°æ·±åº¦å­¦ä¹ </a></li>
<li><a href="https://plushunter.github.io/" target="_blank" rel="external">Free Will</a></li>
<li><a href="http://www.wildml.com/" target="_blank" rel="external">www.wildml.com</a></li>
</ul>
<h2 id="Friends"><a href="#Friends" class="headerlink" title="Friends"></a>Friends</h2><ul>
<li><a href="https://blog.fazero.me/" target="_blank" rel="external">fazero</a></li>
<li><a href="http://wuchong.me/" target="_blank" rel="external">ali wuchong</a></li>
<li><a href="http://www.cnblogs.com/maybe2030/" target="_blank" rel="external">Pollçš„ç¬”è®°</a></li>
<li><a href="http://www.ruanyifeng.com/blog/" target="_blank" rel="external">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a></li>
<li><a href="https://david-abel.github.io/" target="_blank" rel="external">ICML å­¦éœ¸ David Abel</a></li>
<li><a href="https://coolshell.cn" target="_blank" rel="external">é…·å£³</a></li>
</ul>
<h2 id="vps"><a href="#vps" class="headerlink" title="vps"></a>vps</h2><ul>
<li><a href="https://www.yuntionly.com/" target="_blank" rel="external">www.yuntionly.com</a></li>
<li><a href="https://www.wisevpn.net/" target="_blank" rel="external">www.wisevpn.net</a></li>
<li><a href="https://www.banwago.com/797.html" target="_blank" rel="external">www.banwago.com</a></li>
<li><a href="https://www.godaddy.com/" target="_blank" rel="external">www.godaddy.com</a></li>
<li><a href="https://www.cnbanwagong.com/4.html" target="_blank" rel="external">æ¬ç“¦å·¥ä¸­æ–‡ç½‘</a></li>
<li><a href="https://bwh1.net/" target="_blank" rel="external">æ¬ç“¦å·¥è´­ä¹°é¡µé¢</a></li>
<li><a href="http://ulis.me/archives/5909" target="_blank" rel="external">æ¬ç“¦å·¥VPSç»­è´¹çš„é‚£äº›äº‹</a></li>
<li><a href="https://bwhgw.wordpress.com/2018/03/30/ban_wa_gong_qu_xiao_yi_jian_ss_gong_neng_hou_jiao_nin_san_zhong_fang_fa_qing_song_da_jian_ss/" target="_blank" rel="external">æ¬ç“¦å·¥å–æ¶ˆä¸€é”®SSåŠŸèƒ½åï¼Œæ•™æ‚¨ä¸‰ç§æ–¹æ³•è½»æ¾æ­å»ºSSï¼</a></li>
<li><a href="https://kiwivm.64clouds.com/preloader.php?load=/main-exec.php?mode=extras_shadowsocks" target="_blank" rel="external">ç™»é™†åˆ°æ¬ç“¦å·¥åå°, ä¸€é”®å®‰è£…SSï¼Œç±»ä¼¼æ–¹æ³•ä¸€ï¼ˆå°ç™½é€‚ç”¨</a></li>
<li><a href="https://blog.csdn.net/qq_31897023/article/details/82533887" target="_blank" rel="external">Centos6.8æ­å»ºSS</a></li>
</ul>
<blockquote>
<p>ssh ç™»å½•æ¬ç“¦å·¥æœºå™¨</p>
<ol>
<li>stop server @Main controls</li>
<li>Root password modification</li>
<li>start Server</li>
<li>Root shell - interactive</li>
<li><p>vi /etc/ssh/sshd_config, add </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PermitRootLogin yes</span><br><span class="line">Port 22</span><br></pre></td></tr></table></figure>
</li>
<li><p>/etc/init.d/sshd restart</p>
</li>
<li>ssh root@ip</li>
</ol>
</blockquote>
<h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><ul>
<li><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000" target="_blank" rel="external">å»–é›ªå³° Python 3 </a></li>
<li><a href="https://github.com/elastic/elasticsearch-dsl-py" target="_blank" rel="external">elasticsearch-dsl-py</a></li>
<li><a href="https://pypi.python.org/pypi" target="_blank" rel="external">pypi.python.org/pypi</a></li>
<li><a href="https://github.com/pyenv/pyenv-installer" target="_blank" rel="external">install pyenv</a></li>
<li><a href="http://flask.pocoo.org/" target="_blank" rel="external">flask microframework</a></li>
</ul>
<blockquote>
<p>pip install elasticsearch_dsl==0.0.11</p>
</blockquote>
<h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><ul>
<li><a href="http://www.runoob.com/linux/linux-command-manual.html" target="_blank" rel="external">runoob linux</a></li>
<li><a href="https://shazi.info/mac-osx-%E6%B2%92%E6%9C%89%E7%9A%84-rename%EF%BC%8C%E7%94%A8-brew-%E6%8A%93%E5%9B%9E%E4%BE%86%EF%BD%9E/" target="_blank" rel="external">Mac OSX æ²’æœ‰çš„ renameï¼Œç”¨ brew æŠ“å›ä¾†ï½</a></li>
</ul>
<h2 id="spark"><a href="#spark" class="headerlink" title="spark"></a>spark</h2><ul>
<li><a href="http://spark.apache.org/" target="_blank" rel="external">spark.apache.org</a></li>
<li><a href="http://spark.apache.org/docs/1.6.3/api/python/pyspark.sql.html#pyspark.sql.DataFrame" target="_blank" rel="external">python spark 1.6.3</a></li>
<li><a href="https://github.com/apache/spark" target="_blank" rel="external">github spark</a></li>
</ul>
<p>åœ¨ pycharm ä¸Šé…ç½® pyspark</p>
<ul>
<li><a href="https://blog.csdn.net/rifengxxc/article/details/74503119" target="_blank" rel="external">pycharm ä¸Šé…ç½® pyspark</a></li>
<li><a href="https://blog.csdn.net/suzyu12345/article/details/53885092" target="_blank" rel="external">Pycharmå¼€å‘sparkç¨‹åº</a></li>
</ul>
<h2 id="devops"><a href="#devops" class="headerlink" title="devops"></a>devops</h2><ul>
<li>å…ç™»é™†è®¾ç½® ssh-copy-id -i id_rsa.pub hdfs@192.192.0.27</li>
</ul>
<h2 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h2><ul>
<li><a href="https://www.zhihu.com/question/20021861" target="_blank" rel="external">macOS (OS X) æœ‰å“ªäº›å¸¸ç”¨çš„å¿«æ·é”®ï¼Ÿ</a></li>
</ul>
<h2 id="æ¯”ç‰¹å¸"><a href="#æ¯”ç‰¹å¸" class="headerlink" title="æ¯”ç‰¹å¸"></a>æ¯”ç‰¹å¸</h2><ul>
<li><a href="http://www.btcranks.com/hk/" target="_blank" rel="external">æ¸¯å°æ•°å­—è´§å¸äº¤æ˜“å¹³å°æ’å</a></li>
<li><a href="https://www.bitfinex.com/" target="_blank" rel="external">bitfinex</a></li>
<li><a href="https://www.binance.com/en" target="_blank" rel="external">binance</a></li>
<li><a href="https://www.zhihu.com/question/269003572" target="_blank" rel="external">å¦‚ä½•æŠŠç«å¸ç½‘çš„æ¯”ç‰¹å¸ç§»åˆ°OKEXï¼Ÿ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/36776300" target="_blank" rel="external">å¸å®‰(Binance) | æ³¨å†Œå’Œä½¿ç”¨æ•™ç¨‹</a></li>
<li><a href="https://www.bitoex.com/dashboard/statistics?locale=zh-CN" target="_blank" rel="external">å°æ¹¾å¸æ‰˜</a></li>
<li><a href="https://otcbtc.com/" target="_blank" rel="external">OTCBTC - æ”¯æŒåœºå¤–äº¤æ˜“ï¼Œæ”¯ä»˜å®</a></li>
</ul>
<h2 id="blog"><a href="#blog" class="headerlink" title="blog"></a>blog</h2><ul>
<li><a href="https://dotblogs.com.tw/hatelove/2017/03/26/why-engineers-should-keep-blogging" target="_blank" rel="external">é¼“åŠ±å·¥ç¨‹å¸ˆå†™blog</a></li>
<li><a href="https://coolshell.cn/articles/17583.html" target="_blank" rel="external">æŠ€æœ¯äººå‘˜çš„å‘å±•ä¹‹è·¯</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Coursera 7 - Support Vector Machines]]></title>
      <url>http://shopee.ai/2017/10/13/ml/coursera-ng-w7-svm/</url>
      <content type="html"><![CDATA[<p>From <code>Logistic Regression</code> to <code>Support Vector Machines</code></p>
<a id="more"></a>
<h2 id="1-Large-Margin-Classification"><a href="#1-Large-Margin-Classification" class="headerlink" title="1. Large Margin Classification"></a>1. Large Margin Classification</h2><p><strong>Alternation view of logistic regression</strong></p>
<p>$ \begin{align} h_\theta (x) = g({\theta^T x}) = \dfrac{1}{1 + e^{-\theta^T x}} \end{align}  \; , \; h_\theta (x) \in [0, 1] $ </p>
<p><img src="/images/ml/coursera/ml-ng-w3-02.png" width="820" height="500" align="middle" img=""></p>
<blockquote>
<p>$ y = 1 \; when \; h_\theta(x) = g(\theta^T x) \geq 0.5 \; when \; \theta^T x \geq 0 $.   </p>
<p>$ y = 0 \; when \; h_\theta(x) = g(\theta^T x) \le 0.5 \; when \; \theta^T x \le 0 $ </p>
</blockquote>
<p>We can compress our cost functionâ€™s two conditional cases into one case:</p>
<p>$ \mathrm{Cost}(h_\theta(x),y) = - y \cdot \log(h_\theta(x)) - (1 - y) \cdot \log(1 - h_\theta(x))$</p>
<p>We can fully write out our entire cost function as follows:</p>
<p>$<br>J(\theta) = - \frac{1}{m} \displaystyle \sum_{i=1}^m [y^{(i)}\log (h_\theta (x^{(i)})) + (1 - y^{(i)})\log (1 - h_\theta(x^{(i)}))]<br>$</p>
<p>$<br>J(\theta) = \mathop{min}\limits_{_\theta} \frac{1}{m} \left[ \displaystyle \sum_{i=1}^m y^{(i)}\ \left(-\log h_\theta (x^{(i)}) \right) + (1 - y^{(i)}) \left( - \log (1 - h_\theta(x^{(i)})) \right) \right]+ \frac{\lambda}{2m} \displaystyle \sum_{j=1}^n \theta_j^2<br>$</p>
<blockquote>
<p>$cost_1(\theta^T x^{i}) = -\log h_\theta (x^{(i)})$<br>$cost_0(\theta^T x^{i}) = - \log (1 - h_\theta(x^{(i)}))$</p>
</blockquote>
<p>$<br>J(\theta) = \mathop{min}\limits_{_\theta} \frac{1}{m} \left[ \displaystyle \sum_{i=1}^m y^{(i)}\ \left(cost_1(\theta^T x^{i}) \right) + (1 - y^{(i)}) \left( cost_0(\theta^T x^{i}) \right) \right]+ \frac{\lambda}{2m} \displaystyle \sum_{j=1}^n \theta_j^2<br>$</p>
<h3 id="1-1-Optimization-Objective"><a href="#1-1-Optimization-Objective" class="headerlink" title="1.1 Optimization Objective"></a>1.1 Optimization Objective</h3><p>$<br>J(\theta) = \mathop{min}\limits_{_\theta} \frac{1}{m} \left[ \displaystyle \sum_{i=1}^m y^{(i)}\ \left(cost_1(\theta^T x^{i}) \right) + (1 - y^{(i)}) \left( cost_0(\theta^T x^{i}) \right) \right]+ \frac{\lambda}{2m} \displaystyle \sum_{j=1}^n \theta_j^2<br>$</p>
<blockquote>
<p>ä»¤ $C = \frac{1}{\theta}$ </p>
</blockquote>
<p>$<br>J(\theta) = \mathop{min}\limits_{_\theta} C \displaystyle \sum_{i=1}^m \left[  y^{(i)}\ cost_1(\theta^T x^{i}) + (1 - y^{(i)}) cost_0(\theta^T x^{i}) \right]+ \frac{1}{2m} \displaystyle \sum_{j=1}^n \theta_j^2<br>$</p>
<h3 id="1-2-Large-Margin-Intuition"><a href="#1-2-Large-Margin-Intuition" class="headerlink" title="1.2 Large Margin Intuition"></a>1.2 Large Margin Intuition</h3><p><img src="/images/ml/coursera/ml-ng-w7-svm-1.png" width="620" height="400" align="middle" img=""></p>
<p><img src="/images/ml/coursera/ml-ng-w7-svm-2.png" width="620" height="400" align="middle" img=""></p>
<p><img src="/images/ml/coursera/ml-ng-w7-svm-3.png" width="620" height="400" align="middle" img=""></p>
<h3 id="1-3-Mathematics-Behind-Large-Margin-Classification"><a href="#1-3-Mathematics-Behind-Large-Margin-Classification" class="headerlink" title="1.3 Mathematics Behind Large Margin Classification"></a>1.3 Mathematics Behind Large Margin Classification</h3><p><img src="/images/ml/coursera/ml-ng-w7-svm-4.png" width="620" height="400" align="middle" img=""></p>
<p><img src="/images/ml/coursera/ml-ng-w7-svm-5.png" width="620" height="400" align="middle" img=""></p>
<p><img src="/images/ml/coursera/ml-ng-w7-svm-6.png" width="620" height="400" align="middle" img=""></p>
<h2 id="2-Kernels"><a href="#2-Kernels" class="headerlink" title="2. Kernels"></a>2. Kernels</h2><h3 id="2-1-Kernels-I"><a href="#2-1-Kernels-I" class="headerlink" title="2.1 Kernels I"></a>2.1 Kernels I</h3><h3 id="2-2-Kernels-II"><a href="#2-2-Kernels-II" class="headerlink" title="2.2 Kernels II"></a>2.2 Kernels II</h3><h2 id="3-SVMs-in-Practice"><a href="#3-SVMs-in-Practice" class="headerlink" title="3. SVMs in Practice"></a>3. SVMs in Practice</h2><h3 id="3-1-Using-An-SVM"><a href="#3-1-Using-An-SVM" class="headerlink" title="3.1 Using An SVM"></a>3.1 Using An SVM</h3><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/24638007" target="_blank" rel="external">é›¶åŸºç¡€å­¦SVMâ€”Support Vector Machine(ä¸€)</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[My Blog Config.yml]]></title>
      <url>http://shopee.ai/2017/10/08/devops/ops-hexo-blog_config.yml/</url>
      <content type="html"><![CDATA[<p>hexo blog config.yml file</p>
<a id="more"></a>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line">title: Home</span><br><span class="line">subtitle: æ˜¥æœ‰ç™¾èŠ±ç§‹æœ‰æœˆï¼Œå¤æœ‰æ¶¼é¢¨å†¬æœ‰é›ª .</span><br><span class="line">description: Everyone should not forget his dream</span><br><span class="line">author: Blair Chan</span><br><span class="line"><span class="comment">#avatar: /images/avatar.jpeg</span></span><br><span class="line"></span><br><span class="line">language: </span><br><span class="line">- en</span><br><span class="line">- zh-Hans</span><br><span class="line">- zh-tw</span><br><span class="line">timezone:</span><br><span class="line"></span><br><span class="line"><span class="comment">#leancloud_visitors:</span></span><br><span class="line"><span class="comment">#  enable: true</span></span><br><span class="line"><span class="comment">#  app_id: #&lt;AppID&gt;</span></span><br><span class="line"><span class="comment">#  app_key: #&lt;AppKEY&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#comments</span></span><br><span class="line">disqus_shortname: blairos-sn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line">url: http://iequa.com/</span><br><span class="line">root: /</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="built_in">source</span>_dir: <span class="built_in">source</span></span><br><span class="line">public_dir: public</span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads/code</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line">new_post_name: :title.md <span class="comment"># File name of new posts</span></span><br><span class="line">default_layout: post</span><br><span class="line">titlecase: <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line">external_link: <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line">filename_<span class="keyword">case</span>: 0</span><br><span class="line">render_drafts: <span class="literal">false</span></span><br><span class="line">post_asset_folder: <span class="literal">false</span></span><br><span class="line">relative_link: <span class="literal">false</span></span><br><span class="line">future: <span class="literal">true</span></span><br><span class="line">highlight:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  line_number: <span class="literal">false</span></span><br><span class="line">  auto_detect: <span class="literal">false</span></span><br><span class="line">  tab_replace:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line">default_category: uncategorized</span><br><span class="line">category_map:</span><br><span class="line">tag_map:</span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line">per_page: 10</span><br><span class="line">pagination_dir: page</span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="comment">## theme: hexo-theme-next</span></span><br><span class="line"><span class="comment">## theme: yinwang</span></span><br><span class="line"><span class="comment">## theme: minos</span></span><br><span class="line">theme: blairos</span><br><span class="line"><span class="comment">## theme: jacman</span></span><br><span class="line"><span class="comment">## theme: landscape-plus</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:<span class="built_in">type</span>: git</span><br><span class="line">repository: https://github.com/52binge/52binge.github.io.git</span><br><span class="line">branch: master</span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[My Vim Config File]]></title>
      <url>http://shopee.ai/2017/10/04/devops/ops-vimrc/</url>
      <content type="html"><![CDATA[<p>my vim custom config .vimrc file</p>
<a id="more"></a>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> nocompatible <span class="string">" å…³é—­ vi å…¼å®¹æ¨¡å¼  </span><br><span class="line">syntax on        "</span> è‡ªåŠ¨è¯­æ³•é«˜äº®  </span><br><span class="line"><span class="built_in">set</span> number     <span class="string">" æ˜¾ç¤ºè¡Œå·         "</span> <span class="built_in">set</span> cursorline    çªå‡ºæ˜¾ç¤ºå½“å‰è¡Œ  </span><br><span class="line"><span class="built_in">set</span> ruler        <span class="string">" æ‰“å¼€çŠ¶æ€æ æ ‡å°º    (ä¸é”™)  </span><br><span class="line">set shiftwidth=4 "</span> è®¾å®š &lt;&lt; å’Œ &gt;&gt; å‘½ä»¤ç§»åŠ¨æ—¶çš„å®½åº¦ä¸º 4  </span><br><span class="line"><span class="built_in">set</span> smartindent  </span><br><span class="line"><span class="built_in">set</span> tabstop=4         <span class="string">" tabstop=4 è®¾å®š tab é•¿åº¦ä¸º4  </span><br><span class="line">set softtabstop=4   </span><br><span class="line">set expandtab  </span><br><span class="line">set encoding=utf-8 fileencodings=ucs-bom,utf-8,cp936</span><br><span class="line">set nobackup     "</span> è¦†ç›–æ–‡ä»¶æ—¶ä¸å¤‡ä»½  </span><br><span class="line"><span class="built_in">set</span> ignorecase smartcase    <span class="string">" æœç´¢æ—¶å¿½ç•¥å¤§å°å†™ï¼Œä½†åœ¨æœ‰ä¸€ä¸ªæˆ–ä»¥ä¸Šå¤§å†™å­—æ¯æ—¶ä»å¤§å°å†™æ•æ„Ÿ  </span><br><span class="line">"</span><span class="built_in">set</span> nowrapscan              <span class="string">" ç¦æ­¢åœ¨æœç´¢åˆ°æ–‡ä»¶ä¸¤ç«¯æ—¶é‡æ–°æœç´¢  </span><br><span class="line">set nowrapscan              "</span> ç¦æ­¢åœ¨æœç´¢åˆ°æ–‡ä»¶ä¸¤ç«¯æ—¶é‡æ–°æœç´¢  </span><br><span class="line"><span class="built_in">set</span> incsearch               <span class="string">" è¾“å…¥æœç´¢å†…å®¹æ—¶å°±æ˜¾ç¤ºæœç´¢ç»“æœ  </span><br><span class="line">set hlsearch                "</span> æœç´¢æ—¶é«˜äº®æ˜¾ç¤ºè¢«æ‰¾åˆ°çš„æ–‡æœ¬  </span><br><span class="line"><span class="built_in">set</span> noerrorbells            <span class="string">" å…³é—­é”™è¯¯ä¿¡æ¯å“é“ƒ  </span><br><span class="line">set novisualbell            "</span> å…³é—­ä½¿ç”¨å¯è§†å“é“ƒä»£æ›¿å‘¼å«  </span><br><span class="line"><span class="built_in">set</span> t_vb=                   <span class="string">" ç½®ç©ºé”™è¯¯é“ƒå£°çš„ç»ˆç«¯ä»£ç   </span><br><span class="line">set showmatch               "</span> æ’å…¥æ‹¬å·æ—¶ï¼ŒçŸ­æš‚åœ°è·³è½¬åˆ°åŒ¹é…çš„å¯¹åº”æ‹¬å·  </span><br><span class="line"><span class="string">" set matchtime=2             "</span> çŸ­æš‚è·³è½¬åˆ°åŒ¹é…æ‹¬å·çš„æ—¶é—´  </span><br><span class="line"><span class="built_in">set</span> magic                   <span class="string">" è®¾ç½®é­”æœ¯  </span><br><span class="line">set hidden                  "</span> å…è®¸åœ¨æœ‰æœªä¿å­˜çš„ä¿®æ”¹æ—¶åˆ‡æ¢ç¼“å†²åŒºï¼Œæ­¤æ—¶çš„ä¿®æ”¹ç”± vim è´Ÿè´£ä¿å­˜  </span><br><span class="line"><span class="string">"set guioptions-=T           "</span> éšè—å·¥å…·æ   </span><br><span class="line"><span class="string">"set guioptions-=m           "</span> éšè—èœå•æ   </span><br><span class="line"><span class="built_in">set</span> smartindent             <span class="string">" å¼€å¯æ–°è¡Œæ—¶ä½¿ç”¨æ™ºèƒ½è‡ªåŠ¨ç¼©è¿›  </span><br><span class="line">set backspace=indent,eol,start  </span><br><span class="line">                            "</span> ä¸è®¾å®šåœ¨æ’å…¥çŠ¶æ€æ— æ³•ç”¨é€€æ ¼é”®å’Œ Delete é”®åˆ é™¤å›è½¦ç¬¦  </span><br><span class="line"><span class="built_in">set</span> cmdheight=1             <span class="string">" è®¾å®šå‘½ä»¤è¡Œçš„è¡Œæ•°ä¸º 1  </span><br><span class="line">set laststatus=2            "</span> æ˜¾ç¤ºçŠ¶æ€æ  (é»˜è®¤å€¼ä¸º 1, æ— æ³•æ˜¾ç¤ºçŠ¶æ€æ )  </span><br><span class="line"><span class="built_in">set</span> statusline=\ %&lt;%F[%1*%M%*%n%R%H]%=\ %y\ %0(%&#123;&amp;fileformat&#125;\ %&#123;&amp;encoding&#125;\ %c:%l/%L%)\  </span><br><span class="line"><span class="string">" è®¾ç½®åœ¨çŠ¶æ€è¡Œæ˜¾ç¤ºçš„ä¿¡æ¯  </span><br><span class="line">"</span><span class="built_in">set</span> foldenable              <span class="string">" å¼€å§‹æŠ˜å   </span><br><span class="line">"</span><span class="built_in">set</span> foldmethod=syntax       <span class="string">" è®¾ç½®è¯­æ³•æŠ˜å   </span><br><span class="line">"</span><span class="built_in">set</span> foldcolumn=0            <span class="string">" è®¾ç½®æŠ˜å åŒºåŸŸçš„å®½åº¦  </span><br><span class="line">"</span>setlocal foldlevel=1        <span class="string">" è®¾ç½®æŠ˜å å±‚æ•°ä¸º  </span><br><span class="line">"</span> <span class="built_in">set</span> foldclose=all           <span class="string">" è®¾ç½®ä¸ºè‡ªåŠ¨å…³é—­æŠ˜å                              </span><br><span class="line">"</span> nnoremap &lt;space&gt; @=((foldclosed(line(<span class="string">'.'</span>)) &lt; 0) ? <span class="string">'zc'</span> : <span class="string">'zo'</span>)&lt;CR&gt;  </span><br><span class="line"><span class="string">" ç”¨ç©ºæ ¼é”®æ¥å¼€å…³æŠ˜å   </span><br><span class="line"></span><br><span class="line">set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936</span><br><span class="line">set termencoding=utf-8</span><br><span class="line">set encoding=utf-8  </span><br><span class="line">  </span><br><span class="line">"</span> <span class="built_in">return</span> OS <span class="built_in">type</span>, eg: windows, or linux, mac, et.st..  </span><br><span class="line"><span class="keyword">function</span>! MySys()  </span><br><span class="line">    <span class="keyword">if</span> has(<span class="string">"win16"</span>) || has(<span class="string">"win32"</span>) || has(<span class="string">"win64"</span>) || has(<span class="string">"win95"</span>)  </span><br><span class="line">       <span class="built_in">return</span> <span class="string">"windows"</span>  </span><br><span class="line">    elseif has(<span class="string">"unix"</span>)  </span><br><span class="line">       <span class="built_in">return</span> <span class="string">"linux"</span>  </span><br><span class="line">    endif  </span><br><span class="line">endfunction  </span><br><span class="line">  </span><br><span class="line"><span class="string">" ç”¨æˆ·ç›®å½•å˜é‡<span class="variable">$VIMFILES</span>  </span><br><span class="line">if MySys() == "</span>windows<span class="string">"  </span><br><span class="line">    let <span class="variable">$VIMFILES</span> = <span class="variable">$VIM</span>.'/vimfiles'  </span><br><span class="line">elseif MySys() == "</span>linux<span class="string">"  </span><br><span class="line">    let <span class="variable">$VIMFILES</span> = <span class="variable">$HOME</span>.'/.vim'  </span><br><span class="line">endif  </span><br><span class="line">  </span><br><span class="line">"</span> è®¾å®šdocæ–‡æ¡£ç›®å½•  </span><br><span class="line"><span class="built_in">let</span> helptags=<span class="variable">$VIMFILES</span>.<span class="string">'/doc'</span>  </span><br><span class="line">  </span><br><span class="line"><span class="string">" è®¾ç½®å­—ä½“ ä»¥åŠä¸­æ–‡æ”¯æŒ  </span><br><span class="line">if has("</span>win32<span class="string">")  </span><br><span class="line">    set guifont=Inconsolata:h12:cANSI  </span><br><span class="line">endif  </span><br><span class="line">  </span><br><span class="line">"</span> é…ç½®å¤šè¯­è¨€ç¯å¢ƒ  </span><br><span class="line"><span class="keyword">if</span> has(<span class="string">"multi_byte"</span>)  </span><br><span class="line">   <span class="string">" UTF-8 ç¼–ç   </span><br><span class="line">    set encoding=utf-8  </span><br><span class="line">    set termencoding=utf-8  </span><br><span class="line">    set formatoptions+=mM  </span><br><span class="line">    set fencs=utf-8,gbk  </span><br><span class="line">  </span><br><span class="line">    if v:lang =~? '^\(zh\)\|\(ja\)\|\(ko\)'  </span><br><span class="line">          set ambiwidth=double  </span><br><span class="line">    endif  </span><br><span class="line">  </span><br><span class="line">    if has("</span>win32<span class="string">")  </span><br><span class="line">        source <span class="variable">$VIMRUNTIME</span>/delmenu.vim  </span><br><span class="line">           source <span class="variable">$VIMRUNTIME</span>/menu.vim  </span><br><span class="line">           language messages zh_CN.utf-8  </span><br><span class="line">    endif  </span><br><span class="line">    else  </span><br><span class="line">           echoerr "</span>Sorry, this version of (g)vim was not compiled with +multi_byte<span class="string">"  </span><br><span class="line">endif  </span><br><span class="line">  </span><br><span class="line">"</span> Buffersæ“ä½œå¿«æ·æ–¹å¼!  </span><br><span class="line">nnoremap &lt;C-RETURN&gt; :bnext&lt;CR&gt;  </span><br><span class="line">nnoremap &lt;C-S-RETURN&gt; :bprevious&lt;CR&gt;  </span><br><span class="line"><span class="string">" Tabæ“ä½œå¿«æ·æ–¹å¼!  </span><br><span class="line">nnoremap &lt;C-TAB&gt; :tabnext&lt;CR&gt;  </span><br><span class="line">nnoremap &lt;C-S-TAB&gt; :tabprev&lt;CR&gt;  </span><br><span class="line">"</span>å…³äºtabçš„å¿«æ·é”®  </span><br><span class="line"><span class="string">" map tn :tabnext&lt;cr&gt;  </span><br><span class="line">"</span> map tp :tabprevious&lt;cr&gt;  </span><br><span class="line"><span class="string">" map td :tabnew .&lt;cr&gt;  </span><br><span class="line">"</span> map te :tabedit  </span><br><span class="line"><span class="string">" map tc :tabclose&lt;cr&gt;  </span><br><span class="line">"</span>çª—å£åˆ†å‰²æ—¶,è¿›è¡Œåˆ‡æ¢çš„æŒ‰é”®çƒ­é”®éœ€è¦è¿æ¥ä¸¤æ¬¡,æ¯”å¦‚ä»ä¸‹æ–¹çª—å£ç§»åŠ¨  </span><br><span class="line"><span class="string">"å…‰æ ‡åˆ°ä¸Šæ–¹çª—å£,éœ€è¦&lt;c-w&gt;&lt;c-w&gt;k,éå¸¸éº»çƒ¦,ç°åœ¨é‡æ˜ å°„ä¸º&lt;c-k&gt;,åˆ‡æ¢çš„  </span><br><span class="line">"</span>æ—¶å€™ä¼šå˜å¾—éå¸¸æ–¹ä¾¿.  </span><br><span class="line">nnoremap &lt;C-h&gt; &lt;C-w&gt;h  </span><br><span class="line">nnoremap &lt;C-j&gt; &lt;C-w&gt;j  </span><br><span class="line">nnoremap &lt;C-k&gt; &lt;C-w&gt;k  </span><br><span class="line">nnoremap &lt;C<span class="_">-l</span>&gt; &lt;C-w&gt;l  </span><br><span class="line"><span class="string">"ä¸€äº›ä¸é”™çš„æ˜ å°„è½¬æ¢è¯­æ³•ï¼ˆå¦‚æœåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æ··åˆäº†ä¸åŒè¯­è¨€æ—¶æœ‰ç”¨ï¼‰  </span><br><span class="line">nnoremap &lt;leader&gt;1 :set filetype=xhtml&lt;CR&gt;  </span><br><span class="line">nnoremap &lt;leader&gt;2 :set filetype=css&lt;CR&gt;  </span><br><span class="line">nnoremap &lt;leader&gt;3 :set filetype=javascript&lt;CR&gt;  </span><br><span class="line">nnoremap &lt;leader&gt;4 :set filetype=php&lt;CR&gt;  </span><br><span class="line">"</span> <span class="built_in">set</span> fileformats=unix,dos,mac  </span><br><span class="line"><span class="string">" nmap &lt;leader&gt;fd :se fileformat=dos&lt;CR&gt;  </span><br><span class="line">"</span> nmap &lt;leader&gt;fu :se fileformat=unix&lt;CR&gt;  </span><br><span class="line">  </span><br><span class="line"><span class="string">" use Ctrl+[l|n|p|cc] to list|next|previous|jump to count the result  </span><br><span class="line">"</span> map &lt;C-x&gt;l &lt;ESC&gt;:cl&lt;CR&gt;  </span><br><span class="line"><span class="string">" map &lt;C-x&gt;n &lt;ESC&gt;:cn&lt;CR&gt;  </span><br><span class="line">"</span> map &lt;C-x&gt;p &lt;ESC&gt;:cp&lt;CR&gt;  </span><br><span class="line"><span class="string">" map &lt;C-x&gt;c &lt;ESC&gt;:cc&lt;CR&gt;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">"</span> è®© Tohtml äº§ç”Ÿæœ‰ CSS è¯­æ³•çš„ html  </span><br><span class="line"><span class="string">" syntax/2html.vimï¼Œå¯ä»¥ç”¨:runtime! syntax/2html.vim  </span><br><span class="line">let html_use_css=1  </span><br><span class="line">"</span> Python æ–‡ä»¶çš„ä¸€èˆ¬è®¾ç½®ï¼Œæ¯”å¦‚ä¸è¦ tab ç­‰  </span><br><span class="line">autocmd FileType python <span class="built_in">set</span> tabstop=4 shiftwidth=4 expandtab  </span><br><span class="line">autocmd FileType python map &lt;F12&gt; :!python %&lt;CR&gt;  </span><br><span class="line"><span class="string">" é€‰ä¸­çŠ¶æ€ä¸‹ Ctrl+c å¤åˆ¶  </span><br><span class="line">vmap &lt;C-c&gt; "</span>+y  </span><br><span class="line"><span class="string">" æ‰“å¼€javascriptæŠ˜å   </span><br><span class="line">let b:javascript_fold=1  </span><br><span class="line">"</span> æ‰“å¼€javascriptå¯¹domã€htmlå’Œcssçš„æ”¯æŒ  </span><br><span class="line"><span class="built_in">let</span> javascript_<span class="built_in">enable</span>_domhtmlcss=1  </span><br><span class="line"><span class="string">" è®¾ç½®å­—å…¸ ~/.vim/dict/æ–‡ä»¶çš„è·¯å¾„  </span><br><span class="line">autocmd filetype javascript set dictionary=<span class="variable">$VIMFILES</span>/dict/javascript.dict  </span><br><span class="line">autocmd filetype css set dictionary=<span class="variable">$VIMFILES</span>/dict/css.dict  </span><br><span class="line">autocmd filetype php set dictionary=<span class="variable">$VIMFILES</span>/dict/php.dict  </span><br><span class="line">  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line">    <span class="string">" plugin - bufexplorer.vim Buffersåˆ‡æ¢  </span><br><span class="line">    "</span> \be å…¨å±æ–¹å¼æŸ¥çœ‹å…¨éƒ¨æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨  </span><br><span class="line">    <span class="string">" \bv å·¦å³æ–¹å¼æŸ¥çœ‹   \bs ä¸Šä¸‹æ–¹å¼æŸ¥çœ‹  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">    "</span> plugin - taglist.vim  æŸ¥çœ‹å‡½æ•°åˆ—è¡¨ï¼Œéœ€è¦ctagsç¨‹åº  </span><br><span class="line">    <span class="string">" F4 æ‰“å¼€éšè—taglistçª—å£  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line"><span class="keyword">if</span> MySys() == <span class="string">"windows"</span>                <span class="string">" è®¾å®šwindowsç³»ç»Ÿä¸­ctagsç¨‹åºçš„ä½ç½®  </span><br><span class="line">    let Tlist_Ctags_Cmd = '"</span><span class="string">'.$VIMRUNTIME.'</span>/ctags.exe<span class="string">"'  </span><br><span class="line">elseif MySys() == "</span>linux<span class="string">"              "</span> è®¾å®šwindowsç³»ç»Ÿä¸­ctagsç¨‹åºçš„ä½ç½®  </span><br><span class="line">    <span class="built_in">let</span> Tlist_Ctags_Cmd = <span class="string">'/usr/bin/ctags'</span>  </span><br><span class="line">endif  </span><br><span class="line">nnoremap &lt;silent&gt;&lt;F4&gt; :TlistToggle&lt;CR&gt;  </span><br><span class="line"><span class="built_in">let</span> Tlist_Show_One_File = 1            <span class="string">" ä¸åŒæ—¶æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶çš„tagï¼Œåªæ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„  </span><br><span class="line">let Tlist_Exit_OnlyWindow = 1          "</span> å¦‚æœtaglistçª—å£æ˜¯æœ€åä¸€ä¸ªçª—å£ï¼Œåˆ™é€€å‡ºvim  </span><br><span class="line"><span class="built_in">let</span> Tlist_Use_Right_Window = 1         <span class="string">" åœ¨å³ä¾§çª—å£ä¸­æ˜¾ç¤ºtaglistçª—å£  </span><br><span class="line">let Tlist_File_Fold_Auto_Close=1       "</span> è‡ªåŠ¨æŠ˜å å½“å‰éç¼–è¾‘æ–‡ä»¶çš„æ–¹æ³•åˆ—è¡¨  </span><br><span class="line"><span class="built_in">let</span> Tlist_Auto_Open = 0  </span><br><span class="line"><span class="built_in">let</span> Tlist_Auto_Update = 1  </span><br><span class="line"><span class="built_in">let</span> Tlist_Hightlight_Tag_On_BufEnter = 1  </span><br><span class="line"><span class="built_in">let</span> Tlist_Enable_Fold_Column = 0  </span><br><span class="line"><span class="built_in">let</span> Tlist_Process_File_Always = 1  </span><br><span class="line"><span class="built_in">let</span> Tlist_Display_Prototype = 0  </span><br><span class="line"><span class="built_in">let</span> Tlist_Compact_Format = 1  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">"</span> plugin - mark.vim ç»™å„ç§tagsæ ‡è®°ä¸åŒçš„é¢œè‰²ï¼Œä¾¿äºè§‚çœ‹è°ƒå¼çš„æ’ä»¶ã€‚  </span><br><span class="line"><span class="string">" \m  mark or unmark the word under (or before) the cursor  </span><br><span class="line">"</span> \r  manually input a regular expression. ç”¨äºæœç´¢.  </span><br><span class="line"><span class="string">" \n  clear this mark (i.e. the mark under the cursor), or clear all highlighted marks .  </span><br><span class="line">"</span> \*  å½“å‰MarkWordçš„ä¸‹ä¸€ä¸ª     \<span class="comment">#  å½“å‰MarkWordçš„ä¸Šä¸€ä¸ª  </span></span><br><span class="line"><span class="string">" \/  æ‰€æœ‰MarkWordsçš„ä¸‹ä¸€ä¸ª    \?  æ‰€æœ‰MarkWordsçš„ä¸Šä¸€ä¸ª  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">"</span> plugin - NERD_tree.vim ä»¥æ ‘çŠ¶æ–¹å¼æµè§ˆç³»ç»Ÿä¸­çš„æ–‡ä»¶å’Œç›®å½•  </span><br><span class="line"><span class="string">" :ERDtree æ‰“å¼€NERD_tree         :NERDtreeClose    å…³é—­NERD_tree  </span><br><span class="line">"</span> o æ‰“å¼€å…³é—­æ–‡ä»¶æˆ–è€…ç›®å½•         t åœ¨æ ‡ç­¾é¡µä¸­æ‰“å¼€  </span><br><span class="line"><span class="string">" T åœ¨åå°æ ‡ç­¾é¡µä¸­æ‰“å¼€           ! æ‰§è¡Œæ­¤æ–‡ä»¶  </span><br><span class="line">"</span> p åˆ°ä¸Šå±‚ç›®å½•                   P åˆ°æ ¹ç›®å½•  </span><br><span class="line"><span class="string">" K åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹                 J åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹  </span><br><span class="line">"</span> u æ‰“å¼€ä¸Šå±‚ç›®å½•                 m æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿèœå•ï¼ˆæ·»åŠ ã€åˆ é™¤ã€ç§»åŠ¨æ“ä½œï¼‰  </span><br><span class="line"><span class="string">" r é€’å½’åˆ·æ–°å½“å‰ç›®å½•             R é€’å½’åˆ·æ–°å½“å‰æ ¹ç›®å½•  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line"><span class="string">" F3 NERDTree åˆ‡æ¢  </span><br><span class="line">map &lt;F3&gt; :NERDTreeToggle&lt;CR&gt;  </span><br><span class="line">imap &lt;F3&gt; &lt;ESC&gt;:NERDTreeToggle&lt;CR&gt;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line"><span class="string">" plugin - NERD_commenter.vim   æ³¨é‡Šä»£ç ç”¨çš„ï¼Œ  </span><br><span class="line">"</span> [count],cc å…‰æ ‡ä»¥ä¸‹countè¡Œé€è¡Œæ·»åŠ æ³¨é‡Š(7,cc)  </span><br><span class="line"><span class="string">" [count],cu å…‰æ ‡ä»¥ä¸‹countè¡Œé€è¡Œå–æ¶ˆæ³¨é‡Š(7,cu)  </span><br><span class="line">"</span> [count],cm å…‰æ ‡ä»¥ä¸‹countè¡Œå°è¯•æ·»åŠ å—æ³¨é‡Š(7,cm)  </span><br><span class="line"><span class="string">" ,cA åœ¨è¡Œå°¾æ’å…¥ /* */,å¹¶ä¸”è¿›å…¥æ’å…¥æ¨¡å¼ã€‚ è¿™ä¸ªå‘½ä»¤æ–¹ä¾¿å†™æ³¨é‡Šã€‚  </span><br><span class="line">"</span> æ³¨ï¼šcountå‚æ•°å¯é€‰ï¼Œæ— åˆ™é»˜è®¤ä¸ºé€‰ä¸­è¡Œæˆ–å½“å‰è¡Œ  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">"</span><span class="built_in">let</span> NERDSpaceDelims=1       <span class="string">" è®©æ³¨é‡Šç¬¦ä¸è¯­å¥ä¹‹é—´ç•™ä¸€ä¸ªç©ºæ ¼  </span><br><span class="line">"</span><span class="built_in">let</span> NERDCompact***yComs=1   <span class="string">" å¤šè¡Œæ³¨é‡Šæ—¶æ ·å­æ›´å¥½çœ‹  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line"><span class="string">" plugin - DoxygenToolkit.vim  ç”±æ³¨é‡Šç”Ÿæˆæ–‡æ¡£ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¿«é€Ÿç”Ÿæˆå‡½æ•°æ ‡å‡†æ³¨é‡Š  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line"><span class="built_in">let</span> g:DoxygenToolkit_authorName=<span class="string">"Asins - asinsimple AT gmail DOT com"</span>  </span><br><span class="line"><span class="built_in">let</span> g:DoxygenToolkit_briefTag_funcName=<span class="string">"yes"</span>  </span><br><span class="line">map &lt;leader&gt;da :DoxAuthor&lt;CR&gt;  </span><br><span class="line">map &lt;leader&gt;df :Dox&lt;CR&gt;  </span><br><span class="line">map &lt;leader&gt;db :DoxBlock&lt;CR&gt;  </span><br><span class="line">map &lt;leader&gt;dc a /*  */&lt;LEFT&gt;&lt;LEFT&gt;&lt;LEFT&gt;  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">"</span> plugin â€“ ZenCoding.vim å¾ˆé…·çš„æ’ä»¶ï¼ŒHTMLä»£ç ç”Ÿæˆ  </span><br><span class="line"><span class="string">" æ’ä»¶æœ€æ–°ç‰ˆï¼šhttp://github.com/mattn/zencoding-vim  </span><br><span class="line">"</span> å¸¸ç”¨å‘½ä»¤å¯çœ‹ï¼šhttp://nootn.com/blog/Tool/23/  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line"><span class="string">" plugin â€“ checksyntax.vim    JavaScriptå¸¸è§è¯­æ³•é”™è¯¯æ£€æŸ¥  </span><br><span class="line">"</span> é»˜è®¤å¿«æ·æ–¹å¼ä¸º F5  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">let g:checksyntax_auto = 0 "</span> ä¸è‡ªåŠ¨æ£€æŸ¥  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">"</span> plugin - NeoComplCache.vim    è‡ªåŠ¨è¡¥å…¨æ’ä»¶  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">let g:AutoComplPop_NotEnableAtStartup = 1  </span><br><span class="line">let g:NeoComplCache_EnableAtStartup = 1  </span><br><span class="line">let g:NeoComplCache_SmartCase = 1  </span><br><span class="line">let g:NeoComplCache_TagsAutoUpdate = 1  </span><br><span class="line">let g:NeoComplCache_EnableInfo = 1  </span><br><span class="line">let g:NeoComplCache_EnableCamelCaseCompletion = 1  </span><br><span class="line">let g:NeoComplCache_MinSyntaxLength = 3  </span><br><span class="line">let g:NeoComplCache_EnableSkipCompletion = 1  </span><br><span class="line">let g:NeoComplCache_SkipInputTime = '0.5'  </span><br><span class="line">let g:NeoComplCache_SnippetsDir = <span class="variable">$VIMFILES</span>.'/snippets'  </span><br><span class="line">"</span> &lt;TAB&gt; completion.  </span><br><span class="line">inoremap &lt;expr&gt;&lt;TAB&gt; pumvisible() ? <span class="string">"\&lt;C-n&gt;"</span> : <span class="string">"\&lt;TAB&gt;"</span>  </span><br><span class="line"><span class="string">" snippets expand key  </span><br><span class="line">imap &lt;silent&gt; &lt;C-e&gt; &lt;Plug&gt;(neocomplcache_snippets_expand)  </span><br><span class="line">smap &lt;silent&gt; &lt;C-e&gt; &lt;Plug&gt;(neocomplcache_snippets_expand)  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line"><span class="string">" plugin - matchit.vim   å¯¹%å‘½ä»¤è¿›è¡Œæ‰©å±•ä½¿å¾—èƒ½åœ¨åµŒå¥—æ ‡ç­¾å’Œè¯­å¥ä¹‹é—´è·³è½¬  </span><br><span class="line">"</span> % æ­£å‘åŒ¹é…      g% åå‘åŒ¹é…  </span><br><span class="line"><span class="string">" [% å®šä½å—é¦–     ]% å®šä½å—å°¾  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">"</span> plugin - vcscommand.vim   å¯¹%å‘½ä»¤è¿›è¡Œæ‰©å±•ä½¿å¾—èƒ½åœ¨åµŒå¥—æ ‡ç­¾å’Œè¯­å¥ä¹‹é—´è·³è½¬  </span><br><span class="line"><span class="string">" SVN/gitç®¡ç†å·¥å…·  </span><br><span class="line">"</span>-----------------------------------------------------------------  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">"</span> plugin â€“ a.vim  </span><br><span class="line"><span class="string">"-----------------------------------------------------------------  </span><br><span class="line">  </span><br><span class="line">"</span>---------------------------------------------  </span><br><span class="line"><span class="string">"å®šä¹‰å‡½æ•°SetTitleï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´  </span><br><span class="line">func SetTitle()  </span><br><span class="line">if &amp;filetype == 'c'  </span><br><span class="line">    call setline(1, "</span><span class="comment">#include &lt;stdio.h&gt;")  </span></span><br><span class="line">    call setline(2, <span class="string">"#include &lt;stdlib.h&gt;"</span>)  </span><br><span class="line">    call setline(3, <span class="string">""</span>)  </span><br><span class="line">    call setline(4, <span class="string">"int main() &#123;"</span>)  </span><br><span class="line">elseif &amp;filetype == <span class="string">'cpp'</span>  </span><br><span class="line">    call setline(1, <span class="string">"#include &lt;iostream&gt;"</span>)  </span><br><span class="line">    call setline(2, <span class="string">""</span>)  </span><br><span class="line">    call setline(3, <span class="string">"int main() &#123;"</span>)  </span><br><span class="line">elseif &amp;filetype == <span class="string">'sh'</span>  </span><br><span class="line">    call setline(1, <span class="string">"#!/bin/bash"</span>)  </span><br><span class="line">    call setline(2, <span class="string">""</span>)  </span><br><span class="line">elseif &amp;filetype == <span class="string">'py'</span>  </span><br><span class="line">    call setline(1, <span class="string">"#!coding:utf-8"</span>)  </span><br><span class="line">    call setline(2, <span class="string">""</span>)  </span><br><span class="line">endif  </span><br><span class="line">endfunc  </span><br><span class="line">  </span><br><span class="line">    <span class="built_in">set</span> completeopt=longest,menu  </span><br><span class="line">    <span class="string">"æ–°å»º.c,.h,.sh,.javaæ–‡ä»¶ï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´  </span><br><span class="line">    autocmd BufNewFile *.[ch],*.sh,*.cpp,*.java exec "</span>:call SetTitle()<span class="string">"  </span><br><span class="line">    "</span>---------------------------------------------  </span><br><span class="line">  </span><br><span class="line"><span class="string">"å®šä¹‰CompileRunå‡½æ•°ï¼Œç”¨æ¥è°ƒç”¨è¿›è¡Œç¼–è¯‘å’Œè¿è¡Œ  </span><br><span class="line">func! CompileRun()  </span><br><span class="line">    exec "</span>w<span class="string">"  </span><br><span class="line">    "</span>Cç¨‹åº  </span><br><span class="line">    <span class="keyword">if</span> &amp;filetype == <span class="string">'c'</span>  </span><br><span class="line">        <span class="built_in">exec</span> <span class="string">"!gcc % -g -o %&lt;.exe"</span>  </span><br><span class="line">        <span class="built_in">exec</span> <span class="string">"! ./%&lt;.exe"</span>  </span><br><span class="line">    elseif &amp;filetype == <span class="string">'cpp'</span>  </span><br><span class="line">        <span class="built_in">exec</span> <span class="string">"!g++ % -g -o %&lt;"</span>  </span><br><span class="line">        <span class="built_in">exec</span> <span class="string">"! ./%&lt;"</span>  </span><br><span class="line">        <span class="string">"Javaç¨‹åº  </span><br><span class="line">    elseif &amp;filetype == 'java'  </span><br><span class="line">        exec "</span>!javac %<span class="string">"  </span><br><span class="line">        exec "</span>!java %&lt;<span class="string">"  </span><br><span class="line">    endif  </span><br><span class="line">endfunc  </span><br><span class="line">"</span>ç»“æŸå®šä¹‰CompileRun  </span><br><span class="line"><span class="string">"-------------------------  </span><br><span class="line">"</span> ======= ç¼–è¯‘ &amp;&amp; è¿è¡Œ ======= <span class="string">"  </span><br><span class="line">"</span> ç¼–è¯‘æºæ–‡ä»¶  </span><br><span class="line">func! CompileCode()  </span><br><span class="line">     <span class="built_in">exec</span> <span class="string">"w"</span>  </span><br><span class="line">     <span class="keyword">if</span> &amp;filetype == <span class="string">"c"</span>  </span><br><span class="line">         <span class="built_in">exec</span> <span class="string">"!gcc -Wall -std=c99 %&lt;.c -o %&lt;"</span>  </span><br><span class="line">     elseif &amp;filetype == <span class="string">"cpp"</span>  </span><br><span class="line">         <span class="built_in">exec</span> <span class="string">"!g++ -Wall -std=c++98 %&lt;.cpp -o %&lt;"</span>  </span><br><span class="line">     elseif &amp;filetype == <span class="string">"java"</span>  </span><br><span class="line">         <span class="built_in">exec</span> <span class="string">"!javac %&lt;.java"</span>  </span><br><span class="line">     endif  </span><br><span class="line">endfunc  </span><br><span class="line"><span class="string">" è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶  </span><br><span class="line">func! RunCode()  </span><br><span class="line">    exec "</span>w<span class="string">"  </span><br><span class="line">    if &amp;filetype == "</span>c<span class="string">" || &amp;filetype == "</span>cpp<span class="string">" || &amp;filetype == "</span>haskell<span class="string">"  </span><br><span class="line">        exec "</span>! ./%&lt;<span class="string">"  </span><br><span class="line">    elseif &amp;filetype == "</span>java<span class="string">"  </span><br><span class="line">        exec "</span>!java %&lt;<span class="string">"  </span><br><span class="line">    endif  </span><br><span class="line">endfunc  </span><br><span class="line">  </span><br><span class="line">"</span>---------------------------------------------  </span><br><span class="line"><span class="string">" Ctrl + F9   ä¸€é”®ä¿å­˜, ç¼–è¯‘  </span><br><span class="line">"</span> Ctrl + F10  ä¸€é”®ä¿å­˜ï¼Œè¿è¡Œ  </span><br><span class="line"><span class="string">" F9  ç¼–è¯‘ + è¿è¡Œ  </span><br><span class="line">"</span> F10 Debug  </span><br><span class="line">map&lt;C-F9&gt;:call CompileCode()&lt;CR&gt;  </span><br><span class="line">imap&lt;C-F9&gt; &lt;ESC&gt;:call CompileCode()&lt;CR&gt;  </span><br><span class="line">vmap&lt;C-F9&gt; &lt;ESC&gt;:call CompileCode()&lt;CR&gt;  </span><br><span class="line">map&lt;C-F10&gt;:call RunCode()&lt;CR&gt;  </span><br><span class="line">imap&lt;C-F10&gt; &lt;ESC&gt;:call RunCode()&lt;CR&gt;  </span><br><span class="line">vmap&lt;C-F10&gt; &lt;ESC&gt;:call RunCode()&lt;CR&gt;  </span><br><span class="line">map&lt;F9&gt;:call CompileRun()&lt;CR&gt;  </span><br><span class="line">imap&lt;F9&gt; &lt;ESC&gt;:call CompileRun()&lt;CR&gt;  </span><br><span class="line">vmap &lt;F9&gt; &lt;ESC&gt;:call CompileRun()&lt;CR&gt;  </span><br><span class="line">                                 <span class="string">"  </span><br><span class="line">"</span><span class="built_in">set</span> mouse=v <span class="string">" é¼ æ ‡æ”¯æŒ</span></span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Macos High Sierra 10.13 Work Environment Install]]></title>
      <url>http://shopee.ai/2017/10/03/devops/ops-mac10.13-install-env/</url>
      <content type="html"><![CDATA[<p>Enable Dragging With Three Finger : </p>
<blockquote>
<p>System Preferences -&gt; Accessibility -&gt; Mouse &amp; Trackpad -&gt; Trackpad Options.</p>
</blockquote>
<a id="more"></a>
<h2 id="1-Common-Soft"><a href="#1-Common-Soft" class="headerlink" title="1. Common Soft"></a>1. Common Soft</h2><ol>
<li>Chrome</li>
<li>NeteaseMusic</li>
<li>Baiduyun &amp; Aira2GUI</li>
<li>Microsoft_Office_2016_15.38.17090200_Installer.pkg</li>
</ol>
<blockquote>
<p>Google Chrome is up to date<br>Version 61.0.3163.100 (Official Build) (64-bit)</p>
<p>ç™¾åº¦äº‘ç ´è§£é™é€Ÿ (Aria2GUI + chrome plugin)</p>
<p>Evernote å›½é™…ç‰ˆä¸å›½å†…ç‰ˆåˆ†å¼€ç®¡ç†çš„.</p>
</blockquote>
<h2 id="2-Dev-Tools"><a href="#2-Dev-Tools" class="headerlink" title="2. Dev Tools"></a>2. Dev Tools</h2><h3 id="2-1-general-dev-tool"><a href="#2-1-general-dev-tool" class="headerlink" title="2.1 general dev tool"></a>2.1 general dev tool</h3><ol>
<li>Macdown</li>
<li>Alfred</li>
<li>Atom</li>
<li>SubLime Text</li>
<li><a href="https://brew.sh/" target="_blank" rel="external">Homebrew</a></li>
<li>Iterm2</li>
<li>Oh-my-zsh</li>
<li><a href="https://feiyang.li/2017/02/26/jetbrains/index.html" target="_blank" rel="external">PyCharm &amp; IDEA</a></li>
<li>GNU_Octave_3.8.0-6.dmg</li>
</ol>
<blockquote>
<p>brew (install è¿‡ç¨‹ä¼šè‡ªåŠ¨éœ€è¦ Xcode è¢«å®‰è£…)<br>brew install wget tree </p>
<p>wget <a href="https://bootstrap.pypa.io/get-pip.py" target="_blank" rel="external">https://bootstrap.pypa.io/get-pip.py</a> <br><br>sudo python get-pip.py</p>
</blockquote>
<h3 id="2-2-iterm-amp-zsh"><a href="#2-2-iterm-amp-zsh" class="headerlink" title="2.2 iterm &amp; zsh"></a>2.2 iterm &amp; zsh</h3><p><strong>Iterm2 Change Font</strong></p>
<blockquote>
<p>Iterm2 -&gt; Preference -&gt; Profiles -&gt; Text -&gt; Change Font -&gt; 17pt Courier New Bold</p>
</blockquote>
<p><strong>Iterm2 Hide scrollbars And title bar</strong></p>
<blockquote>
<p>Preference -&gt; Appearance </p>
<p>å–æ¶ˆ show per-pane title bar with split panes.<br>å‹¾é€‰ Hide scrollbars</p>
</blockquote>
<p><strong>Iterm2 Color Presets</strong></p>
<blockquote>
<p>Iterm2 -&gt; Preference -&gt; Profiles -&gt; Color -&gt; Color Presets -&gt; your_theme</p>
<p>maybe Atom, Brogrammer, Darkside </p>
<p><a href="https://github.com/iplaces/astro-zsh-theme" target="_blank" rel="external">Zsh astro theme</a></p>
</blockquote>
<p><strong>oh-my-zsh è‡ªå¸¦ git æ’ä»¶ï¼Œé‡Œé¢çš„é’ˆå¯¹git çš„åˆ«åè®¾ç½®è§</strong>:</p>
<blockquote>
<p>âœ &gt;vim .oh-my-zsh/plugins/git/git.plugin.zsh</p>
</blockquote>
<p><strong>oh-my-zsh autojump plugin install</strong></p>
<ol>
<li>brew install autojump</li>
<li>vim .zshrc</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">plugins=(git autojump)</span><br><span class="line">[[ -s $(brew --prefix)/etc/profile.d/autojump.sh ]] &amp;&amp; . $(brew --prefix)/etc/profile.d/autojump.sh</span><br></pre></td></tr></table></figure>
<p>then, source ~/.zshrc</p>
<p><strong>Reference Article</strong></p>
<blockquote>
<p><a href="http://iterm2colorschemes.com/" target="_blank" rel="external">Iterm2-color-schemes</a><br><a href="https://github.com/bahlo/iterm-colors" target="_blank" rel="external">Iterm-colors</a><br><a href="https://github.com/iplaces/astro-zsh-theme" target="_blank" rel="external">Zsh astro theme</a><br><a href="http://blog.csdn.net/rapheler/article/details/51505003" target="_blank" rel="external">ä½¿ç”¨ Zsh çš„åå¤§ä¼˜ç‚¹</a>.<br><a href="http://yijiebuyi.com/blog/b9b5e1ebb719f22475c38c4819ab8151.html" target="_blank" rel="external">oh-my-zshé…ç½®ä½ çš„zshæé«˜shellé€¼æ ¼ç»ˆæé€‰æ‹©</a>.<br><a href="http://huang-jerryc.com/2016/08/11/%E6%89%93%E9%80%A0%E9%AB%98%E6%95%88%E4%B8%AA%E6%80%A7Terminal%EF%BC%88%E4%B8%80%EF%BC%89%E4%B9%8B%20iTerm/" target="_blank" rel="external">æ‰“é€ é«˜æ•ˆä¸ªæ€§Terminalï¼ˆä¸€ï¼‰ä¹‹ iTerm</a>.<br><a href="https://segmentfault.com/a/1190000006248107" target="_blank" rel="external">æ‰“é€ é«˜æ•ˆä¸ªæ€§Terminalï¼ˆäºŒï¼‰ä¹‹ zsh</a>.<br><a href="http://www.barretlee.com/blog/2015/03/30/autojump-in-mac/" target="_blank" rel="external">Macä¸‹çš„æ•ˆç‡å·¥å…·autojump</a></p>
</blockquote>
<hr>
<h3 id="2-3-ssh-config"><a href="#2-3-ssh-config" class="headerlink" title="2.3 ssh config"></a>2.3 ssh config</h3><ol>
<li>ssh-keygen -t rsa -C â€œyour-company-email-full-addressâ€</li>
<li>~/.ssh/id_rsa.pub ç²˜è´´åˆ°è¿ç»´å¹³å°</li>
</ol>
<blockquote>
<p>mac iterm2 ssh è·³è½¬å¤±è´¥, è§£å†³åŠæ³• :</p>
<p>(1) æ–°å»ºå¹¶ç¼–è¾‘ .ssh/config, å¹¶å¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ° configæ–‡ä»¶ä¸­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Host * </span><br><span class="line">ForwardAgent yes </span><br><span class="line">PasswordAuthentication yes </span><br><span class="line">StrictHostKeyChecking no </span><br><span class="line">HashKnownHosts yes </span><br><span class="line">Compression yes</span><br></pre></td></tr></table></figure>
<p>(2) cd ï½/.ssh, å¹¶åœ¨ terminal ä¸­æ‰§è¡Œ ssh-add</p>
</blockquote>
<h3 id="2-4-navicat-for-MySQL"><a href="#2-4-navicat-for-MySQL" class="headerlink" title="2.4 navicat for MySQL"></a>2.4 navicat for MySQL</h3><p><img src="/images/ops/ops-ssh-general.png" alt="rds-general"></p>
<blockquote>
<p>Encoding è®¾ç½®ä¸º utf-8 åˆ™ï¼ŒæŸ¥è¯¢æ•°æ®åº“ï¼Œæ±‰å­—ä¹±ç ï¼Œæ”¹ä¸º Auto è§£å†³ã€‚</p>
</blockquote>
<p><img src="/images/ops/ops-ssh-rds.png" alt="ssh-rds"></p>
<h2 id="3-Java"><a href="#3-Java" class="headerlink" title="3. Java"></a>3. Java</h2><ol>
<li><a href="http://blog.tibame.com/?p=2068" target="_blank" rel="external">JDK</a></li>
<li>Maven</li>
<li>Tomcat</li>
<li>Scala</li>
<li>Spark</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ  software pwd</span><br><span class="line">/usr/local/xsoft/software</span><br><span class="line">âœ  software ll</span><br><span class="line">total 0</span><br><span class="line">lrwxr-xr-x  apache-maven -&gt; /usr/local/xsoft/deploy/apache-maven-3.3.9</span><br><span class="line">lrwxr-xr-x  apache-tomcat -&gt; /usr/local/xsoft/deploy/apache-tomcat-7.0.59</span><br><span class="line">lrwxr-xr-x  scala -&gt; /usr/local/xsoft/deploy/scala-2.11.7</span><br><span class="line">lrwxr-xr-x  spark -&gt; /usr/local/xsoft/deploy/spark-1.6.3-bin-hadoop2.6</span><br><span class="line">âœ  software</span><br></pre></td></tr></table></figure>
<h2 id="4-Blog"><a href="#4-Blog" class="headerlink" title="4. Blog"></a>4. Blog</h2><ol>
<li><a href="https://hexo.io/docs/" target="_blank" rel="external">hexo</a></li>
<li>Install Node.js</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.2/install.sh | bash</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Once nvm is installed, restart the terminal and run the following command to install Node.js:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ nvm install v4.1.0</span><br><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<blockquote>
<p>v4.1.0 æ›´åˆé€‚ hexo</p>
</blockquote>
<h2 id="5-Python"><a href="#5-Python" class="headerlink" title="5. Python"></a>5. Python</h2><h3 id="5-1-this-mac-install-pip"><a href="#5-1-this-mac-install-pip" class="headerlink" title="5.1 this mac install pip"></a>5.1 this mac install pip</h3><p><a href="https://bootstrap.pypa.io/get-pip.py" target="_blank" rel="external">Python pip</a> , <code>sudo python get-pip.py</code></p>
<p>then, terminal input <code>pip list</code>.</p>
<blockquote>
<p>If exist warning:</p>
<p>DEPRECATION: The default format will switch to columns in the future. You can use â€“format=(legacy|columns) (or define a format=(legacy|columns) in your pip.conf under the [list] section) to disable this warning.</p>
<p>solve this warning:</p>
<p>~.vim ~/.pip/pip.conf<br>[list]<br>format=columns  </p>
</blockquote>
<h3 id="5-2-pyenv-install-package"><a href="#5-2-pyenv-install-package" class="headerlink" title="5.2 pyenv install package"></a>5.2 pyenv install package</h3><p><strong>First, you need to install python <code>pyenv</code> environment</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">Python <span class="number">3.6</span><span class="number">.3</span></span><br><span class="line">(vpy3)</span><br><span class="line">âœ</span><br><span class="line"></span><br><span class="line">pip install numpy</span><br><span class="line">pip install scipy</span><br><span class="line">pip install matplotlib</span><br><span class="line">pip install pandas</span><br><span class="line"></span><br><span class="line">pip install xlrd</span><br><span class="line">pip install xlwt</span><br><span class="line">pip install StatsModels</span><br><span class="line">pip install scikit-learn</span><br><span class="line"></span><br><span class="line">pip install jieba</span><br><span class="line">pip install --upgrade gensim</span><br></pre></td></tr></table></figure>
<blockquote>
<p>pip install elasticsearch==1.9</p>
</blockquote>
<p><strong>ipython</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install ipython</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç„¶å, å¦‚ terminall input <code>ipython</code> ä¸å­˜åœ¨, åˆ™ pip show ipython,  python -m IPython è¯•è¯•. </p>
</blockquote>
<p><strong>notebook</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#pip install --ignore-installed six</span></span><br><span class="line"><span class="comment">#pip install target-gsheet tap-fixerio</span></span><br><span class="line">pip install notebook</span><br></pre></td></tr></table></figure>
<blockquote>
<p>pip install notebook, å¦‚ macos High Sierra 10.13 æŠ¥é”™ï¼Œåˆ™<br>pip install â€“ignore-installed six<br>pip install target-gsheet tap-fixerio<br>then, pip install notebook</p>
</blockquote>
<h2 id="8-Reference"><a href="#8-Reference" class="headerlink" title="8. Reference"></a>8. Reference</h2><ul>
<li><a href="https://brew.sh/" target="_blank" rel="external">Homebrew</a></li>
<li><a href="https://bootstrap.pypa.io/get-pip.py" target="_blank" rel="external">Get-pip</a></li>
<li><a href="https://feiyang.li/2017/02/26/jetbrains/index.html" target="_blank" rel="external">IntelliJã€Pycharmæ¿€æ´»</a></li>
<li><a href="http://blog.tibame.com/?p=2068" target="_blank" rel="external">Mac OSX å®‰è£JDK</a></li>
<li><a href="https://hexo.io/docs/" target="_blank" rel="external">Hexo Doc</a></li>
<li><a href="http://www.jianshu.com/p/3e0206dd23ac" target="_blank" rel="external">Mac ä¸Šå®Œæ•´å¸è½½Node.js</a></li>
<li><a href="http://10176523.cn/archives/50" target="_blank" rel="external">Mac OSX å®Œæ•´å¸è½½Node.js</a></li>
<li><a href="https://segmentfault.com/a/1190000004404505" target="_blank" rel="external">nodeç‰ˆæœ¬ç®¡ç†å·¥å…·nvm-Macä¸‹å®‰è£…åŠä½¿ç”¨</a></li>
<li><a href="http://xclient.info/" target="_blank" rel="external">XClient.info Mac App</a></li>
<li><a href="https://stackoverflow.com/questions/32856194/ipython-on-macos-10-10-command-not-found" target="_blank" rel="external">Stackoverflow python on MacOS 10.10 - command not found</a></li>
<li><a href="/2016/08/02/ml-python-env/">Blair python install data mining env</a></li>
</ul>
<p>Macos NSNavRecentPlaces å†…éƒ¨è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®ï¼Œåˆ«ä¹±æ”¹ã€‚</p>
<blockquote>
<p>defaults write -g NSNavRecentPlaces â€˜(â€œ~/Desktopâ€, â€œ/usr/local/xsoft/softwareâ€)â€™;</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 7 - Dialog_Corpus å¸¸ç”¨æ•°æ®é›†]]></title>
      <url>http://shopee.ai/2017/09/26/chatbot/chatbot-research7/</url>
      <content type="html"><![CDATA[<p>ä¸€äº›ç”¨äº Dialog å¯¹è¯ç³»ç»Ÿçš„æ•°æ®é›†èµ„æ–™æ±‡æ€»</p>
<a id="more"></a>
<h2 id="å¯¹è¯ç³»ç»Ÿå¸¸ç”¨æ•°æ®é›†"><a href="#å¯¹è¯ç³»ç»Ÿå¸¸ç”¨æ•°æ®é›†" class="headerlink" title="å¯¹è¯ç³»ç»Ÿå¸¸ç”¨æ•°æ®é›†"></a>å¯¹è¯ç³»ç»Ÿå¸¸ç”¨æ•°æ®é›†</h2><blockquote>
<p>ä»‹ç»ä¸€ä¸‹å…¬å¼€çš„æ•°æ®é›† :</p>
<p>å¯ä»¥å‚è€ƒâ€œ<a href="https://arxiv.org/abs/1512.05742" target="_blank" rel="external">A Survey of Available Corpora for Building Data-Driven Dialogue Systems</a>â€è¿™ç¯‡è®ºæ–‡ï¼Œè€Œä¸”ä½œè€…æŠŠæ‰€æœ‰çš„æ•°æ®é›†æŒ‰ç…§ä¸åŒç±»åˆ«è¿›è¡Œåˆ†ç±»æ€»ç»“ï¼Œé‡Œé¢æ¶µç›–äº†å¾ˆå¤šæ•°æ®é›†ï¼Œè¯¦æƒ…è¯·æˆ³ <a href="https://docs.google.com/spreadsheets/d/1SJ4XV6NIEl_ReF1odYBRXs0q6mTkedoygY3kLMPjcP8/pubhtml" target="_blank" rel="external">Dialogue datasets</a></p>
</blockquote>
<h2 id="è‹±æ–‡æ•°æ®é›†"><a href="#è‹±æ–‡æ•°æ®é›†" class="headerlink" title="è‹±æ–‡æ•°æ®é›†"></a>è‹±æ–‡æ•°æ®é›†</h2><blockquote>
<ul>
<li><a href="http://www.cs.cornell.edu/~cristian/Cornell_Movie-Dialogs_Corpus.html" target="_blank" rel="external">Cornell Movie Dialogs</a></li>
<li><a href="https://arxiv.org/abs/1506.08909" target="_blank" rel="external">Ubuntu Dialogue Corpus</a></li>
<li><a href="http://opus.lingfil.uu.se/OpenSubtitles.php" target="_blank" rel="external">OpenSubtitlesï¼šç”µå½±å­—å¹•</a></li>
<li><a href="https://github.com/Marsan-Ma/twitter_scraper" target="_blank" rel="external">Twitterï¼štwitteræ•°æ®é›†</a></li>
<li><a href="https://github.com/bshao001/ChatLearner" target="_blank" rel="external">Papaya Conversational Data Setï¼šåŸºäºCornellã€Redditç­‰æ•°æ®é›†é‡æ–°æ•´ç†</a></li>
</ul>
</blockquote>
<p>ç›¸å…³æ•°æ®é›†çš„å¤„ç†ä»£ç å¯å‚è§ä¸‹é¢ä¸¤ä¸ªgithubé¡¹ç›®ï¼š</p>
<ul>
<li><a href="https://github.com/Conchylicultor/DeepQA" target="_blank" rel="external">DeepQA</a></li>
<li><a href="https://github.com/Marsan-Ma/chat_corpus" target="_blank" rel="external">chat_corpus</a></li>
</ul>
<h2 id="ä¸­æ–‡æ•°æ®é›†"><a href="#ä¸­æ–‡æ•°æ®é›†" class="headerlink" title="ä¸­æ–‡æ•°æ®é›†"></a>ä¸­æ–‡æ•°æ®é›†</h2><blockquote>
<ul>
<li><a href="https://github.com/rustch3n/dgk_lost_conv" target="_blank" rel="external">dgk_shooter_min.convï¼šä¸­æ–‡ç”µå½±å°è¯æ•°æ®é›†</a></li>
<li><a href="https://github.com/Samurais/egret-wenda-corpus" target="_blank" rel="external">ç™½é¹­æ—¶ä»£ä¸­æ–‡é—®ç­”è¯­æ–™ï¼šç™½é¹­æ—¶ä»£è®ºå›é—®ç­”æ•°æ®</a></li>
<li><a href="http://61.93.89.94/Noah_NRM_Data/" target="_blank" rel="external">å¾®åšæ•°æ®é›†ï¼šåä¸ºæèˆªå®éªŒå®¤å‘å¸ƒ</a> ä¹Ÿæ˜¯è®ºæ–‡â€œNeural Responding Machine for Short-Text Conversationâ€ä½¿ç”¨çš„æ•°æ®é›†</li>
<li><a href="http://lwc.daanvanesch.nl/openaccess.php" target="_blank" rel="external">æ–°æµªå¾®åšæ•°æ®é›†ï¼Œè¯„è®ºå›å¤çŸ­å¥</a></li>
</ul>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><blockquote>
<ul>
<li><a href="https://github.com/candlewill/Dialog_Corpus" target="_blank" rel="external">Github ç”¨äºå¯¹è¯ç³»ç»Ÿçš„ä¸­è‹±æ–‡è¯­æ–™ æ±‡æ€»åˆé›†</a></li>
<li><a href="http://www.shareditor.com/blogshow/?blogId=112" target="_blank" rel="external">ç¾å‰§ ï¼š è¿‘1GBçš„ä¸‰åƒä¸‡èŠå¤©è¯­æ–™ - 10å…ƒ</a></li>
<li><a href="https://github.com/gunthercox/chatterbot-corpus/blob/master/chatterbot_corpus/data/chinese/greetings.yml" target="_blank" rel="external">chatterbot-corpus chinese</a></li>
<li><a href="https://www.jianshu.com/u/73283aaafe29" target="_blank" rel="external">ç®€ä¹¦ ï¼š é«˜è´¨é‡çš„å¯¹è¯è¯­æ–™</a></li>
<li><a href="https://www.zhihu.com/question/44764422" target="_blank" rel="external">çŸ¥ä¹ ï¼š ç°åœ¨æœ‰å“ªäº›ä¸­æ–‡çš„èŠå¤©è¯­æ–™åº“ï¼Ÿ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/33088748" target="_blank" rel="external">æ·±åº¦å­¦ä¹ å¯¹è¯ç³»ç»Ÿç†è®ºç¯‡â€“æ•°æ®é›†å’Œè¯„ä»·æŒ‡æ ‡ä»‹ç»</a></li>
</ul>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Singapore IT environment]]></title>
      <url>http://shopee.ai/2017/09/25/tools/news-Singapore-for-it/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡ç®€çŸ­ä»‹ç»äº†ä¸‹ Singapore çš„ä¸€äº› IT å…¬å¸çš„æƒ…å†µ</p>
<a id="more"></a>
<h2 id="1-Mozat"><a href="#1-Mozat" class="headerlink" title="1. Mozat"></a>1. Mozat</h2><blockquote>
<p>mozatè‡´åŠ›äºç§»åŠ¨ç«¯ç¤¾äº¤åº”ç”¨å’Œæ¸¸æˆåº”ç”¨ï¼Œä¸æ–­ç ”å‘åˆ›æ–°ã€‚</p>
</blockquote>
<h2 id="2-Garena"><a href="#2-Garena" class="headerlink" title="2. Garena"></a>2. Garena</h2><blockquote>
<p>æ¸¸æˆèµ·å®¶çš„ç»¼åˆäº’è”ç½‘å…¬å¸ï¼Œä¼°å€¼è¾¾37.5äº¿ç¾é‡‘</p>
</blockquote>
<h2 id="3-Carousell"><a href="#3-Carousell" class="headerlink" title="3. Carousell"></a>3. Carousell</h2><blockquote>
<p>é—²é±¼</p>
</blockquote>
<h2 id="4-Grabtaxi"><a href="#4-Grabtaxi" class="headerlink" title="4. Grabtaxi"></a>4. Grabtaxi</h2><blockquote>
<p>(è·å¾—æ»´æ»´ã€è½¯é“¶6äº¿ç¾é‡‘æŠ•èµ„)</p>
</blockquote>
<h2 id="5-iCarsClub"><a href="#5-iCarsClub" class="headerlink" title="5. iCarsClub"></a>5. iCarsClub</h2><blockquote>
<p>æ±½è½¦å€Ÿç§ŸiCarClub(7050ä¸‡ç¾å…ƒï¼‰</p>
</blockquote>
<p>é‰´äºæ–°åŠ å¡çš„è½¦ä¸»å¤§éƒ½åœ¨è‡ªå®¶è½¦ä¸ŠèŠ±è´¹äº†å¤§æŠŠå¤§æŠŠçš„é’ç¥¨ï¼Œå¯¹ç­‰ç§å®¶è½¦ç§Ÿèµè¿™ä¸ªæƒ³æ³•ä¹Ÿå°±åº”è¿è€Œç”Ÿäº†ã€‚</p>
<h2 id="6-Reebonz-4000ä¸‡ç¾å…ƒ"><a href="#6-Reebonz-4000ä¸‡ç¾å…ƒ" class="headerlink" title="6. Reebonz(4000ä¸‡ç¾å…ƒ)"></a>6. Reebonz(4000ä¸‡ç¾å…ƒ)</h2><p>å½“æåˆ°æ–°åŠ å¡æœ¬åœ°çš„ç”µå­å•†åŠ¡ç½‘åº—æ—¶ï¼Œé™¤äº†ä¸Šè¿°æåˆ°çš„å—Rocket Internetå…¬å¸ååŠ©çš„ä¸¤å®¶ç”µå­å•†åŠ¡é›¶å”®å•†ä»¥å¤–ï¼Œæœ€å‡ºååº”è¯¥å°±æ˜¯Reebonzã€‚å®ƒå’Œå…¶ä»–çš„ç”µå­å•†åŠ¡ç½‘åº—ä¸åŒçš„æ˜¯å®ƒåªå…³æ³¨å¥¢ä¾ˆå“ç‰Œã€‚Reebonz åœ¨2014å¹´3æœˆæ”¶è´­äº†æ–°åŠ å¡çš„åœ¨çº¿å¥¢ä¾ˆå“å•†åº—Clout Shoppeï¼Œæ‰©å¤§äº†è‡ªå·±çš„è§„æ¨¡ã€‚</p>
<h2 id="7-MyRepublicï¼ˆ3750ä¸‡ç¾å…ƒï¼‰"><a href="#7-MyRepublicï¼ˆ3750ä¸‡ç¾å…ƒï¼‰" class="headerlink" title="7. MyRepublicï¼ˆ3750ä¸‡ç¾å…ƒï¼‰"></a>7. MyRepublicï¼ˆ3750ä¸‡ç¾å…ƒï¼‰</h2><blockquote>
<p>MyRepublicä¹Ÿè®¸æ˜¯è¿™åå®¶å…¬å¸ä¸­æœ€æœ‰é‡å¿ƒçš„å…¬å¸ï¼šå®ƒæƒ³æˆä¸ºæ–°åŠ å¡ç¬¬å››å¤§ç”µä¿¡å…¬å¸ã€‚å®ƒä¸æ»¡è¶³åªæ˜¯ä¸€å®¶æœ¬åœ°çš„å¤§å…¬å¸ï¼Œæ‰€ä»¥æœ€è¿‘è¯¥å…¬å¸ä¸ºæ–°è¥¿å…°ç”¨æˆ·æä¾›ä¸‰ä¸ªæœˆå…è´¹çš„100å…†ä½/ç§’çš„è¶…é€Ÿå…‰çº¤å®½å¸¦ã€‚æˆ‘ä»¬è¿˜äº†è§£åˆ°ï¼Œè¿™å®¶ç”µä¿¡åˆåˆ›ä¼ä¸šåœ¨ä¸€ä¸ªæœˆå†…å°±å¸å¼•äº†å¤§çº¦2000åæ–°ç”¨æˆ·;ä¸å°±çš„å°†æ¥ï¼Œå®ƒçš„å¹´æ”¶å…¥ä¼šæ˜¯2014å¹´ä¸‰å€ï¼Œè¾¾åˆ°1500ä¸‡ç¾å…ƒã€‚2015å¹´ï¼ŒMyRepublicå°†ä¼šæ‰“å…¥äºšæ´²çš„å…¶å®ƒå›½å®¶ã€‚</p>
</blockquote>
<h2 id="8-Bubbly-3900ä¸‡ç¾å…ƒ"><a href="#8-Bubbly-3900ä¸‡ç¾å…ƒ" class="headerlink" title="8. Bubbly(3900ä¸‡ç¾å…ƒ)"></a>8. Bubbly(3900ä¸‡ç¾å…ƒ)</h2><blockquote>
<p>å¯¹äºBubblyå…¬å¸æ¥è¯´ï¼Œä¹Ÿè®¸å®ƒæœ€æƒ³å¿˜è®°çš„å°±æ˜¯2014å¹´çš„ä¸ŠåŠå¹´ã€‚åœ¨é‚£æ®µæ—¶é—´ï¼Œç¤¾äº¤ç½‘ç»œåª’ä½“åˆåˆ›ä¼ä¸šBubblyæ”¶åˆ°äº†å„å¼å„æ ·çš„æ”¶è´­è¯·æ±‚;å¹¶ä¸”ï¼Œè¯¥å…¬å¸è§£æ•£äº†å…¬å¸çš„ç®¡ç†å›¢é˜Ÿï¼Œè¿˜è¾¾æˆä¸€è‡´åè®®å¯¹å…¬å¸è¿›è¡Œé‡ç»„ã€‚å…¬å¸çš„é¦–å¸­æ‰§è¡Œå®˜Thomas Claytonå¼€å§‹æŠŠå…¬å¸èµ„äº§æ¸…ç®—ï¼Œå‡ å‘¨ä¹‹åï¼ŒBubblyå…¬å¸å°±è¢«Altruist Groupæ”¶è´­ï¼Œè¯¥é›†å›¢åœ¨æ¬§æ´²ã€éæ´²å’Œäºšæ´²æä¾›ç”µä¿¡æœåŠ¡ï¼Œä¸è¿‡è¿™æ¬¡æ”¶è´­çš„æ¡æ¬¾æ²¡æœ‰å¯¹å¤–æŠ«éœ²ã€‚</p>
</blockquote>
<h2 id="9-Ninja-van"><a href="#9-Ninja-van" class="headerlink" title="9. Ninja van"></a>9. Ninja van</h2><p>æˆç«‹äº2014å¹´çš„ã€Œæœ€åä¸€å…¬é‡Œç‰©æµã€å…¬å¸ Ninja Van ä¸¤å¹´å†…å°±æ‹¿åˆ°äº†ä¸¤è½®èèµ„ï¼Œè¿™å®¶æŠ€æœ¯é©±åŠ¨å‹å…¬å¸ä½¿ç”¨ç®—æ³•æ¥æä¾›æœ€å¥½çš„ç‰©æµè·¯çº¿å¹¶å®æ—¶è¿½è¸ªè®¢å•ï¼Œä¸ä»…è§£å†³äº†å½“åœ°ç”µå•†ç½‘ç«™è´§å“å¸¸å¸¸ä¸¢å¤±çš„é—®é¢˜ï¼Œè¿˜é€šè¿‡æŠ€æœ¯æ‰‹æ®µæé«˜äº†ç‰©æµé…é€æ•ˆç‡ã€‚</p>
<h2 id="10-Lazada"><a href="#10-Lazada" class="headerlink" title="10. Lazada"></a>10. Lazada</h2><p>Lazadaï¼Œä¸œå—äºšåœ°åŒºæœ€å¤§çš„åœ¨çº¿è´­ç‰©ç½‘ç«™ä¹‹ä¸€ã€‚è·å¾—å¾·å›½åˆ›ä¸šå­µåŒ–å™¨RocketInternetæ¡‘å¨å°”å…„å¼Ÿ(SamwerBrothers)æ”¯æŒï¼ŒLazadaçš„ç›®æ ‡ä¸»è¦æ˜¯å°å°¼ã€é©¬æ¥è¥¿äºšã€è²å¾‹å®¾ä»¥åŠæ³°å›½ç”¨æˆ·ã€‚</p>
<h2 id="11-Zalora"><a href="#11-Zalora" class="headerlink" title="11. Zalora"></a>11. Zalora</h2><p>ZALORAæ˜¯ä¸€ä¸ªç½‘ä¸Šæ—¶è£…åŠç¾å®¹äº§å“è´­ç‰©å¹³å°,ä¸ºç”·å¥³é¡¾å®¢æä¾›æ—¶è£…ã€é¥°ç‰©ã€é‹å±¥åŠåŒ–å¦†æŠ¤è‚¤å“ã€‚æ€»éƒ¨ä½äºæ–°åŠ å¡çš„ZALORAäºä¸åŒåœ°åŒºè®¾æœ‰åˆ†åŒºç½‘é¡µ,åŒ…æ‹¬é¦™æ¸¯ã€æ–°åŠ å¡ã€å°å°¼ã€è²å¾‹å®¾ã€æ³°å›½ã€è¶Šå—ã€é©¬æ¥è¥¿äºšåŠæ–‡è±ï¼Œåˆ°ç›®å‰ä¸ºæ­¢Zaloraå·²ç»è·å¾—äº†æ‹¥æœ‰å¤§é‡æŠ•èµ„è€…çš„é’çã€‚</p>
<p>Zaloraçš„æ¯å…¬å¸äº2014å¹´ä¸Šå¸‚ï¼Œè¯¥å…¬å¸çš„æœ€æ–°è®¡åˆ’æ˜¯å’Œä¸Šè¿°æåˆ°çš„é¡¹ç›®Rocket Internetæ——ä¸‹å¦å¤–å››å®¶æµè¡Œçš„æ—¶å°šå“ç‰Œå…¬å¸åˆå¹¶ï¼Œè¿™æ ·ä¸€æ¥ä¾¿å¯æˆä¸ºå…¨çƒçš„æ—¶å°šå›¢é˜Ÿã€‚Rocket Intetrnetçš„é¦–æ¬¡å…¬å¼€å‹Ÿè‚¡ä¾¿è·å¾—äº†82äº¿ç¾å…ƒï¼Œè¿™å°±æ„å‘³ç€ä¸ä¹…å°±ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„èµ„é‡‘æµå…¥Zaloraã€‚</p>
<blockquote>
<p>2.38äº¿ç¾å…ƒ</p>
</blockquote>
<h2 id="12-ViSenze"><a href="#12-ViSenze" class="headerlink" title="12. ViSenze"></a>12. ViSenze</h2><p>è§†è§‰æœç´¢å’Œå›¾åƒè¯†åˆ«çš„å…¬å¸ (äº§å“ä¸»è¦æœåŠ¡Rakutenï¼ŒZaloraç­‰ç”µå•†çš„æ¨èå¼•æ“å’Œæ‰‹æœºæœç´¢åº”ç”¨)</p>
<p>ViSenzeæ˜¯ä¸€å®¶éå¸¸é‡è§†æŠ€æœ¯å‘å±•çš„å…¬å¸ï¼ŒæŠ€æœ¯å›¢é˜Ÿå†…éƒ¨ä¼šä¸å®šæœŸä¸¾è¡ŒæŠ€æœ¯åˆ†äº«ä¼šå’Œæ·±åº¦è®­ç»ƒã€‚</p>
<h2 id="13-Wegoï¼ˆ3450ä¸‡ç¾å…ƒï¼‰"><a href="#13-Wegoï¼ˆ3450ä¸‡ç¾å…ƒï¼‰" class="headerlink" title="13. Wegoï¼ˆ3450ä¸‡ç¾å…ƒï¼‰"></a>13. Wegoï¼ˆ3450ä¸‡ç¾å…ƒï¼‰</h2><blockquote>
<p>2013å¹´ï¼Œæ—…æ¸¸æœç´¢å…¬å¸Wegoå®£ç§°ï¼Œåœ¨å…¶æä¾›æœåŠ¡çš„52ä¸ªå¸‚åœºä¸Šï¼Œæ¯å¤©èµ·ç æœ‰1000ä¸‡ä¸ªæ½œåœ¨é¢„çº¦å®¢æˆ·ã€‚è¯¥å…¬å¸äº2014å¹´ä¸­æ—¬æ¨å‡ºäº†è‡ªå·±çš„iOSåº”ç”¨å’ŒAndroidåº”ç”¨ï¼Œå¾ˆå¿«è¿™æ¬¾åº”ç”¨çš„ä¸‹è½½é‡å°±å±…å°å°¼iOSåº”ç”¨å•†åº—ä¸‹è½½é‡æ’è¡Œæ¦œçš„æ¦œé¦–ã€‚</p>
</blockquote>
<h2 id="14-ViKiï¼ˆ2430ä¸‡ç¾å…ƒï¼‰"><a href="#14-ViKiï¼ˆ2430ä¸‡ç¾å…ƒï¼‰" class="headerlink" title="14. ViKiï¼ˆ2430ä¸‡ç¾å…ƒï¼‰"></a>14. ViKiï¼ˆ2430ä¸‡ç¾å…ƒï¼‰</h2><blockquote>
<p>è§†é¢‘èšåˆç½‘<br>å¯¹äºæ–°åŠ å¡äººè€Œè¨€ï¼Œè¿™ä¸ªç‰¹åˆ«çš„ä¼—åŒ…è§†é¢‘å­—å¹•ç½‘ç«™ï¼Œæ˜¯ç†Ÿæ‚‰åˆ°ä¸èƒ½å†ç†Ÿæ‚‰çš„æ—¥å¸¸æµè§ˆç½‘ç«™ä¹‹ä¸€ã€‚Vikiæ˜¯2013å¹´å¯¹æ–°åŠ å¡å…¬å¸è¿›è¡Œå¤§å‹æ”¶è´­ä¸­çš„ç’€ç’¨ä¹‹æ˜Ÿï¼Œå› ä¸ºæ—¥æœ¬ç”µå•†å·¨å¤´Rakutenä»¥2äº¿ç¾å…ƒçš„ä»·æ ¼æ”¶è´­äº†Vikiã€‚ä¸€å¹´åï¼Œæœ‰å…³æŠ¥é“ç§°Vikiæ¯ä¸ªæœˆæ´»è·ƒçš„ç”¨æˆ·æœ‰3500ä¸‡ï¼Œå¦å¤–è¿˜æœ‰2500ä¸‡ç§»åŠ¨ç”¨æˆ·;ä¸è¯¥å…¬å¸è¢«æ”¶è´­ä¹‹æ—¶ç›¸æ¯”ï¼Œæ¯æœˆæ´»è·ƒç”¨æˆ·å¢é•¿äº†1300ä¸‡ï¼Œç§»åŠ¨ç”¨æˆ·å¢é•¿äº†1500ä¸‡ã€‚</p>
</blockquote>
<h2 id="15-Neo-Innovation"><a href="#15-Neo-Innovation" class="headerlink" title="15. Neo Innovation"></a>15. Neo Innovation</h2><h2 id="16-Migmeï¼ˆ3460ä¸‡ç¾å…ƒï¼‰"><a href="#16-Migmeï¼ˆ3460ä¸‡ç¾å…ƒï¼‰" class="headerlink" title="16. Migmeï¼ˆ3460ä¸‡ç¾å…ƒï¼‰"></a>16. Migmeï¼ˆ3460ä¸‡ç¾å…ƒï¼‰</h2><blockquote>
<p>åœ¨è¿‡å»çš„2014å¹´é‡Œï¼Œç¤¾äº¤å¨±ä¹å¹³å°Migmeçš„å‘å±•æ˜¯å€¼å¾—ä¸€æçš„ã€‚è‡ªå»å¹´çš„å…«æœˆä»¥æ¥ï¼Œå®ƒå®Œæˆäº†å‡ é¡¹é‡è¦çš„æ”¶è´­.12æœˆï¼ŒMigmeæ‹¥æœ‰è¶…è¿‡900ä¸‡çš„MAUã€‚è¯¥å…¬å¸çš„ç›®æ ‡æ˜¯ä¸ºäº†è®©å®¢æˆ·ä½“éªŒæ›´å¥½ç©çš„ç¤¾äº¤åŒ–ç”µå­å•†åŠ¡ã€‚å…¬å¸çš„é¦–å¸­æ‰§è¡Œå®˜Steven Gohçš„æ„¿æœ›æ˜¯å»ºç«‹ä¸€ä¸ªåƒä¸­å›½æ·˜å®ç½‘é‚£æ ·çš„é¡¾å®¢å¯¹é¡¾å®¢çš„å•†ä¸šæ¨¡å¼ã€‚</p>
</blockquote>
<h2 id="17-PropertyGuru"><a href="#17-PropertyGuru" class="headerlink" title="17. PropertyGuru"></a>17. PropertyGuru</h2><p>å´æœ‰å¹¸ç‹¬å é³Œå¤´ã€‚æœ€è¿‘ï¼Œ<a href="http://99.coå…¬å¸åŠ å…¥æ–°åŠ å¡æˆ¿åœ°äº§å¸‚åœºï¼Œæˆä¸ºäº†PropertyGuruæœ€æ–°çš„ç«äº‰å¯¹æ‰‹ã€‚" target="_blank" rel="external">http://99.coå…¬å¸åŠ å…¥æ–°åŠ å¡æˆ¿åœ°äº§å¸‚åœºï¼Œæˆä¸ºäº†PropertyGuruæœ€æ–°çš„ç«äº‰å¯¹æ‰‹ã€‚</a></p>
<h2 id="18-Redmart"><a href="#18-Redmart" class="headerlink" title="18. Redmart"></a>18. Redmart</h2><blockquote>
<p><a href="https://redmart.com/" target="_blank" rel="external">https://redmart.com/</a></p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Naive Bayes * æ–‡æœ¬åˆ†ç±»]]></title>
      <url>http://shopee.ai/2017/08/23/ml/naive-bayes-2/</url>
      <content type="html"><![CDATA[<p>æœ´ç´ è´å¶æ–¯ï¼Œé€‚ç”¨äºæ–°é—»åˆ†ç±»é—®é¢˜</p>
<p>$$<br>p(x)p(y|x) = p(y)p(x|y)<br>$$</p>
<a id="more"></a>
<h2 id="1-è´å¶æ–¯ç†è®ºç®€å•å›é¡¾"><a href="#1-è´å¶æ–¯ç†è®ºç®€å•å›é¡¾" class="headerlink" title="1. è´å¶æ–¯ç†è®ºç®€å•å›é¡¾"></a>1. è´å¶æ–¯ç†è®ºç®€å•å›é¡¾</h2><p>åœ¨æˆ‘ä»¬æœ‰ä¸€å¤§å †æ ·æœ¬ï¼ˆåŒ…å«ç‰¹å¾å’Œç±»åˆ«ï¼‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éå¸¸å®¹æ˜“é€šè¿‡ç»Ÿè®¡å¾—åˆ°  $p(ç‰¹å¾|ç±»åˆ«)$.<br>å¤§å®¶åˆéƒ½å¾ˆç†Ÿæ‚‰ä¸‹è¿°å…¬å¼ï¼š</p>
<p>$$<br>p(x)p(y|x) = p(y)p(x|y)<br>$$</p>
<p>æ‰€ä»¥åšä¸€ä¸ªå°å°çš„å˜æ¢</p>
<p>$$<br>p(ç‰¹å¾)p(ç±»åˆ«|ç‰¹å¾) = p(ç±»åˆ«)p(ç‰¹å¾|ç±»åˆ«)<br>$$</p>
<p>$$<br>p(ç±»åˆ«|ç‰¹å¾) = \frac{p(ç±»åˆ«)p(ç‰¹å¾|ç±»åˆ«)}{p(ç‰¹å¾)}<br>$$</p>
<h2 id="2-ç‹¬ç«‹å‡è®¾"><a href="#2-ç‹¬ç«‹å‡è®¾" class="headerlink" title="2. ç‹¬ç«‹å‡è®¾"></a>2. ç‹¬ç«‹å‡è®¾</h2><p>çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å®é™…ä¸Šï¼Œä½ çš„ç‰¹å¾å¯èƒ½æ˜¯å¾ˆå¤šç»´çš„</p>
<p>$$<br>p(features|class) = p({f_0, f_1, \ldots ,f_n}|c)<br>$$</p>
<p>å°±ç®—æ˜¯2ä¸ªç»´åº¦å§ï¼Œå¯ä»¥ç®€å•å†™æˆ</p>
<p>$$<br>p({f_0, f_1}|c) = p(f_1|c, f_0)p(f_0|c)<br>$$</p>
<p>åŠ ä¸€ä¸ªç‰›é€¼çš„å‡è®¾ï¼šç‰¹å¾ä¹‹é—´æ˜¯ç‹¬ç«‹çš„</p>
<p>$$<br>p({f_0, f_1}|c) = p(f_1|c)p(f_0|c)<br>$$</p>
<p>å…¶å®ä¹Ÿå°±æ˜¯ï¼š</p>
<p>$$<br>p({f_0, f_1, \ldots, f_n}|c) = \Pi^n_i p(f_i|c)<br>$$</p>
<h2 id="3-è´å¶æ–¯åˆ†ç±»å™¨"><a href="#3-è´å¶æ–¯åˆ†ç±»å™¨" class="headerlink" title="3. è´å¶æ–¯åˆ†ç±»å™¨"></a>3. è´å¶æ–¯åˆ†ç±»å™¨</h2><p>å…¶å®æˆ‘ä»¬å°±æ˜¯å¯¹æ¯ä¸ªç±»åˆ«è®¡ç®—ä¸€ä¸ªæ¦‚ç‡ $p(ci)$ ï¼Œç„¶åå†è®¡ç®—æ‰€æœ‰ç‰¹å¾çš„æ¡ä»¶æ¦‚ç‡ $p(f_j|c_i)$ ï¼Œé‚£ä¹ˆåˆ†ç±»çš„æ—¶å€™æˆ‘ä»¬å°±æ˜¯ä¾æ®è´å¶æ–¯æ‰¾ä¸€ä¸ªæœ€å¯èƒ½çš„ç±»åˆ«ï¼š</p>
<p>$$<br>p(class_i|{f_0, f_1, \ldots, f_n})= \frac{p(class_i)}{p({f_0, f_1, \ldots, f_n})} \Pi^n_j p(f_j|c_i)<br>$$</p>
<h2 id="4-æ–‡æœ¬åˆ†ç±»é—®é¢˜"><a href="#4-æ–‡æœ¬åˆ†ç±»é—®é¢˜" class="headerlink" title="4. æ–‡æœ¬åˆ†ç±»é—®é¢˜"></a>4. æ–‡æœ¬åˆ†ç±»é—®é¢˜</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[TensorFlow Why?]]></title>
      <url>http://shopee.ai/2017/08/22/tensorflow/tf-1.1-why/</url>
      <content type="html"><![CDATA[<p>2015.10 å¼€æºçš„ TensorFlow æ˜¯ç”± Google brain çš„å·¥ç¨‹å¸ˆå¼€å‘å‡ºæ¥ï¼Œç”¨äºæœºå™¨å­¦ä¹ å’Œç¥ç»ç½‘ç»œæ–¹é¢çš„ç ”ç©¶</p>
<a id="more"></a>
<p>TensorFlow æ˜¯ä¸€æ¬¾ç¥ç»ç½‘ç»œçš„ Python å¤–éƒ¨çš„ç»“æ„åŒ…, ä¹Ÿæ˜¯ä¸€ä¸ªé‡‡ç”¨æ•°æ®æµå›¾æ¥è¿›è¡Œæ•°å€¼è®¡ç®—çš„å¼€æºè½¯ä»¶åº“.</p>
<p><img src="/images/tensorflow/tf-1-why.gif" alt="TensorFlow èŠ‚ç‚¹è¡¨ç¤ºæŸç§æŠ½è±¡çš„è®¡ç®—ï¼Œè¾¹è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´ç›¸äº’è”ç³»çš„å¼ é‡"></p>
<h2 id="1-TensorFlow-Why"><a href="#1-TensorFlow-Why" class="headerlink" title="1. TensorFlow Why"></a>1. TensorFlow Why</h2><p>TensorFlow æ“…é•¿çš„ä»»åŠ¡å°±æ˜¯è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œ. ä½¿ç”¨å®ƒæˆ‘ä»¬å°±å¯ä»¥å¤§å¤§é™ä½æ·±åº¦å­¦ä¹ çš„å¼€å‘æˆæœ¬å’Œå¼€å‘éš¾åº¦;</p>
<p>TensorFlow æ¶æ„çµæ´»ï¼Œæ”¯æŒå„ç§å¼‚æ„çš„å¹³å°ï¼Œæ”¯æŒå¤šCPU/GPUï¼Œ èƒ½å¤Ÿæ”¯æŒå„ç§ç½‘ç»œæ¨¡å‹ï¼Œå…·æœ‰è‰¯å¥½çš„é€šç”¨æ€§;</p>
<p>TensorFlow ç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°ç”¨å®ƒè®¾è®¡ <strong>Neural Network</strong> ç»“æ„ï¼Œè€Œä¸å¿…äº²è‡ªå†™ C++æˆ– CUDA ä»£ç ã€‚æ”¯æŒè‡ªåŠ¨æ±‚å¯¼ï¼Œç”¨æˆ·ä¸éœ€è¦å†é€šè¿‡åå‘ä¼ æ’­æ±‚è§£æ¢¯åº¦ã€‚</p>
<h2 id="2-TF-Learn-å’Œ-TF-Slim-ä¸Šå±‚ç»„ä»¶"><a href="#2-TF-Learn-å’Œ-TF-Slim-ä¸Šå±‚ç»„ä»¶" class="headerlink" title="2. TF.Learn å’Œ TF.Slim ä¸Šå±‚ç»„ä»¶"></a>2. TF.Learn å’Œ TF.Slim ä¸Šå±‚ç»„ä»¶</h2><p>TensorFlow å†…ç½®çš„ TF.Learn å’Œ TF.Slim ç­‰ä¸Šå±‚ç»„ä»¶å¯ä»¥å¸®åŠ©å¿«é€Ÿåœ°è®¾è®¡æ–°ç½‘ç»œï¼Œå¹¶ä¸”å…¼å®¹ Scikit-learn estimator æ¥å£ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å®ç° evaluateã€grid searchã€cross validation ç­‰åŠŸèƒ½ã€‚</p>
<blockquote>
<p>åŒæ—¶ TensorFlow ä¸åªå±€é™äºç¥ç»ç½‘ç»œï¼Œå…¶æ•°æ®æµå¼å›¾æ”¯æŒéå¸¸è‡ªç”±çš„ç®—æ³•è¡¨è¾¾ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è½»æ¾å®ç°æ·±åº¦å­¦ä¹ ä»¥å¤–çš„æœºå™¨å­¦ä¹ ç®—æ³•ã€‚</p>
</blockquote>
<h2 id="3-DeepLearning-Framework"><a href="#3-DeepLearning-Framework" class="headerlink" title="3. DeepLearning Framework"></a>3. DeepLearning Framework</h2><p><img src="https://static.leiphone.com/uploads/new/article/740_740/201702/58ad62e781969.png?imageMogr2/format/jpg/quality/90" alt=""></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.tensorflow.org/" target="_blank" rel="external">tensorflow.org</a></li>
<li><a href="https://www.tensorflow.org/get_started/" target="_blank" rel="external">tensorflow.org get_started</a></li>
<li><a href="https://www.leiphone.com/news/201702/T5e31Y2ZpeG1ZtaN.html" target="_blank" rel="external">TensorFlow å’Œ Caffeã€MXNetã€Kerasç­‰å…¶ä»–æ·±åº¦å­¦ä¹ æ¡†æ¶çš„å¯¹æ¯”</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 6 - æ›´å¤šè®ºæ–‡ (æ„Ÿè°¢ PaperWeekly)]]></title>
      <url>http://shopee.ai/2017/08/16/chatbot/chatbot-research6/</url>
      <content type="html"><![CDATA[<p>Chatbot æ›´å¤š Paper è®ºæ–‡å’Œå‚è€ƒèµ„æ–™ (æ„Ÿè°¢ PaperWeekly)</p>
<a id="more"></a>
<h2 id="Paper-1"><a href="#Paper-1" class="headerlink" title="Paper 1"></a>Paper 1</h2><p>ã€ŠA Neural Conversational Modelã€‹</p>
<p>ä»£ç : <a href="https://github.com/Conchylicultor/DeepQA" target="_blank" rel="external">https://github.com/Conchylicultor/DeepQA</a>  2128 star</p>
<ul>
<li>ä½œè€…: æ¥è‡ª Google Brainï¼Œæ¯•ä¸šäº UC Berkeley çš„ Oriol Vinyalsåšå£«</li>
<li>å¯¹æ¯” cleverbot (ç¬¬äºŒä»£åŸºäºæ£€ç´¢çš„èŠå¤©æœºå™¨äºº)ï¼Œéƒ¨åˆ†å›ç­” æ›´æ™ºèƒ½ã€‚</li>
<li>å¦‚ä½•å®¢è§‚åœ°è¯„ä»·ç”Ÿæˆçš„æ•ˆæœ? æœ‰ä¸€äº›é—®é¢˜æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆ æ¥è¯´ï¼Œè‡ªåŠ¨è¯„ä»· VS ç”¨æˆ·è¯„ä»·</li>
</ul>
<blockquote>
<p>ä½œè€…å¯¹ä¸€äº›è¯„ä¼°æ–¹æ³•æå‡ºäº†ä¸€äº›è‡ªå·±çš„æ€è€ƒæ–¹å¼</p>
</blockquote>
<p>DeepQA</p>
<ol>
<li>chatbot è®­ç»ƒçš„éƒ¨åˆ†</li>
<li>chatbot_website æœåŠ¡çš„éƒ¨åˆ†ï¼Œç½‘é¡µç«¯</li>
</ol>
<p><a href="https://github.com/Conchylicultor/DeepQA/tree/master/chatbot" target="_blank" rel="external">DeepQA/chatbot/</a> è¿™å‡ ä¸ªæ–‡ä»¶æ¯”è¾ƒé‡è¦</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> chatbot.corpus.cornelldata <span class="keyword">import</span> CornellData</span><br><span class="line"><span class="keyword">from</span> chatbot.corpus.opensubsdata <span class="keyword">import</span> OpensubsData</span><br><span class="line"><span class="keyword">from</span> chatbot.corpus.scotusdata <span class="keyword">import</span> ScotusData</span><br><span class="line"><span class="keyword">from</span> chatbot.corpus.ubuntudata <span class="keyword">import</span> UbuntuData</span><br><span class="line"><span class="keyword">from</span> chatbot.corpus.lightweightdata <span class="keyword">import</span> LightweightData</span><br></pre></td></tr></table></figure>
<p>è¯­æ–™å¤ªå¤§çš„æƒ…å†µä¸‹ï¼Œåšä¸€äº›é‡‡æ ·æˆ–è€…å±‚æ¬¡åŒ–çš„ softmax å¯è¡Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">0</span> &lt; self.args.softmaxSamples &lt; self.textData.getVocabularySize():</span><br><span class="line">    outputProjection = ProjectionOp(</span><br><span class="line">        (self.textData.getVocabularySize(), self.args.hiddenSize),</span><br><span class="line">        scope=<span class="string">'softmax_projection'</span>,</span><br><span class="line">        dtype=self.dtype</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sampledSoftmax</span><span class="params">(labels, inputs)</span>:</span></span><br></pre></td></tr></table></figure>
<h2 id="Paper-2"><a href="#Paper-2" class="headerlink" title="Paper 2"></a>Paper 2</h2><p>ã€ŠA Diversity-Promoting Objective Function for Neural Conversation Modelsã€‹</p>
<blockquote>
<ul>
<li>ä½œè€…ï¼š <a href="https://nlp.stanford.edu/~bdlijiwei/Myself.html" target="_blank" rel="external">Jiwei Li</a>ï¼Œ <a href="https://github.com/jiweil" target="_blank" rel="external">Jiwei Liâ€™s Github</a></li>
<li><p>å…³äºã€ŠA Persona-Based Neural Conversation Modelã€‹çš„pre-paper  Seq2seq å®¹æ˜“äº§å‡ºâ€å‘µå‘µâ€ï¼Œâ€éƒ½å¯ä»¥â€ï¼Œâ€æˆ‘ä¸çŸ¥é“â€è¿™ç§ safe ä½†æ— æ„ä¹‰çš„å›ç­”</p>
</li>
<li><p>NLG é—®é¢˜ï¼Œå¸¸ä½¿ç”¨ <strong>MLE</strong> ä½œä¸ºç›®æ ‡å‡½æ•°ï¼Œäº§å‡ºçš„ç»“æœé€šç•…ï¼Œä½† diversity å·®ï¼Œå¯è€ƒè™‘ decoder äº§å‡º n-best, å† rank </p>
</li>
<li>æå‡º Maximum Mutual Information(MMI) ä½œä¸ºç›®æ ‡å‡½æ•°ï¼Œ æœ‰ MMI-antiLM å’ŒMMI-bidi 2ç§</li>
</ul>
</blockquote>
<h2 id="Paper-3"><a href="#Paper-3" class="headerlink" title="Paper 3"></a>Paper 3</h2><p>ã€ŠA Persona-Based Neural Conversation Modelã€‹</p>
<blockquote>
<ul>
<li>Speaker Model å’Œ Speaker-Addressee Model</li>
<li>ä½œè€…ï¼š <a href="https://nlp.stanford.edu/~bdlijiwei/Myself.html" target="_blank" rel="external">Jiwei Li</a>ï¼Œ <a href="https://github.com/jiweil" target="_blank" rel="external">Jiwei Liâ€™s Github</a></li>
<li>ä»£ç ï¼š <a href="https://github.com/jiweil/Neural-Dialogue-Generation" target="_blank" rel="external">https://github.com/jiweil/Neural-Dialogue-Generation</a>   </li>
<li><p>è§£å†³å¤šè½®å¯¹è¯å›ç­”ä¸ä¸€è‡´é—®é¢˜</p>
</li>
<li><p>Model ä¸­èå…¥ user identity (æ¯”å¦‚èƒŒæ™¯ä¿¡æ¯ã€ç”¨æˆ·ç”»åƒï¼Œå¹´é¾„ç­‰ä¿¡æ¯)ï¼Œæ„å»ºå‡ºä¸ªæ€§åŒ–çš„ seq2seq æ¨¡å‹ï¼Œä¸ºä¸åŒçš„ userï¼Œ ä»¥åŠ åŒä¸€ä¸ªuser å¯¹ä¸åŒçš„å¯¹è±¡å¯¹è¯ç”Ÿæˆä¸åŒé£æ ¼çš„ response</p>
</li>
</ul>
</blockquote>
<p><img src="/images/chatbot/bot_A3.jpg" width="800"></p>
<h2 id="Paper-4"><a href="#Paper-4" class="headerlink" title="Paper 4"></a>Paper 4</h2><p>ã€ŠA Hierarchical Latent Variable Encoder-Decoder Model for Generating Dialoguesã€‹</p>
<blockquote>
<ul>
<li>ä»£ç : <a href="https://github.com/julianser/hed-dlg-truncated" target="_blank" rel="external">https://github.com/julianser/hed-dlg-truncated</a></li>
<li>ä½œè€…: æ¥è‡ªè’™ç‰¹åˆ©å°”å¤§å­¦å’ŒMaluubaå…¬å¸</li>
<li>æ„åœ¨è§£å†³è¯­è¨€æ¨¡å‹ç”Ÿæˆéƒ¨åˆ†å­˜åœ¨çš„é—®é¢˜</li>
<li>æ•´ä¸ª seq2seq æ¡†æ¶ä¸­ decoderç”Ÿæˆéƒ¨åˆ†çš„é—®é¢˜ï¼Œä¸ä»…æ˜¯ boté¢†åŸŸå¯¹è¯ç”Ÿæˆçš„é—®é¢˜ï¼Œéƒ½å¯ä»¥å°è¯•ç”¨è¿™ä¸ªæ–¹å¼ã€‚</li>
</ul>
</blockquote>
<p><img src="/images/chatbot/bot_A4.jpg" width="700"></p>
<h2 id="Paper-5"><a href="#Paper-5" class="headerlink" title="Paper 5"></a>Paper 5</h2><p>æ›´å¤šè®ºæ–‡å’Œå‚è€ƒèµ„æ–™(æ„Ÿè°¢PaperWeekly)   </p>
<blockquote>
<ul>
<li><p>ã€ŠEnd-to-end LSTM-based dialog control optimized with supervised and reinforcement learningã€‹<br><a href="http://rsarxiv.github.io/2016/07/17/End-to-end-LSTM-based-dialog-control-optimized-with-supervised-and-reinforcement-learning-PaperWeekly/" target="_blank" rel="external">http://rsarxiv.github.io/2016/07/17/End-to-end-LSTM-based-dialog-control-optimized-with-supervised-and-reinforcement-learning-PaperWeekly/</a></p>
</li>
<li><p>ã€ŠA Network-based End-to-End Trainable Task-oriented Dialogue Systemã€‹<br><a href="http://rsarxiv.github.io/2016/07/12/A-Network-based-End-to-End-Trainable-Task-oriented-Dialogue-System-PaperWeekly" target="_blank" rel="external">http://rsarxiv.github.io/2016/07/12/A-Network-based-End-to-End-Trainable-Task-oriented-Dialogue-System-PaperWeekly</a></p>
</li>
<li><p>ã€ŠA Neural Network Approach to Context-Sensitive Generation of Conversational Responsesã€‹<br><a href="http://rsarxiv.github.io/2016/07/15/A-Neural-Network-Approach-to-Context-Sensitive-Generation-of-Conversational-Responses-PaperWeekly/" target="_blank" rel="external">http://rsarxiv.github.io/2016/07/15/A-Neural-Network-Approach-to-Context-Sensitive-Generation-of-Conversational-Responses-PaperWeekly/</a></p>
</li>
<li>Sequence to Backward and Forward Sequences: A Content-Introducing Approach to Generative Short-Text Conversation<br><a href="http://rsarxiv.github.io/2016/07/09/Sequence-to-Backward-and-Forward-Sequences-A-Content-Introducing-Approach-to-Generative-Short-Text-Conversation-PaperWeekly/" target="_blank" rel="external">http://rsarxiv.github.io/2016/07/09/Sequence-to-Backward-and-Forward-Sequences-A-Content-Introducing-Approach-to-Generative-Short-Text-Conversation-PaperWeekly/</a></li>
</ul>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://github.com/Conchylicultor/DeepQA" target="_blank" rel="external">2015 DeepQA</a></li>
<li><a href="https://www.jianshu.com/p/4fb194d143cf" target="_blank" rel="external">èŠå¤©æœºå™¨äººæ·±åº¦å­¦ä¹ åº”ç”¨-part1ï¼šå¼•è¨€</a></li>
<li><a href="https://github.com/dennybritz/chatbot-retrieval/" target="_blank" rel="external">dennybritz/chatbot-retrieval</a></li>
<li>æ›´å¤šè®ºæ–‡å’Œå‚è€ƒèµ„æ–™(æ„Ÿè°¢PaperWeekly)</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 5 - åŸºäºæ·±åº¦å­¦ä¹ çš„æ£€ç´¢èŠå¤©æœºå™¨äºº]]></title>
      <url>http://shopee.ai/2017/08/15/chatbot/chatbot-research5/</url>
      <content type="html"><![CDATA[<p>ä»‹ç»åŸºäºæ£€ç´¢å¼æœºå™¨äººã€‚æ£€ç´¢å¼æ¶æ„æœ‰é¢„å®šå¥½çš„è¯­æ–™ç­”å¤åº“ã€‚</p>
<p>æ£€ç´¢å¼æ¨¡å‹çš„è¾“å…¥æ˜¯ä¸Šä¸‹æ–‡æ½œåœ¨çš„ç­”å¤ã€‚æ¨¡å‹è¾“å‡ºå¯¹è¿™äº›ç­”å¤çš„æ‰“åˆ†ï¼Œå¯ä»¥é€‰æ‹©æœ€é«˜åˆ†çš„ç­”æ¡ˆä½œä¸ºå›å¤ã€‚</p>
<a id="more"></a>
<blockquote>
<p>æ—¢ç„¶ç”Ÿæˆå¼çš„æ¨¡å‹æ›´å¼¹æ€§ï¼Œä¹Ÿä¸éœ€è¦é¢„å®šä¹‰çš„è¯­æ–™ï¼Œä¸ºä½•ä¸é€‰æ‹©å®ƒå‘¢ï¼Ÿ</p>
<p>ç”Ÿæˆå¼æ¨¡å‹çš„é—®é¢˜å°±æ˜¯å®é™…ä½¿ç”¨èµ·æ¥å¹¶ä¸èƒ½å¥½å¥½å·¥ä½œï¼Œè‡³å°‘ç°åœ¨æ˜¯ã€‚å› ä¸ºç­”å¤æ¯”è¾ƒè‡ªç”±ï¼Œå®¹æ˜“çŠ¯è¯­æ³•é”™è¯¯å’Œä¸ç›¸å…³ã€ä¸åˆé€»è¾‘çš„ç­”æ¡ˆï¼Œå¹¶ä¸”éœ€è¦å¤§é‡çš„æ•°æ®ä¸”å¾ˆéš¾åšä¼˜åŒ–ã€‚</p>
<p>å¤§é‡çš„ç”Ÿäº§ç³»ç»Ÿä¸Šè¿˜æ˜¯é‡‡ç”¨ æ£€ç´¢æ¨¡å‹ æˆ–è€… <code>æ£€ç´¢æ¨¡å‹</code> å’Œ <code>ç”Ÿæˆæ¨¡å‹</code> ç»“åˆçš„æ–¹å¼ã€‚</p>
<ul>
<li>ä¾‹å¦‚ google çš„ <a href="https://arxiv.org/abs/1606.04870" target="_blank" rel="external">smart reply</a>ã€‚</li>
</ul>
<p>ç”Ÿæˆæ¨¡å‹æ˜¯ç ”ç©¶çš„çƒ­é—¨é¢†åŸŸï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ²¡åˆ°åº”ç”¨å®ƒçš„ç¨‹åº¦ã€‚å¦‚æœä½ æƒ³è¦åšä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œæœ€å¥½è¿˜æ˜¯é€‰ç”¨æ£€ç´¢å¼æ¨¡å‹</p>
</blockquote>
<p><strong>æ›´èªæ˜çš„èŠå¤©æœºå™¨äºº ï¼š</strong></p>
<ol>
<li>ç”Ÿæˆå¼æ¨¡å‹ VS æ£€ç´¢åŒ¹é…æ¨¡å‹ </li>
<li>Chatterbotçš„è¿›åŒ–: æ·±åº¦å­¦ä¹ æé«˜æ™ºèƒ½åº¦</li>
</ol>
<p><strong>æ¨¡å‹æ„å»º ï¼š</strong> </p>
<ol>
<li>é—®é¢˜çš„åˆ†æä¸è½¬åŒ–</li>
<li>æ•°æ®é›†ä¸æ ·æœ¬æ„é€ æ–¹æ³• </li>
<li>ç½‘ç»œç»“æ„çš„æ„å»º </li>
<li>æ¨¡å‹çš„è¯„ä¼° </li>
<li>ä»£ç å®ç°ä¸è§£æ</li>
</ol>
<h2 id="1-èŠå¤©æœºå™¨äºº"><a href="#1-èŠå¤©æœºå™¨äºº" class="headerlink" title="1. èŠå¤©æœºå™¨äºº"></a>1. èŠå¤©æœºå™¨äºº</h2><p><img src="/images/chatbot/chatbot-5_1.jpg" width="700"></p>
<h3 id="1-1-åŸºäºæ£€ç´¢çš„-chatbot"><a href="#1-1-åŸºäºæ£€ç´¢çš„-chatbot" class="headerlink" title="1.1 åŸºäºæ£€ç´¢çš„ chatbot"></a>1.1 åŸºäºæ£€ç´¢çš„ chatbot</h3><ul>
<li>æ ¹æ® input å’Œ contextï¼Œç»“åˆçŸ¥è¯†åº“çš„ç®—æ³•å¾—åˆ°åˆé€‚å›å¤    </li>
<li>ä»ä¸€ä¸ªå›ºå®šçš„æ•°æ®é›†ä¸­æ‰¾åˆ°åˆé€‚çš„å†…å®¹ä½œä¸ºå›å¤</li>
<li>æ£€ç´¢å’ŒåŒ¹é…çš„æ–¹å¼æœ‰å¾ˆå¤šç§</li>
<li>æ•°æ®å’ŒåŒ¹é…æ–¹æ³•å¯¹è´¨é‡æœ‰å¾ˆå¤§å½±å“</li>
</ul>
<h3 id="1-2-åŸºäºç”Ÿæˆæ¨¡å‹çš„chatbot"><a href="#1-2-åŸºäºç”Ÿæˆæ¨¡å‹çš„chatbot" class="headerlink" title="1.2 åŸºäºç”Ÿæˆæ¨¡å‹çš„chatbot"></a>1.2 åŸºäºç”Ÿæˆæ¨¡å‹çš„chatbot</h3><ul>
<li>å…¸å‹çš„æ˜¯ seq2seq çš„æ–¹æ³•</li>
<li>ç”Ÿæˆçš„ç»“æœéœ€è¦è€ƒè™‘é€šç•…åº¦å’Œå‡†ç¡®åº¦</li>
</ul>
<blockquote>
<p>ä»¥å‰è€…ä¸ºä¸»(å¯æ§åº¦é«˜)ï¼Œåè€…ä¸ºè¾…</p>
</blockquote>
<h2 id="2-å›é¡¾-chatterbot"><a href="#2-å›é¡¾-chatterbot" class="headerlink" title="2. å›é¡¾ chatterbot"></a>2. å›é¡¾ chatterbot</h2><p><img src="/images/chatbot/chatbot-5_2.png" width="600"></p>
<h3 id="2-1-chatterbot-çš„é—®é¢˜"><a href="#2-1-chatterbot-çš„é—®é¢˜" class="headerlink" title="2.1 chatterbot çš„é—®é¢˜"></a>2.1 chatterbot çš„é—®é¢˜</h3><p><strong>åº”ç­”æ¨¡å¼çš„åŒ¹é…æ–¹å¼å¤ªç²—æš´</strong></p>
<blockquote>
<ul>
<li>ç¼–è¾‘è·ç¦»æ— æ³•æ•è·æ·±å±‚è¯­ä¹‰ä¿¡æ¯   </li>
<li>æ ¸å¿ƒè¯ + word2vec æ— æ³•æ•è·æ•´å¥è¯è¯­ä¹‰   </li>
<li>LSTM ç­‰ RNNæ¨¡å‹ èƒ½æ•è·åºåˆ—ä¿¡æ¯<br>â€¦<br>ç”¨æ·±åº¦å­¦ä¹ æ¥æé«˜åŒ¹é…é˜¶æ®µå‡†ç¡®ç‡!!</li>
</ul>
</blockquote>
<p>å¿ƒå¾— :</p>
<blockquote>
<p>Open Domain çš„ chatbot å¾ˆéš¾åšï¼Œè¯é¢˜å¤ªå¹¿ï¼Œå› ä¸ºæ— æ³•é¢„çŸ¥ç”¨æˆ·ä¼šé—®åˆ°ä»€ä¹ˆé—®é¢˜. </p>
<p>ä½ æƒ³åƒä»€ä¹ˆ ï¼š éšä¾¿<br>ä½ æ„Ÿè§‰æ€ä¹ˆæ · : è¿˜å¥½</p>
<p>æ²¡é—®é¢˜å…¶å®</p>
<p>æ‰€ä»¥é’ˆå¯¹ä¸€ä¸ª Closed Domain + æ£€ç´¢ + çŸ¥è¯†åº“ï¼Œè¿˜åº”è¯¥å¯ä»¥åšä¸€ä¸ªå¯ä»¥ç”¨çš„æœºå™¨äºº.</p>
</blockquote>
<h3 id="2-2-åº”è¯¥æ€ä¹ˆåš"><a href="#2-2-åº”è¯¥æ€ä¹ˆåš" class="headerlink" title="2.2 åº”è¯¥æ€ä¹ˆåš"></a>2.2 åº”è¯¥æ€ä¹ˆåš</h3><p><strong>åŒ¹é…æœ¬èº«æ˜¯ä¸€ä¸ªæ¨¡ç³Šçš„åœºæ™¯</strong></p>
<blockquote>
<p>è½¬æˆæ’åºé—®é¢˜</p>
</blockquote>
<p><strong>æ’åºé—®é¢˜æ€ä¹ˆå¤„ç†?</strong>  </p>
<blockquote>
<p>è½¬æˆèƒ½è¾“å‡ºæ¦‚ç‡çš„01åˆ†ç±»é—®é¢˜</p>
<p><strong>Q1 -&gt; { R1: 0.8, R2: 0.1, R3: 0.05, R4: 0.2 }</strong></p>
<p>Query &lt;&gt; Response</p>
</blockquote>
<p><strong>æ•°æ®æ„å»º?</strong></p>
<blockquote>
<p>æˆ‘ä»¬éœ€è¦æ­£æ ·æœ¬(æ­£ç¡®çš„å›ç­”) å’Œ è´Ÿæ ·æœ¬(ä¸å¯¹çš„å›ç­”)</p>
<p><strong>{ æ­£æ ·æœ¬ : Q1-R1 1 }, { è´Ÿæ ·æœ¬ : Q1-R3 0 }</strong></p>
</blockquote>
<p><strong>Loss function?</strong></p>
<blockquote>
<p>å›å¿†ä¸€ä¸‹ logistic regression</p>
</blockquote>
<p><strong>å¿ƒå¾— :</strong></p>
<blockquote>
<p>å®šä¹‰é—®é¢˜ å’Œ è§£å†³é—®é¢˜ å¾ˆé‡è¦</p>
<p>æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¯ä»¥è½¬æ¢ä¸º æœºå™¨å­¦ä¹  æˆ– æ·±åº¦å­¦ä¹  å¯ä»¥è§£å†³çš„é—®é¢˜ï¼Œè¿™éå¸¸é‡è¦ã€‚</p>
</blockquote>
<h2 id="3-ç”¨æ·±åº¦å­¦ä¹ æ¥å®Œæˆ"><a href="#3-ç”¨æ·±åº¦å­¦ä¹ æ¥å®Œæˆ" class="headerlink" title="3. ç”¨æ·±åº¦å­¦ä¹ æ¥å®Œæˆ"></a>3. ç”¨æ·±åº¦å­¦ä¹ æ¥å®Œæˆ</h2><p><img src="/images/chatbot/chatbot-5_3.png" width="700"></p>
<blockquote>
<p>ä¸ç®¡ç½‘ç»œç»“æ„å¦‚ä½•ï¼Œä½ æŠ“ä½æœ€å¥½çš„ loss function</p>
<p>100 W æ ·æœ¬ï¼Œ50W+ï¼Œ 50W-ï¼Œ è¿™æ ·çš„æ•°æ®é›†</p>
<p>æˆ‘ä»¬æ‹¿æ¥åšè®­ç»ƒï¼Œè¿™æ ·çš„ç½‘ç»œç»“æ„ï¼Œä¸ç®¡å¦‚ä½•æ­å»ºï¼Œéƒ½ä¸è¦å¤ªæ‹…å¿ƒï¼Œä½ å°±æŠ“ä½ loss functionï¼Œä½ çš„æŸå¤±å‡½æ•°ç”± c å’Œ r å†³å®šçš„ã€‚ c å’Œ r æ˜¯ç”±äºä¸Šé¢çš„ç»“æ„äº§ç”Ÿçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ç”¨ BPTT åšè®­ç»ƒäº†.</p>
<p>Query å’Œ Respon éƒ½æ˜¯æˆ‘ä»¬åˆ†è¯åç”¨çš„ word embmmingï¼ŒçŒå…¥ RNN ä¸­ï¼Œæˆ‘ä»¬æŠŠ LSTM é¡ºç€æ•æ‰ä¸‹æ¥ï¼Œå½“åšé—®é¢˜å’Œå›ç­”ï¼Œä¸¤ä¸ªæ•æ‰çš„ä¿¡æ¯æ¥åšåŒ¹é…ï¼Œæˆ‘æ‰¾äº†ä¸ªå‚æ•° Mï¼Œæ¥åš c å’Œ r çš„åŒ¹é…ã€‚ M æ˜¯ä¸€å®šçš„ï¼ŒåŒ¹é…ç¨‹åº¦å’Œæ–¹å¼ä¸€è‡´.</p>
<p>M åˆå§‹åŒ–çš„æ—¶å€™å¯ä»¥ç”± radom æ˜¯ç”Ÿæˆ. M ä¹‹åæ˜¯å¯ä»¥é€šè¿‡è®­ç»ƒåšæ›´æ–°çš„.</p>
<p><a href="http://www.wildml.com/2016/07/deep-learning-for-chatbots-2-retrieval-based-model-tensorflow/" target="_blank" rel="external">2016 Google Brain deep-learning-for-chatbots-2-retrieval-based-model-tensorflow, wildml blog</a></p>
</blockquote>
<h2 id="4-æ•°æ®-Ubuntu-å¯¹è¯è¯­æ–™åº“"><a href="#4-æ•°æ®-Ubuntu-å¯¹è¯è¯­æ–™åº“" class="headerlink" title="4. æ•°æ® - Ubuntu å¯¹è¯è¯­æ–™åº“"></a>4. æ•°æ® - Ubuntu å¯¹è¯è¯­æ–™åº“</h2><p>æˆ‘ä»¬å°†ä½¿ç”¨Ubuntuå¯¹è¯æ•°æ®é›†ï¼ˆ<a href="https://arxiv.org/abs/1506.08909" target="_blank" rel="external">è®ºæ–‡æ¥æº</a> <a href="https://github.com/rkadlec/ubuntu-ranking-dataset-creator" target="_blank" rel="external">githubåœ°å€</a>ï¼‰ã€‚è¿™ä¸ªæ•°æ®é›†ï¼ˆUbuntu Dialog Corpus, UDCï¼‰æ˜¯ç›®å‰æœ€å¤§çš„å…¬å¼€å¯¹è¯æ•°æ®é›†ä¹‹ä¸€ï¼Œå®ƒæ˜¯æ¥è‡ª Ubuntu çš„ IRCç½‘ç»œ ä¸Šçš„å¯¹è¯æ—¥å¿—ã€‚<a href="https://arxiv.org/abs/1506.08909" target="_blank" rel="external">è¿™ç¯‡è®ºæ–‡</a>ä»‹ç»äº†è¯¥æ•°æ®é›†ç”Ÿæˆçš„å…·ä½“ç»†èŠ‚ã€‚ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹æ•°æ®çš„æ ¼å¼ã€‚</p>
<p>è®­ç»ƒæ•°æ®æœ‰ 100W æ¡å®ä¾‹ï¼Œå…¶ä¸­ä¸€åŠæ˜¯æ­£ä¾‹ï¼ˆlabelä¸º1ï¼‰ï¼Œä¸€åŠæ˜¯è´Ÿä¾‹ï¼ˆlabelä¸º0ï¼Œè´Ÿä¾‹ä¸ºéšæœºç”Ÿæˆï¼‰ã€‚æ¯æ¡å®ä¾‹åŒ…æ‹¬ä¸€æ®µä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆcontextï¼‰ï¼Œå³Queryï¼›å’Œä¸€æ®µå¯èƒ½çš„å›å¤å†…å®¹ï¼Œå³Responseï¼›Labelä¸º1è¡¨ç¤ºè¯¥Responseç¡®å®æ˜¯Queryçš„å›å¤ï¼ŒLabelä¸º0åˆ™è¡¨ç¤ºä¸æ˜¯ã€‚ä¸‹é¢æ˜¯æ•°æ®ç¤ºä¾‹ï¼š</p>
<p>æ•°æ®é›†ç”Ÿæˆè„šæœ¬å·²ç”¨<a href="http://www.nltk.org/" target="_blank" rel="external">NLTK</a>åšäº†ä¸€ç³»åˆ—çš„è¯­æ–™å¤„ç†åŒ…æ‹¬ï¼ˆ<a href="http://www.nltk.org/api/nltk.tokenize.html#module-nltk.tokenize" target="_blank" rel="external">åˆ†è¯</a>ï¼Œ<a href="http://www.nltk.org/api/nltk.stem.html#module-nltk.stem.snowball" target="_blank" rel="external">stemmed</a>ï¼Œ<a href="http://www.nltk.org/api/nltk.stem.html#module-nltk.stem.wordnet" target="_blank" rel="external">lemmatized</a>ï¼‰ç­‰æ–‡æœ¬é¢„å¤„ç†æ­¥éª¤ï¼›</p>
<blockquote>
<ul>
<li>ä½¿ç”¨äº†NERæŠ€æœ¯ï¼Œå°†æ–‡æœ¬ä¸­çš„å®ä½“ï¼Œå¦‚ å§“åã€åœ°ç‚¹ã€ç»„ç»‡ã€URL ç­‰æ›¿æ¢æˆç‰¹æ®Šå­—ç¬¦ã€‚</li>
<li>è¿™äº›é¢„å¤„ç†ä¸æ˜¯ä¸¥æ ¼å¿…è¦çš„ï¼Œä½†æ˜¯èƒ½æ”¹å–„ä¸€äº›ç³»ç»Ÿçš„è¡¨ç°ã€‚</li>
<li>è¯­æ–™çš„ä¸Šä¸‹æ–‡å¹³å‡æœ‰86ä¸ªè¯è¯­ï¼Œç­”å¤å¹³å‡æœ‰17ä¸ªè¯è¯­é•¿ã€‚æœ‰äººåšäº†è¯­æ–™çš„ç»Ÿè®¡åˆ†æï¼š<a href="https://github.com/dennybritz/chatbot-retrieval/blob/master/notebooks/Data%20Exploration.ipynb" target="_blank" rel="external">data analysis</a></li>
<li>æ•°æ®é›†ä¹ŸåŒ…æ‹¬äº† <strong>Test / Validation sets</strong>ï¼Œä½†è¿™ä¸¤éƒ¨åˆ†çš„æ•°æ®å’Œè®­ç»ƒæ•°æ®åœ¨æ ¼å¼ä¸Šä¸å¤ªä¸€æ ·ã€‚</li>
<li>åœ¨ <strong>Test / Validation sets</strong> ä¸­ï¼Œå¯¹äºæ¯ä¸€æ¡å®ä¾‹ï¼Œæœ‰ä¸€ä¸ªæ­£ä¾‹å’Œä¹ä¸ªè´Ÿä¾‹æ•°æ®ï¼ˆä¹Ÿç§°ä¸ºå¹²æ‰°æ•°æ®ï¼‰ã€‚</li>
<li>æ¨¡å‹çš„ç›®æ ‡åœ¨äºç»™æ­£ä¾‹çš„å¾—åˆ†å°½å¯èƒ½çš„é«˜ï¼Œè€Œç»™è´Ÿä¾‹çš„å¾—åˆ†å°½å¯èƒ½çš„ä½ã€‚ä¸‹é¢æ˜¯æ•°æ®ç¤ºä¾‹ï¼š</li>
</ul>
</blockquote>
<h3 id="4-1-Train-sets"><a href="#4-1-Train-sets" class="headerlink" title="4.1 Train sets"></a>4.1 Train sets</h3><p><img src="/images/chatbot/chatbot-5_4.png" width="900"></p>
<h3 id="4-2-Test-Validation-sets"><a href="#4-2-Test-Validation-sets" class="headerlink" title="4.2 Test / Validation sets"></a>4.2 Test / Validation sets</h3><ul>
<li>æ¯ä¸ªæ ·æœ¬ï¼Œæœ‰ä¸€ä¸ªæ­£ä¾‹å’Œä¹ä¸ªè´Ÿä¾‹æ•°æ® (ä¹Ÿç§°ä¸ºå¹²æ‰°æ•°æ®)ã€‚</li>
<li>å»ºæ¨¡çš„ç›®æ ‡åœ¨äºç»™æ­£ä¾‹çš„å¾—åˆ†å°½å¯èƒ½çš„é«˜ï¼Œè€Œç»™è´Ÿä¾‹çš„å¾—åˆ†å°½å¯èƒ½çš„ä½ã€‚(æœ‰ç‚¹ç±»ä¼¼åˆ†ç±»ä»»åŠ¡)</li>
<li>è¯­æ–™åšè¿‡åˆ†è¯ã€stemmedã€lemmatized ç­‰æ–‡æœ¬é¢„å¤„ç†ã€‚</li>
</ul>
<p>NLTK stemmed</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> nltk.stem.porter <span class="keyword">import</span> PorterStemmer</span><br><span class="line">p = PorterStemmer()</span><br><span class="line">p.stem(<span class="string">'wenting'</span>)</span><br></pre></td></tr></table></figure>
<p>NLTK Lemma</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> nltk.stem <span class="keyword">import</span> WordNetLemmatizer</span><br><span class="line">wordnet_lemmatizer = WordNetLemmatizer()</span><br><span class="line">wordnet_lemmatizer.lemmatize(â€˜dogsâ€™)</span><br><span class="line">uâ€™dogâ€™</span><br></pre></td></tr></table></figure>
<ul>
<li>ç”¨ NER(å‘½åå®ä½“è¯†åˆ«) å°†æ–‡æœ¬ä¸­çš„ <strong>å®ä½“</strong>ï¼Œå¦‚å§“åã€åœ°ç‚¹ã€ç»„ç»‡ã€URLç­‰ æ›¿æ¢æˆç‰¹æ®Šå­—ç¬¦</li>
</ul>
<p><img src="/images/chatbot/chatbot-5_5.png" width="900"></p>
<h2 id="5-è¯„ä¼°å‡†åˆ™-BASELINE"><a href="#5-è¯„ä¼°å‡†åˆ™-BASELINE" class="headerlink" title="5. è¯„ä¼°å‡†åˆ™ BASELINE"></a>5. è¯„ä¼°å‡†åˆ™ BASELINE</h2><p><strong>Recall@K</strong></p>
<blockquote>
<ul>
<li>å¸¸è§çš„ Kaggle æ¯”èµ›è¯„åˆ¤å‡†åˆ™</li>
<li>ç»æ¨¡å‹å¯¹å€™é€‰çš„ response æ’åºåï¼Œå‰ k ä¸ªå€™é€‰ä¸­ å­˜åœ¨æ­£ä¾‹æ•°æ®(æ­£ç¡®çš„é‚£ä¸ª)çš„å æ¯”ã€‚<br> è®© K=10ï¼Œè¿™å°±å¾—åˆ°ä¸€ä¸ª 100% çš„å¬å›ç‡ï¼Œå› æœ€å¤šå°± 10 ä¸ªå¤‡é€‰ã€‚å¦‚æœ K=1ï¼Œæ¨¡å‹åªä¸€æ¬¡æœºä¼šé€‰ä¸­æ­£ç¡®ç­”æ¡ˆã€‚</li>
<li>K å€¼ è¶Šå¤§ï¼ŒæŒ‡æ ‡å€¼è¶Šé«˜ï¼Œå¯¹æ¨¡å‹æ€§èƒ½çš„è¦æ±‚è¶Šæ¾ã€‚</li>
</ul>
</blockquote>
<p><strong>9ä¸ªå¹²æ‰°é¡¹ç›®æ€ä¹ˆé€‰å‡ºæ¥</strong></p>
<blockquote>
<p>è¿™ä¸ªæ•°æ®é›†é‡Œæ˜¯éšæœºçš„æ–¹æ³•é€‰æ‹©çš„ã€‚</p>
<p>ä½†æ˜¯ç°å®ä¸–ç•Œé‡Œä½ å¯èƒ½æ•°ç™¾ä¸‡çš„å¯èƒ½ç­”å¤ï¼Œå¹¶ä¸”ä½ å¹¶ä¸çŸ¥é“ç­”å¤æ˜¯å¦åˆç†æ­£ç¡®ã€‚ä½ æ²¡èƒ½åŠ›ä»æ•°ç™¾ä¸‡çš„å¯èƒ½çš„ç­”å¤é‡Œå»æŒ‘é€‰ä¸€ä¸ªå¾—åˆ†æœ€é«˜çš„æ­£ç¡®ç­”å¤ã€‚æˆæœ¬å¤ªé«˜äº†ï¼ google çš„ smart reply ç”¨åˆ†å¸ƒå¼é›†ç¾¤æŠ€æœ¯è®¡ç®—ä¸€ç³»åˆ—çš„å¯èƒ½ç­”å¤å»æŒ‘é€‰,.</p>
<p>å¯èƒ½ä½ åªæœ‰ç™¾æ¥ä¸ªå¤‡é€‰ç­”æ¡ˆï¼Œå¯ä»¥å»è¯„ä¼°æ¯ä¸€ä¸ªã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">evaluate_recall</span><span class="params">(y, y_test, k=<span class="number">1</span>)</span>:</span></span><br><span class="line">    num_examples = float(len(y))</span><br><span class="line">    num_correct = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> predictions, label <span class="keyword">in</span> zip(y, y_test):</span><br><span class="line">        <span class="keyword">if</span> label <span class="keyword">in</span> predictions[:k]:</span><br><span class="line">            num_correct += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> num_correct/num_examples</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œy æ˜¯æ‰€é¢„æµ‹çš„ä»¥é™åºæ’åˆ—çš„æ¨¡å‹é¢„æµ‹åˆ†å€¼ï¼Œy_test æ˜¯å®é™…çš„ label å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ y çš„å€¼ä¸º [0,3,1,2,5,6,4,7,8,9]ï¼Œè¿™è¯´æ˜ ç¬¬0å· çš„å€™é€‰çš„é¢„æµ‹åˆ†å€¼æœ€é«˜ã€ä½œä¸ºå›å¤çš„å¯èƒ½æ€§æœ€é«˜ï¼Œè€Œ9å·åˆ™æœ€ä½ã€‚è¿™é‡Œçš„ ç¬¬0å· åŒæ—¶ä¹Ÿæ˜¯æ­£ç¡®çš„é‚£ä¸ªï¼Œå³æ­£ä¾‹æ•°æ®ï¼Œæ ‡å·ä¸º 1-9 çš„ä¸ºéšæœºç”Ÿæˆçš„è´Ÿä¾‹æ•°æ®ã€‚</p>
<h3 id="5-1-åŸºçº¿æ¨¡å‹-random-guess"><a href="#5-1-åŸºçº¿æ¨¡å‹-random-guess" class="headerlink" title="5.1  åŸºçº¿æ¨¡å‹:random guess"></a>5.1  åŸºçº¿æ¨¡å‹:random guess</h3><p>ç†è®ºä¸Šï¼Œæœ€baseçš„éšæœºæ¨¡å‹ï¼ˆRandom Predictorï¼‰çš„recall@1çš„å€¼ä¸º10%ï¼Œrecall@2çš„å€¼ä¸º20%.</p>
<p>ç›¸åº”çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Random Predictor</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">predict_random</span><span class="params">(context, utterances)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> np.random.choice(len(utterances), <span class="number">10</span>, replace=<span class="keyword">False</span>) <span class="comment">#np.random.choice(5, 3)  array([0, 3, 4])</span></span><br><span class="line">    <span class="comment"># å¯ä»¥ä»ä¸€ä¸ª intæ•°å­— æˆ– 1ç»´ array é‡Œéšæœºé€‰å–å†…å®¹ï¼Œå¹¶å°†é€‰å–ç»“æœæ”¾å…¥ nç»´ array ä¸­è¿”å›</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Evaluate Random predictor</span></span><br><span class="line">y_random = [predict_random(test_df.Context[x], test_df.iloc[x,<span class="number">1</span>:].values) <span class="keyword">for</span> x <span class="keyword">in</span> range(len(test_df))]</span><br><span class="line">y_test = np.zeros(len(y_random))</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>]:</span><br><span class="line">    print(<span class="string">"Recall @ (&#123;&#125;, 10): &#123;:g&#125;"</span>.format(n, evaluate_recall(y_random, y_test, n)))</span><br></pre></td></tr></table></figure>
<p>å®é™…çš„æ¨¡å‹ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Recall @ (<span class="number">1</span>, <span class="number">10</span>): <span class="number">0.0937632</span></span><br><span class="line">Recall @ (<span class="number">2</span>, <span class="number">10</span>): <span class="number">0.194503</span></span><br><span class="line">Recall @ (<span class="number">5</span>, <span class="number">10</span>): <span class="number">0.49297</span></span><br><span class="line">Recall @ (<span class="number">10</span>, <span class="number">10</span>): <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ç†è®ºé¢„æœŸç›¸ç¬¦ï¼Œä½†è¿™ä¸æ˜¯æˆ‘ä»¬æ‰€è¿½æ±‚çš„ç»“æœã€‚</p>
<h3 id="5-2-åŸºçº¿æ¨¡å‹-TF-IDFæ£€ç´¢"><a href="#5-2-åŸºçº¿æ¨¡å‹-TF-IDFæ£€ç´¢" class="headerlink" title="5.2 åŸºçº¿æ¨¡å‹:TF-IDFæ£€ç´¢"></a>5.2 åŸºçº¿æ¨¡å‹:TF-IDFæ£€ç´¢</h3><p>å¦å¤–ä¸€ä¸ª baseline çš„æ¨¡å‹ä¸º <strong>tfidf predictor</strong>ã€‚ç›´è§‚ä¸Šï¼Œä¸¤ç¯‡æ–‡æ¡£å¯¹åº”çš„ tfidf å‘é‡ è¶Šæ¥è¿‘ï¼Œä¸¤ç¯‡æ–‡ç« çš„å†…å®¹ä¹Ÿè¶Šç›¸ä¼¼ã€‚åŒæ ·çš„ï¼Œå¯¹äºä¸€ä¸ª QR pairï¼Œå®ƒä»¬è¯­ä¹‰ä¸Šæ¥è¿‘çš„è¯å…±ç°çš„è¶Šå¤šï¼Œä¹Ÿå°†è¶Šå¯èƒ½æ˜¯ä¸€ä¸ªæ­£ç¡®çš„ QR pairï¼ˆè¿™å¥è¯å­˜ç–‘ï¼ŒåŸå› åœ¨äº Q R ä¹‹é—´ä¹Ÿæœ‰å¯èƒ½ä¸å­˜åœ¨è¯­ä¹‰ä¸Šçš„ç›¸ä¼¼ï¼Œä¸€ä¸ªQå¯¹åº”çš„ R æ˜¯å¤šæ ·çš„ã€‚ï¼‰ã€‚tfidf predictor å¯¹åº”çš„ä»£ç å¦‚ä¸‹ï¼ˆåˆ©ç”¨scikit-learnå·¥å…·èƒ½å¤Ÿè½»æ˜“å®ç°ï¼‰ï¼š</p>
<blockquote>
<p>tfidfè¡¨ç¤ºè¯é¢‘ï¼ˆterm frequencyï¼‰å’Œé€†æ–‡æ¡£è¯é¢‘ï¼ˆinverse document frequencyï¼‰ï¼Œå®ƒè¡¡é‡äº†ä¸€ä¸ªè¯åœ¨ä¸€ç¯‡æ–‡æ¡£ä¸­çš„é‡è¦ç¨‹åº¦ï¼ˆåŸºäºæ•´ä¸ªè¯­æ–™åº“ï¼‰ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TFIDFPredictor</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.vectorizer = TfidfVectorizer()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        self.vectorizer.fit(np.append(data.Context.values,data.Utterance.values))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(self, context, utterances)</span>:</span></span><br><span class="line">        <span class="comment"># Convert context and utterances into tfidf vector</span></span><br><span class="line">        vector_context = self.vectorizer.transform([context])</span><br><span class="line">        vector_doc = self.vectorizer.transform(utterances)</span><br><span class="line">        <span class="comment"># The dot product measures the similarity of the resulting vectors</span></span><br><span class="line">        result = np.dot(vector_doc, vector_context.T).todense()</span><br><span class="line">        result = np.asarray(result).flatten()</span><br><span class="line">        <span class="comment"># Sort by top results and return the indices in descending order</span></span><br><span class="line">        <span class="keyword">return</span> np.argsort(result, axis=<span class="number">0</span>)[::<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Evaluate TFIDF predictor</span></span><br><span class="line">pred = TFIDFPredictor()</span><br><span class="line">pred.train(train_df)</span><br><span class="line">y = [pred.predict(test_df.Context[x], test_df.iloc[x,<span class="number">1</span>:].values) <span class="keyword">for</span> x <span class="keyword">in</span> range(len(test_df))]</span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>]:</span><br><span class="line">    print(<span class="string">"Recall @ (&#123;&#125;, 10): &#123;:g&#125;"</span>.format(n, evaluate_recall(y, y_test, n)))</span><br></pre></td></tr></table></figure>
<p>æ¨¡å‹ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Recall @ (<span class="number">1</span>, <span class="number">10</span>): <span class="number">0.495032</span></span><br><span class="line">Recall @ (<span class="number">2</span>, <span class="number">10</span>): <span class="number">0.596882</span></span><br><span class="line">Recall @ (<span class="number">5</span>, <span class="number">10</span>): <span class="number">0.766121</span></span><br><span class="line">Recall @ (<span class="number">10</span>, <span class="number">10</span>): <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>æ˜¾ç„¶è¿™æ¯” Random çš„æ¨¡å‹è¦å¥½å¾—å¤šï¼Œä½†è¿™è¿˜ä¸å¤Ÿã€‚ä¹‹å‰çš„å‡è®¾å¹¶ä¸å®Œç¾ï¼Œé¦–å…ˆ query å’Œ response ä¹‹é—´å¹¶ä¸ä¸€å®šè¦æ˜¯è¯­ä¹‰ä¸Šçš„ç›¸è¿‘ï¼›å…¶æ¬¡ tfidfæ¨¡å‹ å¿½ç•¥äº†è¯åºè¿™ä¸€é‡è¦çš„ä¿¡æ¯ã€‚ä½¿ç”¨ NNæ¨¡å‹ æˆ‘ä»¬èƒ½åšå¾—æ›´å¥½ä¸€äº›ã€‚</p>
<h2 id="6-LSTM"><a href="#6-LSTM" class="headerlink" title="6. LSTM"></a>6. LSTM</h2><p>å»ºç«‹çš„ NNæ¨¡å‹ ä¸ºä¸¤å±‚ Encoder çš„ LSTMæ¨¡å‹ï¼ˆDual Encoder LSTM Networkï¼‰ï¼Œè¿™ç§å½¢å¼çš„ç½‘ç»œè¢«å¹¿æ³›åº”ç”¨ chatbot ä¸­ã€‚</p>
<p><a href="https://www.tensorflow.org/versions/r0.9/tutorials/seq2seq/index.html" target="_blank" rel="external">seq2seqæ¨¡å‹</a> å¸¸ç”¨äºæœºå™¨ç¿»è¯‘é¢†åŸŸï¼Œå¹¶å–å¾—äº†è¾ƒå¤§çš„æ•ˆæœã€‚ä½¿ç”¨ Dual LSTMæ¨¡å‹ çš„åŸå› åœ¨äºè¿™ä¸ªæ¨¡å‹è¢«è¯æ˜åœ¨è¿™ä¸ªæ•°æ®é›†æœ‰è¾ƒå¥½çš„æ•ˆæœï¼ˆ<a href="https://arxiv.org/abs/1510.03753" target="_blank" rel="external">è¯¦æƒ…è§è¿™é‡Œ</a>ï¼‰, è¿™å¯ä»¥ä½œä¸ºæˆ‘ä»¬åç»­æ¨¡å‹æ•ˆæœçš„éªŒè¯ã€‚</p>
<p>ä¸¤å±‚ Encoder çš„ LSTMæ¨¡å‹ çš„ç»“æ„å›¾å¦‚ä¸‹ï¼ˆ<a href="https://arxiv.org/abs/1506.08909" target="_blank" rel="external">è®ºæ–‡æ¥æº</a>ï¼‰ï¼š</p>
<p><strong>å¤§è‡´æµç¨‹ï¼š</strong></p>
<blockquote>
<p>(1). Query å’Œ Response éƒ½æ˜¯ç»è¿‡åˆ†è¯çš„ï¼Œåˆ†è¯åæ¯ä¸ªè¯ embedding ä¸ºå‘é‡å½¢å¼ã€‚åˆå§‹çš„è¯å‘é‡ä½¿ç”¨ GloVe / Word2vecï¼Œä¹‹åè¯å‘é‡éšç€æ¨¡å‹çš„è®­ç»ƒä¼šè¿›è¡Œ fine-tuned ã€‚</p>
<p>(2). åˆ†è¯ä¸”å‘é‡åŒ–çš„ Query å’Œ Response ç»è¿‡ç›¸åŒçš„ RNNï¼ˆword by wordï¼‰ã€‚RNN æœ€ç»ˆç”Ÿæˆä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œæ•æ‰äº† Query å’Œ Response ä¹‹é—´çš„[è¯­ä¹‰è”ç³»]ï¼ˆå›¾ä¸­çš„$c$å’Œ$r$ï¼‰ï¼›è¿™ä¸ªå‘é‡çš„ç»´åº¦æ˜¯å¯ä»¥æŒ‡å®šçš„ï¼Œè¿™é‡ŒæŒ‡å®šä¸º 256ç»´ã€‚</p>
<p>(3). å°† å‘é‡c ä¸ä¸€ä¸ª çŸ©é˜µM ç›¸ä¹˜ï¼Œæ¥é¢„æµ‹ä¸€ä¸ªå¯èƒ½çš„ å›å¤$râ€™$ã€‚å¦‚æœ $c$ ä¸ºä¸€ä¸ª256ç»´çš„å‘é‡ï¼ŒMç»´ 256*256 çš„çŸ©é˜µï¼Œä¸¤è€…ç›¸ä¹˜çš„ç»“æœä¸ºå¦ä¸€ä¸ª256ç»´çš„å‘é‡ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è§£é‡Šä¸º[ä¸€ä¸ªç”Ÿæˆå¼çš„å›å¤å‘é‡]ã€‚çŸ©é˜µM æ˜¯éœ€è¦è®­ç»ƒçš„å‚æ•°ã€‚</p>
<p>(4). é€šè¿‡ç‚¹ä¹˜çš„æ–¹å¼æ¥é¢„æµ‹ç”Ÿæˆçš„ å›å¤$râ€™$ å’Œ å€™é€‰çš„ å›å¤$r$ ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ï¼Œç‚¹ä¹˜ç»“æœè¶Šå¤§è¡¨ç¤ºå€™é€‰å›å¤ä½œä¸ºå›å¤çš„å¯ä¿¡åº¦è¶Šé«˜ï¼›ä¹‹åé€šè¿‡ sigmoid å‡½æ•°å½’ä¸€åŒ–ï¼Œè½¬æˆæ¦‚ç‡å½¢å¼ã€‚</p>
<p> (sigmoidä½œä¸ºå‹ç¼©å‡½æ•°ç»å¸¸ä½¿ç”¨) å›¾ä¸­æŠŠç¬¬(3)æ­¥å’Œç¬¬(4)æ­¥ç»“åˆåœ¨ä¸€èµ·äº†ã€‚</p>
<ul>
<li><p>(5). æŸå¤±å‡½æ•°ï¼ˆloss functionï¼‰ã€‚è¿™é‡Œä½¿ç”¨äºŒå…ƒçš„äº¤å‰ç†µï¼ˆbinary cross-entropyï¼‰ä½œä¸ºæŸå¤±å‡½æ•°ã€‚æˆ‘ä»¬å·²çŸ¥å®ä¾‹çš„çœŸå® label $y$ï¼Œ å€¼ä¸º 0 æˆ– 1ï¼› é€šè¿‡ä¸Šé¢çš„ç¬¬(4)æ­¥å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ¦‚ç‡å€¼ $yâ€™$ï¼›å› æ­¤ï¼Œäº¤å‰ç†µæŸå¤±å€¼ä¸º $L = -y * ln(yâ€™) - (1 - y) * ln(1 - yâ€™)$ã€‚</p>
<p>è¿™ä¸ªå…¬å¼æ„ä¹‰æ˜¯ç›´è§‚çš„ï¼Œå³å½“ $y=1$ æ—¶ï¼Œ$L = -ln(yâ€™)$ï¼ŒæœŸæœ› $yâ€™$ å°½é‡æ¥è¿‘ 1 ä½¿å¾—æŸå¤±å‡½æ•°çš„å€¼è¶Šå°ï¼›åä¹‹äº¦ç„¶ã€‚</p>
</li>
</ul>
<p>å®ç°è¿‡ç¨‹ä¸­ä½¿ç”¨äº† numpyã€pandasã€TensorFlow å’Œ TF Learn ç­‰å·¥å…·ã€‚</p>
</blockquote>
<h3 id="6-1-æ•°æ®é¢„å¤„ç†"><a href="#6-1-æ•°æ®é¢„å¤„ç†" class="headerlink" title="6.1. æ•°æ®é¢„å¤„ç†"></a>6.1. æ•°æ®é¢„å¤„ç†</h3><p><a href="https://github.com/chatbot-tube/ubuntu-ranking-dataset-creator" target="_blank" rel="external">æ•°æ®é›†</a>çš„åŸå§‹æ ¼å¼ä¸ºcsvæ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå°†å…¶è½¬ä¸º TensorFlow ä¸“æœ‰çš„æ ¼å¼ï¼Œè¿™ç§æ ¼å¼çš„å¥½å¤„åœ¨äºèƒ½å¤Ÿç›´æ¥ä»è¾“å…¥æ–‡ä»¶ä¸­ load tensorsï¼Œå¹¶è®© TensorFlow æ¥å¤„ç†æ´—ç‰Œ(shuffling)ã€æ‰¹é‡(batching) å’Œ é˜Ÿåˆ—åŒ–(queuing) ç­‰æ“ä½œã€‚é¢„å¤„ç†ä¸­è¿˜åŒ…æ‹¬åˆ›å»ºä¸€ä¸ªå­—å…¸åº“ï¼Œå°†è¯è¿›è¡Œæ ‡å·ï¼ŒTFRecord æ–‡ä»¶å°†ç›´æ¥å­˜å‚¨è¿™äº›è¯çš„æ ‡å·ã€‚</p>
<p>æ¯ä¸ªå®ä¾‹åŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªå­—æ®µï¼š</p>
<ul>
<li>Queryï¼šè¡¨ç¤ºä¸ºä¸€ä¸²è¯æ ‡å·çš„åºåˆ—ï¼Œå¦‚ [231, 2190, 737, 0, 912]ï¼›</li>
<li>Query çš„é•¿åº¦ï¼›</li>
<li>Responseï¼šåŒæ ·æ˜¯ä¸€ä¸²è¯æ ‡å·çš„åºåˆ—ï¼›</li>
<li>Response çš„é•¿åº¦ï¼›</li>
<li>Labelï¼›</li>
<li>Distractor_[N]ï¼šè¡¨ç¤ºè´Ÿä¾‹å¹²æ‰°æ•°æ®ï¼Œä»…åœ¨éªŒè¯é›†å’Œæµ‹è¯•é›†ä¸­æœ‰ï¼ŒN çš„å–å€¼ä¸º 0-8ï¼›</li>
<li>Distractor_[N]çš„é•¿åº¦ï¼›</li>
</ul>
<p>æ•°æ®é¢„å¤„ç†çš„ <a href="https://github.com/dennybritz/chatbot-retrieval/blob/master/scripts/prepare_data.py" target="_blank" rel="external">Pythonè„šæœ¬</a>ï¼Œç”Ÿæˆäº†3ä¸ªæ–‡ä»¶ï¼štrain.tfrecords, validation.tfrecords å’Œ test.tfrecordsã€‚ä½ å¯ä»¥å°è¯•è‡ªå·±è¿è¡Œç¨‹åºï¼Œæˆ–è€…ç›´æ¥ä¸‹è½½å’Œä½¿ç”¨é¢„å¤„ç†åçš„æ•°æ®ã€‚</p>
<h3 id="6-2-åˆ›å»ºè¾“å…¥å‡½æ•°"><a href="#6-2-åˆ›å»ºè¾“å…¥å‡½æ•°" class="headerlink" title="6.2. åˆ›å»ºè¾“å…¥å‡½æ•°"></a>6.2. åˆ›å»ºè¾“å…¥å‡½æ•°</h3><p>ä¸ºäº†ä½¿ç”¨ TensoFlowå†…ç½® çš„è®­ç»ƒå’Œè¯„æµ‹æ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè¾“å…¥å‡½æ•°ï¼šè¿™ä¸ªå‡½æ•°è¿”å›è¾“å…¥æ•°æ®çš„ batchã€‚</p>
<blockquote>
<p>å› ä¸ºè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®çš„æ ¼å¼ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸åŒçš„è¾“å…¥å‡½æ•°ã€‚</p>
<p>è¾“å…¥å‡½æ•°éœ€è¦è¿”å›æ‰¹é‡(<strong>batch</strong>)çš„ç‰¹å¾å’Œæ ‡ç­¾å€¼(å¦‚æœæœ‰çš„è¯)ã€‚ç±»ä¼¼äºå¦‚ä¸‹ï¼š</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">input_fn</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="comment"># TODO Load and preprocess data here</span></span><br><span class="line">  <span class="keyword">return</span> batched_features, labels</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨æ¨¡å‹è®­ç»ƒå’Œè¯„æµ‹è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸åŒçš„è¾“å…¥å‡½æ•°ï¼Œä¸ºäº†é˜²æ­¢é‡å¤ä¹¦å†™ä»£ç ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…è£…å™¨(wrapper)ï¼Œåç§°ä¸ºcreate_input_fnï¼Œé’ˆå¯¹ä¸åŒçš„modeä½¿ç”¨ç›¸åº”çš„codeï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_input_fn</span><span class="params">(mode, input_files, batch_size, num_epochs=None)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">input_fn</span><span class="params">()</span>:</span></span><br><span class="line">	 <span class="comment"># TODO Load and preprocess data here</span></span><br><span class="line">        <span class="keyword">return</span> batched_features, labels</span><br><span class="line">    <span class="keyword">return</span> input_fn</span><br></pre></td></tr></table></figure>
<p>å®Œæ•´çš„codeè§<a href="https://github.com/dennybritz/chatbot-retrieval/blob/master/udc_inputs.py" target="_blank" rel="external">udc_inputs.py</a>ã€‚æ•´ä½“ä¸Šï¼Œè¿™ä¸ªå‡½æ•°åšäº†å¦‚ä¸‹çš„äº‹æƒ…ï¼š</p>
<p>(1) å®šä¹‰äº†ç¤ºä¾‹æ–‡ä»¶ä¸­çš„ featureå­—æ®µï¼›<br>(2) ä½¿ç”¨ tf.TFRecordReader æ¥è¯»å– input_files ä¸­çš„æ•°æ®ï¼›<br>(3) æ ¹æ® featureå­—æ®µ çš„å®šä¹‰å¯¹æ•°æ®è¿›è¡Œè§£æï¼›<br>(4) æå–è®­ç»ƒæ•°æ®çš„æ ‡ç­¾ labelï¼›<br>(5) äº§ç”Ÿæ‰¹é‡åŒ–çš„è®­ç»ƒæ•°æ® batch train_datasetsï¼›<br>(6) è¿”å›æ‰¹é‡çš„ç‰¹å¾æ•°æ®åŠå¯¹åº”æ ‡ç­¾ labelï¼›</p>
<h3 id="6-3-å®šä¹‰è¯„æµ‹æŒ‡æ ‡"><a href="#6-3-å®šä¹‰è¯„æµ‹æŒ‡æ ‡" class="headerlink" title="6.3. å®šä¹‰è¯„æµ‹æŒ‡æ ‡"></a>6.3. å®šä¹‰è¯„æµ‹æŒ‡æ ‡</h3><p>ä¹‹å‰å·²ç»æåˆ°ç”¨ <strong>recall@k</strong> è¿™ä¸ªæŒ‡æ ‡æ¥è¯„æµ‹æ¨¡å‹ï¼ŒTensorFlow ä¸­å·²ç»å®ç°äº†è®¸å¤šæ ‡å‡†æŒ‡æ ‡ï¼ˆåŒ…æ‹¬ <strong>recall@k</strong>ï¼‰ã€‚ä¸ºäº†ä½¿ç”¨è¿™äº›æŒ‡æ ‡ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªå­—å…¸ï¼Œkey ä¸ºæŒ‡æ ‡åç§°ï¼Œvalue ä¸ºå¯¹åº”çš„è®¡ç®—å‡½æ•°ã€‚å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_evaluation_metrics</span><span class="params">()</span>:</span></span><br><span class="line">    eval_metrics = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">10</span>]:</span><br><span class="line">        eval_metrics[<span class="string">"recall_at_%d"</span> % k] = functools.partial(</span><br><span class="line">            tf.contrib.metrics.streaming_sparse_recall_at_k,</span><br><span class="line">            k=k</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> eval_metrics</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <a href="https://docs.python.org/2/library/functools.html#functools.partial" target="_blank" rel="external">functools.partial</a> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„è¾“å…¥å‚æ•°æœ‰ä¸¤ä¸ªã€‚ä¸è¦è¢« streaming_sparse_recall_at_k æ‰€å›°æƒ‘ï¼Œå…¶ä¸­çš„ streaming çš„å«ä¹‰æ˜¯è¡¨ç¤ºæŒ‡æ ‡çš„è®¡ç®—æ˜¯å¢é‡å¼çš„ã€‚</p>
<p>è®­ç»ƒå’Œæµ‹è¯•æ‰€ä½¿ç”¨çš„è¯„æµ‹æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯¹ æ¯ä¸ªcase å¯èƒ½ä½œä¸ºæ­£ç¡®å›å¤çš„æ¦‚ç‡è¿›è¡Œé¢„æµ‹ï¼Œè€Œæµ‹è¯•è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯¹æ¯ç»„æ•°æ®ï¼ˆåŒ…å«10ä¸ªcaseï¼Œå…¶ä¸­1ä¸ªæ˜¯æ­£ç¡®çš„ï¼Œå¦å¤–9ä¸ªæ˜¯ç”Ÿæˆçš„è´Ÿä¾‹/å™ªéŸ³æ•°æ®ï¼‰ä¸­çš„caseè¿›è¡Œé€æ¡æ¦‚ç‡é¢„æµ‹ï¼Œå¾—åˆ°ä¾‹å¦‚ [0.34, 0.11, 0.22, 0.45, 0.01, 0.02, 0.03, 0.08, 0.33, 0.11] è¿™æ ·æ ¼å¼çš„è¾“å‡ºï¼Œè¿™äº›è¾“å‡ºå€¼çš„å’Œå¹¶ä¸è¦æ±‚ä¸º 1ï¼ˆå› ä¸ºæ˜¯é€æ¡é¢„æµ‹çš„ï¼Œæœ‰å•ç‹¬çš„é¢„æµ‹æ¦‚ç‡å€¼ï¼Œåœ¨ 0 åˆ° 1 ä¹‹é—´ï¼‰ï¼› è€Œå¯¹äºè¿™ç»„æ•°æ®è€Œè¨€ï¼Œå› ä¸ºæ•°æ® index=0 å¯¹åº”çš„ä¸ºæ­£ç¡®ç­”æ¡ˆï¼Œè¿™é‡Œ recall@1 ä¸º 0ï¼Œå› ä¸º 0.34 æ˜¯å…¶ä¸­ç¬¬äºŒå¤§çš„å€¼ï¼Œæ‰€ä»¥ recall@2 æ˜¯ 1ï¼ˆè¡¨ç¤ºè¿™ç»„æ•°æ®ä¸­é¢„æµ‹æ¦‚ç‡å€¼åœ¨å‰äºŒçš„ä¸­æœ‰ä¸€ä¸ªæ˜¯æ­£ç¡®çš„ï¼‰ã€‚</p>
<h3 id="6-4-è®­ç»ƒç¨‹åºæ ·ä¾‹"><a href="#6-4-è®­ç»ƒç¨‹åºæ ·ä¾‹" class="headerlink" title="6.4. è®­ç»ƒç¨‹åºæ ·ä¾‹"></a>6.4. è®­ç»ƒç¨‹åºæ ·ä¾‹</h3><p>é¦–å…ˆï¼Œç»™ä¸€ä¸ªæ¨¡å‹è®­ç»ƒå’Œæµ‹è¯•çš„ç¨‹åºæ ·ä¾‹ï¼Œè¿™ä¹‹åä½ å¯ä»¥å‚ç…§ç¨‹åºä¸­æ‰€ç”¨åˆ°çš„æ ‡å‡†å‡½æ•°ï¼Œæ¥å¿«é€Ÿåˆ‡æ¢å’Œä½¿ç”¨å…¶ä»–çš„ç½‘ç»œæ¨¡å‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•° <code>model_fn</code>ï¼Œå‡½æ•°çš„è¾“å…¥å‚æ•°æœ‰ <code>batched features</code>ï¼Œ<code>label</code> å’Œ <code>mode</code>(train/evaluation)ï¼Œå‡½æ•°çš„è¾“å‡ºä¸ºé¢„æµ‹å€¼ã€‚ç¨‹åºæ ·ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">estimator = tf.contrib.learn.Estimator(</span><br><span class="line">    model_fn=model_fn,</span><br><span class="line">    model_dir=MODEL_DIR,</span><br><span class="line">    config=tf.contrib.learn.RunConfig()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">input_fn_train = udc_inputs.create_input_fn(</span><br><span class="line">    mode=tf.contrib.learn.ModeKeys.TRAIN,</span><br><span class="line">    input_files=[TRAIN_FILE],</span><br><span class="line">    batch_size=hparams.batch_size</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">input_fn_eval = udc_inputs.create_input_fn(</span><br><span class="line">    mode=tf.contrib.learn.ModeKeys.EVAL,</span><br><span class="line">    input_files=[VALIDATION_FILE],</span><br><span class="line">    batch_size=hparams.eval_batch_size,</span><br><span class="line">    num_epochs=<span class="number">1</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">eval_metrics = udc_metrics.create_evaluation_metrics()</span><br><span class="line"></span><br><span class="line"><span class="comment"># We need to subclass theis manually for now. The next TF version will</span></span><br><span class="line"><span class="comment"># have support ValidationMonitors with metrics built-in.</span></span><br><span class="line"><span class="comment"># It's already on the master branch.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EvaluationMonitor</span><span class="params">(tf.contrib.learn.monitors.EveryN)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">every_n_step_end</span><span class="params">(self, step, outputs)</span>:</span></span><br><span class="line">        self._estimator.evaluate(</span><br><span class="line">        input_fn=input_fn_eval,</span><br><span class="line">        metrics=eval_metrics,</span><br><span class="line">        steps=<span class="keyword">None</span>)</span><br><span class="line"></span><br><span class="line">eval_monitor = EvaluationMonitor(every_n_steps=FLAGS.eval_every)</span><br><span class="line"></span><br><span class="line">estimator.fit(input_fn=input_fn_train, steps=<span class="keyword">None</span>, monitors=[eval_monitor])</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ª <strong>model_fn</strong> çš„ <strong>estimator</strong>(è¯„ä¼°å‡½æ•°)ï¼›</p>
<p>ä¸¤ä¸ªè¾“å…¥å‡½æ•°ï¼Œ<strong>input_fn_train</strong> å’Œ <strong>input_fn_eval</strong>ï¼Œä»¥åŠè®¡ç®—è¯„æµ‹æŒ‡æ ‡çš„å‡½æ•°ï¼›</p>
<p>å®Œæ•´çš„codeè§<a href="https://github.com/dennybritz/chatbot-retrieval/blob/master/udc_train.py" target="_blank" rel="external">udc_train.py</a>ã€‚</p>
<h3 id="6-5-åˆ›å»ºæ¨¡å‹"><a href="#6-5-åˆ›å»ºæ¨¡å‹" class="headerlink" title="6.5. åˆ›å»ºæ¨¡å‹"></a>6.5. åˆ›å»ºæ¨¡å‹</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åˆ›å»ºäº†æ¨¡å‹çš„ è¾“å…¥ã€è§£æã€è¯„æµ‹å’Œè®­ç»ƒ çš„æ ·ä¾‹ç¨‹åºã€‚ç°åœ¨æˆ‘ä»¬æ¥å†™ LSTM çš„ç¨‹åºï¼Œcreate_model_fnå‡½æ•° ç”¨ä»¥å¤„ç†ä¸åŒæ ¼å¼çš„è®­ç»ƒå’Œæµ‹è¯•æ•°æ®ï¼›å®ƒçš„è¾“å…¥å‚æ•°ä¸º model_implï¼Œè¿™ä¸ªå‡½æ•°è¡¨ç¤ºå®é™…ä½œå‡ºé¢„æµ‹çš„æ¨¡å‹ï¼Œè¿™é‡Œå°±æ˜¯ç”¨çš„LSTMï¼Œå½“ç„¶ä½ å¯ä»¥æ›¿æ¢æˆä»»æ„çš„å…¶ä»–æ¨¡å‹ã€‚ç¨‹åºå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dual_encoder_model</span><span class="params">(</span><br><span class="line">    hparams,</span><br><span class="line">    mode,</span><br><span class="line">    context,</span><br><span class="line">    context_len,</span><br><span class="line">    utterance,</span><br><span class="line">    utterance_len,</span><br><span class="line">    targets)</span>:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Initialize embedidngs randomly or with pre-trained vectors if available</span></span><br><span class="line">  embeddings_W = get_embeddings(hparams)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Embed the context and the utterance</span></span><br><span class="line">  context_embedded = tf.nn.embedding_lookup(</span><br><span class="line">      embeddings_W, context, name=<span class="string">"embed_context"</span>)</span><br><span class="line">  utterance_embedded = tf.nn.embedding_lookup(</span><br><span class="line">      embeddings_W, utterance, name=<span class="string">"embed_utterance"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Build the RNN</span></span><br><span class="line">  <span class="keyword">with</span> tf.variable_scope(<span class="string">"rnn"</span>) <span class="keyword">as</span> vs:</span><br><span class="line">    <span class="comment"># We use an LSTM Cell</span></span><br><span class="line">    cell = tf.nn.rnn_cell.LSTMCell(</span><br><span class="line">        hparams.rnn_dim,</span><br><span class="line">        forget_bias=<span class="number">2.0</span>,</span><br><span class="line">        use_peepholes=<span class="keyword">True</span>,</span><br><span class="line">        state_is_tuple=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Run the utterance and context through the RNN</span></span><br><span class="line">    rnn_outputs, rnn_states = tf.nn.dynamic_rnn(</span><br><span class="line">        cell,</span><br><span class="line">        tf.concat(<span class="number">0</span>, [context_embedded, utterance_embedded]),</span><br><span class="line">        sequence_length=tf.concat(<span class="number">0</span>, [context_len, utterance_len]),</span><br><span class="line">        dtype=tf.float32)</span><br><span class="line">    encoding_context, encoding_utterance = tf.split(<span class="number">0</span>, <span class="number">2</span>, rnn_states.h)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">with</span> tf.variable_scope(<span class="string">"prediction"</span>) <span class="keyword">as</span> vs:</span><br><span class="line">    M = tf.get_variable(<span class="string">"M"</span>,</span><br><span class="line">      shape=[hparams.rnn_dim, hparams.rnn_dim],</span><br><span class="line">      initializer=tf.truncated_normal_initializer())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># "Predict" a  response: c * M</span></span><br><span class="line">    generated_response = tf.matmul(encoding_context, M)</span><br><span class="line">    generated_response = tf.expand_dims(generated_response, <span class="number">2</span>)</span><br><span class="line">    encoding_utterance = tf.expand_dims(encoding_utterance, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Dot product between generated response and actual response</span></span><br><span class="line">    <span class="comment"># (c * M) * r</span></span><br><span class="line">    logits = tf.batch_matmul(generated_response, encoding_utterance, <span class="keyword">True</span>)</span><br><span class="line">    logits = tf.squeeze(logits, [<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Apply sigmoid to convert logits to probabilities</span></span><br><span class="line">    probs = tf.sigmoid(logits)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Calculate the binary cross-entropy loss</span></span><br><span class="line">    losses = tf.nn.sigmoid_cross_entropy_with_logits(logits, tf.to_float(targets))</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Mean loss across the batch of examples</span></span><br><span class="line">  mean_loss = tf.reduce_mean(losses, name=<span class="string">"mean_loss"</span>)</span><br><span class="line">  <span class="keyword">return</span> probs, mean_loss</span><br></pre></td></tr></table></figure>
<p>å®Œæ•´çš„ç¨‹åºè§ <a href="https://github.com/dennybritz/chatbot-retrieval/blob/master/models/dual_encoder.py" target="_blank" rel="external">dual_encoder.py</a>ã€‚åŸºäºè¿™ä¸ªï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®ä¾‹åŒ– modelå‡½æ•° åœ¨æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ <a href="https://github.com/dennybritz/chatbot-retrieval/blob/master/udc_train.py" target="_blank" rel="external">udc_train.py</a>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model_fn = udc_model.create_model_fn(</span><br><span class="line">  hparams=hparams,</span><br><span class="line">  model_impl=dual_encoder_model)</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è¿è¡Œ udc_train.pyæ–‡ä»¶ï¼Œæ¥å¼€å§‹æ¨¡å‹çš„è®­ç»ƒå’Œè¯„æµ‹äº†ï¼Œä½ å¯ä»¥è®¾å®šâ€“eval_everyå‚æ•° æ¥æ§åˆ¶æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šçš„è¯„æµ‹é¢‘ç‡ã€‚æ›´å¤šçš„å‘½ä»¤è¡Œå‚æ•°ä¿¡æ¯å¯è§ tf.flags å’Œ hparamsï¼Œä½ ä¹Ÿå¯ä»¥è¿è¡Œ python udc_train.py â€“help æ¥æŸ¥çœ‹ã€‚</p>
<p>è¿è¡Œç¨‹åºçš„æ•ˆæœå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">INFO:tensorflow:training step 20200, loss = 0.36895 (0.330 sec/batch).</span><br><span class="line">INFO:tensorflow:Step 20201: mean_loss:0 = 0.385877</span><br><span class="line">INFO:tensorflow:training step 20300, loss = 0.25251 (0.338 sec/batch).</span><br><span class="line">INFO:tensorflow:Step 20301: mean_loss:0 = 0.405653</span><br><span class="line">...</span><br><span class="line">INFO:tensorflow:Results after 270 steps (0.248 sec/batch): recall_at_1 = 0.507581018519, recall_at_2 = 0.689699074074, recall_at_5 = 0.913020833333, recall_at_10 = 1.0, loss = 0.5383</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h3 id="6-6-æ¨¡å‹çš„è¯„æµ‹"><a href="#6-6-æ¨¡å‹çš„è¯„æµ‹" class="headerlink" title="6.6. æ¨¡å‹çš„è¯„æµ‹"></a>6.6. æ¨¡å‹çš„è¯„æµ‹</h3><p>åœ¨è®­ç»ƒå®Œæ¨¡å‹åï¼Œä½ å¯ä»¥å°†å…¶åº”ç”¨åœ¨ <strong>æµ‹è¯•é›†</strong> ä¸Šï¼Œä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python udc_test.py --model_dir=$MODEL_DIR_FROM_TRAINING</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python udc_test.py --model_dir=~/github/chatbot-retrieval/runs/<span class="number">1467389151</span></span><br></pre></td></tr></table></figure>
<p>è¿™å°†å¾—åˆ°æ¨¡å‹åœ¨ <strong>æµ‹è¯•é›†</strong> ä¸Šçš„ recall@k çš„ç»“æœï¼Œæ³¨æ„åœ¨ä½¿ç”¨ udc_test.pyæ–‡ä»¶ æ—¶ï¼Œéœ€è¦ä½¿ç”¨ä¸è®­ç»ƒæ—¶ç›¸åŒçš„å‚æ•°ã€‚</p>
<p>åœ¨è®­ç»ƒæ¨¡å‹çš„æ¬¡æ•°å¤§çº¦ <strong>2w</strong> æ¬¡æ—¶(åœ¨GPUä¸Šå¤§çº¦èŠ±è´¹1å°æ—¶)ï¼Œæ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šå¾—åˆ°å¦‚ä¸‹çš„ç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">recall_at_1 = 0.507581018519</span><br><span class="line">recall_at_2 = 0.689699074074</span><br><span class="line">recall_at_5 = 0.913020833333</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œrecall@1çš„å€¼ä¸tfidfæ¨¡å‹çš„å·®ä¸å¤šï¼Œä½†æ˜¯recall@2å’Œrecall@5çš„å€¼åˆ™æ¯”tfidfæ¨¡å‹çš„ç»“æœå¥½å¤ªå¤šã€‚åŸè®ºæ–‡ä¸­çš„ç»“æœä¾æ¬¡æ˜¯0.55,0.72å’Œ0.92ï¼Œå¯èƒ½é€šè¿‡æ¨¡å‹è°ƒå‚æˆ–è€…é¢„å¤„ç†èƒ½å¤Ÿè¾¾åˆ°è¿™ä¸ªç»“æœã€‚</p>
<h3 id="6-7-ä½¿ç”¨æ¨¡å‹è¿›è¡Œé¢„æµ‹"><a href="#6-7-ä½¿ç”¨æ¨¡å‹è¿›è¡Œé¢„æµ‹" class="headerlink" title="6.7. ä½¿ç”¨æ¨¡å‹è¿›è¡Œé¢„æµ‹"></a>6.7. ä½¿ç”¨æ¨¡å‹è¿›è¡Œé¢„æµ‹</h3><p>å¯¹äºæ–°çš„æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/dennybritz/chatbot-retrieval/blob/master/udc_predict.py" target="_blank" rel="external">udc_predict.py</a> æ¥è¿›è¡Œé¢„æµ‹ï¼›ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python udc_predict.py --model_dir=./runs/<span class="number">1467576365</span>/</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Context: Example context</span><br><span class="line">Response 1: 0.44806</span><br><span class="line">Response 2: 0.481638</span><br></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥ä»å€™é€‰çš„å›å¤ä¸­ï¼Œé€‰æ‹©é¢„æµ‹åˆ†å€¼æœ€é«˜çš„é‚£ä¸ªä½œä¸ºå›å¤ã€‚</p>
<h3 id="6-8-æ€»ç»“"><a href="#6-8-æ€»ç»“" class="headerlink" title="6.8. æ€»ç»“"></a>6.8. æ€»ç»“</h3><p>è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåŸºäºæ£€ç´¢çš„ NNæ¨¡å‹ï¼Œå®ƒèƒ½å¤Ÿå¯¹å€™é€‰çš„å›å¤è¿›è¡Œé¢„æµ‹å’Œæ‰“åˆ†ï¼Œé€šè¿‡è¾“å‡ºåˆ†å€¼æœ€é«˜ï¼ˆæˆ–è€…æ»¡è¶³ä¸€å®šé˜ˆå€¼ï¼‰çš„å€™é€‰å›å¤å·²å®ŒæˆèŠå¤©çš„è¿‡ç¨‹ã€‚åç»­å¯ä»¥å°è¯•å…¶ä»–æ›´å¥½çš„æ¨¡å‹ï¼Œæˆ–è€…é€šè¿‡è°ƒå‚æ¥å–å¾—æ›´å¥½çš„å®éªŒç»“æœã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://chatterbot.readthedocs.io/en/stable/" target="_blank" rel="external">About ChatterBot</a></li>
<li><a href="http://www.wildml.com/2016/04/deep-learning-for-chatbots-part-1-introduction/" target="_blank" rel="external">2016 Google Brain deep-learning-for-chatbots-part-1-introduction, wildml blog</a></li>
<li><a href="http://www.wildml.com/2016/07/deep-learning-for-chatbots-2-retrieval-based-model-tensorflow/" target="_blank" rel="external">2016 Google Brain deep-learning-for-chatbots-2-retrieval-based-model-tensorflow, wildml blog</a></li>
<li><a href="http://www.jeyzhang.com/deep-learning-for-chatbots-2.html" target="_blank" rel="external">èŠå¤©æœºå™¨äººä¸­çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯ä¹‹äºŒï¼šåŸºäºæ£€ç´¢æ¨¡å‹çš„å®ç°</a></li>
<li><a href="http://www.jeyzhang.com/deep-learning-for-chatbots-1.html" target="_blank" rel="external">èŠå¤©æœºå™¨äººä¸­çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯ä¹‹ä¸€ï¼šå¯¼è¯»</a></li>
<li><a href="http://www.cnblogs.com/LittleHann/p/6426610.html" target="_blank" rel="external">Tensorflowæä¸€ä¸ªèŠå¤©æœºå™¨äºº</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/27285330" target="_blank" rel="external">Ericï¼ŒåŸºäºå¤šæœç´¢å¼•æ“çš„è‡ªåŠ¨é—®ç­”æœºå™¨äºº</a></li>
<li><a href="https://my.oschina.net/apdplat/blog/401622" target="_blank" rel="external">æµ‹è¯•äººæœºé—®ç­”ç³»ç»Ÿæ™ºèƒ½æ€§çš„3760ä¸ªé—®é¢˜</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/25749274" target="_blank" rel="external">ä¸­å›½ç‰ˆçš„èŠå¤©æœºå™¨äººåœ°å›¾ Chatbots Landscape</a></li>
<li><a href="https://blog.csdn.net/SunJW_2017/article/details/82494360" target="_blank" rel="external">æ¡ä»¶éšæœºåœºç®€ä»‹</a></li>
<li><a href="https://blog.csdn.net/SunJW_2017/article/details/82460284" target="_blank" rel="external">çŸ¥è¯†å›¾è°±å­¦ä¹ ç³»åˆ—ä¹‹äºŒï¼šå‘½åå®ä½“è¯†åˆ«1ï¼ˆæŠ€æœ¯åŠä»£ç ï¼‰</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 4 - æ·±åº¦å­¦ä¹ çŸ¥è¯†å›é¡¾]]></title>
      <url>http://shopee.ai/2017/08/14/chatbot/chatbot-research4/</url>
      <content type="html"><![CDATA[<p>è¯¥ç¯‡ä¸»è¦ä»‹ç»ä¸€äº› RNNã€LSTM ç­‰æ·±åº¦å­¦ä¹ çŸ¥è¯†ã€‚  <a href="/deeplearning/#5-Sequence-Models">è¯¦æƒ…è¯·æˆ³</a></p>
<a id="more"></a>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://github.com/Conchylicultor/DeepQA" target="_blank" rel="external">2015 DeepQA</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 3 - æœºå™¨å­¦ä¹ æ„å»º chatbot]]></title>
      <url>http://shopee.ai/2017/08/13/chatbot/chatbot-research3/</url>
      <content type="html"><![CDATA[<p>Chatterbot èŠå¤©æœºå™¨äººæ¡†æ¶</p>
<p>æ£€ç´¢ä¸åŒ¹é… &amp; åˆ†ç±»ä¸æœ´ç´ è´å¶æ–¯</p>
<a id="more"></a>
<p><strong>å…³äºèŠå¤©æœºå™¨äººçš„æ€è€ƒ</strong> </p>
<ol>
<li>å·¥ç¨‹è€ƒé‡</li>
<li>æœºå™¨å­¦ä¹ è§’åº¦è€ƒè™‘</li>
</ol>
<p><strong>é¢„å¤‡çŸ¥è¯†</strong> </p>
<ol>
<li>æ£€ç´¢ä¸åŒ¹é…</li>
<li>åˆ†ç±»ä¸æœ´ç´ è´å¶æ–¯</li>
</ol>
<p><strong>chatterbot</strong> </p>
<ol>
<li>æ¶æ„ä¸ä½¿ç”¨æ–¹æ³• </li>
<li>æºç åˆ†æ</li>
</ol>
<h2 id="1-ä¼ ç»ŸèŠå¤©æœºå™¨äºº"><a href="#1-ä¼ ç»ŸèŠå¤©æœºå™¨äºº" class="headerlink" title="1. ä¼ ç»ŸèŠå¤©æœºå™¨äºº"></a>1. ä¼ ç»ŸèŠå¤©æœºå™¨äºº</h2><p>NLP åŸºç¡€çŸ¥è¯†   </p>
<blockquote>
<ol>
<li>åŸºæœ¬åˆ†è¯ (jieba)</li>
<li>å…³é”®è¯æŠ½å– (tf-idfç­‰)   </li>
<li>æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…   </li>
<li>â€¦</li>
</ol>
</blockquote>
<p>Machine Learningç›¸å…³çŸ¥è¯†   </p>
<blockquote>
<ol>
<li>æ–‡æœ¬è¡¨ç¤ºä¸åŒ¹é…   </li>
<li>åˆ†ç±» (æ–‡æœ¬åœºæ™¯åˆ†æ)   </li>
<li>æ•°æ®é©±åŠ¨ (ç‰¹å¾å·¥ç¨‹)</li>
<li>â€¦</li>
</ol>
</blockquote>
<h2 id="2-èŠå¤©æœºå™¨äººçš„ä¸€äº›æ€è€ƒ"><a href="#2-èŠå¤©æœºå™¨äººçš„ä¸€äº›æ€è€ƒ" class="headerlink" title="2. èŠå¤©æœºå™¨äººçš„ä¸€äº›æ€è€ƒ"></a>2. èŠå¤©æœºå™¨äººçš„ä¸€äº›æ€è€ƒ</h2><p>å·¥ç¨‹è€ƒé‡</p>
<blockquote>
<ul>
<li>æ¶æ„è®¾è®¡æ¸…æ™°ã€æ¨¡å—åŒ–</li>
<li>åŠŸèƒ½åˆ†æ‹†ï¼Œè§£è€¦ï¼Œéƒ¨ä»¶å¯æ’æ‹”ä¸æ‰©å±•</li>
</ul>
</blockquote>
<p><img src="/images/chatbot/chatbot-3_1.jpg" width="600"></p>
<p>ç®—æ³•ä¸æœºå™¨å­¦ä¹ è§’åº¦è€ƒé‡</p>
<blockquote>
<ul>
<li>ç®—æ³•ç®€å•ï¼Œæ•°æ®(ç‰¹å¾)é©±åŠ¨   </li>
<li>åœºæ™¯åŒ–ä¸å‚ç›´é¢†åŸŸ</li>
</ul>
</blockquote>
<h2 id="3-é¢„å¤‡çŸ¥è¯†"><a href="#3-é¢„å¤‡çŸ¥è¯†" class="headerlink" title="3. é¢„å¤‡çŸ¥è¯†"></a>3. é¢„å¤‡çŸ¥è¯†</h2><p><strong>åŸºäºæ£€ç´¢ä¸åŒ¹é…</strong>   </p>
<blockquote>
<ul>
<li>çŸ¥è¯†åº“ (å­˜å‚¨äº†é—®é¢˜ä¸å›å¤å†…å®¹)   </li>
<li>æ£€ç´¢: æœå¯»ç›¸å…³é—®é¢˜   </li>
<li>åŒ¹é…: å¯¹ç»“æœè¿›è¡Œæ’åº</li>
</ul>
</blockquote>
<p><strong>ç¼–è¾‘è·ç¦»</strong></p>
<blockquote>
<p>ç¼–è¾‘è·ç¦»/Levenshteinè·ç¦»ï¼Œæ˜¯æŒ‡ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´ï¼Œç”±ä¸€ä¸ªè½¬æˆå¦ä¸€ä¸ªæ‰€éœ€è¦çš„æœ€å°‘ç¼–è¾‘æ“ä½œæ¬¡æ•°ã€‚</p>
<p>é€’å½’ &amp; åŠ¨æ€è§„åˆ’ DP</p>
</blockquote>
<p>TFIDF</p>
<blockquote>
<p>QA pair çš„ TFIDF çš„ç›¸è¿‘åº¦</p>
<p>S1: â€œä½ å–œæ¬¢ä»€ä¹ˆä¹¦â€<br>S2: â€œä½ å–œæ¬¢ä»€ä¹ˆç”µå½±â€</p>
</blockquote>
<p>python ç¼–è¾‘è·ç¦»</p>
<blockquote>
<p>Pythonåœ¨string ç±»å‹ä¸­ï¼Œé»˜è®¤çš„ utf-8 ç¼–ç ä¸‹ï¼Œä¸€ä¸ªä¸­æ–‡å­—ç¬¦æ˜¯ç”¨ä¸‰ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºçš„ã€‚ç”¨unicodeã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> Levenshtein</span><br><span class="line"></span><br><span class="line">texta = <span class="string">"uå…³é”®æ—¶åˆ»"</span></span><br><span class="line">textb = <span class="string">"uå…³é”®Â·æ—¶åˆ»"</span></span><br><span class="line"></span><br><span class="line">print(Levenshtein.distance(texta,textb)) <span class="comment"># 1</span></span><br></pre></td></tr></table></figure>
<h2 id="4-Chatterbot-èŠå¤©æœºå™¨äºº"><a href="#4-Chatterbot-èŠå¤©æœºå™¨äºº" class="headerlink" title="4. Chatterbot èŠå¤©æœºå™¨äºº"></a>4. Chatterbot èŠå¤©æœºå™¨äºº</h2><p><img src="/images/chatbot/chatbot-3_2.jpg" width="700"></p>
<p><strong>æ¯ä¸ªéƒ¨åˆ†éƒ½è®¾è®¡äº†ä¸åŒçš„ â€œé€‚é…å™¨â€(Adapter)</strong>  </p>
<p><strong>æœºå™¨äººåº”ç­”é€»è¾‘ =&gt; Logic Adapters</strong></p>
<blockquote>
<ul>
<li>Closest Match Adapter<br> å­—ç¬¦ä¸²æ¨¡ç³ŠåŒ¹é…(ç¼–è¾‘è·ç¦»)</li>
<li>Closest Meaning Adapter<br> å€ŸåŠ© nltk çš„ WordNetï¼Œè¿‘ä¹‰è¯è¯„ä¼°</li>
<li>Time Logic Adapter<br> å¤„ç†æ¶‰åŠæ—¶é—´çš„æé—®</li>
<li>Mathematical Evaluation Adapter    æ¶‰åŠæ•°å­¦è¿ç®—</li>
</ul>
</blockquote>
<p><strong>å­˜å‚¨å™¨åç«¯ =&gt; Storage Adapters</strong></p>
<blockquote>
<ul>
<li>Read Only Mode<br>åªè¯»æ¨¡å¼ï¼Œå½“æœ‰è¾“å…¥æ•°æ®åˆ° chatterbot çš„æ—¶å€™ï¼Œæ•°æ®åº“å¹¶ä¸ä¼šå‘ç”Ÿæ”¹å˜</li>
<li>Json Database Adapter<br>ç”¨ä»¥å­˜å‚¨å¯¹è¯æ•°æ®çš„æ¥å£ï¼Œå¯¹è¯æ•°æ®ä»¥ Jsonæ ¼å¼ è¿›è¡Œå­˜å‚¨. (è½½å…¥æ•°æ®ç‰¹åˆ«æ…¢ï¼Œå·¥ä¸šç•Œä¸å¯è¡Œ)</li>
<li>Mongo Database Adapter<br>ä»¥ MongoDB database æ–¹å¼æ¥å­˜å‚¨å¯¹è¯æ•°æ®</li>
</ul>
</blockquote>
<p><strong>è¾“å…¥å½¢å¼ =&gt; Input Adapters</strong></p>
<blockquote>
<ul>
<li>Variable input type adapter<br> å…è®¸ chatterbot æ¥æ”¶ä¸åŒç±»å‹çš„è¾“å…¥çš„ï¼Œå¦‚ strings, dictionaries å’ŒStatements   </li>
<li>Terminal adapter<br> ä½¿å¾— ChatterBot å¯ä»¥é€šè¿‡ç»ˆç«¯è¿›è¡Œå¯¹è¯   </li>
<li>Speech recognition<br> è¯­éŸ³è¯†åˆ«è¾“å…¥ï¼Œè¯¦è§ chatterbot-voice</li>
</ul>
</blockquote>
<h2 id="5-Bayes-åˆ†ç±»"><a href="#5-Bayes-åˆ†ç±»" class="headerlink" title="5. Bayes åˆ†ç±»"></a>5. Bayes åˆ†ç±»</h2><p><strong>é¢„å¤‡çŸ¥è¯†:åœºæ™¯åˆ†ç±»ä¸NB</strong></p>
<p><img src="/images/chatbot/chatbot-3_3.png" width="400"></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://github.com/gunthercox/ChatterBot" target="_blank" rel="external">github ChatterBot</a></li>
<li><a href="https://chatterbot.readthedocs.io/en/stable/" target="_blank" rel="external">Docs Â» About ChatterBot</a></li>
<li><a href="https://blog.xiaoquankong.ai/ä½¿ç”¨chatterbotæ„å»ºè‡ªå·±çš„ä¸­æ–‡chat(é—²èŠ)æœºå™¨äºº/" target="_blank" rel="external">ä½¿ç”¨chatterbotæ„å»ºè‡ªå·±çš„ä¸­æ–‡chat(é—²èŠ)æœºå™¨äºº/</a></li>
<li><a href="https://www.cnblogs.com/LHWorldBlog/p/9292024.html" target="_blank" rel="external">è‡ªç„¶è¯­è¨€å¤„ç† ChatterbotèŠå¤©æœºå™¨äºº</a></li>
<li><a href="https://blog.csdn.net/qifengzou/article/details/77126933" target="_blank" rel="external">ç²¾å“: å¼€æºChatterBotå·¥ä½œåŸç†</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 2 - NLPåŸºç¡€çŸ¥è¯†å›é¡¾]]></title>
      <url>http://shopee.ai/2017/08/12/chatbot/chatbot-research2/</url>
      <content type="html"><![CDATA[<p><a href="http://pypi.python.org/pypi/nltk" target="_blank" rel="external">NLTK</a> Pythonä¸Šè‘—åçš„è‡ªç„¶è¯­è¨€å¤„ç†åº“ã€‚ </p>
<ul>
<li>è‡ªå¸¦è¯­æ–™åº“ï¼Œè¯æ€§åˆ†ç±»åº“ï¼Œ è¿˜æœ‰å¼ºå¤§çš„ç¤¾åŒºæ”¯æŒã€‚</li>
</ul>
<a id="more"></a>
<p><strong>æ–‡æœ¬å¤„ç†æµç¨‹</strong></p>
<ul>
<li>åˆ†è¯</li>
<li>å½’ä¸€åŒ– </li>
<li>åœæ­¢è¯</li>
</ul>
<p><strong>NLPç»å…¸ä¸‰æ¡ˆä¾‹ </strong></p>
<ul>
<li>æƒ…æ„Ÿåˆ†æ</li>
<li>æ–‡æœ¬ç›¸ä¼¼åº¦</li>
<li>æ–‡æœ¬åˆ†ç±»</li>
</ul>
<blockquote>
<p>æ–¯å¦ä½› CoreNLP (è‹±æ–‡ã€ä¸­æ–‡ã€è¥¿ç­ç‰™è¯­)</p>
</blockquote>
<h2 id="1-NLTK"><a href="#1-NLTK" class="headerlink" title="1. NLTK"></a>1. NLTK</h2><ol>
<li>Python è‘—åçš„è‡ªç„¶è¯­è¨€å¤„ç†åº“</li>
<li>è‡ªå¸¦è¯­æ–™åº“ã€è¯æ€§åˆ†ç±»åº“</li>
<li>è‡ªå¸¦åˆ†ç±»ã€åˆ†è¯ ç­‰åŠŸèƒ½</li>
<li>å¼ºå¤§çš„ç¤¾åŒºæ”¯æŒ</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pip install -U nltk</span><br><span class="line">sudo pip install -U numpy</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> nltk</span><br><span class="line">nltk.download()</span><br></pre></td></tr></table></figure>
<!--<img src="/images/chatbot/chatbot-2_1.png" width="400" />
-->
<p>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>python</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br></pre></td></tr></table></figure>
<h2 id="2-åŠŸèƒ½ä¸€è§ˆè¡¨"><a href="#2-åŠŸèƒ½ä¸€è§ˆè¡¨" class="headerlink" title="2. åŠŸèƒ½ä¸€è§ˆè¡¨"></a>2. åŠŸèƒ½ä¸€è§ˆè¡¨</h2><p><img src="/images/chatbot/chatbot-2_2.png" width="800"></p>
<p><strong>NLTK è‡ªå¸¦è¯­æ–™åº“</strong></p>
<p><img src="/images/chatbot/chatbot-2_3.png" width="600"></p>
<h2 id="3-Tokenize"><a href="#3-Tokenize" class="headerlink" title="3. Tokenize"></a>3. Tokenize</h2><p><strong>tokenize æŠŠé•¿å¥å­æ‹†æˆæœ‰â€œæ„ä¹‰â€çš„å°éƒ¨ä»¶</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk<span class="meta">&gt;&gt;&gt; </span>sentence = â€œhello, world<span class="string">"&gt;&gt;&gt; tokens = nltk.word_tokenize(sentence)&gt;&gt;&gt; tokens['hello', â€˜,', 'world']</span></span><br></pre></td></tr></table></figure>
<p><strong>ä¸­æ–‡åˆ†è¯ jieba</strong> (ç¬¬ä¸‰æ–¹å¼€æºåº“)</p>
<p><img src="/images/chatbot/chatbot-2_4.png" width="780"></p>
<p><strong>æœ‰æ—¶å€™tokenizeæ²¡é‚£ä¹ˆç®€å•</strong></p>
<blockquote>
<p>æ¯”å¦‚ç¤¾äº¤ç½‘ç»œä¸Š,è¿™äº›ä¹±ä¸ƒå…«ç³Ÿçš„ä¸åˆè¯­æ³•ä¸åˆæ­£å¸¸é€»è¾‘çš„è¯­è¨€å¾ˆå¤š:<br>æ‹¯æ•‘ @æŸäºº, è¡¨æƒ…ç¬¦å·, URL, #è¯é¢˜ç¬¦å·</p>
</blockquote>
<p><img src="/images/chatbot/chatbot-2_5.png" width="650"></p>
<p><strong>ç¤¾äº¤ç½‘ç»œè¯­è¨€çš„tokenize :</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> nltk.tokenize <span class="keyword">import</span> word_tokenizetweet = <span class="string">'RT @angelababy: love you baby! :D http://ah.love #168cm'</span>print(word_tokenize(tweet))</span><br></pre></td></tr></table></figure>
<p><img src="/images/chatbot/chatbot-2_6.png" width="880"></p>
<p><a href="http://www.regexlab.com/zh/regref.htm" target="_blank" rel="external">æ­£åˆ™è¡¨è¾¾å¼å¯¹ç…§è¡¨</a></p>
<h2 id="4-è¯å½¢å½’ä¸€åŒ–"><a href="#4-è¯å½¢å½’ä¸€åŒ–" class="headerlink" title="4. è¯å½¢å½’ä¸€åŒ–"></a>4. è¯å½¢å½’ä¸€åŒ–</h2><p>Inflectionå˜åŒ–: walk =&gt; walking =&gt; walked ä¸å½±å“è¯æ€§</p>
<p>derivation å¼•ç”³: nation (noun) =&gt; national (adjective) =&gt; nationalize (verb) å½±å“è¯æ€§</p>
<p>Stemming è¯å¹²æå–:ä¸€èˆ¬æ¥è¯´ï¼Œå°±æ˜¯æŠŠä¸å½±å“è¯æ€§çš„inflectionçš„å°å°¾å·´ç æ‰</p>
<blockquote>
<p>walking ç ing = walk<br>walked ç ed = walk</p>
</blockquote>
<p>Lemmatization è¯å½¢å½’ä¸€:æŠŠå„ç§ç±»å‹çš„è¯çš„å˜å½¢ï¼Œéƒ½å½’ä¸ºä¸€ä¸ªå½¢å¼ </p>
<blockquote>
<p>went å½’ä¸€ = go<br>are å½’ä¸€ = be</p>
</blockquote>
<h3 id="4-1-Stemming"><a href="#4-1-Stemming" class="headerlink" title="4.1 Stemming"></a>4.1 Stemming</h3><ol>
<li>PorterStemmer</li>
<li>SnowballStemmer</li>
<li>LancasterStemmer</li>
<li>PorterStemmer</li>
</ol>
<p><strong>PorterStemmer</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> nltk.stem.porter <span class="keyword">import</span> PorterStemmer<span class="meta">&gt;&gt;&gt; </span>porter_stemmer = PorterStemmer()<span class="meta">&gt;&gt;&gt; </span>porter_stemmer.stem(â€˜maximumâ€™)uâ€™maximumâ€™<span class="meta">&gt;&gt;&gt; </span>porter_stemmer.stem(â€˜presumablyâ€™)uâ€™presumâ€™</span><br></pre></td></tr></table></figure>
<p><strong>LancasterStemmer</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> nltk.stem.lancaster <span class="keyword">import</span> LancasterStemmer</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lancaster_stemmer = LancasterStemmer()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lancaster_stemmer.stem(â€˜maximumâ€™)</span><br><span class="line">â€˜maximâ€™</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lancaster_stemmer.stem(â€˜presumablyâ€™)</span><br><span class="line">â€˜presumâ€™</span><br></pre></td></tr></table></figure>
<h3 id="4-2-Lemmatization"><a href="#4-2-Lemmatization" class="headerlink" title="4.2 Lemmatization"></a>4.2 Lemmatization</h3><p>è¯å½¢å½’ä¸€ï¼š æŠŠå„ç§ç±»å‹çš„è¯çš„å˜å½¢,éƒ½å½’ä¸ºä¸€ä¸ªå½¢å¼ </p>
<p>went å½’ä¸€ = go<br>are å½’ä¸€ = be</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> nltk.stem <span class="keyword">import</span> WordNetLemmatizer<span class="meta">&gt;&gt;&gt; </span>wordnet_lemmatizer = WordNetLemmatizer()<span class="meta">&gt;&gt;&gt; </span>wordnet_lemmatizer.lemmatize(â€˜dogsâ€™)uâ€™dogâ€™<span class="meta">&gt;&gt;&gt; </span>wordnet_lemmatizer.lemmatize(â€˜churchesâ€™)uâ€™churchâ€™<span class="meta">&gt;&gt;&gt; </span>wordnet_lemmatizer.lemmatize(â€˜aardwolvesâ€™)uâ€™aardwolfâ€™</span><br></pre></td></tr></table></figure>
<p>NLTKæ›´å¥½åœ°å®ç°Lemma</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># â½Šæœ¨æœ‰POS Tag,é»˜è®¤æ˜¯NN åè¯</span><span class="meta">&gt;&gt;&gt; </span>wordnet_lemmatizer.lemmatize(â€˜areâ€™) <span class="comment"># â€˜areâ€™</span><span class="meta">&gt;&gt;&gt; </span>wordnet_lemmatizer.lemmatize(â€˜<span class="keyword">is</span>â€™)  <span class="comment"># â€˜isâ€™</span><span class="comment"># åŠ ä¸ŠPOS Tag</span><span class="meta">&gt;&gt;&gt; </span>wordnet_lemmatizer.lemmatize(â€˜<span class="keyword">is</span>â€™, pos=â€™vâ€™)  <span class="comment"># uâ€™beâ€™</span><span class="meta">&gt;&gt;&gt; </span>wordnet_lemmatizer.lemmatize(â€˜areâ€™, pos=â€™vâ€™) <span class="comment"># uâ€™beâ€™</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-NLTK-æ ‡æ³¨-POS-Tag"><a href="#4-3-NLTK-æ ‡æ³¨-POS-Tag" class="headerlink" title="4.3 NLTK æ ‡æ³¨ POS Tag"></a>4.3 NLTK æ ‡æ³¨ POS Tag</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk<span class="meta">&gt;&gt;&gt; </span>text = nltk.word_tokenize(<span class="string">'what does the fox say'</span>)<span class="meta">&gt;&gt;&gt; </span>text[<span class="string">'what'</span>, <span class="string">'does'</span>, <span class="string">'the'</span>, <span class="string">'fox'</span>, <span class="string">'say'</span>]<span class="meta">&gt;&gt;&gt; </span>nltk.pos_tag(text)[(<span class="string">'what'</span>, <span class="string">'WDT'</span>), (<span class="string">'does'</span>, <span class="string">'VBZ'</span>), (<span class="string">'the'</span>, <span class="string">'DT'</span>), (<span class="string">'fox'</span>, <span class="string">'NNS'</span>), (<span class="string">'say'</span>, <span class="string">'VBP'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="5-Stopwords"><a href="#5-Stopwords" class="headerlink" title="5. Stopwords"></a>5. Stopwords</h2><p>ä¸€åƒä¸ª He æœ‰ä¸€åƒç§æŒ‡ä»£</p>
<p>ä¸€åƒä¸ª The æœ‰ä¸€åƒç§æŒ‡äº‹ å¯¹äºæ³¨é‡ç†è§£æ–‡æœ¬ã€æ„æ€ã€çš„åº”ç”¨åœºæ™¯æ¥è¯´</p>
<p>å…¨ä½“stopwordsåˆ—è¡¨ <a href="http://www.ranks.nl/stopwords" target="_blank" rel="external">http://www.ranks.nl/stopwords</a></p>
<p><strong>å»é™¤ stopwords</strong></p>
<blockquote>
<p>é¦–å…ˆè®°å¾—åœ¨consoleé‡Œé¢ä¸‹è½½ä¸€ä¸‹è¯åº“ï¼Œ æˆ–è€… nltk.download(â€˜stopwordsâ€™)</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> nltk</span><br><span class="line"><span class="keyword">from</span> nltk.corpus <span class="keyword">import</span> stopwords </span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ˆtokenâ¼€ä¸€æŠŠ,å¾—åˆ°â¼€ä¸€ä¸ªword_list</span></span><br><span class="line"></span><br><span class="line">word_list = nltk.word_tokenize(<span class="string">'what does the fox say'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç„¶åfilterâ¼€ä¸€æŠŠ</span></span><br><span class="line"></span><br><span class="line">filtered_words = [word <span class="keyword">for</span> word <span class="keyword">in</span> word_list <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> stopwords.words(<span class="string">'english'</span>)]</span><br><span class="line"></span><br><span class="line">filtered_words</span><br></pre></td></tr></table></figure>
<h2 id="6-æ–‡æœ¬é¢„å¤„ç†æµæ°´çº¿"><a href="#6-æ–‡æœ¬é¢„å¤„ç†æµæ°´çº¿" class="headerlink" title="6. æ–‡æœ¬é¢„å¤„ç†æµæ°´çº¿"></a>6. æ–‡æœ¬é¢„å¤„ç†æµæ°´çº¿</h2><p>ä¸€æ¡typicalçš„æ–‡æœ¬é¢„å¤„ç†æµæ°´çº¿</p>
<p><img src="/images/chatbot/chatbot-2_8.png" width="320"></p>
<p>æ–‡æœ¬é¢„å¤„ç†è®©æˆ‘ä»¬å¾—åˆ°äº†ä»€ä¹ˆ?</p>
<p><img src="/images/chatbot/chatbot-2_9.png" width="320"></p>
<h2 id="7-NLPä¸Šçš„ç»å…¸åº”ç”¨"><a href="#7-NLPä¸Šçš„ç»å…¸åº”ç”¨" class="headerlink" title="7. NLPä¸Šçš„ç»å…¸åº”ç”¨"></a>7. NLPä¸Šçš„ç»å…¸åº”ç”¨</h2><p>æƒ…æ„Ÿåˆ†æ ã€ æ–‡æœ¬ç›¸ä¼¼åº¦ ã€ æ–‡æœ¬åˆ†ç±»</p>
<h3 id="7-1-æƒ…æ„Ÿåˆ†æ"><a href="#7-1-æƒ…æ„Ÿåˆ†æ" class="headerlink" title="7.1 æƒ…æ„Ÿåˆ†æ"></a>7.1 æƒ…æ„Ÿåˆ†æ</h3><p><img src="/images/chatbot/chatbot-2_10.png" width="720"></p>
<p>å“ªäº›æ˜¯å¤¸ä½ ï¼Ÿå“ªäº›æ˜¯é»‘ä½ ï¼Ÿ</p>
<p><strong>MLçš„æƒ…æ„Ÿåˆ†æ</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> nltk.classify <span class="keyword">import</span> NaiveBayesClassifier<span class="comment"># éšâ¼¿æ‰‹é€ ç‚¹è®­ç»ƒé›†</span>s1 = <span class="string">'this is a good book'</span>s2 = <span class="string">'this is a awesome book'</span>s3 = <span class="string">'this is a bad book'</span>s4 = <span class="string">'this is a terrible book'</span><span class="function"><span class="keyword">def</span> <span class="title">preprocess</span><span class="params">(s)</span>:</span> <span class="comment"># Func: å¥â¼¦å¤„ç†</span><span class="comment"># è¿™â¾¥ç®€å•çš„â½¤äº†ï¦ºsplit(), æŠŠå¥å­ä¸­æ¯ä¸ªå•è¯åˆ†å¼€ # æ˜¾ç„¶ è¿˜æœ‰æ›´å¤šçš„processing methodå¯ä»¥â½¤ </span></span><br><span class="line">    <span class="keyword">return</span> &#123;word: <span class="keyword">True</span> <span class="keyword">for</span> word <span class="keyword">in</span> s.lower().split()&#125;<span class="comment"># returné•¿è¿™æ ·:</span><span class="comment"># &#123;'this': True, 'is':True, 'a':True, 'good':True, 'book':True&#125; # å…¶ä¸­, å‰â¼€ä¸€ä¸ªå«fname, å¯¹åº”æ¯ä¸ªå‡ºç°çš„æ–‡æœ¬å•è¯;</span><span class="comment"># åâ¼€ä¸€ä¸ªå«fval, æŒ‡çš„æ˜¯æ¯ä¸ªâ½‚æ–‡æœ¬å•è¯å¯¹åº”çš„å€¼ã€‚</span><span class="comment"># è¿™â¾¥é‡Œï§©æˆ‘ä»¬â½¤ç”¨æœ€ç®€å•çš„True,æ¥è¡¨ç¤º,è¿™ä¸ªè¯ã€å‡ºç°åœ¨å½“å‰çš„å¥ï¤†â¼¦å­ä¸­ã€çš„æ„ä¹‰ã€‚</span><span class="comment"># å½“ç„¶å•¦, æˆ‘ä»¬ä»¥åå¯ä»¥å‡çº§è¿™ä¸ªâ½…æ–¹ç¨‹, è®©å®ƒå¸¦æœ‰æ›´ï¤åŠ â½œç‰›é€¼çš„fval, æ¯”å¦‚ word2vec</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠŠè®­ç»ƒé›†ç»™åšæˆæ ‡å‡†å½¢å¼</span>training_data = [[preprocess(s1), <span class="string">'pos'</span>],                 [preprocess(s2), <span class="string">'pos'</span>],                 [preprocess(s3), <span class="string">'neg'</span>],                 [preprocess(s4), <span class="string">'neg'</span>]]<span class="comment"># å–‚ç»™modelåƒ</span>model = NaiveBayesClassifier.train(training_data)<span class="comment"># æ‰“å‡ºç»“æœ</span>print(model.classify(preprocess(<span class="string">'this is a good book'</span>)))</span><br></pre></td></tr></table></figure>
<h3 id="7-2-æ–‡æœ¬ç›¸ä¼¼åº¦"><a href="#7-2-æ–‡æœ¬ç›¸ä¼¼åº¦" class="headerlink" title="7.2 æ–‡æœ¬ç›¸ä¼¼åº¦"></a>7.2 æ–‡æœ¬ç›¸ä¼¼åº¦</h3><p><strong>Frequency é¢‘ç‡ç»Ÿè®¡</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> nltk</span><br><span class="line"><span class="keyword">from</span> nltk <span class="keyword">import</span> FreqDist</span><br><span class="line"><span class="comment"># åšä¸ªè¯åº“å…ˆ</span></span><br><span class="line">corpus = <span class="string">'this is my sentence '</span> \</span><br><span class="line">           <span class="string">'this is my life '</span> \</span><br><span class="line">           <span class="string">'this is the day'</span></span><br><span class="line"><span class="comment"># éšä¾¿tokenizeä¸€ä¸‹, æ˜¾ç„¶, æ­£å¦‚ä¸Šæ–‡æåˆ°,</span></span><br><span class="line"><span class="comment"># è¿™ï§©å¯ä»¥æ ¹æ®éœ€è¦åšä»»ä½•çš„preprocessing:  stopwords, lemma, stemming, etc.</span></span><br><span class="line"><span class="comment"># å€Ÿâ½¤NLTKçš„FreqDistç»Ÿè®¡â¼€ä¸‹â½‚å­—å‡ºç°çš„é¢‘ç‡ fdist = FreqDist(tokens)</span></span><br><span class="line"><span class="comment"># å®ƒå°±ç±»ä¼¼äºâ¼€ä¸ªDic,  å¸¦ä¸ŠæŸä¸ªå•è¯, å¯ä»¥çœ‹åˆ°å®ƒåœ¨æ•´ä¸ªæ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">tokens = nltk.word_tokenize(corpus) </span><br><span class="line">print(tokens)</span><br><span class="line"><span class="comment"># å¾—åˆ° token å¥½çš„ word list</span></span><br><span class="line"><span class="comment"># ['this', 'is', 'my', 'sentence',</span></span><br><span class="line"><span class="comment"># 'this', 'is', 'my', 'life', 'this', # 'is', 'the', 'day']</span></span><br><span class="line"><span class="comment"># å€Ÿâ½¤ NLTK çš„ FreqDist ç»Ÿè®¡â¼€ä¸‹æ–‡å­—å‡ºç°çš„é¢‘ç‡</span></span><br><span class="line">fdist = FreqDist(tokens)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®ƒå°±ç±»ä¼¼äºâ¼€ä¸€ä¸ªDict</span></span><br><span class="line"><span class="comment"># å¸¦ä¸ŠæŸä¸ªå•è¯, å¯ä»¥çœ‹åˆ°å®ƒåœ¨æ•´ä¸ªæ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line">print(fdist[<span class="string">'is'</span>]) <span class="comment">#3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¥½, æ­¤åˆ», æˆ‘ä»¬å¯ä»¥æŠŠæœ€å¸¸â½¤çš„50ä¸ªå•è¯æ‹¿å‡ºæ¥ </span></span><br><span class="line">standard_freq_vector = fdist.most_common(<span class="number">50</span>) </span><br><span class="line">size = len(standard_freq_vector) </span><br><span class="line"><span class="keyword">print</span> <span class="string">"size: %s"</span> % (size)</span><br><span class="line">print(standard_freq_vector)</span><br><span class="line"><span class="comment"># [('is', 3), ('this', 3), ('my', 2),</span></span><br><span class="line"><span class="comment"># ('the', 1), ('day', 1), ('sentence', 1),</span></span><br><span class="line"><span class="comment"># ('life', 1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Func: æŒ‰ç…§å‡ºç°é¢‘ç‡â¼¤å°, è®°å½•ä¸‹æ¯â¼€ä¸ªå•è¯çš„ä½ç½® </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">position_lookup</span><span class="params">(v)</span>:</span></span><br><span class="line">    res = &#123;&#125;</span><br><span class="line">    counter = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> v:</span><br><span class="line">        res[word[<span class="number">0</span>]] = counter</span><br><span class="line">        counter += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"><span class="comment"># æŠŠæ ‡å‡†çš„å•è¯ä½ç½®è®°å½•ä¸‹æ¥</span></span><br><span class="line">standard_position_dict = position_lookup(standard_freq_vector) </span><br><span class="line">print(standard_position_dict)</span><br><span class="line"><span class="comment"># å¾—åˆ°â¼€ä¸ªä½ç½®å¯¹ç…§è¡¨</span></span><br><span class="line"><span class="comment"># &#123;'is': 0, 'the': 3, 'day': 4, 'this': 1, 'sentence': 5, 'my': 2, 'life': 6&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™æ—¶, å¦‚æœæˆ‘ä»¬æœ‰ä¸ªæ–°å¥å­:</span></span><br><span class="line">sentence = <span class="string">'this is cool'</span></span><br><span class="line"><span class="comment"># å…ˆæ–°å»ºâ¼€ä¸ªè·Ÿæˆ‘ä»¬çš„æ ‡å‡†vectoråŒæ ·â¼¤å°çš„å‘é‡ </span></span><br><span class="line">freq_vector = [<span class="number">0</span>] * size</span><br><span class="line"><span class="comment"># ç®€å•çš„Preprocessing</span></span><br><span class="line">tokens = nltk.word_tokenize(sentence) <span class="comment"># å¯¹äºè¿™ä¸ªæ–°å¥â¼¦â¾¥çš„æ¯ä¸€ä¸ªå•è¯</span></span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> tokens:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># å¦‚æœåœ¨æˆ‘ä»¬çš„è¯åº“ï§©å‡ºç°è¿‡</span></span><br><span class="line">    <span class="comment"># é‚£ä¹ˆå°±åœ¨"æ ‡å‡†ä½ç½®"ä¸Š+1 </span></span><br><span class="line">        freq_vector[standard_position_dict[word]] += <span class="number">1</span></span><br><span class="line">    <span class="keyword">except</span> KeyError: <span class="comment"># å¦‚æœæ˜¯ä¸ªæ–°è¯, å°± passæ‰</span></span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">print(freq_vector)   <span class="comment"># [1, 1, 0, 0, 0, 0, 0]</span></span><br><span class="line"><span class="comment"># [1, 1, 0, 0, 0, 0, 0]</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ä¸ªä½ç½®ä»£è¡¨ is, å‡ºç°äº†ä¸€æ¬¡</span></span><br><span class="line"><span class="comment"># ç¬¬äºŒä¸ªä½ç½®ä»£è¡¨ this, å‡ºç°äº†ä¸€æ¬¡ </span></span><br><span class="line"><span class="comment"># åé¢éƒ½æ²¡æœ‰</span></span><br></pre></td></tr></table></figure>
<h3 id="7-3-æ–‡æœ¬åˆ†ç±»-tf-idf"><a href="#7-3-æ–‡æœ¬åˆ†ç±»-tf-idf" class="headerlink" title="7.3 æ–‡æœ¬åˆ†ç±» tf-idf"></a>7.3 æ–‡æœ¬åˆ†ç±» tf-idf</h3><p>TF: Term Frequency, è¡¡é‡ä¸€ä¸ªtermåœ¨æ–‡æ¡£ä¸­å‡ºç°å¾—æœ‰å¤šé¢‘ç¹ã€‚</p>
<p>$$<br>F(t) = (tå‡ºç°åœ¨æ–‡æ¡£ä¸­çš„æ¬¡æ•°) / (æ–‡æ¡£ä¸­çš„termæ€»æ•°)<br>$$</p>
<p>IDF: Inverse Document Frequency, è¡¡é‡ä¸€ä¸ªtermæœ‰å¤šé‡è¦ã€‚ æœ‰äº›è¯å‡ºç°çš„å¾ˆå¤š,ä½†æ˜¯æ˜æ˜¾ä¸æ˜¯å¾ˆæœ‰åµç”¨ã€‚</p>
<p>$$<br>IDF(t) = log_e(æ–‡æ¡£æ€»æ•° / å«æœ‰tçš„æ–‡æ¡£æ€»æ•°)<br>$$</p>
<blockquote>
<p><strong>TF-IDF = TF * IDF</strong></p>
<p>ä¸¾ä¸ªæ —å­ğŸŒ° :</p>
<p>ä¸€ä¸ªæ–‡æ¡£æœ‰100ä¸ªå•è¯,å…¶ä¸­å•è¯babyå‡ºç°äº†3æ¬¡ã€‚ é‚£ä¹ˆ,TF(baby) = (3/100) = 0.03.</p>
<p>å¥½,ç°åœ¨æˆ‘ä»¬å¦‚æœæœ‰10Mçš„æ–‡æ¡£, babyå‡ºç°åœ¨å…¶ä¸­çš„1000ä¸ªæ–‡æ¡£ä¸­ã€‚ é‚£ä¹ˆ,IDF(baby) = log(10,000,000 / 1,000) = 4</p>
<p>æ‰€ä»¥, TF-IDF(baby) = TF(baby) * IDF(baby) = 0.03 * 4 = 0.12</p>
</blockquote>
<p><strong>nltk implement tf-idf</strong></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> nltk.text <span class="keyword">import</span> TextCollection</span><br><span class="line"><span class="comment"># â¾¸å…ˆ, æŠŠæ‰€æœ‰çš„â½‚æ¡£æ”¾åˆ°TextCollectionç±»ä¸­ã€‚</span></span><br><span class="line"><span class="comment"># è¿™ä¸ªç±»ä¼šâ¾ƒåŠ¨å¸®ä½ æ–­ï¤†, åšç»Ÿè®¡, åšè®¡ç®—</span></span><br><span class="line">corpus = TextCollection([<span class="string">'this is sentence one'</span>,</span><br><span class="line">                        <span class="string">'this is sentence two'</span>,</span><br><span class="line">                        <span class="string">'sentence three six'</span>,</span><br><span class="line">                        <span class="string">'this is sentence three'</span>])</span><br><span class="line"><span class="comment"># ç›´æ¥å°±èƒ½ç®—å‡ºtfidf</span></span><br><span class="line"><span class="comment"># (term: â¼€ä¸€å¥ï¤†è¯ä¸­çš„æŸä¸ªterm, text: è¿™å¥ï¤†è¯)</span></span><br><span class="line">print(corpus.tf_idf(<span class="string">'this'</span>, <span class="string">'this is sentence four'</span>))</span><br><span class="line"><span class="comment"># 0.444342</span></span><br><span class="line"><span class="comment"># åŒç†, æ€ä¹ˆå¾—åˆ°â¼€ä¸€ä¸ªæ ‡å‡†â¼¤å°çš„vectoræ¥è¡¨ç¤ºæ‰€æœ‰çš„å¥å­?</span></span><br><span class="line"><span class="comment"># å¯¹äºæ¯ä¸ªæ–°å¥å­</span></span><br><span class="line"><span class="comment">#new_sentence = 'this is sentence five' # éå†â¼€ä¸€éæ‰€æœ‰çš„vocabularyä¸­çš„è¯:</span></span><br><span class="line"><span class="comment">#for word in standard_vocab:</span></span><br><span class="line"><span class="comment">#    print(corpus.tf_idf(word, new_sentence)) # æˆ‘ä»¬ä¼šå¾—åˆ°â¼€ä¸ªå·¨é•¿(=æ‰€æœ‰vocabâ»“åº¦)çš„å‘é‡</span></span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Chatbot Research 1 - èŠå¤©æœºå™¨äººçš„è¡Œä¸šç»¼è¿°]]></title>
      <url>http://shopee.ai/2017/08/11/chatbot/chatbot-research1/</url>
      <content type="html"><![CDATA[<p>è‹±æ–‡åŸæ–‡ï¼š <a href="http://www.wildml.com/2016/04/deep-learning-for-chatbots-part-1-introduction/" target="_blank" rel="external">ã€ŠDeep Learning For Chatbots, Part 1 - Introductionã€‹</a></p>
<p>ä¸­æ–‡ç¿»è¯‘ï¼š <a href="http://www.jeyzhang.com/deep-learning-for-chatbots-1.html" target="_blank" rel="external">ã€ŠèŠå¤©æœºå™¨äººä¸­çš„æ·±åº¦å­¦ä¹ å¯¼è¯»ã€‹</a></p>
<a id="more"></a>
<p>è¿™ç¯‡åšæ–‡ä¸»è¦æ¦‚è¿°äº†ç›®å‰èŠå¤©æœºå™¨äººä¸»è¦ç”¨åˆ°çš„æŠ€æœ¯ï¼Œä»å®è§‚ä¸Šè¿›è¡Œä»‹ç»ï¼Œä¸æ¶‰åŠå…·ä½“çš„æŠ€æœ¯ç»†èŠ‚ã€‚</p>
<p>èŠå¤©æœºå™¨äºº (Chatbot)ï¼Œä¹Ÿè¢«ç§°ä¸ºå¯¹è¯å¼•æ“æˆ–è€…å¯¹è¯ç³»ç»Ÿï¼Œæ˜¯ç›®å‰çš„çƒ­ç‚¹ä¹‹ä¸€ã€‚å¾®è½¯å…¬å¸åœ¨èŠå¤©æœºå™¨äººä¸Šçš„æŠ•å…¥å·¨å¤§ï¼ˆ<a href="https://www.bloomberg.com/features/2016-microsoft-future-ai-chatbots/" target="_blank" rel="external">é“¾æ¥</a>ï¼‰ï¼Œè‘—åäº§å“æœ‰å°å†° (xiaoice)ã€bot frameworkç­‰ï¼Œå…¶ä»–å…¬å¸ä¹Ÿçº·çº·åœ¨è¿™ä¸ªé¢†åŸŸå‘åŠ›ï¼Œå¦‚Facebookçš„Mï¼Œè‹¹æœå…¬å¸çš„Siriç­‰ç­‰ã€‚æ­¤å¤–ï¼Œä¸€å¤§æ‰¹çš„åˆ›ä¸šå…¬å¸å‘å¸ƒäº†ç±»ä¼¼çš„äº§å“ï¼Œä¾‹å¦‚å®¢æˆ·åº”ç”¨<a href="https://operator.com/" target="_blank" rel="external">Operator</a>ï¼Œ<a href="https://x.ai/" target="_blank" rel="external">x.ai</a>ï¼Œbot framework <a href="http://chatfuel.com/" target="_blank" rel="external">Chatfuel</a>ï¼Œbotå¼€å‘å·¥å…· <a href="http://howdy.ai/botkit/" target="_blank" rel="external">Howdyâ€™s Botkit</a>ã€‚å¾®è½¯ä¹Ÿå‘å¸ƒäº†ä¾›å¼€å‘è€…ä½¿ç”¨çš„ <a href="https://dev.botframework.com/" target="_blank" rel="external">bot developer framework</a> </p>
<p>è¿˜æœ‰ä¸€äº›åº”ç”¨æ¡ˆä¾‹ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ¡ˆä¾‹:è¯­éŸ³åŠ©æ‰‹ Siri</li>
<li>æ¡ˆä¾‹:é¤é¥® Pizza Hut</li>
<li>æ¡ˆä¾‹:å¥èº« Fitness Tips</li>
<li>æ¡ˆä¾‹:æ—…æ¸¸ <a href="https://viewfinder.expedia.com/features/introducing-expedia-bot-skype/" target="_blank" rel="external">expedia</a></li>
<li>æ¡ˆä¾‹:åŒ»ç–— <a href="https://www.healthtap.com/" target="_blank" rel="external">healthtap</a></li>
<li>æ¡ˆä¾‹:æ–°é—» <a href="https://qzprod.wordpress.com/" target="_blank" rel="external">wordpress</a></li>
<li>æ¡ˆä¾‹:è´¢ç» <a href="https://meetcleo.com/" target="_blank" rel="external">meetcleo</a></li>
</ul>
<p>è®¸å¤šå…¬å¸å¸Œæœ›èƒ½å¼€å‘å‡ºä¸ç”¨æˆ·è¿›è¡Œè‡ªç„¶è¯­è¨€å¼å¯¹è¯çš„æœºå™¨äººï¼Œå¹¶ä¸”å£°ç§°ä½¿ç”¨äº†NLPå’Œæ·±åº¦å­¦ä¹ ç›¸å…³æŠ€æœ¯ä½¿ä¹‹æˆä¸ºå¯èƒ½ï¼Œç„¶è€Œè¿™å¹¶ä¸å®¹æ˜“å®ç°ã€‚åœ¨è¿™ä¸ªåšæ–‡ç³»åˆ—ä¸­ï¼Œæˆ‘å°†ä¼šé‡æ¸©ä¸€äº›è¢«ç”¨äºèŠå¤©æœºå™¨äººä¸­çš„æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼ŒæŠ«éœ²å‡ºç›®å‰æŠ€æœ¯èƒ½å¤Ÿè§£å†³æˆ–è€…å¯èƒ½è§£å†³çš„é—®é¢˜ä»¥åŠå‡ ä¹éš¾ä»¥è§£å†³çš„é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« æ˜¯ä¸ªæ¦‚è¿°ï¼Œåœ¨æ¥ä¸‹æ¥çš„åšæ–‡ä¸­å°†ä»‹ç»å…·ä½“çš„æŠ€æœ¯ç»†èŠ‚ã€‚</p>
<h2 id="1-æ¨¡å‹åˆ†ç±»"><a href="#1-æ¨¡å‹åˆ†ç±»" class="headerlink" title="1. æ¨¡å‹åˆ†ç±»"></a>1. æ¨¡å‹åˆ†ç±»</h2><h3 id="1-1-æ£€ç´¢æŠ€æœ¯æ¨¡å‹-VS-ç”Ÿæˆå¼æ¨¡å‹"><a href="#1-1-æ£€ç´¢æŠ€æœ¯æ¨¡å‹-VS-ç”Ÿæˆå¼æ¨¡å‹" class="headerlink" title="1.1 æ£€ç´¢æŠ€æœ¯æ¨¡å‹ VS ç”Ÿæˆå¼æ¨¡å‹"></a>1.1 æ£€ç´¢æŠ€æœ¯æ¨¡å‹ VS ç”Ÿæˆå¼æ¨¡å‹</h3><p><strong>åŸºäºæ£€ç´¢æŠ€æœ¯çš„æ¨¡å‹</strong>è¾ƒä¸ºç®€å•ï¼Œä¸»è¦æ˜¯æ ¹æ®ç”¨æˆ·çš„è¾“å…¥å’Œä¸Šä¸‹æ–‡å†…å®¹ï¼Œä½¿ç”¨äº†çŸ¥è¯†åº“ï¼ˆå­˜å‚¨äº†äº‹å…ˆå®šä¹‰å¥½çš„å›å¤å†…å®¹ï¼‰å’Œä¸€äº›å¯å‘å¼æ–¹æ³•æ¥å¾—åˆ°ä¸€ä¸ªåˆé€‚çš„å›å¤ã€‚å¯å‘å¼æ–¹æ³•ç®€å•çš„æœ‰åŸºäºè§„åˆ™çš„è¡¨è¾¾å¼åŒ¹é…ï¼Œå¤æ‚çš„æœ‰ä¸€äº›æœºå™¨å­¦ä¹ é‡Œçš„åˆ†ç±»å™¨ã€‚è¿™äº›ç³»ç»Ÿä¸èƒ½å¤Ÿç”Ÿæˆä»»ä½•æ–°çš„å†…å®¹ï¼Œåªæ˜¯ä»ä¸€ä¸ªå›ºå®šçš„æ•°æ®é›†ä¸­æ‰¾åˆ°åˆé€‚çš„å†…å®¹ä½œä¸ºå›å¤ã€‚</p>
<p><strong>ç”Ÿæˆå¼æ¨¡å‹</strong>åˆ™æ›´åŠ å¤æ‚ï¼Œå®ƒä¸ä¾èµ–äºé¢„å®šä¹‰å¥½çš„å›å¤å†…å®¹ï¼Œè€Œæ˜¯é€šè¿‡<strong>æŠ“å–(Scratch)</strong>çš„æ–¹æ³•ç”Ÿæˆæ–°çš„å›å¤å†…å®¹ã€‚ç”Ÿæˆå¼æ¨¡å‹å…¸å‹çš„æœ‰<strong>åŸºäºæœºå™¨ç¿»è¯‘æ¨¡å‹</strong>çš„ï¼Œä¸ä¼ ç»Ÿæœºå™¨ç¿»è¯‘æ¨¡å‹ä¸åŒçš„æ˜¯ï¼Œç”Ÿæˆå¼æ¨¡å‹çš„ä»»åŠ¡ä¸æ˜¯å°†ä¸€å¥è¯ç¿»è¯‘æˆå…¶ä»–è¯­è¨€çš„ä¸€å¥è¯ï¼Œè€Œæ˜¯å°†<strong>ç”¨æˆ·çš„è¾“å…¥[ç¿»è¯‘]ä¸ºä¸€ä¸ªå›ç­”(response)</strong></p>
<p><img src="/images/chatbot/chatbot-1_1.png" width="800"></p>
<h3 id="1-2-æ¨¡å‹åˆ†ç±»æ€»ç»“"><a href="#1-2-æ¨¡å‹åˆ†ç±»æ€»ç»“" class="headerlink" title="1.2 æ¨¡å‹åˆ†ç±»æ€»ç»“"></a>1.2 æ¨¡å‹åˆ†ç±»æ€»ç»“</h3><p>ä»¥ä¸Šä¸¤ç§æ¨¡å‹å‡æœ‰ä¼˜ç¼ºç‚¹ã€‚å¯¹äºåŸºäºæ£€ç´¢æŠ€æœ¯çš„æ¨¡å‹ï¼Œç”±äºä½¿ç”¨äº†çŸ¥è¯†åº“ä¸”æ•°æ®ä¸ºé¢„å…ˆå®šä¹‰å¥½çš„ï¼Œå› æ­¤è¿›è¡Œå›å¤çš„å†…å®¹è¯­æ³•ä¸Šè¾ƒä¸ºé€šé¡ºï¼Œè¾ƒå°‘å‡ºç°è¯­æ³•é”™è¯¯ï¼›ä½†æ˜¯åŸºäºæ£€ç´¢æŠ€æœ¯çš„æ¨¡å‹ä¸­æ²¡æœ‰ä¼šè¯æ¦‚å¿µï¼Œä¸èƒ½ç»“åˆä¸Šä¸‹æ–‡ç»™å‡ºæ›´åŠ [æ™ºèƒ½]çš„å›å¤ã€‚è€Œç”Ÿæˆå¼æ¨¡å‹åˆ™æ›´åŠ [æ™ºèƒ½]ä¸€äº›ï¼Œå®ƒèƒ½å¤Ÿæ›´åŠ æœ‰æ•ˆåœ°åˆ©ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯ä»è€ŒçŸ¥é“ä½ åœ¨è®¨è®ºçš„ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼›ç„¶è€Œç”Ÿæˆå¼æ¨¡å‹æ¯”è¾ƒéš¾ä»¥è®­ç»ƒï¼Œå¹¶ä¸”è¾“å‡ºçš„å†…å®¹ç»å¸¸å­˜åœ¨ä¸€äº›è¯­æ³•é”™è¯¯ï¼ˆå°¤å…¶å¯¹äºé•¿å¥å­è€Œè¨€ï¼‰ï¼Œä»¥åŠæ¨¡å‹è®­ç»ƒéœ€è¦å¤§è§„æ¨¡çš„æ•°æ®ã€‚</p>
<p>æ·±åº¦å­¦ä¹ æŠ€æœ¯éƒ½èƒ½å¤Ÿç”¨äºåŸºäºæ£€ç´¢æŠ€æœ¯çš„æ¨¡å‹å’Œç”Ÿæˆå¼æ¨¡å‹ä¸­ï¼Œä½†æ˜¯ç›®å‰çš„ç ”ç©¶çƒ­ç‚¹åœ¨ç”Ÿæˆå¼æ¨¡å‹ä¸Šã€‚æ·±åº¦å­¦ä¹ æ¡†æ¶ä¾‹å¦‚Sequence to Sequenceéå¸¸é€‚åˆç”¨æ¥ç”Ÿæˆæ–‡æœ¬ï¼Œéå¸¸å¤šçš„ç ”ç©¶è€…å¸Œæœ›èƒ½å¤Ÿåœ¨è¿™ä¸ªé¢†åŸŸå–å¾—æˆåŠŸã€‚ç„¶è€Œç›®å‰è¿™ä¸€å—çš„ç ”ç©¶è¿˜åœ¨åˆæœŸé˜¶æ®µï¼Œå·¥ä¸šç•Œçš„äº§å“æ›´å¤šçš„è¿˜æ˜¯ä½¿ç”¨åŸºäºæ£€ç´¢è®¡ç®—çš„æ¨¡å‹ã€‚</p>
<h2 id="2-é—®é¢˜åˆ†ç±»"><a href="#2-é—®é¢˜åˆ†ç±»" class="headerlink" title="2. é—®é¢˜åˆ†ç±»"></a>2. é—®é¢˜åˆ†ç±»</h2><h3 id="2-1-çŸ­å¯¹è¯-VS-é•¿å¯¹è¯"><a href="#2-1-çŸ­å¯¹è¯-VS-é•¿å¯¹è¯" class="headerlink" title="2.1 çŸ­å¯¹è¯ VS é•¿å¯¹è¯"></a>2.1 çŸ­å¯¹è¯ VS é•¿å¯¹è¯</h3><p>ç›´è§‚ä¸Šå¤„ç†é•¿å¯¹è¯å†…å®¹å°†æ›´åŠ å›°éš¾ï¼Œè¿™æ˜¯å› ä¸ºä½ éœ€è¦åœ¨å½“å‰å¯¹è¯çš„æƒ…å¢ƒä¸‹çŸ¥é“ä¹‹å‰çš„å¯¹è¯è¯´è¿‡ä»€ä¹ˆã€‚å¦‚æœæ˜¯ä¸€é—®ä¸€ç­”çš„å½¢å¼ï¼ŒæŠ€æœ¯ä¸Šè¿™å°†ç®€å•çš„å¤šã€‚é€šå¸¸å¯¹äºå®¢æœå¯¹è¯è€Œè¨€ï¼Œé•¿å¯¹è¯æ›´åŠ å¸¸è§ï¼Œä¸€æ¬¡å¯¹è¯ä¸­å¾€å¾€ä¼šä¼´éšç€å¤šä¸ªå…³è”é—®é¢˜ã€‚</p>
<h3 id="2-2-å¼€æ”¾åŸŸ-VS-ç‰¹å®šé¢†åŸŸ"><a href="#2-2-å¼€æ”¾åŸŸ-VS-ç‰¹å®šé¢†åŸŸ" class="headerlink" title="2.2 å¼€æ”¾åŸŸ VS ç‰¹å®šé¢†åŸŸ"></a>2.2 å¼€æ”¾åŸŸ VS ç‰¹å®šé¢†åŸŸ</h3><p>é¢å‘å¼€æ”¾åŸŸçš„èŠå¤©æœºå™¨äººæŠ€æœ¯é¢ä¸´æ›´å¤šå›°éš¾ï¼Œè¿™æ˜¯å› ä¸ºä¼šè¯å¯èƒ½æ¶‰åŠçš„é¢å¤ªå¹¿ï¼Œæ²¡æœ‰ä¸€ä¸ªæ¸…æ™°çš„ç›®æ ‡å’Œæ„å›¾ã€‚åœ¨ä¸€äº›ç¤¾äº¤ç½‘ç«™ä¾‹å¦‚Twitterå’ŒRedditä¸Šçš„ä¼šè¯æ˜¯å±äºå¼€æ”¾åŸŸçš„ï¼Œä¼šè¯æ¶‰åŠçš„ä¸»é¢˜å¤šç§å¤šæ ·ï¼Œéœ€è¦çš„çŸ¥è¯†é‡ä¹Ÿå°†éå¸¸å·¨å¤§ã€‚</p>
<p>é¢å‘ç‰¹å®šé¢†åŸŸçš„ç›¸å…³æŠ€æœ¯åˆ™ç›¸å¯¹ç®€å•ä¸€äº›ï¼Œè¿™æ˜¯å› ä¸ºç‰¹å®šé¢†åŸŸç»™ä¼šè¯çš„ä¸»é¢˜è¿›è¡Œäº†é™åˆ¶ï¼Œç›®æ ‡å’Œæ„å›¾ä¹Ÿæ›´åŠ æ¸…æ™°ï¼Œå…¸å‹çš„ä¾‹å­æœ‰å®¢æœç³»ç»ŸåŠ©æ‰‹å’Œè´­ç‰©åŠ©æ‰‹ã€‚è¿™äº›ç³»ç»Ÿé€šå¸¸æ˜¯ä¸ºäº†å®ŒæˆæŸäº›ç‰¹å®šä»»åŠ¡ï¼Œå°½ç®¡ç”¨æˆ·åœ¨è¯¥ç³»ç»Ÿä¸­ä¹Ÿèƒ½å¤Ÿé—®äº›å…¶ä»–æ–¹é¢çš„ä¸œè¥¿ï¼Œä½†æ˜¯ç³»ç»Ÿå¹¶ä¸ä¼šç»™å‡ºç›¸åº”çš„å›å¤ã€‚</p>
<h2 id="3-é¢ä¸´çš„æŒ‘æˆ˜"><a href="#3-é¢ä¸´çš„æŒ‘æˆ˜" class="headerlink" title="3. é¢ä¸´çš„æŒ‘æˆ˜"></a>3. é¢ä¸´çš„æŒ‘æˆ˜</h2><p>ä¸‹é¢ä»‹ç»ä¸€ä¸‹èŠå¤©æœºå™¨äººæŠ€æœ¯æ‰€é¢ä¸´çš„æŒ‘æˆ˜ã€‚</p>
<h3 id="3-1-å¦‚ä½•ç»“åˆä¸Šä¸‹æ–‡ä¿¡æ¯"><a href="#3-1-å¦‚ä½•ç»“åˆä¸Šä¸‹æ–‡ä¿¡æ¯" class="headerlink" title="3.1 å¦‚ä½•ç»“åˆä¸Šä¸‹æ–‡ä¿¡æ¯"></a>3.1 å¦‚ä½•ç»“åˆä¸Šä¸‹æ–‡ä¿¡æ¯</h3><p>ä¸ºäº†äº§ç”Ÿè´¨é‡æ›´é«˜çš„å›å¤ï¼ŒèŠå¤©æœºå™¨äººç³»ç»Ÿé€šå¸¸éœ€è¦åˆ©ç”¨ä¸€äº›ä¸Šä¸‹æ–‡ä¿¡æ¯(Context)ï¼Œè¿™é‡Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯åŒ…æ‹¬äº†å¯¹è¯è¿‡ç¨‹ä¸­çš„è¯­è¨€ä¸Šä¸‹æ–‡ä¿¡æ¯å’Œç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ç­‰ã€‚åœ¨é•¿å¯¹è¯ä¸­äººä»¬å…³æ³¨çš„æ˜¯ä¹‹å‰è¯´äº†ä»€ä¹ˆå†…å®¹ä»¥åŠäº§ç”Ÿäº†ä»€ä¹ˆå†…å®¹çš„äº¤æ¢ï¼Œè¿™æ˜¯è¯­è¨€ä¸Šä¸‹æ–‡ä¿¡æ¯çš„å…¸å‹ã€‚å¸¸è§çš„æ–¹æ³•æ˜¯å°†ä¸€ä¸ªä¼šè¯è½¬åŒ–ä¸ºå‘é‡å½¢å¼ï¼Œä½†è¿™å¯¹é•¿ä¼šè¯è€Œè¨€æ˜¯å›°éš¾çš„ã€‚è®ºæ–‡Building End-To-End Dialogue Systems Using Generative Hierarchical Neural Network Modelså’ŒAttention with Intention for a Neural Network Conversation Modelä¸­çš„å®éªŒç»“æœè¡¨æ˜äº†è¿™ä¸€ç‚¹ã€‚å¦å¤–ï¼Œå¯ä»¥ç»“åˆçš„ä¸Šä¸‹æ–‡ä¿¡æ¯è¿˜åŒ…æ‹¬ä¼šè¯è¿›è¡Œæ—¶çš„æ—¥æœŸåœ°ç‚¹ä¿¡æ¯ã€ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚</p>
<h3 id="3-2-è¯­ä¹‰ä¸€è‡´æ€§"><a href="#3-2-è¯­ä¹‰ä¸€è‡´æ€§" class="headerlink" title="3.2 è¯­ä¹‰ä¸€è‡´æ€§"></a>3.2 è¯­ä¹‰ä¸€è‡´æ€§</h3><p>ç†è®ºä¸Šæ¥è¯´ï¼Œæœºå™¨äººé¢å¯¹ç›¸åŒè¯­ä¹‰è€Œä¸åŒå½¢å¼çš„é—®é¢˜åº”è¯¥ç»™äºˆä¸€è‡´çš„å›å¤ï¼Œä¾‹å¦‚è¿™ä¸¤ä¸ªé—®é¢˜[How old are you?]å’Œ[Whatâ€™s your age?]ã€‚è¿™ç†è§£èµ·æ¥æ˜¯ç®€å•çš„ï¼Œä½†å´æ˜¯å­¦æœ¯ç•Œç›®å‰çš„éš¾é¢˜ä¹‹ä¸€ï¼ˆå¦‚ä¸‹å›¾ï¼‰ã€‚è®¸å¤šç³»ç»Ÿéƒ½è¯•å›¾å¯¹ç›¸åŒè¯­ä¹‰è€Œä¸åŒå½¢å¼çš„é—®é¢˜ç»™äºˆè¯­ä¹‰ä¸Šåˆç†çš„å›å¤ï¼Œä½†å´æ²¡æœ‰è€ƒè™‘ä¸€è‡´æ€§ï¼Œæœ€å¤§çš„åŸå› åœ¨äºè®­ç»ƒæ¨¡å‹çš„æ•°æ®æ¥æºäºå¤§é‡ä¸åŒçš„ç”¨æˆ·ï¼Œè¿™å¯¼è‡´æœºå™¨äººå¤±å»äº†å›ºå®šç»Ÿä¸€çš„äººæ ¼ã€‚è®ºæ–‡A Persona-Based Neural Conversation Modelä¸­æåŠçš„æ¨¡å‹æ—¨åœ¨åˆ›å»ºå…·æœ‰å›ºå®šç»Ÿä¸€äººæ ¼çš„æœºå™¨äººã€‚</p>
<p><img src="/images/chatbot/chatbot-1_2.png" width="400"></p>
<h3 id="3-3-å¯¹è¯æ¨¡å‹çš„è¯„æµ‹"><a href="#3-3-å¯¹è¯æ¨¡å‹çš„è¯„æµ‹" class="headerlink" title="3.3 å¯¹è¯æ¨¡å‹çš„è¯„æµ‹"></a>3.3 å¯¹è¯æ¨¡å‹çš„è¯„æµ‹</h3><p>è¯„ä»·ä¸€ä¸ªå¯¹è¯æ¨¡å‹çš„å¥½ååœ¨äºå®ƒæ˜¯å¦å¾ˆå¥½åœ°å®Œæˆäº†æŸé¡¹ä»»åŠ¡ï¼Œä¾‹å¦‚åœ¨å¯¹è¯ä¸­è§£å†³äº†å®¢æˆ·çš„é—®é¢˜ã€‚è¿™æ ·çš„è®­ç»ƒæ•°æ®éœ€è¦äººå·¥æ ‡æ³¨å’Œè¯„æµ‹ï¼Œæ‰€ä»¥è·å–ä¸Šéœ€è¦ä¸€å®šäººåŠ›ä»£ä»·ã€‚æœ‰æ—¶åœ¨å¼€æ”¾åŸŸä¸­çš„å¯¹è¯ç³»ç»Ÿä¹Ÿæ²¡æœ‰ä¸€ä¸ªæ¸…æ™°çš„ä¼˜åŒ–ç›®æ ‡ã€‚ç”¨äºæœºå™¨ç¿»è¯‘çš„è¯„æµ‹æŒ‡æ ‡BLEUä¸èƒ½é€‚ç”¨äºæ­¤ï¼Œæ˜¯å› ä¸ºå®ƒçš„è®¡ç®—åŸºç¡€æ˜¯è¯­è¨€è¡¨é¢ä¸Šçš„åŒ¹é…ç¨‹åº¦ï¼Œè€Œå¯¹è¯ä¸­çš„å›ç­”å¯ä»¥æ˜¯å®Œå…¨ä¸åŒè¯å‹ä½†è¯­ä¹‰é€šé¡ºçš„è¯­å¥ã€‚è®ºæ–‡<a href="https://arxiv.org/abs/1603.08023" target="_blank" rel="external">How NOT To Evaluate Your Dialogue System: An Empirical Study of Unsupervised Evaluation Metrics for Dialogue Response Generation</a>ä¸­ç»™å‡ºç»“è®ºï¼Œç›®å‰å¸¸ç”¨çš„è¯„æµ‹æŒ‡æ ‡å‡ä¸äººå·¥è¯„æµ‹æ— å…³ã€‚</p>
<h3 id="3-4-æ„å›¾å’Œå›å¤å¤šæ ·æ€§"><a href="#3-4-æ„å›¾å’Œå›å¤å¤šæ ·æ€§" class="headerlink" title="3.4 æ„å›¾å’Œå›å¤å¤šæ ·æ€§"></a>3.4 æ„å›¾å’Œå›å¤å¤šæ ·æ€§</h3><p>ç”Ÿæˆå¼æ¨¡å‹ä¸­çš„ä¸€ä¸ªæ™®éé—®é¢˜æ˜¯ï¼Œå®ƒä»¬éƒ½æƒ³è¦ç”Ÿæˆä¸€äº›é€šç”¨çš„å›ç­”ï¼Œä¾‹å¦‚[Thatâ€™s great!]å’Œ[I donâ€™t know]è¿™æ ·çš„å¯ä»¥åº”ä»˜è®¸å¤šçš„ç”¨æˆ·è¯¢é—®ã€‚æ—©æœŸçš„Googleæ™ºèƒ½å›å¤åŸºæœ¬ä¸Šä»¥[I love you]å›å¤æ‰€æœ‰çš„ä¸œè¥¿é“¾æ¥ï¼Œè¿™æ˜¯ä¸€äº›æ¨¡å‹æœ€ç»ˆè®­ç»ƒå‡ºæ¥çš„ç»“æœï¼ŒåŸå› åœ¨äºè®­ç»ƒæ•°æ®å’Œè®­ç»ƒçš„ä¼˜åŒ–ç›®æ ‡ã€‚å› æ­¤ï¼Œæœ‰äº›ç ”ç©¶å­¦è€…å¼€å§‹å…³æ³¨<a href="http://arxiv.org/abs/1510.03055" target="_blank" rel="external">å¦‚ä½•æå‡æœºå™¨äººçš„å›å¤çš„å¤šæ ·æ€§</a>ï¼Œç„¶è€Œäººä»¬åœ¨å¯¹è¯è¿‡ç¨‹ä¸­çš„å›å¤ä¸è¯¢é—®æœ‰ä¸€å®šç‰¹å®šå…³ç³»ï¼Œæ˜¯æœ‰ä¸€å®šæ„å›¾çš„ï¼Œè€Œè®¸å¤šé¢å‘å¼€æ”¾åŸŸçš„æœºå™¨äººä¸å…·å¤‡ç‰¹å®šçš„æ„å›¾ã€‚</p>
<h3 id="3-5-å®é™…æ•ˆæœ"><a href="#3-5-å®é™…æ•ˆæœ" class="headerlink" title="3.5 å®é™…æ•ˆæœ"></a>3.5 å®é™…æ•ˆæœ</h3><p>ä»¥ç›®å‰çš„ç ”ç©¶æ°´å¹³æ‰€åˆ¶é€ çš„æœºå™¨äººèƒ½å¤Ÿå–å¾—çš„æ•ˆæœå¦‚ä½•ï¼Ÿä½¿ç”¨åŸºäºæ£€ç´¢æŠ€æœ¯çš„æ˜¾ç„¶æ— æ³•åˆ¶ä½œå‡ºé¢å‘å¼€æ”¾åŸŸçš„æœºå™¨äººï¼Œè¿™æ˜¯å› ä¸ºä½ ä¸èƒ½ç¼–å†™è¦†ç›–æ‰€æœ‰é¢†åŸŸçš„è¯­æ–™ï¼›è€Œç”Ÿæˆå¼çš„é¢å‘å¼€æ”¾åŸŸçš„æœºå™¨äººè¿˜å±äºé€šç”¨äººå·¥æ™ºèƒ½(Artifical General Intelligence, AGI)æ°´å¹³ï¼Œè·ç¦»ç†æƒ³çŠ¶æ€è¿˜ç›¸è·ç”šè¿œï¼Œä½†ç›¸å…³ç ”ç©¶å­¦è€…è¿˜åœ¨è‡´åŠ›äºæ­¤ã€‚</p>
<p>å¯¹äºç‰¹å®šé¢†åŸŸçš„æœºå™¨äººï¼ŒåŸºäºæ£€ç´¢çš„æŠ€æœ¯å’Œç”Ÿæˆå¼æ¨¡å‹éƒ½èƒ½å¤Ÿåˆ©ç”¨ã€‚ä½†æ˜¯å¯¹äºé•¿å¯¹è¯çš„æƒ…å¢ƒï¼Œä¹Ÿé¢ä¸´è®¸å¤šå›°éš¾ã€‚</p>
<p>åœ¨æœ€è¿‘å¯¹<a href="https://www.seattletimes.com/business/baidu-research-chief-andrew-ng-fixed-on-self-taught-computers-self-driving-cars/" target="_blank" rel="external">Andrew NGçš„é‡‡è®¿</a>ä¸­ï¼ŒNGæåˆ°ï¼š</p>
<blockquote>
<p>ç›®å‰æ·±åº¦å­¦ä¹ çš„ä»·å€¼ä¸»è¦ä½“ç°åœ¨èƒ½å¤Ÿè·å–å¤§é‡æ•°æ®çš„ç‰¹å®šé¢†åŸŸã€‚</p>
<p>ç›®å‰ä¸€ä¸ªæ— æ³•åšçš„äº‹æƒ…æ˜¯äº§ç”Ÿä¸€ä¸ªæœ‰æ„ä¹‰çš„å¯¹è¯ã€‚</p>
<p>è¯¦ç»†ï¼š å½“ä»Šæ·±åº¦å­¦ä¹ çš„ä»·å€¼åœ¨ä½ å¯ä»¥è·å¾—è®¸å¤šæ•°æ®çš„ç‹­çª„é¢†åŸŸå†…ã€‚æœ‰ä¸€ä»¶äº‹å®ƒåšä¸åˆ°ï¼šè¿›è¡Œæœ‰æ„ä¹‰çš„å¯¹è¯ã€‚å­˜åœ¨ä¸€äº›æ¼”ç¤ºï¼Œå¹¶ä¸”å¦‚æœä½ ä»”ç»†æŒ‘é€‰è¿™äº›å¯¹è¯ï¼Œçœ‹èµ·æ¥å°±åƒå®ƒæ­£åœ¨è¿›è¡Œæœ‰æ„ä¹‰çš„å¯¹è¯ï¼Œä½†æ˜¯å¦‚æœä½ äº²è‡ªå°è¯•ï¼Œå®ƒå°±ä¼šå¿«é€Ÿåç¦»è½¨é“ã€‚</p>
</blockquote>
<p>è®¸å¤šåˆ›ä¸šå…¬å¸å£°ç§°åªè¦æœ‰è¶³å¤Ÿå¤šçš„æ•°æ®ï¼Œå°±èƒ½å¤Ÿäº§ç”Ÿè‡ªåŠ¨æ™ºèƒ½çš„å¯¹è¯ç³»ç»Ÿã€‚ç„¶è€Œï¼Œç›®å‰çš„æ°´å¹³ç”Ÿäº§å‡ºé¢å‘ä¸€ä¸ªç‰¹å®šçš„å­é¢†åŸŸçš„å¯¹è¯åº”ç”¨ï¼ˆå¦‚åˆ©ç”¨Uberæ‰“è½¦ï¼‰ï¼Œè€Œå¯¹äºä¸€ä¸ªç¨å¾®å¼€æ”¾ç‚¹çš„é¢†åŸŸå°±éš¾ä»¥å®ç°äº†ï¼ˆå¦‚è‡ªåŠ¨é”€å”®ï¼‰ã€‚ä½†æ˜¯ï¼Œå¸®åŠ©ç”¨æˆ·æä¾›è‡ªåŠ¨å›å¤å»ºè®®ä»¥åŠè¯­æ³•çº æ­£è¿˜æ˜¯å¯è¡Œçš„ã€‚</p>
<p>ä½¿ç”¨åŸºäºæ£€ç´¢æŠ€æœ¯çš„å¯¹è¯ç³»ç»Ÿæ›´åŠ å¯æ§å’Œç¨³å®šï¼Œç»™å‡ºçš„å›å¤å‡ºç°è¯­æ³•é”™è¯¯çš„å‡ ç‡æ›´ä½ã€‚è€Œä½¿ç”¨ç”Ÿæˆå¼æ¨¡å‹çš„é£é™©åœ¨äºå›å¤ä¸å¯æ§ï¼Œä¸”å®¹æ˜“å‡ºç°ä¸€äº›é£é™©ï¼Œä¾‹å¦‚<a href="http://www.businessinsider.com/microsoft-deletes-racist-genocidal-tweets-from-ai-chatbot-tay-2016-3" target="_blank" rel="external">å¾®è½¯çš„Tay</a>ã€‚</p>
<h2 id="4-å³å°†åˆ°æ¥çš„äº‹æƒ…å’Œé˜…è¯»åˆ—è¡¨"><a href="#4-å³å°†åˆ°æ¥çš„äº‹æƒ…å’Œé˜…è¯»åˆ—è¡¨" class="headerlink" title="4. å³å°†åˆ°æ¥çš„äº‹æƒ…å’Œé˜…è¯»åˆ—è¡¨"></a>4. å³å°†åˆ°æ¥çš„äº‹æƒ…å’Œé˜…è¯»åˆ—è¡¨</h2><p>åœ¨ä¹‹åçš„åšæ–‡ä¸­å°†å…·ä½“ä»‹ç»æ·±åº¦å­¦ä¹ æ–¹é¢çš„æŠ€æœ¯ç»†èŠ‚ã€‚æå‰é˜…è¯»ä¸‹é¢çš„æ–‡ç« å°†ä¼šå¯¹åé¢çš„å­¦ä¹ æ›´åŠ æœ‰å¸®åŠ©ã€‚</p>
<ul>
<li><p><a href="http://arxiv.org/abs/1503.02364" target="_blank" rel="external">Neural Responding Machine for Short-Text Conversation (2015-03)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1506.05869" target="_blank" rel="external">A Neural Conversational Model (2015-06)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1506.06714" target="_blank" rel="external">A Neural Network Approach to Context-Sensitive Generation of Conversational Responses (2015-06)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1506.08909" target="_blank" rel="external">The Ubuntu Dialogue Corpus: A Large Dataset for Research in Unstructured Multi-Turn Dialogue Systems (2015-06)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1507.04808" target="_blank" rel="external">Building End-To-End Dialogue Systems Using Generative Hierarchical Neural Network Models (2015-07)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1510.03055" target="_blank" rel="external">A Diversity-Promoting Objective Function for Neural Conversation Models (2015-10)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1510.08565" target="_blank" rel="external">Attention with Intention for a Neural Network Conversation Model (2015-10)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1510.03753" target="_blank" rel="external">Improved Deep Learning Baselines for Ubuntu Corpus Dialogs (2015-10)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1512.05742" target="_blank" rel="external">A Survey of Available Corpora for Building Data-Driven Dialogue Systems (2015-12)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1603.06393" target="_blank" rel="external">Incorporating Copying Mechanism in Sequence-to-Sequence Learning (2016-03)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1603.06155" target="_blank" rel="external">A Persona-Based Neural Conversation Model (2016-03)</a></p>
</li>
<li><p><a href="https://arxiv.org/abs/1603.08023" target="_blank" rel="external">How NOT To Evaluate Your Dialogue System: An Empirical Study of Unsupervised Evaluation Metrics for Dialogue Response Generation (2016-03)</a></p>
</li>
</ul>
<p>æ•°æ®é©±åŠ¨çš„æ„ä¹‰æ˜¯ï¼š </p>
<ul>
<li>ç®—æ³•è¶Šç®€å•ï¼Œè§£é‡Šæ€§è¶Šå¥½</li>
<li>æ•°æ®é‡è¶³å¤Ÿå¤§ï¼Œè¦†ç›–çš„çœŸå®ä¸–ç•Œçš„å¤§éƒ¨åˆ†åœºæ™¯</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Naive Bayes * åƒåœ¾é‚®ä»¶åˆ†ç±»]]></title>
      <url>http://shopee.ai/2017/08/10/ml/naive-bayes-1/</url>
      <content type="html"><![CDATA[<p>è´å¶æ–¯æ–¹æ³•æ˜¯ä¸€ä¸ªå†å²æ‚ ä¹…ï¼Œæœ‰ç€åšå®çš„ç†è®ºåŸºç¡€çš„æ–¹æ³•ï¼ŒåŒæ—¶å¤„ç†å¾ˆå¤šé—®é¢˜æ—¶ç›´æ¥è€Œåˆé«˜æ•ˆ, å¾ˆå¤šé«˜çº§ NLP æ¨¡å‹ä¹Ÿå¯ä»¥ä»å®ƒæ¼”åŒ–è€Œæ¥ã€‚å› æ­¤ï¼Œå­¦ä¹ è´å¶æ–¯æ–¹æ³•ï¼Œæ˜¯ç ”ç©¶ NLP é—®é¢˜çš„ä¸€ä¸ªéå¸¸å¥½çš„åˆ‡å…¥å£ã€‚</p>
<a id="more"></a>
<h2 id="1-è´å¶æ–¯"><a href="#1-è´å¶æ–¯" class="headerlink" title="1. è´å¶æ–¯"></a>1. è´å¶æ–¯</h2><p>$$<br>P(Y|X)=\frac{P(X|Y)P(Y)}{P(X)}<br>$$</p>
<h2 id="2-è´å¶æ–¯å…¬å¼"><a href="#2-è´å¶æ–¯å…¬å¼" class="headerlink" title="2. è´å¶æ–¯å…¬å¼"></a>2. è´å¶æ–¯å…¬å¼</h2><p>è´å¶æ–¯å…¬å¼å°±ä¸€è¡Œï¼š</p>
<p>$$<br>P(Y|X)=\frac{P(X|Y)P(Y)}{P(X)}<br>$$</p>
<p>å®ƒå…¶å®æ˜¯ç”±ä»¥ä¸‹çš„è”åˆæ¦‚ç‡å…¬å¼æ¨å¯¼å‡ºæ¥ï¼š</p>
<p>$$<br>P(Y,X)=P(Y|X)P(X)=P(X|Y)P(Y)<br>$$</p>
<p>å…¶ä¸­ $P(Y)$ å«åšå…ˆéªŒæ¦‚ç‡ï¼Œ $P(Y|X)$ å«åšåéªŒæ¦‚ç‡ï¼Œ $P(Y,X)$ å«åšè”åˆæ¦‚ç‡ã€‚</p>
<h2 id="3-æœºå™¨å­¦ä¹ è§†è§’ç†è§£è´å¶æ–¯å…¬å¼"><a href="#3-æœºå™¨å­¦ä¹ è§†è§’ç†è§£è´å¶æ–¯å…¬å¼" class="headerlink" title="3. æœºå™¨å­¦ä¹ è§†è§’ç†è§£è´å¶æ–¯å…¬å¼"></a>3. æœºå™¨å­¦ä¹ è§†è§’ç†è§£è´å¶æ–¯å…¬å¼</h2><p>æŠŠ $X$ ç†è§£æˆ â€œ$æœ‰æŸ feature$â€<br>æŠŠ $Y$ ç†è§£æˆ â€œ$å±äºæŸç±» label$â€</p>
<blockquote>
<p>ä¸€èˆ¬æœºå™¨å­¦ä¹ ä¸ºé¢˜ä¸­éƒ½æ˜¯ $X$ =&gt; ç‰¹å¾, $Y$ =&gt; ç»“æœ å¯¹å§ã€‚</p>
<p>åœ¨æœ€ç®€å•çš„äºŒåˆ†ç±»é—®é¢˜(æ˜¯ä¸å¦åˆ¤å®š)ä¸‹ï¼Œæˆ‘ä»¬å°† $Y$ ç†è§£æˆ $â€œå±äºæŸç±»â€$ çš„æ ‡ç­¾ã€‚<br>äºæ˜¯è´å¶æ–¯å…¬å¼å°±å˜å½¢æˆäº†ä¸‹é¢çš„æ ·å­:</p>
</blockquote>
<p>$$<br>P(â€œå±äºæŸç±»â€|â€œå…·æœ‰æŸç‰¹å¾â€)=\frac{P(â€œå…·æœ‰æŸç‰¹å¾â€|â€œå±äºæŸç±»â€)P(â€œå±äºæŸç±»â€)}{P(â€œå…·æœ‰æŸç‰¹å¾â€)}<br>$$</p>
<p>è€Œæˆ‘ä»¬äºŒåˆ†ç±»é—®é¢˜çš„æœ€ç»ˆç›®çš„å°±æ˜¯è¦åˆ¤æ–­ $P(â€œå±äºæŸç±»â€|â€œå…·æœ‰æŸç‰¹å¾â€)$ æ˜¯å¦å¤§äº1/2å°±å¤Ÿäº†ã€‚è´å¶æ–¯æ–¹æ³•æŠŠè®¡ç®— â€œ$å…·æœ‰æŸç‰¹å¾çš„æ¡ä»¶ä¸‹å±äºæŸç±»$â€ çš„æ¦‚ç‡è½¬æ¢æˆéœ€è¦è®¡ç®— â€œ$å±äºæŸç±»çš„æ¡ä»¶ä¸‹å…·æœ‰æŸç‰¹å¾$â€ çš„æ¦‚ç‡ï¼Œè€Œåè€…è·å–æ–¹æ³•å°±ç®€å•å¤šäº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°ä¸€äº›åŒ…å«å·²çŸ¥ç‰¹å¾æ ‡ç­¾çš„æ ·æœ¬ï¼Œå³å¯è¿›è¡Œè®­ç»ƒã€‚è€Œæ ·æœ¬çš„ç±»åˆ«æ ‡ç­¾éƒ½æ˜¯æ˜ç¡®çš„ï¼Œæ‰€ä»¥è´å¶æ–¯æ–¹æ³•åœ¨æœºå™¨å­¦ä¹ é‡Œå±äº<code>æœ‰ç›‘ç£å­¦ä¹ æ–¹æ³•</code>ã€‚</p>
<h2 id="4-åƒåœ¾é‚®ä»¶è¯†åˆ«"><a href="#4-åƒåœ¾é‚®ä»¶è¯†åˆ«" class="headerlink" title="4. åƒåœ¾é‚®ä»¶è¯†åˆ«"></a>4. åƒåœ¾é‚®ä»¶è¯†åˆ«</h2><p>ä¸¾ä¸ªæ —å­ ğŸŒ°</p>
<p>æˆ‘ä»¬ç°åœ¨è¦å¯¹é‚®ä»¶è¿›è¡Œåˆ†ç±»ï¼Œè¯†åˆ«åƒåœ¾é‚®ä»¶å’Œæ™®é€šé‚®ä»¶ï¼Œå¦‚æœæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ï¼Œé‚£ç›®æ ‡å°±æ˜¯åˆ¤æ–­ $P(â€œåƒåœ¾é‚®ä»¶â€|â€œå…·æœ‰æŸç‰¹å¾â€)$ æ˜¯å¦å¤§äº1/2ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰åƒåœ¾é‚®ä»¶å’Œæ­£å¸¸é‚®ä»¶å„1ä¸‡å°ä½œä¸ºè®­ç»ƒé›†ã€‚éœ€è¦åˆ¤æ–­ä»¥ä¸‹è¿™ä¸ªé‚®ä»¶æ˜¯å¦å±äºåƒåœ¾é‚®ä»¶ï¼š</p>
<blockquote>
<p>â€œæˆ‘å¸å¯åŠç†æ­£è§„å‘ç¥¨ï¼ˆä¿çœŸï¼‰17%å¢å€¼ç¨å‘ç¥¨ç‚¹æ•°ä¼˜æƒ ï¼â€</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯åˆ¤æ–­æ¦‚ç‡ $P(â€œåƒåœ¾é‚®ä»¶â€|â€œæˆ‘å¸å¯åŠç†æ­£è§„å‘ç¥¨ï¼ˆä¿çœŸï¼‰17\%å¢å€¼ç¨å‘ç¥¨ç‚¹æ•°ä¼˜æƒ ï¼â€)$ æ˜¯å¦å¤§äº1/2ã€‚</p>
<p>$$<br>P = \frac{åƒåœ¾é‚®ä»¶ä¸­å‡ºç°è¿™å¥è¯çš„æ¬¡æ•°}{åƒåœ¾é‚®ä»¶ä¸­å‡ºç°è¿™å¥è¯çš„æ¬¡æ•°+æ­£å¸¸é‚®ä»¶ä¸­å‡ºç°è¿™å¥è¯çš„æ¬¡æ•°}<br>$$</p>
<blockquote>
<p>å’³å’³ï¼Œæœ‰æœ¨æœ‰å‘ç°ï¼Œè½¬æ¢æˆçš„è¿™ä¸ªæ¦‚ç‡ï¼Œè®¡ç®—çš„æ–¹æ³•ï¼šå°±æ˜¯å†™ä¸ªè®¡æ•°å™¨ï¼Œç„¶å+1 +1 +1ç»Ÿè®¡å‡ºæ‰€æœ‰åƒåœ¾é‚®ä»¶å’Œæ­£å¸¸é‚®ä»¶ä¸­å‡ºç°è¿™å¥è¯çš„æ¬¡æ•°å•Šï¼ï¼ï¼</p>
</blockquote>
<h2 id="5-åˆ†è¯"><a href="#5-åˆ†è¯" class="headerlink" title="5. åˆ†è¯"></a>5. åˆ†è¯</h2><p>ä¸€ä¸ªå¾ˆæ‚²å“€ä½†æ˜¯å¾ˆç°å®çš„ç»“è®ºï¼š<code>è®­ç»ƒé›†æ˜¯æœ‰é™çš„ï¼Œè€Œå¥å­çš„å¯èƒ½æ€§åˆ™æ˜¯æ— é™çš„ã€‚æ‰€ä»¥è¦†ç›–æ‰€æœ‰å¥å­å¯èƒ½æ€§çš„è®­ç»ƒé›†æ˜¯ä¸å­˜åœ¨çš„</code>ã€‚</p>
<p>æ‰€ä»¥è§£å†³æ–¹æ³•æ˜¯ï¼Ÿ $å¥å­çš„å¯èƒ½æ€§æ— é™ï¼Œä½†æ˜¯è¯è¯­å°±é‚£ä¹ˆäº›$ï¼ï¼æ±‰è¯­å¸¸ç”¨å­—2500ä¸ªï¼Œå¸¸ç”¨è¯è¯­ä¹Ÿå°±56000ä¸ª(ä½ ç»ˆäºæ˜ç™½å°å­¦è¯­æ–‡è€å¸ˆçš„ç”¨å¿ƒè‰¯è‹¦äº†)ã€‚æŒ‰äººä»¬çš„ç»éªŒç†è§£ï¼Œä¸¤å¥è¯æ„æ€ç›¸è¿‘å¹¶ä¸å¼ºæ±‚éå¾—æ¯ä¸ªå­—ã€è¯è¯­éƒ½ä¸€æ ·ã€‚æ¯”å¦‚ $â€œæˆ‘å¸å¯åŠç†æ­£è§„å‘ç¥¨ï¼Œ17%å¢å€¼ç¨å‘ç¥¨ç‚¹æ•°ä¼˜æƒ ï¼â€$ï¼Œè¿™å¥è¯å°±æ¯”ä¹‹å‰é‚£å¥è¯å°‘äº†â€œï¼ˆä¿çœŸï¼‰â€è¿™ä¸ªè¯ï¼Œä½†æ˜¯æ„æ€åŸºæœ¬ä¸€æ ·ã€‚å¦‚æœæŠŠè¿™äº›æƒ…å†µä¹Ÿè€ƒè™‘è¿›æ¥ï¼Œé‚£æ ·æœ¬æ•°é‡å°±ä¼šå¢åŠ ï¼Œè¿™å°±ä¸æ–¹ä¾¿æˆ‘ä»¬è®¡ç®—äº†ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸æ‹¿å¥å­ä½œä¸ºç‰¹å¾ï¼Œè€Œæ˜¯æ‹¿å¥å­é‡Œé¢çš„è¯è¯­ï¼ˆç»„åˆï¼‰ä½œä¸ºç‰¹å¾å»è€ƒè™‘ã€‚æ¯”å¦‚ â€œ$æ­£è§„å‘ç¥¨$â€ å¯ä»¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„è¯è¯­ï¼Œâ€œ$å¢å€¼ç¨$â€ ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„è¯è¯­ç­‰ç­‰ã€‚</p>
<blockquote>
<p>å¥å­â€œæˆ‘å¸å¯åŠç†æ­£è§„å‘ç¥¨ï¼Œ17%å¢å€¼ç¨å‘ç¥¨ç‚¹æ•°ä¼˜æƒ ï¼â€å°±å¯ä»¥å˜æˆï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)ï¼‰ã€‚</p>
</blockquote>
<p>äºæ˜¯ä½ æ¥è§¦åˆ°äº†ä¸­æ–‡NLPä¸­ï¼Œæœ€æœ€æœ€é‡è¦çš„æŠ€æœ¯ä¹‹ä¸€ï¼š<strong><code>åˆ†è¯</code></strong>ï¼ï¼ï¼ä¹Ÿå°±æ˜¯æŠŠä¸€æ•´å¥è¯æ‹†åˆ†æˆæ›´ç»†ç²’åº¦çš„è¯è¯­æ¥è¿›è¡Œè¡¨ç¤ºã€‚å¦å¤–ï¼Œåˆ†è¯ä¹‹åå»é™¤æ ‡ç‚¹ç¬¦å·ã€æ•°å­—ç”šè‡³æ— å…³æˆåˆ†(åœç”¨è¯)æ˜¯ç‰¹å¾é¢„å¤„ç†ä¸­çš„ä¸€é¡¹æŠ€æœ¯ã€‚  </p>
<p>ä¸­æ–‡åˆ†è¯æ˜¯ä¸€ä¸ªä¸“é—¨çš„æŠ€æœ¯é¢†åŸŸ(æˆ‘ä¸ä¼šå‘Šè¯‰ä½ æŸæœç´¢å¼•æ“å‚ç ç –å·¥æœ‰ä¸“é—¨åšåˆ†è¯çš„ï¼ï¼ï¼)  </p>
<p>æˆ‘ä»¬è§‚å¯Ÿ$ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)$ï¼Œè¿™å¯ä»¥ç†è§£æˆä¸€ä¸ªå‘é‡ï¼šå‘é‡çš„æ¯ä¸€ç»´åº¦éƒ½è¡¨ç¤ºç€è¯¥ $ç‰¹å¾è¯$ åœ¨æ–‡æœ¬ä¸­çš„ç‰¹å®šä½ç½®å­˜åœ¨ã€‚è¿™ç§å°†ç‰¹å¾æ‹†åˆ†æˆæ›´å°çš„å•å…ƒï¼Œä¾æ®è¿™äº›æ›´çµæ´»ã€æ›´ç»†ç²’åº¦çš„ç‰¹å¾è¿›è¡Œåˆ¤æ–­çš„æ€ç»´æ–¹å¼ï¼Œåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸æœºå™¨å­¦ä¹ ä¸­éƒ½æ˜¯éå¸¸å¸¸è§åˆæœ‰æ•ˆçš„ã€‚</p>
<p>å› æ­¤è´å¶æ–¯å…¬å¼å°±å˜æˆäº†ï¼š</p>
<p>$$<br>P(â€œåƒåœ¾é‚®ä»¶â€|ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)ï¼‰<br>$$</p>
<p>$$<br>=\frac{P(ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)|â€åƒåœ¾é‚®ä»¶â€ï¼‰P(â€œåƒåœ¾é‚®ä»¶â€)}{P(ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)) }<br>$$</p>
<hr>
<p>$$<br>P(â€œæ­£å¸¸é‚®ä»¶â€|ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)ï¼‰<br>$$</p>
<p>$$<br>=\frac{P(ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)|â€æ­£å¸¸é‚®ä»¶â€ï¼‰P(â€œæ­£å¸¸é‚®ä»¶â€)}{P(ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)) }<br>$$</p>
<h2 id="6-æ¡ä»¶ç‹¬ç«‹å‡è®¾"><a href="#6-æ¡ä»¶ç‹¬ç«‹å‡è®¾" class="headerlink" title="6. æ¡ä»¶ç‹¬ç«‹å‡è®¾"></a>6. æ¡ä»¶ç‹¬ç«‹å‡è®¾</h2><p>ä¸‹é¢æˆ‘ä»¬é©¬ä¸Šä¼šçœ‹åˆ°ä¸€ä¸ªéå¸¸ç®€å•ç²—æš´çš„å‡è®¾ã€‚</p>
<p>$P(ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)|â€åƒåœ¾é‚®ä»¶â€ï¼‰$ ä¾æ—§ä¸å¤Ÿå¥½æ±‚ï¼Œæˆ‘ä»¬å¼•è¿›ä¸€ä¸ªå¾ˆæœ´ç´ çš„è¿‘ä¼¼ã€‚ä¸ºäº†è®©å…¬å¼æ˜¾å¾—æ›´åŠ ç´§å‡‘ï¼Œæˆ‘ä»¬ä»¤å­—æ¯ <code>S</code> è¡¨ç¤ºâ€œåƒåœ¾é‚®ä»¶â€,ä»¤å­—æ¯ <code>H</code> è¡¨ç¤ºâ€œæ­£å¸¸é‚®ä»¶â€ã€‚è¿‘ä¼¼å…¬å¼å¦‚ä¸‹ï¼š</p>
<p>$$<br>P(ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)|Sï¼‰<br>$$</p>
<p>$$<br>=P(â€œæˆ‘â€|Sï¼‰Ã—P(â€œå¸â€|Sï¼‰Ã—P(â€œå¯â€|Sï¼‰Ã—P(â€œåŠç†â€|Sï¼‰Ã—P(â€œæ­£è§„å‘ç¥¨â€|Sï¼‰<br>$$</p>
<p>$$<br>Ã—P(â€œä¿çœŸâ€|Sï¼‰Ã—P(â€œå¢å€¼ç¨â€|Sï¼‰Ã—P(â€œå‘ç¥¨â€|Sï¼‰Ã—P(â€œç‚¹æ•°â€|Sï¼‰Ã—P(â€œä¼˜æƒ â€|S)<br>$$</p>
<p>è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„æ¡ä»¶ç‹¬ç«‹å‡è®¾ã€‚åŸºäºâ€œæ­£å¸¸é‚®ä»¶â€çš„æ¡ä»¶ç‹¬ç«‹å‡è®¾çš„å¼å­ä¸ä¸Šå¼ç±»ä¼¼ï¼Œæ­¤å¤„çœå»ã€‚æ¥ç€ï¼Œå°†æ¡ä»¶ç‹¬ç«‹å‡è®¾ä»£å…¥ä¸Šé¢ä¸¤ä¸ªç›¸åäº‹ä»¶çš„è´å¶æ–¯å…¬å¼ã€‚ </p>
<p>äºæ˜¯æˆ‘ä»¬å°±åªéœ€è¦æ¯”è¾ƒä»¥ä¸‹ä¸¤ä¸ªå¼å­çš„å¤§å°ï¼š</p>
<p>$$<br>C = P(â€œæˆ‘â€|S)P(â€œå¸â€|S)P(â€œå¯â€|S)P(â€œåŠç†â€|S)P(â€œæ­£è§„å‘ç¥¨â€|S)<br>$$</p>
<p>$$<br>Ã—P(â€œä¿çœŸâ€|S)P(â€œå¢å€¼ç¨â€|S)P(â€œå‘ç¥¨â€|S)P(â€œç‚¹æ•°â€|S)P(â€œä¼˜æƒ â€|S)P(â€œåƒåœ¾é‚®ä»¶â€)<br>$$</p>
<hr>
<p>$$<br>\overline{C}=P(â€œæˆ‘â€|H)P(â€œå¸â€|H)P(â€œå¯â€|H)P(â€œåŠç†â€|H)P(â€œæ­£è§„å‘ç¥¨â€|H)<br>$$</p>
<p>$$<br>Ã—P(â€œä¿çœŸâ€|H)P(â€œå¢å€¼ç¨â€|H)P(â€œå‘ç¥¨â€|H)P(â€œç‚¹æ•°â€|H)P(â€œä¼˜æƒ â€|H)P(â€œæ­£å¸¸é‚®ä»¶â€)<br>$$</p>
<p>å‰(wo)å®³(cao)ï¼é…±ç´«å¤„ç†åå¼å­ä¸­çš„æ¯ä¸€é¡¹éƒ½ç‰¹åˆ«å¥½æ±‚ï¼åªéœ€è¦åˆ†åˆ«ç»Ÿè®¡å„ç±»é‚®ä»¶ä¸­è¯¥å…³é”®è¯å‡ºç°çš„æ¦‚ç‡å°±å¯ä»¥äº†ï¼ï¼ï¼æ¯”å¦‚ï¼š</p>
<blockquote>
<p>$$<br>P(â€œå‘ç¥¨â€|Sï¼‰=\frac{åƒåœ¾é‚®ä»¶ä¸­æ‰€æœ‰â€œå‘ç¥¨â€çš„æ¬¡æ•°}{åƒåœ¾é‚®ä»¶ä¸­æ‰€æœ‰è¯è¯­çš„æ¬¡æ•°}<br>$$</p>
</blockquote>
<p>ç»Ÿè®¡æ¬¡æ•°éå¸¸æ–¹ä¾¿ï¼Œè€Œä¸”æ ·æœ¬æ•°é‡è¶³å¤Ÿå¤§ï¼Œç®—å‡ºæ¥çš„æ¦‚ç‡æ¯”è¾ƒæ¥è¿‘çœŸå®ã€‚äºæ˜¯åƒåœ¾é‚®ä»¶è¯†åˆ«çš„é—®é¢˜å°±å¯è§£äº†ã€‚</p>
<h2 id="7-Naive-Bayesï¼Œâ€œNaiveâ€åœ¨ä½•å¤„ï¼Ÿ"><a href="#7-Naive-Bayesï¼Œâ€œNaiveâ€åœ¨ä½•å¤„ï¼Ÿ" class="headerlink" title="7. Naive Bayesï¼Œâ€œNaiveâ€åœ¨ä½•å¤„ï¼Ÿ"></a>7. Naive Bayesï¼Œâ€œNaiveâ€åœ¨ä½•å¤„ï¼Ÿ</h2><p>åŠ ä¸Šæ¡ä»¶ç‹¬ç«‹å‡è®¾çš„è´å¶æ–¯æ–¹æ³•å°±æ˜¯æœ´ç´ è´å¶æ–¯æ–¹æ³•ï¼ˆNaive Bayesï¼‰ã€‚ Naiveçš„å‘éŸ³æ˜¯â€œä¹ƒä¸€æ±¡â€ï¼Œæ„æ€æ˜¯â€œæœ´ç´ çš„â€ã€â€œå¹¼ç¨šçš„â€ã€â€œè ¢è ¢çš„â€ã€‚å’³å’³ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¤§ç¥ä»¬å–åè¯´è¯¥æ–¹æ³•æ˜¯ä¸€ç§æ¯”è¾ƒèŒè ¢çš„æ–¹æ³•ï¼Œä¸ºå•¥ï¼Ÿ</p>
<p>å°†å¥å­ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€) ä¸­çš„ ï¼ˆâ€œæˆ‘â€,â€œå¸â€ï¼‰ä¸ï¼ˆâ€œæ­£è§„å‘ç¥¨â€ï¼‰è°ƒæ¢ä¸€ä¸‹é¡ºåºï¼Œå°±å˜æˆäº†ä¸€ä¸ªæ–°çš„å¥å­ï¼ˆâ€œæ­£è§„å‘ç¥¨â€,â€œå¯â€,â€œåŠç†â€, â€œæˆ‘â€, â€œå¸â€)ã€‚æ–°å¥å­ä¸æ—§å¥å­çš„æ„æ€å®Œå…¨ä¸åŒã€‚ä½†ç”±äºä¹˜æ³•äº¤æ¢å¾‹ï¼Œæœ´ç´ è´å¶æ–¯æ–¹æ³•ä¸­ç®—å‡ºæ¥äºŒè€…çš„æ¡ä»¶æ¦‚ç‡å®Œå…¨ä¸€æ ·ï¼è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p>$$<br>P(ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€)|S) = P(â€œæˆ‘â€|S)P(â€œå¸â€|S)P(â€œå¯â€|S)P(â€œåŠç†â€|S)P(â€œæ­£è§„å‘ç¥¨â€|S)<br>$$</p>
<p>$$<br>=P(â€œæ­£è§„å‘ç¥¨â€|S)P(â€œå¯â€|S)P(â€œåŠç†â€|S)P(â€œæˆ‘â€|S)P(â€œå¸â€|Sï¼‰ =P(ï¼ˆâ€œæ­£è§„å‘ç¥¨â€,â€œå¯â€,â€œåŠç†â€, â€œæˆ‘â€, â€œå¸â€)|S)<br>$$</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æœ´ç´ è´å¶æ–¯çœ¼é‡Œï¼Œâ€œ<code>æˆ‘å¸å¯åŠç†æ­£è§„å‘ç¥¨</code>â€ ä¸ â€œ<code>æ­£è§„å‘ç¥¨å¯åŠç†æˆ‘å¸</code>â€ å®Œå…¨ç›¸åŒã€‚æœ´ç´ è´å¶æ–¯å¤±å»äº†è¯è¯­ä¹‹é—´çš„é¡ºåºä¿¡æ¯ã€‚è¿™å°±ç›¸å½“äºæŠŠæ‰€æœ‰çš„è¯æ±‡æ‰”è¿›åˆ°ä¸€ä¸ªè¢‹å­é‡Œéšä¾¿æ…å’Œï¼Œè´å¶æ–¯éƒ½è®¤ä¸ºå®ƒä»¬ä¸€æ ·ã€‚å› æ­¤è¿™ç§æƒ…å†µä¹Ÿç§°ä½œè¯è¢‹å­æ¨¡å‹(<code>bag of words</code>)ã€‚</p>
<p>è¯è¢‹å­æ¨¡å‹ä¸äººä»¬çš„æ—¥å¸¸ç»éªŒå®Œå…¨ä¸åŒã€‚æ¯”å¦‚ï¼Œåœ¨æ¡ä»¶ç‹¬ç«‹å‡è®¾çš„æƒ…å†µä¸‹ï¼Œâ€œ<code>æ­¦æ¾æ‰“æ­»äº†è€è™</code>â€ ä¸ â€œ<code>è€è™æ‰“æ­»äº†æ­¦æ¾</code>â€ è¢«å®ƒè®¤ä½œä¸€ä¸ªæ„æ€äº†ã€‚æ©ï¼Œæœ´ç´ è´å¶æ–¯å°±æ˜¯è¿™ä¹ˆå•çº¯å’Œç›´æ¥ï¼Œå¯¹æ¯”äºå…¶ä»–åˆ†ç±»å™¨ï¼Œå¥½åƒæ˜¯æ˜¾å¾—æœ‰é‚£ä¹ˆç‚¹èŒè ¢</p>
<h2 id="8-ç®€å•é«˜æ•ˆï¼ŒåŠä¸é€†è¢­"><a href="#8-ç®€å•é«˜æ•ˆï¼ŒåŠä¸é€†è¢­" class="headerlink" title="8. ç®€å•é«˜æ•ˆï¼ŒåŠä¸é€†è¢­"></a>8. ç®€å•é«˜æ•ˆï¼ŒåŠä¸é€†è¢­</h2><p>è™½ç„¶è¯´æœ´ç´ è´å¶æ–¯æ–¹æ³•èŒè ¢èŒè ¢çš„ï¼Œä½†å®è·µè¯æ˜åœ¨åƒåœ¾é‚®ä»¶è¯†åˆ«çš„åº”ç”¨è¿˜ä»¤äººè¯§å¼‚åœ°å¥½ã€‚Paul Grahamå…ˆç”Ÿè‡ªå·±ç®€å•åšäº†ä¸€ä¸ªæœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ï¼Œâ€œ1000å°åƒåœ¾é‚®ä»¶èƒ½å¤Ÿè¢«è¿‡æ»¤æ‰995å°ï¼Œå¹¶ä¸”æ²¡æœ‰ä¸€ä¸ªè¯¯åˆ¤â€ã€‚ï¼ˆPaul Grahamã€Šé»‘å®¢ä¸ç”»å®¶ã€‹ï¼‰</p>
<p>é‚£ä¸ªâ€¦æ•ˆæœä¸ºå•¥å¥½å‘¢ï¼Ÿ</p>
<blockquote>
<p>â€œæœ‰äººå¯¹æ­¤æå‡ºäº†ä¸€ä¸ªç†è®ºè§£é‡Šï¼Œå¹¶ä¸”å»ºç«‹äº†ä»€ä¹ˆæ—¶å€™æœ´ç´ è´å¶æ–¯çš„æ•ˆæœèƒ½å¤Ÿç­‰ä»·äºéæœ´ç´ è´å¶æ–¯çš„å……è¦æ¡ä»¶ï¼Œè¿™ä¸ªè§£é‡Šçš„æ ¸å¿ƒå°±æ˜¯ï¼šæœ‰äº›ç‹¬ç«‹å‡è®¾åœ¨å„ä¸ªåˆ†ç±»ä¹‹é—´çš„åˆ†å¸ƒéƒ½æ˜¯å‡åŒ€çš„æ‰€ä»¥å¯¹äºä¼¼ç„¶çš„ç›¸å¯¹å¤§å°ä¸äº§ç”Ÿå½±å“ï¼›å³ä¾¿ä¸æ˜¯å¦‚æ­¤ï¼Œä¹Ÿæœ‰å¾ˆå¤§çš„å¯èƒ½æ€§å„ä¸ªç‹¬ç«‹å‡è®¾æ‰€äº§ç”Ÿçš„æ¶ˆæå½±å“æˆ–ç§¯æå½±å“äº’ç›¸æŠµæ¶ˆï¼Œæœ€ç»ˆå¯¼è‡´ç»“æœå—åˆ°çš„å½±å“ä¸å¤§ã€‚å…·ä½“çš„æ•°å­¦å…¬å¼è¯·å‚è€ƒ[è¿™ç¯‡ paper][2]ã€‚â€ï¼ˆåˆ˜æœªé¹ã€Šï¼šå¹³å‡¡è€Œåˆç¥å¥‡çš„è´å¶æ–¯æ–¹æ³•ã€‹ï¼‰</p>
</blockquote>
<p>æ©ï¼Œè¿™ä¸ªåˆ†ç±»å™¨ä¸­æœ€ç®€å•ç›´æ¥çœ‹ä¼¼èŒè ¢çš„å°ç›†å‹ã€æœ´ç´ è´å¶æ–¯ã€ï¼Œå®é™…ä¸Šå´æ˜¯ç®€å•ã€å®ç”¨ã€ä¸”å¼ºå¤§çš„ã€‚</p>
<h2 id="9-å¤„ç†é‡å¤è¯è¯­çš„ä¸‰ç§æ–¹å¼"><a href="#9-å¤„ç†é‡å¤è¯è¯­çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="9. å¤„ç†é‡å¤è¯è¯­çš„ä¸‰ç§æ–¹å¼"></a>9. å¤„ç†é‡å¤è¯è¯­çš„ä¸‰ç§æ–¹å¼</h2><p>æˆ‘ä»¬ä¹‹å‰çš„ <font color="blue"> åƒåœ¾é‚®ä»¶å‘é‡ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€) </font>ï¼Œå…¶ä¸­æ¯ä¸ªè¯éƒ½ä¸é‡å¤ã€‚è€Œè¿™åœ¨ç°å®ä¸­å…¶å®å¾ˆå°‘è§ã€‚å› ä¸ºå¦‚æœæ–‡æœ¬é•¿åº¦å¢åŠ ï¼Œæˆ–è€…åˆ†è¯æ–¹æ³•æ”¹å˜ï¼Œå¿…ç„¶ä¼šæœ‰è®¸å¤šè¯é‡å¤å‡ºç°ï¼Œå› æ­¤éœ€è¦å¯¹è¿™ç§æƒ…å†µè¿›è¡Œè¿›ä¸€æ­¥æ¢è®¨ã€‚æ¯”å¦‚ä»¥ä¸‹è¿™æ®µé‚®ä»¶ï¼š</p>
<blockquote>
<p>â€œä»£å¼€å‘ç¥¨ã€‚å¢å€¼ç¨å‘ç¥¨ï¼Œæ­£è§„å‘ç¥¨ã€‚â€ åˆ†è¯åä¸ºå‘é‡ï¼š ï¼ˆâ€œä»£å¼€â€,â€œå‘ç¥¨â€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œæ­£è§„â€,â€œå‘ç¥¨â€ï¼‰</p>
</blockquote>
<p>å…¶ä¸­â€œå‘ç¥¨â€é‡å¤äº†ä¸‰æ¬¡ã€‚</p>
<h3 id="9-1-å¤šé¡¹å¼æ¨¡å‹"><a href="#9-1-å¤šé¡¹å¼æ¨¡å‹" class="headerlink" title="9.1 å¤šé¡¹å¼æ¨¡å‹"></a>9.1 å¤šé¡¹å¼æ¨¡å‹</h3><p>å¦‚æœæˆ‘ä»¬è€ƒè™‘é‡å¤è¯è¯­çš„æƒ…å†µï¼Œ<font color="blue">é‡å¤çš„è¯è¯­æˆ‘ä»¬è§†ä¸ºå…¶å‡ºç°å¤šæ¬¡</font>ï¼Œç›´æ¥æŒ‰æ¡ä»¶ç‹¬ç«‹å‡è®¾çš„æ–¹å¼æ¨å¯¼ï¼Œåˆ™æœ‰</p>
<p>$$<br>P(ï¼ˆâ€œä»£å¼€â€,â€œå‘ç¥¨â€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œæ­£è§„â€,â€œå‘ç¥¨â€)|Sï¼‰<br>$$</p>
<p>$$<br>=P(â€œä»£å¼€â€â€|S)P(â€œå‘ç¥¨â€|S)P(â€œå¢å€¼ç¨â€|S)P(â€œå‘ç¥¨â€|S)P(â€œæ­£è§„â€|S)P(â€œå‘ç¥¨â€|Sï¼‰<br>$$</p>
<p>$$<br>=P(â€œä»£å¼€â€â€|S)P^3(â€œå‘ç¥¨â€|S)P(â€œå¢å€¼ç¨â€|S)P(â€œæ­£è§„â€|S)<br>$$</p>
<blockquote>
<p>æ³¨æ„è¿™é¡¹ $P^3(â€œå‘ç¥¨â€|S)$</p>
</blockquote>
<h3 id="9-2-ä¼¯åŠªåˆ©æ¨¡å‹"><a href="#9-2-ä¼¯åŠªåˆ©æ¨¡å‹" class="headerlink" title="9.2 ä¼¯åŠªåˆ©æ¨¡å‹"></a>9.2 ä¼¯åŠªåˆ©æ¨¡å‹</h3><p>å¦ä¸€ç§æ›´åŠ ç®€åŒ–çš„æ–¹æ³•æ˜¯å°†é‡å¤çš„è¯è¯­éƒ½è§†ä¸ºå…¶åªå‡ºç°1æ¬¡ï¼Œ</p>
<p>$$<br>P(ï¼ˆâ€œä»£å¼€â€,â€œå‘ç¥¨â€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œæ­£è§„â€,â€œå‘ç¥¨â€)|Sï¼‰<br>$$</p>
<p>$$<br>=P(â€œå‘ç¥¨â€|S)P(â€œä»£å¼€â€â€|S)P(â€œå¢å€¼ç¨â€|S)P(â€œæ­£è§„â€|Sï¼‰<br>$$</p>
<p>ç»Ÿè®¡è®¡ç®— $P(â€œè¯è¯­â€|S)$ æ—¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<p>$$<br>P(â€œå‘ç¥¨â€|Sï¼‰=\frac{å‡ºç°â€œå‘ç¥¨â€çš„åƒåœ¾é‚®ä»¶çš„å°æ•°}{æ¯å°åƒåœ¾é‚®ä»¶ä¸­æ‰€æœ‰è¯å‡ºç°æ¬¡æ•°ï¼ˆå‡ºç°äº†åªè®¡ç®—ä¸€æ¬¡ï¼‰çš„æ€»å’Œ}<br>$$</p>
<p>è¿™æ ·çš„æ¨¡å‹å«ä½œ <font color="blue">ä¼¯åŠªåˆ©æ¨¡å‹</font>ï¼ˆåˆç§°ä¸ºäºŒé¡¹ç‹¬ç«‹æ¨¡å‹ï¼‰ã€‚è¿™ç§æ–¹å¼æ›´åŠ ç®€åŒ–ä¸æ–¹ä¾¿ã€‚å½“ç„¶å®ƒä¸¢å¤±äº†è¯é¢‘çš„ä¿¡æ¯ï¼Œå› æ­¤æ•ˆæœå¯èƒ½ä¼šå·®ä¸€äº›ã€‚</p>
<h3 id="9-3-æ··åˆæ¨¡å‹"><a href="#9-3-æ··åˆæ¨¡å‹" class="headerlink" title="9.3 æ··åˆæ¨¡å‹"></a>9.3 æ··åˆæ¨¡å‹</h3><p>ç¬¬ä¸‰ç§æ–¹å¼æ˜¯åœ¨è®¡ç®—å¥å­æ¦‚ç‡æ—¶ï¼Œä¸è€ƒè™‘é‡å¤è¯è¯­å‡ºç°çš„æ¬¡æ•°ï¼Œä½†æ˜¯åœ¨ç»Ÿè®¡è®¡ç®—è¯è¯­çš„æ¦‚ç‡$P(â€œè¯è¯­â€|S)$ æ—¶ï¼Œå´è€ƒè™‘é‡å¤è¯è¯­çš„å‡ºç°æ¬¡æ•°ï¼Œè¿™æ ·çš„æ¨¡å‹å¯ä»¥å«ä½œæ··åˆæ¨¡å‹ã€‚</p>
<p><img src="/images/ml/bayes/bayes-03.jpg" alt=""></p>
<p>å…·ä½“å®è·µä¸­é‡‡ç”¨é‚£ç§æ¨¡å‹ï¼Œå…³é”®çœ‹å…·ä½“çš„ä¸šåŠ¡åœºæ™¯ï¼Œä¸€ä¸ªç®€å•ç»éªŒæ˜¯ï¼Œå¯¹äºåƒåœ¾é‚®ä»¶è¯†åˆ«ï¼Œæ··åˆæ¨¡å‹æ›´å¥½äº›ã€‚</p>
<h2 id="10-å»é™¤åœç”¨è¯ä¸é€‰æ‹©å…³é”®è¯"><a href="#10-å»é™¤åœç”¨è¯ä¸é€‰æ‹©å…³é”®è¯" class="headerlink" title="10. å»é™¤åœç”¨è¯ä¸é€‰æ‹©å…³é”®è¯"></a>10. å»é™¤åœç”¨è¯ä¸é€‰æ‹©å…³é”®è¯</h2><p>æˆ‘ä»¬ç»§ç»­è§‚å¯Ÿ<strong>ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)</strong> è¿™å¥è¯ã€‚å…¶å®ï¼Œåƒ<strong>â€œæˆ‘â€ã€â€œå¯â€</strong>ä¹‹ç±»è¯å…¶å®éå¸¸ä¸­æ€§ï¼Œæ— è®ºå…¶æ˜¯å¦å‡ºç°åœ¨åƒåœ¾é‚®ä»¶ä¸­éƒ½æ— æ³•å¸®åŠ©åˆ¤æ–­çš„æœ‰ç”¨ä¿¡æ¯ã€‚æ‰€ä»¥å¯ä»¥ç›´æ¥ä¸è€ƒè™‘è¿™äº›å…¸å‹çš„è¯ã€‚è¿™äº›æ— åŠ©äºæˆ‘ä»¬åˆ†ç±»çš„è¯è¯­å«ä½œ â€œåœç”¨è¯â€ï¼ˆ<code>Stop Words</code>ï¼‰ã€‚è¿™æ ·å¯ä»¥å‡å°‘æˆ‘ä»¬è®­ç»ƒæ¨¡å‹ã€åˆ¤æ–­åˆ†ç±»çš„æ—¶é—´ã€‚ äºæ˜¯ä¹‹å‰çš„å¥å­å°±å˜æˆäº†<strong>ï¼ˆâ€œå¸â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€) </strong>ã€‚</p>
<p>æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æã€‚ä»¥äººç±»çš„ç»éªŒï¼Œå…¶å® <strong>â€œæ­£è§„å‘ç¥¨â€ã€â€œå‘ç¥¨â€</strong> è¿™ç±»çš„è¯å¦‚æœå‡ºç°çš„è¯ï¼Œé‚®ä»¶ä½œä¸ºåƒåœ¾é‚®ä»¶çš„æ¦‚ç‡éå¸¸å¤§ï¼Œå¯ä»¥ä½œä¸ºæˆ‘ä»¬åŒºåˆ†åƒåœ¾é‚®ä»¶çš„â€œå…³é”®è¯â€ã€‚è€Œåƒ <strong>â€œå¸â€ã€â€œåŠç†â€ã€â€œä¼˜æƒ â€</strong> è¿™ç±»çš„è¯åˆ™æœ‰ç‚¹é¸¡è‚‹ï¼Œå¯èƒ½æœ‰åŠ©äºåˆ†ç±»ï¼Œä½†åˆä¸é‚£ä¹ˆå¼ºçƒˆã€‚å¦‚æœæƒ³çœäº‹åšä¸ªç®€å•çš„åˆ†ç±»å™¨çš„è¯ï¼Œåˆ™å¯ä»¥ç›´æ¥é‡‡ç”¨â€œå…³é”®è¯â€è¿›è¡Œç»Ÿè®¡ä¸åˆ¤æ–­ï¼Œå‰©ä¸‹çš„è¯å°±å¯ä»¥å…ˆä¸ç®¡äº†ã€‚äºæ˜¯ä¹‹å‰çš„åƒåœ¾é‚®ä»¶å¥å­å°±å˜æˆäº†<strong>ï¼ˆâ€œæ­£è§„å‘ç¥¨â€,â€œå‘ç¥¨â€)</strong> ã€‚è¿™æ ·å°±æ›´åŠ å‡å°‘äº†æˆ‘ä»¬è®­ç»ƒæ¨¡å‹ã€åˆ¤æ–­åˆ†ç±»çš„æ—¶é—´ï¼Œé€Ÿåº¦éå¸¸å¿«ã€‚</p>
<p><strong>â€œåœç”¨è¯â€å’Œâ€œå…³é”®è¯â€ä¸€èˆ¬éƒ½å¯ä»¥æå‰é äººå·¥ç»éªŒæŒ‡å®š</strong>ã€‚ä¸åŒçš„â€œåœç”¨è¯â€å’Œâ€œå…³é”®è¯â€è®­ç»ƒå‡ºæ¥<strong>çš„åˆ†ç±»å™¨</strong>çš„æ•ˆæœä¹Ÿä¼šæœ‰äº›å·®å¼‚ã€‚</p>
<h2 id="11-æµ…è°ˆå¹³æ»‘æŠ€æœ¯"><a href="#11-æµ…è°ˆå¹³æ»‘æŠ€æœ¯" class="headerlink" title="11. æµ…è°ˆå¹³æ»‘æŠ€æœ¯"></a>11. æµ…è°ˆå¹³æ»‘æŠ€æœ¯</h2><p>æˆ‘ä»¬æ¥è¯´ä¸ªé—®é¢˜(ä¸­æ–‡NLPé‡Œé—®é¢˜è¶…çº§å¤š)ï¼Œæ¯”å¦‚åœ¨è®¡ç®—ä»¥ä¸‹ç‹¬ç«‹æ¡ä»¶å‡è®¾çš„æ¦‚ç‡ï¼š</p>
<p>$$<br>P(ï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€)|S)<br>$$</p>
<p>$$<br>=P(â€œæˆ‘â€|S)P(â€œå¸â€|S)P(â€œå¯â€|S)P(â€œåŠç†â€|S)P(â€œæ­£è§„å‘ç¥¨â€|Sï¼‰<br>$$</p>
<p>æˆ‘ä»¬æ‰«æä¸€ä¸‹è®­ç»ƒé›†ï¼Œå‘ç° <strong>â€œæ­£è§„å‘ç¥¨â€è¿™ä¸ªè¯ä»å‡ºç°è¿‡ï¼ï¼ï¼ï¼Œäºæ˜¯ $P(â€œæ­£è§„å‘ç¥¨â€|Sï¼‰=0$ â€¦é—®é¢˜ä¸¥é‡äº†ï¼Œæ•´ä¸ªæ¦‚ç‡éƒ½å˜æˆ0äº†ï¼ï¼ï¼æœ´ç´ è´å¶æ–¯æ–¹æ³•é¢å¯¹ä¸€å †0ï¼Œå¾ˆå‡„æƒ¨åœ°å¤±æ•ˆäº†â€¦æ›´æ®‹é…·çš„æ˜¯</strong> è¿™ç§æƒ…å†µå…¶å®å¾ˆå¸¸è§ï¼Œ<strong>å› ä¸ºå“ªæ€•è®­ç»ƒé›†å†å¤§ï¼Œä¹Ÿå¯èƒ½æœ‰è¦†ç›–ä¸åˆ°çš„è¯è¯­ã€‚æœ¬è´¨ä¸Šè¿˜æ˜¯</strong>æ ·æœ¬æ•°é‡å¤ªå°‘ï¼Œä¸æ»¡è¶³å¤§æ•°å®šå¾‹ï¼Œè®¡ç®—å‡ºæ¥çš„æ¦‚ç‡å¤±çœŸã€‚ä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œä¸€ç§åˆ†ææ€è·¯å°±æ˜¯ç›´æ¥ä¸è€ƒè™‘è¿™æ ·çš„è¯è¯­ï¼Œä½†è¿™ç§æ–¹æ³•å°±ç›¸å½“äºé»˜è®¤ç»™ $P(â€œæ­£è§„å‘ç¥¨â€|Sï¼‰$ èµ‹å€¼ä¸º1ã€‚å…¶å®æ•ˆæœä¸å¤ªå¥½ï¼Œå¤§é‡çš„ç»Ÿè®¡ä¿¡æ¯ç»™æµªè´¹æ‰äº†ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æï¼Œæ—¢ç„¶å¯ä»¥é»˜è®¤èµ‹å€¼ä¸º1ï¼Œä¸ºä»€ä¹ˆä¸èƒ½é»˜è®¤èµ‹å€¼ä¸ºä¸€ä¸ªå¾ˆå°çš„æ•°ï¼Ÿè¿™å°±æ˜¯å¹³æ»‘æŠ€æœ¯çš„åŸºæœ¬æ€è·¯ï¼Œä¾æ—§ä¿æŒç€ä¸€è´¯çš„ä½œé£ï¼Œæœ´å®/åœŸä½†æ˜¯ç›´æ¥è€Œæœ‰æ•ˆã€‚</p>
<p>å¯¹äºä¼¯åŠªåˆ©æ¨¡å‹ï¼Œ$P(â€œæ­£è§„å‘ç¥¨â€|S)$ çš„ä¸€ç§å¹³æ»‘ç®—æ³•æ˜¯ï¼š</p>
<p>$$<br>P(â€œæ­£è§„å‘ç¥¨â€|Sï¼‰=\frac{å‡ºç°â€œæ­£è§„å‘ç¥¨â€çš„åƒåœ¾é‚®ä»¶çš„å°æ•°+1}{æ¯å°åƒåœ¾é‚®ä»¶ä¸­æ‰€æœ‰è¯å‡ºç°æ¬¡æ•°ï¼ˆå‡ºç°äº†åªè®¡ç®—ä¸€æ¬¡ï¼‰çš„æ€»å’Œ+2}<br>$$</p>
<p>å¯¹äºå¤šé¡¹å¼æ¨¡å‹ï¼Œ$P(â€œæ­£è§„å‘ç¥¨â€| S)$ çš„ä¸€ç§å¹³æ»‘ç®—æ³•æ˜¯ï¼š</p>
<p>$$<br>P(â€œå‘ç¥¨â€|Sï¼‰=\frac{æ¯å°åƒåœ¾é‚®ä»¶ä¸­å‡ºç°â€œå‘ç¥¨â€çš„æ¬¡æ•°çš„æ€»å’Œ+1}{æ¯å°åƒåœ¾é‚®ä»¶ä¸­æ‰€æœ‰è¯å‡ºç°æ¬¡æ•°ï¼ˆè®¡ç®—é‡å¤æ¬¡æ•°ï¼‰çš„æ€»å’Œ+è¢«ç»Ÿè®¡çš„è¯è¡¨çš„è¯è¯­æ•°é‡}<br>$$</p>
<p>è¯´èµ·æ¥ï¼Œå¹³æ»‘æŠ€æœ¯çš„ç§ç±»å…¶å®éå¸¸å¤šï¼Œæœ‰å…´è¶£çš„è¯å›å¤´æˆ‘ä»¬ä¸“é—¨æ‹‰ä¸ªä¸“é¢˜è®²è®²å¥½äº†ã€‚è¿™é‡Œåªæä¸€ç‚¹ï¼Œå°±æ˜¯æ‰€æœ‰çš„<strong>å¹³æ»‘æŠ€æœ¯éƒ½æ˜¯ç»™æœªå‡ºç°åœ¨è®­ç»ƒé›†ä¸­çš„è¯è¯­ä¸€ä¸ªä¼°è®¡çš„æ¦‚ç‡ï¼Œè€Œç›¸åº”åœ°è°ƒä½å…¶ä»–å·²ç»å‡ºç°çš„è¯è¯­çš„æ¦‚ç‡</strong>ã€‚</p>
<p>å¹³æ»‘æŠ€æœ¯æ˜¯å› ä¸ºæ•°æ®é›†å¤ªå°è€Œäº§ç”Ÿçš„ç°å®éœ€æ±‚ã€‚<strong>å¦‚æœæ•°æ®é›†è¶³å¤Ÿå¤§ï¼Œå¹³æ»‘æŠ€æœ¯å¯¹ç»“æœçš„å½±å“å°†ä¼šå˜å°</strong>ã€‚</p>
<h2 id="12-å†…å®¹å°ç»“"><a href="#12-å†…å®¹å°ç»“" class="headerlink" title="12. å†…å®¹å°ç»“"></a>12. å†…å®¹å°ç»“</h2><p>æˆ‘ä»¬æ‰¾äº†ä¸ªæœ€ç®€å•å¸¸è§çš„ä¾‹å­ï¼šåƒåœ¾é‚®ä»¶è¯†åˆ«ï¼Œè¯´æ˜äº†ä¸€ä¸‹æœ´ç´ è´å¶æ–¯è¿›è¡Œæ–‡æœ¬åˆ†ç±»çš„æ€è·¯è¿‡ç¨‹ã€‚åŸºæœ¬æ€è·¯æ˜¯å…ˆåŒºåˆ†å¥½è®­ç»ƒé›†ä¸æµ‹è¯•é›†ï¼Œå¯¹æ–‡æœ¬é›†åˆè¿›è¡Œåˆ†è¯ã€å»é™¤æ ‡ç‚¹ç¬¦å·ç­‰ç‰¹å¾é¢„å¤„ç†çš„æ“ä½œï¼Œç„¶åä½¿ç”¨æ¡ä»¶ç‹¬ç«‹å‡è®¾ï¼Œå°†åŸæ¦‚ç‡è½¬æ¢æˆè¯æ¦‚ç‡ä¹˜ç§¯ï¼Œå†è¿›è¡Œåç»­çš„å¤„ç†ã€‚</p>
<p>$$<br>è´å¶æ–¯å…¬å¼ + æ¡ä»¶ç‹¬ç«‹å‡è®¾ = æœ´ç´ è´å¶æ–¯æ–¹æ³•<br>$$</p>
<p>åŸºäºå¯¹é‡å¤è¯è¯­åœ¨è®­ç»ƒé˜¶æ®µä¸åˆ¤æ–­ï¼ˆæµ‹è¯•ï¼‰é˜¶æ®µçš„ä¸‰ç§ä¸åŒå¤„ç†æ–¹å¼ï¼Œæˆ‘ä»¬ç›¸åº”çš„æœ‰ä¼¯åŠªåˆ©æ¨¡å‹ã€å¤šé¡¹å¼æ¨¡å‹å’Œæ··åˆæ¨¡å‹ã€‚åœ¨è®­ç»ƒé˜¶æ®µï¼Œå¦‚æœæ ·æœ¬é›†åˆå¤ªå°å¯¼è‡´æŸäº›è¯è¯­å¹¶æœªå‡ºç°ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¹³æ»‘æŠ€æœ¯å¯¹å…¶æ¦‚ç‡ç»™ä¸€ä¸ªä¼°è®¡å€¼ã€‚è€Œä¸”å¹¶ä¸æ˜¯æ‰€æœ‰çš„è¯è¯­éƒ½éœ€è¦ç»Ÿè®¡ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç›¸åº”çš„â€œåœç”¨è¯â€å’Œâ€œå…³é”®è¯â€å¯¹æ¨¡å‹è¿›è¡Œè¿›ä¸€æ­¥ç®€åŒ–ï¼Œæé«˜è®­ç»ƒå’Œåˆ¤æ–­é€Ÿåº¦ã€‚</p>
<h2 id="13-åŒ¹é…å…³é”®è¯è¯†åˆ«spamï¼Ÿ"><a href="#13-åŒ¹é…å…³é”®è¯è¯†åˆ«spamï¼Ÿ" class="headerlink" title="13. åŒ¹é…å…³é”®è¯è¯†åˆ«spamï¼Ÿ"></a>13. åŒ¹é…å…³é”®è¯è¯†åˆ«spamï¼Ÿ</h2><p>æœ‰åŒå­¦å¯èƒ½ä¼šé—®ï¼šâ€œä½•å¿…è´¹è¿™ä¹ˆå¤§åŠ²ç®—é‚£ä¹ˆå¤šè¯çš„æ¦‚ç‡ï¼Ÿç›´æ¥çœ‹é‚®ä»¶ä¸­æœ‰æ²¡æœ‰â€˜ä»£å¼€å‘ç¥¨â€™ã€â€˜è½¬å”®å‘ç¥¨â€™ä¹‹ç±»çš„å…³é”®è¯ä¸å°±å¾—äº†ï¼Ÿå¦‚æœå…³é”®è¯æ¯”è¾ƒå¤šå°±è®¤ä¸ºæ˜¯åƒåœ¾é‚®ä»¶å‘—ã€‚â€</p>
<p>å…¶å®å…³é”®è¯åŒ¹é…çš„æ–¹æ³•å¦‚æœæœ‰æ•ˆçš„è¯çœŸä¸å¿…ç”¨æœ´ç´ è´å¶æ–¯ã€‚æ¯•ç«Ÿè¿™ç§æ–¹æ³•ç®€å•å˜›ï¼Œå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åŒ¹é…ã€‚ä»å†å²æ¥çœ‹ï¼Œä¹‹å‰æ²¡æœ‰è´å¶æ–¯æ–¹æ³•çš„æ—¶å€™ä¸»è¦ä¹Ÿæ˜¯ç”¨å…³é”®è¯åŒ¹é…ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•å‡†ç¡®ç‡å¤ªä½ã€‚æˆ‘ä»¬åœ¨å·¥ä½œé¡¹ç›®ä¸­ä¹Ÿå°è¯•è¿‡ç”¨å…³é”®è¯åŒ¹é…çš„æ–¹æ³•å»è¿›è¡Œæ–‡æœ¬åˆ†ç±»ï¼Œå‘ç°å¤§é‡è¯¯æŠ¥ã€‚æ„Ÿè§‰å°±åƒæ‰”åˆ°åƒåœ¾ç®±çš„é‚®ä»¶99%éƒ½æ˜¯æ­£å¸¸çš„ï¼è¿™æ ·çš„æ•ˆæœä¸å¿ç›´è§†ã€‚è€ŒåŠ ä¸€ä¸ªæœ´ç´ è´å¶æ–¯æ–¹æ³•å°±å¯èƒ½æŠŠè¯¯æŠ¥ç‡æ‹‰ä½è¿‘ä¸€ä¸ªæ•°é‡çº§ï¼Œä½“éªŒå¥½å¾—ä¸è¦ä¸è¦çš„ã€‚</p>
<p>å¦ä¸€ä¸ªåŸå› æ˜¯è¯è¯­ä¼šéšç€æ—¶é—´ä¸æ–­å˜åŒ–ã€‚å‘åƒåœ¾é‚®ä»¶çš„äººä¹Ÿä¸å‚»ï¼Œå½“ä»–ä»¬å‘ç°è‡ªå·±çš„é‚®ä»¶è¢«å¤§é‡å±è”½ä¹‹åï¼Œä¹Ÿä¼šè€ƒè™‘é‡‡ç”¨æ–°çš„æ–¹å¼ï¼Œå¦‚å˜æ¢æ–‡å­—ã€è¯è¯­ã€å¥å¼ã€é¢œè‰²ç­‰æ–¹å¼æ¥ç»•è¿‡ååƒåœ¾é‚®ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å¯¹äºåƒåœ¾é‚®ä»¶â€œæˆ‘å¸å¯åŠç†æ­£è§„å‘ç¥¨ï¼Œ17%å¢å€¼ç¨å‘ç¥¨ç‚¹æ•°ä¼˜æƒ â€,ä»–ä»¬é‡‡ç”¨<strong>ç«æ˜Ÿæ–‡ï¼šâ€œæ¶å¸å²¢åŠç†ãŠ£è¦é«®ç¥¨ï¼Œ17%å¢å€¤ç¨…é«®ç¥¨åš¸æ•¸å„ªè•™â€</strong>ï¼Œé‚£ä¹ˆå­—ç¬¦ä¸²åŒ¹é…çš„æ–¹æ³•åˆè¦é‡æ–°æ‰¾å‡ºè¿™äº›ç«æ˜Ÿæ–‡ï¼Œä¸€ä¸ªä¸€ä¸ªæ‰¾å‡ºå…³é”®è¯ï¼Œé‡æ–°å†™ä¸€äº›åŒ¹é…è§„åˆ™ã€‚æ›´å¯æ€•çš„æ˜¯ï¼Œè¿™äº›è§„åˆ™å¯èƒ½ç›¸äº’ä¹‹é—´çš„è€¦åˆå…³ç³»å¼‚å¸¸å¤æ‚ï¼Œè¦æŠŠå®ƒä»¬æ¢³ç†æ¸…æ¥šåˆæ˜¯å¤§ä¸€ä¸ªæ•°é‡çº§çš„å·¥ä½œé‡ã€‚ç­‰è¿™äº›è§„åˆ™å¤±æ•ˆäº†åˆè¦æ‰‹åŠ¨æ›´æ–°æ–°çš„è§„åˆ™â€¦â€¦<strong>æ— ç©·æ— å°½çŒ«é¼ æ¸¸æˆæœ€ç»ˆä¼šæŠŠçŒ«ç»™ç´¯æ­»</strong>ã€‚</p>
<p>è€Œæœ´ç´ è´å¶æ–¯æ–¹æ³•å´æ˜¾ç¤ºå‡ºæ— æ¯”çš„ä¼˜åŠ¿ã€‚å› ä¸ºå®ƒæ˜¯åŸºäºç»Ÿè®¡æ–¹æ³•çš„ï¼Œåªè¦è®­ç»ƒæ ·æœ¬ä¸­æœ‰æ›´æ–°çš„åƒåœ¾é‚®ä»¶çš„æ–°è¯è¯­ï¼Œå“ªæ€•å®ƒä»¬æ˜¯ç«æ˜Ÿæ–‡ï¼Œéƒ½èƒ½è‡ªåŠ¨åœ°æŠŠå“ªäº›æ›´æ•æ„Ÿçš„è¯è¯­ï¼ˆå¦‚â€œé«®â€ã€â€œãŠ£â€ç­‰ï¼‰ç»™å‡¸æ˜¾å‡ºæ¥ï¼Œå¹¶æ ¹æ®ç»Ÿè®¡æ„ä¹‰ä¸Šçš„æ•æ„Ÿæ€§ç»™ä»–ä»¬åˆ†é…é€‚å½“çš„æƒé‡ ï¼Œè¿™æ ·å°±ä¸éœ€è¦ä»€ä¹ˆäººå·¥äº†ï¼Œéå¸¸çœäº‹ã€‚ä½ åªéœ€è¦æ—¶ä¸æ—¶åœ°æ‹¿ä¸€äº›æœ€æ–°çš„æ ·æœ¬æ‰”åˆ°è®­ç»ƒé›†ä¸­ï¼Œé‡æ–°è®­ç»ƒä¸€æ¬¡å³å¯ã€‚</p>
<blockquote>
<p>å°è¡¥å……ä¸€ä¸‹ï¼Œå¯¹äºç«æ˜Ÿæ–‡ã€åŒéŸ³å­—ç­‰æ›¿ä»£è¯­è¨€ï¼Œä¸€èˆ¬çš„åˆ†è¯æŠ€æœ¯å¯èƒ½ä¼šåˆ†å¾—ä¸å‡†ï¼Œæœ€ç»ˆå¯èƒ½åªæŠŠä¸€ä¸ªä¸€ä¸ªå­—ç»™åˆ†å‡ºæ¥ï¼Œæˆä¸ºâ€œåˆ†å­—â€ã€‚æ•ˆæœå¯èƒ½ä¸ä¼šå¤ªå¥½ã€‚ä¹Ÿå¯ä»¥ç”¨è¿‡n-gramä¹‹ç±»çš„è¯­è¨€æ¨¡å‹ï¼Œæ‹¿åˆ°æœ€å¸¸è§çŸ­è¯­ã€‚å½“ç„¶ï¼Œå¯¹äºè‹±æ–‡ç­‰å¤©ç”Ÿè‡ªå¸¦ç©ºæ ¼æ¥é—´éš”å•è¯çš„è¯­è¨€ï¼Œåˆ†è¯åˆ™ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œä½¿ç”¨æœ´ç´ è´å¶æ–¯æ–¹æ³•å°†ä¼šæ›´åŠ é¡ºç•…ã€‚</p>
</blockquote>
<h2 id="14-å®é™…å·¥ç¨‹çš„tricks"><a href="#14-å®é™…å·¥ç¨‹çš„tricks" class="headerlink" title="14. å®é™…å·¥ç¨‹çš„tricks"></a>14. å®é™…å·¥ç¨‹çš„tricks</h2><p>åº”ç”¨æœ´ç´ è´å¶æ–¯æ–¹æ³•çš„è¿‡ç¨‹ä¸­ï¼Œä¸€äº›tricksèƒ½æ˜¾è‘—å¸®åŠ©å·¥ç¨‹è§£å†³é—®é¢˜ã€‚æˆ‘ä»¬æ¯•ç«Ÿç»éªŒæœ‰é™ï¼Œæ— æ³•å°†å®ƒä»¬å…¨éƒ½ç½—åˆ—å‡ºæ¥ï¼Œåªèƒ½å°±æ‰€çŸ¥çš„ä¸€ç‚¹ç‚¹ç»éªŒä¸å¤§å®¶åˆ†äº«ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ã€‚</p>
<h3 id="14-1-trick1ï¼šå–å¯¹æ•°"><a href="#14-1-trick1ï¼šå–å¯¹æ•°" class="headerlink" title="14.1 trick1ï¼šå–å¯¹æ•°"></a>14.1 trick1ï¼šå–å¯¹æ•°</h3><p>æˆ‘ä»¬æåˆ°ç”¨æ¥è¯†åˆ«åƒåœ¾é‚®ä»¶çš„æ–¹æ³•æ˜¯æ¯”è¾ƒä»¥ä¸‹ä¸¤ä¸ªæ¦‚ç‡çš„å¤§å°ï¼ˆå­—æ¯Sè¡¨ç¤ºâ€œåƒåœ¾é‚®ä»¶â€,å­—æ¯Hè¡¨ç¤ºâ€œæ­£å¸¸é‚®ä»¶â€ï¼‰ï¼š</p>
<p>$$<br>C = P(â€œæˆ‘â€|S)P(â€œå¸â€|S)P(â€œå¯â€|S)P(â€œåŠç†â€|S)P(â€œæ­£è§„å‘ç¥¨â€|S)<br>$$</p>
<p>$$<br>Ã—P(â€œä¿çœŸâ€|S)P(â€œå¢å€¼ç¨â€|S)P(â€œå‘ç¥¨â€|S)P(â€œç‚¹æ•°â€|S)P(â€œä¼˜æƒ â€|S)P(â€œåƒåœ¾é‚®ä»¶â€)<br>$$</p>
<p>$$<br>\overline{C}=P(â€œæˆ‘â€|H)P(â€œå¸â€|H)P(â€œå¯â€|H)P(â€œåŠç†â€|H)P(â€œæ­£è§„å‘ç¥¨â€|H)<br>$$</p>
<p>$$<br>Ã—P(â€œä¿çœŸâ€|H)P(â€œå¢å€¼ç¨â€|H)P(â€œå‘ç¥¨â€|H)P(â€œç‚¹æ•°â€|H)P(â€œä¼˜æƒ â€|H)P(â€œæ­£å¸¸é‚®ä»¶â€)<br>$$</p>
<p>ä½†è¿™é‡Œè¿›è¡Œäº†<strong>å¾ˆå¤šä¹˜æ³•è¿ç®—ï¼Œè®¡ç®—çš„æ—¶é—´å¼€é”€æ¯”è¾ƒå¤§</strong>ã€‚å°¤å…¶æ˜¯å¯¹äºç¯‡å¹…æ¯”è¾ƒé•¿çš„é‚®ä»¶ï¼Œå‡ ä¸‡ä¸ªæ•°ç›¸ä¹˜èµ·æ¥è¿˜æ˜¯éå¸¸èŠ±æ—¶é—´çš„ã€‚å¦‚æœèƒ½æŠŠ<strong>è¿™äº›ä¹˜æ³•å˜æˆåŠ æ³•åˆ™æ–¹ä¾¿å¾—å¤š</strong>ã€‚åˆšå¥½æ•°å­¦ä¸­çš„å¯¹æ•°å‡½æ•°logå°±å¯ä»¥å®ç°è¿™æ ·çš„åŠŸèƒ½ã€‚ä¸¤è¾¹åŒæ—¶å–å¯¹æ•°ï¼ˆæœ¬æ–‡ç»Ÿä¸€å–åº•æ•°ä¸º2ï¼‰ï¼Œåˆ™ä¸Šé¢çš„å…¬å¼å˜ä¸ºï¼š</p>
<p>$$<br>log{C} = log{P(â€œæˆ‘â€|S)}+log{P(â€œå¸â€|S)}+log{P(â€œå¯â€|S)}+log{P(â€œåŠç†â€|S)}+log{P(â€œæ­£è§„å‘ç¥¨â€|S)}<br>$$</p>
<p>$$<br>+log{P(â€œä¿çœŸâ€|S)}+log{P(â€œå¢å€¼ç¨â€|S)}+log{P(â€œå‘ç¥¨â€|S)}+log{P(â€œç‚¹æ•°â€|S)}+log{P(â€œä¼˜æƒ â€|S)}+log{P(â€œåƒåœ¾é‚®ä»¶â€)}<br>$$</p>
<p>$$<br>log{\overline{C}}=log{P(â€œæˆ‘â€|H)}+log{P(â€œå¸â€|H)}+log{P(â€œå¯â€|H)}+log{P(â€œåŠç†â€|H)}+log{P(â€œæ­£è§„å‘ç¥¨â€|H)}<br>$$</p>
<p>$$<br>+log{P(â€œä¿çœŸâ€|H)}+log{P(â€œå¢å€¼ç¨â€|H)}+log{P(â€œå‘ç¥¨â€|H)}+log{P(â€œç‚¹æ•°â€|H)}+log{P(â€œä¼˜æƒ â€|H)}+log{P(â€œæ­£å¸¸é‚®ä»¶â€)}<br>$$</p>
<p>æœ‰åŒå­¦å¯èƒ½è¦å«äº†ï¼šâ€œåšå¯¹æ•°è¿ç®—å²‚ä¸ä¼šä¹Ÿå¾ˆèŠ±æ—¶é—´ï¼Ÿâ€çš„ç¡®å¦‚æ­¤ï¼Œä½†æ˜¯å¯ä»¥åœ¨è®­ç»ƒé˜¶æ®µç›´æ¥è®¡ç®—  $logP$  ï¼Œç„¶åæŠŠä»–ä»¬å­˜åœ¨ä¸€å¼ å¤§çš„hashè¡¨é‡Œã€‚<strong>åœ¨åˆ¤æ–­çš„æ—¶å€™ç›´æ¥æå–hashè¡¨ä¸­å·²ç»è®¡ç®—å¥½çš„å¯¹æ•°æ¦‚ç‡ï¼Œç„¶åç›¸åŠ å³å¯ã€‚è¿™æ ·ä½¿å¾—åˆ¤æ–­æ‰€éœ€è¦çš„è®¡ç®—æ—¶é—´è¢«è½¬ç§»åˆ°äº†è®­ç»ƒé˜¶æ®µ</strong>ï¼Œå®æ—¶è¿è¡Œçš„æ—¶å€™é€Ÿåº¦å°±æ¯”ä¹‹å‰å¿«å¾—å¤šï¼Œè¿™å¯ä¸æ­¢å‡ ä¸ªæ•°é‡çº§çš„æå‡ã€‚</p>
<h3 id="14-2-trick2ï¼šè½¬æ¢ä¸ºæƒé‡"><a href="#14-2-trick2ï¼šè½¬æ¢ä¸ºæƒé‡" class="headerlink" title="14.2 trick2ï¼šè½¬æ¢ä¸ºæƒé‡"></a>14.2 trick2ï¼šè½¬æ¢ä¸ºæƒé‡</h3><p>å¯¹äºäºŒåˆ†ç±»ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­æé«˜åˆ¤æ–­çš„é€Ÿåº¦ã€‚æ—¢ç„¶è¦æ¯”è¾ƒ $log$ å’Œ $log{\overline{C}}$ çš„å¤§å°ï¼Œé‚£å°±å¯ä»¥ç›´æ¥å°†ä¸Šä¸‹ä¸¤å¼ç›¸å‡ï¼Œå¹¶ç»§ç»­åŒ–ç®€ï¼š</p>
<p>$$<br>log{\frac{C}{\overline{C}}}=log{\frac{P(â€œæˆ‘â€|S)}{P(â€œæˆ‘â€|H)}}+log{\frac{P(â€œå¸â€|S)}{P(â€œå¸â€|H)}}+log{\frac{P(â€œå¯â€|S)}{P(â€œå¯â€|H)}}+log{\frac{P(â€œåŠç†â€|S)}{P(â€œåŠç†â€|H)}}+log{\frac{P(â€œæ­£è§„å‘ç¥¨â€|S)}{P(â€œæ­£è§„å‘ç¥¨â€|H)}}<br>$$</p>
<p>$$<br>+log{\frac{P(â€œä¿çœŸâ€|S)}{P(â€œä¿çœŸâ€|H)}}+log{\frac{P(â€œå¢å€¼ç¨â€|S)}{P(â€œå¢å€¼ç¨â€|H)}}+log{\frac{P(â€œå‘ç¥¨â€|S)}{P(â€œå‘ç¥¨â€|H)}}+log{\frac{P(â€œç‚¹æ•°â€|S)}{P(â€œç‚¹æ•°â€|H)}}+log{\frac{P(â€œä¼˜æƒ â€|S)}{P(â€œä¼˜æƒ â€|H)}}+log{\frac{P(â€œæ­£å¸¸é‚®ä»¶â€|S)}{P(â€œæ­£å¸¸é‚®ä»¶â€)}}<br>$$</p>
<p>$log{\frac{C}{\overline{C}}}$å¦‚æœå¤§äº0åˆ™å±äºåƒåœ¾é‚®ä»¶ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå…¶ä¸­æ¯ä¸€é¡¹ä½œä¸ºå…¶å¯¹åº”è¯è¯­çš„æƒé‡ï¼Œæ¯”å¦‚ $log{\frac{P(â€œå‘ç¥¨â€|S)}{P(â€œå‘ç¥¨â€|H)}}$  å°±å¯ä»¥ä½œä¸ºè¯è¯­â€œå‘ç¥¨â€çš„æƒé‡ï¼Œæƒé‡è¶Šå¤§å°±è¶Šè¯´æ˜â€œå‘ç¥¨â€æ›´å¯èƒ½æ˜¯ä¸â€œåƒåœ¾é‚®ä»¶â€ç›¸å…³çš„ç‰¹å¾ã€‚è¿™æ ·å¯ä»¥æ ¹æ®æƒé‡çš„å¤§å°æ¥è¯„ä¼°å’Œç­›é€‰æ˜¾è‘—çš„ç‰¹å¾ï¼Œæ¯”å¦‚å…³é”®è¯ã€‚è€Œè¿™äº›æƒé‡å€¼å¯ä»¥ç›´æ¥æå‰è®¡ç®—å¥½è€Œå­˜åœ¨hashè¡¨ä¸­ ã€‚åˆ¤æ–­çš„æ—¶å€™ç›´æ¥å°†æƒé‡æ±‚å’Œå³å¯ã€‚</p>
<p>å…³é”®è¯hashè¡¨çš„æ ·å­å¦‚ä¸‹ï¼Œå·¦åˆ—æ˜¯æƒé‡ï¼Œå³åˆ—æ˜¯å…¶å¯¹åº”çš„è¯è¯­ï¼Œæƒé‡è¶Šé«˜çš„è¯´æ˜è¶Šâ€œå…³é”®â€ï¼š</p>
<p><img src="/images/ml/bayes/bayes-04.jpg" alt=""></p>
<h3 id="14-3-trick3ï¼šé€‰å–topkçš„å…³é”®è¯"><a href="#14-3-trick3ï¼šé€‰å–topkçš„å…³é”®è¯" class="headerlink" title="14.3 trick3ï¼šé€‰å–topkçš„å…³é”®è¯"></a>14.3 trick3ï¼šé€‰å–topkçš„å…³é”®è¯</h3><p>å‰æ–‡è¯´è¿‡å¯ä»¥é€šè¿‡æå‰é€‰å–å…³é”®è¯æ¥æé«˜åˆ¤æ–­çš„é€Ÿåº¦ã€‚æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥çœç•¥æå‰é€‰å–å…³é”®è¯çš„æ­¥éª¤ï¼Œå°±æ˜¯ç›´æ¥é€‰å–ä¸€æ®µæ–‡æœ¬ä¸­æƒé‡æœ€é«˜çš„Kä¸ªè¯è¯­ï¼Œå°†å…¶æƒé‡è¿›è¡ŒåŠ å’Œã€‚æ¯”å¦‚Paul Graham åœ¨ã€Šé»‘å®¢ä¸ç”»å®¶ã€‹ä¸­æ˜¯é€‰å–é‚®ä»¶ä¸­æƒé‡æœ€é«˜çš„15ä¸ªè¯è¯­è®¡ç®—çš„ã€‚</p>
<p>é€šè¿‡æƒé‡hashè¡¨å¯çŸ¥ï¼Œå¦‚æœæ˜¯æ‰€æœ‰è¯è¯­çš„æƒé‡ï¼Œåˆ™æƒé‡æœ‰æ­£æœ‰è´Ÿã€‚å¦‚æœåªé€‰æ‹©æƒé‡æœ€é«˜çš„ $K$ ä¸ªè¯è¯­ï¼Œåˆ™å®ƒä»¬çš„æƒé‡åŸºæœ¬éƒ½æ˜¯æ­£çš„ã€‚æ‰€ä»¥å°±ä¸èƒ½åƒä¹‹å‰é‚£æ ·åˆ¤æ–­ $log{\frac{C}{\overline{C}}}$ æ˜¯å¦å¤§äº0æ¥åŒºåˆ†é‚®ä»¶äº†ã€‚è€Œè¿™éœ€è¦ä¾é ç»éªŒé€‰å®šä¸€ä¸ªæ­£æ•°çš„é˜ˆå€¼ï¼ˆé—¨æ§›å€¼ï¼‰ ï¼Œä¾æ® $log{\frac{C}{\overline{C}}}$  ä¸è¯¥é—¨æ§›å€¼çš„å¤§å°æ¥è¯†åˆ«åƒåœ¾é‚®ä»¶ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè“è‰²ç‚¹ä»£è¡¨åƒåœ¾é‚®ä»¶ï¼Œç»¿è‰²ç‚¹ä»£è¡¨æ­£å¸¸é‚®ä»¶ï¼Œæ¨ªåæ ‡ä¸ºè®¡ç®—å‡ºæ¥çš„ $log{\frac{C}{\overline{C}}}$  å€¼ï¼Œä¸­é—´çš„çº¢çº¿ä»£è¡¨é˜ˆå€¼ã€‚</p>
<p><img src="/images/ml/bayes/bayes-07.jpg" style="width:500px; height:250px;"> </p>
<blockquote>
<p>k çš„é€‰å–ï¼Œéœ€è¦ä½ è‡ªå·±åˆ¤æ–­ã€‚å¯ä»¥é€šè¿‡äº¤å‰éªŒè¯æ¥åˆ¤æ–­ã€‚</p>
</blockquote>
<h3 id="14-4-trick4ï¼šåˆ†å‰²æ ·æœ¬"><a href="#14-4-trick4ï¼šåˆ†å‰²æ ·æœ¬" class="headerlink" title="14.4 trick4ï¼šåˆ†å‰²æ ·æœ¬"></a>14.4 trick4ï¼šåˆ†å‰²æ ·æœ¬</h3><p>é€‰å–topkä¸ªè¯è¯­çš„æ–¹æ³•å¯¹äºç¯‡å¹…å˜åŠ¨ä¸å¤§çš„é‚®ä»¶æ ·æœ¬æ¯”è¾ƒæœ‰æ•ˆã€‚ä½†æ˜¯å¯¹ç¯‡å¹…è¿‡å¤§æˆ–è€…è¿‡å°çš„é‚®ä»¶åˆ™ä¼šæœ‰åˆ¤æ–­è¯¯å·®ã€‚</p>
<p>æ¯”å¦‚è¿™ä¸ªåƒåœ¾é‚®ä»¶çš„ä¾‹å­ï¼šï¼ˆâ€œæˆ‘â€,â€œå¸â€,â€œå¯â€,â€œåŠç†â€,â€œæ­£è§„å‘ç¥¨â€,â€œä¿çœŸâ€,â€œå¢å€¼ç¨â€,â€œå‘ç¥¨â€,â€œç‚¹æ•°â€,â€œä¼˜æƒ â€)ã€‚åˆ†è¯å‡ºäº†10ä¸ªè¯è¯­ï¼Œå…¶ä¸­æœ‰â€œæ­£è§„å‘ç¥¨â€ã€â€œå‘ç¥¨â€2ä¸ªå…³é”®è¯ã€‚å…³é”®è¯çš„å¯†åº¦è¿˜æ˜¯è›®å¤§çš„ï¼Œåº”è¯¥ç®—æ˜¯æ•æ„Ÿé‚®ä»¶ã€‚ä½†å› ä¸ºé‡‡ç”¨æœ€é«˜15ä¸ªè¯è¯­çš„æƒé‡æ±‚å’Œï¼Œå¹¶ä¸”ç›¸åº”çš„é˜ˆå€¼æ˜¯åŸºäº15ä¸ªè¯çš„æƒ…å†µæœ‰æ•ˆï¼Œå¯èƒ½ç®—å‡ºæ¥çš„ç»“æœè¿˜å°äºä¹‹å‰çš„é˜ˆå€¼ï¼Œè¿™å°±é€ æˆæ¼åˆ¤äº†ã€‚  </p>
<p>ç±»ä¼¼çš„ï¼Œå¦‚æœä¸€å°ç¨åŠ¡ä¸»é¢˜çš„é‚®ä»¶æœ‰1000ä¸ªè¯è¯­ï¼Œå…¶ä¸­åªæœ‰â€œæ­£è§„å‘ç¥¨â€ã€â€œå‘ç¥¨â€ã€â€œé¿ç¨æ–¹æ³•â€3ä¸ªæƒé‡æ¯”è¾ƒå¤§çš„è¯è¯­ï¼Œå®ƒä»¬åªæ˜¯åœ¨æ­£æ–‡è¡¨è¿°ä¸­é¡ºå¸¦æåˆ°çš„å†…å®¹ã€‚å…³é”®è¯çš„å¯†åº¦è¢«è¾ƒé•¿çš„ç¯‡å¹…ç¨€é‡Šäº†ï¼Œåº”è¯¥ç®—æ˜¯æ­£å¸¸é‚®ä»¶ã€‚ä½†æ˜¯å´è¢«é˜ˆå€¼åˆ¤æ–­æˆæ•æ„Ÿé‚®ä»¶ï¼Œé€ æˆè¯¯åˆ¤äº†ã€‚<br>è¿™ä¸¤ç§æƒ…å†µéƒ½è¯´æ˜topkå…³é”®è¯çš„æ–¹æ³•éœ€è¦è€ƒè™‘ç¯‡å¹…çš„å½±å“ã€‚è¿™é‡Œæœ‰è®¸å¤šç§å¤„ç†æ–¹å¼ï¼Œå®ƒä»¬çš„åŸºæœ¬æ€æƒ³éƒ½æ˜¯é€‰å–è¯è¯­çš„ä¸ªæ•°åŠå¯¹åº”çš„é˜ˆå€¼è¦ä¸ç¯‡å¹…çš„å¤§å°æˆæ­£æ¯”ï¼Œæœ¬æ–‡åªä»‹ç»å…¶ä¸­ä¸€ç§æ–¹æ–¹æ³•ï¼š  </p>
<p>å¯¹äºé•¿ç¯‡å¹…é‚®ä»¶ï¼ŒæŒ‰ä¸€å®šçš„å¤§å°ï¼Œæ¯”å¦‚æ¯500å­—ï¼Œå°†å…¶åˆ†å‰²æˆå°çš„æ–‡æœ¬æ®µè½ï¼Œå†å¯¹å°æ–‡æœ¬æ®µè½é‡‡ç”¨topkå…³é”®è¯çš„æ–¹æ³•ã€‚åªè¦å…¶ä¸­æœ‰ä¸€ä¸ªå°æ–‡æœ¬æ®µè½è¶…è¿‡é˜ˆå€¼å°±åˆ¤æ–­æ•´å°é‚®ä»¶æ˜¯åƒåœ¾é‚®ä»¶ã€‚  </p>
<p>å¯¹äºè¶…çŸ­ç¯‡å¹…é‚®ä»¶ï¼Œæ¯”å¦‚50å­—ï¼Œå¯ä»¥æŒ‰ç¯‡å¹…ä¸æ ‡å‡†æ¯”è¾ƒç¯‡å¹…çš„æ¯”ä¾‹æ¥é€‰å–topkï¼Œä»¥ç¡®å®šåº”è¯¥åŒ¹é…å…³é”®è¯è¯­çš„ä¸ªæ•°ã€‚æ¯”å¦‚é€‰å–  50500Ã—15â‰ˆ250500Ã—15â‰ˆ2  ä¸ªè¯è¯­è¿›è¡ŒåŒ¹é…ï¼Œç›¸åº”çš„é˜ˆå€¼å¯ä»¥æ˜¯ä¹‹å‰é˜ˆå€¼çš„  215215  ã€‚ä»¥æ­¤æ¥åˆ¤æ–­åˆ™æ›´åˆç†ã€‚</p>
<h3 id="14-5-trick5ï¼šä½ç½®æƒé‡"><a href="#14-5-trick5ï¼šä½ç½®æƒé‡" class="headerlink" title="14.5 trick5ï¼šä½ç½®æƒé‡"></a>14.5 trick5ï¼šä½ç½®æƒé‡</h3><h3 id="14-6-trick6ï¼šèœœç½"><a href="#14-6-trick6ï¼šèœœç½" class="headerlink" title="14.6 trick6ï¼šèœœç½"></a>14.6 trick6ï¼šèœœç½</h3><p>æˆ‘ä»¬é€šè¿‡è¾›è¾›è‹¦è‹¦çš„ç»Ÿè®¡ä¸è®¡ç®—ï¼Œå¥½ä¸å®¹æ˜“å¾—åˆ°äº†ä¸åŒè¯è¯­çš„æƒé‡ã€‚ç„¶è€Œè¿™å¹¶ä¸æ˜¯ä¸€åŠ³æ°¸é€¸çš„ã€‚æˆ‘ä»¬æˆ‘ä»¬ä¹‹å‰äº¤ä»£è¿‡ï¼Œè¯è¯­åŠå…¶æƒé‡ä¼šéšç€æ—¶é—´ä¸æ–­å˜åŒ–ï¼Œéœ€è¦æ—¶ä¸æ—¶åœ°ç”¨æœ€æ–°çš„æ ·æœ¬æ¥è®­ç»ƒä»¥æ›´æ–°è¯è¯­åŠå…¶æƒé‡ã€‚</p>
<p>è€Œæœé›†æœ€æ–°åƒåœ¾é‚®ä»¶æœ‰ä¸€ä¸ªæŠ€å·§ï¼Œå°±æ˜¯éšä¾¿æ³¨å†Œä¸€äº›é‚®ç®±ï¼Œç„¶åå°†å®ƒä»¬å…¬å¸ƒåœ¨å„å¤§è®ºå›ä¸Šã€‚æ¥ä¸‹æ¥å°±åç­‰ä¸€ä¸ªæœˆï¼Œåˆ°æ—¶å€™æ”¶åˆ°çš„é‚®ä»¶å°±ç»å¤§éƒ¨åˆ†éƒ½æ˜¯åƒåœ¾é‚®ä»¶äº†ï¼ˆå¥½å¥¸è¯ˆï¼‰ã€‚å†æ‰¾ä¸€äº›æ­£å¸¸çš„é‚®ä»¶ï¼ŒåŸºæœ¬å°±èƒ½å¤Ÿè®­ç»ƒäº†ã€‚è¿™äº›ç”¨äºè‡ªåŠ¨æœé›†åƒåœ¾é‚®ä»¶çš„é‚®ç®±å«åšâ€œèœœç½â€ã€‚â€œèœœç½â€æ˜¯ç½‘ç»œå®‰å…¨é¢†åŸŸå¸¸ç”¨çš„æ‰‹æ®µï¼Œå› å…¶åŸç†ç±»ä¼¼è¯±æ•æ˜†è™«çš„è£…æœ‰èœœçš„ç½å­è€Œå¾—åã€‚æ¯”å¦‚æ€æ¯’è½¯ä»¶å…¬å¸ä¼šåˆ©ç”¨èœœç½æ¥ç›‘è§†æˆ–è·å¾—è®¡ç®—æœºç½‘ç»œä¸­çš„ç—…æ¯’æ ·æœ¬ã€æ”»å‡»è¡Œä¸ºç­‰ã€‚</p>
<h2 id="15-è´å¶æ–¯æ–¹æ³•çš„æ€ç»´æ–¹å¼"><a href="#15-è´å¶æ–¯æ–¹æ³•çš„æ€ç»´æ–¹å¼" class="headerlink" title="15. è´å¶æ–¯æ–¹æ³•çš„æ€ç»´æ–¹å¼"></a>15. è´å¶æ–¯æ–¹æ³•çš„æ€ç»´æ–¹å¼</h2><h3 id="15-1-é€†æ¦‚é—®é¢˜"><a href="#15-1-é€†æ¦‚é—®é¢˜" class="headerlink" title="15.1 é€†æ¦‚é—®é¢˜"></a>15.1 é€†æ¦‚é—®é¢˜</h3><p>$$<br>P(Y|X)=\frac{P(X|Y)P(Y)}{P(X)}<br>$$</p>
<p>å…ˆä¸è€ƒè™‘å…ˆéªŒæ¦‚ç‡ $P(Y)$ ä¸ $P(X)$ ï¼Œè§‚å¯Ÿä¸¤ä¸ªåéªŒæ¦‚ç‡ $P(Y|X)$ ä¸ $P(X|Y)$ï¼Œå¯è§è´å¶æ–¯å…¬å¼èƒ½å¤Ÿæ­ç¤ºä¸¤ä¸ªç›¸åæ–¹å‘çš„æ¡ä»¶æ¦‚ç‡ä¹‹é—´çš„è½¬æ¢å…³ç³»ã€‚</p>
<ul>
<li><p>ä»è´å¶æ–¯å†å²æ¥çœ‹, å…¶å°±æ˜¯ä¸ºäº†å¤„ç†æ‰€è°“ â€œ<code>é€†æ¦‚</code>â€ é—®é¢˜è€Œè¯ç”Ÿçš„ã€‚æ¯”å¦‚ $P(Y|X)$  ä¸èƒ½é€šè¿‡ç›´æ¥è§‚æµ‹æ¥å¾—åˆ°ç»“æœï¼Œè€Œ $P(X|Y)$ å´å®¹æ˜“é€šè¿‡ç›´æ¥è§‚æµ‹å¾—åˆ°ç»“æœï¼Œå°±å¯ä»¥é€šè¿‡è´å¶æ–¯å…¬å¼ä»é—´æ¥åœ°è§‚æµ‹å¯¹è±¡å»æ¨æ–­ä¸å¯ç›´æ¥è§‚æµ‹çš„å¯¹è±¡çš„æƒ…å†µã€‚</p>
</li>
<li><p><code>äººè¯ç‰ˆæœ¬</code>: åŸºäºé‚®ä»¶çš„æ–‡æœ¬å†…å®¹åˆ¤æ–­å…¶å±äºåƒåœ¾é‚®ä»¶çš„æ¦‚ç‡ä¸å¥½æ±‚ï¼ˆä¸å¯é€šè¿‡ç›´æ¥è§‚æµ‹ã€ç»Ÿè®¡å¾—åˆ°ï¼‰ï¼Œä½†æ˜¯åŸºäºå·²ç»æœé›†å¥½çš„åƒåœ¾é‚®ä»¶æ ·æœ¬ï¼Œå»ç»Ÿè®¡ï¼ˆç›´æ¥è§‚æµ‹ï¼‰å…¶æ–‡æœ¬å†…éƒ¨å„ä¸ªè¯è¯­çš„æ¦‚ç‡å´éå¸¸æ–¹ä¾¿ã€‚è¿™å°±å¯ä»¥ç”¨è´å¶æ–¯æ–¹æ³•ã€‚</p>
</li>
<li><p>å¼•ç”³ä¸€æ­¥: åŸºäºæ ·æœ¬ç‰¹å¾å»åˆ¤æ–­å…¶æ‰€å±æ ‡ç­¾çš„æ¦‚ç‡ä¸å¥½æ±‚ï¼Œä½†æ˜¯åŸºäºå·²ç»æœé›†å¥½çš„æ‰“ä¸Šæ ‡ç­¾çš„æ ·æœ¬ï¼ˆæœ‰ç›‘ç£ï¼‰ï¼Œå´å¯ä»¥ç›´æ¥ç»Ÿè®¡å±äºåŒä¸€æ ‡ç­¾çš„æ ·æœ¬å†…éƒ¨å„ä¸ªç‰¹å¾çš„æ¦‚ç‡åˆ†å¸ƒã€‚å› æ­¤è´å¶æ–¯æ–¹æ³•çš„ç†è®ºè§†è§’é€‚ç”¨äºä¸€åˆ‡åˆ†ç±»é—®é¢˜çš„æ±‚è§£ã€‚</p>
</li>
</ul>
<h3 id="15-2-å¤šåˆ†ç±»é—®é¢˜"><a href="#15-2-å¤šåˆ†ç±»é—®é¢˜" class="headerlink" title="15.2 å¤šåˆ†ç±»é—®é¢˜"></a>15.2 å¤šåˆ†ç±»é—®é¢˜</h3><ol>
<li>åƒåœ¾é‚®ä»¶</li>
<li>ç§äººé‚®ä»¶ (æ­£å¸¸)</li>
<li>å·¥ä½œé‚®ä»¶ (æ­£å¸¸)</li>
</ol>
<p>ç°åœ¨æœ‰è¿™ 3 ç±»é‚®ä»¶å„ 1 ä¸‡å°ä½œä¸ºæ ·æœ¬ã€‚éœ€è¦è®­ç»ƒå‡ºä¸€ä¸ªè´å¶æ–¯åˆ†ç±»å™¨ã€‚è¿™é‡Œä¾æ¬¡ç”¨ $Y_1,Y_2,Y_3$ è¡¨ç¤ºè¿™ä¸‰ç±»é‚®ä»¶ï¼Œç”¨ $X$ è¡¨ç¤ºè¢«åˆ¤æ–­çš„é‚®ä»¶ã€‚å¥—ç”¨è´å¶æ–¯å…¬å¼æœ‰ï¼š</p>
<p>$$<br>P(Y_1|X)=\frac{P(X|Y_1)P(Y_1)}{P(X)}<br>$$</p>
<p>$$<br>P(Y_2|X)=\frac{P(X|Y_2)P(Y_2)}{P(X)}<br>$$</p>
<p>$$<br>P(Y_3|X)=\frac{P(X|Y_3)P(Y_3)}{P(X)}<br>$$</p>
<p>é€šè¿‡æ¯”è¾ƒ <strong>3</strong> ä¸ªæ¦‚ç‡å€¼çš„å¤§å°å³å¯å¾—åˆ° $X$ æ‰€å±çš„åˆ†ç±»ã€‚å‘ç°ä¸‰ä¸ªå¼å­çš„åˆ†æ¯ $P(X)$ ä¸€æ ·ï¼Œæ¯”è¾ƒå¤§å°æ—¶å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œäºæ˜¯å°±å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸€ä¸ªå¼å­è¡¨è¾¾ä¸Šé¢ <strong>3</strong> å¼ï¼š</p>
<p>$$<br>P(Y_i|X)\propto P(X|Y_i)P(Y_i)  ï¼› i=1,2,3<br>$$</p>
<p>å…¶ä¸­ $\propto$ è¡¨ç¤ºâ€œæ­£æ¯”äºâ€ã€‚è€Œ $P(X|Y_i)$ åˆ™æœ‰ä¸ªç‰¹åˆ«é«˜é€¼æ ¼çš„åå­—å«åš â€œ<strong>ä¼¼ç„¶å‡½æ•°</strong>â€ã€‚å…¶å®æŠŠå®ƒç›´æ¥ç†è§£æˆâ€œ $P(Yi|X)$ çš„é€†åæ¡ä»¶æ¦‚ç‡â€ å°±æ–¹ä¾¿äº†ã€‚</p>
<blockquote>
<p>å¯¹äºä»»æ„å¤šåˆ†ç±»çš„é—®é¢˜éƒ½å¯ä»¥ç”¨è¿™æ ·çš„æ€è·¯å»ç†è§£ã€‚æ¯”å¦‚ <strong>æ–°é—»åˆ†ç±»ã€æƒ…æ„Ÿå–œæ€’å“€ä¹åˆ†ç±»</strong> ç­‰ç­‰ã€‚</p>
</blockquote>
<h3 id="15-3-å…ˆéªŒæ¦‚ç‡çš„é—®é¢˜"><a href="#15-3-å…ˆéªŒæ¦‚ç‡çš„é—®é¢˜" class="headerlink" title="15.3 å…ˆéªŒæ¦‚ç‡çš„é—®é¢˜"></a>15.3 å…ˆéªŒæ¦‚ç‡çš„é—®é¢˜</h3><p>åœ¨åƒåœ¾é‚®ä»¶çš„ä¾‹å­ä¸­ï¼Œå…ˆéªŒæ¦‚ç‡éƒ½ç›¸ç­‰ï¼Œ $P(Y_1)=P(Y_2)=P(Y_3)=10000/30000=1/3$ï¼Œæ‰€ä»¥ä¸Šé¢æ˜¯å¼å­åˆå¯ä»¥è¿›ä¸€æ­¥åŒ–ç®€ï¼š</p>
<p>$$<br>P(Y_i|X)\propto P(X|Y_i)  ï¼› i=1,2,3<br>$$</p>
<p>åªéœ€æ¯”è¾ƒå³è¾¹å¼å­ï¼ˆä¹Ÿå°±æ˜¯â€œä¼¼ç„¶å‡½æ•°â€ï¼‰çš„å¤§å°å°±å¯ä»¥äº†ã€‚è¿™ç§æ–¹æ³•å°±æ˜¯ä¼ è¯´ä¸­çš„<strong>æœ€å¤§ä¼¼ç„¶æ³•</strong>: ä¸è€ƒè™‘å…ˆéªŒæ¦‚ç‡è€Œç›´æ¥æ¯”è¾ƒä¼¼ç„¶å‡½æ•°ã€‚</p>
<p>å…³äºé€‰å‡ºæœ€ä½³åˆ†ç±» $Y_i$ æ˜¯å¦è¦è€ƒè™‘å…ˆéªŒæ¦‚ç‡ $P(Y_i)$ çš„é—®é¢˜ï¼Œæ›¾ç»åœ¨é¢‘ç‡å­¦æ´¾å’Œè´å¶æ–¯å­¦æ´¾ä¹‹é—´äº§ç”Ÿäº†æ¿€çƒˆçš„æ•™æ´¾å†²çªã€‚ç»Ÿè®¡å­¦å®¶ï¼ˆé¢‘ç‡å­¦æ´¾ï¼‰è¯´ï¼šæˆ‘ä»¬è®©æ•°æ®è‡ªå·±è¯´è¯ã€‚è¨€ä¸‹ä¹‹æ„å°±æ˜¯è¦æ‘’å¼ƒå…ˆéªŒæ¦‚ç‡ã€‚è€Œè´å¶æ–¯å­¦æ´¾æ”¯æŒè€…åˆ™è¯´ï¼šæ•°æ®ä¼šæœ‰å„ç§å„æ ·çš„åå·®ï¼Œè€Œä¸€ä¸ª<strong>é è°±çš„å…ˆéªŒæ¦‚ç‡</strong>åˆ™å¯ä»¥å¯¹è¿™äº›éšæœºå™ªéŸ³åšåˆ°å¥å£®.</p>
<p>æ¯”å¦‚æˆ‘ä»¬åœ¨é‡‡é›†åƒåœ¾é‚®ä»¶æ ·æœ¬çš„æ—¶å€™ï¼Œä¸å°å¿ƒdeleteæ‰äº†ä¸€åŠçš„æ•°æ®ï¼Œå°±å‰©ä¸‹5000å°é‚®ä»¶ã€‚åˆ™è®¡ç®—å‡ºæ¥çš„å…ˆéªŒæ¦‚ç‡ä¸º:</p>
<p>$$<br>P(Y_1)=5000/25000=1/5<br>$$</p>
<p>$$<br>P(Y_2)=P(Y_3)=10000/25000=2/5<br>$$</p>
<p>å¦‚æœè¿˜ç”¨è´å¶æ–¯æ–¹æ³•,å°±è¦åœ¨ä¼¼ç„¶å‡½æ•°åé¢ä¹˜ä¸Šå…ˆéªŒæ¦‚ç‡ã€‚æ¯”å¦‚ä¹‹å‰ç”¨æœ€å¤§ä¼¼ç„¶æ³•ç®—å‡º $Y_1$  åƒåœ¾é‚®ä»¶çš„æ¦‚ç‡å¤§ï¼Œä½†æ˜¯å› ä¸º $P(Y_1)$ ç‰¹åˆ«å°ï¼Œç”¨è´å¶æ–¯æ–¹æ³•å¾—å‡ºçš„ç»“æœæ˜¯ $Y_2$  ç§äººé‚®ä»¶çš„æ¦‚ç‡å¤§ã€‚é‚£ç›¸ä¿¡å“ªä¸ªå‘¢ï¼Ÿå…¶å®ï¼Œæˆ‘ä»¬åˆ æ‰äº†éƒ¨åˆ†å¸¦æ ‡ç­¾çš„æ ·æœ¬ï¼Œä»è®¡ç®—ç»“æœçœ‹ $P(Y1)$ï¼Œ$P(Y2)$ï¼Œ$P(Y3)$ çš„æ¦‚ç‡åˆ†å¸ƒå˜åŒ–äº†ï¼Œä½†å®é™…ä¸Š<strong>è¿™ä¸‰ä¸ªç±»åˆ«çš„çœŸå®åˆ†å¸ƒåº”è¯¥æ˜¯ä¸€ä¸ªå®¢è§‚çš„çŠ¶æ€ï¼Œä¸åº”è¯¥å› ä¸ºæˆ‘ä»¬çš„è®¡ç®—æ–¹æ³•è€Œå‘ç”Ÿå˜åŒ–</strong>ã€‚æ‰€ä»¥æ˜¯æˆ‘ä»¬è®¡ç®—å‡ºæ¥çš„å…ˆéªŒæ¦‚ç‡å¤±çœŸï¼Œåº”è¯¥æ”¾å¼ƒè¿™æ ·è®¡ç®—å‡ºæ¥çš„å…ˆéªŒæ¦‚ç‡ï¼Œè€Œç”¨æœ€å¤§ä¼¼ç„¶æ³•ã€‚</p>
<p>ä½†å³ä¾¿æˆ‘ä»¬ä¸åˆ æ‰ä¸€åŠåƒåœ¾é‚®ä»¶ï¼Œè¿™ä¸‰ç±»é‚®ä»¶çš„åˆ†å¸ƒå°±çœŸçš„æ˜¯ $1:1:1$ é‚£æ ·å¹³å‡å—ï¼Ÿé‚£ä¹Ÿæœªå¿…ã€‚<strong>æˆ‘ä»¬åªæ˜¯æŒ‰1:1:1è¿™æ ·çš„æ–¹å¼è¿›è¡Œäº†æŠ½æ ·è€Œå·²ï¼ŒçœŸæ­£åœ¨é‚®ç®±é‡Œæ”¶åˆ°çš„è¿™ä¸‰ç±»é‚®ä»¶çš„åˆ†å¸ƒå¯èƒ½å¹¶ä¸æ˜¯è¿™æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æˆ‘ä»¬å¯¹äºå…ˆéªŒæ¦‚ç‡ä¸€æ— æ‰€çŸ¥æ—¶ï¼Œåªèƒ½å‡è®¾æ¯ç§çŒœæµ‹çš„å…ˆéªŒæ¦‚ç‡æ˜¯å‡ç­‰çš„ï¼ˆå…¶å®è¿™ä¹Ÿæ˜¯äººç±»ç»éªŒçš„ç»“æœï¼‰ï¼Œè¿™ä¸ªæ—¶å€™å°±åªæœ‰ç”¨æœ€å¤§ä¼¼ç„¶äº†</strong>ã€‚åœ¨ç°å®è¿ç”¨è¿‡ç¨‹ä¸­å¦‚æœå‘ç°æœ€å¤§ä¼¼ç„¶æ³•æœ‰åå·®ï¼Œå¯ä»¥è€ƒè™‘å¯¹ä¸åŒçš„ä¼¼ç„¶å‡½æ•°è®¾å®šä¸€äº›ç³»æ•°æˆ–è€…é˜ˆå€¼ï¼Œä½¿å…¶æ¥è¿‘çœŸå®æƒ…å†µã€‚</p>
<p>ä½†æ˜¯ï¼Œ<strong>å¦‚æœæˆ‘ä»¬æœ‰è¶³å¤Ÿçš„è‡ªä¿¡ï¼Œè®­ç»ƒé›†ä¸­è¿™ä¸‰ç±»çš„æ ·æœ¬åˆ†å¸ƒçš„ç¡®å¾ˆæ¥è¿‘çœŸå®çš„æƒ…å†µï¼Œè¿™æ—¶å°±åº”è¯¥ç”¨è´å¶æ–¯æ–¹æ³•</strong>ã€‚éš¾æ€ªå‰é¢çš„è´å¶æ–¯å­¦æ´¾å¼ºè°ƒçš„æ˜¯â€œé è°±çš„å…ˆéªŒæ¦‚ç‡â€ã€‚æ‰€ä»¥è¯´<strong>è´å¶æ–¯å­¦æ´¾çš„é€‚ç”¨èŒƒå›´æ›´å¹¿ï¼Œå…³é”®è¦å…ˆéªŒæ¦‚ç‡é è°±ï¼Œè€Œé¢‘ç‡å­¦æ´¾æœ‰æ•ˆçš„å‰æä¹Ÿæ˜¯ä»–ä»¬çš„å…ˆéªŒæ¦‚ç‡åŒæ ·æ˜¯ç»éªŒç»Ÿè®¡çš„ç»“æœ</strong>ã€‚</p>
<h2 id="16-æœ´ç´ -è´å¶æ–¯æ–¹æ³•çš„å¸¸è§åº”ç”¨"><a href="#16-æœ´ç´ -è´å¶æ–¯æ–¹æ³•çš„å¸¸è§åº”ç”¨" class="headerlink" title="16. (æœ´ç´ )è´å¶æ–¯æ–¹æ³•çš„å¸¸è§åº”ç”¨"></a>16. (æœ´ç´ )è´å¶æ–¯æ–¹æ³•çš„å¸¸è§åº”ç”¨</h2><p><strong>è¤’è´¬åˆ†æ</strong></p>
<p>ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åº”ç”¨åœºæ™¯æ˜¯æƒ…æ„Ÿè¤’è´¬åˆ†æã€‚æ¯”å¦‚ä½ è¦ç»Ÿè®¡å¾®åšä¸Šäººä»¬å¯¹ä¸€ä¸ªæ–°ä¸Šæ˜ ç”µå½±çš„è¤’è´¬ç¨‹åº¦è¯„ä»·ï¼šå¥½ç‰‡è¿˜æ˜¯çƒ‚ç‰‡ã€‚ä½†æ˜¯ä¸€æ¡ä¸€æ¡åœ°çœ‹å¾®åšæ˜¯æ ¹æœ¬çœ‹ä¸è¿‡æ¥ï¼Œåªèƒ½ç”¨è‡ªåŠ¨åŒ–çš„æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ªå¾ˆç²—ç•¥çš„æ€è·¯ï¼š</p>
<ul>
<li>é¦–å…ˆæ˜¯ç”¨çˆ¬è™«å°†å¾®åšä¸Šæåˆ°è¿™ä¸ªç”µå½±åå­—çš„å¾®åšå…¨éƒ½æŠ“å–ä¸‹æ¥ï¼Œæ¯”å¦‚æœ‰10ä¸‡æ¡ã€‚</li>
<li>ç„¶åç”¨è®­ç»ƒå¥½çš„æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨åˆ†åˆ«åˆ¤æ–­è¿™äº›å¾®åšå¯¹ç”µå½±æ˜¯å¥½è¯„è¿˜æ˜¯å·®è¯„ã€‚</li>
<li>æœ€åç»Ÿè®¡å‡ºè¿™äº›å¥½è¯„çš„å½±è¯„å æ‰€æœ‰æ ·æœ¬ä¸­çš„æ¯”ä¾‹ï¼Œå°±èƒ½å½¢æˆå¾®åšç½‘å‹å¯¹è¿™ä¸ªç”µå½±ç»¼åˆè¯„ä»·çš„å¤§è‡´ä¼°è®¡ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥çš„æ ¸å¿ƒé—®é¢˜å°±æ˜¯è®­ç»ƒå‡ºä¸€ä¸ªé è°±çš„åˆ†ç±»å™¨ã€‚é¦–å…ˆéœ€è¦æœ‰æ‰“å¥½æ ‡ç­¾çš„æ–‡æœ¬ã€‚è¿™ä¸ªå¥½æ‰¾ï¼Œè±†ç“£å½±è¯„ä¸Šå°±æœ‰å¤§é‡ç½‘å‹å¯¹ä¹‹å‰ç”µå½±çš„è¯„ä»·ï¼Œå¹¶ä¸”å¯¹ç”µå½±è¿›è¡Œ1æ˜Ÿåˆ°5æ˜Ÿçš„è¯„ä»·ã€‚æˆ‘ä»¬å¯ä»¥è®¤ä¸º3æ˜Ÿä»¥ä¸Šçš„è¯„è®ºéƒ½æ˜¯å¥½è¯„ï¼Œ3æ˜Ÿä»¥ä¸‹çš„è¯„è®ºéƒ½æ˜¯å·®è¯„ã€‚è¿™æ ·å°±åˆ†åˆ«å¾—åˆ°äº†å¥½è¯„å·®è¯„ä¸¤ç±»çš„è¯­æ–™æ ·æœ¬ã€‚å‰©ä¸‹å°±å¯ä»¥ç”¨æœ´ç´ è´å¶æ–¯æ–¹æ³•è¿›è¡Œè®­ç»ƒäº†ã€‚åŸºæœ¬æ€è·¯å¦‚ä¸‹ï¼š</p>
<ul>
<li>è®­ç»ƒä¸æµ‹è¯•æ ·æœ¬ï¼šè±†ç“£å½±è¯„çš„ç½‘å‹è¯„è®ºï¼Œç”¨çˆ¬è™«æŠ“å–ä¸‹100ä¸‡æ¡ã€‚</li>
<li>æ ‡ç­¾ï¼š3æ˜Ÿä»¥ä¸Šçš„æ˜¯å¥½è¯„ï¼Œ3æ˜Ÿä»¥ä¸‹çš„æ˜¯å·®è¯„ã€‚</li>
<li>ç‰¹å¾ï¼šè±†ç“£è¯„è®ºåˆ†è¯åçš„è¯è¯­ã€‚ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ˜¯åªé€‰æ‹©å…¶ä¸­çš„å½¢å®¹è¯ï¼Œç½‘ä¸Šæœ‰å¤§é‡çš„æƒ…ç»ªè¯åº“å¯ä»¥ä¸ºæˆ‘ä»¬æ‰€ç”¨ã€‚</li>
<li>ç„¶åå†ç”¨å¸¸è§„çš„æœ´ç´ è´å¶æ–¯æ–¹æ³•è¿›è¡Œè®­ç»ƒã€‚</li>
</ul>
<p>ä½†æ˜¯ç”±äºè‡ªç„¶è¯­è¨€çš„ç‰¹ç‚¹ï¼Œåœ¨æå–ç‰¹å¾çš„è¿‡ç¨‹å½“ä¸­ï¼Œæœ‰ä¸€äº›trickséœ€è¦æ³¨æ„</p>
<ul>
<li><p><strong>å¯¹å¦å®šå¥è¿›è¡Œç‰¹åˆ«çš„å¤„ç†</strong>ã€‚æ¯”å¦‚è¿™å¥è¯â€œæˆ‘ä¸æ˜¯å¾ˆå–œæ¬¢éƒ¨ç”µå½±ï¼Œå› ä¸ºå®ƒè®©æˆ‘å¼€å¿ƒä¸èµ·æ¥ã€‚â€å…¶ä¸­ä¸¤ä¸ªå½¢å®¹è¯â€œå–œæ¬¢â€ã€â€œå¼€å¿ƒâ€éƒ½æ˜¯è¤’ä¹‰è¯ï¼Œä½†æ˜¯å› ä¸ºå¥å­çš„å¦å®šå¥ï¼Œæ‰€ä»¥æ•´ä½“æ˜¯è´¬ä¹‰çš„ã€‚æœ‰ä¸€ç§æ¯”è¾ƒç®€å•ç²—æš´çš„å¤„ç†æ–¹å¼ï¼Œå°±æ˜¯â€œå¯¹å¦å®šè¯ï¼ˆâ€œä¸â€ã€â€œéâ€ã€â€œæ²¡â€ç­‰ï¼‰ä¸å¥å°¾æ ‡ç‚¹ä¹‹é—´çš„æ‰€æœ‰å½¢å®¹è¯éƒ½é‡‡ç”¨å…¶å¦å®šå½¢å¼â€ ã€‚åˆ™è¿™å¥è¯ä¸­æå–å‡ºæ¥çš„å½¢å®¹è¯å°±åº”è¯¥æ˜¯â€œä¸å–œæ¬¢â€å’Œâ€œä¸å¼€å¿ƒâ€ã€‚</p>
</li>
<li><p>ä¸€èˆ¬è¯´æ¥ï¼Œ<strong>æœ€ç›¸å…³çš„æƒ…æ„Ÿè¯åœ¨ä¸€äº›æ–‡æœ¬ç‰‡æ®µä¸­ä»…ä»…å‡ºç°ä¸€æ¬¡ï¼Œè¯é¢‘æ¨¡å‹èµ·å¾—ä½œç”¨æœ‰é™</strong>ï¼Œç”šè‡³æ˜¯è´Ÿä½œç”¨ï¼Œåˆ™ä½¿ç”¨<code>ä¼¯åŠªåˆ©æ¨¡å‹</code>ä»£æ›¿å¤šé¡¹å¼æ¨¡å‹ã€‚è¿™ç§æƒ…å†µåœ¨å¾®åšè¿™æ ·çš„å°ç¯‡å¹…æ–‡æœ¬ä¸­ä¼¼ä¹ä¸å¤ªæ˜æ˜¾ï¼Œä½†æ˜¯åœ¨åšå®¢ã€ç©ºé—´ã€è®ºå›ä¹‹ç±»å…è®¸é•¿ç¯‡å¹…æ–‡æœ¬å‡ºç°çš„å¹³å°ä¸­éœ€è¦æ³¨æ„ã€‚</p>
</li>
<li><p>å…¶å®ï¼Œå‰¯è¯å¯¹æƒ…æ„Ÿçš„è¯„ä»·æœ‰ä¸€å®šå½±å“ã€‚â€œä¸å¾ˆå–œæ¬¢â€ä¸â€œå¾ˆä¸å–œæ¬¢â€çš„ç¨‹åº¦å°±æœ‰å¾ˆå¤§å·®å¼‚ã€‚ä½†å¦‚æœæ˜¯æœ´ç´ è´å¶æ–¯æ–¹æ³•çš„è¯æ¯”è¾ƒéš¾å¤„ç†è¿™æ ·çš„æƒ…å†µã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘ç”¨è¯­è¨€æ¨¡å‹æˆ–è€…åŠ å…¥è¯æ€§æ ‡æ³¨çš„ä¿¡æ¯è¿›è¡Œç»¼åˆåˆ¤æ–­ã€‚è¿™äº›å†…å®¹æˆ‘ä»¬å°†åœ¨ä¹‹åè¿›è¡Œæ¢è®¨ã€‚</p>
</li>
</ul>
<p>å½“ç„¶ç»è¿‡ä»¥ä¸Šçš„å¤„ç†ï¼Œæƒ…æ„Ÿåˆ†æè¿˜æ˜¯ä¼šæœ‰ä¸€éƒ¨åˆ†è¯¯åˆ¤ã€‚è¿™é‡Œæ¶‰åŠåˆ°è®¸å¤šé—®é¢˜ï¼Œéƒ½æ˜¯æƒ…æ„Ÿåˆ†æçš„éš¾ç‚¹ï¼š</p>
<ul>
<li><strong>æƒ…ç»ªè¡¨è¾¾çš„å«è“„å¾®å¦™</strong>ï¼šâ€œå¯¼æ¼”ä½ å‡ºæ¥ï¼Œæˆ‘ä¿è¯ä¸æ‰“æ­»ä½ ã€‚â€ä½ è®©æœºå™¨æ€ä¹ˆåˆ¤æ–­æ˜¯è¤’è¿˜æ˜¯è´¬ï¼Ÿ</li>
<li><strong>è½¬æŠ˜æ€§è¡¨è¾¾</strong>ï¼šâ€œæˆ‘éå¸¸å–œæ¬¢è¿™äº›å¤§ç‰Œæ¼”å‘˜ï¼Œéå¸¸å´‡æ‹œè¿™ä¸ªå¯¼æ¼”ï¼Œéå¸¸èµèµè¿™ä¸ªå‰§æœ¬ï¼Œéå¸¸æ¬£èµä»–ä»¬çš„é¢„å‘Šç‰‡ï¼Œæˆ‘ç”šè‡³ä¸ºäº†è¿™éƒ¨å½±ç‰‡æ•´æ•´æœŸå¾…äº†ä¸€å¹´ï¼Œæœ€åè¿›äº†ç”µå½±é™¢å‘ç°è¿™æ˜¯ä¸ªå™©æ¢¦ã€‚â€ äº”ä¸ªè¤’ä¹‰çš„å½¢å®¹è¯ã€å‰¯è¯å¯¹ä¸€ä¸ªä¸é‚£ä¹ˆè´¬ä¹‰çš„è¯ã€‚æœºå™¨è‡ªç„¶åˆ¤æ–­æˆè¤’ä¹‰ï¼Œä½†è¿™å¥è¯æ˜¯å¦¥å¦¥çš„è´¬ä¹‰ã€‚</li>
</ul>
<h2 id="17-å†…å®¹å°ç»“"><a href="#17-å†…å®¹å°ç»“" class="headerlink" title="17. å†…å®¹å°ç»“"></a>17. å†…å®¹å°ç»“</h2><p>ä»å‰é¢å¤§å®¶åŸºæœ¬å¯ä»¥çœ‹å‡ºï¼Œå·¥ç¨‹åº”ç”¨ä¸åŒäºå­¦æœ¯ç†è®ºï¼Œæœ‰è®¸å¤štrickséœ€è¦è€ƒè™‘ï¼Œè€Œç†è®ºæœ¬è´¨å°±æ˜¯ç¿»æ¥å€’å»æŠ˜è…¾è´å¶æ–¯å…¬å¼ï¼Œéƒ½å¿«ç©å‡ºèŠ±æ¥äº†ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python å­—ç¬¦ä¸²å¤„ç†-æ­£åˆ™è¡¨è¾¾å¼]]></title>
      <url>http://shopee.ai/2017/07/30/nlp/string-operation-re/</url>
      <content type="html"><![CDATA[<p>Python å­—ç¬¦ä¸²å¤„ç† ä¹‹ æ­£åˆ™è¡¨è¾¾å¼ <a href="https://github.com/blair101/machine-learning-action/tree/master/string_operation" target="_blank" rel="external">Github-ipynb</a></p>
<h3 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h3><p>æˆ‘ä»¬ä¸€èµ·å›å½’ä¸€ä¸‹pythonå­—ç¬¦ä¸²çš„ç›¸å…³æ“ä½œï¼Œè¿™æ˜¯éå¸¸åŸºç¡€çš„çŸ¥è¯†ï¼Œä½†å´æ˜¯ä½¿ç”¨é¢‘åº¦éå¸¸é«˜çš„ä¸€äº›åŠŸèƒ½ã€‚</p>
<a id="more"></a>
<h4 id="1-1-å»ç©ºæ ¼åŠç‰¹æ®Šç¬¦å·"><a href="#1-1-å»ç©ºæ ¼åŠç‰¹æ®Šç¬¦å·" class="headerlink" title="1.1 å»ç©ºæ ¼åŠç‰¹æ®Šç¬¦å·"></a>1.1 å»ç©ºæ ¼åŠç‰¹æ®Šç¬¦å·</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">' hello, world!'</span></span><br><span class="line"><span class="keyword">print</span> s.strip()</span><br><span class="line"><span class="keyword">print</span> s.lstrip(<span class="string">' hello, '</span>)</span><br><span class="line"><span class="keyword">print</span> s.rstrip(<span class="string">'!'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>hello, world!
world!
 hello, world
</code></pre><h4 id="1-2-è¿æ¥å­—ç¬¦ä¸²"><a href="#1-2-è¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="1.2 è¿æ¥å­—ç¬¦ä¸²"></a>1.2 è¿æ¥å­—ç¬¦ä¸²</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sStr1 = <span class="string">'strcat'</span></span><br><span class="line">sStr2 = <span class="string">'append'</span></span><br><span class="line">sStr1 += sStr2</span><br><span class="line"><span class="keyword">print</span> sStr1</span><br></pre></td></tr></table></figure>
<pre><code>strcatappend
</code></pre><h4 id="1-3-æŸ¥æ‰¾å­—ç¬¦"><a href="#1-3-æŸ¥æ‰¾å­—ç¬¦" class="headerlink" title="1.3 æŸ¥æ‰¾å­—ç¬¦"></a>1.3 æŸ¥æ‰¾å­—ç¬¦</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &lt; 0 ä¸ºæœªæ‰¾åˆ°</span></span><br><span class="line">sStr1 = <span class="string">'strchr'</span></span><br><span class="line">sStr2 = <span class="string">'r'</span></span><br><span class="line">nPos = sStr1.index(sStr2)</span><br><span class="line"><span class="keyword">print</span> nPos</span><br></pre></td></tr></table></figure>
<pre><code>2
</code></pre><h4 id="1-4-è¾ƒå­—ç¬¦ä¸²"><a href="#1-4-è¾ƒå­—ç¬¦ä¸²" class="headerlink" title="1.4 è¾ƒå­—ç¬¦ä¸²"></a>1.4 è¾ƒå­—ç¬¦ä¸²</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sStr1 = <span class="string">'strchr'</span></span><br><span class="line">sStr2 = <span class="string">'strch'</span></span><br><span class="line"><span class="keyword">print</span> cmp(sStr2,sStr1)</span><br><span class="line"><span class="keyword">print</span> cmp(sStr1,sStr2)</span><br><span class="line"><span class="keyword">print</span> cmp(sStr1,sStr1)</span><br></pre></td></tr></table></figure>
<pre><code>-1
1
0
</code></pre><h4 id="1-5-å¤§å°å†™è½¬æ¢"><a href="#1-5-å¤§å°å†™è½¬æ¢" class="headerlink" title="1.5 å¤§å°å†™è½¬æ¢"></a>1.5 å¤§å°å†™è½¬æ¢</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sStr1 = <span class="string">'JCstrlwr'</span></span><br><span class="line">sStr1 = sStr1.upper()</span><br><span class="line"><span class="comment">#sStr1 = sStr1.lower()</span></span><br><span class="line"><span class="keyword">print</span> sStr1</span><br></pre></td></tr></table></figure>
<pre><code>JCSTRLWR
</code></pre><h4 id="1-6-ç¿»è½¬å­—ç¬¦ä¸²"><a href="#1-6-ç¿»è½¬å­—ç¬¦ä¸²" class="headerlink" title="1.6 ç¿»è½¬å­—ç¬¦ä¸²"></a>1.6 ç¿»è½¬å­—ç¬¦ä¸²</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sStr1 = <span class="string">'abcdefg'</span></span><br><span class="line">sStr1 = sStr1[::<span class="number">-1</span>]</span><br><span class="line"><span class="keyword">print</span> sStr1</span><br></pre></td></tr></table></figure>
<pre><code>gfedcba
</code></pre><h4 id="1-7-æŸ¥æ‰¾å­—ç¬¦ä¸²"><a href="#1-7-æŸ¥æ‰¾å­—ç¬¦ä¸²" class="headerlink" title="1.7 æŸ¥æ‰¾å­—ç¬¦ä¸²"></a>1.7 æŸ¥æ‰¾å­—ç¬¦ä¸²</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sStr1 = <span class="string">'abcdefg'</span></span><br><span class="line">sStr2 = <span class="string">'cde'</span></span><br><span class="line"><span class="keyword">print</span> sStr1.find(sStr2)</span><br></pre></td></tr></table></figure>
<pre><code>2
</code></pre><h4 id="1-8-åˆ†å‰²å­—ç¬¦ä¸²"><a href="#1-8-åˆ†å‰²å­—ç¬¦ä¸²" class="headerlink" title="1.8 åˆ†å‰²å­—ç¬¦ä¸²"></a>1.8 åˆ†å‰²å­—ç¬¦ä¸²</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sStr1 = <span class="string">'ab,cde,fgh,ijk'</span></span><br><span class="line">sStr2 = <span class="string">','</span></span><br><span class="line">sStr1 = sStr1[sStr1.find(sStr2) + <span class="number">1</span>:]</span><br><span class="line"><span class="keyword">print</span> sStr1</span><br><span class="line"><span class="comment">#æˆ–è€…</span></span><br><span class="line">s = <span class="string">'ab,cde,fgh,ijk'</span></span><br><span class="line">print(s.split(<span class="string">','</span>))</span><br></pre></td></tr></table></figure>
<pre><code>cde,fgh,ijk
[&apos;ab&apos;, &apos;cde&apos;, &apos;fgh&apos;, &apos;ijk&apos;]
</code></pre><h4 id="1-9-é¢‘æ¬¡æœ€é«˜çš„å­—æ¯"><a href="#1-9-é¢‘æ¬¡æœ€é«˜çš„å­—æ¯" class="headerlink" title="1.9 é¢‘æ¬¡æœ€é«˜çš„å­—æ¯"></a>1.9 é¢‘æ¬¡æœ€é«˜çš„å­—æ¯</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#version 1</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_max_value_v1</span><span class="params">(text)</span>:</span></span><br><span class="line">    text = text.lower()</span><br><span class="line">    result = re.findall(<span class="string">'[a-zA-Z]'</span>, text)  <span class="comment"># å»æ‰åˆ—è¡¨ä¸­çš„ç¬¦å·ç¬¦</span></span><br><span class="line">    count = Counter(result)  <span class="comment"># Counter(&#123;'l': 3, 'o': 2, 'd': 1, 'h': 1, 'r': 1, 'e': 1, 'w': 1&#125;)</span></span><br><span class="line">    count_list = list(count.values())</span><br><span class="line">    max_value = max(count_list)</span><br><span class="line">    max_list = []</span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> count.items():</span><br><span class="line">        <span class="keyword">if</span> v == max_value:</span><br><span class="line">            max_list.append(k)</span><br><span class="line">    max_list = sorted(max_list)</span><br><span class="line">    <span class="keyword">return</span> max_list[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#version 2</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_max_value</span><span class="params">(text)</span>:</span></span><br><span class="line">    count = Counter([x <span class="keyword">for</span> x <span class="keyword">in</span> text.lower() <span class="keyword">if</span> x.isalpha()])</span><br><span class="line">    m = max(count.values())</span><br><span class="line">    <span class="keyword">return</span> sorted([x <span class="keyword">for</span> (x, y) <span class="keyword">in</span> count.items() <span class="keyword">if</span> y == m])[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#version 3</span></span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_max_value</span><span class="params">(text)</span>:</span></span><br><span class="line">    text = text.lower()</span><br><span class="line">    <span class="keyword">return</span> max(string.ascii_lowercase, key=text.count)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">max(range(<span class="number">6</span>), key = <span class="keyword">lambda</span> x : x&gt;<span class="number">2</span>)</span><br><span class="line"><span class="comment"># &gt;&gt;&gt; 3</span></span><br><span class="line"><span class="comment"># å¸¦å…¥keyå‡½æ•°ä¸­ï¼Œå„ä¸ªå…ƒç´ è¿”å›å¸ƒå°”å€¼ï¼Œç›¸å½“äº[False, False, False, True, True, True]</span></span><br><span class="line"><span class="comment"># keyå‡½æ•°è¦æ±‚è¿”å›å€¼ä¸ºTrueï¼Œæœ‰å¤šä¸ªç¬¦åˆçš„å€¼ï¼Œåˆ™æŒ‘é€‰ç¬¬ä¸€ä¸ªã€‚</span></span><br><span class="line"></span><br><span class="line">max([<span class="number">3</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">0</span>], key = <span class="keyword">lambda</span> x : x)</span><br><span class="line"><span class="comment"># &gt;&gt;&gt; 5</span></span><br><span class="line"><span class="comment"># å¸¦å…¥keyå‡½æ•°ä¸­ï¼Œå„ä¸ªå…ƒç´ è¿”å›è‡ªèº«çš„å€¼ï¼Œæœ€å¤§çš„å€¼ä¸º5ï¼Œè¿”å›5.</span></span><br><span class="line"></span><br><span class="line">max(<span class="string">'ah'</span>, <span class="string">'bf'</span>, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line"><span class="comment"># &gt;&gt;&gt; 'ah'</span></span><br><span class="line"><span class="comment"># å¸¦å…¥keyå‡½æ•°ï¼Œå„ä¸ªå­—ç¬¦ä¸²è¿”å›æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­'ah'çš„hè¦å¤§äº'bf'ä¸­çš„fï¼Œå› æ­¤è¿”å›'ah'</span></span><br><span class="line"></span><br><span class="line">max(<span class="string">'ah'</span>, <span class="string">'bf'</span>, key=<span class="keyword">lambda</span> x: x[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># &gt;&gt;&gt; 'bf'</span></span><br><span class="line"><span class="comment"># å¸¦å…¥keyå‡½æ•°ï¼Œå„ä¸ªå­—ç¬¦ä¸²è¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­'bf'çš„bè¦å¤§äº'ah'ä¸­çš„aï¼Œå› æ­¤è¿”å›'bf'</span></span><br><span class="line"></span><br><span class="line">text = <span class="string">'Hello World'</span></span><br><span class="line">max(<span class="string">'abcdefghijklmnopqrstuvwxyz'</span>, key=text.count)</span><br><span class="line"><span class="comment"># &gt;&gt;&gt; 'l'</span></span><br><span class="line"><span class="comment"># å¸¦å…¥keyå‡½æ•°ï¼Œè¿”å›å„ä¸ªå­—ç¬¦åœ¨'Hello World'ä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œå‡ºç°æ¬¡æ•°æœ€å¤šçš„å­—ç¬¦ä¸º'l',å› æ­¤è¾“å‡º'l'</span></span><br></pre></td></tr></table></figure>
<pre><code>&apos;l&apos;
</code></pre><h4 id="Count-occurrence-of-a-character-in-a-Python-string"><a href="#Count-occurrence-of-a-character-in-a-Python-string" class="headerlink" title="Count occurrence of a character in a Python string"></a>Count occurrence of a character in a Python string</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#T  h  e     M  i  s  s  i  s  s  i  p  p  i     R  i  v  e  r</span></span><br><span class="line"><span class="comment">#[1, 1, 2, 2, 1, 5, 4, 4, 5, 4, 4, 5, 2, 2, 5, 2, 1, 5, 1, 2, 1]</span></span><br><span class="line">sentence=<span class="string">'The Mississippi River'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count_chars</span><span class="params">(s)</span>:</span></span><br><span class="line">        s=s.lower()</span><br><span class="line">        count=list(map(s.count,s))</span><br><span class="line">        <span class="keyword">return</span> (max(count))</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> count_chars(sentence)</span><br></pre></td></tr></table></figure>
<pre><code>5
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Jieba ä¸­æ–‡å¤„ç†]]></title>
      <url>http://shopee.ai/2017/07/29/nlp/jieba/</url>
      <content type="html"><![CDATA[<p>NLP åŸºç¡€æŠ€èƒ½ ï¼š Jieba ä¸­æ–‡åˆ†è¯ä¸å¤„ç†</p>
<p><a href="https://github.com/blair101/machine-learning-action/blob/master/string_operation/jieba-learning-Notes.ipynb" target="_blank" rel="external">Github-ipynb</a></p>
<a id="more"></a>
<p>è¯æ±‡æ˜¯æˆ‘ä»¬å¯¹å¥å­å’Œæ–‡ç« ç†è§£çš„åŸºç¡€ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªå·¥å…·å»æŠŠå®Œæ•´çš„æ–‡æœ¬ä¸­åˆ†è§£æˆç²’åº¦æ›´ç»†çš„è¯</p>
<p><strong>jieba</strong> å°±æ˜¯è¿™æ ·ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ä¸­æ–‡å·¥å…·ï¼Œæ˜¯ä»¥åˆ†è¯èµ·å®¶çš„ï¼Œä½†æ˜¯åŠŸèƒ½æ¯”åˆ†è¯è¦å¼ºå¤§å¾ˆå¤šã€‚</p>
<h2 id="1-åŸºæœ¬åˆ†è¯å‡½æ•°ä¸ç”¨æ³•"><a href="#1-åŸºæœ¬åˆ†è¯å‡½æ•°ä¸ç”¨æ³•" class="headerlink" title="1. åŸºæœ¬åˆ†è¯å‡½æ•°ä¸ç”¨æ³•"></a>1. åŸºæœ¬åˆ†è¯å‡½æ•°ä¸ç”¨æ³•</h2><ol>
<li>jieba.cut </li>
<li>jieba.cut_for_search </li>
</ol>
<p>è¿”å›çš„ç»“æ„éƒ½æ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„ generatorï¼Œå¯ä»¥ä½¿ç”¨ for å¾ªç¯æ¥è·å¾—åˆ†è¯åå¾—åˆ°çš„æ¯ä¸€ä¸ªè¯è¯­(unicode)</p>
<p><strong>jieba.cut</strong> æ–¹æ³•æ¥å—ä¸‰ä¸ªè¾“å…¥å‚æ•°:</p>
<ul>
<li>éœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²</li>
<li>cut_all å‚æ•°ç”¨æ¥æ§åˆ¶æ˜¯å¦é‡‡ç”¨å…¨æ¨¡å¼</li>
<li>HMM å‚æ•°ç”¨æ¥æ§åˆ¶æ˜¯å¦ä½¿ç”¨ HMM æ¨¡å‹</li>
</ul>
<p><strong>jieba.cut_for_search</strong> æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°</p>
<ul>
<li>éœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²</li>
<li>æ˜¯å¦ä½¿ç”¨ HMM æ¨¡å‹ã€‚</li>
</ul>
<p>è¯¥æ–¹æ³•é€‚åˆç”¨äºæœç´¢å¼•æ“æ„å»ºå€’æ’ç´¢å¼•çš„åˆ†è¯ï¼Œç²’åº¦æ¯”è¾ƒç»†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># encoding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(<span class="string">"æˆ‘åœ¨å­¦ä¹ è‡ªç„¶è¯­è¨€å¤„ç†"</span>, cut_all=<span class="keyword">True</span>)</span><br><span class="line"><span class="keyword">print</span> seg_list</span><br><span class="line">print(<span class="string">"Full Mode: "</span> + <span class="string">"/ "</span>.join(seg_list))  <span class="comment"># å…¨æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(<span class="string">"æˆ‘åœ¨å­¦ä¹ è‡ªç„¶è¯­è¨€å¤„ç†"</span>, cut_all=<span class="keyword">False</span>)</span><br><span class="line">print(<span class="string">"Default Mode: "</span> + <span class="string">"/ "</span>.join(seg_list))  <span class="comment"># ç²¾ç¡®æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(<span class="string">"ä»–æ¯•ä¸šäºä¸Šæµ·äº¤é€šå¤§å­¦ï¼Œåœ¨ç™¾åº¦æ·±åº¦å­¦ä¹ ç ”ç©¶é™¢è¿›è¡Œç ”ç©¶"</span>)  <span class="comment"># é»˜è®¤æ˜¯ç²¾ç¡®æ¨¡å¼</span></span><br><span class="line">print(<span class="string">", "</span>.join(seg_list))</span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut_for_search(<span class="string">"å°æ˜ç¡•å£«æ¯•ä¸šäºä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼Œååœ¨å“ˆä½›å¤§å­¦æ·±é€ "</span>)  <span class="comment"># æœç´¢å¼•æ“æ¨¡å¼</span></span><br><span class="line">print(<span class="string">", "</span>.join(seg_list))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Building prefix dict from the default dictionary ...</span><br><span class="line">&lt;generator object cut at 0x110370460&gt;</span><br><span class="line">Dumping model to file cache /var/folders/mf/_jgd83rx0rgcmt42cp7fkkd00000gn/T/jieba.cache</span><br><span class="line">Loading model cost 2.184 seconds.</span><br><span class="line">Prefix dict has been built succesfully.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Full Mode: æˆ‘/ åœ¨/ å­¦ä¹ / è‡ªç„¶/ è‡ªç„¶è¯­è¨€/ è¯­è¨€/ å¤„ç†</span><br><span class="line">Default Mode: æˆ‘/ åœ¨/ å­¦ä¹ / è‡ªç„¶è¯­è¨€/ å¤„ç†</span><br><span class="line">ä»–, æ¯•ä¸š, äº, ä¸Šæµ·äº¤é€šå¤§å­¦, ï¼Œ, åœ¨, ç™¾åº¦, æ·±åº¦, å­¦ä¹ , ç ”ç©¶é™¢, è¿›è¡Œ, ç ”ç©¶</span><br><span class="line">å°æ˜, ç¡•å£«, æ¯•ä¸š, äº, ä¸­å›½, ç§‘å­¦, å­¦é™¢, ç§‘å­¦é™¢, ä¸­å›½ç§‘å­¦é™¢, è®¡ç®—, è®¡ç®—æ‰€, ï¼Œ, å, åœ¨, å“ˆä½›, å¤§å­¦, å“ˆä½›å¤§å­¦, æ·±é€ </span><br></pre></td></tr></table></figure>
<p><strong>jieba.lcut</strong> ä»¥åŠ <strong>jieba.lcut_for_search</strong> ç›´æ¥è¿”å› list</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result_lcut = jieba.lcut(<span class="string">"å°æ˜ç¡•å£«æ¯•ä¸šäºä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼Œååœ¨å“ˆä½›å¤§å­¦æ·±é€ "</span>)</span><br><span class="line"><span class="keyword">print</span> result_lcut</span><br><span class="line"><span class="keyword">print</span> <span class="string">" "</span>.join(result_lcut)</span><br><span class="line"><span class="keyword">print</span> <span class="string">" "</span>.join(jieba.lcut_for_search(<span class="string">"å°æ˜ç¡•å£«æ¯•ä¸šäºä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼Œååœ¨å“ˆä½›å¤§å­¦æ·±é€ "</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[u&apos;\u5c0f\u660e&apos;, u&apos;\u7855\u58eb&apos;, u&apos;\u6bd5\u4e1a&apos;, u&apos;\u4e8e&apos;, u&apos;\u4e2d\u56fd\u79d1\u5b66\u9662&apos;, u&apos;\u8ba1\u7b97\u6240&apos;, u&apos;\uff0c&apos;, u&apos;\u540e&apos;, u&apos;\u5728&apos;, u&apos;\u54c8\u4f5b\u5927\u5b66&apos;, u&apos;\u6df1\u9020&apos;]</span><br><span class="line">å°æ˜ ç¡•å£« æ¯•ä¸š äº ä¸­å›½ç§‘å­¦é™¢ è®¡ç®—æ‰€ ï¼Œ å åœ¨ å“ˆä½›å¤§å­¦ æ·±é€ </span><br><span class="line">å°æ˜ ç¡•å£« æ¯•ä¸š äº ä¸­å›½ ç§‘å­¦ å­¦é™¢ ç§‘å­¦é™¢ ä¸­å›½ç§‘å­¦é™¢ è®¡ç®— è®¡ç®—æ‰€ ï¼Œ å åœ¨ å“ˆä½› å¤§å­¦ å“ˆä½›å¤§å­¦ æ·±é€ </span><br></pre></td></tr></table></figure>
<h3 id="1-1-æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰è¯å…¸"><a href="#1-1-æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰è¯å…¸" class="headerlink" title="1.1 æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰è¯å…¸"></a>1.1 æ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰è¯å…¸</h3><p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦é’ˆå¯¹è‡ªå·±çš„åœºæ™¯è¿›è¡Œåˆ†è¯ï¼Œä¼šæœ‰ä¸€äº›é¢†åŸŸå†…çš„ä¸“æœ‰è¯æ±‡ã€‚</p>
<ol>
<li>å¯ä»¥ç”¨ <code>jieba.load_userdict(file_name)</code> åŠ è½½ç”¨æˆ·å­—å…¸</li>
<li>å°‘é‡çš„è¯æ±‡å¯ä»¥è‡ªå·±ç”¨ä¸‹é¢æ–¹æ³•æ‰‹åŠ¨æ·»åŠ ï¼š</li>
</ol>
<p>ç”¨ <strong>add_word(word, freq=None, tag=None)</strong> å’Œ <strong>del_word(word)</strong> åœ¨ç¨‹åºä¸­åŠ¨æ€ä¿®æ”¹è¯å…¸<br>ç”¨ <strong>suggest_freq(segment, tune=True)</strong> å¯è°ƒèŠ‚å•ä¸ªè¯è¯­çš„è¯é¢‘ï¼Œä½¿å…¶èƒ½ï¼ˆæˆ–ä¸èƒ½ï¼‰è¢«åˆ†å‡ºæ¥ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'/'</span>.join(jieba.cut(<span class="string">'å¦‚æœæ”¾åˆ°æ—§å­—å…¸ä¸­å°†å‡ºé”™ã€‚'</span>, HMM=<span class="keyword">False</span>)))</span><br><span class="line"><span class="keyword">print</span> jieba.suggest_freq((<span class="string">'ä¸­'</span>, <span class="string">'å°†'</span>), <span class="keyword">True</span>)</span><br><span class="line">print(<span class="string">'/'</span>.join(jieba.cut(<span class="string">'å¦‚æœæ”¾åˆ°æ—§å­—å…¸ä¸­å°†å‡ºé”™ã€‚'</span>, HMM=<span class="keyword">False</span>)))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å¦‚æœ/æ”¾åˆ°/æ—§/å­—å…¸/ä¸­å°†/å‡ºé”™/ã€‚</span><br><span class="line">494</span><br><span class="line">å¦‚æœ/æ”¾åˆ°/æ—§/å­—å…¸/ä¸­/å°†/å‡ºé”™/ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="2-å…³é”®è¯æå–"><a href="#2-å…³é”®è¯æå–" class="headerlink" title="2. å…³é”®è¯æå–"></a>2. å…³é”®è¯æå–</h2><h3 id="2-1-TF-IDF-ç®—æ³•çš„å…³é”®è¯æŠ½å–"><a href="#2-1-TF-IDF-ç®—æ³•çš„å…³é”®è¯æŠ½å–" class="headerlink" title="2.1 TF-IDF ç®—æ³•çš„å…³é”®è¯æŠ½å–"></a>2.1 TF-IDF ç®—æ³•çš„å…³é”®è¯æŠ½å–</h3><p>import jieba.analyse<br>jieba.analyse.extract_tags(sentence, topK=20, withWeight=False, allowPOS=())</p>
<ul>
<li>sentence ä¸ºå¾…æå–çš„æ–‡æœ¬</li>
<li>topK ä¸ºè¿”å›å‡ ä¸ª TF/IDF æƒé‡æœ€å¤§çš„å…³é”®è¯ï¼Œé»˜è®¤å€¼ä¸º 20</li>
<li>withWeight ä¸ºæ˜¯å¦ä¸€å¹¶è¿”å›å…³é”®è¯æƒé‡å€¼ï¼Œé»˜è®¤å€¼ä¸º False</li>
<li>allowPOS ä»…åŒ…æ‹¬æŒ‡å®šè¯æ€§çš„è¯ï¼Œé»˜è®¤å€¼ä¸ºç©ºï¼Œå³ä¸ç­›é€‰</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba.analyse <span class="keyword">as</span> analyse</span><br><span class="line">lines = open(<span class="string">'NBA.txt'</span>).read()</span><br><span class="line"><span class="keyword">print</span> <span class="string">"  "</span>.join(analyse.extract_tags(lines, topK=<span class="number">20</span>, withWeight=<span class="keyword">False</span>, allowPOS=()))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">éŸ¦å°‘  æœå…°ç‰¹  å…¨æ˜æ˜Ÿ  å…¨æ˜æ˜Ÿèµ›  MVP  å¨å°‘  æ­£èµ›  ç§‘å°”  æŠ•ç¯®  å‹‡å£«  çƒå‘˜  </span><br><span class="line">æ–¯å¸ƒé²å…‹  æ›´è¡£æŸœ  å¼ å«å¹³  ä¸‰è¿åº„  NBA  è¥¿éƒ¨  æŒ‡å¯¼  é›·éœ†  æ˜æ˜Ÿé˜Ÿ</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lines = open(<span class="string">u'è¥¿æ¸¸è®°.txt'</span>).read()</span><br><span class="line"><span class="keyword">print</span> <span class="string">"  "</span>.join(analyse.extract_tags(lines, topK=<span class="number">20</span>, withWeight=<span class="keyword">False</span>, allowPOS=()))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¡Œè€…  å…«æˆ’  å¸ˆçˆ¶  ä¸‰è—  å”åƒ§  å¤§åœ£  æ²™åƒ§  å¦–ç²¾  è©è¨  å’Œå°š  é‚£æ€ª  é‚£é‡Œ  </span><br><span class="line">é•¿è€  å‘†å­  å¾’å¼Ÿ  æ€ä¹ˆ  ä¸çŸ¥  è€å­™  å›½ç‹  ä¸€ä¸ª</span><br></pre></td></tr></table></figure>
<h3 id="2-2-TF-IDF-å…³é”®è¯æŠ½å–è¡¥å……"><a href="#2-2-TF-IDF-å…³é”®è¯æŠ½å–è¡¥å……" class="headerlink" title="2.2 TF-IDF å…³é”®è¯æŠ½å–è¡¥å……"></a>2.2 TF-IDF å…³é”®è¯æŠ½å–è¡¥å……</h3><p>å…³é”®è¯æå–æ‰€ä½¿ç”¨é€†å‘æ–‡ä»¶é¢‘ç‡ï¼ˆ<strong>IDF</strong>ï¼‰æ–‡æœ¬è¯­æ–™åº“å¯ä»¥åˆ‡æ¢æˆè‡ªå®šä¹‰è¯­æ–™åº“çš„è·¯å¾„</p>
<ul>
<li>ç”¨æ³•ï¼š jieba.analyse.set_idf_path(file_name) # file_nameä¸ºè‡ªå®šä¹‰è¯­æ–™åº“çš„è·¯å¾„</li>
<li>è‡ªå®šä¹‰è¯­æ–™åº“ç¤ºä¾‹è§<a href="https://github.com/fxsjy/jieba/blob/master/extra_dict/idf.txt.big" target="_blank" rel="external">è¿™é‡Œ</a></li>
<li>ç”¨æ³•ç¤ºä¾‹è§<a href="https://github.com/fxsjy/jieba/blob/master/test/extract_tags_idfpath.py" target="_blank" rel="external">è¿™é‡Œ</a></li>
</ul>
<p>å…³é”®è¯æå–æ‰€ä½¿ç”¨åœæ­¢è¯ï¼ˆ<strong>Stop Words</strong>ï¼‰æ–‡æœ¬è¯­æ–™åº“å¯ä»¥åˆ‡æ¢æˆè‡ªå®šä¹‰è¯­æ–™åº“çš„è·¯å¾„</p>
<ul>
<li>ç”¨æ³•ï¼š jieba.analyse.set_stop_words(file_name) # file_nameä¸ºè‡ªå®šä¹‰è¯­æ–™åº“çš„è·¯å¾„</li>
<li>è‡ªå®šä¹‰è¯­æ–™åº“ç¤ºä¾‹è§<a href="https://github.com/fxsjy/jieba/blob/master/extra_dict/stop_words.txt" target="_blank" rel="external">è¿™é‡Œ</a></li>
<li>ç”¨æ³•ç¤ºä¾‹è§<a href="https://github.com/fxsjy/jieba/blob/master/test/extract_tags_stop_words.py" target="_blank" rel="external">è¿™é‡Œ</a></li>
</ul>
<p>å…³é”®è¯ä¸€å¹¶è¿”å›å…³é”®è¯æƒé‡å€¼ç¤ºä¾‹</p>
<ul>
<li>ç”¨æ³•ç¤ºä¾‹è§<a href="https://github.com/fxsjy/jieba/blob/master/test/extract_tags_with_weight.py" target="_blank" rel="external">è¿™é‡Œ</a></li>
</ul>
<h3 id="2-3-TextRank-çš„å…³é”®è¯æŠ½å–"><a href="#2-3-TextRank-çš„å…³é”®è¯æŠ½å–" class="headerlink" title="2.3 TextRank çš„å…³é”®è¯æŠ½å–"></a>2.3 TextRank çš„å…³é”®è¯æŠ½å–</h3><ul>
<li>jieba.analyse.textrank(sentence, topK=20, withWeight=False, allowPOS=(â€˜nsâ€™, â€˜nâ€™, â€˜vnâ€™, â€˜vâ€™)) ç›´æ¥ä½¿ç”¨ï¼Œæ¥å£ç›¸åŒï¼Œæ³¨æ„é»˜è®¤è¿‡æ»¤è¯æ€§ã€‚</li>
<li>jieba.analyse.TextRank() æ–°å»ºè‡ªå®šä¹‰ TextRank å®ä¾‹</li>
</ul>
<p>ç®—æ³•è®ºæ–‡ï¼š TextRank: <a href="http://web.eecs.umich.edu/~mihalcea/papers/mihalcea.emnlp04.pdf" target="_blank" rel="external">Bringing Order into Texts</a></p>
<p>åŸºæœ¬æ€æƒ³:</p>
<ul>
<li>å°†å¾…æŠ½å–å…³é”®è¯çš„æ–‡æœ¬è¿›è¡Œåˆ†è¯</li>
<li>ä»¥å›ºå®šçª—å£å¤§å°(é»˜è®¤ä¸º5ï¼Œé€šè¿‡spanå±æ€§è°ƒæ•´)ï¼Œè¯ä¹‹é—´çš„å…±ç°å…³ç³»ï¼Œæ„å»ºå›¾</li>
<li>è®¡ç®—å›¾ä¸­èŠ‚ç‚¹çš„PageRankï¼Œæ³¨æ„æ˜¯æ— å‘å¸¦æƒå›¾</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba.analyse <span class="keyword">as</span> analyse</span><br><span class="line">lines = open(<span class="string">'NBA.txt'</span>).read()</span><br><span class="line"><span class="keyword">print</span> <span class="string">"  "</span>.join(analyse.textrank(lines, topK=<span class="number">20</span>, withWeight=<span class="keyword">False</span>, allowPOS=(<span class="string">'ns'</span>, <span class="string">'n'</span>, <span class="string">'vn'</span>, <span class="string">'v'</span>)))</span><br><span class="line"><span class="keyword">print</span> <span class="string">"---------------------æˆ‘æ˜¯åˆ†å‰²çº¿----------------"</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"  "</span>.join(analyse.textrank(lines, topK=<span class="number">20</span>, withWeight=<span class="keyword">False</span>, allowPOS=(<span class="string">'ns'</span>, <span class="string">'n'</span>)))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Building prefix dict from the default dictionary ...</span><br><span class="line">Loading model from cache /var/folders/mf/_jgd83rx0rgcmt42cp7fkkd00000gn/T/jieba.cache</span><br><span class="line">Loading model cost 0.530 seconds.</span><br><span class="line">Prefix dict has been built succesfully.</span><br><span class="line"></span><br><span class="line">å…¨æ˜æ˜Ÿèµ›  å‹‡å£«  æ­£èµ›  æŒ‡å¯¼  å¯¹æ–¹  æŠ•ç¯®  çƒå‘˜  æ²¡æœ‰  å‡ºç°  æ—¶é—´  å¨å°‘  </span><br><span class="line">è®¤ä¸º  çœ‹æ¥  ç»“æœ  ç›¸éš”  åŠ©æ”»  ç°åœº  ä¸‰è¿åº„  ä»‹ç»  å˜‰å®¾</span><br><span class="line">---------------------æˆ‘æ˜¯åˆ†å‰²çº¿----------------</span><br><span class="line">å‹‡å£«  æ­£èµ›  å…¨æ˜æ˜Ÿèµ›  æŒ‡å¯¼  æŠ•ç¯®  ç©å‘½  æ—¶é—´  å¯¹æ–¹  ç°åœº  ç»“æœ  çƒå‘˜  </span><br><span class="line">å˜‰å®¾  æ—¶å€™  å…¨é˜Ÿ  ä¸»æŒäºº  ç‰¹ç‚¹  å¤§ä¼™  è‚¥çš‚å‰§  å…¨ç¨‹  å¿«èˆ¹é˜Ÿ</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">lines = open(<span class="string">u'è¥¿æ¸¸è®°.txt'</span>).read()</span><br><span class="line"><span class="keyword">print</span> <span class="string">"  "</span>.join(analyse.textrank(lines, topK=<span class="number">20</span>, withWeight=<span class="keyword">False</span>, allowPOS=(<span class="string">'ns'</span>, <span class="string">'n'</span>, <span class="string">'vn'</span>, <span class="string">'v'</span>)))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¡Œè€…  å¸ˆçˆ¶  å…«æˆ’  ä¸‰è—  å¤§åœ£  ä¸çŸ¥  è©è¨  å¦–ç²¾  åªè§  é•¿è€  å›½ç‹  å´è¯´  </span><br><span class="line">å‘†å­  å¾’å¼Ÿ  å°å¦–  å‡ºæ¥  ä¸å¾—  ä¸è§  ä¸èƒ½  å¸ˆå¾’</span><br></pre></td></tr></table></figure>
<h2 id="3-è¯æ€§æ ‡æ³¨"><a href="#3-è¯æ€§æ ‡æ³¨" class="headerlink" title="3. è¯æ€§æ ‡æ³¨"></a>3. è¯æ€§æ ‡æ³¨</h2><ul>
<li>jieba.posseg.POSTokenizer(tokenizer=None) æ–°å»ºè‡ªå®šä¹‰åˆ†è¯å™¨ï¼Œtokenizer å‚æ•°å¯æŒ‡å®šå†…éƒ¨ä½¿ç”¨çš„ jieba.Tokenizer åˆ†è¯å™¨ã€‚</li>
<li>jieba.posseg.dt ä¸ºé»˜è®¤è¯æ€§æ ‡æ³¨åˆ†è¯å™¨ã€‚  </li>
<li>æ ‡æ³¨å¥å­åˆ†è¯åæ¯ä¸ªè¯çš„è¯æ€§ï¼Œé‡‡ç”¨å’Œ ictclas å…¼å®¹çš„æ ‡è®°æ³•ã€‚</li>
<li>å…·ä½“çš„è¯æ€§å¯¹ç…§è¡¨å‚è§è®¡ç®—æ‰€æ±‰è¯­è¯æ€§æ ‡è®°é›† <a href="http://ictclas.nlpir.org/nlpir/html/readme.htm" target="_blank" rel="external">è®¡ç®—æ‰€æ±‰è¯­è¯æ€§æ ‡è®°é›†</a></li>
</ul>
<p><a href="http://ictclas.nlpir.org/" target="_blank" rel="external">ictclas</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba.posseg <span class="keyword">as</span> pseg</span><br><span class="line">words = pseg.cut(<span class="string">"æˆ‘çˆ±è‡ªç„¶è¯­è¨€å¤„ç†"</span>)</span><br><span class="line"><span class="keyword">for</span> word, flag <span class="keyword">in</span> words:</span><br><span class="line">    print(<span class="string">'%s %s'</span> % (word, flag))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æˆ‘ r</span><br><span class="line">çˆ± v</span><br><span class="line">è‡ªç„¶è¯­è¨€ l</span><br><span class="line">å¤„ç† v</span><br></pre></td></tr></table></figure>
<h2 id="4-å¹¶è¡Œåˆ†è¯"><a href="#4-å¹¶è¡Œåˆ†è¯" class="headerlink" title="4. å¹¶è¡Œåˆ†è¯"></a>4. å¹¶è¡Œåˆ†è¯</h2><p>åŸç†ï¼šå°†ç›®æ ‡æ–‡æœ¬æŒ‰è¡Œåˆ†éš”åï¼ŒæŠŠå„è¡Œæ–‡æœ¬åˆ†é…åˆ°å¤šä¸ª Python è¿›ç¨‹å¹¶è¡Œåˆ†è¯ï¼Œç„¶åå½’å¹¶ç»“æœï¼Œä»è€Œè·å¾—åˆ†è¯é€Ÿåº¦çš„å¯è§‚æå‡ åŸºäº python è‡ªå¸¦çš„ multiprocessing æ¨¡å—ï¼Œç›®å‰æš‚ä¸æ”¯æŒ Windows</p>
<p>ç”¨æ³•ï¼š</p>
<ul>
<li>jieba.enable_parallel(4) # å¼€å¯å¹¶è¡Œåˆ†è¯æ¨¡å¼ï¼Œå‚æ•°ä¸ºå¹¶è¡Œè¿›ç¨‹æ•°</li>
<li>jieba.disable_parallel() # å…³é—­å¹¶è¡Œåˆ†è¯æ¨¡å¼</li>
</ul>
<p>å®éªŒç»“æœï¼šåœ¨ 4 æ ¸ 3.4GHz Linux æœºå™¨ä¸Šï¼Œå¯¹é‡‘åº¸å…¨é›†è¿›è¡Œç²¾ç¡®åˆ†è¯ï¼Œè·å¾—äº† 1MB/s çš„é€Ÿåº¦ï¼Œæ˜¯å•è¿›ç¨‹ç‰ˆçš„ 3.3 å€ã€‚  </p>
<p>æ³¨æ„ï¼šå¹¶è¡Œåˆ†è¯ä»…æ”¯æŒé»˜è®¤åˆ†è¯å™¨ jieba.dt å’Œ jieba.posseg.dtã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line">jieba.enable_parallel()</span><br><span class="line">content = open(<span class="string">u'è¥¿æ¸¸è®°.txt'</span>,<span class="string">"r"</span>).read()</span><br><span class="line">t1 = time.time()</span><br><span class="line">words = <span class="string">"/ "</span>.join(jieba.cut(content))</span><br><span class="line">t2 = time.time()</span><br><span class="line">tm_cost = t2-t1</span><br><span class="line">print(<span class="string">'å¹¶è¡Œåˆ†è¯é€Ÿåº¦ä¸º %s bytes/second'</span> % (len(content)/tm_cost))</span><br><span class="line"></span><br><span class="line">jieba.disable_parallel()</span><br><span class="line">content = open(<span class="string">u'è¥¿æ¸¸è®°.txt'</span>,<span class="string">"r"</span>).read()</span><br><span class="line">t1 = time.time()</span><br><span class="line">words = <span class="string">"/ "</span>.join(jieba.cut(content))</span><br><span class="line">t2 = time.time()</span><br><span class="line">tm_cost = t2-t1</span><br><span class="line">print(<span class="string">'éå¹¶è¡Œåˆ†è¯é€Ÿåº¦ä¸º %s bytes/second'</span> % (len(content)/tm_cost))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å¹¶è¡Œåˆ†è¯é€Ÿåº¦ä¸º 415863.760491 bytes/second</span><br><span class="line">éå¹¶è¡Œåˆ†è¯é€Ÿåº¦ä¸º 242471.700496 bytes/second</span><br></pre></td></tr></table></figure>
<h3 id="å‘½ä»¤è¡Œåˆ†è¯"><a href="#å‘½ä»¤è¡Œåˆ†è¯" class="headerlink" title="å‘½ä»¤è¡Œåˆ†è¯"></a>å‘½ä»¤è¡Œåˆ†è¯</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä½¿ç”¨ç¤ºä¾‹ï¼špython -m jieba news.txt &gt; cut_result.txt</span><br><span class="line">å‘½ä»¤è¡Œé€‰é¡¹ï¼ˆç¿»è¯‘ï¼‰ï¼š</span><br><span class="line">ä½¿ç”¨: python -m jieba [options] filename</span><br><span class="line"></span><br><span class="line">ç»“å·´å‘½ä»¤è¡Œç•Œé¢ã€‚</span><br><span class="line"></span><br><span class="line">å›ºå®šå‚æ•°:</span><br><span class="line">  filename              è¾“å…¥æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">å¯é€‰å‚æ•°:</span><br><span class="line">  -h, --help            æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º</span><br><span class="line">  -d [DELIM], --delimiter [DELIM]</span><br><span class="line">                        ä½¿ç”¨ DELIM åˆ†éš”è¯è¯­ï¼Œè€Œä¸æ˜¯ç”¨é»˜è®¤çš„&apos; / &apos;ã€‚</span><br><span class="line">                        è‹¥ä¸æŒ‡å®š DELIMï¼Œåˆ™ä½¿ç”¨ä¸€ä¸ªç©ºæ ¼åˆ†éš”ã€‚</span><br><span class="line">  -p [DELIM], --pos [DELIM]</span><br><span class="line">                        å¯ç”¨è¯æ€§æ ‡æ³¨ï¼›å¦‚æœæŒ‡å®š DELIMï¼Œè¯è¯­å’Œè¯æ€§ä¹‹é—´</span><br><span class="line">                        ç”¨å®ƒåˆ†éš”ï¼Œå¦åˆ™ç”¨ _ åˆ†éš”</span><br><span class="line">  -D DICT, --dict DICT  ä½¿ç”¨ DICT ä»£æ›¿é»˜è®¤è¯å…¸</span><br><span class="line">  -u USER_DICT, --user-dict USER_DICT</span><br><span class="line">                        ä½¿ç”¨ USER_DICT ä½œä¸ºé™„åŠ è¯å…¸ï¼Œä¸é»˜è®¤è¯å…¸æˆ–è‡ªå®šä¹‰è¯å…¸é…åˆä½¿ç”¨</span><br><span class="line">  -a, --cut-all         å…¨æ¨¡å¼åˆ†è¯ï¼ˆä¸æ”¯æŒè¯æ€§æ ‡æ³¨ï¼‰</span><br><span class="line">  -n, --no-hmm          ä¸ä½¿ç”¨éšå«é©¬å°”å¯å¤«æ¨¡å‹</span><br><span class="line">  -q, --quiet           ä¸è¾“å‡ºè½½å…¥ä¿¡æ¯åˆ° STDERR</span><br><span class="line">  -V, --version         æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º</span><br><span class="line"></span><br><span class="line">å¦‚æœæ²¡æœ‰æŒ‡å®šæ–‡ä»¶åï¼Œåˆ™ä½¿ç”¨æ ‡å‡†è¾“å…¥ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="Tokenizeï¼šè¿”å›è¯è¯­åœ¨åŸæ–‡çš„èµ·æ­¢ä½ç½®"><a href="#Tokenizeï¼šè¿”å›è¯è¯­åœ¨åŸæ–‡çš„èµ·æ­¢ä½ç½®" class="headerlink" title="Tokenizeï¼šè¿”å›è¯è¯­åœ¨åŸæ–‡çš„èµ·æ­¢ä½ç½®"></a>Tokenizeï¼šè¿”å›è¯è¯­åœ¨åŸæ–‡çš„èµ·æ­¢ä½ç½®</h3><p>æ³¨æ„ï¼Œè¾“å…¥å‚æ•°åªæ¥å— unicode</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">print</span> <span class="string">"è¿™æ˜¯é»˜è®¤æ¨¡å¼çš„tokenize"</span></span><br><span class="line">result = jieba.tokenize(<span class="string">u'è‡ªç„¶è¯­è¨€å¤„ç†éå¸¸æœ‰ç”¨'</span>)</span><br><span class="line"><span class="keyword">for</span> tk <span class="keyword">in</span> result:</span><br><span class="line">    print(<span class="string">"%s\t\t start: %d \t\t end:%d"</span> % (tk[<span class="number">0</span>],tk[<span class="number">1</span>],tk[<span class="number">2</span>]))</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"\n-----------æˆ‘æ˜¯ç¥å¥‡çš„åˆ†å‰²çº¿------------\n"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"è¿™æ˜¯æœç´¢æ¨¡å¼çš„tokenize"</span></span><br><span class="line">result = jieba.tokenize(<span class="string">u'è‡ªç„¶è¯­è¨€å¤„ç†éå¸¸æœ‰ç”¨'</span>, mode=<span class="string">'search'</span>)</span><br><span class="line"><span class="keyword">for</span> tk <span class="keyword">in</span> result:</span><br><span class="line">    print(<span class="string">"%s\t\t start: %d \t\t end:%d"</span> % (tk[<span class="number">0</span>],tk[<span class="number">1</span>],tk[<span class="number">2</span>]))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¿™æ˜¯é»˜è®¤æ¨¡å¼çš„tokenize</span><br><span class="line">è‡ªç„¶è¯­è¨€		 start: 0 		 end:4</span><br><span class="line">å¤„ç†		 start: 4 		 end:6</span><br><span class="line">éå¸¸		 start: 6 		 end:8</span><br><span class="line">æœ‰ç”¨		 start: 8 		 end:10</span><br><span class="line">    </span><br><span class="line">-----------æˆ‘æ˜¯ç¥å¥‡çš„åˆ†å‰²çº¿------------</span><br><span class="line">    </span><br><span class="line">è¿™æ˜¯æœç´¢æ¨¡å¼çš„tokenize</span><br><span class="line">è‡ªç„¶		 start: 0 		 end:2</span><br><span class="line">è¯­è¨€		 start: 2 		 end:4</span><br><span class="line">è‡ªç„¶è¯­è¨€		 start: 0 		 end:4</span><br><span class="line">å¤„ç†		 start: 4 		 end:6</span><br><span class="line">éå¸¸		 start: 6 		 end:8</span><br><span class="line">æœ‰ç”¨		 start: 8 		 end:10</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Word2vec åŸºç¡€]]></title>
      <url>http://shopee.ai/2017/07/12/nlp/word2vector-basic/</url>
      <content type="html"><![CDATA[<p>Natural Language Processingï¼Œè®¡ç®—æœºç§‘å­¦ä¸è¯­è¨€å­¦ä¸­å…³æ³¨äºè®¡ç®—æœºä¸äººç±»è¯­è¨€é—´è½¬æ¢çš„é¢†åŸŸ</p>
<a id="more"></a>
<h2 id="1-NLP-å¸¸è§ä»»åŠ¡"><a href="#1-NLP-å¸¸è§ä»»åŠ¡" class="headerlink" title="1. NLP å¸¸è§ä»»åŠ¡"></a>1. NLP å¸¸è§ä»»åŠ¡</h2><ol>
<li>è‡ªåŠ¨æ‘˜è¦</li>
<li>æŒ‡ä»£æ¶ˆè§£   </li>
<li>æœºå™¨ç¿»è¯‘ </li>
<li>è¯æ€§æ ‡æ³¨   </li>
<li>åˆ†è¯ (ä¸­æ–‡ã€æ—¥æ–‡ç­‰)</li>
<li>ä¸»é¢˜è¯†åˆ«</li>
<li>æ–‡æœ¬åˆ†ç±».<br>â€¦â€¦</li>
</ol>
<blockquote>
<p>è‡ªåŠ¨æ‘˜è¦   -&gt;   æœç´¢è¦ç´¢å¼•ï¼Œå…³é”®è¯ç­‰<br>æŒ‡ä»£æ¶ˆè§£   -&gt;   å°æ˜æ”¾å­¦äº†, å¦ˆå¦ˆå»æ¥<code>ä»–</code><br>æœºå™¨ç¿»è¯‘   -&gt;   å°å¿ƒåœ°æ»‘ã€å¹²è´§ =&gt; Slide carefully<br>è¯æ€§æ ‡æ³¨   -&gt;   heat(v.) water(n.) in(p.) a(det.)   pot(n.)<br>åˆ†è¯ (ä¸­æ–‡ã€æ—¥æ–‡ç­‰)   -&gt;   å¤§æ°´æ²Ÿ/å¾ˆ/éš¾/è¿‡  </p>
</blockquote>
<h2 id="2-NLP-å¤„ç†æ–¹æ³•"><a href="#2-NLP-å¤„ç†æ–¹æ³•" class="headerlink" title="2. NLP å¤„ç†æ–¹æ³•"></a>2. NLP å¤„ç†æ–¹æ³•</h2><h3 id="2-1-ä¼ ç»Ÿ-åŸºäºè§„åˆ™"><a href="#2-1-ä¼ ç»Ÿ-åŸºäºè§„åˆ™" class="headerlink" title="2.1 ä¼ ç»Ÿ: åŸºäºè§„åˆ™"></a>2.1 ä¼ ç»Ÿ: åŸºäºè§„åˆ™</h3><p>Dictâ€¦</p>
<blockquote>
<p>ç®€å•ã€ç²—æš´ã€æœ‰ç”¨</p>
</blockquote>
<h3 id="2-2-ç°ä»£-åŸºäºæœºå™¨å­¦ä¹ "><a href="#2-2-ç°ä»£-åŸºäºæœºå™¨å­¦ä¹ " class="headerlink" title="2.2 ç°ä»£: åŸºäºæœºå™¨å­¦ä¹ "></a>2.2 ç°ä»£: åŸºäºæœºå™¨å­¦ä¹ </h3><blockquote>
<p>HMM, CRF, SVM, LDA, CNNâ€¦<br>â€œè§„åˆ™â€éšå«åœ¨æ¨¡å‹å‚æ•°é‡Œ</p>
</blockquote>
<h2 id="3-è¯ç¼–ç å’Œè¯å‘é‡åˆæ­¥"><a href="#3-è¯ç¼–ç å’Œè¯å‘é‡åˆæ­¥" class="headerlink" title="3. è¯ç¼–ç å’Œè¯å‘é‡åˆæ­¥"></a>3. è¯ç¼–ç å’Œè¯å‘é‡åˆæ­¥</h2><blockquote>
<p>ä½ éœ€è¦ä¸€äº› modelï¼Œä¸ç®¡ä½ æ˜¯åŸºäºè§„åˆ™ç»Ÿè®¡ã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹  çš„ä¸€äº›æ–¹æ³•ï¼Œç¬¬ä¸€æ­¥è¦åšçš„ï¼Œä¸€å®šæ˜¯å¯¹ä½ çš„æ–‡æœ¬æˆ–è€…æ•°æ®ï¼Œè¿›è¡Œè¡¨è¾¾, è¯ç¼–ç ã€‚</p>
</blockquote>
<p><font color="black">ã€è¯ç¼–ç éœ€è¦ä¿è¯è¯çš„ç›¸ä¼¼æ€§ã€<font></font></font></p>
<p>Glove results</p>
<p>Nearest words to</p>
<ol>
<li>frog</li>
<li>toad</li>
<li>rana</li>
<li>â€¦</li>
</ol>
<p><font color="black">ã€å‘é‡ç©ºé—´åˆ†å¸ƒçš„ç›¸ä¼¼æ€§ã€<font></font></font></p>
<p><img src="/images/word2vector-2.png" alt=""></p>
<p><font color="black">ã€å‘é‡ç©ºé—´å­ç»“æ„ã€<font></font></font></p>
<blockquote>
<p>ç¼–ç è¦å°½é‡ä¿è¯ï¼Œç›¸ä¼¼çš„è¯çš„ç©ºé—´è·ç¦»æ˜¯ç›¸è¿‘çš„</p>
</blockquote>
<p>$V_{King}$ - $V_{Queen}$ + $V_{Women}$ = $V_{Man}$</p>
<p>$V_{Paris}$ - $V_{France}$ + $V_{German}$ = $V_{Berlin}$</p>
<blockquote>
<p>æœ€ç»ˆç›®æ ‡: è¯å‘é‡è¡¨ç¤ºä½œä¸ºæœºå™¨å­¦ä¹ ã€ç‰¹åˆ«æ˜¯æ·±åº¦å­¦ä¹ çš„è¾“å…¥å’Œè¡¨ç¤ºç©ºé—´</p>
</blockquote>
<hr>
<blockquote>
<p>ä½ çš„ <code>æ•°æ®</code> å†³å®šäº†ä½ çš„ <code>ç»“æœä¸Šé™</code><br>ä½ çš„ <code>ç®—æ³•</code> åªæ˜¯ä»¥å¤šå¤§ç¨‹åº¦å» <code>é€¼è¿‘</code></p>
</blockquote>
<hr>
<p><strong>Linguists</strong></p>
<p><img src="/images/nlp/word2vector-3.png" width="520" height="400" align="middle" img=""></p>
<h3 id="3-1-ç¦»æ•£è¡¨ç¤º-One-hot"><a href="#3-1-ç¦»æ•£è¡¨ç¤º-One-hot" class="headerlink" title="3.1 ç¦»æ•£è¡¨ç¤º One-hot"></a>3.1 ç¦»æ•£è¡¨ç¤º One-hot</h3><ul>
<li><font color="blue">è¯­æ–™åº“<font></font></font></li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">John likes to watch movies. Mary likes too.John also likes to watch football games.</span><br></pre></td></tr></table></figure>
<ul>
<li><font color="blue">è¯å…¸<font></font></font></li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">"John"</span>: <span class="number">1</span>, <span class="string">"likes"</span>: <span class="number">2</span>, <span class="string">"to"</span>: <span class="number">3</span>, <span class="string">"watch"</span>: <span class="number">4</span>, <span class="string">"movies"</span>: <span class="number">5</span>, </span><br><span class="line"><span class="string">"also"</span>: <span class="number">6</span>, <span class="string">"football"</span>: <span class="number">7</span>, <span class="string">"games"</span>: <span class="number">8</span>, <span class="string">"Mary"</span>: <span class="number">9</span>, <span class="string">"too"</span>: <span class="number">10</span>&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><font color="blue">One-hotè¡¨ç¤º<font></font></font></li>
</ul>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">John: [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]likes: [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">...</span><br><span class="line">too : [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<h3 id="3-2-ç¦»æ•£è¡¨ç¤º-Bag-of-Words"><a href="#3-2-ç¦»æ•£è¡¨ç¤º-Bag-of-Words" class="headerlink" title="3.2 ç¦»æ•£è¡¨ç¤º Bag of Words"></a>3.2 ç¦»æ•£è¡¨ç¤º Bag of Words</h3><blockquote>
<p>æ–‡æ¡£çš„å‘é‡è¡¨ç¤ºå¯ä»¥ç›´æ¥å°†å„è¯çš„è¯å‘é‡è¡¨ç¤ºåŠ å’Œ</p>
</blockquote>
<p>John likes to watch movies. Mary likes too. =&gt; [1, 2, 1, 1, 1, 0, 0, 0, 1, 1]<br>John also likes to watch football games. =&gt; [1, 1, 1, 1, 0, 1, 1, 1, 0, 0]</p>
<blockquote>
<p>è¯æƒé‡  - (<code>è¯åœ¨æ–‡æ¡£ä¸­çš„é¡ºåºæ²¡æœ‰è¢«è€ƒè™‘</code>)</p>
<p>tf-idfæ˜¯ä¸€ç§ç»Ÿè®¡æ–¹æ³•ï¼Œç”¨ä»¥è¯„ä¼°ä¸€å­—è¯å¯¹äºä¸€ä¸ªæ–‡ä»¶é›†æˆ–ä¸€ä¸ªè¯­æ–™åº“ä¸­çš„å…¶ä¸­ä¸€ä»½æ–‡ä»¶çš„é‡è¦ç¨‹åº¦</p>
</blockquote>
<ul>
<li>TF-IDF (Term Frequency - Inverse Document Frequency)</li>
</ul>
<p>Term Frequency : F(term) = (è¯¥wordè¯å‡ºç°åœ¨å½“å‰æ–‡æ¡£ä¸­çš„æ¬¡æ•°) / (å½“å‰æ–‡æ¡£æ‰€æœ‰wordçš„æ€»æ•°).</p>
<p>ä¿¡æ¯æ£€ç´¢è¯ t çš„ IDF </p>
<p>$$\log (1 + {\frac{N}{n^t}})$$</p>
<blockquote>
<p>N: æ–‡æ¡£æ€»æ•°ï¼Œ n: å«æœ‰è¯ t çš„æ–‡æ¡£æ•°</p>
</blockquote>
<p>[0.693, 1.386, 0.693, 0.693, 1.099, 0, 0, 0, 0.693, 0.693]</p>
<p>Binary weighting</p>
<blockquote>
<p>ä¸åšè®¡æ•°çš„ç‰ˆæœ¬</p>
<p>çŸ­æ–‡æœ¬ç›¸ä¼¼æ€§, Bernoulli Naive Bayes [1, 1, 1, 1, 1, 0, 0, 0, 1, 1]</p>
<p>if so, I love you = you love I</p>
</blockquote>
<h3 id="3-3-ç¦»æ•£è¡¨ç¤º-ô°œô°ô°ô°Ÿô°’Bi-gram-ô°ªN-gram"><a href="#3-3-ç¦»æ•£è¡¨ç¤º-ô°œô°ô°ô°Ÿô°’Bi-gram-ô°ªN-gram" class="headerlink" title="3.3 ç¦»æ•£è¡¨ç¤º ô°œô°ô°ô°Ÿô°’Bi-gram / ô°ªN-gram"></a>3.3 ç¦»æ•£è¡¨ç¤º ô°œô°ô°ô°Ÿô°’Bi-gram / ô°ªN-gram</h3><p>John likes to watch movies. Mary likes too.<br>John also likes to watch football games.</p>
<p><img src="/images/nlp/word2vector-4.png" width="620" height="400" align="middle" img=""></p>
<h3 id="3-4-è¯­è¨€æ¨¡å‹-è¯ç»„åˆå‡ºç°çš„æ¦‚ç‡"><a href="#3-4-è¯­è¨€æ¨¡å‹-è¯ç»„åˆå‡ºç°çš„æ¦‚ç‡" class="headerlink" title="3.4 è¯­è¨€æ¨¡å‹ è¯ç»„åˆå‡ºç°çš„æ¦‚ç‡"></a>3.4 è¯­è¨€æ¨¡å‹ è¯ç»„åˆå‡ºç°çš„æ¦‚ç‡</h3><p>ä¸€å¥è¯(è¯ç»„åˆ)å‡ºç°çš„æ¦‚ç‡</p>
<p><img src="/images/nlp/word2vector-5.png" width="620" height="400" align="middle" img=""></p>
<blockquote>
<p>ç®€åŒ–è®¡ç®— : $P(too | Mark, likes) \approx P(too | likes)$, å¯å‚è§ å´å†› ã€Šæ•°å­¦ä¹‹ç¾ã€‹ è§£é‡Š</p>
</blockquote>
<h3 id="3-5-ç¦»æ•£è¡¨ç¤º-çš„ç¼ºç‚¹"><a href="#3-5-ç¦»æ•£è¡¨ç¤º-çš„ç¼ºç‚¹" class="headerlink" title="3.5 ç¦»æ•£è¡¨ç¤º çš„ç¼ºç‚¹"></a>3.5 ç¦»æ•£è¡¨ç¤º çš„ç¼ºç‚¹</h3><p><img src="/images/nlp/word2vector-6.png" width="620" height="400" align="middle" img=""></p>
<h3 id="3-6-åˆ†å¸ƒå¼è¡¨ç¤º-æå‡º"><a href="#3-6-åˆ†å¸ƒå¼è¡¨ç¤º-æå‡º" class="headerlink" title="3.6 åˆ†å¸ƒå¼è¡¨ç¤º æå‡º"></a>3.6 åˆ†å¸ƒå¼è¡¨ç¤º æå‡º</h3><p><img src="/images/nlp/word2vector-7.png" width="620" height="400" align="middle" img=""></p>
<blockquote>
<p>Distributed representation :  </p>
<p>ç”¨ä¸€ä¸ªè¯é™„è¿‘çš„å…¶ä»–è¯æ¥è¡¨ç¤ºè¯¥è¯  - (ä¸çŸ¥é“ä½ çš„ç»æµæƒ…å†µï¼Œå°±è°ƒæŸ¥ä¸‹ä½ çš„ç‹æœ‹ç‹—å‹ä»¬)<br>ô°ô±ô²ô°€ô³ô³ô°¢ô³ô³‘ô°€ô³’ô°You shall know a word by the company it keeps<br>  â€” J.R. Firth 1957<br>ô°ô±ô²ô°€ô³ô³ô°¢ô³ô³‘ô°€ô³’ô°ô°Ÿô³“ô°€ô°‘ô°ô±ô²ô°€ô³ô³ô°¢ô³ô³‘ô°€ô³’ô°ô°Ÿô³“ô°€ô°‘ô°ô±ô²ô°€ô³ô³ô°¢ô³ô³‘<br>ô±•ô³”ô³•ô³–ô³—&gt; ç°ä»£ç»Ÿè®¡è‡ªç„¶è¯­è¨€å¤„ç†ä¸­æœ€æœ‰åˆ›è§çš„æƒ³æ³•ä¹‹ä¸€</p>
</blockquote>
<h2 id="4-å…±ç°çŸ©é˜µ-Cocurrence-matrix"><a href="#4-å…±ç°çŸ©é˜µ-Cocurrence-matrix" class="headerlink" title="4. å…±ç°çŸ©é˜µ (Cocurrence matrix)"></a>4. å…±ç°çŸ©é˜µ (Cocurrence matrix)</h2><p><img src="/images/nlp/word2vector-8.png" width="620" height="400" align="middle" img=""></p>
<blockquote>
<p>å…±ç° : å…±åŒå‡ºç°</p>
</blockquote>
<h3 id="4-1-Word-Word"><a href="#4-1-Word-Word" class="headerlink" title="4.1 Word - Word"></a>4.1 Word - Word</h3><p><img src="/images/nlp/word2vector-9.png" width="620" height="400" align="middle" img=""></p>
<blockquote>
<p>å·¦å³çª— length ä¸º 1ï¼Œ å¾—åˆ°çš„çŸ©é˜µå¦‚ä¸Š</p>
</blockquote>
<p>å­˜åœ¨ç¼ºç‚¹</p>
<p><img src="/images/nlp/word2vector-10.png" width="620" height="400" align="middle" img=""></p>
<blockquote>
<p>æ¨¡å‹æ¬ ç¨³å®šï¼Œå¯ä»¥è€ƒè™‘ä¸‹ LR çš„å„ä¸ªå‚æ•°ç­‰ï¼Œå˜åŒ–å¤ªå¤§ï¼Œå¯¹æ¨¡å‹æ±‚è§£æœ‰å½±å“</p>
</blockquote>
<p><strong>ç”¨SVDå¯¹å…±ç°çŸ©é˜µå‘é‡åšé™ç»´</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">la = np.linalg</span><br><span class="line"></span><br><span class="line">words = [<span class="string">"I"</span>, <span class="string">"like"</span>, <span class="string">"enjoy"</span>, <span class="string">"deep"</span>, <span class="string">"learning"</span>, <span class="string">"NLP"</span>, <span class="string">"flying"</span>, <span class="string">"."</span>]</span><br><span class="line"></span><br><span class="line">X = np.array(</span><br><span class="line">    [</span><br><span class="line">        [<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">        [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>]</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">U, s, Vh = la.svd(X, full_matrices=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure>
<p><strong>SVD é™ç»´å­˜åœ¨çš„é—®é¢˜</strong></p>
<ul>
<li><p>è®¡ç®—é‡éšè¯­æ–™åº“å’Œè¯å…¸å¢é•¿è†¨èƒ€å¤ªå¿«ï¼Œå¯¹X(n,n)ç»´ çš„çŸ©é˜µï¼Œè®¡ç®—é‡O(n^3)ã€‚è€Œå¯¹å¤§å‹çš„è¯­æ–™åº“ï¼Œ n~400kï¼Œè¯­æ–™åº“å¤§å°1~60B token</p>
</li>
<li><p>éš¾ä»¥ä¸ºè¯å…¸ä¸­æ–°åŠ å…¥çš„è¯åˆ†é…è¯å‘é‡    </p>
</li>
<li>ä¸å…¶ä»–æ·±åº¦å­¦ä¹ æ¨¡å‹æ¡†æ¶å·®å¼‚å¤§</li>
</ul>
<h3 id="4-2-NNLM"><a href="#4-2-NNLM" class="headerlink" title="4.2 NNLM"></a>4.2 NNLM</h3><h3 id="4-3-Word2Vec-CBOW"><a href="#4-3-Word2Vec-CBOW" class="headerlink" title="4.3 Word2Vec: CBOW"></a>4.3 Word2Vec: CBOW</h3><h3 id="4-4-Word2Vec-Skip-Gram"><a href="#4-4-Word2Vec-Skip-Gram" class="headerlink" title="4.4 Word2Vec: Skip-Gram"></a>4.4 Word2Vec: Skip-Gram</h3><h3 id="4-5-Word2Vec-ç¼ºç‚¹"><a href="#4-5-Word2Vec-ç¼ºç‚¹" class="headerlink" title="4.5 Word2Vec ç¼ºç‚¹"></a>4.5 Word2Vec ç¼ºç‚¹</h3><h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><h3 id="5-1-ç¦»æ•£è¡¨ç¤º"><a href="#5-1-ç¦»æ•£è¡¨ç¤º" class="headerlink" title="5.1 ç¦»æ•£è¡¨ç¤º"></a>5.1 ç¦»æ•£è¡¨ç¤º</h3><ul>
<li>One-hot representation, Bag Of Words Unigramè¯­è¨€æ¨¡å‹</li>
<li>N-gramè¯å‘é‡è¡¨ç¤ºå’Œè¯­è¨€æ¨¡å‹</li>
<li>Co-currenceçŸ©é˜µçš„è¡Œ(åˆ—)å‘é‡ä½œä¸ºè¯å‘é‡</li>
</ul>
<h3 id="5-2-åˆ†å¸ƒå¼è¿ç»­è¡¨ç¤º"><a href="#5-2-åˆ†å¸ƒå¼è¿ç»­è¡¨ç¤º" class="headerlink" title="5.2 åˆ†å¸ƒå¼è¿ç»­è¡¨ç¤º"></a>5.2 åˆ†å¸ƒå¼è¿ç»­è¡¨ç¤º</h3><ul>
<li>Co-currenceçŸ©é˜µçš„SVDé™ç»´çš„ä½ç»´è¯å‘é‡è¡¨ç¤º</li>
<li>Word2Vec: Continuous Bag of Words Model</li>
<li>Word2Vec: Skip-Gram Model</li>
</ul>
<blockquote>
<p>gensim ç”¨ python è®­ç»ƒ word2vec æœ€å¥½ç”¨çš„åº“<br>å®ƒçš„åŠŸèƒ½ä¸è‡³äº word2vec</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Scrambled Egg with Ham]]></title>
      <url>http://shopee.ai/2017/07/09/tools/my-cooking/</url>
      <content type="html"><![CDATA[<p>è®°å½•æˆ‘å­¦ Cooking ç«è…¿ç‚’è›‹ çš„åšæ³•</p>
<a id="more"></a>
<ol>
<li>2ä¸ªé¸¡è›‹ï¼Œæ‰“å…¥å°ç¢—ä¸­ï¼Œæ…æ‹Œå‡åŒ€</li>
<li>åˆ‡ä¸€æ ¹ç«è…¿ï¼Œåˆ‡æˆç‰‡çŠ¶</li>
<li>æ‰“å¼€ç‡ƒæ°”é˜€é—¨ä¸èµ·ç«ï¼Œå¼€å°ç«ä¾¿å¯</li>
<li>æ”¾å…¥ä¸€äº›è±†æ²¹ï¼Œå¾…æ²¹çƒ­ä¸€ç‚¹</li>
<li>é¸¡è›‹æ…¢æ…¢å€’å…¥æ²¹é”…ï¼Œé¸¡è›‹æˆé¥¼ç‹€ï¼ŒæœŸé—´å¯ä»¥é¢ å‹º</li>
<li>å°†ç«è…¿ç‰‡ï¼Œæ”¾å…¥å…¶ä¸­ï¼Œè¿›è¡Œä¸€èµ·ç‚’ï¼Œå¹¶å¯æ”¾å…¥å°‘é‡ç›</li>
<li>ç‚’å¾—å·®ä¸å¤šåï¼Œå…³é—­ç‡ƒæ°”é˜€é—¨ï¼Œå¹¶å…³é—­èµ·ç«å¼€å…³</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python Basic Learning III]]></title>
      <url>http://shopee.ai/2017/06/05/python/language/py-language-basic-learning-III/</url>
      <content type="html"><![CDATA[<p>å»–é›ªå³°çš„ Python æ•™ç¨‹ - Functional Programming</p>
<a id="more"></a>
<h2 id="1-å‡½æ•°å¼ç¼–ç¨‹"><a href="#1-å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="1. å‡½æ•°å¼ç¼–ç¨‹"></a>1. å‡½æ•°å¼ç¼–ç¨‹</h2><p>å‡½æ•°å°±æ˜¯é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡çš„åŸºæœ¬å•å…ƒã€‚</p>
<p>Functional Programming å…¶æ€æƒ³æ›´æ¥è¿‘æ•°å­¦è®¡ç®—ã€‚</p>
<p>åœ¨è®¡ç®—æœºçš„å±‚æ¬¡ä¸Šï¼ŒCPUæ‰§è¡Œçš„æ˜¯åŠ å‡ä¹˜é™¤çš„æŒ‡ä»¤ä»£ç ï¼Œä»¥åŠå„ç§æ¡ä»¶åˆ¤æ–­å’Œè·³è½¬æŒ‡ä»¤ï¼Œæ‰€ä»¥ï¼Œæ±‡ç¼–è¯­è¨€æ˜¯æœ€è´´è¿‘è®¡ç®—æœºçš„è¯­è¨€ã€‚</p>
<p>è€Œè®¡ç®—åˆ™æŒ‡æ•°å­¦æ„ä¹‰ä¸Šçš„è®¡ç®—ï¼Œè¶Šæ˜¯æŠ½è±¡çš„è®¡ç®—ï¼Œç¦»è®¡ç®—æœºç¡¬ä»¶è¶Šè¿œã€‚</p>
<p>å¯¹åº”åˆ°ç¼–ç¨‹è¯­è¨€ï¼Œå°±æ˜¯è¶Šä½çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—æœºï¼ŒæŠ½è±¡ç¨‹åº¦ä½ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œæ¯”å¦‚Cè¯­è¨€ï¼›è¶Šé«˜çº§çš„è¯­è¨€ï¼Œè¶Šè´´è¿‘è®¡ç®—ï¼ŒæŠ½è±¡ç¨‹åº¦é«˜ï¼Œæ‰§è¡Œæ•ˆç‡ä½ï¼Œæ¯”å¦‚Lispè¯­è¨€ã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹å°±æ˜¯ä¸€ç§æŠ½è±¡ç¨‹åº¦å¾ˆé«˜çš„ç¼–ç¨‹èŒƒå¼ï¼Œ<code>çº¯ç²¹çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„å‡½æ•°æ²¡æœ‰å˜é‡</code>ï¼Œå› æ­¤ï¼Œä»»æ„ä¸€ä¸ªå‡½æ•°ï¼Œåªè¦è¾“å…¥æ˜¯ç¡®å®šçš„ï¼Œè¾“å‡ºå°±æ˜¯ç¡®å®šçš„ï¼Œè¿™ç§çº¯å‡½æ•°æˆ‘ä»¬ç§°ä¹‹ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ã€‚è€Œå…è®¸ä½¿ç”¨å˜é‡çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç”±äºå‡½æ•°å†…éƒ¨çš„å˜é‡çŠ¶æ€ä¸ç¡®å®šï¼ŒåŒæ ·çš„è¾“å…¥ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºï¼Œå› æ­¤ï¼Œè¿™ç§å‡½æ•°æ˜¯æœ‰å‰¯ä½œç”¨çš„ã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œå…è®¸æŠŠå‡½æ•°æœ¬èº«ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å…è®¸è¿”å›ä¸€ä¸ªå‡½æ•°ï¼</p>
<p>Pythonå¯¹å‡½æ•°å¼ç¼–ç¨‹æä¾›éƒ¨åˆ†æ”¯æŒã€‚ç”±äºPythonå…è®¸ä½¿ç”¨å˜é‡ï¼Œå› æ­¤ï¼ŒPythonä¸æ˜¯çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ã€‚</p>
<h3 id="1-1-é«˜é˜¶å‡½æ•°"><a href="#1-1-é«˜é˜¶å‡½æ•°" class="headerlink" title="1.1 é«˜é˜¶å‡½æ•°"></a>1.1 é«˜é˜¶å‡½æ•°</h3><p>Higher-order function</p>
<h2 id="2-æ¨¡å—"><a href="#2-æ¨¡å—" class="headerlink" title="2. æ¨¡å—"></a>2. æ¨¡å—</h2><blockquote>
<p>Pythonå†…ç½®çš„æ¨¡å— å’Œ æ¥è‡ªç¬¬ä¸‰æ–¹çš„æ¨¡å—ã€‚</p>
<p>æ¯ä¸€ä¸ªåŒ…ç›®å½•ä¸‹é¢éƒ½ä¼šæœ‰ä¸€ä¸ª<strong>init</strong>.pyçš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œå¦åˆ™ï¼ŒPythonå°±æŠŠè¿™ä¸ªç›®å½•å½“æˆæ™®é€šç›®å½•ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåŒ…ã€‚</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001386819196283586a37629844456ca7e5a7faa9b94ee8000" target="_blank" rel="external">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ liaoxuefeng</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python Class]]></title>
      <url>http://shopee.ai/2017/06/05/python/language/py-language-8-class/</url>
      <content type="html"><![CDATA[<p>OO æœ€é‡è¦çš„æ¦‚å¿µå°±æ˜¯ç±»ï¼ˆClassï¼‰å’Œå®ä¾‹ï¼ˆInstanceï¼‰ï¼Œå¿…é¡»ç‰¢è®°ç±»æ˜¯æŠ½è±¡çš„æ¨¡æ¿ï¼Œæ¯”å¦‚Studentç±»</p>
<a id="more"></a>
<h2 id="Class-def"><a href="#Class-def" class="headerlink" title="Class def"></a>Class def</h2><p>class å®šä¹‰ä¸€ä¸ªç±»,é¦–å­—æ¯å¤§å†™ï¼Œæ¯”å¦‚ Calculator. classå¯ä»¥å…ˆå®šä¹‰è‡ªå·±çš„å±æ€§ï¼Œæ¯”å¦‚ name=â€™Good Calculatorâ€™. </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span>:</span>       <span class="comment">#é¦–å­—æ¯è¦å¤§å†™ï¼Œå†’å·ä¸èƒ½ç¼º</span></span><br><span class="line">    </span><br><span class="line">    name=<span class="string">'Good Calculator'</span>  <span class="comment">#è¯¥è¡Œä¸ºclassçš„å±æ€§</span></span><br><span class="line">    price=<span class="number">18</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self,x,y)</span>:</span></span><br><span class="line">        print(self.name)</span><br><span class="line">        result = x + y</span><br><span class="line">        print(result)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minus</span><span class="params">(self,x,y)</span>:</span></span><br><span class="line">        result=x-y</span><br><span class="line">        print(result)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">times</span><span class="params">(self,x,y)</span>:</span></span><br><span class="line">        print(x*y)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">divide</span><span class="params">(self,x,y)</span>:</span></span><br><span class="line">        print(x/y)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cal=Calculator()</span><br><span class="line"></span><br><span class="line">print(cal.name)</span><br><span class="line">print(cal.price)</span><br></pre></td></tr></table></figure>
<pre><code>Good Calculator
18
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cal.add(<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line">cal.minus(<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line">cal.times(<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line">cal.divide(<span class="number">10</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Good Calculator
30
-10
200
0.5
</code></pre><h2 id="Class-init"><a href="#Class-init" class="headerlink" title="Class init"></a>Class init</h2><p>è¿è¡Œ <code>c=Calculator(&#39;bad calculator&#39;,18,17,16,15)</code>, ç„¶åè°ƒå‡ºæ¯ä¸ªåˆå§‹å€¼çš„å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span>:</span></span><br><span class="line">    name=<span class="string">'good calculator'</span></span><br><span class="line">    price=<span class="number">18</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,price,height,width,weight)</span>:</span>   <span class="comment"># æ³¨æ„ï¼Œè¿™é‡Œçš„ä¸‹åˆ’çº¿æ˜¯åŒä¸‹åˆ’çº¿</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.price=price</span><br><span class="line">        self.h=height</span><br><span class="line">        self.wi=width</span><br><span class="line">        self.we=weight</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">c=Calculator(<span class="string">'bad calculator'</span>,<span class="number">18</span>,<span class="number">17</span>,<span class="number">16</span>,<span class="number">15</span>)</span><br><span class="line">print(c.name)</span><br><span class="line">print(c.price)</span><br><span class="line">print(c.h)</span><br><span class="line">print(c.wi)</span><br><span class="line">print(c.we)</span><br></pre></td></tr></table></figure>
<pre><code>bad calculator
18
17
16
15
</code></pre><h3 id="è®¾ç½®classå±æ€§é»˜è®¤å€¼"><a href="#è®¾ç½®classå±æ€§é»˜è®¤å€¼" class="headerlink" title="è®¾ç½®classå±æ€§é»˜è®¤å€¼"></a>è®¾ç½®classå±æ€§é»˜è®¤å€¼</h3><p>å¦‚ä½•è®¾ç½®å±æ€§çš„é»˜è®¤å€¼, ç›´æ¥åœ¨defé‡Œè¾“å…¥å³å¯ï¼Œå¦‚ä¸‹:</p>
<p><code>def __init__(self,name,price,height=10,width=14,weight=16):</code></p>
<p>æŸ¥çœ‹è¿è¡Œç»“æœï¼Œ ä¸‰ä¸ªæœ‰é»˜è®¤å€¼çš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥è¾“å‡ºé»˜è®¤å€¼.</p>
<p>è¿™äº›é»˜è®¤å€¼å¯ä»¥åœ¨codeä¸­æ›´æ”¹, æ¯”å¦‚<code>c.wi=17</code>å†è¾“å‡º<code>c.wi</code>å°±ä¼šæŠŠ<code>wi</code>å±æ€§å€¼æ›´æ”¹ä¸º<code>17</code>.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span>:</span></span><br><span class="line">    name=<span class="string">'good calculator'</span></span><br><span class="line">    price=<span class="number">18</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,price,hight=<span class="number">10</span>,width=<span class="number">14</span>,weight=<span class="number">16</span>)</span>:</span> <span class="comment">#åé¢ä¸‰ä¸ªå±æ€§è®¾ç½®é»˜è®¤å€¼,æŸ¥çœ‹è¿è¡Œ</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.price=price</span><br><span class="line">        self.h=hight</span><br><span class="line">        self.wi=width</span><br><span class="line">        self.we=weight</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">c=Calculator(<span class="string">'bad calculator'</span>,<span class="number">18</span>)</span><br><span class="line">print(c.h)</span><br><span class="line">print(<span class="string">"wi : "</span> + str(c.wi))</span><br><span class="line">c.wi = <span class="number">17</span></span><br><span class="line">print(<span class="string">"wi : "</span> + str(c.wi))</span><br><span class="line">print(c.we)</span><br></pre></td></tr></table></figure>
<pre><code>10
wi : 14
wi : 17
16
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://docs.python.org/" target="_blank" rel="external">docs.python.org</a></li>
<li><a href="https://morvanzhou.github.io/" target="_blank" rel="external">python morvanzhou</a></li>
<li><a href="https://www.liaoxuefeng.com/" target="_blank" rel="external">python liaoxuefeng</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python Read File]]></title>
      <url>http://shopee.ai/2017/06/04/python/language/py-language-6-read-file/</url>
      <content type="html"><![CDATA[<p>open()ã€appendã€file.read()ã€file.readline()ã€file.readlines()ã€file.close()ã€with open .. as f</p>
<a id="more"></a>
<p>è¯»å†™æ–‡ä»¶å‰ï¼Œå¿…é¡»äº†è§£ï¼Œåœ¨ç£ç›˜ä¸Šè¯»å†™æ–‡ä»¶çš„åŠŸèƒ½éƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„ï¼Œç°ä»£æ“ä½œç³»ç»Ÿä¸å…è®¸æ™®é€šçš„ç¨‹åºç›´æ¥æ“ä½œç£ç›˜ï¼Œæ‰€ä»¥ï¼Œè¯»å†™æ–‡ä»¶å°±æ˜¯è¯·æ±‚æ“ä½œç³»ç»Ÿæ‰“å¼€ä¸€ä¸ª<code>æ–‡ä»¶å¯¹è±¡</code>ï¼ˆé€šå¸¸ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼‰ï¼Œç„¶åï¼Œé€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£ä»è¿™ä¸ªæ–‡ä»¶å¯¹è±¡ä¸­è¯»å–æ•°æ®ï¼ˆè¯»æ–‡ä»¶ï¼‰ï¼Œæˆ–è€…æŠŠæ•°æ®å†™å…¥è¿™ä¸ªæ–‡ä»¶å¯¹è±¡ï¼ˆå†™æ–‡ä»¶ï¼‰</p>
<h2 id="1-open"><a href="#1-open" class="headerlink" title="1. open"></a>1. open</h2><p>ä½¿ç”¨ <code>open</code> èƒ½å¤Ÿæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶, <code>open</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–‡ä»¶åå’Œè·¯å¾„ â€˜my file.txtâ€™, ç¬¬äºŒä¸ªå‚æ•°ä¸ºå°†è¦ä»¥ä»€ä¹ˆæ–¹å¼æ‰“å¼€å®ƒ, æ¯”å¦‚ <code>w</code> ä¸ºå¯å†™æ–¹å¼. å¦‚æœè®¡ç®—æœºæ²¡æœ‰æ‰¾åˆ° â€˜my file.txtâ€™ è¿™ä¸ªæ–‡ä»¶, <code>w</code> æ–¹å¼èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶, å¹¶å‘½åä¸º <code>my file.txt</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">text = <span class="string">'This is my first test.'</span></span><br><span class="line"></span><br><span class="line">my_file=open(<span class="string">'my file.txt'</span>,<span class="string">'w'</span>)   <span class="comment">#ç”¨æ³•: open('æ–‡ä»¶å','å½¢å¼'), å…¶ä¸­å½¢å¼æœ‰'w':write;'r':read.</span></span><br><span class="line">my_file.write(text)               <span class="comment">#è¯¥è¯­å¥ä¼šå†™å…¥å…ˆå‰å®šä¹‰å¥½çš„ text</span></span><br><span class="line">my_file.close()                   <span class="comment">#å…³é—­æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>
<h2 id="2-append"><a href="#2-append" class="headerlink" title="2. append"></a>2. append</h2><p>æˆ‘ä»¬å…ˆä¿å­˜ä¸€ä¸ªå·²ç»æœ‰3è¡Œæ–‡å­—çš„ â€œmy file.txtâ€ æ–‡ä»¶, æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">This is my first test. </span><br><span class="line">This is the second line.</span><br><span class="line">This the third</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ·»åŠ æ–‡å­—çš„æ–¹å¼ç»™è¿™ä¸ªæ–‡ä»¶æ·»åŠ ä¸€è¡Œ â€œThis is appended file.â€, å¹¶å°†è¿™è¡Œæ–‡å­—å‚¨å­˜åœ¨ append_file é‡Œï¼Œæ³¨æ„\nçš„é€‚ç”¨æ€§:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">append_text=<span class="string">'\nThis is appended file.'</span>  <span class="comment"># ä¸ºè¿™è¡Œæ–‡å­—æå‰ç©ºè¡Œ "\n"</span></span><br><span class="line">my_file=open(<span class="string">'my file.txt'</span>,<span class="string">'a'</span>)   <span class="comment"># 'a'=append ä»¥å¢åŠ å†…å®¹çš„å½¢å¼æ‰“å¼€</span></span><br><span class="line">my_file.write(append_text)</span><br><span class="line">my_file.close()</span><br></pre></td></tr></table></figure>
<pre><code>This is my first test.
This is the second line.
This the third line.
This is appended file.
</code></pre><h2 id="3-file-read"><a href="#3-file-read" class="headerlink" title="3. file.read()"></a>3. file.read()</h2><p>è°ƒç”¨ <code>read()</code> ä¼šä¸€æ¬¡æ€§è¯»å–æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼Œå¦‚æœæ–‡ä»¶æœ‰10Gï¼Œå†…å­˜å°±çˆ†äº†ï¼Œæ‰€ä»¥ï¼Œè¦ä¿é™©èµ·è§ï¼Œå¯ä»¥åå¤è°ƒç”¨<code>read(size)</code>æ–¹æ³•ï¼Œæ¯æ¬¡æœ€å¤šè¯»å–<code>size</code>ä¸ªå­—èŠ‚çš„å†…å®¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">file= open(<span class="string">'my file.txt'</span>,<span class="string">'r'</span>) </span><br><span class="line">content=file.read()  </span><br><span class="line">print(content)</span><br></pre></td></tr></table></figure>
<pre><code>This is my first test.
This is the second line.
This the third line.
This is appended file.    
</code></pre><h2 id="4-file-readline"><a href="#4-file-readline" class="headerlink" title="4. file.readline()"></a>4. file.readline()</h2><p>å¦‚æœæƒ³åœ¨æ–‡æœ¬ä¸­ä¸€è¡Œè¡Œçš„è¯»å–æ–‡æœ¬, å¯ä»¥ä½¿ç”¨ <code>file.readline()</code>, <code>file.readline()</code> è¯»å–çš„å†…å®¹å’Œä½ ä½¿ç”¨çš„æ¬¡æ•°æœ‰å…³, ä½¿ç”¨ç¬¬äºŒæ¬¡çš„æ—¶å€™, è¯»å–åˆ°çš„æ˜¯æ–‡æœ¬çš„ç¬¬äºŒè¡Œ, å¹¶å¯ä»¥ä»¥æ­¤ç±»æ¨:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">file= open(<span class="string">'my file.txt'</span>,<span class="string">'r'</span>) </span><br><span class="line">content=file.readline()  <span class="comment"># è¯»å–ç¬¬ä¸€è¡Œ</span></span><br><span class="line">print(content)</span><br></pre></td></tr></table></figure>
<pre><code>This is my first test.
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">second_read_time=file.readline()  <span class="comment"># è¯»å–ç¬¬äºŒè¡Œ</span></span><br><span class="line">print(second_read_time)</span><br></pre></td></tr></table></figure>
<pre><code>This is the second line.
</code></pre><h2 id="5-file-readlines"><a href="#5-file-readlines" class="headerlink" title="5. file.readlines()"></a>5. file.readlines()</h2><p>å¦‚æœæƒ³è¦è¯»å–æ‰€æœ‰è¡Œ, å¹¶å¯ä»¥ä½¿ç”¨åƒ <code>for</code> ä¸€æ ·çš„è¿­ä»£å™¨è¿­ä»£è¿™äº›è¡Œç»“æœ, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>file.readlines()</code>, å°†æ¯ä¸€è¡Œçš„ç»“æœå­˜å‚¨åœ¨ <code>list</code> ä¸­, æ–¹ä¾¿ä»¥åè¿­ä»£.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">file= open(<span class="string">'my file.txt'</span>,<span class="string">'r'</span>) </span><br><span class="line">content=file.readlines() <span class="comment"># python_list å½¢å¼</span></span><br><span class="line">print(content)</span><br></pre></td></tr></table></figure>
<pre><code>[&apos;This is my first test.\n&apos;, &apos;This is the second line.\n&apos;, &apos;This the third line.\n&apos;, &apos;This is appended file.&apos;]
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¹‹åå¦‚æœä½¿ç”¨ for æ¥è¿­ä»£è¾“å‡º:</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> content:</span><br><span class="line">    print(item)</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    This <span class="keyword">is</span> my first test.</span><br><span class="line"></span><br><span class="line">    This <span class="keyword">is</span> the second line.</span><br><span class="line"></span><br><span class="line">    This the third line.</span><br><span class="line"></span><br><span class="line">    This <span class="keyword">is</span> appended file.</span><br><span class="line"></span><br><span class="line"><span class="comment">## 6. file.close()</span></span><br><span class="line"></span><br><span class="line">ç”±äºæ–‡ä»¶è¯»å†™æ—¶éƒ½æœ‰å¯èƒ½äº§ç”Ÿ`IOError`ï¼Œä¸€æ—¦å‡ºé”™ï¼Œåé¢çš„`f.close()`å°±ä¸ä¼šè°ƒç”¨ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ä¿è¯æ— è®ºæ˜¯å¦å‡ºé”™éƒ½èƒ½æ­£ç¡®åœ°å…³é—­æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`<span class="keyword">try</span> ... <span class="keyword">finally</span>`æ¥å®ç°ï¼š</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'/path/to/file'</span>, <span class="string">'r'</span>)</span><br><span class="line">    <span class="keyword">print</span> f.read()</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">if</span> f:</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ¯æ¬¡éƒ½è¿™ä¹ˆå†™å®åœ¨å¤ªç¹çï¼Œæ‰€ä»¥ï¼ŒPythonå¼•å…¥äº†<code>with</code>è¯­å¥æ¥è‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒç”¨<code>close()</code>æ–¹æ³•ï¼š</p>
</blockquote>
<h2 id="7-with-open-as-f"><a href="#7-with-open-as-f" class="headerlink" title="7. with open .. as f"></a>7. with open .. as f</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'/path/to/file'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">print</span> f.read()</span><br></pre></td></tr></table></figure>
<p>è¿™å’Œå‰é¢çš„try â€¦ finallyæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä»£ç æ›´ä½³ç®€æ´ï¼Œå¹¶ä¸”ä¸å¿…è°ƒç”¨f.close()æ–¹æ³•ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://docs.python.org/" target="_blank" rel="external">docs.python.org</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/python-basic/basic/08-2-read-file2/" target="_blank" rel="external">python morvanzhou</a></li>
<li><a href="https://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001386820066616a77f826d876b46b9ac34cb5f34374f7a000" target="_blank" rel="external">python liaoxuefeng</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python Sliceã€Iterationã€List generationã€Generator]]></title>
      <url>http://shopee.ai/2017/06/03/python/language/py-language-10-advanced/</url>
      <content type="html"><![CDATA[<p>Sliceã€Iterationã€List generationã€Generator</p>
<a id="more"></a>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">L = []</span><br><span class="line">n = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> n &lt;= <span class="number">99</span>:</span><br><span class="line">    L.append(n)</span><br><span class="line">    n = n + <span class="number">2</span></span><br></pre></td></tr></table></figure>
<h2 id="1-Slice"><a href="#1-Slice" class="headerlink" title="1. Slice"></a>1. Slice</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'Michael'</span>, <span class="string">'Sarah'</span>, <span class="string">'Tracy'</span>, <span class="string">'Bob'</span>, <span class="string">'Jack'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">[<span class="string">'Sarah'</span>, <span class="string">'Tracy'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">-2</span>:]</span><br><span class="line">[<span class="string">'Bob'</span>, <span class="string">'Jack'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = range(<span class="number">100</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>, <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>, <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">55</span>, <span class="number">56</span>, <span class="number">57</span>, <span class="number">58</span>, <span class="number">59</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">62</span>, <span class="number">63</span>, <span class="number">64</span>, <span class="number">65</span>, <span class="number">66</span>, <span class="number">67</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">71</span>, <span class="number">72</span>, <span class="number">73</span>, <span class="number">74</span>, <span class="number">75</span>, <span class="number">76</span>, <span class="number">77</span>, <span class="number">78</span>, <span class="number">79</span>, <span class="number">80</span>, <span class="number">81</span>, <span class="number">82</span>, <span class="number">83</span>, <span class="number">84</span>, <span class="number">85</span>, <span class="number">86</span>, <span class="number">87</span>, <span class="number">88</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">91</span>, <span class="number">92</span>, <span class="number">93</span>, <span class="number">94</span>, <span class="number">95</span>, <span class="number">96</span>, <span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[:<span class="number">10</span>:<span class="number">2</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[::<span class="number">5</span>]</span><br><span class="line">[<span class="number">0</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>, <span class="number">40</span>, <span class="number">45</span>, <span class="number">50</span>, <span class="number">55</span>, <span class="number">60</span>, <span class="number">65</span>, <span class="number">70</span>, <span class="number">75</span>, <span class="number">80</span>, <span class="number">85</span>, <span class="number">90</span>, <span class="number">95</span>]</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>tupleä¹Ÿæ˜¯ä¸€ç§listï¼Œå”¯ä¸€åŒºåˆ«æ˜¯tupleä¸å¯å˜ã€‚å› æ­¤ï¼Œtupleä¹Ÿå¯ä»¥ç”¨åˆ‡ç‰‡æ“ä½œï¼Œåªæ˜¯æ“ä½œçš„ç»“æœä»æ˜¯tuple</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)[:<span class="number">3</span>]</span><br><span class="line">(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>å­—ç¬¦ä¸²<code>&#39;xxx&#39;</code>æˆ–Unicodeå­—ç¬¦ä¸²<code>u&#39;xxx&#39;</code>ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯ä¸€ç§listï¼Œæ¯ä¸ªå…ƒç´ å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ç”¨åˆ‡ç‰‡æ“ä½œï¼Œåªæ˜¯æ“ä½œç»“æœä»æ˜¯å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'ABCDEFG'</span>[:<span class="number">3</span>]</span><br><span class="line"><span class="string">'ABC'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'ABCDEFG'</span>[::<span class="number">2</span>]</span><br><span class="line"><span class="string">'ACEG'</span></span><br></pre></td></tr></table></figure>
<h2 id="2-Iteration"><a href="#2-Iteration" class="headerlink" title="2. Iteration"></a>2. Iteration</h2><p>åªè¦æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œæ— è®ºæœ‰æ— ä¸‹æ ‡ï¼Œéƒ½å¯ä»¥è¿­ä»£ï¼Œæ¯”å¦‚dictå°±å¯ä»¥è¿­ä»£</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;list.length; i++) &#123;</span><br><span class="line">    n = list[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line">d = &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> d:</span><br><span class="line">    <span class="keyword">print</span> key</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> ch <span class="keyword">in</span> <span class="string">'ABC'</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> ch</span><br><span class="line">...</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br></pre></td></tr></table></figure>
<p>å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¯è¿­ä»£å¯¹è±¡å‘¢ï¼Ÿæ–¹æ³•æ˜¯é€šè¿‡<code>collectionsæ¨¡å—</code>çš„<code>Iterable</code>ç±»å‹åˆ¤æ–­ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(<span class="string">'abc'</span>, Iterable) <span class="comment"># stræ˜¯å¦å¯è¿­ä»£</span></span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], Iterable) <span class="comment"># listæ˜¯å¦å¯è¿­ä»£</span></span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(<span class="number">123</span>, Iterable) <span class="comment"># æ•´æ•°æ˜¯å¦å¯è¿­ä»£</span></span><br><span class="line"><span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦å¯¹listå®ç°ç±»ä¼¼Javaé‚£æ ·çš„ä¸‹æ ‡å¾ªç¯æ€ä¹ˆåŠï¼ŸPythonå†…ç½®çš„<code>enumerate</code>å‡½æ•°å¯ä»¥æŠŠä¸€ä¸ªlistå˜æˆç´¢å¼•-å…ƒç´ å¯¹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨forå¾ªç¯ä¸­åŒæ—¶è¿­ä»£ç´¢å¼•å’Œå…ƒç´ æœ¬èº«ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i, value <span class="keyword">in</span> enumerate([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]):</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> i, value</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span> A</span><br><span class="line"><span class="number">1</span> B</span><br><span class="line"><span class="number">2</span> C</span><br></pre></td></tr></table></figure>
<p><code>for</code>å¾ªç¯é‡Œï¼ŒåŒæ—¶å¼•ç”¨äº†ä¸¤ä¸ªå˜é‡ï¼Œåœ¨Pythoné‡Œæ˜¯å¾ˆå¸¸è§</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x, y <span class="keyword">in</span> [(<span class="number">1</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">4</span>), (<span class="number">3</span>, <span class="number">9</span>)]:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> x, y</span><br><span class="line">...</span><br><span class="line"><span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">2</span> <span class="number">4</span></span><br><span class="line"><span class="number">3</span> <span class="number">9</span></span><br></pre></td></tr></table></figure>
<h2 id="3-List-Generation"><a href="#3-List-Generation" class="headerlink" title="3. List Generation"></a>3. List Generation</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]</span><br><span class="line">[<span class="number">4</span>, <span class="number">16</span>, <span class="number">36</span>, <span class="number">64</span>, <span class="number">100</span>]</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥ä½¿ç”¨ä¸¤å±‚å¾ªç¯ï¼Œå¯ä»¥ç”Ÿæˆå…¨æ’åˆ—ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[m + n <span class="keyword">for</span> m <span class="keyword">in</span> <span class="string">'ABC'</span> <span class="keyword">for</span> n <span class="keyword">in</span> <span class="string">'XYZ'</span>]</span><br><span class="line">[<span class="string">'AX'</span>, <span class="string">'AY'</span>, <span class="string">'AZ'</span>, <span class="string">'BX'</span>, <span class="string">'BY'</span>, <span class="string">'BZ'</span>, <span class="string">'CX'</span>, <span class="string">'CY'</span>, <span class="string">'CZ'</span>]</span><br></pre></td></tr></table></figure>
<p>è¿ç”¨åˆ—è¡¨ç”Ÿæˆå¼ï¼Œå¯ä»¥å†™å‡ºéå¸¸ç®€æ´çš„ä»£ç ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•å</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os <span class="comment"># å¯¼å…¥osæ¨¡å—ï¼Œæ¨¡å—çš„æ¦‚å¿µåé¢è®²åˆ°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[d <span class="keyword">for</span> d <span class="keyword">in</span> os.listdir(<span class="string">'.'</span>)] <span class="comment"># os.listdirå¯ä»¥åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•</span></span><br><span class="line">[<span class="string">'.emacs.d'</span>, <span class="string">'.ssh'</span>, <span class="string">'.Trash'</span>, <span class="string">'Adlm'</span>, <span class="string">'Applications'</span>, <span class="string">'Desktop'</span>, <span class="string">'Documents'</span>, <span class="string">'Downloads'</span>, <span class="string">'Library'</span>, <span class="string">'Movies'</span>, <span class="string">'Music'</span>, <span class="string">'Pictures'</span>, <span class="string">'Public'</span>, <span class="string">'VirtualBox VMs'</span>, <span class="string">'Workspace'</span>, <span class="string">'XCode'</span>]</span><br></pre></td></tr></table></figure>
<p>forå¾ªç¯å…¶å®å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªç”šè‡³å¤šä¸ªå˜é‡ï¼Œæ¯”å¦‚<code>dict</code>çš„<code>iteritems()</code>å¯ä»¥åŒæ—¶è¿­ä»£keyå’Œvalueï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'x'</span>: <span class="string">'A'</span>, <span class="string">'y'</span>: <span class="string">'B'</span>, <span class="string">'z'</span>: <span class="string">'C'</span> &#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k, v <span class="keyword">in</span> d.iteritems():</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> k, <span class="string">'='</span>, v</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">y = B</span><br><span class="line">x = A</span><br><span class="line">z = C</span><br></pre></td></tr></table></figure>
<p>åˆ—è¡¨ç”Ÿæˆå¼ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå˜é‡æ¥ç”Ÿæˆlistï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'x'</span>: <span class="string">'A'</span>, <span class="string">'y'</span>: <span class="string">'B'</span>, <span class="string">'z'</span>: <span class="string">'C'</span> &#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[k + <span class="string">'='</span> + v <span class="keyword">for</span> k, v <span class="keyword">in</span> d.iteritems()]</span><br><span class="line">[<span class="string">'y=B'</span>, <span class="string">'x=A'</span>, <span class="string">'z=C'</span>]</span><br></pre></td></tr></table></figure>
<p>æœ€åæŠŠä¸€ä¸ªlistä¸­æ‰€æœ‰çš„å­—ç¬¦ä¸²å˜æˆå°å†™ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'Hello'</span>, <span class="string">'World'</span>, <span class="string">'IBM'</span>, <span class="string">'Apple'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[s.lower() <span class="keyword">for</span> s <span class="keyword">in</span> L]</span><br><span class="line">[<span class="string">'hello'</span>, <span class="string">'world'</span>, <span class="string">'ibm'</span>, <span class="string">'apple'</span>]</span><br></pre></td></tr></table></figure>
<p><strong>å°ç»“</strong></p>
<p>è¿ç”¨åˆ—è¡¨ç”Ÿæˆå¼ï¼Œå¯ä»¥å¿«é€Ÿç”Ÿæˆlistï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªlistæ¨å¯¼å‡ºå¦ä¸€ä¸ªlistï¼Œè€Œä»£ç å´ååˆ†ç®€æ´ã€‚</p>
<h2 id="4-Generator"><a href="#4-Generator" class="headerlink" title="4. Generator"></a>4. Generator</h2><p>å¦‚æœåˆ—è¡¨å…ƒç´ å¯ä»¥æŒ‰ç…§æŸç§ç®—æ³•æ¨ç®—å‡ºæ¥ï¼Œé‚£æˆ‘ä»¬æ˜¯å¦å¯ä»¥åœ¨å¾ªç¯çš„è¿‡ç¨‹ä¸­ä¸æ–­æ¨ç®—å‡ºåç»­çš„å…ƒç´ å‘¢ï¼Ÿè¿™æ ·å°±ä¸å¿…åˆ›å»ºå®Œæ•´çš„listï¼Œä»è€ŒèŠ‚çœå¤§é‡çš„ç©ºé—´ã€‚åœ¨Pythonä¸­ï¼Œè¿™ç§ä¸€è¾¹å¾ªç¯ä¸€è¾¹è®¡ç®—çš„æœºåˆ¶ï¼Œç§°ä¸ºç”Ÿæˆå™¨ï¼ˆ<code>Generator</code>ï¼‰</p>
<p>è¦åˆ›å»ºä¸€ä¸ªgeneratorï¼Œæœ‰å¾ˆå¤šç§æ–¹æ³•ã€‚ç¬¬ä¸€ç§æ–¹æ³•å¾ˆç®€å•ï¼Œåªè¦æŠŠä¸€ä¸ªåˆ—è¡¨ç”Ÿæˆå¼çš„<code>[]</code>æ”¹æˆ<code>()</code>ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªgeneratorï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = (x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g</span><br><span class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x104feab40</span>&gt;</span><br></pre></td></tr></table></figure>
<p>generator æ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = (x * x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> n <span class="keyword">in</span> g:</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> n</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="number">25</span></span><br><span class="line"><span class="number">36</span></span><br><span class="line"><span class="number">49</span></span><br><span class="line"><span class="number">64</span></span><br><span class="line"><span class="number">81</span></span><br></pre></td></tr></table></figure>
<p>æ–æ³¢æ‹‰å¥‘æ•°åˆ—</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(max)</span>:</span></span><br><span class="line">    n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; max:</span><br><span class="line">        <span class="keyword">print</span> b</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        n = n + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p><code>fib</code>å‡½æ•°å®é™…ä¸Šæ˜¯å®šä¹‰äº†æ–æ³¢æ‹‰å¥‘æ•°åˆ—çš„æ¨ç®—è§„åˆ™ï¼Œå¯ä»¥ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¨ç®—å‡ºåç»­ä»»æ„çš„å…ƒç´ ï¼Œè¿™ç§é€»è¾‘å…¶å®éå¸¸ç±»ä¼¼generatorã€‚</p>
<p>æŠŠ<code>fib</code>å‡½æ•°å˜æˆ<code>generator</code>ï¼Œåªéœ€è¦æŠŠ <code>print b</code> æ”¹ä¸º <code>yield b</code> å°±å¯ä»¥äº†</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(max)</span>:</span></span><br><span class="line">    n, a, b = <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; max:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        n = n + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœä¸€ä¸ªå‡½æ•°å®šä¹‰ä¸­åŒ…å« <code>yield</code>å…³é”®å­—ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªgenerator</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>fib(<span class="number">6</span>)</span><br><span class="line">&lt;generator object fib at <span class="number">0x104feaaa0</span>&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‡½æ•°æ˜¯é¡ºåºæ‰§è¡Œï¼Œé‡åˆ°<code>return</code>è¯­å¥æˆ–è€…æœ€åä¸€è¡Œå‡½æ•°è¯­å¥å°±è¿”å›ã€‚è€Œå˜æˆ<code>generator</code>çš„å‡½æ•°ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨<code>next()</code>çš„æ—¶å€™æ‰§è¡Œï¼Œé‡åˆ°<code>yield</code>è¯­å¥è¿”å›ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ä»ä¸Šæ¬¡è¿”å›çš„<code>yield</code> è¯­å¥å¤„ç»§ç»­æ‰§è¡Œã€‚</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">odd</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'step 1'</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">1</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'step 2'</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'step 3'</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">yield</span> <span class="number">5</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o = odd()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">step <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">step <span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">step <span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>o.next()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">StopIteration</span><br></pre></td></tr></table></figure>
<p><strong>å°ç»“</strong></p>
<p>generatoræ˜¯éå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œåœ¨Pythonä¸­ï¼Œå¯ä»¥ç®€å•åœ°æŠŠåˆ—è¡¨ç”Ÿæˆå¼æ”¹æˆgeneratorï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‡½æ•°å®ç°å¤æ‚é€»è¾‘çš„generatorã€‚</p>
<p>è¦ç†è§£generatorçš„å·¥ä½œåŸç†ï¼Œå®ƒæ˜¯åœ¨forå¾ªç¯çš„è¿‡ç¨‹ä¸­ä¸æ–­è®¡ç®—å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶åœ¨é€‚å½“çš„æ¡ä»¶ç»“æŸ<code>for</code>å¾ªç¯ã€‚å¯¹äºå‡½æ•°æ”¹æˆçš„generatoræ¥è¯´ï¼Œé‡åˆ°returnè¯­å¥æˆ–è€…æ‰§è¡Œåˆ°å‡½æ•°ä½“æœ€åä¸€è¡Œè¯­å¥ï¼Œå°±æ˜¯ç»“æŸgeneratorçš„æŒ‡ä»¤ï¼Œ<code>for</code>å¾ªç¯éšä¹‹ç»“æŸã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/0013868196169906eb9ca5864384546bf3405ae6a172b3e000" target="_blank" rel="external">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python defå‡½æ•°ã€å‡½æ•°å‚æ•°ã€å‡½æ•°é»˜è®¤å‚æ•°]]></title>
      <url>http://shopee.ai/2017/06/03/python/language/py-language-5-function/</url>
      <content type="html"><![CDATA[<p>å®šä¹‰å‡½æ•°ã€å†…ç½®å‡½æ•°ã€å‡½æ•°å‚æ•°ã€å‡½æ•°é»˜è®¤å‚æ•°</p>
<a id="more"></a>
<h2 id="1-å†…ç½®å‡½æ•°"><a href="#1-å†…ç½®å‡½æ•°" class="headerlink" title="1. å†…ç½®å‡½æ•°"></a>1. å†…ç½®å‡½æ•°</h2><p>å†…ç½®å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>abs(<span class="number">-12.34</span>)</span><br><span class="line"><span class="number">12.34</span></span><br></pre></td></tr></table></figure>
<p><a href="https://docs.python.org/2/library/functions.html#abs" target="_blank" rel="external">abs api</a></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="number">-1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cmp(<span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>æ•°æ®ç±»å‹è½¬æ¢</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'123'</span>)</span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="number">12.34</span>)</span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>float(<span class="string">'12.34'</span>)</span><br><span class="line"><span class="number">12.34</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str(<span class="number">1.23</span>)</span><br><span class="line"><span class="string">'1.23'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>unicode(<span class="number">100</span>)</span><br><span class="line"><span class="string">u'100'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bool(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bool(<span class="string">''</span>)</span><br><span class="line"><span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<p>å‡½æ•°åå…¶å®å°±æ˜¯æŒ‡å‘ä¸€ä¸ªå‡½æ•°å¯¹è±¡çš„å¼•ç”¨ï¼Œå®Œå…¨å¯ä»¥æŠŠå‡½æ•°åèµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œç›¸å½“äºç»™è¿™ä¸ªå‡½æ•°èµ·äº†ä¸€ä¸ªâ€œåˆ«åâ€ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = abs <span class="comment"># å˜é‡aæŒ‡å‘abså‡½æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a(<span class="number">-1</span>) <span class="comment"># æ‰€ä»¥ä¹Ÿå¯ä»¥é€šè¿‡aè°ƒç”¨abså‡½æ•°</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="2-defå‡½æ•°"><a href="#2-defå‡½æ•°" class="headerlink" title="2. defå‡½æ•°"></a>2. defå‡½æ•°</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_abs</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> -x</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>return None</code> å¯ä»¥ç®€å†™ä¸º <code>return</code>ã€‚</p>
</blockquote>
<h3 id="2-1-ç©ºå‡½æ•°"><a href="#2-1-ç©ºå‡½æ•°" class="headerlink" title="2.1 ç©ºå‡½æ•°"></a>2.1 ç©ºå‡½æ•°</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nop</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2-å‡½æ•°å‚æ•°ç±»å‹æ£€æŸ¥"><a href="#2-2-å‡½æ•°å‚æ•°ç±»å‹æ£€æŸ¥" class="headerlink" title="2.2 å‡½æ•°å‚æ•°ç±»å‹æ£€æŸ¥"></a>2.2 å‡½æ•°å‚æ•°ç±»å‹æ£€æŸ¥</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_abs</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> isinstance(x, (int, float)):</span><br><span class="line">        <span class="keyword">raise</span> TypeError(<span class="string">'bad operand type'</span>)</span><br><span class="line">    <span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> -x</span><br></pre></td></tr></table></figure>
<h3 id="2-3-è¿”å›å¤šä¸ªå€¼-æ˜¯ä¸€ä¸ªtuple"><a href="#2-3-è¿”å›å¤šä¸ªå€¼-æ˜¯ä¸€ä¸ªtuple" class="headerlink" title="2.3 è¿”å›å¤šä¸ªå€¼ (æ˜¯ä¸€ä¸ªtuple)"></a>2.3 è¿”å›å¤šä¸ªå€¼ (æ˜¯ä¸€ä¸ªtuple)</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(x, y, step, angle=<span class="number">0</span>)</span>:</span></span><br><span class="line">    nx = x + step * math.cos(angle)</span><br><span class="line">    ny = y - step * math.sin(angle)</span><br><span class="line">    <span class="keyword">return</span> nx, ny</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x, y = move(<span class="number">100</span>, <span class="number">100</span>, <span class="number">60</span>, math.pi / <span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> x, y</span><br><span class="line"><span class="number">151.961524227</span> <span class="number">70.0</span></span><br></pre></td></tr></table></figure>
<h2 id="3-å‡½æ•°å‚æ•°"><a href="#3-å‡½æ•°å‚æ•°" class="headerlink" title="3. å‡½æ•°å‚æ•°"></a>3. å‡½æ•°å‚æ•°</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">power</span><span class="params">(x, n=<span class="number">2</span>)</span>:</span></span><br><span class="line">    s = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        n = n - <span class="number">1</span></span><br><span class="line">        s = s * x</span><br><span class="line">    <span class="keyword">return</span> s</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸€æ˜¯å¿…é€‰å‚æ•°åœ¨å‰ï¼Œé»˜è®¤å‚æ•°åœ¨åï¼Œå¦åˆ™Pythonçš„è§£é‡Šå™¨ä¼šæŠ¥é”™</p>
<p>äºŒæ˜¯å¦‚ä½•è®¾ç½®é»˜è®¤å‚æ•°ã€‚</p>
<p>å½“å‡½æ•°æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼ŒæŠŠå˜åŒ–å¤§çš„å‚æ•°æ”¾å‰é¢ï¼Œå˜åŒ–å°çš„å‚æ•°æ”¾åé¢ã€‚å˜åŒ–å°çš„å‚æ•°å°±å¯ä»¥ä½œä¸ºé»˜è®¤å‚æ•°ã€‚</p>
<p>ä½¿ç”¨é»˜è®¤å‚æ•°æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿæœ€å¤§çš„å¥½å¤„æ˜¯èƒ½é™ä½è°ƒç”¨å‡½æ•°çš„éš¾åº¦ã€‚</p>
<p>å®šä¹‰é»˜è®¤å‚æ•°è¦ç‰¢è®°ä¸€ç‚¹ï¼š<code>é»˜è®¤å‚æ•°å¿…é¡»æŒ‡å‘ä¸å˜å¯¹è±¡ï¼</code></p>
</blockquote>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_end</span><span class="params">(L=None)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> L <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        L = []</span><br><span class="line">    L.append(<span class="string">'END'</span>)</span><br><span class="line">    <span class="keyword">return</span> L</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦è®¾è®¡strã€Noneè¿™æ ·çš„ä¸å˜å¯¹è±¡å‘¢ï¼Ÿå› ä¸ºä¸å˜å¯¹è±¡ä¸€æ—¦åˆ›å»ºï¼Œå¯¹è±¡å†…éƒ¨çš„æ•°æ®å°±ä¸èƒ½ä¿®æ”¹ï¼Œè¿™æ ·å°±å‡å°‘äº†ç”±äºä¿®æ”¹æ•°æ®å¯¼è‡´çš„é”™è¯¯ã€‚æ­¤å¤–ï¼Œç”±äºå¯¹è±¡ä¸å˜ï¼Œå¤šä»»åŠ¡ç¯å¢ƒä¸‹åŒæ—¶è¯»å–å¯¹è±¡ä¸éœ€è¦åŠ é”ï¼ŒåŒæ—¶è¯»ä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ã€‚æˆ‘ä»¬åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œå¦‚æœå¯ä»¥è®¾è®¡ä¸€ä¸ªä¸å˜å¯¹è±¡ï¼Œé‚£å°±å°½é‡è®¾è®¡æˆä¸å˜å¯¹è±¡ã€‚</p>
</blockquote>
<p><strong>å¯å˜å‚æ•°</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(numbers)</span>:</span></span><br><span class="line">    sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> numbers:</span><br><span class="line">        sum = sum + n * n</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>calc([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="number">14</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>calc((<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>))</span><br><span class="line"><span class="number">84</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœåˆ©ç”¨å¯å˜å‚æ•°ï¼Œè°ƒç”¨å‡½æ•°çš„æ–¹å¼å¯ä»¥ç®€åŒ–æˆè¿™æ ·ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(*numbers)</span>:</span></span><br><span class="line">    sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> numbers:</span><br><span class="line">        sum = sum + n * n</span><br><span class="line">    <span class="keyword">return</span> sum</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰å¯å˜å‚æ•°å’Œå®šä¹‰listæˆ–tupleå‚æ•°ç›¸æ¯”ï¼Œä»…ä»…åœ¨å‚æ•°å‰é¢åŠ äº†ä¸€ä¸ª*å·ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œå‚æ•°numbersæ¥æ”¶åˆ°çš„æ˜¯ä¸€ä¸ªtupleï¼Œå› æ­¤ï¼Œå‡½æ•°ä»£ç å®Œå…¨ä¸å˜ã€‚ä½†æ˜¯ï¼Œè°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä»»æ„ä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬0ä¸ªå‚æ•°ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>calc(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>calc()</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§å†™æ³•ç›¸å½“æœ‰ç”¨ï¼Œè€Œä¸”å¾ˆå¸¸è§ï¼Œè§å¦‚ä¸‹ :</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>calc(*nums)</span><br><span class="line"><span class="number">14</span></span><br></pre></td></tr></table></figure>
<p><strong>å…³é”®å­—å‚æ•°</strong></p>
<p><code>å¯å˜å‚æ•°</code>å…è®¸ä½ ä¼ å…¥0ä¸ªæˆ–ä»»æ„ä¸ªå‚æ•°ï¼Œè¿™äº›å¯å˜å‚æ•°åœ¨å‡½æ•°è°ƒç”¨æ—¶è‡ªåŠ¨ç»„è£…ä¸ºä¸€ä¸ªtupleã€‚</p>
<p><code>å…³é”®å­—å‚æ•°</code>å…è®¸ä½ ä¼ å…¥0ä¸ªæˆ–ä»»æ„ä¸ªå«å‚æ•°åçš„å‚æ•°ï¼Œè¿™äº›å…³é”®å­—å‚æ•°åœ¨å‡½æ•°å†…éƒ¨è‡ªåŠ¨ç»„è£…ä¸ºä¸€ä¸ªdictã€‚</p>
<p>è¯·çœ‹ç¤ºä¾‹ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name, age, **kw)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'name:'</span>, name, <span class="string">'age:'</span>, age, <span class="string">'other:'</span>, kw</span><br></pre></td></tr></table></figure>
<p>å‡½æ•°<code>person</code>é™¤äº†å¿…é€‰å‚æ•°<code>name</code>å’Œ<code>age</code>å¤–ï¼Œè¿˜æ¥å—å…³é”®å­—å‚æ•°<code>kw</code>ã€‚åœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå¯ä»¥åªä¼ å…¥å¿…é€‰å‚æ•°; ä¹Ÿå¯ä»¥ä¼ å…¥ä»»æ„ä¸ªæ•°çš„å…³é”®å­—å‚æ•°;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>person(<span class="string">'Bob'</span>, <span class="number">35</span>, city=<span class="string">'Beijing'</span>)</span><br><span class="line">name: Bob age: <span class="number">35</span> other: &#123;<span class="string">'city'</span>: <span class="string">'Beijing'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>person(<span class="string">'Adam'</span>, <span class="number">45</span>, gender=<span class="string">'M'</span>, job=<span class="string">'Engineer'</span>)</span><br><span class="line">name: Adam age: <span class="number">45</span> other: &#123;<span class="string">'gender'</span>: <span class="string">'M'</span>, <span class="string">'job'</span>: <span class="string">'Engineer'</span>&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>kw = &#123;<span class="string">'city'</span>: <span class="string">'Beijing'</span>, <span class="string">'job'</span>: <span class="string">'Engineer'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>person(<span class="string">'Jack'</span>, <span class="number">24</span>, **kw)</span><br><span class="line">name: Jack age: <span class="number">24</span> other: &#123;<span class="string">'city'</span>: <span class="string">'Beijing'</span>, <span class="string">'job'</span>: <span class="string">'Engineer'</span>&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å‚æ•°ç»„åˆ</strong></p>
<p>åœ¨Pythonä¸­å®šä¹‰å‡½æ•°ï¼Œå¯ä»¥ç”¨å¿…é€‰å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°ï¼Œè¿™4ç§å‚æ•°éƒ½å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼Œæˆ–è€…åªç”¨å…¶ä¸­æŸäº›ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œå‚æ•°å®šä¹‰çš„é¡ºåºå¿…é¡»æ˜¯ï¼šå¿…é€‰å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a, b, c=<span class="number">0</span>, *args, **kw)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'a ='</span>, a, <span class="string">'b ='</span>, b, <span class="string">'c ='</span>, c, <span class="string">'args ='</span>, args, <span class="string">'kw ='</span>, kw</span><br></pre></td></tr></table></figure>
<p>åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼ŒPythonè§£é‡Šå™¨è‡ªåŠ¨æŒ‰ç…§å‚æ•°ä½ç½®å’Œå‚æ•°åæŠŠå¯¹åº”çš„å‚æ•°ä¼ è¿›å»ã€‚</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>func(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">a = <span class="number">1</span> b = <span class="number">2</span> c = <span class="number">0</span> args = () kw = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func(<span class="number">1</span>, <span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line">a = <span class="number">1</span> b = <span class="number">2</span> c = <span class="number">3</span> args = () kw = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'a'</span>, <span class="string">'b'</span>)</span><br><span class="line">a = <span class="number">1</span> b = <span class="number">2</span> c = <span class="number">3</span> args = (<span class="string">'a'</span>, <span class="string">'b'</span>) kw = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, x=<span class="number">99</span>)</span><br><span class="line">a = <span class="number">1</span> b = <span class="number">2</span> c = <span class="number">3</span> args = (<span class="string">'a'</span>, <span class="string">'b'</span>) kw = &#123;<span class="string">'x'</span>: <span class="number">99</span>&#125;</span><br></pre></td></tr></table></figure>
<p>ç¥å¥‡çš„æ˜¯é€šè¿‡ä¸€ä¸ªtupleå’Œdictï¼Œä½ ä¹Ÿå¯ä»¥è°ƒç”¨è¯¥å‡½æ•°ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>args = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>kw = &#123;<span class="string">'x'</span>: <span class="number">99</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func(*args, **kw)</span><br><span class="line">a = <span class="number">1</span> b = <span class="number">2</span> c = <span class="number">3</span> args = (<span class="number">4</span>,) kw = &#123;<span class="string">'x'</span>: <span class="number">99</span>&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œå¯¹äºä»»æ„å‡½æ•°ï¼Œéƒ½å¯ä»¥é€šè¿‡ç±»ä¼¼<code>func(*args, **kw)</code>çš„å½¢å¼è°ƒç”¨å®ƒï¼Œæ— è®ºå®ƒçš„å‚æ•°æ˜¯å¦‚ä½•å®šä¹‰çš„ã€‚</p>
<p><strong>å°ç»“</strong></p>
<p>Pythonçš„å‡½æ•°å…·æœ‰éå¸¸çµæ´»çš„å‚æ•°å½¢æ€ï¼Œæ—¢å¯ä»¥å®ç°ç®€å•çš„è°ƒç”¨ï¼Œåˆå¯ä»¥ä¼ å…¥éå¸¸å¤æ‚çš„å‚æ•°ã€‚</p>
<p>é»˜è®¤å‚æ•°ä¸€å®šè¦ç”¨ä¸å¯å˜å¯¹è±¡ï¼Œå¦‚æœæ˜¯å¯å˜å¯¹è±¡ï¼Œè¿è¡Œä¼šæœ‰é€»è¾‘é”™è¯¯ï¼</p>
<p>è¦æ³¨æ„å®šä¹‰å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°çš„è¯­æ³•ï¼š</p>
<p><code>*args</code>æ˜¯å¯å˜å‚æ•°ï¼Œargsæ¥æ”¶çš„æ˜¯ä¸€ä¸ªtupleï¼›</p>
<p><code>**kw</code>æ˜¯å…³é”®å­—å‚æ•°ï¼Œkwæ¥æ”¶çš„æ˜¯ä¸€ä¸ªdictã€‚</p>
<p>ä»¥åŠè°ƒç”¨å‡½æ•°æ—¶å¦‚ä½•ä¼ å…¥å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°çš„è¯­æ³•ï¼š</p>
<p>å¯å˜å‚æ•°æ—¢å¯ç›´æ¥ä¼ å…¥ï¼š<code>func(1, 2, 3)</code>ï¼Œåˆå¯å…ˆç»„è£…listæˆ–tupleï¼Œå†é€šè¿‡<code>*args</code>ä¼ å…¥ï¼š<code>func(*(1, 2, 3))</code>ï¼›</p>
<p>å…³é”®å­—å‚æ•°æ—¢å¯ç›´æ¥ä¼ å…¥ï¼š<code>func(a=1, b=2)</code>ï¼Œåˆå¯å…ˆç»„è£…dictï¼Œå†é€šè¿‡<code>**kw</code>ä¼ å…¥ï¼š<code>func(**{&#39;a&#39;: 1, &#39;b&#39;: 2})</code>ã€‚</p>
<p>ä½¿ç”¨<code>*args</code>å’Œ<code>**kw</code>æ˜¯Pythonçš„ä¹ æƒ¯å†™æ³•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨å…¶ä»–å‚æ•°åï¼Œä½†æœ€å¥½ä½¿ç”¨ä¹ æƒ¯ç”¨æ³•ã€‚</p>
<h3 id="é€’å½’å‡½æ•°"><a href="#é€’å½’å‡½æ•°" class="headerlink" title="é€’å½’å‡½æ•°"></a>é€’å½’å‡½æ•°</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fact</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> n * fact(n - <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨é€’å½’å‡½æ•°éœ€è¦æ³¨æ„é˜²æ­¢æ ˆæº¢å‡ºã€‚åœ¨è®¡ç®—æœºä¸­ï¼Œå‡½æ•°è°ƒç”¨æ˜¯é€šè¿‡æ ˆï¼ˆstackï¼‰è¿™ç§æ•°æ®ç»“æ„å®ç°çš„ï¼Œæ¯å½“è¿›å…¥ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œæ ˆå°±ä¼šåŠ ä¸€å±‚æ ˆå¸§ï¼Œæ¯å½“å‡½æ•°è¿”å›ï¼Œæ ˆå°±ä¼šå‡ä¸€å±‚æ ˆå¸§ã€‚ç”±äºæ ˆçš„å¤§å°ä¸æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥ï¼Œé€’å½’è°ƒç”¨çš„æ¬¡æ•°è¿‡å¤šï¼Œä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚</p>
<p>ä½¿ç”¨é€’å½’å‡½æ•°çš„ä¼˜ç‚¹æ˜¯é€»è¾‘ç®€å•æ¸…æ™°ï¼Œç¼ºç‚¹æ˜¯è¿‡æ·±çš„è°ƒç”¨ä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚</p>
</blockquote>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><ul>
<li><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/0013868196169906eb9ca5864384546bf3405ae6a172b3e000" target="_blank" rel="external">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python é›†åˆ Listã€Tupleã€Dictã€ Set]]></title>
      <url>http://shopee.ai/2017/05/31/python/language/py-language-4-collection-type/</url>
      <content type="html"><![CDATA[<p>Python é›†åˆ Listã€Tupleã€Dictã€ Set</p>
<a id="more"></a>
<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates = [<span class="string">'Michael'</span>, <span class="string">'Bob'</span>, <span class="string">'Tracy'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates</span><br><span class="line">[<span class="string">'Michael'</span>, <span class="string">'Bob'</span>, <span class="string">'Tracy'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="append"><a href="#append" class="headerlink" title="append"></a>append</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates[<span class="number">-1</span>]</span><br><span class="line"><span class="string">'Tracy'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates.append(<span class="string">'Adam'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates</span><br><span class="line">[<span class="string">'Michael'</span>, <span class="string">'Bob'</span>, <span class="string">'Tracy'</span>, <span class="string">'Adam'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates.insert(<span class="number">1</span>, <span class="string">'Jack'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates</span><br><span class="line">[<span class="string">'Michael'</span>, <span class="string">'Jack'</span>, <span class="string">'Bob'</span>, <span class="string">'Tracy'</span>, <span class="string">'Adam'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates.pop()</span><br><span class="line"><span class="string">'Adam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates</span><br><span class="line">[<span class="string">'Michael'</span>, <span class="string">'Jack'</span>, <span class="string">'Bob'</span>, <span class="string">'Tracy'</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¦åˆ é™¤listæœ«å°¾çš„å…ƒç´ ï¼Œç”¨<code>pop()</code>æ–¹æ³•</p>
</blockquote>
<h3 id="pop-i"><a href="#pop-i" class="headerlink" title="pop(i)"></a>pop(i)</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates.pop(<span class="number">1</span>)</span><br><span class="line"><span class="string">'Jack'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates</span><br><span class="line">[<span class="string">'Michael'</span>, <span class="string">'Bob'</span>, <span class="string">'Tracy'</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¦åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œç”¨<code>pop(i)</code>æ–¹æ³•ï¼Œå…¶ä¸­<code>i</code>æ˜¯ç´¢å¼•ä½ç½®ï¼š</p>
</blockquote>
<h3 id="list-å…ƒç´ ç±»å‹ä¸åŒ"><a href="#list-å…ƒç´ ç±»å‹ä¸åŒ" class="headerlink" title="list å…ƒç´ ç±»å‹ä¸åŒ"></a>list å…ƒç´ ç±»å‹ä¸åŒ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'Apple'</span>, <span class="number">123</span>, <span class="keyword">True</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>list é‡Œé¢çš„å…ƒç´ çš„æ•°æ®ç±»å‹ä¹Ÿå¯ä»¥ä¸åŒ</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = [<span class="string">'python'</span>, <span class="string">'java'</span>, [<span class="string">'asp'</span>, <span class="string">'php'</span>], <span class="string">'scheme'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(s)</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = [<span class="string">'asp'</span>, <span class="string">'php'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = [<span class="string">'python'</span>, <span class="string">'java'</span>, p, <span class="string">'scheme'</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>listå…ƒç´ ä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªlist</p>
</blockquote>
<h2 id="Tuple"><a href="#Tuple" class="headerlink" title="Tuple"></a>Tuple</h2><p><code>tuple</code>ä¸€æ—¦åˆå§‹åŒ–å°±ä¸èƒ½ä¿®æ”¹,å…ƒç´ æŒ‡å‘ä¸æ”¹å˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>classmates = (<span class="string">'Michael'</span>, <span class="string">'Bob'</span>, <span class="string">'Tracy'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>t = (<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦å®šä¹‰ä¸€ä¸ªç©ºçš„tupleï¼Œå¯ä»¥å†™æˆ<code>()</code></p>
<blockquote>
<p>tuple çš„é™·é˜±</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; t = (1)</span><br><span class="line">&gt;&gt;&gt; t</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>æ­£ç¡®çš„æ–¹å¼å¦‚ä¸‹ :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; t = (1,)</span><br><span class="line">&gt;&gt;&gt; t</span><br><span class="line">(1,)</span><br></pre></td></tr></table></figure>
<p>æœ€åæ¥çœ‹ä¸€ä¸ªâ€œå¯å˜çš„â€tupleï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; t = (&apos;a&apos;, &apos;b&apos;, [&apos;A&apos;, &apos;B&apos;])</span><br><span class="line">&gt;&gt;&gt; t[2][0] = &apos;X&apos;</span><br><span class="line">&gt;&gt;&gt; t[2][1] = &apos;Y&apos;</span><br><span class="line">&gt;&gt;&gt; t</span><br><span class="line">(&apos;a&apos;, &apos;b&apos;, [&apos;X&apos;, &apos;Y&apos;])</span><br></pre></td></tr></table></figure>
<p>å…¶å®å˜çš„ä¸æ˜¯tupleçš„å…ƒç´ ï¼Œè€Œæ˜¯listçš„å…ƒç´ ã€‚tupleä¸€å¼€å§‹æŒ‡å‘çš„listå¹¶æ²¡æœ‰æ”¹æˆåˆ«çš„list</p>
<h2 id="Dict"><a href="#Dict" class="headerlink" title="Dict"></a>Dict</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = &#123;<span class="string">'Michael'</span>: <span class="number">95</span>, <span class="string">'Bob'</span>: <span class="number">75</span>, <span class="string">'Tracy'</span>: <span class="number">85</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">'Michael'</span>]</span><br><span class="line"><span class="number">95</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">'Adam'</span>] = <span class="number">67</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">'Adam'</span>]</span><br><span class="line"><span class="number">67</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆ¤æ–­-key-æ˜¯å¦å­˜åœ¨"><a href="#åˆ¤æ–­-key-æ˜¯å¦å­˜åœ¨" class="headerlink" title="åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨"></a>åˆ¤æ–­ key æ˜¯å¦å­˜åœ¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Thomas'</span> <span class="keyword">in</span> d</span><br><span class="line"><span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<p>äºŒæ˜¯é€šè¿‡dictæä¾›çš„getæ–¹æ³•ï¼Œå¦‚æœkeyä¸å­˜åœ¨ï¼Œå¯ä»¥è¿”å›Noneï¼Œæˆ–è€…è‡ªå·±æŒ‡å®šçš„valueï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.get(<span class="string">'Thomas'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.get(<span class="string">'Thomas'</span>, <span class="number">-1</span>)</span><br><span class="line"><span class="number">-1</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šè¿”å›Noneçš„æ—¶å€™Pythonçš„äº¤äº’å¼å‘½ä»¤è¡Œä¸æ˜¾ç¤ºç»“æœã€‚</p>
</blockquote>
<h3 id="åˆ é™¤-keyï¼Œpop-key"><a href="#åˆ é™¤-keyï¼Œpop-key" class="headerlink" title="åˆ é™¤ keyï¼Œpop(key)"></a>åˆ é™¤ keyï¼Œpop(key)</h3><p>è¦åˆ é™¤ä¸€ä¸ªkeyï¼Œç”¨pop(key)æ–¹æ³•ï¼Œå¯¹åº”çš„valueä¹Ÿä¼šä»dictä¸­åˆ é™¤ï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d.pop(<span class="string">'Bob'</span>)</span><br><span class="line"><span class="number">75</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">&#123;<span class="string">'Michael'</span>: <span class="number">95</span>, <span class="string">'Tracy'</span>: <span class="number">85</span>&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>dict</th>
<th>list</th>
</tr>
</thead>
<tbody>
<tr>
<td>æŸ¥æ‰¾å’Œæ’å…¥çš„é€Ÿåº¦æå¿«ï¼Œä¸ä¼šéšç€keyçš„å¢åŠ è€Œå¢åŠ </td>
<td>æŸ¥æ‰¾å’Œæ’å…¥çš„æ—¶é—´éšç€å…ƒç´ çš„å¢åŠ è€Œå¢åŠ </td>
</tr>
<tr>
<td>éœ€è¦å ç”¨å¤§é‡çš„å†…å­˜ï¼Œå†…å­˜æµªè´¹å¤š</td>
<td>å ç”¨ç©ºé—´å°ï¼Œæµªè´¹å†…å­˜å¾ˆå°‘</td>
</tr>
</tbody>
</table>
<p><strong>æ‰€ä»¥ï¼Œdictæ˜¯ç”¨ç©ºé—´æ¥æ¢å–æ—¶é—´çš„ä¸€ç§æ–¹æ³•ã€‚</strong></p>
<blockquote>
<p>dictå¯ä»¥ç”¨åœ¨éœ€è¦é«˜é€ŸæŸ¥æ‰¾çš„å¾ˆå¤šåœ°æ–¹ï¼Œåœ¨Pythonä»£ç ä¸­å‡ ä¹æ— å¤„ä¸åœ¨ï¼Œæ­£ç¡®ä½¿ç”¨dictéå¸¸é‡è¦ï¼Œéœ€è¦ç‰¢è®°çš„ç¬¬ä¸€æ¡å°±æ˜¯dictçš„keyå¿…é¡»æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚</p>
<p>æ˜¯å› ä¸ºdictæ ¹æ®keyæ¥è®¡ç®—valueçš„å­˜å‚¨ä½ç½®ï¼Œå¦‚æœæ¯æ¬¡è®¡ç®—ç›¸åŒçš„keyå¾—å‡ºçš„ç»“æœä¸åŒï¼Œé‚£dictå†…éƒ¨å°±å®Œå…¨æ··ä¹±äº†ã€‚è¿™ä¸ªé€šè¿‡keyè®¡ç®—ä½ç½®çš„ç®—æ³•ç§°ä¸ºå“ˆå¸Œç®—æ³•ï¼ˆHashï¼‰ã€‚</p>
<p>ä¿è¯hashçš„æ­£ç¡®æ€§ï¼Œä½œä¸ºkeyçš„å¯¹è±¡å°±ä¸èƒ½å˜ã€‚åœ¨Pythonä¸­ï¼Œå­—ç¬¦ä¸²ã€æ•´æ•°ç­‰éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ï¼Œå¯ä»¥æ”¾å¿ƒåœ°ä½œä¸ºkeyã€‚è€Œlistæ˜¯å¯å˜çš„ï¼Œå°±ä¸èƒ½ä½œä¸ºkeyï¼š</p>
</blockquote>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>setå’Œdictç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ç»„keyçš„é›†åˆï¼Œä½†ä¸å­˜å‚¨valueã€‚ç”±äºkeyä¸èƒ½é‡å¤ï¼Œæ‰€ä»¥ï¼Œåœ¨setä¸­ï¼Œæ²¡æœ‰é‡å¤çš„keyã€‚</p>
<h3 id="set-init"><a href="#set-init" class="headerlink" title="set init"></a>set init</h3><p>è¦åˆ›å»ºä¸€ä¸ªsetï¼Œéœ€è¦æä¾›ä¸€ä¸ªlistä½œä¸ºè¾“å…¥é›†åˆï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼Œä¼ å…¥çš„å‚æ•°<code>[1, 2, 3]</code>æ˜¯ä¸€ä¸ªlistï¼Œè€Œæ˜¾ç¤ºçš„<code>set([1, 2, 3])</code>åªæ˜¯å‘Šè¯‰ä½ è¿™ä¸ªsetå†…éƒ¨æœ‰1ï¼Œ2ï¼Œ3è¿™3ä¸ªå…ƒç´ ï¼Œæ˜¾ç¤ºçš„[]ä¸è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªlistã€‚</p>
</blockquote>
<h3 id="addã€remove"><a href="#addã€remove" class="headerlink" title="addã€remove"></a>addã€remove</h3><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = set([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.add(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.add(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.remove(<span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line">set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<h3 id="set-amp-and"><a href="#set-amp-and" class="headerlink" title="set &amp; and |"></a>set &amp; and |</h3><p>setå¯ä»¥çœ‹æˆæ•°å­¦æ„ä¹‰ä¸Šçš„æ— åºå’Œæ— é‡å¤å…ƒç´ çš„é›†åˆï¼Œå› æ­¤ï¼Œä¸¤ä¸ªsetå¯ä»¥åšæ•°å­¦æ„ä¹‰ä¸Šçš„äº¤é›†ã€å¹¶é›†ç­‰æ“ä½œï¼š</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = set([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 &amp; s2</span><br><span class="line">set([<span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 | s2</span><br><span class="line">set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<blockquote>
<p>setå’Œdictçš„å”¯ä¸€åŒºåˆ«ä»…åœ¨äºæ²¡æœ‰å­˜å‚¨å¯¹åº”çš„valueï¼Œsetçš„åŸç†å’Œdictä¸€æ ·.</p>
</blockquote>
<h3 id="differenceã€intersection"><a href="#differenceã€intersection" class="headerlink" title="differenceã€intersection"></a>differenceã€intersection</h3><p>æˆ‘ä»¬è¿˜èƒ½è¿›è¡Œä¸€äº›ç­›é€‰æ“ä½œ, æ¯”å¦‚å¯¹æ¯”å¦ä¸€ä¸ªä¸œè¥¿, çœ‹çœ‹åŸæ¥çš„ set é‡Œæœ‰æ²¡æœ‰å’Œä»–ä¸åŒçš„ (difference). æˆ–è€…å¯¹æ¯”å¦ä¸€ä¸ªä¸œè¥¿, çœ‹çœ‹ set é‡Œæœ‰æ²¡æœ‰ç›¸åŒçš„ (intersection).</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">print(unique_char)</span><br><span class="line"># &#123;'b', 'c', 'a'&#125;</span><br><span class="line"></span><br><span class="line">unique_char = set(char_list)</span><br><span class="line">print(unique_char.difference(&#123;'a', 'e', 'i'&#125;))</span><br><span class="line"># &#123;'b', 'd', 'c'&#125;</span><br><span class="line"></span><br><span class="line">print(unique_char.intersection(&#123;'a', 'e', 'i'&#125;))</span><br><span class="line"># &#123;'a'&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è®®ä¸å¯å˜å¯¹è±¡"><a href="#è®®ä¸å¯å˜å¯¹è±¡" class="headerlink" title="è®®ä¸å¯å˜å¯¹è±¡"></a>è®®ä¸å¯å˜å¯¹è±¡</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">'abc'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.replace(<span class="string">'a'</span>, <span class="string">'A'</span>)</span><br><span class="line"><span class="string">'Abc'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="string">'abc'</span></span><br></pre></td></tr></table></figure>
<p>å°ç»“ :</p>
<p>ä½¿ç”¨key-valueå­˜å‚¨ç»“æ„çš„dictåœ¨Pythonä¸­éå¸¸æœ‰ç”¨ï¼Œé€‰æ‹©ä¸å¯å˜å¯¹è±¡ä½œä¸ºkeyå¾ˆé‡è¦ï¼Œæœ€å¸¸ç”¨çš„keyæ˜¯å­—ç¬¦ä¸²ã€‚</p>
<p><code>tuple</code> è™½ç„¶æ˜¯ä¸å˜å¯¹è±¡ï¼Œä½†è¯•è¯•æŠŠ <code>(1, 2, 3)</code> å’Œ <code>(1, [2, 3])</code> æ”¾å…¥dictæˆ–setä¸­ï¼Œå¹¶è§£é‡Šç»“æœã€‚</p>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><ul>
<li><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001386819196283586a37629844456ca7e5a7faa9b94ee8000" target="_blank" rel="external">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python å­—ç¬¦ç¼–ç  & å­—ç¬¦ä¸²]]></title>
      <url>http://shopee.ai/2017/05/31/python/language/py-language-3-str-&-character-encoding/</url>
      <content type="html"><![CDATA[<p>Python å­—ç¬¦ç¼–ç  å¤§æ¦‚åŸç† ä¸ å­—ç¬¦ä¸²ç®€å•æ“ä½œ</p>
<a id="more"></a>
<h2 id="å­—ç¬¦ç¼–ç "><a href="#å­—ç¬¦ç¼–ç " class="headerlink" title="å­—ç¬¦ç¼–ç "></a>å­—ç¬¦ç¼–ç </h2><p>å› ä¸ºè®¡ç®—æœºåªèƒ½å¤„ç†æ•°å­—ï¼Œå¦‚æœè¦å¤„ç†æ–‡æœ¬ï¼Œå°±å¿…é¡»å…ˆæŠŠæ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—æ‰èƒ½å¤„ç†ã€‚æœ€æ—©çš„è®¡ç®—æœºåœ¨è®¾è®¡æ—¶é‡‡ç”¨8ä¸ªæ¯”ç‰¹ï¼ˆbitï¼‰ä½œä¸ºä¸€ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªå­—èŠ‚èƒ½è¡¨ç¤ºçš„æœ€å¤§çš„æ•´æ•°å°±æ˜¯255ï¼ˆäºŒè¿›åˆ¶11111111=åè¿›åˆ¶255ï¼‰ï¼Œå¦‚æœè¦è¡¨ç¤ºæ›´å¤§çš„æ•´æ•°ï¼Œå°±å¿…é¡»ç”¨æ›´å¤šçš„å­—èŠ‚ã€‚æ¯”å¦‚ä¸¤ä¸ªå­—èŠ‚å¯ä»¥è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°æ˜¯65535ï¼Œ4ä¸ªå­—èŠ‚å¯ä»¥è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°æ˜¯4294967295ã€‚</p>
<p>ç”±äºè®¡ç®—æœºæ˜¯ç¾å›½äººå‘æ˜çš„ï¼Œå› æ­¤ï¼Œæœ€æ—©åªæœ‰127ä¸ªå­—æ¯è¢«ç¼–ç åˆ°è®¡ç®—æœºé‡Œï¼Œä¹Ÿå°±æ˜¯å¤§å°å†™è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸€äº›ç¬¦å·ï¼Œè¿™ä¸ªç¼–ç è¡¨è¢«ç§°ä¸ºASCIIç¼–ç ï¼Œæ¯”å¦‚å¤§å†™å­—æ¯Açš„ç¼–ç æ˜¯65ï¼Œå°å†™å­—æ¯zçš„ç¼–ç æ˜¯122ã€‚</p>
<p>ä½†æ˜¯è¦å¤„ç†ä¸­æ–‡æ˜¾ç„¶ä¸€ä¸ªå­—èŠ‚æ˜¯ä¸å¤Ÿçš„ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªå­—èŠ‚ï¼Œè€Œä¸”è¿˜ä¸èƒ½å’ŒASCIIç¼–ç å†²çªï¼Œæ‰€ä»¥ï¼Œä¸­å›½åˆ¶å®šäº†GB2312ç¼–ç ï¼Œç”¨æ¥æŠŠä¸­æ–‡ç¼–è¿›å»ã€‚</p>
<p><img src="/images/python/language-str-encoding.png" alt=""></p>
<p>å› æ­¤ï¼ŒUnicodeåº”è¿è€Œç”Ÿã€‚UnicodeæŠŠæ‰€æœ‰è¯­è¨€éƒ½ç»Ÿä¸€åˆ°ä¸€å¥—ç¼–ç é‡Œï¼Œè¿™æ ·å°±ä¸ä¼šå†æœ‰ä¹±ç é—®é¢˜äº†ã€‚</p>
<p>Unicodeæ ‡å‡†ä¹Ÿåœ¨ä¸æ–­å‘å±•ï¼Œä½†æœ€å¸¸ç”¨çš„æ˜¯ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼ˆå¦‚æœè¦ç”¨åˆ°éå¸¸ååƒ»çš„å­—ç¬¦ï¼Œå°±éœ€è¦4ä¸ªå­—èŠ‚ï¼‰ã€‚ç°ä»£æ“ä½œç³»ç»Ÿå’Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½ç›´æ¥æ”¯æŒUnicodeã€‚</p>
<p>å­—æ¯<code>A</code>ç”¨ASCIIç¼–ç æ˜¯åè¿›åˆ¶çš„<code>65</code>ï¼ŒäºŒè¿›åˆ¶çš„01000001ï¼›</p>
<p>å­—ç¬¦<code>0</code>ç”¨ASCIIç¼–ç æ˜¯åè¿›åˆ¶çš„<code>48</code>ï¼ŒäºŒè¿›åˆ¶çš„00110000ï¼Œæ³¨æ„å­—ç¬¦â€™0â€™å’Œæ•´æ•°0æ˜¯ä¸åŒçš„ï¼›</p>
<p>ä½ å¯ä»¥çŒœæµ‹ï¼Œå¦‚æœæŠŠASCIIç¼–ç çš„<code>A</code>ç”¨Unicodeç¼–ç ï¼Œåªéœ€è¦åœ¨å‰é¢è¡¥0å°±å¯ä»¥ï¼Œå› æ­¤ï¼ŒAçš„Unicodeç¼–ç æ˜¯00000000 01000001ã€‚</p>
<p>æ–°çš„é—®é¢˜åˆå‡ºç°äº†ï¼šå¦‚æœç»Ÿä¸€æˆUnicodeç¼–ç ï¼Œä¹±ç é—®é¢˜ä»æ­¤æ¶ˆå¤±äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ å†™çš„æ–‡æœ¬åŸºæœ¬ä¸Šå…¨éƒ¨æ˜¯è‹±æ–‡çš„è¯ï¼Œç”¨Unicodeç¼–ç æ¯”ASCIIç¼–ç éœ€è¦å¤šä¸€å€çš„å­˜å‚¨ç©ºé—´ï¼Œåœ¨å­˜å‚¨å’Œä¼ è¾“ä¸Šå°±ååˆ†ä¸åˆ’ç®—ã€‚</p>
<p>æ‰€ä»¥ï¼Œæœ¬ç€èŠ‚çº¦çš„ç²¾ç¥ï¼Œåˆå‡ºç°äº†æŠŠUnicodeç¼–ç è½¬åŒ–ä¸ºâ€œå¯å˜é•¿ç¼–ç â€çš„<code>UTF-8</code>ç¼–ç ã€‚UTF-8ç¼–ç æŠŠä¸€ä¸ªUnicodeå­—ç¬¦æ ¹æ®ä¸åŒçš„æ•°å­—å¤§å°ç¼–ç æˆ1-6ä¸ªå­—èŠ‚ï¼Œå¸¸ç”¨çš„è‹±æ–‡å­—æ¯è¢«ç¼–ç æˆ1ä¸ªå­—èŠ‚ï¼Œæ±‰å­—é€šå¸¸æ˜¯3ä¸ªå­—èŠ‚ï¼Œåªæœ‰å¾ˆç”Ÿåƒ»çš„å­—ç¬¦æ‰ä¼šè¢«ç¼–ç æˆ4-6ä¸ªå­—èŠ‚ã€‚å¦‚æœä½ è¦ä¼ è¾“çš„æ–‡æœ¬åŒ…å«å¤§é‡è‹±æ–‡å­—ç¬¦ï¼Œç”¨UTF-8ç¼–ç å°±èƒ½èŠ‚çœç©ºé—´ï¼š</p>
<blockquote>
<p>åœ¨è®¡ç®—æœºå†…å­˜ä¸­ï¼Œç»Ÿä¸€ä½¿ç”¨Unicodeç¼–ç ï¼Œå½“éœ€è¦ä¿å­˜åˆ°ç¡¬ç›˜æˆ–è€…éœ€è¦ä¼ è¾“çš„æ—¶å€™ï¼Œå°±è½¬æ¢ä¸ºUTF-8ç¼–ç ã€‚</p>
</blockquote>
<h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><p>å› ä¸ºPythonçš„è¯ç”Ÿæ¯”Unicodeæ ‡å‡†å‘å¸ƒçš„æ—¶é—´è¿˜è¦æ—©ï¼Œæ‰€ä»¥æœ€æ—©çš„Pythonåªæ”¯æŒASCIIç¼–ç ï¼Œæ™®é€šçš„å­—ç¬¦ä¸²<code>&#39;ABC&#39;</code>åœ¨Pythonå†…éƒ¨éƒ½æ˜¯ASCIIç¼–ç çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ord(<span class="string">'A'</span>)</span><br><span class="line"><span class="number">65</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>chr(<span class="number">65</span>)</span><br><span class="line"><span class="string">'A'</span></span><br></pre></td></tr></table></figure>
<p>Pythonåœ¨åæ¥æ·»åŠ äº†å¯¹Unicodeçš„æ”¯æŒï¼Œä»¥Unicodeè¡¨ç¤ºçš„å­—ç¬¦ä¸²ç”¨<code>u&#39;...&#39;</code>è¡¨ç¤ºï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> <span class="string">u'ä¸­æ–‡'</span></span><br><span class="line">ä¸­æ–‡</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u'ä¸­'</span></span><br><span class="line"><span class="string">u'\u4e2d'</span></span><br></pre></td></tr></table></figure>
<p>å†™<code>u&#39;ä¸­&#39;</code>å’Œ<code>u&#39;\u4e2d&#39;</code>æ˜¯ä¸€æ ·çš„ï¼Œ<code>\u</code>åé¢æ˜¯åå…­è¿›åˆ¶çš„Unicodeç ã€‚å› æ­¤ï¼Œ<code>u&#39;A&#39;</code>å’Œ<code>u&#39;\u0041&#39;</code>ä¹Ÿä¸€æ ·çš„ã€‚</p>
<p>ä¸¤ç§å­—ç¬¦ä¸²å¦‚ä½•ç›¸äº’è½¬æ¢ï¼Ÿå­—ç¬¦ä¸²<code>&#39;xxx&#39;</code>è™½ç„¶æ˜¯ASCIIç¼–ç ï¼Œä½†ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯UTF-8ç¼–ç ï¼Œè€Œ<code>u&#39;xxx&#39;</code>åˆ™åªèƒ½æ˜¯Unicodeç¼–ç ã€‚</p>
<p>æŠŠ<code>u&#39;xxx&#39;</code>è½¬æ¢ä¸ºUTF-8ç¼–ç çš„<code>&#39;xxx&#39;</code>ç”¨<code>encode(&#39;utf-8&#39;)</code>æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u'ABC'</span>.encode(<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="string">'ABC'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">u'ä¸­æ–‡'</span>.encode(<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="string">'\xe4\xb8\xad\xe6\x96\x87'</span></span><br></pre></td></tr></table></figure>
<p>è‹±æ–‡å­—ç¬¦è½¬æ¢åè¡¨ç¤ºçš„UTF-8çš„å€¼å’ŒUnicodeå€¼ç›¸ç­‰ï¼ˆä½†å ç”¨çš„å­˜å‚¨ç©ºé—´ä¸åŒï¼‰ï¼Œè€Œä¸­æ–‡å­—ç¬¦è½¬æ¢å1ä¸ªUnicodeå­—ç¬¦å°†å˜ä¸º3ä¸ªUTF-8å­—ç¬¦ï¼Œä½ çœ‹åˆ°çš„<code>\xe4</code>å°±æ˜¯å…¶ä¸­ä¸€ä¸ªå­—èŠ‚ï¼Œå› ä¸ºå®ƒçš„å€¼æ˜¯<code>228</code>ï¼Œæ²¡æœ‰å¯¹åº”çš„å­—æ¯å¯ä»¥æ˜¾ç¤ºï¼Œæ‰€ä»¥ä»¥åå…­è¿›åˆ¶æ˜¾ç¤ºå­—èŠ‚çš„æ•°å€¼ã€‚<code>len()</code>å‡½æ•°å¯ä»¥è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(<span class="string">u'ABC'</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(<span class="string">'ABC'</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(<span class="string">u'ä¸­æ–‡'</span>)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(<span class="string">'\xe4\xb8\xad\xe6\x96\x87'</span>)</span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>
<p>åè¿‡æ¥ï¼ŒæŠŠUTF-8ç¼–ç è¡¨ç¤ºçš„å­—ç¬¦ä¸²<code>&#39;xxx&#39;</code>è½¬æ¢ä¸ºUnicodeå­—ç¬¦ä¸²<code>u&#39;xxx&#39;</code>ç”¨<code>decode(&#39;utf-8&#39;)</code>æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; &apos;abc&apos;.decode(&apos;utf-8&apos;)</span><br><span class="line">u&apos;abc&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;\xe4\xb8\xad\xe6\x96\x87&apos;.decode(&apos;utf-8&apos;)</span><br><span class="line">u&apos;\u4e2d\u6587&apos;</span><br><span class="line">&gt;&gt;&gt; print &apos;\xe4\xb8\xad\xe6\x96\x87&apos;.decode(&apos;utf-8&apos;)</span><br><span class="line">ä¸­æ–‡</span><br></pre></td></tr></table></figure>
<h3 id="æ ¼å¼åŒ–"><a href="#æ ¼å¼åŒ–" class="headerlink" title="æ ¼å¼åŒ–"></a>æ ¼å¼åŒ–</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Hello, %s'</span> % <span class="string">'world'</span></span><br><span class="line"><span class="string">'Hello, world'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Hi, %s, you have $%d.'</span> % (<span class="string">'Michael'</span>, <span class="number">1000000</span>)</span><br><span class="line"><span class="string">'Hi, Michael, you have $1000000.'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%2d-%02d'</span> % (<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="string">' 3-01'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%.2f'</span> % <span class="number">3.1415926</span></span><br><span class="line"><span class="string">'3.14'</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001386819196283586a37629844456ca7e5a7faa9b94ee8000" target="_blank" rel="external">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python Outputã€Variableã€dataTypeã€Ifã€While/Forã€Py Head]]></title>
      <url>http://shopee.ai/2017/05/31/python/language/py-language-2-Output-Variable-dataType-If-While:For-PyHead/</url>
      <content type="html"><![CDATA[<p>Python çš„ print è¯­å¥ã€Variable å˜é‡å®šä¹‰ã€ æ•°æ®ç±»å‹ã€æ¡ä»¶ä¸å¾ªç¯</p>
<a id="more"></a>
<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p><code>print</code>è¯­å¥ä¹Ÿå¯ä»¥è·Ÿä¸Šå¤šä¸ªå­—ç¬¦ä¸²ï¼Œç”¨é€—å·â€œ,â€éš”å¼€ï¼Œå°±å¯ä»¥è¿æˆä¸€ä¸²è¾“å‡ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'The quick brown fox'</span>, <span class="string">'jumps over'</span>, <span class="string">'the lazy dog'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>The quick brown fox jumps over the lazy dog
</code></pre><blockquote>
<p><code>print</code>ä¼šä¾æ¬¡æ‰“å°æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œé‡åˆ°é€—å·â€œ,â€ä¼šè¾“å‡ºä¸€ä¸ªç©ºæ ¼</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">print(int(<span class="string">'2'</span>)+<span class="number">3</span>) <span class="comment"># int å­—ç¬¦ä¸²ä¼šè½¬ä¸ºæ•´æ•°</span></span><br><span class="line">print(int(<span class="number">1.9</span>))  <span class="comment"># intä¼šä¿ç•™æ•´æ•°éƒ¨åˆ†</span></span><br><span class="line">print(float(<span class="string">'1.2'</span>)+<span class="number">3</span>) <span class="comment">#float()æ˜¯æµ®ç‚¹å‹ï¼Œå¯ä»¥æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆå°æ•°</span></span><br></pre></td></tr></table></figure>
<pre><code>5
1
4.2
</code></pre><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>name = input()</span><br><span class="line">Blair</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'Hello,'</span>, name)</span><br><span class="line">Hello, Blair</span><br></pre></td></tr></table></figure>
<h2 id="Variable"><a href="#Variable" class="headerlink" title="Variable"></a>Variable</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a,b,c=<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span></span><br><span class="line">print(a,b,c)</span><br></pre></td></tr></table></figure>
<pre><code>11 12 13
</code></pre><h3 id="global-var"><a href="#global-var" class="headerlink" title="global var"></a>global var</h3><p>é‚£å¦‚ä½•åœ¨å¤–éƒ¨ä¹Ÿèƒ½è°ƒç”¨ä¸€ä¸ªåœ¨å±€éƒ¨é‡Œä¿®æ”¹äº†çš„å…¨å±€å˜é‡å‘¢. é¦–å…ˆæˆ‘ä»¬åœ¨å¤–éƒ¨å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ <code>a=None</code>, ç„¶åå† <code>fun()</code> ä¸­å£°æ˜ è¿™ä¸ª <code>a</code> æ˜¯æ¥è‡ªå¤–éƒ¨çš„ <code>a</code>. å£°æ˜æ–¹å¼å°±æ˜¯ <code>global a</code>. ç„¶åå¯¹è¿™ä¸ªå¤–éƒ¨çš„ <code>a</code> ä¿®æ”¹å, ä¿®æ”¹çš„æ•ˆæœä¼šè¢«æ–½åŠ åˆ°å¤–éƒ¨çš„ <code>a</code> ä¸Š. æ‰€ä»¥æˆ‘ä»¬å°†èƒ½çœ‹åˆ°è¿è¡Œå®Œ <code>fun()</code>, <code>a</code> çš„å€¼ä» <code>None</code> å˜æˆäº† <code>20</code>.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">APPLY = <span class="number">100</span> <span class="comment"># å…¨å±€å˜é‡</span></span><br><span class="line">a = <span class="keyword">None</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> a    <span class="comment"># ä½¿ç”¨ä¹‹å‰åœ¨å…¨å±€é‡Œå®šä¹‰çš„ a</span></span><br><span class="line">    a = <span class="number">20</span>      <span class="comment"># ç°åœ¨çš„ a æ˜¯å…¨å±€å˜é‡äº†</span></span><br><span class="line">    <span class="keyword">return</span> a+<span class="number">100</span></span><br><span class="line"></span><br><span class="line">print(APPLE)    <span class="comment"># 100</span></span><br><span class="line">print(<span class="string">'a past:'</span>, a)  <span class="comment"># None</span></span><br><span class="line">fun()</span><br><span class="line">print(<span class="string">'a now:'</span>, a)   <span class="comment"># 20</span></span><br></pre></td></tr></table></figure>
<h2 id="dataType"><a href="#dataType" class="headerlink" title="dataType"></a>dataType</h2><table>
<thead>
<tr>
<th>åºå·</th>
<th>data type</th>
<th>example value</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>int</td>
<td>3</td>
</tr>
<tr>
<td>2</td>
<td>float</td>
<td>1.2</td>
</tr>
<tr>
<td>3</td>
<td>str</td>
<td>â€˜helloâ€™ or â€œhelloâ€</td>
</tr>
<tr>
<td>4</td>
<td>boolean</td>
<td>True/False </td>
</tr>
<tr>
<td>5</td>
<td>None</td>
<td>None</td>
</tr>
<tr>
<td>6</td>
<td>å¸¸é‡</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="if-else"><a href="#if-else" class="headerlink" title="if/else"></a>if/else</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">age = <span class="number">20</span></span><br><span class="line"><span class="keyword">if</span> age &gt;= <span class="number">6</span>:</span><br><span class="line">    print(<span class="string">'teenager'</span>)</span><br><span class="line"><span class="keyword">elif</span> age &gt;= <span class="number">18</span>:</span><br><span class="line">    print(<span class="string">'adult'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'kid'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>teenager
</code></pre><h3 id="if-while-é‡-None"><a href="#if-while-é‡-None" class="headerlink" title="if/while é‡ None"></a>if/while é‡ None</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">v1 = <span class="keyword">None</span></span><br><span class="line"><span class="keyword">if</span> v1:</span><br><span class="line">   print(<span class="string">'v1'</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœ if / while åé¢æ¥ç€çš„è¯­å¥æ•°æ®ç±»å‹ None, å°†ä¸ False å¤„ç†æ–¹å¼ç›¸åŒ</p>
</blockquote>
<h3 id="if-while-é‡-ç©ºé›†åˆ"><a href="#if-while-é‡-ç©ºé›†åˆ" class="headerlink" title="if/while é‡ ç©ºé›†åˆ"></a>if/while é‡ ç©ºé›†åˆ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A = []</span><br><span class="line"><span class="keyword">if</span> A:</span><br><span class="line">    print(<span class="string">"A is empty !"</span>)</span><br><span class="line"></span><br><span class="line">A = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">if</span> A:</span><br><span class="line">    print(<span class="string">"A is not empty !"</span>)</span><br></pre></td></tr></table></figure>
<pre><code>A is not empty !
</code></pre><blockquote>
<p>åœ¨ Python ä¸­é›†åˆç±»å‹æœ‰ listã€ tuple ã€dict å’Œ set ç­‰ï¼Œå¦‚æœè¯¥é›†åˆå¯¹è±¡ä½œä¸º if æˆ– while åˆ¤æ–­è¯­å¥, åˆ™ä¸ False å¤„ç†æ–¹å¼ç›¸åŒ</p>
</blockquote>
<h2 id="While-For"><a href="#While-For" class="headerlink" title="While/For"></a>While/For</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = range(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">while</span> a:</span><br><span class="line">    print(a[<span class="number">-1</span>])</span><br><span class="line">    a = a[:len(a)<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<pre><code>4
3
2
1
0
</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">names = [<span class="string">'Michael'</span>, <span class="string">'Bob'</span>, <span class="string">'Tracy'</span>]</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">    print(name)</span><br></pre></td></tr></table></figure>
<pre><code>Michael
Bob
Tracy
</code></pre><h2 id="py-ç¨‹åºå¤´éƒ¨"><a href="#py-ç¨‹åºå¤´éƒ¨" class="headerlink" title="py ç¨‹åºå¤´éƒ¨"></a>py ç¨‹åºå¤´éƒ¨</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€è¡Œæ³¨é‡Šæ˜¯ä¸ºäº†å‘Šè¯‰Linux/OS Xç³»ç»Ÿï¼Œè¿™æ˜¯ä¸€ä¸ªPythonå¯æ‰§è¡Œç¨‹åºï¼ŒWindowsç³»ç»Ÿä¼šå¿½ç•¥è¿™ä¸ªæ³¨é‡Šï¼›</p>
<p>ç¬¬äºŒè¡Œæ³¨é‡Šæ˜¯ä¸ºäº†å‘Šè¯‰Pythonè§£é‡Šå™¨ï¼ŒæŒ‰ç…§UTF-8ç¼–ç è¯»å–æºä»£ç ï¼Œå¦åˆ™ï¼Œåœ¨æºä»£ç ä¸­å†™çš„ä¸­æ–‡è¾“å‡ºå¯èƒ½ä¼šä¹±ç ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001386819196283586a37629844456ca7e5a7faa9b94ee8000" target="_blank" rel="external">morvanzhou python</a></li>
<li><a href="https://morvanzhou.github.io/tutorials/python-basic/" target="_blank" rel="external">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Shuping Yang's University of Maryland speech]]></title>
      <url>http://shopee.ai/2017/05/28/English/english-Shuping-Yang-at-Maryyland/</url>
      <content type="html"><![CDATA[<p>Shuping Yang Maryland Graduation Speech About Air and Free</p>
<a id="more"></a>
<div class="video-container"><iframe src="//www.youtube.com/embed/9bMX-ctieHI" frameborder="0" allowfullscreen></iframe></div>
<h2 id="Speech-Full-Text"><a href="#Speech-Full-Text" class="headerlink" title="Speech Full Text"></a>Speech Full Text</h2><blockquote>
<p><strong>Good afternoon faculty, students, parents and friends.</strong></p>
<p>I am truly honored and grateful to speak at the commencement for the University of Maryland, Class of 2017. </p>
<p>People often ask me: Why did you come to the University of Maryland?<br>I always answer: Fresh air.</p>
<p>Five years ago, as I step off the plane from China, and left the terminal at Dallas Airport. I was ready to put on one of my five face masks, but when I took my first breath of American air. I put my mask away. </p>
<p>The air was so sweet and fresh, and utterly luxurious.</p>
<p>I was surprised by this. I grew up in a city in China, where I had to wear a face mask every time I went outside, otherwise, I might get sick.</p>
<p>However, the moment Iinhaled and exhaled outside the airportï¼ŒI felt free.</p>
<p>No more fog on my glasses, no more difficult breathing, no more suppression.</p>
<p>Every breath was a delight. As I stand here today, I cannot help, but recall that feeling of freedom. </p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>At the University of Maryland, I will soon feel another kind of fresh air for which I will beforever grateful â€” the fresh air of free speech.</p>
<p>Before I came to the UnitedStates, I learned in history class about the Declaration of Independence, butthese words had no meaning to meâ€” Life, Liberty and the Pursuit of happiness.</p>
<p>I was merely memorizing the words to get good grades.</p>
<p>These words sounded so strange, so abstract and foreign to me, until I came to University of Maryland.</p>
<p>I have learned the right to freely express oneself is sacred in American.</p>
<p>Each day in Maryland, I was encouraged to express my opinions on controversial issues. </p>
<p>I could challenge astatement made by my instructor. I could even rate my professors online.</p>
<p>But nothing prepared me forthe culture shock I experienced when I watched a university production of the playâ€” Twilight: Los Angeles.</p>
<p>Twilight is a play by AnnaDeavere Smith about the 1992 Los Angeles Riots.</p>
<p>The riots followed acquittal of four Los Angeles police officers in the videotaped arrest and beating of Rodney King.</p>
<p>For six days, the city was in chaos as citizens took to the streets.</p>
<p>In Twilight, the student actors were openly talking about racism, sexism and politics.</p>
<p>I was shocked, I never thought such topic could be discussed openly.</p>
<p>The play was my first taste of political story telling, one that makes the audience think critically. </p>
<p>I have always had a burning desire to tell these kinds of stories, but I was convinced that only authorities on the narrative, only authorities could define the truth. </p>
<p>However, the opportunity toimmerse myself in the perse community at the University of Maryland exposed me to various, many different perspectives on truth.</p>
<p>I soon realized that here I have the opportunity to speak freely. </p>
<p>My voice matters. </p>
<p>Your voice matters.</p>
<p>Our voices matter.</p>
<p>Civil engagement is not at ask just for politicians. I have witnessed this when I saw my fellow student smarching in Washington DC, voting in the presidential election and raising money to support various causes.</p>
<p>I have seen that everyone has a right to participate and advocate for change.</p>
<p>I used to believe that one inpidual participation could not make a difference, but here we are, United Terps.</p>
<p>Together, we can push our society to be more just, open and peaceful.</p>
<p>Class of 2017, we are graduating from a university that embraces a liberal arts education that nurtures us to think critically, and also to care and feel for humanity. </p>
<p>We are equipped with the knowledge of various disciplines and we are ready to face  the challenges of our society.</p>
<p>Some of us may go to graduate school, some us may step into professions and some of us may begin ajourney of exploration.</p>
<p>But no matter what we do,remember, democracy and free speech should not be taken for granted.</p>
<p>Democracy and freedom are the fresh air that is worth fighting for.</p>
<p>Freedom is oxygen. Freedomis passion. Freedom is love.</p>
<p>And as a French philosopher Jean Paul Sartre once said: freedom is a choice, our future is dependent on the choices we make today and tomorrow.</p>
<p>We are all playwrights of the next chapters of our lives. Together, we write the human history.</p>
<p>My friends, enjoy the fresh air and never ever let it go.</p>
<p>Thank you.</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Coursera 6 - Advice for Applying Machine Learning *]]></title>
      <url>http://shopee.ai/2017/05/24/ml/coursera-ng-w6-Advice-for-Applying-Machine-Learning/</url>
      <content type="html"><![CDATA[<p>Evaluating a Hypothesis -&gt; Model Selectionã€Diagnosing Bias vs Variance -&gt; Regularizationã€Learning Curves</p>
<a id="more"></a>
<h2 id="1-Evaluating-a-Hypothesis"><a href="#1-Evaluating-a-Hypothesis" class="headerlink" title="1. Evaluating a Hypothesis"></a>1. Evaluating a Hypothesis</h2><p>Once we have done some <strong>trouble shooting</strong> for errors in our predictions by:</p>
<ul>
<li>Getting more training examples</li>
<li>Trying smaller sets of features</li>
<li>Trying additional features</li>
<li>Trying polynomial features</li>
<li>Increasing or decreasing $Î»$</li>
</ul>
<p>We can move on to evaluate our new hypothesis.</p>
<p>A hypothesis may have a low error for the training examples but still be inaccurate (because of overfitting). Thus, to evaluate a hypothesis, given a dataset of training examples, we can split up the data into two sets: a training set and a test set. Typically, the training set consists of 70% of your data and the test set is the remaining 30%.</p>
<p>The new procedure using these two sets is then:</p>
<ol>
<li>Learn $\Theta$ and minimize $J_{train}(\Theta)$ using the training set</li>
<li>Compute the test set error $J_{test}(\Theta)$</li>
</ol>
<p><strong>The test set error</strong></p>
<ol>
<li>For linear regression: $J_{test}(\Theta) = \dfrac{1}{2m_{test}} \sum_{i=1}^{m_{test}}(h_\Theta(x^{(i)}_{test}) - y^{(i)}_{test})^2$</li>
<li>For classification ~ Misclassification error (aka 0/1 misclassification error):</li>
</ol>
<p>$$<br>err(h_\Theta(x),y) = \begin{matrix} 1 &amp; \mbox{if } h_\Theta(x) \geq 0.5\ and\ y = 0\ or\ h_\Theta(x) &lt; 0.5\ and\ y = 1\newline 0 &amp; \mbox otherwise \end{matrix}<br>$$</p>
<p>This gives us a binary 0 or 1 error result based on a misclassification. The average test error for the test set is:</p>
<p>$$<br>\text{Test Error} = \dfrac{1}{m_{test}} \sum^{m_{test}}_{i=1} err(h_\Theta(x^{(i)}_{test}), y^{(i)}_{test})<br>$$</p>
<p>This gives us the proportion of the test data that was misclassified.</p>
<blockquote>
<p>inaccurate[Éªnâ€™Ã¦kjÉ™rÉ™t]ã€procedure [prÉ™â€™sidÊ’Éš] æ¯”ä¾‹<br>remaining [riâ€™men..]ã€ Misclassification [â€˜mis,klÃ¦sifiâ€™keiÊƒÉ™n]<br>validation [,vÃ¦lÉ™â€™deÊƒÉ™n] ç¡®è®¤ï¼Œæ‰¹å‡†</p>
</blockquote>
<h2 id="2-Model-Selection"><a href="#2-Model-Selection" class="headerlink" title="2. Model Selection"></a>2. Model Selection</h2><p><strong>Train/Validtion/Test Sets</strong></p>
<p>Just because a learning algorithm fits a training set well, that does not mean it is a good hypothesis. It could over fit and as a result your predictions on the test set would be poor. The error of your hypothesis as measured on the data set with which you trained the parameters will be lower than the error on any other data set.</p>
<p>Given many models with different polynomial degrees, we can use a systematic approach to identify the â€˜bestâ€™ function. In order to choose the model of your hypothesis, you can test each degree of polynomial and look at the error result.</p>
<p>One way to break down our dataset into the three sets is:</p>
<ul>
<li><font color="blue"> Training set: 60%</font></li>
<li><font color="blue"> Cross validation set: 20%</font></li>
<li><font color="blue"> Test set: 20%</font>

</li>
</ul>
<p>We can now calculate three separate error values for the three different sets using the following method:</p>
<ol>
<li>Optimize the parameters in Î˜ using the training set for each polynomial degree.</li>
<li>Find the polynomial degree d with the least error using the cross validation set.</li>
<li>Estimate the generalization error using the test set with $J_{test}(\Theta^{(d)})$, (d = theta from polynomial with lower error);</li>
</ol>
<blockquote>
<p>This way, the degree of the polynomial d has not been trained using the test set.</p>
</blockquote>
<h2 id="3-Diagnosing-Bias-vs-Variance"><a href="#3-Diagnosing-Bias-vs-Variance" class="headerlink" title="3. Diagnosing Bias vs. Variance"></a>3. Diagnosing Bias vs. Variance</h2><p>In this section we examine the relationship between the degree of the polynomial d and the underfitting or overfitting of our hypothesis.</p>
<ul>
<li>We need to distinguish whether <code>bias</code> or <code>variance</code> is the problem contributing to bad predictions.</li>
<li>High bias is underfitting and high variance is overfitting. Ideally, we need to find a golden mean between these two.</li>
</ul>
<p>The training error will tend to <code>decrease</code> as we increase the degree d of the polynomial.</p>
<p>At the same time, the cross validation error will tend to decrease as we increase d up to a point, and then it will increase as d is increased, forming a convex curve.</p>
<p><strong>High bias (underfitting)</strong>: both $J_{train}(\Theta)$ and $J_{CV}(\Theta)$ will be high. Also, $J_{CV}(\Theta) \approx J_{train}(\Theta)$.</p>
<p><strong>High variance (overfitting)</strong>: $J_{train}(\Theta)$ will be low and $J_{CV}(\Theta)$ will be much greater than $J_{train}(\Theta)$.</p>
<p>The is summarized in the figure below:</p>
<p><img src="/images/ml/coursera/ml-ng-w6-01-01.png" alt=""></p>
<h2 id="4-Regularization-Bias-Variance"><a href="#4-Regularization-Bias-Variance" class="headerlink" title="4. Regularization Bias/Variance"></a>4. Regularization Bias/Variance</h2><p>Note: [The regularization term below and through out the video should be $\frac \lambda {2m} \sum_{j=1}^n \theta_j ^2$ and NOT $\frac \lambda {2m} \sum_{j=1}^m \theta_j ^2$]</p>
<p><img src="/images/ml/coursera/ml-ng-w6-01-02.png" alt=""></p>
<p>In the figure above, we see that as Î» increases, our fit becomes more rigid. On the other hand, as Î» approaches 0, we tend to over overfit the data. So how do we choose our parameter Î» to get it â€˜just rightâ€™ ? In order to choose the model and the regularization term Î», we need to:</p>
<ol>
<li>Create a list of lambdas (i.e. Î»âˆˆ{0,0.01,0.02,0.04,0.08,0.16,0.32,0.64,1.28,2.56,5.12,10.24});</li>
<li>Create a set of models with different degrees or any other variants.</li>
<li>Iterate through the Î»s and for each Î» go through all the models to learn some Î˜.</li>
<li>Compute the cross validation error using the learned Î˜ (computed with Î») on the $J_{CV}(\Theta)$ <strong>without</strong> regularization or Î» = 0. <code>ï¼Ÿï¼Ÿ</code></li>
<li>Select the best combo that produces the lowest error on the cross validation set.</li>
<li>Using the best combo Î˜ and Î», apply it on $J_{test}(\Theta)$ to see if it has a good generalization of the problem.</li>
</ol>
<h2 id="5-Learning-Curves"><a href="#5-Learning-Curves" class="headerlink" title="5. Learning Curves"></a>5. Learning Curves</h2><p>Training an algorithm on a very few number of data points (such as 1, 2 or 3) will easily have 0 errors because we can always find a quadratic curve that touches exactly those number of points. Hence:</p>
<ul>
<li>As the training set gets larger, the error for a quadratic function increases.</li>
<li>The error value will plateau out after a certain m, or training set size.</li>
</ul>
<p><strong>Experiencing high bias:</strong></p>
<p>Low training set size: causes $J_{train}(\Theta)$ to be low and $J_{CV}(\Theta)$ to be high.</p>
<p>Large training set size: causes both $J_{train}(\Theta)$ and $J_{CV}(\Theta)$  to be high with $J_{train}(\Theta)$â‰ˆ$J_{CV}(\Theta)$.</p>
<p>If a learning algorithm is suffering from high bias, getting more training data will not (by itself) help much.</p>
<p><img src="/images/ml/coursera/ml-ng-w6-01-03.png" alt=""></p>
<p>me : éšç€train setsçš„å¢åŠ ï¼Œé«˜åå·®ä¼šé™ä½ï¼Œå› ä¸ºæ›´å®¹æ˜“æ‰¾åˆ°åˆé€‚çš„ Hypothesis å»æ‹Ÿåˆæ•°æ®ã€‚æ‰€ä»¥CV errorä¸‹é™ã€‚</p>
<p><strong>Experiencing high variance:</strong></p>
<p><strong>Low training set size:</strong> $J_{train}(\Theta)$ will be low and $J_{CV}(\Theta)$ will be high.</p>
<p><strong>Large training set size:</strong> $J_{train}(\Theta)$ increases with training set size and $J_{CV}(\Theta)$ continues to decrease without leveling off. Also, $J_{train}(\Theta)$ &lt; $J_{CV}(\Theta)$ but the difference between them remains significant.</p>
<p>If a learning algorithm is suffering from high variance, getting more training data is likely to help.</p>
<p><img src="/images/ml/coursera/ml-ng-w6-01-04.png" alt=""></p>
<p>me : éšç€ train sets çš„å¢åŠ ï¼Œoverfiting è¶Šæ¥è¶Šä¸å®¹æ˜“ã€‚é€ æˆ CV error ä¸‹é™ã€‚</p>
<blockquote>
<p>plateau out / leveling off è¾¾åˆ°å¹³ç¨³çŠ¶æ€<br><code>test error will be CV error on picture.</code></p>
</blockquote>
<h2 id="6-What-to-Do-Next-Revisited"><a href="#6-What-to-Do-Next-Revisited" class="headerlink" title="6. What to Do Next Revisited"></a>6. What to Do Next Revisited</h2><p><em>*Our decision process can be broken down as follows</em>:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Function</th>
<th style="text-align:center">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Getting more training examples</td>
<td style="text-align:center">Fixes high variance</td>
</tr>
<tr>
<td style="text-align:center">Trying smaller sets of features</td>
<td style="text-align:center">Fixes high variance</td>
</tr>
<tr>
<td style="text-align:center">Increasing Î»</td>
<td style="text-align:center">Fixes high variance</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Adding features</td>
<td style="text-align:center">Fixes high bias</td>
</tr>
<tr>
<td style="text-align:center">Adding polynomial features</td>
<td style="text-align:center">Fixes high bias</td>
</tr>
<tr>
<td style="text-align:center">Decreasing Î»</td>
<td style="text-align:center">Fixes high bias</td>
</tr>
</tbody>
</table>
<h3 id="6-1-Diagnosing-NN"><a href="#6-1-Diagnosing-NN" class="headerlink" title="6.1 Diagnosing NN"></a>6.1 Diagnosing NN</h3><ul>
<li><p>A neural network with fewer parameters is <strong>prone to underfitting</strong>. It is also <strong>computationally cheaper</strong>.</p>
</li>
<li><p>A large neural network with more parameters is <strong>prone to overfitting</strong>. It is also <strong>computationally expensive</strong>. </p>
</li>
</ul>
<p>In this case you can use regularization (increase Î») to address the overfitting.</p>
<h3 id="6-2-Model-Complexity-Effects"><a href="#6-2-Model-Complexity-Effects" class="headerlink" title="6.2 Model Complexity Effects"></a>6.2 Model Complexity Effects</h3><ul>
<li><p>Lower-order polynomials (low model complexity) have high bias and low variance. In this case, the model fits poorly consistently.</p>
</li>
<li><p>Higher-order polynomials (high model complexity) fit the training data extremely well and the test data extremely poorly. These have low bias on the training data, but very high variance.</p>
</li>
<li><p>In reality, we would want to choose a model somewhere in between, that can generalize well but also fits the data reasonably well.</p>
</li>
</ul>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><ul>
<li><a href="https://www.coursera.org/learn/machine-learning/home/week/6" target="_blank" rel="external">coursera 6 @ng</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark ALS]]></title>
      <url>http://shopee.ai/2017/05/07/spark/spark-ALS/</url>
      <content type="html"><![CDATA[<p><a href="http://spark.apache.org/examples.html" target="_blank" rel="external">Spark.apache.org</a><br><a href="http://blog.javachen.com/2015/06/07/spark-configuration.html" target="_blank" rel="external">Java Chen Spark</a></p>
<a id="more"></a>
<p>ä»¥ä¸‹ä¸ºæ‰‹åŠ¨è®¡ç®—æµç¨‹ :</p>
<h3 id="4-2-å¯åŠ¨-spark-shell"><a href="#4-2-å¯åŠ¨-spark-shell" class="headerlink" title="4.2 å¯åŠ¨ spark-shell"></a>4.2 å¯åŠ¨ spark-shell</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SPARK_CLASSPATH=/opt/cloudera/parcels/CDH/lib/sqoop/mysql-connector-java-5.1.40.jar spark-shell</span><br></pre></td></tr></table></figure>
<h3 id="4-3-è¾“å…¥è¾“å‡º-ç›¸å…³å˜é‡"><a href="#4-3-è¾“å…¥è¾“å‡º-ç›¸å…³å˜é‡" class="headerlink" title="4.3 è¾“å…¥è¾“å‡º:ç›¸å…³å˜é‡"></a>4.3 è¾“å…¥è¾“å‡º:ç›¸å…³å˜é‡</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">val inputTable = <span class="string">"mds_user_coupon_bhv"</span></span><br><span class="line">val inputUrl = <span class="string">"jdbc:mysql://192.168.xxx.xx:3306/com_profile?user=your_name&amp;password=your_password"</span></span><br><span class="line">val outputTable = <span class="string">"mds_rs_shop_coupon_tmp"</span></span><br></pre></td></tr></table></figure>
<h3 id="4-4-æ ¸å¿ƒç¨‹åºä»£ç "><a href="#4-4-æ ¸å¿ƒç¨‹åºä»£ç " class="headerlink" title="4.4 æ ¸å¿ƒç¨‹åºä»£ç "></a>4.4 æ ¸å¿ƒç¨‹åºä»£ç </h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line">package com.x.rs.service</span><br><span class="line"></span><br><span class="line">import java.text.SimpleDateFormat</span><br><span class="line">import java.util.Date</span><br><span class="line">import java.util.Properties</span><br><span class="line"></span><br><span class="line">import org.apache.spark.sql.Row</span><br><span class="line">import org.apache.spark.sql.types._</span><br><span class="line"></span><br><span class="line">import org.apache.spark.&#123;SparkConf, SparkContext&#125;</span><br><span class="line"></span><br><span class="line">import org.apache.spark.mllib.recommendation.&#123;ALS, Rating&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">  * Date : 2017-04-20</span><br><span class="line">  * Author : Blair Chan</span><br><span class="line">  */</span><br><span class="line">object RsCouponCalc &#123;</span><br><span class="line">  def main(args: Array[String]) &#123;</span><br><span class="line"></span><br><span class="line">    println("start...")</span><br><span class="line"></span><br><span class="line">    if (args.length &lt; 3) &#123;</span><br><span class="line">      System.err.println("Usage: &lt;file&gt;")</span><br><span class="line">      System.exit(1)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    val inputTable = args(0) // Should be some file on your system // conf = new SparkConf().setAppName(appName).setMaster("local");</span><br><span class="line">    val inputUrl = args(1)</span><br><span class="line">    val outputTable = args(2)</span><br><span class="line"></span><br><span class="line">    val conf = new SparkConf().setAppName("SparkRsOne");</span><br><span class="line">    val sc = new SparkContext(conf)</span><br><span class="line">    val sqlContext = new org.apache.spark.sql.SQLContext(sc)</span><br><span class="line"></span><br><span class="line">    //    val rawData = sc.textFile(inputFile)</span><br><span class="line">    //    val rawRatings = rawData.map(_.split("\t").take(3))</span><br><span class="line"></span><br><span class="line">    val url = inputUrl</span><br><span class="line">    val prop = new Properties()</span><br><span class="line"></span><br><span class="line">    val dfForRawData = sqlContext.read.jdbc(url, inputTable, prop)</span><br><span class="line"></span><br><span class="line">    val ratings_tmp = dfForRawData.map &#123; row =&gt; (row(1).toString().toInt, row(4).toString().toInt, row(6).toString().toDouble) &#125;</span><br><span class="line"></span><br><span class="line">    val ratings = ratings_tmp.map &#123; case (uid, couponId, rating) =&gt; Rating(uid.toInt, couponId.toInt, rating.toDouble) &#125;</span><br><span class="line"></span><br><span class="line">    val model = ALS.train(ratings, 50, 10, 0.01)</span><br><span class="line"></span><br><span class="line">    model.userFeatures.count</span><br><span class="line"></span><br><span class="line">    val K = 10</span><br><span class="line"></span><br><span class="line">    model.recommendProductsForUsers(K)</span><br><span class="line"></span><br><span class="line">    val originResultRdd1 = model.recommendProductsForUsers(K)</span><br><span class="line"></span><br><span class="line">    val curDate = new Date()</span><br><span class="line">    val createDateString = new SimpleDateFormat("yyyy-MM-dd").format(curDate)</span><br><span class="line"></span><br><span class="line">    val originResultRdd2 = originResultRdd1.map(tuple =&gt; &#123;</span><br><span class="line">      val uid = tuple._1</span><br><span class="line">      val product = tuple._2.map &#123; case Rating(user, product, score) =&gt; (product.toString, score.toString) &#125;</span><br><span class="line">      (uid, product)</span><br><span class="line">    &#125;).flatMap &#123;</span><br><span class="line">      case (uid, product) =&gt; &#123;</span><br><span class="line">        product.map &#123; case (itemId, score) =&gt; Row.apply(uid.toLong, itemId.toString, score.toDouble, createDateString.toString) &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // println(originResultRdd2.first())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    val schema = StructType(</span><br><span class="line">      StructField("uid", LongType) ::</span><br><span class="line">        StructField("coupon_id", LongType) ::</span><br><span class="line">        StructField("score", DoubleType) ::</span><br><span class="line">        StructField("calc_date", StringType) :: Nil)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    val df = sqlContext.createDataFrame(originResultRdd2, schema)</span><br><span class="line"></span><br><span class="line">    df.insertIntoJDBC(url, outputTable, false)</span><br><span class="line">    // è®¾ç½®ä¸º trueï¼Œåˆ™ä¸º åˆ é™¤è¡¨ï¼Œç„¶åè‡ªåŠ¨åˆ›å»ºï¼Œå†æ’å…¥</span><br><span class="line"></span><br><span class="line">    println("end !")</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>DF é€šè¿‡æ’å…¥ RMDB.  schema å¯ä»¥é€šè¿‡åå°„æ¥ä½¿å¾—ç¨‹åºæ‰©å±•æ€§æé«˜ã€‚</p>
</blockquote>
<p><a href="http://www.cnblogs.com/yaohaitao/articles/5681984.html" target="_blank" rel="external">spark sql internet</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark SQLç¼–ç¨‹]]></title>
      <url>http://shopee.ai/2017/04/28/spark/spark-SQL/</url>
      <content type="html"><![CDATA[<p>Spark SQLï¼Œå¯å¯¹ä¸åŒæ ¼å¼çš„æ•°æ®æ‰§è¡ŒETLæ“ä½œï¼ˆå¦‚JSONï¼ŒParquetï¼Œæ•°æ®åº“ï¼‰ç„¶åå®Œæˆç‰¹å®šçš„æŸ¥è¯¢æ“ä½œã€‚</p>
<a id="more"></a>
<ul>
<li>DataFrame</li>
<li>Data Sources</li>
<li>JDBC Server</li>
</ul>
<p>ä½¿ç”¨Spark SQLæ—¶ï¼Œæœ€ä¸»è¦çš„ä¸¤ä¸ªç»„ä»¶å°±æ˜¯ <strong>DataFrame</strong> å’Œ <strong>SQLContext</strong>ã€‚</p>
<h2 id="1-DataFrame"><a href="#1-DataFrame" class="headerlink" title="1. DataFrame"></a>1. DataFrame</h2><p>DataFrame æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ï¼ŒæŒ‰ç…§å‘½ååˆ—çš„å½¢å¼ç»„ç»‡çš„æ•°æ®é›†åˆã€‚DataFrameåŸºäºRè¯­è¨€ä¸­çš„dataframeæ¦‚å¿µï¼Œä¸å…³ç³»å‹æ•°æ®åº“ä¸­çš„æ•°æ®åº“è¡¨ç±»ä¼¼ã€‚</p>
<blockquote>
<p>ä¹‹å‰ç‰ˆæœ¬çš„Spark SQL APIä¸­çš„SchemaRDDå·²ç»æ›´åä¸ºDataFrame</p>
</blockquote>
<p>è°ƒç”¨å°†DataFrameçš„å†…å®¹ä½œä¸ºè¡ŒRDDï¼ˆRDD of Rowsï¼‰è¿”å›çš„<a href="https://spark.apache.org/docs/1.3.0/api/scala/index.html#org.apache.spark.sql.DataFrame" target="_blank" rel="external">rddæ–¹æ³•</a>ï¼Œå¯ä»¥å°†DataFrameè½¬æ¢æˆRDDã€‚</p>
<p><strong>åˆ›å»º DataFrame</strong></p>
<p>å¯ä»¥é€šè¿‡å¦‚ä¸‹ <font color="#c7254e">æ•°æ®æºåˆ›å»º DataFrame</font> : </p>
<ul>
<li>å·²æœ‰çš„RDD</li>
<li>ç»“æ„åŒ–æ•°æ®æ–‡ä»¶</li>
<li>JSONæ•°æ®é›†</li>
<li>Hiveè¡¨</li>
<li>å¤–éƒ¨æ•°æ®åº“</li>
</ul>
<p><strong>DataFrame API</strong></p>
<p>Spark SQLå’ŒDataFrame APIå·²ç»åœ¨ä¸‹è¿°å‡ ç§ç¨‹åºè®¾è®¡è¯­è¨€ä¸­å®ç°ï¼š</p>
<ul>
<li><a href="https://spark.apache.org/docs/1.3.0/api/scala/index.html#org.apache.spark.sql.package" target="_blank" rel="external">Scala DataFrame API</a></li>
<li><a href="https://spark.apache.org/docs/1.3.0/api/java/index.html?org/apache/spark/sql/api/java/package-summary.html" target="_blank" rel="external">Java DataFrame API</a></li>
<li><a href="https://spark.apache.org/docs/1.3.0/api/python/pyspark.sql.html" target="_blank" rel="external">Python DataFrame API</a></li>
</ul>
<h2 id="2-SQLContext"><a href="#2-SQLContext" class="headerlink" title="2. SQLContext"></a>2. SQLContext</h2><p>SQLContextå°è£…Sparkä¸­çš„æ‰€æœ‰å…³ç³»å‹åŠŸèƒ½ã€‚å¯ä»¥ç”¨ä¹‹å‰çš„ç¤ºä¾‹ä¸­çš„ç°æœ‰SparkContextåˆ›å»ºSQLContextã€‚</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> sqlContext = <span class="keyword">new</span> org.apache.spark.sql.<span class="type">SQLContext</span>(sc)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="http://spark.apache.org/docs/latest/api/scala/index.html#org.apache.spark.sql.SQLContext" target="_blank" rel="external">SQLContext</a><br><a href="https://spark.apache.org/docs/1.3.0/api/scala/index.html#org.apache.spark.sql.hive.HiveContext" target="_blank" rel="external">HiveContext</a></p>
</blockquote>
<h2 id="3-JDBCæ•°æ®æº"><a href="#3-JDBCæ•°æ®æº" class="headerlink" title="3. JDBCæ•°æ®æº"></a>3. JDBCæ•°æ®æº</h2><p>JDBC æ•°æ®æº å¯ç”¨äºé€šè¿‡JDBC APIè¯»å–å…³ç³»å‹æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚ç›¸æ¯”äºä½¿ç”¨JdbcRDDï¼Œåº”è¯¥å°†JDBCæ•°æ®æºçš„æ–¹å¼ä½œä¸ºé¦–é€‰ï¼Œå› ä¸ºJDBCæ•°æ®æºèƒ½å¤Ÿå°†ç»“æœä½œä¸ºDataFrameå¯¹è±¡è¿”å›ï¼Œç›´æ¥ç”¨Spark SQLå¤„ç†æˆ–ä¸å…¶ä»–æ•°æ®æºè¿æ¥ã€‚</p>
<p>ä¸ºç¡®ä¿Spark Shellç¨‹åºæœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œå¯ä»¥åœ¨è¿è¡Œspark-shellå‘½ä»¤æ—¶ï¼ŒåŠ å…¥driver-memoryå‘½ä»¤è¡Œå‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spark-shell.cmd --driver-memory 1G</span><br></pre></td></tr></table></figure>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><p><a href="http://www.infoq.com/cn/articles/apache-spark-sql" target="_blank" rel="external">ç”¨Apache Sparkè¿›è¡Œå¤§æ•°æ®å¤„ç†â€”â€”ç¬¬äºŒéƒ¨åˆ†ï¼šSpark SQL</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Read Mysql çš„å››ç§æ–¹å¼]]></title>
      <url>http://shopee.ai/2017/04/20/spark/spark-read-mysql-four-functions/</url>
      <content type="html"><![CDATA[<p>ç›®å‰ <code>Spark</code> æ”¯æŒå››ç§æ–¹å¼ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®ï¼Œè¿™é‡Œä»¥ <code>MySQL</code> ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚</p>
<a id="more"></a>
<h2 id="Startup-spark-shell"><a href="#Startup-spark-shell" class="headerlink" title="Startup spark-shell"></a>Startup spark-shell</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SPARK_CLASSPATH=/opt/cloudera/parcels/CDH/lib/sqoop/mysql-connector-java-5.1.40.jar spark-shell</span><br></pre></td></tr></table></figure>
<h2 id="1-ä¸æŒ‡å®šæŸ¥è¯¢æ¡ä»¶"><a href="#1-ä¸æŒ‡å®šæŸ¥è¯¢æ¡ä»¶" class="headerlink" title="1. ä¸æŒ‡å®šæŸ¥è¯¢æ¡ä»¶"></a>1. ä¸æŒ‡å®šæŸ¥è¯¢æ¡ä»¶</h2><h3 id="1-1-function-define"><a href="#1-1-function-define" class="headerlink" title="1.1 function define"></a>1.1 function define</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jdbc</span></span>(url: <span class="type">String</span>, table: <span class="type">String</span>, properties: <span class="type">Properties</span>): <span class="type">DataFrame</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-detail-example"><a href="#1-2-detail-example" class="headerlink" title="1.2 detail example"></a>1.2 detail example</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> url = <span class="string">"jdbc:mysql://192.168.***.**:3306/your_lib_name?user= your_username&amp;password=your_password"</span></span><br><span class="line"><span class="keyword">import</span> java.util.<span class="type">Properties</span></span><br><span class="line"><span class="keyword">val</span> prop = <span class="keyword">new</span> <span class="type">Properties</span>()</span><br><span class="line"><span class="keyword">val</span> df = sqlContext.read.jdbc(url, <span class="string">"mds_user_coupon_bhv"</span>, prop )</span><br><span class="line">println(df.count())</span><br><span class="line">println(df.rdd.partitions.size)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°df.rdd.partitions.sizeè¾“å‡ºç»“æœæ˜¯1ï¼Œè¿™ä¸ªç»“æœçš„å«ä¹‰æ˜¯iteblogè¡¨çš„æ‰€æœ‰æ•°æ®éƒ½æ˜¯ç”±RDDçš„ä¸€ä¸ªåˆ†åŒºå¤„ç†çš„ï¼Œæ‰€ä»¥è¯´ï¼Œå¦‚æœä½ è¿™ä¸ªè¡¨å¾ˆå¤§ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°OOM</p>
<blockquote>
<p>Note : è¿™ç§æ–¹å¼åœ¨æ•°æ®é‡å¤§çš„æ—¶å€™ä¸å»ºè®®ä½¿ç”¨ã€‚</p>
</blockquote>
<h2 id="2-æŒ‡å®šæ•°æ®åº“å­—æ®µçš„èŒƒå›´"><a href="#2-æŒ‡å®šæ•°æ®åº“å­—æ®µçš„èŒƒå›´" class="headerlink" title="2. æŒ‡å®šæ•°æ®åº“å­—æ®µçš„èŒƒå›´"></a>2. æŒ‡å®šæ•°æ®åº“å­—æ®µçš„èŒƒå›´</h2><p>è¿™ç§æ–¹å¼å°±æ˜¯é€šè¿‡æŒ‡å®šæ•°æ®åº“ä¸­æŸä¸ªå­—æ®µçš„èŒƒå›´ï¼Œä½†æ˜¯<code>è¿™ä¸ªå­—æ®µå¿…é¡»æ˜¯æ•°å­—</code>ï¼Œæ¥çœ‹çœ‹è¿™ä¸ªå‡½æ•°çš„å‡½æ•°åŸå‹ï¼š</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jdbc</span></span>(</span><br><span class="line">    url: <span class="type">String</span>,</span><br><span class="line">    table: <span class="type">String</span>,</span><br><span class="line">    columnName: <span class="type">String</span>,</span><br><span class="line">    lowerBound: <span class="type">Long</span>,</span><br><span class="line">    upperBound: <span class="type">Long</span>,</span><br><span class="line">    numPartitions: <span class="type">Int</span>,</span><br><span class="line">    connectionProperties: <span class="type">Properties</span>): <span class="type">DataFrame</span></span><br></pre></td></tr></table></figure>
<p>â€¦ not finish</p>
<h2 id="3-æ ¹æ®ä»»æ„å­—æ®µè¿›è¡Œåˆ†åŒº"><a href="#3-æ ¹æ®ä»»æ„å­—æ®µè¿›è¡Œåˆ†åŒº" class="headerlink" title="3. æ ¹æ®ä»»æ„å­—æ®µè¿›è¡Œåˆ†åŒº"></a>3. æ ¹æ®ä»»æ„å­—æ®µè¿›è¡Œåˆ†åŒº</h2><p>â€¦</p>
<h2 id="4-é€šè¿‡-load-è·å–"><a href="#4-é€šè¿‡-load-è·å–" class="headerlink" title="4. é€šè¿‡ load è·å–"></a>4. é€šè¿‡ load è·å–</h2><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> df = sqlContext.load(<span class="string">"jdbc"</span>, <span class="type">Map</span>(<span class="string">"url"</span> -&gt; <span class="string">"jdbc:mysql://..."</span>, </span><br><span class="line">              <span class="string">"dbtable"</span> -&gt; <span class="string">"mds_user_coupon_bhv"</span>)</span><br><span class="line">         )</span><br></pre></td></tr></table></figure>
<p>æ¢ä¸€ç§æ›´æ­£å¼çš„å†™æ³•å¦‚ä¸‹ :</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> df = sqlContext.read.format(<span class="string">"jdbc"</span>).options(<span class="type">Map</span>(</span><br><span class="line">      <span class="string">"url"</span> -&gt; <span class="string">"jdbc:mysql://192.168.***.**:3306/your_lib_name?user= your_username&amp;password=your_password"</span>,</span><br><span class="line">      <span class="string">"dbtable"</span> -&gt; <span class="string">"mds_user_coupon_bhv"</span>)</span><br><span class="line">   ).load()</span><br></pre></td></tr></table></figure>
<p>optionså‡½æ•°æ”¯æŒurlã€driverã€dbtableã€partitionColumnã€lowerBoundã€upperBoundä»¥åŠnumPartitionsé€‰é¡¹ï¼Œè¿™ä¸ªå’Œæ–¹æ³•äºŒçš„å‚æ•°ä¸€è‡´ã€‚å…¶å†…éƒ¨å®ç°åŸç†éƒ¨åˆ†å’Œæ–¹æ³•äºŒå¤§ä½“ä¸€è‡´ã€‚åŒæ—¶loadæ–¹æ³•è¿˜æ”¯æŒjsonã€orcç­‰æ•°æ®æºçš„è¯»å–ã€‚</p>
<blockquote>
<p>Reading notes</p>
</blockquote>
<h2 id="5-Reference"><a href="#5-Reference" class="headerlink" title="5. Reference"></a>5. Reference</h2><blockquote>
<p>å°Šé‡åŸåˆ›ï¼Œè½¬è½½è¯·æ³¨æ˜ï¼š è½¬è½½è‡ªè¿‡å¾€è®°å¿†ï¼ˆ<a href="http://www.iteblog.com/ï¼‰" target="_blank" rel="external">http://www.iteblog.com/ï¼‰</a> </p>
</blockquote>
<p><a href="http://blog.csdn.net/mlljava1111/article/details/50432569" target="_blank" rel="external">Spark Read Mysql-csdn</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[New Mac Install Brew Iterm Zsh]]></title>
      <url>http://shopee.ai/2017/03/22/devops/ops-new-macosx-install-soft/</url>
      <content type="html"><![CDATA[<p>æ–°æœº mac å®‰è£…ä¸€äº›å¸¸ç”¨è½¯ä»¶</p>
<a id="more"></a>
<h2 id="1-install-homebrew"><a href="#1-install-homebrew" class="headerlink" title="1. install homebrew"></a>1. install homebrew</h2><p>Mac ä¸‹é¢çš„åŒ…ç®¡ç†å·¥å…·ï¼Œé€šè¿‡ Github æ‰˜ç®¡é€‚åˆ Mac çš„ç¼–è¯‘é…ç½®ä»¥åŠ Patchï¼Œå¯ä»¥æ–¹ä¾¿çš„å®‰è£…å¼€å‘å·¥å…·ã€‚</p>
<p>Mac è‡ªå¸¦ruby æ‰€ä»¥å®‰è£…èµ·æ¥å¾ˆæ–¹ä¾¿ï¼ŒåŒæ—¶å®ƒä¹Ÿä¼šè‡ªåŠ¨æŠŠgitä¹Ÿç»™ä½ è£…ä¸Šã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/bin/ruby <span class="_">-e</span> <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å®‰è£…è¿‡ç¨‹å¯èƒ½ä¼šæœ‰ç‚¹æ…¢ï¼Œå®Œæˆä¹‹åï¼Œå»ºè®®æ‰§è¡Œä¸€ä¸‹è‡ªæ£€ï¼Œbrew doctor<br>çœ‹åˆ°<br>Your system is ready to brew.<br>é‚£ä¹ˆæ­å–œä½ çš„ brew å·²ç»å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew install wget tree</span><br></pre></td></tr></table></figure>
<hr>
<p>brew å¸¸ç”¨å‘½ä»¤ï¼š ï¼ˆæ‰€æœ‰è½¯ä»¶ä»¥PHP5.5ä¸ºä¾‹å­ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew update                        <span class="comment">#æ›´æ–°brewå¯å®‰è£…åŒ…ï¼Œå»ºè®®æ¯æ¬¡æ‰§è¡Œä¸€ä¸‹</span></span><br><span class="line">brew search php55                  <span class="comment">#æœç´¢php5.5</span></span><br><span class="line">brew tap josegonzalez/php          <span class="comment">#å®‰è£…æ‰©å±•&lt;gihhub_user/repo&gt; </span></span><br><span class="line">brew tap                          <span class="comment">#æŸ¥çœ‹å®‰è£…çš„æ‰©å±•åˆ—è¡¨</span></span><br><span class="line">brew install php55                <span class="comment">#å®‰è£…php5.5</span></span><br><span class="line">brew remove  php55                <span class="comment">#å¸è½½php5.5</span></span><br><span class="line">brew upgrade php55                <span class="comment">#å‡çº§php5.5</span></span><br><span class="line">brew options php55                <span class="comment">#æŸ¥çœ‹php5.5å®‰è£…é€‰é¡¹</span></span><br><span class="line">brew info    php55                <span class="comment">#æŸ¥çœ‹php5.5ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">brew home    php55                <span class="comment">#è®¿é—®php5.5å®˜æ–¹ç½‘ç«™</span></span><br><span class="line">brew services list                <span class="comment">#æŸ¥çœ‹ç³»ç»Ÿé€šè¿‡ brew å®‰è£…çš„æœåŠ¡</span></span><br><span class="line">brew services cleanup              <span class="comment">#æ¸…é™¤å·²å¸è½½æ— ç”¨çš„å¯åŠ¨é…ç½®æ–‡ä»¶</span></span><br><span class="line">brew services restart php55        <span class="comment">#é‡å¯php-fpm</span></span><br><span class="line"> </span><br><span class="line">æ³¨æ„ï¼šbrew services ç›¸å…³å‘½ä»¤æœ€å¥½åˆ«ç»å¸¸ç”¨äº†ï¼Œæç¤ºä¼šè¢«ç§»é™¤</span><br></pre></td></tr></table></figure>
<h2 id="2-install-zsh"><a href="#2-install-zsh" class="headerlink" title="2. install zsh"></a>2. install zsh</h2><p>ohmyzsh &amp; iTerm2 ä¸¤ä¸ªç¥å™¨ï¼Œåœ¨Mac os xä¸‹æ˜¯ä¸€å®šè¦è£…çš„. </p>
<h3 id="2-1-install-onmyzsh"><a href="#2-1-install-onmyzsh" class="headerlink" title="2.1 install onmyzsh"></a>2.1 install onmyzsh</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -L http://install.ohmyz.sh | sh</span><br></pre></td></tr></table></figure>
<h3 id="2-2-install-zsh"><a href="#2-2-install-zsh" class="headerlink" title="2.2 install zsh"></a>2.2 install zsh</h3><p>åœ¨ Terminal ä¸‹ï¼Œç›´æ¥æ•² zsh.</p>
<blockquote>
<p>ä¸‹é¢è¯·æš‚æ—¶å¿½ç•¥ </p>
</blockquote>
<hr>
<p>è®¾ç½®é»˜è®¤shell</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat /etc/shells </span><br><span class="line"># List of acceptable shells for chpass(1). </span><br><span class="line"># Ftpd will not allow users to connect who are not using </span><br><span class="line"># one of these shells. /bin/bash /bin/csh /bin/ksh /bin/sh /bin/tcsh /bin/zsh zsh --version zsh 5.0.2 (x86_64-apple-darwin13.0) chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶Macè‡ªå¸¦äº†zshï¼Œå¦‚æœä½ æƒ³è¦æœ€æ–°ç‰ˆçš„zshï¼Œé‚£ä¹ˆä½ ç”¨ brew install zshå®‰è£…ä¸€ä¸ªæœ€æ–°çš„å§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/usr/local/bin/zsh --version</span><br></pre></td></tr></table></figure>
<p>zsh 5.0.5 (x86_64-apple-darwin13.3.0) åŒºåˆ«ä¹Ÿä¸ä¼šå¾ˆå¤§ï¼Œ é»˜è®¤çš„ç‰ˆæœ¬å·²ç»å¾ˆæ–°äº†ã€‚  </p>
<p>å®‰è£…åæœ€å¥½å¤‡ä»½ : cp ~/.zshrc ~/.zshrc.orig</p>
<h2 id="3-homebrew-cask"><a href="#3-homebrew-cask" class="headerlink" title="3. homebrew-cask"></a>3. homebrew-cask</h2><p>install brew cask</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew tap phinze/homebrew-cask</span><br></pre></td></tr></table></figure>
<p>caskå¸¸ç”¨å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew cask search        #åˆ—å‡ºæ‰€æœ‰å¯ä»¥è¢«å®‰è£…çš„è½¯ä»¶</span><br><span class="line">brew cask search php    #æŸ¥æ‰¾æ‰€æœ‰å’Œphpç›¸å…³çš„åº”ç”¨</span><br><span class="line">brew cask list          #åˆ—å‡ºæ‰€æœ‰é€šè¿‡caskå®‰è£…çš„è½¯ä»¶</span><br><span class="line">brew cask info phpstorm #æŸ¥çœ‹ phpstorm çš„ä¿¡æ¯</span><br><span class="line">brew cask uninstall qq  #å¸è½½ QQ</span><br></pre></td></tr></table></figure>
<blockquote>
<p>brew cask install sublime-text</p>
</blockquote>
<p>è¿™é‡Œè°ˆè°ˆcaskå¯¹æ¯”Mac App Storeçš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>å¯¹å¸¸ç”¨è½¯ä»¶æ”¯æŒæ›´å…¨é¢ï¼ˆç‰¹åˆ«æ˜¯å¼€å‘è€…ï¼‰ï¼Œcaské‡Œé¢ä¼šç»™ä½ ä¸€äº›æƒŠå–œï¼›</li>
<li>è½¯ä»¶æ›´æ–°é€Ÿåº¦å¿«ï¼Œä¸€èˆ¬éƒ½æ˜¯æœ€æ–°ç‰ˆæœ¬ Storeä¸Šå¾ˆä¹…å¾ˆä¹…æ‰ä¼šæ›´æ–°ç‰ˆæœ¬ï¼›</li>
<li>å‘½ä»¤å®‰è£…æ„Ÿè§‰æ¯”æ‰“å¼€Storeæ–¹ä¾¿ï¼Œå¦å¤–Storeåœ¨å›½å†…çš„é€Ÿåº¦ä¹Ÿæ˜¯XXOOã€‚</li>
</ul>
<blockquote>
<p>homebrew-cask ä½ å¯ä»¥å…ˆä¸å®‰è£…</p>
</blockquote>
<h2 id="4-iterm2"><a href="#4-iterm2" class="headerlink" title="4. iterm2"></a>4. iterm2</h2><p> <a href="https://www.iterm2.com/" target="_blank" rel="external">https://www.iterm2.com/</a></p>
<h2 id="5-SimpleHTTPServer"><a href="#5-SimpleHTTPServer" class="headerlink" title="5. SimpleHTTPServer"></a>5. SimpleHTTPServer</h2><p>A computer</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python -m http.server</span><br></pre></td></tr></table></figure>
<p>B computer</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget http://192.168.xx.xx:8000/your-filename</span><br></pre></td></tr></table></figure>
<blockquote>
<p>nc ç‘å£«å†›åˆ€ï¼Œä¹Ÿå¯ä»¥ä¸¤å°ç”µè„‘ä¼ è¾“æ–‡ä»¶</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Recommendation System - CF]]></title>
      <url>http://shopee.ai/2017/02/28/ml/recommendation-six-mouth-CF/</url>
      <content type="html"><![CDATA[<p>recommendation system and application</p>
<a id="more"></a>
<p>æ¨èç®—æ³•</p>
<ul>
<li>åŸºäºå†…å®¹çš„æ¨è</li>
<li>ååŒè¿‡æ»¤ CF</li>
<li>çŸ©é˜µåˆ†è§£ ä¸ éšè¯­ä¹‰æ¨¡å‹</li>
</ul>
<h2 id="1-æ¨èç³»ç»Ÿ-What"><a href="#1-æ¨èç³»ç»Ÿ-What" class="headerlink" title="1. æ¨èç³»ç»Ÿ What?"></a>1. æ¨èç³»ç»Ÿ What?</h2><h3 id="1-1-æ•°å­¦å®šä¹‰"><a href="#1-1-æ•°å­¦å®šä¹‰" class="headerlink" title="1.1 æ•°å­¦å®šä¹‰"></a>1.1 æ•°å­¦å®šä¹‰</h3><ul>
<li>è®¾ C ä¸ºå…¨ä½“ç”¨æˆ·é›†åˆ</li>
<li>è®¾ S ä¸ºå…¨éƒ¨å•†å“/æ¨èå†…å®¹é›†åˆ</li>
<li>è®¾ u æ˜¯è¯„åˆ¤æŠŠ $s_i$ æ¨è $c_i$ çš„å¥½åè¯„åˆ¤å‡½æ•°</li>
</ul>
<blockquote>
<p>æ¨èæ˜¯å¯¹äº $câˆˆC$ ,æ‰¾åˆ° $sâˆˆS$ ,ä½¿å¾— $u$ æœ€å¤§</p>
</blockquote>
<h3 id="1-2-äººè¯ç‰ˆæœ¬"><a href="#1-2-äººè¯ç‰ˆæœ¬" class="headerlink" title="1.2 äººè¯ç‰ˆæœ¬"></a>1.2 äººè¯ç‰ˆæœ¬</h3><p>æ ¹æ®ç”¨æˆ·çš„ :</p>
<ol>
<li>å†å²è¡Œä¸º</li>
<li>ç¤¾äº¤å…³ç³»</li>
<li>å…´è¶£ç‚¹</li>
<li>ä¸Šä¸‹æ–‡ç¯å¢ƒ</li>
<li>â€¦</li>
</ol>
<blockquote>
<p>å»åˆ¤æ–­ç”¨æˆ·çš„å½“å‰éœ€æ±‚ / æ„Ÿå…´è¶£çš„ Item</p>
</blockquote>
<h2 id="2-æ¨èç³»ç»Ÿ-Why"><a href="#2-æ¨èç³»ç»Ÿ-Why" class="headerlink" title="2. æ¨èç³»ç»Ÿ Why?"></a>2. æ¨èç³»ç»Ÿ Why?</h2><p>Infomation Overload<br>ç”¨æˆ·éœ€æ±‚ä¸æ˜ç¡®</p>
<h3 id="2-1-å¯¹ç”¨æˆ·"><a href="#2-1-å¯¹ç”¨æˆ·" class="headerlink" title="2.1 å¯¹ç”¨æˆ·"></a>2.1 å¯¹ç”¨æˆ·</h3><ul>
<li>æ‰¾åˆ°å¥½ç©çš„ä¸œè¥¿</li>
<li>å‘ç°æ–°é²œäº‹ç‰© Surprise</li>
</ul>
<h3 id="2-2-å¯¹å•†å®¶"><a href="#2-2-å¯¹å•†å®¶" class="headerlink" title="2.2 å¯¹å•†å®¶"></a>2.2 å¯¹å•†å®¶</h3><ul>
<li>ä¸ªæ€§åŒ–æœåŠ¡ã€æé«˜ç²˜æ€§</li>
<li>å¢åŠ è¥æ”¶</li>
</ul>
<h2 id="3-è¯„å®šæ ‡å‡†"><a href="#3-è¯„å®šæ ‡å‡†" class="headerlink" title="3. è¯„å®šæ ‡å‡†"></a>3. è¯„å®šæ ‡å‡†</h2><ul>
<li>å‡†ç¡®åº¦</li>
<li>è¦†ç›–åº¦</li>
<li>å¤šæ ·æ€§</li>
<li>è¯„ä¼°æ ‡å‡†</li>
</ul>
<h3 id="3-1-å‡†ç¡®åº¦-Top-N"><a href="#3-1-å‡†ç¡®åº¦-Top-N" class="headerlink" title="3.1 å‡†ç¡®åº¦ Top N"></a>3.1 å‡†ç¡®åº¦ Top N</h3><p>è®¾ $R(u)$ ä¸ºæ ¹æ®è®­ç»ƒå»ºç«‹çš„æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„æ¨è, $T(u)$ ä¸ºæµ‹è¯•é›†ä¸Šç”¨æˆ·çš„é€‰æ‹©ã€‚</p>
<p>$$<br>Precision =  \frac{\sum_{uâˆˆU} | R(u) \bigcap T(u) | }{\sum_{uâˆˆU} R(u)}<br>$$</p>
<p>$$<br>Recall =  \frac{\sum_{uâˆˆU} | R(u) \bigcap T(u) | }{\sum_{uâˆˆU} T(u)}<br>$$</p>
<blockquote>
<p>Recall è¯´æ˜ : ç”¨æˆ·çœ‹çš„ 80 ç¯‡æ–°é—»ï¼Œä½ åˆ°åº•ç»™æˆ‘ <code>æ¨</code> å‡ºæ¥å¤šå°‘ç¯‡</p>
</blockquote>
<h3 id="3-2-è¦†ç›–ç‡"><a href="#3-2-è¦†ç›–ç‡" class="headerlink" title="3.2 è¦†ç›–ç‡"></a>3.2 è¦†ç›–ç‡</h3><p>è¡¨ç¤ºå¯¹ç‰©å“é•¿å°¾çš„å‘æ˜èƒ½åŠ› (æ¨èç³»ç»Ÿå¸Œæœ›æ¶ˆé™¤é©¬å¤ªæ•ˆåº”)</p>
<p>$$<br>Coverage = \frac{|U_{uâˆˆU} R(u)|}{|I|}<br>$$</p>
<blockquote>
<p>è¦†ç›–ç‡æ˜¯å¯¹å¹³å°æ‰€æœ‰ç‰©å“æ‰€è¨€ï¼Œæ·˜å®æ¨èç­‰ä¼šå…³åˆ‡è¿™ä¸ªæŒ‡æ ‡ã€‚</p>
<p>éå¸¸ç‹¬ç‰¹çš„å•†å“å’Œæ–°é—», è¢«çœ‹åˆ°çš„é‡, æ˜¯ä¸€æ¡ä¸‹æ»‘æ›²çº¿</p>
<p>å¸Œæœ›ä¸ªæ€§åŒ–æ¨èï¼ŒæŠŠå°ä¼—çš„å•†å“ ä¹Ÿæ¨èå±•ç¤ºå‡ºæ¥</p>
</blockquote>
<h3 id="3-3-å¤šæ ·æ€§"><a href="#3-3-å¤šæ ·æ€§" class="headerlink" title="3.3 å¤šæ ·æ€§"></a>3.3 å¤šæ ·æ€§</h3><p>è¡¨ç¤ºæ¨èåˆ—è¡¨ä¸­ç‰©å“ä¸¤ä¸¤ä¹‹é—´çš„ä¸ç›¸ä¼¼æ€§.</p>
<p>$$<br>Diversity(R(u)) = 1 - \frac {\sum_{i, j \in R(u), {i \neq j}, {s(i, j)} }} {\frac {1}{2} |R(u)|(|R(u) - 1|)}<br>$$</p>
<p>$$<br>Diversity = \frac {1} {|U|} {\sum_{u \in U} {Diversity(R(u))}}<br>$$</p>
<blockquote>
<p>å…¨æ˜¯ç‰›ä»”è£¤çš„è¯ï¼Œç”¨æˆ·å®¡ç¾ç–²åŠ³, tag(çº¯æ£‰ 0ï¼Œåœ†é¢† 1) è¿è¡£è£™, è®¡ç®— vector è·ç¦»ã€‚å“ç±»ä¸åŒï¼Œç›¸ä¼¼åº¦è®¾ä¸º 0.</p>
</blockquote>
<h3 id="3-4-è¯„ä¼°æ ‡å‡†"><a href="#3-4-è¯„ä¼°æ ‡å‡†" class="headerlink" title="3.4 è¯„ä¼°æ ‡å‡†"></a>3.4 è¯„ä¼°æ ‡å‡†</h3><ul>
<li>æ–°é¢–åº¦ : ç»™ç”¨æˆ· Surprise</li>
<li>æƒŠå–œåº¦ : æ¨èå’Œç”¨æˆ·å†å²å…´è¶£ä¸ç›¸ä¼¼ï¼Œå´æ»¡æ„çš„</li>
<li>ä¿¡ä»»åº¦ : æä¾›å¯é çš„æ¨èç†ç”±</li>
<li>å®æ—¶æ€§ : å®æ—¶æ›´æ–°ç¨‹åº¦ (context, session â€¦)</li>
<li>â€¦</li>
</ul>
<h2 id="4-ç›¸ä¼¼åº¦-è·ç¦»å®šä¹‰"><a href="#4-ç›¸ä¼¼åº¦-è·ç¦»å®šä¹‰" class="headerlink" title="4. ç›¸ä¼¼åº¦/è·ç¦»å®šä¹‰"></a>4. ç›¸ä¼¼åº¦/è·ç¦»å®šä¹‰</h2><ul>
<li>æ¬§æ°è·ç¦»</li>
<li>Jaccard ç›¸ä¼¼åº¦</li>
<li>ä½™å¼¦ç›¸ä¼¼åº¦</li>
<li>Pearson ç›¸ä¼¼åº¦</li>
</ul>
<h3 id="4-1-æ¬§æ°è·ç¦»"><a href="#4-1-æ¬§æ°è·ç¦»" class="headerlink" title="4.1 æ¬§æ°è·ç¦»"></a>4.1 æ¬§æ°è·ç¦»</h3><p>$$<br>dist(X, Y) = \left( \sum_{i=1}^n {| x_i - y_i|}^p \right)^{\frac {1}{p}}<br>$$</p>
<h3 id="4-2-Jaccard-ç›¸ä¼¼åº¦"><a href="#4-2-Jaccard-ç›¸ä¼¼åº¦" class="headerlink" title="4.2 Jaccard ç›¸ä¼¼åº¦"></a>4.2 Jaccard ç›¸ä¼¼åº¦</h3><p>$$<br>J(A, B) = \frac {|A \bigcap B|}{|A \bigcup B|}<br>$$</p>
<blockquote>
<p>é€‚ç”¨äº top N æ¨èï¼Œè¦ä¹ˆ çœ‹ï¼Œè¦ä¹ˆ æ²¡çœ‹</p>
</blockquote>
<h3 id="4-3-ä½™å¼¦ç›¸ä¼¼åº¦"><a href="#4-3-ä½™å¼¦ç›¸ä¼¼åº¦" class="headerlink" title="4.3 ä½™å¼¦ç›¸ä¼¼åº¦"></a>4.3 ä½™å¼¦ç›¸ä¼¼åº¦</h3><p>$$<br>\cos(\theta) = \frac {a^Tb}{|a| \cdot |b|}<br>$$</p>
<h3 id="4-4-Pearson-ç›¸ä¼¼åº¦"><a href="#4-4-Pearson-ç›¸ä¼¼åº¦" class="headerlink" title="4.4 Pearson ç›¸ä¼¼åº¦"></a>4.4 Pearson ç›¸ä¼¼åº¦</h3><p>$$<br>\frac { \sum_{i=1}^n (X_i - {\mu}_x) (Y_i - {\mu}_y)} {\sqrt{ \sum_{i=1}^n (X_i - {\mu}_x)^2} \sqrt{ \sum_{i=1}^n (Y_i - {\mu}_y)^2}}<br>$$</p>
<blockquote>
<p>(5, 6, 9)<br>(1, 2, 6)</p>
</blockquote>
<h2 id="5-æ¨èç®—æ³•"><a href="#5-æ¨èç®—æ³•" class="headerlink" title="5. æ¨èç®—æ³•"></a>5. æ¨èç®—æ³•</h2><ol>
<li>åŸºäºå†…å®¹çš„æ¨è</li>
<li>ååŒè¿‡æ»¤CF</li>
<li>éšè¯­ä¹‰æ¨¡å‹</li>
</ol>
<h3 id="5-1-åŸºäºå†…å®¹æ¨è"><a href="#5-1-åŸºäºå†…å®¹æ¨è" class="headerlink" title="5.1 åŸºäºå†…å®¹æ¨è"></a>5.1 åŸºäºå†…å®¹æ¨è</h3><ul>
<li>åŸºäºç”¨æˆ·å–œæ¬¢çš„ Item çš„å±æ€§ / å†…å®¹è¿›è¡ŒæŒ–æ˜</li>
<li>åŸºäºåˆ†æå†…å®¹ï¼Œæ— éœ€è€ƒè™‘å½“å‰userä¸å…¶ä»–userçš„è¡Œä¸ºçš„äº¤äº’å…³è”ç­‰</li>
<li>é€šå¸¸ä½¿ç”¨åœ¨ <code>æ–‡æœ¬ç›¸å…³</code> çš„äº§å“ä¸Šè¿›è¡Œæ¨è</li>
<li>Item é€šè¿‡å†…å®¹ (æ¯”å¦‚ å…³é”®è¯) å…³è”</li>
</ul>
<p>åœ¨æ¨èç”µå½±ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯æ•ˆæœä¸è§å¾—å¥½. ä½ éœ€è¦æ‰‹åŠ¨å¯¹ Item è¿›è¡Œç¦»çº¿æŒ–æ˜ï¼Œæ‹¿å‡º tag</p>
<blockquote>
<p>ç”µå½±é¢˜æ : çˆ±æƒ… / æ¢é™© / åŠ¨ä½œ  / å–œå‰§<br>æ ‡å¿—ç‰¹å¾ : é»„æ™“æ˜ / ç‹å®å¼º<br>å¹´ä»£ : 1995, 2016 â€¦<br>å…³é”®è¯</p>
</blockquote>
<p>ä¸¤ä¸ªItemæ ¹æ® tag çš„åˆ†å€¼ï¼Œè¿›è¡Œæ±‚ è·ç¦».</p>
<hr>
<p><strong>ä¸¾ä¾‹æ–‡æœ¬æŒ–æ˜ :</strong></p>
<p>One : å¯¹äºæ¯ä¸ªè¦æ¨èçš„å†…å®¹,æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä»½èµ„æ–™ :</p>
<blockquote>
<p>æ¯”å¦‚è¯ $k_i$ åœ¨æ–‡æ¡£ $d_j$ ä¸­çš„æƒé‡ $w_{ij}$ (å¸¸ç”¨çš„æ–¹æ³•æ¯”å¦‚ TF-IDF)</p>
<p>æœ‰ä¸€ä¸ªè¯è¡¨ Item [$w_1$, $w_2$, â€¦ ,$w_{4000}$], å¯¹æ¯ä¸ª document å»ºç«‹ä¸€ä¸ªè¯è¡¨ vectorã€‚</p>
</blockquote>
<p>Two : éœ€è¦å¯¹ç”¨æˆ·ä¹Ÿå»ºç«‹ä¸€ä»½èµ„æ–™ :</p>
<blockquote>
<p>æ¯”å¦‚è¯´å®šä¹‰ä¸€ä¸ªæƒé‡å‘é‡ ($w_{c1},â€¦,w_{ck}$) , å…¶ä¸­ $w_{ci}$ è¡¨ç¤ºç¬¬ $k_i$ ä¸ªè¯å¯¹ç”¨æˆ· $c$ çš„é‡è¦åº¦<br>user ä¹‹å‰æœ‰çœ‹è¿‡çš„ å°è¯´ æˆ– æ–‡æ¡£ã€‚(çœ‹è¿‡çš„æ–‡æ¡£æ”¾åœ¨ä¸€èµ·æä¸€ä¸ªdoc_vectorï¼Œæˆ–è€… å°† doc_vector åŠ æƒå¹³å‡)</p>
</blockquote>
<p>Three : è®¡ç®—åŒ¹é…åº¦ </p>
<blockquote>
<p>ä½™å¼¦è·ç¦»å…¬å¼</p>
</blockquote>
<p>$$<br>u(c, s) = \cos(\vec{w_c}, \vec{w_s}) = \frac{\vec{w_c} \cdot \vec{w_s}}{\vec{||w_c||} \times \vec{||w_s||}}<br>$$</p>
<blockquote>
<p>æ€»ç»“ä¸‰æ­¥ :</p>
<ol>
<li>å¯¹ æ¯ä¸ª document å»ºç«‹ vector</li>
<li>å¯¹ æ¯ä¸ª user å»ºç«‹ vector</li>
<li>æ¯”å¯¹ user å‘é‡ï¼Œä¸ è¯¥user æ²¡æœ‰çœ‹è¿‡çš„ document å‘é‡ ä¹‹é—´çš„ç›¸ä¼¼åº¦</li>
</ol>
<p>TF-IDF : è¯„ä¼°ä¸€ä¸ª word å¯¹å½“å‰ document çš„é‡è¦æ€§ã€‚ å½“å‰å‡é«˜è€Œå‡é«˜ï¼Œæ‰€æœ‰docä¸­ï¼Œå‡é«˜è€Œä¸‹é™ã€‚</p>
</blockquote>
<p><strong>Sample Example : åŸºäºä¹¦åè¿›è¡Œä¹¦æ¨è</strong></p>
<p>ä¸€ä¸ªç”¨æˆ·å¯¹ã€ŠBuilding data mining applications for CRMã€‹æ„Ÿå…´è¶£ï¼Œä»ä»¥ä¸‹ä¹¦ä¸­è¿›è¡Œæ¨è :</p>
<ol>
<li><code>Building data mining applications for CRM</code></li>
<li>Accelerating Customer Relationships: Using CRM and Relationship Technologies</li>
<li>Mastering Data Mining: The Art and Science of Customer Relationship Management</li>
<li>Data Mining Your Website</li>
<li>Introduction to marketing</li>
<li>Consumer behavior</li>
<li>marketing research, a handbook </li>
<li>Customer knowledge manag</li>
</ol>
<p><img src="/images/recommendation/rs-six-month-01.png" alt="åŸºäºå†…å®¹çš„æ¨è"></p>
<blockquote>
<p>TF-IDF Normed Vectors å€¼ (0.187ã€0.316) ä»£è¡¨ <code>Data</code> å¯¹äºå½“å‰ <code>æ ‡é¢˜</code> çš„é‡è¦ç¨‹åº¦. </p>
<p>æ ¹æ® TF-IDFï¼Œå½“å‰ä¹¦å ä¸ å›¾ä¹¦é¦†æ‰€æœ‰ä¹¦å å‡ºç°çš„æ¬¡æ•°, (å»æ‰åœç”¨è¯, å¦‚ and) è®¡ç®—å‡ºæ¥çš„æƒé‡ã€‚</p>
<p>æ‰€ä»¥ <code>ã€ŠBuilding data mining applications for CRMã€‹</code> å·²ç»æœ‰ä¸€ä¸ªåˆ— vectorï¼Œ ä¸ å…¶ä»–æ‰€æœ‰ ä¹¦ è®¡ç®— ç›¸ä¼¼åº¦ï¼Œç›¸ä¼¼åº¦ é«˜çš„ï¼Œä¸ºæ¨èæœ€å¥½çš„ã€‚</p>
<p>This is only a sample show exampleï¼Œ not the real method of thing.</p>
</blockquote>
<p>è®¡ç®—è¿™æœ¬ä¹¦å’Œå…¶ä½™7æœ¬ä¹¦çš„ç›¸ä¼¼åº¦ï¼Œæ¨èæœ€è¿‘çš„ï¼Œè¿™é‡Œç»“æœä¸º :</p>
<blockquote>
<p>rank 1 : Data Mining Your Website<br>ô°…rank 2 : Accelerating Custom Relationships: Using CRM â€¦<br>rank 3 : Mastering Data Mining: The Art and Scienceâ€¦ ô°¬ô°­ô°®ô°€ô°â€¦</p>
</blockquote>
<p>ç»“è®º : åŸºäºå†…å®¹çš„æ¨èï¼Œæ— éœ€ç”¨æˆ·è¡Œä¸ºçš„äº¤äº’å…³è”ã€‚</p>
<h3 id="5-2-ååŒè¿‡æ»¤-User-based"><a href="#5-2-ååŒè¿‡æ»¤-User-based" class="headerlink" title="5.2 ååŒè¿‡æ»¤ (User-based)"></a>5.2 ååŒè¿‡æ»¤ (User-based)</h3><p>æ‰¾åˆ°å’Œ User æœ€è¿‘çš„ å…¶ä»– Userô°¼ô°½ô°Ÿô°²ô°³ô°§ô°¨ô°’ô° ô°¾ô°²ô°³ ô±…ô°²ô°³ô±†ô±€ô±ô±‚ô°•, æ‰¾åˆ°ä»–ä»¬ çœ‹/ä¹°è¿‡ä½†å½“å‰ User æ²¡çœ‹/ä¹°è¿‡çš„ itemï¼Œæ ¹æ®è·ç¦»åŠ æƒæ‰“åˆ†<br>æ‰¾å¾—åˆ†æœ€é«˜çš„æ¨è</p>
<blockquote>
<p>ä¸éœ€è¦æå‰æŒ–æ˜ Itemï¼Œ æ‰¾å“å‘³æ¥è¿‘çš„ 5 ä¸ª friendsã€‚</p>
</blockquote>
<p><img src="/images/recommendation/rs-six-month-02.png" alt="User-based CF"></p>
<p>è¿‘é‚»æ€ä¹ˆæ‰¾ ?</p>
<table>
<thead>
<tr>
<th>U</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>e</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>5</td>
<td>1</td>
<td>5</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>B</td>
<td>4</td>
<td></td>
<td>3</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<h3 id="5-3-ååŒè¿‡æ»¤-Item-based"><a href="#5-3-ååŒè¿‡æ»¤-Item-based" class="headerlink" title="5.3 ååŒè¿‡æ»¤ (Item-based)"></a>5.3 ååŒè¿‡æ»¤ (Item-based)</h3><blockquote>
<p>æ®ç°æœ‰ User å¯¹ Item çš„è¯„çº§æƒ…å†µï¼Œæ¥è®¡ç®— Item ä¹‹é—´çš„æŸç§ç›¸ä¼¼åº¦ã€‚å·²æœ‰Item ç›¸ä¼¼çš„ Item è¢«ç”¨æ¥ç”Ÿæˆä¸€ä¸ªç»¼åˆå¾—åˆ†ï¼Œè€Œè¯¥å¾—åˆ†ç”¨äºè¯„ä¼°æœªçŸ¥ç‰©å“çš„ç›¸ä¼¼åº¦ã€‚</p>
</blockquote>
<p>æ ¹æ® User å¯¹ Item çš„è¡Œä¸ºï¼Œè®¡ç®— item å’Œ item ç›¸ä¼¼åº¦ï¼Œæ‰¾åˆ°å’Œå½“å‰ item æœ€è¿‘çš„è¿›è¡Œæ¨èã€‚</p>
<p><img src="/images/recommendation/rs-six-month-03.png" alt="Item-based CF"></p>
<blockquote>
<p>Collaborative filtering åŸºäº è¿‘é‚» çš„æ€æƒ³</p>
</blockquote>
<p>CF (Item-based) Summary :</p>
<ul>
<li>ä¸€ä¸ª User List ($u_i$, i = 1, â€¦, n), ä¸€ä¸ª Item List ($p_j$, j = 1, â€¦, m)</li>
<li>ä¸€ä¸ª $n * m$ çŸ©é˜µ W, æ¯ä¸ªå…ƒç´  $W_{ij}$, è¡¨ç¤º ${User}_i$ å¯¹ ${Item}_j$ çš„æ‰“åˆ†</li>
<li>è®¡ç®— item å’Œ item ä¹‹é—´çš„ç›¸ä¼¼åº¦</li>
</ul>
<p>$$<br>S(i, j) = \cos(\vec{i}, \vec{j}) = \frac{\vec{i} \cdot \vec{j}}{\vec{||i||} \times \vec{||j||}}<br>$$</p>
<ul>
<li>é€‰å– Top K æ¨è æˆ– åŠ æƒé¢„æµ‹å¾—åˆ†</li>
</ul>
<p>$$<br>r_{xi} = \frac { {\sum_{j \in N (i;x)} S_{ij} \times r_{xj}}} { {\sum_{j \in N (i;x)} S_{ij}}}<br>$$</p>
<p><strong>Item-based Collaborative Filtering</strong></p>
<p><img src="/images/recommendation/rs-six-month-05.png" alt="CF-Item Collaborative Filtering"></p>
<blockquote>
<p>1 ä¸ 4 ä¹‹é—´çš„ç›¸ä¼¼åº¦-0.10ä¸å¯¹ï¼Œ åº”è¯¥æ˜¯ -0.83 ç­‰ï¼Œæ•°æ®æœ‰è¯¯ã€‚(æŒ‰ç…§ Pearson overlap è®¡ç®—).</p>
<p>$r_{1.5}$ = (0.41*2 + 0.59*3) / (0.41 + 0.59) = 2.6</p>
<p>åŸºäº Top N æ¥è®¡ç®—ï¼Œè¿™é‡Œæ˜¯ Top 2.</p>
</blockquote>
<h4 id="User-CF-vs-Item-CF"><a href="#User-CF-vs-Item-CF" class="headerlink" title="User CF vs Item CF"></a>User CF vs Item CF</h4><table>
<thead>
<tr>
<th>å±æ€§</th>
<th>UserCF</th>
<th>ItemCF</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>æ€§èƒ½</code></td>
<td>Userå¤šï¼Œè®¡ç®—Userç›¸ä¼¼åº¦çŸ©é˜µä»£ä»·å¾ˆå¤§</td>
<td>Itemå¤šï¼Œè®¡ç®—Itemç›¸ä¼¼åº¦çŸ©é˜µä»£ä»·å¾ˆå¤§</td>
</tr>
<tr>
<td><code>é¢†åŸŸ</code></td>
<td>User ä¸ªæ€§åŒ–å…´è¶£ä¸å¤ªæ˜æ˜¾çš„é¢†åŸŸ</td>
<td>é•¿å°¾ç‰©å“ä¸°å¯Œï¼Œç”¨æˆ·ä¸ªæ€§åŒ–éœ€æ±‚å¼ºçƒˆçš„é¢†åŸŸ</td>
</tr>
<tr>
<td><code>å®æ—¶æ€§</code></td>
<td>ç”¨æˆ·æœ‰æ–°è¡Œä¸ºï¼Œä¸ä¸€å®šæ¨èç»“æœé©¬ä¸Šå˜åŒ–</td>
<td>ç”¨æˆ·æœ‰æ–°è¡Œä¸ºï¼Œä¼šå¯¼è‡´æ¨èç»“æœå®æ—¶å˜åŒ–</td>
</tr>
<tr>
<td><code>å†·å¯åŠ¨</code></td>
<td>æ–°ç”¨æˆ·è¡Œä¸ºï¼Œä¸èƒ½ç«‹å³è¿›è¡Œä¸ªæ€§åŒ–æ¨è<br>(ç”¨æˆ·ç›¸ä¼¼åº¦æ˜¯æ¯éš”ä¸€æ®µæ—¶é—´ç¦»çº¿è®¡ç®—çš„)</td>
<td>æ–°ç”¨æˆ·å¯¹ç‰©å“æœ‰è¡Œä¸ºï¼Œå°±å¯ä»¥ç»™ä»–æ¨èå’Œè¯¥ç‰©å“ç›¸å…³ç‰©å“</td>
</tr>
<tr>
<td><code>æ¨èç†ç”±</code></td>
<td>å¾ˆéš¾æä¾›ä»¤ç”¨æˆ·ä¿¡æœçš„æ¨èè§£é‡Š</td>
<td>åˆ©ç”¨ç”¨æˆ·çš„å†å²è¡Œä¸ºç»™ç”¨æˆ·åšæ¨èè§£é‡Š</td>
</tr>
</tbody>
</table>
<h4 id="CF-ä¼˜ç¼ºç‚¹"><a href="#CF-ä¼˜ç¼ºç‚¹" class="headerlink" title="CF ä¼˜ç¼ºç‚¹"></a>CF ä¼˜ç¼ºç‚¹</h4><table>
<thead>
<tr>
<th>ä¼˜ç‚¹</th>
<th>ç¼ºç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>åŸºäºç”¨æˆ·è¡Œä¸ºï¼Œå› æ­¤å¯¹æ¨èå†…å®¹æ— éœ€å…ˆéªŒçŸ¥è¯†</td>
<td>éœ€è¦å¤§é‡çš„æ˜¾æ€§ / éšæ€§ç”¨æˆ·è¡Œä¸º (å†·å¯åŠ¨)</td>
</tr>
<tr>
<td>åªéœ€è¦ç”¨æˆ·å’Œå•†å“å…³è”çŸ©é˜µå³å¯ï¼Œç»“æ„ç®€å•</td>
<td>éœ€è¦å®Œå…¨ç›¸åŒçš„å•†å“å…³è”ï¼Œç›¸ä¼¼çš„ä¸åŒ</td>
</tr>
<tr>
<td>åœ¨ç”¨æˆ·è¡Œä¸ºä¸°å¯Œçš„æƒ…å†µä¸‹ï¼Œæ•ˆæœå¥½</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>(a, c) (b, c) é€šè¿‡ä¼ é€’å…³ç³»ï¼Œå¯ä»¥è¿‘ä¼¼çš„è®¡ç®—å‡ºæ¥ (a, b) ç›¸ä¼¼åº¦ï¼ŒçŸ©é˜µç¨€ç–çš„äºŒåº¦å…³è”ã€‚</p>
</blockquote>
<h2 id="6-å†·å¯åŠ¨é—®é¢˜"><a href="#6-å†·å¯åŠ¨é—®é¢˜" class="headerlink" title="6. å†·å¯åŠ¨é—®é¢˜"></a>6. å†·å¯åŠ¨é—®é¢˜</h2><h3 id="6-1-New-User"><a href="#6-1-New-User" class="headerlink" title="6.1 New User"></a>6.1 New User</h3><ul>
<li>æ¨è éå¸¸ çƒ­é—¨ çš„å•†å“ï¼Œæ”¶é›†ä¸€äº›ä¿¡æ¯</li>
<li>ç”¨æˆ·æ³¨å†Œçš„æ—¶å€™ï¼Œæ”¶é›†ä¿¡æ¯ï¼Œæˆ–è€…äº’åŠ¨æ¸¸æˆï¼Œç¡®å®šä½ å–œæ¬¢å¦</li>
</ul>
<h3 id="6-2-New-Item"><a href="#6-2-New-Item" class="headerlink" title="6.2 New Item"></a>6.2 New Item</h3><ul>
<li>æ ¹æ®æœ¬èº«å±æ€§ï¼Œæ±‚ä¸åŸæ¥ Item ç›¸ä¼¼åº¦</li>
<li>Item-based CF å¯æ¨èå‡ºå»</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Flexible Task Scheduling Framework]]></title>
      <url>http://shopee.ai/2017/01/30/hadoop/hadoop-hive-bigdata-offline-demo/</url>
      <content type="html"><![CDATA[<p>æœ¬ç¯‡ä»‹ç»ä¸€ç§ å¤§æ•°æ®ç¦»çº¿å¼€å‘æ¨¡å—çš„è§£å†³æ–¹æ¡ˆï¼Œ å…¶å®è¿™æ˜¯ä¸€ä¸ªæ‰‹å†™çš„é€‚åˆç¦»çº¿è°ƒåº¦çš„çµæ´»å°æ¡†æ¶</p>
<p><a href="https://github.com/blair101/bigdata-tools/tree/master/bigdata-offline-demo" target="_blank" rel="external">blairâ€™s github bigdata_offline_demo</a></p>
<a id="more"></a>
<h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ul>
<li>æä¾›ä¸€äº› best practice</li>
<li>æé«˜å„æ¨¡å—ç»“æ„åŠä»£ç çš„ä¸€è‡´æ€§</li>
<li>é™ä½å¼€å‘æ–°æ¨¡å—çš„æˆæœ¬</li>
<li>ä¾¿äºç¦»çº¿å¤§æ•°æ®åˆ†æ</li>
<li>å½“ç„¶å®ƒä¹Ÿé€‚ç”¨äºå¯¹ä»»ä½•ç¦»çº¿Jobè¿›è¡Œè°ƒåº¦</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¿™æ˜¯ä¸€ä¸ª hive é…åˆ shell ç­‰å…¶ä»–è¯­è¨€å†™æˆçš„çµæ´»è°ƒåº¦æ¡†æ¶.</span><br><span class="line">   è¯¥ç¤ºä¾‹æ¨¡å—æ¶ é€‚ç”¨äºç¦»çº¿åˆ†æï¼Œç‰¹åˆ«æ˜¯æ¯å¤©è·‘çš„crontabä»»åŠ¡ï¼Œæˆ–è€…æ˜¯æ¯å‘¨ã€æ¯æœˆè·‘çš„ä»»åŠ¡</span><br></pre></td></tr></table></figure>
<h2 id="1-ä»£ç è§„èŒƒ"><a href="#1-ä»£ç è§„èŒƒ" class="headerlink" title="1. ä»£ç è§„èŒƒ"></a>1. ä»£ç è§„èŒƒ</h2><ul>
<li>å¯¹ Hive è¡¨çš„æ“ä½œï¼Œå¦‚åŸºæœ¬SQLä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œåˆ™å»ºè®®ä¼˜å…ˆé‡‡ç”¨ Java UDF/UDAF çš„æ–¹å¼</li>
<li>é Hive æ“ä½œ, æ¨èä¼˜å…ˆé‡‡ç”¨pythonç‰ˆ streaming æ–¹å¼æˆ–è€…Javaè¯­è¨€å®ç°æ–¹å¼</li>
<li>æ¯ä¸ªæ¨¡å—å»ºè®®ç»™å‡ºå‡†ç¡®çš„è¾“å…¥ã€è¾“å‡ºæ ¼å¼å®šä¹‰æ³¨é‡Šè¯´æ˜.</li>
</ul>
<h2 id="2-ç»“æ„è§„èŒƒ"><a href="#2-ç»“æ„è§„èŒƒ" class="headerlink" title="2. ç»“æ„è§„èŒƒ"></a>2. ç»“æ„è§„èŒƒ</h2><h3 id="2-1-æ¨¡å—ç›®å½•"><a href="#2-1-æ¨¡å—ç›®å½•" class="headerlink" title="2.1 æ¨¡å—ç›®å½•"></a>2.1 æ¨¡å—ç›®å½•</h3><ul>
<li>æ¯ä¸ªæ¨¡å—ä¸ºä¸€ä¸ªç›®å½•ï¼Œæ¨¡å—å ä¸€èˆ¬ä¸å…¶ä¸­ ä¸»ä»£ç ç›®å½• åç§°ä¸€è‡´</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ~/ghome/xgitlab/group-data/bigdata-offline-demo [master âœ— (0cdd403)] [14:43:10]</span></span><br><span class="line">âœ ll</span><br><span class="line">total 40</span><br><span class="line">-rw-r--r--   1 blair  staff   106B Dec 15 14:12 LICENSE</span><br><span class="line">-rw-r--r--@  1 blair  staff   4.9K Dec 15 14:43 README.md</span><br><span class="line">drwxr-xr-x  10 blair  staff   320B Dec 15 14:02 bigdata-offline-demo</span><br><span class="line">drwxr-xr-x   4 blair  staff   128B Dec 15 14:11 docs</span><br></pre></td></tr></table></figure>
<p><strong>ç›®å½•åŠŸèƒ½è¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">åç§°</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">bigdata-offline-demo</td>
<td style="text-align:center">ä¸»ä»£ç ç›®å½• åç§°</td>
</tr>
<tr>
<td style="text-align:center">README.md</td>
<td style="text-align:center">ä¸»è¦è¯´æ˜</td>
</tr>
<tr>
<td style="text-align:center">LICENSE</td>
<td style="text-align:center">è®¸å¯è¯´æ˜</td>
</tr>
<tr>
<td style="text-align:center">docs</td>
<td style="text-align:center">è¯¦ç»†æ–‡æ¡£</td>
</tr>
</tbody>
</table>
<h3 id="2-2-ä¸»ä»£ç ç›®å½•"><a href="#2-2-ä¸»ä»£ç ç›®å½•" class="headerlink" title="2.2 ä¸»ä»£ç ç›®å½•"></a>2.2 ä¸»ä»£ç ç›®å½•</h3><blockquote>
<p><strong>bigdata-offline-demo/bigdata-offline-demo/</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ~/ghome/xgitlab/group-data/bigdata-offline-demo/bigdata-offline-demo [master âœ— (0cdd403)] [14:44:28]</span></span><br><span class="line">drwxr-xr-x   5 blair  staff   160B Dec 15 14:02 alert</span><br><span class="line">drwxr-xr-x   6 blair  staff   192B Dec 15 14:02 conf</span><br><span class="line">drwxr-xr-x   3 blair  staff    96B Dec 15 14:02 create_table</span><br><span class="line">drwxr-xr-x   3 blair  staff    96B Dec 15 14:08 crontab_job</span><br><span class="line">drwxr-xr-x   3 blair  staff    96B Dec 15 14:02 flag</span><br><span class="line">drwxr-xr-x  40 blair  staff   1.3K Dec 15 14:02 <span class="built_in">log</span></span><br><span class="line">drwxr-xr-x   3 blair  staff    96B Dec 15 14:08 script</span><br><span class="line">drwxr-xr-x   8 blair  staff   256B Dec 15 14:04 util</span><br></pre></td></tr></table></figure>
<p><strong>ä¸»ä»£ç ç›®å½•åŠŸèƒ½è¯´æ˜</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">ç›®å½•</th>
<th style="text-align:left">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">â”€â”€ alert</td>
<td style="text-align:left">æŠ¥è­¦å°è£…</td>
</tr>
<tr>
<td style="text-align:left">â”€â”€ conf</td>
<td style="text-align:left">é…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td style="text-align:left">â”€â”€create_table</td>
<td style="text-align:left">å»ºè¡¨è„šæœ¬</td>
</tr>
<tr>
<td style="text-align:left">â”€â”€ crontab_job</td>
<td style="text-align:left">crontab ä»»åŠ¡è„šæœ¬ã€‚(crontabä»»åŠ¡è„šæœ¬ä»¥crontab_jobä¸ºå‰ç¼€, æ£€æµ‹ä»»åŠ¡ä¾èµ–å…³ç³», è°ƒç”¨ä¸»é€»è¾‘è„šæœ¬ç­‰)</td>
</tr>
<tr>
<td style="text-align:left">â”€â”€ flag</td>
<td style="text-align:left">æ ‡è®°æ–‡ä»¶ã€‚(æ ‡å¿—è¯¥æ¨¡å—å·²ç»å¼€å§‹è¿è¡Œï¼Œæˆ–è€…è¿è¡Œå®Œæ¯•)</td>
</tr>
<tr>
<td style="text-align:left">â”€â”€ log</td>
<td style="text-align:left">æ—¥å¿—æ–‡ä»¶ã€‚ (å¦‚è„šæœ¬å¤±è´¥å¯æ ¹æ®logè¿½æŸ¥å®šä½å¤±è´¥åŸå› )</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">â”€â”€ script</td>
<td style="text-align:left">ä¸»è„šæœ¬æ–‡ä»¶</td>
<td></td>
</tr>
<tr>
<td style="text-align:left">â”€â”€ util</td>
<td style="text-align:left">å·¥å…·è„šæœ¬ã€‚(ä¸»è¦åŒ…å«å†™logè„šæœ¬, hadoop file / local file / hive check ç­‰å°è£…, åˆå§‹åŒ–ç¯å¢ƒç›®å½•ç­‰)</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">â”€â”€ jar</td>
<td style="text-align:left">jaråŒ… (å¦‚æ— åˆ™ä¸éœ€è¦å»ºç«‹)</td>
</tr>
<tr>
<td style="text-align:left">â”€â”€ java</td>
<td style="text-align:left">java (udf udaf) æºä»£ç ã€‚ (å¦‚æ— åˆ™ä¸éœ€è¦å»ºç«‹)</td>
</tr>
</tbody>
</table>
<ul>
<li>scriptç›®å½• ä¸»è¦å­˜æ”¾ shell è„šæœ¬ï¼Œæœ‰éœ€è¦ä¹Ÿå­˜æ”¾ python è„šæœ¬ã€‚</li>
<li>java ä»£ç éœ€è¦æ”¾å…¥ javaç›®å½• </li>
<li><p>å¦‚æœè¯¥æ¨¡å—ï¼Œscriptç›®å½•è„šæœ¬è¾ƒå¤šï¼Œô°€å¯ä»¥åœ¨ script dirä¹‹ä¸‹å»ºç«‹å­ç›®å½•ô°€å¦‚ô°‚ :</p>
<pre><code>â”œâ”€â”€ script
  â”œâ”€â”€ sub_module_1 å­æ¨¡å—ç›®å½• 
  â”œâ”€â”€ sub_module_2 å­æ¨¡å—ç›®å½•
</code></pre></li>
</ul>
<h3 id="2-2-é¡¹ç›®æ¨¡æ¿"><a href="#2-2-é¡¹ç›®æ¨¡æ¿" class="headerlink" title="2.2 é¡¹ç›®æ¨¡æ¿"></a>2.2 é¡¹ç›®æ¨¡æ¿</h3><ul>
<li>æä¾›å…¬å…±çš„é¡¹ç›®æ¨¡æ¿. ô°€ç»Ÿä¸€shellè„šæœ¬ä»£ç ô°„ç»“æ„ô°„ æ—¥å¿—ô°„é…ç½®è§„èŒƒô° ç­‰</li>
<li><p>é¡¹ç›®æ¨¡æ¿å¯ä»¿ç…§æœ¬æ¨¡å—ô°‚ : </p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://gitlab.***/data/bigdata-offline-demo.git</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>1). å˜é‡å‘½åô°‚</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è‡ªæœ‰å˜é‡é‡‡ç”¨å°å†™ô°€. exportå‡ºçš„ç¯å¢ƒå˜é‡é‡‡ç”¨å¤§å†™ô°</span><br><span class="line">  hive è¡¨å‘½å : </span><br><span class="line">   1. åŸå§‹æ•°æ®è¡¨ï¼Œæ•°æ®æŒ–æ˜å›¢é˜Ÿå»ºç«‹çš„ åˆ™ é‡‡ç”¨å‘½åæ–¹å¼ä¸º ods_dm (original data stream, data_mining)å¼€å¤´</span><br><span class="line">   2. éåŸå§‹æ•°æ®è¡¨ æ•°æ®æŒ–æ˜å›¢é˜Ÿå»ºç«‹çš„ åˆ™ é‡‡ç”¨å‘½åæ–¹å¼ä¸º mds_dm (modified data stream , data_mining)å¼€å¤´</span><br><span class="line">   3. ä¸´æ—¶æ•°æ®è¡¨ æ•°æ®æŒ–æ˜å›¢é˜Ÿå»ºç«‹çš„ åˆ™ é‡‡ç”¨å‘½åæ–¹å¼ä¸º tmp_dm (temp data stream , data_mining)å¼€å¤´</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>2). é…ç½®æ–‡ä»¶ (confç›®å½•ä¸‹)</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">default.confô°‚ é…ç½®å…¬å…±å‚æ•°ô°‚ç¨‹åºè·¯å¾„ô°„hadoop ç”¨æˆ·ç­‰ô°</span><br><span class="line">vars.conf    é…ç½®ä»»åŠ¡å‚æ•°ô°‚ hiveè¡¨åô°„å‚æ•°è®¾ç½®, ä»¥åŠå…¶ä»–å˜é‡ç­‰ô°</span><br><span class="line">alert.confô°‚   é…ç½®é‚®ä»¶æŠ¥è­¦æ¥æ”¶äººô°</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>3). è¾“å…¥è¾“å‡º</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. å¦‚æœå­˜åœ¨è¾“å…¥æºå¤šç§æ•°æ®æ ¼å¼(rcfile+lzo+textfile)çš„æƒ…å†µô°€æ¨èé‡‡ç”¨ç”Ÿæˆä¸´æ—¶çš„ç»Ÿä¸€æ ¼å¼çš„æ•°æ®è¡¨çš„æ–¹å¼å¤„ç†ô° </span><br><span class="line">2. hive è¡¨ è¾“å‡ºåŸåˆ™ä¸Šå‡é‡‡ç”¨rcfileæ ¼å¼ô°ã€‚</span><br><span class="line">      (å½“ç„¶ç°åœ¨å­˜å‚¨ä¾¿å®œï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™ä¸ºäº†æ“ä½œæ–¹ä¾¿ï¼Œä¹Ÿå¯é‡‡ç”¨textæ ¼å¼å­˜å‚¨ï¼Œä½†ä»ç„¶æ¨èodså±‚é¢è¡¨ç»Ÿä¸€ä¸ºrcfileæ ¼å¼)</span><br><span class="line">3. éhiveè¡¨ è¾“å‡ºé‡‡ç”¨rcfileæˆ–è€…lzoæ ¼å¼å‡å¯ô°</span><br></pre></td></tr></table></figure>
</li>
<li><p>4). hive å»ºè¡¨ç¤ºä¾‹.</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">table_name=<span class="string">"<span class="variable">$&#123;table_ods_e_coupon&#125;</span>"</span></span><br><span class="line">hql=<span class="string">"create external table if not exists <span class="variable">$&#123;table_name&#125;</span></span><br><span class="line">(</span><br><span class="line">    id bigint COMMENT 'åºå·',</span><br><span class="line">    mobile_number varchar(16) COMMENT 'é¢†å–ç”µå­åˆ¸çš„æ‰‹æœºå·',</span><br><span class="line">    coupon_order_number varchar(32) COMMENT 'è´­ä¹°ç”µå­åˆ¸æ—¶çš„è®¢å•ç¼–å·',</span><br><span class="line">    dt string</span><br><span class="line">) COMMENT 'å®é™…ç”µå­åˆ¸'</span><br><span class="line">row format delimited fields terminated by '\001' collection items terminated by ',' map keys terminated by ':' lines terminated by '\n'</span><br><span class="line">stored as rcfile</span><br><span class="line">location '<span class="variable">$&#123;OSS_URL&#125;</span>/<span class="variable">$&#123;ods_hive_dir&#125;</span>/<span class="variable">$&#123;table_name&#125;</span>';</span><br><span class="line">"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$hql</span>"</span></span><br><span class="line"><span class="variable">$&#123;HIVE&#125;</span> <span class="_">-e</span> <span class="string">"<span class="variable">$hql</span>"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>  è¯´æ˜</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. æ¨èç™¾ä¸‡çº§ä»¥ä¸Šè®°å½•çš„ hive è¡¨å»ºç«‹æ—¶æŒ‡å®šåˆ†åŒºï¼Œä¸€èˆ¬string dt=yyyy-mm-dd  </span><br><span class="line">2. æ•°æ®é‡ä¸å¤§ï¼Œåˆä¸æ˜¯æŒ‰ç…§å¤©å¢åŠ å¾ˆå¤šæ•°æ®é‡çš„è¡¨ï¼Œåˆ™ä¸éœ€è¦æŒ‡å®šåˆ†åŒº   </span><br><span class="line">3. åˆ†åŒº string dt ä¸€èˆ¬å»ºè®®ä¸º yyyy-MM-dd æ ¼å¼  (dt å–è‡ª : date, é»˜è®¤æ„æ€ä¸ºæ•°æ®äº§ç”Ÿæ—¥æœŸ)</span><br><span class="line">4. hive å»ºè¡¨æ—¶æŒ‡å®šæ ¼å¼ï¼Œåˆ—ä¸åˆ—ä¹‹é—´åˆ†éš”ç¬¦</span><br><span class="line">5. $&#123;hive_dir&#125;, mds è¡¨ä¸º bucket_name/data_mining/dm/mds/ </span><br><span class="line">                  ods è¡¨ä¸º bucket_name/data_mining/dm/ods/</span><br><span class="line">                          bucketåç§° + éƒ¨é—¨æˆ–å¤§é¡¹ç›®ç»„åç§° + å›¢é˜Ÿåç§° + å±‚çº§</span><br></pre></td></tr></table></figure>
<ul>
<li><p>5). æŠ¥è­¦è§„èŒƒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">check_success ä¸ºå°è£…å¥½çš„ï¼Œæ£€æµ‹ä¸Šä¸€æ¡è¯­å¥æ‰§è¡Œæ‰§è¡ŒæˆåŠŸï¼Œåè‡ªåŠ¨å‘æŠ¥è­¦çš„å‡½æ•°ã€‚</span><br><span class="line">(å‘æŠ¥è­¦é‚®ä»¶æ ‡é¢˜ä»¥ æ¨¡å—å--ä»»åŠ¡è„šæœ¬è·¯å¾„å--ä»»åŠ¡çŠ¶æ€åŠåŸå› -æ—¥æœŸ æ¥è®¾ç½®ã€‚ä¾¿äºå¿«é€Ÿå®šä½é—®é¢˜)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-å¼€å‘æµç¨‹"><a href="#3-å¼€å‘æµç¨‹" class="headerlink" title="3. å¼€å‘æµç¨‹"></a>3. å¼€å‘æµç¨‹</h2><h3 id="3-1-æ‹·è´æ¨¡å—-demo"><a href="#3-1-æ‹·è´æ¨¡å—-demo" class="headerlink" title="3.1 æ‹·è´æ¨¡å— demo"></a>3.1 æ‹·è´æ¨¡å— demo</h3><ul>
<li>copy æœ¬æ¨¡å—ï¼Œå¹¶é‡å‘½åæ¨¡å—å</li>
</ul>
<h3 id="3-2-ä¿®æ”¹é…ç½®-conf"><a href="#3-2-ä¿®æ”¹é…ç½®-conf" class="headerlink" title="3.2 ä¿®æ”¹é…ç½® conf"></a>3.2 ä¿®æ”¹é…ç½® conf</h3><ul>
<li>ä¿®æ”¹ conf/default.conf ä¸­ç”¨ä¸åˆ°çš„ rds ç›¸å…³å˜é‡</li>
<li>ä¿®æ”¹ conf/vars.conf ä¸­ç›¸å…³å˜é‡</li>
</ul>
<h3 id="3-3-å»ºè¡¨è¯­å¥"><a href="#3-3-å»ºè¡¨è¯­å¥" class="headerlink" title="3.3 å»ºè¡¨è¯­å¥"></a>3.3 å»ºè¡¨è¯­å¥</h3><p>æ ¹æ® create_table/create_table_e_coupon.sh æ ·ä¾‹å»ºè¡¨è„šæœ¬ï¼Œç¼–å†™å±äºä½ è‡ªå·±çš„å»ºè¡¨è„šæœ¬ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[data_mining@emr-gw bigdata-offline-demo]$ ll create_table/</span><br><span class="line">total 8</span><br><span class="line">-rwxr-xr-x 1 data_mining hadoop 7946 Dec 13 14:30 create_table_e_coupon.sh</span><br></pre></td></tr></table></figure>
<h3 id="3-4-ä¸»è„šæœ¬"><a href="#3-4-ä¸»è„šæœ¬" class="headerlink" title="3.4 ä¸»è„šæœ¬"></a>3.4 ä¸»è„šæœ¬</h3><ul>
<li>ç¼–å†™ script ä¸‹ä½ çš„ä¸»è„šæœ¬</li>
<li>æ ¹æ® script/ods_dm_e_coupon.sh æ ·ä¾‹è„šæœ¬ï¼Œç¼–å†™å±äºä½ è‡ªå·±çš„ä¸»è„šæœ¬ </li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[data_mining@emr-gw bigdata-offline-demo]$ ll script/</span><br><span class="line">total 144</span><br><span class="line">-rwxr-xr-x 1 data_mining hadoop   2753 Dec 15 16:58 ods_dm_e_coupon.sh</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸ç”¨æ‹‰å–æ•°æ®çš„ï¼Œåˆ™ä¸éœ€è¦è„šæœ¬å¼€å¤´çš„ source ${util_dir}/my_functions è¿™å¥ä»£ç ã€‚</p>
</blockquote>
<h3 id="3-5-è°ƒåº¦è„šæœ¬"><a href="#3-5-è°ƒåº¦è„šæœ¬" class="headerlink" title="3.5 è°ƒåº¦è„šæœ¬"></a>3.5 è°ƒåº¦è„šæœ¬</h3><ul>
<li>ç¼–å†™ crontab_job ä¸‹ä½ çš„è°ƒåº¦è„šæœ¬</li>
<li>ä»¿ç…§ crontab_job_ods_e_coupon.sh ç¼–å†™ä½ ä¸»è„šæœ¬å¯¹åº”çš„ è°ƒåº¦è„šæœ¬</li>
</ul>
<h3 id="3-6-å®šæ—¶ä»»åŠ¡"><a href="#3-6-å®šæ—¶ä»»åŠ¡" class="headerlink" title="3.6 å®šæ—¶ä»»åŠ¡"></a>3.6 å®šæ—¶ä»»åŠ¡</h3><p>åœ¨ linux crontab ä¸­ï¼Œå¢åŠ éœ€è¦å®šæ—¶å¯åŠ¨çš„ä½ çš„è°ƒåº¦è„šæœ¬ crontab_job_your_script.sh</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[data_mining@emr-gw online]$ crontab -l</span><br><span class="line">10 02 * * * source /etc/bashrc; sh /home/data_mining/hero/online/bigdata-offline-demo/bigdata-offline-demo/crontab_job/crontab_job_ods_e_coupon.sh</span><br></pre></td></tr></table></figure>
<p>æ³¨ : å¦‚æœ‰å…¶ä»–é—®é¢˜ï¼Œå†å•†è®®</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://github.com/blair101/bigdata-tools/tree/master/bigdata-offline-demo" target="_blank" rel="external">blairâ€™s github bigdata_offline_demo</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Machine Learning p4 - Build Recommendation System]]></title>
      <url>http://shopee.ai/2016/11/23/spark/spark-machine-learning-p4-rs/</url>
      <content type="html"><![CDATA[<p>Spark build Recommendation System, æ¨èå¼•æ“è¯•å›¾å¯¹ç”¨æˆ·ä¸æŸç±»ç‰©å“ä¹‹é—´çš„è”ç³»å»ºæ¨¡</p>
<a id="more"></a>
<ul>
<li>æ¨èå¼•æ“çš„ç±»å‹ï¼›</li>
<li>ç”¨ç”¨æˆ·åå¥½æ•°æ®æ¥å»ºç«‹ä¸€ä¸ªæ¨èæ¨¡å‹ï¼›</li>
<li>ä¸ºç”¨æˆ·è¿›è¡Œæ¨èå’Œæ±‚æŒ‡å®šç‰©å“çš„ç±»ä¼¼ç‰©å“ï¼›</li>
<li>è¯„ä¼°è¯¥æ¨¡å‹çš„é¢„æµ‹èƒ½åŠ›ã€‚</li>
</ul>
<h2 id="1-æ¨èæ¨¡å‹åˆ†ç±»"><a href="#1-æ¨èæ¨¡å‹åˆ†ç±»" class="headerlink" title="1. æ¨èæ¨¡å‹åˆ†ç±»"></a>1. æ¨èæ¨¡å‹åˆ†ç±»</h2><ul>
<li>å†…å®¹è¿‡æ»¤</li>
<li>ååŒè¿‡æ»¤</li>
<li>çŸ©é˜µåˆ†è§£</li>
</ul>
<h3 id="1-1-å†…å®¹è¿‡æ»¤-ç±»ä¼¼ç‰©å“"><a href="#1-1-å†…å®¹è¿‡æ»¤-ç±»ä¼¼ç‰©å“" class="headerlink" title="1.1 å†…å®¹è¿‡æ»¤ - (ç±»ä¼¼ç‰©å“)"></a>1.1 å†…å®¹è¿‡æ»¤ - (ç±»ä¼¼ç‰©å“)</h3><p>åˆ©ç”¨ç‰©å“ç›¸ä¼¼åº¦å®šä¹‰ï¼Œæ¥æ±‚å‡ºä¸è¯¥ç‰©å“ç±»ä¼¼çš„ç‰©å“ã€‚</p>
<blockquote>
<p>å¯¹ç”¨æˆ·çš„æ¨èå¯ä»¥æ ¹æ®ç”¨æˆ·çš„å±æ€§æˆ–æè¿°å¾—å‡ºï¼Œä¹‹åå†é€šè¿‡ç›¸åŒçš„ç›¸ä¼¼åº¦å®šä¹‰æ¥ä¸ç‰©å“å±æ€§åšåŒ¹é…ã€‚</p>
</blockquote>
<h3 id="1-2-ååŒè¿‡æ»¤-ä¼°è®¡æœªè§¦"><a href="#1-2-ååŒè¿‡æ»¤-ä¼°è®¡æœªè§¦" class="headerlink" title="1.2 ååŒè¿‡æ»¤ - (ä¼°è®¡æœªè§¦)"></a>1.2 ååŒè¿‡æ»¤ - (ä¼°è®¡æœªè§¦)</h3><p>ååŒè¿‡æ»¤æ˜¯ä¸€ç§åˆ©ç”¨å¤§é‡å·²æœ‰çš„ç”¨æˆ·åå¥½æ¥ä¼°è®¡ç”¨æˆ·å¯¹å…¶<code>æœªæ¥è§¦è¿‡</code>çš„ç‰©å“çš„å–œå¥½ç¨‹åº¦ã€‚å…¶å†…åœ¨æ€æƒ³æ˜¯<strong>ç›¸ä¼¼åº¦çš„å®šä¹‰</strong>ã€‚</p>
<ul>
<li><p>åŸºäºç”¨æˆ·</p>
<blockquote>
<p>å¦‚æœä¸¤ä¸ªç”¨æˆ·è¡¨ç°å‡ºç›¸ä¼¼çš„åå¥½ï¼Œè®¤ä¸ºä»–ä»¬çš„å…´è¶£ç±»ä¼¼ã€‚è¦å¯¹ä»–ä»¬ä¸­çš„ä¸€ä¸ªç”¨æˆ·æ¨èä¸€ä¸ªæœªçŸ¥ç‰©å“ï¼Œä¾¿å¯é€‰å–è‹¥å¹²ä¸å…¶ç±»ä¼¼çš„ç”¨æˆ·å¹¶æ ¹æ®ä»–ä»¬çš„å–œå¥½è®¡ç®—å‡ºå¯¹å„ä¸ªç‰©å“çš„ç»¼åˆå¾—åˆ†ã€‚</p>
</blockquote>
</li>
<li><p>åŸºäºç‰©å“</p>
<blockquote>
<p>æ®ç°æœ‰ç”¨æˆ·å¯¹ç‰©å“çš„åå¥½æˆ–æ˜¯è¯„çº§æƒ…å†µï¼Œæ¥è®¡ç®—ç‰©å“ä¹‹é—´çš„æŸç§ç›¸ä¼¼åº¦ã€‚å·²æœ‰ç‰©å“ç›¸ä¼¼çš„ç‰©å“è¢«ç”¨æ¥ç”Ÿæˆä¸€ä¸ªç»¼åˆå¾—åˆ†ï¼Œè€Œè¯¥å¾—åˆ†ç”¨äºè¯„ä¼°æœªçŸ¥ç‰©å“çš„ç›¸ä¼¼åº¦ã€‚</p>
</blockquote>
</li>
</ul>
<p>åŸºäº<strong>ç”¨æˆ·</strong>æˆ–<strong>ç‰©å“</strong>çš„æ–¹æ³•å¾—åˆ†å–å†³äºè‹¥å¹²ç”¨æˆ·æˆ–æ˜¯ç‰©å“ä¹‹é—´ä¾æ®ç›¸ä¼¼åº¦æ‰€æ„æˆçš„é›†åˆï¼ˆå³é‚»å±…ï¼‰ï¼Œæ•…å®ƒä»¬ä¹Ÿå¸¸è¢«ç§°ä¸ºKNNã€‚</p>
<p>å¯¹â€œç”¨æˆ·-ç‰©å“â€<code>åå¥½å»ºæ¨¡</code></p>
<h3 id="1-3-çŸ©é˜µåˆ†è§£"><a href="#1-3-çŸ©é˜µåˆ†è§£" class="headerlink" title="1.3 çŸ©é˜µåˆ†è§£"></a>1.3 çŸ©é˜µåˆ†è§£</h3><p>Sparkæ¨èæ¨¡å‹åº“ åŒ…å«åŸºäºçŸ©é˜µåˆ†è§£ï¼ˆmatrix factorizationï¼‰çš„å®ç°ï¼Œè¯¥æ¨¡å‹åœ¨ååŒè¿‡æ»¤ä¸­çš„è¡¨ç°ååˆ†å‡ºè‰²ã€‚</p>
<h4 id="1-3-1-æ˜¾å¼çŸ©é˜µåˆ†è§£"><a href="#1-3-1-æ˜¾å¼çŸ©é˜µåˆ†è§£" class="headerlink" title="1.3.1 æ˜¾å¼çŸ©é˜µåˆ†è§£"></a>1.3.1 æ˜¾å¼çŸ©é˜µåˆ†è§£</h4><p>æ˜¾å¼è‡ªèº«åå¥½æ•°æ®</p>
<blockquote>
<p>è¿™ç±»æ•°æ®åŒ…æ‹¬å¦‚ç‰©å“è¯„çº§ã€èµã€å–œæ¬¢ç­‰ç”¨æˆ·å¯¹ç‰©å“çš„è¯„ä»·ã€‚è½¬æ¢ä¸ºä»¥ç”¨æˆ·ä¸ºè¡Œã€ç‰©å“ä¸ºåˆ—çš„äºŒç»´çŸ©é˜µã€‚</p>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹å•ä¸ªç”¨æˆ·åªä¼šå’Œå°‘éƒ¨åˆ†ç‰©å“æ¥è§¦ï¼Œæ‰€ä»¥è¯¥çŸ©é˜µå¾ˆç¨€ç–ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Tom, Star Wars, 5</span><br><span class="line">Jane, Titanic,ã€€4</span><br><span class="line">Bill, Batman,ã€€3</span><br><span class="line">Jane, Star Wars, 2</span><br><span class="line">Bill, Titanic, 3</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-4.1.png" alt="ä¸€ä¸ªç®€å•çš„ç”µå½±è¯„çº§çŸ©é˜µ"></p>
<p>ç”¨æˆ·-ç‰©å“ çŸ©é˜µçš„ç»´åº¦ä¸º U Ã— I</p>
<p><img src="/images/spark/spark-ml-4.2.jpg" alt="å›¾4-2 ä¸€ä¸ªç¨€ç–çš„è¯„çº§çŸ©é˜µ"> </p>
<p><strong>ä¸ºäº†é™ç»´</strong></p>
<ul>
<li>è¡¨ç¤ºç”¨æˆ·çš„ U Ã— k ç»´çŸ©é˜µ</li>
<li>è¡¨å¾ç‰©å“çš„ I Ã— k ç»´çŸ©é˜µ</li>
</ul>
<blockquote>
<p>è¿™ä¸¤ä¸ªçŸ©é˜µä¹Ÿç§°ä½œå› å­çŸ©é˜µ, ä¹˜ç§¯æ˜¯åŸå§‹è¯„çº§çŸ©é˜µçš„ä¸€ä¸ªè¿‘ä¼¼.</p>
<p>åŸå§‹è¯„çº§çŸ©é˜µé€šå¸¸å¾ˆç¨€ç–ï¼Œä½†å› å­çŸ©é˜µå´æ˜¯ç¨ å¯†çš„</p>
</blockquote>
<p><img src="/images/spark/spark-ml-4.3.jpg" alt="å›¾4-3 ç”¨æˆ·å› å­çŸ©é˜µå’Œç‰©å“å› å­çŸ©é˜µ"></p>
<blockquote>
<p>å› å­å¯èƒ½è¡¨ç¤ºäº†æŸäº›å«ä¹‰ï¼Œæ¯”å¦‚å¯¹ç”µå½±çš„æŸä¸ªå¯¼æ¼”ã€ç§ç±»ã€é£æ ¼æˆ–æŸäº›æ¼”å‘˜çš„åå¥½ã€‚</p>
</blockquote>
<p><code>è¦è®¡ç®—ç»™å®šç”¨æˆ·å¯¹æŸä¸ªç‰©å“çš„é¢„è®¡è¯„çº§</code> = è¡Œï¼ˆç”¨æˆ·å› å­å‘é‡ï¼‰ ä¸ åˆ—ï¼ˆç‰©å“å› å­å‘é‡ï¼‰ï¼Œä¸¤è€…ç‚¹ç§¯</p>
<p><img src="/images/spark/spark-ml-4.4.jpg" alt="å›¾4-4 ç”¨ç”¨æˆ·å› å­çŸ©é˜µå’Œç‰©å“å› å­çŸ©é˜µè®¡ç®—æ¨è"></p>
<blockquote>
<p>ç‰©å“ä¹‹é—´ç›¸ä¼¼åº¦çš„è®¡ç®—ï¼Œè½¬æ¢ä¸ºå¯¹ä¸¤ç‰©å“å› å­å‘é‡ä¹‹é—´ç›¸ä¼¼åº¦çš„è®¡ç®—</p>
</blockquote>
<p><img src="/images/spark/spark-ml-4.5.jpg" alt="å›¾4-5 ç”¨ç‰©å“å› å­çŸ©é˜µè®¡ç®—ç›¸ä¼¼åº¦"></p>
<table>
<thead>
<tr>
<th>ä¼˜ç‚¹</th>
<th>ç¼ºç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>å› å­åˆ†è§£ç±»æ¨¡å‹å»ºç«‹ï¼Œæ±‚è§£å®¹æ˜“</td>
<td>ç‰©å“æˆ–æ˜¯ç”¨æˆ·çš„å› å­å‘é‡å¯èƒ½è¾¾åˆ°æ•°ä»¥ç™¾ä¸‡è®¡ã€‚åœ¨å­˜å‚¨å’Œè®¡ç®—èƒ½åŠ›æœ‰æŒ‘æˆ˜ã€‚</td>
</tr>
</tbody>
</table>
<h4 id="1-3-2-éšå¼çŸ©é˜µåˆ†è§£"><a href="#1-3-2-éšå¼çŸ©é˜µåˆ†è§£" class="headerlink" title="1.3.2. éšå¼çŸ©é˜µåˆ†è§£"></a>1.3.2. éšå¼çŸ©é˜µåˆ†è§£</h4><p>éšå«åœ¨ç”¨æˆ·ä¸ç‰©å“çš„äº¤äº’ä¹‹ä¸­ã€‚äºŒå…ƒæ•°æ®ï¼ˆæ¯”å¦‚ç”¨æˆ·æ˜¯å¦è§‚çœ‹äº†æŸä¸ªç”µå½±æˆ–æ˜¯å¦è´­ä¹°äº†æŸä¸ªå•†å“ï¼‰å’Œè®¡æ•°æ•°æ®ï¼ˆæ¯”å¦‚ç”¨æˆ·è§‚çœ‹æŸç”µå½±çš„æ¬¡æ•°ï¼‰ä¾¿æ˜¯è¿™ç±»æ•°æ®ã€‚</p>
<p>MLlib å¤„ç†éšå¼æ•°æ®ï¼š</p>
<ol>
<li>ä¸€ä¸ªäºŒå…ƒåå¥½çŸ©é˜µ P </li>
<li>ä¸€ä¸ªä¿¡å¿ƒæƒé‡çŸ©é˜µ C</li>
</ol>
<p><img src="/images/spark/spark-ml-4.6.png" alt="å›¾4-6 ç”¨ç‰©å“å› å­çŸ©é˜µè®¡ç®—ç›¸ä¼¼åº¦"></p>
<p>éšå¼æ¨¡å‹ä»ç„¶ä¼šåˆ›å»ºä¸€ä¸ªç”¨æˆ·å› å­çŸ©é˜µå’Œä¸€ä¸ªç‰©å“å› å­çŸ©é˜µã€‚ä½†æ˜¯ï¼Œæ¨¡å‹æ‰€æ±‚è§£çš„æ˜¯åå¥½çŸ©é˜µè€Œéè¯„çº§çŸ©é˜µçš„è¿‘ä¼¼ã€‚</p>
<p><strong>3. æœ€å°äºŒä¹˜æ³•</strong></p>
<p>æœ€å°äºŒä¹˜æ³•ï¼ˆAlternating Least Squaresï¼ŒALSï¼‰æ˜¯ä¸€ç§æ±‚è§£çŸ©é˜µåˆ†è§£é—®é¢˜çš„æœ€ä¼˜åŒ–æ–¹æ³•ã€‚ä¸”ç›¸å¯¹å®¹æ˜“å¹¶è¡ŒåŒ–ã€‚</p>
<blockquote>
<p>ALSçš„å®ç°åŸç†æ˜¯è¿­ä»£å¼æ±‚è§£ä¸€ç³»åˆ—æœ€å°äºŒä¹˜å›å½’é—®é¢˜ã€‚åœ¨æ¯ä¸€æ¬¡è¿­ä»£æ—¶ï¼Œå›ºå®šç”¨æˆ·å› å­çŸ©é˜µæˆ–æ˜¯ç‰©å“å› å­çŸ©é˜µä¸­çš„ä¸€ä¸ªï¼Œç„¶åç”¨å›ºå®šçš„è¿™ä¸ªçŸ©é˜µä»¥åŠè¯„çº§æ•°æ®æ¥æ›´æ–°å¦ä¸€ä¸ªçŸ©é˜µã€‚ä¹‹åï¼Œè¢«æ›´æ–°çš„çŸ©é˜µè¢«å›ºå®šä½ï¼Œå†æ›´æ–°å¦å¤–ä¸€ä¸ªçŸ©é˜µã€‚å¦‚æ­¤è¿­ä»£ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ•›ï¼ˆæˆ–æ˜¯è¿­ä»£äº†é¢„è®¾å¥½çš„æ¬¡æ•°ï¼‰ã€‚</p>
</blockquote>
<h2 id="2-æå–æœ‰æ•ˆç‰¹å¾"><a href="#2-æå–æœ‰æ•ˆç‰¹å¾" class="headerlink" title="2. æå–æœ‰æ•ˆç‰¹å¾"></a>2. æå–æœ‰æ•ˆç‰¹å¾</h2><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">&gt;./bin/spark-shell â€“-driver-memory <span class="number">2</span>g</span><br><span class="line"><span class="keyword">val</span> rawData = sc.textFile(<span class="string">"/Users/hp/ghome/github/Recommendation/spark-ml/ml-100k/u.data"</span>)</span><br><span class="line">rawData.first()</span><br><span class="line"><span class="keyword">val</span> rawRatings = rawData.map(_.split(<span class="string">"\t"</span>).take(<span class="number">3</span>))</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.mllib.recommendation.<span class="type">ALS</span></span><br><span class="line"></span><br><span class="line"><span class="type">ALS</span>.</span><br><span class="line">asInstanceOf    isInstanceOf   main   toString        train           trainImplicit</span><br><span class="line"><span class="type">ALS</span>.train</span><br></pre></td></tr></table></figure>
<p>ALSæ¨¡å‹éœ€è¦ä¸€ä¸ªç”±Ratingè®°å½•æ„æˆçš„RDDï¼Œè€ŒRatingç±»åˆ™æ˜¯å¯¹ç”¨æˆ·IDã€å½±ç‰‡IDï¼ˆè¿™é‡Œæ˜¯é€šç§°productï¼‰å’Œå®é™…æ˜Ÿçº§è¿™äº›å‚æ•°çš„å°è£…ã€‚<br>æˆ‘ä»¬å¯ä»¥è°ƒç”¨mapæ–¹æ³•å°†åŸæ¥çš„å„IDå’Œæ˜Ÿçº§çš„æ•°ç»„è½¬æ¢ä¸ºå¯¹åº”çš„Ratingå¯¹è±¡ï¼Œä»è€Œåˆ›å»ºæ‰€éœ€çš„è¯„çº§æ•°æ®é›†ã€‚</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> org.apache.spark.mllib.recommendation.<span class="type">Rating</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.mllib.recommendation.<span class="type">Rating</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> ratings = rawRatings.map &#123; <span class="keyword">case</span> <span class="type">Array</span>(user, movie, rating) =&gt;</span><br><span class="line">     | <span class="type">Rating</span>(user.toInt, movie.toInt, rating.toDouble) &#125;</span><br><span class="line">ratings: org.apache.spark.rdd.<span class="type">RDD</span>[org.apache.spark.mllib.recommendation.<span class="type">Rating</span>] = <span class="type">MapPartitionsRDD</span>[<span class="number">3</span>] at map at &lt;console&gt;:<span class="number">27</span></span><br><span class="line"></span><br><span class="line">scala&gt; ratings.first()</span><br><span class="line">res3: org.apache.spark.mllib.recommendation.<span class="type">Rating</span> = <span class="type">Rating</span>(<span class="number">196</span>,<span class="number">242</span>,<span class="number">3.0</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; ratings.take(<span class="number">10</span>)</span><br><span class="line">res4: <span class="type">Array</span>[org.apache.spark.mllib.recommendation.<span class="type">Rating</span>] = <span class="type">Array</span>(<span class="type">Rating</span>(<span class="number">196</span>,<span class="number">242</span>,<span class="number">3.0</span>), <span class="type">Rating</span>(<span class="number">186</span>,<span class="number">302</span>,<span class="number">3.0</span>), <span class="type">Rating</span>(<span class="number">22</span>,<span class="number">377</span>,<span class="number">1.0</span>), <span class="type">Rating</span>(<span class="number">244</span>,<span class="number">51</span>,<span class="number">2.0</span>), <span class="type">Rating</span>(<span class="number">166</span>,<span class="number">346</span>,<span class="number">1.0</span>), <span class="type">Rating</span>(<span class="number">298</span>,<span class="number">474</span>,<span class="number">4.0</span>), <span class="type">Rating</span>(<span class="number">115</span>,<span class="number">265</span>,<span class="number">2.0</span>), <span class="type">Rating</span>(<span class="number">253</span>,<span class="number">465</span>,<span class="number">5.0</span>), <span class="type">Rating</span>(<span class="number">305</span>,<span class="number">451</span>,<span class="number">3.0</span>), <span class="type">Rating</span>(<span class="number">6</span>,<span class="number">86</span>,<span class="number">3.0</span>))</span><br></pre></td></tr></table></figure>
<h2 id="3-è®­ç»ƒæ¨èæ¨¡å‹"><a href="#3-è®­ç»ƒæ¨èæ¨¡å‹" class="headerlink" title="3. è®­ç»ƒæ¨èæ¨¡å‹"></a>3. è®­ç»ƒæ¨èæ¨¡å‹</h2><p>ä»åŸå§‹æ•°æ®æå–å‡ºè¿™äº›ç®€å•ç‰¹å¾åï¼Œä¾¿å¯è®­ç»ƒæ¨¡å‹ã€‚MLlibå·²å®ç°æ¨¡å‹è®­ç»ƒçš„ç»†èŠ‚ï¼Œè¿™ä¸éœ€è¦æˆ‘ä»¬æ‹…å¿ƒã€‚æˆ‘ä»¬åªéœ€æä¾›ä¸Šè¿°æŒ‡å®šç±»å‹çš„æ–°RDDä»¥åŠå…¶ä»–æ‰€éœ€å‚æ•°æ¥ä½œä¸ºè®­ç»ƒçš„è¾“å…¥å³å¯ã€‚</p>
<h3 id="3-1-Movie-100k-train-model"><a href="#3-1-Movie-100k-train-model" class="headerlink" title="3.1 Movie-100k train model"></a>3.1 Movie-100k train model</h3><p>ç°åœ¨å¼€å§‹è®­ç»ƒæ¨¡å‹äº†ï¼Œæ‰€éœ€çš„å…¶ä»–å‚æ•°æœ‰ä»¥ä¸‹å‡ ä¸ª</p>
<ul>
<li><code>rank</code>ï¼šå¯¹åº”ALSæ¨¡å‹ä¸­çš„å› å­ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯åœ¨ä½é˜¶è¿‘ä¼¼çŸ©é˜µä¸­çš„éšå«ç‰¹å¾ä¸ªæ•°ã€‚å› å­ä¸ªæ•°ä¸€èˆ¬è¶Šå¤šè¶Šå¥½ã€‚ä½†å®ƒä¹Ÿä¼šç›´æ¥å½±å“æ¨¡å‹è®­ç»ƒå’Œä¿å­˜æ—¶æ‰€éœ€çš„å†…å­˜å¼€é”€ï¼Œå°¤å…¶æ˜¯åœ¨ç”¨æˆ·å’Œç‰©å“å¾ˆå¤šçš„æ—¶å€™ã€‚å› æ­¤å®è·µä¸­è¯¥å‚æ•°å¸¸ä½œä¸ºè®­ç»ƒæ•ˆæœä¸ç³»ç»Ÿå¼€é”€ä¹‹é—´çš„è°ƒèŠ‚å‚æ•°ã€‚é€šå¸¸ï¼Œå…¶åˆç†å–å€¼ä¸º10åˆ°200ã€‚</li>
<li><code>iterations</code>ï¼šå¯¹åº”è¿è¡Œæ—¶çš„è¿­ä»£æ¬¡æ•°ã€‚ALSèƒ½ç¡®ä¿æ¯æ¬¡è¿­ä»£éƒ½èƒ½é™ä½è¯„çº§çŸ©é˜µçš„é‡å»ºè¯¯å·®ï¼Œä½†ä¸€èˆ¬ç»å°‘æ•°æ¬¡è¿­ä»£åALSæ¨¡å‹ä¾¿å·²èƒ½æ”¶æ•›ä¸ºä¸€ä¸ªæ¯”è¾ƒåˆç†çš„å¥½æ¨¡å‹ã€‚è¿™æ ·ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ²¡å¿…è¦è¿­ä»£å¤ªå¤šæ¬¡ï¼ˆ10æ¬¡å·¦å³ä¸€èˆ¬å°±æŒºå¥½ï¼‰ã€‚</li>
<li><code>lambda</code>ï¼šè¯¥å‚æ•°æ§åˆ¶æ¨¡å‹çš„æ­£åˆ™åŒ–è¿‡ç¨‹ï¼Œä»è€Œæ§åˆ¶æ¨¡å‹çš„è¿‡æ‹Ÿåˆæƒ…å†µã€‚å…¶å€¼è¶Šé«˜ï¼Œæ­£åˆ™åŒ–è¶Šä¸¥å‰ã€‚è¯¥å‚æ•°çš„èµ‹å€¼ä¸å®é™…æ•°æ®çš„å¤§å°ã€ç‰¹å¾å’Œç¨€ç–ç¨‹åº¦æœ‰å…³ã€‚å’Œå…¶ä»–çš„æœºå™¨å­¦ä¹ æ¨¡å‹ä¸€æ ·ï¼Œæ­£åˆ™å‚æ•°åº”è¯¥é€šè¿‡ç”¨éæ ·æœ¬çš„æµ‹è¯•æ•°æ®è¿›è¡Œäº¤å‰éªŒè¯æ¥è°ƒæ•´ã€‚</li>
</ul>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> model = <span class="type">ALS</span>.train(ratings, <span class="number">50</span>, <span class="number">10</span>, <span class="number">0.01</span>)</span><br><span class="line">model: org.apache.spark.mllib.recommendation.<span class="type">MatrixFactorizationModel</span> = org.apache.spark.mllib.recommendation.<span class="type">MatrixFactorizationModel</span>@<span class="number">2e835760</span></span><br><span class="line"></span><br><span class="line">scala&gt; model.userFeatures</span><br><span class="line">res5: org.apache.spark.rdd.<span class="type">RDD</span>[(<span class="type">Int</span>, <span class="type">Array</span>[<span class="type">Double</span>])] = users <span class="type">MapPartitionsRDD</span>[<span class="number">209</span>] at mapValues at <span class="type">ALS</span>.scala:<span class="number">255</span></span><br><span class="line"></span><br><span class="line">scala&gt; model.userFeatures.count</span><br><span class="line">res6: <span class="type">Long</span> = <span class="number">943</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>MatrixFactorizationModel</code> å¯¹è±¡å°† ç”¨æˆ·å› å­å’Œç‰©å“å› å­åˆ†åˆ«ä¿å­˜åœ¨ä¸€ä¸ª <code>(id,factor)</code> å¯¹ç±»å‹çš„RDDä¸­ã€‚<br>å®ƒä»¬åˆ†åˆ«ç§°ä½œ<code>userFeatures</code> å’Œ <code>productFeatures</code>ã€‚</p>
</blockquote>
<h3 id="3-2-éšå¼åé¦ˆæ•°æ®è®­ç»ƒæ¨¡å‹"><a href="#3-2-éšå¼åé¦ˆæ•°æ®è®­ç»ƒæ¨¡å‹" class="headerlink" title="3.2 éšå¼åé¦ˆæ•°æ®è®­ç»ƒæ¨¡å‹"></a>3.2 éšå¼åé¦ˆæ•°æ®è®­ç»ƒæ¨¡å‹</h3><p>MLlibä¸­æ ‡å‡†çš„çŸ©é˜µåˆ†è§£æ¨¡å‹ç”¨äºæ˜¾å¼è¯„çº§æ•°æ®çš„å¤„ç†ã€‚è‹¥è¦å¤„ç†éšå¼æ•°æ®ï¼Œåˆ™å¯ä½¿ç”¨<code>trainImplicit</code>å‡½æ•°ã€‚å…¶è°ƒç”¨æ–¹å¼å’Œæ ‡å‡†çš„<code>train</code>æ¨¡å¼ç±»ä¼¼ï¼Œä½†å¤šäº†ä¸€ä¸ªå¯è®¾ç½®çš„<code>alpha</code>å‚æ•°ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªæ­£åˆ™åŒ–å‚æ•°ï¼Œ<code>lambda</code>åº”é€šè¿‡æµ‹è¯•å’Œäº¤å‰éªŒè¯æ³•æ¥è®¾ç½®ï¼‰ã€‚</p>
<p>alphaå‚æ•°æŒ‡å®šäº†ä¿¡å¿ƒæƒé‡æ‰€åº”è¾¾åˆ°çš„åŸºå‡†çº¿ã€‚è¯¥å€¼è¶Šé«˜åˆ™æ‰€è®­ç»ƒå‡ºçš„æ¨¡å‹è¶Šè®¤ä¸ºç”¨æˆ·ä¸ä»–æ‰€æ²¡è¯„çº§è¿‡çš„ç”µå½±ä¹‹é—´æ²¡æœ‰ç›¸å…³æ€§ã€‚</p>
<h2 id="4-ä½¿ç”¨æ¨èæ¨¡å‹"><a href="#4-ä½¿ç”¨æ¨èæ¨¡å‹" class="headerlink" title="4. ä½¿ç”¨æ¨èæ¨¡å‹"></a>4. ä½¿ç”¨æ¨èæ¨¡å‹</h2><p>é¢„æµ‹é€šå¸¸æœ‰ä¸¤ç§ï¼šä¸ºæŸä¸ªç”¨æˆ·æ¨èç‰©å“ï¼Œæˆ–æ‰¾å‡ºä¸æŸä¸ªç‰©å“ç›¸å…³æˆ–ç›¸ä¼¼çš„å…¶ä»–ç‰©å“ã€‚</p>
<h3 id="4-1-ç”¨æˆ·æ¨è"><a href="#4-1-ç”¨æˆ·æ¨è" class="headerlink" title="4.1 ç”¨æˆ·æ¨è"></a>4.1 ç”¨æˆ·æ¨è</h3><p>é€šè¿‡æ¨¡å‹æ±‚å‡ºç”¨æˆ·å¯èƒ½å–œå¥½ç¨‹åº¦æœ€é«˜çš„å‰Kä¸ªå•†å“ã€‚</p>
<ol>
<li>åŸºäº<strong>ç”¨æˆ·çš„æ¨¡å‹</strong>ï¼Œåˆ™ä¼šåˆ©ç”¨ç›¸ä¼¼ç”¨æˆ·çš„è¯„çº§æ¥è®¡ç®—å¯¹æŸä¸ªç”¨æˆ·çš„æ¨èã€‚</li>
<li>åŸºäº<strong>ç‰©å“çš„æ¨¡å‹</strong>ï¼Œåˆ™ä¼šä¾é ç”¨æˆ·æ¥è§¦è¿‡çš„ç‰©å“ä¸å€™é€‰ç‰©å“ä¹‹é—´çš„ç›¸ä¼¼åº¦æ¥è·å¾—æ¨èã€‚</li>
</ol>
<p>åˆ©ç”¨çŸ©é˜µåˆ†è§£æ–¹æ³•æ—¶ï¼Œæ˜¯ç›´æ¥å¯¹è¯„çº§æ•°æ®è¿›è¡Œå»ºæ¨¡ï¼Œæ‰€ä»¥é¢„è®¡å¾—åˆ†å¯è§†ä½œç›¸åº”ç”¨æˆ·å› å­å‘é‡å’Œç‰©å“å› å­å‘é‡çš„ç‚¹ç§¯ã€‚</p>
<p><strong>1. ä»MovieLens 100kæ•°æ®é›†ç”Ÿæˆç”µå½±æ¨è</strong></p>
<p>MLlibçš„æ¨èæ¨¡å‹åŸºäºçŸ©é˜µåˆ†è§£ï¼Œå› æ­¤å¯ç”¨æ¨¡å‹æ‰€æ±‚å¾—çš„å› å­çŸ©é˜µæ¥è®¡ç®—ç”¨æˆ·å¯¹ç‰©å“çš„é¢„è®¡è¯„çº§ã€‚ä¸‹é¢åªé’ˆå¯¹åˆ©ç”¨MovieLensä¸­æ˜¾å¼æ•°æ®åšæ¨èçš„æƒ…å½¢ï¼Œä½¿ç”¨éšå¼æ¨¡å‹æ—¶çš„æ–¹æ³•ä¸ä¹‹ç›¸åŒã€‚</p>
<p><code>MatrixFactorizationModel</code>ç±» æä¾›äº†ä¸€ä¸ª<code>predict</code>å‡½æ•°ï¼Œä»¥æ–¹ä¾¿åœ°è®¡ç®—ç»™å®šç”¨æˆ·å¯¹ç»™å®šç‰©å“çš„é¢„æœŸå¾—åˆ†ï¼š</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> predictedRating = model.predict(<span class="number">789</span>, <span class="number">123</span>)</span><br><span class="line"><span class="number">16</span>/<span class="number">05</span>/<span class="number">04</span> <span class="number">16</span>:<span class="number">13</span>:<span class="number">08</span> <span class="type">WARN</span> <span class="type">BLAS</span>: <span class="type">Failed</span> to load implementation from: com.github.fommil.netlib.<span class="type">NativeSystemBLAS</span></span><br><span class="line"><span class="number">16</span>/<span class="number">05</span>/<span class="number">04</span> <span class="number">16</span>:<span class="number">13</span>:<span class="number">08</span> <span class="type">WARN</span> <span class="type">BLAS</span>: <span class="type">Failed</span> to load implementation from: com.github.fommil.netlib.<span class="type">NativeRefBLAS</span></span><br><span class="line">predictedRating: <span class="type">Double</span> = <span class="number">1.8390368814083764</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> predictedRating = model.predict(<span class="number">789</span>, <span class="number">123</span>)</span><br><span class="line">predictedRating: <span class="type">Double</span> = <span class="number">1.8390368814083764</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> userId = <span class="number">789</span></span><br><span class="line">userId: <span class="type">Int</span> = <span class="number">789</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> <span class="type">K</span> = <span class="number">10</span></span><br><span class="line"><span class="type">K</span>: <span class="type">Int</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> topKRecs = model.recommendProducts(userId, <span class="type">K</span>)</span><br><span class="line">topKRecs: <span class="type">Array</span>[org.apache.spark.mllib.recommendation.<span class="type">Rating</span>] = <span class="type">Array</span>(<span class="type">Rating</span>(<span class="number">789</span>,<span class="number">180</span>,<span class="number">5.352418839062572</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">887</span>,<span class="number">5.289455638310055</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">484</span>,<span class="number">5.0301818688410025</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">475</span>,<span class="number">5.011219778604191</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">150</span>,<span class="number">5.003965038415291</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">663</span>,<span class="number">4.991126084946501</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">56</span>,<span class="number">4.974685008959871</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">48</span>,<span class="number">4.965402351329832</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">9</span>,<span class="number">4.963265626841469</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">127</span>,<span class="number">4.963069165947614</span>))</span><br><span class="line"></span><br><span class="line">scala&gt; println(topKRecs.mkString(<span class="string">"\n"</span>))</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">180</span>,<span class="number">5.352418839062572</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">887</span>,<span class="number">5.289455638310055</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">484</span>,<span class="number">5.0301818688410025</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">475</span>,<span class="number">5.011219778604191</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">150</span>,<span class="number">5.003965038415291</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">663</span>,<span class="number">4.991126084946501</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">56</span>,<span class="number">4.974685008959871</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">48</span>,<span class="number">4.965402351329832</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">9</span>,<span class="number">4.963265626841469</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">127</span>,<span class="number">4.963069165947614</span>)</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Travel Note Thai]]></title>
      <url>http://shopee.ai/2016/10/27/tools/health-life-thai/</url>
      <content type="html"><![CDATA[<p>æèµ·æ³°ç‹å›½ï¼Œç»™æˆ‘æœ€æ·±çš„å°è±¡å°±æ˜¯å¯ä»¥è®©æˆ‘æ„Ÿå—åˆ°ï¼Œåˆ°åº•ä»€ä¹ˆæ˜¯ <a href="https://zh.wikipedia.org/wiki/ä¸‰å­—ç»" target="_blank" rel="external">çœŸå–„ç¾</a>ã€‚ <a id="more"></a>çœŸæ˜¯çš„ å¹¸ç¦å›½åº¦ã€å¾®ç¬‘å›½åº¦ï¼Œåä¸è™šä¼ ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œé‚£é‡Œçš„ç™¾å§“æ˜¯å®‰å±…ä¹ä¸šï¼Œéå¸¸å¹¸ç¦ã€‚è´«å¯Œå·®è·ä¸å¤§ï¼Œèµ„æºåˆ†é…ç›¸å¯¹åˆç†ï¼Œå°åŸå¸‚å’Œ<a href="https://zh.wikipedia.org/wiki/äººå†å›§é€”ä¹‹æ³°å›§" target="_blank" rel="external">å¾å³¥ã€Šæ³°å›§ã€‹</a>æ¸…è¿ˆçš„å¤§åŸå¸‚åŸºç¡€è®¾æ–½ç›¸å·®ä¸å¤§ï¼Œæ„Ÿè§‰çœŸçš„éå¸¸ä¸é”™ã€‚æˆ‘è§‰å¾—å»ä»»ä½•ä¸€ä¸ªåœ°æ–¹äººæ–‡ç¯å¢ƒæ‰æ˜¯æœ€é‡è¦çš„ï¼Œå…¶ä»–çš„æ™¯è‰²ã€æ™¯ç‚¹æ˜¯æ¬¡è¦çš„ï¼Œå› ä¸ºæ™®é€šäººéƒ½éœ€è¦å…¥ä¸–ï¼Œéœ€è¦æ²Ÿé€šä¸äº¤æµã€‚</p>
<p>æˆ‘åˆ†åˆ«åœ¨ 15å¹´10æœˆ å’Œ 16å¹´9æœˆ å»æ³°å›½æ—…è¡Œï¼Œåˆ°è¿‡æ›¼è°·ã€å·´èœ€åºœã€åæ¬£ã€æ™®å‰å²› ç­‰åœ°ã€‚éå¸¸æ„Ÿè°¢åœ¨é‚£æ®µå¼‚å›½ä»–ä¹¡çš„æ—¶å…‰é‡Œæ›¾ç»™äºˆæˆ‘å¸®åŠ©çš„æœ‹å‹ã€‚</p>
<p><img src="/images/life/life-thai-01.jpg" width="800" height="550" img=""></p>
<h2 id="æ›¼è°·"><a href="#æ›¼è°·" class="headerlink" title="æ›¼è°·"></a>æ›¼è°·</h2><p>æ›¼è°·ï¼ˆæ³°æ–‡ï¼šà¸à¸£à¸¸à¸‡à¹€à¸—à¸à¸¡à¸«à¸²à¸™à¸„à¸£ï¼›è‹±æ–‡ï¼šBangkokï¼‰ï¼Œæ˜¯æ³°å›½é¦–éƒ½å’Œæœ€å¤§åŸå¸‚ï¼Œä¸œå—äºšç¬¬äºŒå¤§åŸå¸‚ï¼Œä¸ºæ³°å›½æ”¿æ²»ã€ç»æµã€è´¸æ˜“ã€äº¤é€šã€æ–‡åŒ–ã€ç§‘æŠ€ã€æ•™è‚²ã€å®—æ•™ä¸å„æ–¹é¢ä¸­å¿ƒã€‚</p>
<h2 id="èŠ­å ¤é›…"><a href="#èŠ­å ¤é›…" class="headerlink" title="èŠ­å ¤é›…"></a>èŠ­å ¤é›…</h2><p>èŠ­æé›…(Pattaya,åˆå¸¸è¢«è¯‘ä¸ºâ€œèŠ­å ¤é›…â€)ï¼Œæ˜¯ä¸­å—åŠå²›å—ç«¯çš„æ³°å›½ä¸€å¤„è‘—åæµ·æ™¯åº¦å‡èƒœåœ°ã€‚è·ç¦»æ›¼è°·ä¸œå—æ–¹154å…¬é‡Œã€‚</p>
<p>èŠ­æé›…è¿‘å¹´æ¥çƒ­åº¦æé«˜çš„æµ·æ»©åº¦å‡ã€æ—…æ¸¸ã€å…»è€åœ£åœ°ï¼Œäº«æœ‰â€œä¸œæ–¹å¤å¨å¤·â€ä¹‹èª‰ï¼ŒèŠ­æé›…å…·æœ‰æœ€è´Ÿç››åçš„äººå¦–è¡¨æ¼”ï¼Œç¼¤çº·æ— ä¼‘çš„å¤œæ–‡åŒ–ï¼Œå¸å¼•ç€å…¨ä¸–ç•Œçš„æ¸¸å®¢ã€‚</p>
<blockquote>
<p>æ®è¯´2018å¹´è½»è½¨ä¿®å»ºå®Œæˆï¼Œä»æ›¼è°·åˆ°èŠ­å ¤é›…åªéœ€è¦20å¤šåˆ†é’Ÿã€‚</p>
</blockquote>
<h2 id="åæ¬£"><a href="#åæ¬£" class="headerlink" title="åæ¬£"></a>åæ¬£</h2><p>åæ¬£ï¼ˆè‹±è¯­ï¼šHua Hinï¼Œæ³°è¯­ï¼šà¸«à¸±à¸§à¸«à¸´à¸™ï¼‰ï¼Œæ³°å›½ä¸­éƒ¨æµ·æ»¨å°é•‡ã€‚è·ç¦»æ³°å›½é¦–éƒ½æ›¼è°·200å¤šå…¬é‡Œï¼ˆåŒ—çº¬12Â°34â€²ï¼Œä¸œç»99Â°57â€²ï¼‰ï¼Œéš¶å±äºæ³°å›½å·´èœ€åºœã€‚ä¸èŠ­å ¤é›…éš”å²¸ç›¸æœ›ï¼Œè·ç¦»æ›¼è°·è¥¿å—281å…¬é‡Œï¼Œçº¦3å°æ—¶è¡Œç¨‹ã€‚å®ƒè¢«ç§°ä½œæ˜¯æ³°å›½æœ€ä¼ ç»Ÿçš„æµ·æ»¨èƒœåœ°ï¼Œçš‡å®¤è´µæ—ä»¬æ¯å¹´éƒ½ä¼šåˆ°åæ¬£ä½ä¸€æ®µæ—¶é—´ï¼Œå½“ä»Šæ³°çš‡å°±é•¿æœŸå±…ä½äºæ­¤åœ°çš„è¡Œå®«ã€‚</p>
<h2 id="æ™®å‰å²›"><a href="#æ™®å‰å²›" class="headerlink" title="æ™®å‰å²›"></a>æ™®å‰å²›</h2><p>æµ·æ»©æ—¥å…‰æµ´ äº«æ…µæ‡’æ…¢æ—¶å…‰<br>æ¸¸æµ·å²› æ½œå…¥å¤§æµ·çš„å¿ƒé‡Œå»<br>æ³›èˆŸæ³°å›½â€œå°æ¡‚æ—â€æ”€ç‰™æ¹¾ </p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Coursera Week 3 - Logistic Regression]]></title>
      <url>http://shopee.ai/2016/10/24/ml/coursera-ng-w3-LR/</url>
      <content type="html"><![CDATA[<p>Logistic Regression</p>
<a id="more"></a>
<h2 id="1-Classification"><a href="#1-Classification" class="headerlink" title="1. Classification"></a>1. Classification</h2><blockquote>
<ol>
<li>Email: Spam / Not Spam</li>
<li>Online Transactions: Fraudulent (Yes/No)? </li>
<li>Tumor: Malignant / Benign ?  &emsp;&emsp;&emsp; [â€˜tju:mÉ™(r)]  [mÉ™â€™lÉªgnÉ™nt] / [bÉªâ€™naÉªn]</li>
</ol>
<p>$ y \in {0, 1}$</p>
</blockquote>
<h2 id="2-Binary-Classification"><a href="#2-Binary-Classification" class="headerlink" title="2. Binary Classification"></a>2. Binary Classification</h2><p>Instead of our output vector y being a continuous range of values, it will only be 0 or 1.</p>
<p>yâˆˆ{0,1}</p>
<blockquote>
<p>Where 0 is usually taken as the â€œnegative classâ€ and 1 as the â€œpositive classâ€, but you are free to assign any representation to it.</p>
</blockquote>
<p><strong>Hypothesis Representation</strong>  </p>
<blockquote>
<p>$$ 0 \leq h_\theta (x) \leq 1 $$<br>$$ \begin{align} &amp; h_\theta (x) =  g ( \theta^T x ) \newline \newline&amp; z = \theta^T x \newline&amp; g(z) = \dfrac{1}{1 + e^{-z}} \end{align} $$</p>
<p>â€œSigmoid Function,â€ also called the â€œLogistic Functionâ€:</p>
</blockquote>
<p><img src="/images/ml/coursera/ml-ng-w3-02.png" alt="Sigmoid Function"></p>
<blockquote>
<p>$h_Î¸$ will give us the probability that our output is 1. For example, $h_Î¸=0.7$ gives us the probability of 70% that our output is 1.</p>
</blockquote>
<p>$<br>\begin{align}<br>&amp; h_\theta(x) = P(y=1 | x ; \theta) = 1 - P(y=0 | x ; \theta) \newline&amp; P(y = 0 | x;\theta) + P(y = 1 | x ; \theta) = 1<br>\end{align}<br>$</p>
<p>Our probability that our prediction is 0 is just the complement of our probability that it is 1 (e.g. if probability that it is 1 is 70%, then the probability that it is 0 is 30%).</p>
<h2 id="3-Decision-Boundary"><a href="#3-Decision-Boundary" class="headerlink" title="3. Decision Boundary"></a>3. Decision Boundary</h2><p>$$<br>\begin{align}<br>&amp; h_\theta(x) \geq 0.5 \rightarrow y = 1 \newline&amp; h_\theta(x) &lt; 0.5 \rightarrow y = 0 \newline\end{align}<br>$$</p>
<table>
<thead>
<tr>
<th style="text-align:center"><font color="#0085a1"><strong>Logistic Function</strong></font></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$ \begin{align} &amp; g(z) \geq 0.5 \newline&amp; when \; z \geq 0 \end{align} $</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">$ \begin{align} z=0,  e^{0}=1 \Rightarrow  g(z)=1/2\newline z \to \infty, e^{-\infty} \to 0 \Rightarrow g(z)=1 \newline z \to -\infty, e^{\infty}\to \infty \Rightarrow g(z)=0 \end{align} $</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center"><font color="#0085a1">g is $\theta^T X$, then that means</font>:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$ h_\theta(x) = g(\theta^T x) \geq 0.5 $ $ when \; \theta^T x \geq 0 $</td>
<td></td>
</tr>
<tr>
<td style="text-align:center">$ \begin{align} &amp; \theta^T x \geq 0 \Rightarrow y = 1 \newline&amp; \theta^T x &lt; 0 \Rightarrow y = 0 \newline \end{align} $</td>
<td></td>
</tr>
</tbody>
</table>
<p>The decision boundary is the line that separates the area where y = 0 and where y = 1. It is created by our hypothesis function.</p>
<p><strong>Example:</strong></p>
<p>$<br>\begin{align}<br>&amp; \theta = \begin{bmatrix}5 \newline -1 \newline 0\end{bmatrix} \newline &amp; y = 1 \; if \; 5 + (-1) x_1 + 0 x_2 \geq 0 \newline &amp; 5 - x_1 \geq 0 \newline &amp; - x_1 \geq -5 \newline&amp; x_1 \leq 5 \newline \end{align}<br>$</p>
<p>In this case, our decision boundary is a straight vertical line placed on the graph where $x_1=5$, and everything to the left of that denotes $y = 1$, while everything to the right denotes $y = 0$.</p>
<p><strong>linear decision boundaries</strong></p>
<p><img src="/images/ml/coursera/ml-ng-w3-01.png" alt="linear decision boundaries"></p>
<p><strong>Non-linear decision boundaries</strong></p>
<p><img src="/images/ml/coursera/ml-ng-w3-03.png" alt="Non-linear decision boundaries"></p>
<h2 id="4-Cost-Function"><a href="#4-Cost-Function" class="headerlink" title="4. Cost Function"></a>4. Cost Function</h2><p>We cannot use the same cost function that we use for linear regression because the Logistic Function will cause the output to be wavy, causing many local optima. In other words, it will not be a convex function.</p>
<p><img src="/images/ml/coursera/ml-ng-w3-12.png" alt=" $h_\theta(x)$ Complex nonlinear function"></p>
<p><img src="/images/ml/coursera/ml-ng-w3-06.png" alt="Cost Function"></p>
<p><code>Instead, our cost function for logistic regression looks like</code>:</p>
<p>$<br>\begin{align}<br>&amp; J(\theta) = \dfrac{1}{m} \sum_{i=1}^m \mathrm{Cost}(h_\theta(x^{(i)}),y^{(i)}) \newline &amp; \mathrm{Cost}(h_\theta(x),y) = -\log(h_\theta(x)) \; &amp; \text{if y = 1} \newline &amp; \mathrm{Cost}(h_\theta(x),y) = -\log(1-h_\theta(x)) \; &amp; \text{if y = 0}<br>\end{align}<br>$</p>
<p><img src="/images/ml/coursera/ml-ng-w3-04.png" alt="Cost Function"></p>
<p><img src="/images/ml/coursera/ml-ng-w3-05.png" alt="Cost Function"></p>
<p>$<br>\begin{align}<br>&amp; \mathrm{Cost}(h_\theta(x),y) = 0 \text{  if  } h_\theta(x) = y \newline &amp; \mathrm{Cost}(h_\theta(x),y) \rightarrow \infty \text{  if  } y = 0 \; \mathrm{and} \; h_\theta(x) \rightarrow 1 \newline &amp; \mathrm{Cost}(h_\theta(x),y) \rightarrow \infty \text{  if  } y = 1 \; \mathrm{and} \; h_\theta(x) \rightarrow 0 \newline<br>\end{align}<br>$</p>
<p>If our correct answer â€˜yâ€™ is 0, then the cost function will be 0 if our hypothesis function also outputs 0. If our hypothesis approaches 1, then the cost function will approach infinity.</p>
<p>If our correct answer â€˜yâ€™ is 1, then the cost function will be 0 if our hypothesis function outputs 1. If our hypothesis approaches 0, then the cost function will approach infinity.</p>
<h2 id="5-Cost-Function-amp-Gradient-Desc"><a href="#5-Cost-Function-amp-Gradient-Desc" class="headerlink" title="5. Cost Function &amp; Gradient Desc"></a>5. Cost Function &amp; Gradient Desc</h2><p><code>We can compress our cost function&#39;s two conditional cases into one case:</code></p>
<p>$ \mathrm{Cost}(h_\theta(x),y) = - y \cdot \log(h_\theta(x)) - (1 - y) \cdot \log(1 - h_\theta(x))$</p>
<p>We can fully write out our entire cost function as follows:</p>
<p>$<br>J(\theta) = - \frac{1}{m} \displaystyle \sum_{i=1}^m [y^{(i)}\log (h_\theta (x^{(i)})) + (1 - y^{(i)})\log (1 - h_\theta(x^{(i)}))]<br>$</p>
<p>A <code>vectorized</code> implementation is:</p>
<p>$<br>\begin{align}<br>&amp; h = g(X\theta)\newline<br>&amp; J(\theta)  = \frac{1}{m} \cdot \left(-y^{T}\log(h)-(1-y)^{T}\log(1-h)\right)<br>\end{align}<br>$</p>
<h3 id="5-1-Gradient-Descent"><a href="#5-1-Gradient-Descent" class="headerlink" title="5.1 Gradient Descent"></a>5.1 Gradient Descent</h3><p>Remember that the general form of gradient descent is:</p>
<p>$<br>\begin{align}<br>&amp; Repeat \; \lbrace \newline &amp; \; \theta_j := \theta_j - \alpha \dfrac{\partial}{\partial \theta_j}J(\theta) \newline &amp; \rbrace<br>\end{align}<br>$</p>
<p>We can work out the derivative part using calculus to get:</p>
<p>$<br>\begin{align}<br>&amp; Repeat \; \lbrace \newline<br>&amp; \; \theta_j := \theta_j - \frac{\alpha}{m} \sum_{i=1}^m (h_\theta(x^{(i)}) - y^{(i)}) x_j^{(i)} \newline &amp; \rbrace<br>\end{align}<br>$</p>
<blockquote>
<p><code>seen 5.2 detailed</code></p>
</blockquote>
<p><strong>A vectorized implementation is:</strong></p>
<p>$<br>\theta := \theta - \frac{\alpha}{m} X^{T} (g(X \theta ) - \vec{y})<br>$</p>
<h3 id="5-2-Partial-derivative-of-J-Î¸"><a href="#5-2-Partial-derivative-of-J-Î¸" class="headerlink" title="5.2 Partial derivative of J(Î¸)"></a>5.2 Partial derivative of J(Î¸)</h3><blockquote>
<p>partial [â€˜pÉ‘ËÊƒ(É™)l]<br>derivative [dÉªâ€™rÉªvÉ™tÉªv]</p>
</blockquote>
<p>$<br>\begin{align}<br>\sigma(x)â€™&amp;=\left(\frac{1}{1+e^{-x}}\right)â€™=\frac{-(1+e^{-x})â€™}{(1+e^{-x})^2}=\frac{-1â€™-(e^{-x})â€™}{(1+e^{-x})^2}=\frac{0-(-x)â€™(e^{-x})}{(1+e^{-x})^2}=\frac{-(-1)(e^{-x})}{(1+e^{-x})^2}=\frac{e^{-x}}{(1+e^{-x})^2} \newline &amp;=\left(\frac{1}{1+e^{-x}}\right)\left(\frac{e^{-x}}{1+e^{-x}}\right)=\sigma(x)\left(\frac{+1-1 + e^{-x}}{1+e^{-x}}\right)=\sigma(x)\left(\frac{1 + e^{-x}}{1+e^{-x}} - \frac{1}{1+e^{-x}}\right)=\sigma(x)(1 - \sigma(x))<br>\end{align}<br>$</p>
<p>Now we are ready to find out resulting partial derivative:</p>
<p>$<br>\begin{align}<br>\frac{\partial}{\partial \theta_j} J(\theta) &amp;= \frac{\partial}{\partial \theta_j} \frac{-1}{m}\sum_{i=1}^m \left [ y^{(i)} log (h_\theta(x^{(i)})) + (1-y^{(i)}) log (1 - h_\theta(x^{(i)})) \right ] \newline&amp;= - \frac{1}{m}\sum_{i=1}^m \left [     y^{(i)} \frac{\partial}{\partial \theta_j} log (h_\theta(x^{(i)}))   + (1-y^{(i)}) \frac{\partial}{\partial \theta_j} log (1 - h_\theta(x^{(i)}))\right ] \newline&amp;= - \frac{1}{m}\sum_{i=1}^m \left [     \frac{y^{(i)} \frac{\partial}{\partial \theta_j} h_\theta(x^{(i)})}{h_\theta(x^{(i)})}   + \frac{(1-y^{(i)})\frac{\partial}{\partial \theta_j} (1 - h_\theta(x^{(i)}))}{1 - h_\theta(x^{(i)})}\right ] \newline&amp;= - \frac{1}{m}\sum_{i=1}^m \left [     \frac{y^{(i)} \frac{\partial}{\partial \theta_j} \sigma(\theta^T x^{(i)})}{h_\theta(x^{(i)})}   + \frac{(1-y^{(i)})\frac{\partial}{\partial \theta_j} (1 - \sigma(\theta^T x^{(i)}))}{1 - h_\theta(x^{(i)})}\right ] \newline&amp;= - \frac{1}{m}\sum_{i=1}^m \left [     \frac{y^{(i)} \sigma(\theta^T x^{(i)}) (1 - \sigma(\theta^T x^{(i)})) \frac{\partial}{\partial \theta_j} \theta^T x^{(i)}}{h_\theta(x^{(i)})}   + \frac{- (1-y^{(i)}) \sigma(\theta^T x^{(i)}) (1 - \sigma(\theta^T x^{(i)})) \frac{\partial}{\partial \theta_j} \theta^T x^{(i)}}{1 - h_\theta(x^{(i)})}\right ] \newline&amp;= - \frac{1}{m}\sum_{i=1}^m \left [     \frac{y^{(i)} h_\theta(x^{(i)}) (1 - h_\theta(x^{(i)})) \frac{\partial}{\partial \theta_j} \theta^T x^{(i)}}{h_\theta(x^{(i)})}   - \frac{(1-y^{(i)}) h_\theta(x^{(i)}) (1 - h_\theta(x^{(i)})) \frac{\partial}{\partial \theta_j} \theta^T x^{(i)}}{1 - h_\theta(x^{(i)})}\right ] \newline&amp;= - \frac{1}{m}\sum_{i=1}^m \left [     y^{(i)} (1 - h_\theta(x^{(i)})) x^{(i)}_j - (1-y^{(i)}) h_\theta(x^{(i)}) x^{(i)}_j\right ] \newline&amp;= - \frac{1}{m}\sum_{i=1}^m \left [     y^{(i)} (1 - h_\theta(x^{(i)})) - (1-y^{(i)}) h_\theta(x^{(i)}) \right ] x^{(i)}_j \newline&amp;= - \frac{1}{m}\sum_{i=1}^m \left [     y^{(i)} - y^{(i)} h_\theta(x^{(i)}) - h_\theta(x^{(i)}) + y^{(i)} h_\theta(x^{(i)}) \right ] x^{(i)}_j \newline&amp;= - \frac{1}{m}\sum_{i=1}^m \left [ y^{(i)} - h_\theta(x^{(i)}) \right ] x^{(i)}_j  \newline&amp;= \frac{1}{m}\sum_{i=1}^m \left [ h_\theta(x^{(i)}) - y^{(i)} \right ] x^{(i)}_j<br>\end{align}<br>$</p>
<p>The vectorized version;</p>
<p>$<br>\nabla J(\theta) = \frac{1}{m} \cdot  X^T \cdot \left(g\left(X\cdot\theta\right) - \vec{y}\right)<br>$</p>
<h2 id="6-Advanced-Optimization"><a href="#6-Advanced-Optimization" class="headerlink" title="6. Advanced Optimization"></a>6. Advanced Optimization</h2><blockquote>
<p>We can apply regularization to both linear regression and logistic regression. We will approach linear regression first.</p>
</blockquote>
<p><img src="/images/ml/coursera/ml-ng-w3-07.png" alt="Advanced Optimization"></p>
<p>We first need to provide a function that evaluates the following two functions for a given input value Î¸:</p>
<p>$<br>\begin{align}<br>&amp; J(\theta) \newline &amp; \dfrac{\partial}{\partial \theta_j}J(\theta)<br>\end{align}<br>$</p>
<p>We can write a single function that returns both of theseâ€¦</p>
<h2 id="7-Multiclass-Classification"><a href="#7-Multiclass-Classification" class="headerlink" title="7. Multiclass Classification"></a>7. Multiclass Classification</h2><p><img src="/images/ml/coursera/ml-ng-w3-09.png" alt="Multiclass"></p>
<p>$<br>\begin{align}<br>&amp; y \in \lbrace0, 1 â€¦ n\rbrace \newline&amp; h_\theta^{(0)}(x) = P(y = 0 | x ; \theta) \newline&amp; h_\theta^{(1)}(x) = P(y = 1 | x ; \theta) \newline&amp; \cdots \newline&amp; h_\theta^{(n)}(x) = P(y = n | x ; \theta) \newline&amp; \mathrm{prediction} = \max_i( h_\theta ^{(i)}(x) )\newline<br>\end{align}<br>$</p>
<p>Train a logistic regression classifier $h_\theta ^{(i)}(x)$ for each class $i$ to predict the probability that $y = i$ .</p>
<p>On a new input $x$, to make a prediction, pick the $i$ class that maximizes $\max_i( h_\theta ^{(i)}(x)$</p>
<p>@2017-02-10 review done.</p>
<h2 id="8-Regularization"><a href="#8-Regularization" class="headerlink" title="8. Regularization"></a>8. Regularization</h2><p><strong>The Problem of Overfitting</strong></p>
<p>Regularization is designed to address the problem of overfitting.</p>
<p><strong>High bias</strong> or <strong>underfitting</strong> is when the form of our hypothesis function h maps poorly to the trend of the data. It is usually caused by a function that is too simple or <strong>uses too few features</strong>. </p>
<p>eg. if we take $h_Î¸(x)=Î¸_0+Î¸_1 \cdot x_1+Î¸_2 \cdot x_2$ then we are making an initial assumption that a linear model will fit the training data well and will be able to generalize but that may not be the case.</p>
<p>At the other extreme, overfitting or high variance is caused by a hypothesis function that fits the available data but does not generalize well to predict new data. It is usually caused by a complicated function that creates a lot of unnecessary curves and angles unrelated to the data.</p>
<p><img src="/images/ml/coursera/ml-ng-w3-10.png" alt="Regularization"></p>
<p>This terminology is applied to both linear and logistic regression. There are two main options to address the issue of overfitting:</p>
<p>1) Reduce the number of features:</p>
<ul>
<li><p>a) Manually select which features to keep.</p>
</li>
<li><p>b) Use a model selection algorithm .</p>
</li>
</ul>
<p>2) Regularization</p>
<ul>
<li>Keep all the features, but reduce the parameters $Î¸_j$.</li>
</ul>
<p>Regularization works well when we have a lot of slightly useful features.</p>
<blockquote>
<p>to address æå‡ºï¼Œå»è§£å†³</p>
</blockquote>
<h2 id="9-Regularization-Cost-Function"><a href="#9-Regularization-Cost-Function" class="headerlink" title="9. Regularization Cost Function"></a>9. Regularization Cost Function</h2><p>If we have overfitting from our hypothesis function, we can reduce the weight that some of the terms in our function carry by increasing their cost.</p>
<p>Say we wanted to make the following function more quadratic [kwÉ’â€™drÃ¦tÉªk]:</p>
<p>$<br>\theta_0 + \theta_1x + \theta_2x^2 + \theta_3x^3 + \theta_4x^4<br>$</p>
<p>Weâ€™ll want to eliminate the influence of $\theta_3x^3$ and $\theta_4x^4$. Without actually getting rid of these features or changing the form of our hypothesis, we can instead modify our cost function:</p>
<p><strong>$<br>min_\theta\ \dfrac{1}{2m}\sum_{i=1}^m (h_\theta(x^{(i)}) - y^{(i)})^2 + 1000 \cdot \theta_3^2 + 1000\cdot\theta_4^2<br>$</strong></p>
<p>Weâ€™ve added two extra terms at the end to inflate the cost of $\theta_3$ and $\theta_4$. Now, in order for the cost function to get close to zero, we will have to reduce the values of $\theta_3$ and $\theta_4$ to near zero. This will in turn greatly reduce the values of $\theta_3x^3$ and $\theta_4x^4$ in our hypothesis function.</p>
<p>We could also regularize all of our theta parameters in a single summation:</p>
<p>$<br>min_\theta\ \dfrac{1}{2m}\ \left[ \sum_{i=1}^m (h_\theta(x^{(i)}) - y^{(i)})^2 + \lambda\ \sum_{j=1}^n \theta_j^2 \right]<br>$</p>
<p>The Î», or lambda, is the <strong>regularization parameter</strong>. It determines how much the costs of our theta parameters are inflated. </p>
<blockquote>
<p>You can visualize the effect of regularization in this interactive plot : <a href="https://www.desmos.com/calculator/1hexc8ntqp" target="_blank" rel="external">https://www.desmos.com/calculator/1hexc8ntqp</a></p>
</blockquote>
<p>Using the above cost function with the extra summation, we can smooth the output of our hypothesis function to reduce overfitting. If lambda is chosen to be too large, it may smooth out the function too much and cause underfitting.</p>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥å¹³æ»‘æˆ‘ä»¬çš„å‡è®¾å‡½æ•°çš„è¾“å‡ºï¼Œä»¥å‡å°‘è¿‡åº¦æ‹Ÿåˆ</p>
</blockquote>
<h2 id="10-Regularized-Linear"><a href="#10-Regularized-Linear" class="headerlink" title="10. Regularized Linear"></a>10. Regularized Linear</h2><h3 id="10-1-Gradient-Descent"><a href="#10-1-Gradient-Descent" class="headerlink" title="10.1 Gradient Descent"></a>10.1 Gradient Descent</h3><p>$<br>\begin{align}<br>&amp; \text{Repeat}\ \lbrace \newline<br>&amp; \ \ \ \ \theta_0 := \theta_0 - \alpha\ \frac{1}{m}\ \sum_{i=1}^m (h_\theta(x^{(i)}) - y^{(i)})x_0^{(i)} \newline<br>&amp; \ \ \ \ \theta_j := \theta_j - \alpha\ \left[ \left( \frac{1}{m}\ \sum_{i=1}^m (h_\theta(x^{(i)}) - y^{(i)})x_j^{(i)} \right) + \frac{\lambda}{m}\theta_j \right] &amp;\ \ \ \ \ \ \ \ \ \ j \in \lbrace 1,2â€¦n\rbrace\newline<br>&amp; \rbrace<br>\end{align}<br>$</p>
<p>The term $\frac{\lambda}{m}\theta_j$ performs our regularization.</p>
<p><strong>$<br>\theta_j := \theta_j(1 - \alpha\frac{\lambda}{m}) - \alpha\frac{1}{m}\sum_{i=1}^m(h_\theta(x^{(i)}) - y^{(i)})x_j^{(i)}<br>$</strong></p>
<p>The first term in the above equation, $1 - \alpha\frac{\lambda}{m}$ will always be less than 1. Intuitively you can see it as reducing the value of $\theta_j$ by some amount on every update.</p>
<h3 id="10-2-Normal-Equation"><a href="#10-2-Normal-Equation" class="headerlink" title="10.2 Normal Equation"></a>10.2 Normal Equation</h3><p>Use less, temporarily ignored</p>
<h2 id="11-Regularized-Logistic"><a href="#11-Regularized-Logistic" class="headerlink" title="11. Regularized Logistic"></a>11. Regularized Logistic</h2><p><strong>Cost Function</strong></p>
<p>$<br>J(\theta) = - \frac{1}{m} \sum_{i=1}^m \large[ y^{(i)}\ \log (h_\theta (x^{(i)})) + (1 - y^{(i)})\ \log (1 - h_\theta(x^{(i)})) \large]<br>$</p>
<p>We can regularize this equation by adding a term to the end:</p>
<p>$<br>J(\theta) = - \frac{1}{m} \sum_{i=1}^m \large[ y^{(i)}\ \log (h_\theta (x^{(i)})) + (1 - y^{(i)})\ \log (1 - h_\theta(x^{(i)}))\large] + \frac{\lambda}{2m}\sum_{j=1}^n \theta_j^2<br>$</p>
<p><strong>Gradient Descent</strong></p>
<p>Just like with linear regression, we will want to separately update $\theta_0$ and the rest of the parameters because we do not want to regularize $\theta_0$.</p>
<p>$<br>\begin{align}<br>&amp; \text{Repeat}\ \lbrace \newline&amp; \ \ \ \ \theta_0 := \theta_0 - \alpha\ \frac{1}{m}\ \sum_{i=1}^m (h_\theta(x^{(i)}) - y^{(i)})x_0^{(i)} \newline&amp; \ \ \ \ \theta_j := \theta_j - \alpha\ \left[ \left( \frac{1}{m}\ \sum_{i=1}^m (h_\theta(x^{(i)}) - y^{(i)})x_j^{(i)} \right) + \frac{\lambda}{m}\theta_j \right] &amp;\ \ \ \ \ \ \ \ \ \ j \in \lbrace 1,2â€¦n\rbrace\newline&amp; \rbrace\end{align}<br>$</p>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><p><a href="https://www.kaggle.com/c/titanic" target="_blank" rel="external">Kaggle_Titanic</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Coursera Week 2 - Octave Tutorial By NG]]></title>
      <url>http://shopee.ai/2016/10/21/ml/coursera-ng-w2-03/</url>
      <content type="html"><![CDATA[<p>ML:Octave Tutorial</p>
<a id="more"></a>
<h2 id="1-Basic-Operations"><a href="#1-Basic-Operations" class="headerlink" title="1. Basic Operations"></a>1. Basic Operations</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%% Change Octave prompt  </span></span><br><span class="line">PS1(<span class="string">'&gt;&gt; '</span>);</span><br><span class="line"><span class="comment">%% Change working directory in windows example:</span></span><br><span class="line">cd <span class="string">'c:/path/to/desired/directory name'</span></span><br><span class="line"><span class="comment">%% Note that it uses normal slashes and does not use escape characters for the empty spaces.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% elementary operations</span></span><br><span class="line"><span class="number">5</span>+<span class="number">6</span></span><br><span class="line"><span class="number">3</span><span class="number">-2</span></span><br><span class="line"><span class="number">5</span>*<span class="number">8</span></span><br><span class="line"><span class="number">1</span>/<span class="number">2</span></span><br><span class="line"><span class="number">2</span>^<span class="number">6</span></span><br><span class="line"><span class="number">1</span> == <span class="number">2</span> <span class="comment">% false</span></span><br><span class="line"><span class="number">1</span> ~= <span class="number">2</span> <span class="comment">% true.  note, not "!="</span></span><br><span class="line"><span class="number">1</span> &amp;&amp; <span class="number">0</span></span><br><span class="line"><span class="number">1</span> || <span class="number">0</span></span><br><span class="line">xor(<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% variable assignment</span></span><br><span class="line">a = <span class="number">3</span>; <span class="comment">% semicolon suppresses output</span></span><br><span class="line">b = <span class="string">'hi'</span>;</span><br><span class="line">c = <span class="number">3</span>&gt;=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">% Displaying them:</span></span><br><span class="line">a = <span class="built_in">pi</span></span><br><span class="line"><span class="built_in">disp</span>(a)</span><br><span class="line"><span class="built_in">disp</span>(sprintf(<span class="string">'2 decimals: %0.2f'</span>, a))</span><br><span class="line"><span class="built_in">disp</span>(sprintf(<span class="string">'6 decimals: %0.6f'</span>, a))</span><br><span class="line">format long</span><br><span class="line">a</span><br><span class="line">format short</span><br><span class="line">a</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%%  vectors and matrices</span></span><br><span class="line">A = [<span class="number">1</span> <span class="number">2</span>; <span class="number">3</span> <span class="number">4</span>; <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line"></span><br><span class="line">v = [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]</span><br><span class="line">v = [<span class="number">1</span>; <span class="number">2</span>; <span class="number">3</span>]</span><br><span class="line">v = <span class="number">1</span>:<span class="number">0.1</span>:<span class="number">2</span>   <span class="comment">% from 1 to 2, with stepsize of 0.1. Useful for plot axes</span></span><br><span class="line">v = <span class="number">1</span>:<span class="number">6</span>       <span class="comment">% from 1 to 6, assumes stepsize of 1 (row vector)</span></span><br><span class="line"></span><br><span class="line">C = <span class="number">2</span>*<span class="built_in">ones</span>(<span class="number">2</span>,<span class="number">3</span>) <span class="comment">% same as C = [2 2 2; 2 2 2]</span></span><br><span class="line">w = <span class="built_in">ones</span>(<span class="number">1</span>,<span class="number">3</span>)   <span class="comment">% 1x3 vector of ones</span></span><br><span class="line">w = <span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line">w = <span class="built_in">rand</span>(<span class="number">1</span>,<span class="number">3</span>) <span class="comment">% drawn from a uniform distribution </span></span><br><span class="line">w = <span class="built_in">randn</span>(<span class="number">1</span>,<span class="number">3</span>)<span class="comment">% drawn from a normal distribution (mean=0, var=1)</span></span><br><span class="line">w = <span class="number">-6</span> + <span class="built_in">sqrt</span>(<span class="number">10</span>)*(<span class="built_in">randn</span>(<span class="number">1</span>,<span class="number">10000</span>));  <span class="comment">% (mean = -6, var = 10) - note: add the semicolon</span></span><br><span class="line">hist(w)    <span class="comment">% plot histogram using 10 bins (default)</span></span><br><span class="line">hist(w,<span class="number">50</span>) <span class="comment">% plot histogram using 50 bins</span></span><br><span class="line"><span class="comment">% note: if hist() crashes, try "graphics_toolkit('gnu_plot')" </span></span><br><span class="line"></span><br><span class="line">I = <span class="built_in">eye</span>(<span class="number">4</span>)   <span class="comment">% 4x4 identity matrix</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% help function</span></span><br><span class="line">help <span class="built_in">eye</span></span><br><span class="line">help <span class="built_in">rand</span></span><br><span class="line">help help</span><br></pre></td></tr></table></figure>
<h2 id="2-Moving-Data-Around"><a href="#2-Moving-Data-Around" class="headerlink" title="2. Moving Data Around"></a>2. Moving Data Around</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%% dimensions</span></span><br><span class="line">sz = <span class="built_in">size</span>(A) <span class="comment">% 1x2 matrix: [(number of rows) (number of columns)]</span></span><br><span class="line"><span class="built_in">size</span>(A,<span class="number">1</span>) <span class="comment">% number of rows</span></span><br><span class="line"><span class="built_in">size</span>(A,<span class="number">2</span>) <span class="comment">% number of cols</span></span><br><span class="line"><span class="built_in">length</span>(v) <span class="comment">% size of longest dimension</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">%% loading data</span></span><br><span class="line">pwd   <span class="comment">% show current directory (current path)</span></span><br><span class="line">cd <span class="string">'C:\Users\ang\Octave files'</span>  <span class="comment">% change directory </span></span><br><span class="line">ls    <span class="comment">% list files in current directory </span></span><br><span class="line">load q1y.dat   <span class="comment">% alternatively, load('q1y.dat')</span></span><br><span class="line">load q1x.dat</span><br><span class="line">who   <span class="comment">% list variables in workspace</span></span><br><span class="line">whos  <span class="comment">% list variables in workspace (detailed view) </span></span><br><span class="line">clear q1y      <span class="comment">% clear command without any args clears all vars</span></span><br><span class="line">v = q1x(<span class="number">1</span>:<span class="number">10</span>); <span class="comment">% first 10 elements of q1x (counts down the columns)</span></span><br><span class="line">save hello.mat v;  <span class="comment">% save variable v into file hello.mat</span></span><br><span class="line">save hello.txt v -ascii; <span class="comment">% save as ascii</span></span><br><span class="line"><span class="comment">% fopen, fread, fprintf, fscanf also work  [[not needed in class]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% indexing</span></span><br><span class="line">A(<span class="number">3</span>,<span class="number">2</span>)  <span class="comment">% indexing is (row,col)</span></span><br><span class="line">A(<span class="number">2</span>,:)  <span class="comment">% get the 2nd row. </span></span><br><span class="line">        <span class="comment">% ":" means every element along that dimension</span></span><br><span class="line">A(:,<span class="number">2</span>)  <span class="comment">% get the 2nd col</span></span><br><span class="line">A([<span class="number">1</span> <span class="number">3</span>],:) <span class="comment">% print all  the elements of rows 1 and 3</span></span><br><span class="line"></span><br><span class="line">A(:,<span class="number">2</span>) = [<span class="number">10</span>; <span class="number">11</span>; <span class="number">12</span>]     <span class="comment">% change second column</span></span><br><span class="line">A = [A, [<span class="number">100</span>; <span class="number">101</span>; <span class="number">102</span>]]; <span class="comment">% append column vec</span></span><br><span class="line">A(:) <span class="comment">% Select all elements as a column vector.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% Putting data together </span></span><br><span class="line">A = [<span class="number">1</span> <span class="number">2</span>; <span class="number">3</span> <span class="number">4</span>; <span class="number">5</span> <span class="number">6</span>]</span><br><span class="line">B = [<span class="number">11</span> <span class="number">12</span>; <span class="number">13</span> <span class="number">14</span>; <span class="number">15</span> <span class="number">16</span>] <span class="comment">% same dims as A</span></span><br><span class="line">C = [A B]  <span class="comment">% concatenating A and B matrices side by side</span></span><br><span class="line">C = [A, B] <span class="comment">% concatenating A and B matrices side by side</span></span><br><span class="line">C = [A; B] <span class="comment">% Concatenating A and B top and bottom</span></span><br></pre></td></tr></table></figure>
<h2 id="3-Computing-on-Data"><a href="#3-Computing-on-Data" class="headerlink" title="3. Computing on Data"></a>3. Computing on Data</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%% initialize variables</span></span><br><span class="line">A = [<span class="number">1</span> <span class="number">2</span>;<span class="number">3</span> <span class="number">4</span>;<span class="number">5</span> <span class="number">6</span>]</span><br><span class="line">B = [<span class="number">11</span> <span class="number">12</span>;<span class="number">13</span> <span class="number">14</span>;<span class="number">15</span> <span class="number">16</span>]</span><br><span class="line">C = [<span class="number">1</span> <span class="number">1</span>;<span class="number">2</span> <span class="number">2</span>]</span><br><span class="line">v = [<span class="number">1</span>;<span class="number">2</span>;<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">%% matrix operations</span></span><br><span class="line">A * C  <span class="comment">% matrix multiplication</span></span><br><span class="line">A .* B <span class="comment">% element-wise multiplication</span></span><br><span class="line"><span class="comment">% A .* C  or A * B gives error - wrong dimensions</span></span><br><span class="line">A .^ <span class="number">2</span> <span class="comment">% element-wise square of each element in A</span></span><br><span class="line"><span class="number">1.</span>/v   <span class="comment">% element-wise reciprocal</span></span><br><span class="line"><span class="built_in">log</span>(v)  <span class="comment">% functions like this operate element-wise on vecs or matrices </span></span><br><span class="line"><span class="built_in">exp</span>(v)</span><br><span class="line"><span class="built_in">abs</span>(v)</span><br><span class="line"></span><br><span class="line">-v  <span class="comment">% -1*v</span></span><br><span class="line"></span><br><span class="line">v + <span class="built_in">ones</span>(<span class="built_in">length</span>(v), <span class="number">1</span>)  </span><br><span class="line"><span class="comment">% v + 1  % same</span></span><br><span class="line"></span><br><span class="line">A'  <span class="comment">% matrix transpose</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%% misc useful functions</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% max  (or min)</span></span><br><span class="line">a = [<span class="number">1</span> <span class="number">15</span> <span class="number">2</span> <span class="number">0.5</span>]</span><br><span class="line">val = max(a)</span><br><span class="line">[val,ind] = max(a) <span class="comment">% val -  maximum element of the vector a and index - index value where maximum occur</span></span><br><span class="line">val = max(A) <span class="comment">% if A is matrix, returns max from each column</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% compare values in a matrix &amp; find</span></span><br><span class="line">a &lt; <span class="number">3</span> <span class="comment">% checks which values in a are less than 3</span></span><br><span class="line"><span class="built_in">find</span>(a &lt; <span class="number">3</span>) <span class="comment">% gives location of elements less than 3</span></span><br><span class="line">A = <span class="built_in">magic</span>(<span class="number">3</span>) <span class="comment">% generates a magic matrix - not much used in ML algorithms</span></span><br><span class="line">[r,c] = <span class="built_in">find</span>(A&gt;=<span class="number">7</span>)  <span class="comment">% row, column indices for values matching comparison</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% sum, prod</span></span><br><span class="line">sum(a)</span><br><span class="line">prod(a)</span><br><span class="line"><span class="built_in">floor</span>(a) <span class="comment">% or ceil(a)</span></span><br><span class="line">max(<span class="built_in">rand</span>(<span class="number">3</span>),<span class="built_in">rand</span>(<span class="number">3</span>))</span><br><span class="line">max(A,[],<span class="number">1</span>) -  maximum along columns(defaults to columns - max(A,[]))</span><br><span class="line">max(A,[],<span class="number">2</span>) - maximum along rows</span><br><span class="line">A = <span class="built_in">magic</span>(<span class="number">9</span>)</span><br><span class="line">sum(A,<span class="number">1</span>)</span><br><span class="line">sum(A,<span class="number">2</span>)</span><br><span class="line">sum(sum( A .* <span class="built_in">eye</span>(<span class="number">9</span>) ))</span><br><span class="line">sum(sum( A .* <span class="built_in">flipud</span>(<span class="built_in">eye</span>(<span class="number">9</span>)) ))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">% Matrix inverse (pseudo-inverse)</span></span><br><span class="line">pinv(A)        <span class="comment">% inv(A'*A)*A'</span></span><br></pre></td></tr></table></figure>
<h2 id="4-Plotting-Data"><a href="#4-Plotting-Data" class="headerlink" title="4. Plotting Data"></a>4. Plotting Data</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; t=[<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">0.98</span>];</span><br><span class="line">&gt;&gt; t</span><br><span class="line">t =</span><br><span class="line"></span><br><span class="line"> Columns <span class="number">1</span> through <span class="number">10</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.00000</span>   <span class="number">0.01000</span>   <span class="number">0.02000</span>   <span class="number">0.03000</span>   <span class="number">0.04000</span>   <span class="number">0.05000</span>   <span class="number">0.06000</span>   <span class="number">0.07000</span>   <span class="number">0.08000</span>   <span class="number">0.09000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">11</span> through <span class="number">20</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.10000</span>   <span class="number">0.11000</span>   <span class="number">0.12000</span>   <span class="number">0.13000</span>   <span class="number">0.14000</span>   <span class="number">0.15000</span>   <span class="number">0.16000</span>   <span class="number">0.17000</span>   <span class="number">0.18000</span>   <span class="number">0.19000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">21</span> through <span class="number">30</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.20000</span>   <span class="number">0.21000</span>   <span class="number">0.22000</span>   <span class="number">0.23000</span>   <span class="number">0.24000</span>   <span class="number">0.25000</span>   <span class="number">0.26000</span>   <span class="number">0.27000</span>   <span class="number">0.28000</span>   <span class="number">0.29000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">31</span> through <span class="number">40</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.30000</span>   <span class="number">0.31000</span>   <span class="number">0.32000</span>   <span class="number">0.33000</span>   <span class="number">0.34000</span>   <span class="number">0.35000</span>   <span class="number">0.36000</span>   <span class="number">0.37000</span>   <span class="number">0.38000</span>   <span class="number">0.39000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">41</span> through <span class="number">50</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.40000</span>   <span class="number">0.41000</span>   <span class="number">0.42000</span>   <span class="number">0.43000</span>   <span class="number">0.44000</span>   <span class="number">0.45000</span>   <span class="number">0.46000</span>   <span class="number">0.47000</span>   <span class="number">0.48000</span>   <span class="number">0.49000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">51</span> through <span class="number">60</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.50000</span>   <span class="number">0.51000</span>   <span class="number">0.52000</span>   <span class="number">0.53000</span>   <span class="number">0.54000</span>   <span class="number">0.55000</span>   <span class="number">0.56000</span>   <span class="number">0.57000</span>   <span class="number">0.58000</span>   <span class="number">0.59000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">61</span> through <span class="number">70</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.60000</span>   <span class="number">0.61000</span>   <span class="number">0.62000</span>   <span class="number">0.63000</span>   <span class="number">0.64000</span>   <span class="number">0.65000</span>   <span class="number">0.66000</span>   <span class="number">0.67000</span>   <span class="number">0.68000</span>   <span class="number">0.69000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">71</span> through <span class="number">80</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.70000</span>   <span class="number">0.71000</span>   <span class="number">0.72000</span>   <span class="number">0.73000</span>   <span class="number">0.74000</span>   <span class="number">0.75000</span>   <span class="number">0.76000</span>   <span class="number">0.77000</span>   <span class="number">0.78000</span>   <span class="number">0.79000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">81</span> through <span class="number">90</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.80000</span>   <span class="number">0.81000</span>   <span class="number">0.82000</span>   <span class="number">0.83000</span>   <span class="number">0.84000</span>   <span class="number">0.85000</span>   <span class="number">0.86000</span>   <span class="number">0.87000</span>   <span class="number">0.88000</span>   <span class="number">0.89000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">91</span> through <span class="number">99</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.90000</span>   <span class="number">0.91000</span>   <span class="number">0.92000</span>   <span class="number">0.93000</span>   <span class="number">0.94000</span>   <span class="number">0.95000</span>   <span class="number">0.96000</span>   <span class="number">0.97000</span>   <span class="number">0.98000</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; y1=<span class="built_in">sin</span>(<span class="number">2</span>*<span class="built_in">pi</span>*<span class="number">4</span>*t);</span><br><span class="line">&gt;&gt; plot(t,y1)</span><br><span class="line">&gt;&gt; y2=<span class="built_in">cos</span>(<span class="number">2</span>*<span class="built_in">pi</span>*<span class="number">4</span>*t);</span><br><span class="line">&gt;&gt; plot(t,y2)</span><br><span class="line">&gt;&gt; hold on</span><br><span class="line">&gt;&gt; plot(t,y1)</span><br><span class="line">&gt;&gt; plot(t,y2,<span class="string">'r'</span>)</span><br><span class="line">&gt;&gt; xlabel(<span class="string">'time'</span>)</span><br><span class="line">&gt;&gt; ylabel(<span class="string">'value'</span>)</span><br><span class="line">&gt;&gt; legend(<span class="string">'sin'</span>,<span class="string">'cos'</span>)</span><br><span class="line">&gt;&gt; title(<span class="string">'my plot'</span>)</span><br><span class="line">&gt;&gt; print -dpng <span class="string">'myPlot.png'</span></span><br><span class="line">warning: print.m: fig2dev binary is not available.</span><br><span class="line">Some output formats are not available.</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; figure(<span class="number">2</span>); plot(t, y2)</span><br><span class="line">&gt;&gt; subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">&gt;&gt; plot(t,y1)</span><br><span class="line">&gt;&gt; subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">&gt;&gt; plot(t,y2)</span><br><span class="line">&gt;&gt; axis([<span class="number">0.5</span> <span class="number">1</span> <span class="number">-1</span> <span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p><img src="/images/ml/coursera/ml-ng-w2-11.png" alt="matric"></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; clf;</span><br><span class="line">&gt;&gt; A = <span class="built_in">magic</span>(<span class="number">5</span>)</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">17</span>   <span class="number">24</span>    <span class="number">1</span>    <span class="number">8</span>   <span class="number">15</span></span><br><span class="line">   <span class="number">23</span>    <span class="number">5</span>    <span class="number">7</span>   <span class="number">14</span>   <span class="number">16</span></span><br><span class="line">    <span class="number">4</span>    <span class="number">6</span>   <span class="number">13</span>   <span class="number">20</span>   <span class="number">22</span></span><br><span class="line">   <span class="number">10</span>   <span class="number">12</span>   <span class="number">19</span>   <span class="number">21</span>    <span class="number">3</span></span><br><span class="line">   <span class="number">11</span>   <span class="number">18</span>   <span class="number">25</span>    <span class="number">2</span>    <span class="number">9</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; imagesc(A)</span><br><span class="line">&gt;&gt; imagesc(A), colorbar, colormap gray;</span><br></pre></td></tr></table></figure>
<p><img src="/images/ml/coursera/ml-ng-w2-12.png" alt="matric"></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; imagesc(<span class="built_in">magic</span>(<span class="number">15</span>)), colorbar, colormap gray;</span><br><span class="line">&gt;&gt; a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span></span><br><span class="line">a =  <span class="number">1</span></span><br><span class="line">b =  <span class="number">2</span></span><br><span class="line">c =  <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/ml/coursera/ml-ng-w2-13.png" alt="matric"></p>
<h2 id="5-Control-statements-for-while-if"><a href="#5-Control-statements-for-while-if" class="headerlink" title="5. Control statements:for,while,if"></a>5. Control statements:for,while,if</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">v = <span class="built_in">zeros</span>(<span class="number">10</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">10</span>, </span><br><span class="line">    v(<span class="built_in">i</span>) = <span class="number">2</span>^<span class="built_in">i</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">% Can also use "break" and "continue" inside for and while loops to control execution.</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">i</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> <span class="built_in">i</span> &lt;= <span class="number">5</span>,</span><br><span class="line">  v(<span class="built_in">i</span>) = <span class="number">100</span>; </span><br><span class="line">  <span class="built_in">i</span> = <span class="built_in">i</span>+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">i</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> true, </span><br><span class="line">  v(<span class="built_in">i</span>) = <span class="number">999</span>; </span><br><span class="line">  <span class="built_in">i</span> = <span class="built_in">i</span>+<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> <span class="built_in">i</span> == <span class="number">6</span>,</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> v(<span class="number">1</span>)==<span class="number">1</span>,</span><br><span class="line">  <span class="built_in">disp</span>(<span class="string">'The value is one!'</span>);</span><br><span class="line"><span class="keyword">elseif</span> v(<span class="number">1</span>)==<span class="number">2</span>,</span><br><span class="line">  <span class="built_in">disp</span>(<span class="string">'The value is two!'</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">disp</span>(<span class="string">'The value is not one or two!'</span>);</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>run example :</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; <span class="built_in">i</span> = <span class="number">1</span>;</span><br><span class="line">&gt;&gt; <span class="keyword">while</span> <span class="built_in">i</span> &lt;= <span class="number">5</span>,</span><br><span class="line">     v(<span class="built_in">i</span>) = <span class="number">100</span>;</span><br><span class="line">     <span class="built_in">i</span> = <span class="built_in">i</span>+<span class="number">1</span>;</span><br><span class="line">   <span class="keyword">end</span>;</span><br><span class="line">&gt;&gt; v</span><br><span class="line">v =</span><br><span class="line"></span><br><span class="line">    <span class="number">100</span></span><br><span class="line">    <span class="number">100</span></span><br><span class="line">    <span class="number">100</span></span><br><span class="line">    <span class="number">100</span></span><br><span class="line">    <span class="number">100</span></span><br><span class="line">     <span class="number">64</span></span><br><span class="line">    <span class="number">128</span></span><br><span class="line">    <span class="number">256</span></span><br><span class="line">    <span class="number">512</span></span><br><span class="line">   <span class="number">1024</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">i</span> = <span class="number">1</span>;</span><br><span class="line">&gt;&gt; <span class="keyword">while</span> true,</span><br><span class="line">     v(<span class="built_in">i</span>) = <span class="number">999</span>;</span><br><span class="line">     <span class="built_in">i</span> = <span class="built_in">i</span> + <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">if</span> <span class="built_in">i</span> == <span class="number">6</span>,</span><br><span class="line">       <span class="keyword">break</span>;</span><br><span class="line">     <span class="keyword">end</span>;</span><br><span class="line">   <span class="keyword">end</span>;</span><br><span class="line">&gt;&gt; v</span><br><span class="line">v =</span><br><span class="line"></span><br><span class="line">    <span class="number">999</span></span><br><span class="line">    <span class="number">999</span></span><br><span class="line">    <span class="number">999</span></span><br><span class="line">    <span class="number">999</span></span><br><span class="line">    <span class="number">999</span></span><br><span class="line">     <span class="number">64</span></span><br><span class="line">    <span class="number">128</span></span><br><span class="line">    <span class="number">256</span></span><br><span class="line">    <span class="number">512</span></span><br><span class="line">   <span class="number">1024</span></span><br><span class="line">&gt;&gt; v(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">999</span></span><br><span class="line">&gt;&gt; v(<span class="number">1</span>) = <span class="number">2</span>;</span><br><span class="line">&gt;&gt; <span class="keyword">if</span> v(<span class="number">1</span>) == <span class="number">1</span>,</span><br><span class="line">     <span class="built_in">disp</span>(<span class="string">'The value is one'</span>);</span><br><span class="line">   <span class="keyword">elseif</span> v(<span class="number">1</span>) == <span class="number">2</span>,</span><br><span class="line">     <span class="built_in">disp</span>(<span class="string">'The value is two'</span>);</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">     <span class="built_in">disp</span>(<span class="string">'The value is not 1 or 2'</span>);</span><br><span class="line">   <span class="keyword">end</span>;</span><br><span class="line">The value is two</span><br></pre></td></tr></table></figure>
<h2 id="6-Functions"><a href="#6-Functions" class="headerlink" title="6. Functions"></a>6. Functions</h2><p>To call the function in Octave, do either:</p>
<p>1) Navigate to the directory of the functionName.m file and call the function:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">% Navigate to directory:</span><br><span class="line">  cd /path/to/function</span><br><span class="line"></span><br><span class="line">  % Call the function:</span><br><span class="line">  functionName(args)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>simple compute line regression</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; x = [<span class="number">1</span> <span class="number">1</span>; <span class="number">1</span> <span class="number">2</span>; <span class="number">1</span> <span class="number">3</span>;]</span><br><span class="line">x =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">1</span></span><br><span class="line">   <span class="number">1</span>   <span class="number">2</span></span><br><span class="line">   <span class="number">1</span>   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; y = [<span class="number">1</span>; <span class="number">2</span>; <span class="number">3</span>]</span><br><span class="line">y =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; theta = [<span class="number">0</span>;<span class="number">1</span>];</span><br><span class="line">&gt;&gt; <span class="built_in">j</span> = costFunctionJ(x,y,theta)</span><br><span class="line"><span class="built_in">j</span> = <span class="number">0</span></span><br><span class="line">&gt;&gt; theta = [<span class="number">0</span>:<span class="number">0</span>];</span><br><span class="line">&gt;&gt; <span class="built_in">j</span> = costFunctionJ(x, y, theta)</span><br><span class="line">warning: operator -: automatic broadcasting operation applied</span><br><span class="line"><span class="built_in">j</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">2.3333</span>   <span class="number">2.3333</span></span><br><span class="line">   <span class="number">2.3333</span>   <span class="number">2.3333</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>åº”è¯¥ä¸ºä¸€ä¸ª 2.3333ï¼Œ è€Œä¸æ˜¯çŸ©é˜µ 2.3333</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; (<span class="number">1</span>^<span class="number">2</span> + <span class="number">2</span>^<span class="number">2</span> + <span class="number">3</span>^<span class="number">2</span>) / (<span class="number">2</span>*<span class="number">3</span>)</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">2.3333</span></span><br><span class="line">&gt;&gt; [<span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-3</span>]*[<span class="number">-1</span>;<span class="number">-2</span>;<span class="number">-3</span>]</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">14</span></span><br><span class="line">&gt;&gt; <span class="number">14</span> / <span class="number">6</span></span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">2.3333</span></span><br><span class="line">&gt;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="7-Vectorization"><a href="#7-Vectorization" class="headerlink" title="7. Vectorization"></a>7. Vectorization</h2><p>Vectorization is the process of taking code that relies on loops and converting it into matrix operations. It is more efficient, more elegant, and more concise.</p>
<p>As an example, letâ€™s compute our prediction from a hypothesis. Theta is the vector of fields for the hypothesis and x is a vector of variables.</p>
<p>With loops:</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">prediction = <span class="number">0.0</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:n+<span class="number">1</span>,</span><br><span class="line">  prediction += theta(<span class="built_in">j</span>) * x(<span class="built_in">j</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>
<p>With vectorization:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">prediction = theta&apos; * x;</span><br></pre></td></tr></table></figure>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><blockquote>
<ol>
<li>coursera week 2 learning notes</li>
<li><a href="http://blog.chenming.info/blog/2012/07/15/learn-octave/" target="_blank" rel="external">å­¦ä¹ ä¸€ç‚¹</a></li>
</ol>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Coursera Week 2 - Octave learning]]></title>
      <url>http://shopee.ai/2016/10/12/ml/coursera-ng-w2-02/</url>
      <content type="html"><![CDATA[<p>Octave Tutorial, Octave Learning</p>
<a id="more"></a>
<h2 id="1-var"><a href="#1-var" class="headerlink" title="1. var"></a>1. var</h2><blockquote>
<p>ä¸åƒmatlabæœ‰å›¾å½¢ç•Œé¢ï¼Œoctaveåªæä¾›äº†å‘½ä»¤è¡Œæ¥å£ã€‚ è¦å¯åŠ¨octaveï¼Œåªéœ€è¦åœ¨å‘½ä»¤è¡Œè¾“å…¥octaveå³å¯ã€‚</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; <span class="number">2</span> * (<span class="number">3</span> + <span class="number">5</span>)</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">16</span></span><br><span class="line">&gt;&gt; <span class="number">2</span> ^ (<span class="number">3</span> + <span class="number">5</span>)</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">256</span></span><br><span class="line">&gt;&gt; x = <span class="number">2</span> * <span class="number">3</span></span><br><span class="line">x =  <span class="number">6</span></span><br><span class="line">&gt;&gt; who</span><br><span class="line">Variables in the current scope:</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span>  x</span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">disp</span>(x)</span><br><span class="line"> <span class="number">6</span></span><br><span class="line">&gt;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="2-constant"><a href="#2-constant" class="headerlink" title="2. constant"></a>2. constant</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">pi</span></span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">3.1416</span></span><br><span class="line">&gt;&gt; e</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">2.7183</span></span><br><span class="line">&gt;&gt; format long</span><br><span class="line">&gt;&gt; <span class="built_in">pi</span></span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">3.14159265358979</span></span><br><span class="line">&gt;&gt; format short</span><br><span class="line">&gt;&gt; <span class="built_in">pi</span></span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">3.1416</span></span><br><span class="line">&gt;&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>octaveç³»ç»Ÿå®šä¹‰äº†åœ†å‘¨ç‡piå’Œè‡ªç„¶æŒ‡æ•°eè¿™ä¸¤ä¸ªå¸¸é‡, octave å¯ä»¥å®šä¹‰æ˜¾ç¤ºç»“æœ</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; <span class="number">3</span>/<span class="number">0</span></span><br><span class="line">warning: division by zero</span><br><span class="line"><span class="built_in">ans</span> = Inf</span><br><span class="line">&gt;&gt; <span class="number">0</span>/<span class="number">0</span></span><br><span class="line">warning: division by zero</span><br><span class="line"><span class="built_in">ans</span> = NaN</span><br><span class="line">&gt;&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç³»ç»Ÿå®šä¹‰äº†Infå’ŒNaNï¼ˆæ³¨æ„è¦åŒºåˆ†å¤§å°å†™ï¼‰ã€‚Inf(Infinity)è¡¨ç¤ºè¢«é›¶é™¤çš„ç»“æœï¼ŒNaN(Not a Number)è¡¨ç¤ºé›¶é™¤é›¶çš„ç»“æœã€‚</p>
</blockquote>
<h2 id="3-workspace"><a href="#3-workspace" class="headerlink" title="3. workspace"></a>3. workspace</h2><p>ä½¿ç”¨saveå‘½ä»¤ä¿å­˜å½“å‰å·¥ä½œåŒºåˆ°æ–‡ä»¶ work1</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; save work1</span><br><span class="line">&gt;&gt; load work1</span><br><span class="line">&gt;&gt; <span class="built_in">pi</span></span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">3.1416</span></span><br></pre></td></tr></table></figure>
<h2 id="4-semicolon"><a href="#4-semicolon" class="headerlink" title="4. semicolon"></a>4. semicolon</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">octave:<span class="number">32</span>&gt; x = <span class="number">2</span> * <span class="number">3</span></span><br><span class="line">x =  <span class="number">6</span></span><br><span class="line">octave:<span class="number">33</span>&gt; x = <span class="number">2</span> * <span class="number">3</span>;</span><br><span class="line">octave:<span class="number">34</span>&gt; <span class="built_in">disp</span>(x)</span><br><span class="line"> <span class="number">6</span></span><br></pre></td></tr></table></figure>
<h2 id="5-matrix"><a href="#5-matrix" class="headerlink" title="5. matrix"></a>5. matrix</h2><p>çŸ©é˜µä½¿ç”¨æ–¹æ‹¬å·([])æ‹¬èµ·æ¥ï¼Œç»´åº¦ä½¿ç”¨åˆ†å·(;)åˆ†å‰²ã€‚ åŒä¸€ç»´åº¦ä¹‹é—´çš„åˆ†éš”ç¬¦å¯ä»¥æ˜¯ç©ºæ ¼æˆ–é€—å·(,)</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">octave:<span class="number">35</span>&gt; x = [ <span class="number">2</span> <span class="number">3</span> <span class="number">5</span> ]</span><br><span class="line">x =</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span>   <span class="number">3</span>   <span class="number">5</span></span><br><span class="line"></span><br><span class="line">octave:<span class="number">36</span>&gt; y = [ <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span> ]</span><br><span class="line">y =</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span>   <span class="number">3</span>   <span class="number">5</span></span><br><span class="line"></span><br><span class="line">octave:<span class="number">37</span>&gt; z = [ <span class="number">2</span>; <span class="number">3</span>; <span class="number">5</span> ]</span><br><span class="line">z =</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line">   <span class="number">5</span></span><br><span class="line"></span><br><span class="line">octave:<span class="number">39</span>&gt; a = [ <span class="number">1</span> <span class="number">2</span>; <span class="number">1</span>, <span class="number">3</span>; <span class="number">1</span>   <span class="number">5</span> ]</span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">2</span></span><br><span class="line">   <span class="number">1</span>   <span class="number">3</span></span><br><span class="line">   <span class="number">1</span>   <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å†’å·è¡¨è¾¾å¼å¿«é€Ÿæ„é€ è¿ç»­çš„å‘é‡</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">octave:<span class="number">43</span>&gt; v = <span class="number">2</span>:<span class="number">5</span></span><br><span class="line">v =</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span>   <span class="number">5</span></span><br><span class="line">   </span><br><span class="line">octave:<span class="number">44</span>&gt; v = <span class="number">2</span>:<span class="number">0.3</span>:<span class="number">3</span></span><br><span class="line">v =</span><br><span class="line"></span><br><span class="line">    <span class="number">2.0000</span>    <span class="number">2.3000</span>    <span class="number">2.6000</span>    <span class="number">2.9000</span></span><br></pre></td></tr></table></figure>
<p>æ„é€ çŸ©é˜µçš„å‡½æ•°</p>
<blockquote>
<p><code>linspace(start, end, N)</code> äº§ç”ŸNä¸ªå‡åŒ€åˆ†å¸ƒäºstartå’Œendä¹‹é—´çš„å‘é‡ã€‚ åœ¨ç»˜å›¾æ—¶ç”¨äºäº§ç”Ÿxåæ ‡ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p><code>logspace(start, end, N)</code> äº§ç”ŸNä¸ªæŒ‡æ•°åˆ†å¸ƒäº10^startå’Œ10^endä¹‹é—´çš„å‘é‡ã€‚ åœ¨ç»˜å›¾æ—¶ç”¨äºäº§ç”Ÿxåæ ‡ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p>zeros(M, N)</p>
<p>zeros(N) = zeros(N, N)ã€‚</p>
<p>ones(M, N)</p>
<p>ones(N) = ones(N, N)ã€‚</p>
<p>rand(M, N) å€¼ä½äº0~1çš„éšæœºæ•°çš„çŸ©é˜µã€‚</p>
<p>rand(N) = rand(N, N)ã€‚</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">octave:<span class="number">66</span>&gt; x = <span class="built_in">linspace</span> (<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">x =</span><br><span class="line"></span><br><span class="line"> Columns <span class="number">1</span> through <span class="number">4</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">3.00000000000000</span>   <span class="number">3.25000000000000</span>   <span class="number">3.50000000000000</span>   <span class="number">3.75000000000000</span></span><br><span class="line"></span><br><span class="line"> Column <span class="number">5</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">4.00000000000000</span></span><br><span class="line"></span><br><span class="line">octave:<span class="number">67</span>&gt; <span class="built_in">logspace</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">6</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line"> Columns <span class="number">1</span> through <span class="number">4</span>:</span><br><span class="line"></span><br><span class="line">    <span class="number">10.0000000000000</span>    <span class="number">15.8489319246111</span>    <span class="number">25.1188643150958</span>    <span class="number">39.8107170553497</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">5</span> and <span class="number">6</span>:</span><br><span class="line"></span><br><span class="line">    <span class="number">63.0957344480193</span>   <span class="number">100.0000000000000</span></span><br></pre></td></tr></table></figure>
<h2 id="6-matrix-operation"><a href="#6-matrix-operation" class="headerlink" title="6. matrix operation"></a>6. matrix operation</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">A + B</span><br><span class="line">A - B</span><br><span class="line">A * B</span><br><span class="line">A \ B</span><br></pre></td></tr></table></figure>
<p>è¯´æ˜ï¼šA\Bä¸ºçŸ©é˜µå·¦é™¤ï¼Œç”¨äºæ±‚è§£çº¿æ€§æ–¹ç¨‹Wx=bï¼Œå…¶ä¸­Wä¸ºä¸€ä¸ªnxnçš„çŸ©é˜µï¼Œbä¸ºä¸€ä¸ªnç»´çš„åˆ—å‘é‡ã€‚ æ±‚è§£çº¿æ€§æ–¹å¼ç¤ºä¾‹ï¼š</p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">octave:<span class="number">15</span>&gt; W = [<span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span>; <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>; <span class="number">3</span> <span class="number">4</span> <span class="number">6</span> <span class="number">2</span>; <span class="number">2</span> <span class="number">7</span> <span class="number">10</span> <span class="number">5</span>];</span><br><span class="line">octave:<span class="number">16</span>&gt; b = [<span class="number">3</span>; <span class="number">5</span>; <span class="number">5</span>; <span class="number">8</span>];</span><br><span class="line">octave:<span class="number">17</span>&gt; x = W\b</span><br><span class="line">x =</span><br><span class="line"></span><br><span class="line">   <span class="number">1.0000</span></span><br><span class="line">   <span class="number">3.0000</span></span><br><span class="line">  <span class="number">-2.0000</span></span><br><span class="line">   <span class="number">1.0000</span></span><br></pre></td></tr></table></figure>
<p><strong>6.1 matrix transpose</strong></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">octave:<span class="number">9</span>&gt; x = <span class="built_in">rand</span>(<span class="number">3</span>)</span><br><span class="line">x =</span><br><span class="line"></span><br><span class="line">   <span class="number">0.0052581</span>   <span class="number">0.4446771</span>   <span class="number">0.3970036</span></span><br><span class="line">   <span class="number">0.7844458</span>   <span class="number">0.3317067</span>   <span class="number">0.9633000</span></span><br><span class="line">   <span class="number">0.0577080</span>   <span class="number">0.9015905</span>   <span class="number">0.0344771</span></span><br><span class="line"></span><br><span class="line">octave:<span class="number">10</span>&gt; x'</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">0.0052581</span>   <span class="number">0.7844458</span>   <span class="number">0.0577080</span></span><br><span class="line">   <span class="number">0.4446771</span>   <span class="number">0.3317067</span>   <span class="number">0.9015905</span></span><br><span class="line">   <span class="number">0.3970036</span>   <span class="number">0.9633000</span>   <span class="number">0.034477</span></span><br></pre></td></tr></table></figure>
<h2 id="7-plotting"><a href="#7-plotting" class="headerlink" title="7. plotting"></a>7. plotting</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; t=[<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">0.98</span>];</span><br><span class="line">&gt;&gt; t</span><br><span class="line">t =</span><br><span class="line"></span><br><span class="line"> Columns <span class="number">1</span> through <span class="number">10</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.00000</span>   <span class="number">0.01000</span>   <span class="number">0.02000</span>   <span class="number">0.03000</span>   <span class="number">0.04000</span>   <span class="number">0.05000</span>   <span class="number">0.06000</span>   <span class="number">0.07000</span>   <span class="number">0.08000</span>   <span class="number">0.09000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">11</span> through <span class="number">20</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.10000</span>   <span class="number">0.11000</span>   <span class="number">0.12000</span>   <span class="number">0.13000</span>   <span class="number">0.14000</span>   <span class="number">0.15000</span>   <span class="number">0.16000</span>   <span class="number">0.17000</span>   <span class="number">0.18000</span>   <span class="number">0.19000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">21</span> through <span class="number">30</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.20000</span>   <span class="number">0.21000</span>   <span class="number">0.22000</span>   <span class="number">0.23000</span>   <span class="number">0.24000</span>   <span class="number">0.25000</span>   <span class="number">0.26000</span>   <span class="number">0.27000</span>   <span class="number">0.28000</span>   <span class="number">0.29000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">31</span> through <span class="number">40</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.30000</span>   <span class="number">0.31000</span>   <span class="number">0.32000</span>   <span class="number">0.33000</span>   <span class="number">0.34000</span>   <span class="number">0.35000</span>   <span class="number">0.36000</span>   <span class="number">0.37000</span>   <span class="number">0.38000</span>   <span class="number">0.39000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">41</span> through <span class="number">50</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.40000</span>   <span class="number">0.41000</span>   <span class="number">0.42000</span>   <span class="number">0.43000</span>   <span class="number">0.44000</span>   <span class="number">0.45000</span>   <span class="number">0.46000</span>   <span class="number">0.47000</span>   <span class="number">0.48000</span>   <span class="number">0.49000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">51</span> through <span class="number">60</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.50000</span>   <span class="number">0.51000</span>   <span class="number">0.52000</span>   <span class="number">0.53000</span>   <span class="number">0.54000</span>   <span class="number">0.55000</span>   <span class="number">0.56000</span>   <span class="number">0.57000</span>   <span class="number">0.58000</span>   <span class="number">0.59000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">61</span> through <span class="number">70</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.60000</span>   <span class="number">0.61000</span>   <span class="number">0.62000</span>   <span class="number">0.63000</span>   <span class="number">0.64000</span>   <span class="number">0.65000</span>   <span class="number">0.66000</span>   <span class="number">0.67000</span>   <span class="number">0.68000</span>   <span class="number">0.69000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">71</span> through <span class="number">80</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.70000</span>   <span class="number">0.71000</span>   <span class="number">0.72000</span>   <span class="number">0.73000</span>   <span class="number">0.74000</span>   <span class="number">0.75000</span>   <span class="number">0.76000</span>   <span class="number">0.77000</span>   <span class="number">0.78000</span>   <span class="number">0.79000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">81</span> through <span class="number">90</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.80000</span>   <span class="number">0.81000</span>   <span class="number">0.82000</span>   <span class="number">0.83000</span>   <span class="number">0.84000</span>   <span class="number">0.85000</span>   <span class="number">0.86000</span>   <span class="number">0.87000</span>   <span class="number">0.88000</span>   <span class="number">0.89000</span></span><br><span class="line"></span><br><span class="line"> Columns <span class="number">91</span> through <span class="number">99</span>:</span><br><span class="line"></span><br><span class="line">   <span class="number">0.90000</span>   <span class="number">0.91000</span>   <span class="number">0.92000</span>   <span class="number">0.93000</span>   <span class="number">0.94000</span>   <span class="number">0.95000</span>   <span class="number">0.96000</span>   <span class="number">0.97000</span>   <span class="number">0.98000</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; y1=<span class="built_in">sin</span>(<span class="number">2</span>*<span class="built_in">pi</span>*<span class="number">4</span>*t);</span><br><span class="line">&gt;&gt; plot(t,y1)</span><br><span class="line">&gt;&gt; y2=<span class="built_in">cos</span>(<span class="number">2</span>*<span class="built_in">pi</span>*<span class="number">4</span>*t);</span><br><span class="line">&gt;&gt; plot(t,y2)</span><br><span class="line">&gt;&gt; hold on</span><br><span class="line">&gt;&gt; plot(t,y1)</span><br><span class="line">&gt;&gt; plot(t,y2,<span class="string">'r'</span>)</span><br><span class="line">&gt;&gt; xlabel(<span class="string">'time'</span>)</span><br><span class="line">&gt;&gt; ylabel(<span class="string">'value'</span>)</span><br><span class="line">&gt;&gt; legend(<span class="string">'sin'</span>,<span class="string">'cos'</span>)</span><br><span class="line">&gt;&gt; title(<span class="string">'my plot'</span>)</span><br><span class="line">&gt;&gt; print -dpng <span class="string">'myPlot.png'</span></span><br><span class="line">warning: print.m: fig2dev binary is not available.</span><br><span class="line">Some output formats are not available.</span><br></pre></td></tr></table></figure>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; figure(<span class="number">2</span>); plot(t, y2)</span><br><span class="line">&gt;&gt; subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">&gt;&gt; plot(t,y1)</span><br><span class="line">&gt;&gt; subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">&gt;&gt; plot(t,y2)</span><br><span class="line">&gt;&gt; axis([<span class="number">0.5</span> <span class="number">1</span> <span class="number">-1</span> <span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p><img src="/images/ml/coursera/ml-ng-w2-11.png" alt="matric"></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; clf;</span><br><span class="line">&gt;&gt; A = <span class="built_in">magic</span>(<span class="number">5</span>)</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">17</span>   <span class="number">24</span>    <span class="number">1</span>    <span class="number">8</span>   <span class="number">15</span></span><br><span class="line">   <span class="number">23</span>    <span class="number">5</span>    <span class="number">7</span>   <span class="number">14</span>   <span class="number">16</span></span><br><span class="line">    <span class="number">4</span>    <span class="number">6</span>   <span class="number">13</span>   <span class="number">20</span>   <span class="number">22</span></span><br><span class="line">   <span class="number">10</span>   <span class="number">12</span>   <span class="number">19</span>   <span class="number">21</span>    <span class="number">3</span></span><br><span class="line">   <span class="number">11</span>   <span class="number">18</span>   <span class="number">25</span>    <span class="number">2</span>    <span class="number">9</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; imagesc(A)</span><br><span class="line">&gt;&gt; imagesc(A), colorbar, colormap gray;</span><br></pre></td></tr></table></figure>
<p><img src="/images/ml/coursera/ml-ng-w2-12.png" alt="matric"></p>
<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; imagesc(<span class="built_in">magic</span>(<span class="number">15</span>)), colorbar, colormap gray;</span><br><span class="line">&gt;&gt; a=<span class="number">1</span>,b=<span class="number">2</span>,c=<span class="number">3</span></span><br><span class="line">a =  <span class="number">1</span></span><br><span class="line">b =  <span class="number">2</span></span><br><span class="line">c =  <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p><img src="/images/ml/coursera/ml-ng-w2-13.png" alt="matric"></p>
<h2 id="8-ng"><a href="#8-ng" class="headerlink" title="8. ng"></a>8. ng</h2><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line">&gt;&gt; A = [<span class="number">1</span> <span class="number">2</span>; <span class="number">3</span> <span class="number">4</span>; <span class="number">5</span> <span class="number">6</span>;]</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">   <span class="number">5</span>   <span class="number">6</span></span><br><span class="line">&gt;&gt; </span><br><span class="line">save hello.mat v; (å‹ç¼©æ¯”ä¾‹å¾ˆå¤§)</span><br><span class="line">save hello.txt v -ascii <span class="comment">% save as text(ASCII)</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; who</span><br><span class="line">Variables in the current scope:</span><br><span class="line"></span><br><span class="line">A</span><br><span class="line"></span><br><span class="line">&gt;&gt; whos</span><br><span class="line">Variables in the current scope:</span><br><span class="line"></span><br><span class="line">   Attr Name        Size                     Bytes  Class</span><br><span class="line">   ==== ====        ====                     =====  =====</span><br><span class="line">        A           <span class="number">3</span>x2                         <span class="number">48</span>  double</span><br><span class="line"></span><br><span class="line">Total is <span class="number">6</span> elements using <span class="number">48</span> bytes</span><br><span class="line"></span><br><span class="line">&gt;&gt; clear</span><br><span class="line">&gt;&gt; A(<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">6</span></span><br><span class="line">&gt;&gt; A(:,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">4</span></span><br><span class="line">   <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A(<span class="number">2</span>,:)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">   <span class="number">5</span>   <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A([<span class="number">1</span> <span class="number">3</span>], :)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">2</span></span><br><span class="line">   <span class="number">5</span>   <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A(:,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">4</span></span><br><span class="line">   <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A(:,<span class="number">2</span>) = [<span class="number">10</span>; <span class="number">11</span>; <span class="number">12</span>]</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">    <span class="number">1</span>   <span class="number">10</span></span><br><span class="line">    <span class="number">3</span>   <span class="number">11</span></span><br><span class="line">    <span class="number">5</span>   <span class="number">12</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A = [A, [<span class="number">100</span>; <span class="number">101</span>; <span class="number">102</span>]];</span><br><span class="line">&gt;&gt; A</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>    <span class="number">10</span>   <span class="number">100</span></span><br><span class="line">     <span class="number">3</span>    <span class="number">11</span>   <span class="number">101</span></span><br><span class="line">     <span class="number">5</span>    <span class="number">12</span>   <span class="number">102</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; [<span class="number">100</span>;<span class="number">101</span>;<span class="number">102</span>]</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">100</span></span><br><span class="line">   <span class="number">101</span></span><br><span class="line">   <span class="number">102</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">size</span>(A)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">3</span>   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A(:)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span></span><br><span class="line">     <span class="number">3</span></span><br><span class="line">     <span class="number">5</span></span><br><span class="line">    <span class="number">10</span></span><br><span class="line">    <span class="number">11</span></span><br><span class="line">    <span class="number">12</span></span><br><span class="line">   <span class="number">100</span></span><br><span class="line">   <span class="number">101</span></span><br><span class="line">   <span class="number">102</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A = [<span class="number">1</span> <span class="number">2</span>; <span class="number">3</span> <span class="number">4</span>; <span class="number">5</span> <span class="number">6</span>;]</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">   <span class="number">5</span>   <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; B = [<span class="number">11</span> <span class="number">12</span>; <span class="number">13</span> <span class="number">14</span>; <span class="number">15</span> <span class="number">16</span>]</span><br><span class="line">B =</span><br><span class="line"></span><br><span class="line">   <span class="number">11</span>   <span class="number">12</span></span><br><span class="line">   <span class="number">13</span>   <span class="number">14</span></span><br><span class="line">   <span class="number">15</span>   <span class="number">16</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; C = [A B]</span><br><span class="line">C =</span><br><span class="line"></span><br><span class="line">    <span class="number">1</span>    <span class="number">2</span>   <span class="number">11</span>   <span class="number">12</span></span><br><span class="line">    <span class="number">3</span>    <span class="number">4</span>   <span class="number">13</span>   <span class="number">14</span></span><br><span class="line">    <span class="number">5</span>    <span class="number">6</span>   <span class="number">15</span>   <span class="number">16</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; D = [A;B]</span><br><span class="line">D =</span><br><span class="line"></span><br><span class="line">    <span class="number">1</span>    <span class="number">2</span></span><br><span class="line">    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">    <span class="number">5</span>    <span class="number">6</span></span><br><span class="line">   <span class="number">11</span>   <span class="number">12</span></span><br><span class="line">   <span class="number">13</span>   <span class="number">14</span></span><br><span class="line">   <span class="number">15</span>   <span class="number">16</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">size</span>(D)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">6</span>   <span class="number">2</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; [A, B]</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">1</span>    <span class="number">2</span>   <span class="number">11</span>   <span class="number">12</span></span><br><span class="line">    <span class="number">3</span>    <span class="number">4</span>   <span class="number">13</span>   <span class="number">14</span></span><br><span class="line">    <span class="number">5</span>    <span class="number">6</span>   <span class="number">15</span>   <span class="number">16</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; [A B]</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">1</span>    <span class="number">2</span>   <span class="number">11</span>   <span class="number">12</span></span><br><span class="line">    <span class="number">3</span>    <span class="number">4</span>   <span class="number">13</span>   <span class="number">14</span></span><br><span class="line">    <span class="number">5</span>    <span class="number">6</span>   <span class="number">15</span>   <span class="number">16</span></span><br><span class="line"></span><br><span class="line">&gt;&gt;</span><br><span class="line">&gt;&gt;</span><br><span class="line">&gt;&gt;&gt;&gt; A .* B</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">11</span>   <span class="number">24</span></span><br><span class="line">   <span class="number">39</span>   <span class="number">56</span></span><br><span class="line">   <span class="number">75</span>   <span class="number">96</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A .^ <span class="number">2</span></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">1</span>    <span class="number">4</span></span><br><span class="line">    <span class="number">9</span>   <span class="number">16</span></span><br><span class="line">   <span class="number">25</span>   <span class="number">36</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; v = [<span class="number">1</span>; <span class="number">2</span>; <span class="number">3</span>]</span><br><span class="line">v =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="number">1</span> ./ v</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">1.00000</span></span><br><span class="line">   <span class="number">0.50000</span></span><br><span class="line">   <span class="number">0.33333</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="number">1</span> ./ A</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">1.00000</span>   <span class="number">0.50000</span></span><br><span class="line">   <span class="number">0.33333</span>   <span class="number">0.25000</span></span><br><span class="line">   <span class="number">0.20000</span>   <span class="number">0.16667</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">log</span>(v)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">0.00000</span></span><br><span class="line">   <span class="number">0.69315</span></span><br><span class="line">   <span class="number">1.09861</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">exp</span>(v)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">2.7183</span></span><br><span class="line">    <span class="number">7.3891</span></span><br><span class="line">   <span class="number">20.0855</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">abs</span>(v)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">abs</span>([<span class="number">-1</span>; <span class="number">-2</span>; <span class="number">-3</span>])</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; V = v</span><br><span class="line">V =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; V</span><br><span class="line">V =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; V</span><br><span class="line">V =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; -V</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">  <span class="number">-1</span></span><br><span class="line">  <span class="number">-2</span></span><br><span class="line">  <span class="number">-3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; V + <span class="built_in">ones</span>(<span class="built_in">length</span>(V))</span><br><span class="line">warning: operator +: automatic broadcasting operation applied</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span>   <span class="number">2</span>   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span>   <span class="number">3</span>   <span class="number">3</span></span><br><span class="line">   <span class="number">4</span>   <span class="number">4</span>   <span class="number">4</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">length</span>(V)</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">3</span></span><br><span class="line">&gt;&gt; <span class="built_in">ones</span>(<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; V + <span class="built_in">ones</span>(<span class="number">3</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line">   <span class="number">4</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; V + <span class="number">2</span></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">3</span></span><br><span class="line">   <span class="number">4</span></span><br><span class="line">   <span class="number">5</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; V</span><br><span class="line">V =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">   <span class="number">5</span>   <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A'</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">3</span>   <span class="number">5</span></span><br><span class="line">   <span class="number">2</span>   <span class="number">4</span>   <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; a  = [<span class="number">1</span> <span class="number">15</span> <span class="number">2</span> <span class="number">0.5</span>]</span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">    <span class="number">1.00000</span>   <span class="number">15.00000</span>    <span class="number">2.00000</span>    <span class="number">0.50000</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; val = max(a)</span><br><span class="line">val =  <span class="number">15</span></span><br><span class="line">&gt;&gt; [val, ind] = max(a)</span><br><span class="line">val =  <span class="number">15</span></span><br><span class="line">ind =  <span class="number">2</span></span><br><span class="line">&gt;&gt; max(A)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">5</span>   <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line">   <span class="number">5</span>   <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; a</span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">    <span class="number">1.00000</span>   <span class="number">15.00000</span>    <span class="number">2.00000</span>    <span class="number">0.50000</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; a &lt; <span class="number">3</span></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">find</span>(a &lt; <span class="number">3</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">3</span>   <span class="number">4</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A = magix(<span class="number">3</span>)</span><br><span class="line">error: <span class="string">'magix'</span> undefined near line <span class="number">1</span> column <span class="number">5</span></span><br><span class="line">&gt;&gt; A = <span class="built_in">magic</span>(<span class="number">3</span>)</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">8</span>   <span class="number">1</span>   <span class="number">6</span></span><br><span class="line">   <span class="number">3</span>   <span class="number">5</span>   <span class="number">7</span></span><br><span class="line">   <span class="number">4</span>   <span class="number">9</span>   <span class="number">2</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; [r, c] = <span class="built_in">find</span>(A &gt;= <span class="number">7</span>)</span><br><span class="line">r =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line"></span><br><span class="line">c =</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">7</span></span><br><span class="line">&gt;&gt; sum(a)</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">18.500</span></span><br><span class="line">&gt;&gt; prod(a)</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">15</span></span><br><span class="line">&gt;&gt; <span class="built_in">floor</span>(a)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">1</span>   <span class="number">15</span>    <span class="number">2</span>    <span class="number">0</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">ceil</span>(a)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">1</span>   <span class="number">15</span>    <span class="number">2</span>    <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">rand</span>(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">0.708800</span>   <span class="number">0.905101</span>   <span class="number">0.837562</span></span><br><span class="line">   <span class="number">0.264139</span>   <span class="number">0.265985</span>   <span class="number">0.671546</span></span><br><span class="line">   <span class="number">0.411435</span>   <span class="number">0.058028</span>   <span class="number">0.454436</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; max(<span class="built_in">rand</span>(<span class="number">3</span>), <span class="built_in">rand</span>(<span class="number">3</span>))</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">0.87641</span>   <span class="number">0.74541</span>   <span class="number">0.92027</span></span><br><span class="line">   <span class="number">0.61292</span>   <span class="number">0.57756</span>   <span class="number">0.95694</span></span><br><span class="line">   <span class="number">0.26555</span>   <span class="number">0.76822</span>   <span class="number">0.63566</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">8</span>   <span class="number">1</span>   <span class="number">6</span></span><br><span class="line">   <span class="number">3</span>   <span class="number">5</span>   <span class="number">7</span></span><br><span class="line">   <span class="number">4</span>   <span class="number">9</span>   <span class="number">2</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; max(A, [], <span class="number">1</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">8</span>   <span class="number">9</span>   <span class="number">7</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; max(A, [], <span class="number">2</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">8</span></span><br><span class="line">   <span class="number">7</span></span><br><span class="line">   <span class="number">9</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; max(A)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">8</span>   <span class="number">9</span>   <span class="number">7</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; max(max(A))</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">9</span></span><br><span class="line">&gt;&gt; A(:)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">8</span></span><br><span class="line">   <span class="number">3</span></span><br><span class="line">   <span class="number">4</span></span><br><span class="line">   <span class="number">1</span></span><br><span class="line">   <span class="number">5</span></span><br><span class="line">   <span class="number">9</span></span><br><span class="line">   <span class="number">6</span></span><br><span class="line">   <span class="number">7</span></span><br><span class="line">   <span class="number">2</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; max(A(:))</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">9</span></span><br><span class="line">&gt;&gt;</span><br><span class="line">&gt;&gt;</span><br><span class="line">&gt;&gt; A = <span class="built_in">magic</span>(<span class="number">9</span>)</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">47</span>   <span class="number">58</span>   <span class="number">69</span>   <span class="number">80</span>    <span class="number">1</span>   <span class="number">12</span>   <span class="number">23</span>   <span class="number">34</span>   <span class="number">45</span></span><br><span class="line">   <span class="number">57</span>   <span class="number">68</span>   <span class="number">79</span>    <span class="number">9</span>   <span class="number">11</span>   <span class="number">22</span>   <span class="number">33</span>   <span class="number">44</span>   <span class="number">46</span></span><br><span class="line">   <span class="number">67</span>   <span class="number">78</span>    <span class="number">8</span>   <span class="number">10</span>   <span class="number">21</span>   <span class="number">32</span>   <span class="number">43</span>   <span class="number">54</span>   <span class="number">56</span></span><br><span class="line">   <span class="number">77</span>    <span class="number">7</span>   <span class="number">18</span>   <span class="number">20</span>   <span class="number">31</span>   <span class="number">42</span>   <span class="number">53</span>   <span class="number">55</span>   <span class="number">66</span></span><br><span class="line">    <span class="number">6</span>   <span class="number">17</span>   <span class="number">19</span>   <span class="number">30</span>   <span class="number">41</span>   <span class="number">52</span>   <span class="number">63</span>   <span class="number">65</span>   <span class="number">76</span></span><br><span class="line">   <span class="number">16</span>   <span class="number">27</span>   <span class="number">29</span>   <span class="number">40</span>   <span class="number">51</span>   <span class="number">62</span>   <span class="number">64</span>   <span class="number">75</span>    <span class="number">5</span></span><br><span class="line">   <span class="number">26</span>   <span class="number">28</span>   <span class="number">39</span>   <span class="number">50</span>   <span class="number">61</span>   <span class="number">72</span>   <span class="number">74</span>    <span class="number">4</span>   <span class="number">15</span></span><br><span class="line">   <span class="number">36</span>   <span class="number">38</span>   <span class="number">49</span>   <span class="number">60</span>   <span class="number">71</span>   <span class="number">73</span>    <span class="number">3</span>   <span class="number">14</span>   <span class="number">25</span></span><br><span class="line">   <span class="number">37</span>   <span class="number">48</span>   <span class="number">59</span>   <span class="number">70</span>   <span class="number">81</span>    <span class="number">2</span>   <span class="number">13</span>   <span class="number">24</span>   <span class="number">35</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; sum(A,<span class="number">1</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">369</span>   <span class="number">369</span>   <span class="number">369</span>   <span class="number">369</span>   <span class="number">369</span>   <span class="number">369</span>   <span class="number">369</span>   <span class="number">369</span>   <span class="number">369</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; sum(A,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">369</span></span><br><span class="line">   <span class="number">369</span></span><br><span class="line">   <span class="number">369</span></span><br><span class="line">   <span class="number">369</span></span><br><span class="line">   <span class="number">369</span></span><br><span class="line">   <span class="number">369</span></span><br><span class="line">   <span class="number">369</span></span><br><span class="line">   <span class="number">369</span></span><br><span class="line">   <span class="number">369</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">eye</span>(<span class="number">9</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">Diagonal Matrix</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">47</span>   <span class="number">58</span>   <span class="number">69</span>   <span class="number">80</span>    <span class="number">1</span>   <span class="number">12</span>   <span class="number">23</span>   <span class="number">34</span>   <span class="number">45</span></span><br><span class="line">   <span class="number">57</span>   <span class="number">68</span>   <span class="number">79</span>    <span class="number">9</span>   <span class="number">11</span>   <span class="number">22</span>   <span class="number">33</span>   <span class="number">44</span>   <span class="number">46</span></span><br><span class="line">   <span class="number">67</span>   <span class="number">78</span>    <span class="number">8</span>   <span class="number">10</span>   <span class="number">21</span>   <span class="number">32</span>   <span class="number">43</span>   <span class="number">54</span>   <span class="number">56</span></span><br><span class="line">   <span class="number">77</span>    <span class="number">7</span>   <span class="number">18</span>   <span class="number">20</span>   <span class="number">31</span>   <span class="number">42</span>   <span class="number">53</span>   <span class="number">55</span>   <span class="number">66</span></span><br><span class="line">    <span class="number">6</span>   <span class="number">17</span>   <span class="number">19</span>   <span class="number">30</span>   <span class="number">41</span>   <span class="number">52</span>   <span class="number">63</span>   <span class="number">65</span>   <span class="number">76</span></span><br><span class="line">   <span class="number">16</span>   <span class="number">27</span>   <span class="number">29</span>   <span class="number">40</span>   <span class="number">51</span>   <span class="number">62</span>   <span class="number">64</span>   <span class="number">75</span>    <span class="number">5</span></span><br><span class="line">   <span class="number">26</span>   <span class="number">28</span>   <span class="number">39</span>   <span class="number">50</span>   <span class="number">61</span>   <span class="number">72</span>   <span class="number">74</span>    <span class="number">4</span>   <span class="number">15</span></span><br><span class="line">   <span class="number">36</span>   <span class="number">38</span>   <span class="number">49</span>   <span class="number">60</span>   <span class="number">71</span>   <span class="number">73</span>    <span class="number">3</span>   <span class="number">14</span>   <span class="number">25</span></span><br><span class="line">   <span class="number">37</span>   <span class="number">48</span>   <span class="number">59</span>   <span class="number">70</span>   <span class="number">81</span>    <span class="number">2</span>   <span class="number">13</span>   <span class="number">24</span>   <span class="number">35</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A .* <span class="built_in">eye</span>(<span class="number">9</span>)</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">   <span class="number">47</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span></span><br><span class="line">    <span class="number">0</span>   <span class="number">68</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span></span><br><span class="line">    <span class="number">0</span>    <span class="number">0</span>    <span class="number">8</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span></span><br><span class="line">    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>   <span class="number">20</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span></span><br><span class="line">    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>   <span class="number">41</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span></span><br><span class="line">    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>   <span class="number">62</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span></span><br><span class="line">    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>   <span class="number">74</span>    <span class="number">0</span>    <span class="number">0</span></span><br><span class="line">    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>   <span class="number">14</span>    <span class="number">0</span></span><br><span class="line">    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>    <span class="number">0</span>   <span class="number">35</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; sum(sum(A .* <span class="built_in">eye</span>(<span class="number">9</span>)))</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">369</span></span><br><span class="line">&gt;&gt; <span class="built_in">flipud</span>(<span class="built_in">eye</span>(<span class="number">9</span>))</span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">Permutation Matrix</span><br><span class="line"></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">0</span>   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line">   <span class="number">1</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span>   <span class="number">0</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; sum(sum(A.*<span class="built_in">flipud</span>(<span class="built_in">eye</span>(<span class="number">9</span>))))</span><br><span class="line"><span class="built_in">ans</span> =  <span class="number">369</span></span><br><span class="line">&gt;&gt; A</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">47</span>   <span class="number">58</span>   <span class="number">69</span>   <span class="number">80</span>    <span class="number">1</span>   <span class="number">12</span>   <span class="number">23</span>   <span class="number">34</span>   <span class="number">45</span></span><br><span class="line">   <span class="number">57</span>   <span class="number">68</span>   <span class="number">79</span>    <span class="number">9</span>   <span class="number">11</span>   <span class="number">22</span>   <span class="number">33</span>   <span class="number">44</span>   <span class="number">46</span></span><br><span class="line">   <span class="number">67</span>   <span class="number">78</span>    <span class="number">8</span>   <span class="number">10</span>   <span class="number">21</span>   <span class="number">32</span>   <span class="number">43</span>   <span class="number">54</span>   <span class="number">56</span></span><br><span class="line">   <span class="number">77</span>    <span class="number">7</span>   <span class="number">18</span>   <span class="number">20</span>   <span class="number">31</span>   <span class="number">42</span>   <span class="number">53</span>   <span class="number">55</span>   <span class="number">66</span></span><br><span class="line">    <span class="number">6</span>   <span class="number">17</span>   <span class="number">19</span>   <span class="number">30</span>   <span class="number">41</span>   <span class="number">52</span>   <span class="number">63</span>   <span class="number">65</span>   <span class="number">76</span></span><br><span class="line">   <span class="number">16</span>   <span class="number">27</span>   <span class="number">29</span>   <span class="number">40</span>   <span class="number">51</span>   <span class="number">62</span>   <span class="number">64</span>   <span class="number">75</span>    <span class="number">5</span></span><br><span class="line">   <span class="number">26</span>   <span class="number">28</span>   <span class="number">39</span>   <span class="number">50</span>   <span class="number">61</span>   <span class="number">72</span>   <span class="number">74</span>    <span class="number">4</span>   <span class="number">15</span></span><br><span class="line">   <span class="number">36</span>   <span class="number">38</span>   <span class="number">49</span>   <span class="number">60</span>   <span class="number">71</span>   <span class="number">73</span>    <span class="number">3</span>   <span class="number">14</span>   <span class="number">25</span></span><br><span class="line">   <span class="number">37</span>   <span class="number">48</span>   <span class="number">59</span>   <span class="number">70</span>   <span class="number">81</span>    <span class="number">2</span>   <span class="number">13</span>   <span class="number">24</span>   <span class="number">35</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; A = <span class="built_in">magic</span>(<span class="number">3</span>)</span><br><span class="line">A =</span><br><span class="line"></span><br><span class="line">   <span class="number">8</span>   <span class="number">1</span>   <span class="number">6</span></span><br><span class="line">   <span class="number">3</span>   <span class="number">5</span>   <span class="number">7</span></span><br><span class="line">   <span class="number">4</span>   <span class="number">9</span>   <span class="number">2</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; temp = pinv(A)</span><br><span class="line">temp =</span><br><span class="line"></span><br><span class="line">   <span class="number">0.147222</span>  <span class="number">-0.144444</span>   <span class="number">0.063889</span></span><br><span class="line">  <span class="number">-0.061111</span>   <span class="number">0.022222</span>   <span class="number">0.105556</span></span><br><span class="line">  <span class="number">-0.019444</span>   <span class="number">0.188889</span>  <span class="number">-0.102778</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><blockquote>
<ol>
<li>coursera week 2 learning notes</li>
<li><a href="http://blog.chenming.info/blog/2012/07/15/learn-octave/" target="_blank" rel="external">å­¦ä¹ ä¸€ç‚¹</a></li>
</ol>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Coursera Week 2 - Linear Regression with Multiple Variables]]></title>
      <url>http://shopee.ai/2016/10/08/ml/coursera-ng-w2-01-Linear-Regression/</url>
      <content type="html"><![CDATA[<p>coursera week 2 - linear regression with multiple variables 1</p>
<a id="more"></a>
<h2 id="1-Multiple-Features"><a href="#1-Multiple-Features" class="headerlink" title="1. Multiple Features"></a>1. Multiple Features</h2><p><img src="/images/ml/coursera/ml-ng-w2-01.png" alt="Multiple Features"></p>
<p>$<br>\begin{align}x_j^{(i)} &amp;= \text{value of feature } j \text{ in the }i^{th}\text{ training example} \newline<br>x^{(i)}&amp; = \text{the column vector of all the feature inputs of the }i^{th}\text{ training example} \newline<br>m &amp;= \text{the number of training examples} \newline<br>n &amp;= \left| x^{(i)} \right| ; \text{(the number of features)} \end{align}<br>$</p>
<blockquote>
<p>Macdown Version 0.6.4 (786) MathJax the same this web</p>
</blockquote>
<h3 id="1-1-hypothesis-function"><a href="#1-1-hypothesis-function" class="headerlink" title="1.1 hypothesis function"></a>1.1 hypothesis function</h3><p>Now define the multivariable form of the hypothesis function as follows, accommodating these multiple features:</p>
<p>$<br>h_\theta (x) = \theta_0 + \theta_1 x_1 + \theta_2 x_2 + \theta_3 x_3 + \cdots + \theta_n x_n<br>$</p>
<p><strong>multivariable hypothesis function</strong></p>
<p>Using the definition of matrix multiplication, our multivariable hypothesis function can be concisely represented as:</p>
<blockquote>
<p>$<br>\begin{align}<br>h_\theta(x) =\begin{bmatrix}\theta_0 \hspace{2em}  \theta_1 \hspace{2em}  â€¦  \hspace{2em}  \theta_n\end{bmatrix}\begin{bmatrix}x_0 \newline x_1 \newline \vdots \newline x_n\end{bmatrix}= \theta^T x<br>\end{align}<br>$</p>
</blockquote>
<p>The training examples are stored in X row-wise, like such:</p>
<blockquote>
<p>$<br>\begin{align}<br>X =<br>\begin{bmatrix}x^{(1)}_0 &amp; x^{(1)}_1  \newline x^{(2)}_0 &amp; x^{(2)}_1  \newline<br>x^{(3)}_0 &amp; x^{(3)}_1 \end{bmatrix}&amp;,\theta = \begin{bmatrix}\theta_0 \newline<br>\theta_1 \newline<br>\end{bmatrix}<br>\end{align}<br>$</p>
</blockquote>
<p>You can calculate the hypothesis as a column vector of size (m x 1) with:</p>
<blockquote>
<p>$<br>h_\theta(X) = X \theta<br>$</p>
<p>For the rest of these notes,  X will represent a matrix of training examples $x_{(i)}$ </p>
</blockquote>
<h2 id="2-Cost-function"><a href="#2-Cost-function" class="headerlink" title="2. Cost function"></a>2. Cost function</h2><p>For the parameter vector Î¸ (of type $\mathbb{R}^{n+1}$ or in $\mathbb{R}^{(n+1) \times 1}$, the cost function is:</p>
<p>$<br>J(\theta) = \dfrac {1}{2m} \displaystyle \sum_{i=1}^m \left (h_\theta (x^{(i)}) - y^{(i)} \right)^2<br>$</p>
<p><code>The vectorized version is:</code></p>
<p>$<br>J(\theta) = \dfrac {1}{2m} (X\theta - \vec{y})^{T} (X\theta - \vec{y})<br>$</p>
<blockquote>
<p>vectorized version is very good!</p>
</blockquote>
<h2 id="3-Gradient-Desc-Multivariable"><a href="#3-Gradient-Desc-Multivariable" class="headerlink" title="3. Gradient Desc Multivariable"></a>3. Gradient Desc Multivariable</h2><p><code>Matrix Notation</code></p>
<p>The Gradient Descent rule can be expressed as:</p>
<p>$<br>\theta := \theta - \alpha \nabla J(\theta)<br>$</p>
<p>Where $\nabla J(\theta)$ is a column vector of the form:</p>
<p>$<br>\nabla J(\theta)  = \begin{bmatrix}\frac{\partial J(\theta)}{\partial \theta_0}   \newline \frac{\partial J(\theta)}{\partial \theta_1}   \newline \vdots   \newline \frac{\partial J(\theta)}{\partial \theta_n} \end{bmatrix}<br>$</p>
<p>The j-th component of the gradient is the summation of the product of two terms:</p>
<p>$<br>\begin{align}<br>\; &amp;\frac{\partial J(\theta)}{\partial \theta_j} &amp;=&amp;  \frac{1}{m} \sum\limits_{i=1}^{m}  \left(h_\theta(x^{(i)}) - y^{(i)} \right) \cdot x_j^{(i)} \newline<br>\; &amp; &amp;=&amp; \frac{1}{m} \sum\limits_{i=1}^{m}   x_j^{(i)} \cdot \left(h_\theta(x^{(i)}) - y^{(i)}  \right)<br>\end{align}<br>$</p>
<blockquote>
<p>åœ¨æ•°å­¦ä¸­ï¼Œä¸€ä¸ªå¤šå˜é‡çš„å‡½æ•°çš„åå¯¼æ•°æ˜¯å®ƒå…³äºå…¶ä¸­ä¸€ä¸ªå˜é‡çš„å¯¼æ•°ï¼Œè€Œä¿æŒå…¶ä»–å˜é‡æ’å®šã€‚</p>
</blockquote>
<p>Sometimes, the summation of the product of two terms can be expressed as the product of two vectors.</p>
<blockquote>
<p>$<br>\begin{align}\; &amp;\frac{\partial J(\theta)}{\partial \theta_j} = \frac1m  \vec{x_j}^{T} (X\theta - \vec{y}) \newline<br>&amp;\nabla J(\theta)  =  \frac 1m X^{T} (X\theta - \vec{y}) \newline<br>\end{align}<br>$</p>
</blockquote>
<p>Finally, the matrix notation (vectorized) of the Gradient Descent rule is:</p>
<p>$<br>\theta := \theta - \frac{\alpha}{m} X^{T} (X\theta - \vec{y})<br>$</p>
<p>The gradient descent equation itself is generally the same form; we just have to repeat it for our â€˜nâ€™ features:</p>
<p>$<br>\begin{align}<br>&amp; \text{repeat until convergence:} \; \lbrace \newline<br>\; &amp; \theta_0 := \theta_0 - \alpha \frac{1}{m} \sum\limits_{i=1}^{m}  (h_\theta(x^{(i)}) - y^{(i)}) \cdot x_0^{(i)}\newline<br>\; &amp; \theta_1 := \theta_1 - \alpha \frac{1}{m} \sum\limits_{i=1}^{m} (h_\theta(x^{(i)}) - y^{(i)}) \cdot x_1^{(i)} \newline<br>\; &amp; \theta_2 := \theta_2 - \alpha \frac{1}{m} \sum\limits_{i=1}^{m} (h_\theta(x^{(i)}) - y^{(i)}) \cdot x_2^{(i)} \newline<br>&amp; \cdots<br>\newline \rbrace<br>\end{align}<br>$</p>
<p>In other words:</p>
<p>$<br>\begin{align}<br>&amp; \text{repeat until convergence:} \; \lbrace \newline \;<br>&amp; \theta_j := \theta_j - \alpha \frac{1}{m} \sum\limits_{i=1}^{m} (h_\theta(x^{(i)}) - y^{(i)}) \cdot x_j^{(i)} \;  &amp; \text{for j := 0..n}<br>\newline \rbrace<br>\end{align}<br>$</p>
<h3 id="3-1-Feature-Scaling"><a href="#3-1-Feature-Scaling" class="headerlink" title="3.1 Feature Scaling"></a>3.1 Feature Scaling</h3><p>Idea : Make sure features are on a similar scale ç‰¹å¾ç¼©æ”¾</p>
<p><img src="/images/ml/coursera/ml-ng-w2-02.png" alt="Multiple Features"></p>
<blockquote>
<p>Get every feature into approximately a $-1 \leq x_i \leq 1$ range.</p>
<p>Replace $x_i$ with $x_i - u_i$ to make features have approximately zero mean (Do not apply to $x_0$ = 1).</p>
<p>å¦‚æœå¤šä¸ªç‰¹å¾å€¼ï¼Œå¤§å¤šå¤„åœ¨ä¸€ä¸ªç›¸è¿‘çš„èŒƒå›´ï¼Œæ¢¯åº¦ä¸‹é™å°±èƒ½æ›´å¿«çš„æ”¶æ•›ã€‚</p>
</blockquote>
<p>å› ä¸º 2000/5 æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥è½®å»“å›¾ï¼Œä½¿å¾—æ¤­åœ†æ›´åŠ çš„ç˜¦é•¿ï¼Œå¥½æ¯” $J(\theta)$ æ”¶æ•›çš„æ›´æ…¢ã€‚</p>
<h3 id="3-2-learning-rate"><a href="#3-2-learning-rate" class="headerlink" title="3.2 learning rate"></a>3.2 learning rate</h3><p>$<br>\begin{align}<br>\theta_j := \theta_j - \alpha \frac{\partial}{\partial \theta_j} J(\theta)<br>\end{align}<br>$</p>
<ul>
<li>Debugging : How to make sure gradient descent is working correctly</li>
<li>How to choose learning rate $\alpha$</li>
</ul>
<p><img src="/images/ml/coursera/ml-ng-w2-03.png" alt="Multiple Features"></p>
<p><strong>Summary</strong></p>
<ul>
<li>if $\alpha$ is too small: slow convergence [kÉ™nâ€™vÉœËdÊ’É™ns] æ”¶æ•›</li>
<li>if $\alpha$ is too large: $J(\theta)$ may not decrease on every iteration; may not converge.</li>
</ul>
<p>To choose $\alpha$, try</p>
<p>â€¦, 0.001, 0.01, 0.1, 1, â€¦</p>
<h2 id="4-Polynomial-Regression"><a href="#4-Polynomial-Regression" class="headerlink" title="4. Polynomial Regression"></a>4. Polynomial Regression</h2><p><img src="/images/ml/coursera/ml-ng-w2-04.png" alt="Polynomial"></p>
<h3 id="4-1-Polynomial-Regression"><a href="#4-1-Polynomial-Regression" class="headerlink" title="4.1 Polynomial Regression"></a>4.1 Polynomial Regression</h3><p><img src="/images/ml/coursera/ml-ng-w2-05.png" alt="Polynomial [,pÉ’lÉª&#39;nÉ™ÊŠmÉªÉ™l]"></p>
<blockquote>
<p>Feature normalization is very important</p>
</blockquote>
<h3 id="4-2-Choice-of-features"><a href="#4-2-Choice-of-features" class="headerlink" title="4.2 Choice of features"></a>4.2 Choice of features</h3><p><img src="/images/ml/coursera/ml-ng-w2-06.png" alt="Choice of features"></p>
<p>@2017-02-10 review done</p>
<h2 id="5-Normal-Equation"><a href="#5-Normal-Equation" class="headerlink" title="5. Normal Equation"></a>5. Normal Equation</h2><p><img src="/images/ml/coursera/ml-ng-w2-07.png" alt="Normal Equation"></p>
<blockquote>
<p>$\theta = (X^T X)^{-1}X^T y$</p>
</blockquote>
<h3 id="5-1-num-and-vector"><a href="#5-1-num-and-vector" class="headerlink" title="5.1 num and vector"></a>5.1 num and vector</h3><p><img src="/images/ml/coursera/ml-ng-w2-08.png" alt="Normal Equation"></p>
<blockquote>
<p>$<br>J(\theta) = \dfrac {1}{2m} (X\theta - \vec{y})^{T} (X\theta - \vec{y})<br>$</p>
<p>$<br>\begin{align}\; &amp;\frac{\partial J(\theta)}{\partial \theta_j} = \frac1m  \vec{x_j}^{T} (X\theta - \vec{y}) \newline<br>&amp;\nabla J(\theta)  =  \frac 1m X^{T} (X\theta - \vec{y}) \newline<br>\end{align}<br>$</p>
</blockquote>
<h3 id="5-2-house-price-example"><a href="#5-2-house-price-example" class="headerlink" title="5.2 house price example"></a>5.2 house price example</h3><p><img src="/images/ml/coursera/ml-ng-w2-09.png" alt="Normal Equation"></p>
<blockquote>
<p>$<br>\begin{align}<br>\nabla J(\theta)  =  \frac 1m X^{T} (X\theta - \vec{y}) \newline<br>\end{align}<br>$</p>
<p>ä»¤ $\nabla J(\theta)  =  0 $</p>
<p>So, $\theta = (X^T X)^{-1}X^T y $</p>
</blockquote>
<h3 id="5-3-m-training-n-features"><a href="#5-3-m-training-n-features" class="headerlink" title="5.3 $m$ training, $n$ features"></a>5.3 $m$ training, $n$ features</h3><table>
<thead>
<tr>
<th>Gradient Descent</th>
<th>Normal Equation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Need to choose $\alpha$</td>
<td>No need to choose $\alpha$ </td>
</tr>
<tr>
<td>Needs many iterations</td>
<td>Donâ€™t need to iterate</td>
</tr>
<tr>
<td>Works well even when $n$ is large</td>
<td>Slow if $n$ is very large</td>
</tr>
</tbody>
</table>
<blockquote>
<p>it is usually around ten thousand that I might start to consider switching over to gradient descents or maybe, some other algorithms that weâ€™ll talk about later in this class</p>
</blockquote>
<h3 id="5-4-X-T-X-is-non-invertible"><a href="#5-4-X-T-X-is-non-invertible" class="headerlink" title="5.4 $X^T X$ is non-invertible"></a>5.4 $X^T X$ is non-invertible</h3><p> $\theta = (X^T X)^{-1}X^T y $</p>
<p>What $X^T X$ is non-invertible? ï¼ˆsingular / degenerateï¼‰</p>
<blockquote>
<p>When $X^T X$ is non-invertible, this is very few.</p>
</blockquote>
<p><strong>What $X^T X$ is non-invertible?</strong></p>
<p><img src="/images/ml/coursera/ml-ng-w2-10.png" alt="non-invertible"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Coursera Week 1 - Linear Algebra Matrices And Vectors]]></title>
      <url>http://shopee.ai/2016/09/30/ml/coursera-ng-w1-03-Linear-Algebra/</url>
      <content type="html"><![CDATA[<p>coursera week 1 - <code>matrices</code> and <code>vectors</code></p>
<a id="more"></a>
<h2 id="1-Matrix-Elements"><a href="#1-Matrix-Elements" class="headerlink" title="1. Matrix Elements"></a>1. Matrix Elements</h2><p>$$<br>A =<br>\begin{bmatrix}<br>   1 &amp; 2 \\<br>   4 &amp; 5 \\<br>   7 &amp; 8<br>  \end{bmatrix} \tag{fmt.1  R^{32}}<br>$$</p>
<p>$ A_{ij} = $ â€œ$i, j$ entryâ€  in the $i^{th}$ row, $j^{th}$ column</p>
<p>$ A_{32} = 8 $</p>
<h2 id="2-Vector-A-n-n-1-matrix"><a href="#2-Vector-A-n-n-1-matrix" class="headerlink" title="2. Vector $A_n$ n*1 matrix"></a>2. Vector $A_n$ n*1 matrix</h2><p>$$<br>y =<br>\begin{bmatrix}<br>   460 \\<br>   232 \\<br>   315 \\<br>   178<br>  \end{bmatrix} \tag{fmt.2}<br>$$</p>
<blockquote>
<p>$R^4$ 4 dimensional vector<br>$y_i = i^{th} element$</p>
</blockquote>
<h3 id="2-1-math-1-indexed"><a href="#2-1-math-1-indexed" class="headerlink" title="2.1 math 1-indexed"></a>2.1 math 1-indexed</h3><p>$$<br>y =<br>\begin{bmatrix}<br>   y1 \\<br>   y2 \\<br>   y3 \\<br>   y4<br>  \end{bmatrix} \tag{fmt.3}<br>$$</p>
<h3 id="2-2-machine-learning-0-indexed"><a href="#2-2-machine-learning-0-indexed" class="headerlink" title="2.2 machine-learning 0-indexed"></a>2.2 machine-learning 0-indexed</h3><p>$$<br>y =<br>\begin{bmatrix}<br>   y0 \\<br>   y1 \\<br>   y2 \\<br>   y3<br>  \end{bmatrix} \tag{fmt.4}<br>$$</p>
<h2 id="3-Matrix-Addition"><a href="#3-Matrix-Addition" class="headerlink" title="3. Matrix Addition"></a>3. Matrix Addition</h2><p>$$ \begin{bmatrix} 1 &amp; 0 \\ 2 &amp; 5 \\ 3 &amp; 1 \end{bmatrix} + \begin{bmatrix} 4 &amp; 0.5 \\ 2 &amp; 5 \\ 0 &amp; 1 \end{bmatrix} =<br>\begin{bmatrix}<br>   5 &amp; 0.5 \\<br>   4 &amp; 10 \\<br>   3 &amp; 2<br> \end{bmatrix} $$</p>
<h2 id="4-Scalar-Multiplication"><a href="#4-Scalar-Multiplication" class="headerlink" title="4. Scalar Multiplication"></a>4. Scalar Multiplication</h2><p>$$ 3 \times \begin{bmatrix} 1 &amp; 0 \\ 2 &amp; 5 \\ 3 &amp; 1 \end{bmatrix}<br>= \begin{bmatrix}<br>   3 &amp; 0 \\<br>   6 &amp; 15 \\<br>   9 &amp; 3<br> \end{bmatrix}<br>$$</p>
<h2 id="5-Combination-of-Operands"><a href="#5-Combination-of-Operands" class="headerlink" title="5. Combination of Operands"></a>5. Combination of Operands</h2><p>$$ 3 \times<br>\begin{bmatrix}<br>1 \\<br>4 \\<br>2<br>\end{bmatrix}<br>+<br>\begin{bmatrix}<br>0 \\<br>0 \\<br>5<br>\end{bmatrix} -<br>\begin{bmatrix}<br>   3 \\<br>   0 \\<br>   2<br> \end{bmatrix} / 3 =<br>\begin{bmatrix}<br>2 \\<br>12 \\<br>31/3<br>\end{bmatrix}<br>$$</p>
<h2 id="6-Matrix-Vector-Multiplication"><a href="#6-Matrix-Vector-Multiplication" class="headerlink" title="6. Matrix Vector Multiplication"></a>6. Matrix Vector Multiplication</h2><p>$$<br>\begin{bmatrix}<br>1 &amp; 3 \\<br>4 &amp; 0 \\<br>2 &amp; 1<br>\end{bmatrix}<br>\times<br>\begin{bmatrix}<br>1 \\<br>5<br>\end{bmatrix} =<br>\begin{bmatrix}<br>16 \\<br>4 \\<br>7<br>\end{bmatrix}<br>$$</p>
<p><strong>Matrix Vector Multiplication Fmt :</strong></p>
<p><img src="/images/ml/coursera/ml-ng-w1-03-1.png" alt="Matrix Vector"></p>
<h3 id="6-1-House-sizes-example"><a href="#6-1-House-sizes-example" class="headerlink" title="6.1 House sizes example"></a>6.1 House sizes example</h3><p>$$<br>h_{\theta}  (x) = -40 + 0.25 x<br>$$</p>
<table>
<thead>
<tr>
<th>House sizes</th>
<th>Price</th>
</tr>
</thead>
<tbody>
<tr>
<td>2104</td>
<td>?</td>
</tr>
<tr>
<td>1416</td>
<td>?</td>
</tr>
<tr>
<td>1534</td>
<td>?</td>
</tr>
<tr>
<td>852</td>
<td>?</td>
</tr>
</tbody>
</table>
<p>$$ \begin{bmatrix}<br>1 &amp; 2104 \\<br>1 &amp; 1416 \\<br>1 &amp; 1534 \\<br>1 &amp; 852<br>\end{bmatrix} \times<br>\begin{bmatrix}<br>-40 \\<br>0.25<br>\end{bmatrix}<br>=<br>\begin{bmatrix}<br>-40 \times 1 + 0.25 \times 2104 \\<br>â€¦ \\<br>â€¦ \\<br>â€¦<br>\end{bmatrix}<br>$$</p>
<h2 id="7-Practice-Example"><a href="#7-Practice-Example" class="headerlink" title="7. Practice Example"></a>7. Practice Example</h2><p>$$ \begin{bmatrix}<br>1 &amp; 3 &amp; 2 \\<br>4 &amp; 0 &amp; 1<br>\end{bmatrix}<br>\begin{bmatrix}<br>1 &amp; 3 \\<br>0 &amp; 1 \\<br>5 &amp; 2<br>\end{bmatrix} =<br>\begin{bmatrix}<br>   11 &amp; 10 \\<br>   9 &amp; 14<br> \end{bmatrix} $$</p>
<blockquote>
<p>$ A_{2 \times 3} \times A_{3 \times 2} = A_{2 \times 2} $</p>
</blockquote>
<p><img src="/images/ml/coursera/ml-ng-w1-03-2.png" alt="Matrix"></p>
<h2 id="8-House-Example"><a href="#8-House-Example" class="headerlink" title="8. House Example"></a>8. House Example</h2><p><img src="/images/ml/coursera/ml-ng-w1-03-3.png" alt="Matrix"></p>
<h2 id="9-Matrix-A-times-B-neq-B-times-A"><a href="#9-Matrix-A-times-B-neq-B-times-A" class="headerlink" title="9. Matrix $A \times B \neq B \times A$"></a>9. Matrix $A \times B \neq B \times A$</h2><p>But, ç»“åˆå¾‹ï¼Œå¯ä»¥çš„</p>
<p>$ A \times B \times C = (A \times B) \times C = A \times (B \times C) $</p>
<h2 id="10-Identity-Matrix"><a href="#10-Identity-Matrix" class="headerlink" title="10. Identity Matrix"></a>10. Identity Matrix</h2><p>Denoted I (or I_{n*n}).</p>
<h3 id="10-1-2-times-2"><a href="#10-1-2-times-2" class="headerlink" title="10.1 $2 \times 2$"></a>10.1 $2 \times 2$</h3><p>$$<br>\begin{bmatrix}<br>   1 &amp; 0 \\<br>   0 &amp; 1<br>  \end{bmatrix} \tag{fmt.1  R^{32}}<br>$$</p>
<h3 id="10-2-3-times-3"><a href="#10-2-3-times-3" class="headerlink" title="10.2 $3 \times 3$"></a>10.2 $3 \times 3$</h3><p>$$<br>\begin{bmatrix}<br>   1 &amp; 0 &amp; 0 \\<br>   0 &amp; 1 &amp; 0 \\<br>   0 &amp; 0 &amp; 1<br>  \end{bmatrix} \tag{fmt.1  R^{32}}<br>$$</p>
<blockquote>
<p>$Z \times I = I \times Z = Z$</p>
</blockquote>
<h2 id="11-Matrix-Inverse"><a href="#11-Matrix-Inverse" class="headerlink" title="11. Matrix Inverse"></a>11. Matrix Inverse</h2><p>$3 \times 3^{-1} = 1$</p>
<blockquote>
<p>Not all numbers have an inverse.</p>
</blockquote>
<p>if $A$ is an $m \times m$ matrix, and if it has an inverse</p>
<p>$A \times A^{-1} = A^{-1} \times A = I$</p>
<p>$$<br>A =<br>\begin{bmatrix}<br>   3 &amp; 4 \\<br>   2 &amp; 16 \\<br>  \end{bmatrix}<br>$$</p>
<p>$$<br>A^{-1} =<br>\begin{bmatrix}<br>   0.4 &amp; -0.1 \\<br>   -0.05 &amp; 0.075 \\<br>  \end{bmatrix}<br>$$</p>
<p>$ A \times A^{-1} = I_{2 \times 2} $</p>
<p>$$<br>I_{2 \times 2} =<br>\begin{bmatrix}<br>   1 &amp; 0 \\<br>   0 &amp; 1 \\<br>  \end{bmatrix}<br>$$</p>
<h2 id="12-Matrix-Transpose"><a href="#12-Matrix-Transpose" class="headerlink" title="12. Matrix Transpose"></a>12. Matrix Transpose</h2><p>$$<br>A =<br>\begin{bmatrix}<br>   1 &amp; 2 &amp; 0 \\<br>   3 &amp; 5 &amp; 9 \\<br>  \end{bmatrix}<br>$$</p>
<p>$$<br>A^T =<br>\begin{bmatrix}<br>   1 &amp; 3 \\<br>   2 &amp; 5 \\<br>   0 &amp; 9<br>  \end{bmatrix}<br>$$</p>
<p>Let $A$ be an $m \times n$ matrix, and let $B = A^T$.<br>Then $B$ is an $n \times m$ matrix, and $B_{ij} = A_{ji}$</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Coursera Week 1 - Linear Regression Cost Function & Gradient descent]]></title>
      <url>http://shopee.ai/2016/09/28/ml/coursera-ng-w1-02-cost-function-gradient-descent/</url>
      <content type="html"><![CDATA[<p>Linear Regression Cost Function &amp; Gradient descent</p>
<a id="more"></a>
<h2 id="1-Linear-Regression"><a href="#1-Linear-Regression" class="headerlink" title="1. Linear Regression"></a>1. Linear Regression</h2><p><img src="/images/ml/coursera/ml-ng-w1-02-1.png" alt="How to choose parameters"></p>
<h2 id="2-Cost-Function"><a href="#2-Cost-Function" class="headerlink" title="2. Cost Function"></a>2. Cost Function</h2><blockquote>
<p>Choose $\theta_0ï¼Œ\theta_1$ so that $h_{\theta} (x) $ is close to $y$ for our training examples ${(x, y)}$</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">Title</th>
<th style="text-align:center">fmt</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Hypothesis</td>
<td style="text-align:center">$h_{\theta}  (x) = \theta_0 + \theta_1 x$</td>
</tr>
<tr>
<td style="text-align:center">Parameters</td>
<td style="text-align:center">$\theta_0 ã€\theta_1$</td>
</tr>
<tr>
<td style="text-align:center">Cost Function</td>
<td style="text-align:center">$J(\theta_0ï¼Œ\theta_1) = {\frac {1} {2m}} \sum_{i=1}^m (h_{\theta} (x^{i}) - (y^{i}))^2$</td>
</tr>
<tr>
<td style="text-align:center">Goal</td>
<td style="text-align:center">$minimize J(\theta_0ï¼Œ\theta_1)$</td>
</tr>
</tbody>
</table>
<h2 id="3-Simplified-Fmt"><a href="#3-Simplified-Fmt" class="headerlink" title="3. Simplified Fmt"></a>3. Simplified Fmt</h2><blockquote>
<p>$\theta_0$ = 0</p>
</blockquote>
<p><strong>hypothesis function $h_{\theta} (x)$  cost function $J(\theta_1)$</strong></p>
<p><img src="/images/ml/coursera/ml-ng-w1-02-3.png" alt="cost"></p>
<h2 id="4-Cost-function-visable"><a href="#4-Cost-function-visable" class="headerlink" title="4. Cost function visable"></a>4. Cost function visable</h2><p><img src="/images/ml/coursera/ml-ng-w1-02-4.png" alt="cost"></p>
<blockquote>
<p>æŠŠ x, y æƒ³è±¡æˆå‘é‡ï¼Œç¡®å®šçš„å‘é‡ï¼Œå‘é‡å†æƒ³è±¡ä¸ºä¸€ä¸ªç¡®å®šçš„æ•°ï¼Œæ€»ä¹‹å®ƒæ˜¯ä¸€ä¸ªäºŒæ¬¡å‡½æ•°ï¼ŒæŠ½è±¡çš„æƒ³ä¸€ä¸‹ï¼Œä¼šä¸ä¼šç†è§£</p>
</blockquote>
<ul>
<li>contour plots</li>
<li>contour figures</li>
</ul>
<p><img src="/images/ml/coursera/ml-ng-w1-02-5.png" alt="cost"></p>
<h2 id="5-Gradient-descent-target"><a href="#5-Gradient-descent-target" class="headerlink" title="5. Gradient descent target"></a>5. Gradient descent target</h2><p><img src="/images/ml/coursera/ml-ng-w1-02-6.png" alt="Gradient descent"></p>
<h2 id="6-Gradient-descent-visable"><a href="#6-Gradient-descent-visable" class="headerlink" title="6. Gradient descent visable"></a>6. Gradient descent visable</h2><p><img src="/images/ml/coursera/ml-ng-w1-02-7.png" alt="Local optimization"></p>
<p><strong>Convex function</strong></p>
<p><img src="/images/ml/coursera/ml-ng-w1-02-8.png" alt="Global optimization"></p>
<h2 id="7-Gradient-descent-algorithm"><a href="#7-Gradient-descent-algorithm" class="headerlink" title="7. Gradient descent algorithm"></a>7. Gradient descent algorithm</h2><blockquote>
<p>$ \alpha $ : learning rate</p>
</blockquote>
<p><img src="/images/ml/coursera/ml-ng-w1-02-9.png" alt="Gradient descent"></p>
<h2 id="8-Gradient-descent-only-theta-1"><a href="#8-Gradient-descent-only-theta-1" class="headerlink" title="8. Gradient descent only $ \theta_{1} $"></a>8. Gradient descent only $ \theta_{1} $</h2><p><img src="/images/ml/coursera/ml-ng-w1-02-10.png" alt="Gradient descent for one param : $ \theta\_{1} $"></p>
<p><img src="/images/ml/coursera/ml-ng-w1-02-11.png" alt="Gradient descent"></p>
<p><img src="/images/ml/coursera/ml-ng-w1-02-12.png" alt="Gradient descent"></p>
<p><img src="/images/ml/coursera/ml-ng-w1-02-13.png" alt="Gradient descent"></p>
<h2 id="9-Linear-Regression-Model"><a href="#9-Linear-Regression-Model" class="headerlink" title="9. Linear Regression Model"></a>9. Linear Regression Model</h2><p><img src="/images/ml/coursera/ml-ng-w1-02-14.png" alt="Gradient descent"></p>
<h3 id="9-1-Batch-Gradient-Descent"><a href="#9-1-Batch-Gradient-Descent" class="headerlink" title="9.1 Batch Gradient Descent"></a>9.1 Batch Gradient Descent</h3><blockquote>
<p>Batch : Each step of gradient descent uses all the training examples</p>
</blockquote>
<p><img src="/images/ml/coursera/ml-ng-w1-02-15.png" alt="Gradient descent"></p>
<blockquote>
<p>Coursera Learning Notes</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Coursera Week 1 - Machine Learning Introduction]]></title>
      <url>http://shopee.ai/2016/09/20/ml/coursera-ng-w1-01-introduce/</url>
      <content type="html"><![CDATA[<p>Machine-learning, Grew out of work in Artificial Intelligence, New capability for computers</p>
<a id="more"></a>
<h2 id="Machine-Learning"><a href="#Machine-Learning" class="headerlink" title="Machine Learning"></a>Machine Learning</h2><ul>
<li>Grew out of work in Artificial Intelligence</li>
<li>New capability for computers</li>
</ul>
<blockquote>
<p>search engine, recommendation system, image recognition</p>
<p>web click data, medical records , biology, engineering</p>
<p>Natural Language Processing (NLP), Computer Vision</p>
</blockquote>
<p><strong>Machine Learning definition</strong></p>
<p>Field of study that gives computers the ability to learn without being explicitly programmed. by ArthurSamuel(1959)</p>
<h2 id="1-Supervised-learning"><a href="#1-Supervised-learning" class="headerlink" title="1. Supervised learning"></a>1. Supervised learning</h2><p><img src="/images/ml/coursera/ml-ng-w1-01-1.png" alt="Supervised"></p>
<h2 id="2-Regression-amp-Classification"><a href="#2-Regression-amp-Classification" class="headerlink" title="2. Regression &amp; Classification"></a>2. Regression &amp; Classification</h2><p><img src="/images/ml/coursera/ml-ng-w1-01-2.png" alt="Classification"></p>
<h2 id="3-Unsupervised-learning"><a href="#3-Unsupervised-learning" class="headerlink" title="3. Unsupervised learning"></a>3. Unsupervised learning</h2><p><img src="/images/ml/coursera/ml-ng-w1-01-3.png" alt="Unsupervised"></p>
<p><strong>Unsupervised Examples</strong></p>
<p><img src="/images/ml/coursera/ml-ng-w1-01-4.png" alt="news.google"></p>
<blockquote>
<p>What Google News does is everyday it goes and looks at tens of thousands or hundreds of thousands of new stories on the web and it groups them into cohesive news stories. </p>
</blockquote>
<h2 id="4-Experience"><a href="#4-Experience" class="headerlink" title="4. Experience"></a>4. Experience</h2><p><strong>Xiaoyang è¯­å½•</strong> :</p>
<p>ã€è§£å†³ä¸€ä¸ªé—®é¢˜çš„æ–¹æ³•å’Œæ€è·¯ä¸æ­¢ä¸€ç§ã€<br>ã€æ²¡æœ‰æ‰€è°“çš„æœºå™¨å­¦ä¹ ç®—æ³•ä¼˜åŠ£ï¼Œä¹Ÿæ²¡æœ‰ç»å¯¹é«˜æ€§èƒ½çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œåªæœ‰åœ¨ç‰¹å®šçš„åœºæ™¯ã€æ•°æ®å’Œç‰¹å¾ä¸‹æ›´åˆé€‚çš„æœºå™¨å­¦ä¹ ç®—æ³•ã€‚ã€</p>
<p><strong>Andrew Ng è¯­å½•</strong></p>
<p>åº”ç”¨æœºå™¨å­¦ä¹ ï¼Œä¸è¦ä¸€ä¸Šæ¥å°±è¯•å›¾åšåˆ°å®Œç¾ï¼Œå…ˆluä¸€ä¸ªbaselineçš„modelå‡ºæ¥ï¼Œå†è¿›è¡Œåç»­çš„åˆ†ææ­¥éª¤ï¼Œä¸€æ­¥æ­¥æé«˜ï¼Œæ‰€è°“åç»­æ­¥éª¤å¯èƒ½åŒ…æ‹¬ã€åˆ†æmodelç°åœ¨çš„çŠ¶æ€(æ¬ /è¿‡æ‹Ÿåˆ)ï¼Œåˆ†ææˆ‘ä»¬ä½¿ç”¨çš„featureçš„ä½œç”¨å¤§å°ï¼Œè¿›è¡Œfeature selectionï¼Œä»¥åŠæˆ‘ä»¬æ¨¡å‹ä¸‹çš„bad caseå’Œäº§ç”Ÿçš„åŸå› ã€ç­‰ç­‰ã€‚</p>
<p><strong>Kaggleå¤§ç¥ä»¬ experience æ€»ç»“</strong> ï¼š</p>
<ol>
<li>ã€å¯¹æ•°æ®çš„è®¤è¯†å¤ªé‡è¦äº†ï¼ã€</li>
<li>ã€æ•°æ®ä¸­çš„ç‰¹æ®Šç‚¹/ç¦»ç¾¤ç‚¹çš„åˆ†æå’Œå¤„ç†å¤ªé‡è¦äº†ï¼ã€</li>
<li>ã€ç‰¹å¾å·¥ç¨‹(feature engineering)å¤ªé‡è¦äº†ï¼åœ¨å¾ˆå¤šKaggleçš„åœºæ™¯ä¸‹ï¼Œç”šè‡³æ¯”modelæœ¬èº«è¿˜è¦é‡è¦ã€</li>
<li>ã€è¦åšæ¨¡å‹èåˆ(model ensemble)å•Šå•Šå•Šï¼ã€</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Javaç¨‹åºå‘˜éœ€è¦çŸ¥é“çš„è®¡ç®—æœºåŸç† (not finish)]]></title>
      <url>http://shopee.ai/2016/09/13/java/java-special-arms-p2-computer-principle/</url>
      <content type="html"><![CDATA[<p>Javaç‰¹ç§å…µ - Javaç¨‹åºå‘˜éœ€è¦çŸ¥é“çš„è®¡ç®—æœºåŸç†ï¼ŒReading Notes</p>
<a id="more"></a>
<h2 id="1-è®¡ç®—æœºåŸç†"><a href="#1-è®¡ç®—æœºåŸç†" class="headerlink" title="1. è®¡ç®—æœºåŸç†"></a>1. è®¡ç®—æœºåŸç†</h2><p>è®¡ç®—æœºæ€»ä½“ä½“ç³»ç»“æ„çš„å˜åŒ–ï¼Œä¸€ç›´ä¸æ˜¯ç‰¹åˆ«å¤§ï¼ŒåŸºç¡€åŸç†å°†å¼•å¯¼æˆ‘ä»¬ä»æ•´ä½“ä¸Šè®¤è¯†è®¡ç®—æœºæœ¬èº«ã€‚</p>
<h2 id="2-CPU"><a href="#2-CPU" class="headerlink" title="2. CPU"></a>2. CPU</h2><p>æ¯ä¸ªè¿›ç¨‹ or çº¿ç¨‹ å‘å‡ºè¯·æ±‚, æœ€åä¼šç”± CPU æ¥åˆ†é…æ—¶é—´ç‰‡å¤„ç†ï¼Œå¤„ç†æ—¶ æ“ä½œæ•° ä¼ é€’ç»™ CPU, CPU è®¡ç®—å°†å…¶å›å†™åˆ°æœ¬åœ°å˜é‡ã€‚è¿™ä¸ªæœ¬åœ°å˜é‡é€šå¸¸ä¼šå­˜åœ¨ç¨‹åºæ‰€è°“çš„ æ ˆ ä¸­ï¼Œå¤šæ¬¡å¯¹å…¶æ“ä½œï¼Œå®ƒå¯èƒ½ä¼šè¢« Cache åˆ° CPU çš„ç¼“å­˜ä¹‹ä¸­ã€‚CPU æœ‰ å¯„å­˜å™¨ï¼Œä¸€çº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜ â€¦ , å…¶å®è®¾è®¡è¿™äº›ç»„ä»¶å°±æ˜¯ä¸ºäº†é‚£å››ä¸ªå­— <code>å°±è¿‘åŸåˆ™</code>ã€‚</p>
<h3 id="2-1-Cpu-è”ç³»-Java"><a href="#2-1-Cpu-è”ç³»-Java" class="headerlink" title="2.1 Cpu è”ç³» Java"></a>2.1 Cpu è”ç³» Java</h3><blockquote>
<p>åœ¨ ç¼–è¯‘é˜¶æ®µï¼ŒJava å°±å¯ä»¥å†³å®šæ–¹æ³•çš„ LocalVariable çš„ä¸ªæ•°ï¼Œåœ¨æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œå°±å¯ç›´æ¥åˆ†é…ä¸€ä¸ª LocalVariable åŒºåŸŸï¼Œè¿™ä¸ªç©ºé—´æ˜¯åŸºäº slot æ¥åˆ†é…çš„ï¼Œæ¯ä¸ª slot å ç”¨ 32 bitï¼Œboolean å ç”¨ 1 slotï¼Œlong and double å  2 ä¸ª slotã€‚</p>
</blockquote>
<p>LocalVariableTable :</p>
<table>
<thead>
<tr>
<th>Start</th>
<th>Length</th>
<th>Slot</th>
<th>Name</th>
<th>Signature</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>9</td>
<td>0</td>
<td>args</td>
<td>Ljava/lang/String;</td>
</tr>
<tr>
<td>2</td>
<td>7</td>
<td>1</td>
<td>a</td>
<td>I</td>
</tr>
<tr>
<td>..</td>
<td>..</td>
<td>..</td>
<td>..</td>
<td>..</td>
</tr>
</tbody>
</table>
<ul>
<li>Start :  ä»£è¡¨LocalVariableåœ¨è™šæŒ‡ä»¤ä½œç”¨åŸŸçš„èµ·å§‹ä½ç½®</li>
<li>Length : ä»£è¡¨LocalVariableåœ¨è™šæŒ‡ä»¤ä½œç”¨åŸŸçš„é•¿åº¦(å¦‚ç¬¬1ä¸ªæœ¬åœ°å˜é‡argsæ˜¯9æ¡æŒ‡ä»¤çš„ä½œç”¨åŸŸ)</li>
</ul>
<h3 id="2-2-å¤šæ ¸"><a href="#2-2-å¤šæ ¸" class="headerlink" title="2.2 å¤šæ ¸"></a>2.2 å¤šæ ¸</h3><p>ä¸ºäº†å¤šä¸ªè®¡ç®—ä¸­å¿ƒåŒæ—¶åšäº‹æƒ…ï¼Œå¢åŠ æ•ˆç‡ã€‚</p>
<p><strong>è€ƒè™‘éœ€è¦å’Œè§£å†³çš„é—®é¢˜</strong></p>
<p>  ä¸€ä¸ªæŒ‡ä»¤æ¥äº†ï¼Œå“ªä¸ªCpuæ¥å¤„ç†ï¼Ÿ åŒä¸€ä»½æ•°æ®è¢«å¤šä¸ª Cpu å¤„ç†ï¼Œå¦‚ä½•åè°ƒå¹¶è®©å…¶ä»–Cpuéƒ½çŸ¥é“ã€‚<br>  å½“å‘èµ·ä¸€ä¸ªè®¡ç®—è¯·æ±‚ï¼Œä¾‹å¦‚ä¸€ä¸ªä¸­æ–­ï¼Œè¿™ä¹ˆå¤š Cpu ä¼šå¹²ä»€ä¹ˆï¼Ÿ</p>
<blockquote>
<p>ä¸­æ–­ : æŒ‡å½“å‡ºç°éœ€è¦æ—¶ï¼ŒCPUæš‚æ—¶åœæ­¢å½“å‰ç¨‹åºçš„æ‰§è¡Œè½¬è€Œæ‰§è¡Œå¤„ç†æ–°æƒ…å†µçš„ç¨‹åºå’Œæ‰§è¡Œè¿‡ç¨‹ã€‚</p>
</blockquote>
<p>Cpu çš„è®¡ç®—é€Ÿåº¦éå¸¸å¿«ï¼ŒOSä¸å¸Œæœ›å®ƒç­‰å¾…æˆ–è€…åœæ­¢ï¼Œæ‰€ä»¥åœ¨å‡ºç° I/O ç­‰å¾… (ç½‘ç»œI/O å’Œ ç£ç›˜I/O), å®ƒä¸­é€”åŸºæœ¬ä¸å‚ä¸ï¼Œè€Œä»¥äº‹ä»¶æ³¨å†Œçš„æ–¹å¼æ¥å®ç°å›è°ƒï¼Œå¯¹äºæŸäº›æ‰§è¡Œæ—¶é—´é•¿çš„taskï¼ŒCpuä¼šåˆ†é…ä¸€äº›æ—¶é—´ç‰‡æ‰§è¡Œå…¶ä»–çš„task.</p>
<blockquote>
<p>å½“ Cpu ä¸æ–­å»åˆ‡æ¢ task å¤„ç†æ—¶ï¼Œè¿™å°±ä¼šæ¶‰åŠåˆ° <code>ä¸Šä¸‹æ–‡åˆ‡æ¢</code>.</p>
</blockquote>
<h3 id="2-3-Cache-line"><a href="#2-3-Cache-line" class="headerlink" title="2.3 Cache line"></a>2.3 Cache line</h3><p>åŠäº‹å°±è¿‘åŸåˆ™ï¼Œå¯ä»¥ä¸€æ¬¡åŠå¤šä»¶äº‹æƒ… æˆ– ä¸€ä»¶äº‹æƒ…çš„å¤šä¸ªæ­¥éª¤å¯ä»¥ä¸€æ¬¡åŠå®Œã€‚</p>
<blockquote>
<p>Cache line å°±æ˜¯ å°† è¿ç»­çš„ä¸€æ®µå†…å­˜åŒºåŸŸ è¿›è¡Œ Cacheï¼Œä¸æ˜¯æ¯æ¬¡å°± Cache ä¸€ä¸ªå†…å­˜å•å…ƒï¼Œè€Œæ˜¯ä¸€ç³»åˆ—å†…å­˜å•å…ƒã€‚è®¡ç®—æœºä¸­ï¼Œé€šå¸¸ä»¥è¿ç»­ 64bit è¿›è¡ŒCacheã€‚</p>
</blockquote>
<p>æ„Ÿæ‚Ÿ : Cache Line å°±æ˜¯ ä¸€æ¬¡æ‹¿ä¸€æ‰¹ä¿¡æ¯å»å¤„ç†ã€‚ Cache line çš„ç›®çš„æ˜¯ä¸ºäº† å¿«é€Ÿè®¿é—®ã€‚</p>
<h3 id="2-4-ç¼“å­˜ä¸€è‡´æ€§åè®®"><a href="#2-4-ç¼“å­˜ä¸€è‡´æ€§åè®®" class="headerlink" title="2.4 ç¼“å­˜ä¸€è‡´æ€§åè®®"></a>2.4 ç¼“å­˜ä¸€è‡´æ€§åè®®</h3><p>å½“æœ‰ æ¥è‡ªäº å†…å­˜ ä¸­çš„åŒä¸€ä»½æ•°æ® Cache åœ¨å¤šä¸ª CPU ä¸­ï¼Œä¸”è¦æ±‚è¿™äº›æ•°æ®çš„è¯»å†™ä¸€è‡´æ—¶ï¼Œå¤šä¸ª CPU ä¹‹é—´å°±éœ€è¦éµå¾ªç¼“å­˜å…±äº«çš„ä¸€è‡´æ€§åŸåˆ™ã€‚</p>
<blockquote>
<p>ç›¸å½“äºå¤§å®¶éƒ½æ¥ä¿®æ”¹ä¸€ä»½è®¾è®¡æŠ¥å‘Šï¼Œå¤§å®¶éƒ½æ‹·è´äº†ä¸€ä»½ï¼Œå›å®¶ä¿®æ”¹ï¼Œæ¯ä¸ªäººä¿®æ”¹è¦åŠæ—¶è®©å…¶ä»–äººéƒ½çŸ¥é“ã€‚æœ‰ç‚¹åƒç‰ˆæœ¬æ§åˆ¶</p>
</blockquote>
<table>
<thead>
<tr>
<th>å†…å­˜å•å…ƒçš„çŠ¶æ€</th>
</tr>
</thead>
<tbody>
<tr>
<td>Modified</td>
<td>ä¿®æ”¹</td>
</tr>
<tr>
<td>Exclusive</td>
<td>ç‹¬å </td>
</tr>
<tr>
<td>Shared</td>
<td>å…±äº«</td>
</tr>
<tr>
<td>Invalid</td>
<td>å¤±æ•ˆ</td>
</tr>
</tbody>
</table>
<p>å¤šä¸ª CPU é€šè¿‡æ€»çº¿ç›¸äº’è¿æ¥ï¼Œæ¯ä¸ª CPU çš„cacheå¤„ç†å™¨ è¦å“åº”æœ¬èº«æ‰€å¯¹åº”çš„CPUè¯»å†™æ“ä½œå¤–ï¼Œè¿˜éœ€è¦ç›‘å¬æ€»çº¿ä¸Šå…¶ä»–CPUæ“ä½œï¼Œé€šè¿‡ç›‘å¬å¯¹è‡ªå·±çš„Cacheåšå¤„ç†ï¼Œå½¢æˆè™šå…±äº«ï¼Œè¿™ä¸ªåè®®å«åš MESI åè®®ã€‚</p>
<blockquote>
<p>ä¸€ä¸ªæ•°æ®ä¿®æ”¹äº†ï¼Œå®ƒéœ€è¦å‘Šè¯‰å…¶ä»– CPU è¿™ä»½æ•°æ®è¢«ä¿®æ”¹äº†ï¼Œç°åœ¨Intelé€šè¿‡ QPI æ¥å®Œæˆã€‚ä¸åŒCPUä¹‹é—´äº¤äº’éœ€è¦æ—¶é—´ 20~40 ns çº§åˆ«ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VolatileInteger</span> </span>&#123;</span><br><span class="line">  <span class="keyword">volatile</span> <span class="keyword">int</span> number;</span><br><span class="line">&#125;</span><br><span class="line">VolatileInteger[] values = <span class="keyword">new</span> VolatileInteger[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  values[i] = <span class="keyword">new</span> VolatileInteger();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç çš„ä¾‹å­ï¼Œå¾ˆå¯èƒ½ä½¿çš„æ¯ä¸ªCPUå¯èƒ½åªä¿®æ”¹åˆ°æŸä¸ªå…ƒç´ ï¼Œä½†ä¼šæœ‰å¤§é‡ QPI å­˜åœ¨ã€‚</p>
<blockquote>
<p> QPI : Quick Path Interconnect</p>
</blockquote>
<h3 id="2-5-Context-switch"><a href="#2-5-Context-switch" class="headerlink" title="2.5 Context switch"></a>2.5 Context switch</h3><p>çº¿ç¨‹å·²ç»æ‰§è¡Œäº†ä¸€éƒ¨åˆ†å†…å®¹ï¼Œéœ€è¦è®°å½•ä¸‹å®ƒçš„å†…å®¹å’ŒçŠ¶æ€ï¼Œä¸­é€”ç”±äºè°ƒåº¦ç®—æ³•ã€‚</p>
<p>CPU è°ƒåº¦ çš„æœ€åŸºæœ¬å•ä½æ˜¯çº¿ç¨‹ï¼ŒJavaä¹Ÿæ˜¯åŸºäºå¤šçº¿ç¨‹æ¨¡å¼ã€‚ç”±äºå¤šçº¿ç¨‹æ¨¡å‹ä¸­å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æºï¼Œæ‰€ä»¥Javaç¨‹åºï¼Œå¦‚æŸä¸€ä¸ªçº¿ç¨‹å ç”¨èµ„æºè¿‡å¤§æ—¶ï¼Œå°±å¯èƒ½å¯¼è‡´æ•´ä¸ªJVMè¿›ç¨‹æŒ‚æ‰ã€‚(å½±å“éƒ½æ˜¯ç›¸å¯¹çš„)</p>
<blockquote>
<p>åœ¨å®é™…è¿è¡Œä¸­ä¼šæœ‰ä»£ç æ®µå’Œæ•°æ®æ®µï¼Œå†…å®¹åˆ‡æ¢æ—¶è¦ä¿å­˜è¿™äº›è¿è¡Œä¸­çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå†ä½¿ç”¨çš„æ—¶å€™ï¼Œå†åŠ è½½å›æ¥ã€‚</p>
<p>æ—¥å¿—å†™æ“ä½œ (å¦‚ : log4j) éƒ½é‡‡ç”¨ <code>å¼‚æ­¥</code> æ¨¡å¼ å®ç°ï¼Œè€Œç¨‹åºé€šå¸¸ä¸ç›´æ¥å‚ä¸è¿™ä¸ªè¿‡ç¨‹ã€‚ å®ç°æ–¹å¼ (æ—¥å¿—å†™æ“ä½œåªæ˜¯å°†æ—¥å¿—å†™å…¥ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç”±å•ç‹¬çš„çº¿ç¨‹æ¥å®Œæˆå†™æ“ä½œ)</p>
</blockquote>
<h3 id="2-6-å¹¶å‘ä¸äº‰ç”¨"><a href="#2-6-å¹¶å‘ä¸äº‰ç”¨" class="headerlink" title="2.6 å¹¶å‘ä¸äº‰ç”¨"></a>2.6 å¹¶å‘ä¸äº‰ç”¨</h3><p>åªè¦æ˜¯æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œè¿Ÿæ—©ä¼šé‡åˆ°å¹¶å‘ã€‚å½“ å¹¶å‘ æ—¶ï¼Œå°±ä¼šå­˜åœ¨å¯¹å„ç§èµ„æºçš„äº‰ç”¨ï¼ŒåŒ…æ‹¬å¯¹å„ä¸ªéƒ¨ä»¶(å¦‚CPU)çš„äº‰ç”¨ã€‚</p>
<blockquote>
<p>Web ç¨‹åºä¹Ÿä¼šç»å¸¸é‡åˆ°å¹¶å‘é—®é¢˜çš„ï¼Œç¼–å†™è€…ï¼Œæ²¡æœ‰é‡åˆ°æ˜¯å› ä¸º Web å®¹å™¨å¸®åŠ©å¤„ç†å¥½äº†çº¿ç¨‹çš„æœ¬åœ°å˜é‡åˆ†é…ï¼Œæˆ‘ä»¬å‡ ä¹ä¸ç”¨å…³æ³¨å¹¶å‘ã€‚</p>
</blockquote>
<h4 id="2-6-1-ä¸´ç•ŒåŒº"><a href="#2-6-1-ä¸´ç•ŒåŒº" class="headerlink" title="2.6.1 ä¸´ç•ŒåŒº"></a>2.6.1 ä¸´ç•ŒåŒº</h4><blockquote>
<p>å½“ç¨‹åºå‡ºç° â€œåŠ é”â€ æ—¶ (å¦‚ Javaçš„ synchronized) è¯´æ˜è¿™ä¸€å—æ˜¯ä¸´ç•ŒåŒºï¼Œåªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œå…¶ä»–çº¿ç¨‹æ¥å›è¿›è¡Œç­‰å¾…é˜Ÿåˆ—ã€‚<br>äº‰ç”¨å¸¦æ¥çš„æ˜¯åŒæ­¥çš„å¼€é”€ï¼Œå®ƒä¼šå‘å‡ºè®¸å¤šæŒ‡ä»¤è¦æ±‚æ‰€æœ‰CPUå¤„ç†ä¸­ä¸å…è®¸å…¶ä»–çº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒºï¼Œä¸”éœ€è¦å°†ç­‰å¾…çº¿ç¨‹æ”¾å…¥é˜Ÿåˆ—é˜»å¡ã€‚<br>äº‰ç”¨ CPU çš„è®¿é—®ä¹Ÿä¸ä»…ä»…ä½“ç°åœ¨é”ä¸Šé¢ï¼ŒCPUæœ¬èº«æ•°é‡ä¹Ÿæœ‰é™ã€‚ å•ä¸ªCPUä¼šå¯¹ä»»åŠ¡è¿›è¡Œ åŸºäº æ—¶é—´ç‰‡ã€ä¼˜å…ˆçº§ã€ä»»åŠ¡å¤§å°åˆ†åˆ«è°ƒåº¦ã€‚</p>
</blockquote>
<h4 id="2-6-2-çº¿ç¨‹æ± æ•°"><a href="#2-6-2-çº¿ç¨‹æ± æ•°" class="headerlink" title="2.6.2 çº¿ç¨‹æ± æ•°"></a>2.6.2 çº¿ç¨‹æ± æ•°</h4><p>åœ¨ç†æƒ³çš„ CPU å¯†é›†å‹ç³»ç»Ÿï¼Œçº¿ç¨‹æ•°æ˜¯ CPUæ•°+1 / CPU-1</p>
<ul>
<li>ç³»ç»ŸCPUå¯†é›†åº¦</li>
</ul>
<p>ä¸€èˆ¬ç³»ç»Ÿåˆ†ä¸º è®¡ç®—å¯†é›†å‹ å’Œ I/O å¯†é›†å‹ã€‚</p>
<blockquote>
<p>ç³»ç»Ÿä¸­å…³é”®ç¨‹åºè®¿é—®æ€»å…±èŠ±è´¹ 120ms, I/Oæ“ä½œ å ç”¨ 100msï¼Œ100msæ—¶é—´å†… CPUæ˜¯å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹è®¿é—®çš„ã€‚æ­¤æ—¶ï¼Œè¿™ä¸ªç¨‹åºåœ¨å•æ ¸ç³»ç»Ÿä¸­çš„çº¿ç¨‹æ•°ç†è®ºä¸Šå¯ä»¥è®¾ç½®ä¸º 6ï¼Œ åœ¨å¤šæ ¸ç³»ç»Ÿå°±æ˜¯ä¹˜ä»¥CPUä¸ªæ•° å·¦å³è¿™ä¸ªæ•°å­—ã€‚</p>
</blockquote>
<p>ä¸€èˆ¬è¿™ä¸ªçº¿ç¨‹æ•°çš„å†³å®šæ˜¯é€šè¿‡æµ‹è¯•çš„ã€‚</p>
<h4 id="2-6-3-é”"><a href="#2-6-3-é”" class="headerlink" title="2.6.3 é”"></a>2.6.3 é”</h4><p><code>é”</code> å°±æ˜¯ä¸´ç•ŒåŒºçš„èŒƒå›´ï¼Œæœ‰ç²’åº¦ã€‚å¦‚æœåœ¨ é”  å†…éƒ¨å‘é€ I/O, å¤§å¾ªç¯ã€é€’å½’ç­‰ï¼Œé‚£ä¹ˆå°±å¿…é¡»ç­‰å¾…è¿™äº›æ“ä½œå¤„ç†å®Œæˆåæ‰èƒ½æœ‰ä¸‹ä¸€ä¸ªçº¿ç¨‹è¿›å…¥å¤„ç†ã€‚å¦‚æœè¿™æ®µç¨‹åºæ˜¯ <code>å…³é”®ç¨‹åº</code>, å½“ç³»ç»ŸçœŸæ­£å¹¶å‘çš„æ—¶å€™ï¼Œå¾ˆå¤šçº¿ç¨‹éƒ½ä¼šé˜»å¡åœ¨è¿™é‡Œã€‚è¿™æ—¶è¦è®¡ç®—çº¿ç¨‹æ•°ï¼Œè¦çœ‹é”å¯¹è±¡ æ˜¯ä¸æ˜¯é™æ€å¯¹è±¡æˆ–Class, (å¦‚æœæ˜¯ï¼Œåˆ™æ˜¯ä¸€ä¸ªJVMå…¨å±€é”)ï¼Œæ— è®ºé…ç½®å¤šå°‘çº¿ç¨‹æ•ˆæœéƒ½ä¸€æ ·ã€‚<code>é”æ˜¯å…¨å±€çš„ï¼Œæ— è®ºå¤šå°‘ä¸ªCPUä¹Ÿæ˜¯æ— æµäºäº‹çš„ã€‚</code></p>
<blockquote>
<p>ç»“è®º : é”å°½é‡ä¸è¦è®¾ç½®ä¸º å…¨å±€é”ï¼Œèƒ½ç”¨ç²’åº¦æ§åˆ¶ï¼Œå°½é‡ç²’åº¦æ§åˆ¶</p>
</blockquote>
<h4 id="2-6-4-JVMè‡ªèº«è°ƒèŠ‚"><a href="#2-6-4-JVMè‡ªèº«è°ƒèŠ‚" class="headerlink" title="2.6.4 JVMè‡ªèº«è°ƒèŠ‚"></a>2.6.4 JVMè‡ªèº«è°ƒèŠ‚</h4><p>ä¸è®º CPU è·‘å¤šå¿«ï¼Œå¦‚ JVM holdä¸ä½èŠ‚å¥ï¼Œä¸æ–­åšGCï¼Œé‚£ä¹ˆå¦‚ä½•é…ç½®çº¿ç¨‹æ± ï¼Œç³»ç»Ÿæ€§èƒ½è¿˜æ˜¯ä¸Šä¸æ¥ã€‚</p>
<p>å¯ä»¥æ ¹æ® JVM è¿è¡Œæ—¥å¿—ä¸­ï¼Œå¹³å‡åš Young GC çš„æ—¶é—´é—´éš” (é€šè¿‡ Young GC ä¸ è¿è¡Œæ—¶é•¿å¯¹æ¯”)ï¼Œä»¥åŠç³»ç»Ÿçš„QPSï¼Œæ¥ä¼°ç®—æ¯ä¸ªè¯·æ±‚å¤§è‡´å ç”¨çš„å†…å­˜å¤§å°ï¼Œæœ‰æ—¶ä¸å‡†ï¼Œä½†å…·æœ‰å‚è€ƒä»·å€¼ã€‚</p>
<p><strong>å¦‚ä½•è®¡ç®—</strong></p>
<blockquote>
<p>Eden ç©ºé—´çš„å¤§å°æˆ‘ä»¬æ˜¯çŸ¥é“çš„ã€‚é€šå¸¸ä¸€ä¸ªè¯·æ±‚åˆ†é…ç©ºé—´éƒ½åœ¨ Eden åŒºåŸŸï¼ŒEdenåŒºåŸŸæ»¡å‘ç”ŸYoung GCã€‚Young GC æ—¶é—´é—´éš”å°±æ˜¯Edenæ»¡çš„æ—¶é—´é—´éš”ï¼Œä¾‹å¦‚ 3sï¼Œ è¿›ä¸€æ­¥é€šè¿‡ QPS*3 å¾—åˆ°å¤šå°‘ä¸ªè¯·æ±‚å¯ä»¥å¡«å……æ»¡ Eden åŒºåŸŸã€‚è¿™å¯åˆæ­¥ä¼°ç®—æ¯ä¸ªè¯·æ±‚å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p>
</blockquote>
<h2 id="3-å†…å­˜"><a href="#3-å†…å­˜" class="headerlink" title="3. å†…å­˜"></a>3. å†…å­˜</h2><p>åŸºæœ¬æ‰€æœ‰çš„ç¨‹åºçŒ¿ä¸ç¨‹åºåª›éƒ½çŸ¥é“ï¼Œå®ƒæ˜¯è·‘ç¨‹åºçš„åœ°æ–¹ã€‚</p>
<p>ç£ç›˜å­˜å‚¨ ä¸ CPU ä¹‹é—´çš„æ¡¥æ¢ã€‚æ‹¥æœ‰æ¯” CPUç¼“å­˜ å¤§å‡ ç™¾å€ã€ä¸Šåƒå€çš„ç©ºé—´ã€‚CPUä¸‰çº§ç¼“å­˜ä¹Ÿå°± å‡ åMã€‚</p>
<blockquote>
<p>ç£ç›˜ åˆ°è¾¾ CPUéœ€è¦ç»è¿‡ (ä¸»æ¿-å—æ¡¥ã€åŒ—æ¡¥) æ‰èƒ½åˆ°è¾¾CPUã€‚å¾ˆæ…¢ã€‚</p>
</blockquote>
<p>å†…å­˜çš„å®¹é‡éƒ½æ˜¯ GB å•ä½ï¼Œå¤§é‡ç¨‹åºè¿è¡Œéƒ½ä¾èµ–å†…å­˜ï¼Œåˆ OS æ¥ç®¡ç†å’Œè°ƒåº¦ã€‚</p>
<blockquote>
<p>åœ°å€ä½æ•°ã€é€»è¾‘åœ°å€ã€è™šæ‹Ÿåœ°å€ã€ç‰©ç†åœ°å€ã€çº¿æ€§åœ°å€ã€å†…æ ¸åŒºåŸŸç­‰ï¼Œå¾ˆå¤šäººçœ‹åˆ°è¿™ï¼Œç›´æ¥ç–¯äº†ï¼Œä½†æ˜¯ä½ éœ€è¦æ·¡å®šã€‚</p>
</blockquote>
<h3 id="3-1-è™šæ‹Ÿåœ°å€"><a href="#3-1-è™šæ‹Ÿåœ°å€" class="headerlink" title="3.1 è™šæ‹Ÿåœ°å€"></a>3.1 è™šæ‹Ÿåœ°å€</h3><p>æ‰€æœ‰çš„ç¨‹åºä¸­ä½¿ç”¨çš„åœ°å€éƒ½æ˜¯è™šæ‹Ÿåœ°å€ (åœ¨æ®µå¼ç®¡ç†ä¸­ä¹Ÿå«é€»è¾‘åœ°å€)ï¼Œè¿™äº›åœ°å€åœ¨ä¸åŒçš„è¿›ç¨‹ä¹‹é—´æ˜¯å¯ä»¥é‡å¤çš„ã€‚</p>
<blockquote>
<p>ç¨‹åºä¸ºä»€ä¹ˆè¦ä½¿ç”¨ è™šæ‹Ÿåœ°å€?</p>
<p>Cè¯­è¨€æ¥è¯´ï¼Œç¼–è¯‘åçš„æŒ‡ä»¤ä¸­ï¼Œè®¸å¤šè°ƒç”¨çš„åœ°å€åœ¨ç¼–è¯‘é˜¶æ®µå°±å¾—ç¡®å®šä¸‹æ¥ï¼Œè®¸å¤šæ–¹æ³•å…¥å£å’Œå˜é‡ä½ç½®åœ¨ç¼–è¯‘æ—¶ç¡®å®šäº†è™šæ‹Ÿåœ°å€ï¼ŒçœŸæ­£è¿è¡Œæ—¶è¦ç”±OSæ¥åˆ†é…å®é™…çš„åœ°å€ç»™ç¨‹åºã€‚<br>ä½¿ç”¨è™šæ‹Ÿåœ°å€åï¼Œåœ°å€æ˜¯å¯ä»¥è¢«å¤ç”¨çš„ï¼Œç¨‹åºä¸å…³å¿ƒä¸å…¶ä»–è¿›ç¨‹æ˜¯å¦ä¼šä½¿ç”¨åŒä¸€åœ°å€ï¼ŒOSä¼šåˆ†é…ç¡®ä¿ã€‚</p>
</blockquote>
<h3 id="3-2-åˆ†æ®µæœºåˆ¶"><a href="#3-2-åˆ†æ®µæœºåˆ¶" class="headerlink" title="3.2 åˆ†æ®µæœºåˆ¶"></a>3.2 åˆ†æ®µæœºåˆ¶</h3><p>ä¹Ÿå°±æ˜¯ä¸ºè¿›ç¨‹åˆ†é…çš„ä¸€æ®µå†…å­˜åŒº (è¿ç»­çš„åŒºåŸŸ)ï¼Œå®ƒçš„ <code>èµ·å§‹ä½ç½®</code> + <code>é€»è¾‘åœ°å€</code> = çº¿æ€§åœ°å€ (å°±æ˜¯ç‰©ç†åœ°å€)</p>
<blockquote>
<p>æœ¬è¿›ç¨‹è®¿é—®å…¶ä»–è¿›ç¨‹å†…å­˜ï¼Œå†…å­˜ä¸èƒ½read é”™è¯¯ã€‚</p>
</blockquote>
<h3 id="3-3-åˆ†é¡µæœºåˆ¶"><a href="#3-3-åˆ†é¡µæœºåˆ¶" class="headerlink" title="3.3 åˆ†é¡µæœºåˆ¶"></a>3.3 åˆ†é¡µæœºåˆ¶</h3><p>åˆ†é¡µæœºåˆ¶ å¯æ”¯æ’‘è¾ƒå¤§çš„å†…å­˜ï¼Œç‰©ç†ä¸Šå¤§å¤šå°†å…¶åˆ’åˆ†ä¸º 4KB/é¡µ</p>
<h3 id="3-4-Java-Heap"><a href="#3-4-Java-Heap" class="headerlink" title="3.4 Java Heap"></a>3.4 Java Heap</h3><p>Javaè¯­è¨€ï¼Œä¸»è¦çœ‹ Heap åŒºåŸŸï¼Œç³»ç»Ÿå‚æ•°è®¾ç½®ä¸º -Xms, -Xmx æ—¶ï¼ŒJVM é€šå¸¸æ˜¯ç”³è¯·ä¸€ä¸ªè¿ç»­çš„è™šæ‹Ÿåœ°å€ã€‚OSé¢„å…ˆåˆ†é…çš„ç‰©ç†å†…å­˜ç©ºé—´æ˜¯  -Xms çš„å¤§å°ï¼Œ -Xmx è®¸å¤šç©ºé—´çœŸæ­£ä½¿ç”¨çš„æ—¶å€™æ‰ä¼šåˆ†é…ã€‚</p>
<blockquote>
<p>32 bit ç³»ç»Ÿä¸­ï¼Œ1.5GB çš„ Heap åŒºåŸŸæ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚64bit ç©ºé—´ä¸ä¼šå—åˆ°é™åˆ¶ (JVMä¹Ÿå¿…é¡»æ¢æˆ64bitæ¨¡å¼)</p>
</blockquote>
<h2 id="4-Disk"><a href="#4-Disk" class="headerlink" title="4. Disk"></a>4. Disk</h2><p>disk ä¸€ç›´åœ¨æ‹–ç€è®¡ç®—æœºçš„åè…¿, SSDå¥½ä¸€äº›.</p>
<h2 id="5-Cache"><a href="#5-Cache" class="headerlink" title="5. Cache"></a>5. Cache</h2><p>CPU æœ‰ cacheï¼Œç³»ç»Ÿæ¶æ„æœ‰ cacheï¼Œå­˜å‚¨ä¸Šæœ‰cacheï¼Œåˆ†å¸ƒå¼ä¸Šæœ‰ cacheï¼Œæ•°æ®åº“ä¸Šæœ‰cacheï¼ŒORMæ¡†æ¶ä¸Šæœ‰cache â€¦</p>
<blockquote>
<p>Cache å°±æ˜¯  <code>é è¿‘åŸåˆ™</code></p>
</blockquote>
<h2 id="6-ç½‘ç»œä¸æ•°æ®åº“"><a href="#6-ç½‘ç»œä¸æ•°æ®åº“" class="headerlink" title="6. ç½‘ç»œä¸æ•°æ®åº“"></a>6. ç½‘ç»œä¸æ•°æ®åº“</h2><h3 id="6-1-Java-åŸºæœ¬-IO"><a href="#6-1-Java-åŸºæœ¬-IO" class="headerlink" title="6.1 Java åŸºæœ¬ IO"></a>6.1 Java åŸºæœ¬ IO</h3><p>åªè¦æ˜¯å†…å­˜ç¨‹åºçš„é€šä¿¡ï¼Œéƒ½å¯ä»¥ç†è§£ä¸º <strong>I</strong>nput / <strong>O</strong>utput</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SpringMVC Demo]]></title>
      <url>http://shopee.ai/2016/09/11/java/java-springMVC-mybatis-demo/</url>
      <content type="html"><![CDATA[<p>å†™ä¸€ä¸ªå…¥é—¨æ•´æ´çš„ç¼–å†™ java åç«¯ç¨‹åºçš„ä»£ç æ¶, ä¸»è¦ä½¿ç”¨äº† java + springMvc + mybatis + logback + spring task ç­‰æŠ€æœ¯.</p>
<p><a href="https://github.com/blair101/language/tree/master/java/springMVC_demo" target="_blank" rel="external">blairâ€™s github springMvc_demo</a></p>
<a id="more"></a>
<h2 id="Starting-Point"><a href="#Starting-Point" class="headerlink" title="Starting Point"></a>Starting Point</h2><p>ä¸ºä¸€äº›æ–°æ‰‹å’Œæˆ‘ä¸ªäººå¤‡ä»½ï¼Œå†™ä¸€ä¸ªå…¥é—¨<code>æ•´æ´</code>çš„ç¼–å†™ java åç«¯ç¨‹åºçš„ä»£ç æ¶.</p>
<blockquote>
<p>å†™è¿™æ ·çš„ç¨‹åºï¼Œæœ€é‡è¦çš„æ˜¯ <code>æ•´æ´ä¸çº¦å®šè§„èŒƒ</code> è€Œä¸æ˜¯å¤šä¹ˆé«˜æ·±çš„æŠ€æœ¯ï¼Œè®©æ¥æ‰‹ä½ ä»£ç çš„äººä¸ç—›è‹¦ï¼Œè¿™æ‰æ˜¯æˆåŠŸ</p>
</blockquote>
<h2 id="Involved-Tech"><a href="#Involved-Tech" class="headerlink" title="Involved Tech"></a>Involved Tech</h2><ul>
<li>Java</li>
<li>Restful</li>
<li>SpringMVC</li>
<li>Mybatis</li>
<li>logback</li>
<li>Spring-task</li>
</ul>
<blockquote>
<p>logback : ä¸€ä¸ªâ€œå¯é ã€é€šç”¨ã€å¿«é€Ÿè€Œåˆçµæ´»çš„Javaæ—¥å¿—æ¡†æ¶â€ã€‚<br>Spring-task ç¼–å†™éwebç¨‹åºï¼Œä»…ä»…æ˜¯åå°éœ€è¦å®šæ—¶è·‘çš„ä»»åŠ¡ï¼Œç»å¸¸è¢«ç”¨åˆ°ã€‚</p>
</blockquote>
<h2 id="How-to-Run"><a href="#How-to-Run" class="headerlink" title="How to Run"></a>How to Run</h2><h3 id="1-ä¿®æ”¹æ•°æ®åº“è¿æ¥ä¿¡æ¯"><a href="#1-ä¿®æ”¹æ•°æ®åº“è¿æ¥ä¿¡æ¯" class="headerlink" title="1. ä¿®æ”¹æ•°æ®åº“è¿æ¥ä¿¡æ¯"></a>1. ä¿®æ”¹æ•°æ®åº“è¿æ¥ä¿¡æ¯</h3><p>ç¼–è¾‘ ~/resources/props/db.properties å°†å…¶ä¸­çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># main mysql lib dataSource</span><br><span class="line">main.jdbc.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">main.jdbc.url=jdbc:mysql://192.168.***.**:3306/testdb01</span><br><span class="line">main.jdbc.username=your_username</span><br><span class="line">main.jdbc.password=your_password</span><br></pre></td></tr></table></figure>
<p>æ”¹ä¸ºä½ è‡ªå·±çš„ dataSource è¿æ¥ä¿¡æ¯</p>
<h3 id="2-æ•°æ®åº“ä¸­å»ºç«‹ä½ ç”¨åˆ°çš„è¡¨"><a href="#2-æ•°æ®åº“ä¸­å»ºç«‹ä½ ç”¨åˆ°çš„è¡¨" class="headerlink" title="2. æ•°æ®åº“ä¸­å»ºç«‹ä½ ç”¨åˆ°çš„è¡¨"></a>2. æ•°æ®åº“ä¸­å»ºç«‹ä½ ç”¨åˆ°çš„è¡¨</h3><p>å‚è§è¯­å¥  ~/resources/sql/projects.sql åœ¨ä½ çš„ æ•°æ®åº“ ä¸­æ‰§è¡Œå…¶ä¸­è¯­å¥ï¼Œå»ºç«‹ table <code>user</code>.</p>
<h3 id="3-ç¡®è®¤éœ€è¦çš„ç¯å¢ƒå·²å‡†å¤‡å¥½"><a href="#3-ç¡®è®¤éœ€è¦çš„ç¯å¢ƒå·²å‡†å¤‡å¥½" class="headerlink" title="3. ç¡®è®¤éœ€è¦çš„ç¯å¢ƒå·²å‡†å¤‡å¥½"></a>3. ç¡®è®¤éœ€è¦çš„ç¯å¢ƒå·²å‡†å¤‡å¥½</h3><blockquote>
<p>ç¡®è®¤ ~/resources/logback.xml ä¸­ï¼Œæ—¥å¿—çš„æ‰“å°è·¯å¾„ï¼Œæ˜¯å¦é€‚åˆä½ çš„ç¯å¢ƒ<br>æˆ‘è¿™é‡Œæ˜¯ /data0/www/logs/ ï¼Œ å¦‚æœ‰éœ€è¦æ”¹å˜ï¼Œè¯·è‡ªè¡Œæ›´æ”¹ã€‚ï¼ˆå¦‚æœä¸º windows ç¯å¢ƒï¼Œè¯·æ³¨æ„è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼‰</p>
</blockquote>
<h3 id="4-ç¼–è¯‘-æ‰“åŒ…-å¯åŠ¨jetty"><a href="#4-ç¼–è¯‘-æ‰“åŒ…-å¯åŠ¨jetty" class="headerlink" title="4. ç¼–è¯‘-æ‰“åŒ…-å¯åŠ¨jetty"></a>4. ç¼–è¯‘-æ‰“åŒ…-å¯åŠ¨jetty</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ  github ll</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x 13 hp staff 442 Sep 10 14:03 language/</span><br><span class="line">âœ  github cd language/java/springMVC_demo</span><br><span class="line">âœ  springMVC_demo git:(master) âœ— ll</span><br><span class="line">total 24</span><br><span class="line">-rw-r--r-- 1 hp staff   665 Sep 11 15:52 README.md</span><br><span class="line">-rw-r--r-- 1 hp staff 10712 Sep 11 15:10 pom.xml</span><br><span class="line">drwxr-xr-x 4 hp staff   136 Sep 10 13:30 src/</span><br><span class="line">âœ  springMVC_demo git:(master) âœ— mvn clean</span><br><span class="line">âœ  springMVC_demo git:(master) âœ— mvn compile</span><br><span class="line">âœ  springMVC_demo git:(master) âœ— mvn clean package</span><br><span class="line">âœ  springMVC_demo git:(master) âœ— mvn jetty:run</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Building x_demo Maven Webapp 1.0-SNAPSHOT</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] FrameworkServlet &apos;mvc-dispatcher&apos;: initialization completed in 572 ms</span><br><span class="line">[INFO] Started SelectChannelConnector@0.0.0.0:8080</span><br><span class="line">[INFO] Started Jetty Server</span><br><span class="line">[INFO] Starting scanner at interval of 5 seconds.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡ IDEA -&gt; Maven Projects -&gt; Plugins -&gt; jetty:run å¯åŠ¨ (æˆ–è€… Tomcat å¯åŠ¨)</p>
</blockquote>
<p>å¯åŠ¨æˆåŠŸåï¼Œè¿™æ—¶ä½ å¯ä»¥åœ¨ä½ çš„æµè§ˆå™¨åˆ†åˆ«è®¿é—®ä»¥ä¸‹æ¥å£ï¼ŒæŸ¥çœ‹æ•ˆæœäº†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://localhost:8080/</span><br><span class="line">http://localhost:8080/user/getusers</span><br><span class="line">http://localhost:8080/user/addusers</span><br><span class="line">http://localhost:8080/user/getusers</span><br><span class="line">http://localhost:8080/user/getuser/2</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">http://localhost:8080/user/getuser/2</span><br><span class="line">&#123;</span><br><span class="line">  &quot;status&quot;: 0,</span><br><span class="line">  &quot;errmsg&quot;: &quot;success&quot;,</span><br><span class="line">  &quot;data&quot;: &#123;</span><br><span class="line">    &quot;id&quot;: 2,</span><br><span class="line">    &quot;firstName&quot;: &quot;Andy&quot;,</span><br><span class="line">    &quot;lastName&quot;: &quot;Wong&quot;,</span><br><span class="line">    &quot;age&quot;: 31</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ä½ æµ‹è¯•çš„æ—¶å€™ï¼Œå¦‚æœä½ æƒ³åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°æ ¼å¼åŒ–åçš„jsonï¼Œè¯·è‡ªè¡Œå®‰è£… chrome ç›¸å…³çš„jsonæ’ä»¶ç­‰ã€‚</p>
</blockquote>
<h2 id="Desc"><a href="#Desc" class="headerlink" title="Desc"></a>Desc</h2><ol>
<li><p>å±•ç¤ºäº†å‰åç«¯å¼€å‘å¦‚ä½•ç”¨jsonè¿›è¡Œäº¤äº’çš„ä¸»æµæ–¹æ³•ï¼Œæ ‡å¿—çŠ¶æ€ä½ä¸é”™è¯¯ä¿¡æ¯ï¼Œè¿”å›ç»“æœå‘ˆç°ç»™å‰ç«¯ï¼Œç”¨ä¸€ä¸ª JsonResult ç±»æ¥å°è£…ï¼ŒåŒæ—¶åœ¨ web å±‚ï¼Œç”¨MappingJackson2HttpMessageConverter é…ç½®ï¼Œå¯è‡ªåŠ¨å°† Map\<string, object\=""> è½¬æ¢ä¸º json å‘ˆç°ç»™å‰ç«¯ç­‰ã€‚</string,></p>
</li>
<li><p>ä»£ç ç¼–å†™æ¯”è¾ƒè§„èŒƒï¼Œç”¨äº†ä¸»æµæ—¥å¿—æ¡†æ¶ï¼Œå°† info ä¸ error æ—¥å¿—åˆ†å¼€æ‰“å°ï¼Œä¸åå¼‚å¸¸ã€‚åˆ†å±‚è§„èŒƒï¼Œè¿˜ç‰¹æ„å†™äº†ä¸¤ä¸ªæ•°æ®æºå¦‚ä½•é…ç½®çš„æ ·ä¾‹ç­‰ã€‚</p>
</li>
<li><p>DAO å±‚ä¸å†™å®ç°ï¼Œåªå†™æ¥å£ï¼Œç”¨ Mybatis æ¥æ‰¿æ¥ï¼Œç±»å¯¹è±¡ä¸æ•°æ®åº“è¡¨ ç›´æ¥è‡ªåŠ¨è½¬æ¢è¯†åˆ«ï¼ŒåŒ…å«äº† æ•°æ®åº“è¡¨å­—æ®µä¸‹åˆ’çº¿ä¸javaç±»å­—æ®µé©¼å³°æ ‡è¯† å¦‚ä½•åŒ¹é…ç­‰ã€‚</p>
</li>
</ol>
<h2 id="Attentions"><a href="#Attentions" class="headerlink" title="Attentions"></a>Attentions</h2><blockquote>
<p>æ³¨æ„ï¼š ç‰ˆæœ¬æ§åˆ¶ä¸­ï¼Œæ¶‰åŠçš„æ•æ„Ÿ åº“åœ°å€ï¼Œç”¨æˆ·åï¼Œå¯†ç  ç­‰ ä¸ä¸Šä¼ .</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://github.com/blair101/language/tree/master/java/springMVC_demo" target="_blank" rel="external">blairâ€™s github springMVC_demo</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Machine Learning p3 - æ•°æ®çš„è·å–ã€å¤„ç†ä¸å‡†å¤‡]]></title>
      <url>http://shopee.ai/2016/09/09/spark/spark-machine-learning-p3/</url>
      <content type="html"><![CDATA[<p>ã€ŠSpark Machine Learingã€‹ Reading Notes ï¼š Sparkä¸Šæ•°æ®çš„è·å–ã€å¤„ç†ä¸å‡†å¤‡</p>
<a id="more"></a>
<p>MovieStream åŒ…æ‹¬ç½‘ç«™æä¾›çš„ç”µå½±æ•°æ®ã€ç”¨æˆ·çš„æœåŠ¡ä¿¡æ¯æ•°æ®ä»¥åŠè¡Œä¸ºæ•°æ®ã€‚</p>
<p>è¿™äº›æ•°æ®æ¶‰åŠç”µå½±å’Œç›¸å…³å†…å®¹ï¼ˆæ¯”å¦‚æ ‡é¢˜ã€åˆ†ç±»ã€å›¾ç‰‡ã€æ¼”å‘˜å’Œå¯¼æ¼”ï¼‰ã€ç”¨æˆ·ä¿¡æ¯ï¼ˆæ¯”å¦‚ç”¨æˆ·å±æ€§ã€ä½ç½®å’Œå…¶ä»–ä¿¡æ¯ï¼‰ä»¥åŠç”¨æˆ·æ´»åŠ¨æ•°æ®ï¼ˆæ¯”å¦‚æµè§ˆæ•°ã€é¢„è§ˆçš„æ ‡é¢˜å’Œæ¬¡æ•°ã€è¯„çº§ã€è¯„è®ºï¼Œä»¥åŠå¦‚èµã€åˆ†äº«ä¹‹ç±»çš„ç¤¾äº¤æ•°æ®ï¼Œè¿˜æœ‰åŒ…æ‹¬åƒFacebookå’ŒTwitterä¹‹ç±»çš„ç¤¾äº¤ç½‘ç»œå±æ€§ï¼‰ã€‚</p>
<p>å…¶å¤–éƒ¨æ•°æ®æ¥æºåˆ™å¯èƒ½åŒ…æ‹¬å¤©æ°”å’Œåœ°ç†å®šä½ä¿¡æ¯ï¼Œä»¥åŠå¦‚IMDBå’ŒRotten Tomatorsä¹‹ç±»çš„ç¬¬ä¸‰æ–¹ç”µå½±è¯„çº§ä¸è¯„è®ºä¿¡æ¯ç­‰ã€‚</p>
<p>ä¸€ä¸ªé¢„æµ‹ç²¾å‡†çš„å¥½æ¨¡å‹æœ‰ç€æé«˜çš„å•†ä¸šä»·å€¼ï¼ˆNetflix Prize å’Œ <strong>Kaggle</strong> ä¸Šæœºå™¨å­¦ä¹ æ¯”èµ›çš„æˆåŠŸå°±æ˜¯å¾ˆå¥½çš„è§è¯ï¼‰</p>
<p><strong>focus on</strong></p>
<ul>
<li>æ•°æ®çš„å¤„ç†ã€æ¸…ç†ã€æ¢ç´¢å’Œå¯è§†åŒ–æ–¹æ³•ï¼›</li>
<li>åŸå§‹æ•°æ®è½¬æ¢ä¸ºå¯ç”¨äºæœºå™¨å­¦ä¹ ç®—æ³•ç‰¹å¾çš„å„ç§æŠ€æœ¯ï¼›</li>
<li>å­¦ä¹ å¦‚ä½•ä½¿ç”¨å¤–éƒ¨åº“æˆ–Sparkå†…ç½®å‡½æ•°æ¥æ­£åˆ™åŒ–è¾“å…¥ç‰¹å¾.</li>
</ul>
<h2 id="1-è·å–å…¬å¼€æ•°æ®é›†"><a href="#1-è·å–å…¬å¼€æ•°æ®é›†" class="headerlink" title="1. è·å–å…¬å¼€æ•°æ®é›†"></a>1. è·å–å…¬å¼€æ•°æ®é›†</h2><p><strong>UCLæœºå™¨å­¦ä¹ çŸ¥è¯†åº“</strong></p>
<blockquote>
<p>åŒ…æ‹¬è¿‘300ä¸ªä¸åŒå¤§å°å’Œç±»å‹çš„æ•°æ®é›†ï¼Œå¯ç”¨äºåˆ†ç±»ã€å›å½’ã€èšç±»å’Œæ¨èç³»ç»Ÿä»»åŠ¡ã€‚æ•°æ®é›†åˆ—è¡¨ä½äºï¼š<a href="http://archive.ics.uci.edu/ml/ã€‚" target="_blank" rel="external">http://archive.ics.uci.edu/ml/ã€‚</a></p>
</blockquote>
<p><strong>Amazon AWSå…¬å¼€æ•°æ®é›†</strong></p>
<blockquote>
<p>åŒ…å«çš„é€šå¸¸æ˜¯å¤§å‹æ•°æ®é›†ï¼Œå¯é€šè¿‡Amazon S3è®¿é—®ã€‚è¿™äº›æ•°æ®é›†åŒ…æ‹¬äººç±»åŸºå› ç»„é¡¹ç›®ã€Common Crawlç½‘é¡µè¯­æ–™åº“ã€ç»´åŸºç™¾ç§‘æ•°æ®å’ŒGoogle Books Ngramsã€‚<br>ç›¸å…³ä¿¡æ¯å¯å‚è§ï¼š<a href="http://aws.amazon.com/publicdatasets/ã€‚" target="_blank" rel="external">http://aws.amazon.com/publicdatasets/ã€‚</a></p>
</blockquote>
<p><strong>Kaggle</strong></p>
<blockquote>
<p>è¿™é‡Œé›†åˆäº†Kaggleä¸¾è¡Œçš„å„ç§æœºå™¨å­¦ä¹ ç«èµ›æ‰€ç”¨çš„æ•°æ®é›†ã€‚<br>å®ƒä»¬è¦†ç›–åˆ†ç±»ã€å›å½’ã€æ’åã€æ¨èç³»ç»Ÿä»¥åŠå›¾åƒåˆ†æé¢†åŸŸï¼Œå¯ä»CompetitionsåŒºåŸŸä¸‹è½½ï¼š<a href="http://www.kaggle.com/competitionsã€‚" target="_blank" rel="external">http://www.kaggle.com/competitionsã€‚</a></p>
</blockquote>
<p><strong>KDnuggets</strong></p>
<blockquote>
<p>è¿™é‡ŒåŒ…å«ä¸€ä¸ªè¯¦ç»†çš„å…¬å¼€æ•°æ®é›†åˆ—è¡¨ï¼Œå…¶ä¸­ä¸€äº›ä¸Šé¢æåˆ°è¿‡çš„ã€‚<br>è¯¥åˆ—è¡¨ä½äºï¼š<a href="http://www.kdnuggets.com/datasets/index.htmlã€‚" target="_blank" rel="external">http://www.kdnuggets.com/datasets/index.htmlã€‚</a></p>
</blockquote>
<p><strong>MovieLens 100kæ•°æ®é›†</strong></p>
<p>MovieLens 100kæ•°æ®é›†åŒ…å«è¡¨ç¤ºå¤šä¸ªç”¨æˆ·å¯¹å¤šéƒ¨ç”µå½±çš„10ä¸‡æ¬¡è¯„çº§æ•°æ®ï¼Œä¹ŸåŒ…å«ç”µå½±å…ƒæ•°æ®å’Œç”¨æˆ·å±æ€§ä¿¡æ¯</p>
<p><a href="http://files.grouplens.org/datasets/movielens/ml-100k.zip" target="_blank" rel="external">http://files.grouplens.org/datasets/movielens/ml-100k.zip</a></p>
<p>ml-100k/  u.userï¼ˆç”¨æˆ·å±æ€§æ–‡ä»¶ï¼‰ã€u.itemï¼ˆç”µå½±å…ƒæ•°æ®ï¼‰å’Œu.dataï¼ˆç”¨æˆ·å¯¹ç”µå½±çš„è¯„çº§ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;unzip ml-100k.zip</span><br><span class="line">  inflating: ml-100k/allbut.pl</span><br><span class="line">  inflating: ml-100k/mku.sh</span><br><span class="line">  inflating: ml-100k/README</span><br><span class="line">  ...</span><br><span class="line">  inflating: ml-100k/ub.base</span><br><span class="line">  inflating: ml-100k/ub.test</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>u.user</strong></p>
<p>user.idã€ageã€genderã€occupationã€ZIP code</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;head -5 u.user</span><br><span class="line">  1|24|M|technician|85711</span><br><span class="line">  2|53|F|other|94043</span><br><span class="line">  3|23|M|writer|32067</span><br><span class="line">  4|24|M|technician|43537</span><br><span class="line">  5|33|F|other|15213</span><br></pre></td></tr></table></figure>
<p><strong>u.item</strong></p>
<p>movie idã€titleã€release dateä»¥åŠè‹¥å¹²ä¸IMDB linkå’Œç”µå½±åˆ†ç±»ç›¸å…³çš„å±æ€§</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;head -5 u.item</span><br><span class="line">  1|Toy Story (1995)|01-Jan-1995||http://us.imdb.com/M/title-exact?Toy%20 Story%20(1995)|0|0|0|1|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0</span><br><span class="line">  2|GoldenEye (1995)|01-Jan-1995||http://us.imdb.com/M/title- exact?GoldenEye%20(1995)|0|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0|1|0|0</span><br><span class="line">  3|Four Rooms (1995)|01-Jan-1995||http://us.imdb.com/M/title- exact?Four%20Rooms%20(1995)|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|1|0|0</span><br><span class="line">  4|Get Shorty (1995)|01-Jan-1995||http://us.imdb.com/M/title- exact?Get%20Shorty%20(1995)|0|1|0|0|0|1|0|0|1|0|0|0|0|0|0|0|0|0|0</span><br><span class="line">  5|Copycat (1995)|01-Jan-1995||http://us.imdb.com/M/title- exact?Copycat%20(1995)|0|0|0|0|0|0|1|0|1|0|0|0|0|0|0|0|1|0|0</span><br></pre></td></tr></table></figure>
<p><strong>u.data</strong></p>
<p>user idã€movie idã€ratingï¼ˆä»1åˆ°5ï¼‰å’Œtimestampå±æ€§ï¼Œå„å±æ€§é—´ç”¨åˆ¶è¡¨ç¬¦ï¼ˆ\tï¼‰åˆ†éš”</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;head -5 u.data</span><br><span class="line">196    242    3    881250949</span><br><span class="line">186    302    3    891717742</span><br><span class="line">22     377    1    878887116</span><br><span class="line">244    51     2    880606923</span><br><span class="line">166    346    1    886397596</span><br></pre></td></tr></table></figure>
<h2 id="2-æ¢ç´¢ä¸å¯è§†åŒ–æ•°æ®"><a href="#2-æ¢ç´¢ä¸å¯è§†åŒ–æ•°æ®" class="headerlink" title="2. æ¢ç´¢ä¸å¯è§†åŒ–æ•°æ®"></a>2. æ¢ç´¢ä¸å¯è§†åŒ–æ•°æ®</h2><p>IPythonçš„å®‰è£…æ–¹æ³•å¯å‚è€ƒå¦‚ä¸‹æŒ‡å¼•ï¼š<a href="http://ipython.org/install.htmlã€‚" target="_blank" rel="external">http://ipython.org/install.htmlã€‚</a></p>
<p>å¦‚æœè¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨IPythonï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæ•™ç¨‹ï¼š<a href="http://ipython.org/ipython-doc/stable/interactive/tutorial.htmlã€‚" target="_blank" rel="external">http://ipython.org/ipython-doc/stable/interactive/tutorial.htmlã€‚</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;IPYTHON=1 IPYTHON_OPTS=&quot;--pylab&quot; ./bin/pyspark</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç»ˆç«¯é‡Œçš„IPython 2.3.1 â€“ An enhanced Interactive Pythonå’ŒUsing matplotlib backend: MacOSXè¾“å‡ºè¡Œè¡¨ç¤ºIPythonå’Œpylabå‡å·²è¢«PySparkå¯ç”¨ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Welcome to</span><br><span class="line">      ____              __</span><br><span class="line">     / __/__  ___ _____/ /__</span><br><span class="line">    _\ \/ _ \/ _ `/ __/  &apos;_/</span><br><span class="line">   /__ / .__/\_,_/_/ /_/\_\   version 1.5.2</span><br><span class="line">      /_/</span><br><span class="line"></span><br><span class="line">Using Python version 2.7.10 (default, Jul 14 2015 19:46:27)</span><br><span class="line">SparkContext available as sc, HiveContext available as sqlContext.</span><br><span class="line"></span><br><span class="line">In [1]:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯ä»¥å°†æ ·æœ¬ä»£ç è¾“å…¥åˆ°IPythonç»ˆç«¯ï¼Œä¹Ÿå¯é€šè¿‡IPythonæä¾›çš„Notebook åº”ç”¨æ¥å®Œæˆã€‚Notebookæ”¯æŒHTMLæ˜¾ç¤ºï¼Œä¸”åœ¨IPythonç»ˆç«¯çš„åŸºç¡€ä¸Šæä¾›äº†ä¸€äº›å¢å¼ºåŠŸèƒ½ï¼Œå¦‚å³æ—¶ç»˜å›¾ã€HTMLæ ‡è®°ï¼Œä»¥åŠç‹¬ç«‹è¿è¡Œä»£ç ç‰‡æ®µçš„åŠŸèƒ½ã€‚</p>
<p>IPython Notebook ä½¿ç”¨æŒ‡å—ï¼š<a href="http://ipython.org/ipython-doc/stable/interactive/notebook.html" target="_blank" rel="external">http://ipython.org/ipython-doc/stable/interactive/notebook.html</a></p>
</blockquote>
<h3 id="2-1-æ¢ç´¢ç”¨æˆ·æ•°æ®"><a href="#2-1-æ¢ç´¢ç”¨æˆ·æ•°æ®" class="headerlink" title="2.1 æ¢ç´¢ç”¨æˆ·æ•°æ®"></a>2.1 æ¢ç´¢ç”¨æˆ·æ•°æ®</h3><figure class="highlight plain"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line">user_data = sc.textFile(&quot;/Users/hp/ghome/ml/ml-100k/u.user&quot;)</span><br><span class="line">user_data.first()</span><br><span class="line">user_data.take(5)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line">user_fields = user_data.map(lambda line: line.split(&quot;|&quot;))</span><br><span class="line">num_users = user_fields.map(lambda fields: fields[0]).count()</span><br><span class="line">num_genders = user_fields.map(lambda fields: fields[2]).distinct().count()</span><br><span class="line">num_occupations = user_fields.map(lambda fields: fields[3]).distinct().count()</span><br><span class="line">num_zipcodes = user_fields.map(lambda fields: fields[4]).distinct().count()</span><br><span class="line">print &quot;Users: %d, genders: %d, occupations: %d, ZIP codes: %d&quot; % (num_users, num_genders, num_occupations, num_zipcodes)</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Users: 943, genders: 2, occupations: 21, ZIP codes: 795</span><br></pre></td></tr></table></figure>
<p>matplotlibçš„histä¸ªç›´æ–¹å›¾ï¼Œä»¥åˆ†æç”¨æˆ·å¹´é¾„çš„åˆ†å¸ƒæƒ…å†µï¼š</p>
<p><strong>age distribution</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ages = user_fields.map(lambda x: int(x[1])).collect()</span><br><span class="line">hist(ages, bins=20, color=&apos;lightblue&apos;, normed=True)</span><br><span class="line">fig = matplotlib.pyplot.gcf()</span><br><span class="line">fig.set_size_inches(16, 10)</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-3.1.png" alt="screenshow?key=15055650f47cff956148"></p>
<p><strong>occupation distribution</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">count_by_occupation = user_fields.map(lambda fields: (fields[3], 1)).reduceByKey(lambda x, y: x + y).collect()</span><br><span class="line"></span><br><span class="line">x_axis1 = np.array([c[0] for c in count_by_occupation])</span><br><span class="line"></span><br><span class="line">y_axis1 = np.array([c[1] for c in count_by_occupation])</span><br><span class="line"></span><br><span class="line">print x_axis1</span><br><span class="line">[u&apos;administrator&apos; u&apos;retired&apos; u&apos;lawyer&apos; u&apos;none&apos; u&apos;student&apos; u&apos;technician&apos;</span><br><span class="line"> u&apos;programmer&apos; u&apos;salesman&apos; u&apos;homemaker&apos; u&apos;writer&apos; u&apos;doctor&apos;</span><br><span class="line"> u&apos;entertainment&apos; u&apos;marketing&apos; u&apos;executive&apos; u&apos;scientist&apos; u&apos;educator&apos;</span><br><span class="line"> u&apos;healthcare&apos; u&apos;librarian&apos; u&apos;artist&apos; u&apos;other&apos; u&apos;engineer&apos;]</span><br><span class="line"></span><br><span class="line">print y_axis1</span><br><span class="line">[ 79  14  12   9 196  27  66  12   7  45   7  18  26  32  31  95  16  51</span><br><span class="line">  28 105  67]</span><br></pre></td></tr></table></figure>
<p>plt.xticks(rotation=30)ä¹‹ç±»çš„ä»£ç  æ˜¯ ç¾åŒ–æ¡å½¢å›¾</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pos = np.arange(len(x_axis))</span><br><span class="line">width = 1.0</span><br><span class="line"></span><br><span class="line">ax = plt.axes()</span><br><span class="line">ax.set_xticks(pos + (width / 2))</span><br><span class="line">ax.set_xticklabels(x_axis)</span><br><span class="line"></span><br><span class="line">plt.bar(pos, y_axis, width, color=&apos;lightblue&apos;)</span><br><span class="line">plt.xticks(rotation=30)</span><br><span class="line">fig = matplotlib.pyplot.gcf()</span><br><span class="line">fig.set_size_inches(16, 10)</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-3.2.png" alt="screenshow?key=15057f015ac5712d9a83"></p>
<p>Sparkå¯¹RDDæä¾›äº†ä¸€ä¸ªåä¸ºcountByValueçš„ä¾¿æ·å‡½æ•°</p>
<figure class="highlight plain"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line">count_by_occupation2 = user_fields.map(lambda fields: fields[3]).countByValue()</span><br><span class="line">print &quot;Map-reduce approach:&quot;</span><br><span class="line">print dict(count_by_occupation2)</span><br><span class="line">print &quot;&quot;</span><br><span class="line">print &quot;countByValue approach:&quot;</span><br><span class="line">print dict(count_by_occupation)</span><br></pre></td></tr></table></figure>
<h3 id="2-2-æ¢ç´¢ç”µå½±æ•°æ®"><a href="#2-2-æ¢ç´¢ç”µå½±æ•°æ®" class="headerlink" title="2.2 æ¢ç´¢ç”µå½±æ•°æ®"></a>2.2 æ¢ç´¢ç”µå½±æ•°æ®</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">movie_data = sc.textFile(&quot;/PATH/ml-100k/u.item&quot;)</span><br><span class="line">print movie_data.first()</span><br><span class="line">num_movies = movie_data.count()</span><br><span class="line">print &quot;Movies: %d&quot; % num_movies</span><br></pre></td></tr></table></figure>
<p>1|Toy Story (1995)|01-Jan-1995||<a href="http://us.imdb.com/M/title-exact?Toy%20Story%20(1995)|0|0|0|1|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0" target="_blank" rel="external">http://us.imdb.com/M/title-exact?Toy%20Story%20(1995)|0|0|0|1|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0</a><br>Movies: 1682</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">def convert_year(x):</span><br><span class="line">  try:</span><br><span class="line">    return int(x[-4:])</span><br><span class="line">  except:</span><br><span class="line">    return 1900</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">movie_fields = movie_data.map(lambda lines: lines.split(&quot;|&quot;))</span><br><span class="line">years = movie_fields.map(lambda fields: fields[2]).map(lambda x: convert_year(x))</span><br><span class="line"></span><br><span class="line">years_filtered = years.filter(lambda x: x != 1900)</span><br><span class="line"></span><br><span class="line">movie_ages = years_filtered.map(lambda yr: 1998-yr).countByValue()</span><br><span class="line">values = movie_ages.values()</span><br><span class="line">bins = movie_ages.keys()</span><br><span class="line">hist(values, bins=bins, color=&apos;lightblue&apos;, normed=True)</span><br><span class="line">fig = matplotlib.pyplot.gcf()</span><br><span class="line">fig.set_size_inches(16,10)</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-3.3.png" alt="screenshow?key=150556f33e22a36bb651"></p>
<h3 id="2-3-æ¢ç´¢è¯„çº§æ•°æ®"><a href="#2-3-æ¢ç´¢è¯„çº§æ•°æ®" class="headerlink" title="2.3 æ¢ç´¢è¯„çº§æ•°æ®"></a>2.3 æ¢ç´¢è¯„çº§æ•°æ®</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rating_data = sc.textFile(&quot;/Users/hp/ghome/ml/ml-100k/u.data&quot;)</span><br><span class="line">print rating_data.first()</span><br><span class="line">num_ratings = rating_data.count()</span><br><span class="line">print &quot;Ratings: %d&quot; % num_ratings</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rating_data = rating_data.map(lambda line: line.split(&quot;\t&quot;))</span><br><span class="line">ratings = rating_data.map(lambda fields: int(fields[2]))</span><br><span class="line">max_rating = ratings.reduce(lambda x, y: max(x, y))</span><br><span class="line">min_rating = ratings.reduce(lambda x, y: min(x, y))</span><br><span class="line">mean_rating = ratings.reduce(lambda x, y: x + y) / num_ratings</span><br><span class="line">median_rating = np.median(ratings.collect())</span><br><span class="line">ratings_per_user = num_ratings / num_users</span><br><span class="line">ratings_per_movie = num_ratings / num_movies</span><br><span class="line">print &quot;Min rating: %d&quot; % min_rating</span><br><span class="line">print &quot;Max rating: %d&quot; % max_rating</span><br><span class="line">print &quot;Average rating: %2.2f&quot; % mean_rating</span><br><span class="line">print &quot;Median rating: %d&quot; % median_rating</span><br><span class="line">print &quot;Average # of ratings per user: %2.2f&quot; % ratings_per_user</span><br><span class="line">print &quot;Average # of ratings per movie: %2.2f&quot; % ratings_per_movie</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Max rating: 5<br>Average rating: 3.00<br>Median rating: 4<br>Average # of ratings per user: 106.00<br>Average # of ratings per movie: 59.00</p>
</blockquote>
<p>Sparkå¯¹RDDä¹Ÿæä¾›ä¸€ä¸ªåä¸ºstatesçš„å‡½æ•°ã€‚è¯¥å‡½æ•°åŒ…å«ä¸€ä¸ªæ•°å€¼å˜é‡ç”¨äºåšç±»ä¼¼çš„ç»Ÿè®¡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ratings.stats()</span><br><span class="line"></span><br><span class="line">å…¶è¾“å‡ºä¸ºï¼š</span><br><span class="line">(count: 100000, mean: 3.52986, stdev: 1.12566797076, max: 5.0, min: 1.0)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">count_by_rating = ratings.countByValue()</span><br><span class="line">x_axis = np.array(count_by_rating.keys())</span><br><span class="line">y_axis = np.array([float(c) for c in count_by_rating.values()])</span><br><span class="line"># è¿™é‡Œå¯¹yè½´æ­£åˆ™åŒ–ï¼Œä½¿å®ƒè¡¨ç¤ºç™¾åˆ†æ¯”</span><br><span class="line">y_axis_normed = y_axis / y_axis.sum()</span><br><span class="line">pos = np.arange(len(x_axis))</span><br><span class="line">width = 1.0</span><br><span class="line"></span><br><span class="line">ax = plt.axes()</span><br><span class="line">ax.set_xticks(pos + (width / 2))</span><br><span class="line">ax.set_xticklabels(x_axis)</span><br><span class="line"></span><br><span class="line">plt.bar(pos, y_axis_normed, width, color=&apos;lightblue&apos;)</span><br><span class="line">plt.xticks(rotation=30)</span><br><span class="line">fig = matplotlib.pyplot.gcf()</span><br><span class="line">fig.set_size_inches(16, 10)</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-3.4.png" alt="screenshow?key=1505422e3494afb95855"></p>
<p><strong>å„ä¸ªç”¨æˆ·è¯„çº§æ¬¡æ•°çš„åˆ†å¸ƒæƒ…å†µ</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">user_ratings_grouped = rating_data.map(lambda fields: (int(fields[0]), int(fields[2]))).groupByKey()</span><br><span class="line"></span><br><span class="line">user_ratings_byuser = user_ratings_grouped.map(lambda (k, v): (k, len(v)))</span><br><span class="line">user_ratings_byuser.take(10)</span><br><span class="line"></span><br><span class="line">Out[91]:</span><br><span class="line">[(2, 62),</span><br><span class="line"> (4, 24),</span><br><span class="line"> (6, 211),</span><br><span class="line"> (8, 59),</span><br><span class="line"> (10, 184),</span><br><span class="line"> (12, 51),</span><br><span class="line"> (14, 98),</span><br><span class="line"> (16, 140),</span><br><span class="line"> (18, 277),</span><br><span class="line"> (20, 48)]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">user_ratings_byuser_local = user_ratings_byuser.map(lambda (k, v): v).collect()</span><br><span class="line">hist(user_ratings_byuser_local, bins=200, color=&apos;lightblue&apos;, normed=True)</span><br><span class="line">fig = matplotlib.pyplot.gcf()</span><br><span class="line">fig.set_size_inches(16,10)</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-3.5.png" alt="screenshow?key=15056b5ffb7672cee5d1"></p>
<h2 id="3-å¤„ç†ä¸è½¬æ¢æ•°æ®"><a href="#3-å¤„ç†ä¸è½¬æ¢æ•°æ®" class="headerlink" title="3. å¤„ç†ä¸è½¬æ¢æ•°æ®"></a>3. å¤„ç†ä¸è½¬æ¢æ•°æ®</h2><p><strong>éè§„æ•´æ•°æ®å’Œç¼ºå¤±æ•°æ®çš„å¡«å……</strong></p>
<h2 id="4-ä»æ•°æ®ä¸­æå–æœ‰ç”¨ç‰¹å¾"><a href="#4-ä»æ•°æ®ä¸­æå–æœ‰ç”¨ç‰¹å¾" class="headerlink" title="4. ä»æ•°æ®ä¸­æå–æœ‰ç”¨ç‰¹å¾"></a>4. ä»æ•°æ®ä¸­æå–æœ‰ç”¨ç‰¹å¾</h2><p>åœ¨å®Œæˆå¯¹æ•°æ®çš„åˆæ­¥æ¢ç´¢ã€å¤„ç†å’Œæ¸…ç†åï¼Œä¾¿å¯ä»ä¸­æå–å¯ä¾›æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒç”¨çš„ç‰¹å¾ã€‚</p>
<p>ç‰¹å¾ï¼ˆ<code>feature</code>ï¼‰æŒ‡é‚£äº›ç”¨äº<strong><em>æ¨¡å‹è®­ç»ƒçš„å˜é‡</em></strong>ã€‚æ¯ä¸€è¡Œæ•°æ®åŒ…å«å¯ä¾›æå–åˆ°è®­ç»ƒæ ·æœ¬ä¸­çš„å„ç§ä¿¡æ¯ã€‚</p>
<p>å‡ ä¹æ‰€æœ‰æœºå™¨å­¦ä¹ æ¨¡å‹éƒ½æ˜¯ä¸ç”¨å‘é‡è¡¨ç¤ºçš„æ•°å€¼ç‰¹å¾æ‰“äº¤é“ï¼›éœ€å°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºæ•°å€¼ã€‚</p>
<p>ç‰¹å¾å¯ä»¥æ¦‚æ‹¬åœ°åˆ†ä¸ºå¦‚ä¸‹å‡ ç§ã€‚</p>
<ul>
<li>æ•°å€¼ç‰¹å¾ï¼ˆnumerical featureï¼‰ï¼šè¿™äº›ç‰¹å¾é€šå¸¸ä¸ºå®æ•°æˆ–æ•´æ•°ï¼Œæ¯”å¦‚ä¹‹å‰ä¾‹å­ä¸­æåˆ°çš„å¹´é¾„ã€‚</li>
<li>ç±»åˆ«ç‰¹å¾ï¼ˆcategorical featureï¼‰ï¼šæˆ‘ä»¬æ•°æ®é›†ä¸­çš„ç”¨æˆ·æ€§åˆ«ã€èŒä¸šæˆ–ç”µå½±ç±»åˆ«ä¾¿æ˜¯è¿™ç±»ã€‚</li>
<li>æ–‡æœ¬ç‰¹å¾ï¼ˆtext featureï¼‰ï¼šå®ƒä»¬æ´¾ç”Ÿè‡ªæ•°æ®ä¸­çš„æ–‡æœ¬å†…å®¹ï¼Œæ¯”å¦‚ç”µå½±åã€æè¿°æˆ–æ˜¯è¯„è®ºã€‚</li>
<li>å…¶ä»–ç‰¹å¾ï¼šâ€¦ åœ°ç†ä½ç½®åˆ™å¯ç”±ç»çº¬åº¦æˆ–åœ°ç†æ•£åˆ—ï¼ˆgeohashï¼‰è¡¨ç¤ºã€‚</li>
</ul>
<h3 id="4-1-æ•°å€¼ç‰¹å¾"><a href="#4-1-æ•°å€¼ç‰¹å¾" class="headerlink" title="4.1 æ•°å€¼ç‰¹å¾"></a>4.1 æ•°å€¼ç‰¹å¾</h3><p>åŸå§‹çš„æ•°å€¼å’Œä¸€ä¸ªæ•°å€¼ç‰¹å¾ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æœºå™¨å­¦ä¹ æ¨¡å‹ä¸­æ‰€å­¦ä¹ çš„æ˜¯å„ä¸ªç‰¹å¾æ‰€å¯¹åº”çš„å‘é‡çš„æƒå€¼ã€‚è¿™äº›æƒå€¼åœ¨<code>ç‰¹å¾å€¼</code>åˆ°è¾“å‡ºæˆ–æ˜¯<code>ç›®æ ‡å˜é‡</code>ï¼ˆæŒ‡åœ¨ç›‘ç£å­¦ä¹ æ¨¡å‹ä¸­ï¼‰is very importantã€‚</p>
<p>å½“æ•°å€¼ç‰¹å¾ä»å¤„äºåŸå§‹å½¢å¼æ—¶ï¼Œå…¶å¯ç”¨æ€§ç›¸å¯¹è¾ƒä½ï¼Œä½†å¯ä»¥è½¬åŒ–ä¸ºæ›´æœ‰ç”¨çš„è¡¨ç¤ºå½¢å¼ã€‚</p>
<p>å¦‚ (ä½ç½®ä¿¡æ¯ : åŸå§‹ä½ç½®ä¿¡æ¯ï¼ˆæ¯”å¦‚ç”¨ç»çº¬åº¦è¡¨ç¤ºçš„ï¼‰ï¼Œä¿¡æ¯å¯ç”¨æ€§å¾ˆä½ã€‚ ç„¶è‹¥å¯¹ä½ç½®è¿›è¡Œèšåˆï¼ˆæ¯”å¦‚èšç„¦ä¸ºä¸€ä¸ªcity or countryï¼‰ï¼Œå’Œç‰¹å®šè¾“å‡º ä¹‹é—´å­˜åœ¨æŸç§å…³è”ã€‚</p>
<h3 id="4-2-ç±»åˆ«ç‰¹å¾"><a href="#4-2-ç±»åˆ«ç‰¹å¾" class="headerlink" title="4.2 ç±»åˆ«ç‰¹å¾"></a>4.2 ç±»åˆ«ç‰¹å¾</h3><p>å°†ç±»åˆ«ç‰¹å¾è¡¨ç¤ºä¸ºæ•°å­—å½¢å¼ï¼Œå¸¸å¯å€ŸåŠ© k ä¹‹1ï¼ˆ1-of-kï¼‰æ–¹æ³•è¿›è¡Œ</p>
<p>æ¯”å¦‚ï¼Œå¯å–<code>occupation</code> æ‰€æœ‰å¯èƒ½å–å€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">all_occupations = user_fields.map(lambda fields: fields[3]). distinct().collect()</span><br><span class="line">all_occupations.sort()</span><br></pre></td></tr></table></figure>
<p>ç„¶å¯ä¾æ¬¡å¯¹å„å¯èƒ½çš„èŒä¸šåˆ†é…åºå·ï¼ˆæ³¨æ„ ä»0å¼€å§‹ç¼–å·ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">idx = <span class="number">0</span></span><br><span class="line">all_occupations_dict = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> o <span class="keyword">in</span> all_occupations:</span><br><span class="line">    all_occupations_dict[o] = idx</span><br><span class="line">    idx +=<span class="number">1</span></span><br><span class="line"><span class="comment"># çœ‹ä¸€ä¸‹â€œkä¹‹1â€ç¼–ç ä¼šå¯¹æ–°çš„ä¾‹å­åˆ†é…ä»€ä¹ˆå€¼</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Encoding of 'doctor': %d"</span> % all_occupations_dict[<span class="string">'doctor'</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Encoding of 'programmer': %d"</span> % all_occupations_dict[<span class="string">'programmer'</span>]</span><br></pre></td></tr></table></figure>
<p>å…¶è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Encoding of &apos;doctor&apos;: 2</span><br><span class="line">Encoding of &apos;programmer&apos;: 14</span><br></pre></td></tr></table></figure>
<h3 id="4-3-æ´¾ç”Ÿç‰¹å¾"><a href="#4-3-æ´¾ç”Ÿç‰¹å¾" class="headerlink" title="4.3 æ´¾ç”Ÿç‰¹å¾"></a>4.3 æ´¾ç”Ÿç‰¹å¾</h3><p>ä»åŸå§‹æ•°æ®æ´¾ç”Ÿç‰¹å¾çš„ä¾‹å­åŒ…æ‹¬è®¡ç®—å¹³å‡å€¼ã€ä¸­ä½å€¼ã€æ–¹å·®ã€å’Œã€å·®ã€æœ€å¤§å€¼æˆ–æœ€å°å€¼ä»¥åŠè®¡æ•°ã€‚ä»ç”µå½±çš„å‘è¡Œå¹´ä»½å’Œå½“å‰å¹´ä»½æ´¾ç”Ÿäº†æ–°çš„movie ageç‰¹å¾çš„ã€‚è¿™ç±»è½¬æ¢èƒŒåçš„æƒ³æ³•å¸¸å¸¸æ˜¯å¯¹æ•°å€¼æ•°æ®è¿›è¡ŒæŸç§æ¦‚æ‹¬ï¼Œå¹¶æœŸæœ›å®ƒèƒ½è®©æ¨¡å‹å­¦ä¹ æ›´å®¹æ˜“ã€‚</p>
<p>æ•°å€¼ç‰¹å¾åˆ°ç±»åˆ«ç‰¹å¾çš„è½¬æ¢ä¹Ÿå¾ˆå¸¸è§ï¼Œæ¯”å¦‚åˆ’åˆ†ä¸ºåŒºé—´ç‰¹å¾ã€‚è¿›è¡Œè¿™ç±»è½¬æ¢çš„å˜é‡å¸¸è§çš„æœ‰å¹´é¾„ã€åœ°ç†ä½ç½®å’Œæ—¶é—´ã€‚</p>
<p><strong>å¦‚ ï¼š å°†æ—¶é—´æˆ³è½¬ä¸ºç±»åˆ«ç‰¹</strong></p>
<p>ç”µå½±è¯„çº§å‘ç”Ÿçš„æ—¶é—´</p>
<p>[â€˜afternoonâ€™, â€˜eveningâ€™, â€˜morningâ€™, â€˜morningâ€™, â€˜morningâ€™]</p>
<h3 id="4-4-æ–‡æœ¬ç‰¹å¾"><a href="#4-4-æ–‡æœ¬ç‰¹å¾" class="headerlink" title="4.4 æ–‡æœ¬ç‰¹å¾"></a>4.4 æ–‡æœ¬ç‰¹å¾</h3><p>æ–‡æœ¬ç‰¹å¾ä¹Ÿæ˜¯ä¸€ç§ç±»åˆ«ç‰¹å¾æˆ–æ´¾ç”Ÿç‰¹å¾</p>
<p>NLP ä¾¿æ˜¯ä¸“æ³¨äºæ–‡æœ¬å†…å®¹çš„å¤„ç†ã€è¡¨ç¤ºå’Œå»ºæ¨¡çš„ä¸€ä¸ªé¢†åŸŸã€‚</p>
<p>ä»‹ç»ä¸€ç§ç®€å•ä¸”æ ‡å‡†åŒ–çš„æ–‡æœ¬ç‰¹å¾æå–æ–¹æ³•ã€‚è¯¥æ–¹æ³•è¢«ç§°ä¸ºè¯è¢‹ï¼ˆbag-of-wordï¼‰è¡¨ç¤ºæ³•ã€‚</p>
<p>è¯è¢‹æ³•å°†ä¸€æ®µæ–‡æœ¬è§†ä¸ºç”±å…¶ä¸­çš„æ–‡æœ¬æˆ–æ•°å­—ç»„æˆçš„é›†åˆï¼Œå…¶å¤„ç†è¿‡ç¨‹å¦‚ä¸‹ã€‚</p>
<p><strong>bag-of-word</strong></p>
<p><strong>(1) åˆ†è¯ï¼ˆtokenizationï¼‰</strong></p>
<p>é¦–å…ˆä¼šåº”ç”¨æŸäº›åˆ†è¯æ–¹æ³•æ¥å°†æ–‡æœ¬åˆ†éš”ä¸ºä¸€ä¸ªç”±è¯ï¼ˆä¸€èˆ¬å¦‚å•è¯ã€æ•°å­—ç­‰ï¼‰ç»„æˆçš„é›†åˆã€‚</p>
<p><strong>(2) åˆ é™¤åœç”¨è¯ï¼ˆstop words removal)</strong></p>
<p>åˆ é™¤å¸¸è§çš„å•è¯ï¼Œæ¯”å¦‚theã€andå’Œbutï¼ˆè¿™äº›è¯è¢«ç§°ä½œåœç”¨è¯ï¼‰ã€‚</p>
<p><strong>(3) æå–è¯å¹²ï¼ˆstemmingï¼‰</strong>ï¼š</p>
<p>æ˜¯æŒ‡å°†å„ä¸ªè¯ç®€åŒ–ä¸ºå…¶åŸºæœ¬çš„å½¢å¼æˆ–è€…å¹²è¯ã€‚å¸¸è§çš„ä¾‹å­å¦‚å¤æ•°å˜ä¸ºå•æ•°ï¼ˆæ¯”å¦‚dogså˜ä¸ºdogç­‰ï¼‰ã€‚æå–çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œæ–‡æœ¬å¤„ç†ç®—æ³•åº“ä¸­å¸¸å¸¸ä¼šåŒ…æ‹¬å¤šç§è¯å¹²æå–æ–¹æ³•ã€‚</p>
<p><strong>(4) å‘é‡åŒ–ï¼ˆvectorizationï¼‰</strong> ï¼š</p>
<p>å‘é‡æ¥è¡¨ç¤ºå¤„ç†å¥½çš„è¯ã€‚äºŒå…ƒå‘é‡å¯èƒ½æ˜¯æœ€ä¸ºç®€å•çš„è¡¨ç¤ºæ–¹å¼ã€‚å®ƒç”¨1å’Œ0æ¥åˆ†åˆ«è¡¨ç¤ºæ˜¯å¦å­˜åœ¨æŸä¸ªè¯ã€‚ä»æ ¹æœ¬ä¸Šè¯´ï¼Œè¿™ä¸ä¹‹å‰æåˆ°çš„ k ä¹‹1ç¼–ç ç›¸åŒã€‚ä¸ k ä¹‹1ç›¸åŒï¼Œå®ƒéœ€è¦ä¸€ä¸ªè¯çš„å­—å…¸æ¥å®ç°è¯åˆ°ç´¢å¼•åºå·çš„æ˜ å°„ã€‚éšç€é‡åˆ°çš„è¯å¢å¤šï¼Œå„ç§è¯å¯èƒ½è¾¾æ•°ç™¾ä¸‡ã€‚ç”±æ­¤ï¼Œä½¿ç”¨ç¨€ç–çŸ©é˜µæ¥è¡¨ç¤ºå°±å¾ˆå…³é”®ã€‚è¿™ç§è¡¨ç¤ºåªè®°å½•æŸä¸ªè¯æ˜¯å¦å‡ºç°è¿‡ï¼Œä»è€ŒèŠ‚çœå†…å­˜å’Œç£ç›˜ç©ºé—´ï¼Œä»¥åŠè®¡ç®—æ—¶é—´ã€‚</p>
<p><strong>æå–ç®€å•çš„æ–‡æœ¬ç‰¹å¾</strong></p>
<p>å‚è§ : <a href="http://www.ituring.com.cn/tupubarticle/5567" target="_blank" rel="external">http://www.ituring.com.cn/tupubarticle/5567</a></p>
<p>ç°åœ¨æ¯ä¸€ä¸ªç”µå½±æ ‡é¢˜éƒ½è¢«è½¬æ¢ä¸ºä¸€ä¸ªç¨€ç–å‘é‡ã€‚</p>
<h3 id="4-5-æ­£åˆ™åŒ–ç‰¹å¾"><a href="#4-5-æ­£åˆ™åŒ–ç‰¹å¾" class="headerlink" title="4.5 æ­£åˆ™åŒ–ç‰¹å¾"></a>4.5 æ­£åˆ™åŒ–ç‰¹å¾</h3><p>åœ¨å°†ç‰¹å¾æå–ä¸ºå‘é‡å½¢å¼åï¼Œä¸€ç§å¸¸è§çš„é¢„å¤„ç†æ–¹å¼æ˜¯å°†æ•°å€¼æ•°æ®æ­£åˆ™åŒ–ï¼ˆnormalizationï¼‰ã€‚å…¶èƒŒåçš„æ€æƒ³æ˜¯å°†å„ä¸ªæ•°å€¼ç‰¹å¾è¿›è¡Œè½¬æ¢ï¼Œä»¥å°†å®ƒä»¬çš„å€¼åŸŸè§„èŒƒåˆ°ä¸€ä¸ªæ ‡å‡†åŒºé—´å†…ã€‚æ­£åˆ™åŒ–çš„æ–¹æ³•æœ‰å¦‚ä¸‹å‡ ç§ã€‚</p>
<ul>
<li>æ­£åˆ™åŒ–ç‰¹å¾ï¼šè¿™å®é™…ä¸Šæ˜¯å¯¹æ•°æ®é›†ä¸­çš„å•ä¸ªç‰¹å¾è¿›è¡Œè½¬æ¢ã€‚æ¯”å¦‚å‡å»å¹³å‡å€¼ï¼ˆç‰¹å¾å¯¹é½ï¼‰æˆ–æ˜¯è¿›è¡Œæ ‡å‡†çš„æ­£åˆ™è½¬æ¢ï¼ˆä»¥ä½¿å¾—è¯¥ç‰¹å¾çš„å¹³å‡å€¼å’Œæ ‡å‡†å·®åˆ†åˆ«ä¸º0å’Œ1ï¼‰ã€‚</li>
<li>æ­£åˆ™åŒ–ç‰¹å¾å‘é‡ï¼šè¿™é€šå¸¸æ˜¯å¯¹æ•°æ®ä¸­çš„æŸä¸€è¡Œçš„æ‰€æœ‰ç‰¹å¾è¿›è¡Œè½¬æ¢ï¼Œä»¥è®©è½¬æ¢åçš„ç‰¹å¾å‘é‡çš„é•¿åº¦æ ‡å‡†åŒ–ã€‚ä¹Ÿå°±æ˜¯ç¼©æ”¾å‘é‡ä¸­çš„å„ä¸ªç‰¹å¾ä»¥ä½¿å¾—å‘é‡çš„èŒƒæ•°ä¸º1ï¼ˆå¸¸æŒ‡ä¸€é˜¶æˆ–äºŒé˜¶èŒƒæ•°ï¼‰ã€‚</li>
</ul>
<p>å‘é‡æ­£åˆ™åŒ–å¯é€šè¿‡numpyçš„normå‡½æ•°æ¥å®ç°ã€‚å…·ä½“æ¥è¯´ï¼Œå…ˆè®¡ç®—ä¸€ä¸ªéšæœºå‘é‡çš„äºŒé˜¶èŒƒæ•°ï¼Œç„¶åè®©å‘é‡ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½é™¤è¯¥èŒƒæ•°ï¼Œä»è€Œå¾—åˆ°æ­£åˆ™åŒ–åçš„å‘é‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">np.random.seed(42)</span><br><span class="line">x = np.random.randn(10)</span><br><span class="line">norm_x_2 = np.linalg.norm(x)</span><br><span class="line">normalized_x = x / norm_x_2</span><br><span class="line">print &quot;x:\n%s&quot; % x</span><br><span class="line">print &quot;2-Norm of x: %2.4f&quot; % norm_x_2</span><br><span class="line">print &quot;Normalized x:\n%s&quot; % normalized_x</span><br><span class="line">print &quot;2-Norm of normalized_x: %2.4f&quot; % np.linalg.norm(normalized_x)</span><br></pre></td></tr></table></figure>
<p>å…¶è¾“å‡ºåº”è¯¥å¦‚ä¸‹ï¼ˆä¸Šé¢å°†éšæœºç§å­çš„å€¼è®¾ä¸º42ï¼Œä¿è¯æ¯æ¬¡è¿è¡Œçš„ç»“æœç›¸åŒï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">x: [ 0.49671415 -0.1382643  0.64768854  1.52302986 -0.23415337 -0.23413696</span><br><span class="line">1.57921282  0.76743473 -0.46947439  0.54256004]</span><br><span class="line">2-Norm of x: 2.5908</span><br><span class="line">Normalized x: [ 0.19172213 -0.05336737  0.24999534  0.58786029 -0.09037871 -0.09037237  0.60954584  0.29621508 -0.1812081  0.20941776]</span><br><span class="line">2-Norm of normalized_x: 1.0000</span><br></pre></td></tr></table></figure>
<p><strong>ç”¨ MLlib æ­£åˆ™åŒ–ç‰¹å¾</strong></p>
<p>Sparkåœ¨å…¶MLlibæœºå™¨å­¦ä¹ åº“ä¸­å†…ç½®äº†ä¸€äº›å‡½æ•°ç”¨äºç‰¹å¾çš„ç¼©æ”¾å’Œæ ‡å‡†åŒ–ã€‚å®ƒä»¬åŒ…æ‹¬ä¾›æ ‡å‡†æ­£æ€å˜æ¢çš„<code>StandardScaler</code>ï¼Œä»¥åŠæä¾›ä¸ä¸Šè¿°ç›¸åŒçš„ç‰¹å¾å‘é‡æ­£åˆ™åŒ–çš„ <code>Normalizer</code>ã€‚</p>
<p>æ¯”è¾ƒä¸€ä¸‹MLlibçš„Normalizerä¸æˆ‘ä»¬è‡ªå·±å‡½æ•°çš„ç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from pyspark.mllib.feature import Normalizer</span><br><span class="line">normalizer = Normalizer()</span><br><span class="line">vector =sc.parallelize([x])</span><br></pre></td></tr></table></figure>
<p>åœ¨å¯¼å…¥æ‰€éœ€çš„ç±»åï¼Œä¼šè¦åˆå§‹åŒ–Normalizerï¼ˆå…¶é»˜è®¤ä½¿ç”¨ä¸ä¹‹å‰ç›¸åŒçš„äºŒé˜¶èŒƒæ•°ï¼‰ã€‚æ³¨æ„ç”¨Sparkæ—¶ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹Normalizeræ‰€éœ€çš„è¾“å…¥ä¸ºä¸€ä¸ªRDDï¼ˆå®ƒåŒ…å«numpyæ•°å€¼æˆ–MLlibå‘é‡ï¼‰ã€‚ä½œä¸ºä¸¾ä¾‹ï¼Œæˆ‘ä»¬ä¼šä»xå‘é‡åˆ›å»ºä¸€ä¸ªå•å…ƒç´ çš„RDDã€‚</p>
<p>ä¹‹åå°†ä¼šå¯¹æˆ‘ä»¬çš„RDDè°ƒç”¨Normalizerçš„transformå‡½æ•°ã€‚ç”±äºè¯¥RDDåªå«æœ‰ä¸€ä¸ªå‘é‡ï¼Œå¯é€šè¿‡firstå‡½æ•°æ¥è¿”å›å‘é‡åˆ°é©±åŠ¨ç¨‹åºã€‚æ¥ç€è°ƒç”¨toArrayå‡½æ•°æ¥å°†è¯¥å‘é‡è½¬æ¢ä¸ºnumpyæ•°ç»„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">normalized_x_mllib = normalizer.transform(vector).first().toArray()</span><br><span class="line">#æœ€åæ¥çœ‹ä¸€ä¸‹ä¹‹å‰æ‰“å°è¿‡çš„é‚£äº›å€¼ï¼Œå¹¶åšä¸ªæ¯”è¾ƒï¼š</span><br><span class="line"></span><br><span class="line">print &quot;x:\n%s&quot; % x</span><br><span class="line">print &quot;2-Norm of x: %2.4f&quot; % norm_x_2</span><br><span class="line">print &quot;Normalized x MLlib:\n%s&quot; % normalized_x_mllib</span><br><span class="line">print &quot;2-Norm of normalized_x_mllib: %2.4f&quot; % np.linalg.norm(normalized_x_mllib)</span><br></pre></td></tr></table></figure>
<p>ç›¸æ¯”è‡ªå·±ç¼–å†™çš„å‡½æ•°ï¼Œä½¿ç”¨ MLlibå†…ç½®çš„å‡½æ•° æ›´æ–¹ä¾¿</p>
<h3 id="4-6-ç”¨è½¯ä»¶åŒ…æå–ç‰¹å¾"><a href="#4-6-ç”¨è½¯ä»¶åŒ…æå–ç‰¹å¾" class="headerlink" title="4.6 ç”¨è½¯ä»¶åŒ…æå–ç‰¹å¾"></a>4.6 ç”¨è½¯ä»¶åŒ…æå–ç‰¹å¾</h3><p>ç‰¹å¾æå–å¯å€ŸåŠ©çš„è½¯ä»¶åŒ…æœ‰scikit-learnã€gensimã€scikit-imageã€matplotlibã€Pythonçš„NLTKã€Javaç¼–å†™çš„OpenNLPä»¥åŠç”¨Scalaç¼–å†™çš„Breezeå’ŒChalkã€‚Breezeè‡ªSpark 1.0å¼€å§‹å°±æˆä¸ºSparkçš„ä¸€éƒ¨åˆ†äº†ã€‚Breezeæœ‰çº¿æ€§ä»£æ•°åŠŸèƒ½ã€‚</p>
<h2 id="5-å°ç»“"><a href="#5-å°ç»“" class="headerlink" title="5. å°ç»“"></a>5. å°ç»“</h2><p>äº†è§£ å¦‚ä½•å¯¼å…¥ã€å¤„ç†å’Œæ¸…ç†æ•°æ®ï¼Œå¦‚ä½•å°†åŸå§‹æ•°æ®è½¬ä¸º<strong>ç‰¹å¾å‘é‡</strong>ä»¥ä¾›æ¨¡å‹è®­ç»ƒçš„å¸¸è§æ–¹æ³•</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Machine Learning p2 - è®¾è®¡æœºå™¨å­¦ä¹ ç³»ç»Ÿ]]></title>
      <url>http://shopee.ai/2016/09/08/spark/spark-machine-learning-p2-design-ml-sys/</url>
      <content type="html"><![CDATA[<p>ã€ŠSpark Machine Learingã€‹ Reading Notes ï¼š å¦‚ä½•è®¾è®¡æœºå™¨å­¦ä¹ ç³»ç»Ÿ moiveStream</p>
<a id="more"></a>
<style>
img {
        display: block !important;
        height: 400px;
        width: 500px;
        margin-left: 180px !important;
}
</style>

<h2 id="1-åŸå§‹-MovieStream-ä»‹ç»"><a href="#1-åŸå§‹-MovieStream-ä»‹ç»" class="headerlink" title="1. åŸå§‹ MovieStream ä»‹ç»"></a>1. åŸå§‹ MovieStream ä»‹ç»</h2><p><img src="/images/spark/spark-ml-2.1.jpg" alt="MovieStream"></p>
<h3 id="1-1-ä¸ªæ€§åŒ–"><a href="#1-1-ä¸ªæ€§åŒ–" class="headerlink" title="1.1 ä¸ªæ€§åŒ–"></a>1.1 ä¸ªæ€§åŒ–</h3><p><code>ä¸ªæ€§åŒ–</code> æ˜¯æ ¹æ®å„å› ç´ æ¥æ”¹å˜ç”¨æˆ·ä½“éªŒå’Œ<code>å‘ˆç°ç»™ç”¨æˆ·å†…å®¹</code>ã€‚è¿™äº›å› ç´ å¯èƒ½åŒ…æ‹¬ç”¨æˆ·çš„è¡Œä¸ºæ•°æ®å’Œå¤–éƒ¨å› ç´ ã€‚</p>
<p><code>æ¨è</code>ï¼ˆrecommendationï¼‰, å¸¸æŒ‡å‘ç”¨æˆ·å‘ˆç°ä¸€ä¸ªä»–ä»¬å¯èƒ½æ„Ÿå…´è¶£çš„ç‰©å“åˆ—è¡¨ã€‚</p>
<p>ä¸ªæ€§åŒ–å’Œæ¨èååˆ†ç›¸ä¼¼, æ ¹æ®å› ç´ æ”¹å˜æœç´¢çš„å‘ˆç°ä¸åŒç”¨æˆ·ä¸åŒå†…å®¹ï¼Œè¿™æ˜¯éšå¼ä¸ªæ€§åŒ–</p>
<h3 id="1-2-å®¢æˆ·ç»†åˆ†"><a href="#1-2-å®¢æˆ·ç»†åˆ†" class="headerlink" title="1.2 å®¢æˆ·ç»†åˆ†"></a>1.2 å®¢æˆ·ç»†åˆ†</h3><p>ç›®æ ‡è¥é”€ç”¨ä¸æ¨èç±»ä¼¼çš„æ–¹æ³•ä»ç”¨æˆ·ç¾¤ä¸­æ‰¾å‡ºè¦è¥é”€çš„å¯¹è±¡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ¨èå’Œä¸ªæ€§åŒ–çš„åº”ç”¨åœºæ™¯éƒ½æ˜¯ä¸€å¯¹ä¸€ï¼Œæ ¹æ®ç”¨æˆ·çš„ç‰¹å¾è¿›è¡Œåˆ†ç»„ï¼Œå¹¶å¯èƒ½å‚è€ƒè¡Œä¸ºæ•°æ®ã€‚ä¹Ÿå¯èƒ½ä½¿ç”¨äº†æŸç§æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œæ¯”å¦‚ <code>èšç±»</code>ã€‚</p>
<h3 id="1-3-é¢„æµ‹å»ºæ¨¡"><a href="#1-3-é¢„æµ‹å»ºæ¨¡" class="headerlink" title="1.3 é¢„æµ‹å»ºæ¨¡"></a>1.3 é¢„æµ‹å»ºæ¨¡</h3><p><code>é¢„æµ‹æ€§åˆ†æ</code> ä»æŸç§æ„ä¹‰ä¸Šè¯´è¿˜è¦†ç›–æ¨èã€ä¸ªæ€§åŒ–å’Œç›®æ ‡è¥é”€ã€‚ç”¨é¢„æµ‹å»ºæ¨¡ï¼ˆpredictive modelingï¼‰æ¥è¡¨ç¤ºå…¶ä»–åšé¢„æµ‹çš„æ¨¡å‹ã€‚å€ŸåŠ©æ´»åŠ¨è®°å½•ã€æ”¶å…¥æ•°æ®ä»¥åŠå†…å®¹å±æ€§ï¼ŒMovieStream å¯ä»¥åˆ›å»ºä¸€ä¸ªå›å½’æ¨¡å‹ï¼ˆregression modelï¼‰æ¥é¢„æµ‹æ–°ç”µå½±çš„å¸‚åœºè¡¨ç°ã€‚</p>
<p>å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä½¿ç”¨åˆ†ç±»æ¨¡å‹ï¼ˆclassificaiton modelï¼‰æ¥å¯¹åªæœ‰éƒ¨åˆ†æ•°æ®çš„æ–°ç”µå½±è‡ªåŠ¨åˆ†é…æ ‡ç­¾ã€å…³é”®å­—æˆ–åˆ†ç±»ã€‚</p>
<h2 id="2-æœºå™¨å­¦ä¹ æ¨¡å‹çš„ç§ç±»"><a href="#2-æœºå™¨å­¦ä¹ æ¨¡å‹çš„ç§ç±»" class="headerlink" title="2. æœºå™¨å­¦ä¹ æ¨¡å‹çš„ç§ç±»"></a>2. æœºå™¨å­¦ä¹ æ¨¡å‹çš„ç§ç±»</h2><p><code>supervised learning</code>ï¼šè¿™ç§æ–¹æ³•ä½¿ç”¨å·²æ ‡è®°æ•°æ®æ¥å­¦ä¹ ã€‚<code>æ¨èå¼•æ“</code>ã€<code>å›å½’</code>å’Œ<code>åˆ†ç±»</code>ä¾¿æ˜¯ä¾‹å­ã€‚å®ƒä»¬æ‰€ä½¿ç”¨çš„æ ‡è®°æ•°æ®å¯ä»¥æ˜¯ç”¨æˆ·å¯¹ç”µå½±çš„è¯„çº§ï¼ˆå¯¹æ¨èæ¥è¯´ï¼‰ã€ç”µå½±æ ‡ç­¾ï¼ˆå¯¹ä¸Šè¿°åˆ†ç±»ä¾‹å­æ¥è¯´ï¼‰æˆ–æ˜¯æ”¶å…¥æ•°å­—ï¼ˆå¯¹å›å½’é¢„æµ‹æ¥è¯´ï¼‰.</p>
<p><code>unsupervised learning</code>ï¼šä¸€äº›æ¨¡å‹çš„å­¦ä¹ è¿‡ç¨‹ä¸éœ€è¦æ ‡è®°æ•°æ®ï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºæ— ç›‘ç£å­¦ä¹ ã€‚è¿™ç±»æ¨¡å‹è¯•å›¾å­¦ä¹ æˆ–æ˜¯æå–æ•°æ®èƒŒåçš„ç»“æ„æˆ–ä»ä¸­æŠ½å–æœ€ä¸ºé‡è¦çš„ç‰¹å¾ã€‚<code>èšç±»</code>ã€<code>é™ç»´</code>å’Œ<code>æ–‡æœ¬å¤„ç†</code>çš„æŸäº›ç‰¹å¾æå–éƒ½æ˜¯æ— ç›‘ç£å­¦ä¹ .</p>
<h2 id="3-æ•°æ®é©±åŠ¨MLç³»ç»Ÿçš„ç»„æˆ"><a href="#3-æ•°æ®é©±åŠ¨MLç³»ç»Ÿçš„ç»„æˆ" class="headerlink" title="3. æ•°æ®é©±åŠ¨MLç³»ç»Ÿçš„ç»„æˆ"></a>3. æ•°æ®é©±åŠ¨MLç³»ç»Ÿçš„ç»„æˆ</h2><p><img src="/images/spark/spark-ml-2.2.jpg" alt="æœºå™¨å­¦ä¹ æµç¨‹"></p>
<h3 id="3-1-æ•°æ®è·å–ä¸å­˜å‚¨"><a href="#3-1-æ•°æ®è·å–ä¸å­˜å‚¨" class="headerlink" title="3.1 æ•°æ®è·å–ä¸å­˜å‚¨"></a>3.1 æ•°æ®è·å–ä¸å­˜å‚¨</h3><p>MovieStream çš„æ•°æ®é€šå¸¸æ¥è‡ªç”¨æˆ·æ´»åŠ¨.</p>
<p>è¦å­˜å‚¨çš„æ•°æ®åŒ…æ‹¬ï¼šåŸå§‹æ•°æ®ã€å³æ—¶å¤„ç†åçš„æ•°æ®ï¼Œä»¥åŠå¯ç”¨äºç”Ÿäº§ç³»ç»Ÿçš„æœ€ç»ˆå»ºæ¨¡ç»“æœã€‚</p>
<p><strong>æ•°æ®å­˜å‚¨</strong></p>
<ol>
<li><strong>æ–‡ä»¶ç³»ç»Ÿ</strong> : å¦‚ HDFSã€Amazon S3 ç­‰ï¼›</li>
<li><strong>SQLæ•°æ®åº“</strong> : å¦‚ MySQLã€PostgreSQLï¼›</li>
<li><strong>NoSQL</strong> : -å¦‚ HBaseã€Cassandraã€Mongodbï¼›</li>
<li><strong>æœç´¢å¼•æ“</strong> : å¦‚ Solr ã€Elasticsearchï¼›</li>
<li><strong>æµæ•°æ®</strong> : â€“ å¦‚ Kafkaã€Flumeã€Amazon Kinesis</li>
</ol>
<h3 id="3-2-æ•°æ®æ¸…ç†ä¸è½¬æ¢"><a href="#3-2-æ•°æ®æ¸…ç†ä¸è½¬æ¢" class="headerlink" title="3.2 æ•°æ®æ¸…ç†ä¸è½¬æ¢"></a>3.2 æ•°æ®æ¸…ç†ä¸è½¬æ¢</h3><p>å¤§éƒ¨åˆ†æœºå™¨å­¦ä¹ æ¨¡å‹æ‰€å¤„ç†çš„éƒ½æ˜¯ <code>feature</code>ã€‚ç‰¹å¾ é€šå¸¸æ˜¯è¾“å…¥å˜é‡æ‰€å¯¹åº”çš„å¯ç”¨äºæ¨¡å‹çš„æ•°å€¼è¡¨ç¤ºã€‚</p>
<p>åŸå§‹æ•°æ® é¢„å¤„ç† å‡ ç§ æƒ…å†µ</p>
<ol>
<li>æ•°æ®è¿‡æ»¤</li>
<li>åˆå¹¶å¤šä¸ªæ•°æ®æº</li>
<li>æ•°æ®æ±‡æ€»</li>
</ol>
<p>å¯¹è®¸å¤šæ¨¡å‹ç±»å‹æ¥è¯´ï¼Œè¿™ç§è¡¨ç¤ºå°±æ˜¯åŒ…å« <strong>æ•°å€¼æ•°æ®çš„</strong> <code>å‘é‡</code> or <code>çŸ©é˜µ</code>ã€‚</p>
<p>å°†ç±»åˆ«æ•°æ®ï¼ˆæ¯”å¦‚åœ°ç†ä½ç½®æ‰€åœ¨çš„å›½å®¶æˆ–æ˜¯ç”µå½±çš„ç±»åˆ«ï¼‰ç¼–ç ä¸ºå¯¹åº”çš„æ•°å€¼è¡¨ç¤ºã€‚</p>
<ol>
<li>æ–‡æœ¬æ•°æ®æå–æœ‰ç”¨ä¿¡æ¯ã€‚</li>
<li>å¤„ç†å›¾åƒæˆ–æ˜¯éŸ³é¢‘æ•°æ®ã€‚</li>
<li>æ•°å€¼æ•°æ®å¸¸è¢«è½¬æ¢ä¸ºç±»åˆ«æ•°æ®ä»¥å‡å°‘æŸä¸ªå˜é‡çš„å¯èƒ½å€¼çš„æ•°ç›®ã€‚ä¾‹å¦‚å°†å¹´é¾„åˆ†ä¸º 601, 602â€¦</li>
<li>å¯¹ç‰¹å¾è¿›è¡Œæ­£åˆ™åŒ–ã€æ ‡å‡†åŒ–ï¼Œä»¥ä¿è¯åŒä¸€æ¨¡å‹çš„ä¸åŒè¾“å…¥å˜é‡çš„å€¼åŸŸç›¸åŒã€‚</li>
</ol>
<p>è¿™äº›æ•°æ®æ¸…ç†ã€æ¢ç´¢ã€èšåˆå’Œè½¬æ¢æ­¥éª¤ï¼Œéƒ½èƒ½é€šè¿‡Sparkæ ¸å¿ƒAPIã€SparkSQLå¼•æ“å’Œå…¶ä»–å¤–éƒ¨Scalaã€Javaæˆ–PythonåŒ…åšåˆ°ã€‚å€ŸåŠ© Spark çš„ HadoopåŠŸèƒ½ è¿˜èƒ½å®ç°ä¸Šè¿°å¤šç§å­˜å‚¨ç³»ç»Ÿä¸Šçš„è¯»å†™ã€‚</p>
<h3 id="3-3-æ¨¡å‹è®­ç»ƒä¸æµ‹è¯•å›è·¯"><a href="#3-3-æ¨¡å‹è®­ç»ƒä¸æµ‹è¯•å›è·¯" class="headerlink" title="3.3 æ¨¡å‹è®­ç»ƒä¸æµ‹è¯•å›è·¯"></a>3.3 æ¨¡å‹è®­ç»ƒä¸æµ‹è¯•å›è·¯</h3><p>å½“æ•°æ®å·²è½¬æ¢ä¸ºå¯ç”¨äºæ¨¡å‹çš„å½¢å¼ï¼Œä¾¿å¯å¼€å§‹æ¨¡å‹çš„è®­ç»ƒå’Œæµ‹è¯•ã€‚</p>
<p>åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šè¿è¡Œæ¨¡å‹å¹¶åœ¨æµ‹è¯•æ•°æ®é›†ï¼ˆå³ä¸ºè¯„ä¼°æ¨¡å‹è€Œé¢„ç•™çš„æ•°æ®ï¼Œåœ¨è®­ç»ƒé˜¶æ®µæ¨¡å‹æ²¡æ¥è§¦è¿‡è¯¥æ•°æ®ï¼‰ä¸Šæµ‹è¯•å…¶æ•ˆæœï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸€èˆ¬ç›¸å¯¹ç›´æ¥ï¼Œè¢«ç§°ä½œäº¤å‰éªŒè¯ï¼ˆcross-validationï¼‰ã€‚</p>
<p>Spark MLlib æ¥å®ç°å¯¹å„ç§æœºå™¨å­¦ä¹ æ–¹æ³•çš„æ¨¡å‹è®­ç»ƒã€è¯„ä¼°ä»¥åŠäº¤å‰éªŒè¯ã€‚</p>
<h3 id="3-4-æ¨¡å‹éƒ¨ç½²ä¸æ•´åˆ"><a href="#3-4-æ¨¡å‹éƒ¨ç½²ä¸æ•´åˆ" class="headerlink" title="3.4 æ¨¡å‹éƒ¨ç½²ä¸æ•´åˆ"></a>3.4 æ¨¡å‹éƒ¨ç½²ä¸æ•´åˆ</h3><p>é€šè¿‡è®­ç»ƒæµ‹è¯•å¾ªç¯æ‰¾å‡ºæœ€ä½³æ¨¡å‹åï¼Œè¦è®©å®ƒèƒ½å¾—å‡ºå¯ä»˜è¯¸å®è·µçš„é¢„æµ‹ï¼Œè¿˜éœ€å°†å…¶éƒ¨ç½²åˆ°ç”Ÿäº§ç³»ç»Ÿä¸­ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹ä¸€èˆ¬è¦å°†å·²è®­ç»ƒçš„æ¨¡å‹å¯¼å…¥ç‰¹å®šçš„æ•°æ®å­˜å‚¨ä¸­ã€‚</p>
<h3 id="3-5-æ¨¡å‹ç›‘æ§ä¸åé¦ˆ"><a href="#3-5-æ¨¡å‹ç›‘æ§ä¸åé¦ˆ" class="headerlink" title="3.5 æ¨¡å‹ç›‘æ§ä¸åé¦ˆ"></a>3.5 æ¨¡å‹ç›‘æ§ä¸åé¦ˆ</h3><p>ç›‘æ§æœºå™¨å­¦ä¹ ç³»ç»Ÿåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹çš„è¡¨ç°ååˆ†é‡è¦ã€‚</p>
<p>åŒæ ·å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ¨¡å‹å‡†ç¡®åº¦å’Œé¢„æµ‹æ•ˆæœåªæ˜¯ç°å®ä¸­ç³»ç»Ÿè¡¨ç°çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å°½å¯èƒ½åœ¨ç”Ÿäº§ç³»ç»Ÿä¸­éƒ¨ç½²ä¸åŒçš„æ¨¡å‹ï¼Œé€šè¿‡è°ƒæ•´å®ƒä»¬è€Œä¼˜åŒ–ä¸šåŠ¡æŒ‡æ ‡ã€‚å®è·µä¸­ï¼Œè¿™é€šå¸¸é€šè¿‡åœ¨çº¿åˆ†å‰²æµ‹è¯•ï¼ˆ<code>live split test</code>ï¼‰è¿›è¡Œã€‚</p>
<p>æ¨¡å‹åé¦ˆï¼ˆ<code>model feedback</code>ï¼‰ï¼ŒæŒ‡é€šè¿‡ç”¨æˆ·çš„è¡Œä¸ºæ¥å¯¹æ¨¡å‹çš„é¢„æµ‹è¿›è¡Œåé¦ˆçš„è¿‡ç¨‹ã€‚åœ¨ç°å®ç³»ç»Ÿä¸­ï¼Œæ¨¡å‹çš„åº”ç”¨å°†å½±å“ç”¨æˆ·çš„å†³ç­–å’Œæ½œåœ¨è¡Œä¸ºï¼Œä»è€Œåè¿‡æ¥å°†ä»æ ¹æœ¬ä¸Šæ”¹å˜æ¨¡å‹è‡ªå·±å°†æ¥çš„è®­ç»ƒæ•°æ®ã€‚</p>
<h3 id="3-6-æ‰¹å¤„ç†-å®æ—¶æ–¹æ¡ˆé€‰æ‹©"><a href="#3-6-æ‰¹å¤„ç†-å®æ—¶æ–¹æ¡ˆé€‰æ‹©" class="headerlink" title="3.6 æ‰¹å¤„ç†/å®æ—¶æ–¹æ¡ˆé€‰æ‹©"></a>3.6 æ‰¹å¤„ç†/å®æ—¶æ–¹æ¡ˆé€‰æ‹©</h3><p>å¸¸è§çš„æ‰¹å¤„ç†æ–¹æ³•ã€‚æ¨¡å‹ç”¨æ‰€æœ‰æ•°æ®æˆ–ä¸€éƒ¨åˆ†æ•°æ®è¿›è¡Œå‘¨æœŸæ€§çš„é‡æ–°è®­ç»ƒã€‚ç”±äºä¸Šè¿°æµç¨‹ä¼šèŠ±è´¹ä¸€å®šçš„æ—¶é—´ï¼Œè¿™å°±ä½¿å¾—æ‰¹å¤„ç†æ–¹æ³•éš¾ä»¥åœ¨æ–°æ•°æ®åˆ°è¾¾æ—¶ç«‹å³å®Œæˆæ¨¡å‹çš„æ›´æ–°ã€‚</p>
<p>å­˜åœ¨ä¸€ç±»åä¸ºåœ¨çº¿å­¦ä¹ ï¼ˆonline learningï¼‰çš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚å®ƒä»¬åœ¨æ–°æ•°æ®åˆ°è¾¾æ—¶ä¾¿èƒ½ç«‹å³æ›´æ–°æ¨¡å‹ï¼Œä»è€Œä½¿å®æ—¶ç³»ç»Ÿæˆä¸ºå¯èƒ½ã€‚å¸¸è§çš„ä¾‹å­æœ‰å¯¹çº¿æ€§æ¨¡å‹çš„åœ¨çº¿ä¼˜åŒ–ç®—æ³•ï¼Œå¦‚<code>éšæœºæ¢¯åº¦ä¸‹é™æ³•</code>ã€‚</p>
<h2 id="4-æœºå™¨å­¦ä¹ ç³»ç»Ÿæ¶æ„"><a href="#4-æœºå™¨å­¦ä¹ ç³»ç»Ÿæ¶æ„" class="headerlink" title="4. æœºå™¨å­¦ä¹ ç³»ç»Ÿæ¶æ„"></a>4. æœºå™¨å­¦ä¹ ç³»ç»Ÿæ¶æ„</h2><p><img src="/images/spark/spark-ml-2.3.jpg" alt="æœºå™¨å­¦ä¹ ç³»ç»Ÿæ¶æ„"></p>
<p>æœºå™¨å­¦ä¹ æµç¨‹ç¤ºæ„å›¾çš„å†…å®¹ï¼š</p>
<ul>
<li>æ”¶é›†ä¸ç”¨æˆ·ã€ç”¨æˆ·è¡Œä¸ºå’Œç”µå½±æ ‡é¢˜æœ‰å…³çš„æ•°æ®ï¼›</li>
<li>å°†è¿™äº›æ•°æ®è½¬ä¸ºç‰¹å¾ï¼›</li>
<li>æ¨¡å‹è®­ç»ƒï¼ŒåŒ…æ‹¬è®­ç»ƒ-æµ‹è¯•å’Œæ¨¡å‹é€‰æ‹©ç¯èŠ‚ï¼›</li>
<li>å°†å·²è®­ç»ƒæ¨¡å‹éƒ¨ç½²åˆ°åœ¨çº¿æœåŠ¡ç³»ç»Ÿï¼Œå¹¶ç”¨äºç¦»çº¿å¤„ç†ï¼›</li>
<li>é€šè¿‡æ¨èå’Œç›®æ ‡é¡µé¢å°†æ¨¡å‹ç»“æœåé¦ˆåˆ°MovieStreamç«™ç‚¹ï¼›</li>
<li>å°†æ¨¡å‹ç»“æœè¿”å›åˆ°MovieStreamçš„ä¸ªæ€§åŒ–è¥é”€æ¸ é“ï¼›</li>
<li>ä½¿ç”¨ç¦»çº¿æ¨¡å‹æ¥ä¸ºMovieSteamçš„å„ä¸ªå›¢é˜Ÿæä¾›å·¥å…·ï¼Œä»¥å¸®åŠ©å…¶ç†è§£ç”¨æˆ·çš„è¡Œä¸ºã€å†…å®¹ç›®å½•çš„ç‰¹ç‚¹å’Œä¸šåŠ¡æ”¶å…¥çš„é©±åŠ¨å› ç´ ã€‚</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JVM è·¨å¹³å°ä¸å­—èŠ‚ç åŸç†åˆæ­¥]]></title>
      <url>http://shopee.ai/2016/08/16/java/java-special-arms-p3-jvm/</url>
      <content type="html"><![CDATA[<p>Javaç‰¹ç§å…µ - JVM è·¨å¹³å°ä¸å­—èŠ‚ç åŸç†ï¼ŒReading Notes</p>
<a id="more"></a>
<p>ç”¨åˆ° JVM çš„åœºæ™¯</p>
<ol>
<li>Out of memory æ—¶ï¼Œå›¢é˜Ÿé«˜æ‰‹ä¸åœ¨</li>
<li>ç³»ç»ŸæœåŠ¡å™¨æ¶æ„ï¼Œè€å¤§é—®ä½  æŠ•å…¥å¤šå°‘æœåŠ¡å™¨æˆæœ¬ï¼ŒVM åˆ†é…å¤šå¤§ï¼Œ å¦‚ä½•åˆ†é…?</li>
</ol>
<h2 id="1-javap-å‘½ä»¤"><a href="#1-javap-å‘½ä»¤" class="headerlink" title="1. javap å‘½ä»¤"></a>1. javap å‘½ä»¤</h2><blockquote>
<p>é€šè¿‡è¿™ç§æ–¹å¼è®¤çŸ¥æ¯” Java æ›´ä½ä¸€ä¸ªæŠ½è±¡å±‚æ¬¡çš„é€»è¾‘ï¼Œè™šæŒ‡ä»¤æœ‰æ—¶å€™æ›´å¥½è§£é‡Šé—®é¢˜ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String a = <span class="string">"a"</span> + <span class="string">"b"</span> + <span class="number">1</span>;</span><br><span class="line">        String b = <span class="string">"ab1"</span>;</span><br><span class="line">        System.out.println(a == b); <span class="comment">// true ç¼–è¯‘æ—¶ä¼˜åŒ–</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  p3jvm git:(master) âœ— <span class="built_in">pwd</span></span><br><span class="line">/Users/hp/ghome/github/language/java/jsarms/p3jvm</span><br><span class="line">âœ  p3jvm git:(master) âœ— javac</span><br><span class="line">Usage: javac &lt;options&gt; &lt;<span class="built_in">source</span> files&gt;</span><br><span class="line"><span class="built_in">where</span> possible options include:</span><br><span class="line">  -g                         Generate all debugging info</span><br><span class="line">  -g:none                    Generate no debugging info</span><br><span class="line">  -g:&#123;lines,vars,<span class="built_in">source</span>&#125;     Generate only some debugging info</span><br><span class="line">  -nowarn                    Generate no warnings</span><br><span class="line">  -verbose                   Output messages about what the compiler is doing</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  p3jvm git:(master) âœ— javac -g:vars,lines StringTest.java</span><br><span class="line">âœ  p3jvm git:(master) âœ— javap -verbose StringTest</span><br><span class="line">Classfile /Users/hp/ghome/github/language/java/jsarms/p3jvm/StringTest.class</span><br><span class="line">  Last modified Aug 16, 2016; size 559 bytes</span><br><span class="line">  MD5 checksum 772d18512cb982c953e7db8c72522918</span><br><span class="line">public class StringTest</span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: 51</span><br><span class="line">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class="line">Constant pool:</span><br><span class="line">   <span class="comment">#1 = Methodref          #6.#21         //  java/lang/Object."&lt;init&gt;":()V</span></span><br><span class="line">   <span class="comment">#2 = String             #22            //  ab1</span></span><br><span class="line">   <span class="comment">#3 = Fieldref           #23.#24        //  java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">   <span class="comment">#4 = Methodref          #25.#26        //  java/io/PrintStream.println:(Z)V</span></span><br><span class="line">   <span class="comment">#5 = Class              #27            //  StringTest</span></span><br><span class="line">   <span class="comment">#6 = Class              #28            //  java/lang/Object</span></span><br><span class="line">   <span class="comment">#7 = Utf8               &lt;init&gt;</span></span><br><span class="line">   <span class="comment">#8 = Utf8               ()V</span></span><br><span class="line">   <span class="comment">#9 = Utf8               Code</span></span><br><span class="line">  <span class="comment">#10 = Utf8               LineNumberTable</span></span><br><span class="line">  <span class="comment">#11 = Utf8               LocalVariableTable</span></span><br><span class="line">  <span class="comment">#12 = Utf8               this</span></span><br><span class="line">  <span class="comment">#13 = Utf8               LStringTest;</span></span><br><span class="line">  <span class="comment">#14 = Utf8               test1</span></span><br><span class="line">  <span class="comment">#15 = Utf8               a</span></span><br><span class="line">  <span class="comment">#16 = Utf8               Ljava/lang/String;</span></span><br><span class="line">  <span class="comment">#17 = Utf8               b</span></span><br><span class="line">  <span class="comment">#18 = Utf8               StackMapTable</span></span><br><span class="line">  <span class="comment">#19 = Class              #29            //  java/lang/String</span></span><br><span class="line">  <span class="comment">#20 = Class              #30            //  java/io/PrintStream</span></span><br><span class="line">  <span class="comment">#21 = NameAndType        #7:#8          //  "&lt;init&gt;":()V</span></span><br><span class="line">  <span class="comment">#22 = Utf8               ab1</span></span><br><span class="line">  <span class="comment">#23 = Class              #31            //  java/lang/System</span></span><br><span class="line">  <span class="comment">#24 = NameAndType        #32:#33        //  out:Ljava/io/PrintStream;</span></span><br><span class="line">  <span class="comment">#25 = Class              #30            //  java/io/PrintStream</span></span><br><span class="line">  <span class="comment">#26 = NameAndType        #34:#35        //  println:(Z)V</span></span><br><span class="line">  <span class="comment">#27 = Utf8               StringTest</span></span><br><span class="line">  <span class="comment">#28 = Utf8               java/lang/Object</span></span><br><span class="line">  <span class="comment">#29 = Utf8               java/lang/String</span></span><br><span class="line">  <span class="comment">#30 = Utf8               java/io/PrintStream</span></span><br><span class="line">  <span class="comment">#31 = Utf8               java/lang/System</span></span><br><span class="line">  <span class="comment">#32 = Utf8               out</span></span><br><span class="line">  <span class="comment">#33 = Utf8               Ljava/io/PrintStream;</span></span><br><span class="line">  <span class="comment">#34 = Utf8               println</span></span><br><span class="line">  <span class="comment">#35 = Utf8               (Z)V</span></span><br><span class="line">// ä»¥ä¸Šæ˜¯ Constant poolï¼Œ ä»…ä»…æ˜¯é™ˆåˆ—æ“ä½œï¼Œå¹¶æ²¡æœ‰å¼€å§‹æ‰§è¡Œä»»åŠ¡ï¼Œçœ‹ä¸‹é¢å¼€å§‹</span><br><span class="line">&#123;</span><br><span class="line">  public StringTest();</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=1, locals=1, args_size=1 // æ‰€æœ‰æ–¹æ³•éƒ½ä¼šæœ‰ã€‚</span><br><span class="line">      // stack ä¸ºæ ˆé¡¶çš„å•ä½å¤§å° (æ¯ä¸ªå¤§å°ä¸º 1 slotï¼Œ4 byte)</span><br><span class="line">      // locals=1ï¼Œéé™æ€æ–¹æ³•ï¼Œæœ¬åœ°å˜é‡å¢åŠ  this</span><br><span class="line">         0: aload_0</span><br><span class="line">         1: invokespecial <span class="comment">#1                  // Method java/lang/Object."&lt;init&gt;":()V</span></span><br><span class="line">         4: <span class="built_in">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 1: 0</span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">               0       5     0  this   LStringTest;</span><br><span class="line"></span><br><span class="line">  public static void <span class="built_in">test</span>1();</span><br><span class="line">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=3, locals=2, args_size=0 </span><br><span class="line">      // stack=3ï¼Œæœ¬åœ°æ ˆslotä¸ªæ•°ä¸º3ï¼ŒStringéœ€è¦loadï¼ŒString.out å ç”¨ä¸€ä¸ªå†ã€‚å½“å¯¹æ¯”å‘ç”Ÿ boolean æ—¶ï¼Œä¸¤ä¸ªStringå¼•ç”¨æ ˆé¡¶pop</span><br><span class="line">      // locals=2ï¼Œ å› ä¸ºåªæœ‰ä¸¤ä¸ª String</span><br><span class="line">      // args_size=0ï¼Œæ–¹æ³•æ²¡æœ‰å…¥å£å‚æ•°</span><br><span class="line">         0: ldc           <span class="comment">#2                  // String ab1</span></span><br><span class="line">         // å¼•ç”¨å¸¸é‡æ± å†…å®¹</span><br><span class="line">         2: astore_0</span><br><span class="line">         // å°†æ ˆé¡¶å¼•ç”¨å€¼ï¼Œå†™å…¥ç¬¬ 1 ä¸ª slot æ‰€åœ¨çš„æœ¬åœ°å˜é‡</span><br><span class="line">         3: ldc           <span class="comment">#2                  // String ab1</span></span><br><span class="line">         5: astore_1</span><br><span class="line">         6: getstatic     <span class="comment">#3                  // Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">         // è·å–é™æ€åŸŸï¼Œæ”¾å…¥æ ˆé¡¶ï¼Œæ­¤æ—¶é™æ€åŸŸæ˜¯ System.out å¯¹è±¡</span><br><span class="line">         9: aload_0</span><br><span class="line">        10: aload_1</span><br><span class="line">        11: <span class="keyword">if</span>_acmpne     18</span><br><span class="line">        14: iconst_1</span><br><span class="line">        15: goto          19</span><br><span class="line">        18: iconst_0</span><br><span class="line">        19: invokevirtual <span class="comment">#4                  // Method java/io/PrintStream.println:(Z)V</span></span><br><span class="line">        22: <span class="built_in">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 4: 0</span><br><span class="line">        line 5: 3</span><br><span class="line">        line 6: 6</span><br><span class="line">        line 7: 22</span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">               3      20     0     a   Ljava/lang/String;</span><br><span class="line">               6      17     1     b   Ljava/lang/String;</span><br><span class="line">      // æœ¬åœ°å˜é‡åˆ—è¡¨ LocalVariableTable. from javac -g:vars</span><br><span class="line">      StackMapTable: number_of_entries = 2</span><br><span class="line">           frame_<span class="built_in">type</span> = 255 /* full_frame */</span><br><span class="line">          offset_delta = 18</span><br><span class="line">          locals = [ class java/lang/String, class java/lang/String ]</span><br><span class="line">          stack = [ class java/io/PrintStream ]</span><br><span class="line">           frame_<span class="built_in">type</span> = 255 /* full_frame */</span><br><span class="line">          offset_delta = 0</span><br><span class="line">          locals = [ class java/lang/String, class java/lang/String ]</span><br><span class="line">          stack = [ class java/io/PrintStream, int ]</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">âœ  p3jvm git:(master) âœ—</span><br></pre></td></tr></table></figure>
<h2 id="2-Java-å­—èŠ‚ç ç»“æ„"><a href="#2-Java-å­—èŠ‚ç ç»“æ„" class="headerlink" title="2. Java å­—èŠ‚ç ç»“æ„"></a>2. Java å­—èŠ‚ç ç»“æ„</h2><p>javac å‘½ä»¤æœ¬èº«åªæ˜¯ä¸€ä¸ªå¼•å¯¼å™¨ï¼Œå®ƒå¼•å¯¼ç¼–è¯‘å™¨ç¨‹åºçš„è¿è¡Œã€‚ç¼–è¯‘å™¨æœ¬èº«æ˜¯ä¸€ä¸ªjavaç¨‹åº <code>com.sun.tools.javac.main.JavaCompiler</code>, è¯¥ç±»å®Œæˆ java æºæ–‡ä»¶ çš„ Parserã€Annotation processã€æ£€æŸ¥ã€æ³›å‹å¤„ç†ã€è¯­æ³•è½¬æ¢ç­‰ï¼Œæœ€ç»ˆèƒœå‡º Class æ–‡ä»¶ã€‚</p>
<p>Java å­—èŠ‚ç æ–‡ä»¶ä¸»ä½“ç»“æ„: </p>
<table>
<thead>
<tr>
<th><strong>Class æ–‡ä»¶å¤´éƒ¨</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Constant pool</td>
<td></td>
</tr>
<tr>
<td>å½“å‰Clasçš„æè¿°ä¿¡æ¯</td>
<td></td>
</tr>
<tr>
<td>å±æ€§åˆ—è¡¨</td>
<td></td>
</tr>
<tr>
<td>æ–¹æ³•åˆ—è¡¨</td>
<td></td>
</tr>
<tr>
<td>â€¦</td>
<td></td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Decision Tree part1]]></title>
      <url>http://shopee.ai/2016/08/16/ml/decisionTree-part1/</url>
      <content type="html"><![CDATA[<p>å†³ç­–æ ‘ï¼ˆdecision treeï¼‰æ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼ˆå¯ä»¥æ˜¯äºŒå‰æ ‘æˆ–éäºŒå‰æ ‘ï¼‰ã€‚å…¶æ¯ä¸ªéå¶èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªç‰¹å¾å±æ€§ä¸Šçš„æµ‹è¯•ï¼Œæ¯ä¸ªåˆ†æ”¯ä»£è¡¨è¿™ä¸ªç‰¹å¾å±æ€§åœ¨æŸä¸ªå€¼ã€‚</p>
<a id="more"></a>
<h2 id="1-Classification-Introduce"><a href="#1-Classification-Introduce" class="headerlink" title="1. Classification Introduce"></a>1. Classification Introduce</h2><blockquote>
<p>åˆ†ç±»æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œå¦‚åŒ»å­¦ç–¾ç—…åˆ¤åˆ«ã€åƒåœ¾é‚®ä»¶è¿‡æ»¤ã€åƒåœ¾çŸ­ä¿¡æ‹¦æˆªã€å®¢æˆ·åˆ†æç­‰ç­‰ã€‚åˆ†ç±»é—®é¢˜å¯ä»¥åˆ†ä¸ºä¸¤ç±»</p>
</blockquote>
<h3 id="1-1-å½’ç±»-ç¦»æ•£"><a href="#1-1-å½’ç±»-ç¦»æ•£" class="headerlink" title="1.1 å½’ç±» : ç¦»æ•£"></a>1.1 å½’ç±» : ç¦»æ•£</h3><p>å½’ç±» æ˜¯æŒ‡å¯¹<code>ç¦»æ•£æ•°æ®</code>çš„åˆ†ç±»ï¼Œæ¯”å¦‚å¯¹æ ¹æ®ä¸€ä¸ªäººçš„ç¬”è¿¹åˆ¤åˆ«è¿™ä¸ªæ˜¯ç”·è¿˜æ˜¯å¥³ï¼Œè¿™é‡Œçš„ Category åªæœ‰ä¸¤ä¸ªï¼Œç±»åˆ«æ˜¯ç¦»æ•£çš„é›†åˆç©ºé—´{ç”·ï¼Œå¥³}çš„ã€‚</p>
<h3 id="1-2-é¢„æµ‹-è¿ç»­"><a href="#1-2-é¢„æµ‹-è¿ç»­" class="headerlink" title="1.2 é¢„æµ‹ : è¿ç»­"></a>1.2 é¢„æµ‹ : è¿ç»­</h3><p>é¢„æµ‹ æ˜¯æŒ‡å¯¹<code>è¿ç»­æ•°æ®</code>çš„åˆ†ç±»ï¼Œæ¯”å¦‚é¢„æµ‹æ˜å¤©8ç‚¹å¤©æ°”çš„æ¹¿åº¦æƒ…å†µï¼Œå¤©æ°”çš„æ¹¿åº¦åœ¨éšæ—¶å˜åŒ–ï¼Œ8ç‚¹æ—¶çš„å¤©æ°”æ˜¯ä¸€ä¸ªå…·ä½“å€¼ï¼Œå®ƒä¸å±äºæŸä¸ªæœ‰é™é›†åˆç©ºé—´ã€‚é¢„æµ‹ä¹Ÿå«å›å½’åˆ†æï¼Œåœ¨é‡‘èé¢†åŸŸæœ‰ç€å¹¿æ³›åº”ç”¨ã€‚</p>
<blockquote>
<p>è™½ç„¶å¯¹ç¦»æ•£æ•°æ®å’Œè¿ç»­æ•°æ®çš„å¤„ç†æ–¹å¼æœ‰æ‰€ä¸åŒï¼Œä½†å…¶å®ä»–ä»¬ä¹‹é—´ç›¸äº’è½¬åŒ–ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥æ ¹æ®æ¯”è¾ƒçš„æŸä¸ªç‰¹å¾å€¼åˆ¤æ–­ï¼Œå¦‚æœå€¼å¤§äº0.5å°±è®¤å®šä¸ºç”·æ€§ï¼Œå°äºç­‰äº0.5å°±è®¤ä¸ºæ˜¯å¥³æ€§ï¼Œè¿™æ ·å°±è½¬åŒ–ä¸ºè¿ç»­å¤„ç†æ–¹å¼ï¼›å°†å¤©æ°”æ¹¿åº¦å€¼åˆ†æ®µå¤„ç†ä¹Ÿå°±è½¬åŒ–ä¸ºç¦»æ•£æ•°æ®ã€‚</p>
</blockquote>
<p><strong>æ•°æ®åˆ†ç±»</strong> åˆ†ä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>æ„é€ æ¨¡å‹ï¼Œåˆ©ç”¨è®­ç»ƒæ•°æ®é›† è®­ç»ƒ åˆ†ç±»å™¨ï¼›</li>
<li>åˆ©ç”¨å»ºå¥½çš„åˆ†ç±»å™¨æ¨¡å‹å¯¹æµ‹è¯•æ•°æ®è¿›è¡Œåˆ†ç±»ã€‚</li>
</ol>
<blockquote>
<p>å¥½çš„åˆ†ç±»å™¨å…·æœ‰å¾ˆå¥½çš„æ³›åŒ–èƒ½åŠ›ï¼Œå³å®ƒä¸ä»…åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šèƒ½è¾¾åˆ°å¾ˆé«˜çš„æ­£ç¡®ç‡ï¼Œè€Œä¸”èƒ½åœ¨æœªè§è¿‡å¾—æµ‹è¯•æ•°æ®é›†ä¹Ÿèƒ½è¾¾åˆ°è¾ƒé«˜çš„æ­£ç¡®ç‡ã€‚å¦‚æœä¸€ä¸ªåˆ†ç±»å™¨åªæ˜¯åœ¨è®­ç»ƒæ•°æ®ä¸Šè¡¨ç°ä¼˜ç§€ï¼Œä½†åœ¨æµ‹è¯•æ•°æ®ä¸Šè¡¨ç°ç¨€çƒ‚ï¼Œè¿™ä¸ªåˆ†ç±»å™¨å°±å·²ç»è¿‡æ‹Ÿåˆäº†ï¼Œå®ƒåªæ˜¯æŠŠè®­ç»ƒæ•°æ®è®°ä¸‹æ¥äº†ï¼Œå¹¶æ²¡æœ‰æŠ“åˆ°æ•´ä¸ªæ•°æ®ç©ºé—´çš„ç‰¹å¾ã€‚</p>
</blockquote>
<h2 id="2-Decision-Treeâ€™-Classification"><a href="#2-Decision-Treeâ€™-Classification" class="headerlink" title="2. Decision Treeâ€™ Classification"></a>2. Decision Treeâ€™ Classification</h2><p>ä»£è¡¨æ€§çš„ä¾‹å­è¯´æ˜ :</p>
<table>
<thead>
<tr>
<th style="text-align:center">ID</th>
<th style="text-align:center">é˜´æ™´(F)</th>
<th style="text-align:center">æ¸©åº¦(F)</th>
<th style="text-align:center">æ¹¿åº¦(F)</th>
<th style="text-align:center">åˆ®é£(F)</th>
<th style="text-align:center">æ˜¯å¦ç©ï¼ˆCï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">sunny</td>
<td style="text-align:center">hot</td>
<td style="text-align:center">high</td>
<td style="text-align:center">false</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">sunny</td>
<td style="text-align:center">hot</td>
<td style="text-align:center">high</td>
<td style="text-align:center">true</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">overcast</td>
<td style="text-align:center">hot</td>
<td style="text-align:center">high</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">rainy</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">high</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">rainy</td>
<td style="text-align:center">cool</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">rainy</td>
<td style="text-align:center">cool</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">true</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">overcast</td>
<td style="text-align:center">cool</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">true</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">sunny</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">high</td>
<td style="text-align:center">false</td>
<td style="text-align:center">å¦</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">sunny</td>
<td style="text-align:center">cool</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">rainy</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">11</td>
<td style="text-align:center">sunny</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">true</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">overcast</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">high</td>
<td style="text-align:center">true</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">13</td>
<td style="text-align:center">overcast</td>
<td style="text-align:center">hot</td>
<td style="text-align:center">normal</td>
<td style="text-align:center">false</td>
<td style="text-align:center">æ˜¯</td>
</tr>
<tr>
<td style="text-align:center">14</td>
<td style="text-align:center">rainy</td>
<td style="text-align:center">mild</td>
<td style="text-align:center">high</td>
<td style="text-align:center">true</td>
<td style="text-align:center">å¦</td>
</tr>
</tbody>
</table>
<p>åˆ©ç”¨ID3ç®—æ³•ä¸­çš„ Info Gain Feature Selectionï¼Œé€’å½’çš„å­¦ä¹ ä¸€æ£µå†³ç­–æ ‘ï¼Œå¾—åˆ°æ ‘ç»“æ„å¦‚ä¸‹</p>
<p><img src="/images/ml/decision-tree/decision-tree-2.png" width="560" height="400" img=""></p>
<blockquote>
<p>å†³ç­–æ ‘ï¼ˆdecision treeï¼‰æ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼ˆå¯ä»¥æ˜¯äºŒå‰æ ‘æˆ–éäºŒå‰æ ‘ï¼‰ã€‚å…¶æ¯ä¸ªéå¶èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªFeatureå±æ€§ä¸Šçš„æµ‹è¯•ï¼Œæ¯ä¸ªåˆ†æ”¯ä»£è¡¨è¿™ä¸ªFeatureå±æ€§åœ¨æŸä¸ªå€¼åŸŸä¸Šçš„è¾“å‡ºï¼Œè€Œæ¯ä¸ªå¶èŠ‚ç‚¹å­˜æ”¾ä¸€ä¸ª Category ã€‚ä½¿ç”¨ DT è¿›è¡Œå†³ç­–çš„è¿‡ç¨‹å°±æ˜¯ä» root å¼€å§‹ï¼Œæµ‹è¯•å¾…åˆ†ç±»é¡¹ä¸­ç›¸åº”çš„ Feature å±æ€§ï¼Œå¹¶æŒ‰ç…§å…¶å€¼é€‰æ‹©è¾“å‡ºåˆ†æ”¯ï¼Œç›´åˆ°åˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼Œå°†å¶å­èŠ‚ç‚¹å­˜æ”¾çš„ Category ä½œä¸ºå†³ç­–ç»“æœã€‚</p>
</blockquote>
<p>Feature Selectionï¼Œå¦‚ä½•é‡åŒ–æœ€ä¼˜Feature? <code>-&gt;</code> å¯¼è‡´ DT Algorithm å‡ºç°äº† ID3ã€C4.5ã€C5.0ã€CART ç­‰ã€‚</p>
<h2 id="3-Decision-Treeâ€™-Build"><a href="#3-Decision-Treeâ€™-Build" class="headerlink" title="3. Decision Treeâ€™ Build"></a>3. Decision Treeâ€™ Build</h2><p>æ„é€  Decision Tree çš„å…³é”®æ­¥éª¤æ˜¯åˆ†è£‚å±æ€§ã€‚æ‰€è°“åˆ†è£‚å±æ€§å°±æ˜¯åœ¨æŸä¸ªèŠ‚ç‚¹å¤„æŒ‰ç…§æŸä¸€ç‰¹å¾å±æ€§çš„ä¸åŒåˆ’åˆ†æ„é€ ä¸åŒçš„åˆ†æ”¯ï¼Œå…¶ç›®æ ‡æ˜¯è®©å„ä¸ªåˆ†è£‚å­é›†å°½å¯èƒ½åœ°â€œçº¯â€ã€‚å°½å¯èƒ½â€œçº¯â€å°±æ˜¯å°½é‡è®©ä¸€ä¸ªåˆ†è£‚å­é›†ä¸­å¾…åˆ†ç±»é¡¹å±äºåŒä¸€ç±»åˆ«ã€‚</p>
<blockquote>
<p>æ„é€ å†³ç­–æ ‘çš„è¿‡ç¨‹æœ¬è´¨ä¸Šå°±æ˜¯æ ¹æ® <strong>data-feature</strong> å°† æ•°æ®é›†(D) åˆ†ç±»çš„é€’å½’è¿‡ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œ<strong>å½“å‰ æ•°æ®é›†(D) ä¸Šå“ªä¸ª Feature åœ¨åˆ’åˆ†æ•°æ®åˆ†ç±»æ—¶èµ·å†³å®šæ€§ä½œç”¨</strong></p>
</blockquote>
<h3 id="3-1-æ„é€ -DT-æµç¨‹"><a href="#3-1-æ„é€ -DT-æµç¨‹" class="headerlink" title="3.1 æ„é€  DT æµç¨‹"></a>3.1 æ„é€  DT æµç¨‹</h3><p>è®­ç»ƒæ•°æ®é›† $D = \{ (x^{(1)}ï¼Œy^{(1)}) ï¼Œ (x^{(2)}ï¼Œy^{(2)})ï¼Œ â‹¯ ï¼Œ (x^{(m)}ï¼Œy^{(m)}) \}$ (Featureç”¨ç¦»æ•£å€¼è¡¨ç¤º)<br>å€™é€‰ç‰¹å¾é›† $F = \{f^1ï¼Œf^2ï¼Œ â‹¯ï¼Œf^n \}$</p>
<p>å¼€å§‹å»ºç«‹ RootèŠ‚ç‚¹ï¼Œå°†æ‰€æœ‰è®­ç»ƒæ•°æ®éƒ½ç½®äºæ ¹èŠ‚ç‚¹ï¼ˆ$m$æ¡æ ·æœ¬ï¼‰ã€‚ä» featureé›†åˆ $F$ ä¸­é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜ç‰¹å¾ $f^âˆ—$ï¼ŒæŒ‰ç…§ $f^âˆ—$ å–å€¼å°† è®­ç»ƒæ•°æ®é›†(D) åˆ‡åˆ†æˆè‹¥å¹²å­é›†ï¼Œä½¿å¾—å„ä¸ªè‡ªå·±æœ‰ä¸€ä¸ªåœ¨å½“å‰æ¡ä»¶ä¸‹æœ€å¥½çš„åˆ†ç±»ã€‚</p>
<p>å¦‚æœå­é›†ä¸­æ ·æœ¬ç±»åˆ«åŸºæœ¬ç›¸åŒï¼Œé‚£ä¹ˆæ„å»ºå¶èŠ‚ç‚¹ï¼Œå¹¶å°†æ•°æ®å­é›†åˆ’åˆ†ç»™å¯¹åº”çš„å¶èŠ‚ç‚¹ï¼›å¦‚æœå­é›†ä¸­æ ·æœ¬ç±»åˆ«å·®å¼‚è¾ƒå¤§ï¼Œä¸èƒ½è¢«åŸºæœ¬æ­£ç¡®åˆ†ç±»ï¼Œéœ€è¦åœ¨å‰©ä¸‹çš„ç‰¹å¾é›†åˆ $ï¼ˆFâˆ’{f^âˆ—}ï¼‰$ ä¸­é€‰æ‹©æ–°çš„æœ€ä¼˜ç‰¹å¾ï¼Œç»§ç»­å¯¹æ•°æ®å­é›†è¿›è¡Œåˆ‡åˆ†ã€‚å¦‚æ­¤é€’å½’åœ°è¿›è¡Œä¸‹å»ï¼Œç›´è‡³æ‰€æœ‰æ•°æ®è‡ªå·±éƒ½èƒ½è¢«åŸºæœ¬æ­£ç¡® Categoryï¼Œæˆ–è€…æ²¡æœ‰åˆé€‚çš„æœ€ä¼˜ç‰¹å¾ä¸ºæ­¢ã€‚</p>
<p>è¿™æ ·æœ€ç»ˆç»“æœæ˜¯æ¯ä¸ªå­é›†éƒ½è¢«åˆ†åˆ°å¶èŠ‚ç‚¹ä¸Šï¼Œå¯¹åº”ç€ä¸€ä¸ªæ˜ç¡®çš„ç±»åˆ«ã€‚é‚£ä¹ˆï¼Œé€’å½’ç”Ÿæˆçš„å±‚çº§ç»“æ„å³ä¸ºä¸€æ£µ DTã€‚</p>
<h3 id="3-2-ä¼ªä»£ç æ„é€ -DT"><a href="#3-2-ä¼ªä»£ç æ„é€ -DT" class="headerlink" title="3.2 ä¼ªä»£ç æ„é€  DT"></a>3.2 ä¼ªä»£ç æ„é€  DT</h3><p>  è¾“å…¥ : è®­ç»ƒæ•°æ®é›† $D = \{ (x^{(1)}ï¼Œy^{(1)}) ï¼Œ (x^{(2)}ï¼Œy^{(2)})ï¼Œ â‹¯ ï¼Œ (x^{(m)}ï¼Œy^{(m)}) \}$(Featureç”¨ç¦»æ•£å€¼è¡¨ç¤º)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;å€™é€‰ç‰¹å¾é›† $F = \{f^1ï¼Œf^2ï¼Œ â‹¯ï¼Œf^n \}$</p>
<p>  è¾“å‡º : T(D, F)</p>
<p><img src="/images/ml/decision-tree/decision-tree-3.png" width="760" height="400" img=""></p>
<p>å†³ç­–æ ‘å­¦ä¹ è¿‡ç¨‹ä¸­é€’å½’çš„æ¯ä¸€æ­¥ï¼Œåœ¨é€‰æ‹©æœ€ä¼˜ç‰¹å¾åï¼Œæ ¹æ®ç‰¹å¾å–å€¼åˆ‡å‰²å½“å‰èŠ‚ç‚¹çš„æ•°æ®é›†ï¼Œå¾—åˆ°è‹¥å¹²æ•°æ®å­é›†ã€‚<br>ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(k<em>|D|</em>log(|D|))ï¼Œkä¸ºå±æ€§ä¸ªæ•°ï¼Œ|D|ä¸ºè®°å½•é›†Dçš„è®°å½•æ•°ã€‚</p>
<h2 id="4-Feature-Selection"><a href="#4-Feature-Selection" class="headerlink" title="4. Feature Selection"></a>4. Feature Selection</h2><p>é€’å½’åœ°é€‰æ‹©æœ€ä¼˜featureï¼Œæ ¹æ®featureå–å€¼åˆ‡å‰²æ•°æ®é›†ï¼Œä½¿å¾—å¯¹åº”çš„æ•°æ®å­é›†æœ‰ä¸€ä¸ªè¾ƒå¥½çš„åˆ†ç±»ã€‚ä»ä¼ªä»£ç ä¸­ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œåœ¨å†³ç­–æ ‘å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œæœ€é‡è¦çš„æ˜¯ç¬¬07è¡Œï¼Œå³å¦‚ä½•é€‰æ‹©æœ€ä¼˜featureï¼Ÿä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„featureé€‰æ‹©é—®é¢˜ã€‚</p>
<p>åœ¨è¿™é‡Œï¼Œå¸Œæœ›éšç€featureé€‰æ‹©è¿‡ç¨‹åœ°ä¸æ–­è¿›è¡Œï¼Œå†³ç­–æ ‘çš„åˆ†æ”¯èŠ‚ç‚¹æ‰€åŒ…å«çš„æ ·æœ¬å°½å¯èƒ½å±äºåŒä¸€ç±»åˆ«ï¼Œå³å¸Œæœ›èŠ‚ç‚¹çš„â€çº¯åº¦ï¼ˆpurityï¼‰â€è¶Šæ¥è¶Šé«˜ã€‚</p>
<blockquote>
<p>å¦‚å­é›†ä¸­çš„æ ·æœ¬éƒ½å±äºåŒä¸€ä¸ªç±»åˆ«ï¼Œæ˜¯æœ€å¥½çš„ç»“æœï¼›å¦‚æœè¯´å¤§å¤šæ•°çš„æ ·æœ¬ç±»å‹ç›¸åŒï¼Œåªæœ‰å°‘éƒ¨åˆ†æ ·æœ¬ä¸åŒï¼Œä¹Ÿå¯ä»¥æ¥å—ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆå¦‚ä½•æ‰èƒ½åšåˆ°é€‰æ‹©çš„ç‰¹å¾å¯¹åº”çš„æ ·æœ¬å­é›†çº¯åº¦æœ€é«˜å‘¢ï¼Ÿ</p>
<table>
<thead>
<tr>
<th style="text-align:center">Algorithm</th>
<th style="text-align:center">Feature é€‰æ‹©æ–¹æ³•</th>
<th style="text-align:center">Author</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ID3</td>
<td style="text-align:center">Information gain</td>
<td style="text-align:center">Quinlan. 1986</td>
</tr>
<tr>
<td style="text-align:center">C4.5</td>
<td style="text-align:center">Gain ratio</td>
<td style="text-align:center">Quinlan. 1993.</td>
</tr>
<tr>
<td style="text-align:center">CART</td>
<td style="text-align:center">å›å½’æ ‘ï¼š æœ€å°äºŒä¹˜<br>åˆ†ç±»æ ‘ï¼š åŸºå°¼æŒ‡æ•° Gini index</td>
<td style="text-align:center">Breiman. 1984<br>(Classification and Regression Tree åˆ†ç±»ä¸å›å½’æ ‘)</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ID3 (Iterative Dichotomiser)</p>
</blockquote>
<h3 id="4-1-Information-Gain"><a href="#4-1-Information-Gain" class="headerlink" title="4.1 Information Gain"></a>4.1 Information Gain</h3><p>ä¿¡æ¯å¢ç›Šï¼ˆInformation Gainï¼‰è¡¡é‡ Feature çš„é‡è¦æ€§æ˜¯æ ¹æ®å½“å‰ Feature ä¸ºåˆ’åˆ†å¸¦æ¥å¤šå°‘ä¿¡æ¯é‡ï¼Œå¸¦æ¥çš„ä¿¡æ¯è¶Šå¤šï¼Œè¯¥ Feature å°±è¶Šé‡è¦ï¼Œæ­¤æ—¶èŠ‚ç‚¹çš„â€çº¯åº¦â€ä¹Ÿå°±è¶Šé«˜ã€‚</p>
<p><a href="/2016/08/18/ml-entropy-base/">Infomation Entropy</a></p>
<blockquote>
<p>å¯¹ä¸€ä¸ªåˆ†ç±»ç³»ç»Ÿæ¥è¯´ï¼Œå‡è®¾ç±»åˆ« $C$ å¯èƒ½çš„å–å€¼ä¸º $c_1ï¼Œc_2ï¼Œâ‹¯ï¼Œc_k$ï¼ˆ$k$æ˜¯ç±»åˆ«æ€»æ•°ï¼‰ï¼Œæ¯ä¸€ä¸ªç±»åˆ«å‡ºç°çš„æ¦‚ç‡åˆ†åˆ«æ˜¯ $p(c_1)ï¼Œp(c_2)ï¼Œâ‹¯ï¼Œp(c_k)$ã€‚æ­¤æ—¶ï¼Œåˆ†ç±»ç³»ç»Ÿçš„ Entropy å¯ä»¥è¡¨ç¤ºä¸º:</p>
<p>$$<br>info(C) = -  \sum_{i=1}^k p(c_i) \cdot log_2 p(c_i) \qquad (fml.4.1.1)<br>$$</p>
<p>åˆ†ç±»ç³»ç»Ÿçš„ä½œç”¨å°±æ˜¯è¾“å‡ºä¸€ä¸ªç‰¹å¾å‘é‡ï¼ˆæ–‡æœ¬ç‰¹å¾ã€IDç‰¹å¾ ç­‰ï¼‰å±äºå“ªä¸ª Category çš„å€¼ï¼Œè€Œè¿™ä¸ªå€¼å¯èƒ½æ˜¯ $c_1ï¼Œc_2ï¼Œâ‹¯ï¼Œc_k$ ï¼Œå› æ­¤è¿™ä¸ªå€¼æ‰€æºå¸¦çš„ä¿¡æ¯é‡å°±æ˜¯ (fml.4.1.1) å…¬å¼è¿™ä¹ˆå¤š</p>
</blockquote>
<p><strong>Condition Entropy</strong></p>
<p>å‡è®¾ ç¦»æ•£ç‰¹å¾ $f$ çš„å–å€¼æœ‰ $I$ ä¸ªï¼Œ$info(C|f=f_i)$ è¡¨ç¤ºç‰¹å¾ $f$ è¢«å–å€¼ä¸º $f_i$ æ—¶çš„<strong><em>Condition Entropy</em></strong>ï¼› $info(C|f)$ æ˜¯æŒ‡ç‰¹å¾ $f$ è¢«å›ºå®šæ—¶çš„ <strong><em>Condition Entropy</em></strong>ã€‚äºŒè€…ä¹‹é—´çš„å…³ç³»æ˜¯ï¼š</p>
<blockquote>
<p>$$<br>\begin{align}<br>info(C|f) &amp; = p_1 \cdot info(C|f=f_1) + p_2 \cdot info(C|f=f_2) + â€¦ + p_k \cdot info(C|f=f_{k}) \\ &amp; = \sum_{i=1}^{I} p_i \cdot info(C|f=f_i) \end{align}  \quad (fml.4.1.2)<br>$$<br>å‡è®¾æ€»æ ·æœ¬æ•°æœ‰ $m$ æ¡ï¼Œç‰¹å¾ $f=f_i$ æ—¶çš„æ ·æœ¬æ•° $m_iï¼Œp_i=\frac{m_i}{m}$.</p>
</blockquote>
<p><strong>å¦‚ä½•æ±‚ $P(C|f=f_i)$</strong> ?</p>
<blockquote>
<p>äºŒåˆ†ç±»æƒ…å†µ :</p>
<p>ä»¥äºŒåˆ†ç±»ä¸ºä¾‹ï¼ˆæ­£ä¾‹ä¸º1ï¼Œè´Ÿä¾‹ä¸º0ï¼‰ï¼Œæ€»æ ·æœ¬æ•°ä¸º $m$ æ¡ï¼Œç‰¹å¾ $f$ çš„å–å€¼ä¸º $I$ ä¸ªï¼Œå…¶ä¸­ç‰¹å¾ $f=f_i$ å¯¹åº”çš„æ ·æœ¬æ•°ä¸º $m_i$ æ¡ï¼Œå…¶ä¸­æ­£ä¾‹ $m_{i1}$ æ¡ï¼Œè´Ÿä¾‹ $m_{i0}$ æ¡ $m_i = m_{i0} + m_{i1}$ ã€‚é‚£ä¹ˆæœ‰ï¼š</p>
<p>$$<br>\begin{align} info(C|f=f_i) &amp; = - \frac{m_{i1}}{m_i} \cdot log_{2} \frac{m_{i1}}{m_i} - \frac{m_{i0}}{m_i} \cdot log_{2} \frac{m_{i0}}{m_i} \end{align} \qquad (fml.4.1.3)<br>$$<br>å¤šåˆ†ç±»æƒ…å†µ:</p>
<p>$$<br>\begin{align} info(C|f=f_i) = -\sum_{j=0}^{k-1} \frac{m_{ij}}{m_i} \cdot log_{2} \frac{m_{ij}}{m_i} \end{align} \qquad (fml.4.1.4)<br>$$</p>
<p>å…¬å¼$\frac{m_{ij}}{m_i}$ç‰©ç†å«ä¹‰æ˜¯å½“ $f=f_i$ ä¸” $C=c_j$ çš„æ¦‚ç‡ï¼Œå³æ¡ä»¶æ¦‚ç‡ $p(c_j|f_i)$</p>
<p>å› æ­¤ï¼Œ<strong><em>Condition Entropy</em></strong> è®¡ç®—å…¬å¼ä¸ºï¼š</p>
<p>$$<br>\begin{align} info(C|f) &amp; = \sum_{i=1}^{I} p(f_i) \cdot info(C|f=f_i) \\ &amp; = - \sum_{i=1}^{I} p(f_i) \cdot \underline { \sum_{j=0}^{k-1} p(c_j|f_i) \cdot log_2 p(c_j|f_i) } \qquad (fml.4.1.5)<br>\end{align}<br>$$</p>
</blockquote>
<p>ç‰¹å¾ $f$ ç»™ç³»ç»Ÿå¸¦æ¥çš„ info gain ç­‰äºç³»ç»ŸåŸæœ‰çš„ Entropy ä¸å›ºå®šç‰¹å¾ $f$ çš„ <strong><em>Condition Entropy</em></strong> ä¹‹å·®ï¼Œå…¬å¼è¡¨ç¤ºå¦‚ä¸‹:</p>
<blockquote>
<p>$$<br>\begin{align} IG(F) &amp; = E(C) - E(C|F) \\ &amp; = -\sum_{i=1}^{k} p(c_i) \cdot \log_{2} p(c_i) + \sum_{i=1}^{I} p(f_i) \cdot \underline { \sum_{j=0}^{k-1} p(c_j|f_i) \cdot log_2 p(c_j|f_i) } \end{align}  \qquad (fml.4.1.6)<br>$$</p>
<p>$n$ è¡¨ç¤ºç‰¹å¾ $f$ å–å€¼ä¸ªæ•°ï¼Œ$k$ è¡¨ç¤ºç±»åˆ« $C$ ä¸ªæ•°ï¼Œ$\sum_{j=0}^{n-1} \frac{m_{ij}}{m_i} \cdot log_{2} \frac{m_{ij}}{m_i}$ è¡¨ç¤ºæ¯ä¸€ä¸ªç±»åˆ«å¯¹åº”çš„ Entropy ã€‚</p>
</blockquote>
<hr>
<p><strong>ä¸‹é¢ä»¥å¤©æ°”æ•°æ®ä¸ºä¾‹,é€šè¿‡ <code>Info gain</code> é€‰æ‹©æœ€ä¼˜ feature çš„è¿‡ç¨‹ :</strong></p>
<blockquote>
<p>æ ¹æ® é˜´æ™´ã€æ¸©åº¦ã€æ¹¿åº¦ å’Œ åˆ®é£ æ¥å†³å®šæ˜¯å¦å‡ºå»ç©ã€‚æ ·æœ¬ä¸­æ€»å…±æœ‰ 14 æ¡è®°å½•ï¼Œå–å€¼ä¸º <code>æ˜¯</code>(9ä¸ªæ­£æ ·æœ¬)ã€<code>å¦</code>(5ä¸ªè´Ÿæ ·æœ¬)ï¼Œç”¨ $S(9+,5âˆ’)$ è¡¨ç¤º.</p>
<p>(1). åˆ†ç±»ç³»ç»Ÿçš„ Entropy :<br>$$<br>Entropy(S) = info(9,5) = (-\frac{9}{14} _ llog_2 (\frac{9}{14})) + (- \frac{5}{14} _ llog_2 (\frac{5}{14})) = 0.940ä½   \quad (exp.4.1.1)<br>$$<br>(2). å¦‚æœä»¥ç‰¹å¾â€é˜´æ™´â€ä½œä¸ºæ ¹èŠ‚ç‚¹ã€‚â€œé˜´æ™´â€å–å€¼ä¸º{sunny, overcast, rainy}, åˆ†åˆ«å¯¹åº”çš„æ­£è´Ÿæ ·æœ¬æ•°åˆ†åˆ«ä¸º(2+,3-), (4+,0-), (3+,2-)ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸‰ä¸ªèŠ‚ç‚¹ä¸Šçš„ info Entropy åˆ†åˆ«ä¸ºï¼š<br>$$<br>\begin{align} &amp; Entropy(S| â€œé˜´æ™´â€=sunny) = info(2,3) = 0.971ä½  \quad(exp.4.1.1) \\ &amp; Entropy(S| â€œé˜´æ™´â€=overcast) = info(4,0) = 0ä½  \;\;\quad(exp.4.1.2) \\ &amp; Entropy(S| â€œé˜´æ™´â€=rainy) = info(3,2) = 0.971ä½  \;\quad(exp.4.1.3) \end{align}<br>$$</p>
<p>ä»¥ Feature â€œé˜´æ™´â€ ä¸ºæ ¹èŠ‚ç‚¹ï¼Œå¹³å‡ä¿¡æ¯å€¼ï¼ˆå³ <strong>Condition Entropy</strong>ï¼‰ä¸ºï¼š<br>$$<br>Entropy(S|â€œé˜´æ™´â€) = \frac{5}{14} * 0.971 + \frac{4}{14} * 0 + \frac{5}{14} * 0.971 = 0.693ä½ \quad (exp.4.1.4)<br>$$</p>
<p>ä»¥ Feature â€œé˜´æ™´â€ ä¸ºæ¡ä»¶ï¼Œè®¡ç®—å¾—åˆ°çš„ <strong>Condition Entropy</strong> ä»£è¡¨äº†æœŸæœ›çš„ä¿¡æ¯æ€»é‡ï¼Œå³å¯¹äºä¸€ä¸ªæ–°æ ·æœ¬åˆ¤å®šå…¶å±äºå“ªä¸ªç±»åˆ«æ‰€å¿…éœ€çš„ä¿¡æ¯é‡ã€‚</p>
<p>(3). è®¡ç®—ç‰¹å¾â€œé˜´æ™´â€â€œé˜´æ™´â€å¯¹åº”çš„ä¿¡æ¯å¢ç›Š:<br>$$<br>IG( â€œé˜´æ™´â€) = Entropy(S) - Entropy(S| â€œé˜´æ™´â€) = 0.247ä½ \quad\quad(exp.4.1.5)<br>$$</p>
<p>åŒæ ·çš„è®¡ç®—æ–¹æ³•ï¼Œå¯å¾—æ¯ä¸ªç‰¹å¾å¯¹åº”çš„ä¿¡æ¯å¢ç›Šï¼Œå³<br>$$<br>IG(â€œåˆ®é£â€) = Entropy(S) - Entropy(S|â€œåˆ®é£â€) = 0.048ä½ \qquad\qquad(exp.4.1.6) \\ IG(â€œæ¹¿åº¦â€) = Entropy(S) - Entropy(S|â€œæ¹¿åº¦â€) = 0.152ä½ \qquad\qquad(exp.4.1.7) \\ IG(â€œæ¸©åº¦â€) = Entropy(S) - Entropy(S|â€œæ¸©åº¦â€) = 0.029ä½ \qquad\qquad(exp.4.1.8)<br>$$</p>
<p>æ˜¾ç„¶ï¼ŒFeature â€œé˜´æ™´â€ çš„ info gain æœ€å¤§ï¼Œäºæ˜¯æŠŠå®ƒä½œä¸ºåˆ’åˆ†ç‰¹å¾ã€‚åŸºäºâ€œé˜´æ™´â€å¯¹æ ¹èŠ‚ç‚¹è¿›è¡Œåˆ’åˆ†çš„ç»“æœï¼Œå¦‚å›¾4.5æ‰€ç¤ºï¼ˆå†³ç­–æ ‘å­¦ä¹ è¿‡ç¨‹éƒ¨åˆ†ï¼‰ã€‚å†³ç­–æ ‘å­¦ä¹ ç®—æ³•å¯¹å­èŠ‚ç‚¹è¿›ä¸€æ­¥åˆ’åˆ†ï¼Œé‡å¤ä¸Šé¢çš„è®¡ç®—æ­¥éª¤ã€‚</p>
</blockquote>
<p><img src="/images/ml/decision-tree/decision-tree-2.png" width="560" height="400" img=""></p>
<h3 id="4-2-Gain-ratio"><a href="#4-2-Gain-ratio" class="headerlink" title="4.2 Gain ratio"></a>4.2 Gain ratio</h3><p>ä¸ Info Gain ä¸åŒï¼Œ<code>Gain ratio</code> çš„è®¡ç®—è€ƒè™‘äº† F åˆ†è£‚æ•°æ®é›†åæ‰€äº§ç”Ÿçš„å­èŠ‚ç‚¹çš„æ•°é‡å’Œè§„æ¨¡ï¼Œè€Œ<strong>å¿½ç•¥ä»»ä½•æœ‰å…³ç±»åˆ«çš„ä¿¡æ¯</strong>ã€‚</p>
<blockquote>
<p>ä»¥ info gain ç¤ºä¾‹ä¸ºä¾‹ï¼ŒæŒ‰ç…§ ç‰¹å¾â€œé˜´æ™´â€ å°†æ•°æ®é›†åˆ†è£‚æˆ3ä¸ªå­é›†ï¼Œè§„æ¨¡åˆ†åˆ«ä¸º5ã€4å’Œ5ï¼Œå› æ­¤ä¸è€ƒè™‘å­é›†ä¸­æ‰€åŒ…å«çš„ç±»åˆ«ï¼Œäº§ç”Ÿä¸€ä¸ªåˆ†è£‚ä¿¡æ¯ä¸ºï¼š</p>
<p>$$<br>SplitInfo(â€œé˜´æ™´â€) = info(5,4,5) = 1.577ä½ \qquad (exp.4.2.1)<br>$$<br><strong>Split Information Entropy</strong> å¯ç®€å•åœ°ç†è§£ä¸ºè¡¨ç¤ºä¿¡æ¯åˆ†æ”¯æ‰€éœ€è¦çš„ä¿¡æ¯é‡ã€‚ </p>
<p>é‚£ä¹ˆ Info Gain ratio ï¼š<br>$$<br>IG_{ratio}(F) = \frac {IG(F)} {SplitInfo(F)} \qquad (exp.4.2.2)<br>$$<br>åœ¨è¿™é‡Œï¼Œç‰¹å¾ â€œé˜´æ™´â€çš„ Gain ratio ä¸º $IG_{ratio}( â€œé˜´æ™´â€)=\frac{0.247}{1.577} = 0.157$ã€‚å‡å°‘ä¿¡æ¯å¢ç›Šæ–¹æ³•å¯¹å–å€¼æ•°è¾ƒå¤šçš„ç‰¹å¾çš„å½±å“ã€‚(å¯ä»¥å‡å°‘è¿‡æ‹Ÿåˆï¼Œè¿™ç­‰äºæ˜¯å¯¹ æŸç‰¹å¾å–å€¼è¿‡å¤šçš„ä¸€ä¸ªæƒ©ç½š)</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>-(math.log((<span class="number">5.0</span>/<span class="number">14.0</span>), <span class="number">2</span>) * (<span class="number">5.0</span>/<span class="number">14.0</span>) * <span class="number">2</span> + (<span class="number">4.0</span>/<span class="number">14.0</span>) * (math.log((<span class="number">4.0</span>/<span class="number">14.0</span>), <span class="number">2</span>)))</span><br><span class="line"><span class="number">1.577406282852345</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.cnblogs.com/fengfenggirl/p/classsify_decision_tree.html" target="_blank" rel="external">é€—æ¯”ç®—æ³•å·¥ç¨‹å¸ˆ</a>ã€<a href="http://www.52caml.com/" target="_blank" rel="external">ç®—æ³•æ‚è´§é“º</a>ã€<a href="http://www.cnblogs.com/leoo2sk/archive/2010/09/19/decision-tree.html" target="_blank" rel="external">52caml</a></li>
<li><a href="http://blog.csdn.net/ljp812184246/article/details/47402639" target="_blank" rel="external">å†³ç­–æ ‘ID3ã€C4.5ã€CARTç®—æ³•ï¼šä¿¡æ¯ç†µï¼ŒåŒºåˆ«ï¼Œå‰ªæç†è®ºæ€»ç»“</a></li>
<li>ã€Šæœºå™¨å­¦ä¹ å¯¼è®ºã€‹ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ä¸­å›½äººèµ·åå­¦é—®]]></title>
      <url>http://shopee.ai/2016/08/13/tools/Chinese-named/</url>
      <content type="html"><![CDATA[<p>æˆ‘å¯¹ä¸­å›½äººèµ·åå­¦é—®çš„è‡ªæˆ‘ç ”ç©¶è®°å½•</p>
<a id="more"></a>
<h2 id="1-äº”è¡Œå…«å­—ä»‹ç»"><a href="#1-äº”è¡Œå…«å­—ä»‹ç»" class="headerlink" title="1. äº”è¡Œå…«å­—ä»‹ç»"></a>1. äº”è¡Œå…«å­—ä»‹ç»</h2><h3 id="1-1-äº”è¡Œ"><a href="#1-1-äº”è¡Œ" class="headerlink" title="1.1 äº”è¡Œ"></a>1.1 äº”è¡Œ</h3><p>ã€€äº”è¡Œå°±æ˜¯å‘¨æ˜“ä¸­å¸¸è¯´çš„æœ¨ã€ç«ã€åœŸã€é‡‘ã€æ°´ã€‚æ˜“ç»ä¸­å„ç±»äº‹ç‰©å‡å¯ä»¥äº”è¡Œæ¥åŒºåˆ†ï¼Œå¦‚å¹²æ”¯ã€åœ°æ”¯ã€å­£èŠ‚ã€æ–¹ä½ã€äººä½“ã€é¢œè‰²ã€å‘³é“ç­‰ç­‰ã€‚äº”è¡Œæœ‰ç›¸ç”Ÿä¸ç›¸å…‹çš„ç‰¹è´¨ï¼Œå¾ˆå¤šçš„äº‹ç‰©å¯è—‰ç”±äº”è¡Œçš„è¿ç®—ï¼Œäº†è§£å…ƒç´ ä¹‹å…´è¡°ï¼Œæ¥åˆ¤åˆ«äº‹ç‰©çš„èµ·ä¼å˜åŒ–å’Œä½ ä¸€ç”Ÿçš„å¥½åå‰å‡¶ã€‚</p>
<h3 id="1-2-ä¸‰æ‰"><a href="#1-2-ä¸‰æ‰" class="headerlink" title="1.2 ä¸‰æ‰"></a>1.2 ä¸‰æ‰</h3><p>ã€€ã€€ä¸‰æ‰é…ç½®å³å¤©ã€äººã€åœ°ã€‚ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–ç†è§£äººç«‹è¶³äºå¤§åœ°ä¹‹ä¸Šï¼Œåœ¨å¤©ä¹‹ä¸‹ï¼Œå—åˆ°ä¸Šå¤©ä¹‹çœ·é¡¾ï¼Œå¤§åœ°çš„æ»‹å…»ï¼Œè€Œç”Ÿç”Ÿä¸æ¯ã€‚äº¦æœ‰é¡ºåº”å¤©æ—¶ã€åœ°åˆ©ã€äººå’Œçš„è¡Œäº‹å“²ç†ã€‚ä¸‰æ‰é…ç½®åœ¨å§“åå­¦ä¸­ï¼Œå æœ‰å¾ˆå¤§çš„åˆ†é‡ã€‚</p>
<h3 id="1-3-äº”æ ¼"><a href="#1-3-äº”æ ¼" class="headerlink" title="1.3 äº”æ ¼"></a>1.3 äº”æ ¼</h3><p>ã€€ã€€äº”æ ¼é…ç½®æ˜¯æŒ‡å¤©æ ¼ã€åœ°æ ¼ã€äººæ ¼ã€å¤–æ ¼ã€æ€»æ ¼å…±äº”æ ¼ä¹‹é—´çš„å…³ç³»ã€‚å¤©æ ¼æ˜¯ç”±ç¥–å…ˆæµä¼ è€Œæ¥ï¼Œå•ç‹¬å‡ºç°å¯¹äººç”Ÿæ²¡æœ‰å¤šå¤§å½±å“;äººæ ¼æ˜¯å§“åå‰–è±¡æ•°ç†çš„ä¸­å¿ƒæ‰€åœ¨ï¼Œå¯¹äººç”Ÿçš„å½±å“æœ€å¤§;äººæ ¼ä¸åœ°æ ¼ç»“åˆçš„æ•°ç†åˆ™ä¸ºåŸºç¡€è¿ã€‚åœ°æ ¼ä¸»è¦æ˜¯36å²å‰çš„äººç”Ÿï¼Œä¹Ÿå«å‰è¿åŠ›ï¼Œå¤–æ ¼ä»£è¡¨äººçš„å¤–å›´ï¼Œå‰å‡¶æ— è°“ã€‚æ€»æ ¼æ˜¯36å²ä»¥åçš„äººç”Ÿï¼Œä¹Ÿæ˜¯åè¿åŠ›ã€‚äº”æ ¼é…ç½®åœ¨å§“åå­¦ä¸­å æœ‰ä¸»è¦ä½ç½®ã€‚</p>
<h2 id="2-åˆ¤æ–­äº”è¡Œæ‰€ç¼º"><a href="#2-åˆ¤æ–­äº”è¡Œæ‰€ç¼º" class="headerlink" title="2. åˆ¤æ–­äº”è¡Œæ‰€ç¼º"></a>2. åˆ¤æ–­äº”è¡Œæ‰€ç¼º</h2><blockquote>
<p>èµ·åå­—ï¼Œéœ€è¦æ ¹æ®äº”è¡Œå…«å­—æ‰€ç¼ºå°‘çš„äº”è¡Œæ¥ç”¨ç›¸åº”çš„å±æ€§å­—(æ›´å‡†ç¡®çš„è¯´æ³•æ˜¯ç”¨<code>å–œç”¨ç¥</code>)æ¥å¡«è¡¥ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­äº”è¡Œæ‰€ç¼ºã€‚</p>
</blockquote>
<p><a href="http://www.360doc.com/content/15/0313/16/15585030_454852610.shtml" target="_blank" rel="external">è§£æå››æŸ±å…«å­—çš„ç²¾é«“å–œç”¨ç¥</a><br><a href="http://baike.baidu.com/view/1373942.htm" target="_blank" rel="external">å–œç”¨ç¥ç™¾ç§‘</a><br><a href="http://blog.sina.com.cn/s/blog_6e775646010136qp.html" target="_blank" rel="external">å¦‚ä½•çŸ¥é“è‡ªå·±å…«å­—çš„å–œç¥ï¼Œç”¨ç¥</a></p>
<blockquote>
<p>å…«å­—å°±æ˜¯ä»è¿™ä¸ªå¹³è¡¡ç†è®ºï¼Œå»åˆ†æäººä¸€ç”Ÿçš„èµ·è½</p>
</blockquote>
<p>ã€€ã€€çŸ¥é“äº†äº”è¡Œçš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ä¹ŸçŸ¥é“å¾ˆå¤šäººçš„å…«å­—äº”è¡Œéƒ½ä¸å¤ªé½å…¨ï¼Œæœ‰çš„ä¸åªç¼ºä¸€ä¸ªï¼Œè¿˜ä¼šç¼ºä¸¤ä¸ªç”šè‡³ä¸‰ä¸ªã€‚æ¯”å¦‚æˆ‘ä»¬å¸¸å¬è¯´çš„â€œäº”è¡Œç¼ºé‡‘â€ä¹‹ç±»çš„è¯ï¼Œé‚£ä¹ˆå¦‚ä½•çŸ¥é“èµ·åå­—äº”è¡Œç¼ºä»€ä¹ˆå‘¢?</p>
<h3 id="2-1-åˆ¤æ–­äº”è¡Œå…«å­—åŠå–œç”¨ç¥"><a href="#2-1-åˆ¤æ–­äº”è¡Œå…«å­—åŠå–œç”¨ç¥" class="headerlink" title="2.1 åˆ¤æ–­äº”è¡Œå…«å­—åŠå–œç”¨ç¥"></a>2.1 åˆ¤æ–­äº”è¡Œå…«å­—åŠå–œç”¨ç¥</h3><p>æŸ¥è¯¢äº”è¡Œå…«å­—æ˜¯ä¸ºäº†çœ‹å…«å­—ä¸­ç¼ºå°‘äº”è¡Œä¸­çš„å“ªä¸€è¡Œ(<strong>ä»¥å–œç”¨ç¥ä¸ºå‡†</strong>)ï¼Œç„¶åç”¨åä¸­å­—å°½é‡è¡¥é½ : <code>é‡‘ã€æœ¨ã€æ°´ã€ç«ã€åœŸ</code></p>
<p><strong>ä»¥ 2015å¹´10æœˆ11æ—¥13æ—¶30åˆ† ä¸ºä¾‹æŸ¥è¯¢æ£€éªŒåˆ¤æ–­äº”è¡Œå…«å­—</strong></p>
<p>ä»¥ä¸‹ç½‘å€æŸ¥è¯¢ç»“æœä¸€è‡´ :</p>
<ul>
<li><a href="http://www.sheup.com/shengchenbazi.php" target="_blank" rel="external">ä¸‰è—å…«å­—æŸ¥è¯¢</a></li>
<li><a href="http://www.zhyw.net/myweb/bz/bazi.htm" target="_blank" rel="external">å‘¨æ˜“ç½‘</a>  </li>
<li><a href="http://www.69jk.cn/tools/bazi/" target="_blank" rel="external">ä¸­å›½å¥åº·ç½‘</a></li>
</ul>
<p>ä»¥ä¸‹ç½‘å€æŸ¥è¯¢ç»“æœä¸€è‡´ :</p>
<ul>
<li><a href="http://www.meimingteng.com/Tool/Bazi.aspx" target="_blank" rel="external">ç¾åè…¾</a></li>
<li><a href="http://m.zhouyi.cc/bazi/xys/xiyongsheng.php" target="_blank" rel="external">æ˜“å®‰å±…ç®—å‘½ç½‘</a></li>
<li><a href="http://www.fututa.com/" target="_blank" rel="external">æµ®å›¾å¡”</a></li>
<li><a href="http://bazi.dosame.com/" target="_blank" rel="external">ç”Ÿè¾°å…«å­—å–œç”¨ç¥æŸ¥è¯¢</a></li>
<li><a href="http://sm.wonyoo.com" target="_blank" rel="external">ä¸­åå¿˜å¿§ç½‘</a></li>
</ul>
<blockquote>
<p> è¿™ç±»ç½‘å€å¾ˆå¤šï¼Œå¦‚ : <a href="http://www.meimingteng.com/Tool/Bazi.aspx" target="_blank" rel="external">ç¾åè…¾</a>ã€<a href="http://www.pcbaby.com.cn/tools/scbz/" target="_blank" rel="external">å¤ªå¹³æ´‹äº²å­ç½‘</a>ã€<a href="http://www.zhyw.net/myweb/bz/bazi.htm" target="_blank" rel="external">å‘¨æ˜“ç½‘</a>ã€<a href="http://www.69jk.cn/tools/bazi/" target="_blank" rel="external">ä¸­å›½å¥åº·ç½‘</a>ã€<a href="http://www.sheup.com/shengchenbazi.php" target="_blank" rel="external">ä¸‰è—å…«å­—æŸ¥è¯¢</a> ç­‰ç­‰ã€‚è¯·è‡ªè¡Œåˆ¤æ–­æŸ¥è¯¢ç»“æœå‡†ç¡®æ€§ã€‚</p>
<p>å‘¨æ˜“ç½‘ã€ä¸­å›½å¥åº·ç½‘ã€ä¸‰è—å…«å­—æŸ¥è¯¢ç»“æœ ä¸ è€çˆ·ä¹¦ ä¸€è‡´</p>
</blockquote>
<p><code>å–œç”¨ç¥</code>æŸ¥è¯¢ä½ ä¹Ÿå¯ä»¥å‚è€ƒå¦‚ä¸‹ç½‘å€æŸ¥è¯¢ï¼Œä½†å‡†ç¡®æ€§è¯·è‡ªè¡Œè£æ–­ã€‚</p>
<ul>
<li><a href="http://www.meimingteng.com/Tool/Bazi.aspx" target="_blank" rel="external">ç¾åè…¾</a></li>
<li><a href="http://m.zhouyi.cc/bazi/xys/xiyongsheng.php" target="_blank" rel="external">æ˜“å®‰å±…</a></li>
<li><a href="http://www.fututa.com/" target="_blank" rel="external">æµ®å›¾å¡”</a></li>
<li><a href="http://www.babyqiming.com/zybz/bz.php" target="_blank" rel="external">babyqimingå–œç”¨ç¥</a></li>
<li><a href="http://v.youku.com/v_show/id_XNDAwMTAwNDQ0.html" target="_blank" rel="external">ä¼˜é…·è§†é¢‘: æ€ä¹ˆæ ·ç®—å…«å­— ä»€ä¹ˆæ˜¯å…«å­—å–œç”¨ç¥ å››æŸ±</a></li>
</ul>
<h3 id="2-2-äº”è¡Œä¸ç¼ºçš„æƒ…å†µ"><a href="#2-2-äº”è¡Œä¸ç¼ºçš„æƒ…å†µ" class="headerlink" title="2.2 äº”è¡Œä¸ç¼ºçš„æƒ…å†µ"></a>2.2 äº”è¡Œä¸ç¼ºçš„æƒ…å†µ</h3><p>äº”è¡Œä¸ç¼ºçš„æƒ…å†µï¼Œå‚è§ <a href="http://baike.baidu.com/view/1373942.htm" target="_blank" rel="external">å–œç”¨ç¥</a>ã€‚<br>äº”è¡Œç¼ºå°‘çš„æƒ…å†µï¼Œå‚è§ <a href="http://baike.baidu.com/view/1373942.htm" target="_blank" rel="external">å–œç”¨ç¥</a>ï¼Œä½†åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œç¼ºå°‘çš„ä¸€ä¸ªå°±ä¸ºå®ƒçš„å–œç”¨ç¥ï¼Œå…·ä½“å‚è§å–œç”¨ç¥æŸ¥è¯¢ã€‚ </p>
<blockquote>
<p>å–œç”¨ç¥æŸ¥è¯¢ ä¸ å…«å­—äº”è¡Œ æŸ¥è¯¢ï¼Œè¯·ä»”ç»†è¾¨åˆ«æŸ¥è¯¢çš„ç»“æœå¯é æ€§ã€‚</p>
</blockquote>
<h2 id="3-å§“åç¬”ç”»å‰å‡¶"><a href="#3-å§“åç¬”ç”»å‰å‡¶" class="headerlink" title="3. å§“åç¬”ç”»å‰å‡¶"></a>3. å§“åç¬”ç”»å‰å‡¶</h2><blockquote>
<p>æ¨è 31 æˆ–è€… 23ç”»</p>
</blockquote>
<p>äºŒåä¸‰ç”»ã€€ã€€ã€€æ—­æ—¥å‡å¤©ï¼Œåæ˜¾å››æ–¹ï¼Œæ¸æ¬¡è¿›å±•ï¼Œç»ˆæˆå¤§ä¸šã€‚ã€€ã€€ï¼ˆå‰ï¼‰<br>ä¸‰åä¸€ç”»ã€€ã€€ã€€æ­¤æ•°å¤§å‰ï¼Œååˆ©åŒæ”¶ï¼Œæ¸è¿›å‘ä¸Šï¼Œå¤§ä¸šæˆå°±ã€‚ã€€ã€€ï¼ˆå‰ï¼‰</p>
<p><a href="http://blog.sina.com.cn/s/blog_4d4f386c0102vg9r.html" target="_blank" rel="external">è¯¦è§å§“åç¬”ç”»å‰å‡¶å¤§å…¨</a></p>
<blockquote>
<p>èµ·åä¸­ç”¨å­—çš„ç¬”ç”»æ•°å‚è§ <a href="http://tool.httpcn.com/KangXi/" target="_blank" rel="external">åº·å­å­—å…¸</a> (éç®€ä½“å­—æˆ–ç¹ä½“å­—)</p>
</blockquote>
<h2 id="4-æ‰‹æœºAPPçš„è¿ç”¨"><a href="#4-æ‰‹æœºAPPçš„è¿ç”¨" class="headerlink" title="4. æ‰‹æœºAPPçš„è¿ç”¨"></a>4. æ‰‹æœºAPPçš„è¿ç”¨</h2><ol>
<li>ç¾åè…¾æ™ºèƒ½èµ·å APP</li>
<li>â€¦</li>
</ol>
<blockquote>
<p>è¿ç”¨ç›¸å…³æ‰‹æœºappï¼Œå¯ä»¥æ›´æ–¹ä¾¿çš„è¾…åŠ©æƒ³å‡ºå¥½åå­—</p>
</blockquote>
<h2 id="5-å§“åæ‰“åˆ†æµ‹è¯•"><a href="#5-å§“åæ‰“åˆ†æµ‹è¯•" class="headerlink" title="5. å§“åæ‰“åˆ†æµ‹è¯•"></a>5. å§“åæ‰“åˆ†æµ‹è¯•</h2><p>æ‰“åˆ†æµ‹è¯•è¿™ç§ç½‘ç«™æ¯”è¾ƒå¤šï¼Œæ ¹æ®æˆ‘ä¸ªäººçš„ç»éªŒåˆ¤åˆ«æˆ‘æ¨è <a href="http://www.sheup.com/xingming_dafen.php" target="_blank" rel="external">ä¸‰è—ç½‘æ‰“åˆ†æµ‹è¯•</a>ï¼Œæ ¹æ®ä¸‰è—ç½‘æŸ¥è¯¢çš„ç»“æœï¼Œå¯ä»¥çœ‹åˆ° ä¸‰æ‰äº”æ ¼çš„è§£æä»¥åŠåº·ç†™å­—å…¸çš„ç¬”ç”»æ•°ç›®ç­‰ã€‚</p>
<hr>
<p>ä¸¾ä¾‹å¦‚ä¸‹ :</p>
<p><img src="/images/life/life-named-xin.png" alt="example"></p>
<h2 id="6-å°ç»“"><a href="#6-å°ç»“" class="headerlink" title="6. å°ç»“"></a>6. å°ç»“</h2><p>ç»¼ä¸Šæ‰€è¿°: èµ·åå­—åªéœ€è¦åœ¨åå­—ä¸­ï¼Œä½¿ç”¨å–œç”¨ç¥çš„å­— å¹¶ä¸” ä¸‰æ‰äº”æ ¼æ‰“åˆ† éƒ½æ¯”è¾ƒä¸é”™çš„æƒ…å†µä¸‹ï¼Œæ–¹ä¸ºå¥½åå­—ã€‚</p>
<blockquote>
<p>ä¸ªäººæ„è§ : åå­—è¿˜æ˜¯ é¡ºè€³ï¼Œè„±ä¿— çš„åå­—æ˜¯æœ€é‡è¦çš„ã€‚</p>
</blockquote>
<p><strong>èµ·åé€‰æ‹©å­—çš„æ–¹æ³•ä¸€å¦‚å¦‚ä¸‹å›¾ç‰‡æ‰€ç¤ºï¼Œå¯å‚è€ƒç™¾åº¦æœç´¢çš„å§“åå­¦</strong></p>
<p><img src="/images/life/life-named-searchword.png" alt="é€‰æ‹©å­—æ–¹æ³•å‚è§"></p>
<h2 id="7-Reference-article"><a href="#7-Reference-article" class="headerlink" title="7. Reference article"></a>7. Reference article</h2><ul>
<li><a href="http://www.zhyw.net/myweb/bz/bazi.htm" target="_blank" rel="external">å‘¨æ˜“ç½‘</a>  </li>
<li><a href="http://www.69jk.cn/tools/bazi/" target="_blank" rel="external">ä¸­å›½å¥åº·ç½‘</a></li>
<li><a href="http://www.meimingteng.com/Tool/Bazi.aspx" target="_blank" rel="external">ç¾åè…¾</a></li>
<li><a href="http://www.pcbaby.com.cn/tools/scbz/" target="_blank" rel="external">å¤ªå¹³æ´‹äº²å­ç½‘</a></li>
<li><a href="http://www.360doc.com/content/15/0313/16/15585030_454852610.shtml" target="_blank" rel="external">è§£æå››æŸ±å…«å­—çš„ç²¾é«“å–œç”¨ç¥</a>  </li>
<li><a href="http://www.babyqiming.com/zybz/bz.php" target="_blank" rel="external">ä¸ä¸€å®šå‡†ç¡®çš„å–œç”¨ç¥æŸ¥è¯¢</a></li>
<li><a href="http://www.chinesefortunecalendar.com/CAb5.htm" target="_blank" rel="external">å…«å­—äº”è¡Œç®—å‘½å’Œäººç”Ÿèµ·ä¼åœ–</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_4d4f386c0102vg9r.html" target="_blank" rel="external">è¯¦è§å§“åç¬”ç”»å‰å‡¶å¤§å…¨</a></li>
<li><a href="http://tool.httpcn.com/KangXi/" target="_blank" rel="external">åº·å­å­—å…¸</a></li>
<li><a href="http://www.sheup.com/xingming_dafen.php" target="_blank" rel="external">ä¸‰è—ç½‘</a></li>
<li><a href="http://www.7mingzi.com/hanziwuxing-zi-%E9%99%88/" target="_blank" rel="external">èµ·åç½‘</a></li>
<li>â€¦</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å…¬å†ï¼š****å¹´**æœˆ**æ—¥(æ˜ŸæœŸå››)11ç‚¹</span><br><span class="line">å†œå†ï¼šä¸™ç”³å¹´å››æœˆåä¸‰æ—¥åˆæ—¶</span><br><span class="line">æ˜¥èŠ‚ï¼š2æœˆ8æ—¥</span><br><span class="line">èŠ‚å‰ï¼šä¹™æœªå¹´</span><br><span class="line">èŠ‚åï¼šä¸™ç”³å¹´</span><br><span class="line">å…«å­—ï¼šä¸™ç”³ã€€ç™¸å·³ã€€è¾›ä¸‘ã€€ç”²åˆ</span><br><span class="line">äº”è¡Œï¼šç«é‡‘ã€€æ°´ç«ã€€é‡‘åœŸã€€æœ¨ç«</span><br><span class="line">æ–¹ä½ï¼šå—è¥¿ã€€åŒ—å—ã€€è¥¿ä¸­ã€€ä¸œå—</span><br><span class="line">ç”Ÿè‚–ï¼šçŒ´</span><br><span class="line">92 ä¸‰æ‰é…ç½® å‰ï¼Œ å¤©åœ°äººå¤–æ€»æ ¼ å¤§å‰  31ç”»</span><br><span class="line">é™ˆä¿Šå¦ƒ</span><br><span class="line">é™ˆä¿Šå¸†</span><br><span class="line">é™ˆæ³Šç¾Š</span><br><span class="line">é™ˆæ³Šäº¦</span><br><span class="line">é™ˆéŸ³ç«¹</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Python Data Mining and Analysis environment]]></title>
      <url>http://shopee.ai/2016/08/02/python/language/py-language-1-data-analysis-environment/</url>
      <content type="html"><![CDATA[<p>è¿™æ˜¯ç”¨ Python è¿›è¡Œæ•°æ®åˆ†ææŒ–æ˜çš„ä¸€å°éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ é«˜ç»´æ•°ç»„ã€æ•°å€¼è®¡ç®—ã€æœºå™¨å­¦ä¹ ã€ç¥ç»ç½‘ç»œ å’Œ è¯­è¨€æ¨¡å‹ç­‰ã€‚</p>
<a id="more"></a>
<h2 id="1-Python-data-analysis-intro"><a href="#1-Python-data-analysis-intro" class="headerlink" title="1. Python data analysis intro"></a>1. Python data analysis intro</h2><p><a href="http://www.python.org" target="_blank" rel="external">Python</a></p>
<ul>
<li>ä¼˜é›…çš„è¯­æ³•å’ŒåŠ¨æ€ç±»å‹</li>
<li>æ‹¥æœ‰é«˜çº§æ•°æ®ç»“æ„ã€OO</li>
<li>Functional Programming</li>
<li>è§£é‡Šæ€§ã€èƒ¶æ°´è¯­è¨€ï¼Œå¼€å‘æ•ˆç‡é«˜</li>
<li>åº“ä¸°å¯Œ, NumPy, SciPy, Matplotlib, Pandas</li>
<li>é€‚åˆäº Scientific Computingã€Mathematical Modelingã€Data mining â€¦</li>
</ul>
<p><strong>import <code>future</code> feature</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from __futrue__ import print_function</span><br><span class="line">from __futrue__ import division</span><br></pre></td></tr></table></figure>
<p><strong>install third package</strong></p>
<blockquote>
<p>ä¸‰ç§æ–¹å¼  </p>
<ol>
<li>ä¸‹è½½æºä»£ç è‡ªè¡Œå®‰è£… : å®‰è£…çµæ´»ï¼Œ ä½†éœ€è¦è‡ªè¡Œè§£å†³ä¸Šçº§ä¾èµ–é—®é¢˜ã€‚  </li>
<li>ç”¨ pip å®‰è£… : æ¯”è¾ƒæ–¹ä¾¿ï¼Œè‡ªåŠ¨è§£å†³ä¸Šçº§ä¾èµ–é—®é¢˜  </li>
<li>ç³»ç»Ÿè‡ªå¸¦çš„å®‰è£…æ–¹å¼ : apt-get or brew ..</li>
</ol>
</blockquote>
<h3 id="1-1-Install-pip"><a href="#1-1-Install-pip" class="headerlink" title="1.1 Install pip"></a>1.1 Install pip</h3><blockquote>
<p>pip æ˜¯å®‰è£…pythonåŒ…çš„å·¥å…·ï¼Œæä¾›äº†å®‰è£…åŒ…ï¼Œåˆ—å‡ºå·²ç»å®‰è£…çš„åŒ…ï¼Œå‡çº§åŒ…ä»¥åŠå¸è½½åŒ…çš„åŠŸèƒ½ã€‚<br>pip æ˜¯å¯¹easy_installçš„å–ä»£ï¼Œæä¾›äº†å’Œeasy_installç›¸åŒçš„æŸ¥æ‰¾åŒ…çš„åŠŸèƒ½</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">which</span> python</span><br><span class="line">wget https://bootstrap.pypa.io/get-pip.py</span><br><span class="line">sudo python get-pip.py</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä¿®æ”¹pipæº ï¼ˆå¯é€‰ï¼‰</span><br><span class="line">ç”±äºå¤©æœåŸå› ,ä½¿ç”¨pipå®‰è£…ä¸€äº›æ¨¡å—ä¼šç‰¹åˆ«æ…¢ç”šè‡³æ— æ³•ä¸‹è½½,å› æ­¤æˆ‘ä»¬éœ€è¦ä¿®æ”¹pipçš„æºåˆ°å›½å†…çš„ä¸€äº›é•œåƒåœ°å€.</span><br><span class="line">cd ~</span><br><span class="line">mkdir .pip</span><br><span class="line">vim pip.conf</span><br><span class="line">æ·»åŠ ä»¥ä¸‹ä¸¤è¡Œ</span><br><span class="line">[global]</span><br><span class="line">index-url = http://pypi.v2ex.com/simple</span><br><span class="line">æŠŠindex-urlçš„å€¼è®¾ç½®ä¸ºè‡ªå·±å®é™…æºçš„åœ°å€.</span><br><span class="line">è‡³æ­¤pipæºä¿®æ”¹æˆåŠŸ,ä»¥åä½¿ç”¨pipå®‰è£…æ¨¡å—æ—¶éƒ½ä¼šä»è¿™ä¸ªæºå»ä¸‹è½½å®‰è£….</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  tar.gz ll</span><br><span class="line">-rw-r--r-- 1 hp staff   1138794 Mar 11 16:09 pip-8.1.0.tar.gz</span><br><span class="line">-rw-r--r-- 1 hp staff    630700 Mar 11 13:38 setuptools-18.1.tar.gz</span><br><span class="line">tar -xvf setuptools-18.1.tar.gz</span><br><span class="line">tar -xvf pip-8.1.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> setuptools-18.1</span><br><span class="line">python setup.py build</span><br><span class="line">python setup.py install</span><br><span class="line"><span class="built_in">cd</span> pip-9.0.1/</span><br><span class="line">python setup.py build</span><br><span class="line">python setup.py install</span><br></pre></td></tr></table></figure>
<blockquote>
<p>9.0.1 è§ <a href="https://pypi.python.org/pypi/pip" target="_blank" rel="external">https://pypi.python.org/pypi/pip</a></p>
</blockquote>
<p><strong>ipython</strong></p>
<blockquote>
<p>sudo pip install â€“upgrade ipython â€“ignore-installed six<br>sudo pip install notebook</p>
</blockquote>
<p>startup ipython notebook</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ipython notebook</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">PYSPARK_DRIVER_PYTHON=ipython PYSPARK_DRIVER_PYTHON_OPTS=<span class="string">"notebook --ip=192.168.140.159"</span> $SPARK_HOME/bin/pyspark</span><br></pre></td></tr></table></figure>
<h2 id="2-Python-Tools-for-data-analysis"><a href="#2-Python-Tools-for-data-analysis" class="headerlink" title="2. Python Tools for data analysis"></a>2. Python Tools for data analysis</h2><table>
<thead>
<tr>
<th>Extension lib</th>
<th>introduction</th>
</tr>
</thead>
<tbody>
<tr>
<td>Numpy</td>
<td>æä¾›æ•°ç»„æ”¯æŒï¼Œä»¥åŠç›¸åº”çš„é«˜æ•ˆå¤„ç†å‡½æ•°</td>
</tr>
<tr>
<td>Scipy</td>
<td>æä¾›çŸ©é˜µæ”¯æŒï¼Œä»¥åŠçŸ©é˜µç›¸å…³çš„æ•°å€¼è®¡ç®—æ¨¡å—</td>
</tr>
<tr>
<td>Matplotlib</td>
<td>æ•°æ®å¯è§†åŒ–å·¥å…·ï¼Œä½œå›¾åº“</td>
</tr>
<tr>
<td>Pandas</td>
<td>æ•°æ®åˆ†æå’Œæ¢ç´¢å·¥å…·</td>
</tr>
<tr>
<td>StatsModels</td>
<td>ç»Ÿè®¡å»ºæ¨¡å’Œè®¡é‡ç»æµå­¦ï¼ŒåŒ…æ‹¬æè¿°ç»Ÿè®¡ï¼Œç»Ÿè®¡æ¨¡å‹ä¼°è®¡å’Œæ¨æ–­</td>
</tr>
<tr>
<td>Scikit-Learn</td>
<td>æ”¯æŒå›å½’ï¼Œåˆ†ç±»ï¼Œèšç±» ç­‰å¼ºå¤§çš„æœºå™¨å­¦ä¹ åº“</td>
</tr>
<tr>
<td>Keras</td>
<td>æ·±åº¦å­¦ä¹ åº“ï¼Œç”¨äºå»ºç«‹ç¥ç»ç½‘ç»œä»¥åŠ deep learning model</td>
</tr>
<tr>
<td>Gensim</td>
<td>ç”¨æ¥åš text topic model çš„åº“</td>
</tr>
<tr>
<td>Pillow</td>
<td>æ—§ç‰ˆçš„PIL, å›¾ç‰‡å¤„ç†ç›¸å…³</td>
</tr>
<tr>
<td>OpenCV</td>
<td>video å¤„ç†ç›¸å…³</td>
</tr>
<tr>
<td>GMPY2</td>
<td>é«˜ç²¾åº¦è®¡ç®—ç›¸å…³</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="2-1-Numpy"><a href="#2-1-Numpy" class="headerlink" title="2.1 Numpy"></a>2.1 Numpy</h3><p><a href="www.numpy.prg">Numpy</a> æä¾›äº†æ•°æ®åŠŸèƒ½, åç»­ Scipyã€Matplotlibã€Pandas ç­‰éƒ½ä¾èµ–äºå®ƒã€‚    </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sudo pip install numpy</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array([<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>])</span><br><span class="line"></span><br><span class="line">print(a)</span><br><span class="line">print(<span class="string">"hello world 3.0 !"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="2-2-Scipy"><a href="#2-2-Scipy" class="headerlink" title="2.2 Scipy"></a>2.2 Scipy</h3><blockquote>
<p>Numpy æä¾›äº†å¤šç»´æ•°æ®åŠŸèƒ½ï¼Œä½†å®ƒåªæ˜¯æ•°ç»„ï¼Œå¹¶ä¸æ˜¯çŸ©é˜µã€‚Scipy æä¾›äº†çœŸæ­£çš„çŸ©é˜µï¼Œä»¥åŠå¤§é‡çŸ©é˜µè¿ç®—çš„å¯¹è±¡å’Œå‡½æ•°ã€‚<br>Scipy ä¾èµ–äº Numpy</p>
</blockquote>
<h3 id="2-3-Matplotlib"><a href="#2-3-Matplotlib" class="headerlink" title="2.3 Matplotlib"></a>2.3 Matplotlib</h3><blockquote>
<p>è‘—åçš„ç»˜å›¾åº“ï¼Œä¸»è¦ç”¨äºäºŒç»´ç»˜å›¾ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è¿›è¡Œä¸‰ç»´ç»˜å›¾ã€‚<br>sudo pip install matplotlib </p>
</blockquote>
<h3 id="2-4-Pandas"><a href="#2-4-Pandas" class="headerlink" title="2.4 Pandas"></a>2.4 Pandas</h3><p>Pandas æ˜¯ Python ä¸‹æœ€å¼ºå¤§çš„æ•°æ®åˆ†æ Toolï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚Pandas æ„å»ºåœ¨ Numpy ä¹‹ä¸Šã€‚  </p>
<p><strong>Pandas Function</strong></p>
<ol>
<li>ç±»SQLï¼ŒCRUD</li>
<li>æ•°æ®å¤„ç†å‡½æ•°</li>
<li>æ—¶é—´åºåˆ—åˆ†æåŠŸèƒ½</li>
<li>çµæ´»å¤„ç†ç¼ºå¤±æ•°æ®</li>
</ol>
<blockquote>
<p>sudo pip install pandas<br>sudo pip install xlrd<br>sudo pip install xlwt<br>ã€Šåˆ©ç”¨pythonè¿›è¡Œæ•°æ®åˆ†æã€‹è®²è§£è¯¦ç»†ï¼Œé’ˆå¯¹ Pandasã€‚  </p>
</blockquote>
<p>Pandas åŸºæœ¬çš„æ•°æ®ç»“æ„æ˜¯ : Series å’Œ DataFrame (å®ƒçš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸€ä¸ªSeries)ã€‚æ¯ä¸ª Series éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„ Indexï¼Œç”¨æ¥æ ‡è®°å…ƒã€‚(Indexç±»ä¼¼äº SQL ä¸»é”®)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">s = pd.Series([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]) <span class="comment"># åˆ›å»ºä¸€ä¸ªåºåˆ— s</span></span><br><span class="line">d2 = pd.DataFrame(s)</span><br><span class="line"></span><br><span class="line">d = pd.DataFrame([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]], columns=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]) <span class="comment"># åˆ›å»ºä¸€ä¸ª table</span></span><br><span class="line"></span><br><span class="line">d.head() <span class="comment"># é»˜è®¤é¢„è§ˆå‰ 5 è¡Œ</span></span><br><span class="line"></span><br><span class="line">d.describe() <span class="comment"># æ•°æ®åŸºæœ¬ç»Ÿè®¡é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–æ–‡ä»¶</span></span><br><span class="line">pd.read_excel(<span class="string">'data.xls'</span>) <span class="comment"># è¯»å– Excel æ–‡ä»¶, åˆ›å»º DataFrame.</span></span><br><span class="line"><span class="comment"># pd.read_csv('data.csv', encoding='utf-8') # è¯»å–æ–‡æœ¬, ä¸€èˆ¬æŒ‡å®š encoding</span></span><br></pre></td></tr></table></figure>
<h3 id="2-5-StatsModels"><a href="#2-5-StatsModels" class="headerlink" title="2.5 StatsModels"></a>2.5 StatsModels</h3><blockquote>
<p>StatsModels ä¸»è¦æ˜¯å¯¹ï¼Œæ•°æ®çš„è¯»å–ã€å¤„ç†ã€æ¢ç´¢ï¼Œæ›´åŠ æ³¨é‡æ•°æ®çš„ç»Ÿè®¡å»ºæ¨¡åˆ†æï¼Œæœ‰ R è¯­è¨€å‘³é“ã€‚<br>StatsModels ä¸ Pandas ç»“åˆ, æˆä¸º Python ä¸‹å¼ºå¤§çš„æ•°æ®æŒ–æ˜ç»„åˆã€‚<br>sudo pip install StatsModels</p>
</blockquote>
<h3 id="2-6-Scikit-Learn"><a href="#2-6-Scikit-Learn" class="headerlink" title="2.6 Scikit-Learn"></a>2.6 Scikit-Learn</h3><blockquote>
<p>Scikit-Learn å¼ºå¤§çš„ ML å·¥å…·åŒ…ã€‚åŒ…æ‹¬ æ•°æ®é¢„å¤„ç†ã€åˆ†ç±»ã€å›å½’ã€èšç±»ã€é¢„æµ‹ å’Œ æ¨¡å‹åˆ†æç­‰ã€‚<br>Scikit-Learn ä¾èµ–äº Numpyã€Scipyã€Matplotlibã€‚</p>
</blockquote>
<p><strong>install</strong></p>
<p>pip install scikit-learn ç”¨ pip å®‰è£…è¿™ä¸ªåŒ…ä¹‹åï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ä¼šå‡ºç° ValueError: numpy.dtype has the wrong ç­‰é”™è¯¯ã€‚</p>
<p><strong>solution fun</strong></p>
<p>sudo pip install cython<br>git clone <a href="https://github.com/scikit-learn/scikit-learn" target="_blank" rel="external">https://github.com/scikit-learn/scikit-learn</a><br>sudo make<br>sudo python setup.py install</p>
<blockquote>
<p>ä¸å®‰è£… cython ï¼Œå®‰è£… scikit-learn ä¼šæŠ¥é”™ã€‚<br>è¿™ç§æ–¹å¼ å®‰è£… scikit-learn è¿‡ç¨‹ä¸­çš„ä¸€äº›é”™è¯¯æˆ–è­¦å‘Šä¸éœ€è¦ç®¡ã€‚å®‰è£…å®Œæˆæµ‹è¯•ä½¿ç”¨æ­£å¸¸<br>pip list<br>scikit-learn (0.18.dev0)<br>scipy (0.13.0b1)</p>
</blockquote>
<h3 id="2-7-Keras"><a href="#2-7-Keras" class="headerlink" title="2.7 Keras"></a>2.7 Keras</h3><blockquote>
<p>ç¥ç»ç½‘ç»œmodel</p>
</blockquote>
<h3 id="2-8-Gensim"><a href="#2-8-Gensim" class="headerlink" title="2.8 Gensim"></a>2.8 Gensim</h3><blockquote>
<p>topic modelling for humansï¼NLP</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Elasticsearch installation plugins]]></title>
      <url>http://shopee.ai/2016/05/17/elasticsearch/es-install-plugins/</url>
      <content type="html"><![CDATA[<p> Elasticsearch æ‰©å±•æ€§éå¸¸å¥½ï¼Œæœ‰å¾ˆå¤šå®˜æ–¹å’Œç¬¬ä¸‰æ–¹å¼€å‘çš„æ’ä»¶</p>
<a id="more"></a>
<h2 id="1-Elasticsearch-Install"><a href="#1-Elasticsearch-Install" class="headerlink" title="1. Elasticsearch-Install"></a>1. Elasticsearch-Install</h2><p>å®˜ç½‘ : <a href="https://www.elastic.co/" target="_blank" rel="external">https://www.elastic.co/</a></p>
<p><strong>Install es</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">download elasticsearch-1.7.5.tar.gz</span><br><span class="line">cd usr/local/mySoft/deploy</span><br><span class="line">tar -xvf elasticsearch-1.7.5.tar.gz</span><br><span class="line">ln -s /usr/local/mySoft/deploy/elasticsearch-1.7.5/ elasticsearch</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">vim ~/.zshrc</span><br><span class="line">export ES_HOME=/usr/local/xSoft/elasticsearch</span><br></pre></td></tr></table></figure>
<p><strong>Config es</strong></p>
<p>$ES_HOME/config/elasticsearch.yml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cluster.name: elasticsearch_x</span><br><span class="line">node.name=test-node1</span><br></pre></td></tr></table></figure>
<p><strong>Startup</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./bin/elasticsearch</span><br><span class="line"></span><br><span class="line">./bin/elasticsearch -d -Xms512m -Xmx512m</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿è¡Œä¹‹åï¼Œä¼šäº§ç”Ÿ data å’Œ logs ç›®å½•</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ  elasticsearch ll</span><br><span class="line">total 28</span><br><span class="line">-rw-r--r--  1 hp staff 11358 Feb  2 17:24 LICENSE.txt</span><br><span class="line">-rw-r--r--  1 hp staff   150 Feb  2 17:24 NOTICE.txt</span><br><span class="line">-rw-r--r--  1 hp staff  8700 Feb  2 17:24 README.textile</span><br><span class="line">drwxr-xr-x 14 hp staff   476 May 26 15:42 bin/</span><br><span class="line">drwxr-xr-x  4 hp staff   136 May 27 11:03 config/</span><br><span class="line">drwxr-xr-x  3 hp staff   102 May 26 11:01 data/</span><br><span class="line">drwxr-xr-x 26 hp staff   884 May 26 09:58 lib/</span><br><span class="line">drwxr-xr-x  7 hp staff   238 May 27 09:58 logs/</span><br><span class="line">drwxr-xr-x  7 hp staff   238 May 27 10:48 plugins/</span><br><span class="line">âœ  elasticsearch</span><br></pre></td></tr></table></figure>
<p><strong>Verify</strong></p>
<p>open <a href="http://ip:9200/" target="_blank" rel="external">http://ip:9200/</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"status"</span> : <span class="number">200</span>,</span><br><span class="line">  <span class="attr">"name"</span> : <span class="string">"node01"</span>,</span><br><span class="line">  <span class="attr">"cluster_name"</span> : <span class="string">"elasticsearch_x"</span>,</span><br><span class="line">  <span class="attr">"version"</span> : &#123;</span><br><span class="line">    <span class="attr">"number"</span> : <span class="string">"1.7.5"</span>,</span><br><span class="line">    <span class="attr">"build_hash"</span> : <span class="string">"00f95f4ffca6de89d68b7ccaf80d148f1f70e4d4"</span>,</span><br><span class="line">    <span class="attr">"build_timestamp"</span> : <span class="string">"2016-02-02T09:55:30Z"</span>,</span><br><span class="line">    <span class="attr">"build_snapshot"</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"lucene_version"</span> : <span class="string">"4.10.4"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"tagline"</span> : <span class="string">"You Know, for Search"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-Elasticsearch-Head"><a href="#2-Elasticsearch-Head" class="headerlink" title="2. Elasticsearch-Head"></a>2. Elasticsearch-Head</h2><p>ElasticSearch-Head æ˜¯ä¸€ä¸ªä¸Elasticé›†ç¾¤ï¼ˆClusterï¼‰ç›¸äº¤äº’çš„ Web å‰å°ã€‚</p>
<p><img src="/images/elastic/es-header.png" alt="header.png"></p>
<p>ES-Headçš„ä¸»è¦ä½œç”¨</p>
<ul>
<li>å®ƒå±•ç°ESé›†ç¾¤çš„æ‹“æ‰‘ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å®ƒæ¥è¿›è¡Œç´¢å¼•ï¼ˆIndexï¼‰å’ŒèŠ‚ç‚¹ï¼ˆNodeï¼‰çº§åˆ«çš„æ“ä½œ</li>
<li>å®ƒæä¾›ä¸€ç»„é’ˆå¯¹é›†ç¾¤çš„æŸ¥è¯¢APIï¼Œå¹¶å°†ç»“æœä»¥jsonå’Œè¡¨æ ¼å½¢å¼è¿”å›</li>
<li>å®ƒæä¾›ä¸€äº›å¿«æ·èœå•ï¼Œç”¨ä»¥å±•ç°é›†ç¾¤çš„å„ç§çŠ¶æ€</li>
</ul>
<p><strong>Install-Verify</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">elasticsearch/bin/plugin install mobz/elasticsearch-head</span><br><span class="line">open ip:9200/_plugin/head/</span><br><span class="line">open ip:9200/_cluster/health?pretty</span><br></pre></td></tr></table></figure>
<h2 id="3-Elasticsearch-Kopf"><a href="#3-Elasticsearch-Kopf" class="headerlink" title="3. Elasticsearch-Kopf"></a>3. Elasticsearch-Kopf</h2><p>Kopfæ˜¯ä¸€ä¸ªElasticSearchçš„ç®¡ç†å·¥å…·ï¼Œå®ƒä¹Ÿæä¾›äº†å¯¹ESé›†ç¾¤æ“ä½œçš„APIã€‚</p>
<p><img src="/images/elastic/es-kopf.png" alt="613455-20160224102628443-1084839027.png"></p>
<p><strong>Install-Verify</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./elasticsearch/bin/plugin install lmenezes/elasticsearch-kopf/&#123;branch|version&#125;</span><br><span class="line">open http://localhost:9200/_plugin/kopf</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="4-Elasticsearch-bigdesk"><a href="#4-Elasticsearch-bigdesk" class="headerlink" title="4. Elasticsearch-bigdesk"></a>4. Elasticsearch-bigdesk</h2><p>Bigdeskä¸ºElasticé›†ç¾¤æä¾›åŠ¨æ€çš„å›¾è¡¨ä¸ç»Ÿè®¡æ•°æ®ã€‚</p>
<p><img src="/images/elastic/es-bigdesk.jpeg" alt="613455-20160224102646365-1432943551.jpg"></p>
<p><strong>Install-Verify</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bin/plugin -install lukas-vlcek/bigdesk</span><br><span class="line">åˆ é™¤bin/plugin --remove bigdesk</span><br><span class="line">open ip:9200/_plugin/bigdesk</span><br><span class="line">open ip:9200/_cluster/state?pretty</span><br></pre></td></tr></table></figure>
<h2 id="5-Elasticsearch-service"><a href="#5-Elasticsearch-service" class="headerlink" title="5. Elasticsearch-service"></a>5. Elasticsearch-service</h2><p>elasticsearch ä½œä¸ºä¸€ä¸ªç³»ç»Ÿserviceåº”ç”¨ ï¼Œå¯ä»¥å®‰è£…elasticsearch-servicewrapperæ’ä»¶</p>
<p><a href="https://github.com/elastic/elasticsearch-servicewrapper" target="_blank" rel="external">github-es-service</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/elasticsearch/elasticsearch-servicewrapper</span><br><span class="line"></span><br><span class="line">ä¸‹è½½è¯¥æ’ä»¶åï¼Œè§£å‹ç¼©ã€‚å°†serviceç›®å½•æ‹·è´åˆ°elasticsearchå®‰è£…ç›®å½•çš„binç›®å½•ä¸‹ã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ  service ll</span><br><span class="line">total 76</span><br><span class="line">-rwxr-xr-x  1 hp staff 55710 May 26 15:42 elasticsearch*</span><br><span class="line">-rw-r--r--  1 hp staff  2610 May 26 15:42 elasticsearch.bat</span><br><span class="line">-rw-r--r--  1 hp staff  4754 May 26 15:42 elasticsearch.conf</span><br><span class="line">-rwxr-xr-x  1 hp staff    64 May 26 15:42 elasticsearch32*</span><br><span class="line">-rwxr-xr-x  1 hp staff    64 May 26 15:42 elasticsearch64*</span><br><span class="line">drwxr-xr-x 16 hp staff   544 May 26 15:42 exec/</span><br><span class="line">drwxr-xr-x 17 hp staff   578 May 26 15:42 lib/</span><br><span class="line">âœ  service</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œè¿™ä¸ªæ’ä»¶çš„å¥½å¤„æ˜¯ï¼šelasticsearch éœ€è¦çš„jvmå‚æ•°å’Œå…¶å®ƒé…ç½®éƒ½å·²ç»é…ç½®å¥½äº†ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sh elasticsearch start;</span><br><span class="line">sh elasticsearch restart;</span><br><span class="line">sh elasticsearch stop;</span><br></pre></td></tr></table></figure>
<p>åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¯¥æ’ä»¶åŸºæœ¬æŠŠå‚æ•°éƒ½é…ç½®å¥½äº†ã€‚æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ä¸€ä¸‹jvmåˆ†é…çš„å†…å­˜ç©ºé—´å°±å¥½äº†ï¼Œå¦‚ :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set.default.ES_HEAP_SIZE=16384</span><br><span class="line">set.default.ES_MIN_MEM=16384</span><br><span class="line">set.default.ES_MAX_MEM=19660</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¬¬ä¸€æ¬¡è¿è¡Œ elaticsearch ä¼šäº§ç”Ÿ data-dir ä¸ log-dir</p>
<p>service log åœ¨ logs/service.log ä¸­ã€‚</p>
<p><a href="https://github.com/elastic/elasticsearch-servicewrapper" target="_blank" rel="external">more_info-service</a></p>
<p>Mac OS X Mountain Lion missing 32-bit Java<br>apple 6 maybe could</p>
</blockquote>
<hr>
<h2 id="6-Http-basic-server-plugin"><a href="#6-Http-basic-server-plugin" class="headerlink" title="6. Http-basic-server-plugin"></a>6. Http-basic-server-plugin</h2><p>ä¸è¦è£¸å¥”ï¼Œç©¿ä¸€å¥—æ¯”åŸºå°¼å§ã€‚</p>
<p>åšä¸€ä¸ªç®€å•çš„HTTPè®¤è¯ï¼Œelasticsearch-http-basic æä¾›äº†é’ˆå¯¹ ES HTTP è¿æ¥ çš„ IPç™½åå•ã€å¯†ç æƒé™ å’Œ  ä¿¡ä»»ä»£ç†åŠŸèƒ½ã€‚</p>
<p>github :<br><a href="https://github.com/Asquera/elasticsearch-http-basic" target="_blank" rel="external">Asquera_http_basic</a></p>
<p><strong>Install-Verify</strong></p>
<p>elasticsearch-http-basicè¿˜ä¸æ”¯æŒESæ ‡å‡†çš„bin/plugin install [github-name]/[repo-name]çš„å®‰è£…æ–¹å¼, æ‰€ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼å®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir -p plugins/http-basic; </span><br><span class="line">mv elasticsearch-http-basic-1.5.1.jar plugins/http-basic</span><br></pre></td></tr></table></figure>
<p><strong>Config http-basic param</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http.basic.enabled: true</span><br><span class="line">http.basic.user: &quot;admin&quot;</span><br><span class="line">http.basic.password: &quot;admin&quot;</span><br><span class="line">http.basic.ipwhitelist: [&quot;localhost&quot;, &quot;127.0.0.1&quot;]</span><br><span class="line">http.basic.trusted_proxy_chains: []</span><br><span class="line">http.basic.log: true</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="7-Elasticsearch-sql"><a href="#7-Elasticsearch-sql" class="headerlink" title="7. Elasticsearch-sql"></a>7. Elasticsearch-sql</h2><p><img src="/images/elastic/es-sql.jpeg" alt="å›¾ç‰‡æè¿°"></p>
<p><strong>install</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./plugin -u https://github.com/NLPchina/elasticsearch-sql/releases/download/1.4.5/elasticsearch-sql-1.4.5.zip --install sql</span><br></pre></td></tr></table></figure>
<p><strong>Verify</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">open http://node01:9200/_plugin/sql/</span><br></pre></td></tr></table></figure>
<p><strong>./bin/plugin â€“list</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ  elasticsearch ./bin/plugin --list</span><br><span class="line">Installed plugins:</span><br><span class="line">    - bigdesk</span><br><span class="line">    - head</span><br><span class="line">    - http-basic</span><br><span class="line">    - jdbc</span><br><span class="line">    - kopf</span><br><span class="line">    - license</span><br><span class="line">    - shield</span><br><span class="line">    - sql</span><br></pre></td></tr></table></figure>
<h2 id="8-Elasticsearch-jdbc"><a href="#8-Elasticsearch-jdbc" class="headerlink" title="8. Elasticsearch-jdbc"></a>8. Elasticsearch-jdbc</h2><p>å…³ç³»å‹æ•°æ®åº“çš„åŒæ­¥æ’ä»¶</p>
<p><strong>install</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./plugin --install jdbc --url http://xbib.org/repository/org/xbib/elasticsearch/plugin/elasticsearch-river-jdbc/1.5.0.5/elasticsearch-river-jdbc-1.5.0.5-plugin.zip</span><br></pre></td></tr></table></figure>
<p>download and add mysql-driver</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -o mysql-connector-java-5.1.33.zip -L &apos;http://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.33.zip/from/http://cdn.mysql.com/&apos;</span><br><span class="line"></span><br><span class="line">cp mysql-connector-java-5.1.33-bin.jar $ES_HOME/plugins/jdbc/</span><br><span class="line"></span><br><span class="line">chmod 644 $ES_HOME/plugins/jdbc/*</span><br></pre></td></tr></table></figure>
<p>åœæ­¢river</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -XDELETE &apos;localhost:9200/_river/my_jdbc_river/&apos;</span><br></pre></td></tr></table></figure>
<p><strong>Verify</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">open http://node01:9200/_nodes/node01/plugins?pretty=true</span><br></pre></td></tr></table></figure>
<h2 id="9-Basic-operation"><a href="#9-Basic-operation" class="headerlink" title="9. Basic operation"></a>9. Basic operation</h2><p><strong>æŸ¥çœ‹è¯¥èŠ‚ç‚¹å®‰è£…çš„æ‰€æœ‰æ’ä»¶åˆ—è¡¨</strong></p>
<p><strong><em><a href="http://node01:9200/_nodes/node01/plugins?pretty=true" target="_blank" rel="external">http://node01:9200/_nodes/node01/plugins?pretty=true</a></em></strong></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"cluster_name"</span> : <span class="string">"elasticsearch_x"</span>,</span><br><span class="line">  <span class="attr">"nodes"</span> : &#123;</span><br><span class="line">    <span class="attr">"nSitXzd8QvSxQRz3mni3BA"</span> : &#123;</span><br><span class="line">      <span class="attr">"name"</span> : <span class="string">"node01"</span>,</span><br><span class="line">      <span class="attr">"transport_address"</span> : <span class="string">"inet[/192.168.181.35:9300]"</span>,</span><br><span class="line">      <span class="attr">"host"</span> : <span class="string">"unix.local"</span>,</span><br><span class="line">      <span class="attr">"ip"</span> : <span class="string">"192.168.181.35"</span>,</span><br><span class="line">      <span class="attr">"version"</span> : <span class="string">"1.7.5"</span>,</span><br><span class="line">      <span class="attr">"build"</span> : <span class="string">"00f95f4"</span>,</span><br><span class="line">      <span class="attr">"http_address"</span> : <span class="string">"inet[/192.168.181.35:9200]"</span>,</span><br><span class="line">      <span class="attr">"plugins"</span> : [ &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"sql"</span>,</span><br><span class="line">        <span class="attr">"version"</span> : <span class="string">"1.4.5"</span>,</span><br><span class="line">        <span class="attr">"description"</span> : <span class="string">"Use sql to query elasticsearch."</span>,</span><br><span class="line">        <span class="attr">"url"</span> : <span class="string">"/_plugin/sql/"</span>,</span><br><span class="line">        <span class="attr">"jvm"</span> : <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"site"</span> : <span class="literal">true</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"http-basic-server-plugin"</span>,</span><br><span class="line">        <span class="attr">"version"</span> : <span class="string">"NA"</span>,</span><br><span class="line">        <span class="attr">"description"</span> : <span class="string">"HTTP Basic Server Plugin"</span>,</span><br><span class="line">        <span class="attr">"jvm"</span> : <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"site"</span> : <span class="literal">false</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"bigdesk"</span>,</span><br><span class="line">        <span class="attr">"version"</span> : <span class="string">"NA"</span>,</span><br><span class="line">        <span class="attr">"description"</span> : <span class="string">"No description found."</span>,</span><br><span class="line">        <span class="attr">"url"</span> : <span class="string">"/_plugin/bigdesk/"</span>,</span><br><span class="line">        <span class="attr">"jvm"</span> : <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">"site"</span> : <span class="literal">true</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"head"</span>,</span><br><span class="line">        <span class="attr">"version"</span> : <span class="string">"NA"</span>,</span><br><span class="line">        <span class="attr">"description"</span> : <span class="string">"No description found."</span>,</span><br><span class="line">        <span class="attr">"url"</span> : <span class="string">"/_plugin/head/"</span>,</span><br><span class="line">        <span class="attr">"jvm"</span> : <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">"site"</span> : <span class="literal">true</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"kopf"</span>,</span><br><span class="line">        <span class="attr">"version"</span> : <span class="string">"1.5.7-SNAPSHOT"</span>,</span><br><span class="line">        <span class="attr">"description"</span> : <span class="string">"kopf - simple web administration tool for ElasticSearch"</span>,</span><br><span class="line">        <span class="attr">"url"</span> : <span class="string">"/_plugin/kopf/"</span>,</span><br><span class="line">        <span class="attr">"jvm"</span> : <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">"site"</span> : <span class="literal">true</span></span><br><span class="line">      &#125; ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>XPUT data</strong></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">curl -u admin:admin -XPUT http://node01:9200/megacorp/employee/1 -d '</span><br><span class="line"> &#123;</span><br><span class="line">     "first_name" : "John",</span><br><span class="line">     "last_name" :  "Smith",</span><br><span class="line">     "age" :        25,</span><br><span class="line">     "about" :      "I love to go rock climbing",</span><br><span class="line">     "interests": [ "sports", "music" ]</span><br><span class="line"> &#125;'</span><br></pre></td></tr></table></figure>
<p><strong>XGET data</strong></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">curl -XGET 'localhost:9200/_count?pretty' -d '</span><br><span class="line"> &#123;</span><br><span class="line">     "query": &#123;</span><br><span class="line">         "match_all": &#123;&#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;'</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"count"</span> : <span class="number">1</span>,</span><br><span class="line">  <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">    <span class="attr">"total"</span> : <span class="number">5</span>,</span><br><span class="line">    <span class="attr">"successful"</span> : <span class="number">5</span>,</span><br><span class="line">    <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-Reference-article"><a href="#10-Reference-article" class="headerlink" title="10. Reference article"></a>10. Reference article</h2><ol>
<li><a href="http://www.cnblogs.com/richaaaard/p/5212044.html" target="_blank" rel="external">csdn-004-Elasticsearchæ’ä»¶çš„ä»‹ç»</a></li>
<li><a href="http://blog.csdn.net/shenfuli/article/details/49094935" target="_blank" rel="external">æ’ä»¶å®‰è£…Headã€Kopfä¸Bigdesk</a></li>
<li><a href="http://www.chepoo.com/elasticsearch-service-install.html" target="_blank" rel="external">chepoo.com/elasticsearch-service</a></li>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-service.html" target="_blank" rel="external">elastic.co/guide/</a></li>
<li><a href="https://github.com/NLPchina/elasticsearch-sql" target="_blank" rel="external">NLPchina/elasticsearch-sql</a></li>
<li><a href="https://github.com/elasticfence/elasticsearch-http-user-auth" target="_blank" rel="external">elasticsearch-http-user-auth</a> (è¿™ä¸ªæˆ‘æ²¡æœ‰ä½¿ç”¨)</li>
<li><a href="http://guoze.me/2015/05/28/elasticsearch-http-basic-authentication/" target="_blank" rel="external">å»ºé€ è€…è¯´</a></li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Elasticsearch * å…¥é—¨]]></title>
      <url>http://shopee.ai/2016/05/17/elasticsearch/es-indoor/</url>
      <content type="html"><![CDATA[<p>Elasticsearch æ˜¯ä¸€ä¸ªåŸºäºApache Lucene(TM)çš„å¼€æºæœç´¢å¼•æ“ ã€ å®æ—¶åˆ†å¸ƒå¼æœç´¢ å’Œ åˆ†æå¼•æ“ã€‚</p>
<a id="more"></a>
<blockquote>
<p>Lucene æ˜¯ æˆç†Ÿçš„<code>å…¨æ–‡ç´¢å¼•ä¸ä¿¡æ¯æ£€ç´¢(IR)åº“</code>ï¼Œé‡‡ç”¨Javaå®ç°ã€‚ä¿¡æ¯æ£€ç´¢å¼æŒ‡æ–‡æ¡£æœç´¢ã€æ–‡æ¡£å†…ä¿¡æ¯æœç´¢æˆ–è€…æ–‡æ¡£ç›¸å…³çš„å…ƒæ•°æ®æœç´¢ç­‰æ“ä½œã€‚ã€‚</p>
<p>Solræ˜¯ä¸€ä¸ªåŸºäºLucene <code>javaåº“çš„ä¼ä¸šçº§æœç´¢æœåŠ¡å™¨</code>ï¼ŒåŒ…å«XML/HTTPï¼ŒJSON APIï¼Œé«˜äº®æŸ¥è¯¢ç»“æœï¼Œç¼“å­˜ï¼Œå¤åˆ¶ï¼Œè¿˜æœ‰ä¸€ä¸ªWEBç®¡ç†ç•Œé¢ã€‚Solrè¿è¡Œåœ¨Servletå®¹å™¨ä¸­</p>
<p>2010 å¹´ Elasticsearch å‡ºç°å…¬å¼€ç‰ˆæœ¬</p>
</blockquote>
<p><strong>Elasticsearch æ¶‰åŠçš„æŠ€æœ¯</strong></p>
<ul>
<li>å…¨æ–‡æœç´¢</li>
<li>åˆ†æç³»ç»Ÿ</li>
<li>åˆ†å¸ƒå¼æ•°æ®åº“</li>
</ul>
<p><strong>è°åœ¨ä½¿ç”¨ Elasticsearch?</strong></p>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/Wikipedia:%E9%A6%96%E9%A1%B5" target="_blank" rel="external">ç»´åŸºç™¾ç§‘</a></li>
<li><a href="http://stackoverflow.com/" target="_blank" rel="external">StackOverflow</a></li>
<li><a href="https://github.com/libean" target="_blank" rel="external">Github</a><br>â€¦</li>
</ul>
<h2 id="1-æ¦‚å¿µ"><a href="#1-æ¦‚å¿µ" class="headerlink" title="1. æ¦‚å¿µ"></a>1. æ¦‚å¿µ</h2><p>Elasticsearch æ˜¯ å¼€æºæœç´¢å¼•æ“.</p>
<p><strong>Elasticsearch ä¸ä»…æ˜¯å…¨æ–‡æœç´¢ï¼Œè¿˜æ˜¯ï¼š</strong></p>
<ul>
<li>åˆ†å¸ƒå¼ å®æ—¶æ–‡ä»¶å­˜å‚¨ï¼Œæ¯ä¸ªå­—æ®µéƒ½è¢«ç´¢å¼•å¹¶å¯è¢«æœç´¢</li>
<li>åˆ†å¸ƒå¼ å®æ—¶åˆ†ææœç´¢å¼•æ“</li>
<li>å¯æ‰©å±•æœåŠ¡å™¨ï¼Œå¤„ç†<strong>PB</strong>çº§ç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ•°æ®</li>
</ul>
<p>è¿™äº›åŠŸèƒ½è¢«é›†æˆåˆ°ä¸€ä¸ªæœåŠ¡é‡Œé¢ï¼Œåº”ç”¨å¯é€šè¿‡ <code>RESTful API</code>ã€å„ç§è¯­è¨€çš„<code>å®¢æˆ·ç«¯</code>ã€<code>å‘½ä»¤è¡Œ</code> ä¸ä¹‹äº¤äº’ã€‚</p>
<p>Elasticsearchä¹Ÿä½¿ç”¨Javaå¼€å‘å¹¶ä½¿ç”¨Luceneä½œä¸ºå…¶æ ¸å¿ƒæ¥å®ç°æ‰€æœ‰ç´¢å¼•å’Œæœç´¢çš„åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒçš„ç›®çš„æ˜¯é€šè¿‡ç®€å•çš„<code>RESTful API</code>æ¥éšè—Luceneçš„å¤æ‚æ€§ï¼Œä»è€Œè®©å…¨æ–‡æœç´¢å˜å¾—ç®€å•ã€‚</p>
<p><a href="http://es.xiaoleilu.com/010_Intro/10_Installing_ES.html" target="_blank" rel="external">more_info_install_elaticsearch</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[deploy@node196 config]$ ll</span><br><span class="line">total 20</span><br><span class="line">-rw-rw-r--  1 deploy deploy 13915 May 10 10:02 elasticsearch.yml</span><br><span class="line">-rw-rw-r--. 1 deploy deploy  2054 Jul 16  2015 logging.yml</span><br><span class="line">[deploy@node196 config]$ pwd</span><br><span class="line">/home/deploy/elasticsearch-1.7.1/config</span><br></pre></td></tr></table></figure>
<p><strong>ç¼–è¾‘ elasticsearch.yml</strong> </p>
<p>æ›¿ä»£cluster.nameçš„é»˜è®¤å€¼ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢ä¸€ä¸ªæ–°å¯åŠ¨çš„èŠ‚ç‚¹åŠ å…¥åˆ°ç›¸åŒç½‘ç»œä¸­çš„å¦ä¸€ä¸ªåŒåçš„é›†ç¾¤ä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cluster.name: elasticsearch_your-company-name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#################################### Node #####################################</span><br><span class="line"></span><br><span class="line"># Node names are generated dynamically on startup, so you&apos;re relieved</span><br><span class="line"># from configuring them manually. You can tie this node to a specific name:</span><br><span class="line">#</span><br><span class="line">node.name: &quot;node196&quot;</span><br></pre></td></tr></table></figure>
<h2 id="2-API"><a href="#2-API" class="headerlink" title="2. API"></a>2. API</h2><h3 id="2-1-Java-API"><a href="#2-1-Java-API" class="headerlink" title="2.1 Java API"></a>2.1 Java API</h3><p><strong>èŠ‚ç‚¹å®¢æˆ·ç«¯(node client)</strong></p>
<p>èŠ‚ç‚¹å®¢æˆ·ç«¯ä»¥æ— æ•°æ®èŠ‚ç‚¹(none data node)èº«ä»½åŠ å…¥é›†ç¾¤ï¼Œæ¢è¨€ä¹‹ï¼Œå®ƒè‡ªå·±ä¸å­˜å‚¨ä»»ä½•æ•°æ®ï¼Œä½†æ˜¯å®ƒçŸ¥é“æ•°æ®åœ¨é›†ç¾¤ä¸­çš„å…·ä½“ä½ç½®ï¼Œå¹¶ä¸”èƒ½ç›´æ¥è½¬å‘è¯·æ±‚åˆ°å¯¹åº”çš„èŠ‚ç‚¹ä¸Šã€‚</p>
<p><strong>ä¼ è¾“å®¢æˆ·ç«¯(Transport client)</strong></p>
<p>æ›´è½»é‡çš„ä¼ è¾“å®¢æˆ·ç«¯ èƒ½å‘é€è¯·æ±‚åˆ°è¿œç¨‹é›†ç¾¤ã€‚å®ƒè‡ªå·±ä¸åŠ å…¥é›†ç¾¤ï¼Œåªæ˜¯ç®€å•è½¬å‘è¯·æ±‚ç»™é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ã€‚</p>
<blockquote>
<p>ä¸¤ä¸ªJavaå®¢æˆ·ç«¯éƒ½é€šè¿‡ 9300ç«¯å£ ä¸ é›†ç¾¤äº¤äº’ï¼Œä½¿ç”¨ Elasticsearchä¼ è¾“åè®®(<code>Elasticsearch Transport Protocol</code>)ã€‚é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¹‹é—´ä¹Ÿé€šè¿‡ 9300 port è¿›è¡Œé€šä¿¡ã€‚</p>
</blockquote>
<p><a href="https://www.elastic.co/guide/index.html" target="_blank" rel="external">more_info_Java-API</a></p>
<h3 id="2-2-RESTful-API"><a href="#2-2-RESTful-API" class="headerlink" title="2.2 RESTful API"></a>2.2 RESTful API</h3><ul>
<li>åŸºäº HTTP åè®®ï¼Œä»¥ JSON ä¸ºæ•°æ®äº¤äº’æ ¼å¼çš„ RESTful API</li>
</ul>
<blockquote>
<p>å‘ Elasticsearch å‘å‡ºçš„è¯·æ±‚çš„ç»„æˆéƒ¨åˆ†ä¸å…¶å®ƒæ™®é€šçš„HTTPè¯·æ±‚æ˜¯ä¸€æ ·çš„ï¼š<br>curl -X<verb> â€˜<protocol>://<host>:<port>/<path></path>?<query_string>â€˜ -d â€˜<body>â€˜</body></query_string></port></host></protocol></verb></p>
<p>VERB HTTPæ–¹æ³•ï¼šGET, POST, PUT, HEAD, DELETE<br>â€¦</p>
</blockquote>
<p>example : æŸ¥è¯¢é›†ç¾¤ä¸­ æ–‡æ¡£æ•°é‡</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[deploy@node196 config]$ curl -u username:passwd -XGET &apos;localhost:9200/_count?pretty&apos; -d &apos;</span><br><span class="line">&gt; &#123;</span><br><span class="line">&gt;     &quot;query&quot;: &#123;</span><br><span class="line">&gt;         &quot;match_all&quot;: &#123;&#125;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; &#125;&apos;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;count&quot; : 100001234,</span><br><span class="line">  &quot;_shards&quot; : &#123;</span><br><span class="line">    &quot;total&quot; : 376,</span><br><span class="line">    &quot;successful&quot; : 376,</span><br><span class="line">    &quot;failed&quot; : 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -u name:pass -X DELETE http://ip:9200/your_index</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /coupon_seeker/coupon_seeker/_search?q=source:dianping</span><br><span class="line"></span><br><span class="line">curl -u name:pass -XGET &apos;http://192.168.181.xxx:9200/coupon_seeker/coupon_seeker/_search?q=source:dianping</span><br></pre></td></tr></table></figure>
<p>æœ‰æ¡ä»¶çš„ç²¾ç¡®åŒ¹é…åˆ é™¤å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -u name:pass -XDELETE &apos;http://192.168.181.xxx:9200/coupon_seeker/coupon_seeker/_query?pretty=true&apos; -d &apos;&#123;&quot;query&quot;:&#123;&quot;match&quot;:&#123;source:&quot;dianping&quot;&#125;&#125;&#125;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="3-æ–‡æ¡£"><a href="#3-æ–‡æ¡£" class="headerlink" title="3. æ–‡æ¡£"></a>3. æ–‡æ¡£</h2><p><strong>é¢å‘æ–‡æ¡£</strong></p>
<p>Elasticsearch is document orientedï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥å­˜å‚¨æ•´ä¸ª <code>object</code> æˆ– <code>document</code>ã€‚</p>
<p>Elasticsearch è¿˜å¯ä»¥ ç´¢å¼•(index) æ¯ä¸ªæ–‡æ¡£çš„å†…å®¹ä½¿ä¹‹å¯ä»¥è¢« <strong>æœç´¢</strong>ã€‚</p>
<p>å¯å¯¹ <code>document</code> ï¼ˆè€Œéæˆè¡Œæˆåˆ—çš„æ•°æ®ï¼‰è¿›è¡Œ <code>index</code>ã€<code>æœç´¢</code>ã€<code>æ’åº</code>ã€<code>è¿‡æ»¤</code>ã€‚</p>
<p>è¿™ç§ç†è§£æ•°æ®çš„æ–¹å¼ä¸ä»¥å¾€å®Œå…¨ä¸åŒï¼Œè¿™ä¹Ÿæ˜¯ Elasticsearch èƒ½å¤Ÿæ‰§è¡Œå¤æ‚çš„å…¨æ–‡æœç´¢çš„åŸå› ä¹‹ä¸€ã€‚</p>
<p><strong>JSON</strong> (JavaScript Object Notation)ï¼Œæ–‡æ¡£åºåˆ—åŒ–æ ¼å¼</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"email"</span>:      <span class="string">"john@smith.com"</span>,</span><br><span class="line">    <span class="attr">"first_name"</span>: <span class="string">"John"</span>,</span><br><span class="line">    <span class="attr">"last_name"</span>:  <span class="string">"Smith"</span>,</span><br><span class="line">    <span class="attr">"info"</span>: &#123;</span><br><span class="line">        <span class="attr">"bio"</span>:         <span class="string">"Eco-warrior and defender of the weak"</span>,</span><br><span class="line">        <span class="attr">"age"</span>:         <span class="number">25</span>,</span><br><span class="line">        <span class="attr">"interests"</span>: [ <span class="string">"dolphins"</span>, <span class="string">"whales"</span> ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"join_date"</span>: <span class="string">"2014/05/01"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹ userå¯¹è±¡å¾ˆå¤æ‚ï¼Œä½†å®ƒçš„ç»“æ„å’Œå¯¹è±¡çš„å«ä¹‰å·²ç»è¢«å®Œæ•´çš„ä½“ç°åœ¨JSONä¸­äº†ï¼Œåœ¨Elasticsearchä¸­å°†å¯¹è±¡è½¬åŒ–ä¸º JSON å¹¶åš indexç´¢å¼• è¦æ¯”åœ¨è¡¨ç»“æ„ä¸­åšç›¸åŒçš„äº‹æƒ…ç®€å•çš„å¤šã€‚</p>
<h2 id="5-ç´¢å¼•"><a href="#5-ç´¢å¼•" class="headerlink" title="5. ç´¢å¼•"></a>5. ç´¢å¼•</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[hdfs@node196 data_analysis]$ curl -u username:passwd -XPUT http://node190:9200/megacorp/employee/1 -d &apos;</span><br><span class="line">&gt; &#123;</span><br><span class="line">&gt;     &quot;first_name&quot; : &quot;John&quot;,</span><br><span class="line">&gt;     &quot;last_name&quot; :  &quot;Smith&quot;,</span><br><span class="line">&gt;     &quot;age&quot; :        25,</span><br><span class="line">&gt;     &quot;about&quot; :      &quot;I love to go rock climbing&quot;,</span><br><span class="line">&gt;     &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]</span><br><span class="line">&gt; &#125;&apos;</span><br><span class="line">&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;1&quot;,&quot;_version&quot;:1,&quot;created&quot;:true&#125;[hdfs@node196 data_analysis]$</span><br></pre></td></tr></table></figure>
<ul>
<li>indexing</li>
<li>search</li>
<li>aggregations  /ËŒÃ¦É¡rÉªËˆÉ¡eÉªÊƒÉ™n/</li>
</ul>
<p><strong>Elasticsearchèƒ½åšçš„äº‹</strong></p>
<p>åœºæ™¯: å‡è®¾æˆ‘ä»¬åˆšå¥½åœ¨Megacorpå·¥ä½œï¼Œè¿™æ—¶äººåŠ›èµ„æºéƒ¨é—¨å‡ºäºæŸç§ç›®çš„éœ€è¦è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‘˜å·¥ç›®å½•ï¼Œè¿™ä¸ªç›®å½•ç”¨äºä¿ƒè¿›äººæ–‡å…³æ€€å’Œç”¨äºå®æ—¶ååŒå·¥ä½œï¼Œæ‰€ä»¥å®ƒæœ‰ä»¥ä¸‹ä¸åŒçš„éœ€æ±‚ï¼š</p>
<ul>
<li>æ•°æ®èƒ½å¤ŸåŒ…å«å¤šä¸ªå€¼çš„æ ‡ç­¾ã€æ•°å­—å’Œçº¯æ–‡æœ¬ã€‚</li>
<li>æ£€ç´¢ä»»ä½•å‘˜å·¥çš„æ‰€æœ‰ä¿¡æ¯ã€‚</li>
<li>æ”¯æŒç»“æ„åŒ–æœç´¢ï¼Œä¾‹å¦‚æŸ¥æ‰¾30å²ä»¥ä¸Šçš„å‘˜å·¥ã€‚</li>
<li>æ”¯æŒç®€å•çš„å…¨æ–‡æœç´¢å’Œæ›´å¤æ‚çš„çŸ­è¯­(phrase)æœç´¢</li>
<li>é«˜äº®æœç´¢ç»“æœä¸­çš„å…³é”®å­—</li>
<li>èƒ½å¤Ÿåˆ©ç”¨å›¾è¡¨ç®¡ç†åˆ†æè¿™äº›æ•°æ®</li>
</ul>
<p><strong>ç´¢å¼•å‘˜å·¥æ–‡æ¡£</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Relational DB -&gt; Databases -&gt; Tables -&gt; Rows -&gt; Columns</span><br><span class="line">Elasticsearch -&gt; Indices   -&gt; Types  -&gt; Documents -&gt; Fields</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>Elasticsearch</th>
<th>Relational DB</th>
</tr>
</thead>
<tbody>
<tr>
<td>Indices</td>
<td>Databases</td>
</tr>
<tr>
<td>Types</td>
<td>Tables</td>
</tr>
<tr>
<td>Documents</td>
<td>Rows</td>
</tr>
<tr>
<td>Fields</td>
<td>Columns</td>
</tr>
</tbody>
</table>
<p><strong>Elasticsearch</strong></p>
<blockquote>
<p>ç´¢å¼•ã€å«ä¹‰çš„åŒºåˆ†</p>
<p>  <strong>index_num.</strong> : index (æ•°æ®åº“)ï¼Œå®ƒæ˜¯ç›¸å…³æ–‡æ¡£å­˜å‚¨çš„åœ°æ–¹ï¼Œ</p>
<p>  <strong>index_verb.</strong> ã€Œç´¢å¼•ä¸€ä¸ªæ–‡æ¡£ã€è¡¨ç¤ºæŠŠä¸€ä¸ªæ–‡æ¡£å­˜å‚¨åˆ°ç´¢å¼•ï¼ˆåè¯ï¼‰é‡Œï¼Œä»¥ä¾¿å®ƒå¯ä»¥è¢«æ£€ç´¢æˆ–è€…æŸ¥è¯¢ã€‚è¿™å¾ˆåƒSQL ä¸­çš„ INSERTå…³é”®å­—ï¼Œå·®åˆ«æ˜¯ï¼Œå¦‚æœæ–‡æ¡£å·²ç»å­˜åœ¨ï¼Œæ–°çš„æ–‡æ¡£å°†è¦†ç›–æ—§çš„æ–‡æ¡£ã€‚</p>
<p><strong>å€’æ’ç´¢å¼•</strong> : ä¼ ç»Ÿæ•°æ®åº“ä¸ºç‰¹å®šåˆ—å¢åŠ ä¸€ä¸ªç´¢å¼•ï¼Œä¾‹å¦‚ B-Treeç´¢å¼• æ¥åŠ é€Ÿæ£€ç´¢ã€‚Elasticsearchå’ŒLuceneä½¿ç”¨å€’æ’ç´¢å¼•(inverted index)çš„æ•°æ®ç»“æ„æ¥è¾¾åˆ°ç›¸åŒç›®çš„ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PUT /megacorp/employee/1</span><br><span class="line">&#123;</span><br><span class="line">    &quot;first_name&quot; : &quot;John&quot;,</span><br><span class="line">    &quot;last_name&quot; :  &quot;Smith&quot;,</span><br><span class="line">    &quot;age&quot; :        25,</span><br><span class="line">    &quot;about&quot; :      &quot;I love to go rock climbing&quot;,</span><br><span class="line">    &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-1-æ£€ç´¢æ–‡æ¡£"><a href="#4-1-æ£€ç´¢æ–‡æ¡£" class="headerlink" title="4.1 æ£€ç´¢æ–‡æ¡£"></a>4.1 æ£€ç´¢æ–‡æ¡£</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;_index&quot; :   &quot;megacorp&quot;,</span><br><span class="line">  &quot;_type&quot; :    &quot;employee&quot;,</span><br><span class="line">  &quot;_id&quot; :      &quot;1&quot;,</span><br><span class="line">  &quot;_version&quot; : 1,</span><br><span class="line">  &quot;found&quot; :    true,</span><br><span class="line">  &quot;_source&quot; :  &#123;</span><br><span class="line">      &quot;first_name&quot; :  &quot;John&quot;,</span><br><span class="line">      &quot;last_name&quot; :   &quot;Smith&quot;,</span><br><span class="line">      &quot;age&quot; :         25,</span><br><span class="line">      &quot;about&quot; :       &quot;I love to go rock climbing&quot;,</span><br><span class="line">      &quot;interests&quot;:  [ &quot;sports&quot;, &quot;music&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-ç®€å•æœç´¢"><a href="#4-2-ç®€å•æœç´¢" class="headerlink" title="4.2 ç®€å•æœç´¢"></a>4.2 ç®€å•æœç´¢</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br></pre></td></tr></table></figure>
<p>æŸ¥è¯¢ last_name ä¸º Smith çš„è®°å½•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search?q=last_name:Smith</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   ...</span><br><span class="line">   &quot;hits&quot;: &#123;</span><br><span class="line">      &quot;total&quot;:      2,</span><br><span class="line">      &quot;max_score&quot;:  0.30685282,</span><br><span class="line">      &quot;hits&quot;: [</span><br><span class="line">         &#123;</span><br><span class="line">            ...</span><br><span class="line">            &quot;_source&quot;: &#123;</span><br><span class="line">               &quot;first_name&quot;:  &quot;John&quot;,</span><br><span class="line">               &quot;last_name&quot;:   &quot;Smith&quot;,</span><br><span class="line">               &quot;age&quot;:         25,</span><br><span class="line">               &quot;about&quot;:       &quot;I love to go rock climbing&quot;,</span><br><span class="line">               &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">            ...</span><br><span class="line">            &quot;_source&quot;: &#123;</span><br><span class="line">               &quot;first_name&quot;:  &quot;Jane&quot;,</span><br><span class="line">               &quot;last_name&quot;:   &quot;Smith&quot;,</span><br><span class="line">               &quot;age&quot;:         32,</span><br><span class="line">               &quot;about&quot;:       &quot;I like to collect rock albums&quot;,</span><br><span class="line">               &quot;interests&quot;: [ &quot;music&quot; ]</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      ]</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-3-ä½¿ç”¨DSLè¯­å¥æŸ¥è¯¢"><a href="#4-3-ä½¿ç”¨DSLè¯­å¥æŸ¥è¯¢" class="headerlink" title="4.3 ä½¿ç”¨DSLè¯­å¥æŸ¥è¯¢"></a>4.3 ä½¿ç”¨DSLè¯­å¥æŸ¥è¯¢</h3><p> DSL(Domain Specific Languageç‰¹å®šé¢†åŸŸè¯­è¨€) </p>
<p><strong>æŸ¥è¯¢å­—ç¬¦ä¸²ç­‰ä»·äº</strong>  q=last_name:Smith <strong>DSLæŸ¥è¯¢ : </strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot; : &#123;</span><br><span class="line">        &quot;match&quot; : &#123;</span><br><span class="line">            &quot;last_name&quot; : &quot;Smith&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-4-æ›´å¤æ‚çš„æœç´¢"><a href="#4-4-æ›´å¤æ‚çš„æœç´¢" class="headerlink" title="4.4 æ›´å¤æ‚çš„æœç´¢"></a>4.4 æ›´å¤æ‚çš„æœç´¢</h3><p><strong>filter range</strong></p>
<p>GET /megacorp/employee/_search<br>{<br>    â€œqueryâ€ : {<br>        â€œfilteredâ€ : {<br>            â€œfilterâ€ : {<br>                â€œrangeâ€ : {<br>                    â€œageâ€ : { â€œgtâ€ : 30 } <1><br>                }<br>            },<br>            â€œqueryâ€ : {<br>                â€œmatchâ€ : {<br>                    â€œlast_nameâ€ : â€œsmithâ€ <2><br>                }<br>            }<br>        }<br>    }<br>}</2></1></p>
<h3 id="4-5-å…¨æ–‡æœç´¢"><a href="#4-5-å…¨æ–‡æœç´¢" class="headerlink" title="4.5 å…¨æ–‡æœç´¢"></a>4.5 å…¨æ–‡æœç´¢</h3><p>ä¸€ç§ä¼ ç»Ÿæ•°æ®åº“éš¾ä»¥å®ç°çš„åŠŸèƒ½</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot; : &#123;</span><br><span class="line">        &quot;match&quot; : &#123;</span><br><span class="line">            &quot;about&quot; : &quot;rock climbing&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   ...</span><br><span class="line">   &quot;hits&quot;: &#123;</span><br><span class="line">      &quot;total&quot;:      2,</span><br><span class="line">      &quot;max_score&quot;:  0.16273327,</span><br><span class="line">      &quot;hits&quot;: [</span><br><span class="line">         &#123;</span><br><span class="line">            ...</span><br><span class="line">            &quot;_score&quot;:         0.16273327, &lt;1&gt;</span><br><span class="line">            &quot;_source&quot;: &#123;</span><br><span class="line">               &quot;first_name&quot;:  &quot;John&quot;,</span><br><span class="line">               &quot;last_name&quot;:   &quot;Smith&quot;,</span><br><span class="line">               &quot;age&quot;:         25,</span><br><span class="line">               &quot;about&quot;:       &quot;I love to go rock climbing&quot;,</span><br><span class="line">               &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">            ...</span><br><span class="line">            &quot;_score&quot;:         0.016878016, &lt;2&gt;</span><br><span class="line">            &quot;_source&quot;: &#123;</span><br><span class="line">               &quot;first_name&quot;:  &quot;Jane&quot;,</span><br><span class="line">               &quot;last_name&quot;:   &quot;Smith&quot;,</span><br><span class="line">               &quot;age&quot;:         32,</span><br><span class="line">               &quot;about&quot;:       &quot;I like to collect rock albums&quot;,</span><br><span class="line">               &quot;interests&quot;: [ &quot;music&quot; ]</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      ]</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-6-çŸ­è¯­æœç´¢-â€“-phrases"><a href="#4-6-çŸ­è¯­æœç´¢-â€“-phrases" class="headerlink" title="4.6 çŸ­è¯­æœç´¢ â€“ phrases"></a>4.6 çŸ­è¯­æœç´¢ â€“ phrases</h3><p>æƒ³è¦ç¡®åˆ‡çš„åŒ¹é…è‹¥å¹²ä¸ªå•è¯æˆ–è€…çŸ­è¯­(phrases), ä¾‹å¦‚  æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢åŒæ—¶åŒ…å«â€rockâ€å’Œâ€climbingâ€ï¼ˆå¹¶ä¸”æ˜¯ç›¸é‚»çš„ï¼‰çš„å‘˜å·¥è®°å½•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot; : &#123;</span><br><span class="line">        &quot;match_phrase&quot; : &#123;</span><br><span class="line">            &quot;about&quot; : &quot;rock climbing&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>å¢åŠ é«˜äº®</em></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot; : &#123;</span><br><span class="line">        &quot;match_phrase&quot; : &#123;</span><br><span class="line">            &quot;about&quot; : &quot;rock climbing&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;highlight&quot;: &#123;</span><br><span class="line">        &quot;fields&quot; : &#123;</span><br><span class="line">            &quot;about&quot; : &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-aggregations"><a href="#5-aggregations" class="headerlink" title="5. aggregations"></a>5. aggregations</h2><p>èšåˆç›¸å½“äº group by</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;match&quot;: &#123;</span><br><span class="line">      &quot;last_name&quot;: &quot;smith&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;aggs&quot;: &#123;</span><br><span class="line">    &quot;all_interests&quot;: &#123;</span><br><span class="line">      &quot;terms&quot;: &#123;</span><br><span class="line">        &quot;field&quot;: &quot;interests&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">&quot;all_interests&quot;: &#123;</span><br><span class="line">   &quot;buckets&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;key&quot;: &quot;music&quot;,</span><br><span class="line">         &quot;doc_count&quot;: 2</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;key&quot;: &quot;sports&quot;,</span><br><span class="line">         &quot;doc_count&quot;: 1</span><br><span class="line">      &#125;</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>èšåˆä¹Ÿå…è®¸åˆ†çº§æ±‡æ€»ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ç»Ÿè®¡æ¯ç§å…´è¶£ä¸‹èŒå‘˜çš„å¹³å‡å¹´é¾„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;aggs&quot; : &#123;</span><br><span class="line">        &quot;all_interests&quot; : &#123;</span><br><span class="line">            &quot;terms&quot; : &#123; &quot;field&quot; : &quot;interests&quot; &#125;,</span><br><span class="line">            &quot;aggs&quot; : &#123;</span><br><span class="line">                &quot;avg_age&quot; : &#123;</span><br><span class="line">                    &quot;avg&quot; : &#123; &quot;field&quot; : &quot;age&quot; &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ•™ç¨‹å°ç»“</strong></p>
<p> ä¸ºäº†ä¿æŒç®€çŸ­ï¼Œè¿˜æœ‰å¾ˆå¤šçš„ç‰¹æ€§æœªæåŠâ€”â€”åƒ æ¨èã€å®šä½ã€æ¸—é€ã€æ¨¡ç³Š ä»¥åŠ éƒ¨åˆ†åŒ¹é…ç­‰ã€‚ä½†è¿™ä¹Ÿçªå‡ºäº†æ„å»ºé«˜çº§æœç´¢åŠŸèƒ½æ˜¯å¤šä¹ˆçš„å®¹æ˜“ã€‚æ— éœ€é…ç½®ï¼Œåªéœ€è¦æ·»åŠ æ•°æ®ç„¶åå¼€å§‹æœç´¢ï¼</p>
<h2 id="6-åˆ†å¸ƒå¼çš„ç‰¹æ€§"><a href="#6-åˆ†å¸ƒå¼çš„ç‰¹æ€§" class="headerlink" title="6. åˆ†å¸ƒå¼çš„ç‰¹æ€§"></a>6. åˆ†å¸ƒå¼çš„ç‰¹æ€§</h2><p>Elasticsearch ä½ ä¸éœ€è¦çŸ¥é“ä»»ä½•å…³äºåˆ†å¸ƒå¼ç³»ç»Ÿã€åˆ†ç‰‡ã€é›†ç¾¤å‘ç°æˆ–è€…å…¶ä»–å¤§é‡çš„åˆ†å¸ƒå¼æ¦‚å¿µã€‚æ‰€æœ‰çš„æ•™ç¨‹ä½ å³å¯ä»¥è¿è¡Œåœ¨ä½ çš„ç¬”è®°æœ¬ä¸Šï¼Œä¹Ÿå¯ä»¥è¿è¡Œåœ¨æ‹¥æœ‰100ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ä¸Šï¼Œå…¶å·¥ä½œæ–¹å¼æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>Elasticsearch è‡´åŠ›äºéšè—åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚ä»¥ä¸‹è¿™äº›æ“ä½œéƒ½æ˜¯åœ¨åº•å±‚è‡ªåŠ¨å®Œæˆçš„ï¼š</p>
<ul>
<li>å°†ä½ çš„æ–‡æ¡£åˆ†åŒºåˆ°ä¸åŒçš„å®¹å™¨æˆ–è€…åˆ†ç‰‡(shards)ä¸­ï¼Œå®ƒä»¬å¯å­˜äºä¸€æˆ–å¤šä¸ªèŠ‚ç‚¹ä¸­ã€‚</li>
<li>å°†åˆ†ç‰‡å‡åŒ€çš„åˆ†é…åˆ°å„ä¸ªèŠ‚ç‚¹ï¼Œå¯¹ç´¢å¼•å’Œæœç´¢åšè´Ÿè½½å‡è¡¡ã€‚</li>
<li>å†—ä½™æ¯ä¸€ä¸ªåˆ†ç‰‡ï¼Œé˜²æ­¢ç¡¬ä»¶æ•…éšœé€ æˆçš„æ•°æ®ä¸¢å¤±ã€‚</li>
<li>å°†é›†ç¾¤ä¸­ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„è¯·æ±‚è·¯ç”±åˆ°ç›¸åº”æ•°æ®æ‰€åœ¨çš„èŠ‚ç‚¹ã€‚</li>
<li>æ— è®ºæ˜¯å¢åŠ èŠ‚ç‚¹ï¼Œè¿˜æ˜¯ç§»é™¤èŠ‚ç‚¹ï¼Œåˆ†ç‰‡éƒ½å¯ä»¥åšåˆ°æ— ç¼çš„æ‰©å±•å’Œè¿ç§»ã€‚</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Point to Plane]]></title>
      <url>http://shopee.ai/2016/05/17/ml/math-distance-formula-of-point-to-plain/</url>
      <content type="html"><![CDATA[<p>å¹³é¢çš„ä¸€èˆ¬å¼æ–¹ç¨‹, å‘é‡çš„æ¨¡ï¼ˆé•¿åº¦ï¼‰, å‘é‡çš„æ•°é‡ç§¯, ç‚¹åˆ°å¹³é¢çš„è·ç¦»</p>
<a id="more"></a>
<p><a href="https://zh.wikipedia.org/wiki/%E5%90%91%E9%87%8F" target="_blank" rel="external">ç»´åŸºç™¾ç§‘_Vector</a></p>
<h2 id="1-å¹³é¢çš„ä¸€èˆ¬å¼æ–¹ç¨‹"><a href="#1-å¹³é¢çš„ä¸€èˆ¬å¼æ–¹ç¨‹" class="headerlink" title="1. å¹³é¢çš„ä¸€èˆ¬å¼æ–¹ç¨‹"></a>1. å¹³é¢çš„ä¸€èˆ¬å¼æ–¹ç¨‹</h2><p>Ax +By +Cz + D = 0</p>
<p>å…¶ä¸­n = (A, B, C)æ˜¯å¹³é¢çš„æ³•å‘é‡ï¼ŒDæ˜¯å°†å¹³é¢å¹³ç§»åˆ°åæ ‡åŸç‚¹æ‰€éœ€è·ç¦»ï¼ˆæ‰€ä»¥D=0æ—¶ï¼Œå¹³é¢è¿‡åŸç‚¹ï¼‰</p>
<h2 id="2-å‘é‡çš„æ¨¡ï¼ˆé•¿åº¦ï¼‰"><a href="#2-å‘é‡çš„æ¨¡ï¼ˆé•¿åº¦ï¼‰" class="headerlink" title="2. å‘é‡çš„æ¨¡ï¼ˆé•¿åº¦ï¼‰"></a>2. å‘é‡çš„æ¨¡ï¼ˆé•¿åº¦ï¼‰</h2><p>ç»™å®šä¸€ä¸ªå‘é‡Vï¼ˆx, y, z),åˆ™|V| = sqrt(x <em> x + y </em> y + z * z)</p>
<blockquote>
<p>åœ¨æ•°å­¦ä¸­ï¼ŒçŸ¢é‡å¸¸é‡‡ç”¨æ›´ä¸ºæŠ½è±¡çš„çŸ¢é‡ç©ºé—´ï¼ˆä¹Ÿç§°ä¸ºçº¿æ€§ç©ºé—´ï¼‰æ¥å®šä¹‰ï¼Œè€Œå®šä¹‰å…·æœ‰ç‰©ç†æ„ä¹‰ä¸Šçš„å¤§å°å’Œæ–¹å‘çš„çŸ¢é‡æ¦‚å¿µåˆ™éœ€è¦å¼•è¿›äº†èŒƒæ•°å’Œå†…ç§¯çš„æ¬§å‡ é‡Œå¾—ç©ºé—´ã€‚<br>èŒƒæ•°ï¼Œ æ¨¡é•¿</p>
</blockquote>
<h2 id="3-å‘é‡çš„æ•°é‡ç§¯-ç‚¹ç§¯-å†…ç§¯"><a href="#3-å‘é‡çš„æ•°é‡ç§¯-ç‚¹ç§¯-å†…ç§¯" class="headerlink" title="3. å‘é‡çš„æ•°é‡ç§¯/ç‚¹ç§¯/å†…ç§¯"></a>3. å‘é‡çš„æ•°é‡ç§¯/ç‚¹ç§¯/å†…ç§¯</h2><p>ç»™å®šä¸¤ä¸ªå‘é‡V1(x1, y1, z1)å’ŒV2(x2, y2, z2)åˆ™ä»–ä»¬çš„å†…ç§¯æ˜¯ V1V2 = x1x2 + y1y2 + z1z2</p>
<blockquote>
<p>æ•°é‡ç§¯è¢«å¹¿æ³›åº”ç”¨äºç‰©ç†ä¸­ï¼Œå¦‚åšåŠŸå°±æ˜¯ç”¨åŠ›çš„çŸ¢é‡ä¹˜ä½ç§»çš„çŸ¢é‡ï¼Œå³<img src="/images/math/math-pointdis.png" alt=""></p>
</blockquote>
<h2 id="4-ç‚¹åˆ°å¹³é¢çš„è·ç¦»-Yes"><a href="#4-ç‚¹åˆ°å¹³é¢çš„è·ç¦»-Yes" class="headerlink" title="4. ç‚¹åˆ°å¹³é¢çš„è·ç¦»(Yes)"></a>4. ç‚¹åˆ°å¹³é¢çš„è·ç¦»(Yes)</h2><p>æ±‚ç‚¹åˆ°ç›´çº¿çš„è·ç¦»ä¸å†æ˜¯éš¾äº‹ï¼Œæœ‰å›¾æœ‰çœŸç›¸</p>
<p><img src="/images/math/math-pointToPlane.jpeg" alt="Distance formula of point to plane"></p>
<blockquote>
<p>å¦‚æœæ³•å‘é‡æ˜¯å•ä½å‘é‡çš„è¯ï¼Œé‚£ä¹ˆåˆ†æ¯ä¸º1</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Machine Learning p1 - Sparkç¼–ç¨‹å…¥é—¨]]></title>
      <url>http://shopee.ai/2016/04/25/spark/spark-machine-learning-p1/</url>
      <content type="html"><![CDATA[<p>Spark çš„ç¯å¢ƒæ­å»ºä¸è¿è¡Œ, æ¥è§¦äº† RDD ä¸ SparkContext, å¯åŠ¨ Spark-Shell ä»¥åŠå¦‚ä½•ä½¿ç”¨ Scalaã€Python ç¼–å†™ Spark ç¨‹åº. </p>
<a id="more"></a>
<p><strong>Apache Spark</strong></p>
<p>Spark çš„è®¾è®¡ç›®æ ‡ å³: <code>è¿­ä»£å¼+ä½å»¶è¿Ÿ</code> é€‚åˆ Machine Learning ç®—æ³•çš„ç‰¹æ€§<br>Spark åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶, å°†ä¸­é—´æ•°æ®å’Œç»“æœä¿å­˜åœ¨å†…å­˜ä¸­<br>Spark æä¾›å‡½æ•°å¼API, å¹¶å…¼å®¹ Hadoop ç”Ÿæ€<br>Spark æ¡†æ¶å¯¹ èµ„æºè°ƒåº¦ã€ä»»åŠ¡æäº¤ã€æ‰§è¡Œã€è·Ÿè¸ªï¼Œ èŠ‚ç‚¹é—´é€šä¿¡ä»¥åŠæ•°æ®å¹¶è¡Œå¤„ç†çš„å†…åœ¨åº•å±‚æ“ä½œéƒ½è¿›è¡Œäº†æŠ½è±¡</p>
<blockquote>
<p>ç®€åŒ–äº†æµ·é‡æ•°æ®çš„å­˜å‚¨(HDFS) å’Œ è®¡ç®—(MR) æµç¨‹ã€‚MapReduce ç¼ºç‚¹, å¦‚: å¯åŠ¨ä»»åŠ¡æ—¶çš„é«˜å¼€é”€ã€å¯¹ä¸­é—´æ•°æ® å’Œ è®¡ç®—ç»“æœ å†™å…¥ç£ç›˜çš„ä¾èµ–ã€‚è¿™ä½¿å¾— Hadoop ä¸é€‚åˆ è¿­ä»£å¼ æˆ– ä½å»¶è¿Ÿ çš„ä»»åŠ¡ã€‚</p>
</blockquote>
<p><strong>Spark çš„å››ç§è¿è¡Œæ¨¡å¼</strong></p>
<ol>
<li>æœ¬åœ°å•æœºæ¨¡å¼ â€“ Spark è¿›ç¨‹ all run in one JVM</li>
<li>é›†ç¾¤å•æœºæ¨¡å¼ â€“ ä½¿ç”¨ Spark è‡ªå·±å†…ç½®çš„ ä»»åŠ¡è°ƒåº¦æ¡†æ¶</li>
<li>åŸºäº Mesos ä¸€ä¸ªå¼€æºé›†ç¾¤è®¡ç®—æ¡†æ¶</li>
<li>åŸºäº YARN ä¸ Hadoop2 å…³è”å½¢æˆé›†ç¾¤è®¡ç®—å’Œèµ„æºè°ƒåº¦æ¡†æ¶</li>
</ol>
<h2 id="1-Sparkè¿è¡Œ"><a href="#1-Sparkè¿è¡Œ" class="headerlink" title="1. Sparkè¿è¡Œ"></a>1. Sparkè¿è¡Œ</h2><p>è¿è¡Œç¤ºä¾‹ç¨‹åºæ¥æµ‹è¯•æ˜¯å¦ä¸€åˆ‡æ­£å¸¸ï¼š</p>
<blockquote>
<p>./bin/run-example org.apache.spark.examples.SparkPi</p>
</blockquote>
<p>è¯¥å‘½ä»¤å°†åœ¨æœ¬åœ°å•æœºæ¨¡å¼ä¸‹æ‰§è¡ŒSparkPiè¿™ä¸ªç¤ºä¾‹ã€‚åœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„Sparkè¿›ç¨‹å‡è¿è¡ŒäºåŒä¸€ä¸ªJVMä¸­ï¼Œè€Œå¹¶è¡Œå¤„ç†åˆ™é€šè¿‡å¤šçº¿ç¨‹æ¥å®ç°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥ç¤ºä¾‹ä¼šå¯ç”¨ä¸æœ¬åœ°ç³»ç»Ÿçš„CPUæ ¸å¿ƒæ•°ç›®ç›¸åŒçš„çº¿ç¨‹ã€‚</p>
<p>è¦åœ¨æœ¬åœ°æ¨¡å¼ä¸‹è®¾ç½®å¹¶è¡Œçš„çº§åˆ«ï¼Œä»¥local[N]çš„æ ¼å¼æ¥æŒ‡å®šä¸€ä¸ªmasterå˜é‡å³å¯ã€‚æ¯”å¦‚åªä½¿ç”¨ä¸¤ä¸ªçº¿ç¨‹æ—¶ï¼Œå¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<blockquote>
<p>MASTER=local[2] ./bin/run-example org.apache.spark.examples.SparkPi</p>
</blockquote>
<h2 id="2-Sparké›†ç¾¤"><a href="#2-Sparké›†ç¾¤" class="headerlink" title="2. Sparké›†ç¾¤"></a>2. Sparké›†ç¾¤</h2><p>Sparké›†ç¾¤ç”±ä¸¤ç±»ç¨‹åºæ„æˆ: </p>
<ol>
<li>ä¸€ä¸ªé©±åŠ¨ç¨‹åº</li>
<li>å¤šä¸ªæ‰§è¡Œç¨‹åº</li>
</ol>
<blockquote>
<p>æœ¬åœ°æ¨¡å¼ä¸‹æ‰€æœ‰çš„å¤„ç†éƒ½è¿è¡Œåœ¨åŒä¸€ä¸ªJVMå†…ï¼Œè€Œåœ¨é›†ç¾¤æ¨¡å¼æ—¶å®ƒä»¬é€šå¸¸è¿è¡Œåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šã€‚</p>
</blockquote>
<p>ä¸€ä¸ªé‡‡ç”¨å•æœºæ¨¡å¼çš„Sparké›†ç¾¤åŒ…æ‹¬ï¼š</p>
<ol>
<li>ä¸€ä¸ªè¿è¡ŒSparkå•æœºä¸»è¿›ç¨‹å’Œé©±åŠ¨ç¨‹åºçš„ Masterï¼›</li>
<li>å„è‡ªè¿è¡Œä¸€ä¸ªæ‰§è¡Œç¨‹åºè¿›ç¨‹çš„å¤šä¸ª Workerã€‚</li>
</ol>
<p>æ¯”å¦‚åœ¨ä¸€ä¸ªSparkå•æœºé›†ç¾¤ä¸Šè¿è¡Œï¼Œåªéœ€ä¼ å…¥ä¸»èŠ‚ç‚¹çš„URLå³å¯ï¼š</p>
<blockquote>
<p>MASTER=spark://IP:PORT ./bin/run-example org.apache.spark.examples.SparkPi<br>å…¶ä¸­çš„IPå’ŒPORTåˆ†åˆ«æ˜¯ä¸»èŠ‚ç‚¹IPåœ°å€å’Œç«¯å£å·ã€‚è¿™æ˜¯å‘Šè¯‰Sparkè®©ç¤ºä¾‹ç¨‹åºè¿è¡Œåœ¨ä¸»èŠ‚ç‚¹æ‰€å¯¹åº”çš„é›†ç¾¤ä¸Š</p>
</blockquote>
<h2 id="3-Sparkç¼–ç¨‹æ¨¡å‹"><a href="#3-Sparkç¼–ç¨‹æ¨¡å‹" class="headerlink" title="3. Sparkç¼–ç¨‹æ¨¡å‹"></a>3. Sparkç¼–ç¨‹æ¨¡å‹</h2><h3 id="3-1-SparkContextç±»"><a href="#3-1-SparkContextç±»" class="headerlink" title="3.1 SparkContextç±»"></a>3.1 SparkContextç±»</h3><p><strong>SparkContextç±»ä¸SparkConfç±»</strong></p>
<p>ä»»ä½•Sparkç¨‹åºçš„ç¼–å†™éƒ½æ˜¯ä»SparkContextå¼€å§‹çš„ã€‚SparkContextçš„åˆå§‹åŒ–éœ€è¦ä¸€ä¸ªSparkConfå¯¹è±¡ï¼Œåè€…åŒ…å«äº†Sparké›†ç¾¤é…ç½®çš„å„ç§å‚æ•°ï¼ˆæ¯”å¦‚ä¸»èŠ‚ç‚¹çš„URLï¼‰ã€‚</p>
<p>åˆå§‹åŒ–åï¼Œæˆ‘ä»¬ä¾¿å¯ç”¨SparkContextå¯¹è±¡æ‰€åŒ…å«çš„å„ç§æ–¹æ³•æ¥åˆ›å»ºå’Œæ“ä½œRDDã€‚Spark shellï¼ˆåœ¨Scalaå’ŒPythonä¸‹å¯ä»¥ï¼Œä½†ä¸æ”¯æŒJavaï¼‰èƒ½è‡ªåŠ¨å®Œæˆä¸Šè¿°åˆå§‹åŒ–ã€‚è‹¥è¦ç”¨Scalaä»£ç æ¥å®ç°çš„è¯ï¼Œå¯å‚ç…§ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setAppName(<span class="string">"Test Spark App"</span>).setMaster(<span class="string">"local[4]"</span>)</span><br><span class="line"><span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ä¼šåˆ›å»ºä¸€ä¸ª4çº¿ç¨‹çš„SparkContextå¯¹è±¡ï¼Œå¹¶å°†å…¶ç›¸åº”çš„ä»»åŠ¡å‘½åä¸ºTest Spark APPã€‚æˆ‘ä»¬ä¹Ÿå¯é€šè¿‡å¦‚ä¸‹æ–¹å¼è°ƒç”¨SparkContextçš„ç®€å•æ„é€ å‡½æ•°</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(<span class="string">"local[4]"</span>, <span class="string">"Test Spark App"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3-2-Spark-shell"><a href="#3-2-Spark-shell" class="headerlink" title="3.2 Spark shell"></a>3.2 Spark shell</h3><p>Sparkæ”¯æŒ ç”¨ Scala or Python REPLï¼ˆRead-Eval-Print-Loopï¼Œå³äº¤äº’å¼shellï¼‰æ¥è¿›è¡Œäº¤äº’å¼çš„ç¨‹åºç¼–å†™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./bin/spark-shell</span><br></pre></td></tr></table></figure>
<p>ä¼šå¯åŠ¨Scala shell å¹¶åˆå§‹åŒ–ä¸€ä¸ªSparkContextå¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ scè¿™ä¸ªScalaå€¼æ¥è°ƒç”¨è¿™ä¸ªå¯¹è±¡</p>
<h3 id="3-3-RDD"><a href="#3-3-RDD" class="headerlink" title="3.3 RDD"></a>3.3 RDD</h3><p>ä¸€ä¸ª RDD ä»£è¡¨ä¸€ç³»åˆ—çš„â€œè®°å½•â€ï¼ˆä¸¥æ ¼æ¥è¯´ï¼ŒæŸç§ç±»å‹çš„å¯¹è±¡ï¼‰ã€‚<br>è¿™äº›è®°å½•è¢«åˆ†é…æˆ–åˆ†åŒºåˆ°ä¸€ä¸ªé›†ç¾¤çš„å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼ˆåœ¨æœ¬åœ°æ¨¡å¼ä¸‹ï¼Œå¯ä»¥ç±»ä¼¼åœ°ç†è§£ä¸ºå•ä¸ªè¿›ç¨‹é‡Œçš„å¤šä¸ªçº¿ç¨‹ä¸Šï¼‰ã€‚</p>
<p>Sparkä¸­çš„RDDå…·å¤‡å®¹é”™æ€§ï¼Œå³å½“æŸä¸ªèŠ‚ç‚¹æˆ–ä»»åŠ¡å¤±è´¥æ—¶ï¼ˆå› éç”¨æˆ·ä»£ç åŸå› è€Œå¼•èµ·ï¼Œå¦‚ç¡¬ä»¶æ•…éšœã€ç½‘ç»œä¸é€šç­‰ï¼‰ï¼ŒRDDä¼šåœ¨ä½™ä¸‹çš„èŠ‚ç‚¹ä¸Šè‡ªåŠ¨é‡å»ºï¼Œä»¥ä¾¿ä»»åŠ¡èƒ½æœ€ç»ˆå®Œæˆã€‚</p>
<p><strong>1. åˆ›å»ºRDD</strong></p>
<p>RDDå¯ä»ç°æœ‰çš„é›†åˆåˆ›å»º ï¼š</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> collection = <span class="type">List</span>(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>)</span><br><span class="line"><span class="keyword">val</span> rddFromCollection = sc.parallelize(collection)</span><br></pre></td></tr></table></figure>
<p>RDDä¹Ÿå¯ä»¥åŸºäºHadoopçš„è¾“å…¥æºåˆ›å»ºï¼Œæ¯”å¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€HDFSã€‚åŸºäºHadoopçš„RDDå¯ä»¥ä½¿ç”¨ä»»ä½•å®ç°äº†Hadoop InputFormatæ¥å£çš„è¾“å…¥æ ¼å¼ï¼ŒåŒ…æ‹¬æ–‡æœ¬æ–‡ä»¶ã€å…¶ä»–Hadoopæ ‡å‡†æ ¼å¼ã€HBaseç­‰ã€‚ä»¥ä¸‹ä¸¾ä¾‹è¯´æ˜å¦‚ä½•ç”¨ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿé‡Œçš„æ–‡ä»¶åˆ›å»ºRDDï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">val rddFromTextFile = sc.textFile(&quot;LICENSE&quot;)</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ä¸­çš„textFileå‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ä¼šè¿”å›ä¸€ä¸ªRDDå¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„æ¯ä¸€æ¡è®°å½•éƒ½æ˜¯ä¸€ä¸ªè¡¨ç¤ºæ–‡æœ¬æ–‡ä»¶ä¸­æŸä¸€è¡Œæ–‡å­—çš„Stringï¼ˆå­—ç¬¦ä¸²ï¼‰å¯¹è±¡ã€‚</p>
<p><strong>2. Sparkæ“ä½œ</strong></p>
<p>åœ¨Sparkç¼–ç¨‹æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„æ“ä½œè¢«åˆ†ä¸º <code>transformation</code> å’Œ <code>action</code> ä¸¤ç§ã€‚</p>
<p><strong>transformation</strong> æ“ä½œæ˜¯å¯¹ä¸€ä¸ªæ•°æ®é›†é‡Œçš„æ‰€æœ‰è®°å½•æ‰§è¡ŒæŸç§å‡½æ•°ï¼Œä»è€Œä½¿è®°å½•å‘ç”Ÿæ”¹å˜ï¼›</p>
<p><strong>action</strong> é€šå¸¸æ˜¯è¿è¡ŒæŸäº›è®¡ç®—æˆ–èšåˆæ“ä½œï¼Œå¹¶å°†ç»“æœè¿”å›è¿è¡Œ SparkContext çš„é‚£ä¸ªé©±åŠ¨ç¨‹åºã€‚</p>
<p>Spark çš„æ“ä½œé€šå¸¸é‡‡ç”¨<code>å‡½æ•°å¼</code>é£æ ¼ã€‚</p>
<p>Sparkç¨‹åºä¸­æœ€å¸¸ç”¨çš„è½¬æ¢æ“ä½œä¾¿æ˜¯mapæ“ä½œã€‚è¯¥æ“ä½œå¯¹ä¸€ä¸ªRDDé‡Œçš„æ¯ä¸€æ¡è®°å½•éƒ½æ‰§è¡ŒæŸä¸ªå‡½æ•°ï¼Œä»è€Œå°†è¾“å…¥æ˜ å°„æˆä¸ºæ–°çš„è¾“å‡ºã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸‹é¢è¿™æ®µä»£ç ä¾¿å¯¹ä¸€ä¸ªä»æœ¬åœ°æ–‡æœ¬æ–‡ä»¶åˆ›å»ºçš„RDDè¿›è¡Œæ“ä½œã€‚å®ƒå¯¹è¯¥RDDä¸­çš„æ¯ä¸€æ¡è®°å½•éƒ½æ‰§è¡Œsizeå‡½æ•°ã€‚<br>åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„ç”±è‹¥å¹²Stringæ„æˆçš„RDDå¯¹è±¡ã€‚é€šè¿‡mapå‡½æ•°ï¼Œæˆ‘ä»¬å°†æ¯ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½è½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°ï¼Œä»è€Œè¿”å›ä¸€ä¸ªç”±è‹¥å¹²Intæ„æˆçš„RDDå¯¹è±¡ã€‚</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; rddFromTextFile.count</span><br><span class="line">res2: <span class="type">Long</span> = <span class="number">294</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> intsFromStringsRDD = rddFromTextFile.map(line =&gt; line.size)</span><br><span class="line">intsFromStringsRDD: org.apache.spark.rdd.<span class="type">RDD</span>[<span class="type">Int</span>] = <span class="type">MapPartitionsRDD</span>[<span class="number">3</span>] at map at &lt;console&gt;:<span class="number">23</span></span><br><span class="line"></span><br><span class="line">scala&gt; intsFromStringsRDD.count</span><br><span class="line">res3: <span class="type">Long</span> = <span class="number">294</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> sumOfRecords = intsFromStringsRDD.sum</span><br><span class="line">sumOfRecords: <span class="type">Double</span> = <span class="number">17062.0</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> numRecords = intsFromStringsRDD.count</span><br><span class="line">numRecords: <span class="type">Long</span> = <span class="number">294</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> aveLengthOfRecord = sumOfRecords / numRecords</span><br><span class="line">aveLengthOfRecord: <span class="type">Double</span> = <span class="number">58.034013605442176</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> aveLengthOfRecordChained = rddFromTextFile.map(line =&gt; line.size).sum / rddFromTextFile.count</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¤ºä¾‹ä¸­ <strong>=&gt;</strong> æ˜¯Scalaä¸‹è¡¨ç¤ºåŒ¿åå‡½æ•°çš„è¯­æ³•ã€‚è¯­æ³• <strong>line =&gt; line.size</strong> è¡¨ç¤ºä»¥ <strong>=&gt;</strong> æ“ä½œç¬¦å·¦è¾¹çš„éƒ¨åˆ†ä½œä¸ºè¾“å…¥ï¼Œå¯¹å…¶æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä»¥ <strong>=&gt;</strong> æ“ä½œç¬¦å³è¾¹ä»£ç çš„æ‰§è¡Œç»“æœä¸ºè¾“å‡ºã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¾“å…¥ä¸ºlineï¼Œè¾“å‡ºåˆ™æ˜¯ <strong>line.size</strong> å‡½æ•°çš„æ‰§è¡Œç»“æœã€‚åœ¨Scalaè¯­è¨€ä¸­ï¼Œè¿™ç§å°†ä¸€ä¸ªStringå¯¹è±¡æ˜ å°„ä¸ºä¸€ä¸ªIntçš„å‡½æ•°è¢«è¡¨ç¤ºä¸ºString =&gt; Intã€‚</p>
</blockquote>
<p>Sparkçš„å¤§å¤šæ•°æ“ä½œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°RDDï¼Œä½†å¤šæ•°çš„Actionæ“ä½œåˆ™æ˜¯è¿”å›è®¡ç®—çš„ç»“æœ</p>
<blockquote>
<p>æ³¨ : Spark ä¸­çš„è½¬æ¢æ“ä½œæ˜¯å»¶åçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨RDDä¸Šè°ƒç”¨ä¸€ä¸ªè½¬æ¢æ“ä½œå¹¶ä¸ä¼šç«‹å³è§¦å‘ç›¸åº”çš„è®¡ç®—ã€‚ åªæœ‰å¿…è¦æ—¶æ‰è®¡ç®—ç»“æœå¹¶å°†å…¶è¿”å›ç»™é©±åŠ¨ç¨‹åºï¼Œä»è€Œæé«˜äº†Sparkçš„æ•ˆç‡ã€‚</p>
</blockquote>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> transformedRDD = rddFromTextFile.map(line =&gt; line.size).</span><br><span class="line">     | filter(size =&gt; size &gt; <span class="number">10</span>).map(size =&gt; size * <span class="number">2</span>)</span><br><span class="line">transformedRDD: org.apache.spark.rdd.<span class="type">RDD</span>[<span class="type">Int</span>] = <span class="type">MapPartitionsRDD</span>[<span class="number">7</span>] at map at &lt;console&gt;:<span class="number">24</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure>
<p>æ²¡æœ‰è§¦å‘ä»»ä½•è®¡ç®—ï¼Œä¹Ÿæ²¡æœ‰ç»“æœè¢«è¿”å›ã€‚<br>å¦‚æœæˆ‘ä»¬ç°åœ¨åœ¨æ–°çš„RDDä¸Šè°ƒç”¨ä¸€ä¸ªæ‰§è¡Œæ“ä½œï¼Œæ¯”å¦‚sumï¼Œè¯¥è®¡ç®—å°†ä¼šè¢«è§¦å‘ï¼š</p>
<p><strong><em>è§¦å‘è®¡ç®—</em></strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> computation = transformedRDD.sum</span><br><span class="line">computation: <span class="type">Double</span> = <span class="number">34106.0</span></span><br></pre></td></tr></table></figure>
<p><strong>3. RDDç¼“å­˜ç­–ç•¥</strong></p>
<p>Sparkæœ€ä¸ºå¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ä¾¿æ˜¯èƒ½å¤ŸæŠŠæ•°æ®ç¼“å­˜åœ¨é›†ç¾¤çš„å†…å­˜é‡Œã€‚è¿™é€šè¿‡è°ƒç”¨RDDçš„cacheå‡½æ•°æ¥å®ç°ï¼š</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; rddFromTextFile.cache</span><br><span class="line">res4: rddFromTextFile.<span class="keyword">type</span> = <span class="type">MapPartitionsRDD</span>[<span class="number">2</span>] at textFile at &lt;console&gt;:<span class="number">21</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> aveLengthOfRecordChainedFromCached = rddFromTextFile.map(line =&gt; line.size).sum / rddFromTextFile.count</span><br><span class="line">aveLengthOfRecordChainedFromCached: <span class="type">Double</span> = <span class="number">58.034013605442176</span></span><br></pre></td></tr></table></figure>
<p>åœ¨RDDé¦–æ¬¡è°ƒç”¨ä¸€ä¸ªæ‰§è¡Œæ“ä½œæ—¶ï¼Œè¿™ä¸ªæ“ä½œå¯¹åº”çš„è®¡ç®—ä¼šç«‹å³æ‰§è¡Œï¼Œæ•°æ®ä¼šä»æ•°æ®æºé‡Œè¯»å‡ºå¹¶ä¿å­˜åˆ°å†…å­˜ã€‚å› æ­¤ï¼Œé¦–æ¬¡è°ƒç”¨cacheå‡½æ•°æ‰€éœ€è¦çš„æ—¶é—´ä¼šéƒ¨åˆ†å–å†³äºSparkä»è¾“å…¥æºè¯»å–æ•°æ®æ‰€éœ€è¦çš„æ—¶é—´ã€‚ä½†æ˜¯ï¼Œå½“ä¸‹ä¸€æ¬¡è®¿é—®è¯¥æ•°æ®é›†çš„æ—¶å€™ï¼Œæ•°æ®å¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è¯»å‡ºä»è€Œå‡å°‘ä½æ•ˆçš„I/Oæ“ä½œï¼ŒåŠ å¿«è®¡ç®—ã€‚å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¼šå–å¾—æ•°å€çš„é€Ÿåº¦æå‡ã€‚</p>
<blockquote>
<p>Sparkæ”¯æŒæ›´ä¸ºç»†åŒ–çš„ç¼“å­˜ç­–ç•¥ã€‚é€šè¿‡persistå‡½æ•°å¯ä»¥æŒ‡å®šSparkçš„æ•°æ®ç¼“å­˜ç­–ç•¥ã€‚å…³äºRDDç¼“å­˜çš„æ›´å¤šä¿¡æ¯å¯å‚è§ï¼š<a href="http://spark.apache.org/docs/latest/programming-guide.html#rdd-persistenceã€‚" target="_blank" rel="external">http://spark.apache.org/docs/latest/programming-guide.html#rdd-persistenceã€‚</a></p>
</blockquote>
<h3 id="3-4-å¹¿æ’­å˜é‡å’Œç´¯åŠ å™¨"><a href="#3-4-å¹¿æ’­å˜é‡å’Œç´¯åŠ å™¨" class="headerlink" title="3.4 å¹¿æ’­å˜é‡å’Œç´¯åŠ å™¨"></a>3.4 å¹¿æ’­å˜é‡å’Œç´¯åŠ å™¨</h3><p>Sparkçš„å¦ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½æ˜¯èƒ½åˆ›å»ºä¸¤ç§ç‰¹æ®Šç±»å‹çš„å˜é‡ï¼š<strong>å¹¿æ’­å˜é‡</strong> å’Œ ç´¯åŠ å™¨ã€‚</p>
<p>å¹¿æ’­å˜é‡ï¼ˆbroadcast variableï¼‰ä¸ºåªè¯»å˜é‡ï¼Œå®ƒç”±è¿è¡ŒSparkContextçš„é©±åŠ¨ç¨‹åºåˆ›å»ºåå‘é€ç»™ä¼šå‚ä¸è®¡ç®—çš„èŠ‚ç‚¹ã€‚å¯¹é‚£äº›éœ€è¦è®©å„å·¥ä½œèŠ‚ç‚¹é«˜æ•ˆåœ°è®¿é—®ç›¸åŒæ•°æ®çš„åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚æœºå™¨å­¦ä¹ ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚</p>
<p>Sparkä¸‹åˆ›å»ºå¹¿æ’­å˜é‡åªéœ€åœ¨SparkContextä¸Šè°ƒç”¨ä¸€ä¸ªæ–¹æ³•å³å¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scala&gt; val broadcastAList = sc.broadcast(List(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;))</span><br><span class="line">broadcastAList: org.apache.spark.broadcast.Broadcast[List[String]] = Broadcast(11)</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure>
<p><strong>å¹¿æ’­å˜é‡</strong> ä¹Ÿå¯ä»¥è¢«éé©±åŠ¨ç¨‹åºæ‰€åœ¨çš„èŠ‚ç‚¹ï¼ˆå³å·¥ä½œèŠ‚ç‚¹ï¼‰è®¿é—®ï¼Œè®¿é—®çš„æ–¹æ³•æ˜¯è°ƒç”¨è¯¥å˜é‡çš„<code>value</code>æ–¹æ³•ï¼š</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> broadcastAList = sc.broadcast(<span class="type">List</span>(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>))</span><br><span class="line">broadcastAList: org.apache.spark.broadcast.<span class="type">Broadcast</span>[<span class="type">List</span>[<span class="type">String</span>]] = <span class="type">Broadcast</span>(<span class="number">11</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; sc.parallelize(<span class="type">List</span>(<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>)).map(x =&gt; broadcastAList.value ++ x).collect</span><br><span class="line">res5: <span class="type">Array</span>[<span class="type">List</span>[<span class="type">Any</span>]] = <span class="type">Array</span>(<span class="type">List</span>(a, b, c, d, e, <span class="number">1</span>), <span class="type">List</span>(a, b, c, d, e, <span class="number">2</span>), <span class="type">List</span>(a, b, c, d, e, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼Œcollect å‡½æ•°ä¸€èˆ¬ä»…åœ¨çš„ç¡®éœ€è¦å°†æ•´ä¸ªç»“æœé›†è¿”å›é©±åŠ¨ç¨‹åºå¹¶è¿›è¡Œåç»­å¤„ç†æ—¶æ‰æœ‰å¿…è¦è°ƒç”¨ã€‚å¦‚æœåœ¨ä¸€ä¸ªéå¸¸å¤§çš„æ•°æ®é›†ä¸Šè°ƒç”¨è¯¥å‡½æ•°ï¼Œå¯èƒ½è€—å°½é©±åŠ¨ç¨‹åºçš„å¯ç”¨å†…å­˜ï¼Œè¿›è€Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p>
</blockquote>
<p>é«˜è´Ÿè·çš„å¤„ç†åº”å°½å¯èƒ½åœ°åœ¨æ•´ä¸ªé›†ç¾¤ä¸Šè¿›è¡Œï¼Œä»è€Œé¿å…é©±åŠ¨ç¨‹åºæˆä¸ºç³»ç»Ÿç“¶é¢ˆã€‚ç„¶è€Œåœ¨ä¸å°‘æƒ…å†µä¸‹ï¼Œå°†ç»“æœæ”¶é›†åˆ°é©±åŠ¨ç¨‹åºçš„ç¡®æ˜¯æœ‰å¿…è¦çš„ã€‚å¾ˆå¤šæœºå™¨å­¦ä¹ ç®—æ³•çš„è¿­ä»£è¿‡ç¨‹ä¾¿å±äºè¿™ç±»æƒ…å†µã€‚</p>
<p><strong>ç´¯åŠ å™¨</strong>ï¼ˆaccumulatorï¼‰ä¹Ÿæ˜¯ä¸€ç§è¢«å¹¿æ’­åˆ°å·¥ä½œèŠ‚ç‚¹çš„å˜é‡ã€‚ç´¯åŠ å™¨ä¸å¹¿æ’­å˜é‡çš„å…³é”®ä¸åŒï¼Œæ˜¯åè€…åªèƒ½è¯»å–è€Œå‰è€…å´å¯ç´¯åŠ ã€‚</p>
<blockquote>
<p>å…³äºç´¯åŠ å™¨çš„æ›´å¤šä¿¡æ¯ï¼Œå¯å‚è§ã€ŠSparkç¼–ç¨‹æŒ‡å—ã€‹ï¼š<a href="http://spark.apache.org/docs/latest/programming-guide.html#shared-variablesã€‚" target="_blank" rel="external">http://spark.apache.org/docs/latest/programming-guide.html#shared-variablesã€‚</a></p>
</blockquote>
<h2 id="4-Spark-Scala-ç¼–ç¨‹å…¥é—¨"><a href="#4-Spark-Scala-ç¼–ç¨‹å…¥é—¨" class="headerlink" title="4. Spark Scala ç¼–ç¨‹å…¥é—¨"></a>4. Spark Scala ç¼–ç¨‹å…¥é—¨</h2><p><a href="https://github.com/blair1/spark/tree/master/Spark-Machine-Learning_8519OSCode/Chapter%2001/scala-spark-app" target="_blank" rel="external">scala-spark-app</a></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span>._</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * A simple Spark app in Scala</span><br><span class="line"> */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ScalaApp</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(<span class="string">"local[2]"</span>, <span class="string">"First Spark App"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// we take the raw data in CSV format and convert it into a set of records of the form (user, product, price)</span></span><br><span class="line">    <span class="keyword">val</span> data = sc.textFile(<span class="string">"data/UserPurchaseHistory.csv"</span>)</span><br><span class="line">      .map(line =&gt; line.split(<span class="string">","</span>))</span><br><span class="line">      .map(purchaseRecord =&gt; (purchaseRecord(<span class="number">0</span>), purchaseRecord(<span class="number">1</span>), purchaseRecord(<span class="number">2</span>)))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let's count the number of purchases</span></span><br><span class="line">    <span class="keyword">val</span> numPurchases = data.count()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let's count how many unique users made purchases</span></span><br><span class="line">    <span class="keyword">val</span> uniqueUsers = data.map &#123; <span class="keyword">case</span> (user, product, price) =&gt; user &#125;.distinct().count()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let's sum up our total revenue</span></span><br><span class="line">    <span class="keyword">val</span> totalRevenue = data.map &#123; <span class="keyword">case</span> (user, product, price) =&gt; price.toDouble &#125;.sum()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let's find our most popular product</span></span><br><span class="line">    <span class="keyword">val</span> productsByPopularity = data</span><br><span class="line">      .map &#123; <span class="keyword">case</span> (user, product, price) =&gt; (product, <span class="number">1</span>) &#125;</span><br><span class="line">      .reduceByKey(_ + _)</span><br><span class="line">      .collect()</span><br><span class="line">      .sortBy(-_._2)</span><br><span class="line">    <span class="keyword">val</span> mostPopular = productsByPopularity(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// finally, print everything out</span></span><br><span class="line">    println(<span class="string">"Total purchases: "</span> + numPurchases)</span><br><span class="line">    println(<span class="string">"Unique users: "</span> + uniqueUsers)</span><br><span class="line">    println(<span class="string">"Total revenue: "</span> + totalRevenue)</span><br><span class="line">    println(<span class="string">"Most popular product: %s with %d purchases"</span>.format(mostPopular._1, mostPopular._2))</span><br><span class="line"></span><br><span class="line">    sc.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-Spark-Java-ç¼–ç¨‹å…¥é—¨"><a href="#5-Spark-Java-ç¼–ç¨‹å…¥é—¨" class="headerlink" title="5. Spark Java ç¼–ç¨‹å…¥é—¨"></a>5. Spark Java ç¼–ç¨‹å…¥é—¨</h2><p>Java APIä¸Scala APIæœ¬è´¨ä¸Šå¾ˆç›¸ä¼¼ã€‚Scalaä»£ç å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è°ƒç”¨Javaä»£ç ï¼Œä½†æŸäº›Scalaä»£ç å´æ— æ³•åœ¨Javaé‡Œè°ƒç”¨ï¼Œç‰¹åˆ«æ˜¯é‚£äº›ä½¿ç”¨äº†éšå¼ç±»å‹è½¬æ¢ã€é»˜è®¤å‚æ•°å’Œé‡‡ç”¨äº†æŸäº›Scalaåå°„æœºåˆ¶çš„ä»£ç ã€‚</p>
<p>SparkContextæœ‰äº†å¯¹åº”çš„Javaç‰ˆæœ¬JavaSparkContextï¼Œè€ŒRDDåˆ™å¯¹åº”JavaRDDã€‚<br>Sparkæä¾›å¯¹Java 8åŒ¿åå‡½æ•°ï¼ˆlambdaï¼‰è¯­æ³•çš„æ”¯æŒã€‚</p>
<p>ç”¨Scalaç¼–å†™æ—¶ï¼Œé”®/å€¼å¯¹è®°å½•çš„RDDèƒ½æ”¯æŒä¸€äº›ç‰¹åˆ«çš„æ“ä½œï¼ˆæ¯”å¦‚reduceByKeyå’ŒsaveAsSequenceFileï¼‰ã€‚è¿™äº›æ“ä½œå¯ä»¥é€šè¿‡éšå¼ç±»å‹è½¬æ¢è€Œè‡ªåŠ¨è¢«è°ƒç”¨ã€‚ç”¨Javaç¼–å†™æ—¶ï¼Œåˆ™éœ€è¦ç‰¹åˆ«ç±»å‹çš„JavaRDDæ¥æ”¯æŒè¿™äº›æ“ä½œã€‚å®ƒä»¬åŒ…æ‹¬ç”¨äºé”®/å€¼å¯¹çš„JavaPairRDDï¼Œä»¥åŠç”¨äºæ•°å€¼è®°å½•çš„JavaDoubleRDDã€‚</p>
<p>Java 8 RDDä»¥åŠJava 8 lambdaè¡¨è¾¾å¼æ›´å¤šä¿¡æ¯å¯å‚è§ã€ŠSparkç¼–ç¨‹æŒ‡å—ã€‹ï¼š<a href="http://spark.apache.org/docs/latest/programming-guide.html#rdd-operationsã€‚" target="_blank" rel="external">http://spark.apache.org/docs/latest/programming-guide.html#rdd-operationsã€‚</a></p>
<h2 id="6-Spark-Python-ç¼–ç¨‹å…¥é—¨"><a href="#6-Spark-Python-ç¼–ç¨‹å…¥é—¨" class="headerlink" title="6. Spark Python ç¼–ç¨‹å…¥é—¨"></a>6. Spark Python ç¼–ç¨‹å…¥é—¨</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="string">"""ç”¨Pythonç¼–å†™çš„ä¸€ä¸ªç®€å•Sparkåº”ç”¨"""</span></span><br><span class="line"><span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkContext</span><br><span class="line"></span><br><span class="line">sc = SparkContext(<span class="string">"local[2]"</span>, <span class="string">"First Spark App"</span>)</span><br><span class="line"><span class="comment"># å°†CSVæ ¼å¼çš„åŸå§‹æ•°æ®è½¬åŒ–ä¸º(user,product,price)æ ¼å¼çš„è®°å½•é›†</span></span><br><span class="line">data = sc.textFile(<span class="string">"data/UserPurchaseHistory.csv"</span>).map(<span class="keyword">lambda</span> line:</span><br><span class="line">line.split(<span class="string">","</span>)).map(<span class="keyword">lambda</span> record: (record[<span class="number">0</span>], record[<span class="number">1</span>], record[<span class="number">2</span>]))</span><br><span class="line"><span class="comment"># æ±‚æ€»è´­ä¹°æ¬¡æ•°</span></span><br><span class="line">numPurchases = data.count()</span><br><span class="line"><span class="comment"># æ±‚æœ‰å¤šå°‘ä¸åŒå®¢æˆ·è´­ä¹°è¿‡å•†å“</span></span><br><span class="line">uniqueUsers = data.map(<span class="keyword">lambda</span> record: record[<span class="number">0</span>]).distinct().count()</span><br><span class="line"><span class="comment"># æ±‚å’Œå¾—å‡ºæ€»æ”¶å…¥</span></span><br><span class="line">totalRevenue = data.map(<span class="keyword">lambda</span> record: float(record[<span class="number">2</span>])).sum()</span><br><span class="line"><span class="comment"># æ±‚æœ€ç•…é”€çš„äº§å“æ˜¯ä»€ä¹ˆ</span></span><br><span class="line">products = data.map(<span class="keyword">lambda</span> record: (record[<span class="number">1</span>], <span class="number">1.0</span>)).</span><br><span class="line">reduceByKey(<span class="keyword">lambda</span> a, b: a + b).collect()</span><br><span class="line">mostPopular = sorted(products, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse=<span class="keyword">True</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Total purchases: %d"</span> % numPurchases</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Unique users: %d"</span> % uniqueUsers</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Total revenue: %2.2f"</span> % totalRevenue</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Most popular product: %s with %d purchases"</span> % (mostPopular[<span class="number">0</span>], mostPopular[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>åŒ¿åå‡½æ•°åœ¨Pythonè¯­è¨€ä¸­äº¦ç§°lambdaå‡½æ•°ï¼Œlambdaä¹Ÿæ˜¯è¯­æ³•è¡¨è¾¾ä¸Šçš„å…³é”®å­—ã€‚</p>
<p>ç”¨Scalaç¼–å†™æ—¶ï¼Œä¸€ä¸ªå°†è¾“å…¥xæ˜ å°„ä¸ºè¾“å‡ºyçš„åŒ¿åå‡½æ•°è¡¨ç¤ºä¸ºx =&gt; yï¼Œè€Œåœ¨Pythonä¸­åˆ™æ˜¯lambda x : yã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  python-spark-app git:(master) âœ— <span class="built_in">pwd</span></span><br><span class="line">/Users/hp/ghome/hadoop-spark/spark/Spark-Machine-Learning_8519OSCode/Chapter01/python-spark-app</span><br><span class="line">âœ  python-spark-app git:(master) âœ— <span class="variable">$SPARK_HOME</span>/bin/spark-submit pythonapp.py</span><br><span class="line">Using Spark<span class="string">'s default log4j profile: org/apache/spark/log4j-defaults.properties</span><br><span class="line">16/08/26 15:56:02 INFO SparkContext: Running Spark version 1.5.2</span><br><span class="line">...</span><br><span class="line">Total purchases: 5</span><br><span class="line">Unique users: 4</span><br><span class="line">Total revenue: 39.91</span><br><span class="line">Most popular product: iPhone Cover with 2 purchases</span><br><span class="line">16/08/26 15:56:07 INFO SparkUI: Stopped Spark web UI at http://192.168.143.84:4040</span><br><span class="line">...</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Sparkçš„Python APIå‡ ä¹è¦†ç›–äº†æ‰€æœ‰Scala APIæ‰€èƒ½æä¾›çš„åŠŸèƒ½. ä½†çš„ç¡®æœ‰äº›ç‰¹æ€§ï¼Œæ¯”å¦‚Spark Streamingå’Œä¸ªåˆ«çš„APIæ–¹æ³•ï¼Œæš‚ä¸æ”¯æŒã€‚<br><a href="http://spark.apache.org/docs/latest/programming-guide.html" target="_blank" rel="external">å…·ä½“å‚è§ã€ŠSparkç¼–ç¨‹æŒ‡å—ã€‹çš„Pythonéƒ¨åˆ†</a></p>
</blockquote>
<h2 id="7-å°ç»“"><a href="#7-å°ç»“" class="headerlink" title="7. å°ç»“"></a>7. å°ç»“</h2><p>ä½“ä¼šäº† å‡½æ•°å¼ ç¼–ç¨‹çš„å¨åŠ›ï¼Œ scalaã€python éƒ½å¯ä»¥ã€‚java ä¸é€‚åˆå†™ spark ç¨‹åº</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[SBT Hello]]></title>
      <url>http://shopee.ai/2016/03/16/spark/spark-scala-sbt-hello/</url>
      <content type="html"><![CDATA[<ol>
<li>ä»€ä¹ˆæ˜¯ SBT ?</li>
<li>SBT é¡¹ç›®å·¥ç¨‹ç›®å½•</li>
<li>SBT ç¼–è¯‘æ‰“åŒ… Scala HelloWorld</li>
</ol>
<a id="more"></a>
<h2 id="1-SBT-What"><a href="#1-SBT-What" class="headerlink" title="1. SBT, What?"></a>1. SBT, What?</h2><p>SBT æ˜¯ Simple Build Tool çš„ç®€ç§°. SBT å¯ä»¥è®¤ä¸ºæ˜¯ Scala ä¸–ç•Œçš„ mavenã€‚</p>
<p>SBTçš„ç€è¿·ç‰¹æ€§ï¼Œæ¯”å¦‚ï¼š</p>
<ol>
<li>DSL buildæ„å»º, å¹¶å¯æ··åˆæ„å»º Java å’Œ Scala é¡¹ç›®ï¼›</li>
<li>é€šè¿‡è§¦å‘æ‰§è¡Œ (trigger execution) ç‰¹æ€§æ”¯æŒæŒç»­çš„ç¼–è¯‘ä¸æµ‹è¯•ï¼›</li>
<li>å¯ä»¥é‡ç”¨ Maven æˆ–è€… ivyçš„repository è¿›è¡Œä¾èµ–ç®¡ç†ï¼›</li>
<li>å¢é‡ç¼–è¯‘ã€å¹¶è¡Œä»»åŠ¡ç­‰ç­‰â€¦</li>
</ol>
<h2 id="2-Hello-SBT"><a href="#2-Hello-SBT" class="headerlink" title="2. Hello, SBT"></a>2. Hello, SBT</h2><p>ä¸€ä¸ªæè‡´ç®€å•çš„ Scalaé¡¹ç›® ï¼ˆhello simple projectï¼‰</p>
<p>hello/HelloWorld.scala</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">        println(<span class="string">"Hello, SBT"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>sbt run</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">âœ  hello git:(master) âœ— sbt</span><br><span class="line">[info] Set current project to hello (in build file:/Users/hp/ghome/Spark-Scala/hello/)</span><br><span class="line">&gt; run</span><br><span class="line">[info] Updating &#123;file:/Users/hp/ghome/Spark-Scala/hello/&#125;hello...</span><br><span class="line">[info] Resolving org.fusesource.jansi#jansi;1.4 ...</span><br><span class="line">[info] Done updating.</span><br><span class="line">[info] Compiling 1 Scala source to /Users/hp/ghome/Spark-Scala/hello/target/scala-2.10/classes...</span><br><span class="line">[info] Running HelloWorld</span><br><span class="line">Hello, SBT</span><br><span class="line">[success] Total time: 3 s, completed 2016-3-17 9:38:44</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3-SBT-é¡¹ç›®å·¥ç¨‹ç»“æ„è¯¦è§£"><a href="#3-SBT-é¡¹ç›®å·¥ç¨‹ç»“æ„è¯¦è§£" class="headerlink" title="3. SBT é¡¹ç›®å·¥ç¨‹ç»“æ„è¯¦è§£"></a>3. SBT é¡¹ç›®å·¥ç¨‹ç»“æ„è¯¦è§£</h2><p>ä¸€ä¸ªå…¸å‹çš„SBTé¡¹ç›®å·¥ç¨‹ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://image-static.segmentfault.com/396/971/3969713528-56ea0c71e094e_articlex" alt="segmentfault"></p>
<p><strong>build.sbt è¯¦è§£</strong></p>
<p>build.sbt ç›¸å½“äº maven-pom.xmlï¼Œå®ƒæ˜¯buildå®šä¹‰æ–‡ä»¶ã€‚ </p>
<p>SBT è¿è¡Œ ä½¿ç”¨ 2 ç§å½¢å¼ çš„ build å®šä¹‰æ–‡ä»¶ï¼Œ</p>
<ol>
<li>one, put your projectâ€™s base directoryï¼Œâ€“ build.sbtï¼Œ a simple build definitionï¼› </li>
<li>other one, put project directoryï¼Œcan Use Scala language, more expressiveã€‚</li>
</ol>
<p>ä¸€ä¸ªç®€å•çš„build.sbtæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">name := <span class="string">"hello"</span>      <span class="comment">// é¡¹ç›®åç§°</span></span><br><span class="line"></span><br><span class="line">organization := <span class="string">"xxx.xxx.xxx"</span>  <span class="comment">// ç»„ç»‡åç§°</span></span><br><span class="line"></span><br><span class="line">version := <span class="string">"0.0.1-SNAPSHOT"</span>  <span class="comment">// ç‰ˆæœ¬å·</span></span><br><span class="line"></span><br><span class="line">scalaVersion := <span class="string">"2.9.2"</span>   <span class="comment">// ä½¿ç”¨çš„Scalaç‰ˆæœ¬å·</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶å®ƒbuildå®šä¹‰</span></span><br></pre></td></tr></table></figure>
<p> name å’Œ versionçš„å®šä¹‰æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºå¦‚æœæƒ³ç”ŸæˆjaråŒ…çš„è¯ï¼Œè¿™ä¸¤ä¸ªå±æ€§çš„å€¼å°†ä½œä¸ºjaråŒ…åç§°çš„ä¸€éƒ¨åˆ†, å„è¡Œä¹‹é—´ä»¥ç©ºè¡Œåˆ†éš”ã€‚<br>é™¤äº†å®šä¹‰ä»¥ä¸Šé¡¹ç›®ç›¸å…³ä¿¡æ¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨build.sbtä¸­æ·»åŠ é¡¹ç›®ä¾èµ–ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// æ·»åŠ æºä»£ç ç¼–è¯‘æˆ–è€…è¿è¡ŒæœŸé—´ä½¿ç”¨çš„ä¾èµ–</span><br><span class="line">libraryDependencies += &quot;ch.qos.logback&quot; % &quot;logback-core&quot; % &quot;1.0.0&quot;</span><br><span class="line"></span><br><span class="line">libraryDependencies += &quot;ch.qos.logback&quot; % &quot;logback-classic&quot; % &quot;1.0.0&quot;</span><br><span class="line"></span><br><span class="line">// æˆ–è€…</span><br><span class="line"></span><br><span class="line">libraryDependencies ++= Seq(</span><br><span class="line">                            &quot;ch.qos.logback&quot; % &quot;logback-core&quot; % &quot;1.0.0&quot;,</span><br><span class="line">                            &quot;ch.qos.logback&quot; % &quot;logback-classic&quot; % &quot;1.0.0&quot;,</span><br><span class="line">                            ...</span><br><span class="line">                            )</span><br><span class="line"></span><br><span class="line">// æ·»åŠ æµ‹è¯•ä»£ç ç¼–è¯‘æˆ–è€…è¿è¡ŒæœŸé—´ä½¿ç”¨çš„ä¾èµ–</span><br><span class="line">libraryDependencies ++= Seq(&quot;org.scalatest&quot; %% &quot;scalatest&quot; % &quot;1.8&quot; % &quot;test&quot;)</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œ build.sbtæ–‡ä»¶ä¸­è¿˜å¯ä»¥å®šä¹‰å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚æ·»åŠ æ’ä»¶ï¼Œå£°æ˜é¢å¤–çš„repositoryï¼Œå£°æ˜å„ç§ç¼–è¯‘å‚æ•°ç­‰ç­‰</p>
<p><strong>projectç›®å½•å³ç›¸å…³æ–‡ä»¶ä»‹ç»</strong></p>
<p>projectç›®å½•ä¸‹çš„å‡ ä¸ªæ–‡ä»¶å¯ä»¥æ ¹æ®æƒ…å†µæ·»åŠ ã€‚</p>
<p>build.properties æ–‡ä»¶å£°æ˜ä½¿ç”¨çš„è¦ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬çš„SBTæ¥ç¼–è¯‘å½“å‰é¡¹ç›®ï¼Œ æœ€æ–°çš„sbt boot launcherå¯ä»¥èƒ½å¤Ÿå…¼å®¹ç¼–è¯‘æ‰€æœ‰0.10.xç‰ˆæœ¬çš„SBTæ„å»ºé¡¹ç›®ï¼Œæ¯”å¦‚å¦‚æœæˆ‘ä½¿ç”¨çš„æ˜¯0.12ç‰ˆæœ¬çš„sbtï¼Œä½†å´æƒ³ç”¨0.11.3ç‰ˆæœ¬çš„sbtæ¥ç¼–è¯‘å½“å‰é¡¹ç›®ï¼Œåˆ™å¯ä»¥åœ¨build.propertiesæ–‡ä»¶ä¸­æ·»åŠ sbt.version=0.11.3æ¥æŒ‡å®šã€‚</p>
<p>plugins.sbt æ–‡ä»¶ç”¨æ¥å£°æ˜å½“å‰é¡¹ç›®å¸Œæœ›ä½¿ç”¨å“ªäº›æ’ä»¶æ¥å¢å¼ºå½“å‰é¡¹ç›®ä½¿ç”¨çš„sbtçš„åŠŸèƒ½ï¼Œæ¯”å¦‚åƒassemblyåŠŸèƒ½ï¼Œæ¸…ç†ivy local cacheåŠŸèƒ½ï¼Œéƒ½æœ‰ç›¸åº”çš„sbtæ’ä»¶ä¾›ä½¿ç”¨ï¼Œ è¦ä½¿ç”¨è¿™äº›æ’ä»¶åªéœ€è¦åœ¨ plugins.sbt ä¸­å£°æ˜å³å¯.</p>
<p>ä¸ºäº†èƒ½å¤ŸæˆåŠŸåŠ è½½è¿™äº›sbtæ’ä»¶ï¼Œæˆ‘ä»¬å°†ä»–ä»¬çš„æŸ¥æ‰¾ä½ç½®æ·»åŠ åˆ°resoloverså½“ä¸­.</p>
<p><strong>å…¶ä»–</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ touch build.sbt</span><br><span class="line">$ mkdir src</span><br><span class="line">$ mkdir src/main</span><br><span class="line">$ mkdir src/main/java</span><br><span class="line">$ mkdir src/main/resources</span><br><span class="line">$ mkdir src/main/scala</span><br><span class="line">$ mkdir src/test</span><br><span class="line">$ mkdir src/test/java</span><br><span class="line">$ mkdir src/test/resources</span><br><span class="line">$ mkdir src/test/scala</span><br><span class="line">$ mkdir project</span><br><span class="line">$ ...</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨giter8æ¥è‡ªåŠ¨åŒ–ä»¥ä¸Šæ­¥éª¤.<br>giter8çš„æ›´å¤šä¿¡æ¯å¯å‚è€ƒ<a href="https://github.com//giter8" target="_blank" rel="external">https://github.com//giter8</a>.</p>
<h2 id="4-SBT-Cmd"><a href="#4-SBT-Cmd" class="headerlink" title="4. SBT Cmd"></a>4. SBT Cmd</h2><ol>
<li>actions â€“ æ˜¾ç¤ºå¯¹å½“å‰å·¥ç¨‹å¯ç”¨çš„å‘½ä»¤</li>
<li>update â€“ ä¸‹è½½ä¾èµ–</li>
<li>compile â€“ ç¼–è¯‘ä»£ç </li>
<li>test â€“ è¿è¡Œæµ‹è¯•ä»£ç </li>
<li>package â€“ åˆ›å»ºä¸€ä¸ªå¯å‘å¸ƒçš„jaråŒ…</li>
<li>publish-local â€“ æŠŠæ„å»ºå‡ºæ¥çš„jaråŒ…å®‰è£…åˆ°æœ¬åœ°çš„ivyç¼“å­˜</li>
<li>publish â€“ æŠŠjaråŒ…å‘å¸ƒåˆ°è¿œç¨‹ä»“åº“ï¼ˆå¦‚æœé…ç½®äº†çš„è¯)</li>
</ol>
<p>more cmd</p>
<ol>
<li>test-failed â€“ è¿è¡Œå¤±è´¥çš„spec</li>
<li>test-quick â€“ è¿è¡Œæ‰€æœ‰å¤±è´¥çš„ä»¥åŠ/æˆ–è€…æ˜¯ç”±ä¾èµ–æ›´æ–°çš„spec</li>
<li>clean-cache â€“ æ¸…é™¤æ‰€æœ‰çš„sbtç¼“å­˜ã€‚ç±»ä¼¼äºsbtçš„cleanå‘½ä»¤</li>
<li>clean-lib â€“ åˆ é™¤lib_managedä¸‹çš„æ‰€æœ‰å†…å®¹</li>
</ol>
<h2 id="5-Scala-HelloWorld"><a href="#5-Scala-HelloWorld" class="headerlink" title="5. Scala HelloWorld"></a>5. Scala HelloWorld</h2><p>SBT Scala HelloWorld å…·ä½“è¯·çœ‹ : <a href="https://github.com/blair1/language/tree/master/scala/ScalaWorld" target="_blank" rel="external">Scala-Projects/HelloWorld</a></p>
<p>âœ  HelloWorld&gt; sbt package</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[info] Loading project definition from /Users/hp/spark/HelloWorld/project</span><br><span class="line">[info] Set current project to HelloWorld (in build file:/Users/hp/spark/HelloWorld/)</span><br><span class="line">[info] Packaging /Users/hp/spark/HelloWorld/target/scala-2.11/helloworld_2.11-0.0.1-SNAPSHOT.jar ...</span><br><span class="line">[info] Done packaging.</span><br><span class="line">[success] Total time: 1 s, completed 2016-3-17 9:05:44</span><br></pre></td></tr></table></figure>
<p>âœ  HelloWorld&gt; sbt run</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[info] Loading project definition from /Users/hp/spark/HelloWorld/project</span><br><span class="line">[info] Set current project to HelloWorld (in build file:/Users/hp/spark/HelloWorld/)</span><br><span class="line">[info] Running Hi</span><br><span class="line">Hi!</span><br><span class="line">[success] Total time: 1 s, completed 2016-3-17 9:07:43</span><br></pre></td></tr></table></figure>
<h2 id="6-Spark-HelloWorld"><a href="#6-Spark-HelloWorld" class="headerlink" title="6. Spark HelloWorld"></a>6. Spark HelloWorld</h2><p>Spark HelloWorld å…·ä½“è¯·çœ‹ : <a href="https://github.com/blair101/bigdata-tools/tree/master/spark/HelloWorld" target="_blank" rel="external">Spark-Projects/HelloWorld</a></p>
<p>âœ  HelloWorld&gt; sbt compile<br>âœ  HelloWorld&gt; sbt package</p>
<pre><code class="shell">$SPARK_HOME/bin/spark-submit \
  --class &quot;HelloWorld&quot; \
    target/scala-2.11/helloworld_2.11-1.0.jar
</code></pre>
<h2 id="7-Referenced"><a href="#7-Referenced" class="headerlink" title="7. Referenced"></a>7. Referenced</h2><p>å‚è€ƒ : <a href="http://www.scala-sbt.org/0.13/docs/zh-cn/Getting-Started.html" target="_blank" rel="external">scala-sbt.org/0.13/docs/zh-cn/Getting-Started.html</a><br>å‚è€ƒ : <a href="https://github.com/CSUG/real_world_scala/blob/master/02_sbt.markdown" target="_blank" rel="external">CSUG/real_world_scala/blob/master/02_sbt.markdown</a><br>å‚è€ƒ : <a href="http://www.scala-sbt.org/0.13.1/docs/Getting-Started/Hello.html" target="_blank" rel="external">scala-sbt.org/0.13.1/docs/Getting-Started</a><br>å‚è€ƒ : <a href="http://article.yeeyan.org/view/442873/404261" target="_blank" rel="external">è¯‘è¨€ç½‘</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å¤§æ•°æ®å¹³å°CDHé›†ç¾¤åœ¨çº¿å®‰è£…]]></title>
      <url>http://shopee.ai/2016/03/14/hadoop/hadoop-cdh-install-online/</url>
      <content type="html"><![CDATA[<p>ä»‹ç»äº† CDH é›†ç¾¤çš„æ­å»ºä¸å®‰è£…ï¼Œå…¶ä¸­ Server å®‰è£…æ­¥éª¤éå¸¸å‡†ç¡®, Agent éœ€è¦è¿›ä¸€æ­¥éªŒè¯.</p>
<a id="more"></a>
<p>æ ‡ç­¾ï¼š Cloudera-Manager CDH Hadoop éƒ¨ç½² é›†ç¾¤</p>
<blockquote>
<p>æ‘˜è¦ï¼šç®¡ç†ã€éƒ¨ç½²Hadoopé›†ç¾¤éœ€è¦å·¥å…·ï¼ŒCloudera Managerä¾¿æ˜¯å…¶ä¸€ã€‚æœ¬æ–‡è¯¦ç»†è®°å½•äº†ä»¥åœ¨çº¿æ–¹å¼éƒ¨ç½²CDHé›†ç¾¤&gt;çš„æ­¥éª¤ã€‚</p>
</blockquote>
<p>ä»¥Apache Hadoopä¸ºä¸»å¯¼çš„å¤§æ•°æ®æŠ€æœ¯çš„å‡ºç°ï¼Œä½¿å¾—ä¸­å°å‹å…¬å¸å¯¹äºå¤§æ•°æ®çš„å­˜å‚¨ä¸å¤„ç†ä¹Ÿæ‹¥æœ‰äº†æ­¦å™¨ã€‚</p>
<p>ç›®å‰Hadoopæ¯”è¾ƒæµè¡Œçš„ä¸»è¦æœ‰2ä¸ªç‰ˆæœ¬ï¼ŒApacheå’ŒClouderaç‰ˆæœ¬ã€‚</p>
<p>Apache Hadoopï¼šç»´æŠ¤äººå‘˜æ¯”è¾ƒå¤šï¼Œæ›´æ–°é¢‘ç‡æ¯”è¾ƒå¿«ï¼Œä½†æ˜¯ç¨³å®šæ€§æ¯”è¾ƒå·®ã€‚<br>Cloudera Hadoopï¼ˆCDHï¼‰ï¼šCDHï¼šClouderaå…¬å¸çš„å‘è¡Œç‰ˆæœ¬ï¼ŒåŸºäºApache Hadoopçš„äºŒæ¬¡å¼€å‘ï¼Œä¼˜åŒ–äº†ç»„ä»¶å…¼å®¹å’Œäº¤äº’æ¥å£ã€ç®€åŒ–å®‰è£…é…ç½®ã€å¢åŠ Clouderaå…¼å®¹ç‰¹æ€§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å¤§æ•°æ®å¹³å°CDHé›†ç¾¤ cdh-5.70-rpm_install è¯¦ç»†è¿‡ç¨‹</span><br></pre></td></tr></table></figure>
<h1 id="Part-1-install-cdh-server"><a href="#Part-1-install-cdh-server" class="headerlink" title="Part 1 install cdh server"></a>Part 1 install cdh server</h1><h2 id="1-1-Ready-install-resources"><a href="#1-1-Ready-install-resources" class="headerlink" title="1.1 Ready install resources"></a>1.1 Ready install resources</h2><ol>
<li>CentOS Linux release 7.1.1503 (Core) cm-5.7.0 </li>
<li>cloudera-manager-installer.bin</li>
<li>adduser deploy</li>
</ol>
<p>centos7.1 åœ¨å®‰è£…è¿‡ç¨‹æ—¶ï¼Œç½‘ç»œé…ç½®ï¼Œè®¾ç½®é™æ€IP</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-eth0</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®é™æ€ipï¼Œä»¥åŠæŒ‡å®šipåœ°å€</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DEVICE=&quot;eth0&quot;</span><br><span class="line">BOOTPROTO=&quot;static&quot;</span><br><span class="line">IPADDR=192.168.1.110</span><br><span class="line">NM_CONTROLLED=&quot;yes&quot;</span><br><span class="line">ONBOOT=&quot;yes&quot;</span><br><span class="line">TYPE=&quot;Ethernet&quot;</span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line">DNS2=8.8.4.4</span><br><span class="line">GATEWAY=192.168.1.1</span><br></pre></td></tr></table></figure>
<h2 id="1-2-ç½‘ç»œé…ç½®ï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼‰"><a href="#1-2-ç½‘ç»œé…ç½®ï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼‰" class="headerlink" title="1.2 ç½‘ç»œé…ç½®ï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼‰"></a>1.2 ç½‘ç»œé…ç½®ï¼ˆæ‰€æœ‰èŠ‚ç‚¹ï¼‰</h2><p><strong>ä¿®æ”¹hostnameä¸º cdh-server7</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ã€€ã€€RedHat çš„ hostnameï¼Œå°±ä¿®æ”¹ /etc/sysconfig/networkæ–‡ä»¶ï¼Œå°†é‡Œé¢çš„ HOSTNAME è¿™ä¸€è¡Œä¿®æ”¹æˆ HOSTNAME=NEWNAMEï¼Œå…¶ä¸­ NEWNAME å°±æ˜¯ä½ è¦è®¾ç½®çš„ hostnameã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€Debianå‘è¡Œç‰ˆçš„ hostname çš„é…ç½®æ–‡ä»¶æ˜¯ /etc/hostname</span><br></pre></td></tr></table></figure>
<p><strong>ä¿®æ”¹ipä¸ä¸»æœºåçš„å¯¹åº”å…³ç³»</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 ~]# vi /etc/hosts #ä¿®æ”¹ipä¸ä¸»æœºåçš„å¯¹åº”å…³ç³»:</span><br><span class="line">192.168.181.190 node190</span><br><span class="line">192.168.181.198 node198</span><br><span class="line">192.168.181.196 node196</span><br></pre></td></tr></table></figure>
<p><strong>é‡å¯ç½‘ç»œæœåŠ¡ç”Ÿæ•ˆ</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 ~]# service network restart</span><br></pre></td></tr></table></figure>
<p><strong>å…³é—­SELINUX</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æŸ¥çœ‹SELINUXçŠ¶æ€</span><br><span class="line"></span><br><span class="line">[root@cdh-server7 ~]#getenforce</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è‹¥ SELINUX æ²¡æœ‰å…³é—­ï¼ŒæŒ‰ç…§ä¸‹è¿°æ–¹å¼å…³é—­</span><br><span class="line"></span><br><span class="line">vi /etc/selinux/config</span><br><span class="line">ä¿®æ”¹SELinux=disabledã€‚é‡å¯ç”Ÿæ•ˆï¼Œå¯ä»¥ç­‰åé¢éƒ½è®¾ç½®å®Œäº†é‡å¯ä¸»æœº</span><br><span class="line"># This file controls the state of SELinux on the system.</span><br><span class="line"># SELINUX= can take one of these three values:</span><br><span class="line">#       enforcing - SELinux security policy is enforced.</span><br><span class="line">#       permissive - SELinux prints warnings instead of enforcing.</span><br><span class="line">#       disabled - SELinux is fully disabled.</span><br><span class="line">SELINUX=disabled</span><br><span class="line"># SELINUXTYPE= type of policy in use. Possible values are:</span><br><span class="line">#       targeted - Only targeted network daemons are protected.</span><br><span class="line">#       strict - Full SELinux protection.</span><br><span class="line">SELINUXTYPE=targeted</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 ~]# ping www.baidu.com</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ­¥éª¤æ‰§è¡Œå®Œæ¯•åï¼Œé‡å¯ä¸»æœº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>
<p>é‡å¯åå†æ¬¡æ£€æŸ¥ä¸‹ä»¥ä¸Šå‡ ç‚¹ï¼Œç¡®ä¿ç¯å¢ƒé…ç½®æ­£ç¡®ã€‚</p>
<h2 id="1-3-å¸è½½-openjdk-æ‰€æœ‰èŠ‚ç‚¹"><a href="#1-3-å¸è½½-openjdk-æ‰€æœ‰èŠ‚ç‚¹" class="headerlink" title="1.3 å¸è½½ openjdk (æ‰€æœ‰èŠ‚ç‚¹)"></a>1.3 å¸è½½ openjdk (æ‰€æœ‰èŠ‚ç‚¹)</h2><blockquote>
<p>æ³¨æ„ : å¦‚æœæ²¡æœ‰openjdk, åˆ™ä¸éœ€è¦å¸è½½ï¼Œé»˜è®¤ centos7 æ²¡æœ‰</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 deploy]# rpm -qa | grep java</span><br><span class="line">[root@cdh-server7 deploy]# rpm -qa | grep jdk</span><br><span class="line"></span><br><span class="line"># if exist java or jdk, uninstall, erase it.  example under this...</span><br><span class="line">[root@cdh-server7 deploy]# rpm -e --nodeps java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64</span><br><span class="line">[root@cdh-server7 deploy]# rpm -e --nodeps java-1.6.0-openjdk-1.6.0.0-1.66.1.13.0.el6.x86_64</span><br><span class="line">[root@cdh-server7 deploy]# rpm -e --nodeps java-1.7.0-openjdk-1.7.0.45-2.4.3.3.el6.x86_64</span><br></pre></td></tr></table></figure>
<h2 id="1-4-å¸è½½-centOS7-é»˜è®¤mysql"><a href="#1-4-å¸è½½-centOS7-é»˜è®¤mysql" class="headerlink" title="1.4 å¸è½½ centOS7 é»˜è®¤mysql"></a>1.4 å¸è½½ centOS7 é»˜è®¤mysql</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 deploy]# rpm -qa | grep mariadb</span><br><span class="line">[root@cdh-server7 deploy]# rpm -e --nodeps mariadb-libs-5.5.41-2.el7_0.x86_64</span><br></pre></td></tr></table></figure>
<h2 id="1-5-Cloudera-Managerå®‰è£…"><a href="#1-5-Cloudera-Managerå®‰è£…" class="headerlink" title="1.5 Cloudera Managerå®‰è£…"></a>1.5 Cloudera Managerå®‰è£…</h2><p>ä¸‹è½½èµ„æºæ–‡ä»¶<a href="https://archive.cloudera.com/cm5/redhat/7/x86_64/cm/cloudera-manager.repo" target="_blank" rel="external">https://archive.cloudera.com/cm5/redhat/7/x86_64/cm/cloudera-manager.repo</a></p>
<p>å°†cloudera-manager.repoæ–‡ä»¶æ‹·è´åˆ°æ‰€æœ‰èŠ‚ç‚¹çš„/etc/yum.repos.d/æ–‡ä»¶å¤¹ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@node196 ]# cd /home/deploy/cdh</span><br><span class="line">[root@node196 cdh]# wget https://archive.cloudera.com/cm5/redhat/7/x86_64/cm/cloudera-manager.repo</span><br><span class="line">[root@cdh-server7 cdh]# mv cloudera-manager.repo /etc/yum.repos.d/</span><br></pre></td></tr></table></figure>
<p>éªŒè¯repoæ–‡ä»¶æ˜¯å¦èµ·æ•ˆ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum list|grep cloudera</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 cdh]# yum list | grep cloudera</span><br><span class="line">cloudera-manager-agent.x86_64           5.7.0-1.cm560.p0.54.el7        cloudera-manager</span><br><span class="line">cloudera-manager-daemons.x86_64         5.7.0-1.cm560.p0.54.el7        cloudera-manager</span><br><span class="line">cloudera-manager-server.x86_64          5.7.0-1.cm560.p0.54.el7        cloudera-manager</span><br><span class="line">cloudera-manager-server-db-2.x86_64     5.7.0-1.cm560.p0.54.el7        cloudera-manager</span><br><span class="line">enterprise-debuginfo.x86_64             5.7.0-1.cm560.p0.54.el7        cloudera-manager</span><br><span class="line">oracle-j2sdk1.7.x86_64                  1.7.0+update67-1               cloudera-manager</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåˆ—å‡ºçš„ä¸æ˜¯ä½ å®‰è£…çš„ç‰ˆæœ¬ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤é‡è¯•</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum clean all </span><br><span class="line">yum list | grep cloudera</span><br></pre></td></tr></table></figure>
<p>ä¸Šä¼ ä¸‹åˆ— <strong>rpm åŒ…</strong> åˆ° [root@cdh-server7] çš„ /home/deploy/cdh/cloudera-rpms (ä»»æ„ç›®å½•)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd /home/deploy/cdh/cloudera-rpms</span><br><span class="line">cloudera-manager-agent-5.7.0-1.cm560.p0.54.el7.x86_64.rpm</span><br><span class="line">cloudera-manager-daemons-5.7.0-1.cm560.p0.54.el7.x86_64.rpm</span><br><span class="line">cloudera-manager-server-5.7.0-1.cm560.p0.54.el7.x86_64.rpm   ## agent not use</span><br><span class="line">cloudera-manager-server-db-2-5.7.0-1.cm560.p0.54.el7.x86_64.rpm  ## agent not use</span><br><span class="line">enterprise-debuginfo-5.7.0-1.cm560.p0.54.el7.x86_64.rpm</span><br><span class="line">oracle-j2sdk1.7-1.7.0+update67-1.x86_64.rpm</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ : å¯ä»<a href="https://archive.cloudera.com/cm5/redhat/7/x86_64/cm/5/RPMS/x86_64/" target="_blank" rel="external">https://archive.cloudera.com/cm5/redhat/7/x86_64/cm/5/RPMS/x86_64/</a> ä¸‹è½½ç›¸å…³rpmåŒ…</p>
</blockquote>
<p>åˆ‡æ¢åˆ°rpmsç›®å½•ä¸‹ï¼Œæ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 cdh]# cd /home/deploy/cdh/cloudera-rpms/</span><br><span class="line">[root@cdh-server7 cloudera-rpms]# yum -y install *.rpm</span><br></pre></td></tr></table></figure>
<h2 id="1-6-æ‹·è´èµ„æºåŒ…åˆ°ç›®æ ‡ç›®å½•"><a href="#1-6-æ‹·è´èµ„æºåŒ…åˆ°ç›®æ ‡ç›®å½•" class="headerlink" title="1.6 æ‹·è´èµ„æºåŒ…åˆ°ç›®æ ‡ç›®å½•"></a>1.6 æ‹·è´èµ„æºåŒ…åˆ°ç›®æ ‡ç›®å½•</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä» http://archive.cloudera.com/cdh5/parcels/5.7.0/ ä¸‹è½½èµ„æºåŒ…</span><br></pre></td></tr></table></figure>
<p>å°†ä¹‹å‰ä¸‹è½½çš„Parcelé‚£3ä¸ªæ–‡ä»¶æ‹·è´åˆ°/opt/cloudera/parcel-repoç›®å½•ä¸‹ï¼ˆå¦‚æœæ²¡æœ‰è¯¥ç›®å½•ï¼Œè¯·è‡ªè¡Œåˆ›å»ºï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 cdh]# cp CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel /opt/cloudera/parcel-repo/CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel</span><br><span class="line">[root@cdh-server7 cdh]# cp CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel.sha1 /opt/cloudera/parcel-repo/CDH-5.7.0-1.cdh5.7.0.p0.45-el7.parcel.sha</span><br><span class="line">[root@cdh-server7 cdh]# cp manifest.json /opt/cloudera/parcel-repo/manifest.json</span><br></pre></td></tr></table></figure>
<h2 id="1-7-é…ç½®-java-ç¯å¢ƒå˜é‡"><a href="#1-7-é…ç½®-java-ç¯å¢ƒå˜é‡" class="headerlink" title="1.7 é…ç½® java ç¯å¢ƒå˜é‡"></a>1.7 é…ç½® java ç¯å¢ƒå˜é‡</h2><p>è®¾ç½®JAVA_HOME</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 cdh]#vi /etc/profile</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.7.0_67-cloudera/</span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line">[root@cdh-server7 cdh]#source /etc/profile</span><br></pre></td></tr></table></figure>
<p>å…³é—­é˜²ç«å¢™</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 deploy]#systemctl stop firewalld.service  #centos7,å…³é—­é˜²ç«å¢™</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ­¥éª¤æ‰§è¡Œå®Œæ¯•åï¼Œé‡å¯ä¸»æœº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>
<h2 id="1-8-å®‰è£…CM-åªåœ¨ä¸»èŠ‚ç‚¹"><a href="#1-8-å®‰è£…CM-åªåœ¨ä¸»èŠ‚ç‚¹" class="headerlink" title="1.8 å®‰è£…CM (åªåœ¨ä¸»èŠ‚ç‚¹)"></a>1.8 å®‰è£…CM (åªåœ¨ä¸»èŠ‚ç‚¹)</h2><p><strong>ä»¥ä¸‹ä¸¤æ­¥éª¤è¯·åªåœ¨ä¸»èŠ‚ç‚¹ä¸Šæ‰§è¡Œ :</strong></p>
<ul>
<li><p>è¿›å…¥è¯¥ç›®å½•ï¼Œç»™binæ–‡ä»¶èµ‹äºˆå¯æ‰§è¡Œæƒé™</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 cdh]# chmod a+x ./cloudera-manager-installer.bin</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…CM (è¯¥æ­¥éª¤, å¯èƒ½æ˜¯ä¸éœ€è¦çš„)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 cdh]# ./cloudera-manager-installer.bin</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>å¼€å§‹å¯åŠ¨serverç«¯</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 cdh]# cd /etc/init.d/</span><br><span class="line">[root@cdh-server7 init.d]# ./cloudera-scm-server-db start</span><br><span class="line"></span><br><span class="line">[root@cdh-server7 init.d]# ./cloudera-scm-server start</span><br><span class="line">Starting cloudera-scm-server:                              [  OK  ]</span><br><span class="line">[root@cdh-server7 init.d]# tail -f /var/log/cloudera-scm-server/cloudera-scm-server.log</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ :<br> æœºå™¨é‡å¯ä¹‹åï¼Œé»˜è®¤å¯åŠ¨ä¼šå¯¼è‡´å¼‚å¸¸<br> éœ€è¦æŒ‰ç…§è¯¥å…ˆå¯åŠ¨cloudera-scm-server-dbï¼Œå†å¯åŠ¨cloudera-scm-serverçš„é¡ºåºæ‰§è¡Œ</p>
</blockquote>
<h2 id="1-9-æµè§ˆå™¨è®¿é—®éªŒè¯-ä¸»èŠ‚ç‚¹"><a href="#1-9-æµè§ˆå™¨è®¿é—®éªŒè¯-ä¸»èŠ‚ç‚¹" class="headerlink" title="1.9 æµè§ˆå™¨è®¿é—®éªŒè¯(ä¸»èŠ‚ç‚¹)"></a>1.9 æµè§ˆå™¨è®¿é—®éªŒè¯(ä¸»èŠ‚ç‚¹)</h2><p>CMå®‰è£…æˆåŠŸåæµè§ˆå™¨è¾“å…¥<a href="http://ip:7180" target="_blank" rel="external">http://ip:7180</a>, ç”¨æˆ·åå’Œå¯†ç éƒ½è¾“å…¥adminï¼Œè¿›å…¥webç®¡ç†ç•Œé¢ã€‚</p>
<p>é€šè¿‡æµè§ˆå™¨è®¿é—®éªŒè¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://192.168.181.190:7180/</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‰“ä¸å¼€æ”¹ç½‘é¡µï¼Œç­‰å¾…2åˆ†é’Ÿåã€‚è¿™ä¸ªæœåŠ¡å¯åŠ¨æ˜¯éœ€è¦ä¸€å®šæ—¶é—´çš„ã€‚</p>
<p>é€‰æ‹©éƒ¨ç½²çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©å…è´¹ç‰ˆçš„å°±å¯ä»¥äº†ã€‚</p>
<blockquote>
<p>å¦‚æœä¸ä¼šè®¾ç½®ï¼Œé‚£ä¹ˆè¯·å‚è€ƒ æœ€é è°±çš„å®‰è£…æŒ‡å— <a href="http://www.jianshu.com/p/57179e03795f" target="_blank" rel="external">http://www.jianshu.com/p/57179e03795f</a></p>
</blockquote>
<p>å®‰è£…æœåŠ¡æ—¶ï¼Œæ•°æ®åº“é€‰æ‹©é»˜è®¤çš„åµŒå…¥å¼æ•°æ®åº“</p>
<h1 id="Part-2-å®‰è£…-agent"><a href="#Part-2-å®‰è£…-agent" class="headerlink" title="Part 2 å®‰è£… agent"></a>Part 2 å®‰è£… agent</h1><blockquote>
<p>this step is similarï¼Œ but I canâ€™t be sure, exactly right. </p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å®‰è£… agent ï¼Œå¯ä»¥åœ¨å•ç‹¬çš„æœºå™¨ï¼Œä¸»èŠ‚ç‚¹ï¼Œå¯ä»¥åªå½“åšä¸»ï¼Œéšæ„ä½ </span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸ºagentåšé…ç½®,å¯åŠ¨agent (æ‰€æœ‰èŠ‚ç‚¹)<br>agent ä¸éœ€è¦è£…serverï¼Œå…¶ä»–ç»å¤§éƒ¨åˆ†æ­¥éª¤å’Œ å®‰è£… server ç›¸åŒã€‚</p>
</blockquote>
<h2 id="2-1-ç½‘ç»œé…ç½®"><a href="#2-1-ç½‘ç»œé…ç½®" class="headerlink" title="2.1 ç½‘ç»œé…ç½®"></a>2.1 ç½‘ç»œé…ç½®</h2><p><strong>ä¿®æ”¹ipä¸ä¸»æœºåçš„å¯¹åº”å…³ç³»</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-agent1 ~]# vi /etc/hosts #ä¿®æ”¹ipä¸ä¸»æœºåçš„å¯¹åº”å…³ç³»:</span><br><span class="line">192.168.181.190 cdh-server7(node190)</span><br><span class="line">192.168.181.198 cdh-agent1(node198)</span><br><span class="line">192.168.181.196 cdh-agent2(node196)</span><br></pre></td></tr></table></figure>
<p><strong>é‡å¯ç½‘ç»œæœåŠ¡ç”Ÿæ•ˆ</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 ~]# service network restart</span><br></pre></td></tr></table></figure>
<p><strong>å…³é—­SELINUX</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æŸ¥çœ‹SELINUXçŠ¶æ€</span><br><span class="line"></span><br><span class="line">[root@cdh-server7 ~]#getenforce</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è‹¥ SELINUX æ²¡æœ‰å…³é—­ï¼ŒæŒ‰ç…§ä¸‹è¿°æ–¹å¼å…³é—­</span><br><span class="line"></span><br><span class="line">vi /etc/selinux/config</span><br><span class="line">ä¿®æ”¹SELinux=disabledã€‚é‡å¯ç”Ÿæ•ˆï¼Œå¯ä»¥ç­‰åé¢éƒ½è®¾ç½®å®Œäº†é‡å¯ä¸»æœº</span><br><span class="line"># This file controls the state of SELinux on the system.</span><br><span class="line"># SELINUX= can take one of these three values:</span><br><span class="line">#       enforcing - SELinux security policy is enforced.</span><br><span class="line">#       permissive - SELinux prints warnings instead of enforcing.</span><br><span class="line">#       disabled - SELinux is fully disabled.</span><br><span class="line">SELINUX=disabled</span><br><span class="line"># SELINUXTYPE= type of policy in use. Possible values are:</span><br><span class="line">#       targeted - Only targeted network daemons are protected.</span><br><span class="line">#       strict - Full SELinux protection.</span><br><span class="line">SELINUXTYPE=targeted</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 ~]# ping www.baidu.com</span><br></pre></td></tr></table></figure>
<h2 id="2-2-å¸è½½-openjdk-æ‰€æœ‰èŠ‚ç‚¹"><a href="#2-2-å¸è½½-openjdk-æ‰€æœ‰èŠ‚ç‚¹" class="headerlink" title="2.2 å¸è½½ openjdk (æ‰€æœ‰èŠ‚ç‚¹)"></a>2.2 å¸è½½ openjdk (æ‰€æœ‰èŠ‚ç‚¹)</h2><blockquote>
<p>æ³¨æ„ : å¦‚æœæ²¡æœ‰openjdk, åˆ™ä¸éœ€è¦å¸è½½ï¼Œé»˜è®¤ centos7 æ²¡æœ‰</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 deploy]# rpm -qa | grep java</span><br><span class="line">[root@cdh-server7 deploy]# rpm -qa | grep jdk</span><br><span class="line"></span><br><span class="line"># if exist java or jdk, uninstall, erase it.  example under this...</span><br><span class="line">[root@cdh-server7 deploy]# rpm -e --nodeps java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64</span><br><span class="line">[root@cdh-server7 deploy]# rpm -e --nodeps java-1.6.0-openjdk-1.6.0.0-1.66.1.13.0.el6.x86_64</span><br><span class="line">[root@cdh-server7 deploy]# rpm -e --nodeps java-1.7.0-openjdk-1.7.0.45-2.4.3.3.el6.x86_64</span><br></pre></td></tr></table></figure>
<h2 id="2-3-å¸è½½centOS7é»˜è®¤mysql"><a href="#2-3-å¸è½½centOS7é»˜è®¤mysql" class="headerlink" title="2.3 å¸è½½centOS7é»˜è®¤mysql"></a>2.3 å¸è½½centOS7é»˜è®¤mysql</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 deploy]# rpm -qa | grep mariadb</span><br><span class="line">[root@cdh-server7 deploy]# rpm -e --nodeps mariadb-libs-5.5.41-2.el7_0.x86_64</span><br></pre></td></tr></table></figure>
<h2 id="2-4-cloudera-manager-repo"><a href="#2-4-cloudera-manager-repo" class="headerlink" title="2.4 cloudera-manager.repo"></a>2.4 cloudera-manager.repo</h2><blockquote>
<p>ä¸Šä¼ cloudera-manager.repo åˆ° cdh-agent1</p>
</blockquote>
<p>[root@cdh-agent1 cdh]# cp cloudera-manager.repo /etc/yum.repos.d/</p>
<p><strong>transparent_hugepage</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class="line">echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</span><br></pre></td></tr></table></figure>
<p><strong>vi /etc/rc.local åœ¨æ–‡ä»¶å°¾æ”¾å…¥ å¦‚ä¸‹ä¸¤æ¡è¯­å¥</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class="line">echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chmod +x /etc/rc.local</span><br></pre></td></tr></table></figure>
<p><strong>è°ƒæ•´swappiness</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo 10 &gt; /proc/sys/vm/swappiness</span><br><span class="line"># vi /etc/sysctl.conf</span><br><span class="line">vm.swappiness = 10</span><br></pre></td></tr></table></figure>
<h2 id="2-5-cdh-cloudera-rpms"><a href="#2-5-cdh-cloudera-rpms" class="headerlink" title="2.5 ~/cdh/cloudera-rpms"></a>2.5 ~/cdh/cloudera-rpms</h2><blockquote>
<p>ä¸Šä¼ ä¸‹åˆ—rpmåŒ…åˆ°cdh-agent1çš„/home/deploy/cdh/cloudera-rpms</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cloudera-manager-agent-5.7.0-1.cm560.p0.54.el7.x86_64.rpm</span><br><span class="line">cloudera-manager-daemons-5.7.0-1.cm560.p0.54.el7.x86_64.rpm</span><br><span class="line">enterprise-debuginfo-5.7.0-1.cm560.p0.54.el7.x86_64.rpm</span><br><span class="line">oracle-j2sdk1.7-1.7.0+update67-1.x86_64.rpm</span><br><span class="line"></span><br><span class="line">[root@cdh-agent1 init.d]# cd /home/deploy/cdh/cloudera-rpms/</span><br><span class="line">[root@cdh-agent1 init.d]# yum -y install *.rpm</span><br></pre></td></tr></table></figure>
<p><strong>è®¾ç½®JAVA_HOME</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 cdh]#vi /etc/profile</span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.7.0_67-cloudera/</span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line">[root@cdh-server7 cdh]#source /etc/profile</span><br></pre></td></tr></table></figure>
<p>å…³é—­é˜²ç«å¢™</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 deploy]#systemctl stop firewalld.service  #centos7,å…³é—­é˜²ç«å¢™</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ­¥éª¤æ‰§è¡Œå®Œæ¯•åï¼Œé‡å¯ä¸»æœº</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-agent1 init.d]# vi /etc/cloudera-scm-agent/config.ini</span><br><span class="line"></span><br><span class="line">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><br><span class="line"># Hostname of the CM server.</span><br><span class="line">#server_host=localhost</span><br><span class="line">server_host=cdh-server7(node190)</span><br><span class="line">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 cdh]# cd /etc/init.d/</span><br><span class="line">[root@cdh-server7 init.d]# ./cloudera-scm-agent start</span><br><span class="line">Starting cloudera-scm-agent:                               [  OK  ]</span><br><span class="line">[root@cdh-server deploy]# tail -f /var/log//cloudera-scm-agent/cloudera-scm-agent.log</span><br></pre></td></tr></table></figure>
<hr>
<p>æ³¨æ„ : </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å®‰è£…YARN NodeManagerå¤±è´¥æ—¶ï¼Œéœ€è¦åˆ é™¤ /yarn /var/lib/hadoop-yarn ç›®å½•å†é‡æ–°æ·»åŠ </span><br></pre></td></tr></table></figure>
<hr>
<p>CDHæœ€é è°±çš„å®‰è£…æŒ‡å— : <a href="http://www.jianshu.com/p/57179e03795f" target="_blank" rel="external">http://www.jianshu.com/p/57179e03795f</a></p>
<h1 id="Part-3-æ¢å¤å¯åŠ¨-Our-é›†ç¾¤"><a href="#Part-3-æ¢å¤å¯åŠ¨-Our-é›†ç¾¤" class="headerlink" title="Part 3 æ¢å¤å¯åŠ¨ Our é›†ç¾¤"></a>Part 3 æ¢å¤å¯åŠ¨ Our é›†ç¾¤</h1><h2 id="3-1-ç¡®å®š-firewalld-close"><a href="#3-1-ç¡®å®š-firewalld-close" class="headerlink" title="3.1 ç¡®å®š firewalld close"></a>3.1 ç¡®å®š firewalld close</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">systemctl start firewalld.service#å¯åŠ¨firewall</span><br><span class="line">systemctl stop firewalld.service#åœæ­¢firewall</span><br><span class="line">systemctl disable firewalld.service#ç¦æ­¢firewallå¼€æœºå¯åŠ¨</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ : æ“ä½œä¹‹å‰ç¡®å®š firewalld æ˜¯å…³é—­çš„</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@node19x flag]$ vim /etc/rc.local (/etc/rc.local å¯¹åº”è²Œä¼¼ç›¸å¯¹dir /ect/init.d)</span><br><span class="line"></span><br><span class="line">  1 #!/bin/bash</span><br><span class="line">  2 # THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES</span><br><span class="line">  3 #</span><br><span class="line">  4 # It is highly advisable to create own systemd services or udev rules</span><br><span class="line">  5 # to run scripts during boot instead of using this file.</span><br><span class="line">  6 #</span><br><span class="line">  7 # In contrast to previous versions due to parallel execution during boot</span><br><span class="line">  8 # this script will NOT be run after all other services.</span><br><span class="line">  9 #</span><br><span class="line"> 10 # Please note that you must run &apos;chmod +x /etc/rc.d/rc.local&apos; to ensure</span><br><span class="line"> 11 # that this script will be executed during boot.</span><br><span class="line"> 12</span><br><span class="line"> 13 touch /var/lock/subsys/local</span><br><span class="line"> 14 echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class="line"> 15 echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class="line"> 16 service ntpd start</span><br><span class="line"> 17 service elasticsearch start</span><br></pre></td></tr></table></figure>
<h2 id="3-2-å¯åŠ¨serverç«¯ã€cm"><a href="#3-2-å¯åŠ¨serverç«¯ã€cm" class="headerlink" title="3.2 å¯åŠ¨serverç«¯ã€cm"></a>3.2 å¯åŠ¨serverç«¯ã€cm</h2><p>only at server node</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@cdh-server7 cdh]# cd /etc/init.d/</span><br><span class="line">[root@cdh-server7 init.d]# ./cloudera-scm-server-db start</span><br><span class="line"></span><br><span class="line">[root@cdh-server7 init.d]# ./cloudera-scm-server start</span><br><span class="line">Starting cloudera-scm-server:                              [  OK  ]</span><br><span class="line">[root@cdh-server7 init.d]# tail -f /var/log/cloudera-scm-server/cloudera-scm-server.log</span><br><span class="line"></span><br><span class="line">// ç­‰å¾…æ—¥å¿— 7180 å¯åŠ¨æˆåŠŸï¼Œ è®¿é—® : http://node190:7180/cmf/home</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ :<br>æœºå™¨é‡å¯ä¹‹åï¼Œé»˜è®¤å¯åŠ¨ä¼šå¯¼è‡´å¼‚å¸¸<br>éœ€è¦æŒ‰ç…§è¯¥å…ˆå¯åŠ¨cloudera-scm-server-dbï¼Œå†å¯åŠ¨cloudera-scm-serverçš„é¡ºåºæ‰§è¡Œ</p>
</blockquote>
<p>ä¸€èˆ¬ä»¥ä¸‹ agent æ˜¯è‡ªåŠ¨å¯åŠ¨çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[root@node190 init.d]# ./cloudera-scm-agent start</span><br><span class="line">cloudera-scm-agent is already running</span><br><span class="line">node190:./cloudera-scm-agent start</span><br><span class="line">node19x:./cloudera-scm-agent start</span><br><span class="line">node19x:./cloudera-scm-agent start</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="3-3-CMé¡µé¢ä¸Šå¯åŠ¨å„æœåŠ¡"><a href="#3-3-CMé¡µé¢ä¸Šå¯åŠ¨å„æœåŠ¡" class="headerlink" title="3.3 CMé¡µé¢ä¸Šå¯åŠ¨å„æœåŠ¡"></a>3.3 CMé¡µé¢ä¸Šå¯åŠ¨å„æœåŠ¡</h2><ol>
<li>CM é¡µé¢ä¸Šé‡å¯ service monitor</li>
<li>CM é¡µé¢ä¸Šé‡å¯ host monitor</li>
<li>CM é¡µé¢ä¸Šå¯åŠ¨å„é¡¹æœåŠ¡ (å¦‚ : ZK, Flume, YARN, HDFS, Hive, Sqoop, Spark etc..)</li>
</ol>
<hr>
<h2 id="3-4-å„ä¸ªèŠ‚ç‚¹å¯åŠ¨-ES"><a href="#3-4-å„ä¸ªèŠ‚ç‚¹å¯åŠ¨-ES" class="headerlink" title="3.4 å„ä¸ªèŠ‚ç‚¹å¯åŠ¨ ES"></a>3.4 å„ä¸ªèŠ‚ç‚¹å¯åŠ¨ ES</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[deploy@node190 init.d]# ll</span><br><span class="line">total 44</span><br><span class="line">-rwxr-xr-x  1 root root  8671 Apr  2 04:52 cloudera-scm-agent</span><br><span class="line">lrwxrwxrwx. 1 root root    58 Apr 18 16:55 elasticsearch -&gt; /home/deploy/elasticsearch-1.7.1/bin/service/elasticsearch</span><br><span class="line">-rw-r--r--. 1 root root 13948 Sep 16  2015 functions</span><br><span class="line">-rwxr-xr-x. 1 root root  2989 Sep 16  2015 netconsole</span><br><span class="line">-rwxr-xr-x. 1 root root  6630 Sep 16  2015 network</span><br><span class="line">-rw-r--r--. 1 root root  1160 Apr  1 00:45 README</span><br></pre></td></tr></table></figure>
<p><strong>deploy</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/deploy/elasticsearch-1.7.1/bin/service</span><br><span class="line">[deploy@node190 init.d]<span class="comment"># ./elasticsearch start</span></span><br><span class="line">[deploy@node19x init.d]<span class="comment"># ./elasticsearch start</span></span><br><span class="line">[deploy@node19x init.d]<span class="comment"># ./elasticsearch start</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://node190:9200/_plugin/bigdesk/#cluster</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç­‰å¾…åŒæ­¥æ•°æ®å®Œæˆï¼Œä¸€èˆ¬ä¼šå¾ˆå¿«ï¼Œç­‰å¾… Status ä» RED å˜ä¸º green çŠ¶æ€</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://node190:9200/_plugin/head/</span><br></pre></td></tr></table></figure>
<h2 id="3-5-å¯åŠ¨-kibana"><a href="#3-5-å¯åŠ¨-kibana" class="headerlink" title="3.5 å¯åŠ¨ kibana"></a>3.5 å¯åŠ¨ kibana</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[deploy@node196 ~]#</span><br><span class="line">cd /home/deploy/kibana-4.1.1-linux-x64</span><br><span class="line">    ./bin/kibana &gt; kibana.log 2&gt;&amp;1 &amp;              --@deploy</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sqoop introduce]]></title>
      <url>http://shopee.ai/2016/02/16/hadoop/hadoop-sqoop-learn-use01/</url>
      <content type="html"><![CDATA[<p>Sqoop å³ SQL to Hadoop, æ˜¯ä¸€æ¬¾æ–¹ä¾¿çš„åœ¨ä¼ ç»Ÿå…³ç³»æ•°æ®åº“ä¸ Hadoop ä¹‹é—´è¿›è¡Œæ•°æ®è¿ç§»çš„å·¥å…·ï¼Œå……åˆ†åˆ©ç”¨ MapReduce å¹¶è¡Œç‰¹ç‚¹ä»¥æ‰¹å¤„ç†çš„æ–¹å¼åŠ å¿«æ•°æ®ä¼ è¾“.</p>
<a id="more"></a>
<h2 id="1-Sqoop-what"><a href="#1-Sqoop-what" class="headerlink" title="1. Sqoop what ?"></a>1. Sqoop what ?</h2><p>sqoop å³ SQL to Hadoop ï¼Œæ˜¯ä¸€æ¬¾æ–¹ä¾¿çš„åœ¨ä¼ ç»Ÿå…³ç³»æ•°æ®åº“ä¸ Hadoop ä¹‹é—´è¿›è¡Œæ•°æ®è¿ç§»çš„å·¥å…·ï¼Œå……åˆ†åˆ©ç”¨ MapReduce å¹¶è¡Œç‰¹ç‚¹ä»¥æ‰¹å¤„ç†çš„æ–¹å¼åŠ å¿«æ•°æ®ä¼ è¾“ï¼Œå‘å±•è‡³ä»Šä¸»è¦æ¼”åŒ–äº†äºŒå¤§ç‰ˆæœ¬ï¼Œsqoop1å’Œsqoop2ã€‚ </p>
<p>sqoop : clouder å…¬å¸å¼€å‘</p>
<p><strong>ç”Ÿäº§èƒŒæ™¯</strong></p>
<ol>
<li>mysql  å¯¼å…¥ Hadoop </li>
<li>Hadoop å¯¼å…¥ mysql</li>
</ol>
<p>æ³¨ : ä»¥ä¸Š Hadoop æŒ‡ Hiveã€HBaseã€HDFS ç­‰</p>
<h2 id="2-Sqoop-ç‰¹ç‚¹"><a href="#2-Sqoop-ç‰¹ç‚¹" class="headerlink" title="2. Sqoop ç‰¹ç‚¹"></a>2. Sqoop ç‰¹ç‚¹</h2><p>sqoopæ¶æ„éå¸¸ç®€å•ï¼Œå…¶æ•´åˆäº†Hiveã€Hbaseå’ŒOozieï¼Œé€šè¿‡map-reduceä»»åŠ¡æ¥ä¼ è¾“æ•°æ®ï¼Œä»è€Œæä¾›å¹¶å‘ç‰¹æ€§å’Œå®¹é”™ã€‚</p>
<p>   Sqoop ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå®¢æˆ·ç«¯(client)å’ŒæœåŠ¡ç«¯(server)ã€‚éœ€è¦åœ¨é›†ç¾¤çš„å…¶ä¸­æŸä¸ªèŠ‚ç‚¹ä¸Šå®‰è£…serverï¼Œè¯¥èŠ‚ç‚¹çš„æœåŠ¡ç«¯å¯ä»¥ä½œä¸ºå…¶ä»– Sqoop å®¢æˆ·ç«¯çš„å…¥å£ç‚¹ã€‚</p>
<p>   åœ¨ server ç«¯çš„èŠ‚ç‚¹ä¸Šå¿…é¡»å®‰è£…æœ‰ Hadoopã€‚client å¯ä»¥å®‰è£…åœ¨ä»»æ„æ•°é‡çš„æœºå­ä¸Šã€‚åœ¨è£…æœ‰å®¢æˆ·ç«¯çš„æœºå­ä¸Šä¸éœ€è¦å®‰è£… Hadoopã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sqoop å®˜ç½‘ : https://sqoop.apache.org</span><br><span class="line"></span><br><span class="line">1.4.5å®˜æ–¹æ–‡æ¡£ : https://sqoop.apache.org/docs/1.4.5/</span><br><span class="line"></span><br><span class="line">sqoop2ä¸æ¨èçš„åŸå›  : http://blog.csdn.net/robbyo/article/details/50737356</span><br></pre></td></tr></table></figure>
<h2 id="3-Sqoop-ä¼˜ç¼ºç‚¹"><a href="#3-Sqoop-ä¼˜ç¼ºç‚¹" class="headerlink" title="3. Sqoop ä¼˜ç¼ºç‚¹"></a>3. Sqoop ä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹</strong></p>
<ol>
<li>é«˜æ•ˆå¯æ§çš„åˆ©ç”¨èµ„æºï¼Œä»»åŠ¡å¹¶è¡Œåº¦ï¼Œè¶…æ—¶æ—¶é—´ã€‚</li>
<li>æ•°æ®ç±»å‹æ˜ å°„ä¸è½¬åŒ–ï¼Œå¯è‡ªåŠ¨è¿›è¡Œï¼Œç”¨æˆ·ä¹Ÿå¯è‡ªå®šä¹‰ .</li>
<li>æ”¯æŒå¤šç§ä¸»æµæ•°æ®åº“ï¼ŒMySQL,Oracleï¼ŒSQL Serverï¼ŒDB2ç­‰ç­‰ ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹</strong></p>
<ol>
<li>åŸºäºå‘½ä»¤è¡Œçš„æ“ä½œæ–¹å¼ï¼Œæ˜“å‡ºé”™ï¼Œä¸”ä¸å®‰å…¨ã€‚</li>
<li>æ•°æ®ä¼ è¾“å’Œæ•°æ®æ ¼å¼æ˜¯ç´§è€¦åˆçš„ï¼Œè¿™ä½¿å¾—connectoræ— æ³•æ”¯æŒæ‰€æœ‰çš„æ•°æ®æ ¼å¼</li>
<li>ç”¨æˆ·åå’Œå¯†ç æš´æ¼å‡ºæ¥</li>
</ol>
<h2 id="4-Sqoop-åŸç†"><a href="#4-Sqoop-åŸç†" class="headerlink" title="4. Sqoop åŸç†"></a>4. Sqoop åŸç†</h2><h3 id="4-1-Sqoopçš„importåŸç†"><a href="#4-1-Sqoopçš„importåŸç†" class="headerlink" title="4.1 Sqoopçš„importåŸç†"></a>4.1 Sqoopçš„importåŸç†</h3><p>Sqoop åœ¨ import æ—¶ï¼Œéœ€è¦åˆ¶å®š split-by å‚æ•°ã€‚</p>
<p>Sqoop æ ¹æ®ä¸åŒçš„ split-byå‚æ•°å€¼ æ¥è¿›è¡Œåˆ‡åˆ†, ç„¶åå°†åˆ‡åˆ†å‡ºæ¥çš„åŒºåŸŸåˆ†é…åˆ°ä¸åŒ map ä¸­ã€‚æ¯ä¸ªmapä¸­å†å¤„ç†æ•°æ®åº“ä¸­è·å–çš„ä¸€è¡Œä¸€è¡Œçš„å€¼ï¼Œå†™å…¥åˆ° HDFS ä¸­ã€‚åŒæ—¶split-by æ ¹æ®ä¸åŒçš„å‚æ•°ç±»å‹æœ‰ä¸åŒçš„åˆ‡åˆ†æ–¹æ³•ï¼Œå¦‚æ¯”è¾ƒç®€å•çš„intå‹ï¼ŒSqoopä¼šå–æœ€å¤§å’Œæœ€å°split-byå­—æ®µå€¼ï¼Œç„¶åæ ¹æ®ä¼ å…¥çš„ num-mappersæ¥ç¡®å®šåˆ’åˆ†å‡ ä¸ªåŒºåŸŸã€‚ </p>
<p>æ¯”å¦‚ select max(split_by),min(split-by) from å¾—åˆ°çš„ max(split-by)å’Œ min(split-by) åˆ†åˆ«ä¸º 1000 å’Œ 1, è€Œ num-mappers ä¸º 2 çš„è¯ï¼Œåˆ™ä¼šåˆ†æˆä¸¤ä¸ªåŒºåŸŸ (1,500) å’Œ (501-100), åŒæ—¶ä¹Ÿä¼šåˆ†æˆ 2ä¸ªsql ç»™ 2ä¸ªmap å»è¿›è¡Œå¯¼å…¥æ“ä½œï¼Œåˆ†åˆ«ä¸º select XXX from table where split-by&gt;=1 and split-by<500 å’Œ="" select="" xxx="" from="" table="" where="" split-by="">=501 and split-by&lt;=1000ã€‚æœ€åæ¯ä¸ªmapå„è‡ªè·å–å„è‡ªSQLä¸­çš„æ•°æ®è¿›è¡Œå¯¼å…¥å·¥ä½œã€‚</500></p>
<h3 id="4-2-Sqoopçš„exportåŸç†"><a href="#4-2-Sqoopçš„exportåŸç†" class="headerlink" title="4.2. Sqoopçš„exportåŸç†"></a>4.2. Sqoopçš„exportåŸç†</h3><p>æ ¹æ® mysql è¡¨åç§°ï¼Œç”Ÿæˆä¸€ä¸ªä»¥è¡¨åç§°å‘½åçš„ Javaç±»ï¼Œè¯¥ç±»ç»§æ‰¿äº† sqoopRecordçš„ï¼Œæ˜¯ä¸€ä¸ªåªæœ‰ Map çš„ MRï¼Œä¸”è‡ªå®šä¹‰äº†è¾“å‡ºå­—æ®µã€‚</p>
<p>sqoop export â€“connect jdbc:mysql://$url:3306/$3?characterEncoding=utf8 â€“username $username â€“password $password â€“table $1 â€“export-dir $2 â€“input-fields-terminated-by â€˜|â€™ â€“null-non-string â€˜0â€™ â€“null-string â€˜0â€™;</p>
<h2 id="5-Sqoop-ä½¿ç”¨å®ä¾‹"><a href="#5-Sqoop-ä½¿ç”¨å®ä¾‹" class="headerlink" title="5. Sqoop ä½¿ç”¨å®ä¾‹"></a>5. Sqoop ä½¿ç”¨å®ä¾‹</h2><p><strong>ç¯å¢ƒ</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sqoop: sqoop-1.4.5+cdh5.3.6+78</span><br><span class="line">hive : hive-0.13.1+cdh5.3.6+397</span><br><span class="line">hbase: hbase-0.98.6+cdh5.3.6+115</span><br></pre></td></tr></table></figure>
<h3 id="5-1-Mysql-to-Hadoop"><a href="#5-1-Mysql-to-Hadoop" class="headerlink" title="5.1. Mysql to Hadoop"></a>5.1. Mysql to Hadoop</h3><ul>
<li>Mysql to Hdfs</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sqoop import \</span><br><span class="line">  --connect $&#123;jdbc_url&#125; --username $&#123;jdbc_username&#125; --password  $&#123;jdbc_passwd&#125; \</span><br><span class="line">  --query &quot;$&#123;exec_sql&#125;&quot; \</span><br><span class="line">  --split-by $&#123;id&#125; -m 10 \</span><br><span class="line">  --target-dir $&#123;target_dir&#125; \</span><br><span class="line">  --fields-terminated-by &quot;\001&quot; --lines-terminated-by &quot;\n&quot; \</span><br><span class="line">  --hive-drop-import-delims \</span><br><span class="line">  --null-string &apos;\\N&apos; --null-non-string &apos;\\N&apos;</span><br></pre></td></tr></table></figure>
<ul>
<li>Mysql To Hive</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sqoop import \</span><br><span class="line">  --connect $&#123;jdbc_url&#125; \</span><br><span class="line">  --username $&#123;jdbc_username&#125; --password  $&#123;jdbc_passwd&#125; \</span><br><span class="line">  --table $&#123;jdbc_table&#125; --fields-terminated-by &quot;\001&quot; --lines-terminated-by &quot;\n&quot; \</span><br><span class="line">  --hive-import --hive-overwrite --hive-table $&#123;hive_table&#125; \</span><br><span class="line">  --null-string &apos;\\N&apos; --null-non-string &apos;\\N&apos;</span><br></pre></td></tr></table></figure>
<ul>
<li>Mysql To HBase</li>
</ul>
<h3 id="5-2-Hadoop-to-Mysql"><a href="#5-2-Hadoop-to-Mysql" class="headerlink" title="5.2 Hadoop to Mysql"></a>5.2 Hadoop to Mysql</h3><ul>
<li>Hdfs To Mysql</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqoop <span class="built_in">export</span> -D sqoop.export.records.per.statement=10 \</span><br><span class="line">--connect jdbc:mysql://192.168.***.**:3306/***?autoReconnect=<span class="literal">true</span> </span><br><span class="line">--username *** </span><br><span class="line">--password *** </span><br><span class="line">--table mds_dm_rs_shop_result \</span><br><span class="line">--fields-terminated-by <span class="string">'\t'</span> </span><br><span class="line">--export-dir <span class="string">"/dc_ext/xbd/dm/mds/mds_dm_rs_shop_result/dt=20170410"</span> </span><br><span class="line">--null-string <span class="string">'\\N'</span> </span><br><span class="line">--null-non-string <span class="string">'\\N'</span>;</span><br></pre></td></tr></table></figure>
<p><strong>refence article</strong></p>
<p><a href="http://www.zihou.me/html/2014/01/28/9114.html" target="_blank" rel="external">Sqoopä¸­æ–‡æ–‡æ¡£</a><br><a href="http://www.aboutyun.com/thread-12684-1-1.html" target="_blank" rel="external">Hive to Mysql å¸¸é‡ä¹å¤§é—®é¢˜æ€»ç»“</a> </p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hive Introduce 1]]></title>
      <url>http://shopee.ai/2016/02/15/hadoop/hadoop-hive-brief/</url>
      <content type="html"><![CDATA[<ol>
<li>åˆæ­¥äº†è§£ Hadoop ç”Ÿæ€åœˆ</li>
<li>åˆæ­¥äº†è§£ Hive æ¶æ„å›¾</li>
</ol>
<a id="more"></a>
<h2 id="1-Hive-Introduce"><a href="#1-Hive-Introduce" class="headerlink" title="1. Hive Introduce"></a>1. Hive Introduce</h2><h3 id="1-1-Hive-Preface"><a href="#1-1-Hive-Preface" class="headerlink" title="1.1 Hive Preface"></a>1.1 Hive Preface</h3><p><strong>Hadoop</strong></p>
<ol>
<li>Hadoop ç”Ÿæ€ç³»ç»Ÿ æ˜¯ å¤„ç†å¤§æ•°æ®é›†è€Œäº§ç”Ÿçš„è§£å†³æ–¹æ¡ˆã€‚</li>
<li>Hadoop å®ç°è®¡ç®—æ¨¡å‹ MapReduce, å¯å°†è®¡ç®—ä»»åŠ¡åˆ†å‰²æˆå¤šä¸ªå¤„ç†å•å…ƒï¼Œè¿™ä¸ªè®¡ç®—æ¨¡å‹ä¸‹é¢æ˜¯ä¸€ä¸ª HDFSã€‚</li>
</ol>
<p><strong>Hive</strong></p>
<ol>
<li>Hive æä¾›äº†ä¸€ä¸ª HiveæŸ¥è¯¢è¯­è¨€ HiveQL, æŸ¥è¯¢è½¬æ¢ä¸º MapReduce job</li>
<li>Hive é€‚åˆåšæ•°æ®ä»“åº“ï¼Œå¯ç¦»çº¿ç»´æŠ¤æµ·é‡æ•°æ®ï¼Œå¯å¯¹æ•°æ®è¿›è¡ŒæŒ–æ˜, å½¢æˆæŠ¥å‘Šç­‰</li>
<li>Hadoopã€HDFS è®¾è®¡æœ¬èº«é™åˆ¶äº† Hive æ‰€èƒ½èƒœä»»çš„å·¥ä½œ, Hive ä¸æ”¯æŒè®°å½•çº§åˆ«çš„æ›´æ–°ã€æ’å…¥ æˆ–è€… åˆ é™¤ æ“ä½œã€‚</li>
</ol>
<p><strong>Hive è¿è¡Œæ¶æ„</strong></p>
<ol>
<li>ä½¿ç”¨ HQL ä½œä¸ºæŸ¥è¯¢æ¥å£ï¼›</li>
<li>ä½¿ç”¨ MapReduce ä½œä¸ºæ‰§è¡Œå±‚ï¼›</li>
<li>ä½¿ç”¨ HDFS ä½œä¸ºå­˜å‚¨å±‚ï¼›</li>
</ol>
<h3 id="1-2-Hadoop-Mapreduce"><a href="#1-2-Hadoop-Mapreduce" class="headerlink" title="1.2 Hadoop / Mapreduce"></a>1.2 Hadoop / Mapreduce</h3><p><code>Input -&gt; Mappers -&gt; Sort,Shuffle -&gt; Reducers -&gt; Output</code></p>
<h3 id="1-3-Hive-ç³»ç»Ÿæ¶æ„"><a href="#1-3-Hive-ç³»ç»Ÿæ¶æ„" class="headerlink" title="1.3 Hive ç³»ç»Ÿæ¶æ„"></a>1.3 Hive ç³»ç»Ÿæ¶æ„</h3><p><img src="/images/hadoop/hive-02.png" alt="Hive ç³»ç»Ÿæ¶æ„"></p>
<h2 id="2-Hive-æ¶æ„ç»„ä»¶åˆ†æ"><a href="#2-Hive-æ¶æ„ç»„ä»¶åˆ†æ" class="headerlink" title="2. Hive æ¶æ„ç»„ä»¶åˆ†æ"></a>2. Hive æ¶æ„ç»„ä»¶åˆ†æ</h2><p><strong>æœ¬ç« é‡ç‚¹ :</strong></p>
<ol>
<li>åˆæ­¥äº†è§£ Hive çš„å·¥ä½œæµ</li>
<li>åˆæ­¥äº†è§£ hive çš„å·¥ä½œç»„ä»¶</li>
</ol>
<h3 id="2-1-å…ƒæ•°æ®å­˜å‚¨Metastore"><a href="#2-1-å…ƒæ•°æ®å­˜å‚¨Metastore" class="headerlink" title="2.1 å…ƒæ•°æ®å­˜å‚¨Metastore"></a>2.1 å…ƒæ•°æ®å­˜å‚¨Metastore</h3><ul>
<li><p>Hiveçš„æ•°æ®ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šæ•°æ®æ–‡ä»¶ å’Œ å…ƒæ•°æ®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å…ƒæ•°æ®å­˜å‚¨ï¼ŒDerbyåªèƒ½ç”¨äºä¸€ä¸ªHiveè¿æ¥ï¼Œä¸€èˆ¬å­˜å‚¨åœ¨MySQLã€‚</span><br><span class="line"></span><br><span class="line">å…ƒæ•°æ®åŒ…æ‹¬è¡¨çš„åå­—ï¼Œè¡¨çš„åˆ—å’Œåˆ†åŒºåŠå…¶å±æ€§ï¼Œè¡¨çš„å±æ€§ï¼ˆæ˜¯å¦ä¸ºå¤–éƒ¨è¡¨ç­‰ï¼‰ï¼Œè¡¨çš„æ•°æ®æ‰€åœ¨ç›®å½•ç­‰ã€‚</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-2-é©±åŠ¨-Driver"><a href="#2-2-é©±åŠ¨-Driver" class="headerlink" title="2.2 é©±åŠ¨ (Driver)"></a>2.2 é©±åŠ¨ (Driver)</h3><ul>
<li>ç¼–è¯‘å™¨</li>
<li>ä¼˜åŒ–å™¨</li>
<li>æ‰§è¡Œå™¨</li>
</ul>
<p>ç”¨æˆ·é€šè¿‡ä¸‹é¢çš„æ¥å£æäº¤Hiveç»™Driverï¼Œç”±Driverè¿›è¡ŒHQLè¯­å¥è§£æï¼Œæ­¤æ—¶ä»Metastoreä¸­è·å–è¡¨çš„ä¿¡æ¯ï¼Œå…ˆç”Ÿæˆé€»è¾‘è®¡åˆ’ï¼Œå†ç”Ÿæˆç‰©ç†è®¡åˆ’ï¼Œå†ç”±Executorç”ŸæˆJobäº¤ç»™Hadoopè¿è¡Œï¼Œç„¶åç”±Driverå°†ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p>ç¼–è¯‘å™¨ï¼ˆHiveçš„æ ¸å¿ƒï¼‰ï¼š1ï¼Œè¯­ä¹‰è§£æå™¨ï¼ˆParseDriverï¼‰ï¼Œå°†æŸ¥è¯¢å­—ç¬¦ä¸²è½¬æ¢æˆè§£ææ ‘è¡¨è¾¾å¼ï¼›2ï¼Œè¯­æ³•è§£æå™¨ï¼ˆSemanticAnalyzerï¼‰ï¼Œå°†è§£ææ ‘è½¬æ¢æˆåŸºäºè¯­å¥å—çš„å†…éƒ¨æŸ¥è¯¢è¡¨è¾¾å¼ï¼›3ï¼Œé€»è¾‘è®¡åˆ’ç”Ÿæˆå™¨ï¼ˆLogical Plan Generatorï¼‰ï¼Œå°†å†…éƒ¨æŸ¥è¯¢è¡¨è¾¾å¼è½¬æ¢ä¸ºé€»è¾‘è®¡åˆ’ï¼Œè¿™äº›è®¡åˆ’ç”±é€»è¾‘æ“ä½œæ ‘ç»„æˆï¼Œæ“ä½œç¬¦æ˜¯Hiveçš„æœ€å°å¤„ç†å•å…ƒï¼Œæ¯ä¸ªæ“ä½œç¬¦å¤„ç†ä»£è¡¨ä¸€é“HDFSæ“ä½œæˆ–è€…æ˜¯MRä½œä¸šï¼›4ï¼ŒæŸ¥è¯¢è®¡åˆ’ç”Ÿæˆå™¨ï¼ˆQueryPlan Generatorï¼‰ï¼Œå°†é€»è¾‘è®¡åˆ’è½¬åŒ–æˆç‰©ç†è®¡åˆ’ï¼ˆMR Jobï¼‰ã€‚</p>
<p>ä¼˜åŒ–å™¨ï¼šä¼˜åŒ–å™¨æ˜¯ä¸€ä¸ªæ¼”åŒ–ç»„ä»¶ï¼Œå½“å‰å®ƒçš„è§„åˆ™æ˜¯ï¼šåˆ—ä¿®å‰ªï¼Œè°“è¯ä¸‹å‹ã€‚</p>
<p>æ‰§è¡Œå™¨ï¼šç¼–è¯‘å™¨å°†æ“ä½œæ ‘åˆ‡åˆ†æˆä¸€ä¸ªJobé“¾ï¼ˆDAGï¼‰ï¼Œæ‰§è¡Œå™¨ä¼šé¡ºåºæ‰§è¡Œå…¶ä¸­æ‰€æœ‰çš„Jobï¼›å¦‚æœTaské“¾ä¸å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå¯ä»¥é‡‡ç”¨å¹¶å‘æ‰§è¡Œçš„æ–¹å¼è¿›è¡ŒJobçš„æ‰§è¡Œã€‚</p>
<h3 id="2-3-æ¥å£"><a href="#2-3-æ¥å£" class="headerlink" title="2.3 æ¥å£"></a>2.3 æ¥å£</h3><p><strong>CLIã€HWIã€ThriftServer</strong></p>
<ol>
<li><p>CLIï¼šä¸ºå‘½ä»¤è¡Œå·¥å…·ï¼Œé»˜è®¤æœåŠ¡ã€‚bin/hiveæˆ–bin/hiveâ€“service cliï¼›</p>
</li>
<li><p>HWIï¼šä¸ºWebæ¥å£ï¼Œå¯ä»¥ç”¨è¿‡æµè§ˆå™¨è®¿é—®Hiveï¼Œé»˜è®¤ç«¯å£9999ï¼Œå¯åŠ¨æ–¹å¼ä¸ºbin/hive â€“service hwi;</p>
</li>
<li><p>ThriftServerï¼šé€šè¿‡Thriftå¯¹å¤–æä¾›æœåŠ¡ï¼Œé»˜è®¤ç«¯å£æ˜¯10000ï¼Œå¯åŠ¨æ–¹å¼ä¸ºbin/hive â€“service hiveserver;</p>
</li>
</ol>
<p><strong> è¿æ¥hive-metastore(å¦‚mysql)çš„ä¸‰ç§æ–¹å¼ </strong></p>
<ol>
<li>å•ç”¨æˆ·æ¨¡å¼ã€‚æ­¤æ¨¡å¼è¿åˆ°æ•°æ®åº“Derbyï¼Œä¸€èˆ¬ç”¨äºUnit Testã€‚<br><img src="/images/hadoop/hive-longdis-model.jpeg" alt="å•ç”¨æˆ·æ¨¡å¼"></li>
<li>å¤šç”¨æˆ·æ¨¡å¼ã€‚é€šè¿‡ç½‘ç»œè¿æ¥åˆ°ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œæ˜¯æœ€ç»å¸¸ä½¿ç”¨åˆ°çš„æ¨¡å¼ã€‚<br><img src="/images/hadoop/hive-more-user-model.jpeg" alt="å¤šç”¨æˆ·æ¨¡å¼"></li>
<li>è¿œç¨‹æœåŠ¡å™¨æ¨¡å¼ã€‚ç”¨äºéJavaå®¢æˆ·ç«¯è®¿é—®å…ƒæ•°æ®åº“ï¼Œåœ¨æœåŠ¡å™¨ç«¯å¯åŠ¨MetaStoreServerï¼Œå®¢æˆ·ç«¯åˆ©ç”¨Thriftåè®®é€šè¿‡MetaStoreServerè®¿é—®å…ƒæ•°æ®åº“ã€‚<br><img src="/images/hadoop/hive-longdis-model.jpeg" alt="è¿œç¨‹æœåŠ¡å™¨æ¨¡å¼"></li>
</ol>
<h3 id="2-4-å…¶ä»–æœåŠ¡"><a href="#2-4-å…¶ä»–æœåŠ¡" class="headerlink" title="2.4 å…¶ä»–æœåŠ¡"></a>2.4 å…¶ä»–æœåŠ¡</h3><p><strong>bin/hive â€“service -help</strong></p>
<ol>
<li><p>metastore   (bin/hive â€“service metastore)</p>
</li>
<li><p>hiveserver2ï¼ˆbin/hive â€“service hiveserver2ï¼‰</p>
</li>
</ol>
<p><strong>HiveServer2</strong></p>
<ol>
<li><p>HiveServer2æ˜¯HieServeræ”¹è¿›ç‰ˆæœ¬ï¼Œå®ƒæä¾›ç»™æ–°çš„ThriftAPIæ¥å¤„ç†JDBCæˆ–è€…ODBCå®¢æˆ·ç«¯ï¼Œè¿›è¡ŒKerberosèº«ä»½éªŒè¯ï¼Œå¤šä¸ªå®¢æˆ·ç«¯å¹¶å‘</p>
</li>
<li><p>HS2è¿˜æä¾›äº†æ–°çš„CLIï¼šBeeLineï¼Œæ˜¯Hive 0.11å¼•å…¥çš„æ–°çš„äº¤äº’å¼CLIï¼ŒåŸºäºSQLLineï¼Œå¯ä»¥ä½œä¸ºHive JDBC Client ç«¯è®¿é—®HievServer2ï¼Œå¯åŠ¨ä¸€ä¸ªbeelineå°±æ˜¯ç»´æŠ¤äº†ä¸€ä¸ªsession.</p>
</li>
</ol>
<p><strong>Hiveä¸‹è½½åœ°å€</strong></p>
<ol>
<li><p>cdh-hive : <a href="https://repository.cloudera.com/artifactory/cloudera-repos/org/apache/hive/hive-exec/0.13.1-cdh5.3.6/" target="_blank" rel="external">hive0.13.1-cdh5.3.6 jar åŒ…</a> (æ²¡ç”¨)</p>
</li>
<li><p>apache-hive : <a href="http://archive.apache.org/dist/hive/" target="_blank" rel="external">Apache-Hive</a></p>
</li>
</ol>
<p><strong>Hive-Beeline è¯•éªŒæˆåŠŸ</strong></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">ä¸‹è½½ apache-hive-0.13.1-bin, apache-hadoop2.5ï¼Œé…ç½® HADOOP_HOME, å¯åŠ¨ </span><br><span class="line"></span><br><span class="line">âœ  ./apache-hive-0.13.1-bin/bin/beeline</span><br><span class="line">Beeline version 0.13.1 by Apache Hive</span><br><span class="line">beeline&gt; !connect jdbc:hive2://node190:10000 hdfs 1</span><br><span class="line">scan complete in 3ms</span><br><span class="line">Connecting to jdbc:hive2://node190:10000</span><br><span class="line">Connected to: Apache Hive (version 0.13.1-cdh5.3.6)</span><br><span class="line">Driver: Hive JDBC (version 0.13.1)</span><br><span class="line">Transaction isolation: TRANSACTION_REPEATABLE_READ</span><br><span class="line">0: jdbc:hive2://node190:10000&gt; select count(*) from ods_dm_shop_tmp;</span><br><span class="line">+-------+</span><br><span class="line">|  _c0  |</span><br><span class="line">+-------+</span><br><span class="line">| 1091  |</span><br><span class="line">+-------+</span><br><span class="line">1 row selected (24.815 seconds)</span><br><span class="line">0: jdbc:hive2://node190:10000&gt;</span><br><span class="line"></span><br><span class="line">è¯´æ˜ : beeline å¯ä»¥æˆåŠŸï¼Œç”¨ä»£ç  jdbc å°±å¯ä»¥æˆåŠŸ</span><br><span class="line"></span><br><span class="line">å®‰è£… hadoop å‚è€ƒäº† ã€ŠSparkå¤§æ•°æ®å¤„ç†ã€‹é«˜å½¦æ°@è‘—, ä¸ç”¨é…ç½®ç›´æ¥ç»¿è‰²ç®€å•ç‰ˆ</span><br></pre></td></tr></table></figure>
<p><strong>Hive table</strong></p>
<p>  table ä¸­çš„ä¸€ä¸ª Partition å¯¹åº”è¡¨ä¸‹çš„ä¸€ä¸ªå­ç›®å½•<br>  æ¯ä¸€ä¸ª Bucket å¯¹åº”ä¸€ä¸ªæ–‡ä»¶ï¼›<br>  Hiveçš„é»˜è®¤æ•°æ®ä»“åº“ç›®å½•æ˜¯/user/hive/warehouse<br>  åœ¨hive-site.xmlä¸­ç”±hive.metastore.warehouse.diré¡¹å®šä¹‰ï¼›</p>
<h2 id="reference-article"><a href="#reference-article" class="headerlink" title="reference article"></a>reference article</h2><p>å‚è€ƒ : <a href="http://blog.csdn.net/lalaguozhe/article/details/11776055" target="_blank" rel="external">CSDN - Hive Server 2 è°ƒç ”ï¼Œå®‰è£…å’Œéƒ¨ç½²</a><br>å‚è€ƒ : <a href="http://www.geedoo.info/beeline-abnormal-connection-hiveserver2.html" target="_blank" rel="external">æè±†æŠ€æœ¯åšå®¢ - Beelineè¿æ¥hiveserver2å¼‚å¸¸</a><br>å‚è€ƒ : <a href="http://blog.csdn.net/skywalker_only/article/details/38366347" target="_blank" rel="external">Hiveå­¦ä¹ ä¹‹HiveServer2 JDBCå®¢æˆ·ç«¯</a><br>å‚è€ƒ : <a href="https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-Beeline" target="_blank" rel="external">HiveServer2 Clients beeline</a><br>å‚è€ƒ : <a href="http://www.aboutyun.com/blog-6-1855.html" target="_blank" rel="external">Beelineè¿æ¥hiveserver2å¼‚å¸¸</a><br>å‚è€ƒ : <a href="http://blog.csdn.net/skywalker_only/article/details/38335235" target="_blank" rel="external">Hiveå­¦ä¹ ä¹‹HiveServer2æœåŠ¡ç«¯é…ç½®ä¸å¯åŠ¨</a></p>
<p><strong>other tmp</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">## Chap 7 HiveQL è§†å›¾ ##</span><br><span class="line">## Chap 8 HiveQL ç´¢å¼• ##</span><br><span class="line">## Chap 9 æ¨¡å¼è®¾è®¡ ##</span><br><span class="line">## Chap 10 è°ƒä¼˜ ##</span><br><span class="line">## Chap 11 å…¶ä»–æ–‡ä»¶æ ¼å¼å’Œå‹ç¼©æ–¹æ³• ##</span><br><span class="line">## Chap 12 å¼€å‘ ##</span><br><span class="line">## Chap 13 å‡½æ•° ##</span><br><span class="line">## Chap 14 Streaming ##</span><br><span class="line">## Chap 15 è‡ªå®šä¹‰Hiveæ–‡ä»¶å’Œè®°å½•æ ¼å¼ ##</span><br><span class="line">## Chap 16 Hive çš„ Thrift æœåŠ¡ ##</span><br><span class="line">## Chap 11 å…¶ä»–æ–‡ä»¶æ ¼å¼å’Œå‹ç¼©æ–¹æ³• ##</span><br></pre></td></tr></table></figure>
<hr>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Spark Introduce and Install]]></title>
      <url>http://shopee.ai/2016/02/01/spark/spark-introduce-and-install/</url>
      <content type="html"><![CDATA[<p>ä»‹ç» Spark çš„å†å²ï¼Œä»‹ç» Spark çš„å®‰è£…ä¸éƒ¨ç½²ï¼Œä»‹ç» Spark çš„ä»£ç æ¶æ„ ç­‰</p>
<a id="more"></a>
<p>Spark å‘æºäº ç¾å›½åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ AMPLap å¤§æ•°æ®åˆ†æå¹³å°<br>Spark ç«‹è¶³äºå†…å­˜è®¡ç®—ã€ä»å¤šè¿­ä»£æ‰¹é‡å¤„ç†å‡ºå‘<br>Spark å…¼é¡¾æ•°æ®ä»“åº“ã€æµå¤„ç†ã€å›¾è®¡ç®— ç­‰å¤šç§è®¡ç®—èŒƒå¼ï¼Œå¤§æ•°æ®ç³»ç»Ÿé¢†åŸŸå…¨æ ˆè®¡ç®—å¹³å°  </p>
<p><a href="http://spark.apache.org" target="_blank" rel="external">spark.apache.org</a> </p>
<blockquote>
<p>University of California, Berkeley </p>
</blockquote>
<h2 id="1-Spark-çš„å†å²ä¸å‘å±•"><a href="#1-Spark-çš„å†å²ä¸å‘å±•" class="headerlink" title="1. Spark çš„å†å²ä¸å‘å±•"></a>1. Spark çš„å†å²ä¸å‘å±•</h2><ul>
<li>2009 å¹´ : Spark è¯ç”Ÿäº AMPLab  </li>
<li>2014-02 : Apache é¡¶çº§é¡¹ç›®  </li>
<li>2014-05 : Spark 1.0.0 å‘å¸ƒ</li>
</ul>
<h2 id="2-Spark-ä¹‹äº-Hadoop"><a href="#2-Spark-ä¹‹äº-Hadoop" class="headerlink" title="2. Spark ä¹‹äº Hadoop"></a>2. Spark ä¹‹äº Hadoop</h2><p> Spark æ˜¯ MapReduce çš„æ›¿ä»£æ–¹æ¡ˆ, ä¸”å…¼å®¹ HDFSã€Hive ç­‰åˆ†å¸ƒå¼å­˜å‚¨å±‚ã€‚</p>
<p> Spark ç›¸æ¯” Hadoop MapReduce çš„ä¼˜åŠ¿å¦‚ä¸‹ :</p>
<ol>
<li>ä¸­é—´ç»“æœè¾“å‡º</li>
<li>æ•°æ®æ ¼å¼å’Œå†…å­˜å¸ƒå±€</li>
<li>æ‰§è¡Œç­–ç•¥  </li>
<li>ä»»åŠ¡è°ƒåº¦çš„å¼€é”€</li>
</ol>
<blockquote>
<p>Sparkç”¨äº‹ä»¶é©±åŠ¨ç±»åº“AKKAæ¥å¯åŠ¨ä»»åŠ¡, é€šè¿‡çº¿ç¨‹æ± å¤ç”¨çº¿ç¨‹é¿å…è¿›çº¿ç¨‹å¯åŠ¨åˆ‡æ¢å¼€é”€</p>
</blockquote>
<h2 id="3-Spark-èƒ½å¸¦æ¥ä»€ä¹ˆ"><a href="#3-Spark-èƒ½å¸¦æ¥ä»€ä¹ˆ" class="headerlink" title="3. Spark èƒ½å¸¦æ¥ä»€ä¹ˆ ?"></a>3. Spark èƒ½å¸¦æ¥ä»€ä¹ˆ ?</h2><ol>
<li>æ‰“é€ å…¨æ ˆå¤šè®¡ç®—èŒƒå¼çš„é«˜æ•ˆæ•°æ®æµæ°´çº¿</li>
<li>è½»é‡çº§å¿«é€Ÿå¤„ç†, å¹¶æ”¯æŒ Scalaã€Pythonã€Java</li>
<li>ä¸ HDFS ç­‰ å­˜å‚¨å±‚ å…¼å®¹</li>
</ol>
<h2 id="4-Spark-å®‰è£…ä¸éƒ¨ç½²"><a href="#4-Spark-å®‰è£…ä¸éƒ¨ç½²" class="headerlink" title="4. Spark å®‰è£…ä¸éƒ¨ç½²"></a>4. Spark å®‰è£…ä¸éƒ¨ç½²</h2><p>Spark ä¸»è¦ä½¿ç”¨ HDFS å……å½“æŒä¹…åŒ–å±‚ï¼Œæ‰€ä»¥å®Œæ•´çš„å®‰è£… Spark éœ€è¦å…ˆå®‰è£… Hadoop.<br>Spark æ˜¯è®¡ç®—æ¡†æ¶, å®ƒä¸»è¦ä½¿ç”¨ HDFS å……å½“æŒä¹…åŒ–å±‚ã€‚</p>
<p><strong>Linux é›†ç¾¤å®‰è£… Spark</strong></p>
<ol>
<li>å®‰è£… JDK</li>
<li>å®‰è£… Scala</li>
<li>é…ç½® SSH å…å¯†ç ç™»é™† (å¯é€‰)</li>
<li>å®‰è£… Hadoop</li>
<li>å®‰è£… Spark</li>
<li>å¯åŠ¨ Spark é›†ç¾¤</li>
</ol>
<p><a href="http://spark.apache.org/downloads.html" target="_blank" rel="external">Sparkå®˜ç½‘ä¸‹è½½</a></p>
<h3 id="4-1-å®‰è£…-Spark"><a href="#4-1-å®‰è£…-Spark" class="headerlink" title="4.1 å®‰è£… Spark"></a>4.1 å®‰è£… Spark</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(1). download  spark-1.5.2-bin-hadoop2.6.tgz</span><br><span class="line"></span><br><span class="line">(2). tar -xzvf spark-1.5.2-bin-hadoop2.6.tgz</span><br><span class="line"></span><br><span class="line">(3). é…ç½® conf/spark-env.sh</span><br><span class="line">    1) è¯¦ç»†å¤æ‚å‚æ•°é…ç½®å‚è§ å®˜ç½‘ Configuration</span><br><span class="line">    2) vim conf/spark-env.sh</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">export</span> JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home</span><br><span class="line">    <span class="built_in">export</span> SCALA_HOME=/usr/<span class="built_in">local</span>/Cellar/scala/2.11.5</span><br><span class="line">    <span class="built_in">export</span> SPARK_HOME=/usr/<span class="built_in">local</span>/xSoft/spark</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">export</span> SPARK_MASTER_IP=ip</span><br><span class="line">    <span class="built_in">export</span> MASTER=spark://ip:7077</span><br><span class="line"></span><br><span class="line">    <span class="built_in">export</span> SPARK_EXECUTOR_INSTANCES=2</span><br><span class="line">    <span class="built_in">export</span> SPARK_EXECUTOR_CORES=1</span><br><span class="line"></span><br><span class="line">    <span class="built_in">export</span> SPARK_WORKER_MEMORY=1000m</span><br><span class="line">    <span class="built_in">export</span> SPARK_EXECUTOR_MEMORY=300m</span><br><span class="line"></span><br><span class="line">    <span class="built_in">export</span> SPARK_LIBRARY_PATH=<span class="variable">$&#123;SPARK_HOME&#125;</span>/lib</span><br><span class="line"></span><br><span class="line">(4). é…ç½® conf/slaves (æµ‹è¯•å¯é€‰)</span><br><span class="line">(5). ä¸€èˆ¬éœ€è¦ startup ssh server.</span><br></pre></td></tr></table></figure>
<h3 id="4-2-å¯åŠ¨-Spark-é›†ç¾¤"><a href="#4-2-å¯åŠ¨-Spark-é›†ç¾¤" class="headerlink" title="4.2 å¯åŠ¨ Spark é›†ç¾¤"></a>4.2 å¯åŠ¨ Spark é›†ç¾¤</h3><p>åœ¨ Spark æ ¹ç›®å½•å¯åŠ¨ Spark</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./sbin/start-all.sh</span><br><span class="line">./sbin/stop-all.sh</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨å jps æŸ¥çœ‹ ä¼šæœ‰ Master è¿›ç¨‹å­˜åœ¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  spark-1.5.2-bin-hadoop2.6  jps</span><br><span class="line">11262 Jps</span><br><span class="line">11101 Master</span><br><span class="line">11221 Worker</span><br></pre></td></tr></table></figure>
<h3 id="4-3-Spark-é›†ç¾¤åˆè¯•"><a href="#4-3-Spark-é›†ç¾¤åˆè¯•" class="headerlink" title="4.3 Spark é›†ç¾¤åˆè¯•"></a>4.3 Spark é›†ç¾¤åˆè¯•</h3><p>å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è¿è¡Œ Spark æ ·ä¾‹ :</p>
<ul>
<li>ä»¥ ./run-example çš„æ–¹å¼æ‰§è¡Œ</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">âœ  <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/xSoft/spark</span><br><span class="line">âœ  spark ./sbin/start-all.sh</span><br><span class="line">âœ  spark ./bin/run-example org.apache.spark.examples.SparkPi</span><br></pre></td></tr></table></figure>
<ul>
<li>ä»¥ ./Spark Shell æ–¹å¼æ‰§è¡Œ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scala&gt; import org.apache.spark._</span><br><span class="line">import org.apache.spark._</span><br><span class="line"></span><br><span class="line">scala&gt; object SparkPi &#123;</span><br><span class="line">     |</span><br><span class="line">     |   def main(args: Array[String]) &#123;</span><br><span class="line">     |</span><br><span class="line">     |     val slices = 2</span><br><span class="line">     |     val n = 100000 * slices</span><br><span class="line">     |</span><br><span class="line">     |     val count = sc.parallelize(1 to n, slices).map &#123; i =&gt;</span><br><span class="line">     |</span><br><span class="line">     |       val x = math.random * 2 - 1</span><br><span class="line">     |       val y = math.random * 2 - 1</span><br><span class="line">     |</span><br><span class="line">     |       if (x * x + y * y &lt; 1) 1 else 0</span><br><span class="line">     |</span><br><span class="line">     |     &#125;.reduce(_ + _)</span><br><span class="line">     |</span><br><span class="line">     |     println(&quot;Pi is rounghly &quot; + 4.0 * count / n)</span><br><span class="line">     |</span><br><span class="line">     |   &#125;</span><br><span class="line">     | &#125;</span><br><span class="line">defined module SparkPi</span><br><span class="line">scala&gt;</span><br><span class="line"></span><br><span class="line">// Spark Shell å·²é»˜è®¤å°† SparkContext ç±»åˆå§‹åŒ–ä¸ºå¯¹è±¡ sc, ç”¨æˆ·ä»£ç å¯ç›´æ¥ä½¿ç”¨ã€‚</span><br><span class="line">// Spark è‡ªå¸¦çš„äº¤äº’å¼çš„ Shell ç¨‹åºï¼Œæ–¹ä¾¿è¿›è¡Œäº¤äº’å¼ç¼–ç¨‹ã€‚</span><br></pre></td></tr></table></figure>
<ul>
<li><p>é€šè¿‡ Web UI æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</p>
<pre><code>httpï¼š//masterIp:8080
</code></pre></li>
</ul>
<p><img src="/images/spark/spark-introduce-05.png" width="740" height="400" img=""></p>
<h3 id="4-4-Spark-quick-start"><a href="#4-4-Spark-quick-start" class="headerlink" title="4.4 Spark quick start"></a>4.4 Spark quick start</h3><p>quick-start : <a href="https://spark.apache.org/docs/latest/quick-start.html" target="_blank" rel="external">https://spark.apache.org/docs/latest/quick-start.html</a></p>
<p>./bin/spark-shell</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scala&gt; val textFile = sc.textFile(&quot;README.md&quot;)</span><br><span class="line">textFile: spark.RDD[String] = spark.MappedRDD@2ee9b6e3</span><br><span class="line">RDDs have actions, which return values, and transformations, which return pointers to new RDDs. Letâ€™s start with a few actions:</span><br><span class="line"></span><br><span class="line">scala&gt; textFile.count() // Number of items in this RDD</span><br><span class="line">res0: Long = 126</span><br><span class="line"></span><br><span class="line">scala&gt; textFile.first() // First item in this RDD</span><br><span class="line">res1: String = # Apache Spark</span><br></pre></td></tr></table></figure>
<h2 id="5-Spark-ç”Ÿæ€-BDAS"><a href="#5-Spark-ç”Ÿæ€-BDAS" class="headerlink" title="5. Spark ç”Ÿæ€ BDAS"></a>5. Spark ç”Ÿæ€ BDAS</h2><ul>
<li>Spark æ¡†æ¶ã€æ¶æ„ã€è®¡ç®—æ¨¡å‹ã€æ•°æ®ç®¡ç†ç­–ç•¥</li>
<li>Spark BDAS é¡¹ç›®åŠå…¶å­é¡¹ç›®è¿›è¡Œäº†ç®€è¦ä»‹ç»</li>
<li>Spark ç”Ÿæ€ç³»ç»ŸåŒ…å«çš„å¤šä¸ªå­é¡¹ç›® : SparkSqlã€Spark Streamingã€GraphXã€MLlib</li>
</ul>
<p><img src="/images/spark/spark-introduce-01.png" alt="Spark EcoSystem = BDAS = ä¼¯å…‹åˆ©æ•°æ®åˆ†ææ ˆ"></p>
<ul>
<li>Spark æ˜¯ BDAS æ ¸å¿ƒ, æ˜¯ä¸€ å¤§æ•°æ®åˆ†å¸ƒå¼ç¼–ç¨‹æ¡†æ¶</li>
</ul>
<h2 id="6-Spark-æ¶æ„"><a href="#6-Spark-æ¶æ„" class="headerlink" title="6. Spark æ¶æ„"></a>6. Spark æ¶æ„</h2><ul>
<li>Spark çš„ä»£ç ç»“æ„</li>
<li>Spark çš„æ¶æ„</li>
<li>Spark è¿è¡Œé€»è¾‘</li>
</ul>
<h3 id="6-1-Spark-çš„ä»£ç ç»“æ„"><a href="#6-1-Spark-çš„ä»£ç ç»“æ„" class="headerlink" title="6.1 Spark çš„ä»£ç ç»“æ„"></a>6.1 Spark çš„ä»£ç ç»“æ„</h3><p><img src="/images/spark/spark-introduce-02.jpeg" alt="spark code"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">schedulerï¼šæ–‡ä»¶å¤¹ä¸­å«æœ‰è´Ÿè´£æ•´ä½“çš„Sparkåº”ç”¨ã€ä»»åŠ¡è°ƒåº¦çš„ä»£ç ã€‚</span><br><span class="line">broadcastï¼šå«æœ‰Broadcastï¼ˆå¹¿æ’­å˜é‡ï¼‰çš„å®ç°ä»£ç ï¼ŒAPIä¸­æ˜¯Javaå’ŒPython APIçš„å®ç°ã€‚</span><br><span class="line"></span><br><span class="line">deployï¼šå«æœ‰Sparkéƒ¨ç½²ä¸å¯åŠ¨è¿è¡Œçš„ä»£ç ã€‚</span><br><span class="line">commonï¼šä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè€Œæ˜¯ä»£è¡¨Sparké€šç”¨çš„ç±»å’Œé€»è¾‘å®ç°ï¼Œæœ‰5000è¡Œä»£ç ã€‚</span><br><span class="line"></span><br><span class="line">metricsï¼šæ˜¯è¿è¡Œæ—¶çŠ¶æ€ç›‘æ§é€»è¾‘ä»£ç ï¼ŒExecutorä¸­å«æœ‰WorkerèŠ‚ç‚¹è´Ÿè´£è®¡ç®—çš„é€»è¾‘ä»£ç ã€‚</span><br><span class="line">partialï¼šå«æœ‰è¿‘ä¼¼è¯„ä¼°ä»£ç ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="6-2-Spark-çš„æ¶æ„"><a href="#6-2-Spark-çš„æ¶æ„" class="headerlink" title="6.2 Spark çš„æ¶æ„"></a>6.2 Spark çš„æ¶æ„</h3><p>Sparkæ¶æ„é‡‡ç”¨äº†åˆ†å¸ƒå¼è®¡ç®—ä¸­çš„Master-Slaveæ¨¡å‹ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:center">Role</th>
<th style="text-align:center">description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Master</td>
<td style="text-align:center">å¯¹åº”é›†ç¾¤ä¸­çš„å«æœ‰Masterè¿›ç¨‹çš„èŠ‚ç‚¹, é›†ç¾¤çš„æ§åˆ¶å™¨</td>
</tr>
<tr>
<td style="text-align:center">Slave</td>
<td style="text-align:center">é›†ç¾¤ä¸­å«æœ‰Workerè¿›ç¨‹çš„èŠ‚ç‚¹</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Client</td>
<td style="text-align:center">ä½œä¸ºç”¨æˆ·çš„å®¢æˆ·ç«¯è´Ÿè´£æäº¤åº”ç”¨</td>
</tr>
<tr>
<td style="text-align:center">Driver</td>
<td style="text-align:center">è¿è¡ŒApplicationçš„main()å‡½æ•°å¹¶åˆ›å»ºSparkContextã€‚è´Ÿè´£ä½œä¸šçš„è°ƒåº¦ï¼Œå³Taskä»»åŠ¡çš„åˆ†å‘</td>
</tr>
<tr>
<td style="text-align:center">Worker</td>
<td style="text-align:center">ç®¡ç†è®¡ç®—èŠ‚ç‚¹å’Œåˆ›å»ºExecutorï¼Œå¯åŠ¨Executor æˆ– Driver. æ¥æ”¶ä¸»èŠ‚ç‚¹å‘½ä»¤ä¸è¿›è¡ŒçŠ¶æ€æ±‡æŠ¥</td>
</tr>
<tr>
<td style="text-align:center">Executor</td>
<td style="text-align:center">Worker nodeæ‰§è¡Œä»»åŠ¡çš„ç»„ä»¶,è´Ÿè´£ Task çš„æ‰§è¡Œ,ç”¨äºå¯åŠ¨çº¿ç¨‹æ± è¿è¡Œä»»åŠ¡</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">ClusterManager</td>
<td style="text-align:center">Standalone æ¨¡å¼ä¸­ä¸º Master, æ§åˆ¶æ•´ä¸ªé›†ç¾¤, ç›‘æ§Worker</td>
</tr>
<tr>
<td style="text-align:center">SparkContext</td>
<td style="text-align:center">æ•´ä¸ªåº”ç”¨çš„ä¸Šä¸‹æ–‡, æ§åˆ¶Appçš„ç”Ÿå‘½å‘¨æœŸ</td>
</tr>
<tr>
<td style="text-align:center">RDD</td>
<td style="text-align:center">Sparkçš„åŸºæœ¬è®¡ç®—å•å…ƒï¼Œä¸€ç»„RDDå¯å½¢æˆæ‰§è¡Œçš„ DAG</td>
</tr>
</tbody>
</table>
<p><img src="/images/spark/spark-introduce-03.jpeg" alt="spark"></p>
<table>
<thead>
<tr>
<th style="text-align:center">Num</th>
<th style="text-align:center">Spark App æµç¨‹ </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1.</td>
<td style="text-align:center">Client æäº¤åº”ç”¨</td>
</tr>
<tr>
<td style="text-align:center">2.</td>
<td style="text-align:center">Master æ‰¾åˆ°ä¸€ä¸ª Worker å¯åŠ¨ Driver</td>
</tr>
<tr>
<td style="text-align:center">3.</td>
<td style="text-align:center">Driver å‘ Master æˆ–è€… èµ„æºç®¡ç†å™¨ç”³è¯·èµ„æºï¼Œä¹‹åå°†åº”ç”¨è½¬åŒ–ä¸º RDD Graph </td>
</tr>
<tr>
<td style="text-align:center">4.</td>
<td style="text-align:center">DAGScheduler å°† RDD Graph è½¬åŒ–ä¸º Stageçš„æœ‰å‘æ— ç¯å›¾ æäº¤ç»™ TaskScheduler</td>
</tr>
<tr>
<td style="text-align:center">5.</td>
<td style="text-align:center">TaskScheduler æäº¤ task ç»™Executoræ‰§è¡Œ</td>
</tr>
<tr>
<td style="text-align:center">6.</td>
<td style="text-align:center">åœ¨ä»»åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä»–ç»„ä»¶ååŒå·¥ä½œï¼Œç¡®ä¿æ•´ä¸ªåº”ç”¨é¡ºåˆ©æ‰§è¡Œ </td>
</tr>
</tbody>
</table>
<blockquote>
<p>åœ¨æ‰§è¡Œé˜¶æ®µï¼ŒDriver ä¼šå°† Task å’Œ Taskæ‰€ä¾èµ–çš„file å’Œ jar åºåˆ—åŒ–åä¼ é€’ç»™å¯¹åº”çš„ Workeræœºå™¨ï¼ŒåŒæ—¶ Executorå¯¹ç›¸åº”æ•°æ®åˆ†åŒºçš„ä»»åŠ¡è¿›è¡Œå¤„ç†ã€‚</p>
</blockquote>
<h2 id="7-å°ç»“"><a href="#7-å°ç»“" class="headerlink" title="7. å°ç»“"></a>7. å°ç»“</h2><p>ç”±äº Spark ä¸»è¦ä½¿ç”¨ HDFS å……å½“æŒä¹…åŒ–å±‚ï¼Œæ‰€ä»¥å®Œæ•´çš„ä½¿ç”¨ Spark éœ€è¦é¢„å…ˆå®‰è£… Hadoop.</p>
<p>Spark å°†åˆ†å¸ƒå¼çš„å†…å­˜æ•°æ®æŠ½è±¡ä¸ºå¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›† (RDD), å¹¶åœ¨å…¶ä¸Šå®ç°äº†ä¸°å¯Œçš„ç®—å­ï¼Œä»è€Œå¯¹ RDD è¿›è¡Œè®¡ç®—ï¼Œæœ€åå°† ç®—å­åºåˆ— è½¬åŒ–ä¸º DAG è¿›è¡Œæ‰§è¡Œå’Œè°ƒåº¦ã€‚</p>
<blockquote>
<p>Sparkçš„Python APIå‡ ä¹è¦†ç›–äº†æ‰€æœ‰Scala APIæ‰€èƒ½æä¾›çš„åŠŸèƒ½. ä½†çš„ç¡®æœ‰äº›ç‰¹æ€§ï¼Œæ¯”å¦‚Spark Streamingå’Œä¸ªåˆ«çš„APIæ–¹æ³•ï¼Œæš‚ä¸æ”¯æŒã€‚<br><a href="http://spark.apache.org/docs/latest/programming-guide.html" target="_blank" rel="external">å…·ä½“å‚è§ã€ŠSparkç¼–ç¨‹æŒ‡å—ã€‹çš„Pythonéƒ¨åˆ†</a></p>
</blockquote>
<p>ä½“ä¼šäº† å‡½æ•°å¼ ç¼–ç¨‹. ä¸ªäººè®¤ä¸º scalaã€python æ¯”è¾ƒé€‚åˆå†™ spark ç¨‹åº.</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Kettle ETL]]></title>
      <url>http://shopee.ai/2016/01/22/hadoop/ops-etl-kettle/</url>
      <content type="html"><![CDATA[<p>Kettle çš„ä½¿ç”¨åˆæ­¥ä»‹ç»</p>
<a id="more"></a>
<ol>
<li>ETL æ˜¯æ•°æ®æŠ½å–ï¼ˆExtractï¼‰ã€æ¸…æ´—ï¼ˆCleaningï¼‰ã€è½¬æ¢ï¼ˆTransformï¼‰ã€è£…è½½ï¼ˆLoadï¼‰çš„è¿‡ç¨‹ã€‚</li>
<li>ETL æ˜¯æ„å»º <strong>DW</strong> çš„é‡è¦ä¸€ç¯ï¼Œç”¨æˆ·ä»æ•°æ®æºæŠ½å–å‡ºæ•°æ®ï¼Œç» æ•°æ®æ¸…æ´—,æŒ‰ç…§é¢„å®šä¹‰å¥½çš„ DWæ¨¡å‹ï¼Œå°†æ•°æ®åŠ è½½åˆ° DW ä¸­å»ã€‚</li>
<li>ETL æ˜¯å°†ä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®ç»è¿‡æŠ½å–ã€æ¸…æ´—è½¬æ¢ä¹‹ååŠ è½½åˆ° DW çš„è¿‡ç¨‹ï¼Œç›®çš„æ˜¯å°†ä¼ä¸šä¸­çš„åˆ†æ•£é›¶ä¹±ã€æ ‡å‡†ä¸ç»Ÿä¸€çš„æ•°æ®åˆ°ä¸€èµ·ï¼Œä¸ºä¼ä¸šçš„å†³ç­–æä¾›åˆ†æä¾æ®ã€‚</li>
<li>ETL æ˜¯ <strong>BI</strong> é¡¹ç›®ä¸­ä¸€ä¸ªé‡è¦ç¯èŠ‚ã€‚</li>
</ol>
<p><strong>ETLçš„è®¾è®¡åˆ†ä¸‰ä¸ªéƒ¨åˆ†ï¼š</strong></p>
<ol>
<li>æ•°æ®æŠ½å–</li>
<li>æ•°æ®çš„æ¸…æ´—è½¬æ¢</li>
<li>æ•°æ®çš„åŠ è½½</li>
</ol>
<h2 id="1-Kettle-å¼€æºçš„-ETL-å·¥å…·"><a href="#1-Kettle-å¼€æºçš„-ETL-å·¥å…·" class="headerlink" title="1. Kettle å¼€æºçš„ ETL å·¥å…·"></a>1. Kettle å¼€æºçš„ ETL å·¥å…·</h2><h3 id="1-1-Kettle-çš„ä»‹ç»"><a href="#1-1-Kettle-çš„ä»‹ç»" class="headerlink" title="1-1. Kettle çš„ä»‹ç»"></a>1-1. Kettle çš„ä»‹ç»</h3><p>  ETLï¼ˆExtract-Transform-Loadçš„ç¼©å†™ï¼Œå³æ•°æ®æŠ½å–ã€è½¬æ¢ã€è£…è½½çš„è¿‡ç¨‹ï¼Œ æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å„ç§æ•°æ®çš„å¤„ç†ï¼Œè½¬æ¢ï¼Œè¿ç§»ï¼Œæ‰€ä»¥æŒæ¡ä¸€ç§ ETL å·¥å…·çš„ä½¿ç”¨å¿…ä¸å¯å°‘ã€‚</p>
<p>  Kettle æ”¯æŒå›¾å½¢åŒ–çš„GUIè®¾è®¡ç•Œé¢ï¼Œç„¶åå¯ä»¥ä»¥å·¥ä½œæµçš„å½¢å¼æµè½¬ï¼Œç†Ÿç»ƒå®ƒå¯ä»¥å‡å°‘éå¸¸å¤šçš„ç ”å‘å·¥ä½œé‡ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<p>  Kettle å…è®¸ä½ ç®¡ç†æ¥è‡ªä¸åŒæ•°æ®åº“çš„æ•°æ®ï¼Œé€šè¿‡æä¾›ä¸€ä¸ªå›¾å½¢åŒ–çš„ç”¨æˆ·ç¯å¢ƒæ¥æè¿°ä½ æƒ³åšä»€ä¹ˆã€‚</p>
<p>  Kettle ä¸­æœ‰ä¸¤ç§è„šæœ¬æ–‡ä»¶ï¼Œtransformation å’Œ job.</p>
<ul>
<li>transformation å®Œæˆé’ˆå¯¹æ•°æ®çš„åŸºç¡€è½¬æ¢.</li>
<li>job åˆ™å®Œæˆæ•´ä¸ªå·¥ä½œæµçš„æ§åˆ¶ã€‚</li>
</ul>
<h3 id="1-2-Kettle-å®¶æ—äº§å“"><a href="#1-2-Kettle-å®¶æ—äº§å“" class="headerlink" title="1-2. Kettle å®¶æ—äº§å“"></a>1-2. Kettle å®¶æ—äº§å“</h3><p> <strong> Kettleå®¶æ—ç›®å‰åŒ…æ‹¬ 4 ä¸ªäº§å“ï¼šSpoonã€Panã€CHEFã€Kitchenã€‚</strong></p>
<p> Spoon å…è®¸ä½ é€šè¿‡å›¾å½¢ç•Œé¢æ¥è®¾è®¡ ETL è½¬æ¢è¿‡ç¨‹ï¼ˆTransformationï¼‰ã€‚</p>
<p> Pan   å…è®¸ä½ æ‰¹é‡è¿è¡Œç”± Spoon è®¾è®¡çš„ ETL è½¬æ¢ (ä¾‹å¦‚ä½¿ç”¨ä¸€ä¸ªæ—¶é—´è°ƒåº¦å™¨)ã€‚Pan æ˜¯ä¸€åå°æ‰§è¡Œçš„ç¨‹åºï¼Œæ²¡å›¾ç•Œé¢ã€‚</p>
<p> Chef  å…è®¸ä½ åˆ›å»ºä»»åŠ¡ï¼ˆJobï¼‰ã€‚ ä»»åŠ¡é€šè¿‡å…è®¸æ¯ä¸ªè½¬æ¢ï¼Œä»»åŠ¡ï¼Œè„šæœ¬ç­‰ç­‰ï¼Œæ›´æœ‰åˆ©äºè‡ªåŠ¨åŒ–æ›´æ–°æ•°æ®ä»“åº“çš„å¤æ‚å·¥ä½œã€‚ä»»åŠ¡é€šè¿‡å…è®¸æ¯ä¸ªè½¬æ¢ï¼Œä»»åŠ¡ï¼Œè„šæœ¬ç­‰ç­‰ã€‚ä»»åŠ¡å°†ä¼šè¢«æ£€æŸ¥ï¼Œçœ‹çœ‹æ˜¯å¦æ­£ç¡®åœ°è¿è¡Œäº†ã€‚</p>
<p> Kitchen å…è®¸ä½ æ‰¹é‡ä½¿ç”¨ç”± Chef è®¾è®¡çš„ä»»åŠ¡ (ä¾‹å¦‚ä½¿ç”¨ä¸€ä¸ªæ—¶é—´è°ƒåº¦å™¨)ã€‚Kitchen ä¹Ÿæ˜¯åå°è¿è¡Œçš„ç¨‹åºã€‚</p>
<h2 id="2-ä¸‹è½½å’Œéƒ¨ç½²å®‰è£…"><a href="#2-ä¸‹è½½å’Œéƒ¨ç½²å®‰è£…" class="headerlink" title="2. ä¸‹è½½å’Œéƒ¨ç½²å®‰è£…"></a>2. ä¸‹è½½å’Œéƒ¨ç½²å®‰è£…</h2><p>ÂKettleå¯ä»¥åœ¨<a href="http://kettle.pentaho.org/" target="_blank" rel="external">http://kettle.pentaho.org/</a> ç½‘ç«™ä¸‹è½½<br>Â<br>Âä¸‹è½½ kettle å‹ç¼©åŒ…ï¼Œå›  kettle ä¸ºç»¿è‰²è½¯ä»¶ï¼Œè§£å‹ç¼©åˆ°ä»»æ„æœ¬åœ°è·¯å¾„å³å¯</p>
<p>å®‰è£…éœ€è¦ : JDKã€JAVA_HOMEã€CLASSPATHã€PENTAHO_JAVA_HOME ç­‰ç¯å¢ƒå˜é‡ã€‚</p>
<blockquote>
<p>å¦‚éœ€è¿æ¥mysqlï¼Œåˆ™éœ€å°† mysql-connector-java-5.1.38.jar æ”¾å…¥åˆ° lib ä¸­ã€‚</p>
</blockquote>
<h3 id="2-1-kettle-windows-å®‰è£…"><a href="#2-1-kettle-windows-å®‰è£…" class="headerlink" title="2-1 kettle windows å®‰è£…"></a>2-1 kettle windows å®‰è£…</h3><ul>
<li>å»ºè®®åœ¨ windows ä¸‹ä½¿ç”¨æ“ä½œç»ƒä¹  kettle<br> windows å¯¹å›¾å½¢åŒ– æ”¯æŒå¥½ </li>
<li>ç›´æ¥å¯åŠ¨ Spoon.bat å³å¯</li>
</ul>
<h3 id="2-2-kettle-Linux-å®‰è£…"><a href="#2-2-kettle-Linux-å®‰è£…" class="headerlink" title="2-2 kettle Linux å®‰è£…"></a>2-2 kettle Linux å®‰è£…</h3><p> linux å›¾å½¢åŒ–ä¸å¼ºï¼Œå¦‚éœ€è¦åœ¨ linux ä¸­æŸ¥çœ‹ä¸€ä¸‹ kettle èµ„æºåº“æ˜¯å¦è¿æ¥æ­£å¸¸ï¼Œä»¥åŠåœ¨ linux ä¸Šè°ƒåº¦ kettle çš„ jobï¼Œå°±éœ€è¦åœ¨ Linuxä¸Š é…ç½® kettle ç¯å¢ƒäº†ã€‚</p>
<p>éªŒè¯ kettle éƒ¨ç½²æˆåŠŸ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd data-integration</span><br><span class="line">è¾“å…¥å‘½ä»¤./kitchen.shã€‚å¦‚æœå‡ºç°å¸®åŠ©ä¿¡æ¯è¯´æ˜éƒ¨ç½²æˆåŠŸ</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚å‡ºç°é”™è¯¯ï¼Œè¯· chmod +x *.shï¼Œå†è¯•ã€‚</p>
</blockquote>
<h3 id="2-3-kettle-osx-å®‰è£…"><a href="#2-3-kettle-osx-å®‰è£…" class="headerlink" title="2-3 kettle osx å®‰è£…"></a>2-3 kettle osx å®‰è£…</h3><p> å·²ç»å­˜åœ¨</p>
<h2 id="3-åº”ç”¨åœºæ™¯"><a href="#3-åº”ç”¨åœºæ™¯" class="headerlink" title="3. åº”ç”¨åœºæ™¯"></a>3. åº”ç”¨åœºæ™¯</h2><p>è¿™é‡Œç®€å•æ¦‚æ‹¬ä¸€ä¸‹å‡ ç§å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼ŒæŒ‰ç½‘ç»œç¯å¢ƒåˆ’åˆ†ä¸»è¦åŒ…æ‹¬ï¼š</p>
<h3 id="3-1-è¡¨è§†å›¾æ¨¡å¼ï¼š"><a href="#3-1-è¡¨è§†å›¾æ¨¡å¼ï¼š" class="headerlink" title="3-1 è¡¨è§†å›¾æ¨¡å¼ï¼š"></a>3-1 è¡¨è§†å›¾æ¨¡å¼ï¼š</h3><p>  è¿™ç§æƒ…å†µæˆ‘ä»¬ç»å¸¸é‡åˆ°ï¼Œå°±æ˜¯åœ¨åŒä¸€ç½‘ç»œç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¯¹å„ç§æ•°æ®æºçš„è¡¨æ•°æ®è¿›è¡ŒæŠ½å–ã€è¿‡æ»¤ã€æ¸…æ´—ç­‰ï¼Œä¾‹å¦‚å†å²æ•°æ®åŒæ­¥ã€å¼‚æ„ç³»ç»Ÿæ•°æ®äº¤äº’ã€æ•°æ®å¯¹ç§°å‘å¸ƒæˆ–å¤‡ä»½ç­‰éƒ½å½’å±äºè¿™ä¸ªæ¨¡å¼ï¼›ä¼ ç»Ÿçš„å®ç°æ–¹å¼ä¸€èˆ¬éƒ½è¦è¿›è¡Œç ”å‘ï¼ˆä¸€å°éƒ¨åˆ†ä¾‹å¦‚ä¸¤ä¸ªç›¸åŒè¡¨ç»“æ„çš„è¡¨ä¹‹é—´çš„æ•°æ®åŒæ­¥ï¼Œå¦‚æœsqlserveræ•°æ®åº“å¯ä»¥é€šè¿‡å‘å¸ƒ/è®¢é˜…å®ç°ï¼‰ï¼Œæ¶‰åŠåˆ°ä¸€äº›å¤æ‚çš„ä¸€äº›ä¸šåŠ¡é€»è¾‘å¦‚æœæˆ‘ä»¬ç ”å‘å‡ºæ¥è¿˜å®¹æ˜“å‡ºå„ç§bugï¼›</p>
<h3 id="3-2-å‰ç½®æœºæ¨¡å¼"><a href="#3-2-å‰ç½®æœºæ¨¡å¼" class="headerlink" title="3-2 å‰ç½®æœºæ¨¡å¼"></a>3-2 å‰ç½®æœºæ¨¡å¼</h3><p>  æ•°æ®äº¤æ¢çš„åŒæ–¹ A å’Œ B ç½‘ç»œä¸é€šï¼Œä½†æ˜¯ A å’Œ B éƒ½å¯ä»¥å’Œå‰ç½®æœº C è¿æ¥..</p>
<h3 id="3-3-æ–‡ä»¶æ¨¡å¼"><a href="#3-3-æ–‡ä»¶æ¨¡å¼" class="headerlink" title="3-3 æ–‡ä»¶æ¨¡å¼"></a>3-3 æ–‡ä»¶æ¨¡å¼</h3><p>  æ•°æ®äº¤äº’çš„åŒæ–¹ A å’Œ B æ˜¯å®Œå…¨çš„ç‰©ç†éš”ç¦»ï¼Œè¿™æ ·å°±åªèƒ½é€šè¿‡ä»¥æ–‡ä»¶çš„æ–¹å¼æ¥è¿›è¡Œæ•°æ®äº¤äº’äº†ï¼Œä¾‹å¦‚ XML æ ¼å¼.</p>
<h2 id="4-DEMOå®æˆ˜"><a href="#4-DEMOå®æˆ˜" class="headerlink" title="4. DEMOå®æˆ˜"></a>4. DEMOå®æˆ˜</h2><h3 id="4-1-ç®€å•è¡¨åŒæ­¥"><a href="#4-1-ç®€å•è¡¨åŒæ­¥" class="headerlink" title="4-1 ç®€å•è¡¨åŒæ­¥"></a>4-1 ç®€å•è¡¨åŒæ­¥</h3><p>åŠŸèƒ½æè¿° : æ•°æ®åº“ TestDB01 ä¸­çš„ UsersAè¡¨ åˆ° æ•°æ®åº“TestDB02 çš„UsersBè¡¨ï¼›<br>å®ç°æµç¨‹ : å»ºç«‹ä¸€ä¸ªè½¬æ¢å’Œä¸€ä¸ªä½œä¸šJobï¼›</p>
<p><strong>ä¸€ã€å»ºç«‹è½¬æ¢</strong></p>
<ol>
<li><p>è¿›å…¥ä¸»ç•Œé¢ï¼Œæ–°å»ºä¸€ä¸ªè½¬æ¢ï¼Œè½¬æ¢çš„åç¼€åä¸º ktr.<br>  åˆ›å»º DBè¿æ¥ï¼Œé€‰æ‹©æ–°å»º DBè¿æ¥, TestæŒ‰é’®æµ‹è¯•æ˜¯å¦é…ç½®æ­£ç¡®ï¼</p>
<p>  æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸¤ä¸ª DBè¿æ¥ï¼Œåˆ†åˆ«ä¸º TestDB01 å’Œ TestDB02ï¼›</p>
<p>  (å¦‚æŠ¥é”™å¯ä»¥ : ä¸‹è½½ mysql-connect jar æ”¾å…¥ lib ç›®å½•ä¸‹)</p>
</li>
<li><p>å»ºç«‹æ­¥éª¤å’Œæ­¥éª¤å…³ç³» <strong>:</strong> [è¾“å…¥] -&gt; [è¡¨è¾“å…¥]<br>  ç‚¹å‡»æ ¸å¿ƒå¯¹è±¡ï¼Œæˆ‘ä»¬ä»æ­¥éª¤æ ‘ä¸­é€‰æ‹©ã€è¡¨è¾“å…¥ã€‘, è¿™æ ·æ‹–æ‹½ä¸€ä¸ª è¡¨è¾“å…¥<br>  ä¹‹åï¼Œæˆ‘ä»¬åŒå‡»è¡¨è¾“å…¥ä¹‹åï¼Œæˆ‘ä»¬è‡ªå·±å¯ä»¥éšæ„å†™ä¸€ä¸ª sql è¯­å¥ï¼Œè¿™ä¸ªè¯­å¥è¡¨ç¤º<br>  å¯ä»¥åœ¨è¿™ä¸ªåº“ä¸­éšæ„ç»„åˆï¼Œåªè¦ sql è¯­å¥æ²¡æœ‰é”™è¯¯å³å¯ï¼Œæˆ‘è¿™é‡Œåªæ˜¯æœ€ç®€å•çš„æŠŠ<br>  TestA ä¸­çš„æ‰€æœ‰æ•°æ®æŸ¥å‡ºæ¥ï¼Œè¯­å¥ä¸º select * from usersAã€‚</p>
</li>
<li><p>å»ºç«‹æ­¥éª¤å’Œæ­¥éª¤å…³ç³» <strong>:</strong> [è¾“å‡º] -&gt; [æ’å…¥/æ›´æ–°]<br>  åŒä¸Šç±»ä¼¼</p>
</li>
<li><p>å»ºç«‹ è¿æ¥ å…³ç³»<br>  ç„¶ååœ¨ã€è¡¨è¾“å…¥ã€‘ä¸ŠåŒæ—¶æŒ‰ä½ shift é”®å’Œé¼ æ ‡å·¦é”®æ»‘å‘ã€æ’å…¥/æ›´æ–°ã€‘ï¼Œè¿™æ ·å»ºç«‹ä¸¤ä¸ªæ­¥éª¤ä¹‹é—´çš„è¿æ¥</p>
</li>
<li><p>è¿è¡Œ<br>  å»ºç«‹å¥½è½¬æ¢ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿è¡Œ(ç‚¹å‡»ä¸Šé¢çš„å°ä¸‰è§’å½¢)è¿™ä¸ªè½¬æ¢ï¼Œæ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æœ‰é”™ï¼Œå¦‚å›¾ï¼Œæœ‰é”™è¯¯éƒ½ä¼šåœ¨ä¸‹é¢çš„æ§åˆ¶å°ä¸Šè¾“å‡ºã€‚</p>
</li>
</ol>
<p><strong>äºŒã€å»ºç«‹ä½œä¸š :</strong></p>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦è®©è¿™ä¸ªè½¬æ¢å®šæ—¶æ‰§è¡Œæ€ä¹ˆåŠå‘¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ªä½œä¸šjob</p>
<ol>
<li><p>æ–°å»º Job</p>
<p> æ–‡ä»¶-&gt;æ–°å»º-&gt;Job</p>
</li>
<li><p>åœ¨ Job ä¸­ æ·»åŠ  è½¬æ¢</p>
<p> åœ¨æ–°å»ºçš„ä½œä¸šä¸­, æ‰“å¼€åˆšæ‰æ–°å»ºçš„ [ç®€å•è¡¨åŒæ­¥] çš„ transformation</p>
</li>
<li><p>æ·»åŠ  START</p>
<p> é€šç”¨ -&gt; START</p>
<p> ä½¿ START å…³è” -&gt;  [ç®€å•è¡¨åŒæ­¥] Transformation</p>
</li>
<li><p>è¿™æ ·æˆ‘ä»¬åœ¨ã€Startã€‘æ­¥éª¤ä¸Šé¢åŒå‡»</p>
<p> è®¾ç½®æ—¶é—´é—´éš”ã€å®šæ—¶æ‰§è¡Œ ç­‰éœ€è¦çš„å‚æ•°</p>
<p>è¿™æ ·è¿™ä¸ªä½œä¸šå°±åˆ¶å®šå¥½äº†ï¼Œç‚¹å‡»ä¿å­˜ä¹‹åï¼Œå°±å¯ä»¥åœ¨å›¾å½¢åŒ–ç•Œé¢ä¸Šç‚¹å‡»å¼€å§‹æ‰§è¡Œäº†ã€‚</p>
</li>
</ol>
<h2 id="5-win-linux-åå°è¿è¡Œ"><a href="#5-win-linux-åå°è¿è¡Œ" class="headerlink" title="5. win/linux åå°è¿è¡Œ"></a>5. win/linux åå°è¿è¡Œ</h2><h3 id="5-1-win-åå°è¿è¡Œ"><a href="#5-1-win-åå°è¿è¡Œ" class="headerlink" title="5-1 win åå°è¿è¡Œ"></a>5-1 win åå°è¿è¡Œ</h3><p>simpleTableSync.bat</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@echo off </span><br><span class="line"></span><br><span class="line">if &quot;%1&quot; == &quot;h&quot; goto begin </span><br><span class="line"></span><br><span class="line">mshta vbscript:createobject(&quot;wscript.shell&quot;).run(&quot;%~nx0 h&quot;,0)(window.close)&amp;&amp;exit </span><br><span class="line"></span><br><span class="line">:begin</span><br><span class="line">C:</span><br><span class="line">cd C:\WorkSoft\data-integration</span><br><span class="line">kitchen /file:C:\WorkJob\ETL\tSyncTestJob.kjb /level:Basic&gt;&gt;C:\WorkJob\ETL\MyTest.log /level:Basic&gt;&gt;C:\WorkJob\ETL\MyTest.log</span><br></pre></td></tr></table></figure>
<h3 id="5-2-linux-åå°è¿è¡Œ"><a href="#5-2-linux-åå°è¿è¡Œ" class="headerlink" title="5-2 linux åå°è¿è¡Œ"></a>5-2 linux åå°è¿è¡Œ</h3><p>simpleTableSync.sh</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#################################################################</span><br><span class="line">#</span><br><span class="line"># @date:   2016.01.28</span><br><span class="line"># @desc:   simpleTableSync @kettle</span><br><span class="line">#</span><br><span class="line">#################################################################</span><br><span class="line"></span><br><span class="line">cd `dirname $0`/.. &amp;&amp; wk_dir=`pwd` &amp;&amp; cd -</span><br><span class="line">source $&#123;wk_dir&#125;/util/env</span><br><span class="line"></span><br><span class="line">echo_ex &quot;$&#123;data_integration&#125;/kitchen.sh -file=$&#123;data_dir&#125;/tSyncTestJob.kjb&quot;</span><br><span class="line">$&#123;data_integration&#125;/kitchen.sh -file=$&#123;data_dir&#125;/tSyncTestJob.kjb</span><br><span class="line">check_success</span><br><span class="line"></span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ : kjb ä¸ ktr æœ€å¥½æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[hdfs@node196 simpleTableSync]$ cd data/</span><br><span class="line">[hdfs@node196 data]$ ll</span><br><span class="line">total 24</span><br><span class="line">-rw-rw-r--. 1 hdfs hdfs  6944 Jan 29 18:22 tSyncTestJob.kjb</span><br><span class="line">-rw-rw-r--. 1 hdfs hdfs 13450 Jan 29 18:22 tSyncTestTrans.ktr</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä» win æ‹·è´è¿‡æ¥çš„æ–‡ä»¶ï¼Œfileformat å¯èƒ½æ˜¯ dos æ ¼å¼ï¼Œå¯ä»¥ :set ff=unix.</p>
</blockquote>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><p><a href="http://www.cnblogs.com/limengqiang/archive/2013/01/16/KettleApply2.html#sz" target="_blank" rel="external">kettleç³»åˆ—</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Logback å…¥é—¨åˆæ­¥]]></title>
      <url>http://shopee.ai/2015/12/27/java/java-logback-indoor/</url>
      <content type="html"><![CDATA[<p>Logback ä¸€ä¸ªå¼€æºæ—¥å¿—ç»„ä»¶, SLF4J è¿™ä¸ªç®€å•çš„æ—¥å¿—å‰ç«¯æ¥å£ï¼ˆFaÃ§adeï¼‰æ¥æ›¿ä»£ Jakarta Commons-Logging ã€‚</p>
<a id="more"></a>
<p>Logback ä¸€ä¸ªå¼€æºæ—¥å¿—ç»„ä»¶ã€‚<br>Logback å½“å‰åˆ†æˆä¸‰ä¸ªæ¨¡å—ï¼šlogback-core  logback- classic  å’Œ  logback-accessã€‚</p>
<h2 id="1-logback-ç®€ä»‹"><a href="#1-logback-ç®€ä»‹" class="headerlink" title="1. logback ç®€ä»‹"></a>1. logback ç®€ä»‹</h2><p>Cekiåœ¨Javaæ—¥å¿—é¢†åŸŸä¸–ç•ŒçŸ¥åã€‚ä»–åˆ›é€ äº†Log4J ï¼Œè¿™ä¸ªæœ€æ—©çš„Javaæ—¥å¿—æ¡†æ¶å³ä¾¿åœ¨JREå†…ç½®æ—¥å¿—åŠŸèƒ½çš„ç«äº‰ä¸‹ä»ç„¶éå¸¸æµè¡Œã€‚éšåä»–åˆç€æ‰‹å®ç°SLF4J è¿™ä¸ªâ€œç®€å•çš„æ—¥å¿—å‰ç«¯æ¥å£ï¼ˆFaÃ§adeï¼‰â€æ¥æ›¿ä»£Jakarta Commons-Logging ã€‚</p>
<p>Logbackï¼Œä¸€ä¸ªâ€œå¯é ã€é€šç”¨ã€å¿«é€Ÿè€Œåˆçµæ´»çš„Javaæ—¥å¿—æ¡†æ¶â€ã€‚</p>
<p><strong>å®˜ç½‘ç½‘å€ :</strong> <a href="http://logback.qos.ch/" target="_blank" rel="external">http://logback.qos.ch/</a></p>
<h2 id="2-å·¥ç¨‹ä½¿ç”¨éœ€è¦çš„-jar"><a href="#2-å·¥ç¨‹ä½¿ç”¨éœ€è¦çš„-jar" class="headerlink" title="2. å·¥ç¨‹ä½¿ç”¨éœ€è¦çš„ jar"></a>2. å·¥ç¨‹ä½¿ç”¨éœ€è¦çš„ jar</h2><p>è¦åœ¨å·¥ç¨‹é‡Œé¢ä½¿ç”¨ logback , åªéœ€è¦ä»¥ä¸‹jaræ–‡ä»¶ï¼š</p>
<pre><code>(1). slf4j-api.jar       
(2). logback-access.jar
(3). logback-classic.jar
(4). logback-core.jar

logback-core    æ˜¯å…¶å®ƒä¸¤ä¸ªæ¨¡å—çš„åŸºç¡€æ¨¡å—ã€‚   
logback-classic æ˜¯ log4j çš„ä¸€ä¸ª æ”¹è‰¯ç‰ˆæœ¬ã€‚   
logback-access  ä¸Servletå®¹å™¨é›†æˆæä¾›é€šè¿‡Httpæ¥è®¿é—®æ—¥å¿—åŠŸèƒ½
</code></pre><p>logback-classic å®Œæ•´å®ç° SLF4J API ä½¿ä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›´æ¢æˆå…¶å®ƒæ—¥å¿—ç³»ç»Ÿå¦‚ log4j æˆ– JDK Loggingã€‚</p>
<h2 id="3-logback-å¸¸ç”¨é…ç½®è¯¦è§£"><a href="#3-logback-å¸¸ç”¨é…ç½®è¯¦è§£" class="headerlink" title="3. logback å¸¸ç”¨é…ç½®è¯¦è§£"></a>3. logback å¸¸ç”¨é…ç½®è¯¦è§£</h2><h3 id="3-1-æ ¹èŠ‚ç‚¹-lt-configuration-gt"><a href="#3-1-æ ¹èŠ‚ç‚¹-lt-configuration-gt" class="headerlink" title="3.1 æ ¹èŠ‚ç‚¹&lt; configuration &gt;"></a>3.1 æ ¹èŠ‚ç‚¹&lt; configuration &gt;</h3><table>
<thead>
<tr>
<th>configuration</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>scan</td>
<td>å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œé…ç½®æ–‡ä»¶å¦‚æœå‘ç”Ÿæ”¹å˜ï¼Œå°†ä¼šè¢«é‡æ–°åŠ è½½ï¼Œé»˜è®¤å€¼ä¸ºtrueã€‚</td>
</tr>
<tr>
<td>scanPeriod</td>
<td>è®¾ç½®ç›‘æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœæ²¡æœ‰ç»™å‡ºæ—¶é—´å•ä½ï¼Œé»˜è®¤å•ä½æ˜¯æ¯«ç§’ã€‚å½“scanä¸ºtrueæ—¶ï¼Œæ­¤å±æ€§ç”Ÿæ•ˆã€‚é»˜è®¤çš„æ—¶é—´é—´éš”ä¸º1åˆ†é’Ÿã€‚</td>
</tr>
<tr>
<td>debug</td>
<td>å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡º logback å†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚</td>
</tr>
</tbody>
</table>
<h2 id="4-logback-é…ç½®ç¤ºä¾‹"><a href="#4-logback-é…ç½®ç¤ºä¾‹" class="headerlink" title="4. logback é…ç½®ç¤ºä¾‹"></a>4. logback é…ç½®ç¤ºä¾‹</h2><h3 id="4-1-Myself-resources-logback-xml-example"><a href="#4-1-Myself-resources-logback-xml-example" class="headerlink" title="4.1 Myself resources/logback.xml example"></a>4.1 Myself resources/logback.xml example</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--å½“æ­¤å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼Œå°†æ‰“å°å‡ºlogbackå†…éƒ¨æ—¥å¿—ä¿¡æ¯ï¼Œå®æ—¶æŸ¥çœ‹logbackè¿è¡ŒçŠ¶æ€ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">scan</span>=<span class="string">"true"</span> <span class="attr">scanPeriod</span>=<span class="string">"3600 seconds"</span> <span class="attr">debug</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"AppName"</span> <span class="attr">value</span>=<span class="string">"your_app_name"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"LogParentDir"</span> <span class="attr">value</span>=<span class="string">"/home/www/logs/"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">contextName</span>&gt;</span>$&#123;AppName&#125;<span class="tag">&lt;/<span class="name">contextName</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"infoAppender"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.LevelFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LogParentDir&#125;/$&#123;AppName&#125;/infoLogFile.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"errorAppender"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.RollingFileAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.LevelFilter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LogParentDir&#125;/$&#123;AppName&#125;/errorLogFile.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å…¶ä¸­appenderçš„é…ç½®è¡¨ç¤ºæ‰“å°åˆ°æ§åˆ¶å°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"STDOUT"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.x.dmt"</span> <span class="attr">level</span>=<span class="string">"ERROR"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"errorAppender"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è®¾ç½®addtivityä¸ºfalseï¼Œå°†æ­¤logerçš„æ‰“å°ä¿¡æ¯ä¸å‘ä¸Šçº§ä¼ é€’ï¼›--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.x.dmt.service"</span> <span class="attr">level</span>=<span class="string">"INFO"</span> <span class="attr">additivity</span>=<span class="string">"fasle"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"infoAppender"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨æ„: logger åŒåæƒ…å†µ, çº§åˆ«ä½çš„,éœ€è¦æ”¾åœ¨ä¸‹é¢,å¦åˆ™çº§åˆ«é«˜çš„ä¼šè¦†ç›–çº§åˆ«ä½çš„æƒé™,æ—©æ™¨çº§åˆ«ä½çš„æ‰“å°ä¸å‡ºæ¥æ—¥å¿— --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<p><a href="http://aub.iteye.com/blog/1101260" target="_blank" rel="external">æ›´å¤šå‚è§ iteye1101260</a></p>
<p><a href="http://logback.qos.ch/" target="_blank" rel="external">å®˜æ–¹ç½‘å€</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Work å¸¸ç”¨çš„å‘½ä»¤ç§¯ç´¯]]></title>
      <url>http://shopee.ai/2015/05/29/devops/work-used-commands/</url>
      <content type="html"><![CDATA[<p>2015å¹´å·¥ä½œæ—¶å€™çš„å¸¸ç”¨çš„å‘½ä»¤ç§¯ç´¯</p>
<a id="more"></a>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><ol>
<li>æ‰¾å‡º =ä¸&amp; ä¹‹é—´çš„å­—ç¬¦ä¸² å¹¶è¾“å‡º</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">awkÂ &apos;&#123;print $3&#125;&apos;</span><br><span class="line">Â  Â  Â (1) awk -F&quot;[=|&amp;]&quot; &apos;&#123;print $2&#125;&apos; file1 &gt; file2</span><br><span class="line">Â  Â  Â (2)Â awk -F&quot;[:|\n]&quot; &apos;&#123;print $2&#125;&apos; file1 &gt; file2</span><br><span class="line">Â  Â  Â  Â  Â awk -F&quot;[\^|\^]&quot; &apos;&#123;print $2&#125;&apos; file1 &gt; file2</span><br><span class="line">Â  Â  Â (3)Â sed &apos;/\^/d&apos; è¯•è¯•</span><br><span class="line"></span><br><span class="line">awk -F&quot;[crowd_list&quot;:|&quot;attachment&quot;]&quot; &apos;&#123;print $2&#125;&apos; file1 &gt; file2</span><br></pre></td></tr></table></figure>
<h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><p>1). shell ä¸­ cut å‘½ä»¤çš„ç”¨æ³•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> root:x:0:0:root:/root:/bin/bash | cut <span class="_">-d</span> : <span class="_">-f</span> 6-7</span><br></pre></td></tr></table></figure>
<p>2). å¦‚ä½•æŸ¥çœ‹ä¸€ä¸ªç›®å½•å ç”¨çš„ç©ºé—´</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">du -sh *</span><br></pre></td></tr></table></figure>
<p>3). åå°è¿è¡Œè„šæœ¬çš„å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nohupÂ shÂ create_redis.sh &gt;Â create_redis.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>
<p>4). æŸ¥æ‰¾ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸­æ˜¯å¦å«æœ‰æŸä¸ªå­—ç¬¦ä¸² </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find .|xargs grep -ri <span class="string">"IBM"</span></span><br></pre></td></tr></table></figure>
<p>5). æŸ¥æ‰¾ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸­æ˜¯å¦å«æœ‰æŸä¸ªå­—ç¬¦ä¸²,å¹¶ä¸”åªæ‰“å°å‡ºæ–‡ä»¶å </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find .|xargs grep -ri <span class="string">"IBM"</span> <span class="_">-l</span></span><br></pre></td></tr></table></figure>
<p>6). è®©ä¸€ä¸ªå˜é‡å…·æœ‰åŒå¼•å·</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&apos;&quot;$&#123;plat&#125;:$version_init&quot;&apos;</span><br></pre></td></tr></table></figure>
<p>7). æ‰¹é‡æ›¿æ¢å­—ç¬¦ä¸²</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed -i <span class="string">"s/oldString/newString/g"</span>Â  `grep oldString -rl ./`</span><br></pre></td></tr></table></figure>
<p>8). VIM tab ^I æ›¿æ¢</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">:set listchars=tab:\ \ ,eol:$</span><br></pre></td></tr></table></figure>
<h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span>Â http://****/dm/dmp_engine.git ï¼ˆæ³¨æ„è¿™ä¸ªåœ°å€æ˜¯ HTTP ä¸æ˜¯ SSHï¼‰ Â  Â </span><br><span class="line"><span class="built_in">cd</span>Â dmp_engine</span><br><span class="line">git branchÂ -r</span><br><span class="line">git checkoutÂ åˆ†æ”¯åï¼Œè¿™æ˜¯é‡æ–° down åˆ†æ”¯çš„æ­¥éª¤</span><br><span class="line"></span><br><span class="line">git add filename</span><br><span class="line">git commit -mÂ â€œa<span class="string">"</span><br><span class="line">git push originÂ åˆ†æ”¯å æˆ–è€…</span><br><span class="line">git push -u origin origin/dev_dmp_online_serving</span><br><span class="line">git checkout branch_name åˆ‡æ¢åˆ°è¿™ä¸ªåˆ†æ”¯ä¹‹ä¸‹</span><br><span class="line"></span><br><span class="line">gitÂ checkoutÂ -bÂ online_redis3.0Â master (ä» master æ‹‰ä¸‹ æ–°åˆ†æ”¯, æ–°åˆ†æ”¯åå«Â online_redis3.0)</span></span><br></pre></td></tr></table></figure>
<h2 id="linux-os-info"><a href="#linux-os-info" class="headerlink" title="linux os_info"></a>linux os_info</h2><p>æŸ¥çœ‹ å†…å­˜ ä¸ CPU ä¿¡æ¯</p>
<p>1). æŸ¥çœ‹å†…å­˜</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat /proc/meminfo</span><br></pre></td></tr></table></figure>
<p>2). æŸ¥çœ‹ç‰©ç†CPUçš„ä¸ªæ•°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#cat /proc/cpuinfo | grep "physical id" | sort | uniq | wc -l</span></span><br></pre></td></tr></table></figure>
<p>3). æŸ¥çœ‹é€»è¾‘CPUçš„ä¸ªæ•°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#cat /proc/cpuinfo | grep "processor" | wc -l</span></span><br></pre></td></tr></table></figure>
<p>4). æŸ¥çœ‹CPUæ˜¯å‡ æ ¸</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#cat /proc/cpuinfo | grep "cores" | uniq</span></span><br></pre></td></tr></table></figure>
<p>5). æŸ¥çœ‹CPUçš„ä¸»é¢‘</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#cat /proc/cpuinfo | grep MHz | uniq</span></span><br></pre></td></tr></table></figure>
<h2 id="hive"><a href="#hive" class="headerlink" title="hive"></a>hive</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hive <span class="_">-e</span> <span class="string">"select attributes['lt_its'],attributes['ad_clicks'] from new_algo_user_attributes where dt='20150419' and platform='pc' and attributes['lt_its']&lt;&gt;'NULL' limit 10"</span></span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hive ä¸­ udfã€udaf å’Œ udtf çš„ä½¿ç”¨]]></title>
      <url>http://shopee.ai/2015/02/01/hadoop/hadoop-hive-udf-udaf/</url>
      <content type="html"><![CDATA[<p>Hive æ˜¯åŸºäº Hadoop ä¸­çš„ MapReduceï¼Œæä¾› HQL æŸ¥è¯¢çš„æ•°æ®ä»“åº“. </p>
<p>Hive æ˜¯ä¸€ä¸ªå¾ˆå¼€æ”¾çš„ç³»ç»Ÿï¼Œå¾ˆå¤šå†…å®¹éƒ½æ”¯æŒç”¨æˆ·å®šåˆ¶. å¦‚ : æ–‡ä»¶æ ¼å¼ã€MRè„šæœ¬ã€è‡ªå®šä¹‰å‡½æ•°ã€è‡ªå®šä¹‰èšåˆå‡½æ•° ç­‰.</p>
<a id="more"></a>
<h2 id="UDF"><a href="#UDF" class="headerlink" title="UDF"></a>UDF</h2><p>ç¼–å†™ UDFå‡½æ•° çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>è‡ªå®šä¹‰ UDF éœ€è¦ç»§æ‰¿ org.apache.hadoop.hive.ql.UDF</li>
<li>éœ€è¦å®ç° <code>evaluate</code> å‡½æ•°</li>
</ol>
<p>ä»¥ä¸‹æ˜¯ä¸¤ä¸ªæ•°æ±‚å’Œå‡½æ•°çš„UDFã€‚evaluateå‡½æ•°ä»£è¡¨ä¸¤ä¸ªæ•´å‹æ•°æ®ç›¸åŠ </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hive.connect;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.ql.exec.UDF;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Add</span> <span class="keyword">extends</span> <span class="title">UDF</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">evaluate</span><span class="params">(Integer a, Integer b)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == a || <span class="keyword">null</span> == b) &#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;  </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> a + b;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="UDAF"><a href="#UDAF" class="headerlink" title="UDAF"></a>UDAF</h2><p>å‡½æ•°ç±»éœ€è¦ç»§æ‰¿ <strong>UDAF</strong> ç±»ï¼Œå†…éƒ¨ç±» <strong>Evaluator</strong> éœ€è¦å®ç° <strong>UDAFEvaluator</strong> æ¥å£.</p>
<p>Evaluator éœ€è¦å®ç° initã€iterateã€terminatePartialã€mergeã€terminate è¿™å‡ ä¸ªå‡½æ•°.</p>
<ol>
<li><code>init</code>å‡½æ•°å®ç°æ¥å£ UDAFEvaluator çš„ init å‡½æ•°.</li>
<li><code>iterate</code>æ¥æ”¶ä¼ å…¥çš„å‚æ•°ï¼Œå¹¶è¿›è¡Œå†…éƒ¨çš„è½®è½¬ã€‚å…¶è¿”å›ç±»å‹ä¸º boolean.</li>
<li><code>terminatePartial</code>æ— å‚æ•°ï¼Œå…¶ä¸º iterate å‡½æ•°è½®è½¬ç»“æŸåï¼Œè¿”å›è½®è½¬æ•°æ®.</li>
<li><code>merge</code> æ¥æ”¶ terminatePartial çš„è¿”å›ç»“æœï¼Œè¿›è¡Œæ•°æ® merge æ“ä½œï¼Œå…¶è¿”å›ç±»å‹ä¸ºboolean.</li>
<li><code>terminate</code> è¿”å›æœ€ç»ˆçš„èšé›†å‡½æ•°ç»“æœ.</li>
</ol>
<p><a href="https://github.com/blair101/bigdata/tree/master/hadoop/hive_udf_udaf" target="_blank" rel="external">ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ UDAF çš„ demo</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.x.user_bhv;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.common.collect.Maps;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.ql.exec.UDAF;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.hive.ql.exec.UDAFEvaluator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDAFMergeIntToIntMap</span> <span class="keyword">extends</span> <span class="title">UDAF</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">PartialResult</span> </span>&#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; attributes;</span><br><span class="line"></span><br><span class="line">        PartialResult() &#123;</span><br><span class="line">            attributes = Maps.newHashMap();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">UnitIdUDAFEvaluator</span> <span class="keyword">implements</span> <span class="title">UDAFEvaluator</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> PartialResult partialResult;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">UnitIdUDAFEvaluator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>();</span><br><span class="line">            init();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"map init"</span>);</span><br><span class="line">            partialResult = <span class="keyword">new</span> PartialResult();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">iterate</span><span class="params">(Map&lt;Integer, Integer&gt; attributes_args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (attributes_args == <span class="keyword">null</span> || attributes_args.isEmpty()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (Map.Entry&lt;Integer, Integer&gt; entry : attributes_args.entrySet()) &#123;</span><br><span class="line">                <span class="keyword">this</span>.partialResult.attributes.put(entry.getKey(), entry.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> PartialResult <span class="title">terminatePartial</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.partialResult;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">merge</span><span class="params">(PartialResult other)</span> </span>&#123; <span class="comment">// å‚æ•°ä¸å¯èƒ½ä¸º null</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (Map.Entry&lt;Integer, Integer&gt; entry : other.attributes.entrySet()) &#123;</span><br><span class="line">                <span class="keyword">this</span>.partialResult.attributes.put(entry.getKey(), entry.getValue());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Map&lt;Integer, Integer&gt; <span class="title">terminate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (partialResult == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> HashMap&lt;Integer, Integer&gt;();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.partialResult.attributes;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ Hive è„šæœ¬ä¸­çš„ä½¿ç”¨ç¤ºä¾‹ :</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hql=<span class="string">"ADD jar <span class="variable">$&#123;jar_dir&#125;</span>/user_bhv_for_hive.jar;</span><br><span class="line">    CREATE TEMPORARY FUNCTION merge_int_to_int_map AS 'com.x.user_bhv.UDAFMergeIntToIntMap';</span><br><span class="line">    INSERT OVERWRITE TABLE <span class="variable">$&#123;table_user_buy_category&#125;</span></span><br><span class="line">    SELECT</span><br><span class="line">        mobile_number,</span><br><span class="line">        merge_int_to_int_map (level1_id_count_map)</span><br><span class="line">    FROM </span><br><span class="line">        ods_dm_e_coupon</span><br><span class="line">    GROUP BY mobile_number</span></span><br></pre></td></tr></table></figure>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><ol>
<li>é‡è½½ evaluate å‡½æ•°.</li>
<li>UDF å‡½æ•°ä¸­å‚æ•°ç±»å‹å¯ä»¥ä¸ºWritableï¼Œä¹Ÿå¯ä¸ºjavaä¸­çš„åŸºæœ¬æ•°æ®å¯¹è±¡.</li>
<li>UDF æ”¯æŒå˜é•¿çš„å‚æ•°.</li>
<li>Hive æ”¯æŒéšå¼ç±»å‹è½¬æ¢.</li>
<li>å®¢æˆ·ç«¯é€€å‡ºæ—¶ï¼Œåˆ›å»ºçš„ä¸´æ—¶å‡½æ•°è‡ªåŠ¨é”€æ¯.</li>
<li>evaluateå‡½æ•°å¿…é¡»è¦è¿”å›ç±»å‹å€¼ï¼Œç©ºçš„è¯è¿”å›nullï¼Œä¸èƒ½ä¸ºvoidç±»å‹.</li>
<li>UDF å’Œ UDAF éƒ½å¯ä»¥é‡è½½.</li>
<li>æŸ¥çœ‹å‡½æ•° SHOW FUNCTIONS.</li>
</ol>
<blockquote>
<p>UDAF: User Defined Aggregation Function</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://blog.csdn.net/liuj2511981/article/details/8523084" target="_blank" rel="external">Hive ä¸­ UDFã€UDAF å’Œ UDTF ä½¿ç”¨</a></li>
<li><a href="https://github.com/blair101/bigdata/tree/master/hadoop/hive_udf_udaf" target="_blank" rel="external">bliarâ€™s github hive udaf demo</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[MapReduce for Python]]></title>
      <url>http://shopee.ai/2015/01/30/hadoop/hadoop-mr-for-python/</url>
      <content type="html"><![CDATA[<p>æˆ‘ä»¬å¯ä»¥ç”¨ hadoop-streaming çš„æ–¹å¼ï¼Œé€šè¿‡ python ç­‰å…¶ä»–è¯­è¨€æ¥ç¼–å†™ MR ç¨‹åº.</p>
<a id="more"></a>
<h2 id="Mapé˜¶æ®µï¼šmapper-py"><a href="#Mapé˜¶æ®µï¼šmapper-py" class="headerlink" title="Mapé˜¶æ®µï¼šmapper.py"></a>Mapé˜¶æ®µï¼šmapper.py</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">    line = line.strip()</span><br><span class="line">    words = line.split()</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">        print(<span class="string">"%s"</span> % word)</span><br><span class="line">        </span><br><span class="line"><span class="comment"># è¿™é‡Œä»…ä»…æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œåªè¾“å‡ºäº†ç¬¬ä¸€åˆ—</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸ºäº†æ˜¯è„šæœ¬å¯æ‰§è¡Œï¼Œå¢åŠ mapper.pyçš„å¯æ‰§è¡Œæƒé™</p>
</blockquote>
<p>å½“ç„¶ï¼Œ<code>Map</code>é˜¶æ®µï¼Œ ä½ ä¹Ÿå¯ä»¥ä¸ä½œå¤„ç†åŸæ ·è¾“å‡º: åªå†™ä¸€ä¸ª <code>cat</code></p>
<h2 id="Reduceé˜¶æ®µï¼šreducer-py"><a href="#Reduceé˜¶æ®µï¼šreducer-py" class="headerlink" title="Reduceé˜¶æ®µï¼šreducer.py"></a>Reduceé˜¶æ®µï¼šreducer.py</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># Copyright 2013 x Inc. All Rights Reserved</span></span><br><span class="line"></span><br><span class="line">__author__ = <span class="string">'Blair Chan'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> constant</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> EsHelper <span class="keyword">import</span> EsHelper</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert_user_basic_consume_info</span><span class="params">(items,  esHelper)</span>:</span></span><br><span class="line"></span><br><span class="line">    basic_consume_info_doc = get_user_basic_consume_info_doc(items)</span><br><span class="line">    <span class="keyword">if</span> basic_consume_info_doc <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">    _id = basic_consume_info_doc[<span class="string">'mobile_number'</span>]</span><br><span class="line">    basic_consume_info_index = <span class="string">"basic_consume_info_index"</span></span><br><span class="line"></span><br><span class="line">    esHelper.index(index=basic_consume_info_index, doc_type=basic_consume_info_index, id=_id, data=basic_consume_info_doc)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_user_basic_consume_info_doc</span><span class="params">(items)</span>:</span></span><br><span class="line">    doc = <span class="keyword">None</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        doc = &#123;</span><br><span class="line">            <span class="string">"mobile_number"</span>: items[<span class="number">0</span>],</span><br><span class="line">            <span class="string">"first_consume_time"</span>: items[<span class="number">1</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">except</span> BaseException <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">"Exist Exception : %s About get_user_basic_consume_info_doc, mobile_number: %s"</span> % (str(e), mobile_number))</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> doc</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line"></span><br><span class="line">    esHelper = EsHelper(constant.ES_URL)</span><br><span class="line">    success_sum = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line"></span><br><span class="line">        line = line.strip()</span><br><span class="line">        items = line.split(<span class="string">'\001'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> len(items) &lt; <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        insert_user_basic_consume_info(items, esHelper)</span><br><span class="line">        success_sum = success_sum + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    print(<span class="string">"Success:%d"</span> % success_sum)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h2 id="æœ¬åœ°æµ‹è¯•"><a href="#æœ¬åœ°æµ‹è¯•" class="headerlink" title="æœ¬åœ°æµ‹è¯•"></a>æœ¬åœ°æµ‹è¯•</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat data.txt | python mapper.py | sort | reducer.py</span><br></pre></td></tr></table></figure>
<h2 id="æäº¤Hadoop"><a href="#æäº¤Hadoop" class="headerlink" title="æäº¤Hadoop"></a>æäº¤Hadoop</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">cd</span> `dirname <span class="variable">$0</span>`/.. &amp;&amp; wk_dir=`<span class="built_in">pwd</span>` &amp;&amp; <span class="built_in">cd</span> -</span><br><span class="line"><span class="built_in">source</span> <span class="variable">$&#123;wk_dir&#125;</span>/util/env</span><br><span class="line"></span><br><span class="line">input_file=<span class="string">"<span class="variable">$&#123;OSS_URL&#125;</span>/<span class="variable">$&#123;mds_hive_dir&#125;</span>/<span class="variable">$&#123;table_user_basic_consume_info&#125;</span>/*"</span></span><br><span class="line">output_file=<span class="string">"<span class="variable">$&#123;OSS_URL&#125;</span>/<span class="variable">$&#123;tmp_hive_dir&#125;</span>/<span class="variable">$&#123;table_user_basic_consume_info&#125;</span>/dt=<span class="variable">$&#123;d1&#125;</span>"</span></span><br><span class="line">reducer=<span class="string">"reducer.py"</span></span><br><span class="line">reducer_depend1=<span class="string">"constant.py"</span></span><br><span class="line">reducer_depend2=<span class="string">"EsHelper.py"</span></span><br><span class="line">archive=<span class="string">"<span class="variable">$&#123;OSS_URL&#125;</span>/share/packages/elasticsearch-5.0.0.tar.gz#elasticsearch-5.0.0"</span> </span><br><span class="line"><span class="comment">## archive è¡¨ç¤ºçš„ä¾èµ–åŒ…éœ€è¦ä¸Šä¼ åˆ° hdfs ä¸Šï¼Œ#åé¢è¡¨ç¤ºçš„æ˜¯è§£å‹åçš„ç›®å½•å</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;HADOOP&#125;</span> fs -rmr <span class="variable">$&#123;output_file&#125;</span></span><br><span class="line"></span><br><span class="line">cmd=<span class="string">"<span class="variable">$&#123;HADOOP&#125;</span> jar <span class="variable">$&#123;hadoop_streaming_jar&#125;</span></span><br><span class="line">     -D mapred.map.tasks=100</span><br><span class="line">     -D mapred.reduce.tasks=100</span><br><span class="line">     -D stream.map.input.ignoreKey=true</span><br><span class="line">     -input <span class="variable">$&#123;input_file&#125;</span></span><br><span class="line">     -output <span class="variable">$&#123;output_file&#125;</span></span><br><span class="line">     -file <span class="variable">$&#123;reducer&#125;</span></span><br><span class="line">     -file <span class="variable">$&#123;reducer_depend1&#125;</span></span><br><span class="line">     -file <span class="variable">$&#123;reducer_depend2&#125;</span></span><br><span class="line">     -mapper cat</span><br><span class="line">     -reducer <span class="variable">$&#123;reducer&#125;</span></span><br><span class="line">     -cacheArchive <span class="variable">$&#123;archive&#125;</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span>_ex <span class="string">"<span class="variable">$cmd</span>"</span></span><br><span class="line"><span class="variable">$cmd</span></span><br><span class="line">check_success</span><br></pre></td></tr></table></figure>
<blockquote>
<p>hadoop_streaming_jar=â€/home/data_mining/share/packages/hadoop2/hadoop-streaming-2.7.2.jarâ€</p>
<p>ä»¥ä¸Šä»…ä»…æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œè™½ç„¶æ’å…¥ ES å‡ºç°å¼‚å¸¸ï¼Œä½†æœ¬ç¯‡ä»…ä»…è¯´æ˜å¦‚ä½•ç”¨ python å†™ mapreduce ç¨‹åº</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://www.cnblogs.com/kaituorensheng/p/3826114.html" target="_blank" rel="external">ç”¨pythonå†™MapReduceå‡½æ•°â€”â€”ä»¥WordCountä¸ºä¾‹</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux, profile / bashrc Brief Introduce]]></title>
      <url>http://shopee.ai/2014/05/18/devops/linux-bashrc-profile/</url>
      <content type="html"><![CDATA[<p>/etc/profileã€/etc/bashrcã€~/.bash_profileã€~/.bashrc </p>
<a id="more"></a>
<table>
<thead>
<tr>
<th style="text-align:center">config file</th>
<th style="text-align:center">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">/etc/profileï¼Œ/etc/bashrc</td>
<td style="text-align:center">ç³»ç»Ÿå…¨å±€ç¯å¢ƒå˜é‡è®¾å®š</td>
</tr>
<tr>
<td style="text-align:center">~/.profileï¼Œ~/.bashrc</td>
<td style="text-align:center">ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„ç§æœ‰ç¯å¢ƒå˜é‡è®¾å®š </td>
</tr>
</tbody>
</table>
<h2 id="1-login-env-steps"><a href="#1-login-env-steps" class="headerlink" title="1. login env steps"></a>1. login env steps</h2><blockquote>
<p>ä»¥ä¸‹æ˜¯ ç™»å…¥ç³»ç»Ÿ,ç¯å¢ƒè®¾å®šæ¡£ æµç¨‹</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">Read step</th>
<th style="text-align:center">desc</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">/etc/profile</td>
<td style="text-align:center">/etc/profile.d å’Œ /etc/inputrc ã€‚ ä»/etc/profile.dç›®å½•çš„é…ç½®æ–‡ä»¶æœé›†shellçš„è®¾ç½®</td>
</tr>
<tr>
<td style="text-align:center">~/.bash_profile</td>
<td style="text-align:center">~/.bash_profileï¼Œå¦‚æ— åˆ™è¯»å– ~/.bash_loginï¼Œå¦‚æ— åˆ™è¯»å– ~/.profile</td>
</tr>
<tr>
<td style="text-align:center">~/.bashrc</td>
<td style="text-align:center">~/.bashrc (äº¤äº’å¼ non-login æ–¹å¼è¿›å…¥ bash è¿è¡Œçš„)</td>
</tr>
</tbody>
</table>
<h2 id="2-profile-ä¸-bashrc"><a href="#2-profile-ä¸-bashrc" class="headerlink" title="2. .profile ä¸ .bashrc"></a>2. .profile ä¸ .bashrc</h2><p>~/.profile ä¸ ~/.bashrc </p>
<h3 id="2-1-ç›¸åŒç‚¹"><a href="#2-1-ç›¸åŒç‚¹" class="headerlink" title="2.1 ç›¸åŒç‚¹"></a>2.1 ç›¸åŒç‚¹</h3><p>éƒ½å…·æœ‰ä¸ªæ€§åŒ–å®šåˆ¶åŠŸèƒ½</p>
<blockquote>
<p>~/.profile å¯ä»¥è®¾å®šæœ¬ç”¨æˆ·ä¸“æœ‰çš„è·¯å¾„ï¼Œç¯å¢ƒå˜é‡ï¼Œç­‰ï¼Œå®ƒåªèƒ½ç™»å…¥çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡<br>~/.bashrc ä¹Ÿæ˜¯æŸç”¨æˆ·ä¸“æœ‰è®¾å®šæ–‡æ¡£ï¼Œå¯ä»¥è®¾å®šè·¯å¾„ï¼Œå‘½ä»¤åˆ«åï¼Œæ¯æ¬¡shell scriptçš„æ‰§è¡Œéƒ½ä¼šä½¿ç”¨å®ƒä¸€æ¬¡ </p>
</blockquote>
<h3 id="2-2-bashrc-å’Œ-profile-çš„åŒºåˆ«"><a href="#2-2-bashrc-å’Œ-profile-çš„åŒºåˆ«" class="headerlink" title="2.2 bashrc å’Œ profile çš„åŒºåˆ«"></a>2.2 bashrc å’Œ profile çš„åŒºåˆ«</h3><p><strong>äº¤äº’å¼æ¨¡å¼</strong></p>
<blockquote>
<p>shellç­‰å¾…ä½ çš„è¾“å…¥ï¼Œå¹¶ä¸”æ‰§è¡Œä½ æäº¤çš„å‘½ä»¤ã€‚ shellä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ ç™»å½•ã€æ‰§è¡Œå‘½ä»¤ã€ç­¾é€€ã€shellç»ˆæ­¢ </p>
<ul>
<li>~/.bash_profile æ˜¯äº¤äº’å¼ã€login æ–¹å¼è¿›å…¥ bash è¿è¡Œçš„ </li>
<li>~/.bashrc æ˜¯äº¤äº’å¼ non-login æ–¹å¼è¿›å…¥ bash è¿è¡Œçš„ </li>
</ul>
</blockquote>
<p><strong>éäº¤äº’å¼æ¨¡å¼</strong></p>
<blockquote>
<p>shellä¸ä¸ä½ è¿›è¡Œäº¤äº’ï¼Œæ˜¯è¯»å–å­˜åœ¨æ–‡ä»¶ä¸­çš„å‘½ä»¤,å¹¶ä¸”æ‰§è¡Œå®ƒä»¬ã€‚å½“å®ƒè¯»åˆ°æ–‡ä»¶çš„ç»“å°¾ï¼Œshellç»ˆæ­¢</p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="http://blog.chinaunix.net/uid-26435987-id-3400127.html" target="_blank" rel="external">blog.chinaunix.net/</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Qunar Trainee Summary]]></title>
      <url>http://shopee.ai/2014/05/07/devops/my-dev-trainee/</url>
      <content type="html"><![CDATA[<p>an trainee in qunar</p>
<a id="more"></a>
<p>  æ—¶é—´è¿‡å¾—çœŸå¿«ï¼Œæˆ‘åœ¨å»å“ªå„¿ç½‘å®ä¹ å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œåœ¨è¿™æœŸé—´æˆ‘çœŸçš„å­¦ä¼šäº†å¾ˆå¤šï¼Œç»è¿‡è¿™æ¬¡åŸ¹è®­ï¼Œæˆ‘å­¦ä¼šäº†javaï¼Œäº†è§£äº†guavaï¼Œå­¦ä¹ äº†SVNï¼Œ gitç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œ Mavené¡¹ç›®ç®¡ç†åŠè‡ªåŠ¨æ„å»ºå·¥å…·ï¼Œ SpringMVCçš„å¼€å‘ï¼Œmybatis çš„ä½¿ç”¨ï¼ŒServletï¼Œ jspï¼Œ htmlï¼Œ http çš„åˆæ­¥äº†è§£ï¼ŒåŠ¨æ€ä»£ç†ä¸AOPï¼Œ å•å…ƒæµ‹è¯•ä¸è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ•°æ®åº“å»ºè¡¨è§„èŒƒï¼Œ Linuxç³»ç»Ÿçš„ä½¿ç”¨ç­‰ç­‰ç­‰ç­‰ï¼Œç†Ÿæ‚‰äº†å…¬å¸å†…éƒ¨çš„å¼€å‘æ¡†æ¶ï¼Œäº†è§£å…¬å¸å¼€å‘è§„èŒƒï¼Œé€‚åº”å…¬å¸æ–‡åŒ–ï¼Œç¯å¢ƒã€‚</p>
<p>  åœ¨è¿™äº›å¤©å®ä¹ çš„æ—¥å­ï¼Œæœ€åˆæœ¬æƒ³ä¸èµ° java è·¯çº¿çš„ï¼Œè§‰å¾—å°è£…å¥½ä¸¥é‡ï¼Œä½ æ ¹æœ¬ä¸çŸ¥é“é‚£ä¸ªåŒ…æ˜¯æ€ä¹ˆå›äº‹ï¼Œå°±å¯ä»¥æ‹¿è¿‡æ¥ä¸€ç”¨ï¼Œå°±å‡ºæ¥äº†ä¸€ä¸ªçœ‹èµ·æ¥æ¯”è¾ƒé«˜å¤§ä¸Šçš„ä½œå“ï¼Œå­¦å¾ˆçŸ­çš„æ—¶é—´å°±å¯ä»¥æå‡ºä¸ªä¸œè¥¿æ¥ï¼Œè§‰å¾—æ²¡æœ‰Cã€C++æˆ–è€…æ˜¯ç®—æ³•ï¼Œæ¥å¾—é‚£ä¹ˆçˆ½ã€‚ä½†æ˜¯ç»è¿‡åŸ¹è®­åï¼Œæˆ‘æ‰å‘ç°äº†javaçš„å¯çˆ±ä¹‹å¤„ä¸å¼ºå¤§ï¼Œä»¥å‰å¯¹javaæœ‰è¯¯è§£ï¼Œå®Œå…¨æ˜¯è‡ªå·±çš„æ— çŸ¥ä¸ä¸æ‡‚ï¼Œé‡åˆ°äº†é…’åº—äº‹ä¸šéƒ¨çš„ æ€é›¨å¤§ç¥ï¼Œæ›´æ˜¯æ„Ÿå—åˆ°äº†å­¦ä¹ javaè¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œå¯ä»¥å¾ˆç‰›å¾ˆç‰›ï¼Œå­¦ä»»ä½•ä¸€é—¨æŠ€æœ¯éƒ½å…·æœ‰æ›´ä¸ºå¹¿é˜”çš„ç©ºé—´ï¼Œå®ä¹ åˆæœŸï¼Œç”±äºæˆ‘å¯¹javaçŸ¥è¯†ä¹‹å‰æ˜¯æ²¡æœ‰ä»»ä½•ç»éªŒçš„ï¼Œæ‰€ä»¥é¢å¯¹ä¸¥æ ¼å¿«é€Ÿæ­£è§„çš„åŸ¹è®­ï¼ŒçœŸçš„æ„Ÿåˆ°å‹åŠ›å¾ˆå¤§ï¼Œå¹¸å¥½å°ç»„çš„åˆ†äº«è¿˜æœ‰åšä½œä¸šé‡åˆ°é—®é¢˜ï¼Œç»„å†…å¤–åŒå­¦çš„å¸®åŠ©ï¼Œæ‰å¯ä»¥è·Ÿä¸‹æ¥ï¼Œç”±äºåˆå­¦ï¼ŒèŠ‚å¥å¾ˆå¿«ï¼Œé‚£ä¹ˆå¤šçŸ¥è¯†ï¼Œåœ¨ä¸åˆ°2ä¸ªæœˆçš„æ—¶é—´å†…å…¨éƒ¨å­¦ç†Ÿæ˜¯å¾ˆéš¾åšåˆ°çš„ï¼Œæˆ‘ç°åœ¨å¯¹ SpringMVC è¿˜æœ‰ä¸€äº› Guavaï¼Œwebçš„çŸ¥è¯†ï¼Œè¿˜ä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œä»¥åä¸€å®šè¦æ‰¾æ—¶é—´åœ¨è‡ªå·±è¡¥ä¹ ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†ã€‚å¹¶æŠŠè‡ªå·±åœ¨å…¬å¸å­¦åˆ°çš„ä¸€äº›çŸ¥è¯†ï¼Œä»‹ç»ç»™å­¦æ ¡çš„ä¸€äº›è¿˜åœ¨è¿·èŒ«æ‡µæ‡‚çš„å­¦å¦¹ï¼Œå­¦å¼Ÿä»¬ã€‚åœ¨å…¬å¸çš„å®ä¹ ç”Ÿæ´»ï¼Œå¯¹æˆ‘æ¥è¯´ä¸ä»…ä»…æ˜¯æŠ€æœ¯å’Œèƒ½åŠ›ä¸Šçš„æå‡ï¼Œæ›´å¤šçš„è¿˜æœ‰æ€æƒ³å’Œæ€åº¦çš„è½¬å˜ã€‚</p>
<p>  æœ€åï¼Œé¦–å…ˆï¼Œè¦æ„Ÿè°¢å…¬å¸ç»™æˆ‘ä»¬åº”å±Šç”Ÿæä¾›çš„è¿™ä¸ªåŸ¹è®­å¹³å°ï¼Œå¯ä»¥è®©æˆ‘å­¦åˆ°è¿™ä¹ˆå¤šçš„ä¸“ä¸šçŸ¥è¯†ï¼Œè®¤è¯†åˆ°æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ï¼›æ„Ÿè°¢ä¸«ä¸«å§ï¼Œè¾›è‹¦æ“åŠ³çš„å°½å¯èƒ½ç»™æˆ‘ä»¬æä¾›æ¬¢æ„‰çš„å­¦ä¹ ç¯å¢ƒï¼Œä»¥åŠé‚€è¯·å¾ˆå¤šçš„ä¼˜ç§€è®²å¸ˆï¼›æ„Ÿè°¢å…¨ä½“ç»™æˆ‘ä»¬è®²è¯¾çš„è®²å¸ˆä»¬ï¼Œæ„Ÿè°¢æˆ‘çš„å›¢é˜Ÿä»¥åŠå‘¨è¾¹çš„åŒäº‹ï¼Œåœ¨å·¥ä½œå­¦ä¹ çš„ç¹å¿™ä¹‹ä½™ï¼Œè¿˜å¯ä»¥å¸¦æ¥å„ç§å„æ ·çš„æ¬¢å£°ç¬‘è¯­ï¼Œæ„Ÿè°¢è€ä½•ä¸davidï¼Œè®©æˆ‘å­¦åˆ°äº†ä¸¥è°¨ï¼Œè´Ÿè´£ï¼Œè®¤çœŸçš„å·¥ä½œæ€åº¦ä¸ç”Ÿæ´»æ€åº¦ã€‚</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux é¸Ÿå“¥çš„ç§æˆ¿èœ è¯»ä¹¦å¿ƒå¾—]]></title>
      <url>http://shopee.ai/2013/08/29/devops/linux-bird-bro/</url>
      <content type="html"><![CDATA[<p>Linux é¸Ÿå“¥çš„ç§æˆ¿èœ è¯»ä¹¦å¿ƒå¾— ï¼š å®è·µä¸è§‚å¯Ÿæ‰æ˜¯ç‹é“</p>
<a id="more"></a>
<h2 id="0-è®¡ç®—æœºæ¦‚è®º"><a href="#0-è®¡ç®—æœºæ¦‚è®º" class="headerlink" title="0. è®¡ç®—æœºæ¦‚è®º"></a>0. è®¡ç®—æœºæ¦‚è®º</h2><p>è®¡ç®—æœºï¼šæ¥å—ç”¨æˆ·è¾“å…¥çš„æŒ‡ä»¤ä¸æ•°æ®ï¼Œç»è¿‡å¤„ç†å™¨çš„æ•°æ®ä¸é€»è¾‘å•å…ƒè¿ç®—å¤„ç†åï¼Œä»¥äº§ç”Ÿæˆ–å­˜å‚¨æˆæœ‰ç”¨çš„ä¿¡æ¯ã€‚</p>
<p><strong>è®¡ç®—æœºç¡¬ä»¶çš„äº”å¤§å•å…ƒ </strong></p>
<ol>
<li>è¾“å…¥å•å…ƒ (é¼ æ ‡ï¼Œé”®ç›˜ç­‰)</li>
<li>æ§åˆ¶å™¨</li>
<li>è¿ç®—å™¨ (ç®—æœ¯é€»è¾‘ï¼Œæ§åˆ¶ï¼Œè®°å¿†)</li>
<li>å­˜å‚¨å™¨</li>
<li>è¾“å‡ºå•å…ƒ (å±å¹•ï¼Œæ‰“å°æœºç­‰)</li>
</ol>
<blockquote>
<p>CPU ä¸ºä¸€ä¸ªå…·æœ‰ç‰¹å®šåŠŸèƒ½çš„èŠ¯ç‰‡ï¼Œé‡Œå¤´å«æœ‰å¾®æŒ‡ä»¤é›†ã€‚<br>CPU è¯»å–çš„æ•°æ®éƒ½æ˜¯ä»å†…å­˜ä¸­è¯»å–æ¥çš„ï¼Œå†…å­˜çš„æ•°æ®æ˜¯ç”±è¾“å…¥å•å…ƒä¼ è¾“è¿›æ¥çš„ã€‚<br>CPU å¤„ç†å®Œæ¯•çš„æ•°æ®è¦å†™å…¥å†…å­˜ï¼Œå†…å­˜å†åˆ°è¾“å‡ºå•å…ƒã€‚</p>
</blockquote>
<p><strong>æ¥å£è®¾å¤‡</strong></p>
<ol>
<li>ä¸»æ¿ (è®¾å¤‡è¿æ¥ä¸€èµ·ï¼Œè®©å…¶åè°ƒï¼Œé€šä¿¡)</li>
<li>å­˜å‚¨è®¾å¤‡(ç¡¬ç›˜ï¼Œè½¯ç›˜ï¼Œå…‰ç›˜ï¼Œç£å¸¦) </li>
<li>æ˜¾ç¤ºè®¾å¤‡ </li>
<li>ç½‘ç»œè®¾å¤‡</li>
</ol>
<blockquote>
<p>ç¡¬ç›˜æœ€å°ç‰©ç†é‡512bytes,æœ€å°çš„ç»„æˆå•ä½ä¸ºæ‰‡åŒºsector </p>
</blockquote>
<p><strong>ä¸ªäººè®¡ç®—æœºçš„æ¶æ„ä¸è®¾è®¡</strong></p>
<p>x86å¼€å‘å•† (intel,AMD) çš„cpuæ¶æ„å¹¶ä¸å…¼å®¹ï¼Œä¸»æ¿èŠ¯ç‰‡ç»„è®¾è®¡ä¸ç›¸åŒã€‚</p>
<p>ä¸»æ¿ä¸Šæœ€é‡è¦çš„å°±æ˜¯èŠ¯ç‰‡ç»„ï¼ŒèŠ¯ç‰‡ç»„é€šå¸¸åˆåˆ†ä¸ºä¸¤ä¸ªæ¡¥æ¥å™¨æ¥æ§åˆ¶å„ç»„ä»¶çš„é€šä¿¡ã€‚</p>
<p>åŒ—æ¡¥ : è´Ÿè´£è¿æ¥è¾ƒå¿«çš„ cpu,å†…å­˜å’Œæ˜¾å¡ ç­‰ç»„ä»¶ã€‚ (AMD : å†…å­˜ç›´æ¥ä¸cpué€šä¿¡ï¼Œä¸ç»è¿‡åŒ—æ¡¥)<br>å—æ¡¥ : è´Ÿè´£è¿æ¥ç¡¬ç›˜ï¼ŒUSBï¼Œç½‘å¡ç­‰ã€‚</p>
<p>åŒ—æ¡¥çš„æ€»çº¿ç§°ä¸ºç³»ç»Ÿæ€»çº¿ï¼Œæ˜¯å†…å­˜ä¼ è¾“çš„ä¸»è¦ä¿¡é“ã€‚ ä¸æ€»çº¿å®½åº¦ç±»ä¼¼ï¼Œcpuæ¯æ¬¡èƒ½å¤Ÿå¤„ç†çš„æ•°æ®é‡ç§°ä¸ºå­—ç»„å¤§å°(word size),å­—ç»„å¤§å°ä¾æ®cpuçš„è®¾è®¡è€Œæœ‰32ä½ä¸64ä½ã€‚</p>
<blockquote>
<p>æ˜¾å¡å‚å•†ç›´æ¥åœ¨æ˜¾å¡ä¸Šé¢åµŒå…¥ä¸€ä¸ª3DåŠ é€Ÿçš„èŠ¯ç‰‡ï¼Œè¿™å°±æ˜¯GPUç§°è°“çš„ç”±æ¥ã€‚<br>CMOSæ˜¯ç”µè„‘ä¸»æ¿ä¸Šçš„ä¸€å—å¯è¯»å†™çš„RAMèŠ¯ç‰‡ã€‚å› ä¸ºå¯è¯»å†™çš„ç‰¹æ€§.</p>
<p>æ‰€ä»¥åœ¨ç”µè„‘ä¸»æ¿ä¸Šç”¨æ¥ä¿å­˜BIOSè®¾ç½®å®Œç”µè„‘ç¡¬ä»¶å‚æ•°åçš„æ•°æ®ï¼Œè¿™ä¸ªèŠ¯ç‰‡ä»…ä»…æ˜¯ç”¨æ¥å­˜æ”¾æ•°æ®çš„ã€‚<br>BIOSä¸ºå†™å…¥åˆ°ä¸»æ¿ä¸ŠæŸä¸€å—é—ªå­˜æˆ–EEPROMçš„ç¨‹åºï¼Œåœ¨å¼€æœºçš„æ—¶å€™è¿è¡Œï¼Œä»¥åŠ è½½CMOSå½“ä¸­çš„å‚æ•°ã€‚</p>
</blockquote>
<p>è½¯ä»¶æ˜¯è®¡ç®—æœºçš„çµé­‚ã€‚</p>
<blockquote>
<p>æœºå™¨ç¨‹åºä¸ç¼–è¯‘ç¨‹åºã€‚ C/C++ â€“ ç¼–è¯‘å™¨ â€“&gt; æœºå™¨ç </p>
</blockquote>
<p><strong>æ“ä½œç³»ç»Ÿ OS</strong></p>
<p>å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå°†ç¡¬ä»¶éƒ½é©±åŠ¨ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªå¼€å‘è½¯ä»¶çš„å‚è€ƒæ¥å£æ¥ç»™å·¥ç¨‹å¸ˆå¼€å‘è½¯ä»¶çš„è¯ï¼Œé‚£å°±æ˜¯OS</p>
<p>OS å†…æ ¸ï¼š</p>
<blockquote>
<p>OSå…¶å®æ˜¯ä¸€ç»„ç¨‹åºï¼Œè¿™ç»„ç¨‹åºçš„é‡ç‚¹åœ¨äºç®¡ç†è®¡ç®—æœºçš„æ‰€æœ‰æ´»åŠ¨ä»¥åŠé©±åŠ¨ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç¡¬ä»¶ã€‚<br>OSå†…æ ¸ â€“ å¼€æœºåå¸¸é©»å†…å­˜ã€‚</p>
</blockquote>
<p>ç³»ç»Ÿè°ƒç”¨ï¼š</p>
<blockquote>
<p>System Call â€“ å¼€å‘è½¯ä»¶ï¼Œå‚è€ƒå†…æ ¸çš„ç›¸å…³åŠŸèƒ½ã€‚</p>
<p>åº”ç”¨ç¨‹åº â€“ ç³»ç»Ÿè°ƒç”¨ â€“ OSå†…æ ¸ â€“ ç¡¬ä»¶</p>
</blockquote>
<p>å†…æ ¸åŠŸèƒ½ï¼š</p>
<blockquote>
<ol>
<li>ç³»ç»Ÿè°ƒç”¨æ¥å£</li>
<li>ç¨‹åºç®¡ç†</li>
<li>å†…å­˜ç®¡ç†</li>
<li>æ–‡ä»¶ç³»ç»Ÿç®¡ç†</li>
<li>è®¾å¤‡é©±åŠ¨</li>
</ol>
</blockquote>
<h2 id="1-Linux-ä»‹ç»"><a href="#1-Linux-ä»‹ç»" class="headerlink" title="1. Linux ä»‹ç»"></a>1. Linux ä»‹ç»</h2><p> GNU (Richard Mathew Stallman - å²æ‰˜æ›¼) ä¼Ÿå¤§çš„äººç‰©ã€‚ GNU é€šç”¨å…¬å…±è®¸å¯è¯ GPL - General Public License</p>
<ul>
<li>Emacs</li>
<li>GCC (GNU C Compiler )</li>
<li>GLIBC (GNU C Library)</li>
<li>Bash shell</li>
</ul>
<blockquote>
<p>Linus Torvalds - Linux å‚è€ƒ Minix(from è°­å®é‚¦æ•™æˆ) </p>
<p>Linux å‚è€ƒäº† POSIXè§„èŒƒ(å¯æºå¼æ“ä½œç³»ç»Ÿæ¥å£)ï¼Œé‡ç‚¹åœ¨äºè§„èŒƒå†…æ ¸ä¸åº”ç”¨ç¨‹åºä¹‹é—´çš„æ¥å£ã€‚</p>
</blockquote>
<p><strong>Linux å¦‚ä½•å­¦ä¹ ï¼š</strong></p>
<blockquote>
<p>å®è·µå†å®è·µ â€“ è¦å¢åŠ è‡ªå·±çš„ä½“åŠ›ï¼Œå°±åªæœ‰è¿åŠ¨ï¼›è¦å¢åŠ è‡ªå·±çš„çŸ¥è¯†ï¼Œå°±åªæœ‰è¯»ä¹¦ã€‚</p>
<p>é¸Ÿå“¥çš„å»ºè®® ã€ ï¼ˆ1ï¼‰å»ºè®®å…´è¶£ ï¼ˆ2ï¼‰æˆå°±æ„Ÿ (è¢«è®¤å¯ï¼Œè¢«è®¤åŒ) ã€</p>
</blockquote>
<h2 id="2-Linux-æ–‡ä»¶å‘½ä»¤ä¸æƒé™"><a href="#2-Linux-æ–‡ä»¶å‘½ä»¤ä¸æƒé™" class="headerlink" title="2. Linux æ–‡ä»¶å‘½ä»¤ä¸æƒé™"></a>2. Linux æ–‡ä»¶å‘½ä»¤ä¸æƒé™</h2><p>Linux : å¤šç”¨æˆ·ï¼Œå¤šä»»åŠ¡ç¯å¢ƒã€‚ owner, group, others ä¸” å„æœ‰ read, write, execute ç­‰æƒé™ã€‚</p>
<blockquote>
<p> /etc/passwd   /etc/shadow   /etc/group</p>
</blockquote>
<p><strong>æ–‡ä»¶å‘½ä»¤</strong></p>
<ul>
<li>æ–‡ä»¶å¤„ç†å‘½ä»¤  [ ls, cp, mv, rm, cat, ln, file]  </li>
<li>æ–‡ä»¶å†…å®¹æŸ¥é˜…  [ cat, more, less, head, tail]</li>
<li>æƒé™ç®¡ç†å‘½ä»¤  [ chmod  u+r g-w o=x 777,  chown [-R] robby filename, chgrp ç»„å filename, umask -S]</li>
<li>æ–‡ä»¶æœç´¢å‘½ä»¤  [ which, find, locate, updatedb, grep ] which -aåœ¨å“ª, whereis -b(æ•°æ®åº“) locate æ˜¾ç¤ºæ‰€æœ‰</li>
<li>å‹ç¼©è§£å‹å‘½ä»¤  [ gzip, gunzip, tar, zip, bzip2]</li>
<li>ç½‘ç»œé€šä¿¡å‘½ä»¤  [ write, wall, ping, ifconfig] </li>
<li>å¸®åŠ©å‘½ä»¤     [ man, info, whatis  apropos, help]</li>
</ul>
<blockquote>
<p>whereis ä¸ which [ä¸åŒæ˜¯å¯ä»¥çœ‹åˆ°å‘½ä»¤æ‰€åœ¨å¸®åŠ©æ–‡æ¡£ä½ç½®]</p>
</blockquote>
<p><strong>æ–‡ä»¶ç±»å‹</strong></p>
<p>1, (æ™®é€šæ–‡ä»¶ï¼Œçº¯æ–‡æœ¬æ–‡ä»¶(ASCII)ï¼Œ - äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ•°æ®æ ¼å¼æ–‡ä»¶)<br>2, ç›®å½• d directory<br>3, è¿æ¥æ–‡ä»¶ ( l è½¯é“¾æ¥æ–‡ä»¶link )<br>4, è®¾å¤‡ä¸è®¾å¤‡æ–‡ä»¶(b,c)<br>5, å¥—æ¥å­—<br>6, ç®¡é“</p>
<p><strong>æ–‡ä»¶æƒé™</strong></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">  drwxr-xr-x      2       hp      hp     4096    2012-12-25 16:18  dlinux</span><br><span class="line">[æ–‡ä»¶ç±»å‹ä¸æƒé™] [ç¡¬é“¾æ¥æ•°] [æ‰€æœ‰è€…] [æ‰€å±ç»„] [æ–‡ä»¶å®¹é‡]    [ä¿®æ”¹æ—¥æœŸ]      [æ–‡ä»¶å]</span><br><span class="line"> </span><br><span class="line"> 4096 - æ–‡ä»¶å¤§å° [ä¸æ˜¯å¾ˆå‡†ç¡®ï¼Œæ ‡è®°ç›®å½•æœ¬èº«çš„å¤§å°ï¼Œä¸æ˜¯ç›®å½•æ€»å¤§å°] æ•°æ®å—(512å­—èŠ‚1å•ä½)</span><br></pre></td></tr></table></figure>
</blockquote>
<p>ç‰¹æ®Šæƒ…å†µï¼š</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hp@ubuntu:~/2014$ ls -ld /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x 1 root root 42824  2æœˆ 11  2012 /usr/bin/passwd</span><br><span class="line">s ä¸ t è¿™ä¸¤ä¸ªæƒé™ä¸ç³»ç»Ÿçš„å¸å·ä»¥åŠç³»ç»Ÿçš„è¿›ç¨‹è¾ƒä¸ºç›¸å…³ã€‚ä»¥åå†ç ”ç©¶ã€‚</span><br></pre></td></tr></table></figure>
</blockquote>
<p><strong>ç»„ç»‡æ•°æ®æ–¹å¼</strong></p>
<blockquote>
<p>æ¯ç§OSéƒ½æœ‰è‡ªå·±çš„ï¼Œæ¯”å¦‚ NTFS, ext3 â€¦</p>
<p>å­˜å‚¨æ•°æ®çš„æœ€å°å•ä½å°±å«åšæ•°æ®å—ï¼Œè¿™ä¸€è¿™æ ·ç†è§£ï¼ï¼</p>
<p>æ–‡ä»¶å­˜å‚¨æ—¶ï¼Œè‡³å°‘è¦å ç”¨ä¸€ä¸ªæ•°æ®å—ã€‚ ï¼ˆä½  60æ–¤ï¼Œä¹Ÿå¾—åšä¸€ä¸ªæ¤…å­ï¼Œ200æ–¤åšä¸€ä¸ªï¼Œ600æ–¤å¯èƒ½åšä¸¤ä¸ªï¼ï¼‰</p>
<p>åˆ†ä½ åšä»€ä¹ˆï¼Œæ•°æ®å—è¶Šå°å­˜å–é€Ÿåº¦è¶Šå°ï¼Œæ•°æ®å—è¶Šå¤§å­˜å–çš„æ—¶å€™æµªè´¹ç©ºé—´è¶Šå¤§ã€‚</p>
<p>åˆ†ä½ åšä»€ä¹ˆï¼Œè°ƒæ•°æ®å—å¤šå¤§åˆé€‚ã€‚ã€‚ã€‚æœ‰ä¸ªåˆ«æ—¶å€™ï¼ï¼</p>
</blockquote>
<h2 id="3-Linux-æ–‡ä»¶æœç´¢å‘½ä»¤"><a href="#3-Linux-æ–‡ä»¶æœç´¢å‘½ä»¤" class="headerlink" title="3. Linux æ–‡ä»¶æœç´¢å‘½ä»¤"></a>3. Linux æ–‡ä»¶æœç´¢å‘½ä»¤</h2><p>(1) å‘½ä»¤æ‰€åœ¨è·¯å¾„ : /usr/bin/find  è¯­æ³•:find [æœç´¢è·¯å¾„] [æœå¯»å…³é”®å­—]</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ find /etc -name init*  åœ¨ç›®å½•/etcä¸­æŸ¥æ‰¾initå¼€å¤´çš„æ–‡ä»¶</span><br><span class="line">$ find / -size +204800  åœ¨æ ¹ç›®å½•ä¸‹æŸ¥æ‰¾å¤§äº100MBçš„æ–‡ä»¶ block=512B</span><br><span class="line">              å¤§äº ï¼š +ï¼Œ å°äº ï¼š - ï¼Œ ç­‰äº ï¼š ä¸å†™ +, -ï¼›</span><br><span class="line">$ find / -user sam      åœ¨æ ¹ç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰è€…ä¸ºsamçš„æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<p>(2) æŒ‰ç…§æ—¶é—´æŸ¥æ‰¾  find /etc -mmin -120  ï¼ˆ-ä¹‹å†…ï¼Œ +è¶…è¿‡ ï¼‰</p>
<p> å¤© ctime, atime, mtime ï¼Œ åˆ†é’Ÿ cmin , amin,  mmin</p>
<blockquote>
<p> c-change æ”¹å˜ï¼Œ è¡¨ç¤ºæ–‡ä»¶å±æ€§è¢«ä¿®æ”¹è¿‡ï¼Œæ‰€æœ‰è€…ï¼Œæ‰€å±ç»„ï¼Œæƒé™<br> a-access è®¿é—®<br> m-modify ä¿®æ”¹ï¼Œ è¡¨ç¤ºæ–‡ä»¶å†…å®¹è¢«ä¿®æ”¹è¿‡</p>
<p>æˆ‘ä»¬åˆšè®²äº† 4 ä¸ªfindçš„é€‰é¡¹ï¼Œå…¶å®ä¸ä¸‹ 40 ä¸ªï¼è¦å­¦ä¼šçœ‹æ–‡æ¡£ï¼</p>
</blockquote>
<p>(3) è¿æ¥ç¬¦  -a and é€»è¾‘ä¸ -o or é€»è¾‘æˆ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ find /etc -ctime -1   åœ¨/etcä¸‹æŸ¥æ‰¾24å°æ—¶å†…è¢«ä¿®æ”¹è¿‡å±æ€§çš„æ–‡ä»¶å’Œç›®å½•</span><br><span class="line">$ find /etc -size +163840 <span class="_">-a</span> -size -204800   åœ¨/etcä¸‹æ‰¾å¤§äº80MBå°äº100MBçš„æ–‡ä»¶</span><br><span class="line">$ find /etc -name init* <span class="_">-a</span> -type f [ äºŒè¿›åˆ¶æ–‡ä»¶ ]</span><br><span class="line">$ find /etc -name init* <span class="_">-a</span> -type l [ è½¯é“¾æ¥æ–‡ä»¶ ]</span><br><span class="line">   </span><br><span class="line">    -type æ–‡ä»¶ç±»å‹  f äºŒè¿›åˆ¶æ–‡ä»¶  l è½¯é“¾æ¥æ–‡ä»¶  d ç›®å½•</span><br><span class="line">    è¿æ¥ç¬¦ find ..... -exec å‘½ä»¤ &#123;&#125; \;</span><br><span class="line">                           &#123;&#125; find æŸ¥è¯¢çš„ç»“æœ  \ è½¬ä¹‰ç¬¦ ã€ls \lsã€‘</span><br><span class="line"></span><br><span class="line">$ find /etc -name inittab -exec ls <span class="_">-l</span> &#123;&#125; \; åœ¨/etcä¸‹æŸ¥æ‰¾inittabæ–‡ä»¶å¹¶æ˜¾ç¤ºå…¶è¯¦ç»†ä¿¡æ¯</span><br><span class="line">$ find /<span class="built_in">test</span> -name testfile3 -exec rm &#123;&#125; \;</span><br><span class="line">$ find /etc -name inittab -ok ls <span class="_">-l</span> &#123;&#125; \;  èƒ½è¯¢é—®ä¸€ä¸‹ -ok</span><br><span class="line">$ find /etc -name inittab <span class="_">-a</span> -type f -exec ls <span class="_">-l</span> &#123;&#125; \;</span><br><span class="line">$ find . -inum 16 -exec rm &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>(4) locate åŠŸèƒ½æè¿°:å¯»æ‰¾æ–‡ä»¶æˆ–ç›®å½•</p>
<blockquote>
<p>èŒƒä¾‹: $ locate file  åˆ—å‡ºæ‰€æœ‰è·Ÿfileç›¸å…³çš„æ–‡ä»¶</p>
</blockquote>
<p>(5) updatedb  æ‰§è¡Œæƒé™:root  è¯­æ³•: updatedb  åŠŸèƒ½æè¿°: å»ºç«‹æ•´ä¸ªç³»ç»Ÿç›®å½•æ–‡ä»¶çš„æ•°æ®åº“  </p>
<blockquote>
<p>èŒƒä¾‹: # updateb</p>
</blockquote>
<p>(6) grep  åŠŸèƒ½æè¿° : åœ¨æ–‡ä»¶ä¸­æœå¯»å­—ä¸²åŒ¹é…çš„è¡Œå¹¶è¾“å‡º  </p>
<h2 id="4-Linux-æ–‡ä»¶ç³»ç»Ÿç®¡ç†"><a href="#4-Linux-æ–‡ä»¶ç³»ç»Ÿç®¡ç†" class="headerlink" title="4. Linux æ–‡ä»¶ç³»ç»Ÿç®¡ç†"></a>4. Linux æ–‡ä»¶ç³»ç»Ÿç®¡ç†</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hp@ubuntu:/$ df -m</span><br><span class="line">æ–‡ä»¶ç³»ç»Ÿ        1M-å—  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line">/dev/loop0      14692  4746  9210   35% /</span><br><span class="line">udev             2977     1  2977    1% /dev</span><br><span class="line">tmpfs            1195     1  1194    1% /run</span><br><span class="line">none                5     1     5    1% /run/lock</span><br><span class="line">none             2986     1  2985    1% /run/shm</span><br><span class="line">/dev/sda8       20490 17188  3303   84% /host</span><br><span class="line">/dev/sda7      105036 24898 80139   24% /media/Studty</span><br><span class="line">hp@ubuntu:/$ du -h /etc/services</span><br><span class="line">20K    /etc/services</span><br><span class="line">hp@ubuntu:/$ du -sh ~/dlinux</span><br><span class="line">76K    /home/hp/dlinux</span><br><span class="line">hp@ubuntu:/$ file /etc/services</span><br><span class="line">/etc/services: ASCII English text</span><br></pre></td></tr></table></figure>
<p>ç‰¹æ®Šæƒé™: ç²˜ç€ä½ <strong><em>t</em></strong></p>
<ol>
<li>ç²˜ç€ä½çš„å®šä¹‰: å½“æƒé™ä¸º777çš„ç›®å½•è¢«æˆäºˆç²˜ç€ä½,ç”¨æˆ·åªèƒ½åœ¨æ­¤ç›®å½•ä¸‹åˆ é™¤è‡ªå·±æ˜¯æ‰€æœ‰è€…çš„æ–‡ä»¶ã€‚</li>
<li>æŸ¥çœ‹åˆ†åŒºä½¿ç”¨æƒ…å†µ:df</li>
<li>æŸ¥çœ‹æ–‡ä»¶ã€ç›®å½•å¤§å°:du</li>
<li>æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†æ—¶é—´å‚æ•°:stat</li>
<li>æ ¡éªŒæ–‡ä»¶md5å€¼:md5sum</li>
<li>æ£€æµ‹ä¿®å¤æ–‡ä»¶ç³»ç»Ÿ:fsckã€e2fsck<pre><code>(å•ç”¨æˆ·æ¨¡å¼å¸è½½æ–‡ä»¶ç³»ç»Ÿåæ‰§è¡Œ)
</code></pre></li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hp@ubuntu:/$ df -h</span><br><span class="line"> æ–‡ä»¶ç³»ç»Ÿ        å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><br><span class="line"> /dev/loop0       15G  4.7G  9.0G   35% /</span><br><span class="line"> udev            3.0G  4.0K  3.0G    1% /dev</span><br><span class="line"> tmpfs           1.2G 1000K  1.2G    1% /run</span><br><span class="line"> none            5.0M  4.0K  5.0M    1% /run/lock</span><br><span class="line"> none            3.0G  804K  3.0G    1% /run/shm</span><br><span class="line"> /dev/sda8        21G   17G  3.3G   84% /host</span><br><span class="line"> /dev/sda7       103G   25G   79G   24% /media/Studty</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ ç¡¬ç›˜åˆ†åŒº</p>
<ol>
<li>åˆ’åˆ†åˆ†åŒº(fdisk)   </li>
<li>åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ (mkfs)</li>
<li>å°è¯•æŒ‚è½½ (mount) [mount ç‰©ç†è®¾å¤‡å æŒ‚è½½ç‚¹(ç©ºç›®å½•)]</li>
<li>å†™å…¥é…ç½®æ–‡ä»¶ (/etc/fstab)</li>
</ol>
<h2 id="5-Linux-æ–‡ä»¶ç³»ç»Ÿç›®å½•ç»“æ„"><a href="#5-Linux-æ–‡ä»¶ç³»ç»Ÿç›®å½•ç»“æ„" class="headerlink" title="5. Linux æ–‡ä»¶ç³»ç»Ÿç›®å½•ç»“æ„"></a>5. Linux æ–‡ä»¶ç³»ç»Ÿç›®å½•ç»“æ„</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/bin  : åŸºç¡€ç³»ç»Ÿæ‰€éœ€è¦çš„æœ€åŸºç¡€çš„å‘½ä»¤å°±æ˜¯æ”¾åœ¨è¿™é‡Œã€‚æ¯”å¦‚ lsã€cpã€mkdirç­‰å‘½ä»¤ï¼›</span><br><span class="line">         åŠŸèƒ½å’Œ/usr/binç±»ä¼¼ï¼Œè¿™ä¸ªç›®å½•ä¸­çš„æ–‡ä»¶éƒ½æ˜¯å¯æ‰§è¡Œçš„ï¼Œæ™®é€šç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤ã€‚</span><br><span class="line">/boot : Linuxçš„å†…æ ¸åŠå¼•å¯¼ç³»ç»Ÿç¨‹åºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚</span><br><span class="line">         å¯åŠ¨è£…è½½æ–‡ä»¶å­˜æ”¾ä½ç½®ï¼Œå¦‚kernels,initrd,grubã€‚ä¸€èˆ¬æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åˆ†åŒºã€‚</span><br><span class="line">/dev  :  ä¸€äº›å¿…è¦çš„è®¾å¤‡,å£°å¡ã€ç£ç›˜ç­‰ã€‚è¿˜æœ‰å¦‚ /dev/null. /dev/console /dev/zero /dev/full ç­‰ã€‚</span><br><span class="line">/etc  :  ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ°. </span><br><span class="line">/home :  ç”¨æˆ·å·¥ä½œç›®å½•ï¼Œå’Œä¸ªäººé…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸ªäººç¯å¢ƒå˜é‡ç­‰.</span><br><span class="line">/lib  :  åº“æ–‡ä»¶å­˜æ”¾åœ°ã€‚binå’Œsbinéœ€è¦çš„åº“æ–‡ä»¶ã€‚ç±»ä¼¼windowsçš„DLLã€‚</span><br><span class="line">/media : å¯æ‹†å¸çš„åª’ä»‹æŒ‚è½½ç‚¹ï¼Œå¦‚CD-ROMsã€ç§»åŠ¨ç¡¬ç›˜ã€Uç›˜ï¼Œç³»ç»Ÿé»˜è®¤ä¼šæŒ‚è½½åˆ°è¿™é‡Œæ¥ã€‚</span><br><span class="line">/mnt  : ä¸´æ—¶æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚æœ‰cdrom ç­‰ç›®å½•ã€‚</span><br><span class="line">/opt  : å¯é€‰çš„åº”ç”¨ç¨‹åºåŒ…ã€‚ ç¬¬ä¸‰æ–¹è½¯ä»¶</span><br><span class="line">/proc : æ“ä½œç³»ç»Ÿè¿è¡Œæ—¶ï¼Œè¿›ç¨‹ï¼ˆæ­£åœ¨è¿è¡Œä¸­çš„ç¨‹åºï¼‰ä¿¡æ¯åŠå†…æ ¸ä¿¡æ¯ï¼ˆæ¯”å¦‚cpuã€ç¡¬ç›˜åˆ†åŒºã€å†…å­˜ä¿¡æ¯ç­‰ï¼‰å­˜æ”¾åœ¨è¿™é‡Œã€‚</span><br><span class="line">/root : Rootç”¨æˆ·çš„å·¥ä½œç›®å½•</span><br><span class="line">/sbin : å’Œbinç±»ä¼¼ï¼Œæ˜¯ä¸€äº›å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸è¿‡ä¸æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½éœ€è¦çš„ï¼Œä¸€èˆ¬æ˜¯ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦ä½¿ç”¨å¾—åˆ°çš„ã€‚</span><br><span class="line">/tmp  : ç³»ç»Ÿçš„ä¸´æ—¶æ–‡ä»¶ï¼Œä¸€èˆ¬ç³»ç»Ÿé‡å¯ä¸ä¼šè¢«ä¿å­˜ã€‚</span><br><span class="line">/usr  : åŒ…å«äº†ç³»ç»Ÿç”¨æˆ·å·¥å…·å’Œç¨‹åºã€‚</span><br><span class="line">/usr/bin ï¼š éå¿…é¡»çš„æ™®é€šç”¨æˆ·å¯æ‰§è¡Œå‘½ä»¤</span><br><span class="line">/usr/include ï¼š æ ‡å‡†å¤´æ–‡ä»¶</span><br><span class="line">/usr/lib  : /usr/bin/ å’Œ /usr/sbin/çš„åº“æ–‡ä»¶</span><br><span class="line">/usr/sbin : éå¿…é¡»çš„å¯æ‰§è¡Œæ–‡ä»¶</span><br><span class="line">/usr/src  : å†…æ ¸æºç </span><br><span class="line">/srv : è¯¥ç›®å½•å­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®</span><br></pre></td></tr></table></figure>
<h2 id="6-VIM-ç¼–è¾‘å™¨"><a href="#6-VIM-ç¼–è¾‘å™¨" class="headerlink" title="6. VIM ç¼–è¾‘å™¨"></a>6. VIM ç¼–è¾‘å™¨</h2><table>
<thead>
<tr>
<th style="text-align:center">åºå·</th>
<th style="text-align:center">å‘½ä»¤ç±»å‹</th>
<th style="text-align:center">å‘½ä»¤è¯¦æƒ…</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1.</td>
<td style="text-align:center">[æ’å…¥å‘½ä»¤]</td>
<td style="text-align:center">a, A, i, I, o, O</td>
</tr>
<tr>
<td style="text-align:center">2.</td>
<td style="text-align:center">[å®šä½å‘½ä»¤]</td>
<td style="text-align:center">h, j, k, l, <code>$</code>, 0, H, M, L  :set nu è®¾ç½®è¡Œå·ï¼Œgg åˆ°ç¬¬ä¸€è¡Œ G åˆ°æœ€åä¸€è¡Œ</td>
</tr>
<tr>
<td style="text-align:center">3.</td>
<td style="text-align:center">[åˆ é™¤å‘½ä»¤]</td>
<td style="text-align:center">x, nx, dd, ndd, dG[å…‰æ ‡å¤„åˆ é™¤åˆ°æ–‡ä»¶å°¾], D, :n1, n2d[åˆ é™¤æŒ‡å®šèŒƒå›´çš„è¡Œ]</td>
</tr>
<tr>
<td style="text-align:center">4.</td>
<td style="text-align:center">[å¤åˆ¶å’Œå‰ªåˆ‡å‘½ä»¤]</td>
<td style="text-align:center">yy, Y, nyy, nY,  dd[å‰ªåˆ‡]ï¼Œ ndd[å‰ªåˆ‡nè¡Œ], p, P [ç²˜è´´åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œä¸‹æˆ–è¡Œä¸Š]</td>
</tr>
<tr>
<td style="text-align:center">5.</td>
<td style="text-align:center">[æ›¿æ¢å’Œå–æ¶ˆå‘½ä»¤]</td>
<td style="text-align:center">r, R, uï¼Œ r å–ä»£å…‰æ ‡æ‰€åœ¨å¤„å­—ç¬¦  R ä»å…‰æ ‡æ‰€åœ¨å¤„å¼€å§‹æ›¿æ¢å­—ç¬¦ï¼ŒæŒ‰Escç»“æŸ  u å–æ¶ˆä¸Šä¸€æ­¥æ“ä½œ</td>
</tr>
<tr>
<td style="text-align:center"><br><br> 6.</td>
<td style="text-align:center"><br><br> [æœç´¢å’Œæ›¿æ¢å‘½ä»¤]</td>
<td style="text-align:center">/string æŒ‰ n  æ˜¯ä¸‹ä¸€ä¸ª  ä»å‰å‘åï¼Œ N ä»åå‘å‰  <br><br> :%s/old/new/g  å…¨æ–‡æ›¿æ¢æŒ‡å®šå­—ç¬¦ä¸² :n1,n2s/old/new/c è¯¢é—®æ›¿æ¢ <br><br> :set ic æœç´¢çš„æ—¶å€™å°±ä¸åŒºåˆ†å¤§å°å†™äº†ï¼  :set noic</td>
</tr>
<tr>
<td style="text-align:center">7.</td>
<td style="text-align:center">[ä¿å­˜å’Œé€€å‡ºå‘½ä»¤]</td>
<td style="text-align:center">[ZZ æœ€å¸¸ç”¨ ] :wq ä¿å­˜é€€å‡º</td>
</tr>
<tr>
<td style="text-align:center">8.</td>
<td style="text-align:center">[vi ä¸­å¦å¤–æ¯”è¾ƒæœ‰è¶£çš„å‘½ä»¤]</td>
<td style="text-align:center">:r !å‘½ä»¤  å¯¼å…¥å‘½ä»¤æ‰§è¡Œç»“æœåˆ°å½“å‰viä¸­, åœ¨viä¸­æ‰§è¡Œå‘½ä»¤ :!å‘½ä»¤</td>
</tr>
<tr>
<td style="text-align:center">9.</td>
<td style="text-align:center">åˆ†å±</td>
<td style="text-align:center">sp, vsp (æ°´å¹³)  ctrl+w *2</td>
</tr>
<tr>
<td style="text-align:center">10.</td>
<td style="text-align:center">å®šä¹‰å¿«æ·é”®</td>
<td style="text-align:center">:map å¿«æ·é”® è§¦å‘å‘½ä»¤  èŒƒä¾‹: : map ^P I#<esc>  ^P = ctrl+v+p  : map ^B 0x</esc></td>
</tr>
<tr>
<td style="text-align:center">11.</td>
<td style="text-align:center">vi çš„é…ç½®æ–‡ä»¶</td>
<td style="text-align:center">~/.vimrc</td>
</tr>
</tbody>
</table>
<h2 id="7-å¼•å¯¼æµç¨‹"><a href="#7-å¼•å¯¼æµç¨‹" class="headerlink" title="7. å¼•å¯¼æµç¨‹"></a>7. å¼•å¯¼æµç¨‹</h2><ol>
<li>Linuxå¼•å¯¼æµç¨‹  </li>
<li>Linuxè¿è¡Œçº§åˆ«</li>
<li>Linuxå¯åŠ¨æœåŠ¡ç®¡ç†  </li>
<li>GRUBé…ç½®ä¸åº”ç”¨</li>
</ol>
<p>ç³»ç»Ÿå¼•å¯¼æµç¨‹:</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å›ºä»¶ firmware(CMOS/BIOS) â†’ POST åŠ ç”µè‡ªæ£€</span><br><span class="line">                â†“  [CMOSæ˜¯å›ºåŒ–åœ¨ä¸»æ¿ä¸Šçš„é‚£æ®µç¨‹åºï¼Œ BIOS æ“ä½œCMOSçš„é‚£ä¸ªç•Œé¢]</span><br><span class="line">è‡ªä¸¾ç¨‹åº BootLoader(GRUB) â†’ è½½å…¥å†…æ ¸  linux-grub /etc/grub.conf / win-ntldr [ntå†…æ ¸ä»£å·,loader] bootini [é‡Œé¢è®°è½½äº†å¯åŠ¨ä¿¡æ¯]</span><br><span class="line">                â†“  è½½å…¥å†…æ ¸ï¼ŒOSçš„æ ¸å¿ƒ-å†…æ ¸[å­˜å‚¨CPUæ–‡ä»¶è¿›ç¨‹...ç®¡ç†]-å¿ƒè„å¤§è„‘  æŒ‡å®šlinuxå†…æ ¸å­˜æ”¾çš„ä½ç½®ã€‚ls /boot</span><br><span class="line">è½½å…¥å†…æ ¸ Kernel â†’ é©±åŠ¨ç¡¬ä»¶</span><br><span class="line">                â†“ [å†…æ ¸åªåšä¸¤ä»¶äº‹æƒ…ï¼Œ1é©±åŠ¨ç¡¬ä»¶2å¯åŠ¨init. å†…æ ¸ä¿å­˜æœ€å¤šçš„æ˜¯é©±åŠ¨ç¨‹åº]</span><br><span class="line">å¯åŠ¨è¿›ç¨‹ init</span><br><span class="line">                â†“ [initæ˜¯ç¬¬ä¸€ä¸ªå¯ä»¥å­˜åœ¨å’Œå¯åŠ¨çš„è¿›ç¨‹]</span><br><span class="line">è¯»å–æ‰§è¡Œé…ç½®æ–‡ä»¶/etc/inittab</span><br></pre></td></tr></table></figure>
</blockquote>
<p>å¼•å¯¼æµç¨‹è¯´æ˜:</p>
<blockquote>
<p>firmwareè‡ªæ£€ä¹‹åï¼Œå‘ç°ç¡¬ä»¶ä»¬éƒ½æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ä¹‹åï¼Œç„¶å firmware è¯»å– MBR[ä¸»å¼•å¯¼è®°å½•]ï¼Œä½äº 0æŸ±é¢0ç£å¤´1æ‰‡åŒºï¼Œ è·³åˆ° Master boot record å»è¯»å–æ•°æ®ã€‚è½½å…¥MBR ä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„æ•°æ®å«åš Bootloader, ä¹Ÿç§°åšè‡ªä¸¾ç¨‹åºæˆ–è‡ªå¯åŠ¨ç¨‹åºã€‚ ä¸‹é¢æ˜¯ Partition table ç£ç›˜åˆ†åŒºè¡¨ï¼Œä¸‹é¢æ˜¯ Magic Number ç»“æŸæ ‡å¿—å­—</p>
<p>init å¯åŠ¨åè¯»å– inittabæ–‡ä»¶, æ‰§è¡Œç¼ºçœè¿è¡Œçº§åˆ«, ä»è€Œç»§ç»­å¼•å¯¼è¿‡ç¨‹ã€‚åœ¨UNIXç³»ç»Ÿä¸­, initæ—¶ç¬¬ä¸€ä¸ªå¯ä»¥å­˜åœ¨çš„è¿›ç¨‹, å®ƒçš„PIDæ’ä¸º1, ä½†å®ƒä¹Ÿå¿…é¡»å‘ä¸€ä¸ªæ›´é«˜çº§çš„åŠŸèƒ½è´Ÿè´£: PIDä¸º0çš„å†…æ ¸è°ƒåº¦å™¨(Kernelscheduler),ä»è€Œè·å¾—CPUæ—¶é—´ã€‚</p>
</blockquote>
<p>æ‰©å±• ï¼š</p>
<blockquote>
<p>åœ¨Linuxé‡Œé¢ä¸å…è®¸å­˜åœ¨ å­¤å„¿è¿›ç¨‹ï¼Œåœ¨linuxç³»ç»Ÿä¸­initæ˜¯æ‰€æœ‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ã€‚<br>åƒµå°¸è¿›ç¨‹[Z]  å„¿å­æ­»äº†ï¼Œçˆ¶äº²ä¸çŸ¥é“ï¼Œè¿™ä¸ªå­è¿›ç¨‹å°±ä¼šå˜æˆ Zã€‚</p>
</blockquote>
<p>Linuxè¿è¡Œçº§åˆ« 0 ~ 6 è¯´æ˜ ï¼š</p>
<blockquote>
<p>0 å…³æœº 1 å­—ç¬¦å•ç”¨æˆ· 2ï¼Œ3 å­—ç¬¦ç•Œé¢çš„å¤šç”¨æˆ·æ¨¡å¼[å¹¿æ³›ä½¿ç”¨çš„æœåŠ¡å™¨çš„æ¨¡å¼]<br>4 è‡ªå®šä¹‰ 5 å›¾å½¢åŒ–çš„å¤šç”¨æˆ· 6 reboot</p>
</blockquote>
<h2 id="8-å­¦ä¹ bash"><a href="#8-å­¦ä¹ bash" class="headerlink" title="8. å­¦ä¹ bash"></a>8. å­¦ä¹ bash</h2><p>Linux bashä¸œè¥¿éå¸¸å¤šï¼ŒåŒ…æ‹¬å˜é‡çš„è®¾ç½®ä¸ä½¿ç”¨ï¼Œbashæ“ä½œç¯å¢ƒï¼Œæ•°æ®æµé‡å®šå‘åŠŸèƒ½ï¼Œè¿˜æœ‰å¥½ç”¨çš„ç®¡é“å‘½ä»¤ã€‚</p>
<blockquote>
<p>1, ç¡¬ä»¶   2ï¼Œå†…æ ¸ç¨‹åº   3ï¼Œåº”ç”¨ç¨‹åº</p>
<p>man, chmod, chown, vi, fdisk, mkfsç­‰å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤éƒ½æ˜¯ç‹¬ç«‹çš„åº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<p>bashçš„ä¸»è¦ä¼˜ç‚¹ :</p>
<p>   (1) å‘½ä»¤è®°å¿†åŠŸèƒ½ (history)  .bash_history (æ³¨é”€ç³»ç»Ÿåï¼Œå‘½ä»¤è®°å¿†ä¼šè®°å½•åˆ°.bash_history)<br>   (2) å‘½ä»¤ä¸æ–‡ä»¶è¡¥å…¨åŠŸèƒ½ (tab)<br>   (3) å‘½ä»¤åˆ«åè®¾ç½®åŠŸèƒ½ (alias) alias lm=â€™ls -alâ€™<br>   (4) ä½œä¸šæ§åˆ¶ï¼Œå‰å°ï¼Œåå°æ§åˆ¶ (job control, foreground, background)<br>   (5) ç¨‹åºè„šæœ¬ (shell script)<br>   (6) é€šé…ç¬¦ (Wildcard)</p>
<p>shell å˜é‡:</p>
<blockquote>
<p>echo å˜é‡æ˜¾ç¤º  å¦‚ ï¼š echo ${PATH}<br>çˆ¶å­è¿›ç¨‹ export è®¾ç½®æˆç¯å¢ƒå˜é‡..<br>unset å–æ¶ˆå˜é‡çš„è®¾ç½®å€¼ã€‚ uname -r æ˜¾ç¤ºå†…æ ¸ç‰ˆæœ¬<br>â€œversion=$(uname -r)â€ æ¥æ›¿ä»£ â€œversion=<code>uname -r</code>â€œ æ¯”è¾ƒå¥½ã€‚</p>
</blockquote>
<p>ç¯å¢ƒå˜é‡çš„åŠŸèƒ½:</p>
<blockquote>
<p>env ä¸ export æŸ¥çœ‹ç¯å¢ƒå˜é‡<br>HOMEï¼Œ SHELLï¼Œ HISTSIZEï¼Œ PATHï¼Œ LANG(è¯­ç³»æ•°æ®)ï¼Œ RANDOM(éšæœºæ•°å‘ç”Ÿå™¨)<br>export è‡ªå®šä¹‰å˜é‡è½¬æˆç¯å¢ƒå˜é‡ export name<br>å­è¿›ç¨‹ä¼šå®šä¹‰çˆ¶è¿›ç¨‹çš„ç¯å¢ƒå˜é‡ï¼Œä¸ä¼šç»§æ‰¿çˆ¶è¿›ç¨‹çš„è‡ªå®šä¹‰å˜é‡</p>
</blockquote>
<p>bash å¯ä»¥é™åˆ¶ç”¨æˆ·çš„æŸäº›ç³»ç»Ÿèµ„æºï¼Œå¯æ‰“å¼€çš„æ–‡ä»¶æ•°é‡ï¼Œå¯ä½¿ç”¨çš„CPUæ—¶é—´ï¼Œå¯ä½¿ç”¨çš„å†…å­˜æ€»é‡ç­‰</p>
<blockquote>
<p>æ–‡ä»¶ç³»ç»ŸåŠç¨‹åºçš„é™åˆ¶å…³ç³» : ulimit<br>ulimit -H -S -a -c -f -d -l -t -u -s ç­‰ã€‚</p>
</blockquote>
<p>æ•°æ®æµé‡å®šå‘</p>
<blockquote>
<p>1, stdin  ä»£ç ä¸º 0 ï¼Œä½¿ç”¨ &lt; æˆ– &lt;&lt;<br>2, stdout ä»£ç ä¸º 1 ï¼Œä½¿ç”¨ &gt; æˆ– &gt;&gt;<br>3, stderr ä»£ç ä¸º 2 ï¼Œä½¿ç”¨ 2&gt; æˆ– 2&gt;&gt;</p>
<p>/dev/null åƒåœ¾æ¡¶é»‘æ´è®¾å¤‡<br> &amp;&amp; ä¸ ||<br> cut å‘½ä»¤ ä¾‹å­ ï¼š echo $PATH | cut -d â€˜:â€™ -f 3,5<br> export | cut -c 12-<br> cut çš„ä¸»è¦ç”¨é€”åœ¨äºå°†åŒä¸€è¡Œé‡Œé¢çš„æ•°æ®è¿›è¡Œåˆ†è§£ï¼Œç”¨äºåˆ†æä¸€äº›æ—¥å¿—ã€‚<br> grep -a -c -i -n -v â€˜targeâ€™ filename</p>
</blockquote>
<p>æ’åºå‘½ä»¤ï¼š sort, wc, uniq</p>
<blockquote>
<p>last | cut -d â€˜ â€˜ -f 1 | sort | uniq -c</p>
<p>hp@ubuntu:~$ last | tee last.list | cut -d â€œ â€œ -f1</p>
<p>tee å‘½ä»¤å¯ä»¥è®© standard output è½¬å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶å†…ï¼Œå¹¶å°†åŒæ ·çš„æ•°æ®ç»§ç»­é€åˆ°å±å¹•ä¸­å»å¤„ç†</p>
</blockquote>
<p>å­—ç¬¦è½¬æ¢å‘½ä»¤ï¼š  tr, col, join, paste, expand</p>
<blockquote>
<p> (1) tr :  last | tr â€˜[a-z]â€™ â€˜[A-Z]â€™<br>        ï¼š cat /etc/passwd | tr -d â€˜:â€™<br> (2) col -x å°†tabé”®è½¬æ¢æˆå¯¹ç­‰çš„ç©ºæ ¼  -b åœ¨æ–‡å­—å†…æœ‰ / æ—¶ï¼Œä»…ä¿ç•™ / åé¢æ¥çš„é‚£ä¸ªå­—ç¬¦<br>        ï¼š cat /etc/man.config | col -x | cat -A | more<br> (3) join [-ti12] file1 file2 </p>
<p> (4) paste [-d] file1 file2<br>           ï¼š -d : åé¢å¯ä»¥æ¥åˆ†éš”å­—ç¬¦ï¼Œé»˜è®¤æ˜¯ä»¥ [tab] æ¥åˆ†éš”çš„ã€‚<br>           ï¼š -  : å¦‚æœfileéƒ¨åˆ†å†™æˆ -, ä»£è¡¨æ¥è‡ª standard input çš„æ•°æ®çš„æ„æ€ã€‚<br> (5) expand å°±æ˜¯å°† [tab] æŒ‰é”®è½¬æˆç©ºæ ¼é”®ï¼Œå¯ä»¥è¿™æ ·åš ï¼š expand [-t] file<br>           ï¼š  expand -t 6 - | cat -A<br>           ï¼š unexpand</p>
</blockquote>
<p>åˆ‡å‰²å‘½ä»¤ï¼š split  å‚æ•° -b : åé¢å¯æ¥æ¬²åˆ‡å‰²æˆçš„æ–‡ä»¶å¤§å°ï¼Œå¯åŠ å•ä½ b, k, m ç­‰ï¼›</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ split -b 300k  /etc/termcap termcap</span><br><span class="line">$ ll -k termcap*</span><br><span class="line">$ cat termcap* &gt;&gt; termcapback</span><br><span class="line">$ ls -al / | split <span class="_">-l</span> 10 - lsroot</span><br><span class="line">$ wc <span class="_">-l</span> lsroot*</span><br></pre></td></tr></table></figure>
<p>å‚æ•°ä»£æ¢ï¼š xargs å¯ä»¥è¯»å…¥stdinçš„æ•°æ®ï¼Œå¹¶ä¸”ä»¥ç©ºæ ¼ç¬¦æˆ–æ–­è¡Œå­—ç¬¦è¿›è¡Œåˆ†è¾¨ï¼Œå°†stdinçš„æ•°æ®åˆ†éš”æˆargs</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hp@ubuntu:~$ cut <span class="_">-d</span> <span class="string">':'</span> <span class="_">-f</span>1 /etc/passwd | head -n 3 | xargs -p</span><br><span class="line">/bin/<span class="built_in">echo</span> root daemon bin ?...y</span><br><span class="line">root daemon bin</span><br><span class="line">hp@ubuntu:~$ <span class="built_in">echo</span> <span class="string">"3  4:asd"</span> | xargs </span><br><span class="line">3 4:asd</span><br></pre></td></tr></table></figure>
<p>å…³äºå‡å· - çš„ç”¨é€”</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ tar -cvf - /home | tar -xvf - </span><br><span class="line"></span><br><span class="line">æŸäº›å‘½ä»¤éœ€è¦ç”¨åˆ°æ–‡ä»¶åæ¥å¤„ç†ï¼Œè¯¥stdin, stdoutå¯ä»¥åˆ©ç”¨å‡å·â€œ-â€æ¥æ›¿ä»£ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="9-è¿›ç¨‹ç®¡ç†"><a href="#9-è¿›ç¨‹ç®¡ç†" class="headerlink" title="9. è¿›ç¨‹ç®¡ç†"></a>9. è¿›ç¨‹ç®¡ç†</h2><p>è¿›ç¨‹çš„æ¦‚å¿µ  è¿›ç¨‹ç®¡ç†å‘½ä»¤  è®¡åˆ’ä»»åŠ¡</p>
<h3 id="9-1-è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«"><a href="#9-1-è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«" class="headerlink" title="9.1 è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«"></a>9.1 è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«</h3><ol>
<li>ç¨‹åºæ˜¯é™æ€æ¦‚å¿µ, å®ƒä½œä¸ºä¸€ç§è½¯ä»¶èµ„æºé•¿æœŸä¿å­˜; </li>
<li>è¿›ç¨‹æ˜¯ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹, å®ƒæ˜¯åŠ¨æ€æ¦‚å¿µ, æœ‰ä¸€å®šçš„ç”Ÿå‘½æœŸ, æ˜¯åŠ¨æ€äº§ç”Ÿå’Œæ¶ˆäº¡çš„;</li>
<li>å­è¿›ç¨‹æ˜¯ç”±ä¸€ä¸ªè¿›ç¨‹æ‰€äº§ç”Ÿçš„è¿›ç¨‹,äº§ç”Ÿè¿™ä¸ªå­è¿›ç¨‹çš„è¿›ç¨‹ç§°ä¸ºçˆ¶è¿›ç¨‹;</li>
<li>åœ¨Linuxç³»ç»Ÿä¸­,ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨forkåˆ›å»ºè¿›ç¨‹ã€‚forkå¤åˆ¶çš„å†…å®¹åŒ…æ‹¬çˆ¶è¿›ç¨‹çš„æ•°æ®å’Œå †æ ˆæ®µä»¥åŠçˆ¶è¿›ç¨‹çš„è¿›ç¨‹ç¯å¢ƒ;</li>
<li>çˆ¶è¿›ç¨‹ç»ˆæ­¢å­è¿›ç¨‹è‡ªç„¶ç»ˆæ­¢.</li>
</ol>
<h3 id="9-2-å‰å°è¿›ç¨‹å’Œåå°è¿›ç¨‹"><a href="#9-2-å‰å°è¿›ç¨‹å’Œåå°è¿›ç¨‹" class="headerlink" title="9.2 å‰å°è¿›ç¨‹å’Œåå°è¿›ç¨‹"></a>9.2 å‰å°è¿›ç¨‹å’Œåå°è¿›ç¨‹</h3><p>å‰å°è¿›ç¨‹:</p>
<blockquote>
<p> åœ¨Shellæç¤ºå¤„æ‰“å…¥å‘½ä»¤å, åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹, è¿è¡Œå‘½ä»¤, Shellç­‰å¾…å‘½ä»¤é€€å‡º, ç„¶åè¿”å›åˆ°å¯¹ç”¨æˆ·ç»™å‡ºæç¤ºç¬¦ã€‚ è¿™æ¡å‘½ä»¤ä¸Shellå¼‚æ­¥è¿è¡Œ, å³åœ¨å‰å°è¿è¡Œ, ç”¨æˆ·åœ¨å®ƒå®Œæˆä¹‹å‰ä¸èƒ½æ‰§è¡Œå¦ä¸€ä¸ªå‘½ä»¤ã€‚</p>
</blockquote>
<p>åå°è¿›ç¨‹: </p>
<blockquote>
<p> åœ¨Shellæç¤ºå¤„æ‰“å…¥å‘½ä»¤, è‹¥åéšä¸€ä¸ª&amp;, Shellåˆ›å»ºçš„å­è¿›ç¨‹è¿è¡Œæ­¤å‘½ä»¤, ä½†ä¸ç­‰å¾…å‘½ä»¤é€€å‡º, è€Œç›´æ¥è¿”å›åˆ°å¯¹ç”¨æˆ·ç»™å‡ºæç¤ºã€‚ è¿™æ¡å‘½ä»¤ä¸ShellåŒæ­¥è¿è¡Œ, å³åœ¨åå°è¿è¡Œã€‚ åå°è¿›ç¨‹å¿…é¡»æ˜¯éäº¤äº’å¼çš„ã€‚</p>
</blockquote>
<h3 id="9-3-è¿›ç¨‹çŠ¶æ€"><a href="#9-3-è¿›ç¨‹çŠ¶æ€" class="headerlink" title="9.3 è¿›ç¨‹çŠ¶æ€"></a>9.3 è¿›ç¨‹çŠ¶æ€</h3><table>
<thead>
<tr>
<th style="text-align:center">è¿›ç¨‹çŠ¶æ€</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">å°±ç»ª</td>
<td style="text-align:center">è¿›ç¨‹å·²ç»åˆ†é…åˆ°èµ„æº,ä½†å› ä¸ºå…¶å®ƒè¿›ç¨‹æ­£å ç”¨CPUã€‚</td>
</tr>
<tr>
<td style="text-align:center">ç­‰å¾…</td>
<td style="text-align:center">å› ç­‰å¾…æŸç§äº‹ä»¶è€Œæš‚æ—¶ä¸èƒ½è¿è¡Œçš„çŠ¶æ€ã€‚</td>
</tr>
<tr>
<td style="text-align:center">è¿è¡Œ</td>
<td style="text-align:center">è¿›ç¨‹åˆ†é…åˆ°CPU,æ­£åœ¨å¤„ç†å™¨ä¸Šè¿è¡Œã€‚</td>
</tr>
</tbody>
</table>
<p>è¿›ç¨‹çŠ¶æ€ç»†åŒ–</p>
<blockquote>
<p>ç”¨æˆ·æ€è¿è¡Œ : åœ¨CPUä¸Šæ‰§è¡Œç”¨æˆ·ä»£ç <br>æ ¸å¿ƒæ€è¿è¡Œ : åœ¨CPUä¸Šæ‰§è¡Œæ ¸å¿ƒä»£ç <br>åœ¨å†…å­˜å°±ç»ª : å…·å¤‡è¿è¡Œæ¡ä»¶,åªç­‰è°ƒåº¦ç¨‹åºä¸ºå®ƒåˆ†é…CPU<br>åœ¨å†…å­˜ç¡çœ  : å› ç­‰å¾…æŸä¸€äº‹ä»¶çš„å‘ç”Ÿ,è€Œåœ¨å†…å­˜ä¸­æ’é˜Ÿç­‰å¾…<br>åœ¨å¤–å­˜å°±ç»ª : å°±ç»ªè¿›ç¨‹è¢«äº¤æ¢åˆ°å¤–å­˜ä¸Šç»§ç»­å¤„äºå°±ç»ªçŠ¶æ€<br>åœ¨å¤–å­˜ç¡çœ  : ç¡çœ è¿›ç¨‹è¢«äº¤æ¢åˆ°å¤–å­˜ä¸Šç»§ç»­ç­‰å¾…<br>åœ¨å†…å­˜æš‚åœ : å› è°ƒç”¨stopç¨‹åºè€Œè¿›å…¥è·Ÿè¸ªæš‚åœçŠ¶æ€,ç­‰å¾…å…¶çˆ¶è¿›ç¨‹å‘é€å‘½ä»¤ã€‚<br>åœ¨å¤–å­˜æš‚åœ : å¤„äºè·Ÿè¸ªæš‚åœæ€çš„è¿›ç¨‹è¢«äº¤æ¢åˆ°å¤–å­˜ä¸Š</p>
</blockquote>
<p>åˆ›å»ºæ€</p>
<blockquote>
<p>æ–°è¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºã€ä½†å°šæœªå®Œæ¯•çš„ä¸­é—´çŠ¶æ€</p>
</blockquote>
<p>ç»ˆæ­¢æ€</p>
<blockquote>
<p>è¿›ç¨‹ç»ˆæ­¢è‡ªå·±</p>
</blockquote>
<p><strong>æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ w (å‘½ä»¤)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hp@ubuntu:~$ w</span><br><span class="line"> 22:02:45 up 22 min,  2 users,  load average: 0.27, 0.27, 0.28</span><br><span class="line">USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU  WHAT</span><br><span class="line">hp       tty7                      21:40    22:33   1:16   0.34s gnome-session -</span><br><span class="line">hp       pts/0    :0               22:02    0.00s   0.37s  0.01s w</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">é€‰é¡¹</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">JCPU</td>
<td style="text-align:center">ä»¥ç»ˆç«¯ä»£å·æ¥åŒºåˆ†,è¯¥ç»ˆç«¯æ‰€æœ‰ç›¸å…³çš„è¿›ç¨‹æ‰§è¡Œæ—¶,æ‰€æ¶ˆè€—çš„CPUæ—¶é—´ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ</td>
</tr>
<tr>
<td style="text-align:center">PCPU</td>
<td style="text-align:center">CPUæ‰§è¡Œç¨‹åºè€—è´¹çš„æ—¶é—´</td>
</tr>
<tr>
<td style="text-align:center">WHAT</td>
<td style="text-align:center">ç”¨æˆ·æ­£åœ¨æ‰§è¡Œçš„æ“ä½œæŸ¥çœ‹ä¸ªåˆ«ç”¨æˆ·ä¿¡æ¯:w ç”¨æˆ·å</td>
</tr>
<tr>
<td style="text-align:center">load average</td>
<td style="text-align:center">åˆ†åˆ«æ˜¾ç¤ºç³»ç»Ÿåœ¨è¿‡å»1ã€5ã€15åˆ†é’Ÿå†…çš„å¹³å‡è´Ÿè½½ç¨‹åº¦ã€‚</td>
</tr>
<tr>
<td style="text-align:center">FROM</td>
<td style="text-align:center">æ˜¾ç¤ºç”¨æˆ·ä»ä½•å¤„ç™»å½•ç³»ç»Ÿ,â€œ:0â€çš„æ˜¾ç¤ºä»£è¡¨è¯¥ç”¨æˆ·æ—¶ä»X Windowä¸‹,æ‰“å¼€æ–‡æœ¬æ¨¡å¼çª—å£ç™»å½•çš„</td>
</tr>
<tr>
<td style="text-align:center">IDLE</td>
<td style="text-align:center">ç”¨æˆ·é—²ç½®çš„æ—¶é—´ã€‚è¿™æ˜¯ä¸€ä¸ªè®¡æ—¶å™¨,ä¸€æ—¦ç”¨æˆ·æ‰§è¡Œä»»ä½•æ“ä½œ,è¯¥è®¡æ—¶å™¨ä¾¿ä¼šè¢«é‡ç½®</td>
</tr>
</tbody>
</table>
<p>æŸ¥çœ‹ç³»ç»Ÿä¸­çš„è¿›ç¨‹ ps å¸¸ç”¨é€‰é¡¹</p>
<blockquote>
<p>a : æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·çš„è¿›ç¨‹<br>u : æ˜¾ç¤ºç”¨æˆ·åå’Œå¯åŠ¨æ—¶é—´<br>x : æ˜¾ç¤ºæ²¡æœ‰æ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹<br>e : æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹,åŒ…æ‹¬æ²¡æœ‰æ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹<br>l : é•¿æ ¼å¼æ˜¾ç¤º<br>w : å®½è¡Œæ˜¾ç¤º,å¯ä»¥ä½¿ç”¨å¤šä¸ªwè¿›è¡ŒåŠ å®½æ˜¾ç¤º</p>
</blockquote>
<p>ps å¸¸ç”¨è¾“å‡ºä¿¡æ¯çš„å«ä¹‰</p>
<blockquote>
<p>TIME: è¿›ç¨‹è‡ªä»å¯åŠ¨ä»¥æ¥å¯ç”¨CPUçš„æ€»æ—¶é—´<br>COMMAND/CMD: è¿›ç¨‹çš„å‘½ä»¤å<br>USER:ç”¨æˆ·å<br>%CPU:å ç”¨CPUæ—¶é—´å’Œæ€»æ—¶é—´çš„ç™¾åˆ†æ¯”<br>%MEM:å ç”¨å†…å­˜ä¸ç³»ç»Ÿå†…å­˜æ€»é‡çš„ç™¾åˆ†æ¯”</p>
</blockquote>
<p>ps åº”ç”¨å®ä¾‹</p>
<blockquote>
<p>ps æŸ¥çœ‹éš¶å±äºè‡ªå·±çš„è¿›ç¨‹<br>ps -u or -l æŸ¥çœ‹éš¶å±äºè‡ªå·±è¿›ç¨‹è¯¦ç»†ä¿¡æ¯<br>ps -le or -aux æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·æ‰§è¡Œçš„è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯<br>ps -aux â€“sort pid å¯æŒ‰è¿›ç¨‹æ‰§è¡Œçš„æ—¶é—´ã€<br>    PIDã€UIDç­‰å¯¹è¿›ç¨‹è¿›è¡Œæ’åº</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ps -aux | grep sam</span></span><br><span class="line"><span class="comment"># ps -uU sam æŸ¥çœ‹ç³»ç»Ÿä¸­æŒ‡å®šç”¨æˆ·æ‰§è¡Œçš„è¿›ç¨‹</span></span><br><span class="line"><span class="comment"># ps -le | grep init æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># pstree</span></span><br></pre></td></tr></table></figure>
<h3 id="9-4-kill-â€“-æ€æ­»è¿›ç¨‹"><a href="#9-4-kill-â€“-æ€æ­»è¿›ç¨‹" class="headerlink" title="9.4 kill â€“ æ€æ­»è¿›ç¨‹"></a>9.4 kill â€“ æ€æ­»è¿›ç¨‹</h3><ol>
<li>ä¸ºä»€ä¹ˆè¦æ€æ­»è¿›ç¨‹</li>
<li>è¯¥è¿›ç¨‹å ç”¨äº†è¿‡å¤šçš„CPUæ—¶é—´</li>
<li>è¯¥è¿›ç¨‹ç¼©ä½äº†ä¸€ä¸ªç»ˆç«¯,ä½¿å…¶ä»–å‰å°è¿›ç¨‹æ— æ³•è¿è¡Œ</li>
<li>è¿è¡Œæ—¶é—´è¿‡é•¿,ä½†æ²¡æœ‰é¢„æœŸæ•ˆæœ</li>
<li>äº§ç”Ÿäº†è¿‡å¤šåˆ°å±å¹•æˆ–ç£ç›˜æ–‡ä»¶çš„è¾“å‡º</li>
<li>æ— æ³•æ­£å¸¸é€€å‡º, å…³é—­è¿›ç¨‹:kill è¿›ç¨‹å·</li>
</ol>
<blockquote>
<p>1). kill -9 è¿›ç¨‹å·(å¼ºè¡Œå…³é—­)  kill -s 9 è¿›ç¨‹å· [å‰ç®€åŒ–]<br>2). kill -1 è¿›ç¨‹å·(é‡å¯è¿›ç¨‹)<br>3). å…³é—­å›¾å½¢ç¨‹åº: xkill<br>4). ç»“æŸæ‰€æœ‰è¿›ç¨‹: killall<br>5). æŸ¥æ‰¾æœåŠ¡è¿›ç¨‹å·: pgrep æœåŠ¡åç§°<br>6). å…³é—­è¿›ç¨‹: pkill è¿›ç¨‹åç§°</p>
</blockquote>
<p>å¯åŠ¨çš„ç¨‹åº stop ä¹Ÿå¯ä»¥å…³é—­ , é‡å¯ /etc/rc.d/init.d/httpd restart</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cat/proc/cpuinfo</span></span><br><span class="line"><span class="comment"># pgrep httpd æ£€æµ‹ä½†å®ƒæ‰€æœ‰è¿›ç¨‹çš„ pid</span></span><br><span class="line"><span class="comment"># pkill httpd ä¹Ÿå¯ä»¥å…³é—­ï¼Œå¾ˆæ–¹ä¾¿</span></span><br></pre></td></tr></table></figure>
<h3 id="9-5-è¿›ç¨‹ä¼˜å…ˆçº§ï¼ŒæŒ‚èµ·ä¸æ¢å¤"><a href="#9-5-è¿›ç¨‹ä¼˜å…ˆçº§ï¼ŒæŒ‚èµ·ä¸æ¢å¤" class="headerlink" title="9.5 è¿›ç¨‹ä¼˜å…ˆçº§ï¼ŒæŒ‚èµ·ä¸æ¢å¤"></a>9.5 è¿›ç¨‹ä¼˜å…ˆçº§ï¼ŒæŒ‚èµ·ä¸æ¢å¤</h3><p>nice</p>
<blockquote>
<p> æŒ‡å®šç¨‹åºçš„è¿è¡Œä¼˜å…ˆçº§<br> æ ¼å¼:nice -n command<br> ä¾‹å¦‚:nice -5 myprogram</p>
</blockquote>
<p>renice</p>
<blockquote>
<p> æ”¹å˜ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹çš„ä¼˜å…ˆçº§<br> æ ¼å¼:renice n pid<br> ä¾‹å¦‚:renice -5 777<br> ä¼˜å…ˆçº§å–å€¼èŒƒå›´ä¸º(-20,19)</p>
</blockquote>
<p>nohup</p>
<blockquote>
<p>ä½¿è¿›ç¨‹åœ¨ç”¨æˆ·é€€å‡ºç™»é™†åä»æ—§ç»§ç»­æ‰§è¡Œ,nohupå‘½ä»¤å°†æ‰§è¡Œåçš„æ•°æ®ä¿¡æ¯å’Œ<br>é”™è¯¯ä¿¡æ¯é»˜è®¤å‚¨å­˜åˆ°æ–‡ä»¶ nohup.out ä¸­<br>æ ¼å¼: nohup program &amp;</p>
</blockquote>
<p>è¿›ç¨‹çš„æŒ‚èµ·å’Œæ¢å¤</p>
<blockquote>
<p>è¿›ç¨‹çš„ä¸­æ­¢(æŒ‚èµ·)å’Œç»ˆæ­¢</p>
<p>  æŒ‚èµ·(Ctrl+Z)[ç±»ä¼¼å·®ä¸å¤šæš‚åœ]<br>  ç»ˆæ­¢(Ctrl+C)</p>
</blockquote>
<p>è¿›ç¨‹çš„æ¢å¤</p>
<blockquote>
<p>  æ¢å¤åˆ°å‰å°ç»§ç»­è¿è¡Œ(fg)   å¤åˆ°åå°ç»§ç»­è¿è¡Œ(bg)   æŸ¥çœ‹è¢«æŒ‚èµ· /åå°çš„è¿›ç¨‹(jobs)</p>
</blockquote>
<h3 id="9-6-top-ä½œç”¨"><a href="#9-6-top-ä½œç”¨" class="headerlink" title="9.6 top ä½œç”¨"></a>9.6 top ä½œç”¨</h3><p>è¿›ç¨‹çŠ¶æ€æ˜¾ç¤ºå’Œè¿›ç¨‹æ§åˆ¶,æ¯5ç§’é’Ÿè‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡(åŠ¨æ€æ˜¾ç¤º)</p>
<blockquote>
<p>å¸¸ç”¨é€‰é¡¹:</p>
<p> d : æŒ‡å®šåˆ·æ–°çš„æ—¶é—´é—´éš”<br> c : æ˜¾ç¤ºæ•´ä¸ªå‘½ä»¤è¡Œè€Œä¸ä»…ä»…æ˜¾ç¤ºå‘½ä»¤å</p>
</blockquote>
<p>topå¸¸ç”¨å‘½ä»¤:</p>
<blockquote>
<p> u : æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„è¿›ç¨‹<br> k : ç»ˆæ­¢æ‰§è¡Œä¸­çš„è¿›ç¨‹<br> h or ?:è·å¾—å¸®åŠ©<br> r : é‡æ–°è®¾ç½®è¿›ç¨‹ä¼˜å…ˆçº§<br> s : æ”¹å˜åˆ·æ–°çš„æ—¶é—´é—´éš”<br> W : å°†å½“å‰è®¾ç½®å†™å…¥~/.toprcæ–‡ä»¶ä¸­</p>
</blockquote>
<h3 id="9-7-è®¡åˆ’ä»»åŠ¡"><a href="#9-7-è®¡åˆ’ä»»åŠ¡" class="headerlink" title="9.7 è®¡åˆ’ä»»åŠ¡"></a>9.7 è®¡åˆ’ä»»åŠ¡</h3><ul>
<li>at å®‰æ’ä½œä¸šåœ¨æŸä¸€æ—¶åˆ»æ‰§è¡Œä¸€æ¬¡</li>
<li>batch å®‰æ’ä½œä¸šåœ¨ç³»ç»Ÿè´Ÿè½½ä¸é‡æ—¶æ‰§è¡Œä¸€æ¬¡</li>
<li>cron å®‰æ’å‘¨æœŸæ€§è¿è¡Œçš„ä½œä¸š</li>
</ul>
<p>atå‘½ä»¤çš„åŠŸèƒ½å’Œæ ¼å¼</p>
<blockquote>
<p> åŠŸèƒ½: å®‰æ’ä¸€ä¸ªæˆ–å¤šä¸ªå‘½ä»¤åœ¨æŒ‡å®šçš„æ—¶é—´è¿è¡Œä¸€æ¬¡<br> at çš„å‘½ä»¤æ ¼å¼åŠå‚æ•°<br> at [-f æ–‡ä»¶å] æ—¶é—´ / at -d or atrm  åˆ é™¤é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ / at -l or atq æŸ¥çœ‹é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡</p>
</blockquote>
<p>è¿›ç¨‹å¤„ç†æ–¹å¼</p>
<blockquote>
<p>standalone ç‹¬ç«‹è¿è¡Œ  xinetd è¿›ç¨‹æ‰˜ç®¡  atdã€crond è®¡åˆ’ä»»åŠ¡</p>
</blockquote>
<h2 id="Linux-ä¹¦æ¶"><a href="#Linux-ä¹¦æ¶" class="headerlink" title="Linux ä¹¦æ¶"></a>Linux ä¹¦æ¶</h2><ul>
<li>å…¥é—¨ç±» ï¼šã€Šé¸Ÿå“¥çš„Linuxç§æˆ¿èœã€‹</li>
<li>ç¼–ç¨‹ç±» ï¼šã€ŠAdvanced Linux Programmingã€‹-&gt; ã€ŠAdvanced Programming in the UNIX Environmentã€‹</li>
<li>å†…æ ¸ç±» ï¼šã€ŠLinux Kernel Developmentã€‹</li>
<li>å·¥å…·ç±» ï¼šã€ŠHandbook of Open Source Toolsã€‹</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java SE Learning Notes for Exception]]></title>
      <url>http://shopee.ai/2013/07/25/java/java-se-2.4-notes-exception/</url>
      <content type="html"><![CDATA[<p>Java SE <code>å¼‚å¸¸å¤„ç†</code>éƒ¨åˆ†çš„æ¦‚è¦ç¬”è®°: <code>æ‰‹ä¸­æ— å‰‘</code>, <code>å¿ƒä¸­æœ‰å‰‘</code>.</p>
<a id="more"></a> 
<h2 id="ç¬¬å››ç« -å¼‚å¸¸å¤„ç†"><a href="#ç¬¬å››ç« -å¼‚å¸¸å¤„ç†" class="headerlink" title="ç¬¬å››ç«  å¼‚å¸¸å¤„ç†"></a>ç¬¬å››ç«  å¼‚å¸¸å¤„ç†</h2><ul>
<li><p>Java å¼‚å¸¸æ˜¯ Java æä¾›çš„ç”¨äºå¤„ç†ç¨‹åºä¸­é”™è¯¯çš„ä¸€ç§æœºåˆ¶ã€‚<br>java.langâ€¦.Exceptions<br>å†™ç¨‹åºæœ‰é—®é¢˜è¦æœ‰å‹å¥½ç•Œé¢<br>åŒ»ç”Ÿå¼€å•å­ {<br>  1, é¼»è…”å†…æ„Ÿè§‰å¼‚å¸¸<br>  2, ä½“æ¸©æŒç»­å‡é«˜<br>  3, åˆ†æ³Œä¹³ç™½è‰²æ¶²ä½“<br>  ç›´æ¥è¯´æ„Ÿå†’ä¸å°±å¾—äº†ä¹ˆï¼Ÿ<br>}<br>e.printStackTrace(); éå¸¸å¥½ï¼ç»™ç¨‹åºå‘˜è¯»ã€‚å †æ ˆä¿¡æ¯éƒ½æ‰“å°å‡ºæ¥ï¼  </p>
<p>java.lang.Throwable { å¼€è½¦åœ¨ä¸Šå±±èµ°ï¼Œ  </p>
<pre><code>1, Error         å±±çˆ†å‘ JVM å‡ºé—®é¢˜ã€‚  
2, Exception {   ä½ å¯ä»¥å¤„ç†çš„ -- åˆ¹è½¦åå•¦ï¼ä¿®å¥½å†èµ°ã€‚ã€‚ã€‚  
  1, ...  
  2, RuntimeException  (ç»å¸¸å‡ºï¼Œä¸ç”¨é€®) å‹è·¯é¢ä¸Šçš„å°çŸ³å­  
</code></pre><p>  }<br>ä¸€ä¸ª try å¯ä»¥è·Ÿå¤šä¸ªcatch<br>æ‰€ä»¥ { ä¸€ä¸ªèŒ¶å£¶å¯ä»¥è·Ÿå¤šä¸ªèŒ¶ç¢—ï¼Œä¸€ä¸ªç”·äººå¯ä»¥ä¸‰å¦»å››å¦¾ã€‚}<br>try {<br>  // å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„è¯­å¥<br>  è¯­å¥ä¸€ï¼›<br>  è¯­å¥äºŒï¼›<br>} catch(someEx e) {<br>  è¯­å¥ï¼›<br>  }<br>  catch() {  </p>
<pre><code>è¯­å¥  
</code></pre><p>  }<br>  finally {<br>  }<br>ä¸€ ï¼š æ‰“å¼€<br>äºŒ ï¼š å…³é—­<br>finally : ä¸€èˆ¬è¿›è¡Œèµ„æºçš„æ¸…é™¤å·¥ä½œã€‚ã€‚ã€‚ï¼  </p>
</li>
</ul>
<p>æˆ‘å¤„ç†ä¸äº†çš„äº‹æƒ… ï¼š æˆ‘äº¤ç»™ä¸Šä¸€çº§éƒ¨é—¨å»å¤„ç†ï¼<br>å½“æ—¶ catch åˆ° Ex çš„æ—¶å€™ï¼Œä½ è‡³å°‘è¦åšå‡ºä¸€ç§å¤„ç†ã€‚è¦ä¸é‚£æ˜¯å±é™©çš„ç¼–ç¨‹ä¹ æƒ¯ï¼<br>main() æŠ›å‡º å°±æ˜¯äº¤ç»™ java è¿è¡Œæ—¶ç³»ç»Ÿå•¦ï¼ å®ƒä¼šæŠŠå †æ ˆä¿¡æ¯æ‰“å‡ºæ¥ï¼  </p>
<p>ä¸€ä¸ªå›¾ ï¼š äº”ä¸ªå…³é”®å­— {<br>    try, catch, finally, throw, throws<br>}<br>ä¸€ç‚¹é—®é¢˜ {<br>    å…ˆé€®å¤§çš„ï¼Œåé€®å°çš„ï¼ŒæŠ¥é”™ã€‚<br>}<br>ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸  </p>
<p>ç¨‹åºä¸­å¯ä»¥ä½¿ç”¨ throw - æ–¹æ³•å throws<br>å¦‚æœthrowæŠ›å‡ºå¼‚å¸¸ä¹‹å,æ–¹æ³•å°±ç»“æŸå•¦ï¼  </p>
<p>æ³¨æ„ ï¼š é‡å†™æ–¹æ³•éœ€è¦æŠ›å‡ºä¸åŸæ–¹æ³•æ‰€æŠ›å‡ºå¼‚å¸¸ç±»å‹ä¸€è‡´å¼‚å¸¸æˆ–ä¸æŠ›å‡ºå¼‚å¸¸ã€‚  </p>
<ul>
<li>æ€»ç»“ ï¼š{  <ul>
<li>ä¸€ä¸ªå›¾  </li>
<li>äº”ä¸ªå…³é”®å­—  </li>
<li>å…ˆé€®å°çš„ï¼Œå†é€®å¤§çš„ã€‚  </li>
<li>å¼‚å¸¸ä¸é‡å†™çš„å…³ç³»<br>}  </li>
</ul>
</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://blog.csdn.net/robbyo/article/category/1328994/14" target="_blank" rel="external">csdn robbyo java</a>            </li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java SE Learning Notes for OO]]></title>
      <url>http://shopee.ai/2013/07/24/java/java-se-2.3-notes-oo/</url>
      <content type="html"><![CDATA[<p>Java SE <code>é¢å‘å¯¹è±¡</code>éƒ¨åˆ†çš„æ¦‚è¦ç¬”è®°: <code>æ‰‹ä¸­æ— å‰‘</code>, <code>å¿ƒä¸­æœ‰å‰‘</code>.</p>
<p>å®šä¹‰ç±»  ç”Ÿæˆå¯¹è±¡  ï¼Œ å®šä¹‰æ–¹æ³•  è¢«è°ƒç”¨ </p>
<a id="more"></a> 
<h2 id="1-static"><a href="#1-static" class="headerlink" title="1. static"></a>1. static</h2><p><code>static var</code> çŸ¥é“äº†å†…å­˜ï¼Œä½ å°±çŸ¥é“äº†ä¸€åˆ‡.  </p>
<ul>
<li>å±€éƒ¨å˜é‡ åˆ†é…åœ¨ <strong>stack</strong> memory</li>
<li>æˆå‘˜å˜é‡ åˆ†é…åœ¨ <strong>heap</strong> memory</li>
</ul>
<p><code>static var</code> ä¸ºç±»å¯¹è±¡å…±äº«çš„å˜é‡ åœ¨æ•°æ®åŒº  </p>
<ul>
<li>éé™æ€å˜é‡ ä¸“å±äºæŸä¸€ä¸ªå¯¹è±¡  </li>
<li>é™æ€æ–¹æ³•ä¸å†æ˜¯é’ˆå¯¹æŸä¸€ä¸ªå¯¹è±¡è¿›è¡Œè°ƒç”¨, æ‰€ä»¥ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜ã€‚  </li>
</ul>
<h2 id="2-package"><a href="#2-package" class="headerlink" title="2. package"></a>2. package</h2><p>åŒ…åèµ·åæ–¹æ³• ï¼š å…¬å¸åŸŸåå€’è¿‡æ¥.</p>
<ul>
<li>å¿…é¡»ä¿è¯è¯¥ç±» class æ–‡ä»¶ä½äºæ­£ç¡®çš„ç›®å½•ä¸‹.  </li>
<li>å¿…é¡»classæ–‡ä»¶çš„æœ€ä¸Šå±‚åŒ…çš„çˆ¶ç›®å½•ä½äºclasspathä¸‹.  </li>
<li>æ‰§è¡Œä¸€ä¸ªç±»éœ€è¦å†™å…¨åŒ…å.  </li>
</ul>
<p><strong>SDK ä¸»è¦çš„åŒ…ä»‹ç»</strong>  </p>
<pre><code>* java.lang - åŒ…å«ä¸€äº› java è¯­è¨€çš„æ ¸å¿ƒç±»ï¼Œ å¦‚ : String, Math, Integer, System, Thread.  
* java.net  - åŒ…å«æ‰§è¡Œä¸ç½‘ç»œç›¸å…³çš„æ“ä½œçš„ç±»  
* java.io   - åŒ…å«èƒ½æä¾›å¤šç§è¾“å…¥/è¾“å‡ºåŠŸèƒ½çš„ç±»  
* java.util - åŒ…å«ä¸€äº›å®ç”¨å·¥å…·ç±».  
</code></pre><h2 id="3-ç±»çš„ç»§æ‰¿ä¸æƒé™æ§åˆ¶"><a href="#3-ç±»çš„ç»§æ‰¿ä¸æƒé™æ§åˆ¶" class="headerlink" title="3. ç±»çš„ç»§æ‰¿ä¸æƒé™æ§åˆ¶"></a>3. ç±»çš„ç»§æ‰¿ä¸æƒé™æ§åˆ¶</h2><pre><code>* ä¿®é¥°ç¬¦      ç±»å†…éƒ¨     åŒä¸€åŒ…å†…      å­ç±»     ä»»ä½•åœ°æ–¹  
* private      Yes  
* default      Yes      Yes  
* protected    Yes      Yes         Yes  
* public       Yes      Yes         Yes       Yes    
</code></pre><blockquote>
<p>åˆ†æå†…å­˜ : å­ç±»å¯¹è±¡åŒ…å«ä¸€ä¸ªçˆ¶ç±»å¯¹è±¡.<br>é‡å†™æ–¹æ³•ä¸èƒ½ä½¿ç”¨æ¯”è¢«é‡å†™æ–¹æ³•æ›´ä¸¥æ ¼çš„è®¿é—®æƒé™ â€“ å…¶å®è¿™å’Œå¤šæ€æœ‰å…³  </p>
</blockquote>
<p>super å…³é”®å­—  &amp; ç»§æ‰¿ä¸­çš„æ„é€ æ–¹æ³•</p>
<pre><code>å¦‚æœè°ƒç”¨ super å¿…é¡»å†™åœ¨æ„é€ æ–¹æ³•çš„ç¬¬ä¸€è¡Œ  
å¦‚æœæ²¡è°ƒç”¨ï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ super(), å¦‚æœæ²¡è°ƒï¼Œçˆ¶ç±»ä¸­åˆæ²¡å†™å‚æ•°ä¸ºç©ºè¿™ä¸ªæ„é€ æ–¹æ³•åˆ™å‡ºé”™ã€‚  
</code></pre><ul>
<li><p>Object ç±»</p>
<pre><code>instanceof æ˜¯ä¸€ä¸ªæ“ä½œç¬¦  
equalsæ–¹æ³• J2SDK æä¾›çš„ä¸€äº›ç±» å¦‚ String , Date é‡å†™äº†Object çš„ equals() æ–¹æ³•.  
</code></pre></li>
<li><p>å¯¹è±¡è½¬å‹ casting</p>
<pre><code>* ä¸€ä¸ªåŸºç±»çš„å¼•ç”¨ç±»å‹å˜é‡å¯ä»¥æŒ‡å‘ â€œå…¶å­ç±»çš„å¯¹è±¡â€ã€‚  
* ä¸€ä¸ªåŸºç±»çš„å¼•ç”¨ä¸å¯ä»¥è®¿é—®å…¶å­ç±»æ–°å¢åŠ çš„æˆå‘˜  
* å¯ä»¥ä½¿ç”¨ å¼•ç”¨ å˜é‡ instanceof ç±»å æ¥åˆ¤æ–­è¯¥å¼•ç”¨å‹å˜é‡æ‰€&quot;æŒ‡å‘&quot;çš„å¯¹è±¡æ˜¯å¦å±äºè¯¥ç±»æˆ–è¯¥ç±»çš„å­ç±»ã€‚  
* upcasting / downcasting  

    å†…å­˜åˆ†æ - æ˜ç™½äº†å†…å­˜ä½ å°±æ˜ç™½äº†ä¸€åˆ‡ï¼  
</code></pre></li>
</ul>
<ul>
<li><p>åŠ¨æ€ç»‘å®š, æ± ç»‘å®š, å¤šæ€</p>
<pre><code>* åŠ¨æ€ç»‘å®šçš„æœºåˆ¶ æ˜¯ å®é™…ç±»å‹ new çš„æ˜¯ï¼  
* æ·±ä¸€ç‚¹ -- æ˜¯å¯¹è±¡å†…éƒ¨æœ‰ä¸€ä¸ªæŒ‡é’ˆã€‚ã€‚ã€‚ã€‚ã€‚ã€‚  
* åŠ¨æ€ç»‘å®šçš„æœºåˆ¶æ˜¯ ï¼š å®é™…ç±»å‹ï¼Œè¿˜æ˜¯å¼•ç”¨ç±»å‹ã€‚æ˜¯è°ƒç”¨å®é™…ç±»å‹ï¼Œä¸æ˜¯å¼•ç”¨ç±»å‹ã€‚  

* å®é™…åœ°å€æ‰ä¼šç»‘å®šåˆ°é‚£ä¸ªæ–¹æ³•ä¸Šã€‚ æ–¹æ³•åœ¨  code segment  
* åªæœ‰åœ¨è¿è¡ŒæœŸé—´(ä¸æ˜¯åœ¨ç¼–è¯‘æœŸé—´)ï¼Œè¿è¡Œå‡ºå¯¹è±¡æ¥ï¼Œæ‰èƒ½åˆ¤æ–­è°ƒç”¨å“ªä¸€ä¸ªã€‚ã€‚ã€‚ã€‚  
</code></pre></li>
</ul>
<blockquote>
<p>è¿™æ˜¯é¢å‘å¯¹è±¡æ ¸å¿ƒä¸­çš„æ ¸å¿ƒã€‚æ ¸å¿ƒä¸­çš„æ ¸å¿ƒ ! å¸¦æ¥çš„è«å¤§å¥½å¤„: å¯æ‰©å±•æ€§è¾¾åˆ°äº†éå¸¸éå¸¸çš„æè‡´å¥½ï¼</p>
<p>å¤šæ€æ€»ç»“:</p>
<ol>
<li>è¦æœ‰<strong>ç»§æ‰¿</strong>  </li>
<li>è¦æœ‰<strong>é‡å†™</strong>  </li>
<li>çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡  </li>
</ol>
</blockquote>
<h2 id="4-Abstract-class"><a href="#4-Abstract-class" class="headerlink" title="4. Abstract class"></a>4. Abstract class</h2><ul>
<li>abstract ä¿®é¥°classæ—¶ï¼Œè¿™ä¸ªç±»å«åšæŠ½è±¡ç±».</li>
<li>abstract ä¿®é¥°æ–¹æ³•æ—¶ï¼Œè¯¥æ–¹æ³•å«åšæŠ½è±¡æ–¹æ³•.</li>
<li>abstract class å¿…é¡»è¢«ç»§æ‰¿ï¼ŒæŠ½è±¡æ–¹æ³•å¿…é¡»è¢«é‡å†™. å«æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»å£°æ˜ä¸ºæŠ½è±¡ç±».</li>
<li>abstract class ä¸èƒ½è¢«å®ä¾‹åŒ–, æŠ½è±¡æ–¹æ³•åªéœ€å£°æ˜ï¼Œè€Œä¸éœ€è¦å®ç°.</li>
</ul>
<h2 id="5-Final-å…³é”®å­—"><a href="#5-Final-å…³é”®å­—" class="headerlink" title="5. Final å…³é”®å­—"></a>5. Final å…³é”®å­—</h2><ul>
<li>final çš„å˜é‡çš„å€¼ä¸èƒ½å¤Ÿè¢«æ”¹å˜. final çš„æˆå‘˜å˜é‡ã€å±€éƒ¨å˜é‡(å½¢å‚)</li>
<li><p>final çš„æ–¹æ³•ä¸èƒ½å¤Ÿè¢«é‡å†™ï¼Œ final çš„ç±»ä¸èƒ½å¤Ÿè¢«ç»§æ‰¿.</p>
</li>
<li><p>ç³»ç»Ÿä¸­çš„ final class ä¾‹å¦‚ï¼š </p>
<pre><code>public final class String  
public final class Math  
public final class Boolean
</code></pre></li>
</ul>
<h2 id="6-interface-ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»"><a href="#6-interface-ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»" class="headerlink" title="6. interface: ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»"></a>6. interface: ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»</h2><ul>
<li>å˜é‡å…¨æ˜¯: public static final int id = 1;</li>
<li>æ–¹æ³•å…¨æ˜¯: abstract function()  </li>
</ul>
<ul>
<li>java.lang - Comparable æˆ‘çœ‹å°±åƒ cmp ä¸€æ ·ï¼(ä¸ªäººè®¤ä¸º)  <pre><code>Interface Comparable&lt;T&gt; å¯ä»¥æ‰©å±•  
</code></pre></li>
</ul>
<ul>
<li><strong>interface</strong> <strong>interface</strong> å¯ä»¥ç›¸äº’ç»§æ‰¿  </li>
<li><strong>class</strong> <strong>interface</strong> åªèƒ½æ˜¯ implement å…³ç³»  </li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://blog.csdn.net/robbyo/article/category/1328994/14" target="_blank" rel="external">csdn robbyo java</a>            </li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java SE Learning Notes for Hello World]]></title>
      <url>http://shopee.ai/2013/02/02/java/java-se-2.2-notes-app/</url>
      <content type="html"><![CDATA[<p>ç¬¬ä¸€ä¸ª Java ç¨‹åº HelloWorld.java.  <code>æ‰‹ä¸­æ— å‰‘</code>, <code>å¿ƒä¸­æœ‰å‰‘</code>.</p>
<a id="more"></a>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>HelloWorld.java</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class HelloWorld &#123;</span><br><span class="line">  public static void main(String[] args) &#123;</span><br><span class="line">    System.out.println(&quot;Hello Java.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line">  * è¿™é‡Œæ˜¯æ³¨é‡Š</span><br><span class="line">  */</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªæºæ–‡ä»¶ä¸­æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªpublicç±». å¦‚æœæºæ–‡ä»¶ æ–‡ä»¶åŒ…å«ä¸€ä¸ªpublic class å®ƒå¿…éœ€æŒ‰è¯¥ class_name å‘½å  </p>
<h2 id="Java-ç¨‹åºè®¾è®¡"><a href="#Java-ç¨‹åºè®¾è®¡" class="headerlink" title="Java ç¨‹åºè®¾è®¡"></a>Java ç¨‹åºè®¾è®¡</h2><p><strong>data type</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">                                      -- æ•´æ•°ç±»å‹ (byte, short, int, long)  </span><br><span class="line">                          -- æ•°å€¼å‹ --     </span><br><span class="line">                         |            -- æµ®ç‚¹ç±»å‹ (float, double)  </span><br><span class="line">           --åŸºæœ¬æ•°æ®ç±»å‹  -- å­—ç¬¦å‹ (char)  </span><br><span class="line">          |              |  </span><br><span class="line">          |               -- å¸ƒå°”å‹ (boolean)  </span><br><span class="line">æ•°æ®ç±»å‹ --                           </span><br><span class="line">          |               -- ç±» (class)  </span><br><span class="line">          |              |  </span><br><span class="line">           --å¼•ç”¨æ•°æ®ç±»å‹  -- æ¥å£ (interface)  </span><br><span class="line">                         |  </span><br><span class="line">                          -- æ•°ç»„ (array)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>java ä¸­å®šä¹‰äº† <strong>4ç±» 8ç§</strong> åŸºæœ¬æ•°æ®ç±»å‹<br>boolean ç±»å‹åªå…è®¸å–å€¼ true / false , ä¸å¯ä»¥ç”¨ 0 æˆ– é0 æ›¿ä»£ã€‚<br>char é‡‡ç”¨ Unicode ç¼–ç  (å…¨çƒè¯­è¨€ç»Ÿä¸€ç¼–ç ), æ¯ä¸ªå­—ç¬¦å ä¸¤ä¸ªå­—èŠ‚  </p>
</blockquote>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java SE Learning Notes for Environment]]></title>
      <url>http://shopee.ai/2013/02/02/java/java-se-2.1-notes-env/</url>
      <content type="html"><![CDATA[<p>Java ç¯å¢ƒçš„æ­å»º <code>æ‰‹ä¸­æ— å‰‘</code>, <code>å¿ƒä¸­æœ‰å‰‘</code>.</p>
<a id="more"></a>
<h2 id="1-JDK"><a href="#1-JDK" class="headerlink" title="1. JDK"></a>1. JDK</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">MS=/usr/<span class="built_in">local</span>/xsoft/software</span><br><span class="line"></span><br><span class="line"><span class="comment">### JAVA ###</span></span><br><span class="line">JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk/Contents/Home</span><br><span class="line">JAVA_BIN=<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/jre/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/jre/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME JAVA_BIN PATH CLASSPATH</span><br></pre></td></tr></table></figure>
<h2 id="2-Maven"><a href="#2-Maven" class="headerlink" title="2. Maven"></a>2. Maven</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### Maven ###</span></span><br><span class="line">M2_HOME=/usr/<span class="built_in">local</span>/xsoft/software/apache-maven</span><br><span class="line">MAVEN_HOME=<span class="variable">$M2_HOME</span></span><br><span class="line">M3_HOME=<span class="variable">$M2_HOME</span></span><br><span class="line">PATH=<span class="variable">$M3_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> MAVEN_HOME M2_HOME PATH</span><br><span class="line"><span class="comment">#MAVEN_OPTS=-Xms128m -Xmx512m</span></span><br></pre></td></tr></table></figure>
<h2 id="3-Tomcat"><a href="#3-Tomcat" class="headerlink" title="3. Tomcat"></a>3. Tomcat</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### Tomcat ###</span></span><br><span class="line">CATALINA_HOME=/usr/<span class="built_in">local</span>/xsoft/software/apache-tomcat</span><br><span class="line">PATH=<span class="variable">$CATALINA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> CATALINA_HOME PATH</span><br></pre></td></tr></table></figure>
<h2 id="4-IDE"><a href="#4-IDE" class="headerlink" title="4. IDE"></a>4. IDE</h2><ul>
<li><a href="https://www.jetbrains.com/idea/" target="_blank" rel="external">Intellij IDEA</a></li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="/2017/10/21/ops-zsh-config/">Blair Zsh Config</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java SE Introduce]]></title>
      <url>http://shopee.ai/2013/02/02/java/java-se-1-introduce/</url>
      <content type="html"><![CDATA[<p>Javaæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ï¼Œæ‹¥æœ‰è·¨å¹³å°ã€é¢å‘å¯¹è±¡ã€æ³›å‹ç¼–ç¨‹çš„ç‰¹æ€§.</p>
<a id="more"></a>
<ul>
<li>Java data type</li>
<li>OO</li>
<li>Exception</li>
<li>Java Array  </li>
<li>Java å¸¸ç”¨ç±» </li>
<li>Java å®¹å™¨ç±»</li>
<li>Collection / Generic</li>
<li>Java I/O Stream</li>
<li>Java Thread</li>
<li>Java TCP/UDP, socket</li>
</ul>
<h2 id="1-Java-æ¦‚è¿°"><a href="#1-Java-æ¦‚è¿°" class="headerlink" title="1. Java æ¦‚è¿°"></a>1. Java æ¦‚è¿°</h2><ul>
<li>Java è¿è¡Œæœºåˆ¶</li>
<li>JDK &amp; JRE</li>
<li>Java env install</li>
<li>Java Basic Content</li>
</ul>
<blockquote>
<p>conclude : è®¡ç®—æœºè¯­è¨€æœç€äººç±»æ˜“äºç†è§£çš„æ–¹å‘å‘å±•  </p>
</blockquote>
<h2 id="2-Java-ç‰¹ç‚¹"><a href="#2-Java-ç‰¹ç‚¹" class="headerlink" title="2. Java ç‰¹ç‚¹"></a>2. Java ç‰¹ç‚¹</h2><ul>
<li>ä¸€ç§ OO è¯­è¨€  </li>
<li>ä¸€ç§å¹³å°æ— å…³çš„è¯­è¨€, æä¾›ç¨‹åºè¿è¡Œçš„è§£é‡Šç¯å¢ƒ  </li>
<li>ä¸€ç§å¥å£®çš„è¯­è¨€, å¸æ”¶äº†C/C++è¯­è¨€çš„ä¼˜ç‚¹ï¼Œ ä½†å»æ‰äº†å…¶å½±å“ç¨‹åºå¥å£®æ€§çš„éƒ¨åˆ†(å¦‚: æŒ‡é’ˆï¼Œ å†…å­˜çš„ç”³è¯·ä¸é‡Šæ”¾ç­‰)ã€‚  </li>
</ul>
<h2 id="3-Javaç¨‹åºè¿è¡Œæœºåˆ¶"><a href="#3-Javaç¨‹åºè¿è¡Œæœºåˆ¶" class="headerlink" title="3. Javaç¨‹åºè¿è¡Œæœºåˆ¶"></a>3. Javaç¨‹åºè¿è¡Œæœºåˆ¶</h2><p><strong>Java 2ç§æ ¸å¿ƒæœºåˆ¶</strong></p>
<ul>
<li>Java Virtual Machine</li>
<li>Garbage collection</li>
</ul>
<blockquote>
<p>JVM å¯ç†è§£æˆä¸€ä¸ªä»¥å­—èŠ‚ç ä¸ºæœºå™¨æŒ‡ä»¤çš„CPU<br>JVM æœºåˆ¶å±è”½äº†åº•å±‚è¿è¡Œå¹³å°çš„å·®åˆ«, å®ç°äº†â€ä¸€æ¬¡ç¼–è¯‘, éšå¤„è¿è¡Œâ€ã€‚</p>
<p>x.java â€“ç¼–è¯‘â€“&gt; x.class â€“æ‰§è¡Œâ€“&gt; JVM</p>
<p>Javaè¯­è¨€æ¶ˆé™¤äº†ç¨‹åºå‘˜å›æ”¶æ— ç”¨å†…å­˜ç©ºé—´çš„è´£ä»»;<br>å®ƒæä¾›ä¸€ç§ç³»ç»Ÿçº§çº¿ç¨‹è·Ÿè¸ªå­˜å‚¨ç©ºé—´çš„åˆ†é…æƒ…å†µï¼Œå¹¶åœ¨JVMçš„ç©ºé—²æ—¶, æ£€æŸ¥å¹¶é‡Šæ”¾é‚£äº›å¯è¢«é‡Šæ”¾çš„å­˜å‚¨å™¨ç©ºé—´ã€‚  </p>
</blockquote>
<h2 id="4-JDK-amp-JRE-amp-env-install"><a href="#4-JDK-amp-JRE-amp-env-install" class="headerlink" title="4. JDK &amp; JRE &amp; env install"></a>4. JDK &amp; JRE &amp; env install</h2><ul>
<li>Software Development Kit (è½¯ä»¶å¼€å‘åŒ…)  å¼€å‘éœ€è¦ JDK  </li>
<li>Java Runtime Environment  ç”¨æˆ·åªéœ€ JRE  </li>
</ul>
<p><code>/etc/profile</code> or  <code>~/.zshrc</code> or  <code>~/.zprofile</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">### JAVA ###</span><br><span class="line">JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home</span><br><span class="line">JAVA_BIN=$JAVA_HOME/bin</span><br><span class="line">PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line">CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/jre/lib/dt.jar:$JAVA_HOME/jre/lib/tools.jar</span><br><span class="line">export JAVA_HOME JAVA_BIN PATH CLASSPATH</span><br></pre></td></tr></table></figure>
<blockquote>
<p>classpath : javaåœ¨ç¼–è¯‘å’Œè¿è¡Œæ—¶è¦æ‰¾çš„classæ‰€åœ¨çš„è·¯å¾„<br>å»ºè®®ä½ çš„ JDK è£…åœ¨ä¸å¸¦ç©ºæ ¼çš„ç›®å½•é‡Œé¢</p>
</blockquote>
<h2 id="5-å‘½åè§„åˆ™"><a href="#5-å‘½åè§„åˆ™" class="headerlink" title="5. å‘½åè§„åˆ™"></a>5. å‘½åè§„åˆ™</h2><ol>
<li>ç±»åé¦–å­—æ¯å¤§å†™  </li>
<li>å˜é‡åå’Œæ–¹æ³•åçš„é¦–å­—æ¯å°å†™  </li>
<li>è¿ç”¨é©¼å³°æ ‡è¯†   </li>
</ol>
<p>HelloWorld.java</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class HelloWorld &#123;</span><br><span class="line">  public static void main(String[] args) &#123;</span><br><span class="line">    System.out.println(&quot;Hello Java.&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line">  * è¿™é‡Œæ˜¯æ³¨é‡Š</span><br><span class="line">  */</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸€ä¸ªæºæ–‡ä»¶ä¸­æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªpublicç±». å…¶å®ƒç±»çš„ä¸ªæ•°ä¸é™ï¼Œå¦‚æœæºæ–‡ä»¶ æ–‡ä»¶åŒ…å«ä¸€ä¸ªpublic class å®ƒå¿…éœ€æŒ‰è¯¥ class-name å‘½å  </p>
</blockquote>
<h2 id="6-Java-ç¨‹åºè®¾è®¡"><a href="#6-Java-ç¨‹åºè®¾è®¡" class="headerlink" title="6. Java ç¨‹åºè®¾è®¡"></a>6. Java ç¨‹åºè®¾è®¡</h2><p><strong>data type</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">                                      -- æ•´æ•°ç±»å‹ (byte, short, int, long)  </span><br><span class="line">                          -- æ•°å€¼å‹ --     </span><br><span class="line">                         |            -- æµ®ç‚¹ç±»å‹ (float, double)  </span><br><span class="line">           --åŸºæœ¬æ•°æ®ç±»å‹  -- å­—ç¬¦å‹ (char)  </span><br><span class="line">          |              |  </span><br><span class="line">          |               -- å¸ƒå°”å‹ (boolean)  </span><br><span class="line">æ•°æ®ç±»å‹ --                           </span><br><span class="line">          |               -- ç±» (class)  </span><br><span class="line">          |              |  </span><br><span class="line">           --å¼•ç”¨æ•°æ®ç±»å‹  -- æ¥å£ (interface)  </span><br><span class="line">                         |  </span><br><span class="line">                          -- æ•°ç»„ (array)</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>java ä¸­å®šä¹‰äº† <strong>4ç±» 8ç§</strong> åŸºæœ¬æ•°æ®ç±»å‹<br>boolean ç±»å‹åªå…è®¸å–å€¼ true / false , ä¸å¯ä»¥ç”¨ 0 æˆ– é0 æ›¿ä»£ã€‚<br>char é‡‡ç”¨ Unicode ç¼–ç  (å…¨çƒè¯­è¨€ç»Ÿä¸€ç¼–ç ), æ¯ä¸ªå­—ç¬¦å ä¸¤ä¸ªå­—èŠ‚  </p>
</blockquote>
<h2 id="7-Array-amp-Method"><a href="#7-Array-amp-Method" class="headerlink" title="7. Array &amp; Method"></a>7. Array &amp; Method</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public class Test &#123;  </span><br><span class="line">    public static void main(String[] args) &#123;  </span><br><span class="line">        Date[] days;  </span><br><span class="line">        days = new Date[3];  </span><br><span class="line">        for (int i = 0; i &lt; 3; i++) &#123;  </span><br><span class="line">            days[i] = new Date(2004, 4, i+1);  </span><br><span class="line">        &#125;</span><br><span class="line">        // </span><br><span class="line">        int[] a = &#123;1, 2, 3, 4, 5, 6, 7&#125;;  </span><br><span class="line">        for (int i = 0; i &lt; a.length; i++) &#123;  </span><br><span class="line">            System.out.print(a[i] + &quot; &quot;);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">class Date &#123;  </span><br><span class="line">    int year;  </span><br><span class="line">    int month;  </span><br><span class="line">    int day;  </span><br><span class="line">    Date(int y, int m, int d) &#123;  </span><br><span class="line">        year = y;  </span><br><span class="line">        month = m;  </span><br><span class="line">        day = d;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="http://blog.csdn.net/robbyo/article/details/16942921" target="_blank" rel="external">é¢å‘è¿‡ç¨‹-çº¦ç‘Ÿå¤«ç¯</a></p>
<p><a href="http://blog.csdn.net/robbyo/article/details/16967715" target="_blank" rel="external">é¢å‘å¯¹è±¡-çº¦ç‘Ÿå¤«ç¯</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java SE Learning Notes for All]]></title>
      <url>http://shopee.ai/2013/02/02/java/java-se-2.5-notes-all/</url>
      <content type="html"><![CDATA[<p>è¿™ç¯‡ä¸»è¦æ˜¯è®°å½•äº†æˆ‘å­¦ä¹  Java SE çš„æ¦‚è¦ç¬”è®°: <code>æ‰‹ä¸­æ— å‰‘</code>, <code>å¿ƒä¸­æœ‰å‰‘</code>, <code>æ‘˜èŠ±é£å¶å¯ä»¥ä¼¤äºº</code>.</p>
<a id="more"></a>
<h2 id="1-ç¯å¢ƒé…ç½®"><a href="#1-ç¯å¢ƒé…ç½®" class="headerlink" title="1. ç¯å¢ƒé…ç½®"></a>1. ç¯å¢ƒé…ç½®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">### JAVA ###</span></span><br><span class="line">JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk/Contents/Home</span><br><span class="line">JAVA_BIN=<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line">PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line">CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/jre/lib/rt.jar:<span class="variable">$JAVA_HOME</span>/jre/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/jre/lib/tools.jar</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME JAVA_BIN PATH CLASSPATH</span><br></pre></td></tr></table></figure>
<h2 id="2-åŸºç¡€"><a href="#2-åŸºç¡€" class="headerlink" title="2. åŸºç¡€"></a>2. åŸºç¡€</h2><p>åˆ†æè®¾è®¡ ï¼š  </p>
<pre><code>1. è¿™ä¸ªä¸œè¥¿æœ‰ å“ªäº›ç±»  
2. ç±»çš„ å±æ€§å’Œæ–¹æ³•  
3. ç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»  
4. å®ç°  
</code></pre><h2 id="3-é¢å‘å¯¹è±¡"><a href="#3-é¢å‘å¯¹è±¡" class="headerlink" title="3. é¢å‘å¯¹è±¡"></a>3. é¢å‘å¯¹è±¡</h2><ul>
<li>å®šä¹‰ç±»  ç”Ÿæˆå¯¹è±¡ </li>
<li>å®šä¹‰æ–¹æ³•  è¢«è°ƒç”¨  </li>
</ul>
<h3 id="3-1-static"><a href="#3-1-static" class="headerlink" title="3.1 static"></a>3.1 static</h3><p><code>static var</code> çŸ¥é“äº†å†…å­˜ï¼Œä½ å°±çŸ¥é“äº†ä¸€åˆ‡.  </p>
<ul>
<li>å±€éƒ¨å˜é‡ åˆ†é…åœ¨ <strong>stack</strong> memory</li>
<li>æˆå‘˜å˜é‡ åˆ†é…åœ¨ <strong>heap</strong> memory</li>
</ul>
<p><code>static var</code> ä¸ºç±»å¯¹è±¡å…±äº«çš„å˜é‡ åœ¨æ•°æ®åŒº  </p>
<ul>
<li>éé™æ€å˜é‡ ä¸“å±äºæŸä¸€ä¸ªå¯¹è±¡  </li>
<li>é™æ€æ–¹æ³•ä¸å†æ˜¯é’ˆå¯¹æŸä¸€ä¸ªå¯¹è±¡è¿›è¡Œè°ƒç”¨, æ‰€ä»¥ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜ã€‚  </li>
</ul>
<h3 id="3-2-package"><a href="#3-2-package" class="headerlink" title="3.2 package"></a>3.2 package</h3><p>åŒ…åèµ·åæ–¹æ³• ï¼š å…¬å¸åŸŸåå€’è¿‡æ¥.</p>
<ul>
<li>å¿…é¡»ä¿è¯è¯¥ç±» class æ–‡ä»¶ä½äºæ­£ç¡®çš„ç›®å½•ä¸‹.  </li>
<li>å¿…é¡»classæ–‡ä»¶çš„æœ€ä¸Šå±‚åŒ…çš„çˆ¶ç›®å½•ä½äºclasspathä¸‹.  </li>
<li>æ‰§è¡Œä¸€ä¸ªç±»éœ€è¦å†™å…¨åŒ…å.  </li>
</ul>
<p><strong>SDK ä¸»è¦çš„åŒ…ä»‹ç»</strong>  </p>
<pre><code>* java.lang - åŒ…å«ä¸€äº› java è¯­è¨€çš„æ ¸å¿ƒç±»ï¼Œ å¦‚ : String, Math, Integer, System, Thread.  
* java.net  - åŒ…å«æ‰§è¡Œä¸ç½‘ç»œç›¸å…³çš„æ“ä½œçš„ç±»  
* java.io   - åŒ…å«èƒ½æä¾›å¤šç§è¾“å…¥/è¾“å‡ºåŠŸèƒ½çš„ç±»  
* java.util - åŒ…å«ä¸€äº›å®ç”¨å·¥å…·ç±».  
</code></pre><h3 id="3-3-ç±»çš„ç»§æ‰¿ä¸æƒé™æ§åˆ¶"><a href="#3-3-ç±»çš„ç»§æ‰¿ä¸æƒé™æ§åˆ¶" class="headerlink" title="3.3 ç±»çš„ç»§æ‰¿ä¸æƒé™æ§åˆ¶"></a>3.3 ç±»çš„ç»§æ‰¿ä¸æƒé™æ§åˆ¶</h3><pre><code>* ä¿®é¥°ç¬¦      ç±»å†…éƒ¨     åŒä¸€åŒ…å†…      å­ç±»     ä»»ä½•åœ°æ–¹  
* private      Yes  
* default      Yes      Yes  
* protected    Yes      Yes         Yes  
* public       Yes      Yes         Yes       Yes    
</code></pre><blockquote>
<p>åˆ†æå†…å­˜ : å­ç±»å¯¹è±¡åŒ…å«ä¸€ä¸ªçˆ¶ç±»å¯¹è±¡.<br>é‡å†™æ–¹æ³•ä¸èƒ½ä½¿ç”¨æ¯”è¢«é‡å†™æ–¹æ³•æ›´ä¸¥æ ¼çš„è®¿é—®æƒé™ â€“ å…¶å®è¿™å’Œå¤šæ€æœ‰å…³  </p>
</blockquote>
<p>super å…³é”®å­—  &amp; ç»§æ‰¿ä¸­çš„æ„é€ æ–¹æ³•</p>
<pre><code>å¦‚æœè°ƒç”¨ super å¿…é¡»å†™åœ¨æ„é€ æ–¹æ³•çš„ç¬¬ä¸€è¡Œ  
å¦‚æœæ²¡è°ƒç”¨ï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ super(), å¦‚æœæ²¡è°ƒï¼Œçˆ¶ç±»ä¸­åˆæ²¡å†™å‚æ•°ä¸ºç©ºè¿™ä¸ªæ„é€ æ–¹æ³•åˆ™å‡ºé”™ã€‚  
</code></pre><ul>
<li><p>Object ç±»</p>
<pre><code>instanceof æ˜¯ä¸€ä¸ªæ“ä½œç¬¦  
equalsæ–¹æ³• J2SDK æä¾›çš„ä¸€äº›ç±» å¦‚ String , Date é‡å†™äº†Object çš„ equals() æ–¹æ³•.  
</code></pre></li>
<li><p>å¯¹è±¡è½¬å‹ casting</p>
<pre><code>* ä¸€ä¸ªåŸºç±»çš„å¼•ç”¨ç±»å‹å˜é‡å¯ä»¥æŒ‡å‘ â€œå…¶å­ç±»çš„å¯¹è±¡â€ã€‚  
* ä¸€ä¸ªåŸºç±»çš„å¼•ç”¨ä¸å¯ä»¥è®¿é—®å…¶å­ç±»æ–°å¢åŠ çš„æˆå‘˜  
* å¯ä»¥ä½¿ç”¨ å¼•ç”¨ å˜é‡ instanceof ç±»å æ¥åˆ¤æ–­è¯¥å¼•ç”¨å‹å˜é‡æ‰€&quot;æŒ‡å‘&quot;çš„å¯¹è±¡æ˜¯å¦å±äºè¯¥ç±»æˆ–è¯¥ç±»çš„å­ç±»ã€‚  
* upcasting / downcasting  

    å†…å­˜åˆ†æ - æ˜ç™½äº†å†…å­˜ä½ å°±æ˜ç™½äº†ä¸€åˆ‡ï¼  
</code></pre></li>
</ul>
<ul>
<li><p>åŠ¨æ€ç»‘å®š, æ± ç»‘å®š, å¤šæ€</p>
<pre><code>* åŠ¨æ€ç»‘å®šçš„æœºåˆ¶ æ˜¯ å®é™…ç±»å‹ new çš„æ˜¯ï¼  
* æ·±ä¸€ç‚¹ -- æ˜¯å¯¹è±¡å†…éƒ¨æœ‰ä¸€ä¸ªæŒ‡é’ˆã€‚ã€‚ã€‚ã€‚ã€‚ã€‚  
* åŠ¨æ€ç»‘å®šçš„æœºåˆ¶æ˜¯ ï¼š å®é™…ç±»å‹ï¼Œè¿˜æ˜¯å¼•ç”¨ç±»å‹ã€‚æ˜¯è°ƒç”¨å®é™…ç±»å‹ï¼Œä¸æ˜¯å¼•ç”¨ç±»å‹ã€‚  

* å®é™…åœ°å€æ‰ä¼šç»‘å®šåˆ°é‚£ä¸ªæ–¹æ³•ä¸Šã€‚ æ–¹æ³•åœ¨  code segment  
* åªæœ‰åœ¨è¿è¡ŒæœŸé—´(ä¸æ˜¯åœ¨ç¼–è¯‘æœŸé—´)ï¼Œè¿è¡Œå‡ºå¯¹è±¡æ¥ï¼Œæ‰èƒ½åˆ¤æ–­è°ƒç”¨å“ªä¸€ä¸ªã€‚ã€‚ã€‚ã€‚  
</code></pre></li>
</ul>
<blockquote>
<p>è¿™æ˜¯é¢å‘å¯¹è±¡æ ¸å¿ƒä¸­çš„æ ¸å¿ƒã€‚æ ¸å¿ƒä¸­çš„æ ¸å¿ƒ ! å¸¦æ¥çš„è«å¤§å¥½å¤„: å¯æ‰©å±•æ€§è¾¾åˆ°äº†éå¸¸éå¸¸çš„æè‡´å¥½ï¼</p>
<p>å¤šæ€æ€»ç»“:</p>
<ol>
<li>è¦æœ‰<strong>ç»§æ‰¿</strong>  </li>
<li>è¦æœ‰<strong>é‡å†™</strong>  </li>
<li>çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡  </li>
</ol>
</blockquote>
<h3 id="3-4-Abstract-class"><a href="#3-4-Abstract-class" class="headerlink" title="3.4 Abstract class"></a>3.4 Abstract class</h3><ul>
<li>abstract ä¿®é¥°classæ—¶ï¼Œè¿™ä¸ªç±»å«åšæŠ½è±¡ç±».</li>
<li>abstract ä¿®é¥°æ–¹æ³•æ—¶ï¼Œè¯¥æ–¹æ³•å«åšæŠ½è±¡æ–¹æ³•.</li>
<li>abstract class å¿…é¡»è¢«ç»§æ‰¿ï¼ŒæŠ½è±¡æ–¹æ³•å¿…é¡»è¢«é‡å†™. å«æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»å£°æ˜ä¸ºæŠ½è±¡ç±».</li>
<li>abstract class ä¸èƒ½è¢«å®ä¾‹åŒ–, æŠ½è±¡æ–¹æ³•åªéœ€å£°æ˜ï¼Œè€Œä¸éœ€è¦å®ç°.</li>
</ul>
<h3 id="3-5-Final-å…³é”®å­—"><a href="#3-5-Final-å…³é”®å­—" class="headerlink" title="3.5 Final å…³é”®å­—"></a>3.5 Final å…³é”®å­—</h3><ul>
<li>final çš„å˜é‡çš„å€¼ä¸èƒ½å¤Ÿè¢«æ”¹å˜. final çš„æˆå‘˜å˜é‡ã€å±€éƒ¨å˜é‡(å½¢å‚)</li>
<li><p>final çš„æ–¹æ³•ä¸èƒ½å¤Ÿè¢«é‡å†™ï¼Œ final çš„ç±»ä¸èƒ½å¤Ÿè¢«ç»§æ‰¿.</p>
</li>
<li><p>ç³»ç»Ÿä¸­çš„ final class ä¾‹å¦‚ï¼š </p>
<pre><code>public final class String  
public final class Math  
public final class Boolean
</code></pre></li>
</ul>
<h3 id="3-6-æ¥å£-ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»"><a href="#3-6-æ¥å£-ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»" class="headerlink" title="3.6 æ¥å£: ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»"></a>3.6 æ¥å£: ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»</h3><ul>
<li>å˜é‡å…¨æ˜¯: public static final int id = 1;</li>
<li>æ–¹æ³•å…¨æ˜¯: abstract function()  </li>
</ul>
<ul>
<li>java.lang - Comparable æˆ‘çœ‹å°±åƒ cmp ä¸€æ ·ï¼(ä¸ªäººè®¤ä¸º)  <pre><code>Interface Comparable&lt;T&gt; å¯ä»¥æ‰©å±•  
</code></pre></li>
</ul>
<ul>
<li><strong>interface</strong> <strong>interface</strong> å¯ä»¥ç›¸äº’ç»§æ‰¿  </li>
<li><strong>class</strong> <strong>interface</strong> åªèƒ½æ˜¯ implement å…³ç³»  </li>
</ul>
<h2 id="ç¬¬å››ç« -å¼‚å¸¸å¤„ç†"><a href="#ç¬¬å››ç« -å¼‚å¸¸å¤„ç†" class="headerlink" title="ç¬¬å››ç«  å¼‚å¸¸å¤„ç†"></a>ç¬¬å››ç«  å¼‚å¸¸å¤„ç†</h2><ul>
<li><p>Java å¼‚å¸¸æ˜¯ Java æä¾›çš„ç”¨äºå¤„ç†ç¨‹åºä¸­é”™è¯¯çš„ä¸€ç§æœºåˆ¶ã€‚<br>java.langâ€¦.Exceptions<br>å†™ç¨‹åºæœ‰é—®é¢˜è¦æœ‰å‹å¥½ç•Œé¢<br>åŒ»ç”Ÿå¼€å•å­ {<br>  1, é¼»è…”å†…æ„Ÿè§‰å¼‚å¸¸<br>  2, ä½“æ¸©æŒç»­å‡é«˜<br>  3, åˆ†æ³Œä¹³ç™½è‰²æ¶²ä½“<br>  ç›´æ¥è¯´æ„Ÿå†’ä¸å°±å¾—äº†ä¹ˆï¼Ÿ<br>}<br>e.printStackTrace(); éå¸¸å¥½ï¼ç»™ç¨‹åºå‘˜è¯»ã€‚å †æ ˆä¿¡æ¯éƒ½æ‰“å°å‡ºæ¥ï¼  </p>
<p>java.lang.Throwable { å¼€è½¦åœ¨ä¸Šå±±èµ°ï¼Œ  </p>
<pre><code>1, Error         å±±çˆ†å‘ JVM å‡ºé—®é¢˜ã€‚  
2, Exception {   ä½ å¯ä»¥å¤„ç†çš„ -- åˆ¹è½¦åå•¦ï¼ä¿®å¥½å†èµ°ã€‚ã€‚ã€‚  
  1, ...  
  2, RuntimeException  (ç»å¸¸å‡ºï¼Œä¸ç”¨é€®) å‹è·¯é¢ä¸Šçš„å°çŸ³å­  
</code></pre><p>  }<br>ä¸€ä¸ª try å¯ä»¥è·Ÿå¤šä¸ªcatch<br>æ‰€ä»¥ { ä¸€ä¸ªèŒ¶å£¶å¯ä»¥è·Ÿå¤šä¸ªèŒ¶ç¢—ï¼Œä¸€ä¸ªç”·äººå¯ä»¥ä¸‰å¦»å››å¦¾ã€‚}<br>try {<br>  // å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„è¯­å¥<br>  è¯­å¥ä¸€ï¼›<br>  è¯­å¥äºŒï¼›<br>} catch(someEx e) {<br>  è¯­å¥ï¼›<br>  }<br>  catch() {  </p>
<pre><code>è¯­å¥  
</code></pre><p>  }<br>  finally {<br>  }<br>ä¸€ ï¼š æ‰“å¼€<br>äºŒ ï¼š å…³é—­<br>finally : ä¸€èˆ¬è¿›è¡Œèµ„æºçš„æ¸…é™¤å·¥ä½œã€‚ã€‚ã€‚ï¼  </p>
</li>
</ul>
<p>æˆ‘å¤„ç†ä¸äº†çš„äº‹æƒ… ï¼š æˆ‘äº¤ç»™ä¸Šä¸€çº§éƒ¨é—¨å»å¤„ç†ï¼<br>å½“æ—¶ catch åˆ° Ex çš„æ—¶å€™ï¼Œä½ è‡³å°‘è¦åšå‡ºä¸€ç§å¤„ç†ã€‚è¦ä¸é‚£æ˜¯å±é™©çš„ç¼–ç¨‹ä¹ æƒ¯ï¼<br>main() æŠ›å‡º å°±æ˜¯äº¤ç»™ java è¿è¡Œæ—¶ç³»ç»Ÿå•¦ï¼ å®ƒä¼šæŠŠå †æ ˆä¿¡æ¯æ‰“å‡ºæ¥ï¼  </p>
<p>ä¸€ä¸ªå›¾ ï¼š äº”ä¸ªå…³é”®å­— {<br>    try, catch, finally, throw, throws<br>}<br>ä¸€ç‚¹é—®é¢˜ {<br>    å…ˆé€®å¤§çš„ï¼Œåé€®å°çš„ï¼ŒæŠ¥é”™ã€‚<br>}<br>ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸  </p>
<p>ç¨‹åºä¸­å¯ä»¥ä½¿ç”¨ throw - æ–¹æ³•å throws<br>å¦‚æœthrowæŠ›å‡ºå¼‚å¸¸ä¹‹å,æ–¹æ³•å°±ç»“æŸå•¦ï¼  </p>
<p>æ³¨æ„ ï¼š é‡å†™æ–¹æ³•éœ€è¦æŠ›å‡ºä¸åŸæ–¹æ³•æ‰€æŠ›å‡ºå¼‚å¸¸ç±»å‹ä¸€è‡´å¼‚å¸¸æˆ–ä¸æŠ›å‡ºå¼‚å¸¸ã€‚  </p>
<ul>
<li>æ€»ç»“ ï¼š{  <ul>
<li>ä¸€ä¸ªå›¾  </li>
<li>äº”ä¸ªå…³é”®å­—  </li>
<li>å…ˆé€®å°çš„ï¼Œå†é€®å¤§çš„ã€‚  </li>
<li>å¼‚å¸¸ä¸é‡å†™çš„å…³ç³»<br>}  </li>
</ul>
</li>
</ul>
<h2 id="5-æ•°ç»„"><a href="#5-æ•°ç»„" class="headerlink" title="5. æ•°ç»„"></a>5. æ•°ç»„</h2><ul>
<li>å››ç»´ç©ºé—´<br>int[] a, int a[];<br>å†…å­˜åˆ†æ - çŸ¥é“äº†å†…å­˜ä½ å°±æ˜ç™½äº†ä¸€åˆ‡ï¼<br>æœ¬æ¥æ— ä¸€ç‰© ï¼š ä½•å¤„è£…æ•°ç»„ã€‚  </li>
<li>åŠ¨æ€åˆå§‹åŒ–  </li>
<li><p>é™æ€åˆå§‹åŒ– int a[] = {3, 9, 8}; å†…éƒ¨è¿‡ç¨‹å±è”½æ‰å•¦ï¼  </p>
<p>ipconfig<br>ipconfig -all  è¿™é‡Œ -all å°±æ˜¯å‘½ä»¤è¡Œå‚æ•°ã€‚  </p>
<p>åŸºç¡€ç±»å‹ä¸€èˆ¬åˆ†é…åœ¨æ ˆä¸Šé¢ï¼åŒ…è£…ç±»ï¼Œç”¨äºæŠŠåŸºç¡€ç±»å‹åŒ…è£…æˆå¯¹è±¡ï¼Œåˆ™åˆ†é…åœ¨å †ä¸Šäº†ã€‚<br>ä¾‹å¦‚ ç±» Double, Integer  </p>
<p>çº¦ç‘Ÿå¤«ç¯ - é¢å‘è¿‡ç¨‹ å’Œ é¢å‘å¯¹è±¡ å†™æ³•  </p>
<p>å¦ä¸€ä¸ªæ¯”è¾ƒç²¾å·§çš„ç®—æ³• ï¼š ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿé“¾è¡¨<br>ç®—æ³•å’Œé€»è¾‘æ€ç»´èƒ½åŠ›ä¸æ˜¯ä¸€æœä¸€å¤•èƒ½å®Œæˆçš„ã€‚<br>æ’åºç®—æ³•ç´§è·Ÿç€çš„æ˜¯ - æœç´¢ç®—æ³•  </p>
</li>
</ul>
<hr>
<p>  ä½ è¿™é‡Œæ˜¯é€šè¿‡å¯¹è±¡square1è°ƒç”¨çš„æ–¹æ³•getsquare()<br>    public static void main(String[] args){<br>        getsquare(); //è¿™é‡Œä¼šå‡ºé”™<br>    }<br>    æ˜¯çš„ã€‚å…¶å®mainå‡½æ•°å¯ä»¥ç®€å•è®¤ä¸ºè·Ÿæœ¬ç±»æ²¡ä»€ä¹ˆå…³ç³»ï¼Œåªæ˜¯è°ƒç”¨æœ¬ç±»çš„<br>    å…¶å®ƒé™æ€æ–¹æ³•æ—¶ä¸ç”¨å†™ç±»åè€Œå·²ã€‚æ‰€ä»¥ï¼Œè¦è°ƒç”¨å…¶å®ƒéé™æ€æ–¹æ³•ï¼Œéƒ½è¦<br>    å…ˆå®ä¾‹åŒ–ï¼Œå°±åƒåˆ«çš„ç±»æ¥è°ƒç”¨ä¸€æ ·ã€‚<br>â€”â€”â€“ æˆ‘æœ‰äº›æ‡‚å•¦ï¼ ä½†è¿˜æ˜¯ä¸å¤ªæ‡‚ï¼Œæˆ‘èƒ½ç†è§£å•¦ï¼ (ä¸ªäººç†è§£)â€”â€”â€“  </p>
<pre><code>äºŒç»´æ•°ç»„ ï¼š å¯ä»¥çœ‹æˆä»¥æ•°ç»„ä¸ºå…ƒç´ çš„æ•°ç»„  
* æ•°ç»„çš„æ‹·è´ {  
}  
å¤§å…¬å¸å‰¥å‰Šäººå‰¥å‰Šå¾—æœ€å‰å®³ï¼  
</code></pre><p>  æ˜ç™½å†…å­˜ä½ å°±æ˜ç™½äº†ä¸€åˆ‡ï¼ã€‚ã€‚ã€‚  </p>
<p>  æ€»ç»“ {  </p>
<pre><code>* æ•°ç»„å†…å­˜çš„å¸ƒå±€  
* å¸¸è§ç®—æ³•  
</code></pre><p>  }<br>}  </p>
<h2 id="6-å¸¸ç”¨ç±»"><a href="#6-å¸¸ç”¨ç±»" class="headerlink" title="6. å¸¸ç”¨ç±»"></a>6. å¸¸ç”¨ç±»</h2><p>æœ¬ç« å†…å®¹ {  </p>
<pre><code>* å­—ç¬¦ä¸²ç›¸å…³ç±» (String, StringBuffer)  
* åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»  
* Mathç±»  
* Fileç±»  
* æšä¸¾ç±»  

* java.lang.String ç±»ä»£è¡¨ä¸å¯å˜çš„å­—ç¬¦åºåˆ—  

    String s1 = &quot;helo&quot;;  
    String s3 = &quot;hello&quot;;  
    s1 == s3 true  
    å­—ç¬¦ä¸²å¸¸é‡ - data seg åŒº  
    data segment ç¼–è¯‘å™¨æœ‰ä¼˜åŒ–  

    å¦‚æœæ˜¯ new s1 == s3 false  
          s1.equals(s3) true  
    å­—ç¬¦ä¸²ä½ å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼  

    String ç±»å¸¸ç”¨æ–¹æ³• {  
        * é™æ€é‡è½½æ–¹æ³• public static String valueOf(...)  
        * public String[] spllit(String regex)  
    }  
    String.valueOf(Object obj);  å¤šæ€çš„å­˜åœ¨  
    toString  
    java.lang.StringBuffer ä»£è¡¨å¯å˜çš„å­—ç¬¦åºåˆ—  

    * åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»  
        åŸºæœ¬æ•°æ® ï¼š æ ˆ  -&gt; åŒ…è£… --&gt; å †ä¸Šé¢  
        * åŒ…è£…ç±» {  
            * å†™ç¨‹åºè¦å¾ªåºæ¸è¿›æ–¹æ³•  
        }  
    * Math ç±» { java.lang.Math å…¶ä¸­æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹éƒ½ä¸º double }  
    * File ç±» { java.io.File ç±»ä»£è¡¨ç³»ç»Ÿæ–‡ä»¶å (è·¯å¾„å’Œæ–‡ä»¶å)   
            File ç±»çš„å¸¸è§æ„é€ æ–¹æ³• ï¼š  
            * public File(String pathname)     
                ä»¥ pathname ä¸ºè·¯å¾„åˆ›å»º File å¯¹è±¡, å¦‚æœ pathname æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™é»˜è®¤çš„å½“å‰è·¯å¾„åœ¨ç³»ç»Ÿå±æ€§ user.dir ä¸­å­˜å‚¨  
            * public File(String parent, String child)  
            * File çš„é™æ€å±æ€§ String separator å­˜å‚¨äº†å½“å‰ç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦ã€‚  
                åŸå‹ ï¼š public static final String separator ä½†æ˜¯äº‹å®ä¸Šæ— è®ºåœ¨å“ª ä½ å†™ / éƒ½æ²¡æœ‰é—®é¢˜  

                æ³¨æ„ \ åœ¨ java é‡Œé¢æ˜¯è½¬ä¹‰å­—ç¬¦  
        }  
     * Enum - java.lang.Enum æšä¸¾ç±»å‹ {  
            1, åªèƒ½å¤Ÿå–ç‰¹å®šå€¼ä¸­çš„ä¸€ä¸ª   
            2, ä½¿ç”¨ enum å…³é”®å­—  
            3, æ˜¯ java.lang.Enum  
            4, ä¸¾ä¾‹ ï¼š TestEnum.java  
        }  
æ€»ç»“~~~ API å’Œ é‡‘åº¸çš„ä¹¦å·®ä¸å¤šï¼  
</code></pre><h2 id="7-å®¹å™¨"><a href="#7-å®¹å™¨" class="headerlink" title="7. å®¹å™¨"></a>7. å®¹å™¨</h2><pre><code>ç¬¬ä¸ƒç«  å®¹å™¨ {  
    * å®¹å™¨çš„æ¦‚å¿µ       -        æ•°ç»„æ˜¯ä¹ˆï¼Œ å½“ç„¶æ˜¯ï¼  
    * å®¹å™¨API  
    * Collection æ¥å£  
    * Iterator æ¥å£  
    * å¢å¼ºçš„ for å¾ªç¯  
    * Set æ¥å£  
    * Listæ¥å£ å’Œ Comparableæ¥å£  
    * Collections ç±»  
    * Map æ¥å£  
    * è‡ªåŠ¨æ‰“åŒ… / è§£åŒ…  
    * æ³›å‹ (JDK1.5æ–°å¢)  
    -----  
    * J2SDk æ‰€æä¾›çš„å®¹å™¨ä½äº java.util åŒ…å†…ã€‚  
    * å®¹å™¨APIçš„ç±»å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š  
    --------------------------------------------------  


    1136 1136 1136   --  ä¸€ä¸ªå›¾, ä¸€ä¸ªç±», ä¸‰ä¸ªçŸ¥è¯†ç‚¹ï¼Œå…­ä¸ªæ¥å£  

           &lt;&lt;interface&gt;&gt;  
            Collection  
           /           \                        &lt;&lt;interface&gt;&gt;  
</code></pre><p> &lt;<interface>&gt;      &lt;<interface>&gt;                 ^<br>      Set                List                     |<br>       ^                  ^                       |<br>       |           <strong>___</strong>|<strong>__</strong>                 |<br>         HashSet   LinkedList    ArrayList          HashMap  </interface></interface></p>
<pre><code>1136  1136  1136  ä¸€ä¸ªå›¾, ä¸€ä¸ªç±», ä¸‰ä¸ªçŸ¥è¯†ç‚¹ï¼Œå…­ä¸ªæ¥å£  

---------------------------------------------------  


* Collection æ¥å£ -- å®šä¹‰äº†å­˜å–ä¸€ç»„å¯¹è±¡çš„æ–¹æ³•, å…¶å­æ¥å£ Set å’Œ List åˆ†åˆ«å®š  
    ä¹‰äº†å­˜å‚¨æ–¹å¼ã€‚  

    * Set ä¸­çš„æ•°æ®å¯¹è±¡æ²¡æœ‰é¡ºåºä¸”ä¸å¯ä»¥é‡å¤ã€‚  
    * Listä¸­çš„æ•°æ®å¯¹è±¡æœ‰é¡ºåºä¸”å¯ä»¥é‡å¤  

* Map æ¥å£å®šä¹‰äº†å­˜å‚¨ â€œé”® (key) -- å€¼ (value) æ˜ å°„&quot;å¯¹&quot;çš„æ–¹æ³•ã€‚  

Collection æ–¹æ³•ä¸¾ä¾‹  
    * å®¹å™¨ç±»å¯¹è±¡åœ¨è°ƒç”¨ remove, contains ç­‰æ–¹æ³•æ—¶éœ€è¦æ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸ç­‰  
        è¿™ä¼šæ¶‰åŠåˆ°å¯¹è±¡ç±»å‹çš„ equals æ–¹æ³•å’Œ hashCode æ–¹æ³•ï¼Œå¯¹äºè‡ªå®šä¹‰çš„  
        ç±»å‹ï¼Œéœ€è¦è¦é‡å†™ equals å’Œ hashCode æ–¹æ³•ä»¥å®ç°è‡ªå®šä¹‰çš„å¯¹è±¡ç›¸ç­‰  
        è§„åˆ™ã€‚  
        *ã€€æ³¨æ„ ï¼š ç›¸ç­‰çš„å¯¹è±¡åº”è¯¥å…·æœ‰ç›¸ç­‰çš„ hashcodes  
    * ---  
    ArrayList åº•å±‚æ˜¯ä¸€ä¸ªæ•°ç»„  
</code></pre><p>å“ˆå“ˆå“ˆå“ˆå“ˆ ï¼š è£…å…¥çš„æ˜¯å¯¹è±¡ï¼Œå› ä¸ºå¯¹è±¡åœ¨å †ä¸Šï¼Œæ ˆé‡Œé¢çš„å†…å®¹éšæ—¶å¯èƒ½è¢«æ¸…ç©ºï¼  </p>
<pre><code>    hashCode èƒ½ç›´æ¥å®šä½åˆ°é‚£ä¸ªå¯¹è±¡  

    toyreb  

    Iterator - æ¥å£æœ€å°åŒ–åŸåˆ™  
    æˆ‘è¿™å¤§ç®¡å®¶åœ¨åšæ“ä½œçš„æ—¶å€™ ï¼š è¿ä¸»äººåšä»»ä½•çš„æ“ä½œéƒ½ä¸è®©æ“ä½œå•¦ï¼å› ä¸º iterater æ‰§è¡Œäº†é”å®šï¼Œè°ä¹Ÿä¸è®©è°çœ‹ï¼  

    JDK 1.5 å¢å¼ºçš„ for å¾ªç¯  

Set {  
    HashSet, TreeSet ä¸€ä¸ªä»¥ hash è¡¨å®ç°ï¼Œ ä¸€ä¸ªä»¥ æ ‘ ç»“æ„å®ç°  
}  
List {  
    Object set(int index, Object element)  
    int indexof(Object o);  
    int lastIndexof(Object o);  
}  
</code></pre><p><em>*</em> ä¸€ä¸ªç±» {<br>    Collections  â€“ java.util.Collections æä¾›äº†ä¸€äº›é™æ€æ–¹æ³•å®ç°äº†åŸºäºListå®¹å™¨çš„ä¸€äº›å¸¸ç”¨ç®—æ³•  </p>
<pre><code>ä¾‹å¦‚ {  
    void sort(List)  
    ...  
    ...  
    ...  
}  
LinkedList -- é€†åºçš„æ—¶å€™æ•ˆç‡è¾ƒ ArrayList é«˜ï¼  

å¯¹äº ç‰¹å®šçš„ å¯¹è±¡æ€ä¹ˆç¡®å®šè°å¤§è°å°ã€‚ {  
    å¯¹è±¡é—´å¯ä»¥æ¯”è¾ƒå¤§å°  
    é€šè¿‡ æ¥å£ åªèƒ½çœ‹è§å¯¹è±¡çš„ä¸€ç‚¹ã€‘  
    Comparable æ¥å£  -- æ‰€æœ‰å¯ä»¥å®ç°æ’åºçš„ç±» éƒ½å®ç°äº† Comparable æ¥å£  
}  
public int compareTo(Object obj)  

æ³›å‹è§„å®š - åªèƒ½ä¼  â€œçŒ«â€  

vector / hashtable ä»¥å‰é—ç•™ä¸‹æ¥çš„ã€‚æ•ˆç‡ç‰¹åˆ«ä½  


Map æ¥å£ {  
    Map æ¥å£çš„å®ç°ç±»æœ‰ HashMap å’Œ TreeMap ç­‰ã€‚ {hashmap ç”¨ hashè¡¨æ¥å®ç°ï¼Œ TreeMap ç”¨äºŒå‰æ ‘æ¥å®ç°-çº¢é»‘}  
    Map ç±»ä¸­å­˜å‚¨çš„é”® - å€¼å¯¹é€šè¿‡é”®æ¥æ ‡è¯†ï¼Œæ‰€ä»¥é”®å€¼ä¸èƒ½é‡å¤ã€‚{  
        ä¸èƒ½é‡å¤ ï¼š æ˜¯equals()  
                                equals() å¤ªæ…¢ï¼Œ æ‰€ä»¥æˆ‘ä»¬ç”¨ hashCode() æ¥æ¯”è¾ƒ  
                            }  
    }  
JDK 1.5 ä¹‹å {  
    å¯ä»¥è‡ªåŠ¨æ‰“åŒ…å’Œè§£åŒ…  
</code></pre><h1 id="Auto-boxing-unboxing"><a href="#Auto-boxing-unboxing" class="headerlink" title="- Auto-boxing / unboxing"></a>- Auto-boxing / unboxing</h1><pre><code>    * åœ¨åˆé€‚çš„æ—¶æœºè‡ªåŠ¨æ‰“åŒ… , è§£åŒ…  
        * è‡ªåŠ¨å°†åŸºç¡€ç±»å‹è½¬åŒ–ä¸ºå¯¹è±¡  
        * è‡ªåŠ¨å°†å¯¹è±¡è½¬æ¢ä¸ºåŸºç¡€ç±»å‹  
    * TestMap2.java  
    }  

ç¤ºä¾‹ç»ƒä¹  {  
    TestArgsWords.java  
}  
</code></pre><p>JDK 1.5 æ³›å‹  </p>
<ul>
<li>èµ·å›  ï¼š  <ul>
<li>JDK 1.4 ä»¥å‰ç±»å‹ä¸æ˜ç¡®  <ul>
<li>è£…å…¥é›†åˆç±»å‹éƒ½è¢«å½“ä½œ Object å¯¹å¾…, ä»è€Œå¤±å»è‡ªå·±çš„å®é™…ç±»å‹ã€‚  </li>
<li>ä»é›†åˆä¸­å–å‡ºæ—¶å¾€å¾€éœ€è¦è½¬å‹, æ•ˆç‡ä½, å®¹æ˜“äº§ç”Ÿé”™è¯¯ã€‚  </li>
</ul>
</li>
</ul>
</li>
<li>è§£å†³åŠæ³• ï¼š  <ul>
<li>åœ¨å®šä¹‰é›†åˆçš„æ—¶å€™åŒæ—¶å®šä¹‰é›†åˆä¸­å¯¹è±¡çš„ç±»å‹  </li>
<li>ç¤ºä¾‹ ï¼š BasicGeneric.java  <ul>
<li>å¯ä»¥åœ¨å®šä¹‰ Collection çš„æ—¶å€™æŒ‡å®š  </li>
<li>ä¹Ÿå¯ä»¥åœ¨å¾ªç¯æ—¶ç”¨ Iterator æŒ‡å®š  </li>
</ul>
</li>
</ul>
</li>
<li><p>å¥½å¤„ ï¼š  </p>
<ul>
<li><p>å¢å¼ºç¨‹åºçš„å¯è¯»æ€§å’Œç¨³å®šæ€§  </p>
<p>ä»€ä¹ˆæ—¶å€™å¯ä»¥æŒ‡å®šè‡ªå·±çš„ç±»å‹ ï¼š ä½ çœ‹ APIï¼Œ ä»–è·Ÿä½ å°±å¯ä»¥è·Ÿ  </p>
</li>
</ul>
</li>
<li>æ€»ç»“ {<br>  1136  <ul>
<li>ä¸€ä¸ªå›¾  </li>
<li>ä¸€ä¸ªç±»  <ul>
<li>Collections  <ul>
<li>ä¸‰ä¸ªçŸ¥è¯†ç‚¹  </li>
</ul>
</li>
</ul>
</li>
<li>For  </li>
<li>Generic  </li>
<li>Auto-boxing / unboxing  <ul>
<li>å…­ä¸ªæ¥å£ {<br>1, Collection {<br>2, Set,<br>3, List<br>}<br>4, Map<br>5, Iterator<br>6, Comparable<br>}  </li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="8-IO-æµ"><a href="#8-IO-æµ" class="headerlink" title="8. IO æµ"></a>8. IO æµ</h2><pre><code>èƒ½å¸®åŠ©ä½ å»ºç«‹æ–‡ä»¶ï¼Œä¸èƒ½å¸®ä½ å»ºç›®å½•  

è¯»åˆ°å†…å­˜åŒº -   

* è½¬æ¢æµ {  
    ä¸­æ–‡ windos ç¼–ç  JBK  
    å½“å‰ç³»ç»Ÿé»˜è®¤çš„ ç¼–ç æ˜¯ JBK  
    IOS8859_1 åŒ…å«çš„æ‰€æœ‰è¥¿æ¬§è¯­è¨€ --&gt; åæ¥æ‰æ¨å‡º UniCode (å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ä¸ºäº†åŒ…å«å…¨çƒ)  
    JBK   JB2312   JB18030  ä¸œæ–¹äººè‡ªå·±çš„ç¼–ç  - å›½æ ‡ç  - å°±æ˜¯æ±‰å­—ï¼Œä½ å¯ä»¥è®¤ä¸º  
    æ—¥æ–‡ï¼ŒéŸ©æ–‡ éƒ½æœ‰è‡ªå·±çš„ç¼–ç   - å°æ¹¾æœ‰è‡ªå·±çš„ å¤§äº”ç   
    æ‹‰ä¸1ï¼Œ 2ï¼Œ 3ï¼Œ 4ï¼Œ 5. 6. 7. 8. 9 éƒ½åŒæ„å•¦ï¼åŒ…æ‹¬ä¿„ç½—æ–¯ï¼Œ ä½†æ˜¯ä¸­æ–‡è¿˜ä¸è¡Œ ---- &gt; UniCode  
    FileOutputStream() æ„é€ æ–¹æ³•è‡ªå·±å»æŸ¥  
* System.in {  
    System ç±»   --   in æ˜¯ InputStream ç±»å‹  
    public static final InputStream in   æŠ½è±¡ç±» ç±»å‹ï¼Œ  åˆæ˜¯çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡  
    InputStreamReader isr = new InputStreamReader(System.in);  
    System.in -&gt; ç®¡é“ç›´æ¥å †åˆ°é»‘çª—å£ä¸Š  
    BufferedReader br = new BufferedReader(isr);  

    wait()   
    è¿è¡Œå ï¼š ç­‰å¾…åœ¨é‚£ - é˜»å¡å¼çš„æ–¹æ³• å¾ˆå¤š   
    readLine() æœ‰ç‚¹ç‰¹æ®Š  
    å…¶å®æ˜¯ System.in æ¯”è¾ƒç‰¹æ®Š  -- æ ‡å‡†è¾“å…¥ - ç­‰å¾…ç€æ ‡å‡†è¾“å…¥ {  
        ä½ ä¸è¾“å…¥ - æˆ‘å¯ä¸å°±ç­‰ç€ä¹ˆï¼Œå½“ç„¶è¿™ä¸ªä¹Ÿå«åšåŒæ­¥æ–¹æ³•ã€‚  
        ä½ ä¸è¾“å…¥ï¼Œæˆ‘å°±ä¸èƒ½å¹²åˆ«çš„  
        åŒæ­¥å¼çš„  
    }  

* æ•°æ®æµ {  
    è¯·ä½ æŠŠ long ç±»å‹çš„æ•°ï¼Œ å†™åˆ° --&gt; æ–‡ä»¶é‡Œé¢å»  
    readUTF()  
    UTF8 æ¯”è¾ƒçœç©ºé—´  
}  
* æ‰“å°æµ {  
    System.out   
    out - public static final PrintStream  
    é»˜è®¤åœ¨æˆ‘ä»¬çš„é»‘çª—å£è¾“å‡º  
    è¯­è¨€ä»£è¡¨äººçš„æ€ç»´ - èƒ½å¤Ÿä¿ƒè¿›äººçš„æ€ç»´  
    log4J è‘—åçš„æ—¥å¿—å¼€å‘åŒ…  
}  

* Object æµ {  
    æŠŠæ•´ä¸ª Object å…¨éƒ¨å†™å…¥ç¡¬ç›˜è¢«  
    åœ¨ VC ä¸Šå«åšç³»åˆ—åŒ–  
    å­˜ç›˜ç‚¹ã€‚  
    æŒ¨ç€æ’çš„åºåˆ—åŒ–  
    å†ä¸€ç‚¹ä¸€ç‚¹è¯»å‡ºæ¥  

    Serializable æ¥å£  --- æ ‡è®°æ€§çš„æ¥å£  
    transient int k = 15;  
    ç›¸å½“äºè¿™ä¸ª k æ˜¯é€æ˜çš„ã€‚åœ¨åºåˆ—åŒ–çš„æ—¶å€™ä¸ç»™äºè€ƒè™‘ï¼Œè¯»çš„æ—¶å€™è¯»é»˜è®¤å€¼ã€‚  

    * Serializable æ¥å£  
    * Externalizable æ¥å£  extends  Serializable   
}  
</code></pre><p>}  </p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Trie Tree POJ 2001]]></title>
      <url>http://shopee.ai/2013/01/17/leetcode/Trie_Tree-POJ-2001/</url>
      <content type="html"><![CDATA[<p>trie tree poj 2001 shortest prefixes</p>
<a id="more"></a>
<h2 id="POJ-2001-Shortest-Prefixes"><a href="#POJ-2001-Shortest-Prefixes" class="headerlink" title="POJ 2001 Shortest Prefixes"></a><a href="http://poj.org/problem?id=2001" target="_blank" rel="external">POJ 2001 Shortest Prefixes</a></h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUG puts(<span class="string">"here!!!"</span>);  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;  </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;  </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> kind = <span class="number">26</span>;  </span><br><span class="line"><span class="keyword">char</span> str[N][<span class="number">25</span>];  </span><br><span class="line"><span class="keyword">struct</span> Node &#123;  </span><br><span class="line">    <span class="keyword">int</span> num;  </span><br><span class="line">    <span class="keyword">bool</span> tail;  </span><br><span class="line">    Node* next[kind];  </span><br><span class="line">    Node() : num(<span class="number">1</span>), tail(<span class="literal">false</span>) &#123;  </span><br><span class="line">        <span class="built_in">memset</span>(next, <span class="number">0</span>, <span class="keyword">sizeof</span>(next));  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(Node* root, <span class="keyword">char</span> *s)</span> </span>&#123;  </span><br><span class="line">    Node* p = root;  </span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, index;  </span><br><span class="line">    <span class="keyword">while</span>(s[i]) &#123;  </span><br><span class="line">        index = s[i] - <span class="string">'a'</span>;  </span><br><span class="line">        <span class="keyword">if</span>(p-&gt;next[index] == <span class="literal">NULL</span>) &#123;  </span><br><span class="line">            p-&gt;next[index] = <span class="keyword">new</span> Node();  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">else</span> p-&gt;next[index]-&gt;num++;  </span><br><span class="line">        p = p-&gt;next[index];  </span><br><span class="line">        i++;  </span><br><span class="line">    &#125;  </span><br><span class="line">    p-&gt;tail = <span class="literal">true</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(Node* root, <span class="keyword">int</span> count)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;  </span><br><span class="line">        Node* p = root;  </span><br><span class="line">        <span class="keyword">int</span> len = <span class="built_in">strlen</span>(str[i]);  </span><br><span class="line">        <span class="keyword">char</span>* s = str[i];  </span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="string">' '</span>;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len; j++) &#123;  </span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; s[j];  </span><br><span class="line">            <span class="keyword">int</span> index = s[j] - <span class="string">'a'</span>;  </span><br><span class="line">            <span class="keyword">if</span>(p-&gt;next[index]-&gt;num == <span class="number">1</span>) &#123;  </span><br><span class="line">                <span class="keyword">break</span>;  </span><br><span class="line">            &#125;  </span><br><span class="line">            p = p-&gt;next[index];  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    Node* root = <span class="keyword">new</span> Node(); <span class="comment">// æ ¹èŠ‚ç‚¹ä¸åŒ…å«ä»»ä½•å­—ç¬¦  </span></span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, count = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%s"</span>, str[i]) == <span class="number">1</span>) &#123;  </span><br><span class="line">        insert(root, str[i]);  </span><br><span class="line">        i++;  </span><br><span class="line">    &#125;  </span><br><span class="line">    count = i;  </span><br><span class="line">    solve(root, count);  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Union-Find Sets POJ 1703]]></title>
      <url>http://shopee.ai/2013/01/17/leetcode/union-find_sets-POJ-1703/</url>
      <content type="html"><![CDATA[<p>union-find sets poj 1703 find them, catch them å¸®æ´¾ä¹‹äº‰</p>
<a id="more"></a>
<h2 id="Find-them-Catch-them"><a href="#Find-them-Catch-them" class="headerlink" title="Find them, Catch them"></a><a href="http://poj.org/problem?id=1703" target="_blank" rel="external">Find them, Catch them</a></h2><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1</span><br><span class="line">5 5</span><br><span class="line">A 1 2</span><br><span class="line">D 1 2</span><br><span class="line">A 1 2</span><br><span class="line">D 2 4</span><br><span class="line">A 1 4</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Not sure yet.</span><br><span class="line">In different gangs.</span><br><span class="line">In the same gang.</span><br></pre></td></tr></table></figure>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MID(x,y) ( ( x + y ) &gt;&gt; 1 )  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> L(x) ( x &lt;&lt; 1 )  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> R(x) ( x &lt;&lt; 1 | 1 )  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUG puts(<span class="string">"here!!!"</span>);  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> STOP system(<span class="string">"pause"</span>);  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;  </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100005</span>;  </span><br><span class="line"><span class="keyword">int</span> f[N+N];  </span><br><span class="line"><span class="keyword">int</span> n, m;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">if</span>(f[x] &lt; <span class="number">0</span>) <span class="keyword">return</span> x;  </span><br><span class="line">    <span class="keyword">return</span> f[x] = find(f[x]);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> loop;  </span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; loop;  </span><br><span class="line">    <span class="keyword">while</span>(loop--) &#123;  </span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);  </span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">255</span>, <span class="keyword">sizeof</span>(f));  </span><br><span class="line">        <span class="keyword">while</span>(m--) &#123;  </span><br><span class="line">            <span class="keyword">int</span> a, b;  </span><br><span class="line">            <span class="keyword">char</span> s[<span class="number">3</span>];  </span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s%d%d"</span>, s, &amp;a, &amp;b);  </span><br><span class="line">            <span class="keyword">if</span>(s[<span class="number">0</span>] == <span class="string">'A'</span>) &#123;  </span><br><span class="line">                <span class="keyword">if</span>(find(a) != find(b) &amp;&amp; find(a) != find(b+n)) &#123;  </span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"Not sure yet.\n"</span>);  </span><br><span class="line">                &#125;  </span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(find(a) == find(b)) &#123;  </span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"In the same gang.\n"</span>);  </span><br><span class="line">                &#125;  </span><br><span class="line">                <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"In different gangs.\n"</span>);  </span><br><span class="line">            &#125;  </span><br><span class="line">            <span class="keyword">else</span> &#123;  </span><br><span class="line">                <span class="keyword">if</span>(find(a) != find(b+n)) &#123;  </span><br><span class="line">                    f[find(a)] = find(b+n);  </span><br><span class="line">                    f[find(b)] = find(a+n);  </span><br><span class="line">                &#125;  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Union-Find Sets HDU 1856]]></title>
      <url>http://shopee.ai/2013/01/17/leetcode/union-find_sets-hdu_1856/</url>
      <content type="html"><![CDATA[<p>union-find sets hdu 1856 more is better</p>
<a id="more"></a>
<p><strong><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1856" target="_blank" rel="external">More is better</a></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Mr Wang wants some boys to help him with a project. ...</span><br></pre></td></tr></table></figure>
<p><strong><font color="#2561c2">Sample Input</font></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">4</span><br><span class="line">1 2</span><br><span class="line">3 4</span><br><span class="line">5 6</span><br><span class="line">1 6</span><br><span class="line">4</span><br><span class="line">1 2</span><br><span class="line">3 4</span><br><span class="line">5 6</span><br><span class="line">7 8</span><br></pre></td></tr></table></figure>
<p><strong><font color="#2561c2">Sample Output</font></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">4</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<p><strong><font color="#2561c2">Code</font></strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUG puts(<span class="string">"here!!!"</span>);  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;  </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100005</span>;  </span><br><span class="line"><span class="keyword">struct</span> Node &#123;  </span><br><span class="line">    <span class="keyword">int</span> par;  </span><br><span class="line">    <span class="keyword">int</span> sum;  </span><br><span class="line">&#125;;  </span><br><span class="line"><span class="keyword">int</span> SUM;  </span><br><span class="line">  </span><br><span class="line">Node p[<span class="number">2</span>*N + <span class="number">5</span>];  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">makeSet</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">2</span>*n; i++) &#123;  </span><br><span class="line">        p[i].par = i;  </span><br><span class="line">        p[i].sum = <span class="number">1</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">    SUM = <span class="number">1</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">if</span>(a == p[a].par) <span class="keyword">return</span> a;  </span><br><span class="line">    <span class="keyword">return</span> p[a].par = find(p[a].par);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">union1</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> fa = find(a);  </span><br><span class="line">    <span class="keyword">int</span> fb = find(b);  </span><br><span class="line">    <span class="keyword">if</span>(fa != fb) &#123;  </span><br><span class="line">        p[fa].par = fb;  </span><br><span class="line">        p[fb].sum += p[fa].sum;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">if</span>(p[fb].sum &gt; SUM) &#123;  </span><br><span class="line">        SUM = p[fb].sum;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> n, a, b;  </span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) == <span class="number">1</span>) &#123;  </span><br><span class="line">        makeSet(n);  </span><br><span class="line">        <span class="keyword">while</span>(n--) &#123;  </span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);  </span><br><span class="line">            union1(a, b);  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, SUM);  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[KMP / HDU 1711 æ‰¾åˆ°åŒ¹é…çš„ä½ç½®å¹¶è¿”å›]]></title>
      <url>http://shopee.ai/2013/01/17/leetcode/kmp-for-hdu_1711/</url>
      <content type="html"><![CDATA[<p>kmp hdu 1711 number sequence</p>
<a id="more"></a>
<h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a><font color="#2561c2">Description</font></h3><p>Given two sequences of numbers : a[1], a[2], â€¦â€¦ , a[N], and b[1], b[2], â€¦â€¦ , b[M] (1 &lt;= M &lt;= 10000, 1 &lt;= N &lt;= 1000000). Your task is to find a number K which make a[K] = b[1], a[K + 1] = b[2], â€¦â€¦ , a[K + M â€“ 1] = b[M]. If there are more than one K exist, output the smallest one.</p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a><font color="#2561c2">Input</font></h3><p>The first line of input is a number T which indicate the number of cases. Each case contains three lines. The first line is two numbers N and M (1 &lt;= M &lt;= 10000, 1 &lt;= N &lt;= 1000000). The second line contains N integers which indicate a[1], a[2], â€¦â€¦ , a[N]. The third line contains M integers which indicate b[1], b[2], â€¦â€¦ , b[M]. All integers are in the range of [-1000000, 1000000].</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a><font color="#2561c2">Output</font></h3><p>For each test case, you should output one line which only contain K described above. If no such K exists, output -1 instead.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a><font color="#2561c2">Sample Input</font></h3><p>2<br>13 5<br>1 2 1 2 3 1 2 3 1 3 2 1 2<br>1 2 3 1 3<br>13 5<br>1 2 1 2 3 1 2 3 1 3 2 1 2<br>1 2 3 2 1</p>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a><font color="#2561c2">Sample Output</font></h3><p>6<br>-1</p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a><font color="#2561c2">Code</font></h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;list&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;utility&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cassert&gt;</span>  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BUG puts(<span class="string">"here!!!"</span>);  </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;  </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000005</span>;  </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">10005</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">int</span> s[N];  </span><br><span class="line"><span class="keyword">int</span> t[M];  </span><br><span class="line"><span class="keyword">int</span> next[M];  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getNext</span><span class="params">(<span class="keyword">int</span> len)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> i, j;  </span><br><span class="line">    i = <span class="number">0</span>, j = <span class="number">-1</span>;  </span><br><span class="line">    next[<span class="number">0</span>] = <span class="number">-1</span>;  </span><br><span class="line">    <span class="keyword">while</span>(i &lt; len<span class="number">-1</span>) &#123;  </span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">-1</span> || t[i] == t[j]) &#123;  </span><br><span class="line">            i++, j++, next[i] = j;  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">else</span> &#123;  </span><br><span class="line">            j = next[j];  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kmp</span><span class="params">(<span class="keyword">int</span> sl, <span class="keyword">int</span> tl)</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;  </span><br><span class="line">    <span class="keyword">while</span>(i &lt; sl &amp;&amp; j &lt; tl) &#123;  </span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">-1</span> || s[i] == t[j]) &#123;  </span><br><span class="line">            i++, j++;  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">else</span> j = next[j];  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">if</span>(j == tl) <span class="keyword">return</span> i-j+<span class="number">1</span>;  </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">-1</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">// abcabcababcabcabdef  </span></span><br><span class="line"><span class="comment">// abcabcabd  </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> T, n, m, ans;  </span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;  </span><br><span class="line">    <span class="keyword">while</span>(T--) &#123;  </span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;  </span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, s+i);  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;  </span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, t+i);  </span><br><span class="line">        &#125;  </span><br><span class="line">        getNext(m);  </span><br><span class="line">        ans = kmp(n, m);  </span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[éœ€è¦çš„æ°”è´¨å“æ ¼]]></title>
      <url>http://shopee.ai/2013/01/17/tools/being-eq-gentleman/</url>
      <content type="html"><![CDATA[<p>åšä¸€ä¸ª æˆç†Ÿã€ç»…å£«ã€ç¨³é‡ çš„äººï¼Œæˆ‘æœ€è¿‘è¶Šæ¥è¶Šè§‰å¾—å®ƒéå¸¸éå¸¸éå¸¸é‡è¦â€¦</p>
<a id="more"></a>
<h2 id="ä¸€ï¼šæ²‰ç¨³"><a href="#ä¸€ï¼šæ²‰ç¨³" class="headerlink" title="ä¸€ï¼šæ²‰ç¨³"></a>ä¸€ï¼šæ²‰ç¨³</h2><p>ï¼ˆ1ï¼‰ä¸è¦éšä¾¿æ˜¾éœ²ä½ çš„æƒ…ç»ªã€‚<br>ï¼ˆ2ï¼‰ä¸è¦é€¢äººå°±è¯‰è¯´ä½ çš„å›°éš¾å’Œé­é‡ã€‚<br>ï¼ˆ3ï¼‰åœ¨å¾è¯¢åˆ«äººçš„æ„è§ä¹‹å‰ï¼Œè‡ªå·±å…ˆæ€è€ƒï¼Œä½†ä¸è¦å…ˆè®²ã€‚<br>ï¼ˆ4ï¼‰ä¸è¦ä¸€æœ‰æœºä¼šå°±å” å¨ä½ çš„ä¸æ»¡ã€‚<br>ï¼ˆ5ï¼‰é‡è¦çš„å†³å®šå°½é‡æœ‰åˆ«äººå•†é‡ï¼Œæœ€å¥½éš”ä¸€å¤©å†å‘å¸ƒã€‚<br>ï¼ˆ6ï¼‰è®²è¯ä¸è¦æœ‰ä»»ä½•çš„æ…Œå¼ ï¼Œèµ°è·¯ä¹Ÿæ˜¯ã€‚  </p>
<h2 id="äºŒï¼šç»†å¿ƒ"><a href="#äºŒï¼šç»†å¿ƒ" class="headerlink" title="äºŒï¼šç»†å¿ƒ"></a>äºŒï¼šç»†å¿ƒ</h2><p>ï¼ˆ1ï¼‰å¯¹èº«è¾¹å‘ç”Ÿçš„äº‹æƒ…ï¼Œå¸¸æ€è€ƒå®ƒä»¬çš„å› æœå…³ç³»ã€‚<br>ï¼ˆ2ï¼‰å¯¹åšä¸åˆ°ä½çš„æ‰§è¡Œé—®é¢˜ï¼Œè¦å‘æ˜å®ƒä»¬çš„æ ¹æœ¬ç—‡ç»“ã€‚<br>ï¼ˆ3ï¼‰å¯¹ä¹ ä»¥ä¸ºå¸¸çš„åšäº‹æ–¹æ³•ï¼Œè¦æœ‰æ”¹è¿›æˆ–ä¼˜åŒ–çš„å»ºè®®ã€‚<br>ï¼ˆ4ï¼‰åšä»€ä¹ˆäº‹æƒ…éƒ½è¦å…»æˆæœ‰æ¡ä¸ç´Šå’Œäº•ç„¶æœ‰åºçš„ä¹ æƒ¯ã€‚<br>ï¼ˆ5ï¼‰ç»å¸¸å»æ‰¾å‡ ä¸ªåˆ«äººçœ‹ä¸å‡ºæ¥çš„æ¯›ç—…æˆ–å¼Šç«¯ã€‚<br>ï¼ˆ6ï¼‰è‡ªå·±è¦éšæ—¶éšåœ°å¯¹æœ‰æ‰€ä¸è¶³çš„åœ°æ–¹è¡¥ä½ã€‚   </p>
<h2 id="ä¸‰ï¼šèƒ†è¯†"><a href="#ä¸‰ï¼šèƒ†è¯†" class="headerlink" title="ä¸‰ï¼šèƒ†è¯†"></a>ä¸‰ï¼šèƒ†è¯†</h2><p>ï¼ˆ1ï¼‰ä¸è¦å¸¸ç”¨ç¼ºä¹è‡ªä¿¡çš„è¯å¥<br>ï¼ˆ2ï¼‰ä¸è¦å¸¸å¸¸åæ‚”ï¼Œè½»æ˜“æ¨ç¿»å·²ç»å†³å®šçš„äº‹ã€‚<br>ï¼ˆ3ï¼‰åœ¨ä¼—äººäº‰æ‰§ä¸ä¼‘æ—¶ï¼Œä¸è¦æ²¡æœ‰ä¸»è§ã€‚<br>ï¼ˆ4ï¼‰æ•´ä½“æ°›å›´ä½è½æ—¶ï¼Œä½ è¦ä¹è§‚ã€é˜³å…‰ã€‚<br>ï¼ˆ5ï¼‰åšä»»ä½•äº‹æƒ…éƒ½è¦ç”¨å¿ƒï¼Œå› ä¸ºæœ‰äººåœ¨çœ‹ç€ä½ ã€‚<br>ï¼ˆ6ï¼‰äº‹æƒ…ä¸é¡ºçš„æ—¶å€™ï¼Œæ­‡å£æ°”ï¼Œé‡æ–°å¯»æ‰¾çªç ´å£ï¼Œå°±ç»“æŸä¹Ÿè¦å¹²å‡€åˆ©è½ã€‚   </p>
<h2 id="å››ï¼šå¤§åº¦"><a href="#å››ï¼šå¤§åº¦" class="headerlink" title="å››ï¼šå¤§åº¦"></a>å››ï¼šå¤§åº¦</h2><p>ï¼ˆ1ï¼‰ä¸è¦åˆ»æ„æŠŠæœ‰å¯èƒ½æ˜¯ä¼™ä¼´çš„äººå˜æˆå¯¹æ‰‹ã€‚<br>ï¼ˆ2ï¼‰å¯¹åˆ«äººçš„å°è¿‡å¤±ã€å°é”™è¯¯ä¸è¦æ–¤æ–¤è®¡è¾ƒã€‚<br>ï¼ˆ3ï¼‰åœ¨é‡‘é’±ä¸Šè¦å¤§æ–¹ï¼Œå­¦ä¹ ä¸‰æ–½ï¼ˆè´¢æ–½ã€æ³•æ–½ã€æ— ç•æ–½ï¼‰<br>ï¼ˆ4ï¼‰ä¸è¦æœ‰æƒåŠ›çš„å‚²æ…¢å’ŒçŸ¥è¯†çš„åè§ã€‚<br>ï¼ˆ5ï¼‰ä»»ä½•æˆæœå’Œæˆå°±éƒ½åº”å’Œåˆ«äººåˆ†äº«ã€‚<br>ï¼ˆ6ï¼‰å¿…é¡»æœ‰äººç‰ºç‰²æˆ–å¥‰çŒ®çš„æ—¶å€™ï¼Œè‡ªå·±èµ°åœ¨å‰é¢ã€‚  </p>
<h2 id="äº”ï¼šè¯šä¿¡"><a href="#äº”ï¼šè¯šä¿¡" class="headerlink" title="äº”ï¼šè¯šä¿¡"></a>äº”ï¼šè¯šä¿¡</h2><p>ï¼ˆ1ï¼‰åšä¸åˆ°çš„äº‹æƒ…ä¸è¦è¯´ï¼Œè¯´äº†å°±åŠªåŠ›åšåˆ°ã€‚<br>ï¼ˆ2ï¼‰è™šçš„å£å·æˆ–æ ‡è¯­ä¸è¦å¸¸æŒ‚å˜´ä¸Šã€‚<br>ï¼ˆ3ï¼‰é’ˆå¯¹å®¢æˆ·æå‡ºçš„â€œä¸è¯šä¿¡â€é—®é¢˜ï¼Œæ‹¿å‡ºæ”¹å–„çš„æ–¹æ³•ã€‚<br>ï¼ˆ4ï¼‰åœæ­¢ä¸€åˆ‡â€œä¸é“å¾·â€çš„æ‰‹æ®µã€‚<br>ï¼ˆ5ï¼‰è€å¼„å°èªæ˜ï¼Œè¦ä¸å¾—ï¼<br>ï¼ˆ6ï¼‰è®¡ç®—ä¸€ä¸‹äº§å“æˆ–æœåŠ¡çš„è¯šä¿¡ä»£ä»·ï¼Œé‚£å°±æ˜¯å“ç‰Œæˆæœ¬ã€‚   </p>
<h2 id="å…­ï¼šæ‹…å½“"><a href="#å…­ï¼šæ‹…å½“" class="headerlink" title="å…­ï¼šæ‹…å½“"></a>å…­ï¼šæ‹…å½“</h2><p>ï¼ˆ1ï¼‰æ£€è®¨ä»»ä½•è¿‡å¤±çš„æ—¶å€™ï¼Œå…ˆä»è‡ªèº«æˆ–è‡ªå·±äººå¼€å§‹åçœã€‚<br>ï¼ˆ2ï¼‰äº‹é¡¹ç»“æŸåï¼Œå…ˆå®¡æŸ¥è¿‡é”™ï¼Œå†åˆ—è¿°åŠŸåŠ³ã€‚<br>ï¼ˆ3ï¼‰è®¤é”™ä»ä¸Šçº§å¼€å§‹ï¼Œè¡¨åŠŸä»ä¸‹çº§å¯åŠ¨.<br>ï¼ˆ4ï¼‰ç€æ‰‹ä¸€ä¸ªè®¡åˆ’ï¼Œå…ˆå°†æƒè´£ç•Œå®šæ¸…æ¥šï¼Œè€Œä¸”åˆ†é…å¾—å½“ã€‚<br>ï¼ˆ5ï¼‰å¯¹â€œæ€•äº‹â€çš„äººæˆ–ç»„ç»‡è¦æŒ‘æ˜äº†è¯´ã€‚<br>ï¼ˆ6ï¼‰å› ä¸ºå‹‡äºæ‰¿æ‹…è´£ä»»æ‰€é€ æˆçš„æŸå¤±ï¼Œå…¬å¸åº”è¯¥æ‰¿æ‹…   </p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://blog.csdn.net/robbyo/article/details/8514334" target="_blank" rel="external">è½¬è‡ªç½‘ç»œ</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux Cè¯­è¨€çš„ä¸€äº›çŸ¥è¯†å­¦ä¹ ]]></title>
      <url>http://shopee.ai/2012/05/19/leetcode/linux-c/</url>
      <content type="html"><![CDATA[<p>Linux Cè¯­è¨€çš„ä¸€äº›çŸ¥è¯†, æ¶‰åŠ è®¡ç®—æœºç¨‹åºï¼Œè¯­è¨€å‘å±•ï¼Œç¼–è¯‘é“¾æ¥ï¼Œæ•°æ®ï¼Œå‡½æ•°åº“ç­‰ç­‰.</p>
<a id="more"></a>
<h2 id="1-ç¨‹åº"><a href="#1-ç¨‹åº" class="headerlink" title="1. ç¨‹åº"></a>1. ç¨‹åº</h2><ul>
<li>ä»€ä¹ˆæ˜¯ç¨‹åºï¼Ÿ</li>
<li>ç¨‹åºçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<blockquote>
<p>æˆ‘ä»¬å¿…é¡»é€šè¿‡æŒ‡ä»¤ï¼ŒæŒ‡æŒ¥è®¡ç®—æœºæ‰§è¡Œæˆ‘ä»¬æƒ³è¦å®ƒåšçš„åŠ¨ä½œã€‚ è€Œä¾ç…§é¡ºåºæ‰§è¡Œçš„ä¸€ç»„æŒ‡ä»¤å°±æ˜¯ç¨‹åºã€‚</p>
</blockquote>
<h3 id="1-1-ç¨‹åºç‰¹å¾"><a href="#1-1-ç¨‹åºç‰¹å¾" class="headerlink" title="1.1 ç¨‹åºç‰¹å¾"></a>1.1 ç¨‹åºç‰¹å¾</h3><p>1, ç¨‹åºæ˜¯ä¸è®¡ç®—æœºæ²Ÿé€šçš„è¯­è¨€<br>2, ç¨‹åºæ˜¯ç”±ç‰¹å®šè¯­æ³•ä¸å…³é”®å­—æ„æˆ<br>3, ç¨‹åºæ˜¯ä¸€è¡Œä¸€è¡Œæ‰§è¡Œçš„<br>4, ç¨‹åºçš„æ‰§è¡Œ, ä»å…¥å£ç‚¹å¼€å§‹, åŸåˆ™ä¸Šæ˜¯ç”±ä¸Šè€Œä¸‹, ä»å·¦è€Œå³æ‰§è¡Œã€‚</p>
<blockquote>
<p>å…¥å£ç‚¹å¯èƒ½æ˜¯ä¸€ä¸ªæ–¹æ³•æˆ–è€…æ˜¯å‡½æ•°ã€‚ã€‚ã€‚</p>
</blockquote>
<h2 id="2-ç¨‹åºè¯­è¨€çš„æ¼”åŒ–"><a href="#2-ç¨‹åºè¯­è¨€çš„æ¼”åŒ–" class="headerlink" title="2. ç¨‹åºè¯­è¨€çš„æ¼”åŒ–"></a>2. ç¨‹åºè¯­è¨€çš„æ¼”åŒ–</h2><p>1, æœºå™¨è¯­è¨€   â€“  è®¡ç®—æœºé€šè¿‡ç”µä¿¡å·æ¨¡å¼ 0/1/0/1â€¦å¼€å…³å¼€å…³â€¦<br>2, æ±‡ç¼–è¯­è¨€<br>3, é«˜çº§è¯­è¨€<br>4, ç¬¬å››ä»£è¯­è¨€<br>5, è‡ªç„¶è¯­è¨€   â€“  æ™ºèƒ½è¯­è¨€ï¼Œå¼€æœºï¼Œå®ƒå°±å¼€æœºã€‚å…³æœºï¼Œå®ƒå°±å…³æœºã€‚</p>
<h3 id="2-1-æœºå™¨è¯­è¨€"><a href="#2-1-æœºå™¨è¯­è¨€" class="headerlink" title="2.1 æœºå™¨è¯­è¨€"></a>2.1 æœºå™¨è¯­è¨€</h3><p> 1, æ˜¯è®¡ç®—æœºå”¯ä¸€èƒ½å¤Ÿæ‰§è¡Œçš„è¯­è¨€ã€‚<br> 2, å…¶ä»–è¯­è¨€å¿…é¡»å…ˆè½¬åŒ–ä¸ºæœºå™¨è¯­è¨€<br> 3, æŒ‡ä»¤æœ‰ 0 ä¸ 1 ç»„æˆ, ç§°ä¸ºæœºå™¨ç ã€‚<br> 4, æŒ‡ä»¤éš¾è®°å¿†ä½†æ‰§è¡Œé€Ÿåº¦æœ€å¿«ã€‚<br> 5, ä¸åŒç±»å‹æœºå™¨æœ‰ä¸åŒçš„æœºå™¨ç , ä¸å…·å¤‡ç§»æ¤æ€§ã€‚</p>
<h3 id="2-2-é«˜çº§è¯­è¨€"><a href="#2-2-é«˜çº§è¯­è¨€" class="headerlink" title="2.2 é«˜çº§è¯­è¨€"></a>2.2 é«˜çº§è¯­è¨€</h3><p> 1, ç¦»æœºå™¨è¶Šæ¥è¶Šè¿œ<br> 2, è¯­æ³•æ¥è¿‘äººç±»çš„è‡ªç„¶è¯­è¨€<br> 3, æ‰§è¡Œçš„å•ä½ä¸æ˜¯æŒ‡ä»¤,  è€Œæ˜¯è¯­å¥, ä¸€è¡Œè¯­å¥ã€‚<br> 4, å¼€å‘æ•ˆç‡è¶Šæ¥è¶Šé«˜ã€‚<br> 5, å¿…é¡»ç¼–è¯‘æˆæœºå™¨ç <br> 6, ç§»æ¤æ€§æ¯”è¾ƒå¥½ã€‚</p>
<h3 id="2-3-ç¬¬å››ä»£è¯­è¨€"><a href="#2-3-ç¬¬å››ä»£è¯­è¨€" class="headerlink" title="2.3 ç¬¬å››ä»£è¯­è¨€"></a>2.3 ç¬¬å››ä»£è¯­è¨€</h3><p> 1, 4GL, ä¹Ÿç§°ä¸ºé¢å‘é—®é¢˜çš„ç¨‹åºè¯­è¨€ã€‚<br> 2, ä»…éœ€å‘Šè¯‰è®¡ç®—æœº â€œåšä»€ä¹ˆâ€, ä¸éœ€è¦æŒ‡æŒ¥è®¡ç®—æœºâ€å¦‚ä½•åšâ€<br> 3, å¤§å¤§æé«˜å¼€å‘æ•ˆç‡<br> 4, å¦‚ SQL è¯­è¨€åŠå„ç§æŸ¥è¯¢è¯­è¨€ã€‚</p>
<h3 id="2-4-è‡ªç„¶è¯­è¨€"><a href="#2-4-è‡ªç„¶è¯­è¨€" class="headerlink" title="2.4 è‡ªç„¶è¯­è¨€"></a>2.4 è‡ªç„¶è¯­è¨€</h3><p> 1, è¿ç”¨äººå·¥æ™ºèƒ½, ä»¥æ¥è¿‘å£è¯­çš„æŒ‡ä»¤æŒ‡æŒ¥è®¡ç®—æœºï¼Œå¦‚è¯­éŸ³ã€‚<br> 2, è¿˜æ²¡æœ‰æˆç†Ÿã€‚</p>
<h2 id="3-ç¼–è¯‘ä¸é“¾æ¥"><a href="#3-ç¼–è¯‘ä¸é“¾æ¥" class="headerlink" title="3. ç¼–è¯‘ä¸é“¾æ¥"></a>3. ç¼–è¯‘ä¸é“¾æ¥</h2><h3 id="3-1-ç¼–è¯‘"><a href="#3-1-ç¼–è¯‘" class="headerlink" title="3.1 ç¼–è¯‘"></a>3.1 ç¼–è¯‘</h3><p> 1, æŠŠæºä»£ç è½¬åŒ–æˆæœºå™¨ç çš„è¿‡ç¨‹ã€‚<br> 2, ä¹‹å‰è¿˜ä¼šè¿›è¡Œå‰æœŸå¤„ç†ã€‚<br> 3, è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œè¯­æ³•æ£€æŸ¥ã€‚<br> 4, ç¼–è¯‘å™¨ :  å®Œæˆç¼–è¯‘åŠ¨ä½œçš„ç¨‹åº</p>
<h3 id="3-2-è¿æ¥"><a href="#3-2-è¿æ¥" class="headerlink" title="3.2 è¿æ¥"></a>3.2 è¿æ¥</h3><p> 1, å°†å¯æ‰§è¡Œæ–‡ä»¶ä¸åŒ…å«æ–‡ä»¶ / ç”¨åˆ°çš„å‡½æ•°åº“å»ºç«‹å…³è”çš„è¿‡ç¨‹ã€‚</p>
<h2 id="4-åŸºæœ¬æ¦‚å¿µ"><a href="#4-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="4. åŸºæœ¬æ¦‚å¿µ"></a>4. åŸºæœ¬æ¦‚å¿µ</h2><h3 id="4-1-æ•°æ®"><a href="#4-1-æ•°æ®" class="headerlink" title="4.1 æ•°æ®"></a>4.1 æ•°æ®</h3><p> æ˜¯è®¡ç®—æœºç¨‹åºå¤„ç†çš„å¯¹è±¡, å¯ä»¥æ˜¯æ•´æ•°, å®æ•°, å­—ç¬¦, ä¹Ÿå¯ä»¥æ˜¯å›¾åƒ, å£°éŸ³ç­‰çš„ç¼–ç è¡¨ç¤ºã€‚</p>
<h3 id="4-2-æ•°æ®ç»“æ„"><a href="#4-2-æ•°æ®ç»“æ„" class="headerlink" title="4.2 æ•°æ®ç»“æ„"></a>4.2 æ•°æ®ç»“æ„</h3><p> æŒ‡çš„æ˜¯æ•°æ®ä¸æ•°æ®é—´å­˜åœ¨ä¸€ç§æˆ–å¤šç§ç‰¹å®šå…³ç³»ã€‚ ä¸æ•°æ®ç»“æ„å¯†åˆ‡ç›¸å…³çš„ä¾¿æ˜¯æ•°æ®çš„ç±»å‹å’Œæ•°æ®çš„å­˜æ”¾ã€‚</p>
<ul>
<li>ç¨‹åºè®¾è®¡</li>
<li>ç¼–å†™ç¨‹åºçš„è¿‡ç¨‹ã€‚</li>
<li>è½¯ä»¶</li>
<li>ç¨‹åº + æ–‡æ¡£ã€‚</li>
</ul>
<h2 id="5-Linux-C-æ¦‚è¿°"><a href="#5-Linux-C-æ¦‚è¿°" class="headerlink" title="5. Linux C æ¦‚è¿°"></a>5. Linux C æ¦‚è¿°</h2><p>Linux å’Œ C å¤©ç”Ÿæœ‰ä¸è§£ä¹‹æº, Linux çš„æ“ä½œç³»ç»Ÿå†…æ ¸å°±ä¸»è¦æ˜¯ç”¨ C å†™çš„, å¦å¤– Linux ä¸‹çš„å¾ˆå¤šè½¯ä»¶ä¹Ÿæ˜¯ç”¨ C å†™çš„ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›è‘—åçš„æœåŠ¡è½¯ä»¶, å¦‚ä½• MySQL, Apache ç­‰ã€‚</p>
<h3 id="5-1-å¼€å‘ç¯å¢ƒçš„æ„æˆ"><a href="#5-1-å¼€å‘ç¯å¢ƒçš„æ„æˆ" class="headerlink" title="5.1 å¼€å‘ç¯å¢ƒçš„æ„æˆ"></a>5.1 å¼€å‘ç¯å¢ƒçš„æ„æˆ</h3><p>1, ç¼–è¾‘å™¨ ï¼š é€‰æ‹© VI<br>2, ç¼–è¯‘å™¨ ï¼š é€‰æ‹© GNU C/C++ ç¼–è¯‘å™¨ gcc (å…è´¹å¼€æºçš„å·¥å…· - linuxå‘å‹ç‰ˆæœ¬å¤šæ•°éƒ½è‡ªåŠ¨å®‰è£…)<br>3, è°ƒè¯•å™¨ ï¼š åº”ç”¨å¹¿æ³›çš„ gdb (JDK å­¦ä¹ çš„ GDB)<br>4, å‡½æ•°åº“ ï¼š glibc<br>5, ç³»ç»Ÿå¤´æ–‡ä»¶ ï¼š glibc_header</p>
<h3 id="5-2-ç¼–è¯‘å™¨-gcc"><a href="#5-2-ç¼–è¯‘å™¨-gcc" class="headerlink" title="5.2 ç¼–è¯‘å™¨ gcc"></a>5.2 ç¼–è¯‘å™¨ gcc</h3><p>gcc (GNU CCompiler) æ˜¯GNUæ¨å‡ºçš„åŠŸèƒ½å¼ºå¤§ , æ€§èƒ½ä¼˜è¶Šçš„å¤šå¹³å°ç¼–è¯‘å™¨, gcc ç¼–è¯‘å™¨èƒ½å°†C , C++è¯­è¨€æºç¨‹åºç¼–è¯‘, è¿æ¥æˆå¯æ‰§è¡Œæ–‡ä»¶, ä»¥ä¸‹æ˜¯ gcc æ”¯æŒç¼–è¯‘çš„ä¸€äº›æºæ–‡ä»¶çš„åç¼€åŠå…¶è§£é‡Šã€‚</p>
<blockquote>
<p>.c ä¸ºåç¼€çš„æ–‡ä»¶, Cè¯­è¨€æºä»£ç æ–‡ä»¶<br>.h ä¸ºåç¼€çš„æ–‡ä»¶, æ˜¯ç¨‹åºæ‰€åŒ…å«çš„å¤´æ–‡ä»¶ã€‚<br>.i ä¸ºåç¼€çš„æ–‡ä»¶, æ˜¯å·²ç»é¢„å¤„ç†è¿‡çš„ C æºä»£ç æ–‡ä»¶;<br>.o ä¸ºåç¼€çš„æ–‡ä»¶, æ˜¯ç¼–è¯‘åçš„ç›®æ ‡æ–‡ä»¶ã€‚<br>.s ä¸ºåç¼€çš„æ–‡ä»¶, æ˜¯æ±‡ç¼–è¯­è¨€æºä»£ç æ–‡ä»¶ã€‚</p>
</blockquote>
<p><strong>gcc -o hello hello.c</strong></p>
<blockquote>
<ul>
<li>ç”¨ gcc æ¥ç¼–è¯‘æˆ‘ä»¬çš„æºç¨‹åº</li>
<li>-o é€‰é¡¹è¦æ±‚ç¼–è¯‘å™¨ç»™æˆ‘ä»¬è¾“å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶åä¸º hello</li>
<li>hello.c æ˜¯æˆ‘ä»¬çš„æºç¨‹åºæ–‡ä»¶ã€‚</li>
<li>-c é€‰é¡¹ è¡¨ç¤ºæˆ‘ä»¬åªè¦æ±‚ç¼–è¯‘å™¨è¾“å‡ºç›®æ ‡ä»£ç , è€Œä¸å¿…è¦è¾“å‡ºå¯æ‰§è¡Œæ–‡ä»¶</li>
<li>-g é€‰é¡¹è¡¨ç¤ºæˆ‘ä»¬è¦æ±‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™æä¾›æˆ‘ä»¬ä»¥åå¯¹ç¨‹åºè¿›è¡Œè°ƒè¯•çš„ä¿¡æ¯ã€‚</li>
<li>æ‰§è¡Œ ./hello å°±å¯ä»¥çœ‹åˆ°ç¨‹åºçš„è¾“å‡ºç»“æ„ã€‚ (åœ¨å½“å‰ç›®å½•ä¸‹å»æ‰¾)</li>
</ul>
</blockquote>
<h3 id="5-3-å‡½æ•°åº“-glibc"><a href="#5-3-å‡½æ•°åº“-glibc" class="headerlink" title="5.3 å‡½æ•°åº“ glibc"></a>5.3 å‡½æ•°åº“ glibc</h3><p>è¦æ„å»ºä¸€ä¸ªå®Œæ•´çš„ C å¼€å‘ç¯å¢ƒ, Glibc æ˜¯å¿…ä¸å¯å°‘çš„, å®ƒæ˜¯ Linux ä¸‹ C çš„ä¸»è¦å‡½æ•°åº“. glibc æœ‰ä¸¤ç§å®‰è£…æ–¹å¼ï¼š</p>
<p> A. å®‰è£…æˆæµ‹è¯•ç”¨çš„å‡½æ•°åº“, åœ¨ç¼–è¯‘ç¨‹åºæ—¶ç”¨ä¸åŒçš„é€‰é¡¹æ¥è¯•ç”¨æ–°çš„å‡½æ•°åº“ã€‚</p>
<p> B. å®‰è£…æˆä¸»è¦çš„ C å‡½æ•°åº“, æ‰€æœ‰æ–°ç¼–è¯‘ç¨‹åºå‡ç”¨çš„å‡½æ•°åº“</p>
<p><strong>glibc å«å‡ ä¸ªé™„åŠ åŒ…</strong> : Linuxthreadsï¼Œ localedate å’Œ cryptï¼Œ ä»–ä»¬çš„æ–‡ä»¶åéšç‰ˆæœ¬çš„ä¸åŒè€Œç±»ä¼¼äºä¸‹åˆ— ï¼š</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">glibc-2.06.tar.gz</span><br><span class="line">glibc-linuxthreads-2.0.6.tar.gz</span><br><span class="line">glibc-localedate-2.0.6.tar.gz</span><br><span class="line">glibc-crypt-2.0.6.tar.gz</span><br></pre></td></tr></table></figure>
<p><strong>glibc æ˜¯æä¾›ç³»ç»Ÿè°ƒç”¨å’ŒåŸºæœ¬å‡½æ•°çš„ï¼£åº“</strong>, æ¯”å¦‚ open, malloc, printf ç­‰ç­‰ã€‚ æ‰€æœ‰åŠ¨æ€è¿æ¥çš„ç¨‹åºéƒ½è¦ç”¨åˆ°å®ƒ.</p>
<blockquote>
<ul>
<li>ç³»ç»Ÿå¤´æ–‡ä»¶ ï¼š glibc_header</li>
<li>ç¼ºå°‘ç³»ç»Ÿå¤´æ–‡ä»¶ï¼Œå¾ˆå¤šç”¨åˆ°ç³»ç»ŸåŠŸèƒ½çš„Cç¨‹åºå°†æ— æ³•ç¼–è¯‘ã€‚</li>
<li>å¦‚æœç”¨æˆ·åœ¨å®‰è£…è¿‡ç¨‹ä¸­å°‘è£…äº†è¿™äº›åŒ…ï¼Œå°±ä¼šæ— æ³•ç¼–è¯‘Cç¨‹åºï¼Œè§£å†³æ–¹æ³•ï¼š</li>
<li>æ–¹æ³•ä¸€ï¼šä¸æ¨èï¼šé‡è£…ä¸€éLinuxç³»ç»Ÿã€‚</li>
<li>æ–¹æ³•äºŒï¼šé€šè¿‡æ‰¾ä¸€äº›RpmåŒ…æ¥è¿…é€Ÿå®‰è£…Linuxçš„Cå¼€å‘ç¯å¢ƒã€‚</li>
</ul>
</blockquote>
<p><strong>Cå¼€å‘ç¯å¢ƒå¯¹åº”çš„rpmåŒ…</strong></p>
<p>ç”±äºgccåŒ…éœ€ä¾èµ– binutilså’ŒcppåŒ…ï¼Œå¦å¤–makeåŒ…ä¹Ÿæ˜¯åœ¨ç¼–è¯‘ä¸­å¸¸ç”¨çš„ï¼Œæ‰€ä»¥ä¸€å…±éœ€è¦8ä¸ªåŒ…æ¥å®Œæˆå®‰è£…ï¼Œå®ƒä»¬æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cpp-2.96-110.i386.rpm</span><br><span class="line">binutils-2.11.93.0.2-11. i386.rpm</span><br><span class="line">Glibc-2.2.5-31. i386.rpm</span><br><span class="line">Glibc-kernheaders-2.4-7.14. i386.rpm</span><br><span class="line">Glibc-common-2.2.5-34</span><br><span class="line">Glibc-devel-2.2.5-34- i386.rpm</span><br><span class="line">Gcc-2.96-110.i386.rpm</span><br><span class="line">Make-3.79.1-8. i386.rpm</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æŸ¥çœ‹glibcçš„ç‰ˆæœ¬ï¼šls /lib/libc-*<br>æŸ¥çœ‹gccç‰ˆæœ¬å·ï¼š gcc â€“version</p>
</blockquote>
<h3 id="5-4-C-ç¨‹åºçš„ç»„æˆ"><a href="#5-4-C-ç¨‹åºçš„ç»„æˆ" class="headerlink" title="5.4 C ç¨‹åºçš„ç»„æˆ"></a>5.4 C ç¨‹åºçš„ç»„æˆ</h3><p>å¯¹äºä¸€ä¸ª C ç¨‹åº, å®‰è£…å®Œæˆåå¯ä»¥åˆ†æˆä¸‰ä¸ªç»„æˆ ï¼š</p>
<ul>
<li>å¯æ‰§è¡Œæ–‡ä»¶</li>
<li>åŒ…å«æ–‡ä»¶</li>
<li>åº“æ–‡ä»¶</li>
</ul>
<p>å¯æ‰§è¡Œæ–‡ä»¶æ˜¯æœ€ç»ˆè¿è¡Œçš„å‘½ä»¤, åŒ…å«æ–‡ä»¶æ˜¯è¯¥ C ç¨‹åº include çš„å®šä¹‰æ–‡ä»¶, åº“æ–‡ä»¶åˆ™æ˜¯è¯¥ C ç¨‹åºè‡ªå®šä¹‰çš„åº“ã€‚</p>
<p>æ¯”å¦‚ç”¨ RPM å®‰è£…çš„ Mysql æ•°æ®åº“ ï¼š</p>
<blockquote>
<ul>
<li>å¯æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨ /usr/bin ä¸‹</li>
<li>åŒ…å«æ–‡ä»¶æ”¾åœ¨  /usr/include/mysql ä¸‹</li>
<li>åº“æ–‡ä»¶åœ¨     /usr/lib/mysql ä¸‹</li>
</ul>
</blockquote>
<p>åªæœ‰ç³»ç»Ÿå¯ä»¥æ‰¾åˆ°ç¨‹åºå¯¹åº”çš„åŒ…å«æ–‡ä»¶å’Œåº“æ–‡ä»¶, ç¨‹åºå¯æ‰§è¡Œæ–‡ä»¶æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚</p>
<h2 id="6-å°ç»“"><a href="#6-å°ç»“" class="headerlink" title="6. å°ç»“"></a>6. å°ç»“</h2><blockquote>
<ol>
<li>å¼€å‘ç¯å¢ƒçš„æ„æˆ</li>
<li>GNU çš„ gcc ç¼–è¯‘å™¨</li>
<li>glibc å‡½æ•°åº“</li>
<li>Linux ä¸‹ C ç¨‹åºå¼€å‘è¿‡ç¨‹</li>
<li>ç¬¬ä¸€ä¸ª C ç¨‹åº</li>
<li>C ç¨‹åºç»“æ„</li>
</ol>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å­¦ç”¨ g++ (åˆæ­¥)]]></title>
      <url>http://shopee.ai/2012/03/22/leetcode/g++/</url>
      <content type="html"><![CDATA[<p>gcc å’Œ g++ éƒ½æ˜¯GNU(ç»„ç»‡)çš„ä¸€ä¸ªç¼–è¯‘å™¨.</p>
<a id="more"></a>
<h2 id="é“¾æ¥åº“"><a href="#é“¾æ¥åº“" class="headerlink" title="é“¾æ¥åº“"></a>é“¾æ¥åº“</h2><p>åŠ¨æ€é“¾æ¥åº“ (é€šå¸¸ä»¥ .so ç»“å°¾) å’Œ é™æ€é“¾æ¥åº“ (é€šå¸¸ä»¥ .a ç»“å°¾)</p>
<blockquote>
<p>ä¸¤è€…çš„å·®åˆ«ä»…åœ¨ç¨‹åºæ‰§è¡Œæ—¶æ‰€éœ€çš„ä»£ç æ˜¯åœ¨è¿è¡Œæ—¶åŠ è½½çš„, è¿˜æ˜¯åœ¨ç¼–è¯‘æ—¶åŠ è½½çš„, é»˜è®¤æƒ…å†µä¸‹, g++ åœ¨é“¾æ¥æ—¶ä¼˜å…ˆä½¿ç”¨åŠ¨æ€é“¾æ¥åº“, åªæœ‰å½“åŠ¨æ€é“¾æ¥åº“ä¸å­˜åœ¨æ—¶æ‰è€ƒè™‘ä½¿ç”¨é™æ€é“¾æ¥åº“.</p>
<p>å¦‚æœéœ€è¦çš„è¯å¯ä»¥åœ¨ç¼–è¯‘æ—¶åŠ ä¸Š -static é€‰é¡¹, å¼ºåˆ¶ä½¿ç”¨é™æ€é“¾æ¥åº“ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">g++ foo.cpp -L /home/xiaowp/lib -static -lfoo -o foo</span><br></pre></td></tr></table></figure>
<h2 id="ä»£ç ä¼˜åŒ–"><a href="#ä»£ç ä¼˜åŒ–" class="headerlink" title="ä»£ç ä¼˜åŒ–"></a>ä»£ç ä¼˜åŒ–</h2><p>ä»£ç ä¼˜åŒ–æŒ‡çš„æ˜¯ç¼–è¯‘å™¨ç”¨è¿‡åˆ†ææºä»£ç , æ‰¾å‡ºå…¶ä¸­å°šæœªè¾¾åˆ°æœ€ä¼˜çš„éƒ¨åˆ†,</p>
<p>ç„¶åå¯¹å…¶é‡æ–°è¿›è¡Œç»„åˆ, ç›®çš„æ˜¯æ”¹å–„ç¨‹åºçš„æ‰§è¡Œæ€§èƒ½.</p>
<p>g++ é€šè¿‡ç¼–è¯‘é€‰é¡¹ -On æ¥æ§åˆ¶ä¼˜åŒ–ä»£ç çš„ç”Ÿæˆ (n ä¸€èˆ¬ 0 ~ 2,3)</p>
<h2 id="å­¦ç”¨-g"><a href="#å­¦ç”¨-g" class="headerlink" title="å­¦ç”¨ g++"></a>å­¦ç”¨ g++</h2><p>GCC (GNC Compiler Collection) æ˜¯ linux ä¸‹æœ€ä¸»è¦çš„ç¼–è¯‘å·¥å…·, GCC ä¸ä»…åŠŸèƒ½å¼ºå¤§, ç»“æ„ä¹Ÿå¼‚å¸¸çµæ´».</p>
<p>g++ æ˜¯ gcc ä¸­çš„ä¸€ä¸ªå·¥å…·, ä¸“é—¨æ¥ç¼–è¯‘ C++ è¯­è¨€çš„ã€‚</p>
<blockquote>
<p>$ g++ hello.cpp -o hello  (hello æ˜¯ç¼–è¯‘æˆçš„å¯æ‰§è¡Œæ–‡ä»¶)<br>$ ./hello  (è¿è¡Œ hello)</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[å¯„å­˜å™¨, å†…å­˜, å­˜å‚¨å™¨, Cache çš„åŒºåˆ«]]></title>
      <url>http://shopee.ai/2012/03/18/devops/linux-computer-memory/</url>
      <content type="html"><![CDATA[<p>è®¡ç®—æœºå­˜å‚¨ä¸­çš„ å¯„å­˜å™¨ å†…å­˜ å­˜å‚¨å™¨ cacheåŒºåˆ«ï¼Œ ä»èŒƒå›´æ¥çœ‹ï¼Œå®ƒä»¬æ‰€æŒ‡çš„èŒƒç•´å°±ä¸ä¸€æ ·ã€‚</p>
<a id="more"></a>
<h2 id="å¯„å­˜å™¨"><a href="#å¯„å­˜å™¨" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h2><p>ä¸­å¤®å¤„ç†å™¨å†…çš„ç»„æˆéƒ¨ä»½ã€‚å®ƒè·ŸCPUæœ‰å…³ã€‚å¯„å­˜å™¨æ˜¯æœ‰é™å­˜è´®å®¹é‡çš„é«˜é€Ÿå­˜è´®éƒ¨ä»¶ï¼Œå®ƒä»¬å¯ç”¨æ¥æš‚å­˜æŒ‡ä»¤ã€æ•°æ®å’Œä½å€ã€‚åœ¨ä¸­å¤®å¤„ç†å™¨çš„æ§åˆ¶éƒ¨ä»¶ä¸­ï¼ŒåŒ…å«çš„å¯„å­˜å™¨æœ‰æŒ‡ä»¤å¯„å­˜å™¨(IR)å’Œç¨‹åºè®¡æ•°å™¨(PC)ã€‚åœ¨ä¸­å¤®å¤„ç†å™¨çš„ç®—æœ¯åŠé€»è¾‘éƒ¨ä»¶ä¸­ï¼ŒåŒ…å«çš„å¯„å­˜å™¨æœ‰ç´¯åŠ å™¨(ACC)ã€‚</p>
<h2 id="å­˜å‚¨å™¨"><a href="#å­˜å‚¨å™¨" class="headerlink" title="å­˜å‚¨å™¨"></a>å­˜å‚¨å™¨</h2><p>å­˜å‚¨å™¨èŒƒå›´æœ€å¤§ï¼Œå®ƒå‡ ä¹æ¶µç›–äº†æ‰€æœ‰å…³äºå­˜å‚¨çš„èŒƒç•´ã€‚ä½ æ‰€è¯´çš„å¯„å­˜å™¨ï¼Œå†…å­˜ï¼Œéƒ½æ˜¯å­˜å‚¨å™¨é‡Œé¢çš„ä¸€ç§ã€‚å‡¡æ˜¯æœ‰å­˜å‚¨èƒ½åŠ›çš„ç¡¬ä»¶ï¼Œéƒ½å¯ä»¥ç§°ä¹‹ä¸ºå­˜å‚¨å™¨ï¼Œè¿™æ˜¯è‡ªç„¶ï¼Œç¡¬ç›˜æ›´åŠ æ˜æ˜¾äº†ï¼Œå®ƒå½’å…¥å¤–å­˜å‚¨å™¨è¡Œåˆ—ï¼Œç”±æ­¤å¯è§â€”â€”ã€‚</p>
<h2 id="å†…å­˜"><a href="#å†…å­˜" class="headerlink" title="å†…å­˜"></a>å†…å­˜</h2><p>æ—¢ä¸“ä¸šåä¸Šçš„å†…å­˜å‚¨å™¨ï¼Œå®ƒä¸æ˜¯ä¸ªä»€ä¹ˆç¥ç§˜çš„ä¸œè¥¿ï¼Œå®ƒä¹Ÿåªæ˜¯å­˜å‚¨å™¨ä¸­çš„æ²§æµ·ä¸€ç²Ÿï¼Œå®ƒåŒ…æ¶µçš„èŒƒå›´ä¹Ÿå¾ˆå¤§ï¼Œä¸€èˆ¬åˆ†ä¸ºåªè¯»å­˜å‚¨å™¨å’Œéšæœºå­˜å‚¨å™¨ï¼Œä»¥åŠæœ€å¼ºæ‚çš„é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ï¼ˆCACHEï¼‰ï¼Œåªè¯»å­˜å‚¨å™¨åº”ç”¨å¹¿æ³›ï¼Œå®ƒé€šå¸¸æ˜¯ä¸€å—åœ¨ç¡¬ä»¶ä¸Šé›†æˆçš„å¯è¯»èŠ¯ç‰‡ï¼Œä½œç”¨æ˜¯è¯†åˆ«ä¸æ§åˆ¶ç¡¬ä»¶ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯åªå¯è¯»å–ï¼Œä¸èƒ½å†™å…¥ã€‚éšæœºå­˜å‚¨å™¨çš„ç‰¹ç‚¹æ˜¯å¯è¯»å¯å†™ï¼Œæ–­ç”µåä¸€åˆ‡æ•°æ®éƒ½æ¶ˆå¤±ï¼Œæˆ‘ä»¬æ‰€è¯´çš„å†…å­˜æ¡å°±æ˜¯æŒ‡å®ƒäº†ã€‚</p>
<h2 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h2><p>åœ¨CPUä¸­é€Ÿåº¦éå¸¸å—ï¼Œè€Œå®¹é‡å´å¾ˆå°çš„ä¸€ç§å­˜å‚¨å™¨ï¼Œå®ƒæ˜¯è®¡ç®—æœºå­˜å‚¨å™¨ä¸­æœ€å¼ºæ‚çš„å­˜å‚¨å™¨ã€‚ç”±äºæŠ€æœ¯é™åˆ¶ï¼Œå®¹é‡å¾ˆéš¾æå‡ï¼Œä¸€èˆ¬éƒ½ä¸è¿‡å…†ã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>è½¬è‡ª : hp_carrot</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Graph Theory è¿‘æœŸå°ç»“]]></title>
      <url>http://shopee.ai/2011/12/29/leetcode/graph_theory_summary/</url>
      <content type="html"><![CDATA[<p>å…³äºå›¾è®ºçš„å­¦ä¹ æ€»ç»“, åœ¨æœ¬åšå¯ä»¥è¯¦ç»†çš„ä½“ç°ï¼Œåšçš„å¤§éƒ¨åˆ†éƒ½æ˜¯éå¸¸ç»å…¸çš„å›¾è®ºç®—æ³•å…¥é—¨é¢˜ã€‚</p>
<a id="more"></a>
<p>æ–­æ–­ç»­ç»­ï¼Œä¹Ÿè¦æ¥è¿‘ä¸€ä¸ªæœˆçš„æ—¶é—´å•¦ï¼æˆ‘ä»Šå¤©ç»ˆäºæŠŠå›¾è®ºçš„å¤§éƒ¨åˆ†ç»å…¸ç®—æ³• å¤ä¹ +å­¦ä¹  å°å®Œæ¯•ã€‚ å› ä¸ºä¸­é—´å­¦æ ¡æ€»ä¼šæœ‰ä¸€äº›æ‚äº‹åœ¨å½±å“æˆ‘çš„è¿›åº¦ï¼Œæ‰€ä»¥æ˜¯å‡ ç»å‘¨æŠ˜ï¼Œæ–­æ–­ç»­ç»­ï¼Œä½†æ˜¯å€¼å¾—åº†å¹¸çš„æ˜¯æˆ‘ä¸€ç›´æ²¡æœ‰é—´æ–­è¿‡ï¼Œè¿™æ–¹é¢çš„å­¦ä¹ ã€‚</p>
<p>æœ¬äººå›¾è®ºæ‰€æ¶‰çŒçš„ç®—æ³•å¦‚ä¸‹ {</p>
<ol>
<li>æ‹“æ‰‘æ’åº  (Topology-h1285 )</li>
<li>æœ€å°ç”Ÿæˆæ ‘ (Kruska-p1287 / Prim-p1287 )</li>
<li>æœ€çŸ­è·¯ ( Dijkstra-p2387 / Bellman_Ford-z3033 / Bellman_Ford-p3259 / SPFA-template / SPFA-é‚»æ¥çŸ©é˜µ-p3259 / SPFA-é‚»æ¥è¡¨-p3259 / Floyd-template / Floyd-p1502 )</li>
<li>äºŒåˆ†å›¾ (Hungary . poj 1274 / poj 2446 / zoj 1654   KM_CA_poj 2195O(n^4)/ KM_O(n^3)_p2195 )</li>
<li>ç½‘ç»œæµ (EK_å…¥é—¨<em>p1273 / Dinic</em>å…¥é—¨_p1273 / æœ€å°è´¹ç”¨æœ€å¤§æµ(SPFA+EK)_p2195)</li>
<li>å¼ºè¿é€šåˆ†é‡ä¸ç¼©ç‚¹(æœ‰å‘å›¾) Korasaju_p2186 / Korasaju and Tarjan_p1236 ã€‚ </li>
<li>å›¾çš„å‰²ç‚¹ä¸æ¡¥(æ— å‘å›¾)  ( Tarjanå‰²ç‚¹å’Œæ¡¥çš„ç¤ºä¾‹ç¨‹åºã€‚ Sample : poj 144 æ±‚å‰²ç‚¹ä¸ªæ•°)</li>
<li>åŒè¿é€šåˆ†é‡(æ— å‘å›¾)  (Tarjanç‚¹åŒè¿é€šç¤ºä¾‹ç¨‹åº  / tarjan_è¾¹åŒè¿é€š-ç¼©ç‚¹p3352ã€‚  Sample : poj 3352 æ±‚åŠ å…¥æœ€å°‘çš„è¾¹ä½¿å…¶å˜æˆè¾¹åŒè¿é€šåˆ†æ”¯)</li>
<li>2-sat(è¿™ä¸ªæˆ‘ç›®å‰åªèƒ½æ±‚åˆ¤å®šæ€§çš„é—®é¢˜) : poj 3207 / poj 3678 / poj 2723</li>
</ol>
<p><strong>Sample:</strong></p>
<p>Sample : poj 2186 æ±‚æœ‰å¤šå°‘é¡¶ç‚¹æ˜¯ç”±ä»»ä½•é¡¶ç‚¹å‡ºå‘éƒ½å¯è¾¾ã€‚<br>Sample : poj 1236 </p>
<ol>
<li>è‡³å°‘è¦é€‰å‡ ä¸ªé¡¶ç‚¹ï¼Œæ‰èƒ½åšåˆ°ä»è¿™äº›é¡¶ç‚¹å‡ºå‘ï¼Œå¯ä»¥åˆ°è¾¾å…¨éƒ¨é¡¶ç‚¹ </li>
<li>è‡³å°‘è¦åŠ å¤šå°‘æ¡è¾¹ï¼Œæ‰èƒ½ä½¿å¾—ä»ä»»ä½•ä¸€ä¸ªé¡¶ç‚¹å‡ºå‘ï¼Œéƒ½èƒ½åˆ°è¾¾å…¨éƒ¨é¡¶ç‚¹</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[è‡´æ•¬å¥‹æ–—çš„è‡ªå·±]]></title>
      <url>http://shopee.ai/2011/11/29/tools/Chicken-soup/</url>
      <content type="html"><![CDATA[<p>è¿™æ˜¯å…³äºä¸€äº›åŠ±å¿—çš„å¥å­ï¼Œ ç°åœ¨çœ‹é‚£æ—¶å€™çš„æˆ‘ï¼ŒçœŸçš„æ˜¯è¶…åŠ±å¿—ï¼Œ è¶…åˆ»è‹¦</p>
<a id="more"></a>
<blockquote>
<p>ä¸‰å†›å¯å¤ºå¸…ä¹Ÿï¼ŒåŒ¹å¤«ä¸å¯å¤ºå¿—ä¹Ÿï¼</p>
<p>å¤©è¡Œå¥ï¼Œå›å­ä»¥è‡ªå¼ºä¸æ¯ï¼ </p>
<p>å®å‰‘é”‹è‡ªç£¨ç ºå‡ºï¼Œæ¢…èŠ±é¦™è‡ªè‹¦å¯’æ¥ï¼</p>
<p>è€å¿ƒå€™å¥½è¿ï¼Œå¥½è¿å¸¸ä¼šæ¥ï¼ </p>
<p>ä¸ç»ä¸€ç•ªå¯’å½»éª¨ï¼Œæ€å¾—æ¢…èŠ±æ‰‘é¼»é¦™ï¼ </p>
<p>æˆäº‹ä¸åœ¨äºåŠ›é‡çš„å¤§å°ï¼Œè€Œåœ¨äºèƒ½åšæŒå¤šä¹…ï¼ </p>
<p>ç»³é”¯æœ¨æ–­ï¼Œæ°´æ»´çŸ³ç©¿ï¼ </p>
<p>èš“æ— çˆªç‰™ä¹‹åˆ©ï¼Œç­‹éª¨ä¹‹å¼ºï¼Œä¸Šé£ŸåŸƒåœŸï¼Œä¸‹é¥®é»„æ³‰ï¼Œç”¨å¿ƒä¸€ä¹Ÿï¼ </p>
<p>ç–¾é£çŸ¥åŠ²è‰ï¼Œçƒˆç«ç‚¼çœŸé‡‘ã€‚</p>
<p>ä¸ç»å¯’éœœè‹¦ï¼Œå®‰èƒ½é¦™è¢­äººï¼Ÿ</p>
<p>é”‹è‡ªç£¨ç ºå‡ºï¼Œç‰ä¹ƒé›•ç¢æˆã€‚</p>
<p>äººè€Œä¸è‹¦ç»ƒï¼Œç„‰èƒ½è‰ºç²¾æ·±ï¼Ÿ</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Shortest Path]]></title>
      <url>http://shopee.ai/2011/10/27/leetcode/shortest-path/</url>
      <content type="html"><![CDATA[<p>shortest path ï¼š dijstra ã€ Bellman ã€ Floyd ã€ SPFA</p>
<a id="more"></a>
<h2 id="1-dijstra"><a href="#1-dijstra" class="headerlink" title="1. dijstra"></a>1. dijstra</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> data[M][M]; <span class="comment">// init INF</span></span><br><span class="line"><span class="keyword">int</span> lowc[M];</span><br><span class="line"><span class="keyword">int</span> vis[M];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">djst</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        vis[i] = <span class="number">0</span>;</span><br><span class="line">        lowc[i] = data[p][i];</span><br><span class="line">    &#125;</span><br><span class="line">    vis[p] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= n<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> minc = INF, c = <span class="number">0</span>, lk;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(vis[j] == <span class="number">0</span> &amp;&amp; lowc[j] &lt; minc) &#123;</span><br><span class="line">                minc = lowc[j];</span><br><span class="line">                c = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">        vis[c] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(vis[j] == <span class="number">0</span> &amp;&amp; data[c][j] + minc &gt; <span class="number">0</span> &amp;&amp; data[c][j] + minc &lt; lowc[j]) &#123;</span><br><span class="line">                lowc[j] = data[c][j] + minc;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; lowc[<span class="number">1</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-Bellman"><a href="#2-Bellman" class="headerlink" title="2. Bellman"></a>2. Bellman</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF ((long long)(1))&lt;&lt;62</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 301</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">struct</span> edge&#123;</span><br><span class="line">   <span class="keyword">int</span> u;</span><br><span class="line">   <span class="keyword">int</span> v;</span><br><span class="line">   <span class="keyword">long</span> <span class="keyword">long</span> w; <span class="comment">// æ³¨æ„</span></span><br><span class="line">&#125;e[N*N];</span><br><span class="line"><span class="keyword">int</span> m, n;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> d[<span class="number">1005</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bellman_ford</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> di)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">     <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        d[i] = INF;</span><br><span class="line">     &#125;</span><br><span class="line">     d[s] = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= n<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(d[e[j].u] != INF &amp;&amp; d[e[j].u]+e[j].w &lt; d[e[j].v])    <span class="comment">// å¯¹è¾¹è¿›è¡Œæ“ä½œ ã€æ¾å¼›</span></span><br><span class="line">                d[e[j].v] = d[e[j].u] + e[j].w;</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">for</span>(j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(d[e[j].u] != INF &amp;&amp; (d[e[j].v] &gt; d[e[j].u]+e[j].w))    <span class="comment">// å¾ˆç†è§£</span></span><br><span class="line">            d[e[j].v] = -INF;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span>(d[di] == INF || d[di] == -INF) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">     <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-Floyd"><a href="#3-Floyd" class="headerlink" title="3. Floyd"></a>3. Floyd</h2><h2 id="4-SPFA"><a href="#4-SPFA" class="headerlink" title="4. SPFA"></a>4. SPFA</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">5501</span>;</span><br><span class="line"><span class="keyword">struct</span> edge &#123;</span><br><span class="line">    <span class="keyword">int</span> to;</span><br><span class="line">    <span class="keyword">int</span> w;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;edge&gt; p[N]; <span class="comment">// vector å®ç°é‚»æ¥è¡¨</span></span><br><span class="line"><span class="keyword">int</span> d[N];</span><br><span class="line"><span class="keyword">bool</span> inque[N];     <span class="comment">// è®°å½•é¡¶ç‚¹æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­ï¼ŒSPFAç®—æ³•å¯ä»¥å…¥é˜Ÿåˆ—å¤šæ¬¡</span></span><br><span class="line"><span class="keyword">int</span> cnt[N];        <span class="comment">// è®°å½•é¡¶ç‚¹å…¥é˜Ÿçš„æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">int</span> n, m, q;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">SPFA</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    <span class="keyword">while</span>(!Q.empty()) Q.pop();</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        d[i] = INF;</span><br><span class="line">    &#125;</span><br><span class="line">    d[s] = <span class="number">0</span>;      <span class="comment">// æºç‚¹çš„è·ç¦»ä¸º 0</span></span><br><span class="line">    <span class="built_in">memset</span>(inque, <span class="number">0</span>, <span class="keyword">sizeof</span>(inque));</span><br><span class="line">    <span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="keyword">sizeof</span>(cnt));</span><br><span class="line">    Q.push(s);</span><br><span class="line">    inque[s] = <span class="literal">true</span>;</span><br><span class="line">    cnt[s]++;      <span class="comment">// æºç‚¹å…¥é˜Ÿåˆ—çš„æ¬¡æ•°å¢åŠ </span></span><br><span class="line">    <span class="keyword">while</span>(!Q.empty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> t = Q.front();</span><br><span class="line">        Q.pop();</span><br><span class="line">        inque[t] = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; p[t].size(); i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> to = p[t][i].to;</span><br><span class="line">            <span class="keyword">if</span>(d[t] &lt; INF &amp;&amp; d[to] &gt; d[t] + p[t][i].w) &#123;</span><br><span class="line">                d[to] = d[t] + p[t][i].w;</span><br><span class="line">                cnt[to]++;</span><br><span class="line">                <span class="keyword">if</span>(cnt[to] &gt;= n) &#123;  <span class="comment">//å½“ä¸€ä¸ªç‚¹å…¥é˜Ÿçš„æ¬¡æ•°&gt;=næ—¶å°±è¯æ˜å‡ºç°äº†è´Ÿç¯</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(!inque[to]) &#123;</span><br><span class="line">                    Q.push(to);</span><br><span class="line">                    inque[to] = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Six Kinds of Sort algorithms]]></title>
      <url>http://shopee.ai/2011/10/27/leetcode/six-sort/</url>
      <content type="html"><![CDATA[<p>input ï¼š 8, 5, 4, 9, 2, 3, 6</p>
<a id="more"></a>
<h2 id="1-heapSort"><a href="#1-heapSort" class="headerlink" title="1. heapSort"></a>1. heapSort</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heapify</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> i, <span class="keyword">int</span> size)</span> </span>&#123; <span class="comment">// å †åŒ–çš„ç»´æŒéœ€è¦ç”¨é€’å½’</span></span><br><span class="line">    <span class="keyword">int</span> ls = <span class="number">2</span>*i, rs = <span class="number">2</span>*i + <span class="number">1</span>; </span><br><span class="line">    <span class="keyword">int</span> large = i;</span><br><span class="line">    <span class="keyword">if</span>(ls &lt;= size &amp;&amp; a[ls] &gt; a[i]) &#123;</span><br><span class="line">        large = ls; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(rs &lt;= size &amp;&amp; a[rs] &gt; a[large]) &#123;</span><br><span class="line">        large = rs; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(large != i) &#123;</span><br><span class="line">        swap(a[i], a[large]);</span><br><span class="line">        heapify(a, large, size);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">buildHeap</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> size)</span> </span>&#123; </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = size/<span class="number">2</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        heapify(a, i, size);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">    buildHeap(a, size);</span><br><span class="line">    <span class="keyword">int</span> len = size;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = len; i &gt;= <span class="number">2</span>; i--) &#123;</span><br><span class="line">        swap(a[i], a[<span class="number">1</span>]);</span><br><span class="line">        len--;</span><br><span class="line">        heapify(a, <span class="number">1</span>, len); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-quickSort"><a href="#2-quickSort" class="headerlink" title="2. quickSort"></a>2. quickSort</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(left &lt; right) &#123; <span class="comment">// exit. good idea!</span></span><br><span class="line">        <span class="keyword">int</span> l = left, r = right, x = a[l];</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; a[r] &gt;= x) r--;</span><br><span class="line">            <span class="keyword">while</span>(l &lt; r &amp;&amp; a[l] &lt;= x) l++;</span><br><span class="line">            <span class="keyword">if</span>(l &gt;= r) <span class="keyword">break</span>;</span><br><span class="line">            swap(a[r], a[l]);</span><br><span class="line">        &#125;</span><br><span class="line">        swap(a[left], a[l]);</span><br><span class="line">        quickSort(a, left, l<span class="number">-1</span>);</span><br><span class="line">        quickSort(a, l+<span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-mergeSort"><a href="#3-mergeSort" class="headerlink" title="3. mergeSort"></a>3. mergeSort</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123; <span class="comment">//  8, 5, 4, 9, 2, 3, 6</span></span><br><span class="line">    <span class="keyword">if</span>(l &gt;= r) <span class="keyword">return</span>;   <span class="comment">// exit.</span></span><br><span class="line">    <span class="keyword">int</span> mid = (l+r) / <span class="number">2</span>; <span class="comment">// overflow  &lt;-&gt;  l + (r-l)/2</span></span><br><span class="line">    mergeSort(a, l, mid);</span><br><span class="line">    mergeSort(a, mid+<span class="number">1</span>, r);  </span><br><span class="line">    <span class="keyword">int</span> *arr = <span class="keyword">new</span> <span class="keyword">int</span>[r-l+<span class="number">1</span>];  </span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i = l, j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= mid &amp;&amp; j &lt;= r) &#123;  </span><br><span class="line">        <span class="keyword">if</span>(a[i] &lt;= a[j]) &#123;</span><br><span class="line">            arr[k++] = a[i++]; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            arr[k++] = a[j++]; <span class="comment">// ans += (mid-i+1);  </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= mid) arr[k++] = a[i++];</span><br><span class="line">    <span class="keyword">while</span>(j &lt;= r) arr[k++] = a[j++];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        a[i] = arr[i-l];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span> []arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-insertSort"><a href="#4-insertSort" class="headerlink" title="4. insertSort"></a>4. insertSort</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> j;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;<span class="comment">// æ–°æŠ“çš„æ¯å¼ æ‰‘å…‹ç‰Œ  </span></span><br><span class="line">        <span class="keyword">int</span> temp = a[i];</span><br><span class="line">        <span class="keyword">for</span>(j = i<span class="number">-1</span>; a[j] &gt; temp &amp;&amp; j &gt;= <span class="number">0</span>; j--) &#123;  </span><br><span class="line">            a[j+<span class="number">1</span>] = a[j];</span><br><span class="line">        &#125;</span><br><span class="line">        a[j+<span class="number">1</span>] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-bubbleSort"><a href="#5-bubbleSort" class="headerlink" title="5. bubbleSort"></a>5. bubbleSort</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; len-i; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[j] &gt; a[j+<span class="number">1</span>]) swap(a[j], a[j+<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-selectSort"><a href="#6-selectSort" class="headerlink" title="6. selectSort"></a>6. selectSort</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectSort</span><span class="params">(<span class="keyword">int</span> a[], <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j, k;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; len<span class="number">-1</span>; i++) &#123;  </span><br><span class="line">        k = i;  </span><br><span class="line">        <span class="keyword">for</span>(j = i+<span class="number">1</span>; j &lt; len; j++) &#123;  </span><br><span class="line">            <span class="keyword">if</span>(a[j] &lt; a[k]) k = j;  </span><br><span class="line">        &#125;  </span><br><span class="line">        swap(a[i], a[k]);  <span class="comment">// å°†ç¬¬iä½å°çš„æ•°æ”¾å…¥iä½ç½®  </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Minimum Spanning Tree]]></title>
      <url>http://shopee.ai/2011/10/27/leetcode/mst/</url>
      <content type="html"><![CDATA[<p>data structure - minimal spanning tree</p>
<a id="more"></a>
<h2 id="1-prim"><a href="#1-prim" class="headerlink" title="1. prim"></a>1. prim</h2><blockquote>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=1233" target="_blank" rel="external">http://acm.hdu.edu.cn/showproblem.php?pid=1233</a></p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x7fffffff</span>; <span class="comment">// max int value</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">101</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> <span class="built_in">map</span>[N][N];</span><br><span class="line"><span class="keyword">int</span> dis[N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">prim</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0</span>, <span class="keyword">sizeof</span>(dis));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">map</span>[<span class="number">1</span>][i] != <span class="number">-1</span>) &#123;</span><br><span class="line">            dis[i] = <span class="built_in">map</span>[<span class="number">1</span>][i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> dis[i] = INF;</span><br><span class="line">    &#125;</span><br><span class="line">    vis[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n<span class="number">-1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> minv = INF, c = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!vis[j] &amp;&amp; dis[j] &lt; minv) &#123;</span><br><span class="line">                minv = dis[j];</span><br><span class="line">                c = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        vis[c] = <span class="literal">true</span>;</span><br><span class="line">        sum += minv;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!vis[j] &amp;&amp; <span class="built_in">map</span>[c][j] != <span class="number">-1</span> &amp;&amp;  <span class="built_in">map</span>[c][j] &lt; dis[j]) &#123;</span><br><span class="line">                dis[j] = <span class="built_in">map</span>[c][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span> == <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) &amp;&amp; n != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(<span class="built_in">map</span>, <span class="number">255</span>, <span class="keyword">sizeof</span>(<span class="built_in">map</span>));</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        m = (n * (n<span class="number">-1</span>)) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">            <span class="built_in">map</span>[a][b] = <span class="built_in">map</span>[b][a] = c;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, prim(n));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-kruskal"><a href="#2-kruskal" class="headerlink" title="2. kruskal"></a>2. kruskal</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> pre[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">struct</span> Edge &#123;</span><br><span class="line">    <span class="keyword">int</span> u, v;</span><br><span class="line">    <span class="keyword">int</span> w;</span><br><span class="line">&#125;e[N];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Edge a, <span class="keyword">const</span> Edge b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.w &lt; b.w;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_set</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">        pre[i] = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find_set</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(pre[a] == a) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">return</span> pre[a] = find_set(pre[a]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kruskal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    sort(e, e + m, cmp);</span><br><span class="line">    make_set(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, fu, fv, cnt_e; i &lt; m; i++) &#123;</span><br><span class="line">        fu = find_set(e[i].u);</span><br><span class="line">        fv = find_set(e[i].v);</span><br><span class="line">        <span class="keyword">if</span> (fu != fv) &#123;</span><br><span class="line">            sum += e[i].w;</span><br><span class="line">            cnt_e++;</span><br><span class="line">            <span class="keyword">if</span> (cnt_e == n<span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">            pre[fv] = fu;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; sum &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æœç´¢çš„ç»å…¸ POJ 2386 Lake Counting]]></title>
      <url>http://shopee.ai/2010/09/27/leetcode/dfs-POJ-2386/</url>
      <content type="html"><![CDATA[<p>ç»å…¸çš„æœç´¢ï¼Œå¯»æ‰¾æ°´æ³¡ poj 2386 <a href="http://poj.org/problem?id=2386" target="_blank" rel="external">Lake Counting</a></p>
<a id="more"></a>
<h2 id="Lake-Counting"><a href="#Lake-Counting" class="headerlink" title="Lake Counting"></a><a href="http://poj.org/problem?id=2386" target="_blank" rel="external">Lake Counting</a></h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">101</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> asd[<span class="number">202</span>];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> c;</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">map</span>[MAX][MAX];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">digui</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (a &gt;= <span class="number">0</span> &amp; &amp; a &lt; n &amp; &amp; b &gt;= <span class="number">0</span> &amp; &amp; b &lt; m &amp; &amp; <span class="built_in">map</span>[a][b] == <span class="number">-2</span>) &#123;</span><br><span class="line">        <span class="built_in">map</span>[a][b] = k; <span class="comment">// è¿™æ˜¯å¾ˆé‡è¦çš„æ ‡è®°</span></span><br><span class="line">        digui(a + <span class="number">1</span>, b, k);</span><br><span class="line">        digui(a, b + <span class="number">1</span>, k);</span><br><span class="line">        digui(a - <span class="number">1</span>, b, k);</span><br><span class="line">        digui(a, b - <span class="number">1</span>, k);</span><br><span class="line">        digui(a + <span class="number">1</span>, b + <span class="number">1</span>, k);</span><br><span class="line">        digui(a + <span class="number">1</span>, b - <span class="number">1</span>, k);</span><br><span class="line">        digui(a - <span class="number">1</span>, b + <span class="number">1</span>, k);</span><br><span class="line">        digui(a - <span class="number">1</span>, b - <span class="number">1</span>, k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; m; j++)&#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; c;</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="string">'W'</span>) <span class="built_in">map</span>[i][j] = <span class="number">-2</span>; <span class="comment">// è¿™çš„æ ‡è®°è¦æ…é‡ï¼Œæœ€å¥½ç”¨è´Ÿæ•°ï¼Œä¸é¿å…å’ŒKé‡å¤</span></span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">map</span>[i][j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">map</span>[i][j] == <span class="number">-2</span>) &#123;</span><br><span class="line">                ans++;</span><br><span class="line">                digui(i, j, ans);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ ¼å¼åŒ–è¾“å‡º printf ä¸ è¾“å‡ºæµ cout]]></title>
      <url>http://shopee.ai/2010/09/25/leetcode/cout_vs_printf/</url>
      <content type="html"><![CDATA[<p>printf æ˜¯ æ ¼å¼åŒ–è¾“å‡º ï¼Œ cout æ˜¯è¾“å‡ºæµ</p>
<p>ä»Šå¤©æ— æ„ä¸­å‘ç° cout å’Œ printf æ˜¯æœ‰ç‚¹åŒºåˆ«çš„ï¼Œä¸€ä¸ªæ˜¯è¾“å‡ºè¯­å¥ï¼Œä¸€ä¸ªæ˜¯è¾“å‡ºå‡½æ•°</p>
<a id="more"></a>
<h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> a=<span class="number">0</span>; a&lt;<span class="number">24</span>; a++) &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"++++++++++++\n"</span>);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"============\n"</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"############\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"@@@@@@@@@@@\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">++++++++++++</span><br><span class="line"></span><br><span class="line">++++++++++++</span><br><span class="line"></span><br><span class="line">############</span><br><span class="line"></span><br><span class="line">############</span><br><span class="line"></span><br><span class="line">@@@@@@@@@@@</span><br><span class="line"></span><br><span class="line">============</span><br><span class="line"></span><br><span class="line">============</span><br></pre></td></tr></table></figure>
<h2 id="åŸå› åˆ†æ"><a href="#åŸå› åˆ†æ" class="headerlink" title="åŸå› åˆ†æ"></a>åŸå› åˆ†æ</h2><p>cout å…ˆæ˜¯æŠŠè¾“å‡ºç»“æœå­˜åˆ°ç¼“å­˜åŒºï¼Œç„¶åä¸€æ¬¡æ€§è¾“å‡ºï¼Œå…¶å® cout è¾“å‡ºçš„æ—¶å€™ä¹Ÿæ˜¯è°ƒç”¨äº†printfå‡½æ•°ï¼›<br>pintfå‡½æ•°æ˜¯æ¯æ¬¡è¾“å‡ºç»“æœ; è¿™å°±æ˜¯ä¸ºäº†åœ¨ TIMEç¨‹åºä¸­ coutè¿è¡Œçš„æ—¶é—´è¦æ¯”printfå‡½æ•°å¿«çš„åŸå› ï¼›</p>
<blockquote>
<p>æ³¨æ„ï¼š cout&lt;&lt;â€==\nâ€; å’Œ cout&lt;&lt;â€==â€&lt;&lt;endl; ä¹Ÿæœ‰ä¸åŒï¼Œ\nåªæ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œendlä¼šå°†ç¼“å­˜åŒºçš„æ•°æ®å…¨éƒ¨è¾“å‡ºå¹¶æ¸…é›¶ï¼›åœ¨TIMEç¨‹åºä¸­ï¼Œå¦‚æœé‡‡ç”¨cout&lt;&lt;â€============â€&lt;&lt;endl;ç»“æ„åè€Œä¼šæ¯”printfæ…¢ï¼Œå› ä¸ºå¤šäº†ä¸€é“è°ƒç”¨ç¼“å­˜æ‰‹ç»­</p>
</blockquote>
<h2 id="å½¢è±¡æ¯”å–»"><a href="#å½¢è±¡æ¯”å–»" class="headerlink" title="å½¢è±¡æ¯”å–»"></a>å½¢è±¡æ¯”å–»</h2><p>ä¸‹é¢æ‰“ä¸ªå¾ˆå½¢è±¡çš„æ¯”å–»ï¼Œå¤§å®¶éƒ½ä¼šæ˜ç™½, æ¯”å¦‚æœ‰100ä¸ªé¸¡è›‹ï¼Œéœ€è¦ä»Aæ‹¿åˆ°Bç‚¹ï¼Œç›¸å½“äºç¨‹åºä¸­çš„è¾“å‡º:</p>
<blockquote>
<ul>
<li>printfæŠŠé¸¡è›‹ä¸€æ¬¡ä¸€ä¸ªç”¨æ‰‹æ‹¿åˆ°Bç‚¹</li>
<li>cout&lt;&lt;â€  \nâ€ å…ˆæŠŠé¸¡è›‹å…¨éƒ¨æ”¾åˆ°ç¯®å­ï¼Œç„¶åä¸€æ¬¡æ€§æ‹¿è¿‡å»å–å‡º</li>
<li>cout&lt;&lt;â€ â€œ&lt;&lt;endl å…ˆæŠŠé¸¡è›‹æ”¾åˆ°ç¯®å­ï¼Œç„¶åä¸€æ¬¡ä¸€ä¸ªæ‹¿è¿‡å»å†å–å‡º</li>
</ul>
</blockquote>
<p>å°¤å…¶å¯è§å“ªä¸ªå¿«é‚£ä¸ªæ…¢æ˜¾è€Œæ˜“è§</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ ¼å¼åŒ–è¾“å…¥ scanf ä¸ è¾“å…¥æµ cin]]></title>
      <url>http://shopee.ai/2010/09/24/leetcode/cin_vs_scanf/</url>
      <content type="html"><![CDATA[<p>scanf æ˜¯æ ¼å¼åŒ–è¾“å…¥ï¼Œprintfæ˜¯æ ¼å¼åŒ–è¾“å‡ºã€‚</p>
<p>cinæ˜¯è¾“å…¥æµï¼Œcoutæ˜¯è¾“å‡ºæµã€‚æ•ˆç‡ç¨ä½ï¼Œä½†ä¹¦å†™ç®€ä¾¿ã€‚</p>
<a id="more"></a>
<h2 id="æ ¼å¼åŒ–è¾“å‡º-ä¸-æµè¾“å‡º"><a href="#æ ¼å¼åŒ–è¾“å‡º-ä¸-æµè¾“å‡º" class="headerlink" title="æ ¼å¼åŒ–è¾“å‡º ä¸ æµè¾“å‡º"></a>æ ¼å¼åŒ–è¾“å‡º ä¸ æµè¾“å‡º</h2><ul>
<li>æ ¼å¼åŒ–è¾“å‡ºæ•ˆç‡æ¯”è¾ƒé«˜ï¼Œä½†æ˜¯å†™ä»£ç éº»çƒ¦ã€‚</li>
<li>æµè¾“å‡ºæ“ä½œæ•ˆç‡ç¨ä½ï¼Œä½†ä¹¦å†™ç®€ä¾¿ã€‚</li>
</ul>
<blockquote>
<p>coutä¹‹æ‰€ä»¥æ•ˆç‡ä½ï¼Œæ˜¯å…ˆæŠŠè¦è¾“å‡ºçš„ä¸œè¥¿å­˜å…¥ç¼“å†²åŒºï¼Œå†è¾“å‡ºï¼Œå¯¼è‡´æ•ˆç‡é™ä½ã€‚</p>
</blockquote>
<p><strong>ç¼“å†²åŒºæ¯”è¾ƒæŠ½è±¡ï¼Œä¸¾ä¸ªä¾‹å­å§ï¼š</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">'a'</span>;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; i;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">'b'</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿è¡Œç»“æœä»€ä¹ˆéƒ½æ²¡çœ‹åˆ°è¾“å‡ºï¼Œè¾“å…¥ä¸€ä¸ªæ•´å‹æ¯”å¦‚3å†æŒ‰å›è½¦åabåŒæ—¶æ˜¾ç¤ºå‡ºæ¥äº†ã€‚<br>ä½†æ˜¯è¿™æ ·çš„æƒ…å†µå¹¶ä¸æ˜¯ç»å¸¸å‘ç”Ÿï¼Œæ˜¯åœ¨ä¸€äº›æ¯”è¾ƒå¤§å‹çš„å·¥ç¨‹ä¸­å¶å°”å‡ºç°ï¼ŒåŸå› æ˜¯å­—ç¬¦aå…ˆåˆ°äº†ç¼“å†²åŒºï¼Œä½†æ˜¯æ²¡è¾“å‡ºï¼Œç­‰è¾“å…¥äº†iï¼Œbè¿›å…¥ç¼“å†²åŒºåå†ä¸€å¹¶è¾“å‡ºçš„ã€‚æµè¾“å…¥ä¹Ÿæ˜¯å·®ä¸å¤šçš„ã€‚</p>
</blockquote>
<p><strong>C++ ä¸­ iostream.h ä¸ stdio.h</strong></p>
<blockquote>
<p>iostream.h å’Œ stdio.h æ˜¯ C++ çš„ä¸¤ä¸ªå¤´æ–‡ä»¶ï¼Œé‡Œé¢æ˜¯å¯¹äºä¸€äº›ç±»ï¼Œæ“ä½œç¬¦ï¼Œå‡½æ•°çš„å®šä¹‰ï¼Œå¤´æ–‡ä»¶æœ¬èº«æ²¡æœ‰å¥½åä¹‹åˆ†å§~~</p>
<p>åªæ˜¯å‘å±•åˆ°C++ï¼Œéƒ½æ¯”è¾ƒæå€¡ç”¨iostream.hç½¢äº†ï¼Œå› ä¸ºè¿™æ ·å†™ä»£ç ç®€å•ã€‚</p>
</blockquote>
]]></content>
    </entry>
    
  
  
</search>
