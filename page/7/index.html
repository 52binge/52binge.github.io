<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Everyone should not forget his dream">
<meta property="og:type" content="website">
<meta property="og:title" content="Home">
<meta property="og:url" content="http://iequa.com/page/7/index.html">
<meta property="og:site_name" content="Home">
<meta property="og:description" content="Everyone should not forget his dream">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Home">
<meta name="twitter:description" content="Everyone should not forget his dream">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <!-- blair add baidu tongji start... @2017.10.03 -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8864dc75a81a27b7e44c00138af95d66";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<!-- blair add baidu tongji end ! @2017.10.03 -->

<header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/chatbot">Bot</a>
        
          <a class="main-nav-link" href="/tensorflow">TF</a>
        
          <a class="main-nav-link" href="/deeplearning">Deep Learning</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://iequa.com"></form>
        </div>
      </nav>
    </div>
  </div>
</header>

    <br>
    <section id="main" class="outer">
      <article id="post-English/ef-l4u3-The-past" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/05/31/English/ef-l4u3-The-past/"><strong>EF 4 The Past</strong></a>
      <small class=article-date-index>&nbsp; 2017-05-31</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/05/31/English/ef-l4u3-The-past/" class="article-date">
  <time datetime="2017-05-30T23:00:16.000Z" itemprop="datePublished">2017-05-31</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/05/31/English/ef-l4u3-The-past/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 550px;
        margin-left: 120px !important;
}
audio {
        display: block !important;
        width: 550px;
        margin-left: 120px !important;
}

</style>

<h2 id="1-Asking-about-someone’s-day"><a href="#1-Asking-about-someone’s-day" class="headerlink" title="1. Asking about someone’s day"></a>1. Asking about someone’s day</h2><table>
<thead>
<tr>
<th>desc</th>
</tr>
</thead>
<tbody>
<tr>
<td>I had a great day. I got up. I went for a run</td>
<td></td>
</tr>
<tr>
<td>I did the dishes. I ironed my clothes</td>
<td></td>
</tr>
<tr>
<td>Yesterday, What a bad day. I had a job interview.</td>
<td></td>
</tr>
<tr>
<td>I washed my clothes. I cleaned my apartment.</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>iron[‘aɪən] n. 铁器;熨斗;脚镣 adj. 铁制的;坚强的;顽强的; vt. 熨烫;用铁铸成 vi. 熨衣;</p>
<p>dish [dɪʃ] 盘;餐具<br>eat - ate、drink - drank、let - let </p>
</blockquote>
<h2 id="1-1-dialog-about-todd"><a href="#1-1-dialog-about-todd" class="headerlink" title="1.1 dialog about todd"></a>1.1 dialog about todd</h2><table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>JENNY: Todd, it’s good to see you again. How are you doing?</td>
<td></td>
</tr>
<tr>
<td>TODD: Fine, Jenny! I just got back from Tokyo two days ago.</td>
<td></td>
</tr>
<tr>
<td>JENNY: Business trip?</td>
<td></td>
</tr>
<tr>
<td>TODD: Yeah.</td>
<td></td>
</tr>
<tr>
<td>JENNY: How was it?</td>
<td></td>
</tr>
<tr>
<td>TODD: It was good, but Tokyo’s so busy!  and I was in Kyoto last week.</td>
<td></td>
</tr>
<tr>
<td>JENNY: How was that?</td>
<td></td>
</tr>
<tr>
<td>TODD: It was incredible! So how are you?</td>
<td></td>
</tr>
<tr>
<td>JENNY: I’m good. I was in Chicago the day before yesterday. I had  dinner with Mark and Paula.</td>
<td></td>
</tr>
<tr>
<td>TODD: How are they doing?</td>
<td></td>
</tr>
<tr>
<td>JENNY: They’re fine. Oh, you know they had a baby, right?</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>Kyoto [kiˈoto, ˈkjo-] 京都</p>
</blockquote>
<h3 id="1-2-description-questions"><a href="#1-2-description-questions" class="headerlink" title="1.2 description questions"></a>1.2 description questions</h3><ul>
<li>What was it like?</li>
<li>What was the wedding like?</li>
<li>What did he look like?</li>
</ul>
<ul>
<li>How did you like Beijing?</li>
<li>How was your vacation?</li>
</ul>
<ul>
<li>Did you go to Paris?</li>
<li>We did not meet John yesterday.</li>
<li>Frank wasn’t happy in Los Angeles.</li>
</ul>
<h2 id="2-Talking-about-your-weekend"><a href="#2-Talking-about-your-weekend" class="headerlink" title="2. Talking about your weekend"></a>2. Talking about your weekend</h2><ul>
<li>bring - brought</li>
<li>leave - left</li>
<li>sell - sold  </li>
<li>rise - rose</li>
<li>shut - shut</li>
</ul>
<p><img src="/images/english/ef-l4u3l2.png" alt=""></p>
<audio src="/voices/ef/l4u3-talking-about-your-weekend.m4a" controls="controls"><br>Your browser does not support the audio tag.<br></audio>

<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>[LEO] In the afternoon, I went to Pete’s. We had lunch and watched a match.</td>
<td></td>
</tr>
<tr>
<td>[LEO] All right, man, I’m off.</td>
<td></td>
</tr>
<tr>
<td>[PETER] Yeah. Later. dude.</td>
<td></td>
</tr>
<tr>
<td>[LEO] Hey, are you going to throw that away?</td>
<td></td>
</tr>
<tr>
<td>[PETER] That one ?</td>
<td></td>
</tr>
<tr>
<td>[LEO] The coffee table</td>
<td></td>
</tr>
<tr>
<td>[PETER] Yup !</td>
<td></td>
</tr>
<tr>
<td>[LEO] Can I have it ?</td>
<td></td>
</tr>
<tr>
<td>[PETER] You take it.</td>
<td></td>
</tr>
<tr>
<td>[LEO] It would be great. I think it would suit my apartment perfectly</td>
<td></td>
</tr>
<tr>
<td>[PETER] take it.</td>
<td></td>
</tr>
<tr>
<td>[LEO] Great ! Thanks a lot.</td>
<td></td>
</tr>
<tr>
<td>[PETER] later</td>
<td></td>
</tr>
<tr>
<td>[LEO] Peter gave me a table.</td>
<td></td>
</tr>
<tr>
<td>[EMMA] At 3, I started off for a job interview. My shoe broke.</td>
<td></td>
</tr>
<tr>
<td>[LEO] I got to the station at 3:30.</td>
<td></td>
</tr>
<tr>
<td>[EMMA] I got to the station at 3:30.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-1-In-the-past"><a href="#2-1-In-the-past" class="headerlink" title="2.1 In the past"></a>2.1 In the past</h3><ul>
<li>I read a good novel last week.</li>
<li>He cooked dinner.</li>
<li>We drove to Las Vegas.</li>
<li>She brought a gift.</li>
<li>I ate some spaghetti. [spəˈɡɛti] </li>
<li>I went jogging.</li>
<li>brought a gift</li>
</ul>
<h3 id="2-2-General-questions"><a href="#2-2-General-questions" class="headerlink" title="2.2 General questions"></a>2.2 General questions</h3><ul>
<li>How was your weekend?</li>
<li>How is your mom feeling?     </li>
</ul>
<ul>
<li>A: Hey, there was a great movie on last night.</li>
<li>B: Really? What was it? </li>
</ul>
<h3 id="2-3-Changing-a-topic"><a href="#2-3-Changing-a-topic" class="headerlink" title="2.3 Changing a topic"></a>2.3 Changing a topic</h3><table>
<thead>
<tr>
<th>By the way</th>
</tr>
</thead>
<tbody>
<tr>
<td>A: By the way, I saw Joe last night. He looked good.</td>
<td></td>
</tr>
<tr>
<td>B: Really? I’m so glad!</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>That reminds me</th>
</tr>
</thead>
<tbody>
<tr>
<td>A: There was a great baseball game on TV last night.</td>
<td></td>
</tr>
<tr>
<td>B: Oh, that reminds me. I have two tickets to tonight’s game. Do you want to go?</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Anyway</th>
</tr>
</thead>
<tbody>
<tr>
<td>A: That restaurant wasn’t very good.</td>
<td></td>
</tr>
<tr>
<td>B: No, it wasn’t! The meat tasted bad, and the salad wasn’t fresh. And the waiter was awful! His clothes were dirty!</td>
<td></td>
</tr>
<tr>
<td>A: Anyway, we’re not going there again. So, how’s Jane</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Dialog2</th>
</tr>
</thead>
<tbody>
<tr>
<td>JERRY: Jessica, how was your weekend ?</td>
<td></td>
</tr>
<tr>
<td>JESSICA: Oh, hi, Jerry! The weekend was great! On Friday night, Jim and I flew down to Acapulco. 阿卡普尔科</td>
<td></td>
</tr>
<tr>
<td>JERRY: You went to Mexico for the weekend?</td>
<td></td>
</tr>
<tr>
<td>JESSICA: Yeah. It’s only a short flight from here. The beaches were fantastic and the food, well, it was amazing – fresh fish and delicious fruit every day!</td>
<td></td>
</tr>
<tr>
<td>JERRY: Wow! It does sound amazing.</td>
<td></td>
</tr>
<tr>
<td>JESSICA: Yeah, and it wasn’t  expensive. The hotel was pretty cheap. Anyway  , it was a lot of fun – and relaxing, too. So, how was your weekend?</td>
<td></td>
</tr>
<tr>
<td>JERRY: It was OK. On Saturday night, Kerstin and I went to a party at a friend’s house.</td>
<td></td>
</tr>
<tr>
<td>JESSICA: Oh, that reminds me  . Jim and I are having people over next weekend on, uh, Sunday afternoon. Of course, we want you and Kerstin to come.</td>
<td></td>
</tr>
<tr>
<td>JERRY: Thanks! I really want to meet Jim.</td>
<td></td>
</tr>
<tr>
<td>JESSICA: And, by the way  , we have a meeting at 9 o’clock with Harry and his team.</td>
<td></td>
</tr>
<tr>
<td>JERRY: Really?</td>
<td></td>
</tr>
<tr>
<td>JESSICA: Yeah, and it’s 8:55 now.</td>
<td></td>
</tr>
<tr>
<td>JERRY: Oh. Well, see you at the meeting.</td>
<td></td>
</tr>
<tr>
<td>JESSICA: Yeah!</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="3-Telling-a-story"><a href="#3-Telling-a-story" class="headerlink" title="3. Telling a story"></a>3. Telling a story</h2><ul>
<li>crime [kraɪm]</li>
<li>economy [ɪˈkɑ:nəmi]</li>
<li>security guard  [siˈkjuəriti ɡɑ:d] </li>
<li>stole</li>
<li>robbery</li>
<li>thieves n.  [θi:vz] </li>
<li>scary</li>
<li>Corporation  [ˌkɔ:rpəˈreɪʃn] </li>
</ul>
<p><img src="/images/english/ef-l4u3l3.png" alt=""></p>
<audio src="/voices/ef/l4u3-telling-a-story.m4a" controls="controls"><br>Your browser does not support the audio tag.<br></audio>

<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>[SALLY] Hey, Harry. Did you see the story about Apex Corporation?</td>
<td></td>
</tr>
<tr>
<td>[HARRY] No.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] There was a robbery there last Friday night.</td>
<td></td>
</tr>
<tr>
<td>[HARRY] Really?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Yeah. One of the thieves came in through a window, then he opened the door for the others.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] They stole all the computers in the office, and some money. The staff arrived the next day to find everything gone.</td>
<td></td>
</tr>
<tr>
<td>[HARRY] That’s a bit scary. Apex Corporation is just three blocks from us.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Yeah. There’s too much crime in this neighborhood.</td>
<td></td>
</tr>
<tr>
<td>[HARRY] Oh, it’s the economy. No one has any money right now.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Hey. I heard that Todd asked Joan two months ago about hiring a security guard, but Joan said no. A guard was too expensive.</td>
<td></td>
</tr>
<tr>
<td>[HARRY] Let me guess: We’re hiring a guard now.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Yep. She starts tomorrow.</td>
<td></td>
</tr>
<tr>
<td>[HARRY] She? A female guard?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Uh-huh.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="3-1-crime-story"><a href="#3-1-crime-story" class="headerlink" title="3.1 crime story"></a>3.1 crime story</h3><ul>
<li>break into</li>
<li>murder  [ˈmɜ:rdə(r)]</li>
<li>crime</li>
<li>police</li>
<li>thief [θif]  n. 小偷</li>
<li>theft [θɛft] n. 偷盗</li>
<li>arrest [əˈrɛst] </li>
<li>steal</li>
</ul>
<p>Jenny,</p>
<p>I’m visiting a friend in New Orleans. It’s a beautiful city. I love the buildings and the people. I’m having a good time, but a thief broke into my friend’s apartment and stole $130! That’s a lot of money. We called the police, and they are looking for the thief. I’m going home to Springdale tomorrow, and that’s OK with me. I’m really upset about the theft.</p>
<p>Sarah</p>
<blockquote>
<p>Chicago、London</p>
</blockquote>
<h3 id="3-2-somewhere-thing-one"><a href="#3-2-somewhere-thing-one" class="headerlink" title="3.2 somewhere / thing / one"></a>3.2 somewhere / thing / one</h3><ul>
<li>John lives somewhere in Tokyo. I don’t know his address.</li>
</ul>
<h2 id="4-Listening-to-a-story"><a href="#4-Listening-to-a-story" class="headerlink" title="4. Listening to a story"></a>4. Listening to a story</h2><ul>
<li>Yosemite 约塞米蒂</li>
<li>tent</li>
<li>bear</li>
<li>camped</li>
<li>tore</li>
<li>trail</li>
<li>backpack</li>
<li>boots</li>
<li>cabin</li>
<li>campfire</li>
</ul>
<p><img src="/images/english/ef-l4u3l4.png" alt=""></p>
<audio src="/voices/ef/l4u3-listening-to-a-story.m4a" controls="controls"><br>Your browser does not support the audio tag.<br></audio>

<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>[SALLY] You guys are going to love Yosemite National Park.</td>
<td></td>
</tr>
<tr>
<td>[SIMON] I can’t wait.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] We’re going to hike on a special trail. Very few people know about it.</td>
<td></td>
</tr>
<tr>
<td>[SIMON] Sounds good.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] You feel so close to nature there. Especially when you see a deer, or a bear.</td>
<td></td>
</tr>
<tr>
<td>[JAKE] Did you say, bear?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Yeah. There are black bears in Yosemite. They’re really beautiful. And big.</td>
<td></td>
</tr>
<tr>
<td>[SIMON] Oh.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Actually, I have an interesting story about a bear. Last time I camped in Yosemite, we had a problem with one.</td>
<td></td>
</tr>
<tr>
<td>[JAKE] A problem? With a bear?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Uh-huh.</td>
<td></td>
</tr>
<tr>
<td>[JAKE] I don’t think I’m going to like this story.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] It was really late at night. We were asleep. Then, we heard a noise outside the tent.</td>
<td></td>
</tr>
<tr>
<td>[SIMON] Go on.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] We left the tent, and outside we saw a huge bear.</td>
<td></td>
</tr>
<tr>
<td>[SIMON] What did you do?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Oh, nothing.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] We just, uh, watched him, and he watched us. And then he tore open our backpacks, and sat down, and slowly ate all our food.</td>
<td></td>
</tr>
<tr>
<td>[SIMON] Then what happened?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Finally, he just walked away. He didn’t even look at us, as he went back into the trees.</td>
<td></td>
</tr>
<tr>
<td>[JAKE] And we’re going to the same place?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Don’t worry, Jake. It’s very safe.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="4-1-Hiking-sentence"><a href="#4-1-Hiking-sentence" class="headerlink" title="4.1 Hiking sentence"></a>4.1 Hiking sentence</h3><ul>
<li>A: What did you do on the weekend?</li>
<li>B: I played badminton.</li>
</ul>
<ul>
<li>A: Where did you go for your vacation?</li>
<li>B: I went to Peru.</li>
</ul>
<ul>
<li>A: Whose backpack did you borrow?</li>
<li>B: I borrowed my brother’s.    </li>
</ul>
<ul>
<li>A: What kind of tent did you buy?</li>
<li>B: I bought a Shelty. It’s the best brand.</li>
</ul>
<ul>
<li>A: What kind of animals did you see?</li>
<li>B: We saw deer, wolves and a snake.</li>
</ul>
<blockquote>
<p>How far did you walk?<br>How difficult was the hike?</p>
</blockquote>
<h3 id="4-2-Connect-the-matching"><a href="#4-2-Connect-the-matching" class="headerlink" title="4.2 Connect the matching"></a>4.2 Connect the matching</h3><table>
<thead>
<tr>
<th>questions</th>
<th>answer</th>
</tr>
</thead>
<tbody>
<tr>
<td>How was your weekend?</td>
<td>It was great, thanks.</td>
</tr>
<tr>
<td>How long was your trip?</td>
<td>We hiked for two weeks.</td>
</tr>
<tr>
<td><code>How many times were you there ?</code></td>
<td>Six times.</td>
</tr>
<tr>
<td>How did you get home?</td>
<td>I walked</td>
</tr>
<tr>
<td>Where did you eat lunch</td>
<td>I ate at the mountain</td>
</tr>
</tbody>
</table>
<h3 id="4-3-Hiking-Dialog"><a href="#4-3-Hiking-Dialog" class="headerlink" title="4.3 Hiking Dialog"></a>4.3 Hiking Dialog</h3><table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>KYLE: Hey, Jane! How was  your backpacking trip?</td>
<td></td>
</tr>
<tr>
<td>JANE: It was fantastic.</td>
<td></td>
</tr>
<tr>
<td>KYLE: Where did you go?</td>
<td></td>
</tr>
<tr>
<td>JANE: Uh, we went to Virginia and hiked part of the Appalachian Trail.</td>
<td></td>
</tr>
<tr>
<td>KYLE: Wow! The Appalachian Trail! How far did  you hike?</td>
<td></td>
</tr>
<tr>
<td>JANE: In five days, we hiked about 25 kilometers.</td>
<td></td>
</tr>
<tr>
<td>KYLE: Wow! That’s pretty far. How cold did it get?</td>
<td></td>
</tr>
<tr>
<td>JANE: Well, you know it’s October, so it was really cold at night.</td>
<td></td>
</tr>
<tr>
<td>KYLE: What kind of tent did you take?</td>
<td></td>
</tr>
<tr>
<td>JANE: No tent. There are little cabins on the trail. We all slept in them.</td>
<td></td>
</tr>
<tr>
<td>KYLE: Really? What kind of animals did you see? Any bears?</td>
<td></td>
</tr>
<tr>
<td>JANE: No bears. Just a lot of deer.</td>
<td></td>
</tr>
<tr>
<td>KYLE: That’s good.</td>
<td></td>
</tr>
</tbody>
</table>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml/ml-coursera-ng-w6-Machine-Learning-System-Design" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/05/29/ml/ml-coursera-ng-w6-Machine-Learning-System-Design/"><strong>Coursera 6 - Machine Learning System Design *</strong></a>
      <small class=article-date-index>&nbsp; 2017-05-29</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/05/29/ml/ml-coursera-ng-w6-Machine-Learning-System-Design/" class="article-date">
  <time datetime="2017-05-29T08:08:21.000Z" itemprop="datePublished">2017-05-29</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/05/29/ml/ml-coursera-ng-w6-Machine-Learning-System-Design/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>


<h2 id="1-Building-a-Spam-Classifier"><a href="#1-Building-a-Spam-Classifier" class="headerlink" title="1. Building a Spam Classifier"></a>1. Building a Spam Classifier</h2><h3 id="1-1-prioritize-what-to-work-on"><a href="#1-1-prioritize-what-to-work-on" class="headerlink" title="1.1 prioritize what to work on"></a>1.1 prioritize what to work on</h3><p>System Design Example:</p>
<p>Given a data set of emails, we could construct a vector for each email. Each entry in this vector represents a word. The vector normally contains 10,000 to 50,000 entries gathered by finding the most frequently used words in our data set. If a word is to be found in the email, we would assign its respective entry a 1, else if it is not found, that entry would be a 0. Once we have all our x vectors ready, we train our algorithm and finally, we could use it to classify if an email is a spam or not.</p>
<p><img src="/images/ml/ml-ng-w6-02-01.png" alt=""></p>
<p>So how could you spend your time to improve the accuracy of this classifier?</p>
<ul>
<li>Collect lots of data (for example “honeypot” project but doesn’t always work)</li>
<li>Develop sophisticated features (for example: using email header data in spam emails)</li>
<li>Develop algorithms to process your input in different ways (recognizing misspellings in spam).</li>
</ul>
<p>It is difficult to tell which of the options will be most helpful.</p>
<h3 id="1-2-error-analysis"><a href="#1-2-error-analysis" class="headerlink" title="1.2 error analysis"></a>1.2 error analysis</h3><p>The recommended approach to solving machine learning problems is to:</p>
<ul>
<li>Start with a simple algorithm, implement it quickly, and test it early on your cross validation data.</li>
<li>Plot learning curves to decide if more data, more features, etc. are likely to help.</li>
<li>Manually examine the errors on examples in the cross validation set and try to spot a trend where most of the errors were made.</li>
</ul>
<p>For example, assume that we have 500 emails and our algorithm misclassifies a 100 of them. We could manually analyze the 100 emails and categorize them based on what type of emails they are. We could then try to come up with new cues and features that would help us classify these 100 emails correctly. Hence, if most of our misclassified emails are those which try to steal passwords, then we could find some features that are particular to those emails and add them to our model. We could also see how classifying each word according to its root changes our error rate:</p>
<p><img src="/images/ml/ml-ng-w6-02-02.png" alt=""></p>
<p>It is very important to get error results as a single, numerical value. Otherwise it is difficult to assess your algorithm’s performance. For example if we use stemming, which is the process of treating the same word with different forms (fail/failing/failed) as one word (fail), and get a 3% error rate instead of 5%, then we should definitely add it to our model. However, if we try to distinguish between upper case and lower case letters and end up getting a 3.2% error rate instead of 3%, then we should avoid using this new feature. Hence, we should try new things, get a numerical value for our error rate, and based on our result decide whether we want to keep the new feature or not.</p>
<h2 id="2-Handling-Skewed-Data"><a href="#2-Handling-Skewed-Data" class="headerlink" title="2. Handling Skewed Data"></a>2. Handling Skewed Data</h2><h3 id="2-1-error-for-skewed-classes"><a href="#2-1-error-for-skewed-classes" class="headerlink" title="2.1 error for skewed classes"></a>2.1 error for skewed classes</h3><p><img src="/images/ml/ml-ng-w6-02-03.png" alt=""></p>
<p>So for the problem of skewed classes precision recall gives us more direct insight into how the learning algorithm is doing and this is often a much better way to evaluate our learning algorithms</p>
<h3 id="2-2-precision-and-recall"><a href="#2-2-precision-and-recall" class="headerlink" title="2.2 precision and recall"></a>2.2 precision and recall</h3><p><img src="/images/ml/ml-ng-w6-02-04.png" alt=""></p>
<h2 id="3-Using-Large-Data-Sets"><a href="#3-Using-Large-Data-Sets" class="headerlink" title="3. Using Large Data Sets"></a>3. Using Large Data Sets</h2><p><img src="/images/ml/ml-ng-w6-02-05.png" alt=""></p>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2>
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/english-Shuping-Yang-at-Maryyland" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/05/28/English/english-Shuping-Yang-at-Maryyland/"><strong>Shuping Yang&#39;s University of Maryland speech</strong></a>
      <small class=article-date-index>&nbsp; 2017-05-28</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/05/28/English/english-Shuping-Yang-at-Maryyland/" class="article-date">
  <time datetime="2017-05-27T23:08:21.000Z" itemprop="datePublished">2017-05-28</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/05/28/English/english-Shuping-Yang-at-Maryyland/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Shuping-Yang-Maryland-Graduation-Speech"><a href="#Shuping-Yang-Maryland-Graduation-Speech" class="headerlink" title="Shuping Yang Maryland Graduation Speech"></a>Shuping Yang Maryland Graduation Speech</h2><div class="video-container"><iframe src="//www.youtube.com/embed/9bMX-ctieHI" frameborder="0" allowfullscreen></iframe></div>
<h2 id="Speech-Full-Text"><a href="#Speech-Full-Text" class="headerlink" title="Speech Full Text"></a>Speech Full Text</h2><blockquote>
<p><strong>Good afternoon faculty, students, parents and friends.</strong></p>
<p>I am truly honored and grateful to speak at the commencement for the University of Maryland, Class of 2017. </p>
<p>People often ask me: Why did you come to the University of Maryland?<br>I always answer: Fresh air.</p>
<p>Five years ago, as I step off the plane from China, and left the terminal at Dallas Airport. I was ready to put on one of my five face masks, but when I took my first breath of American air. I put my mask away. </p>
<p>The air was so sweet and fresh, and utterly luxurious.</p>
<p>I was surprised by this. I grew up in a city in China, where I had to wear a face mask every time I went outside, otherwise, I might get sick.</p>
<p>However, the moment Iinhaled and exhaled outside the airport，I felt free.</p>
<p>No more fog on my glasses, no more difficult breathing, no more suppression.</p>
<p>Every breath was a delight. As I stand here today, I cannot help, but recall that feeling of freedom. </p>
</blockquote>
<p>&nbsp;</p>
<blockquote>
<p>At the University of Maryland, I will soon feel another kind of fresh air for which I will beforever grateful — the fresh air of free speech.</p>
<p>Before I came to the UnitedStates, I learned in history class about the Declaration of Independence, butthese words had no meaning to me— Life, Liberty and the Pursuit of happiness.</p>
<p>I was merely memorizing the words to get good grades.</p>
<p>These words sounded so strange, so abstract and foreign to me, until I came to University of Maryland.</p>
<p>I have learned the right to freely express oneself is sacred in American.</p>
<p>Each day in Maryland, I was encouraged to express my opinions on controversial issues. </p>
<p>I could challenge astatement made by my instructor. I could even rate my professors online.</p>
<p>But nothing prepared me forthe culture shock I experienced when I watched a university production of the play— Twilight: Los Angeles.</p>
<p>Twilight is a play by AnnaDeavere Smith about the 1992 Los Angeles Riots.</p>
<p>The riots followed acquittal of four Los Angeles police officers in the videotaped arrest and beating of Rodney King.</p>
<p>For six days, the city was in chaos as citizens took to the streets.</p>
<p>In Twilight, the student actors were openly talking about racism, sexism and politics.</p>
<p>I was shocked, I never thought such topic could be discussed openly.</p>
<p>The play was my first taste of political story telling, one that makes the audience think critically. </p>
<p>I have always had a burning desire to tell these kinds of stories, but I was convinced that only authorities on the narrative, only authorities could define the truth. </p>
<p>However, the opportunity toimmerse myself in the perse community at the University of Maryland exposed me to various, many different perspectives on truth.</p>
<p>I soon realized that here I have the opportunity to speak freely. </p>
<p>My voice matters. </p>
<p>Your voice matters.</p>
<p>Our voices matter.</p>
<p>Civil engagement is not at ask just for politicians. I have witnessed this when I saw my fellow student smarching in Washington DC, voting in the presidential election and raising money to support various causes.</p>
<p>I have seen that everyone has a right to participate and advocate for change.</p>
<p>I used to believe that one inpidual participation could not make a difference, but here we are, United Terps.</p>
<p>Together, we can push our society to be more just, open and peaceful.</p>
<p>Class of 2017, we are graduating from a university that embraces a liberal arts education that nurtures us to think critically, and also to care and feel for humanity. </p>
<p>We are equipped with the knowledge of various disciplines and we are ready to face  the challenges of our society.</p>
<p>Some of us may go to graduate school, some us may step into professions and some of us may begin ajourney of exploration.</p>
<p>But no matter what we do,remember, democracy and free speech should not be taken for granted.</p>
<p>Democracy and freedom are the fresh air that is worth fighting for.</p>
<p>Freedom is oxygen. Freedomis passion. Freedom is love.</p>
<p>And as a French philosopher Jean Paul Sartre once said: freedom is a choice, our future is dependent on the choices we make today and tomorrow.</p>
<p>We are all playwrights of the next chapters of our lives. Together, we write the human history.</p>
<p>My friends, enjoy the fresh air and never ever let it go.</p>
<p>Thank you.</p>
</blockquote>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/ef-l4u2-Describing-people" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/05/27/English/ef-l4u2-Describing-people/"><strong>EF Describing people</strong></a>
      <small class=article-date-index>&nbsp; 2017-05-27</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/05/27/English/ef-l4u2-Describing-people/" class="article-date">
  <time datetime="2017-05-26T23:06:16.000Z" itemprop="datePublished">2017-05-27</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/05/27/English/ef-l4u2-Describing-people/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 550px;
        margin-left: 120px !important;
}
</style>

<h2 id="1-Describing-someone-you-know"><a href="#1-Describing-someone-you-know" class="headerlink" title="1. Describing someone you know"></a>1. Describing someone you know</h2><ul>
<li>good-looking</li>
<li>long and dirty</li>
<li>tall, short</li>
<li>medium height</li>
<li>middle-aged</li>
<li>blond [blɑnd] 布隆；白肤金发碧眼的人</li>
<li>bald</li>
<li>curly</li>
</ul>
<p><img src="/images/english/ef-l4u2l1.png" alt=""></p>
<p>My boyfriend … he’s nice …, but , it’s over. He’s good-looking. He has a nice smile. Blue eyes. But his hair! It’s long and dirty. I don’t think he washes it. He’s an artist. He spends all day painting, and that’s all he does. He doesn’t have a job, he lives in his mum’s house! I want a boyfriend who has a plan. Successful, Smart, Funny, Handsome, I want something different now.</p>
<h3 id="2-Sencence"><a href="#2-Sencence" class="headerlink" title="2. Sencence"></a>2. Sencence</h3><ul>
<li>She is tall and thin.</li>
<li>Her hair is shorter and grayer than before.</li>
<li>That tall, young, blond man drives a truck.</li>
<li><p>He’s very attractive.        </p>
</li>
<li><p>A: What does he look like?  </p>
</li>
<li>B: He is tall and middle-aged. He’s very good-looking.</li>
</ul>
<ul>
<li>A: What color are his eyes?</li>
<li>B: They’re brown.    They’re brown.</li>
</ul>
<ul>
<li>A: How tall is she?</li>
<li>B: She’s very tall.</li>
</ul>
<h2 id="2-Describing-relationships"><a href="#2-Describing-relationships" class="headerlink" title="2. Describing relationships"></a>2. Describing relationships</h2><ul>
<li>granddaughter</li>
<li>grandson</li>
<li>niece [niːs]</li>
<li>nephew [‘nɛfju]</li>
<li>cousin [‘kʌzn]</li>
</ul>
<p><img src="/images/english/ef-l4u2l2.png" alt=""></p>
<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>P: So how many people are coming?</td>
<td></td>
</tr>
<tr>
<td>S: Well. there’s the three of us.</td>
<td></td>
</tr>
<tr>
<td>P: We’re inviting Jake to the party?</td>
<td></td>
</tr>
<tr>
<td>J: Invite me to the party? I am the party. Oh. Can my cousin come?</td>
<td></td>
</tr>
<tr>
<td>S: Jake, this is a party for Simon, to celebrate his new job. We’re only inviting family and friends.</td>
<td></td>
</tr>
<tr>
<td>J: My cousin is family.</td>
<td></td>
</tr>
<tr>
<td>S: Yeah, your family, not Simon’s.</td>
<td></td>
</tr>
<tr>
<td>P: It’s a small apartment. We can’t invite too many people.</td>
<td></td>
</tr>
<tr>
<td>S: I think we should invite Todd, and his wife, Angela.</td>
<td></td>
</tr>
<tr>
<td>J: Yeah, he’s nice, and she’s cute.</td>
<td></td>
</tr>
<tr>
<td>S: Jake !</td>
<td></td>
</tr>
<tr>
<td>J: What did I say ?</td>
<td></td>
</tr>
<tr>
<td>P: What’s your boss’s name? I can never remember.</td>
<td></td>
</tr>
<tr>
<td>S: Joan. We should definitely invite Joan. And her husband, Al.</td>
<td></td>
</tr>
<tr>
<td>P: And, of course, we need to invite Simon’s mom.</td>
<td></td>
</tr>
<tr>
<td>J: Definitely. She makes great cheesecake.</td>
<td></td>
</tr>
<tr>
<td>S: OK, Who else?</td>
<td></td>
</tr>
<tr>
<td>P: Who’s your friend in the office? The guy from Seattle.</td>
<td></td>
</tr>
<tr>
<td>S: Oh, Harry! I can’t believe I almost forgot him.</td>
<td></td>
</tr>
<tr>
<td>P: And does he have a girlfriend?</td>
<td></td>
</tr>
<tr>
<td>S: He’s married.</td>
<td></td>
</tr>
<tr>
<td>P: This list is getting bigger.</td>
<td></td>
</tr>
<tr>
<td>S: Shall we talk about food ?</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-1-Relationshops"><a href="#2-1-Relationshops" class="headerlink" title="2.1 Relationshops"></a>2.1 Relationshops</h3><ul>
<li>I’m meeting my girlfriend tonight.</li>
<li>James and I are business partners. [‘pɑrtnɚ] </li>
</ul>
<p><strong>gerund (verb + -ing)</strong></p>
<ul>
<li>We spend time watching movies. </li>
<li>I always have fun talking with him.</li>
</ul>
<ul>
<li>We have a hard time getting together.</li>
<li>She has trouble making money.</li>
<li>They often waste time fighting.</li>
</ul>
<table>
<thead>
<tr>
<th>D1</th>
</tr>
</thead>
<tbody>
<tr>
<td>A: How are you and your brother doing?</td>
<td></td>
</tr>
<tr>
<td>B: We’re doing well, thanks. We spend time talking on the phone.</td>
<td></td>
</tr>
<tr>
<td>A: What do you and Sylvia do for fun?</td>
<td></td>
</tr>
<tr>
<td>B: Let’s see … We have a lot of fun playing tennis together.</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>What do you and your partner do for fun?</li>
<li>We spend time taking nice walks.</li>
<li>Are you having trouble?</li>
<li>What else do you enjoying doing?</li>
</ul>
<h2 id="3-Evaluating-employees"><a href="#3-Evaluating-employees" class="headerlink" title="3. Evaluating employees"></a>3. Evaluating employees</h2><ul>
<li>appraisal [əˈprezəl]  考研 / IELTS / TOEFL / BEC</li>
<li>hardworking</li>
<li>efficient</li>
<li>creative [kriˈetɪv]</li>
<li>getting better</li>
<li>could do better </li>
<li>disorganized</li>
</ul>
<p><img src="/images/english/ef-l4u2l3.png" alt=""></p>
<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>[TODD] Thanks for taking the time to meet me, Joan?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] No problem. What’s up?</td>
<td></td>
</tr>
<tr>
<td>[TODD] Well, the <code>performance appraisals</code> are next week, and I want to talk with you about Sally and Harry.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Okay. Let’s start with Harry.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Well, Harry hasn’t been with us that long, but I can see that he’s very hardworking. I think he does a really good job.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] So do I. He did a great job on his last project … What was it?</td>
<td></td>
</tr>
<tr>
<td>[TODD] The Smith Electric [ɪ’lɛktrɪk] project.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] That’s right.     He <code>worked really well</code> with the team.</td>
<td></td>
</tr>
<tr>
<td>[TODD] A real team player. But there is one thing. He’s often late.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Yeah! he is</td>
<td></td>
</tr>
<tr>
<td>[TODD] Often late. Now. Sally.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Sally … I like Sally, but, umm …</td>
<td></td>
</tr>
<tr>
<td>[TODD] She’s just not <code>efficient enough</code> sometimes. She needs to be more organized. I mean, I don’t think she’s lazy.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] <code>Neither do I</code>. She works hard. And she’s good in meetings.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Yeah. And she’s also very helpful. Sometimes I have a computer problem and …</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Yes, you do sometimes have computer problems.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Well, I like them both.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] So do I. You have two great people on your team.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="3-1-Senctence"><a href="#3-1-Senctence" class="headerlink" title="3.1 Senctence"></a>3.1 Senctence</h3><ul>
<li>Her project is late because she’s too disorganized.</li>
<li>She’s too negative. She thinks too much about problems.</li>
<li>He’s not creative enough to work in marketing.   </li>
</ul>
<p>Use neither do I to agree with an opinion expressed by I don’t think that, or any other opinion expressed in the negative.</p>
<ul>
<li>She’s so disorganized. &gt; She needs to be more organized.</li>
<li>He’s too negative. &gt; He should be more positive.</li>
</ul>
<h2 id="4-giving-a-recommendation"><a href="#4-giving-a-recommendation" class="headerlink" title="4. giving a recommendation"></a>4. giving a recommendation</h2><ul>
<li>brochure  [‘brəʊʃə]</li>
</ul>
<p><img src="/images/english/ef-l4u2l4.png" alt=""></p>
<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>[JOAN] Oh, Martina’s letter of recommendation. When is she going to New York?</td>
<td></td>
</tr>
<tr>
<td>[TODD] Next Friday. Her husband’s already there.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] That soon. I’m going to miss her.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Yeah, so am I.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Last week I asked her to make a new company <code>brochure [bro&#39;ʃʊr]</code>. It only took her two days.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Really? I should put that in. Martina works quickly and efficiently …</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Yeah. The brochure was really beautiful. She’s so creative. And her team really loves her.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Creative … Works well with a team. What else?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Well, she always wrote our marketing copy. She was really good at it.</td>
<td></td>
</tr>
<tr>
<td>[TODD] That’s right! Who’s going to do that now?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] <code>Why don’t you ask Sally? She’s smart. She can learn it pretty quickly, right?</code></td>
<td></td>
</tr>
<tr>
<td>[TODD] Not that quickly. But, yeah, she could learn it.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Great. So do you have enough for your letter?</td>
<td></td>
</tr>
<tr>
<td>[TODD] Umm … I think so. Thanks.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Sure.</td>
<td></td>
</tr>
<tr>
<td>[TODD] I had the pleasure to work with Martina for three years, and I highly recommend her.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-Senctence"><a href="#2-Senctence" class="headerlink" title="2. Senctence"></a>2. Senctence</h3><ul>
<li>She was always organized.  </li>
<li>She can probably learn that in one or two days.</li>
<li>The project only took her one day.</li>
</ul>
<ul>
<li>The brochure was really beautiful.   </li>
<li>She’s so creative.</li>
<li>She can learn that pretty quickly.</li>
</ul>
<h3 id="3-So-amp-Such"><a href="#3-So-amp-Such" class="headerlink" title="3. So &amp; Such"></a>3. So &amp; Such</h3><p>Use so + adjective or so + adverb to emphasize a personal quality.</p>
<ul>
<li>Kyle is so disorganized.      </li>
<li>She works so quickly.       </li>
</ul>
<p>Use such + noun to emphasize a personal quality.</p>
<ul>
<li>Debra is such a team player.  </li>
<li>She shows such creativity.  </li>
<li>Oscar is such a hard worker.  </li>
</ul>
<table>
<thead>
<tr>
<th>Dialog So Such</th>
</tr>
</thead>
<tbody>
<tr>
<td>FRED: You’re already done with the Franco project?</td>
<td></td>
</tr>
<tr>
<td>LOUISE: Fantastic, right? It only  took us two weeks.</td>
<td></td>
</tr>
<tr>
<td>FRED: You finished that soon  ? Wow. You work so well  with your team.</td>
<td></td>
</tr>
<tr>
<td>LOUISE: Thanks! It’s such  a hardworking team.</td>
<td></td>
</tr>
<tr>
<td>FRED: Yeah. Liza’s great. She’s such a creative designer.</td>
<td></td>
</tr>
<tr>
<td>LOUISE: Yes, and Tom’s so efficient. Honestly, Jayden’s really helpful, too</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="4-Writing"><a href="#4-Writing" class="headerlink" title="4. Writing"></a>4. Writing</h3><p>Sep 21,2016</p>
<p>To whom it may concern:</p>
<p>I am writing to highly recommend Jim. I worked with Jim for 2 years at LLQ company.<br>Jim was product manager of R&amp;D. He was always hardworking, efficient and well-organized. Please feel free to contact me about Jim.</p>
<p>Sincerely<br>Blair</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml/ml-coursera-ng-w6-Advice-for-Applying-Machine-Learning" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/05/24/ml/ml-coursera-ng-w6-Advice-for-Applying-Machine-Learning/"><strong>Coursera 6 - Advice for Applying Machine Learning *</strong></a>
      <small class=article-date-index>&nbsp; 2017-05-24</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/05/24/ml/ml-coursera-ng-w6-Advice-for-Applying-Machine-Learning/" class="article-date">
  <time datetime="2017-05-24T14:08:21.000Z" itemprop="datePublished">2017-05-24</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/05/24/ml/ml-coursera-ng-w6-Advice-for-Applying-Machine-Learning/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<p>Evaluating a Hypothesis -&gt; Model Selection、Diagnosing Bias vs Variance -&gt; Regularization、Learning Curves</p>
<h2 id="1-Evaluating-a-Hypothesis"><a href="#1-Evaluating-a-Hypothesis" class="headerlink" title="1. Evaluating a Hypothesis"></a>1. Evaluating a Hypothesis</h2><p>Once we have done some <strong>trouble shooting</strong> for errors in our predictions by:</p>
<ul>
<li>Getting more training examples</li>
<li>Trying smaller sets of features</li>
<li>Trying additional features</li>
<li>Trying polynomial features</li>
<li>Increasing or decreasing $λ$</li>
</ul>
<p>We can move on to evaluate our new hypothesis.</p>
<p>A hypothesis may have a low error for the training examples but still be inaccurate (because of overfitting). Thus, to evaluate a hypothesis, given a dataset of training examples, we can split up the data into two sets: a training set and a test set. Typically, the training set consists of 70% of your data and the test set is the remaining 30%.</p>
<p>The new procedure using these two sets is then:</p>
<ol>
<li>Learn $\Theta$ and minimize $J_{train}(\Theta)$ using the training set</li>
<li>Compute the test set error $J_{test}(\Theta)$</li>
</ol>
<p><strong>The test set error</strong></p>
<ol>
<li>For linear regression: $J_{test}(\Theta) = \dfrac{1}{2m_{test}} \sum_{i=1}^{m_{test}}(h_\Theta(x^{(i)}_{test}) - y^{(i)}_{test})^2$</li>
<li>For classification ~ Misclassification error (aka 0/1 misclassification error):</li>
</ol>
<p>$$<br>err(h_\Theta(x),y) = \begin{matrix} 1 &amp; \mbox{if } h_\Theta(x) \geq 0.5\ and\ y = 0\ or\ h_\Theta(x) &lt; 0.5\ and\ y = 1\newline 0 &amp; \mbox otherwise \end{matrix}<br>$$</p>
<p>This gives us a binary 0 or 1 error result based on a misclassification. The average test error for the test set is:</p>
<p>$$<br>\text{Test Error} = \dfrac{1}{m_{test}} \sum^{m_{test}}_{i=1} err(h_\Theta(x^{(i)}_{test}), y^{(i)}_{test})<br>$$</p>
<p>This gives us the proportion of the test data that was misclassified.</p>
<blockquote>
<p>inaccurate[ɪn’ækjərət]、procedure [prə’sidʒɚ] 比例<br>remaining [ri’men..]、 Misclassification [‘mis,klæsifi’keiʃən]<br>validation [,vælə’deʃən] 确认，批准</p>
</blockquote>
<h2 id="2-Model-Selection"><a href="#2-Model-Selection" class="headerlink" title="2. Model Selection"></a>2. Model Selection</h2><p><strong>Train/Validtion/Test Sets</strong></p>
<p>Just because a learning algorithm fits a training set well, that does not mean it is a good hypothesis. It could over fit and as a result your predictions on the test set would be poor. The error of your hypothesis as measured on the data set with which you trained the parameters will be lower than the error on any other data set.</p>
<p>Given many models with different polynomial degrees, we can use a systematic approach to identify the ‘best’ function. In order to choose the model of your hypothesis, you can test each degree of polynomial and look at the error result.</p>
<p>One way to break down our dataset into the three sets is:</p>
<ul>
<li><font color="blue"> Training set: 60%</font></li>
<li><font color="blue"> Cross validation set: 20%</font></li>
<li><font color="blue"> Test set: 20%</font>

</li>
</ul>
<p>We can now calculate three separate error values for the three different sets using the following method:</p>
<ol>
<li>Optimize the parameters in Θ using the training set for each polynomial degree.</li>
<li>Find the polynomial degree d with the least error using the cross validation set.</li>
<li>Estimate the generalization error using the test set with $J_{test}(\Theta^{(d)})$, (d = theta from polynomial with lower error);</li>
</ol>
<blockquote>
<p>This way, the degree of the polynomial d has not been trained using the test set.</p>
</blockquote>
<h2 id="3-Diagnosing-Bias-vs-Variance"><a href="#3-Diagnosing-Bias-vs-Variance" class="headerlink" title="3. Diagnosing Bias vs. Variance"></a>3. Diagnosing Bias vs. Variance</h2><p>In this section we examine the relationship between the degree of the polynomial d and the underfitting or overfitting of our hypothesis.</p>
<ul>
<li>We need to distinguish whether <code>bias</code> or <code>variance</code> is the problem contributing to bad predictions.</li>
<li>High bias is underfitting and high variance is overfitting. Ideally, we need to find a golden mean between these two.</li>
</ul>
<p>The training error will tend to <code>decrease</code> as we increase the degree d of the polynomial.</p>
<p>At the same time, the cross validation error will tend to decrease as we increase d up to a point, and then it will increase as d is increased, forming a convex curve.</p>
<p><strong>High bias (underfitting)</strong>: both $J_{train}(\Theta)$ and $J_{CV}(\Theta)$ will be high. Also, $J_{CV}(\Theta) \approx J_{train}(\Theta)$.</p>
<p><strong>High variance (overfitting)</strong>: $J_{train}(\Theta)$ will be low and $J_{CV}(\Theta)$ will be much greater than $J_{train}(\Theta)$.</p>
<p>The is summarized in the figure below:</p>
<p><img src="/images/ml/coursera/ml-ng-w6-01-01.png" alt=""></p>
<h2 id="4-Regularization-Bias-Variance"><a href="#4-Regularization-Bias-Variance" class="headerlink" title="4. Regularization Bias/Variance"></a>4. Regularization Bias/Variance</h2><p>Note: [The regularization term below and through out the video should be $\frac \lambda {2m} \sum_{j=1}^n \theta_j ^2$ and NOT $\frac \lambda {2m} \sum_{j=1}^m \theta_j ^2$]</p>
<p><img src="/images/ml/coursera/ml-ng-w6-01-02.png" alt=""></p>
<p>In the figure above, we see that as λ increases, our fit becomes more rigid. On the other hand, as λ approaches 0, we tend to over overfit the data. So how do we choose our parameter λ to get it ‘just right’ ? In order to choose the model and the regularization term λ, we need to:</p>
<ol>
<li>Create a list of lambdas (i.e. λ∈{0,0.01,0.02,0.04,0.08,0.16,0.32,0.64,1.28,2.56,5.12,10.24});</li>
<li>Create a set of models with different degrees or any other variants.</li>
<li>Iterate through the λs and for each λ go through all the models to learn some Θ.</li>
<li>Compute the cross validation error using the learned Θ (computed with λ) on the $J_{CV}(\Theta)$ <strong>without</strong> regularization or λ = 0. <code>？？</code></li>
<li>Select the best combo that produces the lowest error on the cross validation set.</li>
<li>Using the best combo Θ and λ, apply it on $J_{test}(\Theta)$ to see if it has a good generalization of the problem.</li>
</ol>
<h2 id="5-Learning-Curves"><a href="#5-Learning-Curves" class="headerlink" title="5. Learning Curves"></a>5. Learning Curves</h2><p>Training an algorithm on a very few number of data points (such as 1, 2 or 3) will easily have 0 errors because we can always find a quadratic curve that touches exactly those number of points. Hence:</p>
<ul>
<li>As the training set gets larger, the error for a quadratic function increases.</li>
<li>The error value will plateau out after a certain m, or training set size.</li>
</ul>
<p><strong>Experiencing high bias:</strong></p>
<p>Low training set size: causes $J_{train}(\Theta)$ to be low and $J_{CV}(\Theta)$ to be high.</p>
<p>Large training set size: causes both $J_{train}(\Theta)$ and $J_{CV}(\Theta)$  to be high with $J_{train}(\Theta)$≈$J_{CV}(\Theta)$.</p>
<p>If a learning algorithm is suffering from high bias, getting more training data will not (by itself) help much.</p>
<p><img src="/images/ml/coursera/ml-ng-w6-01-03.png" alt=""></p>
<p>me : 随着train sets的增加，高偏差会降低，因为更容易找到合适的 Hypothesis 去拟合数据。所以CV error下降。</p>
<p><strong>Experiencing high variance:</strong></p>
<p><strong>Low training set size:</strong> $J_{train}(\Theta)$ will be low and $J_{CV}(\Theta)$ will be high.</p>
<p><strong>Large training set size:</strong> $J_{train}(\Theta)$ increases with training set size and $J_{CV}(\Theta)$ continues to decrease without leveling off. Also, $J_{train}(\Theta)$ &lt; $J_{CV}(\Theta)$ but the difference between them remains significant.</p>
<p>If a learning algorithm is suffering from high variance, getting more training data is likely to help.</p>
<p><img src="/images/ml/coursera/ml-ng-w6-01-04.png" alt=""></p>
<p>me : 随着 train sets 的增加，overfiting 越来越不容易。造成 CV error 下降。</p>
<blockquote>
<p>plateau out / leveling off 达到平稳状态<br><code>test error will be CV error on picture.</code></p>
</blockquote>
<h2 id="6-What-to-Do-Next-Revisited"><a href="#6-What-to-Do-Next-Revisited" class="headerlink" title="6. What to Do Next Revisited"></a>6. What to Do Next Revisited</h2><p><em>*Our decision process can be broken down as follows</em>:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Function</th>
<th style="text-align:center">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Getting more training examples</td>
<td style="text-align:center">Fixes high variance</td>
</tr>
<tr>
<td style="text-align:center">Trying smaller sets of features</td>
<td style="text-align:center">Fixes high variance</td>
</tr>
<tr>
<td style="text-align:center">Increasing λ</td>
<td style="text-align:center">Fixes high variance</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Adding features</td>
<td style="text-align:center">Fixes high bias</td>
</tr>
<tr>
<td style="text-align:center">Adding polynomial features</td>
<td style="text-align:center">Fixes high bias</td>
</tr>
<tr>
<td style="text-align:center">Decreasing λ</td>
<td style="text-align:center">Fixes high bias</td>
</tr>
</tbody>
</table>
<h3 id="6-1-Diagnosing-NN"><a href="#6-1-Diagnosing-NN" class="headerlink" title="6.1 Diagnosing NN"></a>6.1 Diagnosing NN</h3><ul>
<li><p>A neural network with fewer parameters is <strong>prone to underfitting</strong>. It is also <strong>computationally cheaper</strong>.</p>
</li>
<li><p>A large neural network with more parameters is <strong>prone to overfitting</strong>. It is also <strong>computationally expensive</strong>. </p>
</li>
</ul>
<p>In this case you can use regularization (increase λ) to address the overfitting.</p>
<h3 id="6-2-Model-Complexity-Effects"><a href="#6-2-Model-Complexity-Effects" class="headerlink" title="6.2 Model Complexity Effects"></a>6.2 Model Complexity Effects</h3><ul>
<li><p>Lower-order polynomials (low model complexity) have high bias and low variance. In this case, the model fits poorly consistently.</p>
</li>
<li><p>Higher-order polynomials (high model complexity) fit the training data extremely well and the test data extremely poorly. These have low bias on the training data, but very high variance.</p>
</li>
<li><p>In reality, we would want to choose a model somewhere in between, that can generalize well but also fits the data reasonably well.</p>
</li>
</ul>
<h2 id="Reference-article"><a href="#Reference-article" class="headerlink" title="Reference article"></a>Reference article</h2><ul>
<li><a href="https://www.coursera.org/learn/machine-learning/home/week/6" target="_blank" rel="external">coursera 6 @ng</a></li>
</ul>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/ef-l4u1-Entertainment" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/05/24/English/ef-l4u1-Entertainment/"><strong>EF Entertainment</strong></a>
      <small class=article-date-index>&nbsp; 2017-05-24</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/05/24/English/ef-l4u1-Entertainment/" class="article-date">
  <time datetime="2017-05-23T23:06:16.000Z" itemprop="datePublished">2017-05-24</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/05/24/English/ef-l4u1-Entertainment/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 550px;
        margin-left: 120px !important;
}
</style>

<h2 id="1-describing-entertainment-options"><a href="#1-describing-entertainment-options" class="headerlink" title="1. describing entertainment options"></a>1. describing entertainment options</h2><ul>
<li>a concert</li>
<li>a musical</li>
<li>a lecture</li>
<li>a play</li>
</ul>
<p><img src="/images/english/ef-l4u1l1.png" alt=""></p>
<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>S: Hey, Joe. <code>What are we going to do</code> tonight?</td>
<td></td>
</tr>
<tr>
<td>J: I know! Let’s go to that play downtown.</td>
<td></td>
</tr>
<tr>
<td>S: Nah, it’s too far.</td>
<td></td>
</tr>
<tr>
<td>J: Well, <code>what else is going on</code>?</td>
<td></td>
</tr>
<tr>
<td>S: Well, there’s a new movie at the theater. It’s ‘The Big Cheese’ with May Jackson.</td>
<td></td>
</tr>
<tr>
<td>J: Or we could go to the football game.</td>
<td></td>
</tr>
<tr>
<td>S: I do not enjoy watching football games.</td>
<td></td>
</tr>
<tr>
<td>J: Oh, yeah. So the movie sounds good.</td>
<td></td>
</tr>
<tr>
<td>S: Great!</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="1-1-gerunds-amp-infinitives"><a href="#1-1-gerunds-amp-infinitives" class="headerlink" title="1.1 gerunds &amp; infinitives"></a>1.1 gerunds &amp; infinitives</h3><ul>
<li>Frank enjoys cooking dinner for Lilei</li>
<li>Blair <code>plans to eat</code> out.</li>
<li>We’re <code>planning to go to</code> the soccer game. [‘sɒkə]</li>
<li>I need to get some money for the concert.</li>
<li>Bluce Lee <code>kept playing</code> his guitar until midnight</li>
<li>We’re <code>thinking about</code> going to a concert.</li>
</ul>
<table>
<thead>
<tr>
<th>gerunds &amp; infinitives</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>like</td>
<td>I like going to musicals.</td>
</tr>
<tr>
<td>-</td>
<td>I like to go to musicals.     </td>
</tr>
<tr>
<td>love</td>
<td>June loves eating in restaurants.</td>
</tr>
<tr>
<td>-</td>
<td>June loves to eat in restaurants.     </td>
</tr>
<tr>
<td>begin</td>
<td>It began to snow.</td>
</tr>
<tr>
<td>-</td>
<td>It began snowing.</td>
</tr>
</tbody>
</table>
<h3 id="1-2-know-how-good-at"><a href="#1-2-know-how-good-at" class="headerlink" title="1.2 know how / good at"></a>1.2 know how / good at</h3><ul>
<li>I don’t know how to swim. </li>
<li>I’m terrible at driving.</li>
</ul>
<h3 id="1-3-describing-options"><a href="#1-3-describing-options" class="headerlink" title="1.3 describing options"></a>1.3 describing options</h3><ul>
<li>What do you want to do?  </li>
<li>What are we going to do tonight?</li>
<li>What’s going on?     </li>
</ul>
<ul>
<li>There are some great movies and plays going on this week.</li>
<li>You could go swimming or you could go hiking.  </li>
</ul>
<ul>
<li>What else is there to do?</li>
<li>What else is going on?</li>
</ul>
<h2 id="2-talking-about-upcoming-events"><a href="#2-talking-about-upcoming-events" class="headerlink" title="2. talking about upcoming events"></a>2. talking about upcoming events</h2><ul>
<li>bar</li>
<li>stadium [‘steɪdɪəm]</li>
<li>aquarium [ə’kweərɪəm]</li>
<li>concert hall</li>
<li>auditorium  [ɔːdɪ’tɔːrɪəm]</li>
<li>Theater  [‘θɪətə]</li>
<li>nightclub</li>
<li>check it out</li>
</ul>
<p><img src="/images/english/ef-l4u1l2.png" alt=""></p>
<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>[TODD] Hi, Could you <code>do me a favor</code>?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Sure, What do you need?</td>
<td></td>
</tr>
<tr>
<td>[TODD] Well, Angela and I want to do <code>something special</code> this weekend. It’s our 20th <code>wedding anniversary</code>.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Wow! Twenty years together, Congratulations.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Thanks, Could you help me <code>find something interesting</code> ?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Springdale.com has all the events listed for the city.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] It covers the concert hall, the auditorium … , You really should check it out.</td>
<td></td>
</tr>
<tr>
<td>[TODD] That’s a good idea.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] There’s an incredible same band at the Blue Banana.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] That’s the <code>hottest nightclub</code> in town right now. Do you and Angela like to dance?</td>
<td></td>
</tr>
<tr>
<td>[TODD] Yes! But, Like a classical concert. Beethoven. Or Mozart.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Here is a play,  How about Shakespeare? It’s ‘Hamlet’.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] It’s in the Main Street <code>Theater</code>[ˈθi:ətər] on Saturday.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Angela loves plays. Thank you so much!</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="1-1-Prepositions-of-time-and-place"><a href="#1-1-Prepositions-of-time-and-place" class="headerlink" title="1.1 Prepositions of time and place"></a>1.1 Prepositions of time and place</h3><p><strong><code>on</code> for smaller areas, and for days and dates.</strong></p>
<ul>
<li>I live on Main Street.</li>
<li>The lecture is on Monday.    </li>
<li>My birthday is on April 17th.</li>
</ul>
<p><strong><code>at</code> for addresses</strong></p>
<ul>
<li>His house is at 465 Pine Street.</li>
<li>The lecture is at the auditorium.</li>
<li>At night, I like to read.</li>
</ul>
<p><strong><code>in</code></strong></p>
<ul>
<li>My brother is coming in February.</li>
<li>I lived in France for one year.</li>
</ul>
<h3 id="1-2-Asking-for-help"><a href="#1-2-Asking-for-help" class="headerlink" title="1.2 Asking for help"></a>1.2 Asking for help</h3><ul>
<li>Could you do me a favor? </li>
<li>I’m sorry, but I’m really busy right now.</li>
<li>The party will start at 10 in the morning and continue until 7 in the evening</li>
</ul>
<h3 id="1-3-Writing"><a href="#1-3-Writing" class="headerlink" title="1.3 Writing"></a>1.3 Writing</h3><p>This Saturday night, there is going to be a english lecture, ‘two minutes’. June is going to talk about “the important of time”. The lecture starts at 8 p.m. It’s at the Auditorium. Admission is free. I like learning english, so I am thinking about going.</p>
<h2 id="3-planning-a-night-out-with-friends"><a href="#3-planning-a-night-out-with-friends" class="headerlink" title="3. planning a night out with friends"></a>3. planning a night out with friends</h2><h3 id="1-Vocabulary"><a href="#1-Vocabulary" class="headerlink" title="1. Vocabulary"></a>1. Vocabulary</h3><ul>
<li>boring</li>
<li>loud</li>
<li>relaxing</li>
<li>incredible</li>
<li>horror [‘hɒrə]</li>
<li>romance [ro’mæns]</li>
<li>drama  [ˈdrɑmə] </li>
<li>comedy [‘kɑmədi]</li>
</ul>
<p><img src="/images/english/ef-l4u1l3.png" alt=""></p>
<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>M: Why don’t we go to that new sports bar?</td>
<td></td>
</tr>
<tr>
<td>F: ~</td>
<td></td>
</tr>
<tr>
<td>M: Yup, There is a football game</td>
<td></td>
</tr>
<tr>
<td>F: I hate the sports bar</td>
<td></td>
</tr>
<tr>
<td>M: Really, why?</td>
<td></td>
</tr>
<tr>
<td>F: Because that is boring, the music is so loud and diffcult convasition.</td>
<td></td>
</tr>
<tr>
<td>F: How about a quiet, relaxing dinner?</td>
<td></td>
</tr>
<tr>
<td>M: We do that a name</td>
<td></td>
</tr>
<tr>
<td>F: OK ! you are right, Let’s do something different.</td>
<td></td>
</tr>
<tr>
<td>M: I know, Let’s go to the movie. the New York</td>
<td></td>
</tr>
<tr>
<td>F: The horror  movie, I don’t think so, How about a romance, or a drama</td>
<td></td>
</tr>
<tr>
<td>M: Oh, look, really, It is incredible !</td>
<td></td>
</tr>
<tr>
<td>F: I love it. Can you buy the ticket ?</td>
<td></td>
</tr>
<tr>
<td>M: Sure, Thanks</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-Adjectives-for-events"><a href="#2-Adjectives-for-events" class="headerlink" title="2. Adjectives for events"></a>2. Adjectives for events</h3><ul>
<li>interesting           </li>
<li>boring</li>
<li>relaxing</li>
<li>exciting</li>
<li>surprising</li>
<li>fun</li>
<li>incredible</li>
<li>loud</li>
<li>quiet</li>
<li>wonderful</li>
<li>terrible</li>
</ul>
<h3 id="3-New-York-text"><a href="#3-New-York-text" class="headerlink" title="3. New York, text"></a>3. New York, text</h3><table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>J: Hi, Ann! Hey, how was your vacation? You went to New York, right?</td>
<td></td>
</tr>
<tr>
<td>A: Yeah.</td>
<td></td>
</tr>
<tr>
<td>J: How was it?</td>
<td></td>
</tr>
<tr>
<td>A: Oh, I love New York! It’s a really exciting  city.</td>
<td></td>
</tr>
<tr>
<td>J: Nah. It’s too big and too loud  for me. So, what did you do in New York?</td>
<td></td>
</tr>
<tr>
<td>A: Well, we went to a musical. That was fun  ! And we ate at some really interesting restaurants. The food was delicious.</td>
<td></td>
</tr>
<tr>
<td>J: It sounds wonderful.</td>
<td></td>
</tr>
<tr>
<td>A: And the Museum of Modern Art was incredible !</td>
<td></td>
</tr>
<tr>
<td>J: That’s great! Well, I have a meeting. See you later.</td>
<td></td>
</tr>
<tr>
<td>A: Bye.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="4-‘Why’-and-‘because’"><a href="#4-‘Why’-and-‘because’" class="headerlink" title="4. ‘Why’ and ‘because’"></a>4. ‘Why’ and ‘because’</h3><ul>
<li>Why did you go to Paris?</li>
<li>I went to Paris because it’s beautiful!</li>
</ul>
<ul>
<li>Why is Frank angry?</li>
<li>I go to that restaurant     because it’s cheap, and the food is delicious.  </li>
</ul>
<h3 id="5-Suggesting-activities"><a href="#5-Suggesting-activities" class="headerlink" title="5. Suggesting activities"></a>5. Suggesting activities</h3><p>‘Let’s’ + base form of verb</p>
<ul>
<li>Let’s go to the dance performance. </li>
</ul>
<p>‘How about’ or ‘what about’ + verb + ‘-ing’</p>
<ul>
<li>What about meeting some friends?</li>
</ul>
<p>‘Could’ + base form of verb</p>
<ul>
<li>We could go out for a drink at Harry’s Bar.</li>
</ul>
<p>‘Why don’t we’ + base form of verb</p>
<ul>
<li>Why don’t we try a new restaurant?</li>
</ul>
<h2 id="4-going-to-the-movies"><a href="#4-going-to-the-movies" class="headerlink" title="4. going to the movies"></a>4. going to the movies</h2><h3 id="1-Vocabulary-1"><a href="#1-Vocabulary-1" class="headerlink" title="1. Vocabulary"></a>1. Vocabulary</h3><ul>
<li>The 8 o’clock show’s sold out now.</li>
<li>There are still some tickets left</li>
</ul>
<p><img src="/images/english/ef-l4u1l4.png" alt=""></p>
<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>S: Jake? Jake! It’s 7 o’clock! The movie starts at 8!</td>
<td></td>
</tr>
<tr>
<td>J: Okay, Okay. I am ready.</td>
<td></td>
</tr>
<tr>
<td>S: Did you book the tickets?</td>
<td></td>
</tr>
<tr>
<td>J: The tickets.</td>
<td></td>
</tr>
<tr>
<td>S: The tickets you book them. right?</td>
<td></td>
</tr>
<tr>
<td>J: Ohhh.</td>
<td></td>
</tr>
<tr>
<td>S: I can’t believe it. How Could you forget to book the tickets? The 8 o’clock show is sold out now.</td>
<td></td>
</tr>
<tr>
<td>J: Sally, I’m really sorry. Is there a second show?</td>
<td></td>
</tr>
<tr>
<td>S: The next show begins at 10:30. There are still some tickets left. But it’s over after midnight.</td>
<td></td>
</tr>
<tr>
<td>J: That sounds good. I’m so sorry. I can’t believe I forgot. So, Do you want to watch some TV?</td>
<td></td>
</tr>
<tr>
<td>S: This is stupid!</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-Simple-present"><a href="#2-Simple-present" class="headerlink" title="2. Simple present"></a>2. Simple present</h3><table>
<thead>
<tr>
<th>begin、start、open</th>
</tr>
</thead>
<tbody>
<tr>
<td>The dance performance begins at 8 o’clock tonight.</td>
<td></td>
</tr>
<tr>
<td>Jim Department Store opens at 9 a.m. tomorrow.</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>close、end、be over、finish</th>
</tr>
</thead>
<tbody>
<tr>
<td>The movie is over at 9:15 p.m.</td>
<td></td>
</tr>
<tr>
<td>She closes her shop at 6 o’clock.</td>
<td></td>
</tr>
<tr>
<td>The movie ends at midnight.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="3-Asking-for-info-about-movies"><a href="#3-Asking-for-info-about-movies" class="headerlink" title="3. Asking for info about movies"></a>3. Asking for info about movies</h3><ul>
<li>Can you give me some information?</li>
<li>Do you have a website?</li>
<li>Can I buy tickets online?</li>
<li>What’s your address?</li>
<li>What time is the next show?</li>
<li>Are tickets still available?</li>
<li>How much are tickets?</li>
</ul>
<h3 id="4-Dialog-with-theater-‘θiətə"><a href="#4-Dialog-with-theater-‘θiətə" class="headerlink" title="4. Dialog with theater  [‘θiətə]"></a>4. Dialog with theater  [‘θiətə]</h3><table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>A: Good afternoon. Springdale Theater.</td>
<td></td>
</tr>
<tr>
<td>B: Good afternoon. Can you give me some information  about the film ‘Mommy Mommy’?</td>
<td></td>
</tr>
<tr>
<td>A: Certainly. What would you like to know?</td>
<td></td>
</tr>
<tr>
<td>B: When is the next show  ?</td>
<td></td>
</tr>
<tr>
<td>A: It’s at 3:15.</td>
<td></td>
</tr>
<tr>
<td>B: That’s good. And are there still tickets for it?</td>
<td></td>
</tr>
<tr>
<td>A: Yes. That’s not a problem. Afternoons are never sold out.</td>
<td></td>
</tr>
<tr>
<td>B: OK. And can I buy tickets online?</td>
<td></td>
</tr>
<tr>
<td>A: Yes, just go to our website  , www.springdaletheater.com.</td>
<td></td>
</tr>
<tr>
<td>B: Thanks! Oh, and how much are tickets for adults  and children?</td>
<td></td>
</tr>
<tr>
<td>A: Adults are $13, and kids are $6.</td>
<td></td>
</tr>
</tbody>
</table>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/ef-l3u6-Jobs-and-companies" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/05/19/English/ef-l3u6-Jobs-and-companies/"><strong>Jobs and companies</strong></a>
      <small class=article-date-index>&nbsp; 2017-05-19</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/05/19/English/ef-l3u6-Jobs-and-companies/" class="article-date">
  <time datetime="2017-05-18T23:06:16.000Z" itemprop="datePublished">2017-05-19</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/05/19/English/ef-l3u6-Jobs-and-companies/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 550px;
        margin-left: 120px !important;
}
</style>

<h2 id="1-Asking-about-work-experience"><a href="#1-Asking-about-work-experience" class="headerlink" title="1. Asking about work experience"></a>1. Asking about work experience</h2><ul>
<li>bank &gt; banker</li>
<li>design &gt; designer</li>
<li>act  &gt; actor</li>
<li>direct &gt; director</li>
<li>supervise  &gt; supervisor    </li>
<li>illustrate &gt; illustrator [‘ɪləstreɪtə]</li>
<li>firefighter</li>
</ul>
<p><img src="/images/english/ef-l3u6l1.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog 1</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>[SIMON] hi, how do your job?</td>
<td></td>
</tr>
<tr>
<td>[KELLY] I love it! I’m so happy I got it.</td>
<td></td>
</tr>
<tr>
<td>[SIMON] good.</td>
<td></td>
</tr>
<tr>
<td>[KELLY] The pay’s higher than my last job. My boss is really nice.</td>
<td></td>
</tr>
<tr>
<td>[SIMON] <code>Where were you before</code>?</td>
<td></td>
</tr>
<tr>
<td>[KELLY] Sunset Computer Systems.</td>
<td></td>
</tr>
<tr>
<td>[SIMON] How was it there?</td>
<td></td>
</tr>
<tr>
<td>[KELLY] It was terrible. The pay was low. My boss was horrible. Business was really bad.</td>
<td></td>
</tr>
<tr>
<td>[SIMON] <code>How long were you there for</code>?</td>
<td></td>
</tr>
<tr>
<td>[KELLY] I was there for eight months. Long enough. But I’m much happier at Nuway Networks.</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong>Dialog 2</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>MAN: I’m very happy in my new job at Tomorrow Computers. I’m a programmer. My last  boss was awful. I wasn’t  happy there.</td>
<td></td>
</tr>
<tr>
<td>WOMAN: Where were you before  ?</td>
<td></td>
</tr>
<tr>
<td>MAN: I was at Dyno Systems. I was an engineer.</td>
<td></td>
</tr>
<tr>
<td>WOMAN: Was that your first job?</td>
<td></td>
</tr>
<tr>
<td>MAN: No. Before that  , I was at LM Computers.</td>
<td></td>
</tr>
<tr>
<td>WOMAN: Well, I’m happy that you like your new job.</td>
<td></td>
</tr>
<tr>
<td>MAN: Me, too. Thanks.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="1-2-expressions"><a href="#1-2-expressions" class="headerlink" title="1.2 expressions"></a>1.2 expressions</h3><ul>
<li>Where were you last night?</li>
<li>She was a waiter <code>before</code> she was a supervisor.</li>
<li>She was a supervisor. <code>After that</code>, she was the manager.</li>
</ul>
<h3 id="1-3-talkig-about-your-job"><a href="#1-3-talkig-about-your-job" class="headerlink" title="1.3 talkig about your job"></a>1.3 talkig about your job</h3><ul>
<li><code>How was your last job?</code></li>
<li><code>What was your last job like?</code></li>
</ul>
<ul>
<li>I like my job, but I work too many hours.</li>
<li>The pay is really good in my new job.</li>
<li>My boss is OK, but sometimes he’s difficult.</li>
</ul>
<ul>
<li>My last job was easier than this job.</li>
<li>My pay is better now, but I work longer hours.</li>
</ul>
<h2 id="2-Introducing-a-new-employee"><a href="#2-Introducing-a-new-employee" class="headerlink" title="2. Introducing a new employee"></a>2. Introducing a new employee</h2><ul>
<li>He worked in Paris for three years.</li>
<li>I moved to a new apartment last week.</li>
<li>We played tennis last weekend.</li>
</ul>
<ul>
<li>We didn’t study last night.</li>
<li>He didn’t work in London.</li>
<li>Did you study last night?</li>
<li>Where did you work before?</li>
</ul>
<ul>
<li>We lived in Beijing for two years.</li>
<li>The weekend was very busy. I didn’t relax for a minute!</li>
</ul>
<p><img src="/images/english/ef-l3u6l2.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog 1</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>[JOAN]: <code>I&#39;d like to introduce Simon</code>, our new director of engineering - a new employee</td>
<td></td>
</tr>
<tr>
<td>[JOAN]: Simon comes to us from Dyna-Tek Systems. He was the engineering manager there three years.</td>
<td></td>
</tr>
<tr>
<td>[JOAN]: He was the engineering manager.</td>
<td></td>
</tr>
<tr>
<td>[JOAN]: a master’s degree in computer science [‘saɪəns]</td>
<td></td>
</tr>
<tr>
<td>[JOAN]: He speaks fluent French.</td>
<td></td>
</tr>
<tr>
<td>[JOAN]: Simon is married and has one kids.</td>
<td></td>
</tr>
<tr>
<td>[JOAN]: Let’s welcome Simon to his new company!</td>
<td></td>
</tr>
<tr>
<td>[Simon]: Thanks, everyone, <code>for the warm welcome. I&#39;m excited to be here</code>.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-simple-verbs"><a href="#2-simple-verbs" class="headerlink" title="2. simple verbs"></a>2. simple verbs</h3><ul>
<li>What did you do last night?</li>
<li>I relaxed and played computer games.</li>
<li>How long did you work there?</li>
<li>I worked there for three years.</li>
</ul>
<table>
<thead>
<tr>
<th><strong>Dialog 2</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>[BOSS]: Julie, I’d like to introduce  Ken Stevens. Ken is our new  director of engineering.</td>
<td></td>
</tr>
<tr>
<td>[JULIE]: It’s a pleasure  to meet you, Ken. Welcome. I work in sales here.</td>
<td></td>
</tr>
<tr>
<td>[KEN]: Oh, thanks, Julie. Nice to meet you, too.</td>
<td></td>
</tr>
<tr>
<td>[BOSS]: Ken comes to us  from XYZ Systems. He was the engineering manager for five years.</td>
<td></td>
</tr>
<tr>
<td>[JULIE]: Oh, nice. How was it?</td>
<td></td>
</tr>
<tr>
<td>[KEN]: It was good, but I’m happy to be here now.</td>
<td></td>
</tr>
<tr>
<td>[JULIE]: This is a great place to work.</td>
<td></td>
</tr>
<tr>
<td>[BOSS]: Good answer, Julie!</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="3-Understanding-company-structure"><a href="#3-Understanding-company-structure" class="headerlink" title="3. Understanding company structure"></a>3. Understanding company structure</h2><ul>
<li>Human Resources (HR)</li>
<li>Operations</li>
<li>Finance   [faɪ’næns; fɪ-; ‘faɪnæns]</li>
<li>Sales and Marketing   </li>
<li>Customer Service   </li>
<li>Purchasing [ˈpɜ:rtʃəsɪŋ]</li>
<li>Research and Development (R&amp;D)</li>
<li>chief executive officer (CEO)        </li>
<li>vice president – VP</li>
<li>chief financial officer (CFO)</li>
<li>chief operations officer (COO)     </li>
<li>chief technology officer (CTO)</li>
<li>She is the director of IT.</li>
<li>buy - bought </li>
</ul>
<p><img src="/images/english/ef-l3u6l3.png" alt=""></p>
<table>
<thead>
<tr>
<th>Company departments and job titles</th>
</tr>
</thead>
<tbody>
<tr>
<td>[JOAN] So, <code>did you meet anyone good</code> last night?</td>
<td></td>
</tr>
<tr>
<td>[TODD] I got 20 business cards. I talked to a lot of people. A few of them, very interesting</td>
<td></td>
</tr>
<tr>
<td>[JOAN] How about for the <code>Finance Department</code>?</td>
<td></td>
</tr>
<tr>
<td>[TODD] <code>Take a look at this one</code>. I wrote some notes on the back.</td>
<td></td>
</tr>
<tr>
<td>[TODD] She has an MBA from Harvard. Right now, she’s working at Network Tek as the CFO.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Interesting. Is she available?</td>
<td></td>
</tr>
<tr>
<td>[TODD] She wants to talk to us.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Great! How about for HR?</td>
<td></td>
</tr>
<tr>
<td>[TODD] Umm, This guy looks good.</td>
<td></td>
</tr>
<tr>
<td>[TODD] He’s an HR manager in a small company in Springdale. He has a BA in HR management.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] It’s not a problem. Thanks for going last night.</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Use did + subject + base verb</strong></p>
<ul>
<li>Did you see him last night?</li>
<li>Did they have dinner at the hotel?</li>
</ul>
<h2 id="4-Describing-a-job"><a href="#4-Describing-a-job" class="headerlink" title="4. Describing a job"></a>4. Describing a job</h2><p><img src="/images/english/ef-l3u6l4.png" alt=""></p>
<table>
<thead>
<tr>
<th>Describing a job</th>
</tr>
</thead>
<tbody>
<tr>
<td>[TODD] Oh，Joan. <code>Do you have a minute?</code></td>
<td></td>
</tr>
<tr>
<td>[TODD] <code>I found someone good for production manager</code>.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Great. Let’s have a look.</td>
<td></td>
</tr>
<tr>
<td>[TODD] She worked at Parmatek for three years as a project manager. <code>She was responsible for</code> the production schedule.</td>
<td></td>
</tr>
<tr>
<td>[TODD] And <code>she reported to the vice president</code> of production.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Where is she working now?</td>
<td></td>
</tr>
<tr>
<td>[TODD] She’s at Blue Sky Tech.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] What’s her <code>job title</code> ?</td>
<td></td>
</tr>
<tr>
<td>[TODD] Production manager. <code>She got her BS in computer engineering in 2007</code>.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] She does sound good.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Shall I call her for an interview?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Yes, call her. send me her resume.</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>I worked there from 2009 to 2012.</li>
<li>I am responsible for marketing new products.</li>
<li>I reported to the vice president of production.</li>
</ul>
<p>My job now is at a restaurant. I’m a supervisor. I’m responsible for around 12 servers. It’s difficult work, but I like it. Before this job, I worked in a different restaurant as a server. I worked there for about 15 months. I wasn’t very happy there. I didn’t like my boss. She was very unfriendly. Before that, I was a student.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/ef-l3u5-Money-and-buying" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/05/18/English/ef-l3u5-Money-and-buying/"><strong>Money and buying</strong></a>
      <small class=article-date-index>&nbsp; 2017-05-18</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/05/18/English/ef-l3u5-Money-and-buying/" class="article-date">
  <time datetime="2017-05-17T23:06:16.000Z" itemprop="datePublished">2017-05-18</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/05/18/English/ef-l3u5-Money-and-buying/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 550px;
        margin-left: 120px !important;
}
</style>

<h2 id="1-Choosing-a-product"><a href="#1-Choosing-a-product" class="headerlink" title="1. Choosing a product"></a>1. Choosing a product</h2><ul>
<li>attractive - unattractive</li>
<li>attractive - ugly</li>
<li>safe - unsafe</li>
<li>safe - dangerous</li>
<li>reliable - unreliable</li>
<li>fancy - plain</li>
<li>powerful - weak</li>
</ul>
<p><img src="/images/english/ef-l3u5l1.png" alt=""></p>
<table>
<thead>
<tr>
<th>Choosing a product</th>
</tr>
</thead>
<tbody>
<tr>
<td>[TODD] Can I ask you a question about computers?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Sure</td>
<td></td>
</tr>
<tr>
<td>[TODD] My son’s computer’s really old and slow. <code>He needs something faster for his classes. And for all those computer games he plays</code>.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] You want a laptop, not a desktop, right?</td>
<td></td>
</tr>
<tr>
<td>[TODD] Yes, I’m thinking about the B-Tek 13-72.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Hmm. <code>You need a better computer for gaming</code>.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] You should buy the 13-82. You see, the 82’s faster and more powerful than the 72.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Yeah. And it’s also more expensive.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Twelve hundred dollars isn’t bad - for a fast, powerful laptop.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="1-1-expressions"><a href="#1-1-expressions" class="headerlink" title="1.1 expressions"></a>1.1 expressions</h3><ol>
<li>The desktop computer is <code>slower than</code> the laptop computer.</li>
<li>The desktop computer is <code>less</code> expensive <code>than</code> the laptop.</li>
<li>My old computer is slow. I <code>need something faster. (than my old computer)</code></li>
<li>For me, Chinese is more difficult than French.</li>
<li>The subway is faster than driving.</li>
</ol>
<h2 id="2-Making-a-purchase"><a href="#2-Making-a-purchase" class="headerlink" title="2. Making a purchase"></a>2. Making a purchase</h2><ul>
<li>cellphone</li>
<li>digital camera</li>
<li>tablet computer</li>
<li>smartphone</li>
<li>e-reader</li>
<li>game console</li>
<li>laptop computer [‘læptɒp]</li>
<li>desktop computer [‘desktɒp]</li>
</ul>
<p><img src="/images/english/ef-l3u5l2.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>A:  Excuse me. Could you help me? I want to buy a new laptop.</td>
<td></td>
</tr>
<tr>
<td>B: right over here. very good computer, powerful and fast and very popular for young people.</td>
<td></td>
</tr>
<tr>
<td>A: How much is it?</td>
<td></td>
</tr>
<tr>
<td>B: It’s on sale. 1120 <code>$</code></td>
<td></td>
</tr>
<tr>
<td>A: I’ll take it.</td>
<td></td>
</tr>
<tr>
<td>B: How would you like to pay?</td>
<td></td>
</tr>
<tr>
<td>A: By credit card.</td>
<td></td>
</tr>
<tr>
<td>B: Could I see some identification?</td>
<td></td>
</tr>
<tr>
<td>A: Here’s my driver’s license.</td>
<td></td>
</tr>
<tr>
<td>B: Please sign here. Thank you. Here’s your receipt.</td>
<td></td>
</tr>
<tr>
<td>A: Thank you.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-1-expressions"><a href="#2-1-expressions" class="headerlink" title="2.1 expressions"></a>2.1 expressions</h3><p>Once you have someone to help you, tell them what you need.</p>
<ul>
<li>I want to buy a new camera.  </li>
<li>I need a game console for my son.  </li>
<li>I’m looking for a TV.      </li>
<li>Could you tell me about your digital cameras?</li>
</ul>
<p>You can ask specific questions about the product you are interested in.</p>
<ul>
<li>How much is it?  </li>
<li>Is there a warranty?  </li>
<li>What’s it made of?    </li>
<li>Is it reliable?  </li>
<li>Is it easy to use?  </li>
</ul>
<p>The salesperson might tell you about the store’s promotions.</p>
<ul>
<li>It’s on sale today.</li>
<li>It’s 25% off. </li>
</ul>
<p>If you decide to buy the product, you can say:</p>
<ul>
<li>I’ll take it.  </li>
</ul>
<p>If you decide not to buy the product, you can say:</p>
<ul>
<li>I don’t think so.  </li>
<li>I need to think about it.       </li>
</ul>
<p>When you’re paying for a product, these phrases might come up:</p>
<ul>
<li>How would you like to pay?    </li>
<li>Cash or credit?</li>
</ul>
<h3 id="2-2-irregular-comparative-adjectives"><a href="#2-2-irregular-comparative-adjectives" class="headerlink" title="2.2 irregular comparative adjectives"></a>2.2 irregular comparative adjectives</h3><ul>
<li>This e-reader is easier to use than that one.</li>
<li>My new e-reader cost more than a smartphone.   </li>
</ul>
<ul>
<li>The woman is friendlier than the man.           </li>
<li>The woman is more friendly than the man.  </li>
</ul>
<ul>
<li>This store is (bad) worse than the first one.  </li>
<li>The train station is (far) farther from here than the bus station.  </li>
</ul>
<ul>
<li>Are you feeling better or worse?</li>
<li>It’s less expensive to buy online.</li>
<li>The online price is less than the store price.</li>
<li>I need something easier to use.</li>
<li>I’ll take this one. It’s better.</li>
<li>Do you have a cheaper one?</li>
</ul>
<h2 id="3-Returning-a-purchase"><a href="#3-Returning-a-purchase" class="headerlink" title="3. Returning a purchase"></a>3. Returning a purchase</h2><ul>
<li>jeans</li>
<li>jacket</li>
<li>skirt [skɜːt]</li>
<li>shirt</li>
<li>dress</li>
<li>shorts</li>
<li>socks</li>
</ul>
<p><img src="/images/english/ef-l3u5l3.png" alt=""></p>
<table>
<thead>
<tr>
<th>Returning a purchase</th>
</tr>
</thead>
<tbody>
<tr>
<td>JACK:  Oh! This digital camera!</td>
<td></td>
</tr>
<tr>
<td>NANCY: What’s the problem ?</td>
<td></td>
</tr>
<tr>
<td>JACK: It doesn’t work.</td>
<td></td>
</tr>
<tr>
<td>NANCY: Is it broken?</td>
<td></td>
</tr>
<tr>
<td>JACK: No, it’s just too difficult to use.</td>
<td></td>
</tr>
<tr>
<td>NANCY: Can I help ?</td>
<td></td>
</tr>
<tr>
<td>JACK: No, I don’t like it. I’m going to the store.</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td></td>
</tr>
<tr>
<td>SALE: How can I help you?</td>
<td></td>
</tr>
<tr>
<td>JACK: I’d like to return this digital camera.</td>
<td></td>
</tr>
<tr>
<td>SALE: What’s the problem?</td>
<td></td>
</tr>
<tr>
<td>JACK: There’s nothing wrong. it’s just too difficult to use. I don’t like it.</td>
<td></td>
</tr>
<tr>
<td>SALE: Do you have the receipt?</td>
<td></td>
</tr>
<tr>
<td>JACK: Yes, Here it is.</td>
<td></td>
</tr>
<tr>
<td>SALE: Here’s your refund of <code>$</code>27.99.</td>
<td></td>
</tr>
<tr>
<td>JACK: Thank you!</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="3-1-some-wrong"><a href="#3-1-some-wrong" class="headerlink" title="3.1 some wrong"></a>3.1 some wrong</h3><ul>
<li>What’s the problem?</li>
<li>What’s wrong with it?</li>
<li>What’s the matter?</li>
<li>What seems to be the problem? （customer service..）</li>
</ul>
<ul>
<li>It’s too big.    </li>
<li>It doesn’t fit.    </li>
<li>There’s a hole in it.</li>
<li>It’s stained. [steɪnd]</li>
<li>It’s damaged.    </li>
<li>It doesn’t work.</li>
<li>It’s broken.</li>
<li>It’s too difficult to use.</li>
<li>I don’t like it.</li>
</ul>
<h3 id="3-2-returning-a-purchase"><a href="#3-2-returning-a-purchase" class="headerlink" title="3.2 returning a purchase"></a>3.2 returning a purchase</h3><ul>
<li>I’d like to return these shorts.</li>
<li>I’d like a refund, please.    </li>
<li>I’d like to exchange this dress.          </li>
<li>There’s nothing wrong. I just don’t like it</li>
</ul>
<p>The customer service representative will likely ask why you want to return or exchange the item.</p>
<ul>
<li>What seems to be the problem?    </li>
<li>Is there something wrong with it?</li>
<li>Do you have the receipt?</li>
<li>Here’s your refund of $27.99.</li>
</ul>
<h2 id="4-Talking-about-prices"><a href="#4-Talking-about-prices" class="headerlink" title="4. Talking about prices"></a>4. Talking about prices</h2><ul>
<li>gas</li>
<li>office supplies</li>
<li>healthcare  [‘helθkeə] </li>
<li>entertainment</li>
<li>utilities  [juː’tɪlɪtɪz]</li>
<li>housing [ˈhaʊzɪŋ] 住房</li>
<li>clothing</li>
<li>gasoline</li>
</ul>
<p><img src="/images/english/ef-l3u5l4.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>A: gas price is going up fast.</td>
<td></td>
</tr>
<tr>
<td>B: yeah ! I know</td>
<td></td>
</tr>
<tr>
<td>A: office supplies price is going up fast. .</td>
<td></td>
</tr>
<tr>
<td>B: Ouch !</td>
<td></td>
</tr>
<tr>
<td>A: going to hurt，also，next month，the building going to increase</td>
<td></td>
</tr>
<tr>
<td>B: That’s terrible !</td>
<td></td>
</tr>
<tr>
<td>A: everything is going up.</td>
<td></td>
</tr>
<tr>
<td>B: I do some good news. The company sales are up</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="4-1-expressions"><a href="#4-1-expressions" class="headerlink" title="4.1 expressions"></a>4.1 expressions</h3><p>Use these expressions to explain an increase in something:</p>
<ul>
<li>Prices are going up.</li>
<li>The rent is going to increase.</li>
<li>Company sales are up.    </li>
</ul>
<p>Use these expressions to explain a decrease in something:</p>
<ul>
<li>Company sales are going down.                          </li>
<li>The temperature is going to decrease.                             </li>
<li>Gas prices are down. </li>
</ul>
<p>When we get bad news about an increase or decrease, we can say that it hurts. </p>
<ul>
<li>A: The price of food is up 25%.</li>
<li>B: Ouch! That hurts.</li>
</ul>
<p>The amount of money we need to live on is called the cost of living. </p>
<ul>
<li>The cost of living is going up and up.    <h3 id="4-2-increases-and-decreases"><a href="#4-2-increases-and-decreases" class="headerlink" title="4.2 increases and decreases"></a>4.2 increases and decreases</h3></li>
</ul>
<p>More bad  news today: The prices of housing  and utilities are both up by more than 20%. Gas prices are going to increase  for the next few months. The cost  of education is also going up.  There is some good  news: The price of food is down by 10%.</p>
<ul>
<li>Technology prices are decreasing.</li>
<li>Gas prices are increasing.</li>
<li>The price of entertainment is up.</li>
<li>The cost of living is going down.</li>
<li>The cost of education is going up.</li>
<li>Food prices are down.</li>
</ul>
<h3 id="4-3-adverbs-with-‘-ly’-or-‘-ily’"><a href="#4-3-adverbs-with-‘-ly’-or-‘-ily’" class="headerlink" title="4.3 adverbs with ‘-ly’ or ‘-ily’"></a>4.3 adverbs with ‘-ly’ or ‘-ily’</h3><ul>
<li>The price is decreasing slowly.</li>
<li><p>The price is decreasing quickly.                  </p>
</li>
<li><p>The people in the office are working busily.        </p>
</li>
<li>He’s walking lazily down the street.                </li>
</ul>
<p>Not all adjectives can be turned into adverbs with -ly. Here are three important examples:</p>
<p><code>good &gt; well,  fast &gt; fast,  hard &gt; hard</code></p>
<ul>
<li>He is doing well in school.                        </li>
<li>Gas prices are going up fast.</li>
<li>She studies really hard.</li>
</ul>
<ul>
<li>People can’t pay for it easily.</li>
</ul>
<h3 id="4-4-reading"><a href="#4-4-reading" class="headerlink" title="4.4 reading"></a>4.4 reading</h3><p>In my country, prices are always increasing. Healthcare and housing costs are going up fast. Prices for food are also increasing, but more slowly. People live well, but the cost of living is difficult. The good news is that technology prices are decreasing. I want to buy a new tablet computer, but it’s too expensive right now.</p>
<h3 id="4-5-writing"><a href="#4-5-writing" class="headerlink" title="4.5 writing"></a>4.5 writing</h3><p>In my country, the price of everything is going up. Housing is very expensive, and the price of gasoline is increasing quickly. I donot know how people do it. The cost of living is very difficult. Transportation and food are not expensive, but they are going up. I need a good job.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/ef-l3u4-Holidays-and-celebrations" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/05/16/English/ef-l3u4-Holidays-and-celebrations/"><strong>Holidays and celebrations</strong></a>
      <small class=article-date-index>&nbsp; 2017-05-16</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/05/16/English/ef-l3u4-Holidays-and-celebrations/" class="article-date">
  <time datetime="2017-05-15T23:06:16.000Z" itemprop="datePublished">2017-05-16</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/05/16/English/ef-l3u4-Holidays-and-celebrations/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 550px;
        margin-left: 120px !important;
}
</style>


<ul>
<li>soda</li>
<li>snacks [snæks]</li>
<li>dancing</li>
<li>wine  [waɪn] </li>
</ul>
<h2 id="1-Inviting-someone-to-a-party"><a href="#1-Inviting-someone-to-a-party" class="headerlink" title="1. Inviting someone to a party"></a>1. Inviting someone to a party</h2><p><img src="/images/english/ef-l3u4l1.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>A: Hi, Mona. What are you doing  tonight?</td>
<td></td>
</tr>
<tr>
<td>B: Umm, I’m going to the gym in an hour. Why?</td>
<td></td>
</tr>
<tr>
<td>A: I’m having people over for a little birthday party at seven.</td>
<td></td>
</tr>
<tr>
<td>B: Happy birthday! I’d love to come. And I know the perfect gift for you.</td>
<td></td>
</tr>
<tr>
<td>A: Thanks! Paul’s making  a big chocolate cake later.</td>
<td></td>
</tr>
<tr>
<td>B: Ooh, cake! I can bring some snacks, or wine and sodas.</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>Are you going to that party on Wednesday?</li>
<li>I’m getting together with some friends in an hour.</li>
<li>We’re having some friends <code>over to dinner later</code>.</li>
<li>She’s making the cake tomorrow.<br>&nbsp;</li>
<li>Are you free on Sunday?</li>
<li>Would you like to come to a party?<br>&nbsp;</li>
<li>What time should I come?</li>
<li>Thanks for the invitation</li>
<li>I’m afraid I’m busy.</li>
</ul>
<h2 id="2-Talking-with-people-at-a-party"><a href="#2-Talking-with-people-at-a-party" class="headerlink" title="2. Talking with people at a party"></a>2. Talking with people at a party</h2><p><img src="/images/english/ef-l3u4l2.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>[SALLY] Hey, Todd. Thanks for coming.</td>
<td></td>
</tr>
<tr>
<td>[TODD] <code>Thanks for inviting me</code>! It’s a great party.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] How’s your wife feeling?</td>
<td></td>
</tr>
<tr>
<td>[TODD] poor Angela. She had a cold.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] I’m sorry to hear that. Give her my best.</td>
<td></td>
</tr>
<tr>
<td>[TODD] I will. So, what’s happening with you?.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] not much. I’m going to the birthday party next week, My grandmother’s 87.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Eighty-seven! That’s amazing.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] yep, it is. <code>What about you? Anything new?</code></td>
<td></td>
</tr>
<tr>
<td>[TODD] Well, Take my wife go to the bangkok.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Wow! That sounds wonderful!</td>
<td></td>
</tr>
<tr>
<td>[TODD] Angela is sick. I should go.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] I understand. <code>Thanks again for the coming</code>.</td>
<td></td>
</tr>
<tr>
<td>[TODD] Bye! Have a good evening. Thanks for the party! See you soon.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-1-party-expressions"><a href="#2-1-party-expressions" class="headerlink" title="2.1 party expressions"></a>2.1 party expressions</h3><ul>
<li>Thanks for coming to the party.</li>
<li>Thanks for having this party.</li>
<li>Anything new?</li>
<li>Great snacks. Do you enjoy cooking?</li>
<li>How are you feeling?<br>&nbsp;</li>
<li>That sounds incredible.   [ɪn’kredɪb(ə)l] ，惊人的 </li>
<li>That’s awful!<br>&nbsp;</li>
<li>It’s late. I should go.</li>
<li>Say hello to Jose. (向若泽问好)</li>
<li>Thanks for the amazing party!</li>
</ul>
<h2 id="3-Discussing-vacation-plans"><a href="#3-Discussing-vacation-plans" class="headerlink" title="3. Discussing vacation plans"></a>3. Discussing vacation plans</h2><ul>
<li>tickets</li>
<li>film festival</li>
<li>films</li>
<li>parade [pəˈreɪd]</li>
<li>costume  [‘kɒstjuːm] n. 服装</li>
<li>entertaining [entə’xteɪnɪŋ]</li>
<li>crowded [‘kraʊdɪd]<br>&nbsp;</li>
<li>What are you going to do?</li>
<li>I’m going to go to the film festival.</li>
<li>How many films are you going to see?</li>
<li>Are you going to drive there?</li>
<li>I’m going to take the train.</li>
<li>Hmm. What are you going to do after that?</li>
</ul>
<p>A: Which costume are you going to wear?<br>B: Let me see … The red one, I think.</p>
<p>A: Is the festival going to be crowded?<br>B: Hmm … I don’t know.</p>
<p><img src="/images/english/ef-l3u4l3.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>A: Hi</td>
<td></td>
</tr>
<tr>
<td>B: I and my parents are going to go on vacaton.</td>
<td></td>
</tr>
<tr>
<td>A: you go on the vacation. Great! where are you going?</td>
<td></td>
</tr>
<tr>
<td>B: I’m going to travel to Scotland.</td>
<td></td>
</tr>
<tr>
<td>A: Nice, What are you doing to do there?</td>
<td></td>
</tr>
<tr>
<td>B: I’m going to see 7 films and 4 night</td>
<td></td>
</tr>
<tr>
<td>A: Fantastic! That’s a lot movies.</td>
<td></td>
</tr>
<tr>
<td>B: I’m going to the mountains. It’s beatiful.</td>
<td></td>
</tr>
<tr>
<td>B: We are going to go skiing.</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>DONALD: I’m going to the Fresh Film Festival  this summer.</td>
<td></td>
</tr>
<tr>
<td>LIZA: Sounds like fun. What films are you seeing?</td>
<td></td>
</tr>
<tr>
<td>DONALD: Lots. Look – there are hundreds in the program  .</td>
<td></td>
</tr>
<tr>
<td>LIZA: Are the tickets expensive?</td>
<td></td>
</tr>
<tr>
<td>DONALD: Fifty dollars. But there are so many different events.</td>
<td></td>
</tr>
<tr>
<td>LIZA: What? You’re paying Fifty dollars a ticket? Sounds very entertaining.</td>
<td></td>
</tr>
<tr>
<td>DONALD: Yeah. There’s a big parade  on the first night. It has about a thousand people.</td>
<td></td>
</tr>
</tbody>
</table>
<p>LIZA: What are you going to do at the festival?<br>DONALD: We are going to dance in the parade.</p>
<h3 id="3-1-expressions"><a href="#3-1-expressions" class="headerlink" title="3.1 expressions"></a>3.1 expressions</h3><ul>
<li>I’m going to an exciting festival.</li>
<li>They’re showing films from many countries.</li>
<li>I know! The festival is a lot of fun.</li>
<li>Exactly. A good film is very entertaining.<br>&nbsp;</li>
<li>There are some cool events this weekend</li>
<li>People are wearing costumes</li>
<li>There’s a long parade with music and dancing.</li>
<li>I enjoy watching the fireworks.<br>&nbsp;</li>
<li>Wow! This place is really crowded.<br>&nbsp;</li>
</ul>
<h2 id="4-Describing-a-holiday-or-celebration"><a href="#4-Describing-a-holiday-or-celebration" class="headerlink" title="4. Describing a holiday or celebration"></a>4. Describing a holiday or celebration</h2><ul>
<li>partying</li>
<li>Diwali [diːˈwɑːli]</li>
<li>celebrate</li>
<li>How long does Carnaval last for?</li>
<li>The big events last four days.</li>
<li>We usually party for a week.</li>
</ul>
<p><img src="/images/english/ef-l3u4l4.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog main</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>A: Hi,Sorry, we are…</td>
<td></td>
</tr>
<tr>
<td>B: How are take? I like music.</td>
<td></td>
</tr>
<tr>
<td>A: Yup. It’s summer. you know everybody celebrate it right now</td>
<td></td>
</tr>
<tr>
<td>B: It’s Carnaval.</td>
<td></td>
</tr>
<tr>
<td>A: Carnaval.</td>
<td></td>
</tr>
<tr>
<td>C: How do you celebrate?</td>
<td></td>
</tr>
<tr>
<td>A: Some my friends are come to school.</td>
<td></td>
</tr>
<tr>
<td>C: Sounds good !</td>
<td></td>
</tr>
<tr>
<td>B: How long does Carnaval last?</td>
<td></td>
</tr>
<tr>
<td>A: The big events <strong>last</strong> a few days, We usually party for a week.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="4-1-expressions"><a href="#4-1-expressions" class="headerlink" title="4.1 expressions"></a>4.1 expressions</h3><ul>
<li>How long does it take to walk from the hotel to the parade? </li>
<li>It takes a half-hour.<br>&nbsp;</li>
<li>The big events <strong>last</strong> four days</li>
<li>We celebrate <strong>for</strong> a week.</li>
<li>I party a lot <strong>during</strong> the summer.</li>
<li>What do you do <strong>during</strong> Carnaval?<br>&nbsp;</li>
<li>How long does it <strong>take to walk</strong>?</li>
<li>I usually visit my family <strong>for</strong> 10 days.</li>
<li>We celebrate <strong>for</strong> a week.</li>
</ul>
<table>
<thead>
<tr>
<th><strong>Dialog two</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>LEAH: How long does the Sun Festival last ?</td>
<td></td>
</tr>
<tr>
<td>JASON: It lasts, um, six days.</td>
<td></td>
</tr>
<tr>
<td>LEAH: What do you do <strong>during</strong> the festival?</td>
<td></td>
</tr>
<tr>
<td>JASON: Let’s see … We eat and dance <strong>for</strong> a week. We celebrate the sun …</td>
<td></td>
</tr>
<tr>
<td>LEAH: Sounds fantastic  .</td>
<td></td>
</tr>
<tr>
<td>JASON: Definitely. I’m going to make my own costume this year.</td>
<td></td>
</tr>
<tr>
<td>LEAH: Wow! How long does it <strong>take</strong> to make a costume?</td>
<td></td>
</tr>
<tr>
<td>JASON: I’m slow. It <code>takes</code> me about three weeks.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="4-2-asking-about-a-holiday-or-celebration"><a href="#4-2-asking-about-a-holiday-or-celebration" class="headerlink" title="4.2 asking about a holiday or celebration"></a>4.2 asking about a holiday or celebration</h3><ul>
<li>A: How do you celebrate New Year’s?</li>
<li>B: We usually watch the big fireworks show.</li>
<li>A: What do people usually do? </li>
<li>B: They usually have a big meal.<br>&nbsp;</li>
<li>A: How long does the holiday last?</li>
<li>B: People usually celebrate for six nights. </li>
<li>A: What do people do during the festival?</li>
<li>B: They dance and sing songs.</li>
</ul>
<h3 id="4-3-adjectives"><a href="#4-3-adjectives" class="headerlink" title="4.3 adjectives"></a>4.3 adjectives</h3><ul>
<li>special - ordinary </li>
<li>entertaining - dull </li>
<li>funny - serious</li>
<li>colorful - colorless     </li>
<li>gorgeous [‘gɔːdʒəs] - hideous  [‘hɪdɪəs]</li>
<li>popular - unpopular </li>
<li>noisy - quiet</li>
<li>crowded - empty </li>
</ul>
<h3 id="4-4-writing"><a href="#4-4-writing" class="headerlink" title="4.4 writing"></a>4.4 writing</h3><p>The Sziget Festival is my favorite. This big festival lasts for 4 days, The Sziget Festival is a special place with a forest. There are 10 entertaining, crowded events every day. They have popular music and art exhibitions. People usually camp in the forest and have great fun.</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-spark/spark-ALS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/05/07/spark/spark-ALS/"><strong>Spark ALS</strong></a>
      <small class=article-date-index>&nbsp; 2017-05-07</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/05/07/spark/spark-ALS/" class="article-date">
  <time datetime="2017-05-07T02:28:21.000Z" itemprop="datePublished">2017-05-07</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/05/07/spark/spark-ALS/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://spark.apache.org/examples.html" target="_blank" rel="external">Spark.apache.org</a><br><a href="http://blog.javachen.com/2015/06/07/spark-configuration.html" target="_blank" rel="external">Java Chen Spark</a></p>
<p>以下为手动计算流程 :</p>
<h3 id="4-2-启动-spark-shell"><a href="#4-2-启动-spark-shell" class="headerlink" title="4.2 启动 spark-shell"></a>4.2 启动 spark-shell</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SPARK_CLASSPATH=/opt/cloudera/parcels/CDH/lib/sqoop/mysql-connector-java-5.1.40.jar spark-shell</span><br></pre></td></tr></table></figure>
<h3 id="4-3-输入输出-相关变量"><a href="#4-3-输入输出-相关变量" class="headerlink" title="4.3 输入输出:相关变量"></a>4.3 输入输出:相关变量</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">val inputTable = <span class="string">"mds_user_coupon_bhv"</span></span><br><span class="line">val inputUrl = <span class="string">"jdbc:mysql://192.168.xxx.xx:3306/com_profile?user=your_name&amp;password=your_password"</span></span><br><span class="line">val outputTable = <span class="string">"mds_rs_shop_coupon_tmp"</span></span><br></pre></td></tr></table></figure>
<h3 id="4-4-核心程序代码"><a href="#4-4-核心程序代码" class="headerlink" title="4.4 核心程序代码"></a>4.4 核心程序代码</h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line">package com.x.rs.service</span><br><span class="line"></span><br><span class="line">import java.text.SimpleDateFormat</span><br><span class="line">import java.util.Date</span><br><span class="line">import java.util.Properties</span><br><span class="line"></span><br><span class="line">import org.apache.spark.sql.Row</span><br><span class="line">import org.apache.spark.sql.types._</span><br><span class="line"></span><br><span class="line">import org.apache.spark.&#123;SparkConf, SparkContext&#125;</span><br><span class="line"></span><br><span class="line">import org.apache.spark.mllib.recommendation.&#123;ALS, Rating&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">  * Date : 2017-04-20</span><br><span class="line">  * Author : Blair Chan</span><br><span class="line">  */</span><br><span class="line">object RsCouponCalc &#123;</span><br><span class="line">  def main(args: Array[String]) &#123;</span><br><span class="line"></span><br><span class="line">    println("start...")</span><br><span class="line"></span><br><span class="line">    if (args.length &lt; 3) &#123;</span><br><span class="line">      System.err.println("Usage: &lt;file&gt;")</span><br><span class="line">      System.exit(1)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    val inputTable = args(0) // Should be some file on your system // conf = new SparkConf().setAppName(appName).setMaster("local");</span><br><span class="line">    val inputUrl = args(1)</span><br><span class="line">    val outputTable = args(2)</span><br><span class="line"></span><br><span class="line">    val conf = new SparkConf().setAppName("SparkRsOne");</span><br><span class="line">    val sc = new SparkContext(conf)</span><br><span class="line">    val sqlContext = new org.apache.spark.sql.SQLContext(sc)</span><br><span class="line"></span><br><span class="line">    //    val rawData = sc.textFile(inputFile)</span><br><span class="line">    //    val rawRatings = rawData.map(_.split("\t").take(3))</span><br><span class="line"></span><br><span class="line">    val url = inputUrl</span><br><span class="line">    val prop = new Properties()</span><br><span class="line"></span><br><span class="line">    val dfForRawData = sqlContext.read.jdbc(url, inputTable, prop)</span><br><span class="line"></span><br><span class="line">    val ratings_tmp = dfForRawData.map &#123; row =&gt; (row(1).toString().toInt, row(4).toString().toInt, row(6).toString().toDouble) &#125;</span><br><span class="line"></span><br><span class="line">    val ratings = ratings_tmp.map &#123; case (uid, couponId, rating) =&gt; Rating(uid.toInt, couponId.toInt, rating.toDouble) &#125;</span><br><span class="line"></span><br><span class="line">    val model = ALS.train(ratings, 50, 10, 0.01)</span><br><span class="line"></span><br><span class="line">    model.userFeatures.count</span><br><span class="line"></span><br><span class="line">    val K = 10</span><br><span class="line"></span><br><span class="line">    model.recommendProductsForUsers(K)</span><br><span class="line"></span><br><span class="line">    val originResultRdd1 = model.recommendProductsForUsers(K)</span><br><span class="line"></span><br><span class="line">    val curDate = new Date()</span><br><span class="line">    val createDateString = new SimpleDateFormat("yyyy-MM-dd").format(curDate)</span><br><span class="line"></span><br><span class="line">    val originResultRdd2 = originResultRdd1.map(tuple =&gt; &#123;</span><br><span class="line">      val uid = tuple._1</span><br><span class="line">      val product = tuple._2.map &#123; case Rating(user, product, score) =&gt; (product.toString, score.toString) &#125;</span><br><span class="line">      (uid, product)</span><br><span class="line">    &#125;).flatMap &#123;</span><br><span class="line">      case (uid, product) =&gt; &#123;</span><br><span class="line">        product.map &#123; case (itemId, score) =&gt; Row.apply(uid.toLong, itemId.toString, score.toDouble, createDateString.toString) &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // println(originResultRdd2.first())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    val schema = StructType(</span><br><span class="line">      StructField("uid", LongType) ::</span><br><span class="line">        StructField("coupon_id", LongType) ::</span><br><span class="line">        StructField("score", DoubleType) ::</span><br><span class="line">        StructField("calc_date", StringType) :: Nil)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    val df = sqlContext.createDataFrame(originResultRdd2, schema)</span><br><span class="line"></span><br><span class="line">    df.insertIntoJDBC(url, outputTable, false)</span><br><span class="line">    // 设置为 true，则为 删除表，然后自动创建，再插入</span><br><span class="line"></span><br><span class="line">    println("end !")</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>DF 通过插入 RMDB.  schema 可以通过反射来使得程序扩展性提高。</p>
</blockquote>
<p><a href="http://www.cnblogs.com/yaohaitao/articles/5681984.html" target="_blank" rel="external">spark sql internet</a></p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-spark/spark-SQL" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/04/28/spark/spark-SQL/"><strong>Spark之路—Spark SQL编程</strong></a>
      <small class=article-date-index>&nbsp; 2017-04-28</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/04/28/spark/spark-SQL/" class="article-date">
  <time datetime="2017-04-28T07:28:21.000Z" itemprop="datePublished">2017-04-28</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/spark/">spark</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/04/28/spark/spark-SQL/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>Spark SQL，可对不同格式的数据执行ETL操作（如JSON，Parquet，数据库）然后完成特定的查询操作。</p>
<ul>
<li>DataFrame</li>
<li>Data Sources</li>
<li>JDBC Server</li>
</ul>
<p>使用Spark SQL时，最主要的两个组件就是 <strong>DataFrame</strong> 和 <strong>SQLContext</strong>。</p>
<h2 id="1-DataFrame"><a href="#1-DataFrame" class="headerlink" title="1. DataFrame"></a>1. DataFrame</h2><p>DataFrame 是一个分布式的，按照命名列的形式组织的数据集合。DataFrame基于R语言中的dataframe概念，与关系型数据库中的数据库表类似。</p>
<blockquote>
<p>之前版本的Spark SQL API中的SchemaRDD已经更名为DataFrame</p>
</blockquote>
<p>调用将DataFrame的内容作为行RDD（RDD of Rows）返回的<a href="https://spark.apache.org/docs/1.3.0/api/scala/index.html#org.apache.spark.sql.DataFrame" target="_blank" rel="external">rdd方法</a>，可以将DataFrame转换成RDD。</p>
<p><strong>创建 DataFrame</strong></p>
<p>可以通过如下 <font color="#c7254e">数据源创建 DataFrame</font> : </p>
<ul>
<li>已有的RDD</li>
<li>结构化数据文件</li>
<li>JSON数据集</li>
<li>Hive表</li>
<li>外部数据库</li>
</ul>
<p><strong>DataFrame API</strong></p>
<p>Spark SQL和DataFrame API已经在下述几种程序设计语言中实现：</p>
<ul>
<li><a href="https://spark.apache.org/docs/1.3.0/api/scala/index.html#org.apache.spark.sql.package" target="_blank" rel="external">Scala DataFrame API</a></li>
<li><a href="https://spark.apache.org/docs/1.3.0/api/java/index.html?org/apache/spark/sql/api/java/package-summary.html" target="_blank" rel="external">Java DataFrame API</a></li>
<li><a href="https://spark.apache.org/docs/1.3.0/api/python/pyspark.sql.html" target="_blank" rel="external">Python DataFrame API</a></li>
</ul>
<h2 id="2-SQLContext"><a href="#2-SQLContext" class="headerlink" title="2. SQLContext"></a>2. SQLContext</h2><p>SQLContext封装Spark中的所有关系型功能。可以用之前的示例中的现有SparkContext创建SQLContext。</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> sqlContext = <span class="keyword">new</span> org.apache.spark.sql.<span class="type">SQLContext</span>(sc)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="http://spark.apache.org/docs/latest/api/scala/index.html#org.apache.spark.sql.SQLContext" target="_blank" rel="external">SQLContext</a><br><a href="https://spark.apache.org/docs/1.3.0/api/scala/index.html#org.apache.spark.sql.hive.HiveContext" target="_blank" rel="external">HiveContext</a></p>
</blockquote>
<h2 id="3-JDBC数据源"><a href="#3-JDBC数据源" class="headerlink" title="3. JDBC数据源"></a>3. JDBC数据源</h2><p>JDBC 数据源 可用于通过JDBC API读取关系型数据库中的数据。相比于使用JdbcRDD，应该将JDBC数据源的方式作为首选，因为JDBC数据源能够将结果作为DataFrame对象返回，直接用Spark SQL处理或与其他数据源连接。</p>
<p>为确保Spark Shell程序有足够的内存，可以在运行spark-shell命令时，加入driver-memory命令行参数，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">spark-shell.cmd --driver-memory 1G</span><br></pre></td></tr></table></figure>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><p><a href="http://www.infoq.com/cn/articles/apache-spark-sql" target="_blank" rel="external">用Apache Spark进行大数据处理——第二部分：Spark SQL</a></p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-spark/spark-read-mysql-four-functions" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/04/20/spark/spark-read-mysql-four-functions/"><strong>Spark Read Mysql 的四种方式 (not finish)</strong></a>
      <small class=article-date-index>&nbsp; 2017-04-20</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/04/20/spark/spark-read-mysql-four-functions/" class="article-date">
  <time datetime="2017-04-20T07:28:21.000Z" itemprop="datePublished">2017-04-20</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/spark/">spark</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/04/20/spark/spark-read-mysql-four-functions/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>目前 <code>Spark</code> 支持四种方式从数据库中读取数据，这里以 <code>MySQL</code> 为例进行介绍。</p>
<h2 id="Startup-spark-shell"><a href="#Startup-spark-shell" class="headerlink" title="Startup spark-shell"></a>Startup spark-shell</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SPARK_CLASSPATH=/opt/cloudera/parcels/CDH/lib/sqoop/mysql-connector-java-5.1.40.jar spark-shell</span><br></pre></td></tr></table></figure>
<h2 id="1-不指定查询条件"><a href="#1-不指定查询条件" class="headerlink" title="1. 不指定查询条件"></a>1. 不指定查询条件</h2><h3 id="1-1-function-define"><a href="#1-1-function-define" class="headerlink" title="1.1 function define"></a>1.1 function define</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jdbc</span></span>(url: <span class="type">String</span>, table: <span class="type">String</span>, properties: <span class="type">Properties</span>): <span class="type">DataFrame</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-detail-example"><a href="#1-2-detail-example" class="headerlink" title="1.2 detail example"></a>1.2 detail example</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> url = <span class="string">"jdbc:mysql://192.168.***.**:3306/your_lib_name?user= your_username&amp;password=your_password"</span></span><br><span class="line"><span class="keyword">import</span> java.util.<span class="type">Properties</span></span><br><span class="line"><span class="keyword">val</span> prop = <span class="keyword">new</span> <span class="type">Properties</span>()</span><br><span class="line"><span class="keyword">val</span> df = sqlContext.read.jdbc(url, <span class="string">"mds_user_coupon_bhv"</span>, prop )</span><br><span class="line">println(df.count())</span><br><span class="line">println(df.rdd.partitions.size)</span><br></pre></td></tr></table></figure>
<p>我们运行上面的程序，可以看到df.rdd.partitions.size输出结果是1，这个结果的含义是iteblog表的所有数据都是由RDD的一个分区处理的，所以说，如果你这个表很大，很可能会出现OOM</p>
<blockquote>
<p>Note : 这种方式在数据量大的时候不建议使用。</p>
</blockquote>
<h2 id="2-指定数据库字段的范围"><a href="#2-指定数据库字段的范围" class="headerlink" title="2. 指定数据库字段的范围"></a>2. 指定数据库字段的范围</h2><p>这种方式就是通过指定数据库中某个字段的范围，但是<code>这个字段必须是数字</code>，来看看这个函数的函数原型：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jdbc</span></span>(</span><br><span class="line">    url: <span class="type">String</span>,</span><br><span class="line">    table: <span class="type">String</span>,</span><br><span class="line">    columnName: <span class="type">String</span>,</span><br><span class="line">    lowerBound: <span class="type">Long</span>,</span><br><span class="line">    upperBound: <span class="type">Long</span>,</span><br><span class="line">    numPartitions: <span class="type">Int</span>,</span><br><span class="line">    connectionProperties: <span class="type">Properties</span>): <span class="type">DataFrame</span></span><br></pre></td></tr></table></figure>
<p>… not finish</p>
<h2 id="3-根据任意字段进行分区"><a href="#3-根据任意字段进行分区" class="headerlink" title="3. 根据任意字段进行分区"></a>3. 根据任意字段进行分区</h2><p>… not finish</p>
<h2 id="4-通过-load-获取"><a href="#4-通过-load-获取" class="headerlink" title="4. 通过 load 获取"></a>4. 通过 load 获取</h2><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> df = sqlContext.load(<span class="string">"jdbc"</span>, <span class="type">Map</span>(<span class="string">"url"</span> -&gt; <span class="string">"jdbc:mysql://..."</span>, </span><br><span class="line">              <span class="string">"dbtable"</span> -&gt; <span class="string">"mds_user_coupon_bhv"</span>)</span><br><span class="line">         )</span><br></pre></td></tr></table></figure>
<p>换一种更正式的写法如下 :</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> df = sqlContext.read.format(<span class="string">"jdbc"</span>).options(<span class="type">Map</span>(</span><br><span class="line">      <span class="string">"url"</span> -&gt; <span class="string">"jdbc:mysql://192.168.***.**:3306/your_lib_name?user= your_username&amp;password=your_password"</span>,</span><br><span class="line">      <span class="string">"dbtable"</span> -&gt; <span class="string">"mds_user_coupon_bhv"</span>)</span><br><span class="line">   ).load()</span><br></pre></td></tr></table></figure>
<p>options函数支持url、driver、dbtable、partitionColumn、lowerBound、upperBound以及numPartitions选项，这个和方法二的参数一致。其内部实现原理部分和方法二大体一致。同时load方法还支持json、orc等数据源的读取。</p>
<blockquote>
<p>Reading notes</p>
</blockquote>
<h2 id="5-Ref"><a href="#5-Ref" class="headerlink" title="5. Ref"></a>5. Ref</h2><blockquote>
<p>尊重原创，转载请注明： 转载自过往记忆（<a href="http://www.iteblog.com/）" target="_blank" rel="external">http://www.iteblog.com/）</a> </p>
</blockquote>
<p><a href="http://blog.csdn.net/mlljava1111/article/details/50432569" target="_blank" rel="external">Spark Read Mysql-csdn</a></p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ops/ops-new-macosx-install-soft" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/03/22/ops/ops-new-macosx-install-soft/"><strong>New Mac Install Brew Iterm Zsh</strong></a>
      <small class=article-date-index>&nbsp; 2017-03-22</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/03/22/ops/ops-new-macosx-install-soft/" class="article-date">
  <time datetime="2017-03-22T08:43:21.000Z" itemprop="datePublished">2017-03-22</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/devops/">devops</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/03/22/ops/ops-new-macosx-install-soft/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-install-homebrew"><a href="#1-install-homebrew" class="headerlink" title="1. install homebrew"></a>1. install homebrew</h2><p>Mac 下面的包管理工具，通过 Github 托管适合 Mac 的编译配置以及 Patch，可以方便的安装开发工具。</p>
<p>Mac 自带ruby 所以安装起来很方便，同时它也会自动把git也给你装上。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/bin/ruby <span class="_">-e</span> <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>安装过程可能会有点慢，完成之后，建议执行一下自检，brew doctor<br>看到<br>Your system is ready to brew.<br>那么恭喜你的 brew 已经可以开始使用了。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew install wget tree</span><br></pre></td></tr></table></figure>
<hr>
<p>brew 常用命令： （所有软件以PHP5.5为例子）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew update                        <span class="comment">#更新brew可安装包，建议每次执行一下</span></span><br><span class="line">brew search php55                  <span class="comment">#搜索php5.5</span></span><br><span class="line">brew tap josegonzalez/php          <span class="comment">#安装扩展&lt;gihhub_user/repo&gt; </span></span><br><span class="line">brew tap                          <span class="comment">#查看安装的扩展列表</span></span><br><span class="line">brew install php55                <span class="comment">#安装php5.5</span></span><br><span class="line">brew remove  php55                <span class="comment">#卸载php5.5</span></span><br><span class="line">brew upgrade php55                <span class="comment">#升级php5.5</span></span><br><span class="line">brew options php55                <span class="comment">#查看php5.5安装选项</span></span><br><span class="line">brew info    php55                <span class="comment">#查看php5.5相关信息</span></span><br><span class="line">brew home    php55                <span class="comment">#访问php5.5官方网站</span></span><br><span class="line">brew services list                <span class="comment">#查看系统通过 brew 安装的服务</span></span><br><span class="line">brew services cleanup              <span class="comment">#清除已卸载无用的启动配置文件</span></span><br><span class="line">brew services restart php55        <span class="comment">#重启php-fpm</span></span><br><span class="line"> </span><br><span class="line">注意：brew services 相关命令最好别经常用了，提示会被移除</span><br></pre></td></tr></table></figure>
<h2 id="2-install-zsh"><a href="#2-install-zsh" class="headerlink" title="2. install zsh"></a>2. install zsh</h2><p>ohmyzsh &amp; iTerm2 两个神器，在Mac os x下是一定要装的. </p>
<h3 id="2-1-install-onmyzsh"><a href="#2-1-install-onmyzsh" class="headerlink" title="2.1 install onmyzsh"></a>2.1 install onmyzsh</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -L http://install.ohmyz.sh | sh</span><br></pre></td></tr></table></figure>
<h3 id="2-2-install-zsh"><a href="#2-2-install-zsh" class="headerlink" title="2.2 install zsh"></a>2.2 install zsh</h3><p>在 Terminal 下，直接敲 zsh.</p>
<blockquote>
<p>下面请暂时忽略 </p>
</blockquote>
<hr>
<p>设置默认shell</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat /etc/shells </span><br><span class="line"># List of acceptable shells for chpass(1). </span><br><span class="line"># Ftpd will not allow users to connect who are not using </span><br><span class="line"># one of these shells. /bin/bash /bin/csh /bin/ksh /bin/sh /bin/tcsh /bin/zsh zsh --version zsh 5.0.2 (x86_64-apple-darwin13.0) chsh -s /bin/zsh</span><br></pre></td></tr></table></figure>
<p>虽然Mac自带了zsh，如果你想要最新版的zsh，那么你用 brew install zsh安装一个最新的吧。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/usr/local/bin/zsh --version</span><br></pre></td></tr></table></figure>
<p>zsh 5.0.5 (x86_64-apple-darwin13.3.0) 区别也不会很大， 默认的版本已经很新了。  </p>
<p>安装后最好备份 : cp ~/.zshrc ~/.zshrc.orig</p>
<h2 id="3-homebrew-cask"><a href="#3-homebrew-cask" class="headerlink" title="3. homebrew-cask"></a>3. homebrew-cask</h2><p>install brew cask</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew tap phinze/homebrew-cask</span><br></pre></td></tr></table></figure>
<p>cask常用命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew cask search        #列出所有可以被安装的软件</span><br><span class="line">brew cask search php    #查找所有和php相关的应用</span><br><span class="line">brew cask list          #列出所有通过cask安装的软件</span><br><span class="line">brew cask info phpstorm #查看 phpstorm 的信息</span><br><span class="line">brew cask uninstall qq  #卸载 QQ</span><br></pre></td></tr></table></figure>
<blockquote>
<p>brew cask install sublime-text</p>
</blockquote>
<p>这里谈谈cask对比Mac App Store的优势：</p>
<ul>
<li>对常用软件支持更全面（特别是开发者），cask里面会给你一些惊喜；</li>
<li>软件更新速度快，一般都是最新版本 Store上很久很久才会更新版本；</li>
<li>命令安装感觉比打开Store方便，另外Store在国内的速度也是XXOO。</li>
</ul>
<blockquote>
<p>homebrew-cask 你可以先不安装</p>
</blockquote>
<h2 id="4-iterm2"><a href="#4-iterm2" class="headerlink" title="4. iterm2"></a>4. iterm2</h2><p> <a href="https://www.iterm2.com/" target="_blank" rel="external">https://www.iterm2.com/</a></p>
<h2 id="5-SimpleHTTPServer"><a href="#5-SimpleHTTPServer" class="headerlink" title="5. SimpleHTTPServer"></a>5. SimpleHTTPServer</h2><p>A computer</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">python -m SimpleHTTPServer</span><br></pre></td></tr></table></figure>
<p>B computer</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget http://192.168.xx.xx:8000/your-filename</span><br></pre></td></tr></table></figure>
<blockquote>
<p>nc 瑞士军刀，也可以两台电脑传输文件</p>
</blockquote>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml/recommendation-six-mouth-CF" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/02/28/ml/recommendation-six-mouth-CF/"><strong>Recommendation System - CF</strong></a>
      <small class=article-date-index>&nbsp; 2017-02-28</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/02/28/ml/recommendation-six-mouth-CF/" class="article-date">
  <time datetime="2017-02-28T02:28:21.000Z" itemprop="datePublished">2017-02-28</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/02/28/ml/recommendation-six-mouth-CF/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>


<p>推荐算法</p>
<ul>
<li>基于内容的推荐</li>
<li>协同过滤 CF</li>
<li>矩阵分解 与 隐语义模型</li>
</ul>
<h2 id="1-推荐系统-What"><a href="#1-推荐系统-What" class="headerlink" title="1. 推荐系统 What?"></a>1. 推荐系统 What?</h2><h3 id="1-1-数学定义"><a href="#1-1-数学定义" class="headerlink" title="1.1 数学定义"></a>1.1 数学定义</h3><ul>
<li>设 C 为全体用户集合</li>
<li>设 S 为全部商品/推荐内容集合</li>
<li>设 u 是评判把 $s_i$ 推荐 $c_i$ 的好坏评判函数</li>
</ul>
<blockquote>
<p>推荐是对于 $c∈C$ ,找到 $s∈S$ ,使得 $u$ 最大</p>
</blockquote>
<h3 id="1-2-人话版本"><a href="#1-2-人话版本" class="headerlink" title="1.2 人话版本"></a>1.2 人话版本</h3><p>根据用户的 :</p>
<ol>
<li>历史行为</li>
<li>社交关系</li>
<li>兴趣点</li>
<li>上下文环境</li>
<li>…</li>
</ol>
<blockquote>
<p>去判断用户的当前需求 / 感兴趣的 Item</p>
</blockquote>
<h2 id="2-推荐系统-Why"><a href="#2-推荐系统-Why" class="headerlink" title="2. 推荐系统 Why?"></a>2. 推荐系统 Why?</h2><p>Infomation Overload<br>用户需求不明确</p>
<h3 id="2-1-对用户"><a href="#2-1-对用户" class="headerlink" title="2.1 对用户"></a>2.1 对用户</h3><ul>
<li>找到好玩的东西</li>
<li>发现新鲜事物 Surprise</li>
</ul>
<h3 id="2-2-对商家"><a href="#2-2-对商家" class="headerlink" title="2.2 对商家"></a>2.2 对商家</h3><ul>
<li>个性化服务、提高粘性</li>
<li>增加营收</li>
</ul>
<h2 id="3-评定标准"><a href="#3-评定标准" class="headerlink" title="3. 评定标准"></a>3. 评定标准</h2><ul>
<li>准确度</li>
<li>覆盖度</li>
<li>多样性</li>
<li>评估标准</li>
</ul>
<h3 id="3-1-准确度-Top-N"><a href="#3-1-准确度-Top-N" class="headerlink" title="3.1 准确度 Top N"></a>3.1 准确度 Top N</h3><p>设 $R(u)$ 为根据训练建立的模型在测试集上的推荐, $T(u)$ 为测试集上用户的选择。</p>
<p>$$<br>Precision =  \frac{\sum_{u∈U} | R(u) \bigcap T(u) | }{\sum_{u∈U} R(u)}<br>$$</p>
<p>$$<br>Recall =  \frac{\sum_{u∈U} | R(u) \bigcap T(u) | }{\sum_{u∈U} T(u)}<br>$$</p>
<blockquote>
<p>Recall 说明 : 用户看的 80 篇新闻，你到底给我 <code>推</code> 出来多少篇</p>
</blockquote>
<h3 id="3-2-覆盖率"><a href="#3-2-覆盖率" class="headerlink" title="3.2 覆盖率"></a>3.2 覆盖率</h3><p>表示对物品长尾的发掘能力 (推荐系统希望消除马太效应)</p>
<p>$$<br>Coverage = \frac{|U_{u∈U} R(u)|}{|I|}<br>$$</p>
<blockquote>
<p>覆盖率是对平台所有物品所言，淘宝推荐等会关切这个指标。</p>
<p>非常独特的商品和新闻, 被看到的量, 是一条下滑曲线</p>
<p>希望个性化推荐，把小众的商品 也推荐展示出来</p>
</blockquote>
<h3 id="3-3-多样性"><a href="#3-3-多样性" class="headerlink" title="3.3 多样性"></a>3.3 多样性</h3><p>表示推荐列表中物品两两之间的不相似性.</p>
<p>$$<br>Diversity(R(u)) = 1 - \frac {\sum_{i, j \in R(u), {i \neq j}, {s(i, j)} }} {\frac {1}{2} |R(u)|(|R(u) - 1|)}<br>$$</p>
<p>$$<br>Diversity = \frac {1} {|U|} {\sum_{u \in U} {Diversity(R(u))}}<br>$$</p>
<blockquote>
<p>全是牛仔裤的话，用户审美疲劳, tag(纯棉 0，圆领 1) 连衣裙, 计算 vector 距离。品类不同，相似度设为 0.</p>
</blockquote>
<h3 id="3-4-评估标准"><a href="#3-4-评估标准" class="headerlink" title="3.4 评估标准"></a>3.4 评估标准</h3><ul>
<li>新颖度 : 给用户 Surprise</li>
<li>惊喜度 : 推荐和用户历史兴趣不相似，却满意的</li>
<li>信任度 : 提供可靠的推荐理由</li>
<li>实时性 : 实时更新程度 (context, session …)</li>
<li>…</li>
</ul>
<h2 id="4-相似度-距离定义"><a href="#4-相似度-距离定义" class="headerlink" title="4. 相似度/距离定义"></a>4. 相似度/距离定义</h2><ul>
<li>欧氏距离</li>
<li>Jaccard 相似度</li>
<li>余弦相似度</li>
<li>Pearson 相似度</li>
</ul>
<h3 id="4-1-欧氏距离"><a href="#4-1-欧氏距离" class="headerlink" title="4.1 欧氏距离"></a>4.1 欧氏距离</h3><p>$$<br>dist(X, Y) = \left( \sum_{i=1}^n {| x_i - y_i|}^p \right)^{\frac {1}{p}}<br>$$</p>
<h3 id="4-2-Jaccard-相似度"><a href="#4-2-Jaccard-相似度" class="headerlink" title="4.2 Jaccard 相似度"></a>4.2 Jaccard 相似度</h3><p>$$<br>J(A, B) = \frac {|A \bigcap B|}{|A \bigcup B|}<br>$$</p>
<blockquote>
<p>适用于 top N 推荐，要么 看，要么 没看</p>
</blockquote>
<h3 id="4-3-余弦相似度"><a href="#4-3-余弦相似度" class="headerlink" title="4.3 余弦相似度"></a>4.3 余弦相似度</h3><p>$$<br>\cos(\theta) = \frac {a^Tb}{|a| \cdot |b|}<br>$$</p>
<h3 id="4-4-Pearson-相似度"><a href="#4-4-Pearson-相似度" class="headerlink" title="4.4 Pearson 相似度"></a>4.4 Pearson 相似度</h3><p>$$<br>\frac { \sum_{i=1}^n (X_i - {\mu}_x) (Y_i - {\mu}_y)} {\sqrt{ \sum_{i=1}^n (X_i - {\mu}_x)^2} \sqrt{ \sum_{i=1}^n (Y_i - {\mu}_y)^2}}<br>$$</p>
<blockquote>
<p>(5, 6, 9)<br>(1, 2, 6)</p>
</blockquote>
<h2 id="5-推荐算法"><a href="#5-推荐算法" class="headerlink" title="5. 推荐算法"></a>5. 推荐算法</h2><ol>
<li>基于内容的推荐</li>
<li>协同过滤CF</li>
<li>隐语义模型</li>
</ol>
<h3 id="5-1-基于内容推荐"><a href="#5-1-基于内容推荐" class="headerlink" title="5.1 基于内容推荐"></a>5.1 基于内容推荐</h3><ul>
<li>基于用户喜欢的 Item 的属性 / 内容进行挖掘</li>
<li>基于分析内容，无需考虑当前user与其他user的行为的交互关联等</li>
<li>通常使用在 <code>文本相关</code> 的产品上进行推荐</li>
<li>Item 通过内容 (比如 关键词) 关联</li>
</ul>
<p>在推荐电影中，也可以使用，但是效果不见得好. 你需要手动对 Item 进行离线挖掘，拿出 tag</p>
<blockquote>
<p>电影题材 : 爱情 / 探险 / 动作  / 喜剧<br>标志特征 : 黄晓明 / 王宝强<br>年代 : 1995, 2016 …<br>关键词</p>
</blockquote>
<p>两个Item根据 tag 的分值，进行求 距离.</p>
<hr>
<p><strong>举例文本挖掘 :</strong></p>
<p>One : 对于每个要推荐的内容,我们需要建立一份资料 :</p>
<blockquote>
<p>比如词 $k_i$ 在文档 $d_j$ 中的权重 $w_{ij}$ (常用的方法比如 TF-IDF)</p>
<p>有一个词表 Item [$w_1$, $w_2$, … ,$w_{4000}$], 对每个 document 建立一个词表 vector。</p>
</blockquote>
<p>Two : 需要对用户也建立一份资料 :</p>
<blockquote>
<p>比如说定义一个权重向量 ($w_{c1},…,w_{ck}$) , 其中 $w_{ci}$ 表示第 $k_i$ 个词对用户 $c$ 的重要度<br>user 之前有看过的 小说 或 文档。(看过的文档放在一起搞一个doc_vector，或者 将 doc_vector 加权平均)</p>
</blockquote>
<p>Three : 计算匹配度 </p>
<blockquote>
<p>余弦距离公式</p>
</blockquote>
<p>$$<br>u(c, s) = \cos(\vec{w_c}, \vec{w_s}) = \frac{\vec{w_c} \cdot \vec{w_s}}{\vec{||w_c||} \times \vec{||w_s||}}<br>$$</p>
<blockquote>
<p>总结三步 :</p>
<ol>
<li>对 每个 document 建立 vector</li>
<li>对 每个 user 建立 vector</li>
<li>比对 user 向量，与 该user 没有看过的 document 向量 之间的相似度</li>
</ol>
<p>TF-IDF : 评估一个 word 对当前 document 的重要性。 当前升高而升高，所有doc中，升高而下降。</p>
</blockquote>
<p><strong>Sample Example : 基于书名进行书推荐</strong></p>
<p>一个用户对《Building data mining applications for CRM》感兴趣，从以下书中进行推荐 :</p>
<ol>
<li><code>Building data mining applications for CRM</code></li>
<li>Accelerating Customer Relationships: Using CRM and Relationship Technologies</li>
<li>Mastering Data Mining: The Art and Science of Customer Relationship Management</li>
<li>Data Mining Your Website</li>
<li>Introduction to marketing</li>
<li>Consumer behavior</li>
<li>marketing research, a handbook </li>
<li>Customer knowledge manag</li>
</ol>
<p><img src="/images/recommendation/rs-six-month-01.png" alt="基于内容的推荐"></p>
<blockquote>
<p>TF-IDF Normed Vectors 值 (0.187、0.316) 代表 <code>Data</code> 对于当前 <code>标题</code> 的重要程度. </p>
<p>根据 TF-IDF，当前书名 与 图书馆所有书名 出现的次数, (去掉停用词, 如 and) 计算出来的权重。</p>
<p>所以 <code>《Building data mining applications for CRM》</code> 已经有一个列 vector， 与 其他所有 书 计算 相似度，相似度 高的，为推荐最好的。</p>
<p>This is only a sample show example， not the real method of thing.</p>
</blockquote>
<p>计算这本书和其余7本书的相似度，推荐最近的，这里结果为 :</p>
<blockquote>
<p>rank 1 : Data Mining Your Website<br>􏰅rank 2 : Accelerating Custom Relationships: Using CRM …<br>rank 3 : Mastering Data Mining: The Art and Science… 􏰬􏰭􏰮􏰀􏰁…</p>
</blockquote>
<p>结论 : 基于内容的推荐，无需用户行为的交互关联。</p>
<h3 id="5-2-协同过滤-User-based"><a href="#5-2-协同过滤-User-based" class="headerlink" title="5.2 协同过滤 (User-based)"></a>5.2 协同过滤 (User-based)</h3><p>找到和 User 最近的 其他 User􏰼􏰽􏰟􏰲􏰳􏰧􏰨􏰒􏰠􏰾􏰲􏰳 􏱅􏰲􏰳􏱆􏱀􏱁􏱂􏰕, 找到他们 看/买过但当前 User 没看/买过的 item，根据距离加权打分<br>找得分最高的推荐</p>
<blockquote>
<p>不需要提前挖掘 Item， 找品味接近的 5 个 friends。</p>
</blockquote>
<p><img src="/images/recommendation/rs-six-month-02.png" alt="User-based CF"></p>
<p>近邻怎么找 ?</p>
<table>
<thead>
<tr>
<th>U</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>e</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>5</td>
<td>1</td>
<td>5</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>B</td>
<td>4</td>
<td></td>
<td>3</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<h3 id="5-3-协同过滤-Item-based"><a href="#5-3-协同过滤-Item-based" class="headerlink" title="5.3 协同过滤 (Item-based)"></a>5.3 协同过滤 (Item-based)</h3><blockquote>
<p>据现有 User 对 Item 的评级情况，来计算 Item 之间的某种相似度。已有Item 相似的 Item 被用来生成一个综合得分，而该得分用于评估未知物品的相似度。</p>
</blockquote>
<p>根据 User 对 Item 的行为，计算 item 和 item 相似度，找到和当前 item 最近的进行推荐。</p>
<p><img src="/images/recommendation/rs-six-month-03.png" alt="Item-based CF"></p>
<blockquote>
<p>Collaborative filtering 基于 近邻 的思想</p>
</blockquote>
<p>CF (Item-based) Summary :</p>
<ul>
<li>一个 User List ($u_i$, i = 1, …, n), 一个 Item List ($p_j$, j = 1, …, m)</li>
<li>一个 $n * m$ 矩阵 W, 每个元素 $W_{ij}$, 表示 ${User}_i$ 对 ${Item}_j$ 的打分</li>
<li>计算 item 和 item 之间的相似度</li>
</ul>
<p>$$<br>S(i, j) = \cos(\vec{i}, \vec{j}) = \frac{\vec{i} \cdot \vec{j}}{\vec{||i||} \times \vec{||j||}}<br>$$</p>
<ul>
<li>选取 Top K 推荐 或 加权预测得分</li>
</ul>
<p>$$<br>r_{xi} = \frac { {\sum_{j \in N (i;x)} S_{ij} \times r_{xj}}} { {\sum_{j \in N (i;x)} S_{ij}}}<br>$$</p>
<p><strong>Item-based Collaborative Filtering</strong></p>
<p><img src="/images/recommendation/rs-six-month-05.png" alt="CF-Item Collaborative Filtering"></p>
<blockquote>
<p>1 与 4 之间的相似度-0.10不对， 应该是 -0.83 等，数据有误。(按照 Pearson overlap 计算).</p>
<p>$r_{1.5}$ = (0.41*2 + 0.59*3) / (0.41 + 0.59) = 2.6</p>
<p>基于 Top N 来计算，这里是 Top 2.</p>
</blockquote>
<h4 id="User-CF-vs-Item-CF"><a href="#User-CF-vs-Item-CF" class="headerlink" title="User CF vs Item CF"></a>User CF vs Item CF</h4><table>
<thead>
<tr>
<th>属性</th>
<th>UserCF</th>
<th>ItemCF</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>性能</code></td>
<td>User多，计算User相似度矩阵代价很大</td>
<td>Item多，计算Item相似度矩阵代价很大</td>
</tr>
<tr>
<td><code>领域</code></td>
<td>User 个性化兴趣不太明显的领域</td>
<td>长尾物品丰富，用户个性化需求强烈的领域</td>
</tr>
<tr>
<td><code>实时性</code></td>
<td>用户有新行为，不一定推荐结果马上变化</td>
<td>用户有新行为，会导致推荐结果实时变化</td>
</tr>
<tr>
<td><code>冷启动</code></td>
<td>新用户行为，不能立即进行个性化推荐<br>(用户相似度是每隔一段时间离线计算的)</td>
<td>新用户对物品有行为，就可以给他推荐和该物品相关物品</td>
</tr>
<tr>
<td><code>推荐理由</code></td>
<td>很难提供令用户信服的推荐解释</td>
<td>利用用户的历史行为给用户做推荐解释</td>
</tr>
</tbody>
</table>
<h4 id="CF-优缺点"><a href="#CF-优缺点" class="headerlink" title="CF 优缺点"></a>CF 优缺点</h4><table>
<thead>
<tr>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td>基于用户行为，因此对推荐内容无需先验知识</td>
<td>需要大量的显性 / 隐性用户行为 (冷启动)</td>
</tr>
<tr>
<td>只需要用户和商品关联矩阵即可，结构简单</td>
<td>需要完全相同的商品关联，相似的不同</td>
</tr>
<tr>
<td>在用户行为丰富的情况下，效果好</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>(a, c) (b, c) 通过传递关系，可以近似的计算出来 (a, b) 相似度，矩阵稀疏的二度关联。</p>
</blockquote>
<h2 id="6-冷启动问题"><a href="#6-冷启动问题" class="headerlink" title="6. 冷启动问题"></a>6. 冷启动问题</h2><h3 id="6-1-New-User"><a href="#6-1-New-User" class="headerlink" title="6.1 New User"></a>6.1 New User</h3><ul>
<li>推荐 非常 热门 的商品，收集一些信息</li>
<li>用户注册的时候，收集信息，或者互动游戏，确定你喜欢否</li>
</ul>
<h3 id="6-2-New-Item"><a href="#6-2-New-Item" class="headerlink" title="6.2 New Item"></a>6.2 New Item</h3><ul>
<li>根据本身属性，求与原来 Item 相似度</li>
<li>Item-based CF 可推荐出去</li>
</ul>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ops/ops-mac-install-tensorflow" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/02/21/ops/ops-mac-install-tensorflow/"><strong>Mac install tensorFlow</strong></a>
      <small class=article-date-index>&nbsp; 2017-02-21</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/02/21/ops/ops-mac-install-tensorflow/" class="article-date">
  <time datetime="2017-02-21T01:54:16.000Z" itemprop="datePublished">2017-02-21</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/devops/">devops</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/02/21/ops/ops-mac-install-tensorflow/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-instaled-pip"><a href="#1-instaled-pip" class="headerlink" title="1. instaled pip"></a>1. instaled pip</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装完后执行命令pip freeze列出安装的packages验证一下pip安装好没.</span></span><br><span class="line"></span><br><span class="line">$ pip freeze</span><br><span class="line">python-dateutil==1.5</span><br><span class="line">scikit-learn==0.18.dev0</span><br><span class="line">scipy==0.13.0b1</span><br><span class="line">six==1.10.0</span><br><span class="line">tensorflow==0.5.0</span><br><span class="line">terminado==0.6</span><br><span class="line">TFL==2.0.5</span><br><span class="line">tornado==4.3</span><br><span class="line">vboxapi==1.0</span><br><span class="line">virtualenv==15.1.0</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="2-install-tensorflow"><a href="#2-install-tensorflow" class="headerlink" title="2. install tensorflow"></a>2. install tensorflow</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Mac OS X, CPU only, Python 2.7:</span></span><br><span class="line">$ <span class="built_in">export</span> TF_BINARY_URL=https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-1.0.0-py2-none-any.whl</span><br><span class="line"></span><br><span class="line"><span class="comment"># Only CPU-version is available at the moment.</span></span><br><span class="line">$ sudo pip install <span class="variable">$TF_BINARY_URL</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>maybe by vpn in China</p>
</blockquote>
<h2 id="3-install-virtualenv"><a href="#3-install-virtualenv" class="headerlink" title="3. install virtualenv"></a>3. install virtualenv</h2><p>virtualenv是python的沙箱工具.我们毕竟是在自己机器上做实验,为了不来回修改各种环境变量,我们一般还是弄个沙箱完比较好.测试完直接删除就行,不用再去改各种配置文件.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo pip install --upgrade virtualenv</span><br><span class="line"></span><br><span class="line">Collecting virtualenv</span><br><span class="line">  Downloading virtualenv-15.1.0-py2.py3-none-any.whl (1.8MB)</span><br><span class="line">    100% |████████████████████████████████| 1.8MB 156kB/s</span><br><span class="line">Installing collected packages: virtualenv</span><br><span class="line">Successfully installed virtualenv-15.1.0</span><br></pre></td></tr></table></figure>
<p>安装好后创建一个工作目录,我直接在home里创建了个文件夹.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ virtualenv --system-site-packages ~/tensorflow</span><br></pre></td></tr></table></figure>
<p>然后进入目录激活沙箱.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cd ~/tensorflow</span><br><span class="line">$ source bin/activate</span><br></pre></td></tr></table></figure>
<h2 id="4-install-tensorflow-in-virtualenv"><a href="#4-install-tensorflow-in-virtualenv" class="headerlink" title="4. install tensorflow in virtualenv"></a>4. install tensorflow in virtualenv</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(tensorflow) ➜  tensorflow pip install <span class="variable">$TF_BINARY_URL</span></span><br></pre></td></tr></table></figure>
<h2 id="5-run-tensorflow"><a href="#5-run-tensorflow" class="headerlink" title="5. run tensorflow"></a>5. run tensorflow</h2><p><a href="http://tensorflow.org/get_started/os_setup.md#try_your_first_tensorflow_program" target="_blank" rel="external">hello world</a></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">(tensorflow) ➜  tensorflow python</span><br><span class="line">Python 2.7.10 (default, Jul 14 2015, 19:46:27)</span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.39)] on darwin</span><br><span class="line">Type "help", "copyright", "credits" or "license" for more information.</span><br><span class="line">&gt;&gt;&gt; import tensorflow as tf</span><br><span class="line">&gt;&gt;&gt; hello = tf.constant('Hello,TensorFlow!')</span><br><span class="line">&gt;&gt;&gt; sess = tf.Session()</span><br><span class="line">can't determine number of CPU cores: assuming 4</span><br><span class="line">I tensorflow/core/common_runtime/local_device.cc:25] Local device intra op parallelism threads: 4</span><br><span class="line">can't determine number of CPU cores: assuming 4</span><br><span class="line">I tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 4</span><br><span class="line">&gt;&gt;&gt; print sess.run(hello)</span><br><span class="line">Hello,TensorFlow!</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<p>let’s see this tensorflow dir</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">➜  tensorflow ll</span><br><span class="line">total 4.0K</span><br><span class="line">drwxr-xr-x 16 hp staff 544 Feb 21 10:45 bin/</span><br><span class="line">drwxr-xr-x  3 hp staff 102 Feb 21 10:38 include/</span><br><span class="line">drwxr-xr-x  3 hp staff 102 Feb 21 10:38 lib/</span><br><span class="line">-rw-r--r--  1 hp staff  60 Feb 21 10:45 pip-selfcheck.json</span><br><span class="line">➜  tensorflow</span><br></pre></td></tr></table></figure>
<h2 id="6-install-keras"><a href="#6-install-keras" class="headerlink" title="6. install keras"></a>6. install keras</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pip install keras</span><br><span class="line"></span><br><span class="line">Successfully installed keras-1.2.2 pyyaml-3.12 theano-0.8.2</span><br></pre></td></tr></table></figure>
<h2 id="Refence"><a href="#Refence" class="headerlink" title="Refence"></a>Refence</h2><ol>
<li><a href="http://tensorflow.org" target="_blank" rel="external">tensorflow官方地址</a></li>
<li><a href="https://pypi.python.org/pypi/pip" target="_blank" rel="external">pip官方地址</a></li>
<li><a href="https://pypi.python.org/pypi/setuptools" target="_blank" rel="external">setuptools官方地址</a></li>
<li><a href="http://www.111cn.net/phper/python/66848.htm" target="_blank" rel="external">python安装setuptools步骤详解</a></li>
<li><a href="http://pan.baidu.com/s/1c1corG8" target="_blank" rel="external">about pdf文件下载</a></li>
<li><a href="http://tflearn.org/installation/#upgrade-tensorflow" target="_blank" rel="external">tflearn.org/installation</a></li>
</ol>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml/ml-sample-BPNN-Titanic-2017-02-16-1732-ipynb" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/02/16/ml/ml-sample-BPNN-Titanic-2017-02-16-1732-ipynb/"><strong>Kaggle_Titanic</strong></a>
      <small class=article-date-index>&nbsp; 2017-02-16</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/02/16/ml/ml-sample-BPNN-Titanic-2017-02-16-1732-ipynb/" class="article-date">
  <time datetime="2017-02-16T09:28:21.000Z" itemprop="datePublished">2017-02-16</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/02/16/ml/ml-sample-BPNN-Titanic-2017-02-16-1732-ipynb/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="泰坦尼克号"><a href="#泰坦尼克号" class="headerlink" title="泰坦尼克号"></a><a href="https://www.kaggle.com/c/titanic" target="_blank" rel="external">泰坦尼克号</a></h2><p>『Jack and Rose』的故事，豪华游艇倒了，大家都惊恐逃生，可是救生艇的数量有限，无法人人都有，副船长发话了『lady and kid first！』，所以是否获救其实并非随机，而是基于一些背景有rank先后的。<br><br>训练和测试数据是一些乘客的个人信息以及存活状况，要尝试根据它生成合适的模型并预测其他人的存活状况。<br></p>
<p>这是一个二分类问题，很多分类算法都可以解决。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">构建Pybrain神经网络的基本步骤：</span><br><span class="line"></span><br><span class="line">1. 构建神经网路</span><br><span class="line">2. 构造数据集</span><br><span class="line">3. 训练神经网络</span><br><span class="line">4. 预测测试集结果</span><br><span class="line">5. 验证和分析</span><br></pre></td></tr></table></figure>
<h2 id="1-分析问题"><a href="#1-分析问题" class="headerlink" title="1. 分析问题"></a>1. 分析问题</h2><blockquote>
<p>分析什么特征是更重要的</p>
</blockquote>
<p>先看看数据长什么样？ 还是用pandas加载数据</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 这个ipython notebook主要是我解决Kaggle Titanic问题的思路和过程</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment">#数据分析</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment">#科学计算</span></span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series,DataFrame</span><br><span class="line"></span><br><span class="line">data_train = pd.read_csv(<span class="string">"Train.csv"</span>)</span><br><span class="line"><span class="keyword">print</span> data_train.columns</span><br><span class="line"><span class="keyword">print</span> <span class="string">"============ df info ============"</span></span><br><span class="line">data_train.info()</span><br></pre></td></tr></table></figure>
<pre><code>Index([u&apos;PassengerId&apos;, u&apos;Survived&apos;, u&apos;Pclass&apos;, u&apos;Name&apos;, u&apos;Sex&apos;, u&apos;Age&apos;,
       u&apos;SibSp&apos;, u&apos;Parch&apos;, u&apos;Ticket&apos;, u&apos;Fare&apos;, u&apos;Cabin&apos;, u&apos;Embarked&apos;],
      dtype=&apos;object&apos;)
============ df info ============
&lt;class &apos;pandas.core.frame.DataFrame&apos;&gt;
RangeIndex: 891 entries, 0 to 890
Data columns (total 12 columns):
PassengerId    891 non-null int64
Survived       891 non-null int64
Pclass         891 non-null int64
Name           891 non-null object
Sex            891 non-null object
Age            714 non-null float64
SibSp          891 non-null int64
Parch          891 non-null int64
Ticket         891 non-null object
Fare           891 non-null float64
Cabin          204 non-null object
Embarked       889 non-null object
dtypes: float64(2), int64(5), object(5)
memory usage: 83.6+ KB
</code></pre><p>我们看大概有以下这些字段</p>
<p>PassengerId =&gt; 乘客ID<br>Pclass =&gt; 乘客等级(1/2/3等舱位)<br>Name =&gt; 乘客姓名<br>Sex =&gt; 性别<br>Age =&gt; 年龄<br>SibSp =&gt; 堂兄弟/妹个数<br>Parch =&gt; 父母与小孩个数<br>Ticket =&gt; 船票信息<br>Fare =&gt; 票价<br>Cabin =&gt; 客舱<br>Embarked =&gt; 登船港口</p>
<p>上面的数据说什么了？它告诉我们，训练数据中总共有891名乘客，但是很不幸，我们有些属性的数据不全，比如说：</p>
<ul>
<li>Age（年龄）属性只有714名乘客有记录</li>
<li>Cabin（客舱）更是只有204名乘客是已知的</li>
</ul>
<p>再瞄一眼具体数据数值情况，得到数值型数据的一些分布(因为有些属性，比如姓名，是文本型；而另外一些属性，比如登船港口，是类目型。这些我们用下面的函数是看不到的)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data_train.describe()</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>-</th>
<th>PassengerId</th>
<th>Survived</th>
<th>Pclass</th>
<th>Age</th>
<th>SibSp</th>
<th>Parch</th>
<th>Fare</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>891.000000</td>
<td>891.000000</td>
<td>891.000000</td>
<td>714.000000</td>
<td>891.000000</td>
<td>891.000000</td>
<td>891.000000</td>
</tr>
<tr>
<td>mean</td>
<td>446.000000</td>
<td>0.383838</td>
<td>2.308642</td>
<td>29.699118</td>
<td>0.523008</td>
<td>0.381594</td>
<td>32.204208</td>
</tr>
</tbody>
</table>
<p><font color="red">mean字段告诉我们，大概0.383838的人最后获救了，2/3等舱的人数比1等舱要多，平均乘客年龄大概是29.7岁(计算这个时候会略掉无记录的)等等…<font></font></font></p>
<ul>
<li><font color="blue">『对数据的认识太重要了！』<font></font></font></li>
<li><font color="red">『对数据的认识太重要了！』<font></font></font></li>
<li><font color="green">『对数据的认识太重要了！』<font></font></font></li>
</ul>
<p>总结 : </p>
<ol>
<li>Cabin，没看出什么明显特征，缺失值又太多</li>
<li>Age：可以尝试补全缺失的数据</li>
</ol>
<p><strong>通常遇到缺值的情况，我们会有几种常见的处理方式</strong><br><br></p>
<ol>
<li>如果缺值的样本占总数比例极高，我们可能就直接舍弃了，作为特征加入的话，可能反倒带入noise，影响最后的结果了</li>
<li>如果缺值的样本适中，而该属性非连续值特征属性(比如说类目属性)，那就把NaN作为一个新类别，加到类别特征中</li>
<li>如果缺值的样本适中，而该属性为连续值特征属性，有时候我们会考虑给定一个step(比如这里的age，我们可以考虑每隔2/3岁为一个步长)，然后把它离散化，之后把NaN作为一个type加到属性类目中。</li>
<li>有些情况下，缺失的值个数并不是特别多，那我们也可以试着根据已有的值，拟合一下数据，补充上。</li>
</ol>
<p>本例中，后两种处理方式应该都是可行的，我们先试试拟合补全吧(没有特别多的背景可供我们拟合，这不一定是一个好的选择)</p>
<p>我们这里用scikit-learn中的RandomForest来拟合一下缺失的年龄数据<br></p>
<ol>
<li>从数据来估计 Age 应该是比较重要的, 还有毕竟 副船长发话了『lady and kid first！』</li>
<li>Cabin 缺失值太多了，先按Cabin有无数据，将这个属性处理成Yes和No两种类型吧</li>
</ol>
<h2 id="2-准备数据"><a href="#2-准备数据" class="headerlink" title="2. 准备数据"></a>2. 准备数据</h2><ol>
<li>Age 与 cabin 补全</li>
<li>one-hot 编码</li>
<li>Feature Scaling</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 我们这里用scikit-learn中的RandomForest来拟合一下缺失的年龄数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestRegressor</span><br><span class="line"> </span><br><span class="line"><span class="comment">### 使用 RandomForestClassifier 填补缺失的年龄属性</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_missing_ages</span><span class="params">(df)</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 把已有的数值型特征取出来丢进Random Forest Regressor中</span></span><br><span class="line">    age_df = df[[<span class="string">'Age'</span>,<span class="string">'Fare'</span>, <span class="string">'Parch'</span>, <span class="string">'SibSp'</span>, <span class="string">'Pclass'</span>]]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 乘客分成已知年龄和未知年龄两部分</span></span><br><span class="line">    known_age = age_df[age_df.Age.notnull()].as_matrix()</span><br><span class="line">    unknown_age = age_df[age_df.Age.isnull()].as_matrix()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># y即目标年龄</span></span><br><span class="line">    y = known_age[:, <span class="number">0</span>] <span class="comment">## Age ‘s value list</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># X即特征属性值</span></span><br><span class="line">    X = known_age[:, <span class="number">1</span>:] <span class="comment">## Fare 的值 list</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># fit到RandomForestRegressor之中</span></span><br><span class="line">    rfr = RandomForestRegressor(random_state=<span class="number">0</span>, n_estimators=<span class="number">2000</span>, n_jobs=<span class="number">-1</span>)</span><br><span class="line">    rfr.fit(X, y)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 用得到的模型进行未知年龄结果预测</span></span><br><span class="line">    predictedAges = rfr.predict(unknown_age[:, <span class="number">1</span>::])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 用得到的预测结果填补原缺失数据</span></span><br><span class="line">    df.loc[ (df.Age.isnull()), <span class="string">'Age'</span> ] = predictedAges </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> df, rfr</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_Cabin_type</span><span class="params">(df)</span>:</span></span><br><span class="line">    df.loc[ (df.Cabin.notnull()), <span class="string">'Cabin'</span> ] = <span class="string">"Yes"</span></span><br><span class="line">    df.loc[ (df.Cabin.isnull()), <span class="string">'Cabin'</span> ] = <span class="string">"No"</span></span><br><span class="line">    <span class="keyword">return</span> df</span><br><span class="line"></span><br><span class="line">data_train, rfr = set_missing_ages(data_train)</span><br><span class="line">data_train = set_Cabin_type(data_train)</span><br><span class="line">data_train</span><br></pre></td></tr></table></figure>
<p><strong>one-hot 编码</strong></p>
<p>因为逻辑回归建模时，需要输入的特征都是数值型特征，我们通常会先对类目型的特征因子化/one-hot编码。 <br><br>什么叫做因子化/one-hot编码？举个例子：<font><br></font></p>
<p>以Embarked为例，原本一个属性维度，因为其取值可以是[‘S’,’C’,’Q‘]，而将其平展开为’Embarked_C’,’Embarked_S’, ‘Embarked_Q’三个属性<font><br></font></p>
<ol>
<li>原Embarked取S的，在此处的”Embarked_S”下取值为1，在’Embarked_C’, ‘Embarked_Q’下取值为0<br></li>
<li>原Embarked取C的，在此处的”Embarked_C”下取值为1，在’Embarked_S’, ‘Embarked_Q’下取值为0<br></li>
<li>原Embarked取Q的，在此处的”Embarked_Q”下取值为1，在’Embarked_C’, ‘Embarked_S’下取值为0<br></li>
</ol>
<p>我们使用pandas的”get_dummies”来完成这个工作，并拼接在原来的”data_train”之上，如下所示。<br></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 因为逻辑回归建模时，需要输入的特征都是数值型特征</span></span><br><span class="line"><span class="comment"># 我们先对类目型的特征离散/因子化</span></span><br><span class="line"><span class="comment"># 以Cabin为例，原本一个属性维度，因为其取值可以是['yes','no']，而将其平展开为'Cabin_yes','Cabin_no'两个属性</span></span><br><span class="line"><span class="comment"># 原本Cabin取值为yes的，在此处的'Cabin_yes'下取值为1，在'Cabin_no'下取值为0</span></span><br><span class="line"><span class="comment"># 原本Cabin取值为no的，在此处的'Cabin_yes'下取值为0，在'Cabin_no'下取值为1</span></span><br><span class="line"><span class="comment"># 我们使用pandas的get_dummies来完成这个工作，并拼接在原来的data_train之上，如下所示</span></span><br><span class="line">dummies_Cabin = pd.get_dummies(data_train[<span class="string">'Cabin'</span>], prefix= <span class="string">'Cabin'</span>)</span><br><span class="line"></span><br><span class="line">dummies_Embarked = pd.get_dummies(data_train[<span class="string">'Embarked'</span>], prefix= <span class="string">'Embarked'</span>)</span><br><span class="line"></span><br><span class="line">dummies_Sex = pd.get_dummies(data_train[<span class="string">'Sex'</span>], prefix= <span class="string">'Sex'</span>)</span><br><span class="line"></span><br><span class="line">dummies_Pclass = pd.get_dummies(data_train[<span class="string">'Pclass'</span>], prefix= <span class="string">'Pclass'</span>)</span><br><span class="line">df = pd.concat([data_train, dummies_Cabin, dummies_Embarked, dummies_Sex, dummies_Pclass], axis=<span class="number">1</span>)</span><br><span class="line">df.drop([<span class="string">'Pclass'</span>, <span class="string">'Name'</span>, <span class="string">'Sex'</span>, <span class="string">'Ticket'</span>, <span class="string">'Cabin'</span>, <span class="string">'Embarked'</span>], axis=<span class="number">1</span>, inplace=<span class="keyword">True</span>)</span><br><span class="line">df</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>PassengerId</th>
<th>…</th>
<th>Embarked_C</th>
<th>Embarked_Q</th>
<th>Embarked_S</th>
<th>Sex_female</th>
<th>Sex_male</th>
<th>Pclass_1</th>
<th>Pclass_2</th>
<th>Pclass_3</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>…</td>
<td>1.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
<td>0.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>
<p><strong>Feature Scaling</strong></p>
<p><font color="red">Age和Fare两个属性，乘客的数值幅度变化，scaling，其实就是将一些变化幅度较大的特征化到[-1,1]之内。<font></font></font></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 接下来我们要接着做一些数据预处理的工作，比如scaling，将一些变化幅度较大的特征化到[-1,1]之内</span></span><br><span class="line"><span class="comment"># 这样可以加速logistic regression的收敛</span></span><br><span class="line"><span class="keyword">import</span> sklearn.preprocessing <span class="keyword">as</span> preprocessing</span><br><span class="line">scaler = preprocessing.StandardScaler()</span><br><span class="line">age_scale_param = scaler.fit(df[<span class="string">'Age'</span>])</span><br><span class="line">df[<span class="string">'Age_scaled'</span>] = scaler.fit_transform(df[<span class="string">'Age'</span>], age_scale_param)</span><br><span class="line">fare_scale_param = scaler.fit(df[<span class="string">'Fare'</span>])</span><br><span class="line">df[<span class="string">'Fare_scaled'</span>] = scaler.fit_transform(df[<span class="string">'Fare'</span>], fare_scale_param)</span><br><span class="line">df</span><br><span class="line">train_df = df.filter(regex=<span class="string">'Survived|Age_.*|SibSp|Parch|Fare_.*|Cabin_.*|Embarked_.*|Sex_.*|Pclass_.*'</span>)</span><br><span class="line">train_df</span><br></pre></td></tr></table></figure>
<h2 id="3-构造神经网络"><a href="#3-构造神经网络" class="headerlink" title="3. 构造神经网络"></a>3. 构造神经网络</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series,DataFrame</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas.io.data <span class="keyword">as</span> wb</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pybrain.structure <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> pybrain.datasets <span class="keyword">import</span> SupervisedDataSet</span><br><span class="line"><span class="keyword">from</span> pybrain.supervised.trainers <span class="keyword">import</span> BackpropTrainer</span><br><span class="line"></span><br><span class="line"><span class="comment"># createa neural network</span></span><br><span class="line">fnn = FeedForwardNetwork()</span><br><span class="line"></span><br><span class="line"><span class="comment"># create three layers, input layer:2 input unit; hidden layer: 10 units; output layer: 1 output</span></span><br><span class="line">inLayer = LinearLayer(<span class="number">9</span>, name=<span class="string">'inLayer'</span>)</span><br><span class="line">hiddenLayer0 = SigmoidLayer(<span class="number">1</span>, name=<span class="string">'hiddenLayer0'</span>)</span><br><span class="line">outLayer = LinearLayer(<span class="number">1</span>, name=<span class="string">'outLayer'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add three layers to the neural network</span></span><br><span class="line">fnn.addInputModule(inLayer)</span><br><span class="line">fnn.addModule(hiddenLayer0)</span><br><span class="line">fnn.addOutputModule(outLayer)</span><br><span class="line"></span><br><span class="line"><span class="comment"># link three layers</span></span><br><span class="line">in_to_hidden0 = FullConnection(inLayer,hiddenLayer0)</span><br><span class="line">hidden0_to_out = FullConnection(hiddenLayer0, outLayer)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add the links to neural network</span></span><br><span class="line">fnn.addConnection(in_to_hidden0)</span><br><span class="line">fnn.addConnection(hidden0_to_out)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make neural network come into effect</span></span><br><span class="line">fnn.sortModules()</span><br></pre></td></tr></table></figure>
<h2 id="4-构造数据集"><a href="#4-构造数据集" class="headerlink" title="4. 构造数据集"></a>4. 构造数据集</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># obtain the original data</span></span><br><span class="line"></span><br><span class="line">x1 = train_df[<span class="string">'SibSp'</span>]</span><br><span class="line">x2 = train_df[<span class="string">'Parch'</span>]</span><br><span class="line">x3 = train_df[<span class="string">'Sex_female'</span>]</span><br><span class="line">x4 = train_df[<span class="string">'Sex_male'</span>]</span><br><span class="line">x5 = train_df[<span class="string">'Pclass_1'</span>]</span><br><span class="line">x6 = train_df[<span class="string">'Pclass_2'</span>]</span><br><span class="line">x7 = train_df[<span class="string">'Pclass_3'</span>]</span><br><span class="line">x8 = train_df[<span class="string">'Age_scaled'</span>]</span><br><span class="line">x9 = train_df[<span class="string">'Fare_scaled'</span>]</span><br><span class="line"></span><br><span class="line">y = train_df[<span class="string">'Survived'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># definite the dataset as two input , one output</span></span><br><span class="line">DS = SupervisedDataSet(<span class="number">9</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add data element to the dataset</span></span><br><span class="line"><span class="comment"># 往数据集内加样本点</span></span><br><span class="line"><span class="comment"># 假设x1，x2，x3是输入的三个维度向量，y是输出向量，并且它们的长度相同</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> np.arange(len(train_df)):</span><br><span class="line">    DS.addSample([x1[i],x2[i],x3[i],x4[i],x5[i],x6[i],x7[i],x8[i],x9[i]],[y[i]])</span><br><span class="line"></span><br><span class="line"><span class="comment"># you can get your input/output this way</span></span><br><span class="line"><span class="comment"># 如果要获得里面的输入／输出时，可以用</span></span><br><span class="line">X = DS[<span class="string">'input'</span>]</span><br><span class="line">Y = DS[<span class="string">'target'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># split the dataset into train dataset and test dataset</span></span><br><span class="line"><span class="comment"># 如果要把数据集切分成训练集和测试集，可以用下面的语句，训练集：测试集＝8:2</span></span><br><span class="line"><span class="comment"># 为了方便之后的调用，可以把输入和输出拎出来</span></span><br><span class="line">dataTrain, dataTest = DS.splitWithProportion(<span class="number">0.8</span>)</span><br><span class="line">xTrain, yTrain = dataTrain[<span class="string">'input'</span>],dataTrain[<span class="string">'target'</span>]</span><br><span class="line">xTest, yTest = dataTest[<span class="string">'input'</span>], dataTest[<span class="string">'target'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"bulid data sets end ！"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#print xTest[1]</span></span><br><span class="line">type(xTest)</span><br></pre></td></tr></table></figure>
<pre><code>bulid data sets end ！
numpy.ndarray
</code></pre><h2 id="5-训练神经网络"><a href="#5-训练神经网络" class="headerlink" title="5. 训练神经网络"></a>5. 训练神经网络</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># train the NN</span></span><br><span class="line"><span class="comment"># we use BP Algorithm</span></span><br><span class="line"><span class="comment"># verbose = True means print th total error</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"trainer start..."</span></span><br><span class="line">trainer = BackpropTrainer(fnn, dataTrain, verbose=<span class="keyword">False</span>,learningrate=<span class="number">0.01</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"run..."</span></span><br><span class="line"><span class="comment"># set the epoch times to make the NN  fit</span></span><br><span class="line">trainer.trainUntilConvergence(maxEpochs=<span class="number">500</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"trainer end!"</span></span><br></pre></td></tr></table></figure>
<pre><code>trainer start...
run...
trainer end!
</code></pre><h2 id="6-预测-test-csv"><a href="#6-预测-test-csv" class="headerlink" title="6. 预测 test.csv"></a>6. 预测 test.csv</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data_test = pd.read_csv(<span class="string">"test.csv"</span>)</span><br><span class="line">data_test.loc[ (data_test.Fare.isnull()), <span class="string">'Fare'</span> ] = <span class="number">0</span></span><br><span class="line"><span class="comment"># 接着我们对test_data做和train_data中一致的特征变换</span></span><br><span class="line"><span class="comment"># 首先用同样的RandomForestRegressor模型填上丢失的年龄</span></span><br><span class="line">tmp_df = data_test[[<span class="string">'Age'</span>,<span class="string">'Fare'</span>, <span class="string">'Parch'</span>, <span class="string">'SibSp'</span>, <span class="string">'Pclass'</span>]]</span><br><span class="line">null_age = tmp_df[data_test.Age.isnull()].as_matrix()</span><br><span class="line"><span class="comment"># 根据特征属性X预测年龄并补上</span></span><br><span class="line">X = null_age[:, <span class="number">1</span>:]</span><br><span class="line">predictedAges = rfr.predict(X)</span><br><span class="line">data_test.loc[ (data_test.Age.isnull()), <span class="string">'Age'</span> ] = predictedAges</span><br><span class="line"></span><br><span class="line">data_test = set_Cabin_type(data_test)</span><br><span class="line">dummies_Cabin = pd.get_dummies(data_test[<span class="string">'Cabin'</span>], prefix= <span class="string">'Cabin'</span>)</span><br><span class="line">dummies_Embarked = pd.get_dummies(data_test[<span class="string">'Embarked'</span>], prefix= <span class="string">'Embarked'</span>)</span><br><span class="line">dummies_Sex = pd.get_dummies(data_test[<span class="string">'Sex'</span>], prefix= <span class="string">'Sex'</span>)</span><br><span class="line">dummies_Pclass = pd.get_dummies(data_test[<span class="string">'Pclass'</span>], prefix= <span class="string">'Pclass'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df_test = pd.concat([data_test, dummies_Cabin, dummies_Embarked, dummies_Sex, dummies_Pclass], axis=<span class="number">1</span>)</span><br><span class="line">df_test.drop([<span class="string">'Pclass'</span>, <span class="string">'Name'</span>, <span class="string">'Sex'</span>, <span class="string">'Ticket'</span>, <span class="string">'Cabin'</span>, <span class="string">'Embarked'</span>], axis=<span class="number">1</span>, inplace=<span class="keyword">True</span>)</span><br><span class="line">df_test[<span class="string">'Age_scaled'</span>] = scaler.fit_transform(df_test[<span class="string">'Age'</span>], age_scale_param)</span><br><span class="line">df_test[<span class="string">'Fare_scaled'</span>] = scaler.fit_transform(df_test[<span class="string">'Fare'</span>], fare_scale_param)</span><br><span class="line">df_test</span><br><span class="line"></span><br><span class="line">test = df_test.filter(regex=<span class="string">'SibSp|Parch|Sex_female|Sex_male|Pclass_1|Pclass_2|Pclass_3|Age_scaled|Fare_scaled'</span>)</span><br><span class="line">xTest = test.as_matrix()</span><br><span class="line"><span class="comment"># prediction = fnn.activate(xTest[1])</span></span><br><span class="line"><span class="comment"># print("the prediction number is :",prediction," the real number is:  ",yTest[1])</span></span><br><span class="line">predict_resutl=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> np.arange(len(xTest)):</span><br><span class="line">    res = fnn.activate(xTest[i])[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> (res &gt; <span class="number">0.5</span>) :</span><br><span class="line">        res = <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span> :</span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">    predict_resutl.append(res)</span><br><span class="line"></span><br><span class="line">final_res = np.array(predict_resutl).T</span><br><span class="line"></span><br><span class="line">result = pd.DataFrame(&#123;<span class="string">'PassengerId'</span>:data_test[<span class="string">'PassengerId'</span>].as_matrix(), <span class="string">'Survived'</span>:final_res&#125;)</span><br><span class="line">result</span><br></pre></td></tr></table></figure>
<h2 id="7-结果写入文件"><a href="#7-结果写入文件" class="headerlink" title="7. 结果写入文件"></a>7. 结果写入文件</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result.to_csv(<span class="string">"logistic_regression_predictions.csv"</span>, index=<span class="keyword">False</span>)</span><br></pre></td></tr></table></figure>
<h2 id="8-验证和分析"><a href="#8-验证和分析" class="headerlink" title="8. 验证和分析"></a>8. 验证和分析</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> mod <span class="keyword">in</span> fnn.modules:</span><br><span class="line">  <span class="keyword">print</span> (<span class="string">"Module:"</span>, mod.name)</span><br><span class="line">  <span class="keyword">if</span> mod.paramdim &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"--parameters:"</span>, mod.params)</span><br><span class="line">  <span class="keyword">for</span> conn <span class="keyword">in</span> fnn.connections[mod]:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"-connection to"</span>, conn.outmod.name)</span><br><span class="line">    <span class="keyword">if</span> conn.paramdim &gt; <span class="number">0</span>:</span><br><span class="line">       <span class="keyword">print</span> (<span class="string">"- parameters"</span>, conn.params)</span><br><span class="line">  <span class="keyword">if</span> hasattr(fnn, <span class="string">"recurrentConns"</span>):</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">"Recurrent connections"</span>)</span><br><span class="line">    <span class="keyword">for</span> conn <span class="keyword">in</span> fnn.recurrentConns:</span><br><span class="line">       <span class="keyword">print</span> (<span class="string">"-"</span>, conn.inmod.name, <span class="string">" to"</span>, conn.outmod.name)</span><br><span class="line">       <span class="keyword">if</span> conn.paramdim &gt; <span class="number">0</span>:</span><br><span class="line">          <span class="keyword">print</span> (<span class="string">"- parameters"</span>, conn.params)</span><br></pre></td></tr></table></figure>
<pre><code>(&apos;Module:&apos;, &apos;outLayer&apos;)
(&apos;Module:&apos;, &apos;inLayer&apos;)
(&apos;-connection to&apos;, &apos;hiddenLayer0&apos;)
(&apos;- parameters&apos;, array([-0.47294263, -0.04334279,  0.77615167, -2.03865708,  2.38243634,
        0.69678661, -0.82062356, -0.70921933, -0.12044558]))
(&apos;Module:&apos;, &apos;hiddenLayer0&apos;)
(&apos;-connection to&apos;, &apos;outLayer&apos;)
(&apos;- parameters&apos;, array([ 1.08050317]))
</code></pre><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="http://blog.csdn.net/han_xiaoyang/article/details/49797143" target="_blank" rel="external">寒小阳-Titanic</a></li>
<li><a href="http://www.zengmingxia.com/topics/computing/" target="_blank" rel="external">一蓑烟雨任平生</a></li>
</ul>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml/ml-coursera-ng-w4-nn-03" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/02/13/ml/ml-coursera-ng-w4-nn-03/"><strong>Coursera Week 5 - Neural Networks II</strong></a>
      <small class=article-date-index>&nbsp; 2017-02-13</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/02/13/ml/ml-coursera-ng-w4-nn-03/" class="article-date">
  <time datetime="2017-02-13T02:28:21.000Z" itemprop="datePublished">2017-02-13</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/02/13/ml/ml-coursera-ng-w4-nn-03/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<p>coursera week 4 - neural networks cost function and bp</p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2017/02/13/ml/ml-coursera-ng-w4-nn-03/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml/ml-coursera-ng-w4-nn-02" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/02/07/ml/ml-coursera-ng-w4-nn-02/"><strong>Coursera Week 4 - Neural Networks I</strong></a>
      <small class=article-date-index>&nbsp; 2017-02-07</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/02/07/ml/ml-coursera-ng-w4-nn-02/" class="article-date">
  <time datetime="2017-02-07T02:28:21.000Z" itemprop="datePublished">2017-02-07</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/02/07/ml/ml-coursera-ng-w4-nn-02/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<p>coursera week 4 - neural networks representation</p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2017/02/07/ml/ml-coursera-ng-w4-nn-02/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ops/ops-db-greenplum-mysql-ext-ods" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/01/20/ops/ops-db-greenplum-mysql-ext-ods/"><strong>Greenplum ods</strong></a>
      <small class=article-date-index>&nbsp; 2017-01-20</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/01/20/ops/ops-db-greenplum-mysql-ext-ods/" class="article-date">
  <time datetime="2017-01-20T07:28:21.000Z" itemprop="datePublished">2017-01-20</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/devops/">devops</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/01/20/ops/ops-db-greenplum-mysql-ext-ods/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://github.com/blair101/language/tree/master/greenplum">code : github ext_ods_table</a></p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2017/01/20/ops/ops-db-greenplum-mysql-ext-ods/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ops/ops-db-greenplum-manual-dev-steps" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/01/12/ops/ops-db-greenplum-manual-dev-steps/"><strong>Greenplum dev Flow</strong></a>
      <small class=article-date-index>&nbsp; 2017-01-12</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/01/12/ops/ops-db-greenplum-manual-dev-steps/" class="article-date">
  <time datetime="2017-01-12T07:28:21.000Z" itemprop="datePublished">2017-01-12</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/devops/">devops</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/01/12/ops/ops-db-greenplum-manual-dev-steps/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="/images/ops/greenplum-flow.png" alt=""></p>
<h2 id="1-Rds-import-oss"><a href="#1-Rds-import-oss" class="headerlink" title="1. Rds import oss"></a>1. Rds import oss</h2><p>通过 datax 从 mysql 导出数据到 OSS</p>
<p>组装 : mysql2oss-e_coupon.json</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    "job": &#123;</span><br><span class="line">        "content": [</span><br><span class="line">        &#123;</span><br><span class="line">            "reader": &#123;</span><br><span class="line">                "name": "mysqlreader",</span><br><span class="line">                    "parameter": &#123;</span><br><span class="line">                        "username": "xx",</span><br><span class="line">                        "password": "xx",</span><br><span class="line">                        "connection": [</span><br><span class="line">                        &#123;</span><br><span class="line">                            "jdbcUrl": [</span><br><span class="line">                                "jdbc:mysql://192.168.184.xx:port"</span><br><span class="line">                                ],</span><br><span class="line">                            "table": [</span><br><span class="line">                                "rds-lib-name.e_coupon"</span><br><span class="line">                                ]</span><br><span class="line">                        &#125;</span><br><span class="line">                        ],</span><br><span class="line">                        "column":[</span><br><span class="line">                            "id",</span><br><span class="line">                            "x_card_user_id",</span><br><span class="line">                            "coupon_discount_code",</span><br><span class="line">                            ...</span><br><span class="line">                            "order_merchant_id"</span><br><span class="line">                        ],</span><br><span class="line">                        "where": "created_time BETWEEN '2016-01-01 00:00:00' AND '2017-01-05 23:59:59'"</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">                "writer": &#123;</span><br><span class="line">                    "name": "osswriter",</span><br><span class="line">                    "parameter": &#123;</span><br><span class="line">                        "accessId": "xx",</span><br><span class="line">                        "accessKey": "xx",</span><br><span class="line">                        "bucket": "company-name-data",</span><br><span class="line">                        "encoding": "UTF-8",</span><br><span class="line">                        "endpoint": "http://oss-cn-hangzhou.aliyuncs.com",</span><br><span class="line">                        "fieldDelimiter": "\t",</span><br><span class="line">                        "object": "datax_dev/libin/e_coupon",</span><br><span class="line">                        "writeMode": "truncate"</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ],</span><br><span class="line">        "setting": &#123;</span><br><span class="line">            "speed": &#123;</span><br><span class="line">                "channel": 1</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>触发执行 :</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python datax.py mysql2oss-e_coupon.json</span><br></pre></td></tr></table></figure>
<h2 id="2-ext-table"><a href="#2-ext-table" class="headerlink" title="2. ext table"></a>2. ext table</h2><p>创建外部表，ext_dm_e_coupon，并将 location 指向为 oss</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">EXTERNAL</span> <span class="keyword">TABLE</span> <span class="keyword">PUBLIC</span>.ext_dm_e_coupon;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EXTERNAL</span> <span class="keyword">TABLE</span> <span class="keyword">PUBLIC</span>.ext_dm_e_coupon (</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">bigint</span>,</span><br><span class="line">    x_card_user_id <span class="built_in">varchar</span>,</span><br><span class="line">    coupon_discount_code <span class="built_in">varchar</span>,</span><br><span class="line">    ...</span><br><span class="line">    order_merchant_id <span class="built_in">bigint</span></span><br><span class="line">) LOCATION(</span><br><span class="line">    <span class="string">'oss://oss-cn-hangzhou.aliyuncs.com</span><br><span class="line">        dir=datax_dev/libin/</span><br><span class="line">        id=xx</span><br><span class="line">        key=xx</span><br><span class="line">        bucket=xkeshi-data'</span></span><br><span class="line">) <span class="keyword">FORMAT</span> <span class="string">'text'</span> (<span class="literal">NULL</span> <span class="keyword">AS</span> <span class="string">'null'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 45596 id comment 字段有回车 ,So del comment varchar, don't imported.</span></span><br></pre></td></tr></table></figure>
<h2 id="3-ods-table"><a href="#3-ods-table" class="headerlink" title="3. ods table"></a>3. ods table</h2><p>创建 ods_dm_e_coupon 表，并向其中导入数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> ods_dm_e_coupon;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> ods_dm_e_coupon <span class="keyword">AS</span> <span class="keyword">SELECT</span></span><br><span class="line">	*</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	ext_dm_e_coupon <span class="keyword">distributed</span> <span class="keyword">BY</span> (<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意 : 这样建表 ods table id，不是 primary key</p>
<p>显示指定 distributed BY (id)，可读性更好</p>
</blockquote>
<h2 id="4-mds-table"><a href="#4-mds-table" class="headerlink" title="4. mds table"></a>4. mds table</h2><p>创建 mds_dm_e_coupon_profile 表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> mds_dm_e_coupon_profile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mds_dm_e_coupon_profile (</span><br><span class="line">	<span class="keyword">id</span> bigserial,</span><br><span class="line">	coupon_info_code <span class="built_in">VARCHAR</span>,</span><br><span class="line">	shop_id <span class="built_in">BIGINT</span>,</span><br><span class="line">	collected_avg_actual_price <span class="built_in">DECIMAL</span> (<span class="number">12</span>, <span class="number">2</span>),</span><br><span class="line">	collected_sum_actual_price <span class="built_in">DECIMAL</span> (<span class="number">12</span>, <span class="number">2</span>),</span><br><span class="line">	collected_count <span class="built_in">INT</span>,</span><br><span class="line">	verified_count <span class="built_in">INT</span>,</span><br><span class="line">	verified_rate <span class="built_in">DECIMAL</span> (<span class="number">12</span>, <span class="number">2</span>)</span><br><span class="line">) <span class="keyword">WITH</span> (</span><br><span class="line">	appendonly = <span class="literal">TRUE</span>,</span><br><span class="line">	compresslevel = <span class="number">5</span></span><br><span class="line">) <span class="keyword">distributed</span> <span class="keyword">BY</span> (<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>创建表的时候，给一个自增 id. 每一个表都有一个自增 id，是一个比较好的规范</p>
</blockquote>
<h2 id="5-insert-mds-table"><a href="#5-insert-mds-table" class="headerlink" title="5. insert mds table"></a>5. insert mds table</h2><p>insert data to mds_dm_e_coupon_profile</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> mds_dm_e_coupon_profile (</span><br><span class="line">	coupon_info_code,</span><br><span class="line">	shop_id,</span><br><span class="line">	collected_avg_actual_price,</span><br><span class="line">	collected_sum_actual_price,</span><br><span class="line">	collected_count,</span><br><span class="line">	verified_count,</span><br><span class="line">	verified_rate</span><br><span class="line">) <span class="keyword">SELECT</span></span><br><span class="line">	tt1.coupon_info_code,</span><br><span class="line">	tt1.shop_id,</span><br><span class="line">	tt1.avg_actual_price <span class="keyword">AS</span> collected_avg_actual_price,</span><br><span class="line">	tt1.sum_actual_price <span class="keyword">AS</span> collected_sum_actual_price,</span><br><span class="line">	tt1.collected_count,</span><br><span class="line">	<span class="keyword">COALESCE</span> (tt2.verified_count, <span class="number">0</span>) <span class="keyword">AS</span> verified_count,</span><br><span class="line">	<span class="keyword">round</span>(</span><br><span class="line">		(</span><br><span class="line">			<span class="keyword">COALESCE</span> (tt2.verified_count, <span class="number">0</span>) * <span class="number">1.0</span></span><br><span class="line">		) / (tt1.collected_count * <span class="number">1.0</span>),</span><br><span class="line">		<span class="number">2</span></span><br><span class="line">	) <span class="keyword">AS</span> verified_rate</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	(</span><br><span class="line">		<span class="keyword">SELECT</span></span><br><span class="line">			t1.coupon_info_code,</span><br><span class="line">			t1.shop_id,</span><br><span class="line">			<span class="keyword">COUNT</span> (t1.<span class="keyword">ID</span>) <span class="keyword">AS</span> collected_count,</span><br><span class="line">			<span class="keyword">round</span>(<span class="keyword">AVG</span>(t1.actual_price), <span class="number">2</span>) <span class="keyword">AS</span> avg_actual_price,</span><br><span class="line">			<span class="keyword">SUM</span> (t1.actual_price) <span class="keyword">AS</span> sum_actual_price</span><br><span class="line">		<span class="keyword">FROM</span></span><br><span class="line">			(</span><br><span class="line">				<span class="keyword">SELECT</span></span><br><span class="line">					*</span><br><span class="line">				<span class="keyword">FROM</span></span><br><span class="line">					ods_dm_e_coupon</span><br><span class="line">				<span class="keyword">WHERE</span></span><br><span class="line">					<span class="keyword">status</span> = <span class="number">1</span></span><br><span class="line">			) t1</span><br><span class="line">		<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">			(t1.coupon_info_code, t1.shop_id)</span><br><span class="line">		<span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">			t1.shop_id</span><br><span class="line">	) tt1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		t2.coupon_info_code,</span><br><span class="line">		t2.shop_id,</span><br><span class="line">		<span class="keyword">COUNT</span> (t2.<span class="keyword">ID</span>) <span class="keyword">AS</span> verified_count,</span><br><span class="line">		<span class="keyword">round</span>(<span class="keyword">AVG</span>(t2.actual_price), <span class="number">2</span>) <span class="keyword">AS</span> avg_actual_price,</span><br><span class="line">		<span class="keyword">SUM</span> (t2.actual_price) <span class="keyword">AS</span> sum_actual_price</span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		(</span><br><span class="line">			<span class="keyword">SELECT</span></span><br><span class="line">				*</span><br><span class="line">			<span class="keyword">FROM</span></span><br><span class="line">				ods_dm_e_coupon</span><br><span class="line">			<span class="keyword">WHERE</span></span><br><span class="line">				<span class="keyword">status</span> = <span class="number">1</span></span><br><span class="line">			<span class="keyword">AND</span> <span class="keyword">RESULT</span> = <span class="number">2</span></span><br><span class="line">		) t2</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		(t2.coupon_info_code, t2.shop_id)</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">		t2.shop_id</span><br><span class="line">) tt2 <span class="keyword">ON</span> tt1.coupon_info_code = tt2.coupon_info_code</span><br><span class="line"><span class="keyword">AND</span> tt1.shop_id = tt2.shop_id</span><br></pre></td></tr></table></figure>
<h2 id="6-validation-results"><a href="#6-validation-results" class="headerlink" title="6. validation results"></a>6. validation results</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> mds_dm_e_coupon_profile <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">id</span> <span class="keyword">limit</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/images/ops/greenplum-man-1.png" alt=""></p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ops/ops-db-greenplum-short-introduce" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2017/01/04/ops/ops-db-greenplum-short-introduce/"><strong>Greenplum 学习笔记</strong></a>
      <small class=article-date-index>&nbsp; 2017-01-04</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2017/01/04/ops/ops-db-greenplum-short-introduce/" class="article-date">
  <time datetime="2017-01-04T07:28:21.000Z" itemprop="datePublished">2017-01-04</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/devops/">devops</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2017/01/04/ops/ops-db-greenplum-short-introduce/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 500px;
        margin-left: 180px !important;
}
</style>

<p><img src="/images/ops/greenplum-1.1.png" alt=""></p>
<table>
<thead>
<tr>
<th>No.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
<th>OLTP</th>
<th>OLAP</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.</td>
<td>数据在系统中产生</td>
<td>本身不产生数据，基础数据来源于产生系统</td>
</tr>
<tr>
<td>2.</td>
<td>基于交易的处理系统</td>
<td>基于查询的分析系统</td>
</tr>
<tr>
<td>3.</td>
<td>牵扯的数据量很小</td>
<td>牵扯的数据量庞大 (复杂查询经常使用全表扫描等)</td>
</tr>
<tr>
<td>4.</td>
<td>对响应时间要求非常高</td>
<td>响应时间与具体查询有很大关系</td>
</tr>
<tr>
<td>5.</td>
<td>用户数量大，为操作用户</td>
<td>用户数量少，主要有技术人员与业务人员</td>
</tr>
<tr>
<td>6.</td>
<td>各种操作主要基于索引进行</td>
<td>业务问题不固定，数据库的各种操作不能完全基于索引进行</td>
</tr>
</tbody>
</table>
<h2 id="1-Greenplum-介绍"><a href="#1-Greenplum-介绍" class="headerlink" title="1. Greenplum 介绍"></a>1. Greenplum 介绍</h2><p>Greenplum 是 基于数据库的分布式数据存储和并行计算 框架</p>
<blockquote>
<p>Greenplum TB级别表现非常优秀，单机性能比Hadoop快好几倍</p>
</blockquote>
<h3 id="1-1-Greenplum-历程"><a href="#1-1-Greenplum-历程" class="headerlink" title="1.1 Greenplum 历程"></a>1.1 Greenplum 历程</h3><ul>
<li>2003 年 诞生 greenplum</li>
<li>2010 年 收购 被 EMC 整合</li>
<li>2014 年 发布 4.3 version</li>
<li>2015 年 重回 open source, apache</li>
</ul>
<h3 id="1-2-Greenplum-架构"><a href="#1-2-Greenplum-架构" class="headerlink" title="1.2 Greenplum 架构"></a>1.2 Greenplum 架构</h3><p><img src="/images/ops/greenplum-1.2.png" alt=""></p>
<blockquote>
<p>Greenplum实现了基于<code>数据库的分布式</code>数据存储和并行计算<br>GoogleMapReduce实现的是基于<code>文件的分布式</code>数据存储和计算</p>
</blockquote>
<h3 id="1-3-Greenplum-amp-Pg"><a href="#1-3-Greenplum-amp-Pg" class="headerlink" title="1.3 Greenplum &amp; Pg"></a>1.3 Greenplum &amp; Pg</h3><p>PostgreSQL 非常先进的 ORDBMS， PostgreSQL 天生为扩展而生。</p>
<p>Mysql 查询优化器对于子查询、复制查询如多表关联、外关联的支持等较弱，Mysql 目前不支持<a href="https://en.wikipedia.org/wiki/Hash_join" target="_blank" rel="external">hash join</a>，缺少这关键功能非常致命，将难于在OLAP领域充当大任。基于MYSQL一到复杂多表关联性能就立马下降。</p>
<h3 id="1-4-Greenplum-应用"><a href="#1-4-Greenplum-应用" class="headerlink" title="1.4 Greenplum 应用"></a>1.4 Greenplum 应用</h3><p>Greenplum 数据引擎是为新一代数据仓库和<code>大规模分析处理</code>而建立的软件解决方案。 (Alibaba 2008年使用Greenplum)</p>
<blockquote>
<p>MPP : Massively Parallel Processing<br>OLTP: On-Line Transaction Processing<br>OLAP: On-Line Analytical Processing </p>
</blockquote>
<h3 id="1-5-MPP-与-Hadoop"><a href="#1-5-MPP-与-Hadoop" class="headerlink" title="1.5 MPP 与 Hadoop"></a>1.5 MPP 与 Hadoop</h3><table>
<thead>
<tr>
<th>&nbsp;&nbsp;Type &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
<th>Greenplum MPP</th>
<th>Hadoop</th>
</tr>
</thead>
<tbody>
<tr>
<td>存储模式</td>
<td>关系数据库行列表存储数据（有模式）</td>
<td>文件切片分布式存储（无模式）</td>
</tr>
<tr>
<td>数据耦合</td>
<td>Hash分布, 计算节点和存储紧密耦合</td>
<td>hdfs文件切块后随机分配，节点数据无耦合</td>
</tr>
<tr>
<td>数据粒度</td>
<td>记录级的更小粒度（一般在1k以下）</td>
<td>文件块级（缺省64MB）</td>
</tr>
<tr>
<td>查询计划</td>
<td>MPP采用SQL并行查询计划</td>
<td>Hadoop采用Mapreduce框架</td>
</tr>
</tbody>
</table>
<p>为保证数据的高性能计算，MPP数据库节点和数据之间是紧耦合的，相反，Hadoop的节点和数据是没有耦合关系的. Hadoop的架构更加灵活-存储节点和计算节点的无关性</p>
<p>Hadoop架构，需要在原生的Mapreduce开发框架基础上的开发，需要技术人员谙熟于JAVA开发和并行原理，不仅业务分析人员无法使用，甚至技术人员也难以学习和操控。为了解决易用性的问题，近年来SQL-0N-HADOOP技术大量涌现出来，几乎成为当前Hadoop开发使用的一个技术热点趋势。</p>
<p>这些技术包括：Hive、Pivotal HAWQ、SPARK SQL、Impala、Prest、Drill、Tajo等等很多，这些技术有些是在Mapreduce上做了优化，例如Spark采用内存中的Mapreduce技术，号称性能比基于文件的的Mapreduce提高10倍；而有些则直接绕开了Mapreduce另起炉灶，如Impala、hawq采用借鉴MPP计算思想来做查询优化和内存数据Pipeline计算，以此来提高性能。</p>
<blockquote>
<p>MapReduce 编程困难, 不如 SQL 方便</p>
</blockquote>
<h2 id="2-Quick-Start"><a href="#2-Quick-Start" class="headerlink" title="2. Quick Start"></a>2. Quick Start</h2><p>Master 和 Segment 都是单独的 PostgreSQL数据库。</p>
<h3 id="2-1-Greenplum-架构"><a href="#2-1-Greenplum-架构" class="headerlink" title="2.1 Greenplum 架构"></a>2.1 Greenplum 架构</h3><p><img src="/images/ops/greenplum-2.1.png" alt=""></p>
<p>Client 只与 Master节点 交互，Client将SQL发给 Master，然后 Master对SQL分析后，分配给所有的 Segment 进行操作，并将汇总结果返回给客户端。</p>
<h3 id="2-2-Greenplum-集群"><a href="#2-2-Greenplum-集群" class="headerlink" title="2.2 Greenplum 集群"></a>2.2 Greenplum 集群</h3><p><img src="/images/ops/greenplum-2.2.png" alt=""></p>
<h3 id="2-3-Greenplum-畅游"><a href="#2-3-Greenplum-畅游" class="headerlink" title="2.3 Greenplum 畅游"></a>2.3 Greenplum 畅游</h3><h4 id="2-3-1-访问方式"><a href="#2-3-1-访问方式" class="headerlink" title="2.3.1 访问方式"></a>2.3.1 访问方式</h4><ul>
<li>psql cmd</li>
<li>pgAdmin / navicat</li>
</ul>
<h4 id="2-3-2-整体概况"><a href="#2-3-2-整体概况" class="headerlink" title="2.3.2 整体概况"></a>2.3.2 整体概况</h4><ul>
<li>Greenplum 基于 PostgreSQL 8.2 开发</li>
<li>Master不存储数据，Segment为数据节点</li>
</ul>
<p>Student Table 存储在 GP 中</p>
<p><img src="/images/ops/greenplum-2.3.png" alt=""></p>
<h4 id="2-3-3-基本语法"><a href="#2-3-3-基本语法" class="headerlink" title="2.3.3 基本语法"></a>2.3.3 基本语法</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[hdfs@node196 libin]$ psql -h 192.168.xx.xx -p xx <span class="_">-d</span> testdb -U xx</span><br><span class="line">psql (9.2.15, server 8.2.15)</span><br><span class="line">WARNING: psql version 9.2, server version 8.2.</span><br><span class="line">         Some psql features might not work.</span><br><span class="line">Type <span class="string">"help"</span> <span class="keyword">for</span> help.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>psql -h192.168.181.xx -p2345 -dcom_db -Ucom_gp -c “select * from ods_dm_e_coupon limit 2”</p>
</blockquote>
<p><strong>1. 语法介绍</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">\h <span class="keyword">create</span></span><br></pre></td></tr></table></figure>
<p><strong>2. CREATE TABLE</strong></p>
<ul>
<li>需要指定表分布键</li>
<li>需要用某个字段分区，partition by</li>
<li>like 类似 create table t1 as select * from t2 limit x</li>
<li>inherits can extend table</li>
</ul>
<p>分类策略 </p>
<ol>
<li>Hash 分布 (默认第一个字段，推荐显示指定)</li>
<li>随机分布 (distributed randomly 性能较差， 主键分布一般)</li>
</ol>
<blockquote>
<p>like 创建的表，结构与原表一样，不指定分布键，默认与原表一样。</p>
<p>appendonly、压缩等特殊属性，不一定一样。</p>
</blockquote>
<p><strong>3. SELECT</strong></p>
<p><strong>4. CREATE TABLE AS 与 SELECT INTO</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test2 <span class="keyword">AS</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> test1 <span class="keyword">distributed</span> <span class="keyword">by</span> (<span class="keyword">id</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">INTO</span> test4 <span class="keyword">from</span> test1</span><br></pre></td></tr></table></figure>
<blockquote>
<p>SELECT INTO 不能指定分布键，使用默认</p>
</blockquote>
<p><strong>5. INSERT</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test001 <span class="keyword">VALUES</span>(<span class="number">100</span>, <span class="string">'tom'</span>), (<span class="number">101</span>, <span class="string">'jim'</span>); <span class="keyword">INSERT</span> <span class="number">0</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意 : 分布键 绝对不能为空，否则为 null。数据分布到一个节点。</p>
</blockquote>
<p><strong>6. UPDATE</strong></p>
<p>不能批量对 分布key 执行 update 操作</p>
<p><strong>7. DELETE</strong></p>
<p>涉及 子查询，子查询结果还涉及数据重分布，这样报错</p>
<h4 id="2-3-4-数据类型"><a href="#2-3-4-数据类型" class="headerlink" title="2.3.4 数据类型"></a>2.3.4 数据类型</h4><table>
<thead>
<tr>
<th>type</th>
<th>space</th>
<th>description</th>
<th>range</th>
</tr>
</thead>
<tbody>
<tr>
<td>smallint</td>
<td>2</td>
<td></td>
<td>-32768 ~ +32767</td>
</tr>
<tr>
<td>integer</td>
<td>4</td>
<td></td>
<td>-2 147 483 648 ~ +2 147 483 647</td>
</tr>
<tr>
<td>bigint</td>
<td>8</td>
<td></td>
<td>-</td>
</tr>
<tr>
<td>decimal</td>
<td>变长</td>
<td></td>
<td>nolimit</td>
</tr>
<tr>
<td>numeric</td>
<td>变长</td>
<td></td>
<td>nolimit</td>
</tr>
<tr>
<td>double precision</td>
<td>4</td>
<td></td>
<td>-</td>
</tr>
<tr>
<td>serial</td>
<td>4</td>
<td>自增整数</td>
<td>1 ~ 2 147 483 647</td>
</tr>
<tr>
<td>bigserial</td>
<td>8</td>
<td>大范围自增整数</td>
<td></td>
</tr>
<tr>
<td>varchar(n)</td>
<td>变长</td>
<td></td>
<td>limit</td>
</tr>
<tr>
<td>char(n)</td>
<td>定长</td>
<td></td>
<td></td>
</tr>
<tr>
<td>text</td>
<td>变长</td>
<td></td>
<td>nolimit</td>
</tr>
<tr>
<td>timestamp</td>
<td>8</td>
<td>带不带时区，自己选择</td>
<td></td>
</tr>
<tr>
<td>date</td>
<td>4</td>
<td>表示日期</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="2-3-5-常用函数"><a href="#2-3-5-常用函数" class="headerlink" title="2.3.5 常用函数"></a>2.3.5 常用函数</h4><p><a href="http://www.postgres.cn/docs/9.3/" target="_blank" rel="external">postgres 9.3 doc</a></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://cread.jd.com/read/startRead.action?bookId=30189846&amp;readType=1" target="_blank" rel="external">JD阅读 : Greenplum企业级应用实战</a></li>
<li><a href="http://dbaplus.cn/news-21-341-1.html" target="_blank" rel="external">聊聊Greenplum的那些事</a></li>
</ul>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/ef-l6u2-Going-to-the-doctor&#39;s-l4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/12/27/English/ef-l6u2-Going-to-the-doctor's-l4/"><strong>Going to the doctor&#39;s L4 Accidents and injuries</strong></a>
      <small class=article-date-index>&nbsp; 2016-12-27</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/12/27/English/ef-l6u2-Going-to-the-doctor's-l4/" class="article-date">
  <time datetime="2016-12-26T23:15:16.000Z" itemprop="datePublished">2016-12-27</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/12/27/English/ef-l6u2-Going-to-the-doctor's-l4/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 500px;
        margin-left: 200px !important;
}
</style>

<h2 id="1-Vocabulary"><a href="#1-Vocabulary" class="headerlink" title="1. Vocabulary"></a>1. Vocabulary</h2><ul>
<li>unconscious</li>
</ul>
<p><img src="/images/english/ef-l6u2l4.png" alt=""></p>
<table>
<thead>
<tr>
<th>A: JAKE - B: PAM - C: SIMON</th>
</tr>
</thead>
<tbody>
<tr>
<td>I fell down some stairs.</td>
<td></td>
</tr>
<tr>
<td>How did you do that?</td>
<td></td>
</tr>
<tr>
<td>I was walking down some stairs. I wasn’t paying attention.</td>
<td></td>
</tr>
<tr>
<td>You were paying attention. He was paying attention to a woman.</td>
<td></td>
</tr>
<tr>
<td>I think the stairs were wet.</td>
<td></td>
</tr>
<tr>
<td>When did this happen?</td>
<td></td>
</tr>
<tr>
<td>[JAKE] Yeah. I bruised three ribs and, sprained my right wrist.</td>
<td></td>
</tr>
<tr>
<td>[PAM] How are you coping with the crutches?</td>
<td></td>
</tr>
<tr>
<td>[JAKE] No problem at all.</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="2-because-of-the-pain"><a href="#2-because-of-the-pain" class="headerlink" title="2. because of the pain"></a>2. because of the pain</h2><p>I was walking down the street when I slipped and fell down, and broke my leg. I haven’t been sleeping since it happened because of the pain. It really hurts!</p>
<table>
<thead>
<tr>
<th>because of the pain</th>
</tr>
</thead>
<tbody>
<tr>
<td>I was walking down the street …</td>
<td></td>
</tr>
<tr>
<td>… when I slipped and fell down …</td>
<td></td>
</tr>
<tr>
<td>… and broke my leg.</td>
<td></td>
</tr>
<tr>
<td>I haven’t been sleeping …</td>
<td></td>
</tr>
<tr>
<td>… since it happened.</td>
<td></td>
</tr>
<tr>
<td>It really hurts!</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="3-Expressions"><a href="#3-Expressions" class="headerlink" title="3. Expressions"></a>3. Expressions</h2><table>
<thead>
<tr>
<th>Ex</th>
</tr>
</thead>
<tbody>
<tr>
<td>I fell off a wall and broke my leg.</td>
<td></td>
</tr>
<tr>
<td>I sprained my wrist.</td>
<td></td>
</tr>
<tr>
<td>I have a bruise on my arm.</td>
<td></td>
</tr>
<tr>
<td>I fell down and bruised my shoulder.</td>
<td></td>
</tr>
<tr>
<td>I broke my arm while playing volleyball.</td>
<td></td>
</tr>
<tr>
<td>I was running for a bus when I sprained my ankle.</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Possessive adjectives</th>
</tr>
</thead>
<tbody>
<tr>
<td>He called his doctor because he had a fever.</td>
<td></td>
</tr>
<tr>
<td>I’m a patient of Dr. Brennan’s. == I’m Dr. Brennan’s patient.</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="4-Reading"><a href="#4-Reading" class="headerlink" title="4. Reading"></a>4. Reading</h2><p>I guess the strangest accident I have ever had was when I was at school. I was playing a game where you had to lie on the ground, and all the others jumped on top of you. It was fine until the biggest kid in school came and jumped on top, too! I broke my finger, <code>bruised my ribs</code> and <code>sprained</code> my wrist. I spent the night in the hospital, and it took me a couple of months to get better.</p>
<h2 id="5-Writing"><a href="#5-Writing" class="headerlink" title="5. Writing"></a>5. Writing</h2><p>I had an accident last winter when I was arriving at work. I was coming into the building, climbing the steps, when I slipped on the icy floor. I fell down the steps and <code>broke my ankle</code>. I also <code>sprained my left wrist and bruised my back badly</code>. I had to go to the hospital, and I stayed there for three days. I hurt a lot! I had to stay at home for two more weeks before I could go back to work.</p>
<hr>
<div class="video-container"><iframe src="//www.youtube.com/embed/XDm4bNQGwWE" frameborder="0" allowfullscreen></iframe></div>
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/ef-l6u2-Going-to-the-doctor&#39;s-l3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/12/16/English/ef-l6u2-Going-to-the-doctor's-l3/"><strong>Going to the doctor&#39;s L3 Filling a prescription</strong></a>
      <small class=article-date-index>&nbsp; 2016-12-16</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/12/16/English/ef-l6u2-Going-to-the-doctor's-l3/" class="article-date">
  <time datetime="2016-12-15T23:15:16.000Z" itemprop="datePublished">2016-12-16</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/12/16/English/ef-l6u2-Going-to-the-doctor's-l3/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 500px;
        margin-left: 200px !important;
}
</style>

<h2 id="1-Vocabulary"><a href="#1-Vocabulary" class="headerlink" title="1. Vocabulary"></a>1. Vocabulary</h2><ul>
<li>I’m going to the pharmacy.</li>
<li>He talked to the pharmacist.</li>
<li>teaspoons</li>
</ul>
<table>
<thead>
<tr>
<th>allergic to</th>
<th>medications</th>
<th>dosage </th>
</tr>
</thead>
<tbody>
<tr>
<td>tablets</td>
<td>spicy</td>
<td>capsules</td>
</tr>
</tbody>
</table>
<p><img src="/images/english/ef-l6u2l3.png" alt=""></p>
<table>
<thead>
<tr>
<th>A: PAM - B: PHARMACIST</th>
</tr>
</thead>
<tbody>
<tr>
<td>[A] Hi. I’d like to fill a prescription. James. My first name is Pam. Does my insurance cover this?</td>
<td></td>
</tr>
<tr>
<td>[B] Yes, it does. I’ll be right back. Are you allergic to any other medications?</td>
<td></td>
</tr>
<tr>
<td>[A] Uh, no, I’m not.</td>
<td></td>
</tr>
<tr>
<td>[B] Okay. So this will help stop the diarrhea. The dosage is two tablets every six hours.</td>
<td></td>
</tr>
<tr>
<td>[A] Okay.</td>
<td></td>
</tr>
<tr>
<td>[B] It’s better if you take it with some plain food, like rice or scrambled eggs. Nothing spicy.</td>
<td></td>
</tr>
<tr>
<td>[A] I understand.</td>
<td></td>
</tr>
<tr>
<td>[B] And this is for the nausea and the vomiting. Take two capsules twice a day for three days.</td>
<td></td>
</tr>
<tr>
<td>[B] I hope you feel better.</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="2-Expressions"><a href="#2-Expressions" class="headerlink" title="2. Expressions"></a>2. Expressions</h2><table>
<thead>
<tr>
<th>PAM</th>
<th>PHARMACIST</th>
</tr>
</thead>
<tbody>
<tr>
<td>I’d like to fill a prescription.</td>
<td>Take two capsules twice a day for three days</td>
</tr>
<tr>
<td>I’m here to pick up my medication</td>
<td>It’s better if you take it with some plain food.</td>
</tr>
<tr>
<td>Does my insurance cover this?</td>
<td>Yes, it does.</td>
</tr>
<tr>
<td>I’m not currently taking any medication.</td>
<td>I hope you feel better. </td>
</tr>
</tbody>
</table>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/ef-l6u2-Going-to-the-doctor&#39;s-l2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/12/13/English/ef-l6u2-Going-to-the-doctor's-l2/"><strong>Going to the doctor&#39;s L2 Talking with the doctor</strong></a>
      <small class=article-date-index>&nbsp; 2016-12-13</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/12/13/English/ef-l6u2-Going-to-the-doctor's-l2/" class="article-date">
  <time datetime="2016-12-12T23:15:16.000Z" itemprop="datePublished">2016-12-13</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/12/13/English/ef-l6u2-Going-to-the-doctor's-l2/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 450px;
        margin-left: 200px !important;
}
</style>

<h2 id="1-Vocabulary"><a href="#1-Vocabulary" class="headerlink" title="1. Vocabulary"></a>1. Vocabulary</h2><table>
<thead>
<tr>
<th>blood pressure</th>
<th>symptoms</th>
<th>stomach flu </th>
</tr>
</thead>
<tbody>
<tr>
<td>prescription</td>
<td>medicine</td>
<td>liquids</td>
</tr>
<tr>
<td>appetite</td>
<td>nauseous</td>
<td>fever</td>
</tr>
</tbody>
</table>
<p><img src="/images/english/ef-l6u2l2-1.png" alt=""></p>
<table>
<thead>
<tr>
<th>A: DOCTOR - B: PAM</th>
</tr>
</thead>
<tbody>
<tr>
<td>[DOC] How are you feeling?</td>
<td></td>
</tr>
<tr>
<td>[PAM] Not so great.</td>
<td></td>
</tr>
<tr>
<td>[DOC] Hmm. I’m sorry to hear that. How long have you been feeling bad?</td>
<td></td>
</tr>
<tr>
<td>[PAM] Um, since yesterday. But I got really sick in the middle of the night.</td>
<td></td>
</tr>
<tr>
<td>[DOC] Well, you do have a slight fever, but that’s nothing to worry about. And your blood pressure is good. Did you eat anything unusual yesterday?</td>
<td></td>
</tr>
<tr>
<td>[PAM] No, I don’t think so. I had pizza for lunch, and I didn’t eat dinner.</td>
<td></td>
</tr>
<tr>
<td>[DOC] Well, based on the symptoms you’ve described, I think that you have a stomach flu. It’s been going around.</td>
<td></td>
</tr>
<tr>
<td>[PAM] Yeah, that’s what I thought.</td>
<td></td>
</tr>
<tr>
<td>[DOC] I’m going to write you a prescription for medicine to help your stomach and stop the diarrhea.</td>
<td></td>
</tr>
<tr>
<td>[DOC] Stay in bed and, uh, drink plenty of liquids. If you don’t feel better after 24 hours, I want you to call the nurse.</td>
<td></td>
</tr>
<tr>
<td>[DOC] And, uh, when you have an appetite again, take it easy. I’d recommend plain white rice and maybe some yoghurt.</td>
<td></td>
</tr>
<tr>
<td>[PAM] Okay, doctor, thanks</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="2-Grammar"><a href="#2-Grammar" class="headerlink" title="2. Grammar"></a>2. Grammar</h2><table>
<thead>
<tr>
<th>for、have been +ing</th>
<th>since</th>
</tr>
</thead>
<tbody>
<tr>
<td>Frank has been working hard <code>for two days</code>.</td>
<td>Oscar has been working hard <code>since yesterday</code>.</td>
</tr>
<tr>
<td>I’ve been waiting for the nurse for 20 minutes.</td>
<td>I’ve been having trouble sleeping since last Friday. </td>
</tr>
<tr>
<td>Since I got home, I’<code>ve been feeling</code> terrible.</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>had..for</th>
<th>Since</th>
</tr>
</thead>
<tbody>
<tr>
<td>He’s had the same symptoms for three days.</td>
<td>I’ve been drinking lots of liquids since I got sick</td>
</tr>
<tr>
<td>She’s had the flu for a week.</td>
<td>Since I got sick, I’ve been drinking lots of liquids.</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Doctor</th>
<th>Pam</th>
</tr>
</thead>
<tbody>
<tr>
<td>How long have you been feeling like this?</td>
<td>I got really sick in the middle of the night.</td>
</tr>
<tr>
<td>What are your symptoms ?</td>
<td>I have a stomachache and diarrhea.</td>
</tr>
<tr>
<td>I think that you have a stomach flu.</td>
<td>Do I have a favor ?</td>
</tr>
<tr>
<td>I’ll write you a prescription for some medicine.</td>
<td>What should I do?</td>
</tr>
<tr>
<td>Get rest and drink water.</td>
<td></td>
</tr>
</tbody>
</table>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/ef-l6u2-Going-to-the-doctor&#39;s-l1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/12/09/English/ef-l6u2-Going-to-the-doctor's-l1/"><strong>Going to the doctor&#39;s L1 Making a doctor&#39;s appointment</strong></a>
      <small class=article-date-index>&nbsp; 2016-12-09</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/12/09/English/ef-l6u2-Going-to-the-doctor's-l1/" class="article-date">
  <time datetime="2016-12-08T23:15:16.000Z" itemprop="datePublished">2016-12-09</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/12/09/English/ef-l6u2-Going-to-the-doctor's-l1/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-Vocabulary"><a href="#1-Vocabulary" class="headerlink" title="1. Vocabulary"></a>1. Vocabulary</h2><ul>
<li>I feel terrible.</li>
<li><code>vomiting</code></li>
<li>I have <code>diarrhea</code>. [,daɪə’riə]</li>
<li>patient</li>
<li>make an appointment</li>
<li><strong>dizzy</strong> [‘dɪzɪ]</li>
<li><strong>nauseous</strong> [‘nɔːsɪəs]</li>
<li><strong>sore throat</strong></li>
</ul>
<p><img src="/images/english/ef-l6u2l1.png" width="480" height="400" img=""></p>
<table>
<thead>
<tr>
<th>Making a doctor’s appointment</th>
</tr>
</thead>
<tbody>
<tr>
<td>[SALLY] Pam, are you okay?</td>
<td></td>
</tr>
<tr>
<td>[PAM] No. I feel terrible.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] What’s up?</td>
<td></td>
</tr>
<tr>
<td>[PAM] <strong>I’ve been vomiting all night</strong>.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Oh, <strong>you poor thing</strong>. You need to call a doctor.</td>
<td></td>
</tr>
<tr>
<td>[PAM] I know.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] Hey. Uh, I have to go, but I’ll call you later to see how you are.</td>
<td></td>
</tr>
<tr>
<td>[PAM] Hello</td>
<td></td>
</tr>
<tr>
<td>[RECEPTIONIST] Good morning. Doctor Brennan’s office.</td>
<td></td>
</tr>
<tr>
<td>[PAM] Hi. My name’s Pam James. I’m a <code>patient</code> of Doctor Brennan’s.</td>
<td></td>
</tr>
<tr>
<td>[RECEPTIONIST] Oh, yes. Ms. James. How can I help you?</td>
<td></td>
</tr>
<tr>
<td>[PAM] I’m sick. I want to <strong>make an appointment</strong> to see the doctor today.</td>
<td></td>
</tr>
<tr>
<td>[RECEPTIONIST] <strong>What seems to be the problem?</strong></td>
<td></td>
</tr>
<tr>
<td>[PAM] I’ve been vomiting. And I, uh, have diarrhea.</td>
<td></td>
</tr>
<tr>
<td>[RECEPTIONIST] I’m very sorry to hear that. <strong>How long has this been going on?</strong></td>
<td></td>
</tr>
<tr>
<td>[PAM] All night. It started about 3 in the morning.</td>
<td></td>
</tr>
<tr>
<td>[RECEPTIONIST] Oh, dear. Will you be able to get to the doctor’s office okay?</td>
<td></td>
</tr>
<tr>
<td>[PAM] Yeah, I think so.</td>
<td></td>
</tr>
<tr>
<td>[RECEPTIONIST] Okay. Let me just have a look here. The doctor has some time at 1 o’clock. <strong>Could you make it then</strong>?</td>
<td></td>
</tr>
<tr>
<td>[PAM] Is there anything earlier?</td>
<td></td>
</tr>
<tr>
<td>[RECEPTIONIST] No, I’m sorry. The doctor’s really busy today.</td>
<td></td>
</tr>
<tr>
<td>[PAM] Okay. One o’clock is fine.</td>
<td></td>
</tr>
<tr>
<td>[RECEPTIONIST] Great. So, we’ll see you at 1 o’clock. Take care.</td>
<td></td>
</tr>
<tr>
<td>[PAM] Thank you.</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="2-Expressions"><a href="#2-Expressions" class="headerlink" title="2. Expressions"></a>2. Expressions</h2><table>
<thead>
<tr>
<th>&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td>I have a headache, and I’m dizzy.</td>
<td></td>
</tr>
<tr>
<td>I have a stomachache, and I feel nauseous.</td>
<td></td>
</tr>
<tr>
<td>I have a bad cough and a sore throat.</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td>I had a fever last night.</td>
<td></td>
</tr>
<tr>
<td>I have diarrhea.</td>
<td></td>
</tr>
<tr>
<td>I’ve been vomiting.</td>
<td></td>
</tr>
<tr>
<td>How have you been feeling?</td>
<td></td>
</tr>
<tr>
<td>How long has this been <code>going on</code>?</td>
<td></td>
</tr>
<tr>
<td>I’ve been vomiting all night.</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>&nbsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td>I’ve been feeling sick for three days.</td>
<td></td>
</tr>
<tr>
<td>I’ve been having problems sleeping.</td>
<td></td>
</tr>
<tr>
<td>Good morning. I’m a patient of Doctor Brennan’s.</td>
<td></td>
</tr>
<tr>
<td>I want to make an appointment to see the doctor.</td>
<td></td>
</tr>
<tr>
<td>What seems to be the problem?</td>
<td></td>
</tr>
<tr>
<td>I’ve been feeling nauseous and tired.</td>
<td></td>
</tr>
<tr>
<td>The doctor has some time at 1 o’clock.</td>
<td></td>
</tr>
<tr>
<td>Is there anything earlier?</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="2-1-have"><a href="#2-1-have" class="headerlink" title="2.1 have"></a>2.1 have</h3><ul>
<li>I have a fever.</li>
<li>He has diarrhea.</li>
<li>She has a bad cough.</li>
</ul>
<h3 id="2-2-sore、-ache"><a href="#2-2-sore、-ache" class="headerlink" title="2.2 sore、-ache"></a>2.2 sore、-ache</h3><ul>
<li>I have a <strong>sore</strong> throat.</li>
<li>He has a headache.</li>
<li>I have a stomachache.</li>
</ul>
<h3 id="2-3-be、feel"><a href="#2-3-be、feel" class="headerlink" title="2.3 be、feel"></a>2.3 be、feel</h3><ul>
<li>I’m dizzy. I feel dizzy.</li>
<li>She’s nauseous. She feels nauseous.  [‘nɔːsɪəs]</li>
</ul>
<p>I’ve been vomiting for about an hour.</p>
<h2 id="3-Reading"><a href="#3-Reading" class="headerlink" title="3. Reading"></a>3. Reading</h2><p>I feel terrible. I didn’t sleep last night because I had a bad fever  . I was just too hot! I have a bad cough  , too – maybe because I smoke? My colleagues always complain about the noise I make, but I can’t answer them because I have a sore throat  and I can’t speak. I didn’t eat all day because I felt nauseous  and I had a stomachache  , and every time I wanted to stand up, I couldn’t because I was so dizzy.</p>
<ul>
<li>I have been feeling very bad <code>for</code> the last two days.</li>
<li>I have been having problems sleeping.</li>
<li>Have you been experiencing any other problems?</li>
</ul>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-disable/Chinese-society-resorting-to-trickery" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/12/04/disable/Chinese-society-resorting-to-trickery/"><strong>Chinese Society&#39;s Common Trick</strong></a>
      <small class=article-date-index>&nbsp; 2016-12-04</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/12/04/disable/Chinese-society-resorting-to-trickery/" class="article-date">
  <time datetime="2016-12-04T14:15:16.000Z" itemprop="datePublished">2016-12-04</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/life/">life</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/12/04/disable/Chinese-society-resorting-to-trickery/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>健身馆、技能培训机构、私立医院、婚恋中介、房屋中介、美容院等机构的骗术</p>
</blockquote>
<h2 id="1-健身会馆"><a href="#1-健身会馆" class="headerlink" title="1. 健身会馆"></a>1. 健身会馆</h2><p>这类机构，往往会采取低成本招聘一些找不到什么正规工作的人等来做号称各种专业的顾问，在各个人员密集的地方拉客，或者 在大地铁站附近发这传单等方式来宣传自己，还时候一般会有给你1~2次体验的机会等等，让你登记、免费体验、免费体检等等。</p>
<h3 id="1-1-套路-体检报告"><a href="#1-1-套路-体检报告" class="headerlink" title="1.1 套路 体检报告"></a>1.1 套路 体检报告</h3><p>身体虚，缺蛋白质，脂肪多、骨骼肌低 等等</p>
<blockquote>
<p>让消费者感到心里恐慌 及 需要健身的急迫性</p>
</blockquote>
<h3 id="1-2-套路-自吹自擂"><a href="#1-2-套路-自吹自擂" class="headerlink" title="1.2 套路 自吹自擂"></a>1.2 套路 自吹自擂</h3><p>说他们的课程多专业，老师多专业，连锁店多大等</p>
<h3 id="1-3-套路-费用咨询"><a href="#1-3-套路-费用咨询" class="headerlink" title="1.3 套路 费用咨询"></a>1.3 套路 费用咨询</h3><p>往往直接问这个，他们一般会给你闪烁其词，套你的心里，最后道出一个特别贵的天文数字费用，你如果说考虑考虑等，就给你来了个，我可以帮你向上边申请优惠，然后再来一个人，和你聊，号称给你优惠了多少多少，最后你如果走了，就给你来一个最后通牒，说你2天内不办这个优惠就没有了等等，造成你的进一步恐慌。</p>
<blockquote>
<p>中间过程，你不爽快定的话，很可能会伴随着你的各种被顾问的反问、质问、嘲讽等</p>
</blockquote>
<h3 id="1-4-套路-催签合同"><a href="#1-4-套路-催签合同" class="headerlink" title="1.4 套路 催签合同"></a>1.4 套路 催签合同</h3><p>消费者往往被店里人忽悠，签合同并没有仔细阅读每一个条款，签字之后，交了钱，以后再发生什么不愉快，退卡转卡之类的，基本会被各种理由所阻挠，钱给了人家，人家就是大爷了一般。</p>
<blockquote>
<p>办卡者请谨慎选择，去网上看看其他人对这家的评价等等三思而后行。</p>
<p>典型为 : 《唯瑜伽》 害人不浅 等</p>
</blockquote>
<h2 id="2-私立医院"><a href="#2-私立医院" class="headerlink" title="2. 私立医院"></a>2. 私立医院</h2><p>这类医院，我想大家都听说过 莆田系-魏则西事件，只是这个事件被公众关注了。其实内地这30年来，可以说类似普通民众被坑的事件无处不在，这类医院对人们造成了非常大的伤害。深度挖掘医院背景更是涉及权钱交易、官商勾结的巨大黑幕。不多讨论。</p>
<h3 id="2-1-套路-推广渠道"><a href="#2-1-套路-推广渠道" class="headerlink" title="2.1 套路 推广渠道"></a>2.1 套路 推广渠道</h3><p>这类医院会在社会上廉价招聘很多找不到什么正规工作的人，通过流行社交媒体或社交软件 如 ： 微博、微信、百度推广 等进行大面积推广。和咨询的病人进行非常热心礼貌的问答，当然第一步他们会想办法获取你的姓名、电话号等个人信息。</p>
<h3 id="2-2-套路-优惠检查"><a href="#2-2-套路-优惠检查" class="headerlink" title="2.2 套路 优惠检查"></a>2.2 套路 优惠检查</h3><p>为了吸引病人，可以去看病，会用优惠，免费给你申请的什么项目等来忽悠你去那看病。</p>
<h3 id="2-3-套路-夸大病情"><a href="#2-3-套路-夸大病情" class="headerlink" title="2.3 套路 夸大病情"></a>2.3 套路 夸大病情</h3><p>夸大病情，一般这时候你的医生(假学历或者是去不了正规医院的) 对你进行在事实的基础上夸大病情，用一些术语和你自己道出的实际情况，进行包装式忽悠，以让病人心里产生巨大的心里恐慌。会用非常快的速度让你去交钱、再检查什么、再做什么手术等等。</p>
<h3 id="2-4-套路-后续处理"><a href="#2-4-套路-后续处理" class="headerlink" title="2.4 套路 后续处理"></a>2.4 套路 后续处理</h3><p>可能会追踪你的后续情况，让你来复查等等，进行第二轮忽悠。最后你发现花了很多钱，你就算知道被忽悠了，但是也是一点办法没有，因为整体流程是正确的，你用法律的手段也是告不了他们的。</p>
<blockquote>
<p>推荐人们务必擦亮双眼，看病还是推荐去国家国有三级甲等、或者是其他国有甲等医院来看病治疗，如果对非常在意的大病，推荐去2家以上三甲医院进一步确诊，以防止误诊的万无一失。</p>
<p>千万别去内地每一个城市都有的很多莆田系医院，千万查询好三思而行，别去莆田系。</p>
</blockquote>
<h2 id="3-婚恋中介"><a href="#3-婚恋中介" class="headerlink" title="3. 婚恋中介"></a>3. 婚恋中介</h2><p>这种机构一般会通过各种渠道，比如公交车、电梯里、公交站、报纸 等打着巨大的广告进行宣传。</p>
<p>你去的话，一般号称是情感顾问的让你填写你个人的详细信息，包括非常敏感的信息全部写一遍，然后针对你的情况进行各种忽悠，最后费用忽悠的方式和健身瑜伽等会馆的忽悠方式可能类似，给你一个巨大的天文金额，然后给你申请优惠，也可能最后她没说服你今天马上办理，就会再给你换一个号称更资深的顾问来再和你聊一大堆，想办法让你马上签合同交钱等。</p>
<blockquote>
<p>如 ： 我主良缘 等机构，基本就是坑蒙拐骗，能骗就骗，和美容院推荐你办理会员，一个人员一个人员和你聊，直到你办理为止。推荐你这时候当机立断。</p>
</blockquote>
<h2 id="4-房屋中介"><a href="#4-房屋中介" class="headerlink" title="4. 房屋中介"></a>4. 房屋中介</h2><p>这类中介公司，特别多，经常见很多友人被 黑中介嘴上说的特别好，给你很多允诺，最后忽悠让你交定金什么的，交款之后，你就入道了，基本你不租定金也不会给你退了，之前和你打保证的，他很有可能说没和你说过。这时候你就完全被动了，签合同的话一定要认真阅读每一个条款，如果你有什么要求都要增加到合同上，否则一切黑中介说的话，全部都是可以不认账的。</p>
<blockquote>
<p>在这里，你不能相信任何人，你只能相信白纸黑字写下来的才是对的。</p>
</blockquote>
<h2 id="5-技能培训机构"><a href="#5-技能培训机构" class="headerlink" title="5. 技能培训机构"></a>5. 技能培训机构</h2><p>这类机构，比如各种 英孚英语、华尔街英语、樱花日语、跳舞班、书法班、绘画班等等，这类机构参差不齐，不能以偏概全。也有不乏一些顾问就像健身一样的方式来忽悠你，给你优惠，1~2内不决定优惠就没有了等语言来使得你感到恐慌性盲从，中间当然也不乏你嫌弃贵，顾问就嫌弃你屌丝，语气画风都变了的可能性非常大。</p>
<blockquote>
<p>有非常少的类似机构是不错的，当然也存在个别的顾问可能会存在势利眼，势力笑等。</p>
</blockquote>
<h2 id="To-summarize"><a href="#To-summarize" class="headerlink" title="To summarize"></a>To summarize</h2><p>中国这种实体利益恶霸，坑蒙拐骗、势力眼 比比皆是，我想电子商务淘宝、天猫等正是用7天无理由退换货以及平台监管方案才使得消费者的权益得到保障，直接解决了人与人之间的信任问题，从价值观的角度来看，这是使得各类电商取得快速发展的重要决定性推力。</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-spark/spark-machine-learning-p4-rs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/11/23/spark/spark-machine-learning-p4-rs/"><strong>Spark Machine Learning p4 - Build Recommendation System</strong></a>
      <small class=article-date-index>&nbsp; 2016-11-23</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/11/23/spark/spark-machine-learning-p4-rs/" class="article-date">
  <time datetime="2016-11-23T07:28:21.000Z" itemprop="datePublished">2016-11-23</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/spark/">spark</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/11/23/spark/spark-machine-learning-p4-rs/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<blockquote>
<p>推荐引擎试图对用户与某类物品之间的联系建模</p>
</blockquote>
<ul>
<li>推荐引擎的类型；</li>
<li>用用户偏好数据来建立一个推荐模型；</li>
<li>为用户进行推荐和求指定物品的类似物品；</li>
<li>评估该模型的预测能力。</li>
</ul>
<h2 id="1-推荐模型分类"><a href="#1-推荐模型分类" class="headerlink" title="1. 推荐模型分类"></a>1. 推荐模型分类</h2><ul>
<li>内容过滤</li>
<li>协同过滤</li>
<li>矩阵分解</li>
</ul>
<h3 id="1-1-内容过滤-类似物品"><a href="#1-1-内容过滤-类似物品" class="headerlink" title="1.1 内容过滤 - (类似物品)"></a>1.1 内容过滤 - (类似物品)</h3><p>利用物品相似度定义，来求出与该物品类似的物品。</p>
<blockquote>
<p>对用户的推荐可以根据用户的属性或描述得出，之后再通过相同的相似度定义来与物品属性做匹配。</p>
</blockquote>
<h3 id="1-2-协同过滤-估计未触"><a href="#1-2-协同过滤-估计未触" class="headerlink" title="1.2 协同过滤 - (估计未触)"></a>1.2 协同过滤 - (估计未触)</h3><p>协同过滤是一种利用大量已有的用户偏好来估计用户对其<code>未接触过</code>的物品的喜好程度。其内在思想是<strong>相似度的定义</strong>。</p>
<ul>
<li><p>基于用户</p>
<blockquote>
<p>如果两个用户表现出相似的偏好，认为他们的兴趣类似。要对他们中的一个用户推荐一个未知物品，便可选取若干与其类似的用户并根据他们的喜好计算出对各个物品的综合得分。</p>
</blockquote>
</li>
<li><p>基于物品</p>
<blockquote>
<p>据现有用户对物品的偏好或是评级情况，来计算物品之间的某种相似度。已有物品相似的物品被用来生成一个综合得分，而该得分用于评估未知物品的相似度。</p>
</blockquote>
</li>
</ul>
<p>基于<strong>用户</strong>或<strong>物品</strong>的方法得分取决于若干用户或是物品之间依据相似度所构成的集合（即邻居），故它们也常被称为KNN。</p>
<p>对“用户-物品”<code>偏好建模</code></p>
<h3 id="1-3-矩阵分解"><a href="#1-3-矩阵分解" class="headerlink" title="1.3 矩阵分解"></a>1.3 矩阵分解</h3><p>Spark推荐模型库 包含基于矩阵分解（matrix factorization）的实现，该模型在协同过滤中的表现十分出色。</p>
<h4 id="1-3-1-显式矩阵分解"><a href="#1-3-1-显式矩阵分解" class="headerlink" title="1.3.1 显式矩阵分解"></a>1.3.1 显式矩阵分解</h4><p>显式自身偏好数据</p>
<blockquote>
<p>这类数据包括如物品评级、赞、喜欢等用户对物品的评价。转换为以用户为行、物品为列的二维矩阵。</p>
<p>大部分情况下单个用户只会和少部分物品接触，所以该矩阵很稀疏。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Tom, Star Wars, 5</span><br><span class="line">Jane, Titanic,　4</span><br><span class="line">Bill, Batman,　3</span><br><span class="line">Jane, Star Wars, 2</span><br><span class="line">Bill, Titanic, 3</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-4.1.png" alt="一个简单的电影评级矩阵"></p>
<p>用户-物品 矩阵的维度为 U × I</p>
<p><img src="/images/spark/spark-ml-4.2.jpg" alt="图4-2 一个稀疏的评级矩阵"> </p>
<p><strong>为了降维</strong></p>
<ul>
<li>表示用户的 U × k 维矩阵</li>
<li>表征物品的 I × k 维矩阵</li>
</ul>
<blockquote>
<p>这两个矩阵也称作因子矩阵, 乘积是原始评级矩阵的一个近似.</p>
<p>原始评级矩阵通常很稀疏，但因子矩阵却是稠密的</p>
</blockquote>
<p><img src="/images/spark/spark-ml-4.3.jpg" alt="图4-3 用户因子矩阵和物品因子矩阵"></p>
<blockquote>
<p>因子可能表示了某些含义，比如对电影的某个导演、种类、风格或某些演员的偏好。</p>
</blockquote>
<p><code>要计算给定用户对某个物品的预计评级</code> = 行（用户因子向量） 与 列（物品因子向量），两者点积</p>
<p><img src="/images/spark/spark-ml-4.4.jpg" alt="图4-4 用用户因子矩阵和物品因子矩阵计算推荐"></p>
<blockquote>
<p>物品之间相似度的计算，转换为对两物品因子向量之间相似度的计算</p>
</blockquote>
<p><img src="/images/spark/spark-ml-4.5.jpg" alt="图4-5 用物品因子矩阵计算相似度"></p>
<table>
<thead>
<tr>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td>因子分解类模型建立，求解容易</td>
<td>物品或是用户的因子向量可能达到数以百万计。在存储和计算能力有挑战。</td>
</tr>
</tbody>
</table>
<h4 id="1-3-2-隐式矩阵分解"><a href="#1-3-2-隐式矩阵分解" class="headerlink" title="1.3.2. 隐式矩阵分解"></a>1.3.2. 隐式矩阵分解</h4><p>隐含在用户与物品的交互之中。二元数据（比如用户是否观看了某个电影或是否购买了某个商品）和计数数据（比如用户观看某电影的次数）便是这类数据。</p>
<p>MLlib 处理隐式数据：</p>
<ol>
<li>一个二元偏好矩阵 P </li>
<li>一个信心权重矩阵 C</li>
</ol>
<p><img src="/images/spark/spark-ml-4.6.png" alt="图4-6 用物品因子矩阵计算相似度"></p>
<p>隐式模型仍然会创建一个用户因子矩阵和一个物品因子矩阵。但是，模型所求解的是偏好矩阵而非评级矩阵的近似。</p>
<p><strong>3. 最小二乘法</strong></p>
<p>最小二乘法（Alternating Least Squares，ALS）是一种求解矩阵分解问题的最优化方法。且相对容易并行化。</p>
<blockquote>
<p>ALS的实现原理是迭代式求解一系列最小二乘回归问题。在每一次迭代时，固定用户因子矩阵或是物品因子矩阵中的一个，然后用固定的这个矩阵以及评级数据来更新另一个矩阵。之后，被更新的矩阵被固定住，再更新另外一个矩阵。如此迭代，直到模型收敛（或是迭代了预设好的次数）。</p>
</blockquote>
<h2 id="2-提取有效特征"><a href="#2-提取有效特征" class="headerlink" title="2. 提取有效特征"></a>2. 提取有效特征</h2><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">&gt;./bin/spark-shell –-driver-memory <span class="number">2</span>g</span><br><span class="line"><span class="keyword">val</span> rawData = sc.textFile(<span class="string">"/Users/hp/ghome/github/Recommendation/spark-ml/ml-100k/u.data"</span>)</span><br><span class="line">rawData.first()</span><br><span class="line"><span class="keyword">val</span> rawRatings = rawData.map(_.split(<span class="string">"\t"</span>).take(<span class="number">3</span>))</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.mllib.recommendation.<span class="type">ALS</span></span><br><span class="line"></span><br><span class="line"><span class="type">ALS</span>.</span><br><span class="line">asInstanceOf    isInstanceOf   main   toString        train           trainImplicit</span><br><span class="line"><span class="type">ALS</span>.train</span><br></pre></td></tr></table></figure>
<p>ALS模型需要一个由Rating记录构成的RDD，而Rating类则是对用户ID、影片ID（这里是通称product）和实际星级这些参数的封装。<br>我们可以调用map方法将原来的各ID和星级的数组转换为对应的Rating对象，从而创建所需的评级数据集。</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">import</span> org.apache.spark.mllib.recommendation.<span class="type">Rating</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.mllib.recommendation.<span class="type">Rating</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> ratings = rawRatings.map &#123; <span class="keyword">case</span> <span class="type">Array</span>(user, movie, rating) =&gt;</span><br><span class="line">     | <span class="type">Rating</span>(user.toInt, movie.toInt, rating.toDouble) &#125;</span><br><span class="line">ratings: org.apache.spark.rdd.<span class="type">RDD</span>[org.apache.spark.mllib.recommendation.<span class="type">Rating</span>] = <span class="type">MapPartitionsRDD</span>[<span class="number">3</span>] at map at &lt;console&gt;:<span class="number">27</span></span><br><span class="line"></span><br><span class="line">scala&gt; ratings.first()</span><br><span class="line">res3: org.apache.spark.mllib.recommendation.<span class="type">Rating</span> = <span class="type">Rating</span>(<span class="number">196</span>,<span class="number">242</span>,<span class="number">3.0</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; ratings.take(<span class="number">10</span>)</span><br><span class="line">res4: <span class="type">Array</span>[org.apache.spark.mllib.recommendation.<span class="type">Rating</span>] = <span class="type">Array</span>(<span class="type">Rating</span>(<span class="number">196</span>,<span class="number">242</span>,<span class="number">3.0</span>), <span class="type">Rating</span>(<span class="number">186</span>,<span class="number">302</span>,<span class="number">3.0</span>), <span class="type">Rating</span>(<span class="number">22</span>,<span class="number">377</span>,<span class="number">1.0</span>), <span class="type">Rating</span>(<span class="number">244</span>,<span class="number">51</span>,<span class="number">2.0</span>), <span class="type">Rating</span>(<span class="number">166</span>,<span class="number">346</span>,<span class="number">1.0</span>), <span class="type">Rating</span>(<span class="number">298</span>,<span class="number">474</span>,<span class="number">4.0</span>), <span class="type">Rating</span>(<span class="number">115</span>,<span class="number">265</span>,<span class="number">2.0</span>), <span class="type">Rating</span>(<span class="number">253</span>,<span class="number">465</span>,<span class="number">5.0</span>), <span class="type">Rating</span>(<span class="number">305</span>,<span class="number">451</span>,<span class="number">3.0</span>), <span class="type">Rating</span>(<span class="number">6</span>,<span class="number">86</span>,<span class="number">3.0</span>))</span><br></pre></td></tr></table></figure>
<h2 id="3-训练推荐模型"><a href="#3-训练推荐模型" class="headerlink" title="3. 训练推荐模型"></a>3. 训练推荐模型</h2><p>从原始数据提取出这些简单特征后，便可训练模型。MLlib已实现模型训练的细节，这不需要我们担心。我们只需提供上述指定类型的新RDD以及其他所需参数来作为训练的输入即可。</p>
<h3 id="3-1-Movie-100k-train-model"><a href="#3-1-Movie-100k-train-model" class="headerlink" title="3.1 Movie-100k train model"></a>3.1 Movie-100k train model</h3><p>现在开始训练模型了，所需的其他参数有以下几个</p>
<ul>
<li><code>rank</code>：对应ALS模型中的因子个数，也就是在低阶近似矩阵中的隐含特征个数。因子个数一般越多越好。但它也会直接影响模型训练和保存时所需的内存开销，尤其是在用户和物品很多的时候。因此实践中该参数常作为训练效果与系统开销之间的调节参数。通常，其合理取值为10到200。</li>
<li><code>iterations</code>：对应运行时的迭代次数。ALS能确保每次迭代都能降低评级矩阵的重建误差，但一般经少数次迭代后ALS模型便已能收敛为一个比较合理的好模型。这样，大部分情况下都没必要迭代太多次（10次左右一般就挺好）。</li>
<li><code>lambda</code>：该参数控制模型的正则化过程，从而控制模型的过拟合情况。其值越高，正则化越严厉。该参数的赋值与实际数据的大小、特征和稀疏程度有关。和其他的机器学习模型一样，正则参数应该通过用非样本的测试数据进行交叉验证来调整。</li>
</ul>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> model = <span class="type">ALS</span>.train(ratings, <span class="number">50</span>, <span class="number">10</span>, <span class="number">0.01</span>)</span><br><span class="line">model: org.apache.spark.mllib.recommendation.<span class="type">MatrixFactorizationModel</span> = org.apache.spark.mllib.recommendation.<span class="type">MatrixFactorizationModel</span>@<span class="number">2e835760</span></span><br><span class="line"></span><br><span class="line">scala&gt; model.userFeatures</span><br><span class="line">res5: org.apache.spark.rdd.<span class="type">RDD</span>[(<span class="type">Int</span>, <span class="type">Array</span>[<span class="type">Double</span>])] = users <span class="type">MapPartitionsRDD</span>[<span class="number">209</span>] at mapValues at <span class="type">ALS</span>.scala:<span class="number">255</span></span><br><span class="line"></span><br><span class="line">scala&gt; model.userFeatures.count</span><br><span class="line">res6: <span class="type">Long</span> = <span class="number">943</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>MatrixFactorizationModel</code> 对象将 用户因子和物品因子分别保存在一个 <code>(id,factor)</code> 对类型的RDD中。<br>它们分别称作<code>userFeatures</code> 和 <code>productFeatures</code>。</p>
</blockquote>
<h3 id="3-2-隐式反馈数据训练模型"><a href="#3-2-隐式反馈数据训练模型" class="headerlink" title="3.2 隐式反馈数据训练模型"></a>3.2 隐式反馈数据训练模型</h3><p>MLlib中标准的矩阵分解模型用于显式评级数据的处理。若要处理隐式数据，则可使用<code>trainImplicit</code>函数。其调用方式和标准的<code>train</code>模式类似，但多了一个可设置的<code>alpha</code>参数（也是一个正则化参数，<code>lambda</code>应通过测试和交叉验证法来设置）。</p>
<p>alpha参数指定了信心权重所应达到的基准线。该值越高则所训练出的模型越认为用户与他所没评级过的电影之间没有相关性。</p>
<h2 id="4-使用推荐模型"><a href="#4-使用推荐模型" class="headerlink" title="4. 使用推荐模型"></a>4. 使用推荐模型</h2><p>预测通常有两种：为某个用户推荐物品，或找出与某个物品相关或相似的其他物品。</p>
<h3 id="4-1-用户推荐"><a href="#4-1-用户推荐" class="headerlink" title="4.1 用户推荐"></a>4.1 用户推荐</h3><p>通过模型求出用户可能喜好程度最高的前K个商品。</p>
<ol>
<li>基于<strong>用户的模型</strong>，则会利用相似用户的评级来计算对某个用户的推荐。</li>
<li>基于<strong>物品的模型</strong>，则会依靠用户接触过的物品与候选物品之间的相似度来获得推荐。</li>
</ol>
<p>利用矩阵分解方法时，是直接对评级数据进行建模，所以预计得分可视作相应用户因子向量和物品因子向量的点积。</p>
<p><strong>1. 从MovieLens 100k数据集生成电影推荐</strong></p>
<p>MLlib的推荐模型基于矩阵分解，因此可用模型所求得的因子矩阵来计算用户对物品的预计评级。下面只针对利用MovieLens中显式数据做推荐的情形，使用隐式模型时的方法与之相同。</p>
<p><code>MatrixFactorizationModel</code>类 提供了一个<code>predict</code>函数，以方便地计算给定用户对给定物品的预期得分：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> predictedRating = model.predict(<span class="number">789</span>, <span class="number">123</span>)</span><br><span class="line"><span class="number">16</span>/<span class="number">05</span>/<span class="number">04</span> <span class="number">16</span>:<span class="number">13</span>:<span class="number">08</span> <span class="type">WARN</span> <span class="type">BLAS</span>: <span class="type">Failed</span> to load implementation from: com.github.fommil.netlib.<span class="type">NativeSystemBLAS</span></span><br><span class="line"><span class="number">16</span>/<span class="number">05</span>/<span class="number">04</span> <span class="number">16</span>:<span class="number">13</span>:<span class="number">08</span> <span class="type">WARN</span> <span class="type">BLAS</span>: <span class="type">Failed</span> to load implementation from: com.github.fommil.netlib.<span class="type">NativeRefBLAS</span></span><br><span class="line">predictedRating: <span class="type">Double</span> = <span class="number">1.8390368814083764</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> predictedRating = model.predict(<span class="number">789</span>, <span class="number">123</span>)</span><br><span class="line">predictedRating: <span class="type">Double</span> = <span class="number">1.8390368814083764</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> userId = <span class="number">789</span></span><br><span class="line">userId: <span class="type">Int</span> = <span class="number">789</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> <span class="type">K</span> = <span class="number">10</span></span><br><span class="line"><span class="type">K</span>: <span class="type">Int</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> topKRecs = model.recommendProducts(userId, <span class="type">K</span>)</span><br><span class="line">topKRecs: <span class="type">Array</span>[org.apache.spark.mllib.recommendation.<span class="type">Rating</span>] = <span class="type">Array</span>(<span class="type">Rating</span>(<span class="number">789</span>,<span class="number">180</span>,<span class="number">5.352418839062572</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">887</span>,<span class="number">5.289455638310055</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">484</span>,<span class="number">5.0301818688410025</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">475</span>,<span class="number">5.011219778604191</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">150</span>,<span class="number">5.003965038415291</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">663</span>,<span class="number">4.991126084946501</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">56</span>,<span class="number">4.974685008959871</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">48</span>,<span class="number">4.965402351329832</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">9</span>,<span class="number">4.963265626841469</span>), <span class="type">Rating</span>(<span class="number">789</span>,<span class="number">127</span>,<span class="number">4.963069165947614</span>))</span><br><span class="line"></span><br><span class="line">scala&gt; println(topKRecs.mkString(<span class="string">"\n"</span>))</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">180</span>,<span class="number">5.352418839062572</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">887</span>,<span class="number">5.289455638310055</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">484</span>,<span class="number">5.0301818688410025</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">475</span>,<span class="number">5.011219778604191</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">150</span>,<span class="number">5.003965038415291</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">663</span>,<span class="number">4.991126084946501</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">56</span>,<span class="number">4.974685008959871</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">48</span>,<span class="number">4.965402351329832</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">9</span>,<span class="number">4.963265626841469</span>)</span><br><span class="line"><span class="type">Rating</span>(<span class="number">789</span>,<span class="number">127</span>,<span class="number">4.963069165947614</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Reading notes</p>
</blockquote>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml/recommendation-what" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/11/22/ml/recommendation-what/"><strong>Recommendation System What ?</strong></a>
      <small class=article-date-index>&nbsp; 2016-11-22</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/11/22/ml/recommendation-what/" class="article-date">
  <time datetime="2016-11-22T02:28:21.000Z" itemprop="datePublished">2016-11-22</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/11/22/ml/recommendation-what/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<p>随着互联网的深入发展，越来越多的信息在互联网上传播，产生了严重的信息过载。如果不采用一定的手段，用户很难从如此多的信息流中找到对自己有价值的信息。</p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2016/11/22/ml/recommendation-what/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml/ml-coursera-ng-w4-nn-01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/11/17/ml/ml-coursera-ng-w4-nn-01/"><strong>Coursera Week 4 - Neural Networks Preface</strong></a>
      <small class=article-date-index>&nbsp; 2016-11-17</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/11/17/ml/ml-coursera-ng-w4-nn-01/" class="article-date">
  <time datetime="2016-11-17T02:28:21.000Z" itemprop="datePublished">2016-11-17</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/11/17/ml/ml-coursera-ng-w4-nn-01/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>


<p>coursera week 4 - ml neural networks representation</p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2016/11/17/ml/ml-coursera-ng-w4-nn-01/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-English/ef-l5u6-Clothes-and-outfits-l4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/11/14/English/ef-l5u6-Clothes-and-outfits-l4/"><strong>Clothes and outfits L4 Complimenting people on their outfits</strong></a>
      <small class=article-date-index>&nbsp; 2016-11-14</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/11/14/English/ef-l5u6-Clothes-and-outfits-l4/" class="article-date">
  <time datetime="2016-11-13T23:15:16.000Z" itemprop="datePublished">2016-11-14</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/11/14/English/ef-l5u6-Clothes-and-outfits-l4/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-Vocabulary"><a href="#1-Vocabulary" class="headerlink" title="1. Vocabulary"></a>1. Vocabulary</h2><ul>
<li>Fabrics</li>
<li>pants </li>
</ul>
<p><img src="/images/ef-l5u6l4.png" width="460" height="400" img=""></p>
<table>
<thead>
<tr>
<th>Dialog</th>
</tr>
</thead>
<tbody>
<tr>
<td>[NINA] I always try to find the newest, coolest styles for my store.</td>
<td></td>
</tr>
<tr>
<td>[NINA] I read magazines, I go to fashion shows.</td>
<td></td>
</tr>
<tr>
<td>[NINA] Fashion is always changing. I like to keep up with the latest trends.</td>
<td></td>
</tr>
<tr>
<td>[NINA] Those are great shoes!</td>
<td></td>
</tr>
<tr>
<td>[NINA] See, I have a small shop and I’m always looking for new ideas.</td>
<td></td>
</tr>
<tr>
<td>[NINA] Do you mind if I take a photo?</td>
<td></td>
</tr>
<tr>
<td>[LADY] Not at all. Go ahead.</td>
<td></td>
</tr>
<tr>
<td>[NINA] That’s lovely. Thank you.</td>
<td></td>
</tr>
<tr>
<td>[NINA] So, what are some of your favorite brands or designers?</td>
<td></td>
</tr>
<tr>
<td>[WOMAN 1] Merabi, definitely.</td>
<td></td>
</tr>
<tr>
<td>[WOMAN 2] Merabi, yeah, and YRed. I love YRed. My handbag is Yred.</td>
<td></td>
</tr>
<tr>
<td>[NINA] That’s lovely. This is leather?</td>
<td></td>
</tr>
<tr>
<td>[NINA] So what kinds of fabrics and colors do you like?</td>
<td></td>
</tr>
<tr>
<td>[WOMAN 3] I like natural fabrics, like silk and cotton.</td>
<td></td>
</tr>
<tr>
<td>[WOMAN 1] Yeah, me, too. It’s nice in the summer, but in the winter, I wear woolens.</td>
<td></td>
</tr>
<tr>
<td>[WOMAN 3] You really should add more color to your wardrobe.</td>
<td></td>
</tr>
<tr>
<td>[NINA] So, what are some of your favorite pieces of clothing?</td>
<td></td>
</tr>
<tr>
<td>[WOMAN 2] Red. Leather. Mini-skirt.</td>
<td></td>
</tr>
<tr>
<td>[WOMAN 3] What?</td>
<td></td>
</tr>
<tr>
<td>[NINA] Thanks, Here’s my shop. Pop in any time.</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="2-Expression"><a href="#2-Expression" class="headerlink" title="2. Expression"></a>2. Expression</h2><p><img src="/images/ef-l5u6l4-1.png" width="460" height="400" img=""></p>
<table>
<thead>
<tr>
<th>Opinion</th>
<th>Size</th>
<th>Age</th>
<th>Color</th>
<th>Origin</th>
<th>Material</th>
</tr>
</thead>
<tbody>
<tr>
<td>fabulous</td>
<td>long</td>
<td>old</td>
<td>navy blue</td>
<td>Chinese</td>
<td>silk</td>
</tr>
</tbody>
</table>
<ul>
<li>Her hot Indian cotton dress.</li>
<li>A weird, long, old tie.</li>
<li>Chloe prefers silk to wool.</li>
</ul>
<p>Expression would rather. Notice that I would is usually contracted to I’d.</p>
<ul>
<li>I prefer cotton to wool in the summer.</li>
<li>I prefer cotton.</li>
<li>I’d rather wear light colors in the summer.</li>
<li>I’d rather wear wool clothes than cotton in the winter.</li>
</ul>
<h2 id="3-Writing"><a href="#3-Writing" class="headerlink" title="3. Writing"></a>3. Writing</h2><p>Most of my clothes are way too expensive. I’d rather wear cool brands from a small shop than a cheap, polyester thing from a department store. I prefer silk and wool to cotton and leather. I like wearing red, yellow and orange more than dark, boring colors. I just bought a fantastic, new, orange, Spanish, leather handbag. I absolutely love it!</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/6/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/8/">Next &raquo;</a>
      </nav>
    

</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Libin Chan&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/52binge/hexo-theme-blairos">blairos</a>
    </div>
  </div>
</footer>

    
<script type="text/javascript"> <!-- add by blair 0724 type=text/javascript -->
  var disqus_shortname = 'blairos-sn';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
