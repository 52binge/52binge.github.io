<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Everyone should not forget his dream">
<meta property="og:type" content="website">
<meta property="og:title" content="Home">
<meta property="og:url" content="http://selfboot.org/page/10/index.html">
<meta property="og:site_name" content="Home">
<meta property="og:description" content="Everyone should not forget his dream">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Home">
<meta name="twitter:description" content="Everyone should not forget his dream">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/ml">Learning</a>
        
          <a class="main-nav-link" href="/tweet">Tweet</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://selfboot.org"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <br>
    <section id="main" class="outer">
      <article id="post-ef-l2u4-health-l2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/07/24/ef-l2u4-health-l2/"><strong>HEALTH L2 Staying healthy</strong></a>
      <small class=article-date-index>&nbsp; 2016-07-24</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/07/24/ef-l2u4-health-l2/" class="article-date">
  <time datetime="2016-07-23T23:59:16.000Z" itemprop="datePublished">2016-07-24</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      level 02 unit 4 lesson 2，staying healthy <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/07/24/ef-l2u4-health-l2/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-Calling-in-sick"><a href="#1-Calling-in-sick" class="headerlink" title="1. Calling in sick"></a>1. Calling in sick</h2><ul>
<li>ABC Industries. Mary speaking / This is Mary.          </li>
</ul>
<p><img src="/images/ef-l2u4l4.png" width="460" height="400" img=""></p>
<hr>
<table>
<thead>
<tr>
<th><strong>Main Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>A : Calling~~~</td>
<td></td>
</tr>
<tr>
<td>B : Todd Billings.</td>
<td></td>
</tr>
<tr>
<td>A : Hi, Todd. This is Sally.</td>
<td></td>
</tr>
<tr>
<td>B : Hi, Sally. hey, What’s up? Where are you?</td>
<td></td>
</tr>
<tr>
<td>A : I’m at home.</td>
<td></td>
</tr>
<tr>
<td>B : What’s wrong?</td>
<td></td>
</tr>
<tr>
<td>A : I’m not feeling well/bad/better，I’ve got a cold.</td>
<td></td>
</tr>
<tr>
<td>B : sounds bad !</td>
<td></td>
</tr>
<tr>
<td>A : I’m sorry, I cann’t come to work today</td>
<td></td>
</tr>
<tr>
<td>B : OK, You should stay your home</td>
<td></td>
</tr>
<tr>
<td>A : Sorry about work.</td>
<td></td>
</tr>
<tr>
<td>B : No problem!</td>
<td></td>
</tr>
<tr>
<td>A : Thank you</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="2-Automated-voicemail"><a href="#2-Automated-voicemail" class="headerlink" title="2. Automated voicemail"></a>2. Automated voicemail</h2><p><strong><em>Sometimes you will get automated voicemail when you call a business. You might hear:</em></strong></p>
<ol>
<li>Please leave a message after the tone.</li>
<li>We are currently closed. Please call again.</li>
</ol>
<h2 id="3-Common-as-greetings"><a href="#3-Common-as-greetings" class="headerlink" title="3. Common as greetings"></a>3. Common as greetings</h2><p><strong><em>These expressions are common as greetings.</em></strong></p>
<ul>
<li><p>what’s up? = What’s happening? = What’s going on?</p>
</li>
<li><p>What’s up with you? = What’s going on with you?</p>
</li>
</ul>
<h2 id="4-Negative-situation"><a href="#4-Negative-situation" class="headerlink" title="4. Negative situation"></a>4. Negative situation</h2><table>
<thead>
<tr>
<th>Man : BILL</th>
<th>Woman : Sarah</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hey, Sarah. <code>What&#39;s wrong</code>  ?</td>
<td>Nothing, Bill. <code>Don&#39;t worry  about it</code>.</td>
</tr>
<tr>
<td>Really? <code>What&#39;s  the matter?</code></td>
<td>Well, my sister is very sick  .</td>
</tr>
<tr>
<td>Oh, I’m so sorry. <code>What&#39;s the problem</code>  ?</td>
<td>The doctors don’t know  .</td>
</tr>
</tbody>
</table>
<h2 id="5-Calling-Talk"><a href="#5-Calling-Talk" class="headerlink" title="5. Calling Talk"></a>5. Calling Talk</h2><p>A : ABC Industries. How can I help you?<br>B : This is Bill. Can I speak to Mary?<br>A : Just a minute, please.</p>
<ul>
<li>Sorry about work.</li>
<li>Sorry about your car.    (you damaged your friend’s car.)</li>
<li>Sorry about the meeting.     (you missed a meeting.)    </li>
</ul>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ef-l2u4-health-l1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/07/23/ef-l2u4-health-l1/"><strong>HEALTH L1 Talking about health</strong></a>
      <small class=article-date-index>&nbsp; 2016-07-23</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/07/23/ef-l2u4-health-l1/" class="article-date">
  <time datetime="2016-07-22T23:59:16.000Z" itemprop="datePublished">2016-07-23</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      level 02 unit 4 lesson 1，talking about health <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/07/23/ef-l2u4-health-l1/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-Calling-in-sick"><a href="#1-Calling-in-sick" class="headerlink" title="1. Calling in sick"></a>1. Calling in sick</h2><ul>
<li>ABC Industries. Mary speaking / This is Mary.          </li>
</ul>
<p><img src="/images/ef-l2u4l4.png" width="460" height="400" img=""></p>
<hr>
<table>
<thead>
<tr>
<th><strong>Main Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>A : Calling~~~</td>
<td></td>
</tr>
<tr>
<td>B : Todd Billings.</td>
<td></td>
</tr>
<tr>
<td>A : Hi, Todd. This is Sally.</td>
<td></td>
</tr>
<tr>
<td>B : Hi, Sally. hey, What’s up? Where are you?</td>
<td></td>
</tr>
<tr>
<td>A : I’m at home.</td>
<td></td>
</tr>
<tr>
<td>B : What’s wrong?</td>
<td></td>
</tr>
<tr>
<td>A : I’m not feeling well/bad/better，I’ve got a cold.</td>
<td></td>
</tr>
<tr>
<td>B : sounds bad !</td>
<td></td>
</tr>
<tr>
<td>A : I’m sorry, I cann’t come to work today</td>
<td></td>
</tr>
<tr>
<td>B : OK, You should stay your home</td>
<td></td>
</tr>
<tr>
<td>A : Sorry about work.</td>
<td></td>
</tr>
<tr>
<td>B : No problem!</td>
<td></td>
</tr>
<tr>
<td>A : Thank you</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="2-Automated-voicemail"><a href="#2-Automated-voicemail" class="headerlink" title="2. Automated voicemail"></a>2. Automated voicemail</h2><p><strong><em>Sometimes you will get automated voicemail when you call a business. You might hear:</em></strong></p>
<ol>
<li>Please leave a message after the tone.</li>
<li>We are currently closed. Please call again.</li>
</ol>
<h2 id="3-Common-as-greetings"><a href="#3-Common-as-greetings" class="headerlink" title="3. Common as greetings"></a>3. Common as greetings</h2><p><strong><em>These expressions are common as greetings.</em></strong></p>
<ul>
<li><p>what’s up? = What’s happening? = What’s going on?</p>
</li>
<li><p>What’s up with you? = What’s going on with you?</p>
</li>
</ul>
<h2 id="4-Negative-situation"><a href="#4-Negative-situation" class="headerlink" title="4. Negative situation"></a>4. Negative situation</h2><table>
<thead>
<tr>
<th>Man : BILL</th>
<th>Woman : Sarah</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hey, Sarah. <code>What&#39;s wrong</code>  ?</td>
<td>Nothing, Bill. <code>Don&#39;t worry  about it</code>.</td>
</tr>
<tr>
<td>Really? <code>What&#39;s  the matter?</code></td>
<td>Well, my sister is very sick  .</td>
</tr>
<tr>
<td>Oh, I’m so sorry. <code>What&#39;s the problem</code>  ?</td>
<td>The doctors don’t know  .</td>
</tr>
</tbody>
</table>
<h2 id="5-Calling-Talk"><a href="#5-Calling-Talk" class="headerlink" title="5. Calling Talk"></a>5. Calling Talk</h2><p>A : ABC Industries. How can I help you?<br>B : This is Bill. Can I speak to Mary?<br>A : Just a minute, please.</p>
<ul>
<li>Sorry about work.</li>
<li>Sorry about your car.    (you damaged your friend’s car.)</li>
<li>Sorry about the meeting.     (you missed a meeting.)    </li>
</ul>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ef-l2u4-health" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/07/22/ef-l2u4-health/"><strong>HEALTH</strong></a>
      <small class=article-date-index>&nbsp; 2016-07-22</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/07/22/ef-l2u4-health/" class="article-date">
  <time datetime="2016-07-21T23:59:16.000Z" itemprop="datePublished">2016-07-22</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      this is talking about health subject for learning english. of course, include go to the doctor and and so on. <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/07/22/ef-l2u4-health/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-Talking-about-health"><a href="#1-Talking-about-health" class="headerlink" title="1. Talking about health"></a>1. Talking about health</h2><table>
<thead>
<tr>
<th>Woman</th>
<th>Man</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hi, are you ok?</td>
<td>no,no, some stressed out.</td>
</tr>
<tr>
<td>really ?</td>
<td>I’m feel busy out now. and my daughter sick</td>
</tr>
<tr>
<td>Sorry, to hear that. What’s wrong with her?</td>
<td>She has the flu.</td>
</tr>
<tr>
<td>not too bad</td>
<td>hi, May I ask questions ?</td>
</tr>
<tr>
<td>so.</td>
<td>How do you do it?</td>
</tr>
<tr>
<td>What do you mean ?</td>
<td>Well, You always look great.</td>
</tr>
<tr>
<td>Thanks</td>
<td>What’s your secret</td>
</tr>
<tr>
<td>Not a secret, I don’t smoke. I eat well. I do yoga.</td>
<td>well</td>
</tr>
</tbody>
</table>
<h3 id="1-1-Vocabulary"><a href="#1-1-Vocabulary" class="headerlink" title="1.1 Vocabulary"></a>1.1 Vocabulary</h3><p>Vocabulary [və(ʊ)’kæbjʊlərɪ]</p>
<table>
<thead>
<tr>
<th>Word</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>stressed out</td>
<td></td>
</tr>
<tr>
<td>smoke cigarettes</td>
<td></td>
</tr>
<tr>
<td>take vitamins</td>
<td></td>
</tr>
<tr>
<td>exercise、 healthy、relax</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="1-2-Grammar"><a href="#1-2-Grammar" class="headerlink" title="1.2 Grammar"></a>1.2 Grammar</h3><p>Grammar [‘græmə]</p>
<table>
<thead>
<tr>
<th><strong>sense verbs</strong></th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>bored [bɔːd]</td>
<td>Frank looks bored </td>
</tr>
<tr>
<td></td>
<td>Blair feels great</td>
</tr>
<tr>
<td>tastes delicious</td>
<td>This food tastes delicious</td>
</tr>
<tr>
<td>smells bad</td>
<td>That cheese smells bad</td>
</tr>
<tr>
<td>sounds beautiful</td>
<td>The music sounds beautiful</td>
</tr>
<tr>
<td>Let’s go to the movies</td>
<td>Sounds great!</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Man</th>
<th>Woman</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mary, you look great!</td>
<td>Thanks! I feel great, too. Hey, How’s your food?</td>
</tr>
<tr>
<td>Well, The chicken pasta tastes delicious.</td>
<td>It smells wonderful </td>
</tr>
<tr>
<td>And for dessert, I want their chocolate cake!</td>
<td>That sounds good. I want some, too</td>
</tr>
</tbody>
</table>
<p><strong>Reading</strong></p>
<p>He feels tired in the evening.</p>
<p>My milk tastes sour.</p>
<h3 id="1-3-Complimenting-people"><a href="#1-3-Complimenting-people" class="headerlink" title="1.3 Complimenting people"></a>1.3 Complimenting people</h3><ol>
<li>You look great !</li>
<li>You clothes are beatiful!</li>
<li>How do you stay in shape</li>
<li>I task vitamins, ride my bike, and I like running</li>
</ol>
<h3 id="1-4-Final-Task"><a href="#1-4-Final-Task" class="headerlink" title="1.4 Final Task"></a>1.4 Final Task</h3><h2 id="2-Staying-healthy"><a href="#2-Staying-healthy" class="headerlink" title="2. Staying healthy"></a>2. Staying healthy</h2><p>Frank cleans the house once a day.<br>Oscar does his laundry once a month.</p>
<h3 id="2-1-Grammar-Frequency-expressions"><a href="#2-1-Grammar-Frequency-expressions" class="headerlink" title="2.1 Grammar : Frequency expressions"></a>2.1 Grammar : Frequency expressions</h3><p><strong>Grammar</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">A: How often do you exercise?</span><br><span class="line">B: I exercise every day.</span><br></pre></td></tr></table></figure>
<ol>
<li>She goes on vacation twice a year.</li>
<li>I eat three times a day.</li>
<li>He walks to work five times a week.</li>
<li>I go on vacation every August.</li>
<li>I surf the internet once or twice a day. </li>
<li>She visits her family three or four times a year.</li>
</ol>
<table>
<thead>
<tr>
<th>Man</th>
<th>Woman</th>
</tr>
</thead>
<tbody>
<tr>
<td>You look really healthy. How do you do it?</td>
<td>Well, I exercise. I go to the gym.</td>
</tr>
<tr>
<td>How often do you go?</td>
<td>Um, twice a week. And I ride my bike every day.</td>
</tr>
<tr>
<td>That’s great!</td>
<td>Yeah, and I do yoga once a day, in the morning. Do you exercise  ?</td>
</tr>
<tr>
<td>never, and I smoke cigarettes.</td>
<td>That’s not good.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>My dad walks in the park every evening.</p>
</blockquote>
<h3 id="2-2-Expressions"><a href="#2-2-Expressions" class="headerlink" title="2.2 Expressions"></a>2.2 Expressions</h3><p><strong>Asking about and describing health</strong></p>
<table>
<thead>
<tr>
<th>Man</th>
<th>Woman</th>
</tr>
</thead>
<tbody>
<tr>
<td>How do you stay healthy?</td>
<td></td>
</tr>
<tr>
<td>How do you stay in shape?</td>
<td></td>
</tr>
<tr>
<td>How often do you exercise?</td>
<td></td>
</tr>
<tr>
<td>How do you do it?</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td></td>
</tr>
<tr>
<td>She’s in excellent shape.</td>
<td></td>
</tr>
<tr>
<td>I’m in good shape.</td>
<td></td>
</tr>
<tr>
<td>He’s in bad shape.</td>
<td></td>
</tr>
<tr>
<td>John’s in terrible shape.</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>I walk to work every day.</li>
<li>I run three times a week.</li>
<li>I go to the gym.</li>
</ul>
<h3 id="2-3-Writing"><a href="#2-3-Writing" class="headerlink" title="2.3 Writing"></a>2.3 Writing</h3><ul>
<li>My family is in very good shape. </li>
<li>Staying in shape can be fun.</li>
<li>Staying in shape is very important to me.</li>
</ul>
<p>Staying in shape is very important to me. Every morning I ride my bike to work. I always eat a healthy, delicious lunch. I go to the gym two or three evenings a week. I have many friends at the gym. On the weekend, I play tennis or go hiking.</p>
<p>My name is Katy. I’m in pretty good shape. I love exercising. I go running every morning, and I do yoga two or three times a week. I eat healthy food, and I don’t smoke. On the weekend, I go to the beach with my friends. We love playing volleyball.</p>
<p>My brother’s name is Max. He never exercises. He eats fried chicken or pizza two or three times a week. He never eats fresh fruit and vegetables. His favorite desserts are chocolate cake and ice cream. He watches sports once or twice a week, but he never plays sports. My brother is in terrible shape.</p>
<p><strong>my writing</strong></p>
<p>I’m Blair Chan. I’m not in good shape now. I do exercise is few. I ride a bike to work three times a week. I go to work by subway twice a week.  I eat healthy food, I like fruit and vegetables, and I don’t smoke. On the weekend, I learn english and information tech. my personal website : www.blairos.org. Thank you.</p>
<h2 id="3-Conversation-Class"><a href="#3-Conversation-Class" class="headerlink" title="3. Conversation Class"></a>3. Conversation Class</h2><h2 id="4-Going-to-the-doctor"><a href="#4-Going-to-the-doctor" class="headerlink" title="4. Going to the doctor"></a>4. Going to the doctor</h2><h3 id="Vocabulary-Symptoms"><a href="#Vocabulary-Symptoms" class="headerlink" title="Vocabulary Symptoms"></a>Vocabulary Symptoms</h3><table>
<thead>
<tr>
<th>Word</th>
<th>Desc</th>
</tr>
</thead>
<tbody>
<tr>
<td>sore throat</td>
<td>sore throat [sɔ:(r)] [θrəʊt]</td>
</tr>
<tr>
<td>head hurts</td>
<td></td>
</tr>
<tr>
<td>symptoms</td>
<td></td>
</tr>
<tr>
<td>stomachache</td>
<td>I hope his stomachache is nothing serious.</td>
</tr>
<tr>
<td>headache</td>
<td></td>
</tr>
<tr>
<td>cough</td>
<td>I couldn’t stop coughing.</td>
</tr>
<tr>
<td>runny nose</td>
<td>She has a cold and a runny nose.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Man</th>
<th>Woman</th>
</tr>
</thead>
<tbody>
<tr>
<td>How are you feeling?</td>
<td>not so great! I have a sore throat. My head hurts. </td>
</tr>
<tr>
<td>sorry to heart that, and other, anything else?</td>
<td>I have a stomachache.</td>
</tr>
<tr>
<td>I think you have the flu.</td>
<td>oh~</td>
</tr>
<tr>
<td>You should go home. Get lots of sleep.</td>
<td>really busy work</td>
</tr>
<tr>
<td>You should take it easy. Drink lots of liquids.</td>
<td>ok.</td>
</tr>
<tr>
<td>and take an aspirin for your headache.</td>
<td>right</td>
</tr>
<tr>
<td>Thank you doctor!</td>
<td>Feel better soon.</td>
</tr>
</tbody>
</table>
<p><code>describing symptoms</code></p>
<table>
<thead>
<tr>
<th>Man</th>
<th>Woman</th>
</tr>
</thead>
<tbody>
<tr>
<td>How are you feeling?</td>
<td>I’m tired.</td>
</tr>
<tr>
<td>What’s the problem?</td>
<td>I feel hot</td>
</tr>
<tr>
<td>Where does it hurt?</td>
<td>I have a sore throat, a sore arm, a stomachache. </td>
</tr>
<tr>
<td>What’s wrong?</td>
<td>My head hurts, throat hurts.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>DOCTOR</th>
<th>Woman</th>
</tr>
</thead>
<tbody>
<tr>
<td>So, how are you feeling  today?</td>
<td>Not so good, doctor.</td>
</tr>
<tr>
<td>What’s the problem  ?</td>
<td>Well, I have a sore  throat and a stomachache. And I feel hot  .</td>
</tr>
<tr>
<td>Well, you have a fever  . Are you eating?</td>
<td>Not a lot. I’m not very hungry, and my head hurts. I’m not sleeping very well.</td>
</tr>
<tr>
<td>OK, I see.</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="5-Calling-in-sick-to-work"><a href="#5-Calling-in-sick-to-work" class="headerlink" title="5. Calling in sick to work"></a>5. Calling in sick to work</h2><h3 id="5-1-Expressions"><a href="#5-1-Expressions" class="headerlink" title="5.1 Expressions"></a>5.1 Expressions</h3><ol>
<li>ABC Industries. Mary Jacobs speaking. </li>
<li>ABC Industries. This is Mary Jacobs.</li>
<li>This is Bill Edwards.            </li>
<li>Bill Edwards calling.</li>
</ol>
<hr>
<ol>
<li>A: ABC Industries. How can I help you?</li>
<li>B: This is Bill Edwards. Can I speak to Mary Jacobs? </li>
<li>A: Just a minute, please.</li>
</ol>
<p><strong><em>Sometimes you will get automated voicemail when you call a business. You might hear:</em></strong></p>
<ol>
<li>Please leave a message after the tone.</li>
<li>We are currently closed. Please call again.</li>
</ol>
<p><strong><em>These expressions are common as greetings.</em></strong></p>
<ul>
<li><p>what’s up? = What’s happening? = What’s going on?</p>
</li>
<li><p>What’s up with you? = What’s going on with you?</p>
</li>
</ul>
<p><strong><em>negative situation</em></strong></p>
<table>
<thead>
<tr>
<th>Man : BILL</th>
<th>Woman : Sarah</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hey, Sarah. <code>What&#39;s wrong</code>  ?</td>
<td>Nothing, Bill. <code>Don&#39;t worry  about it</code>.</td>
</tr>
<tr>
<td>Really? <code>What&#39;s  the matter?</code></td>
<td>Well, my sister is very sick  .</td>
</tr>
<tr>
<td>Oh, I’m so sorry. <code>What&#39;s the problem</code>  ?</td>
<td>The doctors don’t know  .</td>
</tr>
</tbody>
</table>
<ol>
<li>Sorry about work.    (You are sorry because you had to call in sick to work.)    </li>
<li>Sorry about your car.    (You are sorry because you damaged your friend’s car.)</li>
<li>Sorry about the meeting.     (You are sorry because you missed a meeting.)    </li>
</ol>
<ul>
<li>Hi, Todd. This is Sally.</li>
<li>I’m not feeling well/bad/better.</li>
<li>I’ve got a cold.</li>
<li>I’m sorry, I cann’t come to work today</li>
<li>Thanks. Sorry about work.</li>
</ul>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ef-l2u3-sports" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/07/20/ef-l2u3-sports/"><strong>Sports and activities</strong></a>
      <small class=article-date-index>&nbsp; 2016-07-20</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/07/20/ef-l2u3-sports/" class="article-date">
  <time datetime="2016-07-19T23:50:16.000Z" itemprop="datePublished">2016-07-20</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      Sports and activities <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/07/20/ef-l2u3-sports/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Talking-about-sports-and-activities"><a href="#Talking-about-sports-and-activities" class="headerlink" title="Talking about sports and activities"></a>Talking about sports and activities</h2><table>
<thead>
<tr>
<th>word</th>
<th>explain</th>
</tr>
</thead>
<tbody>
<tr>
<td>badminton</td>
<td>[‘bædmɪnt(ə)n]</td>
</tr>
<tr>
<td>yoga</td>
<td>[‘jəʊgə]</td>
</tr>
<tr>
<td>surfing</td>
<td></td>
</tr>
<tr>
<td>baseball</td>
<td></td>
</tr>
<tr>
<td>ice hockey</td>
<td>[‘hɒkɪ]</td>
</tr>
<tr>
<td>karate</td>
<td>[kə’rɑ:te] Karate is a Japanese sport or way of fighting in which people fight using their hands, elbows, feet, and legs</td>
</tr>
<tr>
<td>tennis</td>
<td>[‘tenɪs]</td>
</tr>
<tr>
<td>ice skating</td>
<td>[‘skeɪtɪŋ]</td>
</tr>
<tr>
<td>volleyball</td>
<td>[‘vɒlɪbɔːl]</td>
</tr>
</tbody>
</table>
<p><strong>Verbs and gerunds</strong></p>
<p>After the verbs like, love, hate and enjoy, you can use a gerund.</p>
<table>
<thead>
<tr>
<th>pharse</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>like + gerund</td>
<td>I like playing basketball</td>
</tr>
<tr>
<td>love + gerund</td>
<td>She loves going to the beach</td>
</tr>
<tr>
<td>hate + gerund</td>
<td>He hates doing yaga</td>
</tr>
<tr>
<td>running、riding a bike、painting</td>
<td>playing soccer、cooking、dancing</td>
</tr>
<tr>
<td>I love playing basketball</td>
<td>Do you like playing basketball</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>Can you repeat that?</td>
<td>I really don’t like cooking</td>
</tr>
<tr>
<td>Are you talking about soccer?</td>
<td>Yes, I am</td>
</tr>
<tr>
<td>What sports do you like?</td>
<td>Me? I like volleyball. How about you?</td>
</tr>
<tr>
<td>I really enjoy playing football</td>
<td>What does she like doing?</td>
</tr>
</tbody>
</table>
<h2 id="Asking-people-what-sports-they-play"><a href="#Asking-people-what-sports-they-play" class="headerlink" title="Asking people what sports they play"></a>Asking people what sports they play</h2><p>eg : Frank can cook / swim / surf / ..</p>
<p>Can you play chess ? Yes I can.</p>
<p>Do you like playing soccer?</p>
<p>What sports do you like?</p>
<p>He can play the guitar</p>
<p><strong>What can he do?</strong></p>
<p>Falling , Rising</p>
<p>So, What do you want to do?</p>
<h2 id="Talking-about-your-weekend-activities"><a href="#Talking-about-your-weekend-activities" class="headerlink" title="Talking about your weekend activities"></a>Talking about your weekend activities</h2><ol>
<li>He plays chess on the weekend</li>
<li>She doesn’t like playing basketball</li>
<li>He does karate after school</li>
<li>Can you do kung fu?</li>
<li>He always goes running every morning</li>
<li>What do you like doing on the weekend?</li>
<li>Going hiking is really good exercise  [‘eksəsaɪz] </li>
<li>You can do karate?</li>
</ol>
<table>
<thead>
<tr>
<th>pharse</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>do gymnastics [dʒɪm’næstɪks]</td>
<td>He goes running every morning</td>
</tr>
</tbody>
</table>
<p><strong>gerunds as subjects</strong></p>
<p>gerund, this, just like any other nouns</p>
<ol>
<li>Swimming is her favorite activity</li>
<li><p>Cooking for my family is a lot of fun</p>
</li>
<li><p>Doing yoga is relaxing</p>
</li>
<li>Skiing is my favorite activity</li>
</ol>
<h2 id="Talking-about-activities-in-your-country"><a href="#Talking-about-activities-in-your-country" class="headerlink" title="Talking about activities in your country"></a>Talking about activities in your country</h2><table>
<thead>
<tr>
<th>pharse</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>going for a drive</td>
<td></td>
</tr>
<tr>
<td>playing the guitar</td>
<td></td>
</tr>
<tr>
<td>hiking</td>
<td></td>
</tr>
<tr>
<td>have a picnic</td>
<td></td>
</tr>
<tr>
<td>go cycling</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>most、some、many、a lot of、few + noun</strong></p>
<div style="background:    #F5F5F5; color:#111"><br></div>

<p><code>most</code> people in my country love soccer. Basketball is very<br><code>popular</code> , too. <code>some</code> people like baseball. In the summer, <code>many</code><br>people love going to the beach. <code>A lot of</code> people play volleyball.<br><code>Some</code> people enjoy surfing. <code>Few</code> people go skiing or ice skating.</p>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ef-l2u2-weather" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/07/18/ef-l2u2-weather/"><strong>Weather and seasons</strong></a>
      <small class=article-date-index>&nbsp; 2016-07-18</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/07/18/ef-l2u2-weather/" class="article-date">
  <time datetime="2016-07-17T23:50:16.000Z" itemprop="datePublished">2016-07-18</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      Weather and seasons <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/07/18/ef-l2u2-weather/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Talking-about-the-weather"><a href="#Talking-about-the-weather" class="headerlink" title="Talking about the weather"></a>Talking about the weather</h2><table>
<thead>
<tr>
<th>word</th>
<th>adj</th>
<th>-</th>
</tr>
</thead>
<tbody>
<tr>
<td>rain</td>
<td>rainy, raining, wet, cold</td>
<td>cold</td>
</tr>
<tr>
<td>sun</td>
<td>sunny</td>
<td>warm, hot</td>
</tr>
<tr>
<td>snow</td>
<td>snowy</td>
<td>cold</td>
</tr>
<tr>
<td>wind</td>
<td>windy</td>
<td>cool</td>
</tr>
<tr>
<td>cloud</td>
<td>cloudy</td>
<td></td>
</tr>
<tr>
<td>fog</td>
<td>a thick cloud of very small drops of water in the air</td>
<td></td>
</tr>
<tr>
<td>fog</td>
<td>There is a lot of fog this morning, I’s a foggy morning</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="Describing-your-favorite-season"><a href="#Describing-your-favorite-season" class="headerlink" title="Describing your favorite season"></a>Describing your favorite season</h2><table>
<thead>
<tr>
<th>word</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>spring</td>
<td></td>
</tr>
<tr>
<td>summer</td>
<td></td>
</tr>
<tr>
<td>fall</td>
<td>My favorite season is fall</td>
</tr>
<tr>
<td>autumn</td>
<td>I love the colors of autumn !</td>
</tr>
<tr>
<td>winter</td>
<td></td>
</tr>
</tbody>
</table>
<p>What’s your favorite season?</p>
<p><strong>Expressing likes and dislikes</strong></p>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>I have five day’s vacation</td>
<td>I like the mountains</td>
</tr>
<tr>
<td>I love hot weather !</td>
<td></td>
</tr>
<tr>
<td>I go to the beach almost every day</td>
<td></td>
</tr>
<tr>
<td>That does sound good</td>
<td></td>
</tr>
<tr>
<td>I like winter</td>
<td>I don’t like hot weather</td>
</tr>
<tr>
<td>You are my friend. I like you</td>
<td></td>
</tr>
<tr>
<td>Do you like him ?</td>
<td>He isn’t nice. I donot like him</td>
</tr>
<tr>
<td>He doesn’t like wet weather. He dislikes rain</td>
<td></td>
</tr>
<tr>
<td>She’s unfriendly. I dislike her</td>
<td>Does she dislike you?</td>
</tr>
<tr>
<td>She hates the winter. It’s cold and wet.</td>
<td>I love the summer. It’s my favorite season. It’s sunny and beautiful</td>
</tr>
</tbody>
</table>
<p>problem</p>
<p>What season is it now ?</p>
<h2 id="Choosing-a-vacation-destination"><a href="#Choosing-a-vacation-destination" class="headerlink" title="Choosing a vacation destination"></a>Choosing a vacation destination</h2><p>Vacation activities</p>
<table>
<thead>
<tr>
<th>word phrase</th>
<th>phrase</th>
</tr>
</thead>
<tbody>
<tr>
<td>go skiing</td>
<td>go to the beach / park / swimming</td>
</tr>
<tr>
<td>play cards</td>
<td>surf the internet</td>
</tr>
<tr>
<td>play golf</td>
<td>eat out</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>sentence</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>You should go</td>
<td>we shouldn’t go</td>
</tr>
<tr>
<td>Should we go?</td>
<td>What should we do this weekend?</td>
</tr>
<tr>
<td>What should we do this weekend?</td>
<td>Where should we go?</td>
</tr>
<tr>
<td>should we meet in the park?</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>should, shouldn’t</strong></p>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>Should we meet in the park?</td>
<td>No, we shouldn’t. The weather is terrible</td>
</tr>
</tbody>
</table>
<p><strong>Reading about vacations</strong></p>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>You should go <strong>on vacation</strong></td>
<td>vacation</td>
</tr>
<tr>
<td>You should go away for two weeks. <br> You should go to Hawaii, get some sun</td>
<td></td>
</tr>
<tr>
<td>go shopping, see the museums</td>
<td>maybe I should</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>James is on vacation in Hawaii for two weeks</td>
<td>No work or school today. It’s a holiday!</td>
</tr>
<tr>
<td>Come to Hawaii for your vacation !</td>
<td>The weather is great !</td>
</tr>
</tbody>
</table>
<h2 id="Suggesting-an-activity"><a href="#Suggesting-an-activity" class="headerlink" title="Suggesting an activity"></a>Suggesting an activity</h2><table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>Let’s go to the beach</td>
<td>No, very hot. how about a movie?</td>
</tr>
</tbody>
</table>
<p><strong>Should + verb</strong></p>
<p>You should go skiing, There’s a lot of new snow</p>
<p><strong>Let’s + verb</strong></p>
<p>Let’s eat out. I want Japanese food.</p>
<p><strong>How about…</strong></p>
<p>How about a game of cards?</p>
<p><strong>What about + noun</strong></p>
<p>I’m hot. What about a swim?</p>
<p><strong>negative</strong></p>
<p>bad idea / No thanks / I don’t think so</p>
<p><strong>writing</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Sorry about the waether, but you are on vacation! You should go </span><br><span class="line">shopping. You can go for a walk in the park. How about a movie? </span><br><span class="line">There are many good movies now.</span><br></pre></td></tr></table></figure>
      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ef-l2u1-times" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/07/16/ef-l2u1-times/"><strong>Times and days</strong></a>
      <small class=article-date-index>&nbsp; 2016-07-16</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/07/16/ef-l2u1-times/" class="article-date">
  <time datetime="2016-07-15T23:54:16.000Z" itemprop="datePublished">2016-07-16</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      Times and days <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/07/16/ef-l2u1-times/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <p>Level 2 unit 1</p>
<p>–more–</p>
<h2 id="Describe-your-plan"><a href="#Describe-your-plan" class="headerlink" title="Describe your plan"></a>Describe your plan</h2><table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>What time is it? / What’s the time?</td>
<td>It’s 11 o’clock.</td>
</tr>
<tr>
<td>Do you have the time? (你知道现在几点了么?)</td>
<td>Sure! It’s half-past 10</td>
</tr>
<tr>
<td>three oh five</td>
<td>3:05</td>
</tr>
<tr>
<td>seven forty-five</td>
<td>7:45</td>
</tr>
</tbody>
</table>
<h3 id="Daily-activities"><a href="#Daily-activities" class="headerlink" title="Daily activities"></a>Daily activities</h3><table>
<thead>
<tr>
<th>A</th>
<th>A</th>
</tr>
</thead>
<tbody>
<tr>
<td>take a train</td>
<td>-</td>
</tr>
<tr>
<td>have a meeting</td>
<td></td>
</tr>
<tr>
<td>get to work</td>
<td>get to school</td>
</tr>
<tr>
<td>go home</td>
<td>have lunch</td>
</tr>
<tr>
<td>give a presentation</td>
<td></td>
</tr>
<tr>
<td>check emails</td>
<td>I can check emails on my phone.</td>
</tr>
</tbody>
</table>
<hr>
<table>
<thead>
<tr>
<th>Alice</th>
<th>Tony</th>
</tr>
</thead>
<tbody>
<tr>
<td>What time is the meeting?</td>
<td>night thirty  </td>
</tr>
<tr>
<td>tony, are you never late?</td>
<td>no</td>
</tr>
<tr>
<td>When do you usually get to work?</td>
<td>8 o’clock</td>
</tr>
<tr>
<td>What time do you get up?</td>
<td>I get up at 6. I take the train 7:15</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Blair</th>
<th>Blair</th>
</tr>
</thead>
<tbody>
<tr>
<td>When do you go running in the park?</td>
<td>I go at 7 in the morning / afternoon / evening</td>
</tr>
<tr>
<td>When’s the meeting?</td>
<td>It’s at noon.  </td>
</tr>
</tbody>
</table>
<h3 id="Write-your-plan"><a href="#Write-your-plan" class="headerlink" title="Write your plan"></a>Write your plan</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Hello! My name is blair, My day is very busy. </span><br><span class="line">I get up at 6 o&apos;clock in the morning. I take </span><br><span class="line">a subway to work. I have a lot of meetings.</span><br><span class="line">I usually go home at 7 in the evening. </span><br><span class="line">I go to bed at 9 o&apos;clock at night</span><br></pre></td></tr></table></figure>
<h2 id="Describe-your-weekend"><a href="#Describe-your-weekend" class="headerlink" title="Describe your weekend"></a>Describe your weekend</h2><table>
<thead>
<tr>
<th>words</th>
<th>example sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tuesday</td>
<td>-</td>
</tr>
<tr>
<td>Wednesday</td>
<td>-</td>
</tr>
<tr>
<td>Thursday</td>
<td>-</td>
</tr>
<tr>
<td>Saturday</td>
<td>On Saturday, I sleep</td>
</tr>
<tr>
<td><strong><em>— sentence —</em></strong></td>
<td>-</td>
</tr>
<tr>
<td>I work in an office from Monday to Friday</td>
<td></td>
</tr>
<tr>
<td>On weekends, I go to a restaurant</td>
<td>At the weekend, I go to a restaurant</td>
</tr>
<tr>
<td>What are you doing on the weekend?</td>
<td>What do you usually do on the weekend?</td>
</tr>
<tr>
<td>Have a nice weekend!</td>
<td>The meeting is at three o’clock</td>
</tr>
<tr>
<td><strong>- phrase -</strong></td>
<td>-</td>
</tr>
<tr>
<td>meet friends</td>
<td>go to the movies</td>
</tr>
<tr>
<td>talk on the phone</td>
<td></td>
</tr>
<tr>
<td>ride a bike</td>
<td></td>
</tr>
<tr>
<td>surf the internet</td>
<td></td>
</tr>
<tr>
<td>play tennis</td>
<td></td>
</tr>
<tr>
<td>go to a tennis class</td>
<td>see you on monday</td>
</tr>
</tbody>
</table>
<h2 id="Arranging-a-meeting-time"><a href="#Arranging-a-meeting-time" class="headerlink" title="Arranging a meeting time"></a>Arranging a meeting time</h2><table>
<thead>
<tr>
<th>words</th>
<th>example sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>check my emails</td>
<td></td>
</tr>
<tr>
<td>arrive at</td>
<td></td>
</tr>
<tr>
<td>read a report</td>
<td></td>
</tr>
<tr>
<td>take a coffee break</td>
<td></td>
</tr>
<tr>
<td>make a phone call</td>
<td></td>
</tr>
<tr>
<td>talk to colleagues</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>I can meet at 3 o’olock</td>
<td></td>
</tr>
<tr>
<td>I cann’t eat lunch with you</td>
<td></td>
</tr>
<tr>
<td>I’m really sorry. I’m not free at noon. I’m having lunch with Mary</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="Talking-about-birthdays"><a href="#Talking-about-birthdays" class="headerlink" title="Talking about birthdays"></a>Talking about birthdays</h2><table>
<thead>
<tr>
<th>words</th>
<th>-</th>
</tr>
</thead>
<tbody>
<tr>
<td>January</td>
<td></td>
</tr>
<tr>
<td>February</td>
<td>The big meeting is in February</td>
</tr>
<tr>
<td>March</td>
<td></td>
</tr>
<tr>
<td>April</td>
<td></td>
</tr>
<tr>
<td>May</td>
<td></td>
</tr>
<tr>
<td>June</td>
<td></td>
</tr>
<tr>
<td>July</td>
<td></td>
</tr>
<tr>
<td>August</td>
<td></td>
</tr>
<tr>
<td>September</td>
<td></td>
</tr>
<tr>
<td>October</td>
<td></td>
</tr>
<tr>
<td>November</td>
<td></td>
</tr>
<tr>
<td>December</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>dance</td>
<td></td>
</tr>
<tr>
<td>go out</td>
<td></td>
</tr>
<tr>
<td>get presents</td>
<td></td>
</tr>
<tr>
<td>eat cake</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><code>A</code></td>
<td><code>B</code></td>
</tr>
<tr>
<td>When’s your birthday?</td>
<td>It’s September 21 st</td>
</tr>
<tr>
<td>It’s birthday present for my son</td>
<td></td>
</tr>
<tr>
<td>What are you doing for his birthday?</td>
<td></td>
</tr>
<tr>
<td>We’re going to a restaurant</td>
<td></td>
</tr>
<tr>
<td>How about you?</td>
<td>你呢？</td>
</tr>
<tr>
<td>What’s the weather like in your city?</td>
<td></td>
</tr>
</tbody>
</table>
<p>##　Group Class</p>
<blockquote>
<p>Teacher： Danielle C</p>
</blockquote>
<h3 id="Discussing-how-to-get-somewhere"><a href="#Discussing-how-to-get-somewhere" class="headerlink" title="Discussing how to get somewhere"></a>Discussing how to get somewhere</h3><table>
<thead>
<tr>
<th>words</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>How many ways are there to travel?</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Useful language</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>go by car</td>
<td>take a taxi</td>
</tr>
<tr>
<td>go by bike</td>
<td>take a train</td>
</tr>
<tr>
<td>walk</td>
<td>take the subway</td>
</tr>
</tbody>
</table>
<h3 id="Dislogue-practice"><a href="#Dislogue-practice" class="headerlink" title="Dislogue practice"></a>Dislogue practice</h3><table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>How do I get to the restaurant?</td>
<td>Well, you can go by bike, but that takes an hour.</td>
</tr>
<tr>
<td>Can I take the bus?</td>
<td>Yup, take the bus to Second Street.</td>
</tr>
<tr>
<td>What is the number of the bus?</td>
<td>Oh, number 11. Get off on Second Street, then walk for five minutes.</td>
</tr>
<tr>
<td>How long does the bus take?</td>
<td>Oh, let’s see … About 35 minutes.</td>
</tr>
<tr>
<td>Great, thanks!</td>
<td></td>
</tr>
</tbody>
</table>
<p>Haylee M   haylee.m@etteachers.com</p>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ef-leve-01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/07/14/ef-leve-01/"><strong>Welcome a new employee / Saying where you are from</strong></a>
      <small class=article-date-index>&nbsp; 2016-07-14</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/07/14/ef-leve-01/" class="article-date">
  <time datetime="2016-07-13T23:55:16.000Z" itemprop="datePublished">2016-07-14</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      Taking about your class, welcome a new employee <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/07/14/ef-leve-01/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <table>
<thead>
<tr>
<th>Blair</th>
<th>A</th>
</tr>
</thead>
<tbody>
<tr>
<td>I’m new</td>
<td>How do you spell your last name ? </td>
</tr>
<tr>
<td>It’s B-L-A-I-R</td>
<td>Here you are （give a card for her）</td>
</tr>
</tbody>
</table>
<h2 id="GROUP-CLASS"><a href="#GROUP-CLASS" class="headerlink" title="GROUP CLASS"></a>GROUP CLASS</h2><h2 id="Exchanging-phone-numbers"><a href="#Exchanging-phone-numbers" class="headerlink" title="Exchanging phone numbers"></a>Exchanging phone numbers</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">What&apos;s your phone number?</span><br></pre></td></tr></table></figure>
<h2 id="Greetings"><a href="#Greetings" class="headerlink" title="Greetings"></a>Greetings</h2><table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>Have a nice day</td>
<td>You too</td>
</tr>
<tr>
<td>Are you busying?</td>
<td>No## taking about your class</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>words</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>pencil</td>
<td>a narrow piece of wood, containing a black or coloured substance, used for drawing or writing.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>How’s your class / teacher?</td>
<td>It’s good</td>
</tr>
<tr>
<td>How many students are in the class?</td>
<td>eight</td>
</tr>
</tbody>
</table>
<h2 id="welcome-a-new-employee"><a href="#welcome-a-new-employee" class="headerlink" title="welcome a new employee"></a>welcome a new employee</h2><table>
<thead>
<tr>
<th>words</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>monitor</td>
<td>a nar</td>
</tr>
<tr>
<td>headphones</td>
<td>-</td>
</tr>
<tr>
<td>mouse</td>
<td></td>
</tr>
<tr>
<td>microphone</td>
<td></td>
</tr>
<tr>
<td>chair</td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Welcome to the company</span><br><span class="line">Let me show you to your desk</span><br><span class="line">She&apos;s a new employee</span><br><span class="line">see you later</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>words</th>
<th>numbers</th>
</tr>
</thead>
<tbody>
<tr>
<td>twenty</td>
<td>twelve</td>
</tr>
<tr>
<td>thirty</td>
<td></td>
</tr>
<tr>
<td>forty</td>
<td>fourteen</td>
</tr>
<tr>
<td>fifty</td>
<td>fifteen</td>
</tr>
<tr>
<td>ninety</td>
<td></td>
</tr>
<tr>
<td>How old are they?</td>
<td>Sarah’s 13 years old</td>
</tr>
<tr>
<td>How do you spell that ?</td>
<td></td>
</tr>
<tr>
<td>What’s your phone number?</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr>
<td>let me show you around</td>
<td>office / restrooms / coffee machine / elevator</td>
</tr>
</tbody>
</table>
<hr>
<table>
<thead>
<tr>
<th>S</th>
<th>Z</th>
<th>IZ</th>
</tr>
</thead>
<tbody>
<tr>
<td>desks</td>
<td>phones</td>
<td>classes</td>
</tr>
<tr>
<td>students</td>
<td>computers</td>
<td>offices</td>
</tr>
</tbody>
</table>
<h2 id="Saying-where-you-are-from"><a href="#Saying-where-you-are-from" class="headerlink" title="Saying where you are from"></a>Saying where you are from</h2><table>
<thead>
<tr>
<th>words</th>
<th>Nationality</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>Russia</td>
<td>Russian</td>
<td>-</td>
</tr>
<tr>
<td>Germany</td>
<td>German</td>
<td>A country in central Europe</td>
</tr>
<tr>
<td>Italy [‘ɪtəlɪ]</td>
<td>Italian [ɪˈtælɪən]</td>
<td>-</td>
</tr>
<tr>
<td>Australia</td>
<td>Australian</td>
<td>An island country and continent southeast of Asia</td>
</tr>
<tr>
<td>the US</td>
<td>American</td>
<td>United States (of America)</td>
</tr>
<tr>
<td>the UK</td>
<td>British [‘brɪtɪʃ]</td>
<td></td>
</tr>
<tr>
<td>France</td>
<td>French</td>
<td>A country in western Europe</td>
</tr>
<tr>
<td>Brazil</td>
<td>Brazilian</td>
<td>A large country in South America where Portuguese is spoken</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Tokyo [ˈtəʊkjəʊ] | </span><br><span class="line">London |</span><br><span class="line">Vancouver [væn&apos;ku:və] |</span><br><span class="line">Sydney [&apos;sidni] | My brother is living in Sydney</span><br><span class="line">Moscow [&apos;mɔskəu] | </span><br><span class="line">Rome [rəum] |</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">He lives in London, England</span><br><span class="line">John is from Los Angeles</span><br><span class="line">This is my friend, Brenda</span><br><span class="line">How&apos;s it going? 感觉怎么样</span><br><span class="line">Blair is Chinese, but he lives in New Zealand</span><br><span class="line">There is no chair</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>words</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td>downtown</td>
<td>-</td>
</tr>
<tr>
<td>museum</td>
<td>a building in which objects of artistic, cultural, historical or scientific interest are kept and shown to the public</td>
</tr>
<tr>
<td>good restaurants</td>
<td>a place where you can buy and eat a meal</td>
</tr>
<tr>
<td>building</td>
<td>I live in the building over there</td>
</tr>
<tr>
<td>nice park</td>
<td></td>
</tr>
<tr>
<td>bridge</td>
<td></td>
</tr>
<tr>
<td>skyscraper  [‘skaɪskreɪpə]</td>
<td>a very tall building in a city</td>
</tr>
</tbody>
</table>
<hr>
<p><strong>other</strong></p>
<h2 id="Common-food"><a href="#Common-food" class="headerlink" title="Common food"></a>Common food</h2><table>
<thead>
<tr>
<th>words</th>
<th>sentence</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>burger</code> [‘bə:ɡə]</td>
<td>I think they have fries and burgers</td>
</tr>
<tr>
<td><code>fries</code> [fraɪz]</td>
<td>I think they have fries and burgers</td>
</tr>
<tr>
<td><code>sandwich</code>  [ˈsændwɪtʃ]</td>
<td>Sandwich the two halves of the sponge together with cream </td>
</tr>
<tr>
<td><code>desser</code> [dɪˈzɜ:rt]</td>
<td>She had homemade ice cream for desser</td>
</tr>
<tr>
<td><code>chocolate ice cream</code> [ˈtʃɑ:klət]</td>
<td>I like chocolate ice crea</td>
</tr>
<tr>
<td><strong>salad</strong></td>
<td>-</td>
</tr>
<tr>
<td>hamburger</td>
<td>-</td>
</tr>
<tr>
<td>pizza</td>
<td>-</td>
</tr>
<tr>
<td>ice cream</td>
<td>-</td>
</tr>
<tr>
<td>french fries</td>
<td>-</td>
</tr>
<tr>
<td><code>cheese</code></td>
<td>He cut the mould off a piece of chees</td>
</tr>
<tr>
<td>fried chicken</td>
<td>I ordered fried chicken and salad for you</td>
</tr>
<tr>
<td>pasta [ˈpɑ:stə] t-&gt;d</td>
<td>The Chinese also eat a type of pasta as part of their staple diet [‘stepl] [ˈdaɪɪt]  p-&gt;b</td>
</tr>
</tbody>
</table>
<h2 id="sentence"><a href="#sentence" class="headerlink" title="sentence"></a>sentence</h2><p>用如以下的问句询问某人想要什么</p>
<ul>
<li>What do you want ?</li>
<li><strong>Do you want some water ?</strong></li>
<li>Does he want a salad ?</li>
</ul>
<p><strong>favorite</strong> [‘fevərɪt]</p>
<ul>
<li>What’s your favorite food ?</li>
<li>Pizza’s my favorite food.    </li>
<li>His favorite is chocolate.</li>
</ul>
<h2 id="dialogue"><a href="#dialogue" class="headerlink" title="dialogue"></a>dialogue</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">LINDA: What do you want? How about a salad?</span><br><span class="line">BILL: Mmm, no. I don&apos;t want  a salad. I want a hamburger. It&apos;s my favorite  food.</span><br><span class="line">LINDA: OK … I want chicken and rice.</span><br><span class="line">WAITER: Can  I help you?</span><br><span class="line">LINDA: Yes, I want the chicken and rice. And some water, please.</span><br><span class="line">BILL: And I want  the hamburger and french fries, please. And some coffee.</span><br><span class="line">WAITER: So, that&apos;s the chicken and rice, and a hamburger and french fries.</span><br><span class="line">LINDA: Yes.</span><br><span class="line">WAITER: And water, and coffee.</span><br><span class="line">LINDA: Yes, thanks  .</span><br></pre></td></tr></table></figure>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml-bayes-model" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/06/22/ml-bayes-model/"><strong>Bayes Model</strong></a>
      <small class=article-date-index>&nbsp; 2016-06-22</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/06/22/ml-bayes-model/" class="article-date">
  <time datetime="2016-06-22T02:07:21.000Z" itemprop="datePublished">2016-06-22</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      bayes model -- 这是一个 民间学术“屌丝” 在死后才 逆袭 的故事 <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/06/22/ml-bayes-model/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$'], ['\[','\]'] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<p><strong>Content List</strong></p>
<ul>
<li>Bayes’ method</li>
<li>Bayes’ theorem</li>
<li>Application example</li>
<li>Naive Bayes Learning and classification</li>
<li>Parameter estimation of Naive Bayes Method</li>
</ul>
<table>
<thead>
<tr>
<th>symbol</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>\( x_j \)</td>
<td>第 $j$ 维特征</td>
</tr>
<tr>
<td>$ x $</td>
<td>一条样本的特征向量, $ x = (x_1, x_2, …, x_n) $</td>
</tr>
<tr>
<td>$ x^{(i)} $</td>
<td>第 $i$ 条样本</td>
</tr>
<tr>
<td>$ x^{(i)}_j $</td>
<td>第 $i$ 条样本的第$j$ 维特征</td>
</tr>
<tr>
<td>$ y^{(i)} $</td>
<td>第 $i$ 条样本的结果 (label)</td>
</tr>
<tr>
<td>\( X \)</td>
<td>所有样本的特征全集, 即 $X = (x^{(1)}, x^{(2)}, …, x^{(m)})^T$</td>
</tr>
<tr>
<td>\( Y \)</td>
<td>所有样本的label全集, 即 $Y = (y^{(1)}, y^{(2)}, … , y^{(m)})^T$</td>
</tr>
<tr>
<td>\( w \)</td>
<td>第 $j$ 维特征</td>
</tr>
<tr>
<td>\( w_j \)</td>
<td>参数向量， 即 $ w = (w_0, w_1, …, w_n) $</td>
</tr>
</tbody>
</table>
<p>这是一个 民间学术“屌丝” 在死后才 <strong>逆袭</strong> 的故事</p>
<p><img src="/images/ml-bayes-01.png" alt="bayes01.png"></p>
<p>Thomas Bayes（1702-1763）《An essay towards solving a problem in the doctrine of chances》</p>
<blockquote>
<p>对偶问题 </p>
<p>  :  在解决具体某个问题 P  的时候，往往由于参数、定义域等问题，不好直接处理。但可以把问题 P 转换成与之等价的问题 Q。通过解决 Q问题，来得到 P问题 的解。这时，Q问题就叫做P问题的“对偶问题”</p>
</blockquote>
<h2 id="1-Naive-Bayes-method"><a href="#1-Naive-Bayes-method" class="headerlink" title="1. Naive Bayes method"></a>1. Naive Bayes method</h2><blockquote>
<p>比如，一个朋友创业，你明明知道创业的结果就两种，即要么成功要么失败，但你依然会忍不住去估计他创业成功的几率有多大？你如果对他为人比较了解，而且有方法、思路清晰、有毅力、且能团结周围的人，你会不由自主的估计他创业成功的几率可能在80%以上。这种不同于 “非黑即白、非0即1”的思考方式，便是<strong>贝叶斯式的思考方式</strong>。</p>
</blockquote>
<h3 id="preface"><a href="#preface" class="headerlink" title="preface"></a>preface</h3><p>贝叶斯派 认为参数 $ \theta $ 是随机变量，而样本 $ \chi $ 是固定的，由于样本 $ \chi $ 是固定的，所以他们重点研究的是参数 $ \theta $ 的分布。</p>
<p>贝叶斯派 既然把 参数 $ \theta $ 看做是一个随机变量，所以要计算的分布，便得事先知道的无条件分布，即在有样本之前（或观察到X之前），有着怎样的分布呢？</p>
<p>比如往台球桌上扔一个球，这个球落会落在何处呢？如果是不偏不倚的把球抛出去，那么此球落在台球桌上的任一位置都有着相同的机会，即球落在台球桌上某一位置的概率服从均匀分布。这种在实验之前定下的属于基本前提性质的分布称为先验分布，或的无条件分布。</p>
<p>至此，贝叶斯派提出了一个思考问题的固定模式 :  </p>
<p><strong><code>先验分布 == 无条件分布</code></strong></p>
<p><strong>先验分布 $ \pi(\theta) $ + 样本信息 $ \chi $ =&gt; 后验分布  $ \pi(\theta | \chi ) $</strong></p>
<h3 id="先验信息"><a href="#先验信息" class="headerlink" title="先验信息"></a>先验信息</h3><p>先验信息一般来源于经验跟历史资料。比如 : 林丹跟某选手对决，解说一般会根据林丹历次比赛的成绩对此次比赛的胜负做个大致的判断。</p>
<h3 id="后验分布"><a href="#后验分布" class="headerlink" title="后验分布"></a>后验分布</h3><p>  而后验分布  $ \pi(\theta | \chi ) $ 一般也认为是在给定样本 $ \chi $ 的情况下的 $ \theta $ 条件分布，而使  $ \pi(\theta | \chi ) $ 达到最大的值 $ \theta_{MD} $ 称为最大后验估计，类似于经典统计学中的极大似然估计。</p>
<blockquote>
<p> 综合起来看，则好比是人类刚开始时对大自然只有少得可怜的先验知识，但随着不断观察、实验获得更多的样本、结果，使得人们对自然界的规律摸得越来越透彻。所以，贝叶斯方法既符合人们日常生活的思考方式，也符合人们认识自然的规律，经过不断的发展，最终占据统计学领域的半壁江山。</p>
</blockquote>
<h2 id="2-Naive-Bayes-theorem"><a href="#2-Naive-Bayes-theorem" class="headerlink" title="2. Naive Bayes theorem"></a>2. Naive Bayes theorem</h2><p><strong>条件概率</strong>（又称后验概率）就是事件 $A$ 在另外一个事件 $B$ 已经发生条件下的发生概率。条件概率表示为 $P(A|B)$</p>
<p>$$<br>P(A|B) = \frac{P(A \bigcap B)}{P(B)}<br>$$</p>
<blockquote>
<p>联合概率 ${P(A \bigcap B)}$ , ${P(A, B)}$</p>
<p>事件 $B$ 发生之前，我们对事件 $A$ 的发生有一个基本的概率判断，称为 $A$ 的先验概率，用 $P(A)$ 表示；</p>
<p>事件 $B$ 发生之后，我们对事件 $A$ 的发生概率重新评估，称为 $A$ 的后验概率，用 $P(A|B)$ 表示；</p>
</blockquote>
<h2 id="3-Application-examples"><a href="#3-Application-examples" class="headerlink" title="3. Application examples"></a>3. Application examples</h2><p><strong>Google的拼写检查</strong></p>
<p><img src="/images/ml-speling.png" alt="speling"></p>
<p>用户输入一个单词时，可能拼写正确，也可能拼写错误。</p>
<p>如果把拼写正确的情况记做 $c$ （代表correct），拼写错误的情况记做 $w$（代表wrong），那么”拼写检查”要做的事情就是：在发生 $w$ 的情况下，试图推断出 $c$ 。</p>
<p>换言之：已知w，然后在若干个备选方案中，找出可能性最大的那个 $c$，也就是求的 $P(c|w)$ 最大值。</p>
<p>而根据贝叶斯定理，有：</p>
<p>$$<br>P(c|w) = \frac{P(w | c) * P(c)}{p(w)}<br>$$</p>
<blockquote>
<p>$P(c)$ 表示某个正确的词的出现”概率”，它可以用”频率”代替。如果我们有一个足够大的文本库，那么这个文本库中每个单词的出现频率，就相当于它的发生概率。</p>
<p>$P(w|c)$ 表示在试图拼写 $c$ 的情况下，出现拼写错误 $w$ 的概率。 简化为 “编辑距离”</p>
</blockquote>
<p><a href="http://norvig.com/spell-correct.html" target="_blank" rel="external">google_spell-correct</a></p>
<h2 id="4-Naive-Bayes-Learning-and-classification"><a href="#4-Naive-Bayes-Learning-and-classification" class="headerlink" title="4. Naive Bayes Learning and classification"></a>4. Naive Bayes Learning and classification</h2><h2 id="5-Parameter-estimation-of-Naive-Bayes-Method"><a href="#5-Parameter-estimation-of-Naive-Bayes-Method" class="headerlink" title="5. Parameter estimation of Naive Bayes Method"></a>5. Parameter estimation of Naive Bayes Method</h2>
      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-elasticsearch-1.7-Introduce" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/06/04/elasticsearch-1.7-Introduce/"><strong>Elasticsearch * Reference1.7 Introduce</strong></a>
      <small class=article-date-index>&nbsp; 2016-06-04</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/06/04/elasticsearch-1.7-Introduce/" class="article-date">
  <time datetime="2016-06-04T07:59:16.000Z" itemprop="datePublished">2016-06-04</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      Elasticsearch * Reference1.7 Brief Introduce. <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/elastic/">elastic</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/06/04/elasticsearch-1.7-Introduce/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><h3 id="Restful-API"><a href="#Restful-API" class="headerlink" title="Restful API"></a>Restful API</h3><p><strong>Cluster health</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl &apos;localhost:9200/_cat/health?v&apos;</span><br><span class="line">curl &apos;localhost:9200/_cat/nodes?v&apos;</span><br></pre></td></tr></table></figure>
<p><strong>List ALL Indices</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl &apos;localhost:9200/_cat/indices?v&apos;</span><br></pre></td></tr></table></figure>
<p><strong>Create an Index</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -XPUT &apos;localhost:9200/customer?pretty&apos;</span><br></pre></td></tr></table></figure>
<p><strong>Put data to Index</strong></p>
<p>Our JSON document: { “name”: “John Doe” }</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -XPUT &apos;localhost:9200/customer/external/1?pretty&apos; -d &apos;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;John Doe&quot;</span><br><span class="line">&#125;&apos;</span><br></pre></td></tr></table></figure>
<p>And the response:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -XPUT &apos;localhost:9200/customer/external/1?pretty&apos; -d &apos;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;John Doe&quot;</span><br><span class="line">&#125;&apos;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;_index&quot; : &quot;customer&quot;,</span><br><span class="line">  &quot;_type&quot; : &quot;external&quot;,</span><br><span class="line">  &quot;_id&quot; : &quot;1&quot;,</span><br><span class="line">  &quot;_version&quot; : 1,</span><br><span class="line">  &quot;created&quot; : true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Get Data from Index</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -XGET &apos;localhost:9200/customer/external/1?pretty&apos;</span><br></pre></td></tr></table></figure>
<p><strong>Detele an Index</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -XDELETE &apos;localhost:9200/customer&apos;</span><br></pre></td></tr></table></figure>
<p>Restful Cmd @elasticsearch</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -X&lt;REST Verb&gt; &lt;Node&gt;:&lt;Port&gt;/&lt;Index&gt;/&lt;Type&gt;/&lt;ID&gt;</span><br></pre></td></tr></table></figure>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.7/api-conventions.html" target="_blank" rel="external">more_detail_info_for_elasticsearch</a></p>
<h3 id="Java-API"><a href="#Java-API" class="headerlink" title="Java API"></a>Java API</h3><p><a href="https://www.elastic.co/guide/en/elasticsearch/client/java-api/1.7/client.html" target="_blank" rel="external">more_info</a></p>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml-perceptron-model" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/05/20/ml-perceptron-model/"><strong>Perceptron Model</strong></a>
      <small class=article-date-index>&nbsp; 2016-05-20</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/05/20/ml-perceptron-model/" class="article-date">
  <time datetime="2016-05-20T10:01:21.000Z" itemprop="datePublished">2016-05-20</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      Perceptron model learning for classification <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/05/20/ml-perceptron-model/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$']],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<p>perceptron model learning</p>
        
          <p class="article-more-link">
            <a href="/2016/05/20/ml-perceptron-model/#more">Read More</a>
          </p>
        
      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-elasticsearch-install-plugins" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/05/17/elasticsearch-install-plugins/"><strong>Elasticsearch installation plugins</strong></a>
      <small class=article-date-index>&nbsp; 2016-05-17</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/05/17/elasticsearch-install-plugins/" class="article-date">
  <time datetime="2016-05-17T07:59:16.000Z" itemprop="datePublished">2016-05-17</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      Elasticsearch installation common used plugins. <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/elastic/">elastic</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/05/17/elasticsearch-install-plugins/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Elasticsearch 扩展性非常好，有很多官方和第三方开发的插件</p>
</blockquote>
<h2 id="1-Elasticsearch-Install"><a href="#1-Elasticsearch-Install" class="headerlink" title="1. Elasticsearch-Install"></a>1. Elasticsearch-Install</h2><p>官网 : <a href="https://www.elastic.co/" target="_blank" rel="external">https://www.elastic.co/</a></p>
<p><strong>Install es</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">download elasticsearch-1.7.5.tar.gz</span><br><span class="line">cd usr/local/mySoft/deploy</span><br><span class="line">tar -xvf elasticsearch-1.7.5.tar.gz</span><br><span class="line">ln -s /usr/local/mySoft/deploy/elasticsearch-1.7.5/ elasticsearch</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">vim ~/.zshrc</span><br><span class="line">export ES_HOME=/usr/local/xSoft/elasticsearch</span><br></pre></td></tr></table></figure>
<p><strong>Config es</strong></p>
<p>$ES_HOME/config/elasticsearch.yml</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cluster.name: elasticsearch_x</span><br><span class="line">node.name=test-node1</span><br></pre></td></tr></table></figure>
<p><strong>Startup</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./bin/elasticsearch</span><br><span class="line"></span><br><span class="line">./bin/elasticsearch -d -Xms512m -Xmx512m</span><br></pre></td></tr></table></figure>
<blockquote>
<p>运行之后，会产生 data 和 logs 目录</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">➜  elasticsearch ll</span><br><span class="line">total 28</span><br><span class="line">-rw-r--r--  1 hp staff 11358 Feb  2 17:24 LICENSE.txt</span><br><span class="line">-rw-r--r--  1 hp staff   150 Feb  2 17:24 NOTICE.txt</span><br><span class="line">-rw-r--r--  1 hp staff  8700 Feb  2 17:24 README.textile</span><br><span class="line">drwxr-xr-x 14 hp staff   476 May 26 15:42 bin/</span><br><span class="line">drwxr-xr-x  4 hp staff   136 May 27 11:03 config/</span><br><span class="line">drwxr-xr-x  3 hp staff   102 May 26 11:01 data/</span><br><span class="line">drwxr-xr-x 26 hp staff   884 May 26 09:58 lib/</span><br><span class="line">drwxr-xr-x  7 hp staff   238 May 27 09:58 logs/</span><br><span class="line">drwxr-xr-x  7 hp staff   238 May 27 10:48 plugins/</span><br><span class="line">➜  elasticsearch</span><br></pre></td></tr></table></figure>
<p><strong>Verify</strong></p>
<p>open <a href="http://ip:9200/" target="_blank" rel="external">http://ip:9200/</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"status"</span> : <span class="number">200</span>,</span><br><span class="line">  <span class="attr">"name"</span> : <span class="string">"node01"</span>,</span><br><span class="line">  <span class="attr">"cluster_name"</span> : <span class="string">"elasticsearch_x"</span>,</span><br><span class="line">  <span class="attr">"version"</span> : &#123;</span><br><span class="line">    <span class="attr">"number"</span> : <span class="string">"1.7.5"</span>,</span><br><span class="line">    <span class="attr">"build_hash"</span> : <span class="string">"00f95f4ffca6de89d68b7ccaf80d148f1f70e4d4"</span>,</span><br><span class="line">    <span class="attr">"build_timestamp"</span> : <span class="string">"2016-02-02T09:55:30Z"</span>,</span><br><span class="line">    <span class="attr">"build_snapshot"</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"lucene_version"</span> : <span class="string">"4.10.4"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"tagline"</span> : <span class="string">"You Know, for Search"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-Elasticsearch-Head"><a href="#2-Elasticsearch-Head" class="headerlink" title="2. Elasticsearch-Head"></a>2. Elasticsearch-Head</h2><p>ElasticSearch-Head 是一个与Elastic集群（Cluster）相交互的 Web 前台。</p>
<p><img src="/images/es-header.png" alt="header.png"></p>
<p>ES-Head的主要作用</p>
<ul>
<li>它展现ES集群的拓扑结构，并且可以通过它来进行索引（Index）和节点（Node）级别的操作</li>
<li>它提供一组针对集群的查询API，并将结果以json和表格形式返回</li>
<li>它提供一些快捷菜单，用以展现集群的各种状态</li>
</ul>
<p><strong>Install-Verify</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">elasticsearch/bin/plugin install mobz/elasticsearch-head</span><br><span class="line">open ip:9200/_plugin/head/</span><br><span class="line">open ip:9200/_cluster/health?pretty</span><br></pre></td></tr></table></figure>
<h2 id="3-Elasticsearch-Kopf"><a href="#3-Elasticsearch-Kopf" class="headerlink" title="3. Elasticsearch-Kopf"></a>3. Elasticsearch-Kopf</h2><p>Kopf是一个ElasticSearch的管理工具，它也提供了对ES集群操作的API。</p>
<p><img src="/images/es-kopf.png" alt="613455-20160224102628443-1084839027.png"></p>
<p><strong>Install-Verify</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./elasticsearch/bin/plugin install lmenezes/elasticsearch-kopf/&#123;branch|version&#125;</span><br><span class="line">open http://localhost:9200/_plugin/kopf</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="4-Elasticsearch-bigdesk"><a href="#4-Elasticsearch-bigdesk" class="headerlink" title="4. Elasticsearch-bigdesk"></a>4. Elasticsearch-bigdesk</h2><p>Bigdesk为Elastic集群提供动态的图表与统计数据。</p>
<p><img src="/images/es-bigdesk.jpeg" alt="613455-20160224102646365-1432943551.jpg"></p>
<p><strong>Install-Verify</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bin/plugin -install lukas-vlcek/bigdesk</span><br><span class="line">删除bin/plugin --remove bigdesk</span><br><span class="line">open ip:9200/_plugin/bigdesk</span><br><span class="line">open ip:9200/_cluster/state?pretty</span><br></pre></td></tr></table></figure>
<h2 id="5-Elasticsearch-service"><a href="#5-Elasticsearch-service" class="headerlink" title="5. Elasticsearch-service"></a>5. Elasticsearch-service</h2><p>elasticsearch 作为一个系统service应用 ，可以安装elasticsearch-servicewrapper插件</p>
<p><a href="https://github.com/elastic/elasticsearch-servicewrapper" target="_blank" rel="external">github-es-service</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/elasticsearch/elasticsearch-servicewrapper</span><br><span class="line"></span><br><span class="line">下载该插件后，解压缩。将service目录拷贝到elasticsearch安装目录的bin目录下。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">➜  service ll</span><br><span class="line">total 76</span><br><span class="line">-rwxr-xr-x  1 hp staff 55710 May 26 15:42 elasticsearch*</span><br><span class="line">-rw-r--r--  1 hp staff  2610 May 26 15:42 elasticsearch.bat</span><br><span class="line">-rw-r--r--  1 hp staff  4754 May 26 15:42 elasticsearch.conf</span><br><span class="line">-rwxr-xr-x  1 hp staff    64 May 26 15:42 elasticsearch32*</span><br><span class="line">-rwxr-xr-x  1 hp staff    64 May 26 15:42 elasticsearch64*</span><br><span class="line">drwxr-xr-x 16 hp staff   544 May 26 15:42 exec/</span><br><span class="line">drwxr-xr-x 17 hp staff   578 May 26 15:42 lib/</span><br><span class="line">➜  service</span><br></pre></td></tr></table></figure>
<p>运行这个插件的好处是：elasticsearch 需要的jvm参数和其它配置都已经配置好了，非常方便。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sh elasticsearch start;</span><br><span class="line">sh elasticsearch restart;</span><br><span class="line">sh elasticsearch stop;</span><br></pre></td></tr></table></figure>
<p>在实际生产环境中，该插件基本把参数都配置好了。我们只需要修改一下jvm分配的内存空间就好了，如 :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set.default.ES_HEAP_SIZE=16384</span><br><span class="line">set.default.ES_MIN_MEM=16384</span><br><span class="line">set.default.ES_MAX_MEM=19660</span><br></pre></td></tr></table></figure>
<blockquote>
<p>第一次运行 elaticsearch 会产生 data-dir 与 log-dir</p>
<p>service log 在 logs/service.log 中。</p>
<p><a href="https://github.com/elastic/elasticsearch-servicewrapper" target="_blank" rel="external">more_info-service</a></p>
<p>Mac OS X Mountain Lion missing 32-bit Java<br>apple 6 maybe could</p>
</blockquote>
<hr>
<h2 id="6-Http-basic-server-plugin"><a href="#6-Http-basic-server-plugin" class="headerlink" title="6. Http-basic-server-plugin"></a>6. Http-basic-server-plugin</h2><p>不要裸奔，穿一套比基尼吧。</p>
<p>做一个简单的HTTP认证，elasticsearch-http-basic 提供了针对 ES HTTP 连接 的 IP白名单、密码权限 和  信任代理功能。</p>
<p>github :<br><a href="https://github.com/Asquera/elasticsearch-http-basic" target="_blank" rel="external">Asquera_http_basic</a></p>
<p><strong>Install-Verify</strong></p>
<p>elasticsearch-http-basic还不支持ES标准的bin/plugin install [github-name]/[repo-name]的安装方式, 所以按照如下方式安装</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir -p plugins/http-basic; </span><br><span class="line">mv elasticsearch-http-basic-1.5.1.jar plugins/http-basic</span><br></pre></td></tr></table></figure>
<p><strong>Config http-basic param</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http.basic.enabled: true</span><br><span class="line">http.basic.user: &quot;admin&quot;</span><br><span class="line">http.basic.password: &quot;admin&quot;</span><br><span class="line">http.basic.ipwhitelist: [&quot;localhost&quot;, &quot;127.0.0.1&quot;]</span><br><span class="line">http.basic.trusted_proxy_chains: []</span><br><span class="line">http.basic.log: true</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="7-Elasticsearch-sql"><a href="#7-Elasticsearch-sql" class="headerlink" title="7. Elasticsearch-sql"></a>7. Elasticsearch-sql</h2><p><img src="/images/es-sql.jpeg" alt="图片描述"></p>
<p><strong>install</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./plugin -u https://github.com/NLPchina/elasticsearch-sql/releases/download/1.4.5/elasticsearch-sql-1.4.5.zip --install sql</span><br></pre></td></tr></table></figure>
<p><strong>Verify</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">open http://node01:9200/_plugin/sql/</span><br></pre></td></tr></table></figure>
<p><strong>./bin/plugin –list</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">➜  elasticsearch ./bin/plugin --list</span><br><span class="line">Installed plugins:</span><br><span class="line">    - bigdesk</span><br><span class="line">    - head</span><br><span class="line">    - http-basic</span><br><span class="line">    - jdbc</span><br><span class="line">    - kopf</span><br><span class="line">    - license</span><br><span class="line">    - shield</span><br><span class="line">    - sql</span><br></pre></td></tr></table></figure>
<h2 id="8-Elasticsearch-jdbc"><a href="#8-Elasticsearch-jdbc" class="headerlink" title="8. Elasticsearch-jdbc"></a>8. Elasticsearch-jdbc</h2><p>关系型数据库的同步插件</p>
<p><strong>install</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./plugin --install jdbc --url http://xbib.org/repository/org/xbib/elasticsearch/plugin/elasticsearch-river-jdbc/1.5.0.5/elasticsearch-river-jdbc-1.5.0.5-plugin.zip</span><br></pre></td></tr></table></figure>
<p>download and add mysql-driver</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -o mysql-connector-java-5.1.33.zip -L &apos;http://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.33.zip/from/http://cdn.mysql.com/&apos;</span><br><span class="line"></span><br><span class="line">cp mysql-connector-java-5.1.33-bin.jar $ES_HOME/plugins/jdbc/</span><br><span class="line"></span><br><span class="line">chmod 644 $ES_HOME/plugins/jdbc/*</span><br></pre></td></tr></table></figure>
<p>停止river</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -XDELETE &apos;localhost:9200/_river/my_jdbc_river/&apos;</span><br></pre></td></tr></table></figure>
<p><strong>Verify</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">open http://node01:9200/_nodes/node01/plugins?pretty=true</span><br></pre></td></tr></table></figure>
<h2 id="9-Basic-operation"><a href="#9-Basic-operation" class="headerlink" title="9. Basic operation"></a>9. Basic operation</h2><p><strong>查看该节点安装的所有插件列表</strong></p>
<p><strong><em><a href="http://node01:9200/_nodes/node01/plugins?pretty=true" target="_blank" rel="external">http://node01:9200/_nodes/node01/plugins?pretty=true</a></em></strong></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"cluster_name"</span> : <span class="string">"elasticsearch_x"</span>,</span><br><span class="line">  <span class="attr">"nodes"</span> : &#123;</span><br><span class="line">    <span class="attr">"nSitXzd8QvSxQRz3mni3BA"</span> : &#123;</span><br><span class="line">      <span class="attr">"name"</span> : <span class="string">"node01"</span>,</span><br><span class="line">      <span class="attr">"transport_address"</span> : <span class="string">"inet[/192.168.181.35:9300]"</span>,</span><br><span class="line">      <span class="attr">"host"</span> : <span class="string">"unix.local"</span>,</span><br><span class="line">      <span class="attr">"ip"</span> : <span class="string">"192.168.181.35"</span>,</span><br><span class="line">      <span class="attr">"version"</span> : <span class="string">"1.7.5"</span>,</span><br><span class="line">      <span class="attr">"build"</span> : <span class="string">"00f95f4"</span>,</span><br><span class="line">      <span class="attr">"http_address"</span> : <span class="string">"inet[/192.168.181.35:9200]"</span>,</span><br><span class="line">      <span class="attr">"plugins"</span> : [ &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"sql"</span>,</span><br><span class="line">        <span class="attr">"version"</span> : <span class="string">"1.4.5"</span>,</span><br><span class="line">        <span class="attr">"description"</span> : <span class="string">"Use sql to query elasticsearch."</span>,</span><br><span class="line">        <span class="attr">"url"</span> : <span class="string">"/_plugin/sql/"</span>,</span><br><span class="line">        <span class="attr">"jvm"</span> : <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"site"</span> : <span class="literal">true</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"http-basic-server-plugin"</span>,</span><br><span class="line">        <span class="attr">"version"</span> : <span class="string">"NA"</span>,</span><br><span class="line">        <span class="attr">"description"</span> : <span class="string">"HTTP Basic Server Plugin"</span>,</span><br><span class="line">        <span class="attr">"jvm"</span> : <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"site"</span> : <span class="literal">false</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"bigdesk"</span>,</span><br><span class="line">        <span class="attr">"version"</span> : <span class="string">"NA"</span>,</span><br><span class="line">        <span class="attr">"description"</span> : <span class="string">"No description found."</span>,</span><br><span class="line">        <span class="attr">"url"</span> : <span class="string">"/_plugin/bigdesk/"</span>,</span><br><span class="line">        <span class="attr">"jvm"</span> : <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">"site"</span> : <span class="literal">true</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"head"</span>,</span><br><span class="line">        <span class="attr">"version"</span> : <span class="string">"NA"</span>,</span><br><span class="line">        <span class="attr">"description"</span> : <span class="string">"No description found."</span>,</span><br><span class="line">        <span class="attr">"url"</span> : <span class="string">"/_plugin/head/"</span>,</span><br><span class="line">        <span class="attr">"jvm"</span> : <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">"site"</span> : <span class="literal">true</span></span><br><span class="line">      &#125;, &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"kopf"</span>,</span><br><span class="line">        <span class="attr">"version"</span> : <span class="string">"1.5.7-SNAPSHOT"</span>,</span><br><span class="line">        <span class="attr">"description"</span> : <span class="string">"kopf - simple web administration tool for ElasticSearch"</span>,</span><br><span class="line">        <span class="attr">"url"</span> : <span class="string">"/_plugin/kopf/"</span>,</span><br><span class="line">        <span class="attr">"jvm"</span> : <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">"site"</span> : <span class="literal">true</span></span><br><span class="line">      &#125; ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>XPUT data</strong></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">curl -u admin:admin -XPUT http://node01:9200/megacorp/employee/1 -d '</span><br><span class="line"> &#123;</span><br><span class="line">     "first_name" : "John",</span><br><span class="line">     "last_name" :  "Smith",</span><br><span class="line">     "age" :        25,</span><br><span class="line">     "about" :      "I love to go rock climbing",</span><br><span class="line">     "interests": [ "sports", "music" ]</span><br><span class="line"> &#125;'</span><br></pre></td></tr></table></figure>
<p><strong>XGET data</strong></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">curl -XGET 'localhost:9200/_count?pretty' -d '</span><br><span class="line"> &#123;</span><br><span class="line">     "query": &#123;</span><br><span class="line">         "match_all": &#123;&#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;'</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"count"</span> : <span class="number">1</span>,</span><br><span class="line">  <span class="attr">"_shards"</span> : &#123;</span><br><span class="line">    <span class="attr">"total"</span> : <span class="number">5</span>,</span><br><span class="line">    <span class="attr">"successful"</span> : <span class="number">5</span>,</span><br><span class="line">    <span class="attr">"failed"</span> : <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-Reference-article"><a href="#10-Reference-article" class="headerlink" title="10. Reference article"></a>10. Reference article</h2><ol>
<li><a href="http://www.cnblogs.com/richaaaard/p/5212044.html" target="_blank" rel="external">csdn-004-Elasticsearch插件的介绍</a></li>
<li><a href="http://blog.csdn.net/shenfuli/article/details/49094935" target="_blank" rel="external">插件安装Head、Kopf与Bigdesk</a></li>
<li><a href="http://www.chepoo.com/elasticsearch-service-install.html" target="_blank" rel="external">chepoo.com/elasticsearch-service</a></li>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-service.html" target="_blank" rel="external">elastic.co/guide/</a></li>
<li><a href="https://github.com/NLPchina/elasticsearch-sql" target="_blank" rel="external">NLPchina/elasticsearch-sql</a></li>
<li><a href="https://github.com/elasticfence/elasticsearch-http-user-auth" target="_blank" rel="external">elasticsearch-http-user-auth</a> (这个我没有使用)</li>
<li><a href="http://guoze.me/2015/05/28/elasticsearch-http-basic-authentication/" target="_blank" rel="external">建造者说</a></li>
</ol>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-elasticsearch1-indoor" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/05/17/elasticsearch1-indoor/"><strong>Elasticsearch * 入门</strong></a>
      <small class=article-date-index>&nbsp; 2016-05-17</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/05/17/elasticsearch1-indoor/" class="article-date">
  <time datetime="2016-05-17T07:59:16.000Z" itemprop="datePublished">2016-05-17</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      这是关于 Elasticsearch 入门 的一些基本内容. <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/elastic/">elastic</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/05/17/elasticsearch1-indoor/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-Elasticsearch-前言"><a href="#1-Elasticsearch-前言" class="headerlink" title="1. Elasticsearch 前言"></a>1. Elasticsearch 前言</h2><p>Elasticsearch 是一个基于Apache Lucene(TM)的开源搜索引擎、<code>实时分布式搜索</code>和<code>分析引擎</code>。</p>
<blockquote>
<p>Lucene 是 成熟的<code>全文索引与信息检索(IR)库</code>，采用Java实现。信息检索式指文档搜索、文档内信息搜索或者文档相关的元数据搜索等操作。。</p>
<p>Solr是一个基于Lucene <code>java库的企业级搜索服务器</code>，包含XML/HTTP，JSON API，高亮查询结果，缓存，复制，还有一个WEB管理界面。Solr运行在Servlet容器中</p>
<p>2010 年 Elasticsearch 出现公开版本</p>
</blockquote>
<p><strong>Elasticsearch 涉及的技术</strong></p>
<ul>
<li>全文搜索</li>
<li>分析系统</li>
<li>分布式数据库</li>
</ul>
<p><strong>谁在使用 Elasticsearch?</strong></p>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/Wikipedia:%E9%A6%96%E9%A1%B5" target="_blank" rel="external">维基百科</a></li>
<li><a href="http://stackoverflow.com/" target="_blank" rel="external">StackOverflow</a></li>
<li><a href="https://github.com/libean" target="_blank" rel="external">Github</a><br>…</li>
</ul>
<h2 id="2-概念"><a href="#2-概念" class="headerlink" title="2. 概念"></a>2. 概念</h2><p>Elasticsearch 是 开源搜索引擎.</p>
<p><strong>Elasticsearch 不仅是全文搜索，还是：</strong></p>
<ul>
<li>分布式 实时文件存储，每个字段都被索引并可被搜索</li>
<li>分布式 实时分析搜索引擎</li>
<li>可扩展服务器，处理<strong>PB</strong>级结构化或非结构化数据</li>
</ul>
<p>这些功能被集成到一个服务里面，应用可通过 <code>RESTful API</code>、各种语言的<code>客户端</code>、<code>命令行</code> 与之交互。</p>
<p>Elasticsearch也使用Java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的<code>RESTful API</code>来隐藏Lucene的复杂性，从而让全文搜索变得简单。</p>
<p><a href="http://es.xiaoleilu.com/010_Intro/10_Installing_ES.html" target="_blank" rel="external">more_info_install_elaticsearch</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[deploy@node196 config]$ ll</span><br><span class="line">total 20</span><br><span class="line">-rw-rw-r--  1 deploy deploy 13915 May 10 10:02 elasticsearch.yml</span><br><span class="line">-rw-rw-r--. 1 deploy deploy  2054 Jul 16  2015 logging.yml</span><br><span class="line">[deploy@node196 config]$ pwd</span><br><span class="line">/home/deploy/elasticsearch-1.7.1/config</span><br></pre></td></tr></table></figure>
<p><strong>编辑 elasticsearch.yml</strong> </p>
<p>替代cluster.name的默认值，这样可以防止一个新启动的节点加入到相同网络中的另一个同名的集群中。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cluster.name: elasticsearch_your-company-name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#################################### Node #####################################</span><br><span class="line"></span><br><span class="line"># Node names are generated dynamically on startup, so you&apos;re relieved</span><br><span class="line"># from configuring them manually. You can tie this node to a specific name:</span><br><span class="line">#</span><br><span class="line">node.name: &quot;node196&quot;</span><br></pre></td></tr></table></figure>
<h2 id="3-API"><a href="#3-API" class="headerlink" title="3. API"></a>3. API</h2><h3 id="3-1-Java-API"><a href="#3-1-Java-API" class="headerlink" title="3.1 Java API"></a>3.1 Java API</h3><p><strong>节点客户端(node client)</strong></p>
<p>节点客户端以无数据节点(none data node)身份加入集群，换言之，它自己不存储任何数据，但是它知道数据在集群中的具体位置，并且能直接转发请求到对应的节点上。</p>
<p><strong>传输客户端(Transport client)</strong></p>
<p>更轻量的传输客户端 能发送请求到远程集群。它自己不加入集群，只是简单转发请求给集群中的节点。</p>
<blockquote>
<p>两个Java客户端都通过 9300端口 与 集群交互，使用 Elasticsearch传输协议(<code>Elasticsearch Transport Protocol</code>)。集群中的节点之间也通过 9300 port 进行通信。</p>
</blockquote>
<p><a href="https://www.elastic.co/guide/index.html" target="_blank" rel="external">more_info_Java-API</a></p>
<h3 id="3-2-RESTful-API"><a href="#3-2-RESTful-API" class="headerlink" title="3.2 RESTful API"></a>3.2 RESTful API</h3><ul>
<li>基于 HTTP 协议，以 JSON 为数据交互格式的 RESTful API</li>
</ul>
<blockquote>
<p>向 Elasticsearch 发出的请求的组成部分与其它普通的HTTP请求是一样的：<br>curl -X<verb> ‘<protocol>://<host>:<port>/<path></path>?<query_string>‘ -d ‘<body>‘</body></query_string></port></host></protocol></verb></p>
<p>VERB HTTP方法：GET, POST, PUT, HEAD, DELETE<br>…</p>
</blockquote>
<p>example : 查询集群中 文档数量</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[deploy@node196 config]$ curl -u username:passwd -XGET &apos;localhost:9200/_count?pretty&apos; -d &apos;</span><br><span class="line">&gt; &#123;</span><br><span class="line">&gt;     &quot;query&quot;: &#123;</span><br><span class="line">&gt;         &quot;match_all&quot;: &#123;&#125;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; &#125;&apos;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;count&quot; : 100001234,</span><br><span class="line">  &quot;_shards&quot; : &#123;</span><br><span class="line">    &quot;total&quot; : 376,</span><br><span class="line">    &quot;successful&quot; : 376,</span><br><span class="line">    &quot;failed&quot; : 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">curl -u name:pass -X DELETE http://ip:9200/your_index</span><br></pre></td></tr></table></figure>
<h2 id="4-文档"><a href="#4-文档" class="headerlink" title="4. 文档"></a>4. 文档</h2><p><strong>面向文档</strong></p>
<p>Elasticsearch is document oriented，这意味着它可以存储整个 <code>object</code> 或 <code>document</code>。</p>
<p>Elasticsearch 还可以 索引(index) 每个文档的内容使之可以被 <strong>搜索</strong>。</p>
<p>可对 <code>document</code> （而非成行成列的数据）进行 <code>index</code>、<code>搜索</code>、<code>排序</code>、<code>过滤</code>。</p>
<p>这种理解数据的方式与以往完全不同，这也是 Elasticsearch 能够执行复杂的全文搜索的原因之一。</p>
<p><strong>JSON</strong> (JavaScript Object Notation)，文档序列化格式</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"email"</span>:      <span class="string">"john@smith.com"</span>,</span><br><span class="line">    <span class="attr">"first_name"</span>: <span class="string">"John"</span>,</span><br><span class="line">    <span class="attr">"last_name"</span>:  <span class="string">"Smith"</span>,</span><br><span class="line">    <span class="attr">"info"</span>: &#123;</span><br><span class="line">        <span class="attr">"bio"</span>:         <span class="string">"Eco-warrior and defender of the weak"</span>,</span><br><span class="line">        <span class="attr">"age"</span>:         <span class="number">25</span>,</span><br><span class="line">        <span class="attr">"interests"</span>: [ <span class="string">"dolphins"</span>, <span class="string">"whales"</span> ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"join_date"</span>: <span class="string">"2014/05/01"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如下 user对象很复杂，但它的结构和对象的含义已经被完整的体现在JSON中了，在Elasticsearch中将对象转化为 JSON 并做 index索引 要比在表结构中做相同的事情简单的多。</p>
<h2 id="5-索引"><a href="#5-索引" class="headerlink" title="5. 索引"></a>5. 索引</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[hdfs@node196 data_analysis]$ curl -u username:passwd -XPUT http://node190:9200/megacorp/employee/1 -d &apos;</span><br><span class="line">&gt; &#123;</span><br><span class="line">&gt;     &quot;first_name&quot; : &quot;John&quot;,</span><br><span class="line">&gt;     &quot;last_name&quot; :  &quot;Smith&quot;,</span><br><span class="line">&gt;     &quot;age&quot; :        25,</span><br><span class="line">&gt;     &quot;about&quot; :      &quot;I love to go rock climbing&quot;,</span><br><span class="line">&gt;     &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]</span><br><span class="line">&gt; &#125;&apos;</span><br><span class="line">&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;1&quot;,&quot;_version&quot;:1,&quot;created&quot;:true&#125;[hdfs@node196 data_analysis]$</span><br></pre></td></tr></table></figure>
<ul>
<li>indexing</li>
<li>search</li>
<li>aggregations  /ˌæɡrɪˈɡeɪʃən/</li>
</ul>
<p><strong>Elasticsearch能做的事</strong></p>
<p>场景: 假设我们刚好在Megacorp工作，这时人力资源部门出于某种目的需要让我们创建一个员工目录，这个目录用于促进人文关怀和用于实时协同工作，所以它有以下不同的需求：</p>
<ul>
<li>数据能够包含多个值的标签、数字和纯文本。</li>
<li>检索任何员工的所有信息。</li>
<li>支持结构化搜索，例如查找30岁以上的员工。</li>
<li>支持简单的全文搜索和更复杂的短语(phrase)搜索</li>
<li>高亮搜索结果中的关键字</li>
<li>能够利用图表管理分析这些数据</li>
</ul>
<p><strong>索引员工文档</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Relational DB -&gt; Databases -&gt; Tables -&gt; Rows -&gt; Columns</span><br><span class="line">Elasticsearch -&gt; Indices   -&gt; Types  -&gt; Documents -&gt; Fields</span><br></pre></td></tr></table></figure>
<p>Elasticsearch | Relational DB<br>: ——- | : ——-<br>Indices | Databases<br>Types | Tables<br>Documents | Rows<br>Fields | Columns</p>
<p><strong>Elasticsearch</strong></p>
<blockquote>
<p>索引」含义的区分</p>
<p>  <strong>index_num.</strong> : index (数据库)，它是相关文档存储的地方，</p>
<p>  <strong>index_verb.</strong> 「索引一个文档」表示把一个文档存储到索引（名词）里，以便它可以被检索或者查询。这很像SQL 中的 INSERT关键字，差别是，如果文档已经存在，新的文档将覆盖旧的文档。</p>
<p><strong>倒排索引</strong> : 传统数据库为特定列增加一个索引，例如 B-Tree索引 来加速检索。Elasticsearch和Lucene使用倒排索引(inverted index)的数据结构来达到相同目的。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PUT /megacorp/employee/1</span><br><span class="line">&#123;</span><br><span class="line">    &quot;first_name&quot; : &quot;John&quot;,</span><br><span class="line">    &quot;last_name&quot; :  &quot;Smith&quot;,</span><br><span class="line">    &quot;age&quot; :        25,</span><br><span class="line">    &quot;about&quot; :      &quot;I love to go rock climbing&quot;,</span><br><span class="line">    &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://segmentfault.com/img/bVvQp0" alt="图片描述"></p>
<h3 id="5-1-检索文档"><a href="#5-1-检索文档" class="headerlink" title="5.1 检索文档"></a>5.1 检索文档</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;_index&quot; :   &quot;megacorp&quot;,</span><br><span class="line">  &quot;_type&quot; :    &quot;employee&quot;,</span><br><span class="line">  &quot;_id&quot; :      &quot;1&quot;,</span><br><span class="line">  &quot;_version&quot; : 1,</span><br><span class="line">  &quot;found&quot; :    true,</span><br><span class="line">  &quot;_source&quot; :  &#123;</span><br><span class="line">      &quot;first_name&quot; :  &quot;John&quot;,</span><br><span class="line">      &quot;last_name&quot; :   &quot;Smith&quot;,</span><br><span class="line">      &quot;age&quot; :         25,</span><br><span class="line">      &quot;about&quot; :       &quot;I love to go rock climbing&quot;,</span><br><span class="line">      &quot;interests&quot;:  [ &quot;sports&quot;, &quot;music&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-简单搜索"><a href="#5-2-简单搜索" class="headerlink" title="5.2 简单搜索"></a>5.2 简单搜索</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br></pre></td></tr></table></figure>
<p>查询 last_name 为 Smith 的记录</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search?q=last_name:Smith</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   ...</span><br><span class="line">   &quot;hits&quot;: &#123;</span><br><span class="line">      &quot;total&quot;:      2,</span><br><span class="line">      &quot;max_score&quot;:  0.30685282,</span><br><span class="line">      &quot;hits&quot;: [</span><br><span class="line">         &#123;</span><br><span class="line">            ...</span><br><span class="line">            &quot;_source&quot;: &#123;</span><br><span class="line">               &quot;first_name&quot;:  &quot;John&quot;,</span><br><span class="line">               &quot;last_name&quot;:   &quot;Smith&quot;,</span><br><span class="line">               &quot;age&quot;:         25,</span><br><span class="line">               &quot;about&quot;:       &quot;I love to go rock climbing&quot;,</span><br><span class="line">               &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">            ...</span><br><span class="line">            &quot;_source&quot;: &#123;</span><br><span class="line">               &quot;first_name&quot;:  &quot;Jane&quot;,</span><br><span class="line">               &quot;last_name&quot;:   &quot;Smith&quot;,</span><br><span class="line">               &quot;age&quot;:         32,</span><br><span class="line">               &quot;about&quot;:       &quot;I like to collect rock albums&quot;,</span><br><span class="line">               &quot;interests&quot;: [ &quot;music&quot; ]</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      ]</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-3-使用DSL语句查询"><a href="#5-3-使用DSL语句查询" class="headerlink" title="5.3 使用DSL语句查询"></a>5.3 使用DSL语句查询</h3><p> DSL(Domain Specific Language特定领域语言) </p>
<p><strong>查询字符串等价于</strong>  q=last_name:Smith <strong>DSL查询 : </strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot; : &#123;</span><br><span class="line">        &quot;match&quot; : &#123;</span><br><span class="line">            &quot;last_name&quot; : &quot;Smith&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-4-更复杂的搜索"><a href="#5-4-更复杂的搜索" class="headerlink" title="5.4 更复杂的搜索"></a>5.4 更复杂的搜索</h3><p><strong>filter range</strong></p>
<p>GET /megacorp/employee/_search<br>{<br>    “query” : {<br>        “filtered” : {<br>            “filter” : {<br>                “range” : {<br>                    “age” : { “gt” : 30 } <1><br>                }<br>            },<br>            “query” : {<br>                “match” : {<br>                    “last_name” : “smith” <2><br>                }<br>            }<br>        }<br>    }<br>}</2></1></p>
<h3 id="5-5-全文搜索"><a href="#5-5-全文搜索" class="headerlink" title="5.5 全文搜索"></a>5.5 全文搜索</h3><p>一种传统数据库难以实现的功能</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot; : &#123;</span><br><span class="line">        &quot;match&quot; : &#123;</span><br><span class="line">            &quot;about&quot; : &quot;rock climbing&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   ...</span><br><span class="line">   &quot;hits&quot;: &#123;</span><br><span class="line">      &quot;total&quot;:      2,</span><br><span class="line">      &quot;max_score&quot;:  0.16273327,</span><br><span class="line">      &quot;hits&quot;: [</span><br><span class="line">         &#123;</span><br><span class="line">            ...</span><br><span class="line">            &quot;_score&quot;:         0.16273327, &lt;1&gt;</span><br><span class="line">            &quot;_source&quot;: &#123;</span><br><span class="line">               &quot;first_name&quot;:  &quot;John&quot;,</span><br><span class="line">               &quot;last_name&quot;:   &quot;Smith&quot;,</span><br><span class="line">               &quot;age&quot;:         25,</span><br><span class="line">               &quot;about&quot;:       &quot;I love to go rock climbing&quot;,</span><br><span class="line">               &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">            ...</span><br><span class="line">            &quot;_score&quot;:         0.016878016, &lt;2&gt;</span><br><span class="line">            &quot;_source&quot;: &#123;</span><br><span class="line">               &quot;first_name&quot;:  &quot;Jane&quot;,</span><br><span class="line">               &quot;last_name&quot;:   &quot;Smith&quot;,</span><br><span class="line">               &quot;age&quot;:         32,</span><br><span class="line">               &quot;about&quot;:       &quot;I like to collect rock albums&quot;,</span><br><span class="line">               &quot;interests&quot;: [ &quot;music&quot; ]</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      ]</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-6-短语搜索-–-phrases"><a href="#5-6-短语搜索-–-phrases" class="headerlink" title="5.6 短语搜索 – phrases"></a>5.6 短语搜索 – phrases</h3><p>想要确切的匹配若干个单词或者短语(phrases), 例如  我们想要查询同时包含”rock”和”climbing”（并且是相邻的）的员工记录。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot; : &#123;</span><br><span class="line">        &quot;match_phrase&quot; : &#123;</span><br><span class="line">            &quot;about&quot; : &quot;rock climbing&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>增加高亮</em></strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;query&quot; : &#123;</span><br><span class="line">        &quot;match_phrase&quot; : &#123;</span><br><span class="line">            &quot;about&quot; : &quot;rock climbing&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;highlight&quot;: &#123;</span><br><span class="line">        &quot;fields&quot; : &#123;</span><br><span class="line">            &quot;about&quot; : &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-aggregations"><a href="#6-aggregations" class="headerlink" title="6. aggregations"></a>6. aggregations</h2><p>聚合相当于 group by</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;match&quot;: &#123;</span><br><span class="line">      &quot;last_name&quot;: &quot;smith&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;aggs&quot;: &#123;</span><br><span class="line">    &quot;all_interests&quot;: &#123;</span><br><span class="line">      &quot;terms&quot;: &#123;</span><br><span class="line">        &quot;field&quot;: &quot;interests&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">&quot;all_interests&quot;: &#123;</span><br><span class="line">   &quot;buckets&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;key&quot;: &quot;music&quot;,</span><br><span class="line">         &quot;doc_count&quot;: 2</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;key&quot;: &quot;sports&quot;,</span><br><span class="line">         &quot;doc_count&quot;: 1</span><br><span class="line">      &#125;</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>聚合也允许分级汇总。例如，让我们统计每种兴趣下职员的平均年龄</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GET /megacorp/employee/_search</span><br><span class="line">&#123;</span><br><span class="line">    &quot;aggs&quot; : &#123;</span><br><span class="line">        &quot;all_interests&quot; : &#123;</span><br><span class="line">            &quot;terms&quot; : &#123; &quot;field&quot; : &quot;interests&quot; &#125;,</span><br><span class="line">            &quot;aggs&quot; : &#123;</span><br><span class="line">                &quot;avg_age&quot; : &#123;</span><br><span class="line">                    &quot;avg&quot; : &#123; &quot;field&quot; : &quot;age&quot; &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>教程小结</strong></p>
<p> 为了保持简短，还有很多的特性未提及——像 推荐、定位、渗透、模糊 以及 部分匹配等。但这也突出了构建高级搜索功能是多么的容易。无需配置，只需要添加数据然后开始搜索！</p>
<h2 id="7-分布式的特性"><a href="#7-分布式的特性" class="headerlink" title="7. 分布式的特性"></a>7. 分布式的特性</h2><p>Elasticsearch 你不需要知道任何关于分布式系统、分片、集群发现或者其他大量的分布式概念。所有的教程你即可以运行在你的笔记本上，也可以运行在拥有100个节点的集群上，其工作方式是一样的。</p>
<p>Elasticsearch 致力于隐藏分布式系统的复杂性。以下这些操作都是在底层自动完成的：</p>
<ul>
<li>将你的文档分区到不同的容器或者分片(shards)中，它们可存于一或多个节点中。</li>
<li>将分片均匀的分配到各个节点，对索引和搜索做负载均衡。</li>
<li>冗余每一个分片，防止硬件故障造成的数据丢失。</li>
<li>将集群中任意一个节点上的请求路由到相应数据所在的节点。</li>
<li>无论是增加节点，还是移除节点，分片都可以做到无缝的扩展和迁移。</li>
</ul>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-math-distance-formula-of-point-to-plain" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/05/17/math-distance-formula-of-point-to-plain/"><strong>Distance formula of point to plane</strong></a>
      <small class=article-date-index>&nbsp; 2016-05-17</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/05/17/math-distance-formula-of-point-to-plain/" class="article-date">
  <time datetime="2016-05-17T07:07:21.000Z" itemprop="datePublished">2016-05-17</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      点到平面的距离 <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/math/">math</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/05/17/math-distance-formula-of-point-to-plain/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$'], ['\[','\]'] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<p><a href="https://zh.wikipedia.org/wiki/%E5%90%91%E9%87%8F" target="_blank" rel="external">维基百科_Vector</a></p>
<ul>
<li>平面的一般式方程</li>
<li>向量的模（长度）</li>
<li>向量的数量积</li>
</ul>
<h2 id="1-平面的一般式方程"><a href="#1-平面的一般式方程" class="headerlink" title="1. 平面的一般式方程"></a>1. 平面的一般式方程</h2><p>Ax +By +Cz + D = 0</p>
<p>其中n = (A, B, C)是平面的法向量，D是将平面平移到坐标原点所需距离（所以D=0时，平面过原点）</p>
<h2 id="2-向量的模（长度）"><a href="#2-向量的模（长度）" class="headerlink" title="2. 向量的模（长度）"></a>2. 向量的模（长度）</h2><p>给定一个向量V（x, y, z),则|V| = sqrt(x <em> x + y </em> y + z * z)</p>
<blockquote>
<p>在数学中，矢量常采用更为抽象的矢量空间（也称为线性空间）来定义，而定义具有物理意义上的大小和方向的矢量概念则需要引进了范数和内积的欧几里得空间。<br>范数， 模长</p>
</blockquote>
<h2 id="3-向量的数量积-点积-内积"><a href="#3-向量的数量积-点积-内积" class="headerlink" title="3. 向量的数量积/点积/内积"></a>3. 向量的数量积/点积/内积</h2><p>给定两个向量V1(x1, y1, z1)和V2(x2, y2, z2)则他们的内积是 V1V2 = x1x2 + y1y2 + z1z2</p>
<blockquote>
<p>数量积被广泛应用于物理中，如做功就是用力的矢量乘位移的矢量，即<img src="/images/math-pointdis.png" alt=""></p>
</blockquote>
<h2 id="4-点到平面的距离-Yes"><a href="#4-点到平面的距离-Yes" class="headerlink" title="4. 点到平面的距离(Yes)"></a>4. 点到平面的距离(Yes)</h2><p>求点到直线的距离不再是难事，有图有真相</p>
<p><img src="/images/math-pointToPlane.jpeg" alt="Distance formula of point to plane"></p>
<blockquote>
<p>如果法向量是单位向量的话，那么分母为1</p>
</blockquote>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml-introduce" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/05/10/ml-introduce/"><strong>Machine Learning Introduce</strong></a>
      <small class=article-date-index>&nbsp; 2016-05-10</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/05/10/ml-introduce/" class="article-date">
  <time datetime="2016-05-10T02:59:21.000Z" itemprop="datePublished">2016-05-10</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      Machine learning basic indoor theory <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/05/10/ml-introduce/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<p><strong>Content List</strong></p>
<ul>
<li>machine-learning<ul>
<li>1.1. learning object data</li>
<li>1.2. main machine-learning</li>
<li>1.3. machine-learning steps</li>
<li>1.4. importance of machine-learning</li>
</ul>
</li>
<li>supervised-learning introduce<ul>
<li>2.1 basic concept</li>
<li>2.2 formalization of problem</li>
</ul>
</li>
<li>three factors of machine learning<ul>
<li>3.1. model</li>
<li>3.2. strategy</li>
<li>3.3. algorithm</li>
</ul>
</li>
</ul>
<h2 id="1-statistical-machine-learning"><a href="#1-statistical-machine-learning" class="headerlink" title="1. statistical machine learning"></a>1. statistical machine learning</h2><h3 id="1-1-learning-object-data"><a href="#1-1-learning-object-data" class="headerlink" title="1.1 learning object data"></a>1.1 learning object data</h3><p>它从 数据 出发，提取数据特征， 抽象出数据模型, 发现数据中的知识，又回到数据的分析与预测。</p>
<h3 id="1-2-main-machine-learning"><a href="#1-2-main-machine-learning" class="headerlink" title="1.2 main machine learning"></a>1.2 main machine learning</h3><ol>
<li>supervised learning</li>
<li>unsupervised learning</li>
<li>semi-supervised learning</li>
<li>reinforcemnt learning</li>
</ol>
<h3 id="1-3-machine-learning-steps"><a href="#1-3-machine-learning-steps" class="headerlink" title="1.3 machine learning steps"></a>1.3 machine learning steps</h3><ol>
<li>得到一个有限的训练数据集合</li>
<li>确定 包含所有可能的 模型的假设空间 model hypothesis space</li>
<li>确定 模型选择的准则 model strategy</li>
<li>实现求解最优 模型学习的算法 model algorithm</li>
<li>通过学习方法选择 best model</li>
<li>利用learning best model 对新数据进行 预测 或 分析</li>
</ol>
<h3 id="1-4-importance-of-ml"><a href="#1-4-importance-of-ml" class="headerlink" title="1.4 importance of ml"></a>1.4 importance of ml</h3><ol>
<li>处理海量数据的有效手段</li>
<li>计算机智能化的有效手段</li>
<li>计算机科学发展的重要部分</li>
</ol>
<p><strong>应用领域 :</strong> 人工智能、模式识别、数据挖掘、NLP、图像识别、信息检索、生物信息 …</p>
<h2 id="2-supervised-learning"><a href="#2-supervised-learning" class="headerlink" title="2. supervised-learning"></a>2. supervised-learning</h2><blockquote>
<p>监督学习是学习模型，使模型能对 任何输入(input) 都能产生一个预测性的 输出 (output)。</p>
</blockquote>
<h3 id="2-1-basic-concept"><a href="#2-1-basic-concept" class="headerlink" title="2.1 basic concept"></a>2.1 basic concept</h3><ul>
<li>feature space</li>
<li>output space</li>
</ul>
<p>每个具体的 <code>input</code> 是一个实例 instance, 通常由 feature vector 表示. 这时，所有 <code>feature vector</code> 存在的空间成为 <code>feature space</code>, feature space 的每一维对应于一个 <code>feature</code>.</p>
<p>将 input, output 看作是定义在 input(feature) space 与 output space 上随机变量的取值.</p>
<p><strong>(1) input instane feature vector 记作 :</strong></p>
<p>$$<br>x = (x_i^1, x_i^2, …, x_i^i, …, x_i^n)^T<br>$$</p>
<blockquote>
<p>$x_i^{(i)}$ 表示 x 的第 i 个 feature</p>
</blockquote>
<p><code>supervised learning</code> learning <code>model</code> from <code>training data sets</code>， then to predict the <code>test data</code>, training data by input(<code>feature vector</code>) and <code>output</code> composition.</p>
<p><strong>training sets 训练集表示为 :</strong></p>
<p>$$<br>T = { (x_1, y_1), (x_2, y_2), … , (x_N, y_N) }<br>$$</p>
<p>test data <code>input、output对</code> 成为 <code>sample(样本) and 样本点</code></p>
<p><strong>classification、regression、tagging</strong></p>
<ul>
<li>input、output 都为 <strong>离散变量</strong> 的 prediction problem，称为 <code>classification</code>(分类) 问题 </li>
<li>input、output 都为 <strong>连续变量</strong> 的 prediction problem，称为 <code>regression</code>(回归) 问题</li>
<li>input、output 都为 <strong>变量序列</strong> 的 prediction problem，称为 <code>tagging</code>(标注) 问题</li>
</ul>
<p><strong>(2) 联合概率分布</strong></p>
<p>supervised learning 假设 input、output 的随机变量 X 和 Y 遵循 联合概率分布 P(X, Y)</p>
<p><a href="https://zh.wikipedia.org/wiki/%E8%81%94%E5%90%88%E5%88%86%E5%B8%83" target="_blank" rel="external">联合分布 more_info</a></p>
<blockquote>
<p>在学习的过程中，假设 P(X, Y) 存在，但对学习系统而言 P(X, Y) 具体定义是未知的。training data、test data 被看作是 依 联合概率分布 P(X, Y) 独立同分布产生的。这就是 supervised learning 关于数据的基本假设。</p>
</blockquote>
<p><strong>hypothesis space</strong> [haɪ’pɒθɪsɪs]</p>
<p>supervised learning. model 属于由 input-space to output-space 的映射的集合, 这个集合就是 <code>hypothesis space</code> 假设空间.  </p>
<blockquote>
<p>y的集合么 ??</p>
</blockquote>
<p>model of supervised learning 可以是 概率模型 或 非概率模型。由 条件概率分布 $P(X|Y)$ 或 <code>decision function</code> 决策函数 $Y = f(X)$ 表示. 对具体的 输入 进行输出预测 $P(y|x)$ or $y = f(x)$</p>
<h3 id="2-2-formalization-of-problem"><a href="#2-2-formalization-of-problem" class="headerlink" title="2.2 formalization of problem"></a>2.2 formalization of problem</h3><p><img src="https://sfault-image.b0.upaiyun.com/118/814/1188144489-5732c82624eff_articlex" alt="ml-steps"></p>
<p><strong>训练集 :</strong></p>
<p>$$<br>T = { (x_1, y_1), (x_2, y_2), … , (x_N, y_N) }<br>$$</p>
<p>$(x_i, y_i)$ 称为 样本点 sample</p>
<p>$x_i \in \chi \subseteq R^n$ 输入观测值</p>
<p>$y_i \in Y$ 输出观测值</p>
<h2 id="3-three-factors-of-ml"><a href="#3-three-factors-of-ml" class="headerlink" title="3. three factors of ml"></a>3. three factors of ml</h2><p>method = model + strategy + algorithm</p>
<h3 id="3-1-model"><a href="#3-1-model" class="headerlink" title="3.1 model"></a>3.1 model</h3><p>supervised learning，model 就是所要学习的 <code>条件概率分布</code> (conditional probability) 或 <code>决策函数</code>（decision function）</p>
<p><code>hypothesis space</code> 可以定义为 <code>decision function</code> 的集合</p>
<p>$$<br>F = { f | Y = f(x) }<br>$$</p>
<p>$$<br>F = { f | Y = f_\theta(x) , \theta \in R^n }<br>$$</p>
<p><code>hypothesis space</code> 可以定义为 <code>conditional probability</code> 的集合</p>
<p>$$<br>F = { P | P(Y|X) }<br>$$</p>
<p>$$<br>F = { P | P_\theta(Y|X) , \theta \in R^n }<br>$$</p>
<h3 id="3-2-strategy"><a href="#3-2-strategy" class="headerlink" title="3.2 strategy"></a>3.2 strategy</h3><p>machine-learning 的目标 在于 从 hypothesis space 选取 best model。</p>
<p><strong>loss function</strong></p>
<p>supervised-learning 问题是在 <strong>hypothesis-space</strong> F select model $f$ as <code>decision-function</code>, 输出的预测值  $f(X)$ 与 真实值 $Y$， 可能不一致。loss function 记作 : $L(Y, f(X))$</p>
<ul>
<li>0-1 loss function</li>
<li>quadratic loss function</li>
<li>absolute loss function</li>
<li>logarithmic loss function / log-likelihood loss function</li>
</ul>
<h3 id="3-3-algorithm"><a href="#3-3-algorithm" class="headerlink" title="3.3 algorithm"></a>3.3 algorithm</h3><p>algorithm is learning model concrete [ˈkɑ:ŋkri:t]  method. learning model from training data sets，by learning strategy， select best-model from hypothesis space.</p>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-spark-machine-learning-01" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/04/25/spark-machine-learning-01/"><strong>Spark Machine Learning 01 - Spark编程入门</strong></a>
      <small class=article-date-index>&nbsp; 2016-04-25</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/04/25/spark-machine-learning-01/" class="article-date">
  <time datetime="2016-04-25T02:07:21.000Z" itemprop="datePublished">2016-04-25</time>
</a>-->
      
  
    <myh11 class="desc-index"> <!--by blair 160805 -->
      介绍 Spark 的环境搭建与运行, 接触了 RDD 与 SparkContext, 启动 Spark-Shell 以及如何使用 Scala、Python 编写 Spark 程序. <!-- by blair 160805 bak-->
      <!--<a class="</strong></a>-->
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11> <!--by blair 160805-->
  


      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/spark/">spark</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://selfboot.org/2016/04/25/spark-machine-learning-01/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
    <!--
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Apache Spark</strong></p>
<p>简化了海量数据的存储(HDFS) 和 计算 (MR–在集群多个节点进行并行计算的框架) 流程。MapReduce 缺点, 如: 启动任务时的高开销、对中间数据 和 计算结果 写入磁盘的依赖。这使得 Hadoop 不适合 <strong>迭代式</strong> 或 <strong>低延迟</strong> 的任务。</p>
<p>机器学习 算法并非为并行架构而设计。 机器学习模型一般具有迭代式的特性, 这与 Spark 的设计目标一致。并行计算框架 很少能 兼顾 速度、扩展性、内存处理、容错性的同时，还提供灵活、表达力丰富的 API。<code>Spark</code> 全新的分布式计算框架, 注重 : 低延迟任务的优化、并将中间数据和结果保存在内存中。Spark 提供函数式API，并兼容 Hadoop Ecosystem</p>
<p>Spark 提供了对 Scala、Java、Python 语言的原生 API。</p>
<p>Spark 框架对 资源调度、任务提交、执行、跟踪， 节点间通信以及数据并行处理的内在底层操作都进行了抽象。它提供了高级别 API 用于处理分布式数据。</p>
<p><strong>Spark 的四种运行模式</strong></p>
<ol>
<li>本地单机模式 – Spark 进程 all run in One JVM</li>
<li>集群单机模式 – 使用 Spark 自己内置的 任务调度框架</li>
<li>基于 Mesos</li>
<li>基于 YARN</li>
</ol>
<h2 id="1-Spark运行"><a href="#1-Spark运行" class="headerlink" title="1. Spark运行"></a>1. Spark运行</h2><p>运行示例程序来测试是否一切正常：</p>
<blockquote>
<p>./bin/run-example org.apache.spark.examples.SparkPi</p>
</blockquote>
<p>该命令将在本地单机模式下执行SparkPi这个示例。在该模式下，所有的Spark进程均运行于同一个JVM中，而并行处理则通过多线程来实现。默认情况下，该示例会启用与本地系统的CPU核心数目相同的线程。</p>
<p>要在本地模式下设置并行的级别，以local[N]的格式来指定一个master变量即可。比如只使用两个线程时，可输入如下命令：</p>
<blockquote>
<p>MASTER=local[2] ./bin/run-example org.apache.spark.examples.SparkPi</p>
</blockquote>
<h2 id="2-Spark集群"><a href="#2-Spark集群" class="headerlink" title="2. Spark集群"></a>2. Spark集群</h2><p>Spark集群由两类程序构成：一个驱动程序和多个执行程序。本地模式时所有的处理都运行在同一个JVM内，而在集群模式时它们通常运行在不同的节点上。</p>
<p>举例来说，一个采用单机模式的Spark集群包括：</p>
<ol>
<li>一个运行Spark单机主进程和驱动程序的主节点；</li>
<li>各自运行一个执行程序进程的多个工作节点。</li>
</ol>
<p>比如在一个Spark单机集群上运行，只需传入主节点的URL即可：</p>
<blockquote>
<p>MASTER=spark://IP:PORT ./bin/run-example org.apache.spark.examples.SparkPi<br>其中的IP和PORT分别是主节点IP地址和端口号。这是告诉Spark让示例程序运行在主节点所对应的集群上</p>
</blockquote>
<p>(？ 貌似和单机效果一样)</p>
<h2 id="3-Spark编程模型"><a href="#3-Spark编程模型" class="headerlink" title="3. Spark编程模型"></a>3. Spark编程模型</h2><h3 id="3-1-SparkContext类"><a href="#3-1-SparkContext类" class="headerlink" title="3.1 SparkContext类"></a>3.1 SparkContext类</h3><p><strong>SparkContext类与SparkConf类</strong></p>
<p>任何Spark程序的编写都是从SparkContext开始的。SparkContext的初始化需要一个SparkConf对象，后者包含了Spark集群配置的各种参数（比如主节点的URL）。</p>
<p>初始化后，我们便可用SparkContext对象所包含的各种方法来创建和操作RDD。Spark shell（在Scala和Python下可以，但不支持Java）能自动完成上述初始化。若要用Scala代码来实现的话，可参照下面的代码：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setAppName(<span class="string">"Test Spark App"</span>).setMaster(<span class="string">"local[4]"</span>)</span><br><span class="line"><span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</span><br></pre></td></tr></table></figure>
<p>这段代码会创建一个4线程的SparkContext对象，并将其相应的任务命名为Test Spark APP。我们也可通过如下方式调用SparkContext的简单构造函数</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(<span class="string">"local[4]"</span>, <span class="string">"Test Spark App"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3-2-Spark-shell"><a href="#3-2-Spark-shell" class="headerlink" title="3.2 Spark shell"></a>3.2 Spark shell</h3><p>Spark支持 用 Scala or Python REPL（Read-Eval-Print-Loop，即交互式shell）来进行交互式的程序编写。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">./bin/spark-shell</span><br></pre></td></tr></table></figure>
<p>会启动Scala shell 并初始化一个SparkContext对象。我们可以通过 sc这个Scala值来调用这个对象</p>
<h3 id="3-3-RDD"><a href="#3-3-RDD" class="headerlink" title="3.3 RDD"></a>3.3 RDD</h3><p>一个 RDD 代表一系列的“记录”（严格来说，某种类型的对象）。<br>这些记录被分配或分区到一个集群的多个节点上（在本地模式下，可以类似地理解为单个进程里的多个线程上）。</p>
<p>Spark中的RDD具备容错性，即当某个节点或任务失败时（因非用户代码原因而引起，如硬件故障、网络不通等），RDD会在余下的节点上自动重建，以便任务能最终完成。</p>
<p><strong>1. 创建RDD</strong></p>
<p>RDD可从现有的集合创建 ：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> collection = <span class="type">List</span>(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>)</span><br><span class="line"><span class="keyword">val</span> rddFromCollection = sc.parallelize(collection)</span><br></pre></td></tr></table></figure>
<p>RDD也可以基于Hadoop的输入源创建，比如本地文件系统、HDFS。基于Hadoop的RDD可以使用任何实现了Hadoop InputFormat接口的输入格式，包括文本文件、其他Hadoop标准格式、HBase等。以下举例说明如何用一个本地文件系统里的文件创建RDD：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">val rddFromTextFile = sc.textFile(&quot;LICENSE&quot;)</span><br></pre></td></tr></table></figure>
<p>上述代码中的textFile函数（方法）会返回一个RDD对象。该对象的每一条记录都是一个表示文本文件中某一行文字的String（字符串）对象。</p>
<p><strong>2. Spark操作</strong></p>
<p>在Spark编程模式下，所有的操作被分为 <code>transformation</code> 和 <code>action</code> 两种。</p>
<p><strong>transformation</strong> 操作是对一个数据集里的所有记录执行某种函数，从而使记录发生改变；</p>
<p><strong>action</strong> 通常是运行某些计算或聚合操作，并将结果返回运行 SparkContext 的那个驱动程序。</p>
<p>Spark 的操作通常采用<code>函数式</code>风格。</p>
<p>Spark程序中最常用的转换操作便是map操作。该操作对一个RDD里的每一条记录都执行某个函数，从而将输入映射成为新的输出。</p>
<p>比如，下面这段代码便对一个从本地文本文件创建的RDD进行操作。它对该RDD中的每一条记录都执行size函数。<br>创建一个这样的由若干String构成的RDD对象。通过map函数，我们将每一个字符串都转换为一个整数，从而返回一个由若干Int构成的RDD对象。</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; rddFromTextFile.count</span><br><span class="line">res2: <span class="type">Long</span> = <span class="number">294</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> intsFromStringsRDD = rddFromTextFile.map(line =&gt; line.size)</span><br><span class="line">intsFromStringsRDD: org.apache.spark.rdd.<span class="type">RDD</span>[<span class="type">Int</span>] = <span class="type">MapPartitionsRDD</span>[<span class="number">3</span>] at map at &lt;console&gt;:<span class="number">23</span></span><br><span class="line"></span><br><span class="line">scala&gt; intsFromStringsRDD.count</span><br><span class="line">res3: <span class="type">Long</span> = <span class="number">294</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> sumOfRecords = intsFromStringsRDD.sum</span><br><span class="line">sumOfRecords: <span class="type">Double</span> = <span class="number">17062.0</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> numRecords = intsFromStringsRDD.count</span><br><span class="line">numRecords: <span class="type">Long</span> = <span class="number">294</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> aveLengthOfRecord = sumOfRecords / numRecords</span><br><span class="line">aveLengthOfRecord: <span class="type">Double</span> = <span class="number">58.034013605442176</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> aveLengthOfRecordChained = rddFromTextFile.map(line =&gt; line.size).sum / rddFromTextFile.count</span><br></pre></td></tr></table></figure>
<blockquote>
<p>示例中 <strong>=&gt;</strong> 是Scala下表示匿名函数的语法。语法 <strong>line =&gt; line.size</strong> 表示以 <strong>=&gt;</strong> 操作符左边的部分作为输入，对其执行一个函数，并以 <strong>=&gt;</strong> 操作符右边代码的执行结果为输出。在这个例子中，输入为line，输出则是 <strong>line.size</strong> 函数的执行结果。在Scala语言中，这种将一个String对象映射为一个Int的函数被表示为String =&gt; Int。</p>
</blockquote>
<p>Spark的大多数操作都会返回一个新RDD，但多数的Action操作则是返回计算的结果</p>
<blockquote>
<p>注 : Spark 中的转换操作是延后的。也就是说，在RDD上调用一个转换操作并不会立即触发相应的计算。 只有必要时才计算结果并将其返回给驱动程序，从而提高了Spark的效率。</p>
</blockquote>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> transformedRDD = rddFromTextFile.map(line =&gt; line.size).</span><br><span class="line">     | filter(size =&gt; size &gt; <span class="number">10</span>).map(size =&gt; size * <span class="number">2</span>)</span><br><span class="line">transformedRDD: org.apache.spark.rdd.<span class="type">RDD</span>[<span class="type">Int</span>] = <span class="type">MapPartitionsRDD</span>[<span class="number">7</span>] at map at &lt;console&gt;:<span class="number">24</span></span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure>
<p>没有触发任何计算，也没有结果被返回。<br>如果我们现在在新的RDD上调用一个执行操作，比如sum，该计算将会被触发：</p>
<p><strong><em>触发计算</em></strong></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> computation = transformedRDD.sum</span><br><span class="line">computation: <span class="type">Double</span> = <span class="number">34106.0</span></span><br></pre></td></tr></table></figure>
<p><strong>3. RDD缓存策略</strong></p>
<p>Spark最为强大的功能之一便是能够把数据缓存在集群的内存里。这通过调用RDD的cache函数来实现：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; rddFromTextFile.cache</span><br><span class="line">res4: rddFromTextFile.<span class="keyword">type</span> = <span class="type">MapPartitionsRDD</span>[<span class="number">2</span>] at textFile at &lt;console&gt;:<span class="number">21</span></span><br><span class="line"></span><br><span class="line">scala&gt; <span class="keyword">val</span> aveLengthOfRecordChainedFromCached = rddFromTextFile.map(line =&gt; line.size).sum / rddFromTextFile.count</span><br><span class="line">aveLengthOfRecordChainedFromCached: <span class="type">Double</span> = <span class="number">58.034013605442176</span></span><br></pre></td></tr></table></figure>
<p>在RDD首次调用一个执行操作时，这个操作对应的计算会立即执行，数据会从数据源里读出并保存到内存。因此，首次调用cache函数所需要的时间会部分取决于Spark从输入源读取数据所需要的时间。但是，当下一次访问该数据集的时候，数据可以直接从内存中读出从而减少低效的I/O操作，加快计算。多数情况下，这会取得数倍的速度提升。</p>
<blockquote>
<p>Spark支持更为细化的缓存策略。通过persist函数可以指定Spark的数据缓存策略。关于RDD缓存的更多信息可参见：<a href="http://spark.apache.org/docs/latest/programming-guide.html#rdd-persistence。" target="_blank" rel="external">http://spark.apache.org/docs/latest/programming-guide.html#rdd-persistence。</a></p>
</blockquote>
<h3 id="3-4-广播变量和累加器"><a href="#3-4-广播变量和累加器" class="headerlink" title="3.4 广播变量和累加器"></a>3.4 广播变量和累加器</h3><p>Spark的另一个核心功能是能创建两种特殊类型的变量：<strong>广播变量</strong> 和 累加器。</p>
<p>广播变量（broadcast variable）为只读变量，它由运行SparkContext的驱动程序创建后发送给会参与计算的节点。对那些需要让各工作节点高效地访问相同数据的应用场景，比如机器学习，这非常有用。</p>
<p>Spark下创建广播变量只需在SparkContext上调用一个方法即可：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scala&gt; val broadcastAList = sc.broadcast(List(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;))</span><br><span class="line">broadcastAList: org.apache.spark.broadcast.Broadcast[List[String]] = Broadcast(11)</span><br><span class="line"></span><br><span class="line">scala&gt;</span><br></pre></td></tr></table></figure>
<p><strong>广播变量</strong> 也可以被非驱动程序所在的节点（即工作节点）访问，访问的方法是调用该变量的<code>value</code>方法：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">scala&gt; <span class="keyword">val</span> broadcastAList = sc.broadcast(<span class="type">List</span>(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>))</span><br><span class="line">broadcastAList: org.apache.spark.broadcast.<span class="type">Broadcast</span>[<span class="type">List</span>[<span class="type">String</span>]] = <span class="type">Broadcast</span>(<span class="number">11</span>)</span><br><span class="line"></span><br><span class="line">scala&gt; sc.parallelize(<span class="type">List</span>(<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>)).map(x =&gt; broadcastAList.value ++ x).collect</span><br><span class="line">res5: <span class="type">Array</span>[<span class="type">List</span>[<span class="type">Any</span>]] = <span class="type">Array</span>(<span class="type">List</span>(a, b, c, d, e, <span class="number">1</span>), <span class="type">List</span>(a, b, c, d, e, <span class="number">2</span>), <span class="type">List</span>(a, b, c, d, e, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意，collect 函数一般仅在的确需要将整个结果集返回驱动程序并进行后续处理时才有必要调用。如果在一个非常大的数据集上调用该函数，可能耗尽驱动程序的可用内存，进而导致程序崩溃。</p>
</blockquote>
<p>高负荷的处理应尽可能地在整个集群上进行，从而避免驱动程序成为系统瓶颈。然而在不少情况下，将结果收集到驱动程序的确是有必要的。很多机器学习算法的迭代过程便属于这类情况。</p>
<p><strong>累加器</strong>（accumulator）也是一种被广播到工作节点的变量。累加器与广播变量的关键不同，是后者只能读取而前者却可累加。</p>
<blockquote>
<p>关于累加器的更多信息，可参见《Spark编程指南》：<a href="http://spark.apache.org/docs/latest/programming-guide.html#shared-variables。" target="_blank" rel="external">http://spark.apache.org/docs/latest/programming-guide.html#shared-variables。</a></p>
</blockquote>
<h2 id="4-Spark-Scala-编程入门"><a href="#4-Spark-Scala-编程入门" class="headerlink" title="4. Spark Scala 编程入门"></a>4. Spark Scala 编程入门</h2><p><a href="https://github.com/blair1/spark/tree/master/Spark-Machine-Learning_8519OSCode/Chapter%2001/scala-spark-app" target="_blank" rel="external">scala-spark-app</a></p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span>._</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * A simple Spark app in Scala</span><br><span class="line"> */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">ScalaApp</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(<span class="string">"local[2]"</span>, <span class="string">"First Spark App"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// we take the raw data in CSV format and convert it into a set of records of the form (user, product, price)</span></span><br><span class="line">    <span class="keyword">val</span> data = sc.textFile(<span class="string">"data/UserPurchaseHistory.csv"</span>)</span><br><span class="line">      .map(line =&gt; line.split(<span class="string">","</span>))</span><br><span class="line">      .map(purchaseRecord =&gt; (purchaseRecord(<span class="number">0</span>), purchaseRecord(<span class="number">1</span>), purchaseRecord(<span class="number">2</span>)))</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let's count the number of purchases</span></span><br><span class="line">    <span class="keyword">val</span> numPurchases = data.count()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let's count how many unique users made purchases</span></span><br><span class="line">    <span class="keyword">val</span> uniqueUsers = data.map &#123; <span class="keyword">case</span> (user, product, price) =&gt; user &#125;.distinct().count()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let's sum up our total revenue</span></span><br><span class="line">    <span class="keyword">val</span> totalRevenue = data.map &#123; <span class="keyword">case</span> (user, product, price) =&gt; price.toDouble &#125;.sum()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let's find our most popular product</span></span><br><span class="line">    <span class="keyword">val</span> productsByPopularity = data</span><br><span class="line">      .map &#123; <span class="keyword">case</span> (user, product, price) =&gt; (product, <span class="number">1</span>) &#125;</span><br><span class="line">      .reduceByKey(_ + _)</span><br><span class="line">      .collect()</span><br><span class="line">      .sortBy(-_._2)</span><br><span class="line">    <span class="keyword">val</span> mostPopular = productsByPopularity(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// finally, print everything out</span></span><br><span class="line">    println(<span class="string">"Total purchases: "</span> + numPurchases)</span><br><span class="line">    println(<span class="string">"Unique users: "</span> + uniqueUsers)</span><br><span class="line">    println(<span class="string">"Total revenue: "</span> + totalRevenue)</span><br><span class="line">    println(<span class="string">"Most popular product: %s with %d purchases"</span>.format(mostPopular._1, mostPopular._2))</span><br><span class="line"></span><br><span class="line">    sc.stop()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-Spark-Java-编程入门"><a href="#5-Spark-Java-编程入门" class="headerlink" title="5. Spark Java 编程入门"></a>5. Spark Java 编程入门</h2><p>Java API与Scala API本质上很相似。Scala代码可以很方便地调用Java代码，但某些Scala代码却无法在Java里调用，特别是那些使用了隐式类型转换、默认参数和采用了某些Scala反射机制的代码。</p>
<p>SparkContext有了对应的Java版本JavaSparkContext，而RDD则对应JavaRDD。<br>Spark提供对Java 8匿名函数（lambda）语法的支持。</p>
<p>用Scala编写时，键/值对记录的RDD能支持一些特别的操作（比如reduceByKey和saveAsSequenceFile）。这些操作可以通过隐式类型转换而自动被调用。用Java编写时，则需要特别类型的JavaRDD来支持这些操作。它们包括用于键/值对的JavaPairRDD，以及用于数值记录的JavaDoubleRDD。</p>
<p>Java 8 RDD以及Java 8 lambda表达式更多信息可参见《Spark编程指南》：<a href="http://spark.apache.org/docs/latest/programming-guide.html#rdd-operations。" target="_blank" rel="external">http://spark.apache.org/docs/latest/programming-guide.html#rdd-operations。</a></p>
<h2 id="6-Spark-Python-编程入门"><a href="#6-Spark-Python-编程入门" class="headerlink" title="6. Spark Python 编程入门"></a>6. Spark Python 编程入门</h2><figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="string">"""用Python编写的一个简单Spark应用"""</span></span><br><span class="line"><span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkContext</span><br><span class="line"></span><br><span class="line">sc = SparkContext(<span class="string">"local[2]"</span>, <span class="string">"First Spark App"</span>)</span><br><span class="line"><span class="comment"># 将CSV格式的原始数据转化为(user,product,price)格式的记录集</span></span><br><span class="line">data = sc.textFile(<span class="string">"data/UserPurchaseHistory.csv"</span>).map(<span class="keyword">lambda</span> line:</span><br><span class="line">line.split(<span class="string">","</span>)).map(<span class="keyword">lambda</span> record: (record[<span class="number">0</span>], record[<span class="number">1</span>], record[<span class="number">2</span>]))</span><br><span class="line"><span class="comment"># 求总购买次数</span></span><br><span class="line">numPurchases = data.count()</span><br><span class="line"><span class="comment"># 求有多少不同客户购买过商品</span></span><br><span class="line">uniqueUsers = data.map(<span class="keyword">lambda</span> record: record[<span class="number">0</span>]).distinct().count()</span><br><span class="line"><span class="comment"># 求和得出总收入</span></span><br><span class="line">totalRevenue = data.map(<span class="keyword">lambda</span> record: float(record[<span class="number">2</span>])).sum()</span><br><span class="line"><span class="comment"># 求最畅销的产品是什么</span></span><br><span class="line">products = data.map(<span class="keyword">lambda</span> record: (record[<span class="number">1</span>], <span class="number">1.0</span>)).</span><br><span class="line">reduceByKey(<span class="keyword">lambda</span> a, b: a + b).collect()</span><br><span class="line">mostPopular = sorted(products, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse=<span class="keyword">True</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Total purchases: %d"</span> % numPurchases</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Unique users: %d"</span> % uniqueUsers</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Total revenue: %2.2f"</span> % totalRevenue</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Most popular product: %s with %d purchases"</span> % (mostPopular[<span class="number">0</span>], mostPopular[<span class="number">1</span>])</span><br></pre></td></tr></table></figure>
<p>匿名函数在Python语言中亦称lambda函数，lambda也是语法表达上的关键字。</p>
<p>用Scala编写时，一个将输入x映射为输出y的匿名函数表示为x =&gt; y，而在Python中则是lambda x : y。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">➜  python-spark-app git:(master) ✗ <span class="built_in">pwd</span></span><br><span class="line">/Users/hp/ghome/hadoop-spark/spark/Spark-Machine-Learning_8519OSCode/Chapter01/python-spark-app</span><br><span class="line">➜  python-spark-app git:(master) ✗ <span class="variable">$SPARK_HOME</span>/bin/spark-submit pythonapp.py</span><br><span class="line">Using Spark<span class="string">'s default log4j profile: org/apache/spark/log4j-defaults.properties</span><br><span class="line">16/08/26 15:56:02 INFO SparkContext: Running Spark version 1.5.2</span><br><span class="line">...</span><br><span class="line">Total purchases: 5</span><br><span class="line">Unique users: 4</span><br><span class="line">Total revenue: 39.91</span><br><span class="line">Most popular product: iPhone Cover with 2 purchases</span><br><span class="line">16/08/26 15:56:07 INFO SparkUI: Stopped Spark web UI at http://192.168.143.84:4040</span><br><span class="line">...</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Spark的Python API几乎覆盖了所有Scala API所能提供的功能. 但的确有些特性，比如Spark Streaming和个别的API方法，暂不支持。<br><a href="http://spark.apache.org/docs/latest/programming-guide.html" target="_blank" rel="external">具体参见《Spark编程指南》的Python部分</a></p>
</blockquote>
<h2 id="7-小结"><a href="#7-小结" class="headerlink" title="7. 小结"></a>7. 小结</h2><p>体会了 函数式 编程的威力， scala、python 都可以。java 不适合写 spark 程序</p>

      
    </div>
    -->
    <!--
    
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/9/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/11/">Next &raquo;</a>
      </nav>
    

</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Libin Chan&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/blairchan">blairos</a>
    </div>
  </div>
</footer>

    
<script type="text/javascript"> <!-- add by blair 0724 type=text/javascript -->
  var disqus_shortname = 'blairos-sn';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
