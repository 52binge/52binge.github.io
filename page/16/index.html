<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Everyone should not forget his dream">
<meta property="og:type" content="website">
<meta property="og:title" content="Home">
<meta property="og:url" content="http://iequa.com/page/16/index.html">
<meta property="og:site_name" content="Home">
<meta property="og:description" content="Everyone should not forget his dream">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Home">
<meta name="twitter:description" content="Everyone should not forget his dream">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <!-- blair add baidu tongji start... @2017.10.03 -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8864dc75a81a27b7e44c00138af95d66";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<!-- blair add baidu tongji end ! @2017.10.03 -->

<header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/chatbot">Bot</a>
        
          <a class="main-nav-link" href="/tensorflow">TF</a>
        
          <a class="main-nav-link" href="/deeplearning">Deep Learning</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://iequa.com"></form>
        </div>
      </nav>
    </div>
  </div>
</header>

    <br>
    <section id="main" class="outer">
      <article id="post-java-springMVC-mybatis-demo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/09/11/java-springMVC-mybatis-demo/"><strong>SpringMVC Demo</strong></a>
      <small class=article-date-index>&nbsp; 2016-09-11</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/09/11/java-springMVC-mybatis-demo/" class="article-date">
  <time datetime="2016-09-10T23:54:16.000Z" itemprop="datePublished">2016-09-11</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/java/">java</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/09/11/java-springMVC-mybatis-demo/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>写一个入门整洁的编写 java 后端程序的代码架, 主要使用了 java + springMvc + mybatis + logback + spring task 等技术.</p>
<p><a href="https://github.com/blair101/language/tree/master/java/springMVC_demo">blair’s github springMvc_demo</a></p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2016/09/11/java-springMVC-mybatis-demo/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-spark-machine-learning-p3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/09/09/spark-machine-learning-p3/"><strong>Spark Machine Learning p3 - 数据的获取、处理与准备</strong></a>
      <small class=article-date-index>&nbsp; 2016-09-09</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/09/09/spark-machine-learning-p3/" class="article-date">
  <time datetime="2016-09-09T08:07:21.000Z" itemprop="datePublished">2016-09-09</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/spark/">spark</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/09/09/spark-machine-learning-p3/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>《Spark Machine Learing》 Reading Notes</p>
</blockquote>
<p>MovieStream 包括网站提供的电影数据、用户的服务信息数据以及行为数据。</p>
<p>这些数据涉及电影和相关内容（比如标题、分类、图片、演员和导演）、用户信息（比如用户属性、位置和其他信息）以及用户活动数据（比如浏览数、预览的标题和次数、评级、评论，以及如赞、分享之类的社交数据，还有包括像Facebook和Twitter之类的社交网络属性）。</p>
<p>其外部数据来源则可能包括天气和地理定位信息，以及如IMDB和Rotten Tomators之类的第三方电影评级与评论信息等。</p>
<p>一个预测精准的好模型有着极高的商业价值（Netflix Prize 和 <strong>Kaggle</strong> 上机器学习比赛的成功就是很好的见证）</p>
<p><strong>focus on</strong></p>
<ul>
<li>数据的处理、清理、探索和可视化方法；</li>
<li>原始数据转换为可用于机器学习算法特征的各种技术；</li>
<li>学习如何使用外部库或Spark内置函数来正则化输入特征.</li>
</ul>
<h2 id="1-获取公开数据集"><a href="#1-获取公开数据集" class="headerlink" title="1. 获取公开数据集"></a>1. 获取公开数据集</h2><p><strong>UCL机器学习知识库</strong></p>
<blockquote>
<p>包括近300个不同大小和类型的数据集，可用于分类、回归、聚类和推荐系统任务。数据集列表位于：<a href="http://archive.ics.uci.edu/ml/。" target="_blank" rel="external">http://archive.ics.uci.edu/ml/。</a></p>
</blockquote>
<p><strong>Amazon AWS公开数据集</strong></p>
<blockquote>
<p>包含的通常是大型数据集，可通过Amazon S3访问。这些数据集包括人类基因组项目、Common Crawl网页语料库、维基百科数据和Google Books Ngrams。<br>相关信息可参见：<a href="http://aws.amazon.com/publicdatasets/。" target="_blank" rel="external">http://aws.amazon.com/publicdatasets/。</a></p>
</blockquote>
<p><strong>Kaggle</strong></p>
<blockquote>
<p>这里集合了Kaggle举行的各种机器学习竞赛所用的数据集。<br>它们覆盖分类、回归、排名、推荐系统以及图像分析领域，可从Competitions区域下载：<a href="http://www.kaggle.com/competitions。" target="_blank" rel="external">http://www.kaggle.com/competitions。</a></p>
</blockquote>
<p><strong>KDnuggets</strong></p>
<blockquote>
<p>这里包含一个详细的公开数据集列表，其中一些上面提到过的。<br>该列表位于：<a href="http://www.kdnuggets.com/datasets/index.html。" target="_blank" rel="external">http://www.kdnuggets.com/datasets/index.html。</a></p>
</blockquote>
<p><strong>MovieLens 100k数据集</strong></p>
<p>MovieLens 100k数据集包含表示多个用户对多部电影的10万次评级数据，也包含电影元数据和用户属性信息</p>
<p><a href="http://files.grouplens.org/datasets/movielens/ml-100k.zip" target="_blank" rel="external">http://files.grouplens.org/datasets/movielens/ml-100k.zip</a></p>
<p>ml-100k/  u.user（用户属性文件）、u.item（电影元数据）和u.data（用户对电影的评级）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;unzip ml-100k.zip</span><br><span class="line">  inflating: ml-100k/allbut.pl</span><br><span class="line">  inflating: ml-100k/mku.sh</span><br><span class="line">  inflating: ml-100k/README</span><br><span class="line">  ...</span><br><span class="line">  inflating: ml-100k/ub.base</span><br><span class="line">  inflating: ml-100k/ub.test</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>u.user</strong></p>
<p>user.id、age、gender、occupation、ZIP code</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;head -5 u.user</span><br><span class="line">  1|24|M|technician|85711</span><br><span class="line">  2|53|F|other|94043</span><br><span class="line">  3|23|M|writer|32067</span><br><span class="line">  4|24|M|technician|43537</span><br><span class="line">  5|33|F|other|15213</span><br></pre></td></tr></table></figure>
<p><strong>u.item</strong></p>
<p>movie id、title、release date以及若干与IMDB link和电影分类相关的属性</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;head -5 u.item</span><br><span class="line">  1|Toy Story (1995)|01-Jan-1995||http://us.imdb.com/M/title-exact?Toy%20 Story%20(1995)|0|0|0|1|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0</span><br><span class="line">  2|GoldenEye (1995)|01-Jan-1995||http://us.imdb.com/M/title- exact?GoldenEye%20(1995)|0|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0|1|0|0</span><br><span class="line">  3|Four Rooms (1995)|01-Jan-1995||http://us.imdb.com/M/title- exact?Four%20Rooms%20(1995)|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|1|0|0</span><br><span class="line">  4|Get Shorty (1995)|01-Jan-1995||http://us.imdb.com/M/title- exact?Get%20Shorty%20(1995)|0|1|0|0|0|1|0|0|1|0|0|0|0|0|0|0|0|0|0</span><br><span class="line">  5|Copycat (1995)|01-Jan-1995||http://us.imdb.com/M/title- exact?Copycat%20(1995)|0|0|0|0|0|0|1|0|1|0|0|0|0|0|0|0|1|0|0</span><br></pre></td></tr></table></figure>
<p><strong>u.data</strong></p>
<p>user id、movie id、rating（从1到5）和timestamp属性，各属性间用制表符（\t）分隔</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;head -5 u.data</span><br><span class="line">196    242    3    881250949</span><br><span class="line">186    302    3    891717742</span><br><span class="line">22     377    1    878887116</span><br><span class="line">244    51     2    880606923</span><br><span class="line">166    346    1    886397596</span><br></pre></td></tr></table></figure>
<h2 id="2-探索与可视化数据"><a href="#2-探索与可视化数据" class="headerlink" title="2. 探索与可视化数据"></a>2. 探索与可视化数据</h2><p>IPython的安装方法可参考如下指引：<a href="http://ipython.org/install.html。" target="_blank" rel="external">http://ipython.org/install.html。</a></p>
<p>如果这是你第一次使用IPython，这里有一个教程：<a href="http://ipython.org/ipython-doc/stable/interactive/tutorial.html。" target="_blank" rel="external">http://ipython.org/ipython-doc/stable/interactive/tutorial.html。</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt;IPYTHON=1 IPYTHON_OPTS=&quot;--pylab&quot; ./bin/pyspark</span><br></pre></td></tr></table></figure>
<blockquote>
<p>终端里的IPython 2.3.1 – An enhanced Interactive Python和Using matplotlib backend: MacOSX输出行表示IPython和pylab均已被PySpark启用。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Welcome to</span><br><span class="line">      ____              __</span><br><span class="line">     / __/__  ___ _____/ /__</span><br><span class="line">    _\ \/ _ \/ _ `/ __/  &apos;_/</span><br><span class="line">   /__ / .__/\_,_/_/ /_/\_\   version 1.5.2</span><br><span class="line">      /_/</span><br><span class="line"></span><br><span class="line">Using Python version 2.7.10 (default, Jul 14 2015 19:46:27)</span><br><span class="line">SparkContext available as sc, HiveContext available as sqlContext.</span><br><span class="line"></span><br><span class="line">In [1]:</span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以将样本代码输入到IPython终端，也可通过IPython提供的Notebook 应用来完成。Notebook支持HTML显示，且在IPython终端的基础上提供了一些增强功能，如即时绘图、HTML标记，以及独立运行代码片段的功能。</p>
<p>IPython Notebook 使用指南：<a href="http://ipython.org/ipython-doc/stable/interactive/notebook.html" target="_blank" rel="external">http://ipython.org/ipython-doc/stable/interactive/notebook.html</a></p>
</blockquote>
<h3 id="2-1-探索用户数据"><a href="#2-1-探索用户数据" class="headerlink" title="2.1 探索用户数据"></a>2.1 探索用户数据</h3><figure class="highlight plain"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line">user_data = sc.textFile(&quot;/Users/hp/ghome/ml/ml-100k/u.user&quot;)</span><br><span class="line">user_data.first()</span><br><span class="line">user_data.take(5)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line">user_fields = user_data.map(lambda line: line.split(&quot;|&quot;))</span><br><span class="line">num_users = user_fields.map(lambda fields: fields[0]).count()</span><br><span class="line">num_genders = user_fields.map(lambda fields: fields[2]).distinct().count()</span><br><span class="line">num_occupations = user_fields.map(lambda fields: fields[3]).distinct().count()</span><br><span class="line">num_zipcodes = user_fields.map(lambda fields: fields[4]).distinct().count()</span><br><span class="line">print &quot;Users: %d, genders: %d, occupations: %d, ZIP codes: %d&quot; % (num_users, num_genders, num_occupations, num_zipcodes)</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Users: 943, genders: 2, occupations: 21, ZIP codes: 795</span><br></pre></td></tr></table></figure>
<p>matplotlib的hist个直方图，以分析用户年龄的分布情况：</p>
<p><strong>age distribution</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ages = user_fields.map(lambda x: int(x[1])).collect()</span><br><span class="line">hist(ages, bins=20, color=&apos;lightblue&apos;, normed=True)</span><br><span class="line">fig = matplotlib.pyplot.gcf()</span><br><span class="line">fig.set_size_inches(16, 10)</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-3.1.png" alt="screenshow?key=15055650f47cff956148"></p>
<p><strong>occupation distribution</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">count_by_occupation = user_fields.map(lambda fields: (fields[3], 1)).reduceByKey(lambda x, y: x + y).collect()</span><br><span class="line"></span><br><span class="line">x_axis1 = np.array([c[0] for c in count_by_occupation])</span><br><span class="line"></span><br><span class="line">y_axis1 = np.array([c[1] for c in count_by_occupation])</span><br><span class="line"></span><br><span class="line">print x_axis1</span><br><span class="line">[u&apos;administrator&apos; u&apos;retired&apos; u&apos;lawyer&apos; u&apos;none&apos; u&apos;student&apos; u&apos;technician&apos;</span><br><span class="line"> u&apos;programmer&apos; u&apos;salesman&apos; u&apos;homemaker&apos; u&apos;writer&apos; u&apos;doctor&apos;</span><br><span class="line"> u&apos;entertainment&apos; u&apos;marketing&apos; u&apos;executive&apos; u&apos;scientist&apos; u&apos;educator&apos;</span><br><span class="line"> u&apos;healthcare&apos; u&apos;librarian&apos; u&apos;artist&apos; u&apos;other&apos; u&apos;engineer&apos;]</span><br><span class="line"></span><br><span class="line">print y_axis1</span><br><span class="line">[ 79  14  12   9 196  27  66  12   7  45   7  18  26  32  31  95  16  51</span><br><span class="line">  28 105  67]</span><br></pre></td></tr></table></figure>
<p>plt.xticks(rotation=30)之类的代码 是 美化条形图</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pos = np.arange(len(x_axis))</span><br><span class="line">width = 1.0</span><br><span class="line"></span><br><span class="line">ax = plt.axes()</span><br><span class="line">ax.set_xticks(pos + (width / 2))</span><br><span class="line">ax.set_xticklabels(x_axis)</span><br><span class="line"></span><br><span class="line">plt.bar(pos, y_axis, width, color=&apos;lightblue&apos;)</span><br><span class="line">plt.xticks(rotation=30)</span><br><span class="line">fig = matplotlib.pyplot.gcf()</span><br><span class="line">fig.set_size_inches(16, 10)</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-3.2.png" alt="screenshow?key=15057f015ac5712d9a83"></p>
<p>Spark对RDD提供了一个名为countByValue的便捷函数</p>
<figure class="highlight plain"><figcaption><span>python</span></figcaption><table><tr><td class="code"><pre><span class="line">count_by_occupation2 = user_fields.map(lambda fields: fields[3]).countByValue()</span><br><span class="line">print &quot;Map-reduce approach:&quot;</span><br><span class="line">print dict(count_by_occupation2)</span><br><span class="line">print &quot;&quot;</span><br><span class="line">print &quot;countByValue approach:&quot;</span><br><span class="line">print dict(count_by_occupation)</span><br></pre></td></tr></table></figure>
<h3 id="2-2-探索电影数据"><a href="#2-2-探索电影数据" class="headerlink" title="2.2 探索电影数据"></a>2.2 探索电影数据</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">movie_data = sc.textFile(&quot;/PATH/ml-100k/u.item&quot;)</span><br><span class="line">print movie_data.first()</span><br><span class="line">num_movies = movie_data.count()</span><br><span class="line">print &quot;Movies: %d&quot; % num_movies</span><br></pre></td></tr></table></figure>
<p>1|Toy Story (1995)|01-Jan-1995||<a href="http://us.imdb.com/M/title-exact?Toy%20Story%20(1995)|0|0|0|1|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0" target="_blank" rel="external">http://us.imdb.com/M/title-exact?Toy%20Story%20(1995)|0|0|0|1|1|1|0|0|0|0|0|0|0|0|0|0|0|0|0</a><br>Movies: 1682</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">def convert_year(x):</span><br><span class="line">  try:</span><br><span class="line">    return int(x[-4:])</span><br><span class="line">  except:</span><br><span class="line">    return 1900</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">movie_fields = movie_data.map(lambda lines: lines.split(&quot;|&quot;))</span><br><span class="line">years = movie_fields.map(lambda fields: fields[2]).map(lambda x: convert_year(x))</span><br><span class="line"></span><br><span class="line">years_filtered = years.filter(lambda x: x != 1900)</span><br><span class="line"></span><br><span class="line">movie_ages = years_filtered.map(lambda yr: 1998-yr).countByValue()</span><br><span class="line">values = movie_ages.values()</span><br><span class="line">bins = movie_ages.keys()</span><br><span class="line">hist(values, bins=bins, color=&apos;lightblue&apos;, normed=True)</span><br><span class="line">fig = matplotlib.pyplot.gcf()</span><br><span class="line">fig.set_size_inches(16,10)</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-3.3.png" alt="screenshow?key=150556f33e22a36bb651"></p>
<h3 id="2-3-探索评级数据"><a href="#2-3-探索评级数据" class="headerlink" title="2.3 探索评级数据"></a>2.3 探索评级数据</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rating_data = sc.textFile(&quot;/Users/hp/ghome/ml/ml-100k/u.data&quot;)</span><br><span class="line">print rating_data.first()</span><br><span class="line">num_ratings = rating_data.count()</span><br><span class="line">print &quot;Ratings: %d&quot; % num_ratings</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">rating_data = rating_data.map(lambda line: line.split(&quot;\t&quot;))</span><br><span class="line">ratings = rating_data.map(lambda fields: int(fields[2]))</span><br><span class="line">max_rating = ratings.reduce(lambda x, y: max(x, y))</span><br><span class="line">min_rating = ratings.reduce(lambda x, y: min(x, y))</span><br><span class="line">mean_rating = ratings.reduce(lambda x, y: x + y) / num_ratings</span><br><span class="line">median_rating = np.median(ratings.collect())</span><br><span class="line">ratings_per_user = num_ratings / num_users</span><br><span class="line">ratings_per_movie = num_ratings / num_movies</span><br><span class="line">print &quot;Min rating: %d&quot; % min_rating</span><br><span class="line">print &quot;Max rating: %d&quot; % max_rating</span><br><span class="line">print &quot;Average rating: %2.2f&quot; % mean_rating</span><br><span class="line">print &quot;Median rating: %d&quot; % median_rating</span><br><span class="line">print &quot;Average # of ratings per user: %2.2f&quot; % ratings_per_user</span><br><span class="line">print &quot;Average # of ratings per movie: %2.2f&quot; % ratings_per_movie</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Max rating: 5<br>Average rating: 3.00<br>Median rating: 4<br>Average # of ratings per user: 106.00<br>Average # of ratings per movie: 59.00</p>
</blockquote>
<p>Spark对RDD也提供一个名为states的函数。该函数包含一个数值变量用于做类似的统计：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ratings.stats()</span><br><span class="line"></span><br><span class="line">其输出为：</span><br><span class="line">(count: 100000, mean: 3.52986, stdev: 1.12566797076, max: 5.0, min: 1.0)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">count_by_rating = ratings.countByValue()</span><br><span class="line">x_axis = np.array(count_by_rating.keys())</span><br><span class="line">y_axis = np.array([float(c) for c in count_by_rating.values()])</span><br><span class="line"># 这里对y轴正则化，使它表示百分比</span><br><span class="line">y_axis_normed = y_axis / y_axis.sum()</span><br><span class="line">pos = np.arange(len(x_axis))</span><br><span class="line">width = 1.0</span><br><span class="line"></span><br><span class="line">ax = plt.axes()</span><br><span class="line">ax.set_xticks(pos + (width / 2))</span><br><span class="line">ax.set_xticklabels(x_axis)</span><br><span class="line"></span><br><span class="line">plt.bar(pos, y_axis_normed, width, color=&apos;lightblue&apos;)</span><br><span class="line">plt.xticks(rotation=30)</span><br><span class="line">fig = matplotlib.pyplot.gcf()</span><br><span class="line">fig.set_size_inches(16, 10)</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-3.4.png" alt="screenshow?key=1505422e3494afb95855"></p>
<p><strong>各个用户评级次数的分布情况</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">user_ratings_grouped = rating_data.map(lambda fields: (int(fields[0]), int(fields[2]))).groupByKey()</span><br><span class="line"></span><br><span class="line">user_ratings_byuser = user_ratings_grouped.map(lambda (k, v): (k, len(v)))</span><br><span class="line">user_ratings_byuser.take(10)</span><br><span class="line"></span><br><span class="line">Out[91]:</span><br><span class="line">[(2, 62),</span><br><span class="line"> (4, 24),</span><br><span class="line"> (6, 211),</span><br><span class="line"> (8, 59),</span><br><span class="line"> (10, 184),</span><br><span class="line"> (12, 51),</span><br><span class="line"> (14, 98),</span><br><span class="line"> (16, 140),</span><br><span class="line"> (18, 277),</span><br><span class="line"> (20, 48)]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">user_ratings_byuser_local = user_ratings_byuser.map(lambda (k, v): v).collect()</span><br><span class="line">hist(user_ratings_byuser_local, bins=200, color=&apos;lightblue&apos;, normed=True)</span><br><span class="line">fig = matplotlib.pyplot.gcf()</span><br><span class="line">fig.set_size_inches(16,10)</span><br></pre></td></tr></table></figure>
<p><img src="/images/spark/spark-ml-3.5.png" alt="screenshow?key=15056b5ffb7672cee5d1"></p>
<h2 id="3-处理与转换数据"><a href="#3-处理与转换数据" class="headerlink" title="3. 处理与转换数据"></a>3. 处理与转换数据</h2><p><strong>非规整数据和缺失数据的填充</strong></p>
<h2 id="4-从数据中提取有用特征"><a href="#4-从数据中提取有用特征" class="headerlink" title="4. 从数据中提取有用特征"></a>4. 从数据中提取有用特征</h2><p>在完成对数据的初步探索、处理和清理后，便可从中提取可供机器学习模型训练用的特征。</p>
<p>特征（<code>feature</code>）指那些用于<strong><em>模型训练的变量</em></strong>。每一行数据包含可供提取到训练样本中的各种信息。</p>
<p>几乎所有机器学习模型都是与用向量表示的数值特征打交道；需将原始数据转换为数值。</p>
<p>特征可以概括地分为如下几种。</p>
<ul>
<li>数值特征（numerical feature）：这些特征通常为实数或整数，比如之前例子中提到的年龄。</li>
<li>类别特征（categorical feature）：我们数据集中的用户性别、职业或电影类别便是这类。</li>
<li>文本特征（text feature）：它们派生自数据中的文本内容，比如电影名、描述或是评论。</li>
<li>其他特征：… 地理位置则可由经纬度或地理散列（geohash）表示。</li>
</ul>
<h3 id="4-1-数值特征"><a href="#4-1-数值特征" class="headerlink" title="4.1 数值特征"></a>4.1 数值特征</h3><p>原始的数值和一个数值特征之间的区别是什么？</p>
<p>机器学习模型中所学习的是各个特征所对应的向量的权值。这些权值在<code>特征值</code>到输出或是<code>目标变量</code>（指在监督学习模型中）is very important。</p>
<p>当数值特征仍处于原始形式时，其可用性相对较低，但可以转化为更有用的表示形式。</p>
<p>如 (位置信息 : 原始位置信息（比如用经纬度表示的），信息可用性很低。 然若对位置进行聚合（比如聚焦为一个city or country），和特定输出 之间存在某种关联。</p>
<h3 id="4-2-类别特征"><a href="#4-2-类别特征" class="headerlink" title="4.2 类别特征"></a>4.2 类别特征</h3><p>将类别特征表示为数字形式，常可借助 k 之1（1-of-k）方法进行</p>
<p>比如，可取<code>occupation</code> 所有可能取值：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">all_occupations = user_fields.map(lambda fields: fields[3]). distinct().collect()</span><br><span class="line">all_occupations.sort()</span><br></pre></td></tr></table></figure>
<p>然可依次对各可能的职业分配序号（注意 从0开始编号）：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">idx = <span class="number">0</span></span><br><span class="line">all_occupations_dict = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> o <span class="keyword">in</span> all_occupations:</span><br><span class="line">    all_occupations_dict[o] = idx</span><br><span class="line">    idx +=<span class="number">1</span></span><br><span class="line"><span class="comment"># 看一下“k之1”编码会对新的例子分配什么值</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"Encoding of 'doctor': %d"</span> % all_occupations_dict[<span class="string">'doctor'</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"Encoding of 'programmer': %d"</span> % all_occupations_dict[<span class="string">'programmer'</span>]</span><br></pre></td></tr></table></figure>
<p>其输出如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Encoding of &apos;doctor&apos;: 2</span><br><span class="line">Encoding of &apos;programmer&apos;: 14</span><br></pre></td></tr></table></figure>
<h3 id="4-3-派生特征"><a href="#4-3-派生特征" class="headerlink" title="4.3 派生特征"></a>4.3 派生特征</h3><p>从原始数据派生特征的例子包括计算平均值、中位值、方差、和、差、最大值或最小值以及计数。从电影的发行年份和当前年份派生了新的movie age特征的。这类转换背后的想法常常是对数值数据进行某种概括，并期望它能让模型学习更容易。</p>
<p>数值特征到类别特征的转换也很常见，比如划分为区间特征。进行这类转换的变量常见的有年龄、地理位置和时间。</p>
<p><strong>如 ： 将时间戳转为类别特</strong></p>
<p>电影评级发生的时间</p>
<p>[‘afternoon’, ‘evening’, ‘morning’, ‘morning’, ‘morning’]</p>
<h3 id="4-4-文本特征"><a href="#4-4-文本特征" class="headerlink" title="4.4 文本特征"></a>4.4 文本特征</h3><p>文本特征也是一种类别特征或派生特征</p>
<p>NLP 便是专注于文本内容的处理、表示和建模的一个领域。</p>
<p>介绍一种简单且标准化的文本特征提取方法。该方法被称为词袋（bag-of-word）表示法。</p>
<p>词袋法将一段文本视为由其中的文本或数字组成的集合，其处理过程如下。</p>
<p><strong>bag-of-word</strong></p>
<p><strong>(1) 分词（tokenization）</strong></p>
<p>首先会应用某些分词方法来将文本分隔为一个由词（一般如单词、数字等）组成的集合。</p>
<p><strong>(2) 删除停用词（stop words removal)</strong></p>
<p>删除常见的单词，比如the、and和but（这些词被称作停用词）。</p>
<p><strong>(3) 提取词干（stemming）</strong>：</p>
<p>是指将各个词简化为其基本的形式或者干词。常见的例子如复数变为单数（比如dogs变为dog等）。提取的方法有很多种，文本处理算法库中常常会包括多种词干提取方法。</p>
<p><strong>(4) 向量化（vectorization）</strong> ：</p>
<p>向量来表示处理好的词。二元向量可能是最为简单的表示方式。它用1和0来分别表示是否存在某个词。从根本上说，这与之前提到的 k 之1编码相同。与 k 之1相同，它需要一个词的字典来实现词到索引序号的映射。随着遇到的词增多，各种词可能达数百万。由此，使用稀疏矩阵来表示就很关键。这种表示只记录某个词是否出现过，从而节省内存和磁盘空间，以及计算时间。</p>
<p><strong>提取简单的文本特征</strong></p>
<p>参见 : <a href="http://www.ituring.com.cn/tupubarticle/5567" target="_blank" rel="external">http://www.ituring.com.cn/tupubarticle/5567</a></p>
<p>现在每一个电影标题都被转换为一个稀疏向量。</p>
<h3 id="4-5-正则化特征"><a href="#4-5-正则化特征" class="headerlink" title="4.5 正则化特征"></a>4.5 正则化特征</h3><p>在将特征提取为向量形式后，一种常见的预处理方式是将数值数据正则化（normalization）。其背后的思想是将各个数值特征进行转换，以将它们的值域规范到一个标准区间内。正则化的方法有如下几种。</p>
<ul>
<li>正则化特征：这实际上是对数据集中的单个特征进行转换。比如减去平均值（特征对齐）或是进行标准的正则转换（以使得该特征的平均值和标准差分别为0和1）。</li>
<li>正则化特征向量：这通常是对数据中的某一行的所有特征进行转换，以让转换后的特征向量的长度标准化。也就是缩放向量中的各个特征以使得向量的范数为1（常指一阶或二阶范数）。</li>
</ul>
<p>向量正则化可通过numpy的norm函数来实现。具体来说，先计算一个随机向量的二阶范数，然后让向量中的每一个元素都除该范数，从而得到正则化后的向量：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">np.random.seed(42)</span><br><span class="line">x = np.random.randn(10)</span><br><span class="line">norm_x_2 = np.linalg.norm(x)</span><br><span class="line">normalized_x = x / norm_x_2</span><br><span class="line">print &quot;x:\n%s&quot; % x</span><br><span class="line">print &quot;2-Norm of x: %2.4f&quot; % norm_x_2</span><br><span class="line">print &quot;Normalized x:\n%s&quot; % normalized_x</span><br><span class="line">print &quot;2-Norm of normalized_x: %2.4f&quot; % np.linalg.norm(normalized_x)</span><br></pre></td></tr></table></figure>
<p>其输出应该如下（上面将随机种子的值设为42，保证每次运行的结果相同）：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">x: [ 0.49671415 -0.1382643  0.64768854  1.52302986 -0.23415337 -0.23413696</span><br><span class="line">1.57921282  0.76743473 -0.46947439  0.54256004]</span><br><span class="line">2-Norm of x: 2.5908</span><br><span class="line">Normalized x: [ 0.19172213 -0.05336737  0.24999534  0.58786029 -0.09037871 -0.09037237  0.60954584  0.29621508 -0.1812081  0.20941776]</span><br><span class="line">2-Norm of normalized_x: 1.0000</span><br></pre></td></tr></table></figure>
<p><strong>用 MLlib 正则化特征</strong></p>
<p>Spark在其MLlib机器学习库中内置了一些函数用于特征的缩放和标准化。它们包括供标准正态变换的<code>StandardScaler</code>，以及提供与上述相同的特征向量正则化的 <code>Normalizer</code>。</p>
<p>比较一下MLlib的Normalizer与我们自己函数的结果：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">from pyspark.mllib.feature import Normalizer</span><br><span class="line">normalizer = Normalizer()</span><br><span class="line">vector =sc.parallelize([x])</span><br></pre></td></tr></table></figure>
<p>在导入所需的类后，会要初始化Normalizer（其默认使用与之前相同的二阶范数）。注意用Spark时，大部分情况下Normalizer所需的输入为一个RDD（它包含numpy数值或MLlib向量）。作为举例，我们会从x向量创建一个单元素的RDD。</p>
<p>之后将会对我们的RDD调用Normalizer的transform函数。由于该RDD只含有一个向量，可通过first函数来返回向量到驱动程序。接着调用toArray函数来将该向量转换为numpy数组：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">normalized_x_mllib = normalizer.transform(vector).first().toArray()</span><br><span class="line">#最后来看一下之前打印过的那些值，并做个比较：</span><br><span class="line"></span><br><span class="line">print &quot;x:\n%s&quot; % x</span><br><span class="line">print &quot;2-Norm of x: %2.4f&quot; % norm_x_2</span><br><span class="line">print &quot;Normalized x MLlib:\n%s&quot; % normalized_x_mllib</span><br><span class="line">print &quot;2-Norm of normalized_x_mllib: %2.4f&quot; % np.linalg.norm(normalized_x_mllib)</span><br></pre></td></tr></table></figure>
<p>相比自己编写的函数，使用 MLlib内置的函数 更方便</p>
<h3 id="4-6-用软件包提取特征"><a href="#4-6-用软件包提取特征" class="headerlink" title="4.6 用软件包提取特征"></a>4.6 用软件包提取特征</h3><p>特征提取可借助的软件包有scikit-learn、gensim、scikit-image、matplotlib、Python的NLTK、Java编写的OpenNLP以及用Scala编写的Breeze和Chalk。Breeze自Spark 1.0开始就成为Spark的一部分了。Breeze有线性代数功能。</p>
<h2 id="5-小结"><a href="#5-小结" class="headerlink" title="5. 小结"></a>5. 小结</h2><p>了解 如何导入、处理和清理数据，如何将原始数据转为<strong>特征向量</strong>以供模型训练的常见方法</p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-spark-machine-learning-p2-design-ml-sys" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/09/08/spark-machine-learning-p2-design-ml-sys/"><strong>Spark Machine Learning p2 - 设计机器学习系统</strong></a>
      <small class=article-date-index>&nbsp; 2016-09-08</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/09/08/spark-machine-learning-p2-design-ml-sys/" class="article-date">
  <time datetime="2016-09-08T02:07:21.000Z" itemprop="datePublished">2016-09-08</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/spark/">spark</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/09/08/spark-machine-learning-p2-design-ml-sys/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Spark Machine Learing Reading Notes</p>
</blockquote>
<style>
img {
        display: block !important;
        height: 400px;
        width: 500px;
        margin-left: 180px !important;
}
</style>

<h2 id="1-原始-MovieStream-介绍"><a href="#1-原始-MovieStream-介绍" class="headerlink" title="1. 原始 MovieStream 介绍"></a>1. 原始 MovieStream 介绍</h2><p><img src="/images/spark/spark-ml-2.1.jpg" alt="MovieStream"></p>
<h3 id="1-1-个性化"><a href="#1-1-个性化" class="headerlink" title="1.1 个性化"></a>1.1 个性化</h3><p><code>个性化</code> 是根据各因素来改变用户体验和<code>呈现给用户内容</code>。这些因素可能包括用户的行为数据和外部因素。</p>
<p><code>推荐</code>（recommendation）, 常指向用户呈现一个他们可能感兴趣的物品列表。</p>
<p>个性化和推荐十分相似, 根据因素改变搜索的呈现不同用户不同内容，这是隐式个性化</p>
<h3 id="1-2-客户细分"><a href="#1-2-客户细分" class="headerlink" title="1.2 客户细分"></a>1.2 客户细分</h3><p>目标营销用与推荐类似的方法从用户群中找出要营销的对象。一般来说，推荐和个性化的应用场景都是一对一，根据用户的特征进行分组，并可能参考行为数据。也可能使用了某种机器学习模型，比如 <code>聚类</code>。</p>
<h3 id="1-3-预测建模"><a href="#1-3-预测建模" class="headerlink" title="1.3 预测建模"></a>1.3 预测建模</h3><p><code>预测性分析</code> 从某种意义上说还覆盖推荐、个性化和目标营销。用预测建模（predictive modeling）来表示其他做预测的模型。借助活动记录、收入数据以及内容属性，MovieStream 可以创建一个回归模型（regression model）来预测新电影的市场表现。</p>
<p>另外，我们也可使用分类模型（classificaiton model）来对只有部分数据的新电影自动分配标签、关键字或分类。</p>
<h2 id="2-机器学习模型的种类"><a href="#2-机器学习模型的种类" class="headerlink" title="2. 机器学习模型的种类"></a>2. 机器学习模型的种类</h2><p><code>supervised learning</code>：这种方法使用已标记数据来学习。<code>推荐引擎</code>、<code>回归</code>和<code>分类</code>便是例子。它们所使用的标记数据可以是用户对电影的评级（对推荐来说）、电影标签（对上述分类例子来说）或是收入数字（对回归预测来说）.</p>
<p><code>unsupervised learning</code>：一些模型的学习过程不需要标记数据，我们称其为无监督学习。这类模型试图学习或是提取数据背后的结构或从中抽取最为重要的特征。<code>聚类</code>、<code>降维</code>和<code>文本处理</code>的某些特征提取都是无监督学习.</p>
<h2 id="3-数据驱动ML系统的组成"><a href="#3-数据驱动ML系统的组成" class="headerlink" title="3. 数据驱动ML系统的组成"></a>3. 数据驱动ML系统的组成</h2><p><img src="/images/spark/spark-ml-2.2.jpg" alt="机器学习流程"></p>
<h3 id="3-1-数据获取与存储"><a href="#3-1-数据获取与存储" class="headerlink" title="3.1 数据获取与存储"></a>3.1 数据获取与存储</h3><p>MovieStream 的数据通常来自用户活动.</p>
<p>要存储的数据包括：原始数据、即时处理后的数据，以及可用于生产系统的最终建模结果。</p>
<p><strong>数据存储</strong></p>
<ol>
<li><strong>文件系统</strong> : 如 HDFS、Amazon S3 等；</li>
<li><strong>SQL数据库</strong> : 如 MySQL、PostgreSQL；</li>
<li><strong>NoSQL</strong> : -如 HBase、Cassandra、Mongodb；</li>
<li><strong>搜索引擎</strong> : 如 Solr 、Elasticsearch；</li>
<li><strong>流数据</strong> : – 如 Kafka、Flume、Amazon Kinesis</li>
</ol>
<h3 id="3-2-数据清理与转换"><a href="#3-2-数据清理与转换" class="headerlink" title="3.2 数据清理与转换"></a>3.2 数据清理与转换</h3><p>大部分机器学习模型所处理的都是 <code>feature</code>。特征 通常是输入变量所对应的可用于模型的数值表示。</p>
<p>原始数据 预处理 几种 情况</p>
<ol>
<li>数据过滤</li>
<li>合并多个数据源</li>
<li>数据汇总</li>
</ol>
<p>对许多模型类型来说，这种表示就是包含 <strong>数值数据的</strong> <code>向量</code> or <code>矩阵</code>。</p>
<p>将类别数据（比如地理位置所在的国家或是电影的类别）编码为对应的数值表示。</p>
<ol>
<li>文本数据提取有用信息。</li>
<li>处理图像或是音频数据。</li>
<li>数值数据常被转换为类别数据以减少某个变量的可能值的数目。例如将年龄分为 601, 602…</li>
<li>对特征进行正则化、标准化，以保证同一模型的不同输入变量的值域相同。</li>
</ol>
<p>这些数据清理、探索、聚合和转换步骤，都能通过Spark核心API、SparkSQL引擎和其他外部Scala、Java或Python包做到。借助 Spark 的 Hadoop功能 还能实现上述多种存储系统上的读写。</p>
<h3 id="3-3-模型训练与测试回路"><a href="#3-3-模型训练与测试回路" class="headerlink" title="3.3 模型训练与测试回路"></a>3.3 模型训练与测试回路</h3><p>当数据已转换为可用于模型的形式，便可开始模型的训练和测试。</p>
<p>在训练数据集上运行模型并在测试数据集（即为评估模型而预留的数据，在训练阶段模型没接触过该数据）上测试其效果，这个过程一般相对直接，被称作交叉验证（cross-validation）。</p>
<p>Spark MLlib 来实现对各种机器学习方法的模型训练、评估以及交叉验证。</p>
<h3 id="3-4-模型部署与整合"><a href="#3-4-模型部署与整合" class="headerlink" title="3.4 模型部署与整合"></a>3.4 模型部署与整合</h3><p>通过训练测试循环找出最佳模型后，要让它能得出可付诸实践的预测，还需将其部署到生产系统中。</p>
<p>这个过程一般要将已训练的模型导入特定的数据存储中。</p>
<h3 id="3-5-模型监控与反馈"><a href="#3-5-模型监控与反馈" class="headerlink" title="3.5 模型监控与反馈"></a>3.5 模型监控与反馈</h3><p>监控机器学习系统在生产环境下的表现十分重要。</p>
<p>同样值得注意的是，模型准确度和预测效果只是现实中系统表现的一部分。</p>
<p>我们可以尽可能在生产系统中部署不同的模型，通过调整它们而优化业务指标。实践中，这通常通过在线分割测试（<code>live split test</code>）进行。</p>
<p>模型反馈（<code>model feedback</code>），指通过用户的行为来对模型的预测进行反馈的过程。在现实系统中，模型的应用将影响用户的决策和潜在行为，从而反过来将从根本上改变模型自己将来的训练数据。</p>
<h3 id="3-6-批处理-实时方案选择"><a href="#3-6-批处理-实时方案选择" class="headerlink" title="3.6 批处理/实时方案选择"></a>3.6 批处理/实时方案选择</h3><p>常见的批处理方法。模型用所有数据或一部分数据进行周期性的重新训练。由于上述流程会花费一定的时间，这就使得批处理方法难以在新数据到达时立即完成模型的更新。</p>
<p>存在一类名为在线学习（online learning）的机器学习方法。它们在新数据到达时便能立即更新模型，从而使实时系统成为可能。常见的例子有对线性模型的在线优化算法，如<code>随机梯度下降法</code>。</p>
<h2 id="4-机器学习系统架构"><a href="#4-机器学习系统架构" class="headerlink" title="4. 机器学习系统架构"></a>4. 机器学习系统架构</h2><p><img src="/images/spark/spark-ml-2.3.jpg" alt="机器学习系统架构"></p>
<p>机器学习流程示意图的内容：</p>
<ul>
<li>收集与用户、用户行为和电影标题有关的数据；</li>
<li>将这些数据转为特征；</li>
<li>模型训练，包括训练-测试和模型选择环节；</li>
<li>将已训练模型部署到在线服务系统，并用于离线处理；</li>
<li>通过推荐和目标页面将模型结果反馈到MovieStream站点；</li>
<li>将模型结果返回到MovieStream的个性化营销渠道；</li>
<li>使用离线模型来为MovieSteam的各个团队提供工具，以帮助其理解用户的行为、内容目录的特点和业务收入的驱动因素。</li>
</ul>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-java-special-arms-p3-jvm" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/08/16/java-special-arms-p3-jvm/"><strong>JVM 跨平台与字节码原理初步</strong></a>
      <small class=article-date-index>&nbsp; 2016-08-16</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/08/16/java-special-arms-p3-jvm/" class="article-date">
  <time datetime="2016-08-16T08:54:16.000Z" itemprop="datePublished">2016-08-16</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/java/">java</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/08/16/java-special-arms-p3-jvm/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>用到 JVM 的场景</p>
<ol>
<li>Out of memory 时，团队高手不在</li>
<li>系统服务器架构，老大问你 投入多少服务器成本，VM 分配多大， 如何分配?</li>
</ol>
<h2 id="1-javap-命令"><a href="#1-javap-命令" class="headerlink" title="1. javap 命令"></a>1. javap 命令</h2><blockquote>
<p>通过这种方式认知比 Java 更低一个抽象层次的逻辑，虚指令有时候更好解释问题。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String a = <span class="string">"a"</span> + <span class="string">"b"</span> + <span class="number">1</span>;</span><br><span class="line">        String b = <span class="string">"ab1"</span>;</span><br><span class="line">        System.out.println(a == b); <span class="comment">// true 编译时优化</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">➜  p3jvm git:(master) ✗ <span class="built_in">pwd</span></span><br><span class="line">/Users/hp/ghome/github/language/java/jsarms/p3jvm</span><br><span class="line">➜  p3jvm git:(master) ✗ javac</span><br><span class="line">Usage: javac &lt;options&gt; &lt;<span class="built_in">source</span> files&gt;</span><br><span class="line"><span class="built_in">where</span> possible options include:</span><br><span class="line">  -g                         Generate all debugging info</span><br><span class="line">  -g:none                    Generate no debugging info</span><br><span class="line">  -g:&#123;lines,vars,<span class="built_in">source</span>&#125;     Generate only some debugging info</span><br><span class="line">  -nowarn                    Generate no warnings</span><br><span class="line">  -verbose                   Output messages about what the compiler is doing</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">➜  p3jvm git:(master) ✗ javac -g:vars,lines StringTest.java</span><br><span class="line">➜  p3jvm git:(master) ✗ javap -verbose StringTest</span><br><span class="line">Classfile /Users/hp/ghome/github/language/java/jsarms/p3jvm/StringTest.class</span><br><span class="line">  Last modified Aug 16, 2016; size 559 bytes</span><br><span class="line">  MD5 checksum 772d18512cb982c953e7db8c72522918</span><br><span class="line">public class StringTest</span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: 51</span><br><span class="line">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class="line">Constant pool:</span><br><span class="line">   <span class="comment">#1 = Methodref          #6.#21         //  java/lang/Object."&lt;init&gt;":()V</span></span><br><span class="line">   <span class="comment">#2 = String             #22            //  ab1</span></span><br><span class="line">   <span class="comment">#3 = Fieldref           #23.#24        //  java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">   <span class="comment">#4 = Methodref          #25.#26        //  java/io/PrintStream.println:(Z)V</span></span><br><span class="line">   <span class="comment">#5 = Class              #27            //  StringTest</span></span><br><span class="line">   <span class="comment">#6 = Class              #28            //  java/lang/Object</span></span><br><span class="line">   <span class="comment">#7 = Utf8               &lt;init&gt;</span></span><br><span class="line">   <span class="comment">#8 = Utf8               ()V</span></span><br><span class="line">   <span class="comment">#9 = Utf8               Code</span></span><br><span class="line">  <span class="comment">#10 = Utf8               LineNumberTable</span></span><br><span class="line">  <span class="comment">#11 = Utf8               LocalVariableTable</span></span><br><span class="line">  <span class="comment">#12 = Utf8               this</span></span><br><span class="line">  <span class="comment">#13 = Utf8               LStringTest;</span></span><br><span class="line">  <span class="comment">#14 = Utf8               test1</span></span><br><span class="line">  <span class="comment">#15 = Utf8               a</span></span><br><span class="line">  <span class="comment">#16 = Utf8               Ljava/lang/String;</span></span><br><span class="line">  <span class="comment">#17 = Utf8               b</span></span><br><span class="line">  <span class="comment">#18 = Utf8               StackMapTable</span></span><br><span class="line">  <span class="comment">#19 = Class              #29            //  java/lang/String</span></span><br><span class="line">  <span class="comment">#20 = Class              #30            //  java/io/PrintStream</span></span><br><span class="line">  <span class="comment">#21 = NameAndType        #7:#8          //  "&lt;init&gt;":()V</span></span><br><span class="line">  <span class="comment">#22 = Utf8               ab1</span></span><br><span class="line">  <span class="comment">#23 = Class              #31            //  java/lang/System</span></span><br><span class="line">  <span class="comment">#24 = NameAndType        #32:#33        //  out:Ljava/io/PrintStream;</span></span><br><span class="line">  <span class="comment">#25 = Class              #30            //  java/io/PrintStream</span></span><br><span class="line">  <span class="comment">#26 = NameAndType        #34:#35        //  println:(Z)V</span></span><br><span class="line">  <span class="comment">#27 = Utf8               StringTest</span></span><br><span class="line">  <span class="comment">#28 = Utf8               java/lang/Object</span></span><br><span class="line">  <span class="comment">#29 = Utf8               java/lang/String</span></span><br><span class="line">  <span class="comment">#30 = Utf8               java/io/PrintStream</span></span><br><span class="line">  <span class="comment">#31 = Utf8               java/lang/System</span></span><br><span class="line">  <span class="comment">#32 = Utf8               out</span></span><br><span class="line">  <span class="comment">#33 = Utf8               Ljava/io/PrintStream;</span></span><br><span class="line">  <span class="comment">#34 = Utf8               println</span></span><br><span class="line">  <span class="comment">#35 = Utf8               (Z)V</span></span><br><span class="line">// 以上是 Constant pool， 仅仅是陈列操作，并没有开始执行任务，看下面开始</span><br><span class="line">&#123;</span><br><span class="line">  public StringTest();</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=1, locals=1, args_size=1 // 所有方法都会有。</span><br><span class="line">      // stack 为栈顶的单位大小 (每个大小为 1 slot，4 byte)</span><br><span class="line">      // locals=1，非静态方法，本地变量增加 this</span><br><span class="line">         0: aload_0</span><br><span class="line">         1: invokespecial <span class="comment">#1                  // Method java/lang/Object."&lt;init&gt;":()V</span></span><br><span class="line">         4: <span class="built_in">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 1: 0</span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">               0       5     0  this   LStringTest;</span><br><span class="line"></span><br><span class="line">  public static void <span class="built_in">test</span>1();</span><br><span class="line">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=3, locals=2, args_size=0 </span><br><span class="line">      // stack=3，本地栈slot个数为3，String需要load，String.out 占用一个再。当对比发生 boolean 时，两个String引用栈顶pop</span><br><span class="line">      // locals=2， 因为只有两个 String</span><br><span class="line">      // args_size=0，方法没有入口参数</span><br><span class="line">         0: ldc           <span class="comment">#2                  // String ab1</span></span><br><span class="line">         // 引用常量池内容</span><br><span class="line">         2: astore_0</span><br><span class="line">         // 将栈顶引用值，写入第 1 个 slot 所在的本地变量</span><br><span class="line">         3: ldc           <span class="comment">#2                  // String ab1</span></span><br><span class="line">         5: astore_1</span><br><span class="line">         6: getstatic     <span class="comment">#3                  // Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">         // 获取静态域，放入栈顶，此时静态域是 System.out 对象</span><br><span class="line">         9: aload_0</span><br><span class="line">        10: aload_1</span><br><span class="line">        11: <span class="keyword">if</span>_acmpne     18</span><br><span class="line">        14: iconst_1</span><br><span class="line">        15: goto          19</span><br><span class="line">        18: iconst_0</span><br><span class="line">        19: invokevirtual <span class="comment">#4                  // Method java/io/PrintStream.println:(Z)V</span></span><br><span class="line">        22: <span class="built_in">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 4: 0</span><br><span class="line">        line 5: 3</span><br><span class="line">        line 6: 6</span><br><span class="line">        line 7: 22</span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">               3      20     0     a   Ljava/lang/String;</span><br><span class="line">               6      17     1     b   Ljava/lang/String;</span><br><span class="line">      // 本地变量列表 LocalVariableTable. from javac -g:vars</span><br><span class="line">      StackMapTable: number_of_entries = 2</span><br><span class="line">           frame_<span class="built_in">type</span> = 255 /* full_frame */</span><br><span class="line">          offset_delta = 18</span><br><span class="line">          locals = [ class java/lang/String, class java/lang/String ]</span><br><span class="line">          stack = [ class java/io/PrintStream ]</span><br><span class="line">           frame_<span class="built_in">type</span> = 255 /* full_frame */</span><br><span class="line">          offset_delta = 0</span><br><span class="line">          locals = [ class java/lang/String, class java/lang/String ]</span><br><span class="line">          stack = [ class java/io/PrintStream, int ]</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">➜  p3jvm git:(master) ✗</span><br></pre></td></tr></table></figure>
<h2 id="2-Java-字节码结构"><a href="#2-Java-字节码结构" class="headerlink" title="2. Java 字节码结构"></a>2. Java 字节码结构</h2><p>javac 命令本身只是一个引导器，它引导编译器程序的运行。编译器本身是一个java程序 <code>com.sun.tools.javac.main.JavaCompiler</code>, 该类完成 java 源文件 的 Parser、Annotation process、检查、泛型处理、语法转换等，最终胜出 Class 文件。</p>
<p>Java 字节码文件主体结构: </p>
<table>
<thead>
<tr>
<th><strong>Class 文件头部</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Constant pool</td>
<td></td>
</tr>
<tr>
<td>当前Clas的描述信息</td>
<td></td>
</tr>
<tr>
<td>属性列表</td>
<td></td>
</tr>
<tr>
<td>方法列表</td>
<td></td>
</tr>
<tr>
<td>…</td>
<td></td>
</tr>
</tbody>
</table>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml-5-decisionTree-part1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/08/16/ml-5-decisionTree-part1/"><strong>决策树 * Part1</strong></a>
      <small class=article-date-index>&nbsp; 2016-08-16</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/08/16/ml-5-decisionTree-part1/" class="article-date">
  <time datetime="2016-08-16T08:43:21.000Z" itemprop="datePublished">2016-08-16</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/08/16/ml-5-decisionTree-part1/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$']],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<p>决策树（decision tree）是一个树结构（可以是二叉树或非二叉树）。其每个非叶节点表示一个特征属性上的测试，每个分支代表这个特征属性在某个值。</p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2016/08/16/ml-5-decisionTree-part1/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ef-l3u3-Hotels" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/08/15/ef-l3u3-Hotels/"><strong>Hotels</strong></a>
      <small class=article-date-index>&nbsp; 2016-08-15</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/08/15/ef-l3u3-Hotels/" class="article-date">
  <time datetime="2016-08-14T22:59:16.000Z" itemprop="datePublished">2016-08-15</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/08/15/ef-l3u3-Hotels/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 550px;
        margin-left: 120px !important;
}
</style>

<h2 id="1-Recommending-a-hotel"><a href="#1-Recommending-a-hotel" class="headerlink" title="1. Recommending a hotel"></a>1. Recommending a hotel</h2><ul>
<li>right downtown.</li>
<li>The rates are reasonable.</li>
</ul>
<p><img src="/images/english/ef-l3u3l1.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>[JOAN] I have a meeting there on March 15th. Can you recommend a good hotel?</td>
<td></td>
</tr>
<tr>
<td>[TODD] How about the Hotel Anna? <code>It’s right downtown</code>. The rates are reasonable.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Thanks good. How much is it a night?</td>
<td></td>
</tr>
<tr>
<td>[TODD] I think it’s around 200 a night.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Not bad. <code>Is there a fitness center</code> in the hotel ?</td>
<td></td>
</tr>
<tr>
<td>[TODD] Yes, there is. Oh! And you get free wireless internet in your room. I love that.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] <code>What are the rooms like</code>?</td>
<td></td>
</tr>
<tr>
<td>[TODD] They’re nice. The bathrooms are pretty small. But they’re modern and clean.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Great! sounds perfect.</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>It isn’t near the airport.<br>It’s close to shopping.<br>Every room has free wireless internet.<br>It doesn’t have a business center.</p>
</blockquote>
<h2 id="2-Making-a-hotel-reservation"><a href="#2-Making-a-hotel-reservation" class="headerlink" title="2. Making a hotel reservation"></a>2. Making a hotel reservation</h2><p><img src="/images/english/ef-l3u3l2.png" alt=""></p>
<table>
<thead>
<tr>
<th>Making a hotel reservation</th>
</tr>
</thead>
<tbody>
<tr>
<td>[CLERK] Hotel Anna，How Can I help you?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] I’d like to make a reservation please.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] <code>For how many people?</code> / For how many nights?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Just me.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] OK, When are you <code>checking in</code>?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Check in March 15th and check out March 19th</td>
<td></td>
</tr>
<tr>
<td>[CLERK] 15th to 19th. So, that. Would you like a single room or a double ?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] A single please. I’d like to have a nonsmoking room.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] That’s no problem. <code>Would you like me to reserve it for you, now?</code></td>
<td></td>
</tr>
<tr>
<td>[JOAN] What’s the rate?</td>
<td></td>
</tr>
<tr>
<td>[CLERK] It’s 210 a night.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] OK, Yes. Please reserve it for me now. My name is Baxter.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] May I have your credit card number?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] It’s 3788-6672-4038-24.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] Great. Just one moment … All set. Can I help you with anything else?</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="3-Checking-in-to-a-hotel"><a href="#3-Checking-in-to-a-hotel" class="headerlink" title="3. Checking in to a hotel"></a>3. Checking in to a hotel</h2><ul>
<li>suitcase</li>
<li>front desk</li>
<li>luggage</li>
<li>lobby</li>
<li>key card</li>
<li>credit card</li>
<li>elevator</li>
<li>hotel clerk</li>
<li>umbrella</li>
</ul>
<p><img src="/images/english/ef-l3u3l3.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>[CLERK] Good afternoon，May I help you?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Yes, <code>I&#39;m checking in</code>.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] May I see your passport?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Yes, Here you are.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] OK, Welcome to the hotel Ana. So that’s two people, for four nights.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Actually, it’s for one person – just me.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] Oh, sorry about it, Ah, yes - a nonsmoking single.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] That’s right.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] And <code>you&#39;re staying with us for four nights</code>, checking out on the 19th.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Yes.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] OK, May I see your credit card?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Here you are.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] Wonderful ! <code>You&#39;re all set</code>. Here your credit card and Passport. Here’s your key card for 1412.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] <code>You can take the elevator behind you</code>. Would you like help with your luggage?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] No, Thank you.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] Ok, <code>Have a pleasant stay</code>. [‘plez(ə)nt]</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>We’re checking in on the 3rd and checking out on the 14th.<br>So, that’s one person for 10 nights.  </p>
</blockquote>
<h2 id="4-Checking-out-to-a-hotel"><a href="#4-Checking-out-to-a-hotel" class="headerlink" title="4. Checking out to a hotel"></a>4. Checking out to a hotel</h2><ul>
<li>plus room service</li>
<li>It’s not a big deal.</li>
<li>receipt</li>
</ul>
<p><img src="/images/english/ef-l3u3l4.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>[CLERK] Good morning，May I help you?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Yes, <code>I&#39;d like to check out</code>, please.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] <code>How was your stay?</code></td>
<td></td>
</tr>
<tr>
<td>[JOAN] Pretty good, But <code>The neighborhood&#39;s a little noisy</code>.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] Oh, I’m sorry to hear that..</td>
<td></td>
</tr>
<tr>
<td>[JOAN] It’s okay. I love the room. <code>The fitness center&#39;s amazing</code>.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] Great! Would you like pay with your credit card?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] please.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] That’s 996.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Really? That seems high.</td>
<td></td>
</tr>
<tr>
<td>[CLERK] Would you like a receipt ?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Yes, I need the receipt.</td>
<td></td>
</tr>
</tbody>
</table>
<blockquote>
<p>Your bill comes to 996.<br>The total amount is 996.<br>That doesn’t seem right.<br>I’d like to review my bill, please.<br>How would you like to pay for that? </p>
</blockquote>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-life-chinese-named" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/08/13/life-chinese-named/"><strong>中国人起名字的学问 - 自我研究</strong></a>
      <small class=article-date-index>&nbsp; 2016-08-13</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/08/13/life-chinese-named/" class="article-date">
  <time datetime="2016-08-12T23:54:16.000Z" itemprop="datePublished">2016-08-13</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/life/">life</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/08/13/life-chinese-named/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-五行八字介绍"><a href="#1-五行八字介绍" class="headerlink" title="1. 五行八字介绍"></a>1. 五行八字介绍</h2><h3 id="1-1-五行"><a href="#1-1-五行" class="headerlink" title="1.1 五行"></a>1.1 五行</h3><p>　五行就是周易中常说的木、火、土、金、水。易经中各类事物均可以五行来区分，如干支、地支、季节、方位、人体、颜色、味道等等。五行有相生与相克的特质，很多的事物可藉由五行的运算，了解元素之兴衰，来判别事物的起伏变化和你一生的好坏吉凶。</p>
<h3 id="1-2-三才"><a href="#1-2-三才" class="headerlink" title="1.2 三才"></a>1.2 三才</h3><p>　　三才配置即天、人、地。中国传统文化理解人立足于大地之上，在天之下，受到上天之眷顾，大地的滋养，而生生不息。亦有顺应天时、地利、人和的行事哲理。三才配置在姓名学中，占有很大的分量。</p>
<h3 id="1-3-五格"><a href="#1-3-五格" class="headerlink" title="1.3 五格"></a>1.3 五格</h3><p>　　五格配置是指天格、地格、人格、外格、总格共五格之间的关系。天格是由祖先流传而来，单独出现对人生没有多大影响;人格是姓名剖象数理的中心所在，对人生的影响最大;人格与地格结合的数理则为基础运。地格主要是36岁前的人生，也叫前运力，外格代表人的外围，吉凶无谓。总格是36岁以后的人生，也是后运力。五格配置在姓名学中占有主要位置。</p>
<h2 id="2-判断五行所缺"><a href="#2-判断五行所缺" class="headerlink" title="2. 判断五行所缺"></a>2. 判断五行所缺</h2><blockquote>
<p>起名字，需要根据五行八字所缺少的五行来用相应的属性字(更准确的说法是用<code>喜用神</code>)来填补，所以需要判断五行所缺。</p>
</blockquote>
<p><a href="http://www.360doc.com/content/15/0313/16/15585030_454852610.shtml" target="_blank" rel="external">解析四柱八字的精髓喜用神</a><br><a href="http://baike.baidu.com/view/1373942.htm" target="_blank" rel="external">喜用神百科</a><br><a href="http://blog.sina.com.cn/s/blog_6e775646010136qp.html" target="_blank" rel="external">如何知道自己八字的喜神，用神</a></p>
<blockquote>
<p>八字就是从这个平衡理论，去分析人一生的起落</p>
</blockquote>
<p>　　知道了五行的知识，我们也知道很多人的八字五行都不太齐全，有的不只缺一个，还会缺两个甚至三个。比如我们常听说的“五行缺金”之类的话，那么如何知道起名字五行缺什么呢?</p>
<h3 id="2-1-判断五行八字及喜用神"><a href="#2-1-判断五行八字及喜用神" class="headerlink" title="2.1 判断五行八字及喜用神"></a>2.1 判断五行八字及喜用神</h3><p>查询五行八字是为了看八字中缺少五行中的哪一行(<strong>以喜用神为准</strong>)，然后用名中字尽量补齐 : <code>金、木、水、火、土</code></p>
<p><strong>以 2015年10月11日13时30分 为例查询检验判断五行八字</strong></p>
<p>以下网址查询结果一致 :</p>
<ul>
<li><a href="http://www.sheup.com/shengchenbazi.php" target="_blank" rel="external">三藏八字查询</a></li>
<li><a href="http://www.zhyw.net/myweb/bz/bazi.htm" target="_blank" rel="external">周易网</a>  </li>
<li><a href="http://www.69jk.cn/tools/bazi/" target="_blank" rel="external">中国健康网</a></li>
</ul>
<p>以下网址查询结果一致 :</p>
<ul>
<li><a href="http://www.meimingteng.com/Tool/Bazi.aspx" target="_blank" rel="external">美名腾</a></li>
<li><a href="http://m.zhouyi.cc/bazi/xys/xiyongsheng.php" target="_blank" rel="external">易安居算命网</a></li>
<li><a href="http://www.fututa.com/" target="_blank" rel="external">浮图塔</a></li>
<li><a href="http://bazi.dosame.com/" target="_blank" rel="external">生辰八字喜用神查询</a></li>
<li><a href="http://sm.wonyoo.com" target="_blank" rel="external">中华忘忧网</a></li>
</ul>
<blockquote>
<p> 这类网址很多，如 : <a href="http://www.meimingteng.com/Tool/Bazi.aspx" target="_blank" rel="external">美名腾</a>、<a href="http://www.pcbaby.com.cn/tools/scbz/" target="_blank" rel="external">太平洋亲子网</a>、<a href="http://www.zhyw.net/myweb/bz/bazi.htm" target="_blank" rel="external">周易网</a>、<a href="http://www.69jk.cn/tools/bazi/" target="_blank" rel="external">中国健康网</a>、<a href="http://www.sheup.com/shengchenbazi.php" target="_blank" rel="external">三藏八字查询</a> 等等。请自行判断查询结果准确性。</p>
<p>周易网、中国健康网、三藏八字查询结果 与 老爷书 一致</p>
</blockquote>
<p><code>喜用神</code>查询你也可以参考如下网址查询，但准确性请自行裁断。</p>
<ul>
<li><a href="http://www.meimingteng.com/Tool/Bazi.aspx" target="_blank" rel="external">美名腾</a></li>
<li><a href="http://m.zhouyi.cc/bazi/xys/xiyongsheng.php" target="_blank" rel="external">易安居</a></li>
<li><a href="http://www.fututa.com/" target="_blank" rel="external">浮图塔</a></li>
<li><a href="http://www.babyqiming.com/zybz/bz.php" target="_blank" rel="external">babyqiming喜用神</a></li>
<li><a href="http://v.youku.com/v_show/id_XNDAwMTAwNDQ0.html" target="_blank" rel="external">优酷视频: 怎么样算八字 什么是八字喜用神 四柱</a></li>
</ul>
<h3 id="2-2-五行不缺的情况"><a href="#2-2-五行不缺的情况" class="headerlink" title="2.2 五行不缺的情况"></a>2.2 五行不缺的情况</h3><p>五行不缺的情况，参见 <a href="http://baike.baidu.com/view/1373942.htm" target="_blank" rel="external">喜用神</a>。<br>五行缺少的情况，参见 <a href="http://baike.baidu.com/view/1373942.htm" target="_blank" rel="external">喜用神</a>，但在多数情况下，缺少的一个就为它的喜用神，具体参见喜用神查询。 </p>
<blockquote>
<p>喜用神查询 与 八字五行 查询，请仔细辨别查询的结果可靠性。</p>
</blockquote>
<h2 id="3-姓名笔画吉凶"><a href="#3-姓名笔画吉凶" class="headerlink" title="3. 姓名笔画吉凶"></a>3. 姓名笔画吉凶</h2><blockquote>
<p>推荐 31 或者 23画</p>
</blockquote>
<p>二十三画　　　旭日升天，名显四方，渐次进展，终成大业。　　（吉）<br>三十一画　　　此数大吉，名利双收，渐进向上，大业成就。　　（吉）</p>
<p><a href="http://blog.sina.com.cn/s/blog_4d4f386c0102vg9r.html" target="_blank" rel="external">详见姓名笔画吉凶大全</a></p>
<blockquote>
<p>起名中用字的笔画数参见 <a href="http://tool.httpcn.com/KangXi/" target="_blank" rel="external">康子字典</a> (非简体字或繁体字)</p>
</blockquote>
<h2 id="4-手机APP的运用"><a href="#4-手机APP的运用" class="headerlink" title="4. 手机APP的运用"></a>4. 手机APP的运用</h2><ol>
<li>美名腾智能起名 APP</li>
<li>…</li>
</ol>
<blockquote>
<p>运用相关手机app，可以更方便的辅助想出好名字</p>
</blockquote>
<h2 id="5-姓名打分测试"><a href="#5-姓名打分测试" class="headerlink" title="5. 姓名打分测试"></a>5. 姓名打分测试</h2><p>打分测试这种网站比较多，根据我个人的经验判别我推荐 <a href="http://www.sheup.com/xingming_dafen.php" target="_blank" rel="external">三藏网打分测试</a>，根据三藏网查询的结果，可以看到 三才五格的解析以及康熙字典的笔画数目等。</p>
<hr>
<p>举例如下 :</p>
<p><img src="/images/life/life-named-xin.png" alt="example"></p>
<h2 id="6-小结"><a href="#6-小结" class="headerlink" title="6. 小结"></a>6. 小结</h2><p>综上所述: 起名字只需要在名字中，使用喜用神的字 并且 三才五格打分 都比较不错的情况下，方为好名字。</p>
<blockquote>
<p>个人意见 : 名字还是 顺耳，脱俗 的名字是最重要的。</p>
</blockquote>
<p><strong>起名选择字的方法一如如下图片所示，可参考百度搜索的姓名学</strong></p>
<p><img src="/images/life/life-named-searchword.png" alt="选择字方法参见"></p>
<h2 id="7-Reference-article"><a href="#7-Reference-article" class="headerlink" title="7. Reference article"></a>7. Reference article</h2><ul>
<li><a href="http://www.zhyw.net/myweb/bz/bazi.htm" target="_blank" rel="external">周易网</a>  </li>
<li><a href="http://www.69jk.cn/tools/bazi/" target="_blank" rel="external">中国健康网</a></li>
<li><a href="http://www.meimingteng.com/Tool/Bazi.aspx" target="_blank" rel="external">美名腾</a></li>
<li><a href="http://www.pcbaby.com.cn/tools/scbz/" target="_blank" rel="external">太平洋亲子网</a></li>
<li><a href="http://www.360doc.com/content/15/0313/16/15585030_454852610.shtml" target="_blank" rel="external">解析四柱八字的精髓喜用神</a>  </li>
<li><a href="http://www.babyqiming.com/zybz/bz.php" target="_blank" rel="external">不一定准确的喜用神查询</a></li>
<li><a href="http://www.chinesefortunecalendar.com/CAb5.htm" target="_blank" rel="external">八字五行算命和人生起伏圖</a></li>
<li><a href="http://blog.sina.com.cn/s/blog_4d4f386c0102vg9r.html" target="_blank" rel="external">详见姓名笔画吉凶大全</a></li>
<li><a href="http://tool.httpcn.com/KangXi/" target="_blank" rel="external">康子字典</a></li>
<li><a href="http://www.sheup.com/xingming_dafen.php" target="_blank" rel="external">三藏网</a></li>
<li><a href="http://www.7mingzi.com/hanziwuxing-zi-%E9%99%88/" target="_blank" rel="external">起名网</a></li>
<li>…</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">公历：****年**月**日(星期四)11点</span><br><span class="line">农历：丙申年四月十三日午时</span><br><span class="line">春节：2月8日</span><br><span class="line">节前：乙未年</span><br><span class="line">节后：丙申年</span><br><span class="line">八字：丙申　癸巳　辛丑　甲午</span><br><span class="line">五行：火金　水火　金土　木火</span><br><span class="line">方位：南西　北南　西中　东南</span><br><span class="line">生肖：猴</span><br><span class="line">92 三才配置 吉， 天地人外总格 大吉  31画</span><br><span class="line">陈俊妃</span><br><span class="line">陈俊帆</span><br><span class="line">陈泊羊</span><br><span class="line">陈泊亦</span><br><span class="line">陈音竹</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ef-l3u2-Locations-and-directions" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/08/10/ef-l3u2-Locations-and-directions/"><strong>Locations and directions</strong></a>
      <small class=article-date-index>&nbsp; 2016-08-10</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/08/10/ef-l3u2-Locations-and-directions/" class="article-date">
  <time datetime="2016-08-09T22:59:16.000Z" itemprop="datePublished">2016-08-10</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/08/10/ef-l3u2-Locations-and-directions/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 550px;
        margin-left: 200px !important;
}
</style>

<h2 id="1-Telling-someone-where-you-live"><a href="#1-Telling-someone-where-you-live" class="headerlink" title="1. Telling someone where you live"></a>1. Telling someone where you live</h2><p>The bank is <code>on the corner of</code> Pine Street and First Street.<br>The bus stop is <code>in front of</code> the supermarket.<br>The post office is between the restaurant and the movie theater.<br>The pizza place is <code>behind</code> the library.<br>The bookstore is <code>across the street</code> from the restaurant.  </p>
<p><img src="/images/english/ef-l3u2l1.png" alt=""></p>
<p><strong>on，at，in</strong></p>
<ul>
<li>I live <code>on</code> Maple Road. I live <code>at</code> 1215 Maple Road. </li>
<li>They live <code>in</code> Paris, but they’re from the US.<br>&nbsp;</li>
<li>The library is <code>on</code> Pine Street.</li>
<li>The library is <code>at</code> 57 Pine Street.</li>
</ul>
<table>
<thead>
<tr>
<th><strong>Main Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>B: Are you coming to my party Saturday？</td>
<td></td>
</tr>
<tr>
<td>A: Where do you live?</td>
<td></td>
</tr>
<tr>
<td>B: I live at 1215 Maple Road.</td>
<td></td>
</tr>
<tr>
<td>B: The cross street is 4th Avenue.</td>
<td></td>
</tr>
<tr>
<td>B: between the library and the park</td>
<td></td>
</tr>
<tr>
<td>B: I’m on the 11th floor, number 17.</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>street = St.    街</li>
<li>road = Rd.    路</li>
<li>avenue = Ave.    大街</li>
<li>boulevard = Blvd.    大道</li>
<li>drive = Dr.    道</li>
</ul>
<h2 id="2-Giving-directions"><a href="#2-Giving-directions" class="headerlink" title="2. Giving directions"></a>2. Giving directions</h2><p><code>Go straight</code> on Pine Avenue. Then turn right on Central Boulevard.<br><code>Go down</code> Oak Street. Next, <code>turn left</code> on Valley Road.<br><code>Go right</code> on Central Boulevard.<br><code>Make a left</code> on Valley Road.</p>
<h2 id="3-Asking-for-directions-to-a-business"><a href="#3-Asking-for-directions-to-a-business" class="headerlink" title="3. Asking for directions to a business"></a>3. Asking for directions to a business</h2><ul>
<li>take the train</li>
<li>go by ferry  [‘ferɪ]</li>
<li>take the subway</li>
<li>ride the streetcar 有轨电车</li>
<li>go on foot</li>
<li>ride a bike</li>
</ul>
<p><img src="/images/english/ef-l3u2l3.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>A: ABC Company. How can I help you?</td>
<td></td>
</tr>
<tr>
<td>B: I have a meeting at your company today. Can you tell me <code>how to get to your office</code>, please?</td>
<td></td>
</tr>
<tr>
<td>A: Where are you coming from ?</td>
<td></td>
</tr>
<tr>
<td>B: I’m in front of the Regency Hotel on Park Drive. I’m walking.</td>
<td></td>
</tr>
<tr>
<td>A: Oh, OK. First, <code>go north on Park Drive for two blocks</code>, and make a right on Seventh Avenue.</td>
<td></td>
</tr>
<tr>
<td>B: North on Park, turn right on Seventh.</td>
<td></td>
</tr>
<tr>
<td>A: Correct. Next, go one block  on Seventh, and take a left on Chase Street. Our building is on the right   - number 729. We’re on the third floor  . Our office is number 316.</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><strong>Visit a business</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>How do I get to your office, please?</td>
<td></td>
</tr>
<tr>
<td>Can you please tell me how to get there?</td>
<td></td>
</tr>
<tr>
<td>How are you coming?</td>
<td></td>
</tr>
<tr>
<td>How long does it take?</td>
<td></td>
</tr>
<tr>
<td>It takes about 20 to 30 minutes.</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="4-Describing-the-location-of-a-city"><a href="#4-Describing-the-location-of-a-city" class="headerlink" title="4. Describing the location of a city"></a>4. Describing the location of a city</h2><ul>
<li>east coast</li>
<li>kilometers</li>
<li>ocean, desert</li>
<li>forest, hills, valley</li>
</ul>
<p><img src="/images/english/ef-l3u2l4-1.png" alt=""></p>
<blockquote>
<p>California [,kælɪ’fɔ:njə], summertime</p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>[CARLOS]  That’s my hometown.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] best! on the esat coast. Where is Rio?</td>
<td></td>
</tr>
<tr>
<td>[CARLOS] It’s in the south. down here.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] How far is it from Salvador to Rio?</td>
<td></td>
</tr>
<tr>
<td>[CARLOS] It’s about 1200 kilometers</td>
<td></td>
</tr>
<tr>
<td>[SALLY] So you live on the coast.  I love the ocean，Do you know Big Sur?</td>
<td></td>
</tr>
<tr>
<td>[CARLOS] No, Where’s that?</td>
<td></td>
</tr>
<tr>
<td>[SALLY] It’s in California. It’s in the mountains, but it’s also on the coast.</td>
<td></td>
</tr>
<tr>
<td>[SALLY] There it is, on the west coast. It’s so beautiful there. In the summertime, you can go camping…</td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="/images/english/ef-l3u2l4.png" alt=""></p>
<h2 id="Expressions"><a href="#Expressions" class="headerlink" title="Expressions"></a>Expressions</h2><p>A: Let’s go to the coffee shop.<br>B: How far is it?<br>A: It’s only two blocks.<br>A: How far is it from your house to the beach?<br>B: It’s about two kilometers.</p>
<h2 id="Reading"><a href="#Reading" class="headerlink" title="Reading"></a>Reading</h2><p>Rio de Janeiro is a big city in the south of Brazil. It’s on the east coast of the country. Rio has beautiful beaches on the Atlantic Ocean. Two very famous beaches are Ipanema and Copacabana. Rio also is in the mountains. Sugarloaf is the name of a very famous mountain in Rio.</p>
<h2 id="Writing"><a href="#Writing" class="headerlink" title="Writing"></a>Writing</h2><p>My hometown is China Hangzhou. It sits at the head of Hangzhou Bay, which separates Shanghai and Ningbo.  The city has many beautiful old buildings、temple and a lot of parks. The Qian Tang River is the city’s civilization. The city’s West Lake is its best-known attraction. and G20 economic conference to be held here. Many people like to visit west lake. </p>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ef-l3u1-Hobbies-and-interests" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/08/07/ef-l3u1-Hobbies-and-interests/"><strong>Hobbies and interests</strong></a>
      <small class=article-date-index>&nbsp; 2016-08-07</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/08/07/ef-l3u1-Hobbies-and-interests/" class="article-date">
  <time datetime="2016-08-06T22:59:16.000Z" itemprop="datePublished">2016-08-07</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/English/">English</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/08/07/ef-l3u1-Hobbies-and-interests/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <style>
img {
        display: block !important;
        width: 500px;
        margin-left: 200px !important;
}
</style>

<h2 id="1-Talking-about-your-hobbies-and-interests"><a href="#1-Talking-about-your-hobbies-and-interests" class="headerlink" title="1. Talking about your hobbies and interests"></a>1. Talking about your hobbies and interests</h2><ul>
<li>stamp collecting、taking photographs</li>
<li>woodworking、reading、running</li>
<li>cooking、drawing、sewing [ˈsəʊɪŋ] </li>
</ul>
<p><img src="/images/english/ef-l3u1l1-2.png" alt=""></p>
<ul>
<li>traveling、oil painting、gardening、camping</li>
<li>birdwatching、grow vegetables</li>
<li>going to the theater [‘θɪətə]</li>
<li>going to an exhibit [ɪg’zɪbɪt]</li>
<li>collecting comic books [‘kɒmɪk]</li>
</ul>
<p><img src="/images/english/ef-l3u1l2-1.png" alt=""></p>
<h3 id="be-good-at-be-interested-in"><a href="#be-good-at-be-interested-in" class="headerlink" title="be good at = be interested in"></a>be good at = be interested in</h3><p>A: <font color="#c7254e">What are you interested in?</font>  </p>
<p>A: What do you like doing?<br>B: I’m into doing things at home.  </p>
<p>A: Are you good at (interested in) cooking?<br>B: She’s good at drawing.</p>
<p>A: <font color="#c7254e">What do you like to do in your free time?</font><br>B: I enjoy stamp collecting.<br>B: I like getting together with friends.</p>
<h2 id="2-Asking-people-about-their-interests"><a href="#2-Asking-people-about-their-interests" class="headerlink" title="2. Asking people about their interests"></a>2. Asking people about their interests</h2><p>A: <font color="#c7254e">How often</font> do you travel?<br>B: Well, I go to China every summer.</p>
<p>A: <font color="#c7254e">Do you ever</font> go fishing?<br>B: No, I don’t. </p>
<p>A : <font color="#c7254e">What do you usually do?</font><br>B : Well, I watch TV. And I sometimes read comic books.</p>
<p>A: I do fun things near home.<br>B: <font color="#c7254e">Like what?</font><br>A: Like collecting comic books.  </p>
<p>A: <font color="#c7254e">What else do you like to do?</font><br>B: Well, I really like gardening.</p>
<h3 id="frequency"><a href="#frequency" class="headerlink" title="frequency"></a>frequency</h3><p>100% = always、80% = usually、60% = often<br>40% = sometimes、20% = rarely、0% = never  </p>
<h2 id="3-Talking-about-musical-instruments"><a href="#3-Talking-about-musical-instruments" class="headerlink" title="3. Talking about musical instruments"></a>3. Talking about musical instruments</h2><ul>
<li>cello piano guitar</li>
<li>violin trumpet drums</li>
<li>flute saxophone</li>
</ul>
<p><img src="/images/english/ef-l3u1l3-1.png" alt=""></p>
<p>Three people in my family can play a <code>musical instrument</code>. I play the saxophone. My father and mother play the violin. My sister can’t play an instrument, but she can sing. Sometimes, people ask us to play a song.</p>
<p><strong>My Piano and Me</strong></p>
<p>I’m really into my piano. It’s very old and has a beautiful sound. Sometimes my friends come to my house. They enjoy listening to me play. They always ask me to play a new song. I can say beautiful things with piano music.</p>
<h2 id="4-Making-plans-for-a-visitor"><a href="#4-Making-plans-for-a-visitor" class="headerlink" title="4. Making plans for a visitor"></a>4. Making plans for a visitor</h2><p><img src="/images/english/ef-l3u1l4.png" alt=""></p>
<table>
<thead>
<tr>
<th><strong>Main Dialog</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>[JOAN] Hi. Listen, Carlos, <code>do you have any plans</code> this weekend?</td>
<td></td>
</tr>
<tr>
<td>[Carlos] No , Why?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Gonzales is visiting. He’s the manager of the Mexico City office. And I’m <code>out of town</code> all weekend.</td>
<td></td>
</tr>
<tr>
<td>[Carlos] Right?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Can you show him around? Carlos  It’s really important.</td>
<td></td>
</tr>
<tr>
<td>[Carlos] Of course，show him around。 <code>What&#39;s He interested in</code>?</td>
<td></td>
</tr>
<tr>
<td>[JOAN] I know he enjoys eating out.</td>
<td></td>
</tr>
<tr>
<td>[CARLOS] Well, I know a lot of good restaurants.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Oh, and he’s really into art.</td>
<td></td>
</tr>
<tr>
<td>[CARLOS] There’s probably a good exhibition at the art museum.</td>
<td></td>
</tr>
<tr>
<td>[JOAN] Great. Thank you. Look - you can have two extra days’ vacation for this.</td>
<td></td>
</tr>
<tr>
<td>[CARLOS] really? Thanks.</td>
<td></td>
</tr>
</tbody>
</table>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ops-macosx-update-python-version" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/08/04/ops-macosx-update-python-version/"><strong>MAC OSX Update Python Version</strong></a>
      <small class=article-date-index>&nbsp; 2016-08-04</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/08/04/ops-macosx-update-python-version/" class="article-date">
  <time datetime="2016-08-04T08:43:21.000Z" itemprop="datePublished">2016-08-04</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/devops/">devops</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/08/04/ops-macosx-update-python-version/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>by update Python 3.5.2 as example</p>
</blockquote>
<h2 id="1-Download"><a href="#1-Download" class="headerlink" title="1. Download"></a>1. Download</h2><ul>
<li><a href="https://www.python.org/downloads/mac-osx/" target="_blank" rel="external">https://www.python.org/downloads/mac-osx/</a></li>
<li>Latest Python 3 Release - Python 3.5.2</li>
</ul>
<h2 id="2-Install"><a href="#2-Install" class="headerlink" title="2. Install"></a>2. Install</h2><ul>
<li>python-3.5.2-macosx10.6.pkg</li>
</ul>
<h2 id="3-Update"><a href="#3-Update" class="headerlink" title="3. Update"></a>3. Update</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#python版号需要修改两个地方</span></span><br><span class="line"><span class="comment">#1. new_version</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#sudo -i #得到超级权限</span></span><br><span class="line">new_version=<span class="string">"3.5"</span></span><br><span class="line"></span><br><span class="line">PYPATH=/System/Library/Frameworks/Python.framework/Versions/<span class="string">"<span class="variable">$new_version</span>"</span></span><br><span class="line"><span class="comment">#第1步 移动新版python到mac默认目录下</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"move.."</span></span><br><span class="line">mv /Library/Frameworks/Python.framework/Versions/<span class="string">"<span class="variable">$new_version</span>"</span> /System/Library/Frameworks/Python.framework/Versions/</span><br><span class="line"><span class="comment">#第2步 改变用户目录的用户组</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"chown.."</span></span><br><span class="line">chown -R root:wheel <span class="variable">$&#123;PYPATH&#125;</span></span><br><span class="line"><span class="comment">#第3步 删除原来2.7的链接文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"del.."</span></span><br><span class="line">rm /System/Library/Frameworks/Python.framework/Versions/Current</span><br><span class="line"><span class="comment">#第4步 重新链接到最新版本的python</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ln.."</span></span><br><span class="line">ln <span class="_">-s</span> <span class="variable">$&#123;PYPATH&#125;</span> /System/Library/Frameworks/Python.framework/Versions/Current</span><br><span class="line"><span class="comment">#第5步 删除旧的命令符号链接</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"rm.."</span></span><br><span class="line">rm /usr/bin/&#123;pydoc,python,pythonw,python-config&#125;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"ln bin.."</span></span><br><span class="line"><span class="comment">#第6步 重新建立新的命令符号链接</span></span><br><span class="line">ln <span class="_">-s</span> <span class="variable">$&#123;PYPATH&#125;</span>/bin/pydoc<span class="string">"<span class="variable">$new_version</span>"</span> /usr/bin/pydoc</span><br><span class="line">ln <span class="_">-s</span> <span class="variable">$&#123;PYPATH&#125;</span>/bin/python<span class="string">"<span class="variable">$new_version</span>"</span> /usr/bin/python</span><br><span class="line">ln <span class="_">-s</span> <span class="variable">$&#123;PYPATH&#125;</span>/bin/pythonw<span class="string">"<span class="variable">$new_version</span>"</span> /usr/bin/pythonw</span><br><span class="line">ln <span class="_">-s</span> <span class="variable">$&#123;PYPATH&#125;</span>/bin/python<span class="string">"<span class="variable">$new_version</span>"</span>m-config /usr/bin/python-config</span><br><span class="line"></span><br><span class="line">python_param_list=`<span class="built_in">cd</span> /usr/<span class="built_in">local</span>/bin &amp;&amp; ls -al |grep <span class="string">"Python"</span>|awk <span class="string">'ORS=" " &#123;print $9&#125;'</span>`</span><br><span class="line"><span class="comment">#第7步 修复其他链接</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$python_param_list</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"info: <span class="variable">$i</span>"</span></span><br><span class="line">    rm <span class="_">-f</span> /usr/<span class="built_in">local</span>/bin/<span class="variable">$&#123;i&#125;</span></span><br><span class="line">    ln -sv /System/Library/Frameworks/Python.framework/Versions/<span class="string">"<span class="variable">$new_version</span>"</span>/bin/<span class="variable">$&#123;i&#125;</span> /usr/<span class="built_in">local</span>/bin/<span class="variable">$&#123;i&#125;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#第8步 环境变量要修改为最新的版本号</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH=/System/Library/Frameworks/Python.framework/Versions/3.5/bin:$&#123;PATH&#125;'</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH=/System/Library/Frameworks/Python.framework/Versions/3.5/bin:$&#123;PATH&#125;'</span> &gt;&gt; ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> <span class="comment">#退出超级权限</span></span><br></pre></td></tr></table></figure>
<h2 id="4-Verifiy"><a href="#4-Verifiy" class="headerlink" title="4. Verifiy"></a>4. Verifiy</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">➜  ~ Python -V</span><br><span class="line">Python 3.5.2</span><br><span class="line">➜  ~</span><br></pre></td></tr></table></figure>
<h2 id="5-Refence-article"><a href="#5-Refence-article" class="headerlink" title="5. Refence article"></a>5. Refence article</h2><ul>
<li><a href="http://blog.csdn.net/wirelessqa/article/details/23261723" target="_blank" rel="external">老毕码农</a></li>
<li><a href="http://www.jianshu.com/p/1a002847265e" target="_blank" rel="external">mac pycharm 切换PYTHON版本</a></li>
</ul>

      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-py-language-1-data-analysis-environment" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/08/02/py-language-1-data-analysis-environment/"><strong>Python Data Mining and Analysis environment</strong></a>
      <small class=article-date-index>&nbsp; 2016-08-02</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/08/02/py-language-1-data-analysis-environment/" class="article-date">
  <time datetime="2016-08-02T08:43:21.000Z" itemprop="datePublished">2016-08-02</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/python/">python</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/08/02/py-language-1-data-analysis-environment/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>这是用 Python 进行数据分析挖掘的一小部分，包括 高维数组、数值计算、机器学习、神经网络 和 语言模型等。</p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2016/08/02/py-language-1-data-analysis-environment/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-elasticsearch-0-install-plugins" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/05/17/elasticsearch-0-install-plugins/"><strong>Elasticsearch installation plugins</strong></a>
      <small class=article-date-index>&nbsp; 2016-05-17</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/05/17/elasticsearch-0-install-plugins/" class="article-date">
  <time datetime="2016-05-17T07:59:16.000Z" itemprop="datePublished">2016-05-17</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/hadoop/">hadoop</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/05/17/elasticsearch-0-install-plugins/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Elasticsearch 扩展性非常好，有很多官方和第三方开发的插件</p>
</blockquote>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2016/05/17/elasticsearch-0-install-plugins/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-elasticsearch-1-indoor" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/05/17/elasticsearch-1-indoor/"><strong>Elasticsearch * 入门</strong></a>
      <small class=article-date-index>&nbsp; 2016-05-17</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/05/17/elasticsearch-1-indoor/" class="article-date">
  <time datetime="2016-05-17T07:59:16.000Z" itemprop="datePublished">2016-05-17</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/hadoop/">hadoop</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/05/17/elasticsearch-1-indoor/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>Elasticsearch 是一个基于Apache Lucene(TM)的开源搜索引擎、<code>实时分布式搜索</code>和<code>分析引擎</code>。</p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2016/05/17/elasticsearch-1-indoor/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-ml-math-distance-formula-of-point-to-plain" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/05/17/ml-math-distance-formula-of-point-to-plain/"><strong>点到平面的距离公式</strong></a>
      <small class=article-date-index>&nbsp; 2016-05-17</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/05/17/ml-math-distance-formula-of-point-to-plain/" class="article-date">
  <time datetime="2016-05-17T07:07:21.000Z" itemprop="datePublished">2016-05-17</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/machine-learning/">machine-learning</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/05/17/ml-math-distance-formula-of-point-to-plain/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX"],
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      displayMath: [ ['$$','$$'], ['\[','\]'] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML,http://myserver.com/MathJax/config/local/local.js">
</script>

<p>平面的一般式方程, 向量的模（长度）, 向量的数量积, 点到平面的距离</p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2016/05/17/ml-math-distance-formula-of-point-to-plain/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <article id="post-spark-machine-learning-p1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <myh11 itemprop="name">
      <a class="article-title-index" href="/2016/04/25/spark-machine-learning-p1/"><strong>Spark Machine Learning p1 - Spark编程入门</strong></a>
      <small class=article-date-index>&nbsp; 2016-04-25</small>
      <!--<a>
      <div = post.date  </div>
      </a>-->
    </myh11>
  


      </header>
    
    <div class="article-meta">
      <!--<a href="/2016/04/25/spark-machine-learning-p1/" class="article-date">
  <time datetime="2016-04-25T02:07:21.000Z" itemprop="datePublished">2016-04-25</time>
</a>-->
      <!--
  <div class="article-category-index">
    <a class="article-category-index-link" href="/categories/spark/">spark</a>
  </div>

-->
      <!--
      
        <div class="article-comment-link-wrap">
          <a href="http://iequa.com/2016/04/25/spark-machine-learning-p1/#disqus_thread" class="article-comment-link">Comments</a>
        </div>
      
      -->
    </div>
	
    <div class="article-entry" itemprop="articleBody">
      
        <p>Spark 的环境搭建与运行, 接触了 RDD 与 SparkContext, 启动 Spark-Shell 以及如何使用 Scala、Python 编写 Spark 程序. </p>
         
          <!-- @2018-08-27 blair add
          <p class="article-more-link">
            <a href="/2016/04/25/spark-machine-learning-p1/">Read More</a>
          </p> 
          @2018-08-27 blair end
          -->
        
      
    </div>
	
    <!--
	
    -->
    <!--
    
      <footer class="article-footer">
      </footer>
    
    -->
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/15/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/17/">Next &raquo;</a>
      </nav>
    

</section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Libin Chan&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/52binge/hexo-theme-blairos">blairos</a>
    </div>
  </div>
</footer>

    
<script type="text/javascript"> <!-- add by blair 0724 type=text/javascript -->
  var disqus_shortname = 'blairos-sn';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>
